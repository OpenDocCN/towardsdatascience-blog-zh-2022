<html>
<head>
<title>Building a named entity extractor for COVID-19 risk factors</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">为新冠肺炎风险因素构建命名实体提取器</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/building-a-named-entity-extractor-for-covid-19-risk-factors-cb9bf9022b5e#2022-01-17">https://towardsdatascience.com/building-a-named-entity-extractor-for-covid-19-risk-factors-cb9bf9022b5e#2022-01-17</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""><h1 id="77d6" class="pw-post-title io ip iq bd ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm bi translated">为新冠肺炎风险因素构建命名实体提取器</h1></div><div class=""><h2 id="2e07" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">如何从大量数据中提取信息</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/6b7d32ca3c7916ea95c5145bba0e7ec5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*pJt9UGHYaelofMxo"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">照片由<a class="ae kv" href="https://unsplash.com/@ryunosuke_kikuno?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">龙之介·菊野</a>在<a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</p></figure><p id="4020" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如何从成千上万的文档中提取包含在几个句子中的信息？你如何标注一个巨大的文本语料库？</p><p id="1ffe" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在本教程中，我们训练并构建了一个命名实体识别器(NER ),使用最大的可用医疗数据集之一来检测新冠肺炎风险因素。</p><h1 id="aec2" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">数据集:cord-19</h1><p id="7026" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">cord-19数据集汇集了超过50万篇关于新冠肺炎和其他冠状病毒相关疾病的研究论文，并由AllenAI研究所定期更新。本教程使用的数据遵循了与github存储库中显示的数据集相似的处理:<a class="ae kv" href="https://github.com/allenai/cord19" rel="noopener ugc nofollow" target="_blank">https://github.com/allenai/cord19</a>。</p><p id="66db" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们的目标是找到医学论文中提到的导致严重COVID的主要危险因素。</p><h1 id="ebdb" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">我们如何继续注释这个？</h1><p id="8736" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">使用像这样的大型语料库的一个问题是，信息只会出现在几十万个文档的几个段落中。这就像大海捞针。我们如何标注这样一个语料库？唯一的方法是将问题缩小到可能包含我们需要的信息的较小的文档子集。为此，我们可以使用正则表达式或其他类似的规则，首先搜索可能拥有我们需要的信息的候选对象。</p><p id="ed1c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">为了探索和注释这个数据集，我们使用开源库<a class="ae kv" href="https://github.com/dataqa/dataqa" rel="noopener ugc nofollow" target="_blank"> DataQA </a>，这是一个基于Python和React的库，用于数据探索和标记。这个python包包括elasticsearch文本搜索引擎，可以很容易地与pip一起安装。</p><p id="a4e3" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们首先为命名实体识别创建一个项目并上传数据。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi mp"><img src="../Images/e3e64496ab5ac960ce2586b49a0de399.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*xM2G7q49HkqnWjDv-xDzbA.gif"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">在DataQA上为cord-19数据集创建一个新的NER项目。</p></figure><p id="cacc" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在我们的文档被上传和索引后，我们需要缩小可能包含我们想要的信息的一些段落的范围。为了实现这一点，我们可以创建我们的第一个规则。规则如下:文档必须包含带有“风险因素”一词的句子，以及多个已知风险因素中的一个，如“年龄”、“肥胖”等。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi mq"><img src="../Images/c2a61517404cb3b7c197b9a5c3adb66c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ng9e4CmS_QSO-H_sv7coHw.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">缩小包含“风险因素”和多个已知风险因素之一的句子的文档范围的规则。</p></figure><p id="b183" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">此规则将查找包含总结了迄今已知的所有新冠肺炎风险因素的句子的文档。这样的搜索对于主要关注关键词搜索的标准搜索引擎来说是不可能的。DataQA还将使用规则预先标记所有已知的风险因素，使手动过程更加高效。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi mr"><img src="../Images/77368e103f56024675a8b741995e7352.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*_IlGTPN78r-KK2iyyBY33Q.gif"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">预先标记的示例:该规则自动提取风险因素，从而更快地标记文档。</p></figure><p id="de7d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们包括了另一个规则，这是一个稍微不同的方式来表达同样的想法:文件必须包含一个句子，要么“风险”，然后是“住院/住院”(或以相反的顺序)，然后是一个已知的风险因素。</p><p id="01b8" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">一旦我们有了这些规则，我们就可以用规则中的前标签来注释文档，或者进行搜索。在搜索中，我们应用规则作为过滤器，并搜索covid的提及，因为有许多论文讨论了其他不相关条件的风险因素。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ms"><img src="../Images/e95abebc5069ccf90497cd86fa18dc06.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*j03ekf4y1XK6OsL9aNPOWA.gif"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">同时有效搜索和标记文本的例子。</p></figure><p id="b173" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这样做了一段时间后，我们得到了一个由42个文档组成的小标签集，我们用它来训练命名实体提取器。这是一个小的训练数据集，我们的目标是看看我们是否可以快速训练NER来检测更多的风险因素，而不需要做任何额外的手动标记。</p><h1 id="3776" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">用空间建造NER</h1><p id="5e79" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">我们使用Spacy来基于我们刚刚注释的数据构建命名实体提取器。我们首先需要准备训练数据。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mt mu l"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">准备来自DataQA的标记数据以用作训练数据。</p></figure><p id="833c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">然后，训练我们的NER的代码如下。我们使用一个Spacy管道，增加一个句子分割器来检测句子边界，并用一个新的只有“风险因素”作为实体的NER步骤来代替默认的步骤。然后以小批量训练管道，以避免过度配合。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mt mu l"/></div></figure><h1 id="16e4" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">发现新提及的风险因素</h1><p id="7d32" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">一旦我们训练了我们的NER，我们就可以在一组未标记的文档样本上运行它，看看我们是否能找到一组在手动标记过程中没有识别出的新的风险因素。这里值得一提的是，我们正在对上述规则挑选出的文档运行我们的模型，以避免得到太多的误报。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mt mu l"/></div></figure><p id="b57d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">以下是一些由NER确定的风险因素的例子，这些因素没有被人工标记:神经肌肉疾病、种族/民族、孕前肥胖等。</p><p id="aea0" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">总而言之，将我们所有的发现放在一起，文献中提到的严重covid的前20个风险因素按样本中提到它们的论文数量排列如下:</p><pre class="kg kh ki kj gt mv mw mx my aw mz bi"><span id="6d7b" class="na lt iq mw b gy nb nc l nd ne">[('diabetes', 87),<br/> ('hypertension', 84),<br/> ('age', 79),<br/> ('obesity', 67),<br/> ('smoking', 36),<br/> ('sex', 27),<br/> ('cardiovascular disease', 27),<br/> ('gender', 27),<br/> ('older age', 20),<br/> ('copd', 19),<br/> ('asthma', 18),<br/> ('male sex', 18),<br/> ('chronic kidney disease', 16),<br/> ('chronic obstructive pulmonary disease', 14),<br/> ('bmi', 13),<br/> ('pneumonia', 13),<br/> ('therapy', 12),<br/> ('cardiovascular', 11),<br/> ('cancer', 11),<br/> ('diabetes mellitus', 11)]</span></pre><p id="efd2" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">一些风险因素指向相同的潜在实体(例如，“年龄”和“老年”是相同的风险因素)，并且“治疗”是不属于该列表的错误位置。然而，这个列表让我们对文献中讨论的关键因素有了一些了解。</p><h1 id="cb1a" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">长covid呢？</h1><p id="17ce" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">鉴于数据的缺乏，很少有论文讨论长COVID的风险因素。因此，搜索这些提及具有挑战性，因为信息很少。</p><p id="43de" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们使用与之前相同的方法来筛选可能的候选人。这一次，论文的数量少了很多，所以我们可以直接获得信息。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nf"><img src="../Images/ded2cff6151daf5e66eb643119d9e2b9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*KNDbl63pSx4aQWdWaSCj4A.gif"/></div></div></figure><p id="3e6d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">经过快速搜索，我们发现了大量引用女性、年龄增长、身体质量指数增加以及第一周报告的症状数量的论文，作为新冠肺炎患者是否会发展为长期COVID的预测特征。</p></div><div class="ab cl ng nh hu ni" role="separator"><span class="nj bw bk nk nl nm"/><span class="nj bw bk nk nl nm"/><span class="nj bw bk nk nl"/></div><div class="ij ik il im in"><p id="801e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><em class="nn">如果您想了解更多关于DataQA的数据探索，请前往我们的</em> <a class="ae kv" href="https://github.com/dataqa/dataqa" rel="noopener ugc nofollow" target="_blank"> <em class="nn">资源库</em> </a> <em class="nn">获取更多教程和示例。我们还提供该产品的企业版，可以直接处理pdf文件(查看我们的</em> <a class="ae kv" href="https://dataqa.ai/" rel="noopener ugc nofollow" target="_blank"> <em class="nn">网站</em> </a> <em class="nn">)。别忘了留下一颗星来支持这个开源项目:-) </em></p></div></div>    
</body>
</html>