<html>
<head>
<title>Interactive Data Visualization with Julia and Pluto Notebooks</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Julia和Pluto笔记本进行交互式数据可视化</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/interactive-data-visualization-with-julia-and-pluto-notebooks-6fad6f3eca2#2022-01-12">https://towardsdatascience.com/interactive-data-visualization-with-julia-and-pluto-notebooks-6fad6f3eca2#2022-01-12</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""><h1 id="a448" class="pw-post-title ir is it bd iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp bi translated">使用Julia和Pluto笔记本进行交互式数据可视化</h1></div><div class=""><h2 id="9256" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">Pluto是一项重要的发展，它允许您轻松地与数据进行交互。我们使用Julia绘图包快速浏览一下，轻松创建令人印象深刻的图表。</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ki"><img src="../Images/fe13a6d49c37e5960b57b317b5de2cd6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/format:webp/0*9D8vdNMpXS2qBiyV.png"/></div><p class="kq kr gj gh gi ks kt bd b be z dk translated">一些朱莉娅情节-作者图片</p></figure><p id="11e4" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">有人认为朱莉娅是新的巨蟒。如果这是真的，那么冥王星可能就是新的木星笔记本。</p><p id="aa6c" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">我们将非常简要地看一下如何在Julia中绘制图表，同时，稍微熟悉一下(相当)新的Pluto笔记本和它们的交互特性。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="lq lr l"/></div><p class="kq kr gj gh gi ks kt bd b be z dk translated">我们将开发的交互的预览图——图片由作者提供</p></figure><p id="734e" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">Pluto是Jupyter笔记本上Julia语言的一个改进，我预测，我们将来会更多地使用它。</p><p id="d616" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">对于以下内容，我不假设任何知识的朱莉娅或布鲁托。</p><h1 id="55bb" class="ls lt it bd lu lv lw lx ly lz ma mb mc jz md ka me kc mf kd mg kf mh kg mi mj bi translated">朱莉娅</h1><p id="454a" class="pw-post-body-paragraph ku kv it kw b kx mk ju kz la ml jx lc ld mm lf lg lh mn lj lk ll mo ln lo lp im bi translated">Julia是一种相对较新的语言，具有高级语法，旨在易于使用和理解。</p><p id="5226" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">然而，与Python不同的是，它是一种编译语言，这意味着尽管它像Python一样容易编写，但它运行得更快，因为它被转换为更容易被计算机理解的低级代码。如果您必须处理需要大量处理的大型数据集，这非常有用。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi mp"><img src="../Images/970820dbdb7f259894f12df191440c1a.png" data-original-src="https://miro.medium.com/v2/resize:fit:240/format:webp/1*SLq9RlY_Ca-DNV2q0qnzuA.png"/></div><p class="kq kr gj gh gi ks kt bd b be z dk translated">Julia徽标——由Julia项目提供的公共域图像</p></figure><p id="adfa" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">与Python相比，Julia对程序的布局也没有那么挑剔。</p><p id="7350" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">Julia是一种通用语言，拥有现代编程语言的所有特性。在这里，我们将看看Julia的数据可视化功能，它既令人印象深刻又易于使用。</p><p id="a616" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">一旦你安装了Julia和Pluto，你就可以创建运行Julia代码的Pluto笔记本，执行它们并导出为HTML、PDF或独立的Julia程序。您可以将可视化保存为标准的<em class="mq"> png </em>文件，并将其保存到您的文档中。</p><h2 id="a607" class="mr lt it bd lu ms mt dn ly mu mv dp mc ld mw mx me lh my mz mg ll na nb mi nc bi translated">普路托</h2><p id="f3b4" class="pw-post-body-paragraph ku kv it kw b kx mk ju kz la ml jx lc ld mm lf lg lh mn lj lk ll mo ln lo lp im bi translated">冥王星是一个笔记本环境，让人想起Jupyter，但有一些显著的不同。有了Jupyter，你很容易就能找到一种新的笔记本电脑，它会给你带来与以前不同的结果。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nd"><img src="../Images/8d406b07103a961e8523975c8694d645.png" data-original-src="https://miro.medium.com/v2/resize:fit:450/format:webp/1*AdhDNsNqXela8898n-XWNA.png"/></div><p class="kq kr gj gh gi ks kt bd b be z dk translated">Pluto徽标—图片由Pluto作者提供(麻省理工学院许可)</p></figure><p id="fb30" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">在Jupyter中，每个单元都是单独运行的，但是所有单元都可以访问所有全局声明的变量，无论它们被分配到哪个单元。例如，假设我们有三个细胞，这一个</p><pre class="kj kk kl km gt ne nf ng nh aw ni bi"><span id="efd8" class="mr lt it nf b gy nj nk l nl nm">a = 13</span></pre><p id="1035" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">接下来是这个，</p><pre class="kj kk kl km gt ne nf ng nh aw ni bi"><span id="aff0" class="mr lt it nf b gy nj nk l nl nm">print(a)</span></pre><p id="455d" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">接下来是这个，</p><pre class="kj kk kl km gt ne nf ng nh aw ni bi"><span id="c90c" class="mr lt it nf b gy nj nk l nl nm">a = 10</span></pre><p id="7d3b" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">如果运行整个笔记本，第二个单元格将打印出值13。但是如果你单独运行第二个单元格，它将打印出10。您可能会认为运行相同的代码但得到不同的结果不是最佳的。</p><p id="1e2c" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">更糟糕的是，如果您删除第一个和第三个单元格，然后运行第二个单元格，它仍然会打印出一个值，因为该变量的值仍然存在于笔记本中，即使定义它的单元格已被删除。</p><p id="9222" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">这不可能发生在冥王星。Pluto跟踪单元依赖关系，并根据需要更新它们。在上面的例子中，一旦第三个单元被执行，Pluto将检测到第二个单元需要被更新，并这样做。在第一个和第三个单元格被删除的情况下，Pluto将重新运行第二个单元格，它将检测到该变量不再存在并报告相应的错误。</p><h1 id="430b" class="ls lt it bd lu lv lw lx ly lz ma mb mc jz md ka me kc mf kd mg kf mh kg mi mj bi translated">安装朱莉娅和布鲁托</h1><p id="2bdc" class="pw-post-body-paragraph ku kv it kw b kx mk ju kz la ml jx lc ld mm lf lg lh mn lj lk ll mo ln lo lp im bi translated">要安装Julia，你需要去<a class="ae nn" href="https://julialang.org/" rel="noopener ugc nofollow" target="_blank">https://julialang.org/</a>下载适合你操作系统的版本。安装很简单，只需按照说明操作。</p><p id="1685" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">一旦你安装了它，你需要做几件事情。因此，启动Julia，您将在如下窗口中看到命令提示符:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="np nq di nr bf ns"><div class="gh gi no"><img src="../Images/a30081a091f414f5cfc13eb5b14b3a5f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Y6cG9ISECEzqhA8OcHzeHQ.png"/></div></div></figure><p id="3662" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">第一件事是安装冥王星。在提示符下键入]，然后输入<code class="fe nt nu nv nf b">add Pluto</code>:</p><pre class="kj kk kl km gt ne nf ng nh aw ni bi"><span id="b3e3" class="mr lt it nf b gy nj nk l nl nm">julia&gt; ]<br/>pkg&gt; add Pluto</span></pre><p id="4cbc" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">方括号告诉Julia您将使用包管理器，而<code class="fe nt nu nv nf b">Pluto</code>是您将要添加的包。</p><p id="e816" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">要返回Julia提示符，请在空行上按backspace或Ctrl-C。</p><p id="7a81" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">在一个正常的Julia程序中，我们需要添加更多的包，但是Pluto会自动为我们处理这些，所以接下来我们需要做的就是运行它。</p><pre class="kj kk kl km gt ne nf ng nh aw ni bi"><span id="ead1" class="mr lt it nf b gy nj nk l nl nm">julia&gt; import Pluto<br/>julia&gt; Pluto.run()</span></pre><p id="cb59" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">这将在浏览器中启动Pluto(Pluto的人推荐最新版本的Firefox或Chrome)。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nw"><img src="../Images/93f7b3dbc1ffb26fa97d115e4e3151d3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1280/format:webp/1*8mqLjXUvQAKkFkOQr0d9Kg.png"/></div><p class="kq kr gj gh gi ks kt bd b be z dk translated">冥王星欢迎屏幕——作者图片</p></figure><p id="6c6b" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">点击<code class="fe nt nu nv nf b">new notebook</code>，我们将开始。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="np nq di nr bf ns"><div class="gh gi nx"><img src="../Images/b5adc8d348326dc1fb2ae1dc6960a4a9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*o530Zjwo9VeKTgPNjRjk7w.png"/></div></div><p class="kq kr gj gh gi ks kt bd b be z dk translated">一个空的冥王星笔记本——作者图片</p></figure><p id="c4f0" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">我们已经准备好了。</p><h1 id="4057" class="ls lt it bd lu lv lw lx ly lz ma mb mc jz md ka me kc mf kd mg kf mh kg mi mj bi translated">朱莉娅·图斯</h1><p id="2abd" class="pw-post-body-paragraph ku kv it kw b kx mk ju kz la ml jx lc ld mm lf lg lh mn lj lk ll mo ln lo lp im bi translated">与大多数其他语言一样，Julia依赖于特定专业用途的代码库。因为我们要研究Julia中的绘图，我们最初对名为<em class="mq"> Plots </em>的包感兴趣。这为我们提供了创建数据可视化的能力。但是我们还需要使用另外两个包，<em class="mq"> CSV </em>和<em class="mq"> DataFrames，</em>来读取CSV文件并将其加载到dataframe中。</p><p id="cc64" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">所以我们需要执行的第一段代码是这样的:</p><pre class="kj kk kl km gt ne nf ng nh aw ni bi"><span id="2aa8" class="mr lt it nf b gy nj nk l nl nm">using Plots, CSV, DataFrames</span></pre><p id="8121" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">注意DataFrames有一个大写字母“F”。</p><p id="08b3" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">你将会看到的是:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="np nq di nr bf ns"><div class="gh gi ny"><img src="../Images/ef30069b6c8f10715806377f33a412da.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*H40PLDSfLdu40mPctOwa-Q.png"/></div></div><p class="kq kr gj gh gi ks kt bd b be z dk translated">准备下载软件包—图片由作者提供</p></figure><p id="e984" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">点击单元格右下角的play按钮，单元格就可以执行了，小云符号告诉我们需要下载三个包。</p><p id="837c" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">运行单元后，云将被标记所取代，表示软件包已成功下载:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="np nq di nr bf ns"><div class="gh gi nz"><img src="../Images/88fb32f148fa185466be9efe26d2b8e7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*69-Z_BprHSUW-08GOc3fcg.png"/></div></div><p class="kq kr gj gh gi ks kt bd b be z dk translated">软件包已下载—图片由作者提供</p></figure><h1 id="d696" class="ls lt it bd lu lv lw lx ly lz ma mb mc jz md ka me kc mf kd mg kf mh kg mi mj bi translated">你的第一次想象</h1><p id="0145" class="pw-post-body-paragraph ku kv it kw b kx mk ju kz la ml jx lc ld mm lf lg lh mn lj lk ll mo ln lo lp im bi translated">Pluto只允许在一个单元中运行一段代码，然而，在<code class="fe nt nu nv nf b">begin</code>和<code class="fe nt nu nv nf b">end</code>块中包含多行代码也是可行的。如果你忘记了，冥王星会提醒你并自动帮你修正。这是我们想要运行的代码。</p><pre class="kj kk kl km gt ne nf ng nh aw ni bi"><span id="161b" class="mr lt it nf b gy nj nk l nl nm">x = 1:10; y = rand(10);<br/>plot(x,y, label="my label")</span></pre><p id="1af2" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">将鼠标悬停在前一个单元格上，点击左下角的<code class="fe nt nu nv nf b">+</code>符号，打开一个新单元格。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="np nq di nr bf ns"><div class="gh gi oa"><img src="../Images/a853de88e2836148c9cde36081deb7a5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ZXnacJuYLYOZtOKS8ASJJQ.png"/></div></div><p class="kq kr gj gh gi ks kt bd b be z dk translated">我们的第二个细胞——作者图片</p></figure><p id="4529" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">现在试着运行它。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="np nq di nr bf ns"><div class="gh gi ny"><img src="../Images/b300df504f7129451c58ba12a69636f0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*38kQZ_N-RVLD-KwK2Wcn2Q.png"/></div></div><p class="kq kr gj gh gi ks kt bd b be z dk translated">一个错误-作者的图像</p></figure><p id="b7cc" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">Pluto已经检测到了这个错误，并给出了两种可能的解决方案，将代码放在begin/end块中，或者将代码分成两个单元。您可以单击两个解决方案中的任何一个。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="np nq di nr bf ns"><div class="gh gi ob"><img src="../Images/e10f66ca2ef1e8c7bf13dd4821b19235.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*tG0zik08ArxYS50HKVkOPA.png"/></div></div><p class="kq kr gj gh gi ks kt bd b be z dk translated">第一张图表—作者提供的图片</p></figure><p id="0371" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">选择修复会自动运行单元格，您可以在代码上方看到结果。</p><p id="e3de" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">需要注意的是:第一次运行单元时，需要一段时间来执行。这是因为Julia需要在第一次运行时编译代码。后续运行将会更快。例如，上面的代码第一次运行需要大约8秒钟(我使用的是普通的Windows笔记本电脑)，但是随后的运行只需要几百微秒。</p><p id="aac8" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">让我解释一下这是怎么回事。</p><pre class="kj kk kl km gt ne nf ng nh aw ni bi"><span id="3238" class="mr lt it nf b gy nj nk l nl nm">x = 1:10; y = rand(10);</span></pre><p id="327d" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">这位代码创建两位数据，一位称为<br/> <code class="fe nt nu nv nf b">x</code>，另一位称为<code class="fe nt nu nv nf b">y</code>。<code class="fe nt nu nv nf b"><em class="mq"> x</em></code>被赋予从1到10的数字范围的值，而<code class="fe nt nu nv nf b">y</code>被赋予10个伪随机数的范围(每个将具有0到1之间的值)。因此，我们在这里有一个图形的基础:一个范围从1到10的x轴和x轴上每个点的y值。</p><p id="c9df" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">下一步很简单。</p><pre class="kj kk kl km gt ne nf ng nh aw ni bi"><span id="ce07" class="mr lt it nf b gy nj nk l nl nm">plot(x,y, label="my label")</span></pre><p id="2871" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">这段代码调用一个函数来绘制图形，我们所做的就是给它x和y值——我们也给了它一个标签。</p><h1 id="2ec6" class="ls lt it bd lu lv lw lx ly lz ma mb mc jz md ka me kc mf kd mg kf mh kg mi mj bi translated">冥王星反应性</h1><p id="7e46" class="pw-post-body-paragraph ku kv it kw b kx mk ju kz la ml jx lc ld mm lf lg lh mn lj lk ll mo ln lo lp im bi translated">现在让我们尝试一些不同的东西来展示冥王星的一个强大的特征。让我们将多行单元格一分为二。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="np nq di nr bf ns"><div class="gh gi oc"><img src="../Images/78744ac4776dd30f22335aeea3e23ee4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*RUueELGVQd8iPsjKUuQp-g.png"/></div></div><p class="kq kr gj gh gi ks kt bd b be z dk translated">新版——作者图片</p></figure><p id="abfe" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">运行细胞给出了一个熟悉的结果。现在再次运行第二个单元。</p><p id="b04b" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">因为数据是随机产生的，所以<code class="fe nt nu nv nf b">x</code>和<code class="fe nt nu nv nf b">y</code>中的值会改变。Pluto将检测到创建绘图的第三个单元格依赖于第二个单元格中的值，然后<strong class="kw iu">自动运行它</strong>以生成更新的绘图。印象深刻？你应该害怕。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="np nq di nr bf ns"><div class="gh gi od"><img src="../Images/a9dc8ab205be5c21d011ecb85ba2906c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*IQ9LzjDAboQYF5gh5yq9aQ.png"/></div></div></figure><p id="1cb4" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">这是冥王星的一个重要特征，确保笔记本始终一致。</p><h1 id="e5d2" class="ls lt it bd lu lv lw lx ly lz ma mb mc jz md ka me kc mf kd mg kf mh kg mi mj bi translated">来自CSV数据的图表</h1><p id="8ce2" class="pw-post-body-paragraph ku kv it kw b kx mk ju kz la ml jx lc ld mm lf lg lh mn lj lk ll mo ln lo lp im bi translated">这很简单，但让我们来看一些真实的数据。</p><p id="9c20" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">我有几个表，我在其他文章中用过。这是一组关于过去几十年英国伦敦天气的数据。我是从英国气象局提供的表格中推导出来的(这些是公共领域的数据，我的版本可以从我的Github库中免费下载)。</p><p id="623b" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">数据记录了每个月记录的最高温度、最低温度、降雨量和日照时数。我有两个文件，一个是几年的数据集，一个是2018年的，只有。它们是CSV格式的，就像您可以导入到电子表格中一样。</p><p id="6d68" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">下面一行将数据读入一个变量<code class="fe nt nu nv nf b">d</code>，它是一个DataFrame。</p><pre class="kj kk kl km gt ne nf ng nh aw ni bi"><span id="d2e8" class="mr lt it nf b gy nj nk l nl nm">dforig = CSV.read("londonweather.csv", DataFrame)</span></pre><p id="9a24" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">运行代码的结果是，我们现在有了一个如下所示的数据表:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi oe"><img src="../Images/6e0d453232bd5d18b3f55dda54aa28cd.png" data-original-src="https://miro.medium.com/v2/resize:fit:934/format:webp/1*5T7oEvQMR1WkZrvv0g2gTw.png"/></div></figure><p id="8e2b" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">我们下载的数据是一个表格，有6栏:<code class="fe nt nu nv nf b">Year</code>、<code class="fe nt nu nv nf b">Month</code>、<code class="fe nt nu nv nf b">Tmax </code>(最高温度)、<code class="fe nt nu nv nf b">Tmin </code>(最低温度)、<code class="fe nt nu nv nf b">Rain </code>(降雨量，单位为毫米)和<code class="fe nt nu nv nf b">Sun </code>(日照时数)。</p><p id="d54b" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">最初，我们只关注一年。因此，让我们在一个新单元格中定义年份:</p><pre class="kj kk kl km gt ne nf ng nh aw ni bi"><span id="36a9" class="mr lt it nf b gy nj nk l nl nm">year = 2018</span></pre><p id="b9c1" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">然后，我们将创建一个新的dataframe，其中包含该年的数据子集。</p><pre class="kj kk kl km gt ne nf ng nh aw ni bi"><span id="5281" class="mr lt it nf b gy nj nk l nl nm">d=filter(:Year =&gt; y -&gt; y==year, dforig)</span></pre><p id="8ac8" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">现在我们将从新的数据框架<code class="fe nt nu nv nf b">d</code>中绘制一些图表。</p><h1 id="644b" class="ls lt it bd lu lv lw lx ly lz ma mb mc jz md ka me kc mf kd mg kf mh kg mi mj bi translated">条形图</h1><p id="67fd" class="pw-post-body-paragraph ku kv it kw b kx mk ju kz la ml jx lc ld mm lf lg lh mn lj lk ll mo ln lo lp im bi translated">要在条形图中绘制每个月的最高温度，我们可以这样做:</p><pre class="kj kk kl km gt ne nf ng nh aw ni bi"><span id="a095" class="mr lt it nf b gy nj nk l nl nm">bar(d.Month, d.Tmax)</span></pre><p id="cca0" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated"><code class="fe nt nu nv nf b">bar</code>是一个绘制条形图的函数(还有什么？)并且我们提供x和y轴的列作为参数。我们通过使用dataframe的名称，后跟列的名称来实现这一点。这两个名字用一个点隔开。</p><p id="c1e4" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">这里，我们将列<code class="fe nt nu nv nf b">Month </code>作为x轴，将<code class="fe nt nu nv nf b">Tmax</code>作为y轴，因此我们在表格中绘制了12个月中每个月的最高记录温度。</p><p id="a659" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">将它放入一个新的代码单元并运行它，您会惊喜地(我希望)看到这个图表:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi of"><img src="../Images/4aa34475ccc2fc5d4ab4f96bc4843768.png" data-original-src="https://miro.medium.com/v2/resize:fit:1202/0*nOxrCkp9h26hf0VE"/></div><p class="kq kr gj gh gi ks kt bd b be z dk translated">条形图—按作者分类的图像</p></figure><p id="5a7f" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">按照英国的标准，七月相当暖和了！</p><h1 id="cf5d" class="ls lt it bd lu lv lw lx ly lz ma mb mc jz md ka me kc mf kd mg kf mh kg mi mj bi translated">折线图</h1><p id="081f" class="pw-post-body-paragraph ku kv it kw b kx mk ju kz la ml jx lc ld mm lf lg lh mn lj lk ll mo ln lo lp im bi translated">如果你想制作一个折线图，你可以做同样的事情，但是使用函数<code class="fe nt nu nv nf b">plot</code></p><pre class="kj kk kl km gt ne nf ng nh aw ni bi"><span id="063f" class="mr lt it nf b gy nj nk l nl nm">plot(d.Month, d.Tmax)</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi og"><img src="../Images/67b67c3a4af9439ac0cea6a0b0ea4ddd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1366/format:webp/1*eBxt2pwSONqVqjg3lSJ34Q.png"/></div><p class="kq kr gj gh gi ks kt bd b be z dk translated">折线图—按作者分类的图像</p></figure><p id="6ba4" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">(注意，在这个图中，我添加了几个参数来隐藏图例并显示标题。)</p><p id="9a74" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">而且，如果你想在同一个图表上绘制最高和最低温度，只需将x值(和标签)放在一个向量中。：</p><pre class="kj kk kl km gt ne nf ng nh aw ni bi"><span id="ee96" class="mr lt it nf b gy nj nk l nl nm">plot(d.Month, [d.Tmax, d.Tmin], label=["Tmax","Tmin"])</span></pre><p id="622c" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">两个值<code class="fe nt nu nv nf b">d.Tmax</code>和<code class="fe nt nu nv nf b">d.Tmin</code> <em class="mq">，</em>在方括号中组合在一起，并用逗号分隔。这是向量或一维数组的符号。此外，我们还为线条添加了标签，这些标签以相同的方式分组。我们得到了这样一个图表:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ki"><img src="../Images/6263f9960b04de30b6e0e872faf4d9f4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/format:webp/0*ffgZG_fqqWNxZHFo.png"/></div></figure><h1 id="b4f1" class="ls lt it bd lu lv lw lx ly lz ma mb mc jz md ka me kc mf kd mg kf mh kg mi mj bi translated">散点图</h1><p id="f4c5" class="pw-post-body-paragraph ku kv it kw b kx mk ju kz la ml jx lc ld mm lf lg lh mn lj lk ll mo ln lo lp im bi translated">或者散点图怎么样？散点图通常用于查看是否可以在数据中检测到模式。这里我们绘制了最高温度与日照时数的关系图。正如你所料，这是一种模式:一种明显的相关性——日照时间越长，气温越高。</p><pre class="kj kk kl km gt ne nf ng nh aw ni bi"><span id="e96f" class="mr lt it nf b gy nj nk l nl nm">scatter(d.Tmax, d.Sun)</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi of"><img src="../Images/e9422eb0682221860fe1b3b331f3d10a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1202/0*BUe28t4LotBxbxCh"/></div></figure><h1 id="333d" class="ls lt it bd lu lv lw lx ly lz ma mb mc jz md ka me kc mf kd mg kf mh kg mi mj bi translated">圆形分格统计图表</h1><p id="489f" class="pw-post-body-paragraph ku kv it kw b kx mk ju kz la ml jx lc ld mm lf lg lh mn lj lk ll mo ln lo lp im bi translated">这是一个饼图，显示了每个月的年降雨量比例。</p><pre class="kj kk kl km gt ne nf ng nh aw ni bi"><span id="27d7" class="mr lt it nf b gy nj nk l nl nm">pie(<a class="ae nn" href="http://localhost:1234/edit?id=080a07f0-7209-11ec-3da3-45f784b1d6fd#d" rel="noopener ugc nofollow" target="_blank">d</a>.Rain)</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="np nq di nr bf ns"><div class="gh gi oh"><img src="../Images/ea4f614387b43ccbe9a1a7ff0f4bd193.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*10UGMy1BUb33eKQWeykJ-g.png"/></div></div></figure><h1 id="a468" class="ls lt it bd lu lv lw lx ly lz ma mb mc jz md ka me kc mf kd mg kf mh kg mi mj bi translated">柱状图</h1><p id="df28" class="pw-post-body-paragraph ku kv it kw b kx mk ju kz la ml jx lc ld mm lf lg lh mn lj lk ll mo ln lo lp im bi translated">现在，我们将加载更多的数据:</p><pre class="kj kk kl km gt ne nf ng nh aw ni bi"><span id="af59" class="mr lt it nf b gy nj nk l nl nm">d2 = CSV.read("londonweather.csv"`, DataFrame)</span></pre><p id="5c67" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">这类似于我们一直使用的数据表，但更大，因为它涵盖了几十年的数据，而不仅仅是一年。这给了我们大量的降雨量数据，这样我们就可以看到伦敦在一段较长的时间内的降雨量分布。</p><pre class="kj kk kl km gt ne nf ng nh aw ni bi"><span id="b3e9" class="mr lt it nf b gy nj nk l nl nm">histogram(d2.Rain, label="Rainfall")</span></pre><p id="6a23" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">这是结果。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ki"><img src="../Images/7a15388e31113d1677f4527f3c2cc488.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/format:webp/1*upHWHxpaORVXZgdjp325sw.png"/></div></figure><h1 id="76ef" class="ls lt it bd lu lv lw lx ly lz ma mb mc jz md ka me kc mf kd mg kf mh kg mi mj bi translated">保存图表</h1><p id="389d" class="pw-post-body-paragraph ku kv it kw b kx mk ju kz la ml jx lc ld mm lf lg lh mn lj lk ll mo ln lo lp im bi translated">在Jupyter环境中看到这些图表当然很好，但是为了有用，我们需要能够保存它们以便在我们的文档中使用它们。</p><p id="7895" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">您可以像这样保存图表:</p><pre class="kj kk kl km gt ne nf ng nh aw ni bi"><span id="084e" class="mr lt it nf b gy nj nk l nl nm">savefig("myhistogram.png")</span></pre><p id="2625" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">运行此代码时，不会显示图表，但会以给定的文件名保存。</p><h1 id="c38f" class="ls lt it bd lu lv lw lx ly lz ma mb mc jz md ka me kc mf kd mg kf mh kg mi mj bi translated">交互性</h1><p id="80cf" class="pw-post-body-paragraph ku kv it kw b kx mk ju kz la ml jx lc ld mm lf lg lh mn lj lk ll mo ln lo lp im bi translated">现在真正有趣的部分来了。使用Pluto，我们可以将一个HTML控件(比如一个滑块)绑定到一个Julia变量。通过这种方式，我们可以交互式地改变绘制的数据。</p><p id="d515" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">从上面的代码中，您需要删除将年份定义为<code class="fe nt nu nv nf b">2018</code>的单元格，并用以下单元格替换它:</p><pre class="kj kk kl km gt ne nf ng nh aw ni bi"><span id="a036" class="mr lt it nf b gy nj nk l nl nm">using PlutoUI</span></pre><p id="3a6a" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">这将安装Pluto UI包，让我们绑定到HTML控件。然后这个:</p><pre class="kj kk kl km gt ne nf ng nh aw ni bi"><span id="04eb" class="mr lt it nf b gy nj nk l nl nm"><a class="ae nn" href="http://twitter.com/bind" rel="noopener ugc nofollow" target="_blank"><strong class="nf iu">@bind</strong></a><strong class="nf iu"> year Slider(1957:2018, default = 1990)</strong></span></pre><p id="8456" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">此代码创建一个滑块，其默认值为1990，范围为1957到2018。并且绑定到变量<code class="fe nt nu nv nf b">year</code>。这个单元格将在笔记本中创建一个滑块元素，当它被调整时,<code class="fe nt nu nv nf b">year</code>的值将被相应地设置。</p><p id="8f98" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">当您将此与所有使用year的单元格的自动更新相结合时，我们会得到一个动态笔记本，它的图表会随着我们移动滑块而自动更新。</p><p id="982e" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">滑块看起来是这样的:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="np nq di nr bf ns"><div class="gh gi oi"><img src="../Images/c37c5801ed719e86fcac0b875e649b83.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Ba5lcgl_7gdKj2a9-Y7WBQ.png"/></div></div></figure><p id="e67d" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">当我们移动滑块时，我们会看到所有的图表都在实时更新。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="lq lr l"/></div></figure><p id="d4ef" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">那有多好！</p><h1 id="cf9d" class="ls lt it bd lu lv lw lx ly lz ma mb mc jz md ka me kc mf kd mg kf mh kg mi mj bi translated">结论</h1><p id="6480" class="pw-post-body-paragraph ku kv it kw b kx mk ju kz la ml jx lc ld mm lf lg lh mn lj lk ll mo ln lo lp im bi translated">我希望这是有用的——我们已经查看了Julia Plots中可用的基本图表——比我们在这篇短文中看到的要多得多——但我希望你已经发现这篇介绍激起了你寻找更多关于Julia、Plots，特别是冥王星的欲望。</p></div><div class="ab cl oj ok hx ol" role="separator"><span class="om bw bk on oo op"/><span class="om bw bk on oo op"/><span class="om bw bk on oo"/></div><div class="im in io ip iq"><h2 id="ce35" class="mr lt it bd lu ms mt dn ly mu mv dp mc ld mw mx me lh my mz mg ll na nb mi nc bi translated">下载</h2><p id="3e0e" class="pw-post-body-paragraph ku kv it kw b kx mk ju kz la ml jx lc ld mm lf lg lh mn lj lk ll mo ln lo lp im bi translated">右键单击下面的链接下载文件，然后将它们复制到您将用于Pluto笔记本的目录中</p><p id="8476" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated"><a class="ae nn" href="https://github.com/alanjones2/dataviz/raw/995f48b31ab4b9a1af32352042b5e6cfe83ebf3b/londonweather.csv" rel="noopener ugc nofollow" target="_blank"> londonweather.csv </a></p></div><div class="ab cl oj ok hx ol" role="separator"><span class="om bw bk on oo op"/><span class="om bw bk on oo op"/><span class="om bw bk on oo"/></div><div class="im in io ip iq"><p id="4e9e" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">一如既往，感谢阅读。如果你想知道我什么时候发表新文章，请考虑注册我的临时<a class="ae nn" href="https://technofile.substack.com/" rel="noopener ugc nofollow" target="_blank">子栈简讯</a>。</p><p id="38c1" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">之前的文章可以看<a class="ae nn" href="https://alan-jones.medium.com/my-medium-articles-559d23f3b9f3" rel="noopener">这里</a>。</p></div></div>    
</body>
</html>