# 合成语音的自动评估

> 原文：<https://towardsdatascience.com/automatic-evaluation-of-synthesized-speech-354f7a2a20d7>

## 理解深度学习和预训练模型如何用于评估自动语音的指南

![](img/8a5dc002893dc3b7aeda09d0261558da.png)

Vika Strawberrika 在 [Unsplash](https://unsplash.com?utm_source=medium&utm_medium=referral) 上拍摄的照片

语音合成，或文本到语音(TTS)，是一项有几十年历史的技术，由于深度学习提供的巨大改进，它在最近几年强势回归。

随着时间的推移，合成语音听起来越来越自然，越来越难与人声区分开来。

这是总的趋势，但是不同的系统达到不同的质量水平，并且在科学努力中测量进展是重要的。不幸的是，直到最近，衡量 TTS 质量的唯一方法是请一组人类法官进行听力测试。他们会听合成的声音，并给声音的自然度打个分，通常在 1 到 5 分之间。

这个过程听起来很清楚，但是它有很多缺点。首先，该过程缓慢且昂贵，因此在开发过程中不能经常执行。这与许多其他领域不同，例如机器翻译或语音识别，在这些领域，像 [BLEU](https://en.wikipedia.org/wiki/BLEU) 和 [WER](https://en.wikipedia.org/wiki/Word_error_rate) 这样的自动化指标伴随研究人员数十年来快速衡量他们的进步。二是主观性强，不可复制。两套不同的评委会给出不同的分数，所以进入不同科学出版物的结果是无法相互比较的。第三，这个过程很嘈杂，因为我们人类不善于考虑单一因素，而忽略更广泛的背景。举例来说，有语法错误的好听声音可能会得到低分。

因此，希望有一种自动度量来克服这些问题。文献中的一个答案是利用深度学习模型自动计算 MOS。

# 平均意见得分

![](img/23870dc18b34cbed195584c7ac4010fa.png)

由 [Unsplash](https://unsplash.com?utm_source=medium&utm_medium=referral) 上的[声阱](https://unsplash.com/@soundtrap?utm_source=medium&utm_medium=referral)拍摄的照片

[平均意见得分](https://en.wikipedia.org/wiki/Mean_opinion_score) (MOS)是一种历史悠久的电话通话质量测量方法。它仅仅是 N 个人类裁判给出的分数的平均值。在 TTS 中，通常要求评委在 1 到 5 的范围内评估声音的自然度，其中 1 表示“绝对机器人化”，5 表示“绝对自然”。

如上所述，这是一种昂贵、缓慢且有噪声的测量方法。人类有不同的判断和不同的期望，这些都反映在他们的个人得分上。由于这些原因，测量许多人的综合得分是很重要的。

此外，系统的 MOS 易受时间变化的影响，因为技术的改进改变了对其质量的期望。此外，它还受法官的人口统计数据的影响。年龄、对技术的接触和文化背景都是影响他们将分配的分数的因素。例如，说第二语言的人通常会比母语为 TTS 语言的人给出更高的分数，因为他们会发现更多的发音错误。

# 自动 MOS

一种使评估过程更加自动化的解决方案是训练机器学习模型来再现人类得分。作为参考，我们将遵循 Erica Cooper 及其同事的“MOS 预测网络的泛化能力”。这不是第一篇关于这个话题的论文，但我发现它真的很有用。

这篇论文是关于 MOS 预测网络的训练技术以及它们如何推广到未知领域的有趣研究。在这篇文章中，我将强调最突出的几点。我将报告我认为最有趣的想法，并尝试为不熟悉该主题的读者解释较难的部分。我推荐感兴趣的读者去看看这篇论文。这篇文章可以看作是对这个主题的介绍和阅读指南。

# 数据集

与任何机器学习模型一样，自动 MOS 预测需要数据集来训练模型，并在训练训练阶段期间和之后对其进行评估。

该数据集基于自 2008 年以来多年进行的大量听力测试。主数据集被称为 **BVCC** ，它是由作者创建的，然后他们还使用了三个额外的域外数据集进行测试。

## 术语

在继续之前，澄清一些将在下文中使用的术语是有用的。

一个**听众**是人类评价中的法官。他/她提供网络旨在模拟的评级。

**扬声器**是用于训练 TTS 模型的配音演员。通常，TTS 模型是根据一组预定义的声音进行训练的，并且只能产生这些声音。

一个**系统**是一个带有推理算法的 TTS 模型。

一个**文本**仅仅是用来合成声音的文本。这将在下文中考虑，因为对于 TTS 模型来说，在训练期间生成看不见的单词是具有挑战性的。

## BVCC

BVCC 之所以被这样称呼，是因为它主要是由 TTS 的[**B**lizzard Challenge](https://www.synsig.org/index.php/Blizzard_Challenge_2021)和[**V**office**C**on version**C**hallenge](https://github.com/nii-yamagishilab/VCC2020-database)以及用开源工具 [ESPnet](https://github.com/espnet/espnet) 生成的公开可用的句子构建而成。由于数据来自多个语境，作者进行了一次新的听力测试，对样本进行统一评分。

它们总计超过 7000 个样本，由 8 位评委、27 位扬声器和 187 个测试系统进行评分。

## 域外数据

在这种情况下，域外数据是未进行额外听力测试的注释数据(合成语音+人类评级)。它们在域外，因为它们的上下文不同于训练数据的上下文。如前所述，评级会因人而异，并随着时间的推移而变化，因此我们可以预期评级分布与培训数据的分布不同。

此外，还有一个日语数据集和一个汉语语音数据集，这两个数据集在语言领域之外。

## 培训/开发/测试设备

在划分数据集时，一个目标是每个子集匹配全局数据集的 MOS 分布；此外，它们的目标是匹配每个话语的评分标准偏差的分布。后一点的原因是，一些系统经常收到比其他系统更多样化的评级，这应该反映在所有子集中，以便进行正确的评估。

此外，开发和测试子集应该有看不见的演讲者、系统、听众和文本。如果一个实体不在训练集中，它对开发集是不可见的。如果一个实体既不存在于训练集也不存在于开发集中，那么它对测试集是不可见的。

为此，他们首先将发言者、系统、听众或文本分配给开发或测试集，不进行替换，然后用剩余的材料将其余部分填充到所需的数量，从而生成多个候选拆分。然后使用总数据分布和每个子集之间的[推土机距离](https://en.wikipedia.org/wiki/Earth_mover%27s_distance) (EMD)的总和来评估候选分割。它是针对单个样本的分数以及标准差计算的。

他们用不同的随机种子计算了 1000 个分裂，然后选择了 EMD 总和最低的一个，因为这意味着它是全局分布和每个子集之间距离最低的分裂。

域外数据集被分成大小相等的训练集、开发集和测试集。然后，考虑两种不同的情况:

*   **Zero-shot:** 在域外测试集上对系统进行评估，之前没有对其训练数据进行任何类型的训练。
*   **微调:**系统首先使用域外数据集的训练集和开发集进行训练，然后在其测试集上进行评估。

## 预训练模型的作用

从到目前为止的讨论中，我们理解为自动 MOS 的任务获取训练数据是困难和昂贵的。这项研究的作者发现，仅仅根据 BVCC 的数据从零开始训练一个 MOSNet [2]并不太好。

更有效的策略在于使用在大量音频数据上预先训练的模型，并在相同的 BVCC 数据上对其进行微调。Wav2vec2 [3]似乎符合目标。它最初是在大型音频数据上以自我监督的学习目标进行训练的，并且已经在其他具有音频输入的任务上成功地进行了微调。说话者、情绪和音素分类都是受益于使用预先训练的 wav2vec2 模型的任务。此外，它在 [fairseq](https://github.com/facebookresearch/fairseq) 工具包和[拥抱脸变形金刚](https://huggingface.co/docs/transformers/model_doc/wav2vec2)中免费提供代码和预训练模型。

作者还用 XLSR [4]进行了实验，这是另一个大型预训练模型，它是针对多语言音频数据进行训练的。据推测，多语言训练对语音识别是有用的，但从目前的研究结果来看，情况并非如此。XLSR 显然比从零开始训练要好，但只在针对日本人的零射实验中胜过 wav2vec2。但 wav2vec2 在实验条件上更好，对日本小数据进行微调，对中国人同时进行零炮和微调。

# 挑战

这篇论文的进一步分析清楚地表明，这种自动 MOS 网络很难预测看不见的说话者、听者、系统和文本的正确结果，但方式不同。

看不见的*系统*绝对是最困难的挑战，所以如果可能的话，在你想要评估的系统上微调你的 MOS 预测器总是一个好主意。看不见的*文本*和*监听器*只对 6 个测试系统中的 2 个系统特别困难，而看不见的*扬声器*只对没有微调的预训练模型有问题。

# 结论

用于 TTS 模型评估的自动 MOS 预测是一项具有挑战性的任务。训练数据的获取必须遵循严格的准则，并考虑许多变量，如各种测试系统、扬声器、听众和文本。

另一方面，很明显，系统的零射击评估特别困难。在快速开发环境中，最好的评估方法是为新系统收集一些训练数据进行评估。然后，根据这些新数据微调 MOS 预测器，最后对系统进行大规模评估。

与语音识别的单词错误率等指标相比，这种方法仍然很慢，但预训练模型的存在使其比从头开始训练好得多。

研究更好的系统零射击评估方法将会改变这一领域的游戏规则。

# 更多来自我

</tips-for-reading-and-writing-an-ml-research-paper-a505863055cf>  </parse-dont-validate-f559372cca45>  </data-processing-automation-with-inotifywait-663aba0c560a>  

# 参考文献(带链接)

[1] Cooper，Erica，等.“MOS 预测网络的泛化能力”*ICA ssp 2022–2022 IEEE 声学、语音和信号处理国际会议(ICASSP)* 。IEEE，2022。https://arxiv.org/abs/2110.02635v3

[2] Lo，Chen-Chou，等.“MOSNet:基于深度学习的语音转换客观评估” *Proc。散客 2019*(2019):1541–1545。[https://arxiv.org/abs/1904.08352](https://arxiv.org/abs/1904.08352)

[3]巴耶夫斯基、阿列克谢等，《wav2vec 2.0:语音表征的自我监督学习框架》*神经信息处理系统进展*33(2020):12449–12460。[https://arxiv.org/abs/2006.11477](https://arxiv.org/abs/2006.11477)

[4] Conneau，Alexis 等，“用于语音识别的无监督跨语言表征学习” *arXiv 预印本 arXiv:2006.13979* (2020)。[https://arxiv.org/abs/2006.13979](https://arxiv.org/abs/2006.13979)

# 感谢您的阅读

这不是一篇简单易懂的文章，所以非常感谢你能坚持到现在。敬请关注我的更多内容！