<html>
<head>
<title>Profanity Filtering Over Audio Files with Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用Python过滤音频文件中的脏话</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/profanity-filtering-audio-files-python-3dd2335bc567#2022-01-27">https://towardsdatascience.com/profanity-filtering-audio-files-python-3dd2335bc567#2022-01-27</a></blockquote><div><div class="fc ii ij ik il im"/><div class="in io ip iq ir"><div class=""><h1 id="9bf4" class="pw-post-title is it iu bd iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq bi translated">用Python过滤音频文件中的脏话</h1></div><div class=""><h2 id="a4bd" class="pw-subtitle-paragraph jr it iu bd b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki dk translated">用Python和AssemblyAI过滤音视频文件中的脏话</h2></div><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj kj"><img src="../Images/39e74394969123cd610ce7e1d8f73f51.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dsCLua-wdb1qDvvAfz8MmA.jpeg"/></div></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">沃洛季米尔·赫里先科在<a class="ae kz" href="https://unsplash.com/s/photos/dont-speak?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</p></figure><h2 id="8587" class="la lb iu bd lc ld le dn lf lg lh dp li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">介绍</h2><p id="26a7" class="pw-post-body-paragraph lw lx iu ly b lz ma jv mb mc md jy me lj mf mg mh ln mi mj mk lr ml mm mn mo in bi translated">在我最近的一篇文章中，我们探讨了针对音频和视频文件的<a class="ae kz" rel="noopener" target="_blank" href="/content-moderation-python-assemblyai-4a09ca61d346"><strong class="ly iv"/></a><strong class="ly iv"/>敏感内容检测和调节。另一个密切相关的主题是亵渎检测和过滤。换句话说，<em class="mp">我们如何用星号替换亵渎的话？</em></p><p id="edb5" class="pw-post-body-paragraph lw lx iu ly b lz mq jv mb mc mr jy me lj ms mg mh ln mt mj mk lr mu mm mn mo in bi translated">在今天的教程中，我们将探索如何使用Python和AssemblyAI API执行语音到文本转换。此外，我们将确保文本转录是免费的亵渎。</p></div><div class="ab cl mv mw hy mx" role="separator"><span class="my bw bk mz na nb"/><span class="my bw bk mz na nb"/><span class="my bw bk mz na"/></div><div class="in io ip iq ir"><h2 id="65cd" class="la lb iu bd lc ld le dn lf lg lh dp li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">使用Python过滤脏话的语音转文本功能</h2><p id="2275" class="pw-post-body-paragraph lw lx iu ly b lz ma jv mb mc md jy me lj mf mg mh ln mi mj mk lr ml mm mn mo in bi translated">现在，让我们从如何在Python中实现脏话过滤的分步指南开始。对于本教程，我们将使用AssemblyAI API，因此如果您想继续学习，请确保从他们的网站上获得一个访问令牌(绝对免费)。</p><p id="5c3b" class="pw-post-body-paragraph lw lx iu ly b lz mq jv mb mc mr jy me lj ms mg mh ln mt mj mk lr mu mm mn mo in bi translated">下一步是准备将发送到AssemblyAI端点的POST请求的头。这应该如下所示(确保使用您自己的访问令牌):</p><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="nc nd l"/></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">导入请求库和定义请求头—来源:<a class="ae kz" href="https://gmyrianthous.medium.com/" rel="noopener">作者</a></p></figure><p id="dd90" class="pw-post-body-paragraph lw lx iu ly b lz mq jv mb mc mr jy me lj ms mg mh ln mt mj mk lr mu mm mn mo in bi translated">现在我们需要读取将要执行语音到文本转换的音频文件，然后将它上传到AssemblyAI提供的托管服务。端点将在托管服务上返回一个URL，然后用于后续请求，以便获得输入文件的副本。</p><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="nc nd l"/></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">读取输入的音频文件并上传到AssemblyAI主机服务上—来源:<a class="ae kz" href="https://gmyrianthous.medium.com/" rel="noopener">作者</a></p></figure><p id="e53b" class="pw-post-body-paragraph lw lx iu ly b lz mq jv mb mc mr jy me lj ms mg mh ln mt mj mk lr mu mm mn mo in bi translated">现在，我们打算转录的音频文件已经上传到托管服务上。在下一步中，我们将使用作为响应的一部分返回的<code class="fe ne nf ng nh b">upload_url</code>,以便获得文本转录。</p><blockquote class="ni nj nk"><p id="0741" class="lw lx mp ly b lz mq jv mb mc mr jy me nl ms mg mh nm mt mj mk nn mu mm mn mo in bi translated">默认情况下，API将返回音频的逐字记录，这意味着如果在音频中说脏话，将会出现在记录中。</p></blockquote><p id="78e9" class="pw-post-body-paragraph lw lx iu ly b lz mq jv mb mc mr jy me lj ms mg mh ln mt mj mk lr mu mm mn mo in bi translated">为了<strong class="ly iv">对输入执行脏话过滤，</strong>我们只需要在<code class="fe ne nf ng nh b">POST</code>请求的主体中提供一个附加参数，这个参数叫做<code class="fe ne nf ng nh b">filter_profanity</code>，应该设置为<code class="fe ne nf ng nh b">true</code>。</p><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="nc nd l"/></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">向转录端点发送POST请求—来源:<a class="ae kz" href="https://gmyrianthous.medium.com/" rel="noopener">作者</a></p></figure><p id="da7b" class="pw-post-body-paragraph lw lx iu ly b lz mq jv mb mc mr jy me lj ms mg mh ln mt mj mk lr mu mm mn mo in bi translated">现在转录过程应该启动并运行了，我们需要发出一个<code class="fe ne nf ng nh b">GET</code>请求来访问结果。注意，我们需要发出几个请求，直到端点返回的状态是<code class="fe ne nf ng nh b">error</code>或<code class="fe ne nf ng nh b">completed</code>。</p><p id="f6a7" class="pw-post-body-paragraph lw lx iu ly b lz mq jv mb mc mr jy me lj ms mg mh ln mt mj mk lr mu mm mn mo in bi translated">这是因为API提供了<a class="ae kz" href="https://docs.assemblyai.com/#processing-times" rel="noopener ugc nofollow" target="_blank"> <strong class="ly iv">异步转录</strong> </a>。提交音频文件进行转录时，通常会在音频文件持续时间的15–30%内完成。请注意，AssemblyAI还支持实时转录——要了解更多信息，请务必阅读我的另一篇关于用Python进行实时语音识别的文章。</p><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="nc nd l"/></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">从AssemblyAI端点检索转录结果—来源:<a class="ae kz" href="https://gmyrianthous.medium.com/" rel="noopener">作者</a></p></figure><p id="fecd" class="pw-post-body-paragraph lw lx iu ly b lz mq jv mb mc mr jy me lj ms mg mh ln mt mj mk lr mu mm mn mo in bi translated">最后，我们可以将转录结果写入输出文件，这将使我们在检查输出时更加轻松。</p><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="nc nd l"/></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">将文本转录写入文本文件—来源:<a class="ae kz" href="https://gmyrianthous.medium.com/" rel="noopener">作者</a></p></figure></div><div class="ab cl mv mw hy mx" role="separator"><span class="my bw bk mz na nb"/><span class="my bw bk mz na nb"/><span class="my bw bk mz na"/></div><div class="in io ip iq ir"><h2 id="f982" class="la lb iu bd lc ld le dn lf lg lh dp li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">解读回应</h2><p id="b4a3" class="pw-post-body-paragraph lw lx iu ly b lz ma jv mb mc md jy me lj mf mg mh ln mi mj mk lr ml mm mn mo in bi translated">现在，如果我们检查写入输出文件的结果，我们应该看到文本转录。如果检测到亵渎，则会用星号替换，如下面的输出示例所示:</p><pre class="kk kl km kn gu no nh np nq aw nr bi"><span id="d5d1" class="la lb iu nh b gz ns nt l nu nv">It was some tough s*** that they had to go through. But they did it. I mean, it blows my f****** mind every time I hear the story.</span></pre><p id="cafe" class="pw-post-body-paragraph lw lx iu ly b lz mq jv mb mc mr jy me lj ms mg mh ln mt mj mk lr mu mm mn mo in bi translated">下面给出了返回响应的更完整形式</p><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="nc nd l"/></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">来自文本转录端点的示例响应—来源:<a class="ae kz" href="https://gmyrianthous.medium.com/" rel="noopener">作者</a></p></figure><p id="5ddb" class="pw-post-body-paragraph lw lx iu ly b lz mq jv mb mc mr jy me lj ms mg mh ln mt mj mk lr mu mm mn mo in bi translated">实际的文本转录在响应的<code class="fe ne nf ng nh b">text</code>字段中提供。</p><p id="d941" class="pw-post-body-paragraph lw lx iu ly b lz mq jv mb mc mr jy me lj ms mg mh ln mt mj mk lr mu mm mn mo in bi translated"><code class="fe ne nf ng nh b">words</code>字段将包含在音频(或视频)文件中检测到的每个单词，以及开始和结束时间戳，以及<code class="fe ne nf ng nh b">confidence</code>。后者对应于模型对检测到的单词的置信度(在<code class="fe ne nf ng nh b">0-1</code>之间测量)。显然，<code class="fe ne nf ng nh b">confidence</code>越高，该模型对口语单词越确定。</p><p id="1e2b" class="pw-post-body-paragraph lw lx iu ly b lz mq jv mb mc mr jy me lj ms mg mh ln mt mj mk lr mu mm mn mo in bi translated">请注意，除了每个检测到的单词的<code class="fe ne nf ng nh b">confidence</code>之外，响应还包括整个转录的<code class="fe ne nf ng nh b">confidence</code>(外部字段)。</p><p id="f02b" class="pw-post-body-paragraph lw lx iu ly b lz mq jv mb mc mr jy me lj ms mg mh ln mt mj mk lr mu mm mn mo in bi translated">最后，响应包括在文本转录期间使用的配置和参数。例如，您可以验证是否启用了<code class="fe ne nf ng nh b">profanity_filtering</code>选项，因为它在转录端点给出的响应中是<code class="fe ne nf ng nh b">true</code>。</p><p id="8570" class="pw-post-body-paragraph lw lx iu ly b lz mq jv mb mc mr jy me lj ms mg mh ln mt mj mk lr mu mm mn mo in bi translated">关于响应中包含的各个字段的更完整描述，请参考<a class="ae kz" href="https://docs.assemblyai.com/reference#transcript" rel="noopener ugc nofollow" target="_blank">官方文件</a>中的相关章节。</p></div><div class="ab cl mv mw hy mx" role="separator"><span class="my bw bk mz na nb"/><span class="my bw bk mz na nb"/><span class="my bw bk mz na"/></div><div class="in io ip iq ir"><h2 id="57e6" class="la lb iu bd lc ld le dn lf lg lh dp li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">完整代码</h2><p id="3fae" class="pw-post-body-paragraph lw lx iu ly b lz ma jv mb mc md jy me lj mf mg mh ln mi mj mk lr ml mm mn mo in bi translated">作为本教程一部分的完整代码可以在下面的GitHub Gist中找到。</p><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="nc nd l"/></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">用Python和AssemblyAI过滤脏话的完整代码—来源:<a class="ae kz" href="https://gmyrianthous.medium.com/" rel="noopener">作者</a></p></figure></div><div class="ab cl mv mw hy mx" role="separator"><span class="my bw bk mz na nb"/><span class="my bw bk mz na nb"/><span class="my bw bk mz na"/></div><div class="in io ip iq ir"><h2 id="78f3" class="la lb iu bd lc ld le dn lf lg lh dp li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">最后的想法</h2><p id="f311" class="pw-post-body-paragraph lw lx iu ly b lz ma jv mb mc md jy me lj mf mg mh ln mi mj mk lr ml mm mn mo in bi translated">在今天的文章中，我们展示了如何使用Python和AssemblyAI API对音频和视频文件进行脏话过滤。当需要过滤脏话时，您可能通常希望(或需要)执行敏感内容检测。关于如何执行内容审核的分步指南，请阅读下面的文章</p><div class="nw nx gq gs ny nz"><a rel="noopener follow" target="_blank" href="/content-moderation-python-assemblyai-4a09ca61d346"><div class="oa ab fp"><div class="ob ab oc cl cj od"><h2 class="bd iv gz z fq oe fs ft of fv fx it bi translated">如何使用Python对音频文件进行内容审核</h2><div class="og l"><h3 class="bd b gz z fq oe fs ft of fv fx dk translated">用Python和AssemblyAI API检测音频文件中的敏感内容</h3></div><div class="oh l"><p class="bd b dl z fq oe fs ft of fv fx dk translated">towardsdatascience.com</p></div></div><div class="oi l"><div class="oj l ok ol om oi on kt nz"/></div></div></a></div></div><div class="ab cl mv mw hy mx" role="separator"><span class="my bw bk mz na nb"/><span class="my bw bk mz na nb"/><span class="my bw bk mz na"/></div><div class="in io ip iq ir"><p id="1b77" class="pw-post-body-paragraph lw lx iu ly b lz mq jv mb mc mr jy me lj ms mg mh ln mt mj mk lr mu mm mn mo in bi translated"><a class="ae kz" href="https://gmyrianthous.medium.com/membership" rel="noopener"> <strong class="ly iv">成为会员</strong> </a> <strong class="ly iv">阅读介质上的每一个故事。你的会员费直接支持我和你看的其他作家。你也可以在媒体上看到所有的故事。</strong></p><div class="nw nx gq gs ny nz"><a href="https://gmyrianthous.medium.com/membership" rel="noopener follow" target="_blank"><div class="oa ab fp"><div class="ob ab oc cl cj od"><h2 class="bd iv gz z fq oe fs ft of fv fx it bi translated">通过我的推荐链接加入Medium-Giorgos Myrianthous</h2><div class="og l"><h3 class="bd b gz z fq oe fs ft of fv fx dk translated">作为一个媒体会员，你的会员费的一部分会给你阅读的作家，你可以完全接触到每一个故事…</h3></div><div class="oh l"><p class="bd b dl z fq oe fs ft of fv fx dk translated">gmyrianthous.medium.com</p></div></div><div class="oi l"><div class="oo l ok ol om oi on kt nz"/></div></div></a></div></div><div class="ab cl mv mw hy mx" role="separator"><span class="my bw bk mz na nb"/><span class="my bw bk mz na nb"/><span class="my bw bk mz na"/></div><div class="in io ip iq ir"><p id="676e" class="pw-post-body-paragraph lw lx iu ly b lz mq jv mb mc mr jy me lj ms mg mh ln mt mj mk lr mu mm mn mo in bi translated"><strong class="ly iv">你可能也会喜欢</strong></p><div class="nw nx gq gs ny nz"><a rel="noopener follow" target="_blank" href="/speech-recognition-python-assemblyai-bb5024d322d8"><div class="oa ab fp"><div class="ob ab oc cl cj od"><h2 class="bd iv gz z fq oe fs ft of fv fx it bi translated">如何使用Python执行语音识别</h2><div class="og l"><h3 class="bd b gz z fq oe fs ft of fv fx dk translated">用Python中的AssemblyAI API执行语音转文本</h3></div><div class="oh l"><p class="bd b dl z fq oe fs ft of fv fx dk translated">towardsdatascience.com</p></div></div><div class="oi l"><div class="op l ok ol om oi on kt nz"/></div></div></a></div></div><div class="ab cl mv mw hy mx" role="separator"><span class="my bw bk mz na nb"/><span class="my bw bk mz na nb"/><span class="my bw bk mz na"/></div><div class="in io ip iq ir"><div class="kk kl km kn gu nz"><a rel="noopener follow" target="_blank" href="/sentiment-analysis-assemblyai-python-a4686967e0fc"><div class="oa ab fp"><div class="ob ab oc cl cj od"><h2 class="bd iv gz z fq oe fs ft of fv fx it bi translated">如何用Python对音频文件进行情感分析</h2><div class="og l"><h3 class="bd b gz z fq oe fs ft of fv fx dk translated">探索如何使用AssemblyAI API提取语音中的情感</h3></div><div class="oh l"><p class="bd b dl z fq oe fs ft of fv fx dk translated">towardsdatascience.com</p></div></div><div class="oi l"><div class="oq l ok ol om oi on kt nz"/></div></div></a></div></div></div>    
</body>
</html>