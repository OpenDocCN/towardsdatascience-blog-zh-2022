<html>
<head>
<title>Where is the population center of the world?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">世界人口中心在哪里？</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/where-is-the-population-center-of-the-world-749dc3f86a63#2022-01-10">https://towardsdatascience.com/where-is-the-population-center-of-the-world-749dc3f86a63#2022-01-10</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""><h1 id="f043" class="pw-post-title io ip iq bd ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm bi translated">世界人口中心在哪里？</h1></div><div class=""><h2 id="f6f9" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated"><em class="kf">我们发现地球上有一个圈，50%的人住在这个圈内</em></h2></div><p id="3b43" class="pw-post-body-paragraph kg kh iq ki b kj kk jr kl km kn ju ko kp kq kr ks kt ku kv kw kx ky kz la lb ij bi translated">世界上的大部分权力集中在美国和欧洲等西方国家，使得这些地方在世界舞台上非常突出。但是如果从人口数量来看，世界的中心在哪里呢？受到youtube上一个真实生活故事视频的启发，我去寻找一个你能在地球上画的最小的圆，50%的人住在这个圆里面，50%的人住在外面。这个圆圈的中心可以被称为世界人口中心。</p><p id="a727" class="pw-post-body-paragraph kg kh iq ki b kj kk jr kl km kn ju ko kp kq kr ks kt ku kv kw kx ky kz la lb ij bi translated">在这篇文章中，我们将深入探讨许多与地理相关的话题，这些话题是我在读博士时就有的激情所在。您将学习如何:</p><ul class=""><li id="beae" class="ld le iq ki b kj kk km kn kp lf kt lg kx lh lb li lj lk ll bi translated">将网格数据读入Python</li><li id="3ed4" class="ld le iq ki b kj lm km ln kp lo kt lp kx lq lb li lj lk ll bi translated">将格网数据集与面相交</li><li id="0755" class="ld le iq ki b kj lm km ln kp lo kt lp kx lq lb li lj lk ll bi translated">在地理投影之间转换数据</li><li id="9cc3" class="ld le iq ki b kj lm km ln kp lo kt lp kx lq lb li lj lk ll bi translated">在平面地图上画圆，也称为大圆距离</li></ul><p id="a5db" class="pw-post-body-paragraph kg kh iq ki b kj kk jr kl km kn ju ko kp kq kr ks kt ku kv kw kx ky kz la lb ij bi translated">在接下来的几节中，我将慢慢介绍我们的解决方案，从我们所有分析的人口数据开始。</p><p id="8356" class="pw-post-body-paragraph kg kh iq ki b kj kk jr kl km kn ju ko kp kq kr ks kt ku kv kw kx ky kz la lb ij bi translated">github 上的<a class="ae lc" href="https://github.com/PaulHiemstra/population_circle_article" rel="noopener ugc nofollow" target="_blank">也有这篇文章和代码。</a></p><h1 id="78a3" class="lr ls iq bd lt lu lv lw lx ly lz ma mb jw mc jx md jz me ka mf kc mg kd mh mi bi translated">人口来源数据</h1><p id="020f" class="pw-post-body-paragraph kg kh iq ki b kj mj jr kl km mk ju ko kp ml kr ks kt mm kv kw kx mn kz la lb ij bi translated">我们分析的核心是人口数据。我选择使用在WorldPop 上<a class="ae lc" href="https://www.worldpop.org/doi/10.5258/SOTON/WP00647" rel="noopener ugc nofollow" target="_blank">发布的1公里网格人口数据集。在比尔和梅林达·盖茨基金会的资助下，许多大学整理了这个数据集。它覆盖了全球，并提供了生活在特定网格单元中的人口数量:</a></p><figure class="mp mq mr ms gt mt gh gi paragraph-image"><div role="button" tabindex="0" class="mu mv di mw bf mx"><div class="gh gi mo"><img src="../Images/9e17cd848fc87cd7fb8147f8f2021f83.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*evzwxuxxgZdPkrVy4rg5RA.png"/></div></div><p class="na nb gj gh gi nc nd bd b be z dk translated"><a class="ae lc" href="https://www.worldpop.org/geodata/summary?id=24777" rel="noopener ugc nofollow" target="_blank">世界人口网格数据的可视化</a></p></figure><p id="77a9" class="pw-post-body-paragraph kg kh iq ki b kj kk jr kl km kn ju ko kp kq kr ks kt ku kv kw kx ky kz la lb ij bi translated">我选择使用他们提供的最新数据集，即2020年的数据集。</p><figure class="mp mq mr ms gt mt"><div class="bz fp l di"><div class="ne nf l"/></div></figure><pre class="mp mq mr ms gt ng nh ni nj aw nk bi"><span id="6d15" class="nl ls iq nh b gy nm nn l no np">array([[-3.4028235e+38, -3.4028235e+38, -3.4028235e+38, ...,<br/>        -3.4028235e+38, -3.4028235e+38, -3.4028235e+38],<br/>       [-3.4028235e+38, -3.4028235e+38, -3.4028235e+38, ...,<br/>        -3.4028235e+38, -3.4028235e+38, -3.4028235e+38],<br/>       [-3.4028235e+38, -3.4028235e+38, -3.4028235e+38, ...,<br/>        -3.4028235e+38, -3.4028235e+38, -3.4028235e+38],<br/>       ...,<br/>       [-3.4028235e+38, -3.4028235e+38, -3.4028235e+38, ...,<br/>        -3.4028235e+38, -3.4028235e+38, -3.4028235e+38],<br/>       [-3.4028235e+38, -3.4028235e+38, -3.4028235e+38, ...,<br/>        -3.4028235e+38, -3.4028235e+38, -3.4028235e+38],<br/>       [-3.4028235e+38, -3.4028235e+38, -3.4028235e+38, ...,<br/>        -3.4028235e+38, -3.4028235e+38, -3.4028235e+38]], dtype=float32)</span></pre><p id="548a" class="pw-post-body-paragraph kg kh iq ki b kj kk jr kl km kn ju ko kp kq kr ks kt ku kv kw kx ky kz la lb ij bi translated"><code class="fe nq nr ns nh b">read</code>命令产生一个包含所有人口数据的numpy数组。一个显著的特征是所有的<code class="fe nq nr ns nh b">-3.4028235e+38</code>值，文件的元数据显示它们是NA值。这主要包括没有人居住的水体。接下来，我们将这些值转换为适当的NA值，并对所有非NA值求和:</p><figure class="mp mq mr ms gt mt"><div class="bz fp l di"><div class="ne nf l"/></div></figure><pre class="mp mq mr ms gt ng nh ni nj aw nk bi"><span id="17ce" class="nl ls iq nh b gy nm nn l no np">7.966754816</span></pre><p id="2961" class="pw-post-body-paragraph kg kh iq ki b kj kk jr kl km kn ju ko kp kq kr ks kt ku kv kw kx ky kz la lb ij bi translated">所以根据数据集，2020年有79亿人生活在地球上。这完全符合我的预期。为了以后的使用，我们将这段代码重新打包成一个函数，它决定了一个<code class="fe nq nr ns nh b">.tif</code>网格文件的总人口大小:</p><figure class="mp mq mr ms gt mt"><div class="bz fp l di"><div class="ne nf l"/></div></figure><pre class="mp mq mr ms gt ng nh ni nj aw nk bi"><span id="216d" class="nl ls iq nh b gy nm nn l no np">7966755000.0</span></pre><h1 id="2c22" class="lr ls iq bd lt lu lv lw lx ly lz ma mb jw mc jx md jz me ka mf kc mg kd mh mi bi translated">将人口数据装箱</h1><p id="05c8" class="pw-post-body-paragraph kg kh iq ki b kj mj jr kl km mk ju ko kp ml kr ks kt mm kv kw kx mn kz la lb ij bi translated">在第一步中，我们将地图上的所有人口网格单元相加。显然，在我们寻找包含一半人口的圆的过程中，我们不想把整个地图加起来。作为第一步，我们将确定一个小边界框内的总人口。为此，我们要确定哪个网格单元在盒子里面，哪个不在。在地理术语中，这被称为将边界框与gridcells相交。首先，我们构建我们感兴趣的边界框:</p><figure class="mp mq mr ms gt mt"><div class="bz fp l di"><div class="ne nf l"/></div></figure><figure class="mp mq mr ms gt mt"><div class="bz fp l di"><div class="ne nf l"/></div></figure><figure class="mp mq mr ms gt mt gh gi paragraph-image"><div role="button" tabindex="0" class="mu mv di mw bf mx"><div class="gh gi nt"><img src="../Images/052903f6d10e021c0ec2f012f2af136f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6AINCuJnm9arVfW1TCnbCQ.png"/></div></div><p class="na nb gj gh gi nc nd bd b be z dk translated">作者图片</p></figure><p id="70de" class="pw-post-body-paragraph kg kh iq ki b kj kk jr kl km kn ju ko kp kq kr ks kt ku kv kw kx ky kz la lb ij bi translated">这很好地显示了我们使用荷兰的边界框作为我们的第一个目标。</p><p id="5a9f" class="pw-post-body-paragraph kg kh iq ki b kj kk jr kl km kn ju ko kp kq kr ks kt ku kv kw kx ky kz la lb ij bi translated">我探索的第一个解决方案<a class="ae lc" href="https://gis.stackexchange.com/questions/388047/get-coordinates-of-all-pixels-in-a-raster-with-rasterio" rel="noopener ugc nofollow" target="_blank"/>涉及到将每个gridcells转换成一个地理点，并执行框和点之间的交集。这种解决方案的问题是，它占用了大量的RAM，并且每次我试图生成点时，我的Python会话都会崩溃。为了补救这种情况，我选择将工作外包给GDAL。GDAL是一个带有Python绑定的地理空间处理库。</p><p id="cd6a" class="pw-post-body-paragraph kg kh iq ki b kj kk jr kl km kn ju ko kp kq kr ks kt ku kv kw kx ky kz la lb ij bi translated">在GDAL中，我可以使用warp工具来执行所需的分析。然而，这要求所有输入数据都是磁盘上的文件。所以首先我们必须将边界框保存到磁盘，然后我们可以调用GDAL:</p><figure class="mp mq mr ms gt mt"><div class="bz fp l di"><div class="ne nf l"/></div></figure><p id="949c" class="pw-post-body-paragraph kg kh iq ki b kj kk jr kl km kn ju ko kp kq kr ks kt ku kv kw kx ky kz la lb ij bi translated">在这里，我们使用Warp的切割功能将网格切割成边界框内的gridcells，并将结果作为新的tif文件转储。之后，我们可以简单地使用我们的<code class="fe nq nr ns nh b">get_population</code>函数来计算住在盒子里的总人数:</p><figure class="mp mq mr ms gt mt"><div class="bz fp l di"><div class="ne nf l"/></div></figure><pre class="mp mq mr ms gt ng nh ni nj aw nk bi"><span id="a65c" class="nl ls iq nh b gy nm nn l no np">31.186402</span></pre><p id="1771" class="pw-post-body-paragraph kg kh iq ki b kj kk jr kl km kn ju ko kp kq kr ks kt ku kv kw kx ky kz la lb ij bi translated">这表明有3100万人生活在这个盒子里。这与居住在荷兰的1700万人非常吻合，加上比利时和德国的人口中心也在这个范围内。为了方便起见，我们将这些步骤封装到一个新的函数中供以后使用:</p><figure class="mp mq mr ms gt mt"><div class="bz fp l di"><div class="ne nf l"/></div></figure><pre class="mp mq mr ms gt ng nh ni nj aw nk bi"><span id="870c" class="nl ls iq nh b gy nm nn l no np">31.186402</span></pre><h1 id="e8af" class="lr ls iq bd lt lu lv lw lx ly lz ma mb jw mc jx md jz me ka mf kc mg kd mh mi bi translated">将盒子升级为圆形</h1><p id="d814" class="pw-post-body-paragraph kg kh iq ki b kj mj jr kl km mk ju ko kp ml kr ks kt mm kv kw kx mn kz la lb ij bi translated">但是我们的挑战是用一个圆来执行这个操作，而不是一个盒子。幸运的是，上面给出的整个工作流程并不局限于一个盒子形状，而是适用于任何多边形类型的形状。因此，我们的下一个挑战是围绕一个特定的中心点以特定的半径构建一个圆。</p><p id="70f0" class="pw-post-body-paragraph kg kh iq ki b kj kk jr kl km kn ju ko kp kq kr ks kt ku kv kw kx ky kz la lb ij bi translated">这里的一个问题是，我们使用的人口网格是在经纬度坐标中定义的。圆形地球在平面上的投影使我们不能简单地在地图上画圆。我找到的<a class="ae lc" href="https://gis.stackexchange.com/questions/121256/creating-a-circle-with-radius-in-metres" rel="noopener ugc nofollow" target="_blank">解决方案</a>采用我们提供的纬度中心点，并将其重新投影到米距离的投影上。然后，我们在投影中构建一个圆，并将该圆投影回经纬度(WGS84):</p><figure class="mp mq mr ms gt mt"><div class="bz fp l di"><div class="ne nf l"/></div></figure><figure class="mp mq mr ms gt mt gh gi paragraph-image"><div role="button" tabindex="0" class="mu mv di mw bf mx"><div class="gh gi gj"><img src="../Images/33231b3857de4dd1b105f02b1ec00356.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xEqh9h5EYLR-R0MDmMHAQA.png"/></div></div><p class="na nb gj gh gi nc nd bd b be z dk translated">作者图片</p></figure><p id="f447" class="pw-post-body-paragraph kg kh iq ki b kj kk jr kl km kn ju ko kp kq kr ks kt ku kv kw kx ky kz la lb ij bi translated">这很好地显示了我们的2200公里完美圆在经纬度投影中转化为一个椭圆形。这解释了为什么格陵兰岛在地图上比非洲大得多。我们的格林兰圈准备就绪，我们可以调用<code class="fe nq nr ns nh b">get_population_in_shape</code>函数:</p><figure class="mp mq mr ms gt mt"><div class="bz fp l di"><div class="ne nf l"/></div></figure><pre class="mp mq mr ms gt ng nh ni nj aw nk bi"><span id="b349" class="nl ls iq nh b gy nm nn l no np">1.81848775</span></pre><p id="7dda" class="pw-post-body-paragraph kg kh iq ki b kj kk jr kl km kn ju ko kp kq kr ks kt ku kv kw kx ky kz la lb ij bi translated">这证实了居住在格陵兰岛及其周围的人并不多，准确地说是180万。</p><h1 id="fb6b" class="lr ls iq bd lt lu lv lw lx ly lz ma mb jw mc jx md jz me ka mf kc mg kd mh mi bi translated">寻找人口中心</h1><p id="0bad" class="pw-post-body-paragraph kg kh iq ki b kj mj jr kl km mk ju ko kp ml kr ks kt mm kv kw kx mn kz la lb ij bi translated">在Youtube视频中，主持人命名了一个围绕孟吉镇的3300公里的圆圈，以展示世界上50%的人口居住在其中的最小圆圈。使用我们的工具和数据，我们可以检查这一点:</p><figure class="mp mq mr ms gt mt"><div class="bz fp l di"><div class="ne nf l"/></div></figure><figure class="mp mq mr ms gt mt gh gi paragraph-image"><div role="button" tabindex="0" class="mu mv di mw bf mx"><div class="gh gi nu"><img src="../Images/e0dd95ff92cf572b89424282942d93f4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*tQaJW3rHwOMC27DmnBbvoA.png"/></div></div><p class="na nb gj gh gi nc nd bd b be z dk translated">作者图片</p></figure><p id="2ae2" class="pw-post-body-paragraph kg kh iq ki b kj kk jr kl km kn ju ko kp kq kr ks kt ku kv kw kx ky kz la lb ij bi translated">这表明，根据我们的数据，我们很接近，但世界上只有48%的人生活在圈内。稍微调整一下半径，我们会发现，如果我们将圆扩大一点，我们可以得到精确的50 %:</p><figure class="mp mq mr ms gt mt"><div class="bz fp l di"><div class="ne nf l"/></div></figure><pre class="mp mq mr ms gt ng nh ni nj aw nk bi"><span id="bfee" class="nl ls iq nh b gy nm nn l no np">3983.822592<br/>0.5000559</span></pre><p id="75d2" class="pw-post-body-paragraph kg kh iq ki b kj kk jr kl km kn ju ko kp kq kr ks kt ku kv kw kx ky kz la lb ij bi translated">我的圈子需要更大一点，这可能与我使用的特定数据集有关。</p><p id="d19e" class="pw-post-body-paragraph kg kh iq ki b kj kk jr kl km kn ju ko kp kq kr ks kt ku kv kw kx ky kz la lb ij bi translated">基于这些工具，下一步可以使用优化算法来尝试并确定我们可以找到覆盖地球50%人口的最小圆的确切位置和半径。</p><p id="52f2" class="pw-post-body-paragraph kg kh iq ki b kj kk jr kl km kn ju ko kp kq kr ks kt ku kv kw kx ky kz la lb ij bi translated">这篇文章和代码也可以在github 的<a class="ae lc" href="https://github.com/PaulHiemstra/population_circle_article" rel="noopener ugc nofollow" target="_blank">上找到。</a></p><h1 id="b50f" class="lr ls iq bd lt lu lv lw lx ly lz ma mb jw mc jx md jz me ka mf kc mg kd mh mi bi translated">我是谁？</h1><p id="3976" class="pw-post-body-paragraph kg kh iq ki b kj mj jr kl km mk ju ko kp ml kr ks kt mm kv kw kx mn kz la lb ij bi translated">我叫Paul Hiemstra，是荷兰的一名教师和数据科学家。我是科学家和软件工程师的混合体，对与数据科学相关的一切都有广泛的兴趣。你可以在medium上关注我，或者在LinkedIn上关注我。</p><p id="928e" class="pw-post-body-paragraph kg kh iq ki b kj kk jr kl km kn ju ko kp kq kr ks kt ku kv kw kx ky kz la lb ij bi translated">如果你喜欢这篇文章，你可能也会喜欢我的其他一些文章:</p><ul class=""><li id="fdcd" class="ld le iq ki b kj kk km kn kp lf kt lg kx lh lb li lj lk ll bi translated"><a class="ae lc" rel="noopener" target="_blank" href="/mastering-data-science-is-not-learning-a-series-of-tricks-df66d8529c29">掌握数据科学并不是学习一系列技巧</a></li><li id="22d1" class="ld le iq ki b kj lm km ln kp lo kt lp kx lq lb li lj lk ll bi translated"><a class="ae lc" href="https://towardsdatascience.com/tagged/rl-series-paul" rel="noopener" target="_blank">学习AI机器人玩井字游戏系列文章</a></li><li id="f62d" class="ld le iq ki b kj lm km ln kp lo kt lp kx lq lb li lj lk ll bi translated"><a class="ae lc" rel="noopener" target="_blank" href="/altair-plot-deconstruction-visualizing-the-correlation-structure-of-weather-data-38fb5668c5b1">牛郎星图解构:可视化气象数据的关联结构</a></li><li id="033c" class="ld le iq ki b kj lm km ln kp lo kt lp kx lq lb li lj lk ll bi translated"><a class="ae lc" rel="noopener" target="_blank" href="/advanced-functional-programming-for-data-science-building-code-architectures-with-function-dd989cc3b0da">面向数据科学的高级函数式编程:使用函数运算符构建代码架构</a></li><li id="ac98" class="ld le iq ki b kj lm km ln kp lo kt lp kx lq lb li lj lk ll bi translated"><a class="ae lc" rel="noopener" target="_blank" href="/expanding-your-regression-repertoire-with-regularisation-903d2c9f7b28">通过规范化扩展您的回归曲目</a></li></ul><h1 id="6c8e" class="lr ls iq bd lt lu lv lw lx ly lz ma mb jw mc jx md jz me ka mf kc mg kd mh mi bi translated">人口数据归属</h1><p id="085c" class="pw-post-body-paragraph kg kh iq ki b kj mj jr kl km mk ju ko kp ml kr ks kt mm kv kw kx mn kz la lb ij bi translated">world pop(<a class="ae lc" href="http://www.worldpop.org/" rel="noopener ugc nofollow" target="_blank">www.worldpop.org</a>——南安普顿大学地理与环境科学学院；路易斯维尔大学地理和地球科学系；纳穆尔大学地理系)和哥伦比亚大学国际地球科学信息网络中心(CIESIN)(2018年)。全球高分辨率人口分母项目-由比尔和梅林达盖茨基金会资助(OPP1134076)。【https://dx.doi.org/10.5258/SOTON/WP00647 T4】</p></div></div>    
</body>
</html>