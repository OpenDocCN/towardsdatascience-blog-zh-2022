<html>
<head>
<title>Python and Its Similar Commands in R for Data Frame Manipulation</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Python及其在R语言中用于数据框操作的类似命令</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/python-and-its-similar-commands-in-r-for-data-frame-manipulation-5d2e1f84e1db#2022-01-18">https://towardsdatascience.com/python-and-its-similar-commands-in-r-for-data-frame-manipulation-5d2e1f84e1db#2022-01-18</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""><h1 id="d58e" class="pw-post-title ir is it bd iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp bi translated">Python及其在R语言中用于数据框操作的类似命令</h1></div><div class=""><h2 id="02bd" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">Python和R中数据争论的备忘单</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/a07281db5b3dd8da6e368451f5b6be20.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*i5Mt6Ko-ETxWhAIm"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">威尔·斯旺在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</p></figure><h1 id="1dd0" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">介绍</h1><p id="a547" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">因为除了Python之外，我现在还在使用R，所以我偶尔会对这两种语言的语法感到困惑，不得不查找它们。我不得不承认我有一条金鱼的记忆；这就是为什么毫无疑问，我浪费了很多时间去寻找。这就是我写这篇小抄的动机。希望它能为那些希望学习或开始学习这两种语言的人提供一份方便的小抄。</p><p id="7bb1" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">对于Python中的数据角力，我会用<code class="fe ms mt mu mv b">Pandas</code>。另一方面，<code class="fe ms mt mu mv b">tidyr</code>、<code class="fe ms mt mu mv b">d plyr</code>或R base是用于文章中几乎所有命令的R包。</p><h1 id="001d" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">数据集</h1><p id="e769" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">对于本文，我将使用Python和R中一个公开可用的名为<code class="fe ms mt mu mv b">penguins</code>的数据集，它很容易获得，如下所示:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mw mx l"/></div></figure><p id="3f5a" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated"><strong class="lt iu"> <em class="my">数据来源参考:</em> </strong> <em class="my"> Waskom，m .等人，2017。mwaskom/seaborn:v 0 . 8 . 1(2017年9月)，芝诺多。可在:</em><a class="ae ky" href="https://doi.org/10.5281/zenodo.883859." rel="noopener ugc nofollow" target="_blank"><em class="my">https://doi.org/10.5281/zenodo.883859.</em></a></p><p id="64a7" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">以下是数据集的一瞥:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mz"><img src="../Images/67c7a28c04b5677cef0290f5d72f2f27.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3KQXinG9Wdnn4opbJgOfIQ.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">图1:“企鹅”数据集——作者图片</p></figure><h1 id="194e" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">数据浏览命令</h1><p id="f0b2" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">在分析任何数据集之前，我们必须对数据有一个概述，并检查数据帧的一些基本信息，如数据类型、列数、行数等。例如，在这种情况下，<code class="fe ms mt mu mv b">penguins</code>数据帧的某些方面检查如下:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mw mx l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">图2:数据概述——按作者</p></figure><h1 id="b296" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">自动化EDA</h1><p id="437d" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">在自动化EDA库的支持下，EDA变得前所未有的简单。我确实曾经写过一些Python自动化EDA库，我发现它们有助于快速生成对数据集的透彻理解。你可以在<a class="ae ky" rel="noopener" target="_blank" href="/3-python-libraries-for-effective-eda-that-you-might-have-missed-3320f48ff070"> <strong class="lt iu"> <em class="my"> Python库阅读更多你可能错过的</em> </strong> </a> <strong class="lt iu"> <em class="my">有效EDA的详细内容。</em>T25】</strong></p><p id="f127" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">我认为有必要在这个备忘单上提供这样的库建议，以方便您在单行代码中检查数据。</p><h2 id="b2b5" class="na la it bd lb nb nc dn lf nd ne dp lj ma nf ng ll me nh ni ln mi nj nk lp nl bi translated">计算机编程语言</h2><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mw mx l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">图Python中EDA的自动化库——作者</p></figure><p id="71aa" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">这里是对自动化EDA的强大库之一<code class="fe ms mt mu mv b">DataPrep</code>的一瞥。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nm mx l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">图4:作者的EDA-Gif数据准备</p></figure><h2 id="51f4" class="na la it bd lb nb nc dn lf nd ne dp lj ma nf ng ll me nh ni ln mi nj nk lp nl bi translated">稀有</h2><p id="b6c2" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">许多R包也提供自动化EDA，只需一行代码。个人认为R的包比Python的更多样化。我正在收集这些库，也许我很快就能和你分享这些可爱的包的一些细节。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mw mx l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">图4:R中EDA的自动化库——按作者</p></figure><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nm mx l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">图5: ExPandar库示例——作者Gif</p></figure><h1 id="1166" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">数据过滤</h1><h2 id="bee7" class="na la it bd lb nb nc dn lf nd ne dp lj ma nf ng ll me nh ni ln mi nj nk lp nl bi translated">切片数据帧</h2><p id="602b" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">例如，我只想选择数据的一列<code class="fe ms mt mu mv b">species</code>来显示。在R和Python中都有几种方法可以做到。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mw mx l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">图6:切片方法——按作者</p></figure><h2 id="0108" class="na la it bd lb nb nc dn lf nd ne dp lj ma nf ng ll me nh ni ln mi nj nk lp nl bi translated">用行条件选择数据</h2><p id="9b42" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">大多数情况下，您必须选择特定条件的子集进行分析。选择的子集必须满足一个或多个要求。</p><p id="1246" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">在Python中，你可以使用带有合理逻辑表达式的<code class="fe ms mt mu mv b">loc</code>、<code class="fe ms mt mu mv b">query</code>或<code class="fe ms mt mu mv b">apply(lambda x:...)</code>方法来产生结果。另一方面，在R中，我们可以通过使用<code class="fe ms mt mu mv b">filter</code>或<code class="fe ms mt mu mv b">which</code>和<code class="fe ms mt mu mv b">subset.</code>的base R方法来过滤行。下面的代码显示了我如何通过不同的方式获得比斯开岛雌性企鹅的数据。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mw mx l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">图7:按作者过滤行</p></figure><h2 id="6557" class="na la it bd lb nb nc dn lf nd ne dp lj ma nf ng ll me nh ni ln mi nj nk lp nl bi translated">选择包含特定模式的子集</h2><p id="53e6" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">当我们想要检索包含所需字符串的数据时，情况又如何呢？比如选择名字以<code class="fe ms mt mu mv b">Ad</code>开头或者以<code class="fe ms mt mu mv b">lie</code>结尾的企鹅的信息。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mw mx l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">图8:过滤字符串——按作者</p></figure><h1 id="c938" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">聚合和分组</h1><h2 id="d30b" class="na la it bd lb nb nc dn lf nd ne dp lj ma nf ng ll me nh ni ln mi nj nk lp nl bi translated"><strong class="ak">巨蟒</strong></h2><p id="382c" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">聚合和group by函数在数据转换阶段非常重要。以下是我经常用来操作数据的最常用命令。如你所见，在下面的例子中，我们有<code class="fe ms mt mu mv b">nunique,</code> <code class="fe ms mt mu mv b">mean,</code> <code class="fe ms mt mu mv b">max,</code> <code class="fe ms mt mu mv b">min,</code> <code class="fe ms mt mu mv b">sum,</code> <code class="fe ms mt mu mv b">median</code>的聚合函数，我想通过<code class="fe ms mt mu mv b"><strong class="lt iu">island &amp; sex</strong></code> <strong class="lt iu"> </strong>对数据进行分组，以查看不同企鹅种类的特征。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mw mx l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">图9:Python——按作者分组和聚合</p></figure><h2 id="decc" class="na la it bd lb nb nc dn lf nd ne dp lj ma nf ng ll me nh ni ln mi nj nk lp nl bi translated"><strong class="ak"> R </strong></h2><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mw mx l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">图10: R—分组依据和聚集依据—作者</p></figure><h1 id="76d6" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">整理</h1><p id="a7d0" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">在分组和聚合之后，通常会进入按降序或升序对值进行排序的步骤。在Python中，<code class="fe ms mt mu mv b">sort_values()</code>是我经常使用的函数。同时，在R中，我更喜欢使用<code class="fe ms mt mu mv b">dplyr</code>包中的<code class="fe ms mt mu mv b">arrange()</code>函数，因为我发现这样最容易记住。</p><p id="35cb" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">下面的例子展示了我是如何按照企鹅的体型大小降序排列它们的。</p><h2 id="a919" class="na la it bd lb nb nc dn lf nd ne dp lj ma nf ng ll me nh ni ln mi nj nk lp nl bi translated">计算机编程语言</h2><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mw mx l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">图11:Python——按作者排序</p></figure><h2 id="5ad3" class="na la it bd lb nb nc dn lf nd ne dp lj ma nf ng ll me nh ni ln mi nj nk lp nl bi translated">稀有</h2><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mw mx l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">图12: R—按作者排序</p></figure><h1 id="fe64" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated"><strong class="ak">改变栏目</strong></h1><p id="6394" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">例如，您想在聚合后重命名您的列或者使列名更容易记住，您可以使用函数<code class="fe ms mt mu mv b">rename().</code>这个函数在Pandas和Dplyr中都有，目的相同。下面的代码还展示了一些示例，在这些示例中，您可以删除不需要的列或添加新列。</p><h2 id="cd8c" class="na la it bd lb nb nc dn lf nd ne dp lj ma nf ng ll me nh ni ln mi nj nk lp nl bi translated">计算机编程语言</h2><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mw mx l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">图13: Python —按作者调整列</p></figure><h2 id="0abb" class="na la it bd lb nb nc dn lf nd ne dp lj ma nf ng ll me nh ni ln mi nj nk lp nl bi translated">稀有</h2><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mw mx l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">图14: R—按作者调整列</p></figure><h1 id="e9cb" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">结论</h1><p id="d634" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">我相信联系一些你已经很熟悉的东西可以帮助你更有效地学习新知识。我希望这些指针在您将来使用Python或R数据操作时能够派上用场。祝你好运！</p></div></div>    
</body>
</html>