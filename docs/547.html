<html>
<head>
<title>Source code datasets — Deep dive into GitHub characteristics</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">源代码数据集——深入探究GitHub特征</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/source-code-datasets-deep-dive-into-github-characteristics-a26c622e0794#2022-01-18">https://towardsdatascience.com/source-code-datasets-deep-dive-into-github-characteristics-a26c622e0794#2022-01-18</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""><h1 id="29e6" class="pw-post-title io ip iq bd ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm bi translated">源代码数据集——深入探究GitHub特征</h1></div><div class=""><h2 id="f8a6" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">采样GitHub时要考虑的亚人群</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/da7677463c403a5e62d6a6192eb9fd9f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*F1tVvdNajVxof20LTryboA.jpeg"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">照片由来自<a class="ae kv" href="https://www.pexels.com/photo/different-types-of-sauce-3622479/?utm_content=attributionCopyText&amp;utm_medium=referral&amp;utm_source=pexels" rel="noopener ugc nofollow" target="_blank"> Pexels </a>的Jonathan Borba 拍摄</p></figure><h1 id="74c4" class="kw kx iq bd ky kz la lb lc ld le lf lg jw lh jx li jz lj ka lk kc ll kd lm ln bi translated"><strong class="ak"> Github隐性偏见——为什么它很重要</strong></h1><p id="ed90" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">CodeAI最近成为了AI界的共同话题；从<a class="ae kv" href="https://copilot.github.com/" rel="noopener ugc nofollow" target="_blank"> Github的副驾驶</a>，通过<a class="ae kv" href="https://github.com/microsoft/CodeBERT" rel="noopener ugc nofollow" target="_blank">微软的CodeBert </a>到<a class="ae kv" href="https://guesslang.readthedocs.io/en/latest/" rel="noopener ugc nofollow" target="_blank"> VsCode的GuessLang </a> (PS，你能找到这三者之间的共同联系吗？).机器学习比以往任何时候都更多地应用于源代码领域。推动它的是NLP世界最近的重大改进，代码库的高可用性(无论是其<a class="ae kv" href="https://github.com/" rel="noopener ugc nofollow" target="_blank"> Github </a>、<a class="ae kv" href="https://about.gitlab.com/" rel="noopener ugc nofollow" target="_blank"> Gitlab </a>还是甚至像<a class="ae kv" href="http://www.rosettacode.org/wiki/Rosetta_Code" rel="noopener ugc nofollow" target="_blank"> Rosetta Code </a>这样的开源项目)，以及源代码是技术世界中几乎每个人的重要部分这一事实。让我们每个人都成为该领域的专家。但是这也是一个主要的缺点，因为获得源代码数据集的简单性可能会掩盖它所包含的隐含的复杂性。当我们对Github的机器学习应用程序进行采样时，我们基本上会搜索类似于<a class="ae kv" href="https://blogs.gartner.com/paul-debeasi/2019/02/14/training-versus-inference/" rel="noopener ugc nofollow" target="_blank">推理时间</a>的代码，类似于它将应用到的代码，最有可能是公司内部的代码。但问题是，我们可以假设这些代码与占GitHub较高份额的开源和虚拟个人项目有很大不同。天真地没有考虑到这一点，按原样对Github进行采样，将最有可能<a class="ae kv" rel="noopener" target="_blank" href="/how-to-generate-code-dataset-for-machine-learning-applications-fbc1b888cc84">导致我们的模型过度适应</a>手头有偏见的人群，而不是对目标人群进行足够的概括(值得一提的是一个类似的案例，其中许多当局决定<a class="ae kv" href="https://www.nature.com/articles/d41586-020-03186-4" rel="noopener ugc nofollow" target="_blank">禁止面部识别服务</a>，因为训练人群太有偏见)。这就是为什么深刻理解GitHub的内部特性如此重要。Github的主要子群体详述如下。</p><h1 id="56f8" class="kw kx iq bd ky kz la lb lc ld le lf lg jw lh jx li jz lj ka lk kc ll kd lm ln bi translated"><strong class="ak">源代码语言</strong></h1><p id="2af3" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">第一个也是最明显的地方是Github的源代码语言发行版。众所周知，Github有一个超级长尾语言版本(一些语言如Javascript非常常见，而其他语言如C非常罕见)。考虑到Github的社交方面，这并不奇怪。由于同样的现象可以在其他基于社交的技术网站上看到(如StackOverflow <a class="ae kv" href="https://stackoverflow.com/tags" rel="noopener ugc nofollow" target="_blank">最常见的问题标签</a>)，Github拥有类似的特征(更常见和流行的源代码语言和技术的比率更高)是有道理的。考虑到天真的Github采样将以代理长尾分布结束，这会严重影响机器学习模型，这可能是有问题的。应该强制执行诸如<a class="ae kv" href="https://en.wikipedia.org/wiki/Stratified_sampling" rel="noopener ugc nofollow" target="_blank">分层抽样</a>的规范化政策，以避免生成的模型过度拟合这种倾斜的语言分布。</p><h1 id="5f54" class="kw kx iq bd ky kz la lb lc ld le lf lg jw lh jx li jz lj ka lk kc ll kd lm ln bi translated"><strong class="ak">账户类型</strong></h1><p id="d3c3" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">Github有两种<a class="ae kv" href="https://docs.github.com/en/get-started/learning-about-github/types-of-github-accounts" rel="noopener ugc nofollow" target="_blank">账户类型</a> —用户(个人)和组织(公司)。理论上我们会假设它反映了两种不同的使用模式；个人(用户)存储库是辅助/虚拟项目，公司(组织、公共)存储库是开源/文档(鉴于Github启用了仅由公司员工访问的私有模式，公共模式应该包括我们希望与世界共享的内容——开源、示例和文档)。事实是，我们可以在这里观察到一个有趣的组合:一些公司向他们的公共帐户发布看似私人的代码，一些用户向他们的个人帐户发布看似他们公司相关的代码。这有许多可能的原因；公司可能会错误地发布代码。用户，尤其是在covid期间在家工作的用户，可能缺乏对Github上私人用户(公共范围)和公司(私人范围)帐户之间的区别的理解。这种现象没有什么有趣的应用；首先，它增加了<a class="ae kv" href="https://medium.com/@oriabramovski/stop-searching-for-aws-secrets-in-code-f5cfda9431a9" rel="noopener">在公司的公共存储库和员工的存储库中找到内部机密的可能性。第二，当我们对Github进行采样时，我们可能会面对个人和(公共)公司账户的内部代码。虽然Github的较高份额仍然是个人账户(在随机抽样测试中，我们面临大约9:1 </a>的<a class="ae kv" href="https://medium.com/@oriabramovski/stop-searching-for-aws-secrets-in-code-f5cfda9431a9" rel="noopener">比率)，因此大部分抽样代码很可能是私有的(与公司无关)，但如果我们想要将Github上的内部专业级存储库作为目标，应该将它考虑在内。</a></p><h1 id="4137" class="kw kx iq bd ky kz la lb lc ld le lf lg jw lh jx li jz lj ka lk kc ll kd lm ln bi translated"><strong class="ak">组织账户范围</strong></h1><p id="21ef" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">如前所述，公司账户可以是<a class="ae kv" href="https://github.com/pricing" rel="noopener ugc nofollow" target="_blank">公共账户或私人账户</a>。考虑到不同的共享范围，假设私有存储库包含更多的公司关键代码是有意义的，这些代码很可能会受到较低标准的影响(因为代码在公司外部是不可见的，缺乏清晰的文档和代码样式不太重要)。开源项目中高标准的一个例子可以在像<a class="ae kv" href="https://github.com/facebook" rel="noopener ugc nofollow" target="_blank"> Meta </a>官方账户这样的地方找到..通过开源技术构建社区)。Github中有许多开源项目类型，其中包括员工仅公司所有(如Meta，其中“成员必须有两个因素授权”)、一般开放公司所有(如<a class="ae kv" href="https://github.com/salesforce" rel="noopener ugc nofollow" target="_blank"> SalesForce </a>，其中贡献不限于SalesForce员工)，以及一般开放，如<a class="ae kv" href="https://github.com/vuejs" rel="noopener ugc nofollow" target="_blank"> VueJs </a>(非公司所有)。这样的账户应该被抽样，以防我们寻找高代码标准或者成为数据集负总体，在那里错误不太可能出现。以防我们寻找更多的内部知识库；其他不太面向开源的公司应该成为目标。Github启用了<a class="ae kv" href="https://github.com/search/advanced" rel="noopener ugc nofollow" target="_blank">高级搜索标准</a>，这对此很有用——通过考虑关注者的数量、存储库的数量甚至账户位置，我们可以有意地将目标锁定在规模更适中的账户上(这里应该出现较低的标准，因此代码应该更类似于公司内部)。</p><h1 id="cec4" class="kw kx iq bd ky kz la lb lc ld le lf lg jw lh jx li jz lj ka lk kc ll kd lm ln bi translated"><strong class="ak">正在使用的技术</strong></h1><p id="d6dc" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">正如我们到目前为止所看到的，依赖Github作为主要数据源来训练我们的模型可能会产生一种隐含的偏见——虽然我们最有可能针对的是<strong class="lq ir">内部</strong>代码，但天真随机的抽样群体最有可能由<strong class="lq ir">开源和私有项目</strong>组成。这可能会影响正在使用的代码标准和技术(例如，看到环境变量或日志记录等专业代码模式的可能性)。反映这一点的一个简单直观的练习可以是，在搜索像谷歌地图这样的超级通用技术<a class="ae kv" href="https://github.com/search?q=maps.googleapis.com&amp;type=code" rel="noopener ugc nofollow" target="_blank">时，比较结果的数量(大约200万个结果，其中许多似乎是次要项目)与搜索像Okta </a>这样的更小众的企业相关技术<a class="ae kv" href="https://github.com/search?q=okta.com&amp;type=Code" rel="noopener ugc nofollow" target="_blank">(大约9万个结果，其中许多似乎是内部公司相关的)。另一个相关的证词可以在Meli at el </a><a class="ae kv" href="https://www.ndss-symposium.org/wp-content/uploads/2019/02/ndss2019_04B-3_Meli_paper.pdf" rel="noopener ugc nofollow" target="_blank"> Github的泄露秘密分析</a>中找到，他们发现Google api key的泄露频率几乎是Twilio的1000倍(与Okta一样，它可以被认为是更专业的代码)。考虑使用中的技术可以突出其他特征，比如我们发现的项目的代码标准(内部代码应该比虚拟项目的质量更高)。因此，依靠这种技术的存在来定位更有可能与内部公司相关的存储库是有意义的。</p><h1 id="bd27" class="kw kx iq bd ky kz la lb lc ld le lf lg jw lh jx li jz lj ka lk kc ll kd lm ln bi translated"><strong class="ak">主题</strong></h1><p id="0595" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">代码项目可以满足各种需求，从服务器客户端到Android原生应用。Github的存储库目标可以通过查看存储库<a class="ae kv" href="https://github.com/topics" rel="noopener ugc nofollow" target="_blank">标记的主题</a>来查看。同时值得一提的是，根据<a class="ae kv" href="https://arxiv.org/abs/2010.09116" rel="noopener ugc nofollow" target="_blank"> Izadi等人</a>的分析，大多数Github的存储库都没有主题/正确的主题。如何评估存储库主题的另一个选择是查看源代码语言和正在使用的技术——使用Angular的Javascript最有可能与客户端相关，而使用Node.js的Javascript最有可能与服务器相关。C、C++和C#更有可能是服务器端而不是客户端相关的。正如我们在前面的分析中看到的。搭载谷歌地图的安卓，可以增加成为副业的可能性。作为一个例子，Python比Javascript在数据从业者中更常见，因此它更有可能包含相关的数据科学/数据工程代码。因此，确保我们的数据集跨语言均匀采样不仅对于避免语言过度拟合很重要，而且确保它将跨不同的代码主题通用化。例如，虽然我们的目标用例与C++的相关性可能不如Javascript，但确保我们的数据集包含C++项目仍然很重要，以便获得子样本揭示的相关代码模式的可见性。</p><h1 id="3045" class="kw kx iq bd ky kz la lb lc ld le lf lg jw lh jx li jz lj ka lk kc ll kd lm ln bi translated"><strong class="ak">用户特征分析</strong></h1><p id="05f4" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">私人帐户可以是不同的成熟级别(虚拟项目对面向开源)和不同的目标范围(附带项目对内部公司相关)。相关的指示可以是专业代码模式的存在，如<a class="ae kv" href="https://docs.github.com/en/repositories/managing-your-repositorys-settings-and-features/customizing-your-repository/licensing-a-repository" rel="noopener ugc nofollow" target="_blank">许可证</a>文件、<a class="ae kv" href="https://docs.github.com/en/repositories/managing-your-repositorys-settings-and-features/customizing-your-repository/about-readmes" rel="noopener ugc nofollow" target="_blank">自述文件</a>文件、专业技术(如Okta)或者甚至只是测试文件。例如在Python上，没有一个<a class="ae kv" href="https://pip.pypa.io/en/stable/reference/requirements-file-format/" rel="noopener ugc nofollow" target="_blank"> requirements.txt </a>文件可以表明回购标准较低。考虑到特定的源代码语言特征可以使目标语言具有特定的代码味道(就像Python数据从业者一样，<a class="ae kv" href="https://github.com/search?l=python&amp;p=7&amp;q=%22snowflake.connector.connect%22&amp;type=Code" rel="noopener ugc nofollow" target="_blank">使用雪花连接器</a>并将凭证保持为明文代码)。根据Meli等人<a class="ae kv" href="https://www.ndss-symposium.org/wp-content/uploads/2019/02/ndss2019_04B-3_Meli_paper.pdf" rel="noopener ugc nofollow" target="_blank"> Github的秘密分析</a>发现泄露的秘密是一个重复的问题(泄露的秘密更有可能同时出现)，我们可以假设我们在一个回购中发现的特征也适用于用户的其他回购。使我们能够通过在一些用户帐户的存储库中观察特定代码模式(如代码味道)来锁定用户。</p><h1 id="8075" class="kw kx iq bd ky kz la lb lc ld le lf lg jw lh jx li jz lj ka lk kc ll kd lm ln bi translated">智能瞄准</h1><p id="5683" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">Github有很多子种群。这里介绍了最重要的几个，但是还有很多其他的。我们看到，用户帐户在保密率和代码实践方面更类似于私有(内部)公司，而公司(公共)帐户在使用的技术类型方面更类似于私有公司。在天真地对Github进行抽样之前，我们应该首先了解我们寻找的目标项目特征是什么(以及为了产生丰富的负面群体，什么不是)。只有这样，我们才能找到针对感兴趣人群的方法，并真正估计我们的数据集代表它的程度。但无论如何，不要天真地试用Github，就认为它会工作得很好。在大多数情况下，更聪明的目标是必须的。</p></div></div>    
</body>
</html>