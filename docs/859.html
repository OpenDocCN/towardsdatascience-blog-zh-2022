<html>
<head>
<title>Power BI Modelling — Inheriting a messy model</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Power BI建模——继承混乱的模型</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/power-bi-modelling-inheriting-a-messy-model-76e235fb851#2022-01-31">https://towardsdatascience.com/power-bi-modelling-inheriting-a-messy-model-76e235fb851#2022-01-31</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""><h1 id="07e1" class="pw-post-title ir is it bd iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp bi translated">Power BI建模——继承混乱的模型</h1></div><div class=""><h2 id="0f20" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">在这些情况下该怎么做</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/115a6af1e411a776aa468aa844bbd71b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*Xq1FBLV17aWvXbFa"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">尼古拉斯·皮卡德在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure><p id="8f17" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">你有没有继承过乱七八糟的模式？就像陷入蜘蛛网，被整个吞噬。</p><p id="e648" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我说的吞噬整体是什么意思？</p><p id="d0ea" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这意味着，如果你没有问正确的问题，你可能会花一整天的时间来制定措施和查询，却一事无成！</p><p id="a781" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我去过那里。</p><p id="3096" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">图片胜过千言万语。</p><p id="5ce2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">看看这种类型的模型。这里的每个“正方形”都是一张桌子。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi lv"><img src="../Images/3329f24f3d78867eed5f5c5fef7cc9ea.png" data-original-src="https://miro.medium.com/v2/resize:fit:1302/format:webp/1*8gVxr5SgdfsRpy-wMAiYdQ.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><p id="1e93" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我记得有人开玩笑地称这种数据建模风格为“蜘蛛网模式”。😀</p><p id="7809" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在这种情况下你能做什么？</p><p id="c562" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">你可以做几件事。在深入细节之前，先问一些宽泛的问题。</p></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><h1 id="d5fa" class="md me it bd mf mg mh mi mj mk ml mm mn jz mo ka mp kc mq kd mr kf ms kg mt mu bi translated">怎么办。</h1><ol class=""><li id="5f9c" class="mv mw it lb b lc mx lf my li mz lm na lq nb lu nc nd ne nf bi translated">确定并理解报告的目的</li><li id="3a9a" class="mv mw it lb b lc ng lf nh li ni lm nj lq nk lu nc nd ne nf bi translated">确定事实表</li><li id="4ebc" class="mv mw it lb b lc ng lf nh li ni lm nj lq nk lu nc nd ne nf bi translated">确定与事实表相关的过滤表</li><li id="1920" class="mv mw it lb b lc ng lf nh li ni lm nj lq nk lu nc nd ne nf bi translated">复制度量标准和视觉效果来测试您的理解</li><li id="78b2" class="mv mw it lb b lc ng lf nh li ni lm nj lq nk lu nc nd ne nf bi translated">查看与事实表相关的超级查询步骤</li></ol></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><h2 id="e079" class="nl me it bd mf nm nn dn mj no np dp mn li nq nr mp lm ns nt mr lq nu nv mt nw bi translated">理解报告的目的</h2><p id="50b2" class="pw-post-body-paragraph kz la it lb b lc mx ju le lf my jx lh li nx lk ll lm ny lo lp lq nz ls lt lu im bi translated">首先，在你做任何事情之前，询问一下报告的目的。这是一个很重要的问题。这将为你接下来需要做的事情打下基础。</p><p id="d870" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">记下受众是谁，他们阅读此报告的频率以及原因。这背后的解释是什么？您将需要这些信息来帮助您理解数据模型。</p><p id="8754" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果可能的话，在报告的每一页，询问每一页的主旨。</p><p id="0aa4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在浏览模型时，请将这些作为您的心理笔记。</p></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><h2 id="1542" class="nl me it bd mf nm nn dn mj no np dp mn li nq nr mp lm ns nt mr lq nu nv mt nw bi translated">确定事实表。</h2><p id="3f08" class="pw-post-body-paragraph kz la it lb b lc mx ju le lf my jx lh li nx lk ll lm ny lo lp lq nz ls lt lu im bi translated">既然您已经了解了报告的内容，那么是时候深入研究模型本身了。</p><p id="fa8d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们确定事实表。<strong class="lb iu">事实表应该比其他表有更多的连接。</strong></p><p id="2dbf" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">再看关系，<strong class="lb iu">他们很可能处于一对多关系的多端。</strong></p><p id="355f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">确定了事实表后，您可以进行列检查，以了解报告的内容。您可以通过浏览实际的报告和事实表来做到这一点。</p><p id="2cc8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">试着记住报告的目的。在任何时候，如果你发现事实表与实际的报告不相关，如果可能的话，是时候回到以前的开发者那里，问问他们为什么在那里。</p><p id="7055" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">您会发现，很多时候这里有事实表用于特定的报告目的。它只在那里被报告一两次，但它留在那里只是为了以防有额外的请求。</p><p id="acaa" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">记下这些事实表。</p><p id="13e0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这是为了让您了解什么被认为是“重要”的表，并且大多数度量也是围绕这个表构建的。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oa"><img src="../Images/d6ee09325a88b62acc0ef2045fd79eaa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1296/format:webp/1*NMnZzj12Fan2e4X0AnfyoQ.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><p id="aca3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">用红色突出显示的很可能是事实表。即使他们不是，这也是一个很好的问题，问为什么有这么多反对它的加入。毕竟，如果它是一个不包含重要信息的表，为什么会有这么多的连接呢？</p><p id="087e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在你可能会想，我只是假设在你继承的模型中实际上有事实表。如果它非常复杂，以至于没有事实表或者没有人知道它们是什么，该怎么办？</p><p id="c393" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在这种情况下，请记住报表的目的，并在报表中查找引用这些表的度量。那些可能是你的事实表。</p><p id="285a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在下面的测量中，它会给你很多线索。例如，如果是总计的总和，总计表在哪里？它非常重要，足以在报表度量中使用，因此值得一看。第二部分是KEEPFILTERS。这可能是一个过滤表。</p><pre class="kj kk kl km gt ob oc od oe aw of bi"><span id="9e99" class="nl me it oc b gy og oh l oi oj">Measure = CALCULATE(SUM(Totals), KEEPFILTERS(Store == A))</span></pre><p id="e1bb" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">请记住，报告的目的是提供关于事实表位置的关键提示。</p></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><h2 id="be74" class="nl me it bd mf nm nn dn mj no np dp mn li nq nr mp lm ns nt mr lq nu nv mt nw bi translated">识别过滤表</h2><p id="181c" class="pw-post-body-paragraph kz la it lb b lc mx ju le lf my jx lh li nx lk ll lm ny lo lp lq nz ls lt lu im bi translated">仔细看看事实表。应该有其他的表加入进来反对它。这些可能是过滤表。您可以通过转到主报告并检查过滤器来验证这一点。</p><p id="4748" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">是否有针对最终用户的<strong class="lb iu">过滤器？他们用什么桌子？很可能这些都是过滤表。</strong></p><p id="47f3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">记下这些过滤表，它们在与利益相关者的会议中对你有所帮助。你可以参考这些表格，它们很可能是你可以用来“切割数据”的表格。</p><p id="2744" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这会给你一些谈判的权力。假设有人要求以某种方式切割数据，您可以问自己过滤表是否存在，或者您可能需要更多的工作来获得这样的表。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ok"><img src="../Images/80775c8c3631be0d49f418a1bab95951.png" data-original-src="https://miro.medium.com/v2/resize:fit:1318/format:webp/1*S5N7_mrotvDvB3cUcoomgA.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><p id="c432" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">黄色的表可能是过滤表。</p></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><h2 id="fada" class="nl me it bd mf nm nn dn mj no np dp mn li nq nr mp lm ns nt mr lq nu nv mt nw bi translated">仔细检查报告</h2><p id="6894" class="pw-post-body-paragraph kz la it lb b lc mx ju le lf my jx lh li nx lk ll lm ny lo lp lq nz ls lt lu im bi translated">既然您已经理解了报告的目的，并且已经确定了一些事实表(其中一些可能已经过时了)和过滤表，那么是时候通过问自己一些问题来再次检查您对报告的理解了。</p><p id="a634" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这是有趣的部分！</p><p id="6f06" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">看看你能否复制一些报告的视觉效果，最好是最重要的，以及你是否理解它们是如何创建的。您可能会遇到某些可视级别的过滤器以及“内置”了过滤器的度量</p><p id="6769" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这些是问前一个开发者的好问题。</p><p id="e377" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">“为什么这个视觉效果只有2021年4月1日之后才有视觉级别过滤器，而其他视觉效果没有？”</p><p id="016e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">"为什么有一个测量XYZ的过滤器？"</p><p id="bd53" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">"为什么在Power Query中而不是DAX中这样做？"</p><p id="707b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这些都是要问的问题。记得回顾报告的目的。</p><p id="1032" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">比较表格时使用TREATAS、INTERSECT和EXCEPT。这些函数将帮助您比较表，而不必建立实际的关系。这样做将使模型在导航时保持不变。如果你想了解更多关于这些功能的信息，请点击这里查看这篇文章。</p></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><h2 id="8dbb" class="nl me it bd mf nm nn dn mj no np dp mn li nq nr mp lm ns nt mr lq nu nv mt nw bi translated">查看与事实表相关的超级查询步骤</h2><p id="9d86" class="pw-post-body-paragraph kz la it lb b lc mx ju le lf my jx lh li nx lk ll lm ny lo lp lq nz ls lt lu im bi translated">现在，您已经知道了事实表和过滤表在哪里，以及如何再现一些度量和可视化，是时候看看Power Query了。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ol"><img src="../Images/c6dbea4b5b26b4516271f9948cf79520.png" data-original-src="https://miro.medium.com/v2/resize:fit:1364/format:webp/1*3lf88cAiL8bWMzGhRYSpCg.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><p id="6e97" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">回顾Power Query中的转换过程，特别注意构建事实表的过程。您可能想知道为什么创建事实表过程中的每一步都是必要的。这需要一些时间。</p><p id="44f8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">检查</strong>时，总是复制查询。您也不想意外删除步骤。尽量用你理解的方式重命名这些步骤。它将帮助您跟踪您已经检查过的步骤，以及哪些步骤还需要检查。</p></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><p id="3682" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果其他的一切都失败了，你真的对报告一无所知，并且收到了前一个开发人员令人困惑的回复？</p><p id="bdcd" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这份报告一提出来你就取消会议了吗？</p><p id="75a8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">你被告知去解决它？😤</p><p id="f044" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">只需向每个人展示蜘蛛网模式，并告诉每个人你将需要重建一切。很可能从一开始就错了！</p></div></div>    
</body>
</html>