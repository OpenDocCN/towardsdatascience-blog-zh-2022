<html>
<head>
<title>An Intro to Sentiment Analysis in R — How Does Twitter Feel about Baker Mayfield?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">R中的情感分析介绍Twitter对贝克·梅菲尔德有何看法？</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/an-intro-to-sentiment-analysis-in-r-how-does-twitter-feel-about-baker-mayfield-cda513ed0b78#2022-01-12">https://towardsdatascience.com/an-intro-to-sentiment-analysis-in-r-how-does-twitter-feel-about-baker-mayfield-cda513ed0b78#2022-01-12</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""><h1 id="b2de" class="pw-post-title io ip iq bd ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm bi translated">R中的情感分析介绍Twitter对贝克·梅菲尔德有何看法？</h1></div><div class=""><h2 id="c7e6" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">使用Twitter开发者API和R库分析受众情绪</h2></div><p id="6297" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">全国的体育迷定期讨论他们喜欢的球队、球员、教练等。贯穿每个运动赛季。毕竟，共同的热情将人们联系在一起——而体育运动经常将人们聚集在一起。不同的球队有如此多的观点，如果我们想更好地了解某个球队、教练、比赛或球员的情绪会怎么样呢？</p><p id="0bd6" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">一些R包使我们能够进行情感分析，以确定社交媒体帖子是积极的、消极的还是中立的。当我们将这些与Twitter开发人员API(或用于数据提取的Netlytic)结合起来时，我们能够解析我们选择的主题的数千条推文。</p></div><div class="ab cl lb lc hu ld" role="separator"><span class="le bw bk lf lg lh"/><span class="le bw bk lf lg lh"/><span class="le bw bk lf lg"/></div><div class="ij ik il im in"><figure class="lj lk ll lm gt ln gh gi paragraph-image"><div role="button" tabindex="0" class="lo lp di lq bf lr"><div class="gh gi li"><img src="../Images/4555b7ce42b2565eb0b8ad07eb61a047.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*8wU716pz1fjY51L1"/></div></div><p class="lu lv gj gh gi lw lx bd b be z dk translated">桑德罗·舒赫在<a class="ae ly" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</p></figure></div><div class="ab cl lb lc hu ld" role="separator"><span class="le bw bk lf lg lh"/><span class="le bw bk lf lg lh"/><span class="le bw bk lf lg"/></div><div class="ij ik il im in"><p id="d1dd" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在本赛季的大部分时间里，继上赛季季后赛之后，克利夫兰·布朗队的四分卫贝克·梅菲尔德受到了来自许多不同角度和观点的巨大批评。随着早期过多的伤病和受欢迎的布朗队球员家属在社交媒体上的批评，本赛季对于崭露头角的布朗队来说无疑是一个巨大的调整。然而，在1月3日对阵匹兹堡钢人队的糟糕表现(单场比赛连续10次未完成比赛和9次助攻)之后，在Twitter上与当地媒体记者接触，并在本赛季剩余时间里因急需的手术而缺席，许多人在Twitter上表达了他们对自1999年以来围绕布朗队第31位四分卫的争议的看法。</p><p id="934c" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">使用R，我们可以执行情感分析来回答问题，<strong class="kh ir"> <em class="lz">“那么，人们对贝克·梅菲尔德的真实感受是什么？”</em>T3】</strong></p></div><div class="ab cl lb lc hu ld" role="separator"><span class="le bw bk lf lg lh"/><span class="le bw bk lf lg lh"/><span class="le bw bk lf lg"/></div><div class="ij ik il im in"><h2 id="6c34" class="ma mb iq bd mc md me dn mf mg mh dp mi ko mj mk ml ks mm mn mo kw mp mq mr ms bi translated">使用Twitter API进行数据拉取</h2><p id="2bad" class="pw-post-body-paragraph kf kg iq kh b ki mt jr kk kl mu ju kn ko mv kq kr ks mw ku kv kw mx ky kz la ij bi translated">首先，我们需要引入一些R库来帮助我们进行文本清理、可视化和情感分析。</p><pre class="lj lk ll lm gt my mz na nb aw nc bi"><span id="70ad" class="ma mb iq mz b gy nd ne l nf ng">library(rtweet)<br/>library(stopwords) <br/>library(dplyr) <br/>library(tidyr) <br/>library(tidytext) <br/>library(wordcloud)<br/>library(devtools)<br/>library(tidyverse)      <br/>library(stringr)<br/>library(textdata)</span></pre><p id="630e" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">有各种各样的选项可用于提取社交媒体数据，如Netlytic(基于云的文本分析器和社交网络可视化工具，包括数据导出)和Twitter开发人员API。对于我们的用例，我们将使用Twitter API来提取包含各种关键字的推文。(注意:此API仅允许我们提取前6–9天的数据)。</p><p id="b9be" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">你可以在这里阅读更多关于创建开发者帐户、使用Twitter API以及创建供你使用的访问令牌的信息:<a class="ae ly" href="https://cran.r-project.org/web/packages/rtweet/vignettes/auth.html" rel="noopener ugc nofollow" target="_blank">https://cran . r-project . org/web/packages/rtweet/vignettes/auth . html</a>。完成后，您可以从您的开发者门户访问更多信息。</p><p id="7a73" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">一旦您有了应用程序密钥、消费者密钥和访问令牌，您就可以使用create_token()来生成授权令牌，这样您就可以将您的推文拉过来。</p><pre class="lj lk ll lm gt my mz na nb aw nc bi"><span id="3470" class="ma mb iq mz b gy nd ne l nf ng">create_token(app = app_name, <br/> consumer_key = consumer_key, <br/> consumer_secret = consumer_secret, <br/> access_token = access_token, <br/> access_secret = access_secret)</span></pre><p id="7cf8" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">现在，您已经准备好开始提取数据了！使用rtweets库中的search_tweets()，我们可以使用一些关键字。在使用布尔运算符时，我们可以搜索任何包含至少1个给定搜索词的推文。默认情况下，这只返回100条tweets，最大限制为18，000条。但是，您可以设置一个参数，在“retryonratelimit”设置为true的情况下返回更多推文(基于您的帐户访问级别，您可以拉取的推文总数是有限制的，所以我建议只在访问级别较高的情况下使用该参数)。还有其他选项来抓取最受欢迎的推文或混合最近和受欢迎的推文，而默认设置是返回最近的推文。出于一般情绪分析和时间的目的，我选择不包括转发。</p><p id="0b47" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">有关查询格式/灵活性/选项的更多信息可在此处获得:<a class="ae ly" href="https://www.rdocumentation.org/packages/rtweet/versions/0.7.0/topics/search_tweets" rel="noopener ugc nofollow" target="_blank">https://www . rdocumentation . org/packages/rtweet/versions/0 . 7 . 0/topics/search _ tweets</a></p><pre class="lj lk ll lm gt my mz na nb aw nc bi"><span id="4a9b" class="ma mb iq mz b gy nd ne l nf ng">tweets_data &lt;- search_tweets('Baker Mayfield OR Mayfield OR Cleveland Browns OR Stefanski', include_rts = FALSE, lang = 'en', n = 18000)</span></pre><p id="11f3" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">观察返回的推文数量</p><pre class="lj lk ll lm gt my mz na nb aw nc bi"><span id="ac6f" class="ma mb iq mz b gy nd ne l nf ng">nrow(tweets_data) </span></pre><figure class="lj lk ll lm gt ln gh gi paragraph-image"><div role="button" tabindex="0" class="lo lp di lq bf lr"><div class="gh gi nh"><img src="../Images/9388246aa6f228c75f3853353c96300b.png" data-original-src="https://miro.medium.com/v2/resize:fit:812/format:webp/1*cQgOBwCLeYuuCRZJD7C2eA.png"/></div></div><p class="lu lv gj gh gi lw lx bd b be z dk translated">照片由陈伶俐·林恩(右输出)</p></figure><p id="3b63" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">Twitter API返回许多关于Tweets的详细信息，包括标签长度、url模式等。出于分析的目的，我们感兴趣的是前16列的信息，范围从user_id到reply_count。</p><pre class="lj lk ll lm gt my mz na nb aw nc bi"><span id="331e" class="ma mb iq mz b gy nd ne l nf ng">tweets_data &lt;- tweets_data[,1:16]<br/>summary(tweets_data)</span></pre><figure class="lj lk ll lm gt ln gh gi paragraph-image"><div role="button" tabindex="0" class="lo lp di lq bf lr"><div class="gh gi ni"><img src="../Images/2c2a76ae88d0a34f2ce5e97be7150f75.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6PCNce30FbEY5HUTxxmMTw.png"/></div></div><p class="lu lv gj gh gi lw lx bd b be z dk translated">照片由陈伶俐·林恩(右输出)</p></figure><p id="4d5e" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">现在，我们可以看看一些推文及其内容…</p><pre class="lj lk ll lm gt my mz na nb aw nc bi"><span id="b17a" class="ma mb iq mz b gy nd ne l nf ng">head(tweets_data$text)</span></pre><figure class="lj lk ll lm gt ln gh gi paragraph-image"><div role="button" tabindex="0" class="lo lp di lq bf lr"><div class="gh gi nj"><img src="../Images/166c62088d8b52c27038db46fdd88699.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gl6Q5jX3x2Or2vXqXMaJQA.png"/></div></div><p class="lu lv gj gh gi lw lx bd b be z dk translated">照片由陈伶俐·林恩(右输出)</p></figure><p id="f68a" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们还可以观察哪一天关于我们的话题的推文最多。</p><figure class="lj lk ll lm gt ln gh gi paragraph-image"><div role="button" tabindex="0" class="lo lp di lq bf lr"><div class="gh gi nk"><img src="../Images/3781a80b7df4334e3fa8c2a11b3f321b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*yL2MzV4Al_CT4d5y4Swkjw.png"/></div></div><p class="lu lv gj gh gi lw lx bd b be z dk translated">照片由陈伶俐·林恩(右输出)</p></figure><p id="d05b" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们现在可以看到，绝大多数推文发生在1月4日星期二，这是布朗队对钢人队比赛(也是梅菲尔德本赛季最后一场比赛)后的一天。在我们继续分析时，记住这一点很重要，因为这可能会影响我们数据中的情绪。</p><h2 id="97cb" class="ma mb iq bd mc md me dn mf mg mh dp mi ko mj mk ml ks mm mn mo kw mp mq mr ms bi translated">一些初步探索和数据预处理</h2><p id="7319" class="pw-post-body-paragraph kf kg iq kh b ki mt jr kk kl mu ju kn ko mv kq kr ks mw ku kv kw mx ky kz la ij bi translated">我们可以使用tidytext库中的unnest_tokens()函数将我们的tweets扩展为单个单词，将单词格式化为小写，并删除任何标点符号，然后过滤掉不需要的单词(the、to、and、is等)。)使用预定义的停用词进行分析。</p><pre class="lj lk ll lm gt my mz na nb aw nc bi"><span id="9bbd" class="ma mb iq mz b gy nd ne l nf ng">words_data &lt;- tweets_data %&gt;% select(text)  %&gt;% <br/>              unnest_tokens(word, text)</span><span id="f74f" class="ma mb iq mz b gy nl ne l nf ng">words_data %&gt;% count(word, sort = TRUE)</span></pre><figure class="lj lk ll lm gt ln gh gi paragraph-image"><div class="gh gi nm"><img src="../Images/9f5b32bd9b86425f481a01bca6d78521.png" data-original-src="https://miro.medium.com/v2/resize:fit:1296/format:webp/1*GSWebWIxO17pDIxQfOO4lQ.png"/></div><p class="lu lv gj gh gi lw lx bd b be z dk translated">照片由陈伶俐·林恩拍摄(R输出——我们数据中的热门词汇)</p></figure><p id="486f" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在删除停用词之前，使用anti_join(stop_words)，我们可以看到一些最常见的词将出现在停用词中，如https和t.co，因此我们可以过滤掉这些词，过滤掉停用词，然后再次检查。</p><pre class="lj lk ll lm gt my mz na nb aw nc bi"><span id="21b8" class="ma mb iq mz b gy nd ne l nf ng">words_data &lt;- words_data %&gt;% filter(!word %in% c('https', 't.co', 'he\'s', 'i\'m', 'it\'s'))</span><span id="b60d" class="ma mb iq mz b gy nl ne l nf ng">words_data2 &lt;- words_data %&gt;%<br/>  anti_join(stop_words) %&gt;%<br/>  count(word, sort = TRUE)</span><span id="6c84" class="ma mb iq mz b gy nl ne l nf ng">head(words_data2, n = 10)</span></pre><figure class="lj lk ll lm gt ln gh gi paragraph-image"><div class="gh gi nn"><img src="../Images/c37d62e9287638ca853ff51eed7f3244.png" data-original-src="https://miro.medium.com/v2/resize:fit:1280/format:webp/1*ly3bd_b-zvCQ61n7OeiBuA.png"/></div><p class="lu lv gj gh gi lw lx bd b be z dk translated">陈伶俐·林恩拍摄的照片(R输出—清洗后数据中的热门词汇)</p></figure><p id="231a" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">现在，我们可以看到我们的单词变得更干净了，我们可以在检查情感之前在单词云中检查我们清理过的数据。</p><figure class="lj lk ll lm gt ln gh gi paragraph-image"><div role="button" tabindex="0" class="lo lp di lq bf lr"><div class="gh gi nk"><img src="../Images/f51a7c7fc60b589732c4eabf1d2ad388.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*J3daCJlCx8qK8QanX_ovJA.png"/></div></div><p class="lu lv gj gh gi lw lx bd b be z dk translated">照片由陈伶俐·林恩拍摄</p></figure><h2 id="7bef" class="ma mb iq bd mc md me dn mf mg mh dp mi ko mj mk ml ks mm mn mo kw mp mq mr ms bi translated">基于Bing词典的词级情感分析</h2><pre class="lj lk ll lm gt my mz na nb aw nc bi"><span id="9907" class="ma mb iq mz b gy nd ne l nf ng">words_data2 %&gt;%<br/>      inner_join(get_sentiments("bing")) %&gt;%<br/>      count(sentiment, sort = TRUE)</span></pre><figure class="lj lk ll lm gt ln gh gi paragraph-image"><div class="gh gi no"><img src="../Images/21d7e553da8cb71fc31780e65b872e78.png" data-original-src="https://miro.medium.com/v2/resize:fit:1300/format:webp/1*vbDCp2ArvfWlDi0m6ylDxg.png"/></div><p class="lu lv gj gh gi lw lx bd b be z dk translated">照片由陈伶俐·林恩拍摄(R输出用于单词级情感分析)</p></figure><p id="2972" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们可以看到，大多数单词被认为是负面的。如果我们想知道数据中的哪些词被归类为正面或负面，我们可以使用比较词云(并使用sentimentr库排除任何亵渎的词)来获取峰值。</p><pre class="lj lk ll lm gt my mz na nb aw nc bi"><span id="f8ad" class="ma mb iq mz b gy nd ne l nf ng">profanity_list &lt;- unique(tolower(lexicon::profanity_alvarez))</span><span id="0eac" class="ma mb iq mz b gy nl ne l nf ng">words_data %&gt;% filter(!word %in% c('https', 't.co', 'he\'s', 'i\'m', 'it\'s', profanity_list)) %&gt;%<br/>    inner_join(get_sentiments("bing")) %&gt;%<br/>    count(word, sentiment, sort = TRUE) %&gt;%<br/>    acast(word ~ sentiment, value.var = "n", fill = 0) %&gt;%<br/>    comparison.cloud(colors = c("red", "blue"),<br/>                     max.words = 50)</span></pre><figure class="lj lk ll lm gt ln gh gi paragraph-image"><div role="button" tabindex="0" class="lo lp di lq bf lr"><div class="gh gi nk"><img src="../Images/42d3089ebe63031472a0c309dfb26cfd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*iozDliDsUZS0aDkJtwbC1g.png"/></div></div><p class="lu lv gj gh gi lw lx bd b be z dk translated">照片由陈伶俐·林恩拍摄</p></figure><p id="f5be" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这让我们对我们的类别有了更深入的了解。我们可以看到像“更好”、“粉丝”、“赢”和“最好”这样的词是积极的，而像“冒犯”、“伤害”、“糟糕”或“问题”这样的词是消极的。然而，根据上下文，使用bing词典，一些单词可能同时适用于负面情绪和正面情绪。积极分类的“进步”一词可能是指四分卫的一系列进步广告，而消极分类的“损失”可能只是指布朗队输给钢人队。如果没有进一步的检查，这些词的分类可能会被误解，因为它可能取决于完整推文或句子的上下文。</p><h2 id="8721" class="ma mb iq bd mc md me dn mf mg mh dp mi ko mj mk ml ks mm mn mo kw mp mq mr ms bi translated">使用Sentimentr在完整Tweet级别进行情感分析</h2><p id="dfe3" class="pw-post-body-paragraph kf kg iq kh b ki mt jr kk kl mu ju kn ko mv kq kr ks mw ku kv kw mx ky kz la ij bi translated">使用sentimentr库，我们可以分析完整的推文，并检查平均情绪得分，而不是逐字分类。</p><pre class="lj lk ll lm gt my mz na nb aw nc bi"><span id="c4eb" class="ma mb iq mz b gy nd ne l nf ng">library(sentimentr)<br/>tweet_sentences_data &lt;- sentiment(get_sentences(tweets_data$text)) %&gt;% <br/>  group_by(element_id) %&gt;% <br/>  summarize(meanSentiment = mean(sentiment))</span><span id="f90e" class="ma mb iq mz b gy nl ne l nf ng">head(tweet_sentences_data)</span></pre><figure class="lj lk ll lm gt ln gh gi paragraph-image"><div class="gh gi np"><img src="../Images/ce775d6fc3137bb68ca33436f48ccc70.png" data-original-src="https://miro.medium.com/v2/resize:fit:1096/format:webp/1*EL0w7Eh2uB7xRykKKzWqnw.png"/></div><p class="lu lv gj gh gi lw lx bd b be z dk translated">照片由陈伶俐·林恩拍摄(R输出每条推文的情感评分)</p></figure><p id="244e" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">平均情绪告诉我们情绪是积极的还是消极的。如果是正数，则为正面情绪，反之为负面情绪。如果是0，那简直就是神经。</p><p id="95b9" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们还可以观察最积极的推文相对于最消极的推文有多积极，我们可以在每组中进行计数。有了这些计数，我们可以使用可视化来可视化我们数据中的情感平衡！<em class="lz">(谁不喜欢好的viz) </em></p><pre class="lj lk ll lm gt my mz na nb aw nc bi"><span id="c7d7" class="ma mb iq mz b gy nd ne l nf ng">print(paste0("Most negative tweets sentiment: ", min(tweet_sentences_data$meanSentiment)))<br/>print(paste0("Most positive tweets sentiment: ", max(tweet_sentences_data$meanSentiment)))</span><span id="80d8" class="ma mb iq mz b gy nl ne l nf ng">print(paste0("# of Negative Tweets: ", sum(tweet_sentences_data$meanSentiment &lt; 0)))<br/>print(paste0("# of Neutral Tweets: ", sum(tweet_sentences_data$meanSentiment == 0)))<br/>print(paste0("# of Positive Tweets: ", sum(tweet_sentences_data$meanSentiment &gt; 0)))</span></pre><figure class="lj lk ll lm gt ln gh gi paragraph-image"><div role="button" tabindex="0" class="lo lp di lq bf lr"><div class="gh gi nq"><img src="../Images/be84457add256d752ba43bd90860af1a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jLEjuFF9dkfbfoO13FrkYg.png"/></div></div><p class="lu lv gj gh gi lw lx bd b be z dk translated">照片由陈伶俐·林恩(右输出)</p></figure><p id="8414" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们可以看到，我们最负面的推文实际上是非常负面的，接近-1，反之亦然。为了更有力地展示我们的发现，我们可以使用我们的情感计数来创建一个显示每个情感平衡的可视化。</p><pre class="lj lk ll lm gt my mz na nb aw nc bi"><span id="8116" class="ma mb iq mz b gy nd ne l nf ng">slices &lt;- c(sum(tweet_sentences_data$meanSentiment &lt; 0), sum(tweet_sentences_data$meanSentiment == 0),<br/>            sum(tweet_sentences_data$meanSentiment &gt; 0))<br/>labels &lt;- c("Negative Tweets: ", "Neutral Tweets: ", "Positive Tweets: ")</span><span id="900d" class="ma mb iq mz b gy nl ne l nf ng">pct &lt;- round(slices/sum(slices)*100)<br/>labels &lt;- paste(labels, pct, "%", sep = "") #customize labeling</span><span id="7c6e" class="ma mb iq mz b gy nl ne l nf ng">#add in appropriate colors for positive, neutral, negative<br/>pie(slices, labels = labels, col=c('red', 'yellow', 'green'), <br/>   main="Tweet Sentiment Percentages")</span></pre><figure class="lj lk ll lm gt ln gh gi paragraph-image"><div role="button" tabindex="0" class="lo lp di lq bf lr"><div class="gh gi nk"><img src="../Images/17a56a23aed94665d7c62414c3a8f2bc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*MwPH53jKrnwivvbnz6eE8g.png"/></div></div><p class="lu lv gj gh gi lw lx bd b be z dk translated">照片由陈伶俐·林恩(右输出)</p></figure><p id="0b9b" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在推文层面，我们可以看到我们推文中的观点比文字层面更加平衡。</p><h2 id="07a5" class="ma mb iq bd mc md me dn mf mg mh dp mi ko mj mk ml ks mm mn mo kw mp mq mr ms bi translated">用户层面的情感分析</h2><p id="b8ee" class="pw-post-body-paragraph kf kg iq kh b ki mt jr kk kl mu ju kn ko mv kq kr ks mw ku kv kw mx ky kz la ij bi translated">这种分析的另一个有趣的扩展是显示每个用户的情绪，因为一些用户可能有多个情绪不同的推文。然而，我们的数据集中有超过4000个用户。为了一个更清晰的视觉和更容易的初步探索，我们将我们的数据限制在前50个最受欢迎的推文及其各自的用户。</p><pre class="lj lk ll lm gt my mz na nb aw nc bi"><span id="03d1" class="ma mb iq mz b gy nd ne l nf ng">n_distinct(tweets_data$user_id)</span></pre><figure class="lj lk ll lm gt ln gh gi paragraph-image"><div class="gh gi nr"><img src="../Images/85efdee2e4241f2010b197fd2e3a2f0c.png" data-original-src="https://miro.medium.com/v2/resize:fit:272/format:webp/1*SMLdA3mfKr0RYuV99k_eDw.png"/></div><p class="lu lv gj gh gi lw lx bd b be z dk translated">照片由陈伶俐·林恩(右输出)</p></figure><pre class="lj lk ll lm gt my mz na nb aw nc bi"><span id="ed1e" class="ma mb iq mz b gy nd ne l nf ng">#selecting top 50 tweets by favorites<br/>user_sentiment &lt;- tweets_data %&gt;% select(user_id, text, favorite_count) %&gt;% arrange(desc(favorite_count)) %&gt;% slice(1:50)<br/>head(user_sentiment)</span></pre><figure class="lj lk ll lm gt ln gh gi paragraph-image"><div role="button" tabindex="0" class="lo lp di lq bf lr"><div class="gh gi ns"><img src="../Images/bdfd6eb2862407d257949537e5315996.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*e8o2UEs5XfStesnNLtKzbA.png"/></div></div><p class="lu lv gj gh gi lw lx bd b be z dk translated">照片由陈伶俐·林恩拍摄(R输出-热门推文的文本内容)</p></figure><figure class="lj lk ll lm gt ln gh gi paragraph-image"><div class="gh gi nt"><img src="../Images/23aa2488c8c920aeba82fdd96ddd0d86.png" data-original-src="https://miro.medium.com/v2/resize:fit:460/format:webp/1*D7-vkLzCWGo-LeZr8WwK_A.png"/></div><p class="lu lv gj gh gi lw lx bd b be z dk translated">陈伶俐·林恩的照片(R输出——热门推文的“收藏夹”数量)</p></figure><p id="5fce" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">现在，我们已经将数据按收藏数量降序排列，并限制在前50条推文中，我们可以轻松地对每个用户的情绪进行分组，并再次使用sentimentr库中的sentiment_by()更好地了解这些用户的情绪。</p><pre class="lj lk ll lm gt my mz na nb aw nc bi"><span id="1b99" class="ma mb iq mz b gy nd ne l nf ng">out &lt;- sentiment_by(get_sentences(user_sentiment$text), <br/>                    list(user_sentiment$user_id))</span><span id="5c2c" class="ma mb iq mz b gy nl ne l nf ng">plot(out)</span></pre><figure class="lj lk ll lm gt ln gh gi paragraph-image"><div role="button" tabindex="0" class="lo lp di lq bf lr"><div class="gh gi nu"><img src="../Images/ab31e187d8ca1eef08413b9d3304de0b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Dxz9krDMcnNi6nH-XHnEHQ.png"/></div></div><p class="lu lv gj gh gi lw lx bd b be z dk translated">照片由陈伶俐·林恩拍摄(R用户级情感输出)</p></figure><p id="7c73" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这使我们能够更好地了解每个用户的情绪，因为一些用户在其所有推文中有广泛的情绪评分，而其他用户则完全中立(可能只有一条推文或多条完全中立的推文)。</p></div><div class="ab cl lb lc hu ld" role="separator"><span class="le bw bk lf lg lh"/><span class="le bw bk lf lg lh"/><span class="le bw bk lf lg"/></div><div class="ij ik il im in"><p id="d0b1" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">..现在你知道了！情绪分析是一种非常有用的方法，可以通过社交媒体数据、调查数据、书籍等更好地了解公众的看法或情绪。然而，我们也必须意识到这种方法的局限性。使用来自Twitter的社交媒体数据，我们在使用的数据方面受到限制，因为可能是这样的情况，当人们有负面情绪时，他们更有可能发推特，而不是中性或积极的情绪。此外，使用bing词典，一些单词可能同时适用于消极情绪和积极情绪，因此探索您的数据以观察类似这些情况并在必要时做笔记是有用的。最重要的是，在探索数据和进行情感分析时，永远记得提出越来越多的问题，我建议在开始学习时使用你感兴趣的数据。</p></div><div class="ab cl lb lc hu ld" role="separator"><span class="le bw bk lf lg lh"/><span class="le bw bk lf lg lh"/><span class="le bw bk lf lg"/></div><div class="ij ik il im in"><h2 id="dca4" class="ma mb iq bd mc md me dn mf mg mh dp mi ko mj mk ml ks mm mn mo kw mp mq mr ms bi translated">使用社交媒体数据进行体育情感分析的潜在扩展</h2><p id="b7ea" class="pw-post-body-paragraph kf kg iq kh b ki mt jr kk kl mu ju kn ko mv kq kr ks mw ku kv kw mx ky kz la ij bi translated">在这种情况下，体育数据情感分析还有许多其他应用，您可以进一步扩展您的分析。直接从顶级/受欢迎的体育分析师那里收集推文，并根据他们对每个团队的社交媒体输入进行情绪分析，并进一步分析任何偏袒/偏见，这可能是有趣的。在一个给定的赛季进行情绪分析，并衡量情绪如何随着每场比赛或组织的变化而变化，这可能是很有趣的。可能性无穷无尽，感兴趣的话花时间去探索吧！</p><figure class="lj lk ll lm gt ln gh gi paragraph-image"><div role="button" tabindex="0" class="lo lp di lq bf lr"><div class="gh gi nv"><img src="../Images/2e3833269af11d4a30e835ca35720cf3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*H0Bn2UU5FaGcSU89"/></div></div><p class="lu lv gj gh gi lw lx bd b be z dk translated">照片由<a class="ae ly" href="https://unsplash.com/@joeel56?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">妮可·沃尔夫</a>在<a class="ae ly" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>拍摄</p></figure></div></div>    
</body>
</html>