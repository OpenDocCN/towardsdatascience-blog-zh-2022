# 软件系统为什么以及如何衰退

> 原文：<https://towardsdatascience.com/why-and-how-software-systems-decay-fa7ec83c4ff3>

## 从 IBM 最大的转型项目中吸取的经验教训

![](img/51687f14a3b87771f3c4b366ac4489c6.png)

在 [Unsplash](https://unsplash.com/collections/9370979/rotting?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText) 上由 [Daniel F](https://unsplash.com/@thesilverperson?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText) 拍摄的照片

企业软件系统，不管是完全自主开发的，第三方开发的，还是混合开发的，都不可避免地会老化，就像这个世界上的其他东西一样。这种现象被称为**比特腐烂**、**代码腐烂**、**软件侵蚀**、**软件腐烂**或**软件【系统】腐烂**。

> 软件衰退要么是软件质量随着时间的推移而缓慢恶化，要么是响应能力下降，最终导致软件出现故障、不可用或需要升级。这不是一个物理现象:软件实际上并没有衰退，而是缺乏对它所处的变化环境的响应和更新。
> [ [软件腐烂@维基百科](https://en.wikipedia.org/wiki/Software_rot) ]

**关于 Thomas Reinecke** —在过去 5 年中，我担任了几个关键的 IBM 内部转型项目的首席架构师，我有独特的机会共同领导和影响 IBM 一些最复杂、最全面和最有影响力的业务转型，其中提到了支持、销售和业务合作伙伴生态系统的转型。我一直是一个非常好奇和善于思考的人，所以一段时间以来我一直试图理解软件衰退背后的机制。我本质上仍然是一名 IT 工程师，所以我对实用的东西更感兴趣。然而，在我分享我自己的实际经验之前，我们将从一些理论开始。

与**软件系统衰退**最相关的问题似乎是:

*   衰老的机制和原因是什么？
*   衰老能被影响吗？如何影响？
*   老龄化的后果是什么，以及与之相关的成本？

本文将回答这些问题。

# 理论和预备读物

本章提供了软件衰退的理论和科学概念。我推荐文章[软件熵](https://en.wikipedia.org/wiki/Software_entropy)(维基百科)、[软件腐烂](https://en.wikipedia.org/wiki/Software_rot)(维基百科)和[处理软件熵的必然性——软件平衡可达到吗](https://medium.com/dunnhumby-data-science-engineering/dealing-with-the-inevitability-of-software-entropy-is-software-equilibrium-attainable-7d5d277dc689)(中等)。

保持秩序和结构是一件代价高昂的事情，物理定律似乎以软件熵的形式对我们不利。根据[[雷曼-贝拉迪 1985 年](http://informatique.umons.ac.be/genlog/BeladyLehman1985-ProgramEvolution.pdf)]…

*   使用的计算机程序将被修改
*   当一个程序被修改时，如果不主动去修改它，它的复杂性就会增加
*   软件熵随着技术债务的积累而增加
*   增加的熵导致增加的无序、增加的错误率、增加的维护和改进的成本和时间，最终导致系统的经济死亡

你可能还会发现关于熵的更哲学的观点很有趣…

视频[熵:宇宙的无序|什么是熵？YouTube 上的](https://www.youtube.com/watch?v=Cco0T7cj-B4) by ( [太空中的猫头鹰](https://www.youtube.com/c/owlinspace)

就像我们自己的腐烂一样，可以肯定地说，软件系统的腐烂是不可避免的，不管我们喜欢与否。然而，重要的是了解加速和减速因素，并且当我们计划、构建或维护软件系统时，其中一些因素会直接受到我们的影响。

# 软件系统衰退——我自己的观察

以下面的列表(大致按相关性排序)作为我个人经验教训的集合，这些经验教训来源于现实世界的经验:

## 功能复杂程度

总的来说:越低越好。这个方面是由系统必须服务的**角色**和**用例**的数量驱动的。时间是最大的影响因素，因为我们可以假设使用的系统将被修改，所以初始状态通常在其生命周期中具有最低的复杂性，特别是当系统作为 MVP 启动时。我在这里的首要建议是始终**挑战即将到来的业务需求**——系统承担的越多，老化得越快。并非所有的需求都是业务关键的，许多甚至是无效的，特别是对于特定的业务单位，偏离标准化业务流程的请求应该发出危险信号。接受的一次性越多，衰减越快。建立一个授权的**架构评审委员会**(稍后会有更多内容)并有一个强大的业务架构师来监督过程领域是有价值的，并且可以减缓衰退。

我见过角色和用例从现有系统中迁移出来的情况，但是这通常意味着遗留系统被耗尽并迁移到新系统中。在发生有限重组移动的罕见情况下，支持移动功能的代码/配置没有得到适当清理的风险很高——通常是由于风险、成本原因，因此这通常会留下技术债务。

## 技术选择

我们可以就此谈论几个小时…构建与购买，最新的酷狗屎与已建立的顶级公司，本地与混合或公共云，两者的混合，开发语言，框架，容器解决方案等等。理论上，这是一套非常丰富和令人兴奋的选择，但现实是不同的:

基础技术决策通常由公司战略、大型供应商交易和高管意见驱动。我见过这样的例子，其中这样的决策受到一个较小的高级技术领导团队的显著影响。然而，一般来说，应该假设潜在选项列表被“我们一直都是这样做的”(构建)或“我们将彻底改变并使用一个供应商”(购买)极大地浓缩了。

为了从一开始就减缓衰退，请确保您组织中可用的资源和技能非常适合您的技术选择。如果你不得不在你组织中的技术人员不熟悉的技术栈上开始一个项目，老化率将会高得多，仅仅是因为可避免的错误更有可能发生，尤其是在项目的早期。

## 标准化水平

一般来说，对标准化的投资越多，衰减的速度就越慢，但是代价也很高，尤其是对于“快速尝试—快速失败”的方法。由于我们关注的是衰变，以下是值得关注的领域:

*   **分段** —如果您需要将多个产品部署到同一个平台上(例如，具有外部、内部角色的 Salesforce 部署)，请确保代码、配置、对象模型、存储、API 端点等通过在元素名称上使用前缀来正确分段。这将有助于每个可能参与项目的人认识到元素属于哪里。对于共享元素来说，这可能没那么简单。分割也可以应用于较大的特征
*   **整合**——显然，越少越好。但是，即使您需要集成大量的子系统，就像大型组织中的典型情况一样，从通信流和技术的角度来看，hub 解决方案和 orchestrators 也可以用来构建一个复杂的集成蜘蛛网。然而，应该注意的是，集成中心系统通常在业务或执行层面上不是很受欢迎，因为它们通常对业务只有间接的影响。
*   **源代码&开发**——最明显的问题是源代码。在撰写本文时，源代码仍然主要由人编写，人的因素给代码带来了不同的技能、编码风格和质量期望..开发组织越大，越多样化，偏离的水平就越高，这将随着时间的推移增加老化率，导致更早的衰退。我推荐使用标准化的**林挺过程**(可以根据您的需求定制)，为**代码评审**、**测试**和**代码文档**设定标准，并通过 CI/CD 管道中的自动化来执行这些标准。另一个建议——非常类似于 hub 解决方案——是投资于**库**和**核心服务**,它们可以集中具有更广泛使用模式的功能。对象、类、方法和异常的适当命名约定也有助于大大减缓衰退。

## 架构和所有权

如果我们假设业务需求是老化率的一个主要原因，我们可以考虑架构作为它的对应物。然而，这需要一个组织设置，其中**架构审查委员会**有权审查、质疑甚至停止实施提议。在一个理想的世界中，每个产品(对于较小的设置)或者每个能力(对于较大的项目)都有一个**产品负责人**，他在业务和项目团队之间进行转换，并且拥有一个开发团队。项目中还应该有多个架构师，他们在各自的领域都有专长，比如数据架构师、集成架构师、业务架构师，以及一个负责监督整个产品的首席架构师。产品所有者将与一个或多个被指派的架构师一起工作，通过我们称之为**“精化”**的过程来驱动对他们所收到的需求的提议解决方案的创建。在这个过程中，需求被转化为人物角色/用户故事，对现有架构、对象模型、所需配置和实现细节的更改被指定，记住一些目标:

*   提议的解决方案必须符合架构原则
*   遵循 KISS(保持简单，笨蛋):过度工程化总是比将一个提议减少到绝对最小要容易得多，包括现有功能的重用，这需要关于实现的大量知识
*   不承担或承担很少的债务，关注软件熵

所有权是软件系统腐烂速度的另一个关键驱动因素。上面的设置非常适合稳定的所有权，其中每个 PO 和小队拥有他们各自能力的代码和配置，理想情况下对质量、设计和开发原则有一些热情。然而，如果假定位置和小队是容易替换的，并且新的需求被简单地加到任何小队的当前备用能力上，那么整个系统的快速系统衰减是有保证的。如果每天都有其他人介入并改变它，谁会对“他们的孩子”及其质量充满热情呢？所有权可以是纵向(按功能，例如“结帐功能”)和横向(按技术，例如跨多个功能使用的“通知框架”或“REST 端点公开”)的混合。最大的挑战是确保理想情况下一个团队拥有一段代码，而不是几段或一段都没有。

## 软件维护和技术债务

随着时间的推移，市场需求会发生变化，功能性和非功能性需求也会发生变化。正如我们所了解的，这增加了复杂性，不可避免地导致您的软件老化。让我们假设，项目初始阶段的风暴和压力时期已经结束，您已经覆盖了所有的角色和需求用例，并且您的软件基本上处于维护模式。这个生命周期阶段的需求至少有两个方面:

*   随着时间的推移，缺陷被发现，你的开发组织(现在已经大大减少了)试图修复它们。你可以假设最初领导这个项目的关键人物已经离开了，所以这个阶段现在主要是在那些依赖于其他人留下的质量的人的手中
*   软件中的依赖项(例如库)需要更新，这通常需要对软件进行更改，这比仅仅提高 package.json 中的版本号更昂贵。这里的噩梦场景是一个重要的库被弃用，而没有兼容的继任者

无论您添加新功能还是更改现有功能，都需要完成这两项活动来维护您的软件。如果你想保持正常运转，这些是你的固定成本。

然而，还有第三个方面，相对于它对衰退的影响，这一点通常被大大低估了— **重构**。依我看，在项目进入维护阶段之前，你应该在生命周期的每个季度计划一次**重构冲刺**，作为最佳实践，重构冲刺不应该关注直接的商业价值。你的开发组织将在这些冲刺中产生的间接价值是反击债务，减缓衰退，提高质量，性能，架构，对象模型，并清理所有的战术实现，这些很可能必须在通常发生的能力开发的热潮中完成。

然而令人悲伤的现实是，团队很少被给予重构冲刺的时间——市场需求太重要、太迫切，间接的业务影响很少受欢迎，而且人们认为团队会边走边清理。这只是一个事实，减少债务的时间很少给出，如果这伴随着提供特性/功能的强大压力，软件在增长的同时几乎会更快地腐烂。在这种模式下，开发中的软件系统在进入维护模式之前甚至不需要 3-4 年的时间就可以在内部腐烂。

## 证明文件

软件开发是一个资源稀缺、时间和成本压力的故事。所有这三个方面通常都促使人们希望最大限度地减少对没有直接商业价值的元素的投资，这通常会导致文档数量、质量和维护的不足。总的来说，你有多种方法来记录你的项目，我个人推荐两种方法:**源代码**和**剧本**。

*   **源代码文档**应适用于所有类、方法、元数据、配置，包括对象模型正确洞察源文件。一个合适的类名和方法名的术语是非常有价值的，但是不应该认为这些名称足以描述一个函数的功能。这是最初的开发团队可以留给维护人员的遗产，如果以正确的数量和质量完成，将有助于降低老化率
*   在过去几年里，我们在最近的大型项目中使用了**剧本**的方法。它是一个轻量级 Wiki/CMS 解决方案(如 wiki.js 或 Confluence)或类似解决方案的部署，被设置、推广并作为任何项目相关文档的**一站式商店**(显然不包括源代码)。理想情况下，该解决方案带有适当的标记和搜索功能，并允许 WYSIWYG 创作，使内容创建尽可能简单。对于 ERM 图表，我们通常使用清晰的图表、壁画或其他类似工具。如果认真对待，以行动手册的形式创建适当的文档可以对您的系统恶化的速度产生非常积极的影响。

可以在 Github 页面上免费构建一个非常轻量级的文档系统，您可能会发现这篇文章很有帮助:

[](https://itnext.io/create-compelling-documentation-with-github-pages-16e4149efe9e) [## 使用 Github 页面创建引人注目的文档

### 一步一步的指南，创建您的下一个无服务器 docu 应用程序，支持任何内容层次结构，降价，搜索…

itnext.io](https://itnext.io/create-compelling-documentation-with-github-pages-16e4149efe9e) 

永远不要把你的需求管理系统(不管你是用吉拉还是别的什么)当成你的文档系统，问题不是存储文档的可靠工具——仅仅因为它描述了请求是什么，而不一定描述了最终的实现；-)

# 摘要

我们已经了解到，软件和宇宙中的其他事物一样会老化，衰退是不可避免的。通过观察一些有影响的人，您应该知道如何影响系统老化的速度。我们还了解到，一个强健且缓慢老化的系统的最大反对者是需求、时间和金钱，这并不奇怪。要做出正确的优先顺序和投资决策，你首先要回答你认为这个系统会持续多久，以及衰退的速度是否与你做出的决策一致。

谢谢你

*我没有因提及的品牌、产品和公司而获得任何报酬或奖励。如果你喜欢这个故事，并想在 medium 上阅读成千上万个这样的故事，你可以成为 medium 会员，每月只需 5 美元。如果你愿意支持我的写作，请使用我下面的推荐链接，我将免费获得你的一部分会员资格。*

[**https://medium.com/@thomas.reinecke/membership**](https://medium.com/@thomas.reinecke/membership)