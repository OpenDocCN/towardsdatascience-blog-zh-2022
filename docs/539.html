<html>
<head>
<title>Exploring Your Fitness through Strava Data</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">通过Strava数据探索您的健康状况</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/exploring-your-fitness-through-strava-data-90bffe391521#2022-01-18">https://towardsdatascience.com/exploring-your-fitness-through-strava-data-90bffe391521#2022-01-18</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""><h1 id="113b" class="pw-post-title io ip iq bd ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm bi translated"><strong class="ak">通过Strava数据探索您的健康状况</strong></h1></div><div class=""><h2 id="f105" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated"><strong class="ak">如何开始锻炼数据冒险(EDA) </strong></h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/9ed3d724df5ca50ec6437b3778041908.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Gmt2Ph_quE4fu3K620ZWbA.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">图片作者。</p></figure><p id="a6ac" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">如果你像我一样是一个数据迷，并且想把锻炼从琐事变成数据冒险，那么你来对地方了。这篇文章将向您展示制作自己的练习数据集是多么容易，以及如何使用Python访问和打开它。</p><p id="f54b" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">从小到大，我从来都不是一个“健康”的孩子。我有点超重，从来没有给锻炼足够的机会，让它被认为是一种乐趣，而不是一件苦差事。像许多事情一样，当2020年3月疫情来袭时，这种情况发生了变化。到了四月底，我在家里呆得太久了，需要换换环境。我不想冒险接触任何人，但我需要出去。我选择了骑自行车。</p><p id="70a9" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">从一次短暂的跑步经历中——一件让我膝盖受伤的琐事——我知道并重新安装了Strava健身应用。这个应用程序能够记录你在哪里跑步或骑车，以及其他有趣的数据，如总距离、平均速度等等。我想，如果我开始骑自行车，我也可能有数字来证明这一点。我的骑行开始是在人行道上30分钟的旅行，慢慢探索我公寓的周围区域。过了一会儿，我变得好奇起来，探索偏僻的小路和交通不畅的道路，发现了下一个城镇。在斯特拉瓦，我达到了我的第一个里程碑:一次骑行10英里。从这一点上说，骑自行车不是锻炼，而是一种冒险。我在Strava上不断探索和追踪我的里程碑。我跑了20英里，然后是30英里、40英里，最后是50英里。</p><p id="8552" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">到2020年7月，我已经骑了1000英里，骑了76次不同的车。我不仅感觉更好，而且我现在已经把我自己的健身之旅记录成了一个数据集。在本文中，我将展示如何为探索性数据分析(EDA)收集这些数据，并解释用于解析的GPX格式。通过以后的几个帖子，我会通过数据分享我的健身之旅，告诉你如何分析自己的。如果你还没有自己的健身数据，创建一些吧！无论是跑步，骑行还是其他，这篇文章将告诉你如何开始自己的运动数据冒险。</p><p id="3a76" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><strong class="kx ir">免责声明</strong>:现在有很多健身应用，所以试试你最感兴趣的吧。Strava很早就给我留下了深刻的印象，我发现很容易与之共事。主要目标是把数据探索和锻炼结合起来！此外，我已经支付了Strava的订阅费，因为我很喜欢它，但是你不需要订阅来访问你的数据！</p></div><div class="ab cl lr ls hu lt" role="separator"><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw"/></div><div class="ij ik il im in"><h1 id="e2dd" class="ly lz iq bd ma mb mc md me mf mg mh mi jw mj jx mk jz ml ka mm kc mn kd mo mp bi translated"><strong class="ak">访问Strava上的游乐设备</strong>数据</h1><p id="d268" class="pw-post-body-paragraph kv kw iq kx b ky mq jr la lb mr ju ld le ms lg lh li mt lk ll lm mu lo lp lq ij bi translated">在Strava上查找您的乘车数据其实很容易。假设你至少有一次乘车分析——如果你没有，出去做一次！—第一步是在<a class="ae mv" href="https://www.strava.com/" rel="noopener ugc nofollow" target="_blank"> Strava的网站</a>上登录您的账户。一旦你这样做，你会看到你的仪表板。如果你关注其他人的活动，你会默认在中心看到他们。我们关心的是你在左上方的个人资料摘要。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi mw"><img src="../Images/c7e6bde42c91fbe737c7e892c2841490.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*73DN1M-fELay58K-CxmwQQ.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">作者在Strava.com的图片。</p></figure><p id="14e6" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">单击您的个人资料摘要框中的“活动编号”,转到您的活动列表。然后按距离降序排列，这样你就可以从你最长的活动开始探索。对我来说，这个旅程也不是从我的家庭地址开始，所以很容易分享，没有任何隐私问题。我们将在以后的博客中探讨如何给你的数据添加隐私气泡。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi mx"><img src="../Images/7f440c16f4bb531719527da6c1a5bc77.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*tuuisKWsUVofGdrYIHs6EA.jpeg"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">斯特拉发活动清单。作者在Strava.com的图片。</p></figure><p id="e527" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">点击列表中的蓝色标题，就可以进入某个游乐项目的详细信息页面。我选择了“骑到明矾溪”活动。一旦详细信息加载完毕，点击省略号(…)按钮并点击“导出GPX”来下载您的骑行数据。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi my"><img src="../Images/0cba4977c990dc808c87a4dbdf03ccf8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*lsyLBJEMkcsNYvlnTbB8Sw.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">如何导出活动的GPX文件。作者在Strava.com的图片。</p></figure><p id="5b9a" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">毫无疑问，还有其他方法可以从Strava下载数据——包括它的API——但是这种方法对于我们目前的目的来说已经足够好了。</p></div><div class="ab cl lr ls hu lt" role="separator"><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw"/></div><div class="ij ik il im in"><h1 id="0906" class="ly lz iq bd ma mb mc md me mf mg mh mi jw mj jx mk jz ml ka mm kc mn kd mo mp bi translated"><strong class="ak">GPX格式讲解</strong></h1><p id="c490" class="pw-post-body-paragraph kv kw iq kx b ky mq jr la lb mr ju ld le ms lg lh li mt lk ll lm mu lo lp lq ij bi translated">太好了，我们刚刚下载了一个. gpx文件，但它到底是什么？GPX是GPS交换格式的简称[1]。让我们看一下. gpx文件的内部，以获得一些直觉。下面显示了该文件的缩略版本，带有一些分层注释:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi mz"><img src="../Images/ae482afae391c7673361cd9b4dc3826e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1FSRB1ekiSWG7ev93Ag97Q.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated"><em class="na">在. gpx文件中查看。图片作者。</em></p></figure><p id="1828" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">该文件被分解成一个XML树结构，其中一个<gpx>节点是所有其他节点的父节点。除了贯穿始终的一些元数据(旅行开始时间、旅行名称等。)，文件由一个<strong class="kx ir">轨道</strong>节点组成。一个<strong class="kx ir">轨迹</strong>包含至少一个<strong class="kx ir">轨迹段</strong>，该轨迹段又包含多个<strong class="kx ir">轨迹点</strong>。每个<strong class="kx ir">轨迹点</strong>都包含按时间顺序排列的骑行“故事”。它也给出了GPS坐标(纬度和经度)以及你当时所处的高度和时间戳。</gpx></p><p id="7e8f" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">游乐设备数据在XML树中建模，但是它在物理上代表什么呢？下图描述了一项潜在的身体活动:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nb"><img src="../Images/a60465944178ba09d7bf71a1b12f671e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*cT7TMUfqAfAe3vti2sqIbw.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated"><em class="na">作者图片。</em></p></figure><p id="cae4" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">一般来说，一个. gpx文件可以包含<em class="nc">路线</em>和<em class="nc">轨迹</em>。路线是一组无序的<em class="nc">路点</em>——至少是一对GPS坐标——代表从起点到终点的粗粒度路径。一个路线示例是由谷歌地图绘制的GPS路线，用于将您的汽车导航到某个路线终点。通常有多个航点序列可以作为您到达目的地的路线，但通常您的导航应用程序会为您选择最佳(即最短)路线。如果你错过了一个转弯，计划的路线会更新以处理这个变化[1]。</p><p id="3673" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">轨迹是一组按时间顺序排列的轨迹点。与包含可能的路点的路线不同，轨迹代表了你所在的时空点的精确历史。这是一条记录你如何旅行的精细路径。在上面的漫画中，你到达了一个小道的尽头，打开你的自行车，在骑上环路之前打开了Strava。如果你在立交桥下骑车时丢失了GPS信号，你的轨迹会继续，但会被记录为至少两个不同的<em class="nc">轨迹段</em>。一个轨道至少有一个轨道段，每个轨道段包含一组连续记录的轨道点[1]。</p><h2 id="256e" class="nd lz iq bd ma ne nf dn me ng nh dp mi le ni nj mk li nk nl mm lm nm nn mo no bi translated"><strong class="ak">Strava如何为GPX数据服务</strong></h2><p id="ade1" class="pw-post-body-paragraph kv kw iq kx b ky mq jr la lb mr ju ld le ms lg lh li mt lk ll lm mu lo lp lq ij bi translated">值得注意的是Strava。gpx文件似乎只包含一个音轨片段。Strava有一个自动暂停功能，当你不动的时候它会停止记录数据[2]。这不仅有助于节省手机电池，而且最终可以更准确地显示骑自行车的移动时间和平均速度。根据<em class="nc">轨道段</em>的定义，无论何时在行程中发生这种情况，我们都会期望有多个轨道段。或许，Strava在上传后，将这些多个片段组合成仅仅1个。</p><h1 id="bfea" class="ly lz iq bd ma mb np md me mf nq mh mi jw nr jx mk jz ns ka mm kc nt kd mo mp bi translated"><strong class="ak">用Python将GPX转换成CSV</strong>🐍</h1><p id="fa1d" class="pw-post-body-paragraph kv kw iq kx b ky mq jr la lb mr ju ld le ms lg lh li mt lk ll lm mu lo lp lq ij bi translated">虽然下载乘车数据很方便。gpx格式则不然。为了便于使用，我们将把。gpx结构变成了普通的。csv格式。为此，我们需要解析。gpx并将其放入一个表格熊猫数据框架中。</p><p id="8d11" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">自从。gpx格式本质上是XML，我们可以使用Python XML库来解析节点，但幸运的是，有一个简单的、专门构建的替代方法叫做<code class="fe nu nv nw nx b">gpxpy</code>。要安装软件包，请使用<code class="fe nu nv nw nx b">pip install gpxpy</code>或您环境的相关软件包管理器。此处可找到包装的参考资料<a class="ae mv" href="https://github.com/tkrajina/gpxpy" rel="noopener ugc nofollow" target="_blank">。</a></p><p id="4355" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">下面是将. gpx文件读入Pandas数据帧的代码:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ny nz l"/></div></figure><p id="db46" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">数据提取代码位于一个<code class="fe nu nv nw nx b">with</code>块中，作为上下文管理器来打开和关闭。gpx文件。在这个块中，<code class="fe nu nv nw nx b">gpxpy</code>包将XML树解析成一个Python对象。提取数据归结为遍历对象中存储的所有轨迹、轨迹段和轨迹点。在初始化Pandas数据帧之前，将每一行的数据存储在字典列表中。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oa"><img src="../Images/8a9d51d0db3d16a9c74b87f38c84ba6b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*eRZKHHSYq9GibcgTttIxYg.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">加载的GPX文件的熊猫视图。图片作者。</p></figure><p id="1359" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">将数据保存为. csv格式现在非常简单:<code class="fe nu nv nw nx b">df.to_csv(file_path['out'], index=False)</code>。</p><h1 id="e650" class="ly lz iq bd ma mb np md me mf nq mh mi jw nr jx mk jz ns ka mm kc nt kd mo mp bi translated"><strong class="ak">结论</strong></h1><p id="9f1d" class="pw-post-body-paragraph kv kw iq kx b ky mq jr la lb mr ju ld le ms lg lh li mt lk ll lm mu lo lp lq ij bi translated">开始锻炼并不总是容易的。动机时好时坏，但作为一名数据科学家，我的好奇心总是旺盛的。有了Strava应用程序，我把锻炼的方式从苦役变成了刺激的冒险。其基础是能够创建和探索我自己的健身数据集。希望这篇文章能激发你用你的数据去尝试，并向你展示如何收集你自己的数据。</p><p id="86b1" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">我看了一下如何在Strava上找到并下载你的锻炼数据。它采用. gpx格式，但是我也介绍了这种格式的模型以及它的结构。最后，我分享了一个代码片段来轻松地将格式转换成。使用Python中的<code class="fe nu nv nw nx b">gpxpy</code>和pandas包的csv。</p><p id="fbc0" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">除了<code class="fe nu nv nw nx b">track</code>和<code class="fe nu nv nw nx b">segment</code>列之外，乘车数据实际上只有另外4列。虽然这看起来没什么可做的，但我的下一篇文章将讨论如何为这些数据创建EDA策略。有比你想象的更多的东西需要探索！</p><p id="2f65" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">[1] hikearizona，<a class="ae mv" href="https://www.youtube.com/watch?app=desktop&amp;v=9i2fViC6PLk" rel="noopener ugc nofollow" target="_blank"> GPS文件——GPX解释</a> (2015)，YouTube</p><p id="8b62" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">[2] Jojo，<a class="ae mv" href="https://support.strava.com/hc/en-us/articles/216917437-Auto-Pause" rel="noopener ugc nofollow" target="_blank">自动暂停</a> (2021)，Strava.com</p></div></div>    
</body>
</html>