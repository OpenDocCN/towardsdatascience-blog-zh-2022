<html>
<head>
<title>Visualizing NYC’s Subway Traffic &amp; Census Data</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">可视化纽约市的地铁交通和人口普查数据</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/visualizing-nycs-subway-traffic-census-data-using-leafmap-29904b634046#2022-01-19">https://towardsdatascience.com/visualizing-nycs-subway-traffic-census-data-using-leafmap-29904b634046#2022-01-19</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""><h1 id="4721" class="pw-post-title io ip iq bd ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm bi translated">可视化纽约市的地铁交通和人口普查数据</h1></div><div class=""><h2 id="93e2" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">使用Python的Geopandas和Leafmap包可视化开放城市数据。</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/2967f2940da53fe5b87385c0d0ee1a97.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*Q0aT368fPGe1AnOM"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">米歇尔·特罗特在<a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</p></figure><p id="1e75" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">Metis的第一个模块<a class="ae kv" href="https://www.thisismetis.com/bootcamps/online-machine-learning-bootcamp" rel="noopener ugc nofollow" target="_blank">数据科学和机器学习训练营</a>已经在书里了&amp;这是旋风般的几周！</p><p id="5838" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">模块1涵盖了探索性数据分析，对于相关项目，我们的任务是为取自MTA纽约市的<a class="ae kv" href="http://web.mta.info/developers/turnstile.html" rel="noopener ugc nofollow" target="_blank">十字转门数据</a>制定一个用例，并进行分析以从数据中获得洞察力。</p><p id="6490" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">对于我的项目，我选择分析2021年全年的十字转门数据，因为我觉得从全年来看，这些见解会更可靠，还因为2021年刚刚结束，所以这些数据来自一个刚刚完成的日历年！</p><h1 id="3c24" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">辖域</h1><p id="3ac8" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">为了确定本提案的分析范围，我从一个基本问题开始:<strong class="ky ir"> <em class="mp">地铁交通系统的总体趋势是什么，以及各个车站的交通状况如何？</em> </strong></p><p id="f557" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我想确定系统范围内的趋势，如下所示:一天中的哪些时间流量最高？一周中的哪几天？几个月？对于车站指标，我想知道哪个车站的交通流量最高。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi mq"><img src="../Images/4ecea8dfb6c48a5858fa24efe35f1247.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*2sOIeosCmgW0poGU"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated"><a class="ae kv" href="https://unsplash.com/@michaeljinphoto?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">晋振伟</a>在<a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍照</p></figure><p id="7455" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">作为进一步的目标，我想看看纽约市每个街区的人口统计数据，看看交通和人口统计数据之间是否有任何关联，例如低收入地区的地铁交通更多，或者旧街区的交通更少。</p><p id="a7a5" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">所以，我问自己的下一个问题是:<strong class="ky ir"> <em class="mp">这些信息在专业环境中如何有用？</em>T11】</strong></p><p id="e888" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">嗯，这些数据可能有很多应用！</p><ol class=""><li id="d71c" class="mr ms iq ky b kz la lc ld lf mt lj mu ln mv lr mw mx my mz bi translated">非营利、广告、政治动员和公共卫生等用例的目标拓展。</li><li id="f082" class="mr ms iq ky b kz na lc nb lf nc lj nd ln ne lr mw mx my mz bi translated">与疫情前交通量的对比分析。(<a class="ae kv" href="https://www.nytimes.com/2022/01/17/nyregion/nyc-subway-ridership.html" rel="noopener ugc nofollow" target="_blank">纽约时报</a></li><li id="42e7" class="mr ms iq ky b kz na lc nb lf nc lj nd ln ne lr mw mx my mz bi translated">与犯罪数据一起使用时的公共安全分析</li><li id="0c37" class="mr ms iq ky b kz na lc nb lf nc lj nd ln ne lr mw mx my mz bi translated">优化的地铁维护计划。</li></ol><p id="34d3" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">鉴于潜在用例的数量(以及项目两周的周转时间)，我选择将我的可交付成果保持如下:</p><ul class=""><li id="e973" class="mr ms iq ky b kz la lc ld lf mt lj mu ln mv lr nf mx my mz bi translated">按一天中的时间、一周中的日期、一年中的星期、一年中的月份划分的全系统流量趋势。</li><li id="17b4" class="mr ms iq ky b kz na lc nb lf nc lj nd ln ne lr nf mx my mz bi translated">各行政区流量排名靠前的站点</li><li id="db00" class="mr ms iq ky b kz na lc nb lf nc lj nd ln ne lr nf mx my mz bi translated">可视化提供车站交通数据旁边的人口统计信息</li></ul><h1 id="11a0" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">战术、工具和数据</h1><p id="b7e8" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">从高层次来说，我脑海中的“关系框架”如下:</p><p id="d4f3" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir">地铁站十字转门数据-车站位置数据-纽约市社区地理数据-纽约市社区人口统计信息</strong></p><p id="af06" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">因此，在投入工作之前，我问自己的最后一个问题是:<strong class="ky ir"> <em class="mp">如何才能最好地向潜在客户传达这些见解？</em> </strong></p><p id="68ef" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">答案是用地图！</p><p id="9a01" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我找到了来自纽约MTA的第二个数据集，其中包含地铁站的经度和纬度坐标。一旦我按车站汇总，我就能把它加入十字转门数据集。</p><p id="499e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">从那里，我获取了纽约市规划部发布的<a class="ae kv" href="https://www1.nyc.gov/site/planning/data-maps/open-data/census-download-metadata.page" rel="noopener ugc nofollow" target="_blank"> NTA(街区制表区)形状文件</a>，将它们与在NTA层面进行的<a class="ae kv" href="https://www1.nyc.gov/site/planning/planning-level/nyc-population/american-community-survey.page.page" rel="noopener ugc nofollow" target="_blank">美国社区调查</a>的最新数据(2019年)结合起来，并绘制了地铁站，计算了带有人口统计信息的街区的交通数据。</p><p id="b623" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">本项目中使用的所有数据都获得了纽约市机构的免费使用许可。您可以在以下位置找到每个数据集的具体使用条款:</p><ul class=""><li id="280e" class="mr ms iq ky b kz la lc ld lf mt lj mu ln mv lr nf mx my mz bi translated"><a class="ae kv" href="https://new.mta.info/developers" rel="noopener ugc nofollow" target="_blank"> MTA十字转门和位置数据</a></li><li id="ff86" class="mr ms iq ky b kz na lc nb lf nc lj nd ln ne lr nf mx my mz bi translated"><a class="ae kv" href="https://www1.nyc.gov/home/terms-of-use.page" rel="noopener ugc nofollow" target="_blank">来自纽约市规划局的NTA 2020造型文件</a></li><li id="ac6b" class="mr ms iq ky b kz na lc nb lf nc lj nd ln ne lr nf mx my mz bi translated"><a class="ae kv" href="http://www.nyc.gov/html/data/about.html" rel="noopener ugc nofollow" target="_blank">纽约市规划局NTA层面的ACS 5年估计值</a></li></ul><p id="a36e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">为了完成这个项目的目标，我需要几个不同的Python包:</p><ul class=""><li id="74a6" class="mr ms iq ky b kz la lc ld lf mt lj mu ln mv lr nf mx my mz bi translated"><a class="ae kv" href="https://www.sqlalchemy.org/" rel="noopener ugc nofollow" target="_blank"><strong class="ky ir">SQLAlchemy</strong></a><strong class="ky ir">:</strong>用于处理包含我们十字转门数据的本地数据库</li><li id="b976" class="mr ms iq ky b kz na lc nb lf nc lj nd ln ne lr nf mx my mz bi translated"><a class="ae kv" href="https://pandas.pydata.org/" rel="noopener ugc nofollow" target="_blank"> <strong class="ky ir">熊猫</strong> </a>，<a class="ae kv" href="https://numpy.org/" rel="noopener ugc nofollow" target="_blank"> <strong class="ky ir"> Numpy </strong> </a>，<a class="ae kv" href="https://matplotlib.org/" rel="noopener ugc nofollow" target="_blank"> <strong class="ky ir"> Matplotlib </strong> </a>，<a class="ae kv" href="https://seaborn.pydata.org/" rel="noopener ugc nofollow" target="_blank"><strong class="ky ir">Seaborn</strong></a><strong class="ky ir"/>和/或<a class="ae kv" href="https://plotly.com/python/" rel="noopener ugc nofollow" target="_blank"><strong class="ky ir">Plotly</strong></a><strong class="ky ir">:</strong>用于操作和可视化表格数据。</li><li id="2b9b" class="mr ms iq ky b kz na lc nb lf nc lj nd ln ne lr nf mx my mz bi translated"><a class="ae kv" href="https://pypi.org/project/fuzzywuzzy/" rel="noopener ugc nofollow" target="_blank"> <strong class="ky ir"> FuzzyWuzzy </strong> </a>:用于连接车站十字转门数据和车站地理信息(两个数据集中车站的命名不同，谢谢MTA！).</li><li id="1dce" class="mr ms iq ky b kz na lc nb lf nc lj nd ln ne lr nf mx my mz bi translated"><a class="ae kv" href="https://geopandas.org/en/stable/" rel="noopener ugc nofollow" target="_blank"> <strong class="ky ir"> Geopandas </strong> </a>，<a class="ae kv" href="https://leafmap.org/" rel="noopener ugc nofollow" target="_blank"> <strong class="ky ir"> Leafmap </strong> </a>:用于绘制静态和交互地图。</li></ul><h1 id="693a" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">方法和代码</h1><p id="e7d6" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">你可以在GitHub <a class="ae kv" href="https://github.com/NateDiR/NYC_MTA_EDA_Project/blob/main/MTA%20EDA.ipynb" rel="noopener ugc nofollow" target="_blank"> repo </a>中找到完整的代码。下面我来提供亮点！</p><h2 id="a214" class="ng lt iq bd lu nh ni dn ly nj nk dp mc lf nl nm me lj nn no mg ln np nq mi nr bi translated">摄取</h2><p id="c3a3" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">一旦导入了包，并设置了格式和样式选项，第一步就是使用SQLAlchemy连接到保存旋转栅门数据的数据库:</p><pre class="kg kh ki kj gt ns nt nu nv aw nw bi"><span id="6566" class="ng lt iq nt b gy nx ny l nz oa">engine = create_engine("sqlite:////Users/USER/Documents/GitHub/NYC_MTA_EDA_Project/mta_data.db")</span></pre><p id="287d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">接下来，我将这个数据库读入一个熊猫数据帧，如下所示:</p><pre class="kg kh ki kj gt ns nt nu nv aw nw bi"><span id="deef" class="ng lt iq nt b gy nx ny l nz oa">df = pd.read_sql('SELECT * FROM mta_data;', engine)</span></pre><p id="5cee" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在这里，我们可以对SQL查询做任何我们想做的事情，但是对于我的EDA，我更喜欢pandas。</p><pre class="kg kh ki kj gt ns nt nu nv aw nw bi"><span id="720b" class="ng lt iq nt b gy nx ny l nz oa">select *, ENTRIES - coalesce(lag(ENTRIES) over (ORDER BY "C/A", UNIT, SCP, STATION, DATE, TIME), 0) AS NET_ENTRIES, EXITS - coalesce(lag(EXITS) over (ORDER BY "C/A", UNIT, SCP, STATION, DATE, TIME), 0) AS NET_EXITS from mta_data  order by "C/A", UNIT, SCP, STATION, DATE, TIME LIMIT 100;</span></pre><p id="09da" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">会给你:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ob"><img src="../Images/f0a40f8fb7f4eb59c2d1e34fc14e38b8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*CGpPpuSIZ1r0UbraKr081A.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">需要一点清理，但你得到了要点。图片作者。</p></figure><h2 id="96db" class="ng lt iq bd lu nh ni dn ly nj nk dp mc lf nl nm me lj nn no mg ln np nq mi nr bi translated">清洁</h2><p id="725e" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">当我将数据(以原始格式)读入熊猫数据帧后，我做了几件事:</p><ol class=""><li id="ebd2" class="mr ms iq ky b kz la lc ld lf mt lj mu ln mv lr mw mx my mz bi translated">重命名列以便于操作。</li><li id="b33c" class="mr ms iq ky b kz na lc nb lf nc lj nd ln ne lr mw mx my mz bi translated">从日期和时间列创建了日期时间列</li><li id="8fa7" class="mr ms iq ky b kz na lc nb lf nc lj nd ln ne lr mw mx my mz bi translated">去掉任何DESC为“AUD RECOVR”的值(更多信息)</li><li id="86a6" class="mr ms iq ky b kz na lc nb lf nc lj nd ln ne lr mw mx my mz bi translated">计算聚合列net_traffic，这是我们进一步分析的基础。</li></ol><h2 id="a01f" class="ng lt iq bd lu nh ni dn ly nj nk dp mc lf nl nm me lj nn no mg ln np nq mi nr bi translated">极端值</h2><p id="2221" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">在运行了一个<a class="ae kv" href="https://github.com/pandas-profiling/pandas-profiling" rel="noopener ugc nofollow" target="_blank">熊猫档案</a>报告后，我看到我们的网络流量字段到处都是。有些是负值，有些是几十亿。在这一点上，我做了一些行政决策:</p><pre class="kg kh ki kj gt ns nt nu nv aw nw bi"><span id="907b" class="ng lt iq nt b gy nx ny l nz oa">df['net_traffic'] = abs(df.net_traffic)</span><span id="5af6" class="ng lt iq nt b gy oc ny l nz oa">q = np.quantile(df['net_traffic'], .99)<br/>df=df[df['net_traffic'] &lt; q]</span></pre><p id="7ede" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这将我们的net_traffic列的所有值都转换为正值，并去掉任何超过99%的值。这应该可以去除最严重的异常值，同时尽可能地保留数据集。这是一种缺乏细微差别的方法，绝对是一个需要改进的地方！</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi od"><img src="../Images/8e4d4f2180883bebb4d478e2576f38de.png" data-original-src="https://miro.medium.com/v2/resize:fit:738/format:webp/1*dOWlVS5pVEmeeq75wTNw9A.png"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">之前的净流量。图片作者。</p></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi od"><img src="../Images/88c9f9e9998ef8f658b6ff8857585719.png" data-original-src="https://miro.medium.com/v2/resize:fit:738/format:webp/1*ILr8p2KJuRGwEsK3SJRVPA.png"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">之后的净流量。图片作者。</p></figure><h2 id="39b5" class="ng lt iq bd lu nh ni dn ly nj nk dp mc lf nl nm me lj nn no mg ln np nq mi nr bi translated">肉眼观察</h2><p id="8550" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">因为目标是在给定的时间范围内提供一系列系统范围的洞察，所以我需要使用date_time列将这些时间范围添加为列:</p><pre class="kg kh ki kj gt ns nt nu nv aw nw bi"><span id="52ee" class="ng lt iq nt b gy nx ny l nz oa">df['date'] = df.date_time.dt.date<br/>df['day_of_week'] = df.date_time.dt.dayofweek<br/>df['month'] = df.date_time.dt.month<br/>df['week'] = df.date_time.dt.isocalendar().week<br/>df['hour'] = df.date_time.dt.hour</span></pre><p id="e529" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">然后，我开始可视化给定时间范围内的全系统流量:</p><pre class="kg kh ki kj gt ns nt nu nv aw nw bi"><span id="8588" class="ng lt iq nt b gy nx ny l nz oa">hourly_df = df.groupby(['hour'])[['net_traffic']].mean().reset_index()</span><span id="d6c2" class="ng lt iq nt b gy oc ny l nz oa">plt.plot(hourly_df.hour,hourly_df.net_traffic);<br/>plt.xlabel('Time')<br/>plt.ylabel('Average Traffic')<br/>plt.title('Traffic is highest 8AM - 8 PM')<br/>plt.xticks(np.arange(24), rotation=45);</span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi oe"><img src="../Images/6b429725c053ae11fc5732bff2e7100d.png" data-original-src="https://miro.medium.com/v2/resize:fit:772/format:webp/1*SDxWbl8DSnpOD9G9CKwdpA.png"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">高峰时间是8-12和5-8。图片作者。</p></figure><pre class="kg kh ki kj gt ns nt nu nv aw nw bi"><span id="767b" class="ng lt iq nt b gy nx ny l nz oa">weekly_timelapse_df = df.groupby(['week'])[['net_traffic']].sum().reset_index().copy()</span><span id="3f66" class="ng lt iq nt b gy oc ny l nz oa">weekly_timelapse_df['pct_change'] = weekly_timelapse_df.net_traffic.pct_change()<br/>weekly_timelapse_df['pct_change'].iloc[0] = 0</span><span id="5735" class="ng lt iq nt b gy oc ny l nz oa">weekly_timelapse_df['pct_total'] = weekly_timelapse_df['net_traffic'].apply(lambda x: x / weekly_timelapse_df.net_traffic.sum())</span><span id="2902" class="ng lt iq nt b gy oc ny l nz oa">plt.figure(figsize=(10,10))<br/>sns.lineplot(data=weekly_timelapse_df, x='week', y='net_traffic');<br/>plt.title('Timelapse of Traffic by Week');<br/>plt.xlabel('Week');<br/>plt.ylabel('Total Traffic');<br/>plt.ticklabel_format(axis='y', style='plain');<br/>plt.xticks(np.linspace(1,52,52), rotation=90, fontsize=10);</span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi of"><img src="../Images/cc627a0ee7fa571e4180102774e6f306.png" data-original-src="https://miro.medium.com/v2/resize:fit:1274/format:webp/1*hkZXsrGbXguGc8hZ0OTmFg.png"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">假期前后急剧下降。图片作者。</p></figure><pre class="kg kh ki kj gt ns nt nu nv aw nw bi"><span id="7201" class="ng lt iq nt b gy nx ny l nz oa">monthly_df = df.groupby(df.month)[['net_traffic']].sum().reset_index().copy()</span><span id="f21b" class="ng lt iq nt b gy oc ny l nz oa">plt.plot(monthly_df.month, monthly_df.net_traffic);<br/>plt.ticklabel_format(axis='y', style='plain');<br/>plt.xlabel('Month');<br/>plt.ylabel('Total Traffic');<br/>plt.title('Total Traffic by Month');</span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi og"><img src="../Images/7d401fe649fdb613c24e762fe6cd1eae.png" data-original-src="https://miro.medium.com/v2/resize:fit:838/format:webp/1*y-jNiegv24wAJg6C-OtOGw.png"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">八月至十月是客流量最大的月份。图片作者。</p></figure><pre class="kg kh ki kj gt ns nt nu nv aw nw bi"><span id="72cc" class="ng lt iq nt b gy nx ny l nz oa">dayofweek_df = df.groupby(df.day_of_week)[['net_traffic']].sum()</span><span id="13f8" class="ng lt iq nt b gy oc ny l nz oa">dayofweek_df['pct_change'] = dayofweek_df.net_traffic.pct_change()</span><span id="5389" class="ng lt iq nt b gy oc ny l nz oa">dayofweek_df['pct_change'].iloc[0] = ((dayofweek_df.net_traffic.iloc[0] - dayofweek_df.net_traffic.iloc[6]) / dayofweek_df.net_traffic.iloc[6])</span><span id="f4cc" class="ng lt iq nt b gy oc ny l nz oa">dayofweek_df['pct_total'] = dayofweek_df['net_traffic'].apply(lambda x: x / dayofweek_df.net_traffic.sum())</span><span id="11e9" class="ng lt iq nt b gy oc ny l nz oa">plt.plot(dayofweek_df.index, dayofweek_df.net_traffic);<br/>plt.xticks(np.arange(7), ['Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday', 'Sunday'], rotation=45);<br/>plt.ticklabel_format(axis='y', style='plain')<br/>plt.xlabel('Day of Week')<br/>plt.ylabel('Total Riders')<br/>plt.title('Total Riders by Day of Week')</span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi og"><img src="../Images/b75cb7746c6c3ae8f8914fa8006f4ac0.png" data-original-src="https://miro.medium.com/v2/resize:fit:838/format:webp/1*qPmOpoauC9qyLi7Ygs5Oyw.png"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">周末是低流量。图片作者。</p></figure><p id="effd" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">太好了！这些对我们的客户来说是非常有用的见解。但他们真正想知道的是，在他们担心交通之前，他们应该在哪些车站安装广播站！让我们开始吧:</p><h2 id="ca98" class="ng lt iq bd lu nh ni dn ly nj nk dp mc lf nl nm me lj nn no mg ln np nq mi nr bi translated">热门电台</h2><pre class="kg kh ki kj gt ns nt nu nv aw nw bi"><span id="2b5e" class="ng lt iq nt b gy nx ny l nz oa">top_stations = df.groupby('station')[['net_traffic']].sum().sort_values(by='net_traffic', ascending=False).reset_index().copy()</span><span id="decd" class="ng lt iq nt b gy oc ny l nz oa">top_stations['pct_total'] = top_stations['net_traffic'].apply(lambda x: x / top_stations.net_traffic.sum())</span></pre><p id="d072" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这创建了一个所有车站的数据框架，按交通价值降序排列，不考虑区。检查笔记本，看看它的(非常大的)情节！</p><p id="914b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">按区获取热门站点的下一步是引入来自MTA的第二个数据集，除了经度/纬度信息之外，该数据集还包含区信息:</p><pre class="kg kh ki kj gt ns nt nu nv aw nw bi"><span id="03c5" class="ng lt iq nt b gy nx ny l nz oa">station_data = pd.read_csv(<a class="ae kv" href="http://web.mta.info/developers/data/nyct/subway/Stations.csv" rel="noopener ugc nofollow" target="_blank">http://web.mta.info/developers/data/nyct/subway/Stations.csv</a>)</span></pre><p id="e0aa" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">接下来，我使用<a class="ae kv" href="https://pypi.org/project/fuzzywuzzy/" rel="noopener ugc nofollow" target="_blank"> FuzzyWuzzy </a>对top_stations数据帧和station_data数据帧进行模糊连接。原因是两个数据集之间的站的命名非常相似，但在许多小的、特殊的方面有所不同。FuzzyWuzzy得到了大多数正确的匹配，并在这个过程中节省了我的时间。肯定不是完美的，也是需要改进的地方！</p><p id="bcd3" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我按照<a class="ae kv" href="https://www.geeksforgeeks.org/how-to-do-fuzzy-matching-on-pandas-dataframe-column-using-python/" rel="noopener ugc nofollow" target="_blank">这个指南</a>完成了一个模糊连接，但是代码如下:</p><pre class="kg kh ki kj gt ns nt nu nv aw nw bi"><span id="a983" class="ng lt iq nt b gy nx ny l nz oa">station_data.stop_name = station_data.stop_name.str.replace(" - ","_")<br/>station_data.stop_name = station_data.stop_name.str.replace(" ","_")<br/>station_data.stop_name = station_data.stop_name.str.replace("(","")<br/>station_data.stop_name = station_data.stop_name.str.replace(")","")<br/>station_data.stop_name = station_data.stop_name.str.replace("/","_")<br/>station_data.stop_name = station_data.stop_name.str.replace(".","")<br/>station_data.stop_name = station_data.stop_name.str.replace("-","_")<br/>station_data.stop_name = station_data.stop_name.str.lower()</span><span id="ae21" class="ng lt iq nt b gy oc ny l nz oa">mat1 = []<br/>mat2 = []<br/>p= []<br/>list1 = top_stations.station.tolist()<br/>list2 = station_data.stop_name.tolist()</span><span id="e1e4" class="ng lt iq nt b gy oc ny l nz oa">threshold = 50 ## Needs to be at 50 or there are some values without matches.</span><span id="82a7" class="ng lt iq nt b gy oc ny l nz oa">for i in list1:<br/>    mat1.append(process.extractOne(i, list2, scorer=fuzz.ratio))<br/>top_stations['matches'] = mat1</span><span id="48d7" class="ng lt iq nt b gy oc ny l nz oa">for j in top_stations['matches']:<br/>    if j[1] &gt;= threshold:<br/>        p.append(j[0])<br/>            <br/>    mat2.append(','.join(p))<br/>    p= []<br/>    <br/>top_stations['matches'] = mat2</span><span id="cb58" class="ng lt iq nt b gy oc ny l nz oa">top_station_df = pd.merge(top_stations, right=station_data, left_on='matches', right_on='stop_name', how='left')</span><span id="be80" class="ng lt iq nt b gy oc ny l nz oa">top_station_df = top_station_df.groupby(['station'])[['net_traffic', 'pct_total', 'borough', 'gtfs_longitude', 'gtfs_latitude', 'avg_daily']].first().sort_values(by='net_traffic', ascending=False).reset_index()</span></pre><h2 id="c05a" class="ng lt iq bd lu nh ni dn ly nj nk dp mc lf nl nm me lj nn no mg ln np nq mi nr bi translated">映射热门站点</h2><p id="081c" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">所以现在我有了最高的车站，有经度/纬度信息，区，和计算的交通数量。我可以开始绘制地图了！</p><p id="4a2f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在我开始互动之前，我想使用<a class="ae kv" href="https://geopandas.org/en/stable/" rel="noopener ugc nofollow" target="_blank"> Geopandas </a>静态绘制每个区的热门站点。</p><p id="cad3" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">顾名思义，Geopandas是一个用于在Python中处理地理数据的包。值得注意的是，它引入了一种特殊的数据类型，称为Points:</p><pre class="kg kh ki kj gt ns nt nu nv aw nw bi"><span id="3495" class="ng lt iq nt b gy nx ny l nz oa">top_station_df['geometry'] = [Point(xy) for xy in zip(top_station_df['gtfs_longitude'],top_station_df['gtfs_latitude']]</span></pre><p id="2a98" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">一旦创建了几何列，我就可以绘制点了。但是！如果没有纽约市的背景地图作为背景，它们将毫无意义。进入我们的<a class="ae kv" href="https://www1.nyc.gov/site/planning/data-maps/open-data/census-download-metadata.page" rel="noopener ugc nofollow" target="_blank"> NTA形状文件</a>！</p><pre class="kg kh ki kj gt ns nt nu nv aw nw bi"><span id="a706" class="ng lt iq nt b gy nx ny l nz oa">nta_map = gpd.read_file('/Users/USER/Documents/GitHub/NYC_MTA_EDA_Project/nynta2020.shp')<br/>nta_map.to_crs(4326, inplace=True)</span></pre><p id="8686" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">什么是to_crs？一个<a class="ae kv" href="https://en.wikipedia.org/wiki/Spatial_reference_system" rel="noopener ugc nofollow" target="_blank">坐标参考系统</a>基本上是一个框架，计算机通过它解释比例尺。to_crs是geopandas函数，用于更改地理数据框架的crs。注意我们在。使用gpd.read_file的shp文件-它不是数据框，而是地理数据框！</p><p id="5ebc" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果我想让NTA地图和点数据有意义，那么将它们放在同一个CRS中是很重要的。首先，我还必须将top_station_df转换为地理数据框架:</p><pre class="kg kh ki kj gt ns nt nu nv aw nw bi"><span id="1924" class="ng lt iq nt b gy nx ny l nz oa">top_station_geo_df = gpd.GeoDataFrame(top_station_df, crs=4326, geometry = top_station_df.geometry)</span><span id="5231" class="ng lt iq nt b gy oc ny l nz oa"># Just to be extra sure</span><span id="0bc0" class="ng lt iq nt b gy oc ny l nz oa">top_station_geo_df.to_crs(4326, inplace=True)</span></pre><p id="bb13" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在，我可以画出来！</p><h2 id="0c56" class="ng lt iq bd lu nh ni dn ly nj nk dp mc lf nl nm me lj nn no mg ln np nq mi nr bi translated">布鲁克林区</h2><pre class="kg kh ki kj gt ns nt nu nv aw nw bi"><span id="f60a" class="ng lt iq nt b gy nx ny l nz oa">fig,ax = plt.subplots(figsize=(10,10))</span><span id="8f51" class="ng lt iq nt b gy oc ny l nz oa">nta_map.boundary.plot(ax=ax, edgecolor='k');</span><span id="0de5" class="ng lt iq nt b gy oc ny l nz oa">top_station_geo_df[top_station_geo_df.borough == 'Bk'].head(10).plot(column='station', ax=ax, legend=True, marker='.', markersize=top_station_geo_df.pct_total.astype('float') * 10000);</span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi oh"><img src="../Images/7da92d4c993614a29a88249483bd5d42.png" data-original-src="https://miro.medium.com/v2/resize:fit:1174/format:webp/1*K3KmYGDekZxRYCvzbJcEZQ.png"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">图片作者。</p></figure><pre class="kg kh ki kj gt ns nt nu nv aw nw bi"><span id="2881" class="ng lt iq nt b gy nx ny l nz oa">bk_df = top_station_df[top_station_df.borough == 'Bk'].copy()<br/>bk_df.reset_index()<br/>bk_df = bk_df.head(10)<br/>plt.bar(bk_df.station, bk_df.net_traffic);<br/>plt.title('Top 10 Brooklyn Stations')<br/>plt.xlabel('Stations');<br/>plt.ylabel('Total Traffic');<br/>plt.xticks(rotation=90);<br/>plt.ticklabel_format(axis='y', style='plain');</span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi oi"><img src="../Images/38031994ffbc08fd352803cfb4f22252.png" data-original-src="https://miro.medium.com/v2/resize:fit:828/format:webp/1*YnuruzOw_AVTCd6YGUSgXQ.png"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">图片作者。</p></figure><p id="a72c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这个代码在所有的行政区都是可重复的，所以我就不重复了:</p><h2 id="2d8e" class="ng lt iq bd lu nh ni dn ly nj nk dp mc lf nl nm me lj nn no mg ln np nq mi nr bi translated">曼哈顿</h2><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oj"><img src="../Images/f7fae58cf73de625f392256cf23d3c2f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*anYyQ6klo3-nSHaOKtv1tg.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">图片作者。</p></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi oi"><img src="../Images/6de0db8cc1e017df40a4a9c9c141d198.png" data-original-src="https://miro.medium.com/v2/resize:fit:828/format:webp/1*wDT9KG0ylyiU6OLLQrt7hw.png"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">图片作者。</p></figure><h2 id="db56" class="ng lt iq bd lu nh ni dn ly nj nk dp mc lf nl nm me lj nn no mg ln np nq mi nr bi translated">昆斯区</h2><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ok"><img src="../Images/bcb856a15edb483a477b511c720cd063.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*A9VeEimYER0KbiImEyROOw.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">图片作者。</p></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi oi"><img src="../Images/fe521a8bd82b6e3a0accbb391db5c392.png" data-original-src="https://miro.medium.com/v2/resize:fit:828/format:webp/1*zyZ7DsMq9uXyUYyzz3p4zg.png"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">图片作者。</p></figure><h2 id="79e5" class="ng lt iq bd lu nh ni dn ly nj nk dp mc lf nl nm me lj nn no mg ln np nq mi nr bi translated">布朗克斯区</h2><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ol"><img src="../Images/49b117a964894471ab2c115acf8c1983.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*EOhq6N56-ByHyFHF2mROwg.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">图片作者。</p></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi om"><img src="../Images/26f9e2201dd7aed4d2bab4a0849512e9.png" data-original-src="https://miro.medium.com/v2/resize:fit:816/format:webp/1*SIw_C4d94n6M5lyoAvKF4A.png"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">图片作者。</p></figure><h2 id="8beb" class="ng lt iq bd lu nh ni dn ly nj nk dp mc lf nl nm me lj nn no mg ln np nq mi nr bi translated">斯塔腾岛</h2><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi on"><img src="../Images/e1ca058f7882852521b34214017c164e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vcubKDjsDKdX13dcWDvwIA.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">图片作者。</p></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi om"><img src="../Images/11afe3eccb3907a1a7e68bcc02d3a057.png" data-original-src="https://miro.medium.com/v2/resize:fit:816/format:webp/1*6XaW0do7SMyyeKkBVHVVxA.png"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">图片作者。</p></figure><h2 id="456c" class="ng lt iq bd lu nh ni dn ly nj nk dp mc lf nl nm me lj nn no mg ln np nq mi nr bi translated">(奖金)非MTA站:</h2><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ok"><img src="../Images/7ed8d7be902503bd260d68510925bd82.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*nrJghgFOAO1AnsVAy9tDaw.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">这些应该在新泽西..如果是在这里画的。图片作者。</p></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi oi"><img src="../Images/89a41b0ea5063bdae5d8410d7edf5c53.png" data-original-src="https://miro.medium.com/v2/resize:fit:828/format:webp/1*sSu9GM95TyvcrpdeBknqLg.png"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">图片作者。</p></figure><h2 id="dc44" class="ng lt iq bd lu nh ni dn ly nj nk dp mc lf nl nm me lj nn no mg ln np nq mi nr bi translated">使用Leafmap的交互式制图</h2><p id="e9a2" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">在游戏的后期，我被我们的教练带上了树叶地图。这是一个非常强大且易于使用的工具，可以在笔记本上制作交互式地图。</p><p id="c023" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">但是在我开始制作交互式地图之前，我需要引入一些人口统计数据。</p><pre class="kg kh ki kj gt ns nt nu nv aw nw bi"><span id="d311" class="ng lt iq nt b gy nx ny l nz oa">nta_demos = <br/>pd.read_excel('<a class="ae kv" href="https://www1.nyc.gov/assets/planning/download/office/planning-level/nyc-population/acs/demo_2019_acs5yr_nta.xlsx'" rel="noopener ugc nofollow" target="_blank">https://www1.nyc.gov/assets/planning/download/office/planning-level/nyc-population/acs/demo_2019_acs5yr_nta.xlsx'</a>)</span></pre><p id="977f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">就这么简单-直接从网上。</p><p id="9571" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在合并(不模糊):</p><pre class="kg kh ki kj gt ns nt nu nv aw nw bi"><span id="a333" class="ng lt iq nt b gy nx ny l nz oa">nta_df = nta_map.merge(nta_demos, how='left', left_on='NTA2020', right_on='GeoID')</span></pre><h2 id="28d6" class="ng lt iq bd lu nh ni dn ly nj nk dp mc lf nl nm me lj nn no mg ln np nq mi nr bi translated">树叶地图</h2><p id="99b1" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">现在是互动地图！</p><p id="023d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">实际上，我最终需要重新保存我的top_station_geo_df和计算的流量列作为GeoJSON，这样才能工作:</p><pre class="kg kh ki kj gt ns nt nu nv aw nw bi"><span id="4da3" class="ng lt iq nt b gy nx ny l nz oa">top_station_geo_df.to_file("top_station.json", driver="GeoJSON")</span></pre><p id="1605" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">一旦我在回购中有了它，创建交互式地图所需的所有代码如下:</p><pre class="kg kh ki kj gt ns nt nu nv aw nw bi"><span id="63c8" class="ng lt iq nt b gy nx ny l nz oa">m = leafmap.Map(center=(40,-100),zoom=4)</span><span id="c463" class="ng lt iq nt b gy oc ny l nz oa">m.add_gdf(nta_df, layer_name='2020 NTA Demographic Information', info_mode='on_click')</span><span id="a050" class="ng lt iq nt b gy oc ny l nz oa">m.add_point_layer(filename='/Users/USER/Documents/GitHub/NYC_MTA_EDA_Project/top_station.json', popup=['station', 'net_traffic', 'pct_total', 'avg_daily'], layer_name="Stations")</span><span id="5ec0" class="ng lt iq nt b gy oc ny l nz oa">m</span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi oo"><img src="../Images/005e9e55a6548d2499e897ba6520c2f5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1380/1*4chG0SrUfND4yxbfbTa4bQ.gif"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">Leafmap的力量！图片作者。</p></figure><h1 id="2a1c" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">见解和结论</h1><p id="fbf9" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">当一切都说了，做了，我将能够向客户提供以下内容:</p><ol class=""><li id="a98e" class="mr ms iq ky b kz la lc ld lf mt lj mu ln mv lr mw mx my mz bi translated">系统级指标，如高峰流量时间、一周中的天数、一年中的周数和月数。</li><li id="c406" class="mr ms iq ky b kz na lc nb lf nc lj nd ln ne lr mw mx my mz bi translated">按区排列的前10个站点，或按流量排序的所有站点，而不考虑区。</li><li id="0f88" class="mr ms iq ky b kz na lc nb lf nc lj nd ln ne lr mw mx my mz bi translated">一个交互式地图，显示每个车站的交通数据，以及周围社区的人口统计数据。</li></ol><p id="ae54" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">有了这些见解，我们的客户应该能够对他们的业务问题做出明智的、数据驱动的决策。无论这是如何最好地达到某些观众，还是轨道维护的最佳时间表。</p><h1 id="6b21" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">有待改进的领域</h1><p id="4957" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">我把它带到了很多不同的方向，作为一个展示项目，这太棒了！对于一个客户来说，可交付的东西就没那么多了。在现实世界中，如果有更少有趣的软件包，更简洁的分析和演示，我会感觉更好。</p><p id="c81d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在此基础上，格式化无疑也是一个需要改进的领域。骨架已经就位，而且功能正常，但整个东西需要重新刷一层漆。所有的图形和地图，包括交互式的，都可以以更清晰的格式呈现。考虑到前面关于时间管理的观点，我可能会更好地减少视觉化图像的数量，并专注于制作一些真正高质量的图像。</p><h1 id="40ea" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">需要进一步分析的领域</h1><p id="9c62" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">这个项目中有很多细节。但是，可以真正提高其效用的三个进一步分析的领域如下:</p><ol class=""><li id="7353" class="mr ms iq ky b kz la lc ld lf mt lj mu ln mv lr mw mx my mz bi translated">这些见解与我们在系统级产生的见解相似，但针对的是每个区的前10个电台。</li><li id="4287" class="mr ms iq ky b kz na lc nb lf nc lj nd ln ne lr mw mx my mz bi translated">除了人口统计之外的其他数据将被添加到NTA数据中——除了我们现在拥有的种族数据之外，拥有性别和收入等信息将会产生影响。此外，清理NTA数据，以减少列数，使其更具描述性。</li><li id="472d" class="mr ms iq ky b kz na lc nb lf nc lj nd ln ne lr mw mx my mz bi translated">地铁乘客数量是2019年疫情之前的一小部分。2019年、2020年和2021年之间的同比分析将这些流量信息联系起来，并帮助广告商了解趋势。</li></ol></div><div class="ab cl op oq hu or" role="separator"><span class="os bw bk ot ou ov"/><span class="os bw bk ot ou ov"/><span class="os bw bk ot ou"/></div><div class="ij ik il im in"><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ow"><img src="../Images/5aea7f06d0edb5324a46a3bca9eb2958.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*-NPfeoZyFIk_fS5y"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">凯文·钦奇利亚在<a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</p></figure></div></div>    
</body>
</html>