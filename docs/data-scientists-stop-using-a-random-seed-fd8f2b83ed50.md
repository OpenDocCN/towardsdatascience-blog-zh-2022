# 数据科学家—停止使用随机种子

> 原文：<https://towardsdatascience.com/data-scientists-stop-using-a-random-seed-fd8f2b83ed50>

## 或者为什么 random_state=42 是一个反模式

![](img/2f60ef1eae84ec92158ace4568145e56.png)

系统的随机性(齿轮工作团队在一起)，loginueve ilustra， [Pixabay](https://pixabay.com/vectors/gears-work-team-together-5193383/)

以下是我对在你的作品《模型开发和生产》中使用随机种子的看法和推理。不管所选的数字是多少，在很多情况下这是一个众所周知的数字，例如 [42](https://en.wikipedia.org/wiki/42_(number)) 。在某些情况下，如果您想要保持一致性，可以使用随机种子，而在其他情况下，一致性是错误的选择，您应该完全避免。本文将对它们进行回顾。

# 要避免的用例

## 模特培训

我见过许多数据科学家使用随机种子进行培训，不这样做有几个主要原因，让我们深入了解一下:

1.  进入生产阶段时，您可能会忘记随机种子，并且如果模型依赖于单个随机种子，它可能不够健壮，这可能会影响内部模型决策、层初始化和其他因素。
2.  您将始终使用相同的种子进行训练，并根据会导致随机种子过度适应的值做出决策。另一方面，如果您在构建模型时没有随机种子，您将对您的模型建立更好的信任，因为它已经看到了各种随机化效果，并且它对随机数变化将更加稳健。换句话说，稳健性来自于多次运行，并且您从直接体验您的模型中获得的信心，您不希望依赖于您意外地过度拟合您的测试数据或者幸运地拥有某个随机种子的机会。

## 生产环境

我建议在生产中不要使用随机种子。最大的原因是，您肯定会将您的代码绑定到一个随机的数字上，这个数字会影响您的模型或管道中的许多部分，而这些部分在处理来自外部的数据时可能表现不佳。也就是说，我收到的反馈是，在某些情况下，各种随机值也可能有很大的影响，但根据经验，要么测量效果，要么不要使用随机种子。

# 您可以但不一定应该做的案例

## 验证流或管道

您可能想要端到端地测试您的流程。例如，您已经为培训或生产建立了一个流程，该流程用于培训、验证和输出一致的结果，并且您希望确保每次都能收到相同的结果。然而，一旦你的流量是一致的，你应该完全删除随机种子，以恢复你的流量的稳健性，而不是依赖于一个单一的随机化数字。

## 写作教程

这与上面的验证用例密切相关，但是这个用例有一点不同，这可能是完全可接受的随机种子的唯一用例。假设您正在编写一个 ML 教程，当有人重新运行您的教程代码时，您希望您的读者在模型输出方面有一个一致的实验。为此，只有你应该使用随机种子。

## ML 竞赛

想象一下，你进入了 ML 竞赛的前 10 名提交，你和竞争者之间的差别是ε，用不同的随机种子一次又一次地运行模型，可能会让你找到一个更好的局部最小值，可以胜过所有其他 10 个竞争者，这是否意味着你的模型是最好的？可能不是，但是如果你关心赢得比赛，这是一个有效的用例。

下面这篇文章很好地解释了这一点。

<https://laurenoakdenrayner.com/2019/09/19/ai-competitions-dont-produce-useful-models/>  

## 安全性

假设您的所有代码都依赖于一个随机的种子数字，例如 42。我可以推断，知道您使用这个数字的攻击者在攻击您的模型时会更容易成功。我没有方便的例子，但是随机生成器攻击是一个蓬勃发展的领域。

## 摘要

我希望这篇短文提供了关于随机种子使用和相关用例的足够多的见解，这是一个 IMO 值得进行更多讨论的主题。我要感谢 [Yoav Talmi](https://www.linkedin.com/in/yoav-talmi-27787446/?originalSubdomain=il) 多年前点燃了这个想法。

Ori Cohen 博士拥有计算机科学博士学位，主要研究机器学习。他是 [ML & DL 纲要](https://book.mlcompendium.com/)和[StateOfMLOps.com](http://www.stateofmlops.com)的作者，并且对 AIOps & MLOps 领域很感兴趣。如今，他是 Justt.ai 数据科学的高级数据总监。