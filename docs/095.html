<html>
<head>
<title>7-day Challenge — Mastering Ggplot2: Day 4 — Stunning Statistical Graphs</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">7天挑战—掌握Ggplot2:第4天—惊人的统计图表</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/7-day-challenge-mastering-ggplot2-day-4-stunning-statistical-graphs-a3d005e55e19#2022-01-04">https://towardsdatascience.com/7-day-challenge-mastering-ggplot2-day-4-stunning-statistical-graphs-a3d005e55e19#2022-01-04</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""><h1 id="6b40" class="pw-post-title ir is it bd iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp bi translated">7天挑战—掌握Ggplot2:第4天—惊人的统计图表</h1></div><div class=""><h2 id="3417" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">通过有洞察力的图表了解您的数据</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/76fbd16beaddf85b60297985611d8816.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*av-Kt6Q5PUDBWeyA"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated"><a class="ae ky" href="https://unsplash.com/@hongochai10?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Hồ Ngọc Hải </a>在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍照</p></figure><h1 id="1dbf" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">第一句话</h1><p id="46f4" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">经过几周的期末考试，我现在可以休息了，继续我的Ggplot2学习挑战。</p><p id="8ebd" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">虽然有很多数据可视化的工具，但是我相信理解R可视化还是很有必要的。所说的R是一种专门为统计研究设计的语言，它包括美观的可视化工具，如ggplot2、scatterplot3D和其他有助于解释统计数据的工具。</p><p id="975a" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">下面是三篇关于<a class="ae ky" rel="noopener" target="_blank" href="/7-day-challenge-mastering-ggplot2-day-1-bar-chart-4b2ced928a31"> <strong class="lt iu"> <em class="ms">条形图</em></strong></a><a class="ae ky" rel="noopener" target="_blank" href="/7-day-challenge-mastering-ggplot2-day-2-line-graph-2cfbdf164c81"><strong class="lt iu"><em class="ms">线图</em> </strong> </a>和<a class="ae ky" rel="noopener" target="_blank" href="/7-day-challenge-mastering-ggplot2-day-3-slope-graph-a7cb373dc252"><strong class="lt iu"><em class="ms">SlopI ' draph</em></strong></a>的文章，我想分享一下我在寻找对统计有帮助的图表时的发现。</p><h1 id="6a45" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">我们涵盖的内容</h1><p id="1c23" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">本文将介绍一些我认为统计挖掘所必需的统计操作的图表。有:</p><ol class=""><li id="dea5" class="mt mu it lt b lu mn lx mo ma mv me mw mi mx mm my mz na nb bi translated">显示数据分布的图形:直方图、箱形图、小提琴图、点状图、密度和抖动图。</li><li id="580e" class="mt mu it lt b lu nc lx nd ma ne me nf mi ng mm my mz na nb bi translated">显示解释变量和响应变量之间关系的图表:散点图矩阵、镶嵌图。</li></ol><h1 id="4346" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">资料组</h1><p id="197c" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">EX2。TIPS，不同聚会中小费金额的记录，是我对本文所用数据集的选择。我在以前的文章中也使用了这个数据，因为它很容易生成。可以快速获取R <code class="fe nh ni nj nk b">regclass</code>包中的数据集。</p><pre class="kj kk kl km gt nl nk nm nn aw no bi"><span id="05d6" class="np la it nk b gy nq nr l ns nt">library(regclass)<br/>data(EX2.TIPS)<br/>skim(EX2.TIPS)</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nu"><img src="../Images/e53b9d9ffa51140f939d7e0a502ac9dd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*Exhm1ZkDlfnUh0uC.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">图1:数据汇总—按作者分类的图片</p></figure><h1 id="e1c5" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">直方图</h1><p id="31fc" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">直方图是一种通过绘制不同高度的条形来可视化连续样本数据分布的方法。每个条柱代表一个数值范围，条柱越高，意味着相应范围内的数据越多。</p><p id="313c" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">在ggplot2中，您可以使用<code class="fe nh ni nj nk b">ggplot()</code>和<code class="fe nh ni nj nk b">geom_histogram()</code>轻松生成直方图。此外，我们还可以通过控制独特的属性来自定义图形，例如:</p><ul class=""><li id="ba6c" class="mt mu it lt b lu mn lx mo ma mv me mw mi mx mm nv mz na nb bi translated"><code class="fe nh ni nj nk b">bins</code>:设置您想要在图表中显示的箱子数量。默认数字是30。如果您希望您的直方图类似于密度图，您可以使用大量的面元。或者，如果你想让你的图更大，设置一个更小的箱数。</li><li id="6100" class="mt mu it lt b lu nc lx nd ma ne me nf mi ng mm nv mz na nb bi translated"><code class="fe nh ni nj nk b">fill</code>:帮你自定义条块的填充颜色。垃圾箱的默认颜色是灰色，看起来很沉闷。</li><li id="eb2a" class="mt mu it lt b lu nc lx nd ma ne me nf mi ng mm nv mz na nb bi translated"><code class="fe nh ni nj nk b">color</code>:控制箱子的颜色边框。</li><li id="77cd" class="mt mu it lt b lu nc lx nd ma ne me nf mi ng mm nv mz na nb bi translated"><code class="fe nh ni nj nk b">binwidth</code>:修改条形的宽度。</li><li id="ce49" class="mt mu it lt b lu nc lx nd ma ne me nf mi ng mm nv mz na nb bi translated"><code class="fe nh ni nj nk b">scale_y_continuous(labels = percent)</code>:改变y轴来表示占总数的百分比。</li></ul><p id="c9c9" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">我相信每个人都很熟悉直方图的基本图形。但是，下面是一些我认为有助于提供分析所需的更高级的属性:</p><ul class=""><li id="2815" class="mt mu it lt b lu mn lx mo ma mv me mw mi mx mm nv mz na nb bi translated"><code class="fe nh ni nj nk b">geom_vline</code>:用于说明数据的平均值、偏离平均值的标准偏差数等。</li><li id="cbd4" class="mt mu it lt b lu nc lx nd ma ne me nf mi ng mm nv mz na nb bi translated"><code class="fe nh ni nj nk b">geom_density</code>:结合密度图，传达更有见地的观点。</li><li id="e605" class="mt mu it lt b lu nc lx nd ma ne me nf mi ng mm nv mz na nb bi translated"><code class="fe nh ni nj nk b">geom_text:</code>为重要点添加注释，如最小值、最大值、中间值等。</li></ul><p id="fb58" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">这是我在定制了图表的不同图层后得到的结果。在图中，我将可视化所有参加聚会的人的小费金额分布。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nw"><img src="../Images/d7b4de97da567914c35bbbcec9c9a38c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*cnguoYtPsUj8ZaDtzfQCKQ.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">图2a:完整的直方图——按作者分类的图像</p></figure><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nx ny l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">图2b:直方图代码—按作者分类的图像</p></figure><h1 id="772f" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">密度图</h1><p id="4770" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">如果您想将直方图与密度图结合起来，使图表更具洞察力，以下是您的操作方法:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nz"><img src="../Images/1cfdd5d57f7191ea5759af4eb5acdad1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4Z_bMsLkCDSQ16vthrDZSA.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">图2c:密度图—作者图片</p></figure><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nx ny l"/></div></figure><p id="7f6c" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">当进行不同组的分布比较时，在唯一的图中绘制不同组的密度图有时是有用的。例如，下图显示了男性和女性的小费金额分布。看一下图表，很容易看出女人给的小费往往比男人少。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oa"><img src="../Images/e62d8de147a744898d82f47db9943fa3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1tcpTyKZ39dg245Geg5M1Q.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">图3:按性别划分的密度图——按作者划分的图像</p></figure><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nx ny l"/></div></figure><p id="309b" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">在另一种情况下，如果您想要创建脊线可视化，可以尝试使用<code class="fe nh ni nj nk b">geom_density_ridges()</code>进行可视化。我们甚至可以通过设置<code class="fe nh ni nj nk b">stat(quantile)</code>到<code class="fe nh ni nj nk b">fill</code>并调用<code class="fe nh ni nj nk b">calc_ecdf</code>和<code class="fe nh ni nj nk b">geom = "density_ridges_gradient".</code>来用不同的颜色填充数据分位数。下图描述了一周中每个人每天支付的小费数量。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ob"><img src="../Images/48b5517549926f15cec1299dc7612a57.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2bathcFS5riqioVfOCQkog.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">图4: D <code class="fe nh ni nj nk b">ensity ridges</code> —作者图片</p></figure><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nx ny l"/></div></figure><h1 id="4b91" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">箱线图</h1><p id="8538" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">通常，通过显示数据百分位数和平均值，箱线图或小提琴图可视化可以帮助理解数据分布和偏斜度。</p><p id="a2c0" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">使用ggplot的盒图可视化非常简单，例如使用<code class="fe nh ni nj nk b">ggplot()</code>和<code class="fe nh ni nj nk b">geom_boxplot().</code>，仍然使用<strong class="lt iu">“小费金额”</strong>数据，让我们看看这些数据如何按<strong class="lt iu">“工作日”</strong>分布。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nx ny l"/></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oc"><img src="../Images/6257f9dfb14c25a2e67998b5e59a7b90.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*q2MPp-x0MtxYDL5aV4Zicg.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">图5:添加平均分数的箱线图——作者图片</p></figure><p id="9acf" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">对于基本的箱形图，平均点不会显示在图形中。这就是为什么我们必须在剧情中加入<code class="fe nh ni nj nk b">stat_summary(fun="mean")</code>才能让它出现。我们可以看到，对于每个级别的<strong class="lt iu">、</strong>、【中值】、<strong class="lt iu">、【小费金额】、</strong>各不相同。因此，我们可能会怀疑小费和一周中的天数之间的关系。</p><h1 id="fbf0" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">抖动图</h1><p id="4294" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">有时，添加抖动点有助于探索数据的基本分布。在上面的例子中，让我们看看我是如何可视化添加了抖动点的图形的。</p><p id="17a3" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">代码其实很简单，只需要给盒子剧情代码加一层<code class="fe nh ni nj nk b">geom_jitter()</code>，下面就是结果:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi od"><img src="../Images/eda70fb40ff434f46b5699e4cbbb5eea.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*76YDP7qG2Uq4vMdzXlT1Nw.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">图6:方框图和抖动点的组合—作者图片</p></figure><h1 id="de53" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">马赛克图</h1><p id="e815" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">镶嵌图用于描述两个分类变量之间的模式，并检查它们之间的关系。例如，如果我想检查<strong class="lt iu">【工作日】</strong>和<strong class="lt iu">【白天_夜晚】</strong>变量之间的关系，马赛克图可能是一个有用的方法。在下面的图7中:</p><ul class=""><li id="3053" class="mt mu it lt b lu mn lx mo ma mv me mw mi mx mm nv mz na nb bi translated"><strong class="lt iu">每个条形的宽度</strong>代表相应的总值。由于周六的酒吧最宽，这意味着周六参加派对的人数最多。与此同时，根据数据，人们似乎在周五比其他日子出门少。</li><li id="3397" class="mt mu it lt b lu nc lx nd ma ne me nf mi ng mm nv mz na nb bi translated">对于x的每一级，y的分布是不同的。所以，我们可以怀疑x和y变量之间的关系。</li></ul><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oe"><img src="../Images/41e3fbd6dad5e8420d27c94049166c35.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8C32ywNkRor2NU9s_twGCA.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">图7:分类变量的镶嵌图——作者图片</p></figure><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nx ny l"/></div></figure><h1 id="f7cd" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">散点图矩阵</h1><p id="1e0c" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">最后，检查变量之间关系的一个非常有用的可视化函数是<code class="fe nh ni nj nk b">ggpairs()</code>。通过一行代码，我们可以快速生成所有变量的相关矩阵。例如，小费和账单之间的线性关系如下图所示。</p><pre class="kj kk kl km gt nl nk nm nn aw no bi"><span id="7beb" class="np la it nk b gy nq nr l ns nt">library(GGally)</span><span id="5e1b" class="np la it nk b gy of nr l ns nt">ggpairs(EX2.TIPS[c("Tip.Percentage","Bill_in_USD","Tip_in_USD")])</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi og"><img src="../Images/4e0e110fbbc55931bb12f84c04f5e48a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Kly-Z4DrZAm32JlzG0if2w.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">图8:相关矩阵——作者图片</p></figure><h1 id="cca5" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">临终遗言</h1><p id="52b6" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">在学习这些可视化的同时，我发现了一些学习R有用的页面，分别是<a class="ae ky" href="https://www.r-bloggers.com/2020/05/4-great-alternatives-to-standard-graphs-using-ggplot/" rel="noopener ugc nofollow" target="_blank"> <strong class="lt iu"> R-blog </strong> </a>和<strong class="lt iu"/><a class="ae ky" href="https://r-charts.com/" rel="noopener ugc nofollow" target="_blank"><strong class="lt iu">R-charts</strong></a>。他们一步一步地描述生成你期望的图形。如果你想了解更多关于ggplot的知识，并以更复杂的方式定制你的图表，我强烈推荐这两个。</p><p id="9fc0" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">希望文章有帮助。</p><p id="a42d" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">新年快乐。</p><h1 id="1010" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">参考</h1><div class="oh oi gp gr oj ok"><a href="https://r-charts.com/" rel="noopener  ugc nofollow" target="_blank"><div class="ol ab fo"><div class="om ab on cl cj oo"><h2 class="bd iu gy z fp op fr fs oq fu fw is bi translated">R CHARTS |用R编程语言制作的图表和图形集合</h2><div class="or l"><h3 class="bd b gy z fp op fr fs oq fu fw dk translated">这个网站是作为学习如何用R语言创建图表的参考而创建的，也是一个寻找…</h3></div><div class="os l"><p class="bd b dl z fp op fr fs oq fu fw dk translated">r-charts.com</p></div></div><div class="ot l"><div class="ou l ov ow ox ot oy ks ok"/></div></div></a></div><div class="oh oi gp gr oj ok"><a href="https://www.r-bloggers.com/" rel="noopener  ugc nofollow" target="_blank"><div class="ol ab fo"><div class="om ab on cl cj oo"><h2 class="bd iu gy z fp op fr fs oq fu fw is bi translated">r博客</h2><div class="or l"><h3 class="bd b gy z fp op fr fs oq fu fw dk translated">由数百个R博客提供的R新闻和教程</h3></div><div class="os l"><p class="bd b dl z fp op fr fs oq fu fw dk translated">www.r-bloggers.com</p></div></div><div class="ot l"><div class="oz l ov ow ox ot oy ks ok"/></div></div></a></div></div></div>    
</body>
</html>