<html>
<head>
<title>What’s in an F-String?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">F弦里有什么？</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/whats-in-an-f-string-a435db4f477a#2022-01-21">https://towardsdatascience.com/whats-in-an-f-string-a435db4f477a#2022-01-21</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""><h1 id="1487" class="pw-post-title ir is it bd iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp bi translated">F弦里有什么？</h1></div><div class=""><h2 id="5ffc" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">概述Python组合字符串和变量的方法，以及为什么应该使用它。</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/0d11d9182df68ad76caa883659a8db69.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*Z-kSwAGcnvZdti3Q"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">穆罕默德·拉赫马尼在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</p></figure><p id="8f7d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这是我讨论Python独特特性系列的第五篇文章；一定要检查一下<a class="ae ky" rel="noopener" target="_blank" href="/whats-in-a-lambda-c8cdc67ff107"> lambdas </a>、<a class="ae ky" rel="noopener" target="_blank" href="/whats-in-a-list-comprehension-c5d36b62f5"> list comprehensions </a>、<a class="ae ky" rel="noopener" target="_blank" href="/whats-in-a-dictionary-87f9b139cc03">dictionary</a>和<a class="ae ky" rel="noopener" target="_blank" href="/whats-in-a-tuple-5d4b2668b9a1"> tuples </a>上的前四个。</p><p id="8c3f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果您是一个相对较新的Python用户，您可能遇到过需要将一些您定义的变量添加到字符串中的情况。不知道如何方便地做到这一点，您可能会得到一些不太漂亮的代码，如下所示:</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="0cd7" class="ma mb it lw b gy mc md l me mf">&gt;&gt;&gt; fruit = 'persimmon'<br/>&gt;&gt;&gt; sport = 'lacrosse'<br/>&gt;&gt;&gt; print('I eat ' + fruit + ' and I play ' + sport)<br/>I eat persimmon and I play lacrosse.</span></pre><p id="1778" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">它起作用了，但这不是一个值得一看的景象。更别说打字都是一种痛苦。幸运的是，有一个更好的方法。</p><h2 id="e530" class="ma mb it bd mg mh mi dn mj mk ml dp mm li mn mo mp lm mq mr ms lq mt mu mv mw bi translated">到底什么是f弦？</h2><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mx"><img src="../Images/1bcc2a7f88bb2c38a91fae5ef1abf135.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*hARtI-VjODeU60cv"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">照片由<a class="ae ky" href="https://unsplash.com/@picoftasty?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">湄木</a>在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>拍摄</p></figure><p id="7a30" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">f-string是Python简化的字符串格式化方法。这方面的一点背景:</p><ul class=""><li id="22d5" class="my mz it lb b lc ld lf lg li na lm nb lq nc lu nd ne nf ng bi translated">通常，您可以将字符串格式化视为一种构造字符串并在字符串中的指定位置插入用户定义的变量的方法(上面的代码显示了一个这样的示例)。</li><li id="cc22" class="my mz it lb b lc nh lf ni li nj lm nk lq nl lu nd ne nf ng bi translated">f字符串并不是Python中完成这项任务的唯一方式。它还提供了带有“%”操作符和一个有用的<code class="fe nm nn no lw b">.format()</code>函数的C风格格式化，但是我在这里不详细讨论这些。我是f弦的拥护者，因为它们在形式和功能上是最具Pythonic风格的。</li></ul><p id="3263" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">要定义一个f字符串，只需在字符串的第一个引号前加上一个<code class="fe nm nn no lw b">f</code>，并使用<code class="fe nm nn no lw b">{}</code>在字符串中的任意位置插入变量。让我们看一个例子。下面，我们定义与上面相同的字符串，但是这次使用f字符串:</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="f81f" class="ma mb it lw b gy mc md l me mf">&gt;&gt;&gt; fruit = 'persimmon'<br/>&gt;&gt;&gt; sport = 'lacrosse'<br/>&gt;&gt;&gt; print(f"I eat {fruit} and play {sport}.")<br/>I eat persimmon and play lacrosse.</span></pre><p id="56ae" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">有点酷，对吧？然而，他们的能力不止于此。从技术上来说，当我说f-strings可以将<em class="np">变量</em>插入字符串时，我撒了一点谎。他们实际上可以插入整个<em class="np">表达式</em>，比如函数调用:</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="3293" class="ma mb it lw b gy mc md l me mf">&gt;&gt;&gt; def my_func():<br/>...     return "We are never ever getting back together."<br/>...<br/>&gt;&gt;&gt; print(f"Taylor sings {my_func()}")<br/>Taylor sings We are never ever getting back together.</span></pre><p id="7e2d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">就我个人而言，我觉得这非常方便。</p><h2 id="082f" class="ma mb it bd mg mh mi dn mj mk ml dp mm li mn mo mp lm mq mr ms lq mt mu mv mw bi translated">f弦为什么有用？</h2><p id="5bf4" class="pw-post-body-paragraph kz la it lb b lc nq ju le lf nr jx lh li ns lk ll lm nt lo lp lq nu ls lt lu im bi translated">那么，为什么要用f弦呢？这个问题的答案很简单:它们简单、易读、优雅。换句话说，它们是蟒蛇。当您可以一次写出整个字符串，表达式用花括号清楚地分隔时，为什么要将一堆引号和加号挤在一起呢？这对代码编写人员和读者来说都更容易。</p><p id="7047" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我说得更具体一点。假设你正在处理熊猫的一些数据，如果你正在读这篇文章，你可能至少偶尔会这样做。但是，现实世界的数据往往是杂乱的。您的行到处都是，您的列有一半是未命名的，并且有大量的空值分布在各处。</p><p id="f277" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">经过一番探索，您意识到您的字符串分散在不同的列中:</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="2f72" class="ma mb it lw b gy mc md l me mf">            col1          col2             col3<br/>0           This is  an example of  a broken string<br/>1  A second example           of a     a broken one<br/>2         I promise        this is     the last one</span></pre><p id="df4b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">您不需要修复数据帧；您只需要一种快速的方法将组合字符串打印到终端中，这样您就可以分析一些东西。回车，f弦:</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="a53f" class="ma mb it lw b gy mc md l me mf">&gt;&gt;&gt; print(f"My combined string: {df.loc[0, 'col1']} {df.loc[0, 'col2']} {df.loc[0, 'col3']}")<br/>My combined string: This is an example of a broken string</span></pre><p id="d941" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">任务完成。</p><p id="4d6a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在，我并不是说这是解决这个问题的最佳或唯一的方法。您可以通过使用<code class="fe nm nn no lw b">.apply()</code>函数来修复数据帧，或者提出一些其他新颖的解决方案。然而，上面举例说明了一个用例，如果您希望轻松快速地完成一项任务，它可能会有所帮助。</p><p id="ceab" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">一般来说，我建议在两种情况下使用f弦:</p><ul class=""><li id="b2fa" class="my mz it lb b lc ld lf lg li na lm nb lq nc lu nd ne nf ng bi translated">如果您只是浏览一些数据，并需要执行简单的字符串操作来收集一些信息</li><li id="f73c" class="my mz it lb b lc nh lf ni li nj lm nk lq nl lu nd ne nf ng bi translated">如果您正在编写涉及格式化字符串的代码——这似乎是显而易见的，但我想强调的是，这种方法比上面提到的其他方法更具可读性和简洁。因此，你应该使用它。</li></ul><p id="b25d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">一如既往，目标是让您的生活更简单，让您的代码更好。</p><p id="b104" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">下次见，伙计们！</p></div><div class="ab cl nv nw hx nx" role="separator"><span class="ny bw bk nz oa ob"/><span class="ny bw bk nz oa ob"/><span class="ny bw bk nz oa"/></div><div class="im in io ip iq"><p id="f702" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">想擅长Python？</strong> <a class="ae ky" href="https://witty-speaker-6901.ck.page/0977670a91" rel="noopener ugc nofollow" target="_blank"> <strong class="lb iu">获取独家，免费获取我简单易懂的攻略</strong> </a> <strong class="lb iu">。想在介质上无限阅读故事？用我下面的推荐链接注册！</strong></p><div class="oc od gp gr oe of"><a href="https://murtaza5152-ali.medium.com/?source=entity_driven_subscription-607fa603b7ce---------------------------------------" rel="noopener follow" target="_blank"><div class="og ab fo"><div class="oh ab oi cl cj oj"><h2 class="bd iu gy z fp ok fr fs ol fu fw is bi translated">穆尔塔扎阿里培养基</h2><div class="om l"><h3 class="bd b gy z fp ok fr fs ol fu fw dk translated">阅读媒介上穆尔塔扎·阿里的作品。华盛顿大学的博士生。对人机感兴趣…</h3></div><div class="on l"><p class="bd b dl z fp ok fr fs ol fu fw dk translated">murtaza5152-ali.medium.com</p></div></div><div class="oo l"><div class="op l oq or os oo ot ks of"/></div></div></a></div><p id="925a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><em class="np">我叫穆尔塔扎·阿里，是华盛顿大学研究人机交互的博士生。我喜欢写关于教育、编程、生活以及偶尔的随想。</em></p></div></div>    
</body>
</html>