# 工作流编排与数据编排——它们有什么不同吗？

> 原文：<https://towardsdatascience.com/workflow-orchestration-vs-data-orchestration-are-those-different-a661c46d2e88>

## 让我们消除这些术语的歧义，以便更好地理解工作流编排——用一个现实生活中的类比！

![](img/e2acee07d1fe86812020855f759ef152.png)

来自 [Pexels](https://www.pexels.com/photo/woman-receiving-the-package-from-the-deliveryman-5025636/?utm_content=attributionCopyText&utm_medium=referral&utm_source=pexels) 的 [Artem Podrez](https://www.pexels.com/@artempodrez?utm_content=attributionCopyText&utm_medium=referral&utm_source=pexels) 摄影

随着现代数据堆栈的兴起，业内许多工具开始将自己定位为“数据编排者”，而不是“工作流编排者”本文试图消除这些术语的歧义。我认为**数据编排**这个名字是一个容易混淆的简写术语，而**工作流编排**和**数据流自动化**更好地代表了现代数据堆栈的编排。

> **注:**当我在[府尹](http://prefect.io/)工作时，这篇文章反映了我的观点。把在我的博客上发表的任何东西(而不是在完美博客上发表的)视为不反映我雇主的个人观点。

```
**Table of contents:**· [What is workflow orchestration?](#3ef6)
· [What do people mean when they say “data orchestration”?](#a261)
· [Workflow orchestration — Explain Like I’m 5](#ff47)
  ∘ [Sequential, concurrent, and distributed workflow execution](#15c2)
  ∘ [Scale and graceful failure handling](#afe5)
  ∘ [Hybrid execution model](#3c18)
· [Why “workflow orchestration” is a less confusing term than “data orchestration”](#97b1) 
· [Conclusion](#7aa6)
```

# 什么是工作流编排？

工作流编排意味着以尊重**编排规则**和**业务逻辑**的方式管理你的**数据流**。工作流编排工具允许你将任何代码转换成一个工作流，你可以**安排**、**运行**、**观察**。

一个**好的**工作流编排工具将为您提供连接到现有数据堆栈的构建模块，并允许您:

*   **任务间传递数据**，
*   触发**特别**参数化运行[，](https://www.prefect.io/blog/how-to-make-your-data-pipelines-more-dynamic-using-parameters-in-prefect/)
*   分配自定义(复杂)**日程**，
*   **提醒**当出现故障时，
*   **重试**并从故障中恢复，
*   通过**缓存**避免昂贵的重新计算，
*   并且将节省您编写**防御代码**的时间，只是为了确保您的工作流步骤以正确的**顺序**运行，并确保您发现故障何时发生(**可见性**)。

简而言之，好的工作流软件消除了[负面工程](https://medium.com/the-prefect-blog/positive-and-negative-data-engineering-a02cb497583d)。

> 当你考虑好的工作流工具时，你应该考虑当事情出错时它们是如何工作的。工作流只有在事情失败的时候才有意思；他们有点像保险或代码的**风险管理** **。假设事情会出错——它们会出错——正确的工作流工具应该使处理那些“错误的事情”变得快速而简单，并指导您如何修复它们。— [耶利米·劳因，2020 年 5 月](https://medium.com/the-prefect-blog/your-code-will-fail-but-thats-ok-f0327a208dbe)**

# 人们说的“数据编排”是什么意思？

它们通常指的是接触数据的工作流节点的**编排**。任何与数据交互的工作流节点，无论是生成数据还是使用数据，都属于这一类别。

根据这个定义，“数据编排”是编排数据(或数据仓库)工作流的简写术语，但它仍然描述工作流编排或数据流自动化。

# 工作流程编排—像 5 岁小孩一样解释

假设工作流编排工具是您的个人交付服务:

*   每个**订单**(或购物车)反映了你的**工作流程，**
*   每个**交货**是一个**工作流运行，**
*   把东西放进购物车非常简单方便——你只需要增加几个装饰工，然后你就可以去参加比赛了。
*   在每个订单(或购物车)中，你可能有许多产品被打包进**箱子**——你的**任务**，
*   **盒子里的产品**可能有各种**口味、形式和形状，**它们反映了你放入购物车的东西——**你希望被编排成什么样的**以及**如何编排**，
*   **风格**可能反映了您的数据复制工作(例如 Airbyte)、数据转换(例如 dbt)、数据清理(例如 pandas)、ML 用例(例如 scikit-learn)等等。
*   你的箱子可能**如你所愿**一样小或一样大——最终是你的订单(你的工作流程设计)，
*   **你盒子里的产品**可能来自各个**厂商**，也就是你的数据工具，比如 dbt，Fivetran，你喜欢的 ML 框架，你定制的数据清理库，
*   **交付地址**可能是你的家庭地址(你的**数据仓库**)、你的度假地址(你的**数据仓库**)，也可能是朋友的地址(某个外部数据库、数据处理服务、微服务或应用)。

![](img/5b4a8e74b4cf6bc6e35b4f815e3cca70.png)

来自 [Pexels](https://www.pexels.com/photo/city-road-traffic-man-4391486/?utm_content=attributionCopyText&utm_medium=referral&utm_source=pexels) 的 [Norma Mortenson](https://www.pexels.com/@norma-mortenson?utm_content=attributionCopyText&utm_medium=referral&utm_source=pexels) 的照片

## 顺序、并发和分布式工作流执行

按照交付服务的类比，在编排中，您可以:

*   决定你是想让你的订单一次交付还是按顺序交付——你的任务的执行顺序，
*   选择您的**交付类型** —您可以选择标准的(*顺序执行*)或使用特殊分布式服务的快速交付，例如 **Dask** 、 **Ray** ( *想象多辆交付卡车*)，或者甚至使用**并发**和**异步** ( *一个更快更高效的单一交付程序，可以更好地切换上下文*
*   确定你的订单应该如何包装——你可以选择**打包**到一个**子流程**、一个 **Docker** 容器、 **Kubernetes** 作业或者一个 ECS 任务中。

**工作流程编排**将负责交付，即**执行**。它将确保您的产品按照预期得到**包装**，按照正确的**时间表**得到**运输**，并且所有箱子都有正确的交付类型——一些包裹需要通过快递快速交付，而其他的可以等待并按顺序执行。

## 规模和优雅的故障处理

一个好的交付(编排)服务**的伸缩性**非常好。你可以让**的多个交付**安排在同一时间，潜在的**数千辆卡车**(甚至货船车队)**数百万个包裹**，它仍然会让你对每个包裹的交付状态有细粒度的**可见性**。

这种调度服务是**异步**和**高度可用**的，以保证即使在一些供应商生病或一些卡车抛锚的情况下，您的订单也能发货。交付过程中可能会出现许多问题:

*   有些**盒**可能会损坏**并可能需要退回，即**重试**或**重启**，**
*   整个交货可能需要**重新安排**，因为那时你不在家。

## 混合执行模型

好的**送货服务**也会尊重你的**隐私**并纯粹基于元数据运作，比如你的送货地址、送货类型、包装形式等。然后它负责**传输**和执行(*数据流*)，但是它不能 ***也不应该*打开盒子** **去检查** ( *你的数据*)。

# 为什么“工作流编排”比“数据编排”更容易混淆

一个好的工作流程编排工具(*您的交付服务*)允许您挑选您的产品，将它们放入盒子中，并根据您的意愿定制您的订单，但最终，它负责**数据移动** ( *交付、运输、数据流、执行*)，而不是关于那些盒子中的实际产品(*您的数据*)。因此，术语“数据编排”是一个容易混淆的简写，缺少描述数据在系统中流动时的实际移动的词语。**数据流**编排、工作**流程**编排、数据**运动**编排、数据**处理**编排、数据**传输**编排——所有这些都比速记术语“**数据编排**”清晰得多。

工作流编排是关于**数据流**和确保你可以**通过各种故障处理机制依赖它的执行**。它可以让你看到交付花了多长时间。它可以为您提供所有货件更新(您的工作流程执行日志)。它可以告诉您一个箱子是否被成功地运送到最终收件人，但它不能直接打开箱子检查里面产品的品牌、质量和产地。

借用[这篇博客文章](https://medium.com/the-prefect-blog/your-code-will-fail-but-thats-ok-f0327a208dbe)中的比喻，编排是关于**箭头**的，这些箭头表示不同的盒子(任务)在执行时的转换，而不是关于**盒子**本身(你的数据)。它应该保证您的流程和任务在正确的时间以正确的顺序和正确的并行性运行。它应该防止错误和失败，帮助您从错误和失败中恢复，并正确解释执行状态。

# 结论

本文旨在消除这些术语的歧义，并让您对什么是工作流编排有所了解。如果你还有任何问题或者想进一步讨论这个话题，你可以加入提督社区 Slack:[prefect.io/slack](http://prefect.io/slack)。

感谢阅读！