<html>
<head>
<title>Methods for inferring Causality</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">推断因果关系的方法</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/methods-for-inferring-causality-52e4144f6865#2022-01-25">https://towardsdatascience.com/methods-for-inferring-causality-52e4144f6865#2022-01-25</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""><h1 id="847d" class="pw-post-title io ip iq bd ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm bi translated">推断因果关系的方法</h1></div><div class=""><h2 id="0232" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">匹配，倾向加权，双重稳健最大似然，回归不连续设计</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/7b821669497d599c01e5ce1ffc976a8d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*a-nO9m_c8GiviAhQ"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">在<a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上由<a class="ae kv" href="https://unsplash.com/@austindistel?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Austin Distel </a>拍摄的照片</p></figure><p id="2199" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在我们之前的文章<a class="ae kv" rel="noopener" target="_blank" href="/getting-started-with-causal-inference-5cb61b707740">第1部分:因果推理入门</a>中，我们介绍了因果推理的基础知识，并对<strong class="ky ir">回归</strong>给予了很多关注。我们还讨论了回归不是因果估计设计中关闭后门的唯一方法。在这篇文章中，我们将讨论一些其他方法，都旨在实现同样的事情，即，使治疗组和对照组在所有方面都相似，除了在治疗方面。</p><div class="ls lt gp gr lu lv"><a rel="noopener follow" target="_blank" href="/getting-started-with-causal-inference-5cb61b707740"><div class="lw ab fo"><div class="lx ab ly cl cj lz"><h2 class="bd ir gy z fp ma fr fs mb fu fw ip bi translated">因果推理入门</h2><div class="mc l"><h3 class="bd b gy z fp ma fr fs mb fu fw dk translated">超越“相关性不是因果关系”,理解“为什么”</h3></div><div class="md l"><p class="bd b dl z fp ma fr fs mb fu fw dk translated">towardsdatascience.com</p></div></div><div class="me l"><div class="mf l mg mh mi me mj kp lv"/></div></div></a></div><h1 id="d70f" class="mk ml iq bd mm mn mo mp mq mr ms mt mu jw mv jx mw jz mx ka my kc mz kd na nb bi translated">相称的</h1><p id="75ed" class="pw-post-body-paragraph kw kx iq ky b kz nc jr lb lc nd ju le lf ne lh li lj nf ll lm ln ng lp lq lr ij bi translated">匹配的目的是通过为每个治疗单位找到一个(或多个)具有相似可观察特征的非治疗单位，并抵消协变量，从而减少观察数据研究中估计治疗效果的偏倚。如果存在一些影响治疗和结果的混杂因素，比如年龄，从而使治疗组和对照组不可比，我们可以通过将每个治疗单位与对照组的相似单位进行匹配来使它们具有可比性。在我们的例子中，来自治疗组和对照组的年龄相似的人被放在一起比较，最终结果是所有这些的平均值。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nh"><img src="../Images/bc64363a94a873da19e9e07916215b3c.png" data-original-src="https://miro.medium.com/v2/resize:fit:898/format:webp/1*2ISh4pGoLP8oHl1XVBBMWA.png"/></div></figure><p id="6469" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如上计算用于匹配的ATE，其中Yj(i)是来自与治疗组最相似的对照组的样本。2Ti -1用于双向匹配。</p><p id="6a45" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这有助于消除一些偏差，但如果匹配的治疗和控制单位的Y₀差异不为0呢？可能会发生这样的情况，因为匹配的差异，我们仍然有偏见。幸运的是，在老朋友的帮助下，我们有办法进一步改善我们已经开始的减少偏见之旅。<strong class="ky ir">再一次回归拯救</strong>！</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ni"><img src="../Images/0f35e6049dabe9a8fa61c9df2df00526.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9SvPOb8HJUGniM-Ki0-DHw.png"/></div></div></figure><p id="1c76" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">₀(X i)是未经处理的处理单位I的结果值，即这是处理单位的Y₀。</p><p id="69f2" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">₀(X j(i))是对照单位j与处理单位I匹配的结果，即这是对照单位与处理单位匹配的Y₀。因此，在上面的ATE方程中，我们确保处理过的和匹配的单位的Y₀不会对ATE产生影响。</p><p id="07b0" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">假设我们想要测量药物治疗对恢复天数的影响，但是在我们的实验设计中，我们有像患者的年龄、严重程度和性别这样的混杂因素。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nj"><img src="../Images/b15c9af008855a7059ad918cd8eec3ce.png" data-original-src="https://miro.medium.com/v2/resize:fit:1100/format:webp/1*0Bk92z08ll9mmEQFvYXLRg.png"/></div></figure><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nk nl l"/></div></figure><p id="a60a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">ATE = 16 . 48667 . 48868688667</p><p id="2763" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果我们直接计算ate而不添加任何对照，看起来药物治疗增加了恢复天数，但我们知道由于混杂，治疗组和对照组没有可比性。让我们看看，如果我们使用KNN匹配处理和控制单元，并使用回归进一步减少偏差<strong class="ky ir">(偏差校正)</strong>，会发生什么，如上所示</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nk nl l"/></div></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nm"><img src="../Images/cdd06a55e2fb1849839182693d204dc5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*DRFuB5Wk3mJQIye_bo0Xhw.png"/></div></div></figure><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nk nl l"/></div></figure><p id="4c2a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">ATE = 7.62666061414365</p><p id="2c31" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">瞧啊。这肯定更有意义。一旦我们通过匹配控制了混杂因素，由于药物的原因，恢复期减少了7天。</p><p id="6533" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir">倾向得分分层:</strong>我们可以根据<strong class="ky ir">倾向</strong>得分进行匹配，而不是直接或使用一些距离度量来匹配协变量，这是给定所有协变量的条件治疗概率<strong class="ky ir"> P(T|X) </strong>，表示为P(x)。<strong class="ky ir">分层</strong>使用倾向评分的分位数对个体进行细分，在每个层内计算治疗效果，并使用权重(每个层中单元的比例)进行组合，以获得最终估计值。已经表明，分成5层可以减少高达90%的偏差。</p><p id="8513" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">让我们使用微软<strong class="ky ir"/>的<strong class="ky ir"> dowhy库来实现这一点。</strong></p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nk nl l"/></div></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="ab gu cl nn"><img src="../Images/29fe3d4a72a9b854d4e724781d6d60e9.png" data-original-src="https://miro.medium.com/v2/format:webp/1*HDyNf_OUG9uxCpJxvGKsGg.png"/></div></figure><p id="b9d3" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">当有许多控制单元要与治疗单元匹配时，匹配效果很好。在倾向术语中，它被称为共同支持，治疗和未治疗之间的倾向分布应该有一个可靠的估计良好的重叠。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi no"><img src="../Images/2475e79218f1f999f1b383a90506e177.png" data-original-src="https://miro.medium.com/v2/resize:fit:1114/format:webp/1*FyqDSQlVtgcNz_NIzTJV8A.png"/></div></figure><h1 id="b927" class="mk ml iq bd mm mn mo mp mq mr ms mt mu jw mv jx mw jz mx ka my kc mz kd na nb bi translated">倾向得分加权</h1><p id="3afe" class="pw-post-body-paragraph kw kx iq ky b kz nc jr lb lc nd ju le lf ne lh li lj nf ll lm ln ng lp lq lr ij bi translated">我们在上面讨论过，我们可以根据称为<strong class="ky ir">倾向得分</strong>的单个值来决定条件，而不是根据协变量来决定条件，这是在给定协变量P(T|X)的情况下获得治疗T的条件概率，因此</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi np"><img src="../Images/8183084a747ce7c0dce5bc67614a3bad.png" data-original-src="https://miro.medium.com/v2/resize:fit:456/format:webp/1*_x7rjff7-_3xKT9cNSjePA.png"/></div></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nq"><img src="../Images/e1f8eaea68d38e12efbec5efc9d624b3.png" data-original-src="https://miro.medium.com/v2/resize:fit:408/format:webp/1*shPbRCDMnRALvu_IhSceng.png"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">倾向得分(作者图片)</p></figure><p id="1f45" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">x(混杂因素)通过函数P(x)影响T(治疗),因此对P(x)的控制间接控制了x。我们可以使用该倾向得分进行匹配，也可以在线性回归中直接使用该倾向得分来控制偏倚，而不是根据所有混杂因素对其进行调节。我们现在将使用P(x)作为缩放参数，这种方法被称为<strong class="ky ir">治疗加权的逆概率(IPTW) </strong></p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nr"><img src="../Images/8d259946614eab7c740161f3c4d2c775.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wSD3WTN5blz4aMmb0l0suw.png"/></div></div></figure><p id="b02e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">对X进行简化和积分，我们得到。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi ns"><img src="../Images/d917ed89a03ba19c89a1e4c3985ecb85.png" data-original-src="https://miro.medium.com/v2/resize:fit:486/format:webp/1*ifoLpLzCnPobuWogfwoa7A.png"/></div></figure><p id="a523" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">根据上面的等式，对于治疗组，我们通过倾向的倒数来衡量结果。当实际上在治疗组中时，对于具有低治疗概率(看起来未治疗)的人给予较高的权重，对于对照组反之亦然。这就产生了一个群体，其中每个单位都由倾向的倒数来衡量，从而控制了倾向所依赖的所有X。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nt"><img src="../Images/7b5c5cbd260442b3c139806b1b7a2112.png" data-original-src="https://miro.medium.com/v2/resize:fit:1146/format:webp/1*JSa-ujvX47AknbHQ7-MWAw.png"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">拉隆德数据集</p></figure><p id="60d8" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们将使用Lalonde数据集来发现治疗对78年实际收入的影响，首先通过使用回归并将所有混杂因素包括在回归方程中，然后通过使用回归方程中的倾向得分而不是混杂变量，最后我们将使用DoWhy包中的倾向得分加权方法。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nk nl l"/></div></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nu"><img src="../Images/290784690d26103847a2c724c9bfef96.png" data-original-src="https://miro.medium.com/v2/resize:fit:1268/format:webp/1*RJwYBgLBfy7kwCrGL4Dt9g.png"/></div></figure><p id="d074" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">用所有混杂变量回归后，ATE约为1671。现在让我们使用逻辑回归得到倾向得分，并在线性回归中使用，控制P(x)而不是x。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nk nl l"/></div></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nv"><img src="../Images/6e4b15cc3f6c2a6b2a75b72c9940913b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1384/format:webp/1*CmOFIRy_Wwo_zppXTcagpA.png"/></div></figure><p id="945c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir">Dow why</strong>包中的倾向得分加权函数</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nk nl l"/></div></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nw"><img src="../Images/8e94d21269ec07d8f9d31b7383eafeb2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1032/format:webp/1*VPDQBdcuhPBplEAEv1IUlw.png"/></div></figure><h2 id="d715" class="nx ml iq bd mm ny nz dn mq oa ob dp mu lf oc od mw lj oe of my ln og oh na oi bi translated">关于DoWhy的附加注释</h2><p id="ec29" class="pw-post-body-paragraph kw kx iq ky b kz nc jr lb lc nd ju le lf ne lh li lj nf ll lm ln ng lp lq lr ij bi translated">DoWhy软件包为我们提供了一些让我们的结果更加可信的方法，叫做<strong class="ky ir">反驳</strong>方法。让我们用上面的例子来理解这一点。</p><p id="5465" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir">随机共因反驳器</strong>:将随机生成的协变量添加到数据中，并重新运行分析，以查看因果估计值是否改变。因果估计不会因为一个随机变量而改变太多。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nk nl l"/></div></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi oj"><img src="../Images/08d430b700169241ce336b2772d73b77.png" data-original-src="https://miro.medium.com/v2/resize:fit:852/format:webp/1*yFbN3-PrJ6d5eumt_Z8pyw.png"/></div></figure><p id="1ec4" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir">安慰剂治疗反驳者</strong>:随机分配任何协变量作为治疗。因果估计应该趋向于零。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nk nl l"/></div></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi ok"><img src="../Images/43512bd05d4c357f5a469682f74abdc8.png" data-original-src="https://miro.medium.com/v2/resize:fit:920/format:webp/1*FZqf-aAD2vDm7JnVTxWP0Q.png"/></div></figure><p id="588e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir">数据子集反驳者:</strong>类似于交叉验证，如果我们的因果估计在子集之间变化，它会创建数据和测量的子集。我们的估计应该不会有太大的变化。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nk nl l"/></div></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi ol"><img src="../Images/d345c5fbe94421408b53486b50b51559.png" data-original-src="https://miro.medium.com/v2/resize:fit:788/format:webp/1*i5LHJs_BSGooGmXVP1xNAA.png"/></div></figure><blockquote class="om on oo"><p id="22c4" class="kw kx op ky b kz la jr lb lc ld ju le oq lg lh li or lk ll lm os lo lp lq lr ij bi translated">通过这些反驳测试并不意味着我们的因果估计是正确的。它只是用来为我们的因果估计提供更多的信心。记住，我们在上一篇文章中讨论过，观察数据的因果推断需要内部有效性，我们必须确保我们已经控制了导致偏差的变量。这不同于预测模型所需的外部有效性，我们使用训练测试分割来实现预测模型，以获得可靠的预测(非因果估计)</p></blockquote><p id="201a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果您想了解更多关于DoWhy包的信息，参考资料中提供了文档的链接。继续前进。</p><h1 id="b27b" class="mk ml iq bd mm mn mo mp mq mr ms mt mu jw mv jx mw jz mx ka my kc mz kd na nb bi translated">双重稳健估计</h1><p id="c87d" class="pw-post-body-paragraph kw kx iq ky b kz nc jr lb lc nd ju le lf ne lh li lj nf ll lm ln ng lp lq lr ij bi translated">我们使用了回归模型和基于倾向评分的方法来控制混杂因素，但也有一种方法可以同时使用这两种方法来确保我们的因果估计更加稳健。它被称为<strong class="ky ir">双重稳健估计。</strong></p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ot"><img src="../Images/5422795806fe450949b0dc24225b2579.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*45H37x1tg42PG8JjuDUC0w.png"/></div></div></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ou"><img src="../Images/c6284f4267c19a85d073c53d6de78bb8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Ts4lcyI6nvJTOT_F-b5F7g.png"/></div></div></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi ov"><img src="../Images/fee7d308b100efff620baf728393ee5c.png" data-original-src="https://miro.medium.com/v2/resize:fit:700/format:webp/1*q1E4IAswEG0gYoWZkBdVeg.png"/></div></figure><p id="5ba1" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这里先看第一部分，It 1 (X)是正确的，P(x)是错误估计的，那么E[Ti (Yi - 1 (Xi))]=0，因为Ti只选取治疗过的病例，对于那些(Yi - 1 (Xi))非常接近0的病例。所以在1 (X)中是正确的，消除了P(x)是正确的必要性。重新排列这些术语，我们还可以证明，当P(x)正确时，我们不需要(X)是正确的。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nk nl l"/></div></figure><p id="f16d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">因果估计= 1619.51</p><h1 id="beec" class="mk ml iq bd mm mn mo mp mq mr ms mt mu jw mv jx mw jz mx ka my kc mz kd na nb bi translated">回归不连续设计</h1><p id="073e" class="pw-post-body-paragraph kw kx iq ky b kz nc jr lb lc nd ju le lf ne lh li lj nf ll lm ln ng lp lq lr ij bi translated">只要有明确的阈值将治疗与对照分开，就可以使用回归不连续设计。基于阈值，我们可以通过将刚好低于阈值的人群识别为对照组，将刚好高于阈值的人群识别为治疗组来减少偏倚。例如，在移动游戏中，当分数导致级别改变时，刚好低于某个分数的玩家可以被识别为控制，而刚好高于该分数的玩家可以被识别为治疗。我们可以确定水平对其他技能的影响，因为刚好低于和高于阈值的人可能具有相似的技能。</p><p id="4151" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">实施RDD非常简单，只需创建一个虚拟变量，其值低于阈值为0，高于阈值为1。让我们实现它来研究游戏中等级变化对参与度的影响，我们的阈值是100分(等级变化)。该数据包含游戏分数和参与度分数。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi ow"><img src="../Images/450334c2af41811eb8008964ee21e09b.png" data-original-src="https://miro.medium.com/v2/resize:fit:572/format:webp/1*6Wy4qKshtOhcbwwOaw0Kfw.png"/></div></figure><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nk nl l"/></div></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi ox"><img src="../Images/d78acbe738b327f804b4483741b79073.png" data-original-src="https://miro.medium.com/v2/resize:fit:1224/format:webp/1*a-6qjWY8AM11whRBsKEr_w.png"/></div></figure><p id="7c28" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">参与度增加了7.66个单位，等级变化为100分。由于我们对阈值处的效果更感兴趣，因此与远离阈值的数据点相比，更好地拟合阈值周围的数据点是有意义的。我们可以使用线性回归中的权重来做到这一点。我们将使用下面的内核作为线性回归模型的权重</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi oy"><img src="../Images/67dcd95f011844ed64fdc87924ece9f0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1250/format:webp/1*tfGzt04nNfPa8KTbV2BfDA.png"/></div></figure><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nk nl l"/></div></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi oz"><img src="../Images/a30b2c5ec9e2a9d0d617a72c74e17413.png" data-original-src="https://miro.medium.com/v2/resize:fit:1232/format:webp/1*jBuRvQmYUiPtKYpqJ1rbLg.png"/></div></figure><p id="8948" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">可以看出，通过使用在阈值附近具有较高权重的加权线性回归，水平变化的影响增加到8.3。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi pa"><img src="../Images/00f882fc52d221a9aeeed8f6f016187d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1304/format:webp/1*Wv91Jr_ySwWuZ8HF4RXzrQ.png"/></div></figure></div><div class="ab cl pb pc hu pd" role="separator"><span class="pe bw bk pf pg ph"/><span class="pe bw bk pf pg ph"/><span class="pe bw bk pf pg"/></div><div class="ij ik il im in"><p id="deb3" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这里和上一篇文章中讨论的所有这些方法都是有用的，但不是完全可靠的。我们可能无法完全消除偏倚，因为总有一些无法观察到的混杂因素影响我们的设计，但通过使用不同的方法控制混杂因素来减少一些偏倚是可能的，而且肯定比预测性推断更可靠。因果洞察力可以引发A/B测试，这是因果推理的黄金标准。</p><p id="bce7" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在上一篇文章中，我们介绍了因果推断的基础，在本文中，我们介绍了获得因果估计的方法。这些文章都旨在获得平均的治疗效果，但更好的是在治疗单元上获得更个性化的治疗效果，也称为异质治疗效果。例如，如果平均治疗效果告诉我们是否应该推出电子邮件营销活动，而异质治疗效果告诉我们应该将哪些客户作为营销活动的目标，以提高我们的投资回报率。在我们的下一篇文章中，我们将讨论异质性治疗效果和评估方法。</p></div><div class="ab cl pb pc hu pd" role="separator"><span class="pe bw bk pf pg ph"/><span class="pe bw bk pf pg ph"/><span class="pe bw bk pf pg"/></div><div class="ij ik il im in"><p id="fe64" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果你喜欢这些文章，不要忘了慷慨鼓掌，订阅我的下一篇文章发表时会收到通知。</p><h1 id="1df3" class="mk ml iq bd mm mn mo mp mq mr ms mt mu jw mv jx mw jz mx ka my kc mz kd na nb bi translated">参考</h1><ul class=""><li id="fd93" class="pi pj iq ky b kz nc lc nd lf pk lj pl ln pm lr pn po pp pq bi translated">【https://matheusfacure.github.io/python-causality-handbook/ T2】号</li><li id="3612" class="pi pj iq ky b kz pr lc ps lf pt lj pu ln pv lr pn po pp pq bi translated"><a class="ae kv" href="https://www.bradyneal.com/causal-inference-course" rel="noopener ugc nofollow" target="_blank">https://www.bradyneal.com/causal-inference-course</a></li><li id="064a" class="pi pj iq ky b kz pr lc ps lf pt lj pu ln pv lr pn po pp pq bi translated">https://theeffectbook.net/<a class="ae kv" href="https://theeffectbook.net/" rel="noopener ugc nofollow" target="_blank"/></li><li id="23a0" class="pi pj iq ky b kz pr lc ps lf pt lj pu ln pv lr pn po pp pq bi translated">【https://www.aeaweb.org/articles?id=10.1257/app.1.1.164 T4】</li><li id="5a26" class="pi pj iq ky b kz pr lc ps lf pt lj pu ln pv lr pn po pp pq bi translated"><a class="ae kv" href="https://academic.oup.com/ejcts/article/53/6/1112/4978231" rel="noopener ugc nofollow" target="_blank">https://academic.oup.com/ejcts/article/53/6/1112/4978231</a></li><li id="4067" class="pi pj iq ky b kz pr lc ps lf pt lj pu ln pv lr pn po pp pq bi translated"><a class="ae kv" href="https://www.masteringmetrics.com/" rel="noopener ugc nofollow" target="_blank">https://www.masteringmetrics.com/</a></li><li id="7151" class="pi pj iq ky b kz pr lc ps lf pt lj pu ln pv lr pn po pp pq bi translated"><a class="ae kv" href="https://www.amazon.in/Applied-Data-Science-Transforming-Actionable/dp/0135258529" rel="noopener ugc nofollow" target="_blank">https://www . Amazon . in/Applied-Data-Science-Transforming-Actionable/DP/0135258529</a></li><li id="08fb" class="pi pj iq ky b kz pr lc ps lf pt lj pu ln pv lr pn po pp pq bi translated"><a class="ae kv" href="https://mixtape.scunning.com/" rel="noopener ugc nofollow" target="_blank">https://mixtape.scunning.com/</a></li><li id="a772" class="pi pj iq ky b kz pr lc ps lf pt lj pu ln pv lr pn po pp pq bi translated"><a class="ae kv" href="https://microsoft.github.io/dowhy/" rel="noopener ugc nofollow" target="_blank">https://microsoft.github.io/dowhy/</a></li></ul></div></div>    
</body>
</html>