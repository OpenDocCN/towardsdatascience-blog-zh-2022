<html>
<head>
<title>Different Ways To Run Bash Scripts In Your Python File</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在Python文件中运行Bash脚本的不同方式</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/different-ways-to-run-bash-scripts-in-your-python-file-8aeb721bc3d1#2022-01-17">https://towardsdatascience.com/different-ways-to-run-bash-scripts-in-your-python-file-8aeb721bc3d1#2022-01-17</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""><h1 id="a65b" class="pw-post-title ir is it bd iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp bi translated">在Python文件中运行Bash脚本的不同方式</h1></div><div class=""><h2 id="8694" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">利用子流程、OS、Glob等</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/9026967d6519dc205a52f7678decf51a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*ggrL6c64gXmp8iaO"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">图片来自<a class="ae ky" href="https://unsplash.com/photos/qDG7XKJLKbs" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>由<a class="ae ky" href="https://unsplash.com/@lazycreekimages" rel="noopener ugc nofollow" target="_blank">T3】Michael DziedzicT5】</a></p></figure><p id="d7ad" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">对于数据科学家来说，理解<a class="ae ky" rel="noopener" target="_blank" href="/why-the-cli-is-essential-for-data-scientists-cd7016f86d49"> Shell脚本</a>的基础知识至关重要。通过命令行(CLI)的强大功能，许多流程可以实现自动化和简化。有时，当您开始构建更复杂的模块/类时，您会发现自己需要将Shell命令合并到Python代码中。</p><p id="289a" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">幸运的是，我们有几个Python模块可以让它变得非常简单。我们将主要关注<a class="ae ky" href="https://docs.python.org/3/library/subprocess.html" rel="noopener ugc nofollow" target="_blank">子进程</a>、<a class="ae ky" href="https://docs.python.org/3/library/os.html" rel="noopener ugc nofollow" target="_blank">操作系统</a>和<a class="ae ky" href="https://docs.python.org/3/library/glob.html" rel="noopener ugc nofollow" target="_blank"> glob </a>模块。他们每个人都有自己的额外津贴，我只是想给一个如何利用他们的快速概述。</p><h1 id="5fe2" class="lw lx it bd ly lz ma mb mc md me mf mg jz mh ka mi kc mj kd mk kf ml kg mm mn bi translated">子过程</h1><p id="6013" class="pw-post-body-paragraph la lb it lc b ld mo ju lf lg mp jx li lj mq ll lm ln mr lp lq lr ms lt lu lv im bi translated">正如他们的文档所示，这个模块有三个主要方面。</p><ol class=""><li id="2986" class="mt mu it lc b ld le lg lh lj mv ln mw lr mx lv my mz na nb bi translated">可以产生新的过程</li><li id="3980" class="mt mu it lc b ld nc lg nd lj ne ln nf lr ng lv my mz na nb bi translated">连接到它们的输入/输出/错误管道</li><li id="ed19" class="mt mu it lc b ld nc lg nd lj ne ln nf lr ng lv my mz na nb bi translated">获取他们的返回代码</li></ol><p id="7ba4" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">让我们直接进入主题，通过几个简单的片段快速了解一下如何执行Shell命令。让我们先导入我们的模块。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nh ni l"/></div></figure><h2 id="45a3" class="nj lx it bd ly nk nl dn mc nm nn dp mg lj no np mi ln nq nr mk lr ns nt mm nu bi translated">制作目录</h2><p id="9323" class="pw-post-body-paragraph la lb it lc b ld mo ju lf lg mp jx li lj mq ll lm ln mr lp lq lr ms lt lu lv im bi translated">让我们首先使用<a class="ae ky" href="https://phoenixnap.com/kb/create-directory-linux-mkdir-command" rel="noopener ugc nofollow" target="_blank"> mkdir </a> Linux命令创建一个名为“code”的目录。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nh ni l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">创建一个名为code的目录</p></figure><p id="6553" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">我们现在可以看到在我们的文件结构中创建的目录。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nv"><img src="../Images/abf241e551d357673ad9201c8c0c0276.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*nc2n4xjOvXHJ8BwByVLCTw.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">目录已创建(作者截图)</p></figure><h2 id="d21e" class="nj lx it bd ly nk nl dn mc nm nn dp mg lj no np mi ln nq nr mk lr ns nt mm nu bi translated">建立档案</h2><p id="f99b" class="pw-post-body-paragraph la lb it lc b ld mo ju lf lg mp jx li lj mq ll lm ln mr lp lq lr ms lt lu lv im bi translated">让我们继续尝试一些更基本的Linux命令。让我们创建一个文件，稍后我们可以将它移动到我们的目录中。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nh ni l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">建立档案</p></figure><p id="2e16" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">我们现在可以在同一个目录中看到我们的Python文件。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nw"><img src="../Images/fb49e7ff6b53591030f7a9536832f2dd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*S8lG26EN1q9Zh-EKKKmJCA.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者截图</p></figure><p id="2fc9" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">您可以继续使用这个<a class="ae ky" href="https://www.kite.com/python/docs/subprocess.call" rel="noopener ugc nofollow" target="_blank"> <strong class="lc iu">调用方法</strong> </a>来执行您选择的不同命令。</p><p id="8857" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">要生成一个新流程，请检查<a class="ae ky" href="https://docs.python.org/3/library/subprocess.html#subprocess.Popen" rel="noopener ugc nofollow" target="_blank">子流程。Popen </a>方法。当您开始处理必须执行的更复杂的命令和程序时，这将特别有用。Subprocess是一个功能强大的库，具有最新的特性，查看他们的文档<a class="ae ky" href="https://docs.python.org/3/library/subprocess.html" rel="noopener ugc nofollow" target="_blank">这里</a>。</p><h1 id="33a4" class="lw lx it bd ly lz ma mb mc md me mf mg jz mh ka mi kc mj kd mk kf ml kg mm mn bi translated">操作系统（Operating System）</h1><p id="8ba5" class="pw-post-body-paragraph la lb it lc b ld mo ju lf lg mp jx li lj mq ll lm ln mr lp lq lr ms lt lu lv im bi translated">顾名思义，<a class="ae ky" href="https://docs.python.org/3/library/os.html" rel="noopener ugc nofollow" target="_blank">模块</a>可以用来执行许多操作系统任务。它涵盖了子流程模块提供的许多相同功能。让我们重复上面对子流程所做的相同任务。</p><h2 id="d38b" class="nj lx it bd ly nk nl dn mc nm nn dp mg lj no np mi ln nq nr mk lr ns nt mm nu bi translated">创建目录</h2><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nh ni l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">使用操作系统模块创建目录</p></figure><p id="e807" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">现在，您应该能够看到另一个目录被创建。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nx"><img src="../Images/f4ce2033fd81edfcfb50ec5b46672736.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gKhlHJHiw4tTEzoLA3YhRA.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者截图)</p></figure><p id="0357" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">假设我们想要列出或解析当前路径的所有文件和目录，您可以使用下面的命令来完成。</p><h2 id="fe26" class="nj lx it bd ly nk nl dn mc nm nn dp mg lj no np mi ln nq nr mk lr ns nt mm nu bi translated">获取文件路径</h2><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nh ni l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">使用操作系统获取路径</p></figure><p id="a593" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">我们可以将该路径传递给<a class="ae ky" href="https://www.tutorialspoint.com/python/os_listdir.htm" rel="noopener ugc nofollow" target="_blank"> listdir </a>命令，该命令将返回该目录中的所有目录和文件。</p><h2 id="3673" class="nj lx it bd ly nk nl dn mc nm nn dp mg lj no np mi ln nq nr mk lr ns nt mm nu bi translated">列出文件/目录</h2><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nh ni l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">获取路径中的文件/目录</p></figure><p id="fbe4" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">我们应该会看到我们在当前目录中创建的所有目录和文件。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ny"><img src="../Images/9fa990e7d6faaca33192b76a7cda5034.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*nU25qeGsPtCY45tckJsWKA.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者截图</p></figure><p id="2dbc" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">使用操作系统模块，您可以处理大量文件来执行您可能需要执行的任何标准操作或解析。</p><h1 id="b694" class="lw lx it bd ly lz ma mb mc md me mf mg jz mh ka mi kc mj kd mk kf ml kg mm mn bi translated">一团</h1><p id="c8ee" class="pw-post-body-paragraph la lb it lc b ld mo ju lf lg mp jx li lj mq ll lm ln mr lp lq lr ms lt lu lv im bi translated">具体来说，<a class="ae ky" href="https://docs.python.org/3/library/glob.html" rel="noopener ugc nofollow" target="_blank"> glob模块</a>可以真正用于文件名匹配。通常，您会希望解析具有特定模式或常见类型的文件。</p><p id="471f" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">让我们快速看一下如何列出我们目录中的所有Python文件。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nh ni l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">列出所有python文件</p></figure><p id="9d89" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">这应该会返回我们已经创建的两个Python文件。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nz"><img src="../Images/f12018bc04d494e3524d057a2c171adc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Hi0lE1WSnq2OwiP-pOmmPA.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者截图</p></figure><p id="ade3" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">随着您的用例变得越来越复杂，您可以搜索越来越复杂的模式，并加入正则表达式来过滤您的文件。这里有一篇关于TDS的优秀的<a class="ae ky" rel="noopener" target="_blank" href="/the-python-glob-module-47d82f4cbd2d">文章</a>，深入探讨了glob模块。</p><h1 id="f563" class="lw lx it bd ly lz ma mb mc md me mf mg jz mh ka mi kc mj kd mk kf ml kg mm mn bi translated">结论</h1><p id="9f7e" class="pw-post-body-paragraph la lb it lc b ld mo ju lf lg mp jx li lj mq ll lm ln mr lp lq lr ms lt lu lv im bi translated">通过使用这三个模块，甚至更多的模块，比如<a class="ae ky" href="https://docs.python.org/3/library/pathlib.html" rel="noopener ugc nofollow" target="_blank"> Pathlib </a>，您可以将Shell命令合并到您的Python脚本中。本文中的简单示例可能不会显示直接的用例，但是随着您对更深层次的代码库的深入研究，有必要与CLI进行交互。</p></div><div class="ab cl oa ob hx oc" role="separator"><span class="od bw bk oe of og"/><span class="od bw bk oe of og"/><span class="od bw bk oe of"/></div><div class="im in io ip iq"><p id="4013" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated"><em class="oh">如果你喜欢这篇文章，请在</em><a class="ae ky" href="https://www.linkedin.com/in/ram-vegiraju-81272b162/" rel="noopener ugc nofollow" target="_blank"><em class="oh">LinkedIn</em></a><em class="oh">上与我联系，并订阅我的媒体</em> <a class="ae ky" href="https://ram-vegiraju.medium.com/subscribe" rel="noopener"> <em class="oh">简讯</em> </a> <em class="oh">。如果你是新手，使用我的</em> <a class="ae ky" href="https://ram-vegiraju.medium.com/membership" rel="noopener"> <em class="oh">会员推荐</em> </a> <em class="oh">报名。</em></p></div></div>    
</body>
</html>