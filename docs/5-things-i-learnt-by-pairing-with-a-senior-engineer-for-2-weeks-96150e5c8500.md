# 我从与高级工程师合作中学到的五件事

> 原文：<https://towardsdatascience.com/5-things-i-learnt-by-pairing-with-a-senior-engineer-for-2-weeks-96150e5c8500>

![](img/59c7996e5a80867c8634bd0d06a51025.png)

由 [Unsplash](https://unsplash.com/s/photos/inspo?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText) 上的[微妙电影艺术](https://unsplash.com/@subtlecinematics?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText)拍摄的照片

TLDR；开始构建一个 API 来提供预测，一个高级数据工程师介入来协助一个新功能，我们结束了两个星期的合作来重构大部分代码库。以下是 5 个要点。

加入数据团队后，我的任务是启动一项新的服务，从我们基于内容的推荐模型返回预测。该团队的机器学习模型被捆绑在各种各样的 Juypter 笔记本上，这些笔记本是在项目的模型构建阶段创建的。为了支持在毫秒级响应时间内提供建议，并将其扩展到每秒 1000 个请求，很明显模型需要由一个专门构建的 API 来提供服务。

需求很明确，我对需要做的事情很有信心，所以我*开始工作* ***单干*** 构建 API 服务。抛开栈的技术细节，我选择了一个框架、验证库和测试包，并开始将它们连接在一起，以使我们的版本 1 工作。经过一点基础设施的争论，我得到了 API 服务模型的建议！检查检查✅ ✅

***嗯，我也是这么想的……***

这是我开始与高级工程师配对，为服务添加功能并修复一些 bug 的时间。

作为一名大三学生，带着一套不同的经验来到团队，很明显代码库中有一些元素需要*重构*，有人可能会称之为*清理*，实际上，这更像是*清理*！

当我们克服项目的缺点时，我有幸学习了一个高级数据工程师的思维过程。我也很幸运，这位工程师有耐心和精神空间来为项目重构的需要详细地完成每个决定——这就是我如何能够真正从经验中学习并收集这 5 个要点。

从一开始，我就稍微关心另一个人，一个前辈，密切地梳理我的代码库。但是我知道，为了让项目更上一层楼，为了让团队采用它，这是必须的。

## (1)了解您的需求并规划您的解决方案

为了构建在专业工作环境中有用的东西，代码是带着目的、清晰和意图编写的。这位高级工程师毫不犹豫地整合问题，以更好地了解需求。

磨砺细节和强调需求的重要性本身就是一种技能。我认识到，即使拥有大量的经验、资历、知识和技能，解决问题和挑战当权者的要求也不会感到羞耻。

一旦问题解决了，我们就把技术需求分解成票务系统中的逻辑工作块。这有助于我更详细地考虑解决方案以及任何依赖项。

这一过程有助于我们保持专注，并确保我们正在解决解决方案所需的紧迫需求。

## (2)不要低估基础设施知识

在不接触基础设施的情况下，您所能做的价值是有限的，尤其是对于一个尚未投入生产的年轻项目。

在重构过程中，我们深入探讨了以下技术:

*   **Terraform** 将我们的基础设施详细描述为符合安全需求和部署模式的代码
*   **Docker**标准化部署容器，设置运行时环境
*   为您的 CI/CD 管道编写部署和测试脚本

(您的设置可能会有所不同，但会有相似的工具)

高度了解这些工具可以让一个人在强大的开发实践中变得非常有效，并减少环境变化，例如在您的机器上测试，而不是在部署的环境中运行。

## (3)避免过度设计

在反思我的代码时，我不断陷入的常见陷阱是试图让我的设计更加理论化，包括；将数据结构规范化为高阶组件，并努力迎合未来的特性。这对我最初的设计是有害的，因为我过度工程化了服务的组件，这使得为版本 1 建立项目变得更加困难。当我提到**过度工程**时，我会想到:

*   建造你显然不需要的东西
*   创建抽象层，这些抽象层可能只在未来需要
*   以复杂性为代价引入更多概念

现在我很清楚**良好工程**和*过度工程*之间的区别，因为我们编写的新代码具有以下特征:

*   **清晰的关注点分离**
    一个函数/类/模块应该有一个清晰的目标。这可能意味着有更多的文件、函数和类，但是这些元素中的每一个都将更清楚它们服务于什么目标，并且更容易更改(和测试)
*   **简单接口**
    例如，当调用一个函数时，不是传入整个对象，而是只传入函数需要的参数。这可能意味着你要传入更多的参数，但是它允许你的代码更有目的性和目的性。这使得测试和维护变得更加容易

## (4)让您的测试更进一步

重构之后，很明显，项目受益于以下各方的共同努力:

1.  增加测试覆盖率——即使测试代码库的元素是困难和乏味的
2.  单元级测试——测试规模更小，更简洁
    (这与“创建清晰的关注点分离”齐头并进，因为每个元素都有自己清晰的目标。)
3.  Stub、mock、patch——为了恰当地对代码而不是其他元素进行单元测试，需要使用 stub 来隔离代码
4.  将您的测试镜像到您的代码中——这将有助于维护和确保适当的覆盖率

我看到了一个人可以测试多少东西，以及它所带来的价值。很明显，较高层次的测试会丢失较低层次的覆盖率，在较低层次会出现愚蠢的错误和难以追踪的小错误。通过将代码的较小部分镜像到我们的测试中，知道要测试什么以及代码的不同元素的边界变得非常容易。

## (5)命名你的元素几乎和你的架构一样重要

不管幸运与否，命名代码会带来很多假设。命名事物的方式不仅应该描述代码应该做什么，还应该描述如何使用它以及它将如何响应。

我发现我没有足够重视元素的命名。你不会总是一开始就得到正确的名字，所以有时故意创建一个像“rename _ this _ variable _ that _ returns _ x”这样的*临时名字*将允许你继续工作，然后迫使你返回一个更合适的名字，最好地描述它到底做什么。

你给你的元素起的名字是为了你未来的自己，也是为了你的队友。所以我的建议是，考虑一下你的队友会如何理解这些代码，即使你可能是唯一一个从事这项工作的人，这也会对你未来的自己有所帮助。为了对如何命名事物有一个感觉，看看团队创建的其他你欣赏的代码库，或者甚至用一些名字接近其他队友，看看你得到了什么样的初步反应。通常，如果您对名称不确定，可以进行改进😃。

如果你有兴趣了解更多关于这个堆栈的信息，或者以上的任何细节，**请在评论中告诉我**，我会尽我所能给你回复，无论是另一个帖子还是回复！