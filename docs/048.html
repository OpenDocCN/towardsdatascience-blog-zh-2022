<html>
<head>
<title>Python Package for Bayesian Testing</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用于贝叶斯测试的Python包</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/python-package-for-bayesian-a-b-testing-86ea3ff5c963#2022-01-03">https://towardsdatascience.com/python-package-for-bayesian-a-b-testing-86ea3ff5c963#2022-01-03</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""><h1 id="5b96" class="pw-post-title io ip iq bd ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm bi translated">用于贝叶斯测试的Python包</h1></div><div class=""><h2 id="f985" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">使用贝叶斯方法快速评估A/B(或A/B/C/…)测试</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/8ba925f26df4bf08f9709cb3835eeed8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*i4HAUtNnTtd6qXle"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">杰森·登特在<a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure><p id="e00d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我从事过几个A/B测试项目，我总是更喜欢使用贝叶斯方法和度量标准<strong class="ky ir"> <em class="ls">最佳概率</em> </strong>，而不是传统的频率方法和p值。这是我选择的两个主要原因:</p><ul class=""><li id="8a19" class="lt lu iq ky b kz la lc ld lf lv lj lw ln lx lr ly lz ma mb bi translated"><strong class="ky ir">可解释性</strong>:能够说出变体XYZ在测试中是所有变体中最好的概率非常方便，尤其是在向企业解释结果的时候。</li><li id="f7e9" class="lt lu iq ky b kz mc lc md lf me lj mf ln mg lr ly lz ma mb bi translated"><strong class="ky ir">可伸缩性</strong>:对多个变体测试进行最佳伸缩的概率。</li></ul><p id="fe70" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这篇文章不会关注A/B测试的细节。事实上，有许多文章(甚至在Medium或TDS上)是关于传统方法与贝叶斯方法的比较，也有许多文章是关于贝叶斯方法如何真正工作的细节。这些文章中有许多附有代码示例，展示了如何使用各自分布中的抽样来生成概率，但是大多数文章只关注二进制数据测试(例如转换)。</p><p id="eadd" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我总是缺少一些好的实现，特别是每会话收入数据，其中大多数会话都是非转换(收入为0)，但转换携带收入信息(例如，用户购物会话的收入)。</p><h1 id="bb92" class="mh mi iq bd mj mk ml mm mn mo mp mq mr jw ms jx mt jz mu ka mv kc mw kd mx my bi translated">Python包</h1><p id="adc0" class="pw-post-body-paragraph kw kx iq ky b kz mz jr lb lc na ju le lf nb lh li lj nc ll lm ln nd lp lq lr ij bi translated">我为贝叶斯A/B(或A/B/C/…)测试创建了一个小的<a class="ae kv" href="https://pypi.org/project/bayesian-testing/" rel="noopener ugc nofollow" target="_blank"> python包</a>，它可以用于上面提到的两种情况。要安装它，只需使用pip:</p><pre class="kg kh ki kj gt ne nf ng nh aw ni bi"><span id="4851" class="nj mi iq nf b gy nk nl l nm nn">pip install bayesian_testing</span></pre><h1 id="f62f" class="mh mi iq bd mj mk ml mm mn mo mp mq mr jw ms jx mt jz mu ka mv kc mw kd mx my bi translated">使用示例</h1><p id="a20e" class="pw-post-body-paragraph kw kx iq ky b kz mz jr lb lc na ju le lf nb lh li lj nc ll lm ln nd lp lq lr ij bi translated">为了这个例子，我用收入信息生成了一些转换数据。在GitHub <a class="ae kv" href="https://github.com/Matt52/bayesian-testing/blob/main/examples/data/session_data.csv" rel="noopener ugc nofollow" target="_blank">这里</a>有。它看起来是这样的:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi no"><img src="../Images/faf607530803530ae551f170e52ff622.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Wn2KL-ZdUSCBtH9q7E5Kbg.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">记录数和数据集头</p></figure><p id="b3a8" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">每行代表一个会话，如果会话被转换，则它还包含一个正收入值。以下是一些基本的统计数据:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi np"><img src="../Images/2d469e66265f4fefb0898b2febfd8bbe.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*SWm9Rfb5nEcFBEDgLuLOcQ.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">数据集统计</p></figure><p id="8cce" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">对于这个生成的数据，我们有最高转换率(5.3%)的变体<strong class="ky ir"> <em class="ls"> B </em> </strong>，而变体<strong class="ky ir"> <em class="ls"> C </em> </strong>每会话的收入最高(1.20)。在现实中，可能会发生这样的情况，一种变体转换得更好(可能是因为一些折扣)，而另一种变体仍然能够产生更多的收入。</p><p id="0653" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">使用该软件包，我们可以分别运行转换率和每次会话收入的测试。</p><h2 id="fa23" class="nj mi iq bd mj nq nr dn mn ns nt dp mr lf nu nv mt lj nw nx mv ln ny nz mx oa bi translated">1.转化试验</h2><p id="8e5f" class="pw-post-body-paragraph kw kx iq ky b kz mz jr lb lc na ju le lf nb lh li lj nc ll lm ln nd lp lq lr ij bi translated">要生成仅使用转换二进制数据(使用Beta分布)的最佳概率，我们可以使用<em class="ls"> BinaryDataTest </em>类:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ob"><img src="../Images/83df10fc2014d251085b5159773ad12d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*q9FuOYrm-BzP6dtlwftBuQ.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">转化试验</p></figure><p id="570e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">从转换的角度来看，变体<strong class="ky ir"> <em class="ls"> B </em> </strong>概率92.435%最好。</p><h2 id="0a85" class="nj mi iq bd mj nq nr dn mn ns nt dp mr lf nu nv mt lj nw nx mv ln ny nz mx oa bi translated">2.收入测试</h2><p id="ae06" class="pw-post-body-paragraph kw kx iq ky b kz mz jr lb lc na ju le lf nb lh li lj nc ll lm ln nd lp lq lr ij bi translated">对于收入数据，我们将使用Delta-Lognormal测试，该测试结合了使用Beta分布和对数正态分布的转换方法，用于非零收入值:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oc"><img src="../Images/61ba5b4c7a6735529c23a8fd49d905d5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*PWEj7IytzcRkBwhS93VvXw.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">收入测试</p></figure><p id="44c7" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">从每节收益的角度来看，变体<strong class="ky ir"> <em class="ls"> C </em> </strong>的概率最好，为96.85%。</p><h1 id="e1c7" class="mh mi iq bd mj mk ml mm mn mo mp mq mr jw ms jx mt jz mu ka mv kc mw kd mx my bi translated">评论</h1><ul class=""><li id="72c7" class="lt lu iq ky b kz mz lc na lf od lj oe ln of lr ly lz ma mb bi translated">查看<a class="ae kv" href="https://github.com/Matt52/bayesian-testing" rel="noopener ugc nofollow" target="_blank"> GitHub页面</a>查看包实现的细节。</li><li id="df9a" class="lt lu iq ky b kz mc lc md lf me lj mf ln mg lr ly lz ma mb bi translated">除了上面例子中的二进制和对数正态增量数据之外，这个包也有用于正态数据测试的类。</li><li id="1fd8" class="lt lu iq ky b kz mc lc md lf me lj mf ln mg lr ly lz ma mb bi translated">在所有情况下，也有可能在添加变量数据时使用参数来指定先验分布(默认设置为低信息先验)。</li><li id="5c67" class="lt lu iq ky b kz mc lc md lf me lj mf ln mg lr ly lz ma mb bi translated">变量数据也可以以聚合形式添加，这有时可能更实用(添加总计和转换，而不是二进制数据的向量)。为此，请看一下<code class="fe og oh oi nf b">add_variant_data_agg</code>方法。</li></ul></div></div>    
</body>
</html>