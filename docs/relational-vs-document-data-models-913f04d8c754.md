# 关系与文档数据模型

> 原文：<https://towardsdatascience.com/relational-vs-document-data-models-913f04d8c754>

## 关系数据模型和文档数据模型的概述以及它们之间的比较

![](img/e890f70b2a14edab0c37b305776be051.png)

约书亚·索蒂诺在 [Unsplash](https://unsplash.com?utm_source=medium&utm_medium=referral) 上拍摄的照片

在本文中，我将介绍**关系**和**文档**数据模型，之后我们将看到在选择使用哪一个时需要考虑哪些因素。

# 介绍

## 关系数据模型

本质上，关系可以表示为一个表，它是元组或行的集合。

每个关系都由一组严格的字段或列定义，称为模式。当数据被写入表*时，这个模式被严格执行(称为模式写入)。*通过对表格的列应用过滤器，可以从表格中查询行。

关系模型为通过外键派生多个关系之间的关系的连接提供了很好的支持。

## 文档数据模型

在文档数据模型中，文档本身由一个实体的所有属性组成，JSON 数据就是一个很好的例子。

它遵循一个层次结构，在这个结构中，一个实体可以有多个属性，每个属性又可以有子属性等等。这意味着文档模型具有树状结构。属性可以很容易地添加到文档中，任何读取这些数据的应用程序都会解释一个隐式模式*(称为读取模式)*。获取实体的属性只需要查询该实体的 JSON 表示中的键字段。

# 考虑因素

选择特定类型的模型主要取决于:

## 您能让您的应用程序代码保持多简单？

如果应用程序中的数据是类似文档的，比如 JSON，那么最好使用文档模型，尽管有一些限制。人们不能分割数据，创建代表关系模型的独立数据结构，因为这会增加应用程序代码不必要的复杂性和负载。

但是，对于文档模型，从高度嵌套的文档中的属性检索特定元素也会增加代码的复杂性，因为您必须显式地指定它的访问路径。

如果应用程序必须派生多对多关系，那么使用关系模型会更好，因为它对多个表之间的规范化和连接有更好的支持，而不是将工作负载从数据库转移到应用程序代码，以维护从类似文档的数据派生的一致关系。

## 模型支持模式灵活性吗？

与关系模型相比，文档模型提供了高度的模式灵活性。

假设有一个人实体具有这些属性:

```
name: John Doe
current city: Amsterdam
current country: Netherlands
```

如果你想添加一个字段，比如说人的年龄，你只需要在文档模型的情况下再给文档添加一个键。然而，对于关系模型，您将执行添加一列的`ALTER TABLE`命令，这将作为一个整体应用于表，同时导致停机。在文档模型中，对现有字段的更新只需要很少的时间，但是，在关系模型中，`UPDATE`命令必须搜索特定的行，然后将它们全部重写。然而，文档模型提供的模式灵活性存在一些问题，这将在下一点中讨论。

此外，如果外部系统不时地对数据结构进行更改，那么在其上使用严格的模式会导致不必要的工作，比如添加列、回填数据等。但是，如果您知道数据的结构是固定的，不会改变，那么在它的基础上实施一个模式会更好。

## 要查询的数据本地化程度如何？

在关系模型的情况下，您可能有一个规范化的数据库，也就是说，您将有多个具有特定粒度的表，这些表可以与其他表相关联，以派生出特定的关系。实现这一点的唯一方法是使用联接，在联接中，迭代发生在外键的指定值的多个表上，这意味着多个磁盘寻道会影响检索所需数据的时间。

正如我们前面讨论的，文档模型将所有数据作为单个实体放在一个地方，因此数据是高度本地化的。但是，只有在查询文档中的大量属性*(模式灵活性的结果)*时，这种本地化才有优势。如果只使用/更新文档中的几个属性，则必须将整个文档加载到内存中，读取/更新所需的字段，并写回整个文档，这既占用内存又耗费时间。因此，最好保持文档较小，这在阅读和写作时是有效的。

# 结论

选择一个特定的模型，不仅是在关系模型和文档模型中，也在其他模型中，比如图模型，完全取决于您的用例，特别是，您将如何使用数据，外部系统如何影响它，下游应用程序有什么要求，等等。