<html>
<head>
<title>Better annotations with Python’s Matplotlib</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Python的Matplotlib进行更好的注释</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/better-annotations-with-pythons-matplotlib-46815ce098df#2022-01-03">https://towardsdatascience.com/better-annotations-with-pythons-matplotlib-46815ce098df#2022-01-03</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""><h1 id="e342" class="pw-post-title ir is it bd iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp bi translated">使用Python的Matplotlib进行更好的注释</h1></div><div class=""><h2 id="b06b" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">如何在Matplotlib中轻松定制文本的快速指南</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/75321b6764bf99ca04b0772e9a382ccd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Nd_A5LS23SXRgAGtXnZsdQ.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">咖啡豆生产——作者图片</p></figure><p id="5226" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">文本是为我们的数据可视化增加价值的一种无与伦比的方式。我们可以将注意力吸引到图表的特定方面，解释一个模式，或者给出关于该主题的额外信息。</p><p id="f2f8" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">本文将探讨如何用<a class="ae lu" href="https://github.com/znstrider/highlight_text" rel="noopener ugc nofollow" target="_blank">高亮文本</a>格式化Matplotlib文本。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><p id="7977" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">对于下面的例子，我将使用来自数据中<a class="ae lu" href="https://ourworldindata.org/grapher/coffee-bean-production" rel="noopener ugc nofollow" target="_blank">我们的世界的咖啡产量数据。</a></p><p id="5260" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">先说简单的。我们将绘制2018年咖啡产量最高的四个国家的历史数据。</p><pre class="kj kk kl km gt mc md me mf aw mg bi"><span id="b2c3" class="mh mi it md b gy mj mk l ml mm">import matplotlib.pyplot as plt<br/>import numpy as np<br/>import pandas as pd</span><span id="e2ae" class="mh mi it md b gy mn mk l ml mm">#<a class="ae lu" href="https://ourworldindata.org/grapher/coffee-bean-production" rel="noopener ugc nofollow" target="_blank">https://ourworldindata.org/grapher/coffee-bean-production</a><br/>df = pd.read_csv('../data/coffee-bean-production.csv')</span><span id="e77e" class="mh mi it md b gy mn mk l ml mm">countries = ['Brazil', 'Vietnam', 'Indonesia', 'Colombia']<br/>colors = ['#36AD63', '#EEEE50', '#DE4A43', '#3765B1']</span><span id="2c4a" class="mh mi it md b gy mn mk l ml mm">#figure<br/>fig, ax = plt.subplots(1, figsize=(12,6))<br/>ax.set_facecolor('#202020')</span><span id="4d90" class="mh mi it md b gy mn mk l ml mm"># plot<br/>for i, country in enumerate(countries):<br/>    plt.plot(df[df['Entity'] == country].Year, df[df['Entity'] == country].tonnes, color=colors[i])</span><span id="eb86" class="mh mi it md b gy mn mk l ml mm"># grid lines<br/>ax.set_axisbelow(True)<br/>ax.yaxis.grid(color='gray', linestyle='dashed', alpha=0.2)<br/>ax.xaxis.grid(color='gray', linestyle='dashed', alpha=0.2)</span><span id="e646" class="mh mi it md b gy mn mk l ml mm"># ticks and labels<br/>plt.xticks(np.arange(df.Year.min(),df.Year.max()+1, 3))<br/>plt.ylabel('Tonnes')<br/>ax.set_yscale('log')</span><span id="99c7" class="mh mi it md b gy mn mk l ml mm"># legend and title<br/>plt.legend(countries)<br/>plt.title('Coffee bean production by year', loc='left')<br/>plt.show()</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mo"><img src="../Images/0af6d699c8a5e6012712b45db984ed58.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*YuoQxeiUhSmVDE5wyUvgXw.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">咖啡豆生产——作者图片</p></figure><p id="42d6" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">没关系。但是有几个方面需要改进。</p><p id="fbc1" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我想使标题更加突出，并在它下面添加图例作为我的副标题的一部分。我还想在图片底部写一些注释和这些数据的来源。</p><p id="9ec1" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">字幕和标题在Matplotlib中并不像我们预期的那样直观；对他们来说没有任何作用。</p><p id="4475" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我们可以对副标题使用带有标题功能的换行符，但是没有办法对每一行进行不同的格式化。如果我们想让我们的字幕与众不同，我们需要同时使用标题和文本功能，然后努力调整坐标来放置字幕。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="6c6f" class="mp mi it bd mq mr ms mt mu mv mw mx my jz mz ka na kc nb kd nc kf nd kg ne nf bi translated">高亮文本</h1><p id="04b6" class="pw-post-body-paragraph ky kz it la b lb ng ju ld le nh jx lg lh ni lj lk ll nj ln lo lp nk lr ls lt im bi translated">这个简单的包为我们在Matplotlib中格式化文本提供了很大的自由度。它允许我们拥有一个具有多种不同格式的字符串。</p><p id="b65a" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我们需要创建一个包含文本属性的字典列表。然后我们用标签(&lt;&gt;)为我们将要使用的不同格式编写字符串。</p><pre class="kj kk kl km gt mc md me mf aw mg bi"><span id="1097" class="mh mi it md b gy mj mk l ml mm"><strong class="md iu">from highlight_text import HighlightText, ax_text, fig_text</strong><br/>import matplotlib.pyplot as plt<br/>import numpy as np<br/>import pandas as pd</span><span id="cb74" class="mh mi it md b gy mn mk l ml mm">#<a class="ae lu" href="https://ourworldindata.org/grapher/coffee-bean-production" rel="noopener ugc nofollow" target="_blank">https://ourworldindata.org/grapher/coffee-bean-production</a><br/>df = pd.read_csv('../data/coffee-bean-production.csv')</span><span id="e353" class="mh mi it md b gy mn mk l ml mm">countries = ['Brazil', 'Vietnam', 'Indonesia', 'Colombia']<br/>colors = ['#36AD63', '#EEEE50', '#DE4A43', '#3765B1']</span><span id="a960" class="mh mi it md b gy mn mk l ml mm">#figure<br/>fig, ax = plt.subplots(1, figsize=(12,6))<br/>ax.set_facecolor('#202020')</span><span id="8944" class="mh mi it md b gy mn mk l ml mm"># plot<br/>for i, country in enumerate(countries):<br/>    plt.plot(df[df['Entity'] == country].Year, df[df['Entity'] == country].tonnes, color=colors[i])</span><span id="2fae" class="mh mi it md b gy mn mk l ml mm"># grid lines<br/>ax.set_axisbelow(True)<br/>ax.yaxis.grid(color='gray', linestyle='dashed', alpha=0.2)<br/>ax.xaxis.grid(color='gray', linestyle='dashed', alpha=0.2)</span><span id="dcc2" class="mh mi it md b gy mn mk l ml mm"># ticks and labels<br/>plt.xticks(np.arange(df.Year.min(),df.Year.max()+1, 3))<br/>plt.ylabel('Tonnes')<br/>ax.set_yscale('log')</span><span id="9724" class="mh mi it md b gy mn mk l ml mm"># legend and title<br/>plt.legend(countries)</span><span id="ce13" class="mh mi it md b gy mn mk l ml mm"><strong class="md iu">highlight_textprops = [{"fontsize":16, "color":'k'},<br/>                       {"fontsize":14, "color":'#202020'}]</strong></span><span id="1295" class="mh mi it md b gy mn mk l ml mm"><strong class="md iu">fig_text(x=0.125, y=0.9, va='bottom',<br/>         s='&lt;Tonnes of coffee bean produced by year&gt;\n&lt;Four highest producers of 2018&gt;',<br/>         highlight_textprops=highlight_textprops,<br/>         ax=ax)</strong></span><span id="7995" class="mh mi it md b gy mn mk l ml mm">plt.show()</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/2f086b620278ac574c2a86a9f3243fe1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*P_CYNmE960UBc9wYXtItQg.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">咖啡豆生产——作者图片</p></figure><p id="9c12" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">这使得我们可以快速地在一个对象中编写标题和副标题。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h2 id="23e1" class="mh mi it bd mq nl nm dn mu nn no dp my lh np nq na ll nr ns nc lp nt nu ne nv bi translated">功能</h2><p id="e2c0" class="pw-post-body-paragraph ky kz it la b lb ng ju ld le nh jx lg lh ni lj lk ll nj ln lo lp nk lr ls lt im bi translated">字幕可以给我们的图表增加很多东西，有一种实用的添加方式是受欢迎的。但是一种更简单的格式化文本的方法提供了增强的可能性，这是默认使用Matplotlib所不能忍受的。</p><p id="8fd3" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我们现在可以通过明确命名字幕中的每一行并格式化每个单词的背景来替换图例。</p><pre class="kj kk kl km gt mc md me mf aw mg bi"><span id="366d" class="mh mi it md b gy mj mk l ml mm">from highlight_text import HighlightText, ax_text, fig_text<br/>import matplotlib.pyplot as plt<br/>import numpy as np<br/>import pandas as pd</span><span id="fd10" class="mh mi it md b gy mn mk l ml mm">#<a class="ae lu" href="https://ourworldindata.org/grapher/coffee-bean-production" rel="noopener ugc nofollow" target="_blank">https://ourworldindata.org/grapher/coffee-bean-production</a><br/>df = pd.read_csv('../data/coffee-bean-production.csv')</span><span id="9fac" class="mh mi it md b gy mn mk l ml mm">countries = ['Brazil', 'Vietnam', 'Indonesia', 'Colombia']<br/>colors = ['#36AD63', '#EEEE50', '#DE4A43', '#3765B1']</span><span id="973c" class="mh mi it md b gy mn mk l ml mm">#figure<br/>fig, ax = plt.subplots(1, figsize=(12,6))<br/>ax.set_facecolor('#202020')</span><span id="396f" class="mh mi it md b gy mn mk l ml mm"># plot<br/>for i, country in enumerate(countries):<br/>    plt.plot(df[df['Entity'] == country].Year, df[df['Entity'] == country].tonnes, color=colors[i])</span><span id="35ad" class="mh mi it md b gy mn mk l ml mm"># grid lines<br/>ax.set_axisbelow(True)<br/>ax.yaxis.grid(color='gray', linestyle='dashed', alpha=0.2)<br/>ax.xaxis.grid(color='gray', linestyle='dashed', alpha=0.2)</span><span id="a3c3" class="mh mi it md b gy mn mk l ml mm"># ticks and labels<br/>plt.xticks(np.arange(df.Year.min(),df.Year.max()+1, 3))<br/>plt.ylabel('Tonnes')<br/>ax.set_yscale('log')</span><span id="0590" class="mh mi it md b gy mn mk l ml mm">highlight_textprops = [{"fontsize":16, "color":'k'},<br/>                       {"fontsize":14, "color":'#202020'},<br/>                       <strong class="md iu">{"bbox": {"facecolor": "#36AD63", "linewidth": 0, "pad": 1.5}, "fontsize":14, "color":'w'},<br/>                       {"bbox": {"facecolor": "#EEEE50", "linewidth": 0, "pad": 1.5}, "fontsize":14, "color":'k'},<br/>                       {"bbox": {"facecolor": "#DE4A43", "linewidth": 0, "pad": 1.5}, "fontsize":14, "color":'w'},<br/>                       {"bbox": {"facecolor": "#3765B1", "linewidth": 0, "pad": 1.5}, "fontsize":14, "color":'w'}</strong>]</span><span id="d8ec" class="mh mi it md b gy mn mk l ml mm">fig_text(x=0.125, y=0.9,<br/>              va='bottom',<br/>              s='&lt;Tonnes of coffee bean produced by year&gt;\n&lt;Four highest producers of 2018: &gt;<strong class="md iu">&lt;Brazil&gt; , &lt;Vietnam&gt; , &lt;Indonesia&gt; , &lt;Colombia&gt;'</strong>,<br/>              highlight_textprops=highlight_textprops,<br/>              ax=ax)</span><span id="d919" class="mh mi it md b gy mn mk l ml mm">plt.show()</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/da7452620382457dc1037919c3c8c709.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*pGm1t4QCYsDUJQu1Dw0cDw.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">咖啡豆生产——作者图片</p></figure><p id="1305" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">同样，我们可以在图表底部区分注释和数据源。</p><p id="4d40" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我们甚至可以将字体颜色与背景颜色相匹配，创建一个空行，将两者分开。</p><pre class="kj kk kl km gt mc md me mf aw mg bi"><span id="48b9" class="mh mi it md b gy mj mk l ml mm">from highlight_text import HighlightText, ax_text, fig_text<br/>import matplotlib.pyplot as plt<br/>import numpy as np<br/>import pandas as pd</span><span id="6633" class="mh mi it md b gy mn mk l ml mm">#<a class="ae lu" href="https://ourworldindata.org/grapher/coffee-bean-production" rel="noopener ugc nofollow" target="_blank">https://ourworldindata.org/grapher/coffee-bean-production</a><br/>df = pd.read_csv('../data/coffee-bean-production.csv')</span><span id="9cf0" class="mh mi it md b gy mn mk l ml mm">countries = ['Brazil', 'Vietnam', 'Indonesia', 'Colombia']<br/>colors = ['#36AD63', '#EEEE50', '#DE4A43', '#3765B1']</span><span id="0930" class="mh mi it md b gy mn mk l ml mm">#figure<br/>fig, ax = plt.subplots(1, figsize=(12,8))<br/>ax.set_facecolor('#202020')</span><span id="b17e" class="mh mi it md b gy mn mk l ml mm"># plot<br/>for i, country in enumerate(countries):<br/>    plt.plot(df[df['Entity'] == country].Year, df[df['Entity'] == country].tonnes, color=colors[i])</span><span id="2661" class="mh mi it md b gy mn mk l ml mm"># grid lines<br/>ax.set_axisbelow(True)<br/>ax.yaxis.grid(color='gray', linestyle='dashed', alpha=0.2)<br/>ax.xaxis.grid(color='gray', linestyle='dashed', alpha=0.2)</span><span id="c1d8" class="mh mi it md b gy mn mk l ml mm"># ticks and labels<br/>plt.xticks(np.arange(df.Year.min(),df.Year.max()+1, 3))<br/>plt.ylabel('Tonnes')<br/>ax.set_yscale('log')</span><span id="00b6" class="mh mi it md b gy mn mk l ml mm"># title<br/>highlight_textprops = [{"fontsize":16, "color":'k'},<br/>                       {"fontsize":14, "color":'#202020'},<br/>                       {"bbox": {"facecolor": "#36AD63", "linewidth": 0, "pad": 1.5}, "fontsize":14, "color":'w'},<br/>                       {"bbox": {"facecolor": "#EEEE50", "linewidth": 0, "pad": 1.5}, "fontsize":14, "color":'k'},<br/>                       {"bbox": {"facecolor": "#DE4A43", "linewidth": 0, "pad": 1.5}, "fontsize":14, "color":'w'},<br/>                       {"bbox": {"facecolor": "#3765B1", "linewidth": 0, "pad": 1.5}, "fontsize":14, "color":'w'}]</span><span id="e400" class="mh mi it md b gy mn mk l ml mm">fig_text(x=0.125, y=0.9,<br/>              va='bottom',<br/>              s='&lt;Tonnes of coffee bean produced by year&gt;\n&lt;Four highest producers of 2018: &gt;&lt;Brazil&gt; , &lt;Vietnam&gt; , &lt;Indonesia&gt; , &lt;Colombia&gt;',<br/>              highlight_textprops=highlight_textprops,<br/>              ax=ax)</span><span id="af7c" class="mh mi it md b gy mn mk l ml mm"><strong class="md iu"># footnotes<br/>notes_textprops = [{"fontsize":11, "color":'#202020'},<br/>                   {"fontsize":8, "color":'w'},<br/>                   {"fontsize":12, "color":'#202020'},<br/>                   {"fontsize":11, "color":'#505050'}]</strong></span><span id="c340" class="mh mi it md b gy mn mk l ml mm"><strong class="md iu">fig_text(x=0.125, y=0.07,<br/>              va='top',<br/>              s='&lt;* Y-Axis is a log scale&gt;\n&lt;blankline&gt;\n&lt;Source:&gt; &lt;ourworldindata.org/grapher/coffee-bean-production&gt;',<br/>              highlight_textprops=notes_textprops,<br/>              ax=ax)</strong></span><span id="38e7" class="mh mi it md b gy mn mk l ml mm">plt.show()</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/75321b6764bf99ca04b0772e9a382ccd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Nd_A5LS23SXRgAGtXnZsdQ.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">咖啡豆生产——作者图片</p></figure></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h2 id="7c57" class="mh mi it bd mq nl nm dn mu nn no dp my lh np nq na ll nr ns nc lp nt nu ne nv bi translated"><strong class="ak">注释</strong></h2><p id="78b0" class="pw-post-body-paragraph ky kz it la b lb ng ju ld le nh jx lg lh ni lj lk ll nj ln lo lp nk lr ls lt im bi translated">使用HighlightText进行注释也同样简单。</p><p id="5416" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">代替fig_text函数，我们可以使用ax_text，它使用我们的轴的坐标。</p><p id="1761" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">与图例类似，注释也可以受益于颜色。我们可以用它来关联其他元素——使用与注释线相同的颜色。</p><p id="de67" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我们可以用它来突出或弱化上面的信息。</p><pre class="kj kk kl km gt mc md me mf aw mg bi"><span id="5927" class="mh mi it md b gy mj mk l ml mm">from highlight_text import HighlightText, ax_text, fig_text<br/>import matplotlib.pyplot as plt<br/>import numpy as np<br/>import pandas as pd</span><span id="e23d" class="mh mi it md b gy mn mk l ml mm">#<a class="ae lu" href="https://ourworldindata.org/grapher/coffee-bean-production" rel="noopener ugc nofollow" target="_blank">https://ourworldindata.org/grapher/coffee-bean-production</a><br/>df = pd.read_csv('../data/coffee-bean-production.csv')</span><span id="0716" class="mh mi it md b gy mn mk l ml mm">countries = ['Brazil', 'Vietnam', 'Indonesia', 'Colombia']<br/>colors = ['#36AD63', '#EEEE50', '#DE4A43', '#3765B1']</span><span id="cb57" class="mh mi it md b gy mn mk l ml mm">#figure<br/>fig, ax = plt.subplots(1, figsize=(12,8))<br/>ax.set_facecolor('#202020')</span><span id="8156" class="mh mi it md b gy mn mk l ml mm"># plot<br/>for i, country in enumerate(countries):<br/>    plt.plot(df[df['Entity'] == country].Year, df[df['Entity'] == country].tonnes, color=colors[i])</span><span id="43f6" class="mh mi it md b gy mn mk l ml mm"># grid lines<br/>ax.set_axisbelow(True)<br/>ax.yaxis.grid(color='gray', linestyle='dashed', alpha=0.2)<br/>ax.xaxis.grid(color='gray', linestyle='dashed', alpha=0.2)</span><span id="7743" class="mh mi it md b gy mn mk l ml mm"># ticks and labels<br/>plt.xticks(np.arange(df.Year.min(),df.Year.max()+1, 3))<br/>plt.ylabel('Tonnes')<br/>ax.set_yscale('log')</span><span id="f0d3" class="mh mi it md b gy mn mk l ml mm"># title<br/>highlight_textprops = [{"fontsize":16, "color":'k'},<br/>                       {"fontsize":14, "color":'#202020'},<br/>                       {"bbox": {"facecolor": "#36AD63", "linewidth": 0, "pad": 1.5}, "fontsize":14, "color":'w'},<br/>                       {"bbox": {"facecolor": "#EEEE50", "linewidth": 0, "pad": 1.5}, "fontsize":14, "color":'k'},<br/>                       {"bbox": {"facecolor": "#DE4A43", "linewidth": 0, "pad": 1.5}, "fontsize":14, "color":'w'},<br/>                       {"bbox": {"facecolor": "#3765B1", "linewidth": 0, "pad": 1.5}, "fontsize":14, "color":'w'}]</span><span id="c5a1" class="mh mi it md b gy mn mk l ml mm">fig_text(x=0.125, y=0.9,<br/>              va='bottom',<br/>              s='&lt;Tonnes of coffee bean produced by year&gt;\n&lt;Four highest producers of 2018: &gt;&lt;Brazil&gt; , &lt;Vietnam&gt; , &lt;Indonesia&gt; , &lt;Colombia&gt;',<br/>              highlight_textprops=highlight_textprops,<br/>              ax=ax)</span><span id="6bf2" class="mh mi it md b gy mn mk l ml mm"># footnotes<br/>notes_textprops = [{"fontsize":11, "color":'#202020'},<br/>                   {"fontsize":8, "color":'w'},<br/>                   {"fontsize":12, "color":'#202020'},<br/>                   {"fontsize":11, "color":'#505050'}]</span><span id="f950" class="mh mi it md b gy mn mk l ml mm">fig_text(x=0.125, y=0.07,<br/>              va='top',<br/>              s='&lt;* Y-Axis is a log scale&gt;\n&lt;blankline&gt;\n&lt;Source:&gt; &lt;ourworldindata.org/grapher/coffee-bean-production&gt;',<br/>              highlight_textprops=notes_textprops,<br/>              ax=ax)</span><span id="740b" class="mh mi it md b gy mn mk l ml mm"># annotations<br/>ax_text(x = 1987, y = 20000, ha='left', color='w',<br/>        s='&lt;Vietnam&gt;\nDoi Moi &lt;(1986)&gt;',<br/>        highlight_textprops=[{"color": '#EEEE50'},<br/>                             {"color": 'grey'}],<br/>        ax=ax)</span><span id="591b" class="mh mi it md b gy mn mk l ml mm">plt.show()</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/4a9149d4bde03bb59ab1ab3cfb624340.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8PgnOSUtwgfZDqgpvfj9jA.png"/></div></div></figure></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h2 id="b460" class="mh mi it bd mq nl nm dn mu nn no dp my lh np nq na ll nr ns nc lp nt nu ne nv bi translated">结论</h2><p id="e2a9" class="pw-post-body-paragraph ky kz it la b lb ng ju ld le nh jx lg lh ni lj lk ll nj ln lo lp nk lr ls lt im bi translated">总的来说，HighlightText是一个很棒的软件包，可以让我们的可视化更上一层楼。能够毫不费力地格式化文本的各个部分给了我们很多自由。</p><p id="5269" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">尽管它是0.2版本，我在使用这个包的时候没有发现很多问题。</p><p id="118c" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">大部分时间我都很难在Jupyter进行绘图，那里的绘图会剪掉标题和注释。但是，在保存图形时不会发生这种情况。</p><p id="ae71" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">当我尝试更广泛的文本时，我也遇到了一些麻烦。为更广泛的注释添加适当空间的支线剧情可以解决这些问题。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><p id="0d18" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">感谢阅读我的文章。</p><p id="35b9" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated"><strong class="la iu">资源:<br/></strong><a class="ae lu" href="https://github.com/znstrider/highlight_text" rel="noopener ugc nofollow" target="_blank">https://github.com/znstrider/highlight_text</a>；<br/><a class="ae lu" href="https://ourworldindata.org/grapher/coffee-bean-production" rel="noopener ugc nofollow" target="_blank">https://ourworldindata.org/grapher/coffee-bean-production</a>；<br/><a class="ae lu" href="https://en.wikipedia.org/wiki/Economic_history_of_Vietnam" rel="noopener ugc nofollow" target="_blank">https://en.wikipedia.org/wiki/Economic_history_of_Vietnam</a>；</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nw"><img src="../Images/ba476d955901991e489029070179d268.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*tlkIebU7fnT-pJ80VJhiLQ.png"/></div></div></figure></div></div>    
</body>
</html>