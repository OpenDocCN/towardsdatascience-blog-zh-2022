<html>
<head>
<title>Comparing Robustness of MAE, MSE and RMSE</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">MAE、MSE和RMSE的稳健性比较</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/comparing-robustness-of-mae-mse-and-rmse-6d69da870828#2022-01-11">https://towardsdatascience.com/comparing-robustness-of-mae-mse-and-rmse-6d69da870828#2022-01-11</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""><h1 id="3651" class="pw-post-title io ip iq bd ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm bi translated">MAE、MSE和RMSE的稳健性比较</h1></div><div class=""><h2 id="a94c" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">存在异常值时主要回归指标的表现</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/f02fceb80faf1635e43b960c6c0037f8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*BDVAeA5eSne8u85e9dpgqA.jpeg"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">由克里斯·利维拉尼在<a class="ae kv" href="https://unsplash.com/photos/dBI_My696Rk" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上原创</p></figure><p id="5f12" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果您处理数据，您可能已经知道MSE比MAE对异常值更敏感。但是你测试过吗？我做到了，这篇文章就是关于它的。</p></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><p id="ba77" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">许多回归模型依赖于距离度量来确定向最佳结果的收敛。甚至“最佳”结果的定义也需要用某种度量标准来定量解释。</p><p id="ebb7" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">通常使用的度量是平均误差(MAE)、均方误差(MSE)或均方根误差(RMSE)。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi lz"><img src="../Images/87ea774250134da17a14598ac32891f1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*O1e79fdHpZCX6AIHDHob1Q.jpeg"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">作者图片</p></figure><p id="5b48" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">简而言之，<strong class="ky ir"> MAE </strong>评估观测值(数据集的条目)到回归预测值的绝对距离，取所有观测值的平均值。我们使用距离的绝对值，因此负误差被适当地考虑。这正是上图描述的情况。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi ma"><img src="../Images/24994e5de9e1c36756e60223c2504141.png" data-original-src="https://miro.medium.com/v2/resize:fit:510/format:webp/1*V5kDRZyG6udD7tKStFotlQ.png"/></div></figure><p id="dca9" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">另一种方法是平方距离，这样结果就是正的。这是由<strong class="ky ir"> MSE </strong>完成的，由于幂函数的性质，较高的误差(或距离)在度量中比较低的误差权重更大。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi mb"><img src="../Images/355958d8c5fa8bed50e7987119aead5c.png" data-original-src="https://miro.medium.com/v2/resize:fit:532/format:webp/1*VZ3iKUrzH7f71B03Sui6fQ.png"/></div></figure><p id="147b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">MSE中的一个反弹是，度量单位也是平方的，因此如果模型试图以美元预测价格，MSE将产生一个没有意义的单位(美元)数。<strong class="ky ir"> RMSE </strong>然后被用于通过对MSE误差求平方根来将MSE误差返回到原始单位，同时保持惩罚较高误差的属性。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi mc"><img src="../Images/15cec17553f12972288fa432b6aadb0d.png" data-original-src="https://miro.medium.com/v2/resize:fit:778/format:webp/1*YDOgUMYYjETdAVAn7xEOrw.png"/></div></figure><h1 id="aae8" class="md me iq bd mf mg mh mi mj mk ml mm mn jw mo jx mp jz mq ka mr kc ms kd mt mu bi translated">稳健性</h1><p id="4af7" class="pw-post-body-paragraph kw kx iq ky b kz mv jr lb lc mw ju le lf mx lh li lj my ll lm ln mz lp lq lr ij bi translated">稳健性可以定义为系统或模型在暴露于噪声或夸大的输入时保持稳定并且只有很小变化(或根本没有变化)的能力。</p><p id="5a6b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">因此，一个健壮的系统或指标必须较少受到异常值的影响。在这种情况下，很容易得出MSE可能不如MAE稳健的结论，因为误差的平方将对异常值施加更高的重要性。</p><p id="1299" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">让我们证明这一点。</p><h1 id="3864" class="md me iq bd mf mg mh mi mj mk ml mm mn jw mo jx mp jz mq ka mr kc ms kd mt mu bi translated">代码准备</h1><p id="ac6c" class="pw-post-body-paragraph kw kx iq ky b kz mv jr lb lc mw ju le lf mx lh li lj my ll lm ln mz lp lq lr ij bi translated">这项研究的代码可以在我的<a class="ae kv" href="https://github.com/vinyluis/Articles/tree/main/Comparing%20robustness%20of%20MAE%20MSE%20and%20RMSE" rel="noopener ugc nofollow" target="_blank"> github </a>上找到，所以可以随意跳到下一节。</p><p id="9eda" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">首先，我们定义计算所有三个指标的代码。在这种情况下，我们不会将观察值与回归线进行比较，而是测量每个观察值到集合平均值的距离:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="na nb l"/></div></figure><p id="6d38" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">然后，我们创建包含许多随机观察值的集合。这些点将从均值= 100、方差= 20的正态分布中取样。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="na nb l"/></div></figure><p id="2607" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在进行主功能<code class="fe nc nd ne nf b">evaluate_metrics()</code>。这里的目标是评估每组观测值的平均误差、均方误差和RMSE。当然，由于创建集合的随机过程，指标会略有不同。我们可以在没有异常值的情况下绘制这种分布，称之为“原始”分布。</p><p id="b68e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">然后我们可以对每个集合中的随机点进行采样，并乘以一个很高的数，这样它们肯定会成为异常值。通过对那些现在有噪声的观测重复上述过程，我们可以绘制另一条分布曲线，并与原始曲线进行比较。</p><p id="6e2c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">该函数的代码如下。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="na nb l"/></div></figure><h1 id="cf8d" class="md me iq bd mf mg mh mi mj mk ml mm mn jw mo jx mp jz mq ka mr kc ms kd mt mu bi translated">实验</h1><p id="60d6" class="pw-post-body-paragraph kw kx iq ky b kz mv jr lb lc mw ju le lf mx lh li lj my ll lm ln mz lp lq lr ij bi translated">通过改变离群值的数量(<code class="fe nc nd ne nf b">num_outliers</code>)和原始观测点(<code class="fe nc nd ne nf b">amplitude_outliers</code>)所乘以的标量的幅度，可以在许多不同的场景中比较指标的稳健性。</p><p id="fbc6" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">因此，作为一个对照组，我们可以将函数设置为零异常值</p><pre class="kg kh ki kj gt ng nf nh ni aw nj bi"><span id="2d2b" class="nk me iq nf b gy nl nm l nn no">evaluate_metrics(data, num_outliers = 0, amplitude_outliers = 1)</span></pre><p id="ca38" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">结果是原始分布和噪声分布完全相同，正如所料:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi np"><img src="../Images/a5eae72ee5027fce1a4e918575fa1ca1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*Q_28JA3n9nGTw5jb"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">作者图片</p></figure><p id="233e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">不过，有几件事值得注意。MAE分布的平均值约为16，MSE分布的平均值约为400。预计MSE误差的值比MAE误差高大约2的幂，所以这并不是什么新鲜事。</p><p id="8814" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">但是，当取均方差的平方根并得到RMSE时，我们得到的平均值约为20，高于均方差。这是因为MSE和RMSE对较高误差的放大作用大于较低误差。</p><p id="a832" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">此外，RMSE和MSE曲线是相同的，这也是意料之中的，因为平方根不应该改变分布，只有规模。(注意:要比较它们，请关注曲线，忽略直方图)</p><p id="5220" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在我们可以开始用噪声数据进行比较。在第一个测试中，我们只能添加两个振幅= 2的异常值:</p><pre class="kg kh ki kj gt ng nf nh ni aw nj bi"><span id="a737" class="nk me iq nf b gy nl nm l nn no">evaluate_metrics(data, num_outliers = 2, amplitude_outliers = 2)</span></pre><p id="bc0c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">正如预期的那样，异常值将增加平均误差，并导致噪声分布右移:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi np"><img src="../Images/ccd004d2c0c2c720533d8a861a08bd88.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*xG3MXJTRsEHBbXnM"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">作者图片</p></figure><p id="4367" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">当将任何噪声分布与其原始对应物进行比较时，可以注意到噪声分布现在是变形的。预计它们不会具有与原始分布相同的形式，因为异常值可以随机改变这些不再完全正态(高斯)的分布。</p><p id="e35b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">此外，很明显，噪声MSE和RMSE分布比MAE分布移动得更多。这进一步证明了它们对异常值的鲁棒性较差。</p><p id="8a5c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">通过添加更多的异常值，我们可以得到更远的分布:</p><pre class="kg kh ki kj gt ng nf nh ni aw nj bi"><span id="76e4" class="nk me iq nf b gy nl nm l nn no">evaluate_metrics(data, num_outliers = 10, amplitude_outliers = 2)</span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi np"><img src="../Images/2efbfb770e015bac09bfb3f3df34aa9c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*OAT7VTXz3kY6INgw"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">作者图片</p></figure><p id="a648" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">振幅也起着重要的作用，所以我们可以回到有两个异常值，但振幅较高的情况</p><pre class="kg kh ki kj gt ng nf nh ni aw nj bi"><span id="d51a" class="nk me iq nf b gy nl nm l nn no">evaluate_metrics(data, num_outliers = 2, amplitude_outliers = 10)</span></pre><p id="a47f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在这种情况下，由于MSE和RMSE受高强度异常值的影响更大，因此对它们的分离甚至更差:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi np"><img src="../Images/faadea873fb092929f0d324fabb04fed.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*nba9jv7MfC5Kiakt"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">作者图片</p></figure></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><p id="e06a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">总之，现在已经清楚了异常值对MSE或RMSE等平方误差的影响，重要的是要说明，在没有噪声的应用中，这些指标利大于弊，因为它们可以最小化更大的误差，即使这意味着接受更频繁、更小的误差。</p><p id="e91c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">查看本文的github资源库:</p><div class="nq nr gp gr ns nt"><a href="https://github.com/vinyluis/Articles/tree/main/Comparing%20robustness%20of%20MAE%20MSE%20and%20RMSE" rel="noopener  ugc nofollow" target="_blank"><div class="nu ab fo"><div class="nv ab nw cl cj nx"><h2 class="bd ir gy z fp ny fr fs nz fu fw ip bi translated">文章/比较MAE MSE和RMSE在主要乙烯基的稳健性/文章</h2><div class="oa l"><h3 class="bd b gy z fp ny fr fs nz fu fw dk translated">对媒体文章的引用。在GitHub上创建一个帐户，为vinyluis/Articles的发展做出贡献。</h3></div><div class="ob l"><p class="bd b dl z fp ny fr fs nz fu fw dk translated">github.com</p></div></div><div class="oc l"><div class="od l oe of og oc oh kp nt"/></div></div></a></div><h1 id="8398" class="md me iq bd mf mg mh mi mj mk ml mm mn jw mo jx mp jz mq ka mr kc ms kd mt mu bi translated">如果你喜欢这个帖子…</h1><p id="823e" class="pw-post-body-paragraph kw kx iq ky b kz mv jr lb lc mw ju le lf mx lh li lj my ll lm ln mz lp lq lr ij bi translated">支持我一杯咖啡！</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><a href="https://www.buymeacoffee.com/vinitrevisan"><div class="gh gi oi"><img src="../Images/acf4154cfebdc13859934db49fd502cf.png" data-original-src="https://miro.medium.com/v2/resize:fit:500/format:webp/1*h_y4o6IwDDFFWIyKQE7Rww.png"/></div></a><p class="kr ks gj gh gi kt ku bd b be z dk translated">给我买杯咖啡！</p></figure><p id="cf7c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">看看这个很棒的帖子</p><div class="nq nr gp gr ns nt"><a rel="noopener follow" target="_blank" href="/5-tips-to-start-a-career-in-data-211ad15a7ca8"><div class="nu ab fo"><div class="nv ab nw cl cj nx"><h2 class="bd ir gy z fp ny fr fs nz fu fw ip bi translated">开始数据职业生涯的5个技巧</h2><div class="oa l"><h3 class="bd b gy z fp ny fr fs nz fu fw dk translated">让我成为一名跨国公司数据科学家的步骤</h3></div><div class="ob l"><p class="bd b dl z fp ny fr fs nz fu fw dk translated">towardsdatascience.com</p></div></div><div class="oc l"><div class="oj l oe of og oc oh kp nt"/></div></div></a></div></div></div>    
</body>
</html>