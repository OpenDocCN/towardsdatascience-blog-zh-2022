<html>
<head>
<title>The Easiest Way to Identify Holidays in Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用Python识别假日的最简单方法</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/the-easiest-way-to-identify-holidays-in-python-58333176af4f#2022-01-15">https://towardsdatascience.com/the-easiest-way-to-identify-holidays-in-python-58333176af4f#2022-01-15</a></blockquote><div><div class="fc ij ik il im in"/><div class="io ip iq ir is"><figure class="iu iv gp gr iw ix gh gi paragraph-image"><div role="button" tabindex="0" class="iy iz di ja bf jb"><div class="gh gi it"><img src="../Images/e578d0f7d722f9b665e4366a40e6834b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rproQdENpkYMKGXHDd-GSw.jpeg"/></div></div><p class="je jf gj gh gi jg jh bd b be z dk translated">照片由<a class="ae ji" href="https://unsplash.com/@esteejanssens?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">esteée扬森斯</a>在<a class="ae ji" href="https://unsplash.com/s/photos/calendar?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</p></figure><div class=""><h1 id="5fae" class="pw-post-title jj jk jl bd jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh bi translated">用Python识别假日的最简单方法</h1></div><div class=""><h2 id="d5fe" class="pw-subtitle-paragraph ki jk jl bd b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz dk translated">如何快速将假期要素添加到数据集中</h2></div><p id="7faa" class="pw-post-body-paragraph la lb jl lc b ld le km lf lg lh kp li lj lk ll lm ln lo lp lq lr ls lt lu lv io bi translated">当处理时间数据时，无论是时间序列分析还是正常的回归/分类任务，知道某一天是否是某种假日都会让我们受益匪浅。</p><p id="2ba9" class="pw-post-body-paragraph la lb jl lc b ld le km lf lg lh kp li lj lk ll lm ln lo lp lq lr ls lt lu lv io bi translated">例如，如果我们是一个流媒体平台，我们可能会注意到用户活动在休息日出现高峰。作为一名零售商，我们可能会注意到假期前(尤其是与礼物相关的，如圣诞节)的购物量比假期中多。这些只是首先想到的一些想法。</p><p id="ebe0" class="pw-post-body-paragraph la lb jl lc b ld le km lf lg lh kp li lj lk ll lm ln lo lp lq lr ls lt lu lv io bi translated">这就是为什么在处理时间数据时识别节假日非常有用的原因。在本文中，我们将探索如何使用两个流行的Python库— <code class="fe lw lx ly lz b"> holidays</code>和<code class="fe lw lx ly lz b">workalendar</code>快速完成这项工作。两者在GitHub上都相当受欢迎(~650颗星)，并且仍然由它们的创作者维护。让我们开始吧！</p><h1 id="3e73" class="ma mb jl bd mc md me mf mg mh mi mj mk kr ml ks mm ku mn kv mo kx mp ky mq mr bi translated">快速设置</h1><p id="130f" class="pw-post-body-paragraph la lb jl lc b ld ms km lf lg mt kp li lj mu ll lm ln mv lp lq lr mw lt lu lv io bi translated">像往常一样，我们需要加载一些库。在这个例子中，我们将看看德国的节日。这就是为什么我们从<code class="fe lw lx ly lz b">workalendar</code>库做了一个特殊的导入。</p><figure class="mx my mz na gt ix"><div class="bz fp l di"><div class="nb nc l"/></div></figure><h1 id="1ef8" class="ma mb jl bd mc md me mf mg mh mi mj mk kr ml ks mm ku mn kv mo kx mp ky mq mr bi translated">1.假日</h1><p id="e2f7" class="pw-post-body-paragraph la lb jl lc b ld ms km lf lg mt kp li lj mu ll lm ln mv lp lq lr mw lt lu lv io bi translated"><code class="fe lw lx ly lz b">holidays</code>图书馆允许我们识别大约90个国家的主要节日的日期。此外，在某些情况下(如美国、巴西、法国、加拿大等)，甚至可以更深入地了解特定地区的假日。</p><p id="aad7" class="pw-post-body-paragraph la lb jl lc b ld le km lf lg lh kp li lj lk ll lm ln lo lp lq lr ls lt lu lv io bi translated">我们已经提到，在这个例子中，我们将看看德国的假期。从<code class="fe lw lx ly lz b">holidays</code>图书馆检索假日信息非常简单，您马上就会看到。使用下面的片段，我们打印2020-2021年的所有德国假日。</p><figure class="mx my mz na gt ix"><div class="bz fp l di"><div class="nb nc l"/></div></figure><p id="6368" class="pw-post-body-paragraph la lb jl lc b ld le km lf lg lh kp li lj lk ll lm ln lo lp lq lr ls lt lu lv io bi translated">这将返回以下列表:</p><pre class="mx my mz na gt nd lz ne nf aw ng bi"><span id="b018" class="nh mb jl lz b gy ni nj l nk nl">(datetime.date(2020, 1, 1), 'Neujahr') <br/>(datetime.date(2020, 4, 10), 'Karfreitag') <br/>(datetime.date(2020, 4, 13), 'Ostermontag') <br/>(datetime.date(2020, 5, 1), 'Erster Mai') <br/>(datetime.date(2020, 5, 21), 'Christi Himmelfahrt') (datetime.date(2020, 6, 1), 'Pfingstmontag') <br/>(datetime.date(2020, 10, 3), 'Tag der Deutschen Einheit') (datetime.date(2020, 10, 31), 'Reformationstag') (datetime.date(2020, 12, 25), 'Erster Weihnachtstag') (datetime.date(2020, 12, 26), 'Zweiter Weihnachtstag') (datetime.date(2021, 1, 1), 'Neujahr') <br/>(datetime.date(2021, 4, 2), 'Karfreitag') <br/>(datetime.date(2021, 4, 5), 'Ostermontag') <br/>(datetime.date(2021, 5, 1), 'Erster Mai') <br/>(datetime.date(2021, 5, 13), 'Christi Himmelfahrt') (datetime.date(2021, 5, 24), 'Pfingstmontag') <br/>(datetime.date(2021, 10, 3), 'Tag der Deutschen Einheit') (datetime.date(2021, 10, 31), 'Reformationstag') (datetime.date(2021, 12, 25), 'Erster Weihnachtstag') (datetime.date(2021, 12, 26), 'Zweiter Weihnachtstag')</span></pre><p id="e45e" class="pw-post-body-paragraph la lb jl lc b ld le km lf lg lh kp li lj lk ll lm ln lo lp lq lr ls lt lu lv io bi translated">出于我们的目的，将该信息存储在<code class="fe lw lx ly lz b">pandas</code>数据帧中可能更容易。通过稍微修改上面的代码片段，我们得到了想要的结果:</p><figure class="mx my mz na gt ix"><div class="bz fp l di"><div class="nb nc l"/></div></figure><figure class="mx my mz na gt ix gh gi paragraph-image"><div class="gh gi nm"><img src="../Images/10889ac6c61a2dbcd9d01c387f69fb26.png" data-original-src="https://miro.medium.com/v2/resize:fit:680/format:webp/1*8pB291c3HUI1qINUT19jrw.png"/></div><p class="je jf gj gh gi jg jh bd b be z dk translated">作者形象</p></figure><p id="71f1" class="pw-post-body-paragraph la lb jl lc b ld le km lf lg lh kp li lj lk ll lm ln lo lp lq lr ls lt lu lv io bi translated">我们已经看到了如何获取给定时间和国家的假期列表。该库的另一个有用的特性是检查给定的日期是否是假日。这样，我们可以很容易地为我们的模型/分析创建布尔特征。</p><pre class="mx my mz na gt nd lz ne nf aw ng bi"><span id="1eff" class="nh mb jl lz b gy ni nj l nk nl">de_holidays = holidays.Germany(years=[2020, 2021])</span><span id="2535" class="nh mb jl lz b gy nn nj l nk nl">"2021-12-26" in de_holidays</span></pre><p id="01f0" class="pw-post-body-paragraph la lb jl lc b ld le km lf lg lh kp li lj lk ll lm ln lo lp lq lr ls lt lu lv io bi translated">运行上面的代码片段会返回一个<code class="fe lw lx ly lz b">True</code>。使用列表理解，我们可以快速地将相同的逻辑应用于整个日期列。</p><figure class="mx my mz na gt ix"><div class="bz fp l di"><div class="nb nc l"/></div></figure><figure class="mx my mz na gt ix gh gi paragraph-image"><div class="gh gi no"><img src="../Images/92e314228d8f2b2d4f23de4b6b3b9b87.png" data-original-src="https://miro.medium.com/v2/resize:fit:408/format:webp/1*jfZDM-IulE6URuBRV_CBtg.png"/></div><p class="je jf gj gh gi jg jh bd b be z dk translated">作者形象</p></figure><p id="1c3e" class="pw-post-body-paragraph la lb jl lc b ld le km lf lg lh kp li lj lk ll lm ln lo lp lq lr ls lt lu lv io bi translated"><em class="np">趣闻</em>:库中有一些小而有趣的不一致。对于绝大多数国家，我们需要使用<code class="fe lw lx ly lz b">holidays.country_name</code>，就像我们已经对德国所做的那样。但是，也有一些像波兰这样的边缘案例。为了得到波兰假期，我们必须使用<code class="fe lw lx ly lz b">holidays.Polish</code>。没什么大不了的，但我发现为什么会这样很有趣。</p><h1 id="3b67" class="ma mb jl bd mc md me mf mg mh mi mj mk kr ml ks mm ku mn kv mo kx mp ky mq mr bi translated">2.工作日历</h1><p id="ee84" class="pw-post-body-paragraph la lb jl lc b ld ms km lf lg mt kp li lj mu ll lm ln mv lp lq lr mw lt lu lv io bi translated">我们今天介绍的第二个库是<code class="fe lw lx ly lz b">workalendar</code>，它类似于<code class="fe lw lx ly lz b">holidays</code>，提供了识别大约80个国家(其中一些包括地区)的假日的可能性。</p><p id="dbca" class="pw-post-body-paragraph la lb jl lc b ld le km lf lg lh kp li lj lk ll lm ln lo lp lq lr ls lt lu lv io bi translated">我们从下载2020年的德国假期开始。与<code class="fe lw lx ly lz b">holidays</code>相反，我们必须一年一年地工作。</p><figure class="mx my mz na gt ix"><div class="bz fp l di"><div class="nb nc l"/></div></figure><figure class="mx my mz na gt ix gh gi paragraph-image"><div class="gh gi nq"><img src="../Images/3a7fe1840f89cf68c20d7dfcbdba9892.png" data-original-src="https://miro.medium.com/v2/resize:fit:636/format:webp/1*U-blMSdcy4bo9PNq0esqIQ.png"/></div><p class="je jf gj gh gi jg jh bd b be z dk translated">作者形象</p></figure><p id="2f67" class="pw-post-body-paragraph la lb jl lc b ld le km lf lg lh kp li lj lk ll lm ln lo lp lq lr ls lt lu lv io bi translated">我们可以很容易地发现两个库的输出之间有两点不同。首先，<code class="fe lw lx ly lz b">workalendar</code>的节日名称是英文的，而在<code class="fe lw lx ly lz b">holidays</code>是当地语言。第二，<code class="fe lw lx ly lz b">workalendar</code>将德国2020年的假期确定为少一天——Reformation Day/Reformationstag(2020–10–31)。根据对维基百科的快速浏览，这可能是因为今天是休息日，但不是在德国的所有地区。</p><p id="edd9" class="pw-post-body-paragraph la lb jl lc b ld le km lf lg lh kp li lj lk ll lm ln lo lp lq lr ls lt lu lv io bi translated">作为下一步，我们还可以检查任何日期是否是假日。为此，我们使用实例化日历对象的<code class="fe lw lx ly lz b">is_working_day</code>方法。</p><pre class="mx my mz na gt nd lz ne nf aw ng bi"><span id="9f1c" class="nh mb jl lz b gy ni nj l nk nl">de_calendar.is_working_day(date(2020, 1, 1))</span></pre><p id="da32" class="pw-post-body-paragraph la lb jl lc b ld le km lf lg lh kp li lj lk ll lm ln lo lp lq lr ls lt lu lv io bi translated">答案是<code class="fe lw lx ly lz b">False</code>。<code class="fe lw lx ly lz b">workalendar</code>有一些<code class="fe lw lx ly lz b">holidays</code>中没有的更有用的功能。首先，我们可以使用<code class="fe lw lx ly lz b">add_working_days</code>方法轻松地将工作(业务)日期添加到任何日期。</p><pre class="mx my mz na gt nd lz ne nf aw ng bi"><span id="5550" class="nh mb jl lz b gy ni nj l nk nl">de_calendar.add_working_days(date(2020, 12, 24), 5)</span></pre><p id="038c" class="pw-post-body-paragraph la lb jl lc b ld le km lf lg lh kp li lj lk ll lm ln lo lp lq lr ls lt lu lv io bi translated">它返回</p><pre class="mx my mz na gt nd lz ne nf aw ng bi"><span id="034e" class="nh mb jl lz b gy ni nj l nk nl">datetime.date(2021, 1, 4)</span></pre><p id="9cb7" class="pw-post-body-paragraph la lb jl lc b ld le km lf lg lh kp li lj lk ll lm ln lo lp lq lr ls lt lu lv io bi translated">其次，我们可以很容易地得到两个日期之间的工作天数。</p><pre class="mx my mz na gt nd lz ne nf aw ng bi"><span id="1735" class="nh mb jl lz b gy ni nj l nk nl">de_calendar.get_working_days_delta(date(2021, 1, 1), date(2021, 1, 31))</span><span id="97db" class="nh mb jl lz b gy nn nj l nk nl"># Answer: 20</span></pre><p id="365a" class="pw-post-body-paragraph la lb jl lc b ld le km lf lg lh kp li lj lk ll lm ln lo lp lq lr ls lt lu lv io bi translated">该库还包含一些其他有趣的功能，例如:</p><ul class=""><li id="901e" class="nr ns jl lc b ld le lg lh lj nt ln nu lr nv lv nw nx ny nz bi translated">获取可变日期假期(<code class="fe lw lx ly lz b">get_variable_days</code>)，</li><li id="afe3" class="nr ns jl lc b ld oa lg ob lj oc ln od lr oe lv nw nx ny nz bi translated">获取一年中特定假日的日期(例如，<code class="fe lw lx ly lz b">get_ascension_thursday</code>)，</li><li id="27a4" class="nr ns jl lc b ld oa lg ob lj oc ln od lr oe lv nw nx ny nz bi translated">得到一个月的最后一个工作日(<code class="fe lw lx ly lz b">get_last_weekday_in_month</code>)。</li></ul><p id="ec21" class="pw-post-body-paragraph la lb jl lc b ld le km lf lg lh kp li lj lk ll lm ln lo lp lq lr ls lt lu lv io bi translated">有趣的事实:一些日历可能需要天文计算(例如，亚洲日历需要春分和节气)。在这种情况下，<code class="fe lw lx ly lz b">workalendar</code>提供1991-2051年的预计算值。</p><h1 id="9ef4" class="ma mb jl bd mc md me mf mg mh mi mj mk kr ml ks mm ku mn kv mo kx mp ky mq mr bi translated">外卖食品</h1><ul class=""><li id="88cc" class="nr ns jl lc b ld ms lg mt lj of ln og lr oh lv nw nx ny nz bi translated">使用<code class="fe lw lx ly lz b">holidays</code>或<code class="fe lw lx ly lz b">workalendar</code>，我们可以很容易地计算出许多国家的假日日期，</li><li id="1dde" class="nr ns jl lc b ld oa lg ob lj oc ln od lr oe lv nw nx ny nz bi translated">我们可以使用这些信息来创建机器学习模型或探索性分析的特征。</li></ul><p id="df18" class="pw-post-body-paragraph la lb jl lc b ld le km lf lg lh kp li lj lk ll lm ln lo lp lq lr ls lt lu lv io bi translated">您可以在我的<a class="ae ji" href="https://github.com/erykml/medium_articles/blob/master/Time%20Series/holidays.ipynb" rel="noopener ugc nofollow" target="_blank"> GitHub </a>上找到本文使用的代码。此外，欢迎任何建设性的反馈。你可以在<a class="ae ji" href="https://twitter.com/erykml1?source=post_page---------------------------" rel="noopener ugc nofollow" target="_blank">推特</a>或评论中联系我。</p><p id="3999" class="pw-post-body-paragraph la lb jl lc b ld le km lf lg lh kp li lj lk ll lm ln lo lp lq lr ls lt lu lv io bi translated">喜欢这篇文章吗？成为一个媒介成员，通过无限制的阅读继续学习。如果你使用<a class="ae ji" href="https://eryk-lewinson.medium.com/membership" rel="noopener">这个链接</a>成为会员，你将支持我，而不需要额外的费用。提前感谢，再见！</p><p id="e85e" class="pw-post-body-paragraph la lb jl lc b ld le km lf lg lh kp li lj lk ll lm ln lo lp lq lr ls lt lu lv io bi translated">您可能还会对以下内容感兴趣:</p><div class="iu iv gp gr iw oi"><a rel="noopener follow" target="_blank" href="/8-more-useful-pandas-functionalities-for-your-analyses-ef87dcfe5d74"><div class="oj ab fo"><div class="ok ab ol cl cj om"><h2 class="bd jm gy z fp on fr fs oo fu fw jk bi translated">用于分析的8个更有用的熊猫功能</h2><div class="op l"><h3 class="bd b gy z fp on fr fs oo fu fw dk translated">它们可以让你的日常工作更轻松、更快捷</h3></div><div class="oq l"><p class="bd b dl z fp on fr fs oo fu fw dk translated">towardsdatascience.com</p></div></div><div class="or l"><div class="os l ot ou ov or ow jc oi"/></div></div></a></div><div class="iu iv gp gr iw oi"><a rel="noopener follow" target="_blank" href="/introduction-to-hierarchical-time-series-forecasting-part-ii-e73dfd3de86b"><div class="oj ab fo"><div class="ok ab ol cl cj om"><h2 class="bd jm gy z fp on fr fs oo fu fw jk bi translated">分层时间序列预测简介—第二部分</h2><div class="op l"><h3 class="bd b gy z fp on fr fs oo fu fw dk translated">Python中使用scikit-hts的示例</h3></div><div class="oq l"><p class="bd b dl z fp on fr fs oo fu fw dk translated">towardsdatascience.com</p></div></div><div class="or l"><div class="ox l ot ou ov or ow jc oi"/></div></div></a></div><div class="iu iv gp gr iw oi"><a rel="noopener follow" target="_blank" href="/linkedins-response-to-prophet-silverkite-and-greykite-4fd0131f64cb"><div class="oj ab fo"><div class="ok ab ol cl cj om"><h2 class="bd jm gy z fp on fr fs oo fu fw jk bi translated">LinkedIn对Prophet-silver kite和Greykite的回应</h2><div class="op l"><h3 class="bd b gy z fp on fr fs oo fu fw dk translated">时间序列预测新算法综述</h3></div><div class="oq l"><p class="bd b dl z fp on fr fs oo fu fw dk translated">towardsdatascience.com</p></div></div><div class="or l"><div class="oy l ot ou ov or ow jc oi"/></div></div></a></div><h1 id="c521" class="ma mb jl bd mc md me mf mg mh mi mj mk kr ml ks mm ku mn kv mo kx mp ky mq mr bi translated">参考</h1><ul class=""><li id="03f6" class="nr ns jl lc b ld ms lg mt lj of ln og lr oh lv nw nx ny nz bi translated"><a class="ae ji" href="https://github.com/dr-prodigy/python-holidays" rel="noopener ugc nofollow" target="_blank">https://github.com/dr-prodigy/python-holidays</a></li><li id="5297" class="nr ns jl lc b ld oa lg ob lj oc ln od lr oe lv nw nx ny nz bi translated"><a class="ae ji" href="https://github.com/workalendar/workalendar" rel="noopener ugc nofollow" target="_blank">https://github.com/workalendar/workalendar</a></li></ul></div></div>    
</body>
</html>