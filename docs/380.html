<html>
<head>
<title>Estimate pi using random numbers</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用随机数估计圆周率</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/estimate-pi-using-random-numbers-8b13a7e8c791#2022-01-13">https://towardsdatascience.com/estimate-pi-using-random-numbers-8b13a7e8c791#2022-01-13</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""><h1 id="656e" class="pw-post-title ir is it bd iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp bi translated">使用随机数估计圆周率</h1></div><div class=""><h2 id="06c4" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">通过和Julia一起计算π来回答这个面试问题</h2></div><p id="bd30" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">好吧，所以我真的应该在圆周率日(3月14日)发表这篇文章，但我认为这不会发生，所以无论如何在这里。让我们在Julia中使用随机数来估计圆周率——当然😉。</p><figure class="lf lg lh li gt lj gh gi paragraph-image"><div role="button" tabindex="0" class="lk ll di lm bf ln"><div class="gh gi le"><img src="../Images/2a387a15800cb9c0e4b117d7e584a76f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*M_eTumPx_zSgB7inxesG9w.jpeg"/></div></div><p class="lq lr gj gh gi ls lt bd b be z dk translated">雨果·艾特肯在<a class="ae lu" href="https://unsplash.com/s/photos/pie?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure><p id="4134" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这篇文章的灵感来自霍马的视频。有兴趣的话去看看他的频道。他是个怪人，但他是个好人。😃</p><figure class="lf lg lh li gt lj"><div class="bz fp l di"><div class="lv lw l"/></div><p class="lq lr gj gh gi ls lt bd b be z dk translated">视频由<a class="ae lu" href="https://www.youtube.com/channel/UCV0qA-eDDICsRR9rPcnG7tw" rel="noopener ugc nofollow" target="_blank">霍马理工</a></p></figure><blockquote class="lx"><p id="7927" class="ly lz it bd ma mb mc md me mf mg ld dk translated">要获得所有媒体文章的完整信息——包括我的——可以考虑在这里订阅<a class="ae lu" href="https://niczky12.medium.com/membership" rel="noopener"/>。</p></blockquote><h1 id="9c63" class="mh mi it bd mj mk ml mm mn mo mp mq mr jz ms ka mt kc mu kd mv kf mw kg mx my bi translated">这个想法</h1><p id="8edb" class="pw-post-body-paragraph ki kj it kk b kl mz ju kn ko na jx kq kr nb kt ku kv nc kx ky kz nd lb lc ld im bi translated">这个任务有点奇怪，但是一旦你深入研究就会明白:<strong class="kk iu">你会得到一个随机数发生器，你的任务是估计圆周率。</strong></p><figure class="lf lg lh li gt lj gh gi paragraph-image"><div role="button" tabindex="0" class="lk ll di lm bf ln"><div class="gh gi ne"><img src="../Images/cd798fb2f94fd92361ebb96eb6dae2cc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Bd4ESu8E1XxHLukOb5Q4-A.jpeg"/></div></div><p class="lq lr gj gh gi ls lt bd b be z dk translated">照片由<a class="ae lu" href="https://unsplash.com/s/photos/dart?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的<a class="ae lu" href="https://unsplash.com/@visualsbyroyalz?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Anastase Maragos </a>拍摄</p></figure><p id="0779" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">想象一下向飞镖靶投掷飞镖。如果你知道你每次都会击中棋盘，但飞镖的位置是均匀分布的，那么飞镖落在棋盘上半部的可能性有多大？直觉上是50%。为什么？因为上半部分的面积是下半部分的面积。</p><p id="e3d4" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们将利用这一事实，开始在(-1，-1)和(1，1)的正方形内一次绘制2个随机数(也称为2D点或向量)，如下所示:</p><figure class="lf lg lh li gt lj gh gi paragraph-image"><div class="gh gi nf"><img src="../Images/fcf20fbb9da288f5fac45a3f1accca55.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/format:webp/1*hnS7GrHH-ucp5qR47_E9nA.png"/></div><p class="lq lr gj gh gi ls lt bd b be z dk translated">作者使用Plots.jl制作的图</p></figure><p id="8714" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">方便的是，这个正方形适合半径= 1的单位圆。所以如果向量的长度大于1，那么我们的点在圆外，如果小于1，那么它一定在单位圆内。</p><figure class="lf lg lh li gt lj gh gi paragraph-image"><div class="gh gi nf"><img src="../Images/5a73cce14efc423a2d070ada9befff4e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/format:webp/1*n8FEbFTL8c2xu3E2trU2lw.png"/></div><p class="lq lr gj gh gi ls lt bd b be z dk translated">单位圆正好适合，有2个例子点——作者做的</p></figure><p id="914a" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">然后，我们多次随机抽取点，并计算我们从圆内和圆外抽取点的次数。该比率应该接近圆和正方形的面积比:</p><figure class="lf lg lh li gt lj gh gi paragraph-image"><div class="gh gi ng"><img src="../Images/b17c5edb70a216b96911c0401a74e3af.png" data-original-src="https://miro.medium.com/v2/resize:fit:396/format:webp/1*8kBhAyxnF9zpe2Jj4REg-A.png"/></div><p class="lq lr gj gh gi ls lt bd b be z dk translated">圆形和正方形代表形状的面积。</p></figure><p id="b362" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">也就是说，我们将圆内的点数除以正方形内的点数，再乘以4，得到圆周率。</p><p id="72a8" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">让我们用Julia来编码吧！🤓</p><h1 id="ff4b" class="mh mi it bd mj mk ml mm mn mo mp mq mr jz nh ka mt kc ni kd mv kf nj kg mx my bi translated">随机抽取一个点</h1><figure class="lf lg lh li gt lj gh gi paragraph-image"><div role="button" tabindex="0" class="lk ll di lm bf ln"><div class="gh gi nk"><img src="../Images/32827178b72798a8221a58d550802b2f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_K9auu3wBBvXBepXy94FYg.jpeg"/></div></div><p class="lq lr gj gh gi ls lt bd b be z dk translated">克里斯·贾维斯在<a class="ae lu" href="https://unsplash.com/s/photos/marbles?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure><p id="923a" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在我们开始画点之前，让我们导入几个库来简化我们的生活。</p><figure class="lf lg lh li gt lj"><div class="bz fp l di"><div class="nl lw l"/></div></figure><p id="c80a" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这些库是:</p><ul class=""><li id="3dd9" class="nm nn it kk b kl km ko kp kr no kv np kz nq ld nr ns nt nu bi translated"><a class="ae lu" href="https://github.com/JuliaPlots/Plots.jl" rel="noopener ugc nofollow" target="_blank"> Plots.jl </a>用于稍后惊人且超级简单的绘图。</li><li id="6280" class="nm nn it kk b kl nv ko nw kr nx kv ny kz nz ld nr ns nt nu bi translated">用于设置随机数种子的内置随机模块。</li><li id="cfdf" class="nm nn it kk b kl nv ko nw kr nx kv ny kz nz ld nr ns nt nu bi translated"><a class="ae lu" href="https://github.com/JuliaStats/Distributions.jl" rel="noopener ugc nofollow" target="_blank"> Distributions.jl </a>便于获取均匀随机分布。</li><li id="6fb6" class="nm nn it kk b kl nv ko nw kr nx kv ny kz nz ld nr ns nt nu bi translated">内置的Printf，这样我们以后可以更容易地将浮点数格式化为字符串。</li></ul><p id="1b22" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">现在我们已经有了所有的工具，让我们创建一个函数:</p><figure class="lf lg lh li gt lj"><div class="bz fp l di"><div class="nl lw l"/></div></figure><p id="cc62" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">如果你对朱莉娅不熟悉，我会尽最大努力打开所有这些东西。</p><ul class=""><li id="8dc4" class="nm nn it kk b kl km ko kp kr no kv np kz nq ld nr ns nt nu bi translated"><code class="fe oa ob oc od b">rand(distribution, 2)</code>从第3行定义的均匀分布中绘制一个长度为<strong class="kk iu">2的向量，即在-1和1之间。</strong></li><li id="238f" class="nm nn it kk b kl nv ko nw kr nx kv ny kz nz ld nr ns nt nu bi translated"><code class="fe oa ob oc od b">v .^ 2</code>使用<strong class="kk iu">广播运算符</strong>来计算v的所有元素的平方，所以你得到(x，y)。</li><li id="57e2" class="nm nn it kk b kl nv ko nw kr nx kv ny kz nz ld nr ns nt nu bi translated"><code class="fe oa ob oc od b">sum(v .^ 2) &lt;= 1</code>根据矢量的<strong class="kk iu">长度，逐个元素检查该点是否在单位圆</strong>内<strong class="kk iu">。x + y ≤ 1则(x，y)在圆内。</strong></li><li id="e988" class="nm nn it kk b kl nv ko nw kr nx kv ny kz nz ld nr ns nt nu bi translated">最后，我们只需计算圆内点与我们采集的样本数量的<strong class="kk iu">比率，乘以4，我们就有了我们的估计值。🎉</strong></li></ul><p id="d6c1" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">让我们尝试一下——本着可再现性的精神，我将在调用该函数之前设置随机数种子，因此您应该会得到相同的确切结果。</p><pre class="lf lg lh li gt oe od of og aw oh bi"><span id="ee07" class="oi mi it od b gy oj ok l ol om">julia&gt; Random.seed!(42)<br/>MersenneTwister(42)</span><span id="e7e6" class="oi mi it od b gy on ok l ol om">julia&gt; estimate = pi_estimator(10_000_000)<br/>3.1422016</span><span id="0596" class="oi mi it od b gy on ok l ol om">julia&gt; abs(π - estimate)<br/>0.0006089464102068121</span></pre><p id="d41e" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这看起来很接近我。😃</p><blockquote class="oo op oq"><p id="598f" class="ki kj or kk b kl km ju kn ko kp jx kq os ks kt ku ot kw kx ky ou la lb lc ld im bi translated">Julia有一个内置的pi常量，您可以通过键入<code class="fe oa ob oc od b">\pi</code>并按tab键来访问它。这将自动完成Unicode pi字符:π。</p></blockquote><h1 id="72e9" class="mh mi it bd mj mk ml mm mn mo mp mq mr jz nh ka mt kc ni kd mv kf nj kg mx my bi translated">搞点剧情！</h1><figure class="lf lg lh li gt lj gh gi paragraph-image"><div role="button" tabindex="0" class="lk ll di lm bf ln"><div class="gh gi ov"><img src="../Images/ac540d93958f4c7eb54e90bdaa5f4090.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*lJNnZXE5CGvnFvKa2L_C9Q.jpeg"/></div></div><p class="lq lr gj gh gi ls lt bd b be z dk translated">这是我在绘图时的感受——照片由<a class="ae lu" href="https://unsplash.com/@senjuti?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">森居提·昆杜</a>在<a class="ae lu" href="https://unsplash.com/s/photos/paint?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</p></figure><p id="414f" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">现在我们有了一个估计器，它给了我们一个相当不错的结果，如果我们能够<strong class="kk iu">可视化我们如何得到这个估计值</strong>，那将会非常酷。</p><p id="0b84" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">让我们首先修改我们的函数，这样我们不仅返回最终估计，而且返回所有绘制的向量<code class="fe oa ob oc od b">v</code>和中间估计。我们可以将它们收集到两个数组中，分别命名为<code class="fe oa ob oc od b">samples</code>和<code class="fe oa ob oc od b">estimates</code>。</p><blockquote class="lx"><p id="ae98" class="ly lz it bd ma mb ow ox oy oz pa ld dk translated">无论是在函数内部还是外部，都要使用合理的变量名称。你未来的自己会感谢你的！</p></blockquote><figure class="pb pc pd pe pf lj"><div class="bz fp l di"><div class="nl lw l"/></div></figure><p id="3ee2" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">调用此函数后，您可以<strong class="kk iu">将最后返回的元组</strong>解包到估计值和样本的两个数组中:</p><figure class="lf lg lh li gt lj"><div class="bz fp l di"><div class="nl lw l"/></div></figure><p id="9b78" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">有点忘乎所以，根据我们的估计称之为<code class="fe oa ob oc od b">plot</code>:</p><figure class="lf lg lh li gt lj gh gi paragraph-image"><div class="gh gi nf"><img src="../Images/fd379249e13d4d87a2a4985a97d55b88.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/format:webp/1*YLBBHZFO0O16Ne-KmV9D5g.png"/></div><p class="lq lr gj gh gi ls lt bd b be z dk translated">当我们采样更多的点时，我们的估计。—由作者创建。</p></figure><p id="c5bb" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我已经整理好了，并制作了另一个函数来绘制绘制的点。不要忘记所有的代码都存在于<a class="ae lu" href="https://github.com/niczky12/medium/blob/master/julia/estimate_pi_rand.jl" rel="noopener ugc nofollow" target="_blank"> GitHub </a>上。</p><figure class="lf lg lh li gt lj"><div class="bz fp l di"><div class="nl lw l"/></div></figure><p id="11d1" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">如果你仔细看了上面的内容，你会注意到我给绘图函数添加了一个<code class="fe oa ob oc od b">i</code>参数。这是为了让我可以在<code class="fe oa ob oc od b">i</code>迭代后绘制图形。为什么？嗯，因为我喜欢gifs</p><figure class="lf lg lh li gt lj"><div class="bz fp l di"><div class="pg lw l"/></div><p class="lq lr gj gh gi ls lt bd b be z dk translated">不，不是这种Gif——来自GIPHY.com的Gif</p></figure><p id="eb45" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这些类型的gif:</p><figure class="lf lg lh li gt lj gh gi paragraph-image"><div class="gh gi nf"><img src="../Images/63b303262587bb3ecfddfcc856155172.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/1*7bU-rI7AgVLOJekp2U7VSA.gif"/></div><p class="lq lr gj gh gi ls lt bd b be z dk translated">这整篇文章在1 gif——作者制作的Gif</p></figure><p id="26dc" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">是的，我将向您展示如何使用<code class="fe oa ob oc od b">Plots.jl</code>包中的一个简单宏来实现这一点。</p><figure class="lf lg lh li gt lj"><div class="bz fp l di"><div class="nl lw l"/></div></figure></div><div class="ab cl ph pi hx pj" role="separator"><span class="pk bw bk pl pm pn"/><span class="pk bw bk pl pm pn"/><span class="pk bw bk pl pm"/></div><div class="im in io ip iq"><p id="e836" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这是结局，但我这里有更多的朱莉娅内容:</p><div class="po pp gp gr pq pr"><a rel="noopener follow" target="_blank" href="/vectorize-everything-with-julia-ad04a1696944"><div class="ps ab fo"><div class="pt ab pu cl cj pv"><h2 class="bd iu gy z fp pw fr fs px fu fw is bi translated">向量化朱莉娅的一切</h2><div class="py l"><h3 class="bd b gy z fp pw fr fs px fu fw dk translated">告别for loops，广播所有的东西</h3></div><div class="pz l"><p class="bd b dl z fp pw fr fs px fu fw dk translated">towardsdatascience.com</p></div></div><div class="qa l"><div class="qb l qc qd qe qa qf lo pr"/></div></div></a></div><div class="po pp gp gr pq pr"><a rel="noopener follow" target="_blank" href="/index-sort-and-aggregate-your-dataframes-in-julia-38646daf6214"><div class="ps ab fo"><div class="pt ab pu cl cj pv"><h2 class="bd iu gy z fp pw fr fs px fu fw is bi translated">在Julia中索引、排序和聚集你的数据帧</h2><div class="py l"><h3 class="bd b gy z fp pw fr fs px fu fw dk translated">使用DataFrames.jl进行常见数据分析的教程</h3></div><div class="pz l"><p class="bd b dl z fp pw fr fs px fu fw dk translated">towardsdatascience.com</p></div></div><div class="qa l"><div class="qg l qc qd qe qa qf lo pr"/></div></div></a></div></div><div class="ab cl ph pi hx pj" role="separator"><span class="pk bw bk pl pm pn"/><span class="pk bw bk pl pm pn"/><span class="pk bw bk pl pm"/></div><div class="im in io ip iq"><h1 id="0f55" class="mh mi it bd mj mk qh mm mn mo qi mq mr jz qj ka mt kc qk kd mv kf ql kg mx my bi translated">摘要🎉</h1><p id="7a04" class="pw-post-body-paragraph ki kj it kk b kl mz ju kn ko na jx kq kr nb kt ku kv nc kx ky kz nd lb lc ld im bi translated">希望这篇文章<strong class="kk iu">能和霍马的视频</strong>一样有趣——可能不会😆。</p><p id="80b8" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">至少，现在您知道如何:</p><ul class=""><li id="ef4e" class="nm nn it kk b kl km ko kp kr no kv np kz nq ld nr ns nt nu bi translated">用面积和随机数估计圆周率。</li><li id="1cb8" class="nm nn it kk b kl nv ko nw kr nx kv ny kz nz ld nr ns nt nu bi translated">从朱莉娅的均匀分布中得出结论。</li><li id="42a2" class="nm nn it kk b kl nv ko nw kr nx kv ny kz nz ld nr ns nt nu bi translated">绘制一些图表。</li><li id="33cd" class="nm nn it kk b kl nv ko nw kr nx kv ny kz nz ld nr ns nt nu bi translated">将这些图链接成一个gif。</li></ul><figure class="lf lg lh li gt lj"><div class="bz fp l di"><div class="qm lw l"/></div><p class="lq lr gj gh gi ls lt bd b be z dk translated">拜托了。——GIPHY.com上的Gif</p></figure></div></div>    
</body>
</html>