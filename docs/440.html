<html>
<head>
<title>A Simple Way to Segment Customers Using Google BigQuery and Data Studio</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Google BigQuery和Data Studio对客户进行细分的简单方法</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/a-simple-way-to-segment-customers-using-google-bigquery-and-data-studio-f31c8896cc52#2022-01-15">https://towardsdatascience.com/a-simple-way-to-segment-customers-using-google-bigquery-and-data-studio-f31c8896cc52#2022-01-15</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""><h1 id="573a" class="pw-post-title io ip iq bd ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm bi translated">使用Google BigQuery和Data Studio对客户进行细分的简单方法</h1></div><div class=""><h2 id="c563" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">RFM分割和结果段可视化指南</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/be568fb60e737261bc3366eb7980b2a9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*_JdVbacIoRGlTjt4"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">亚采克·迪拉格在<a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</p></figure><p id="063b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">迎合成千上万的顾客可能很难——每个顾客都有他们自己的需求，满足他们似乎是一个永无止境的挑战。这就是市场细分能够带来好处的地方。</p><p id="7e10" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><a class="ae kv" href="https://hbr.org/2014/07/what-you-need-to-know-about-segmentation" rel="noopener ugc nofollow" target="_blank">市场细分是指根据客户的需求和偏好，将一组客户划分为多个客户子群。</a>属于同一细分市场的客户会有大致相似的需求和偏好。这种分析使公司更容易定制产品和服务，以满足每个细分市场的需求。</p><p id="696d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">有多种方法可以对客户进行细分，从简单的按人口统计数据分组(如男性与女性、年龄组或世代)以及按国家分组，到更复杂的多元统计技术(如聚类分析)不等。在本文中，我将演示一个使用百分位数的简单方法，它可以应用于任何零售购买数据。</p><p id="8897" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">除了细分分析之外，我还将展示一种可视化细分的方法，这种方法对于公司决策者来说是可行的。为了给出一个预览，下面是我用Google Data Studio创建的仪表板:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ls lt l"/></div></figure></div><div class="ab cl lu lv hu lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="ij ik il im in"><h1 id="e913" class="mb mc iq bd md me mf mg mh mi mj mk ml jw mm jx mn jz mo ka mp kc mq kd mr ms bi translated"><strong class="ak">什么是RFM分割？</strong></h1><p id="ca31" class="pw-post-body-paragraph kw kx iq ky b kz mt jr lb lc mu ju le lf mv lh li lj mw ll lm ln mx lp lq lr ij bi translated">RFM代表近期、频率和货币。分析了以下购买行为:</p><ul class=""><li id="91a7" class="my mz iq ky b kz la lc ld lf na lj nb ln nc lr nd ne nf ng bi translated">最近——最近一次交易的时间。我们希望不断吸引最近的购买者，并发现为什么最近的购买者会流失。</li><li id="428f" class="my mz iq ky b kz nh lc ni lf nj lj nk ln nl lr nd ne nf ng bi translated">频率——客户从我们这里购买的次数。</li><li id="79f0" class="my mz iq ky b kz nh lc ni lf nj lj nk ln nl lr nd ne nf ng bi translated">货币——每位客户为我们的产品和服务支付的金额。</li></ul><p id="24e1" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">使用这三条信息，我们可以得出一个分组，这将有助于通知战略业务决策。例如，<a class="ae kv" href="https://dma.org.uk/article/use-rfm-modelling-to-generate-successful-customer-segments" rel="noopener ugc nofollow" target="_blank">英国数据&amp;营销协会(DMA)布局了11个细分市场，并根据各自的特点指定了营销策略</a>:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nm"><img src="../Images/96a72bf2ee5e984187fd38d53d96a547.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6tvLbISDiwQKgmHAzkwiQw.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">来源:<a class="ae kv" href="https://dma.org.uk/article/use-rfm-modelling-to-generate-successful-customer-segments" rel="noopener ugc nofollow" target="_blank">英国数据&amp;营销协会</a></p></figure><p id="62a8" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">请注意，这种类型的细分侧重于实际的购买行为，而忽略了消费者在动机、意图和生活方式上的差异。尽管如此，RFM仍是一个有用的起点，而且由于其简单性，可以以自动化的方式快速执行，让企业有能力迅速采取行动并决定商业战略。</p></div><div class="ab cl lu lv hu lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="ij ik il im in"><h1 id="515d" class="mb mc iq bd md me mf mg mh mi mj mk ml jw mm jx mn jz mo ka mp kc mq kd mr ms bi translated"><strong class="ak">数据集</strong></h1><p id="854d" class="pw-post-body-paragraph kw kx iq ky b kz mt jr lb lc mu ju le lf mv lh li lj mw ll lm ln mx lp lq lr ij bi translated">本演示使用的数据是来自UCI机器学习库的<a class="ae kv" href="https://archive.ics.uci.edu/ml/datasets/Online+Retail#" rel="noopener ugc nofollow" target="_blank">在线零售数据集。它是一个数据集，包含来自在线零售店的交易。包含销售和订单日期的任何其他数据集都可以用于进行相同的分析。</a></p><p id="b6ae" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这些数据是从网站上下载的，然后手动上传到Google BigQuery，这是一个可扩展的、具有成本效益的数据仓库。如果您的数据来自在线商店，可以设置集成，以便数据从商店流向第三方连接器，然后流向您的BigQuery仓库。如果您有这样的设置，数据将定期刷新，确保您获得关于您的业务的最新见解。</p><p id="8aa4" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我不会详细介绍如何建立数据仓库，因为我打算更多地关注分析和可视化，但BigQuery有相当广泛的文档<a class="ae kv" href="https://cloud.google.com/bigquery/docs#training-and-tutorials" rel="noopener ugc nofollow" target="_blank">在这里</a>，以供参考。</p><p id="599a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">用于此分析的数据已经过清理，删除了异常值和负销售值。</p></div><div class="ab cl lu lv hu lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="ij ik il im in"><h1 id="0441" class="mb mc iq bd md me mf mg mh mi mj mk ml jw mm jx mn jz mo ka mp kc mq kd mr ms bi translated"><strong class="ak">big query中的RFM分割</strong></h1><p id="fed8" class="pw-post-body-paragraph kw kx iq ky b kz mt jr lb lc mu ju le lf mv lh li lj mw ll lm ln mx lp lq lr ij bi translated">可以使用以下四个步骤来执行RFM分割:</p><ol class=""><li id="7ddf" class="my mz iq ky b kz la lc ld lf na lj nb ln nc lr nn ne nf ng bi translated">计算每个客户的近期、频率和货币价值</li><li id="1d99" class="my mz iq ky b kz nh lc ni lf nj lj nk ln nl lr nn ne nf ng bi translated">确定每个RFM度量的五分位数</li><li id="580a" class="my mz iq ky b kz nh lc ni lf nj lj nk ln nl lr nn ne nf ng bi translated">为每个RFM指标分配分数</li><li id="b541" class="my mz iq ky b kz nh lc ni lf nj lj nk ln nl lr nn ne nf ng bi translated">使用步骤3中的分数定义RFM细分市场</li></ol><p id="8724" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在这里可以访问整个代码<a class="ae kv" href="https://github.com/noemistatcat/Data_Viz_Portfolio/blob/main/online_retail_rfm.sql" rel="noopener ugc nofollow" target="_blank"><strong class="ky ir"/></a><strong class="ky ir"/>，但是我将详细介绍每一步并解释SQL代码块。</p><p id="f43d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir">第1步:计算每个客户的近期、频率和货币价值</strong></p><p id="9e7a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">对于货币来说，这只是销售额的简单总和，而对于频率来说，这是每个客户的不同发票号码的计数。</p><p id="3e2e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">对于最近，我选择了一个参考日期，即数据集中最近的购买日期。在其他情况下，可以选择分析数据的日期。</p><p id="01b5" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">选择参考日期后，我们得到每个客户的参考日期和最后购买日期之间的日期差。这是特定客户的最近值。</p><p id="c93f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">以下是用于计算的代码片段:</p><pre class="kg kh ki kj gt no np nq nr aw ns bi"><span id="5214" class="nt mc iq np b gy nu nv l nw nx">WITH <br/>--Compute for F &amp; M<br/>t1 AS (<br/>    SELECT  <br/>    CustomerID,<br/>    Country,<br/>    MAX(InvoiceDate) AS last_purchase_date,<br/>    COUNT(DISTINCT InvoiceNo) AS frequency,<br/>    SUM(Sales) AS monetary <br/>    FROM `online_retail_preprocessed_nooutliers`<br/>    GROUP BY CustomerID, Country <br/>),</span><span id="94df" class="nt mc iq np b gy ny nv l nw nx">--Compute for R<br/>t2 AS (<br/>    SELECT *,<br/>    DATE_DIFF(reference_date, last_purchase_date, DAY) AS recency<br/>    FROM (<br/>        SELECT  *,<br/>        MAX(last_purchase_date) OVER () + 1 AS reference_date<br/>        FROM t1<br/>    )  <br/>),</span></pre><p id="7960" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir">第二步:确定每个RFM指标的五分位数</strong></p><p id="24d8" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">下一步是根据客户的RFM价值将他们分成五等份<a class="ae kv" href="https://www.investopedia.com/terms/q/quintile.asp" rel="noopener ugc nofollow" target="_blank">组</a>——我们根据他们在RFM指标中得分的高低将客户分成五等份。我们对每个客户的新近性、频率和货币价值都这样做。我使用BigQuery的APPROX_QUANTILES()来实现这一点:</p><pre class="kg kh ki kj gt no np nq nr aw ns bi"><span id="8c6d" class="nt mc iq np b gy nu nv l nw nx">t3 AS (<br/>SELECT <br/>    a.*,<br/>    --All percentiles for MONETARY<br/>    b.percentiles[offset(20)] AS m20, <br/>    b.percentiles[offset(40)] AS m40,<br/>    b.percentiles[offset(60)] AS m60, <br/>    b.percentiles[offset(80)] AS m80,<br/>    b.percentiles[offset(100)] AS m100,    <br/>    --All percentiles for FREQUENCY<br/>    c.percentiles[offset(20)] AS f20, <br/>    c.percentiles[offset(40)] AS f40,<br/>    c.percentiles[offset(60)] AS f60, <br/>    c.percentiles[offset(80)] AS f80,<br/>    c.percentiles[offset(100)] AS f100,    <br/>    --All percentiles for RECENCY<br/>    d.percentiles[offset(20)] AS r20, <br/>    d.percentiles[offset(40)] AS r40,<br/>    d.percentiles[offset(60)] AS r60, <br/>    d.percentiles[offset(80)] AS r80,<br/>    d.percentiles[offset(100)] AS r100<br/>FROM <br/>    t2 a,<br/>    (SELECT APPROX_QUANTILES(monetary, 100) percentiles FROM<br/>    t2) b,<br/>    (SELECT APPROX_QUANTILES(frequency, 100) percentiles FROM<br/>    t2) c,<br/>    (SELECT APPROX_QUANTILES(recency, 100) percentiles FROM<br/>    t2) d<br/>),</span></pre><p id="50a9" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir">第三步:为每个RFM指标分配分数</strong></p><p id="d302" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在我们知道了每个客户相对于其他客户在RFM值方面的表现，我们现在可以从1到5打分。</p><p id="c5da" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">请记住，虽然对于F和M，我们对更高的五分位数给予更高的分数，但R应该反过来，因为最近的客户在这一指标中应该得到更高的分数。</p><pre class="kg kh ki kj gt no np nq nr aw ns bi"><span id="c6b9" class="nt mc iq np b gy nu nv l nw nx">t4 AS (<br/>    SELECT *, <br/>    CAST(ROUND((f_score + m_score) / 2, 0) AS INT64) AS fm_score<br/>    FROM (<br/>        SELECT *, <br/>        CASE WHEN monetary &lt;= m20 THEN 1<br/>            WHEN monetary &lt;= m40 AND monetary &gt; m20 THEN 2 <br/>            WHEN monetary &lt;= m60 AND monetary &gt; m40 THEN 3 <br/>            WHEN monetary &lt;= m80 AND monetary &gt; m60 THEN 4 <br/>            WHEN monetary &lt;= m100 AND monetary &gt; m80 THEN 5<br/>        END AS m_score,<br/>        CASE WHEN frequency &lt;= f20 THEN 1<br/>            WHEN frequency &lt;= f40 AND frequency &gt; f20 THEN 2 <br/>            WHEN frequency &lt;= f60 AND frequency &gt; f40 THEN 3 <br/>            WHEN frequency &lt;= f80 AND frequency &gt; f60 THEN 4 <br/>            WHEN frequency &lt;= f100 AND frequency &gt; f80 THEN 5<br/>        END AS f_score,<br/>        --Recency scoring is reversed<br/>        CASE WHEN recency &lt;= r20 THEN 5<br/>            WHEN recency &lt;= r40 AND recency &gt; r20 THEN 4 <br/>            WHEN recency &lt;= r60 AND recency &gt; r40 THEN 3 <br/>            WHEN recency &lt;= r80 AND recency &gt; r60 THEN 2 <br/>            WHEN recency &lt;= r100 AND recency &gt; r80 THEN 1<br/>        END AS r_score,<br/>        FROM t3<br/>        )<br/>),</span></pre><p id="0460" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir">第四步:使用第三步</strong>中的分数定义RFM细分市场</p><p id="bd05" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">下一步是结合我们从第4步中获得的分数来定义每个客户将属于的RFM细分市场。</p><p id="37be" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">由于R、F和M指标各有5组，因此有125种可能的排列，这个数字对于营销策略来说太大了，难以管理。为此，我将参考在<a class="ae kv" href="https://dma.org.uk/article/use-rfm-modelling-to-generate-successful-customer-segments" rel="noopener ugc nofollow" target="_blank"> DMA指南</a>中定义的11个角色，这也是本文前面介绍的。</p><p id="4f20" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">减少细分排列的一种方法是根据平均将频率和货币方面的得分结合起来(因为无论如何它们都表示购买量)。之后，我使用DMA中的11个人物角色作为指导，并相应地定义了R与FM的分数。</p><p id="7c38" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">比如<strong class="ky ir">冠军</strong>细分市场，客户应该是最近买的，经常买的，花的最多的。因此，他们的R分数应该是5，他们的组合FM分数应该是4或5。另一方面，<strong class="ky ir">不能失去他们</strong>客户进行了最大的采购，而且经常，但是很长时间都没有退货。因此，他们的R分数应该是1，FM分数应该是4或5。</p><p id="6912" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">下面是这一步的代码片段，其余的定义也可以在这里找到:</p><pre class="kg kh ki kj gt no np nq nr aw ns bi"><span id="fce8" class="nt mc iq np b gy nu nv l nw nx">t5 AS (<br/>    SELECT <br/>        CustomerID, <br/>        Country,<br/>        recency,<br/>        frequency, <br/>        monetary,<br/>        r_score,<br/>        f_score,<br/>        m_score,<br/>        fm_score,<br/>        CASE WHEN (r_score = 5 AND fm_score = 5) <br/>            OR (r_score = 5 AND fm_score = 4) <br/>            OR (r_score = 4 AND fm_score = 5) <br/>        THEN 'Champions'<br/>        WHEN (r_score = 5 AND fm_score =3) <br/>            OR (r_score = 4 AND fm_score = 4)<br/>            OR (r_score = 3 AND fm_score = 5)<br/>            OR (r_score = 3 AND fm_score = 4)<br/>        THEN 'Loyal Customers'<br/>        WHEN (r_score = 5 AND fm_score = 2) <br/>            OR (r_score = 4 AND fm_score = 2)<br/>            OR (r_score = 3 AND fm_score = 3)<br/>            OR (r_score = 4 AND fm_score = 3)<br/>        THEN 'Potential Loyalists'<br/>        WHEN r_score = 5 AND fm_score = 1 THEN 'Recent Customers'<br/>        WHEN (r_score = 4 AND fm_score = 1) <br/>            OR (r_score = 3 AND fm_score = 1)<br/>        THEN 'Promising'<br/>        WHEN (r_score = 3 AND fm_score = 2) <br/>            OR (r_score = 2 AND fm_score = 3)<br/>            OR (r_score = 2 AND fm_score = 2)<br/>        THEN 'Customers Needing Attention'<br/>        WHEN r_score = 2 AND fm_score = 1 THEN 'About to Sleep'<br/>        WHEN (r_score = 2 AND fm_score = 5) <br/>            OR (r_score = 2 AND fm_score = 4)<br/>            OR (r_score = 1 AND fm_score = 3)<br/>        THEN 'At Risk'<br/>        WHEN (r_score = 1 AND fm_score = 5)<br/>            OR (r_score = 1 AND fm_score = 4)        <br/>        THEN 'Cant Lose Them'<br/>        WHEN r_score = 1 AND fm_score = 2 THEN 'Hibernating'<br/>        WHEN r_score = 1 AND fm_score = 1 THEN 'Lost'<br/>        END AS rfm_segment <br/>    FROM t4<br/>)</span></pre><p id="1eb7" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在此步骤之后，每个客户都应该有一个RFM细分市场分配，如下所示:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nz"><img src="../Images/2101eb8c60284cdd60e56bd8427d97ef.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0Z21CxS6AOl2RgNYJfOEHQ.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">作者图片</p></figure></div><div class="ab cl lu lv hu lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="ij ik il im in"><h1 id="ab82" class="mb mc iq bd md me mf mg mh mi mj mk ml jw mm jx mn jz mo ka mp kc mq kd mr ms bi translated">将BigQuery连接到Data Studio</h1><p id="4b86" class="pw-post-body-paragraph kw kx iq ky b kz mt jr lb lc mu ju le lf mv lh li lj mw ll lm ln mx lp lq lr ij bi translated">现在我们有了所有需要的数据。下一步是在Data Studio仪表板中可视化这些部分。要做到这一点，我们需要将BigQuery连接到Data Studio，并在Data Studio中创建一个数据源。以下是实现这一点的步骤:</p><ol class=""><li id="c5d5" class="my mz iq ky b kz la lc ld lf na lj nb ln nc lr nn ne nf ng bi translated">在Data Studio主页上，单击Create。选择数据源。</li><li id="37ad" class="my mz iq ky b kz nh lc ni lf nj lj nk ln nl lr nn ne nf ng bi translated">会出现各种各样的谷歌连接器。选择BigQuery。</li><li id="2b1c" class="my mz iq ky b kz nh lc ni lf nj lj nk ln nl lr nn ne nf ng bi translated">为事务性数据选择BigQuery项目和数据集。</li><li id="cdcc" class="my mz iq ky b kz nh lc ni lf nj lj nk ln nl lr nn ne nf ng bi translated">单击连接。</li><li id="bdcb" class="my mz iq ky b kz nh lc ni lf nj lj nk ln nl lr nn ne nf ng bi translated">数据中的所有字段都将出现。检查数据格式是否正确，并在需要时添加自定义计算字段。</li><li id="34b8" class="my mz iq ky b kz nh lc ni lf nj lj nk ln nl lr nn ne nf ng bi translated">单击创建报告。</li></ol><p id="a3a9" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">一个空白的仪表板将会出现，你现在已经准备好了有趣的部分——可视化RFM部分！</p></div><div class="ab cl lu lv hu lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="ij ik il im in"><h1 id="3bdb" class="mb mc iq bd md me mf mg mh mi mj mk ml jw mm jx mn jz mo ka mp kc mq kd mr ms bi translated">创建仪表板</h1><p id="b902" class="pw-post-body-paragraph kw kx iq ky b kz mt jr lb lc mu ju le lf mv lh li lj mw ll lm ln mx lp lq lr ij bi translated">我创建的RFM仪表板包含以下关键元素:</p><ul class=""><li id="8fe9" class="my mz iq ky b kz la lc ld lf na lj nb ln nc lr nd ne nf ng bi translated">页面过滤器</li><li id="6cff" class="my mz iq ky b kz nh lc ni lf nj lj nk ln nl lr nd ne nf ng bi translated">关键指标的最高表现</li><li id="02e5" class="my mz iq ky b kz nh lc ni lf nj lj nk ln nl lr nd ne nf ng bi translated">RFM片段大小</li><li id="1773" class="my mz iq ky b kz nh lc ni lf nj lj nk ln nl lr nd ne nf ng bi translated">详细的近期、频率和货币数据</li><li id="af11" class="my mz iq ky b kz nh lc ni lf nj lj nk ln nl lr nd ne nf ng bi translated">购买的特定产品</li></ul><p id="4d88" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir">关键指标的最高表现</strong></p><p id="06a3" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这一部分给出了业务健康状况的背景，并提供了与每个部门的绩效进行比较的基准。简单的记分卡应满足本部分的要求。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oa"><img src="../Images/50c49a270463e7925f7a42147545dfc9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fb5x_3Gi0m4c4kqTD9TV3g.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">作者图片</p></figure><p id="8c58" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir"> RFM航段尺寸</strong></p><p id="2ed3" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在进行市场细分时，将每个细分市场的相对规模可视化是一个很好的做法。这将为战略和优先顺序提供信息。例如，了解哪些细分市场对员工人数和销售额的贡献更大，可以让我们知道应该向谁寻求忠诚度优惠。</p><p id="fd3c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">使用气泡图作为一种可视化方法使我们能够一次显示三种信息:货币(气泡的大小)、频率(y轴)和最近(x轴)。这样做，我们可以看到这些片段彼此之间有多么不同。</p><p id="c115" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在本例中，我们看到冠军企业的收入相对较高，在频率方面位于y轴的上端，在最近频谱的左端。另一端是休眠和流失的客户，在图表的右下部分。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ob"><img src="../Images/bb63f02ae7a645ec38dff48151b29f8c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fOtx-QpDBs-NC0XTSaFQgQ.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">作者图片</p></figure><p id="86b4" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir">详细的近期、频率和货币数据</strong></p><p id="d28b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这一部分总结了每个细分市场在几个关键指标方面的表现:属于每个细分市场的客户数量和百分比，以及每个细分市场的平均最近值、频率和货币值。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oc"><img src="../Images/3607e01fb06e9af0f9e2ab22eed16d6d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*l6mO17PIH9B-RVLwYZwWYQ.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">作者图片</p></figure><p id="beb2" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir">购买的产品</strong></p><p id="cae5" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这一部分将让您确定某个细分市场最有可能购买的特定产品。同样，这将让我们了解大多数细分市场<em class="od">不关心购买哪些产品。</em></p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oe"><img src="../Images/fcbda547d146fbf10b3e817abfe7a7fb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ZpEns_mB1Qvcuc1pAPSlNg.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">作者图片</p></figure><p id="6831" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">对于这一部分，我必须将RFM细分结果连接到包含每个订购产品的主数据集。下面是我用来做这件事的代码:</p><pre class="kg kh ki kj gt no np nq nr aw ns bi"><span id="4bd0" class="nt mc iq np b gy nu nv l nw nx">SELECT  a.*,<br/>rfm_segment<br/>FROM `online_retail_preprocessed_nooutliers` a</span><span id="9243" class="nt mc iq np b gy ny nv l nw nx">LEFT JOIN</span><span id="0cc9" class="nt mc iq np b gy ny nv l nw nx">(SELECT CustomerID, <br/>rfm_segment<br/>FROM `online_retail_rfm`) b</span><span id="2836" class="nt mc iq np b gy ny nv l nw nx">ON a.CustomerID = b.CustomerID</span></pre></div><div class="ab cl lu lv hu lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="ij ik il im in"><h1 id="ad04" class="mb mc iq bd md me mf mg mh mi mj mk ml jw mm jx mn jz mo ka mp kc mq kd mr ms bi translated">摘要</h1><p id="7890" class="pw-post-body-paragraph kw kx iq ky b kz mt jr lb lc mu ju le lf mv lh li lj mw ll lm ln mx lp lq lr ij bi translated">在本文中，我演示了一种简单的方法来执行RFM分割，并将结果显示在仪表板中。这种类型的分析旨在帮助企业快速了解不同的客户角色，并为每个角色制定有针对性的营销行动。</p><p id="c6df" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这种类型的分析可以应用于其他零售和销售数据，只要我们有关于每个客户的近期、频率和货币行为的信息。</p><p id="b014" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">同样，这只是进行市场细分的几种方法之一。例如，<a class="ae kv" rel="noopener" target="_blank" href="/rfm-analysis-using-bigquery-ml-bfaa51b83086">在这篇中型文章</a>中，作者使用了一种更先进的统计方法(k-means算法)并利用BigQuery ML来进行分割。根据数据复杂性和时间表，由分析师和业务利益相关者决定哪种方法最合适。最后，细分市场应该足够清晰和可行，以使分析对业务有益。</p><p id="5a2e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我希望你喜欢创建自己的市场细分分析！</p><p id="4f1a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我为本文创建的所有代码都可以在我的<a class="ae kv" href="https://github.com/noemistatcat/Data_Viz_Portfolio" rel="noopener ugc nofollow" target="_blank"> <strong class="ky ir"> GitHub </strong> </a>上找到。</p></div><div class="ab cl lu lv hu lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="ij ik il im in"><p id="6a6b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">Google Data Studio和Big Query的有用资源:</p><ul class=""><li id="96ea" class="my mz iq ky b kz la lc ld lf na lj nb ln nc lr nd ne nf ng bi translated"><a class="ae kv" href="https://analytics.google.com/analytics/academy/course/10" rel="noopener ugc nofollow" target="_blank">Analytics Academy对Data Studio的介绍</a></li><li id="0111" class="my mz iq ky b kz nh lc ni lf nj lj nk ln nl lr nd ne nf ng bi translated"><a class="ae kv" href="https://www.qwiklabs.com/quests/70" rel="noopener ugc nofollow" target="_blank">营销分析师big query</a></li><li id="fe30" class="my mz iq ky b kz nh lc ni lf nj lj nk ln nl lr nd ne nf ng bi translated"><a class="ae kv" href="https://cloud.google.com/bigquery/docs#training-and-tutorials" rel="noopener ugc nofollow" target="_blank"> BigQuery文档</a></li></ul><p id="efd9" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">特别感谢以下资源在撰写本文时给予的指导和启发:</p><ul class=""><li id="dfa9" class="my mz iq ky b kz la lc ld lf na lj nb ln nc lr nd ne nf ng bi translated"><a class="ae kv" href="https://dma.org.uk/article/use-rfm-modelling-to-generate-successful-customer-segments" rel="noopener ugc nofollow" target="_blank"> DMA文章:使用RFM建模生成成功的客户群</a></li><li id="4888" class="my mz iq ky b kz nh lc ni lf nj lj nk ln nl lr nd ne nf ng bi translated"><a class="ae kv" rel="noopener" target="_blank" href="/rfm-analysis-using-bigquery-ml-bfaa51b83086">中型文章:使用BigQuery ML的RFM分析</a></li></ul></div></div>    
</body>
</html>