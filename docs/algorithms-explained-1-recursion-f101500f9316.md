# 算法解释#1:递归

> 原文：<https://towardsdatascience.com/algorithms-explained-1-recursion-f101500f9316>

## 通过 Python 中的示例了解何时以及如何使用递归解决方案

这是用 Python 示例解释算法系列的第一篇文章。这是为有抱负的数据科学家和软件工程师或那些希望在准备编码面试中复习算法的人准备的。

![](img/71344856e420104f105d787a41e6d1c1.png)

图片由 [Gerd Altmann](https://pixabay.com/users/geralt-9301/) 从 [Pixabay](http://pixabay.com) 拍摄

在学习数据结构和算法时，递归是编程中的一个基本概念。在本文中，我将解释什么是递归，何时使用递归，并浏览一些用 Python 3 编写的例子。

## 什么是递归？

递归是指函数或方法调用自身，它对于分治范式是必不可少的，其思想是将较大的问题分成较小的子问题，子问题是原始问题的某个常数部分。递归的工作方式是通过单独解决较小的子问题，然后将结果聚集起来返回最终的解决方案。

## 什么时候使用递归？

递归经常用于本质上是递归的问题。这包括具有父子关系的图、树和数据结构。递归问题的一些典型例子是计算第 n 个斐波那契数，计算一个数的阶乘，以及将十进制数转换成二进制数。

## 为什么我应该使用递归？

正确使用时，递归解决方案通常会产生更清晰、更易读的代码。当求解本质上是递归的解时，它更直观，我们将在后面的例子中看到。但是，请记住，递归解决方案的内存效率可能较低，如果您的计算机内存耗尽，或者您的函数在到达基本情况之前堆栈过深，将会导致堆栈溢出错误。

## 我如何构造一个递归算法？

要编写递归算法，首先需要将问题分成两部分，第一部分是基本情况，第二部分是递归步骤:

1.  **基本情况:**基本情况是指停止调用递归函数需要满足的条件。这是终止递归函数并返回结果之前的结束状态或最后一个待评估的事例。如果没有基本情况，你的递归函数将会无限循环下去，永远不会终止！
2.  **递归步骤:**这是递归调用同一个函数的代码部分，使用每次递归调用都更新的输入来计算结果。每一次迭代都应该让你更接近基本情况。

## 示例 1:使用递归确定第 n 个斐波那契数列

在斐波纳契数列中，数列的第一项和第二项分别是 0 和 1。要计算位置 n 的数字，可以取前面两项的和，即位置(n-1)的数字+位置(n-2)的数字。斐波纳契数列 F 可以用数学方法表示如下:

*   F(1) = 0
*   F(2) = 1
*   F(n) = F(n-1) + F(n-2)

我们将定义一个函数`fibonacci()`,它将一个数字 n 作为参数，并返回斐波那契数列中位置 n 处的数字。这个问题可以用多种方法解决，但在递归解决方案中，我们可以将问题分解为以下两个部分:

1.  **基本情况:**如果 n 为 1，则返回 0，因为斐波那契数列的第一项为 0。如果 n 是 2，则返回 1，因为数列的第二项是 1。
2.  **递归步骤:**对于 n 的所有其他值，我们可以通过将前面两项相加来计算位置 n 处的数字:fibonacci(n-1) + fibonacci(n-2)。

以下是计算斐波纳契数列中第 n 个数字的递归解决方案的 Python 实现:

```
def fibonacci(n):
   if n == 1:
      return 0
   if n == 2:
      return 1
   return fibonacci(n-1) + fibonacci(n-2)
```

## 例 2:计算第 n 个阶乘

第 n 个数的阶乘是从 1 到 n 的所有整数的乘积，比如 5 的阶乘就是`5! = 1 * 2 * 3 * 4 * 5 = 120`。注意 0 的阶乘是 1，负数的阶乘是未定义的。

我们将定义一个函数`factorial()`，它将一个数字 *n* 作为参数，并返回 *n* 的阶乘。为了用递归解决这个问题，我们必须把它分解成以下两种情况:

1.  **基本情况:**如果 n = 0 或 1，返回 1。如果 n < 0，返回错误，因为负数的阶乘未定义。
2.  **递归步骤:**用前一项的结果乘以 n，即`n * factorial(n-1)`。

以下是计算第 n 个阶乘的递归解决方案的 Python 实现:

```
def factorial(n):
   if (n == 0 or n == 1):
      return 1
   if n < 0:
      raise Exception("n must be positive. The factorial of a negative number is undefined.")
   return n * factorial(n - 1)
```

## 示例 3:将十进制整数显示为二进制

在日常生活中，最常用的数字系统是十进制数，它的基数是 10。对于数字系统，通常使用二进制数字系统，其基数为 2。

将十进制数转换为二进制数的一种方法是将该数除以 2，并记录下每一步的余数，然后以相反的顺序(从下到上)写出余数，这就是整数的二进制等效值。例如，二进制的十进制数 36 是:

36/2 = 18**r0**→18/2 = 9**r0**→9/2 = 4**R1**→4/2 = 2**r0**→2/2 = 1**r0**→1/2 = 0**R1**

以相反的顺序收集余数，我们得到 100100 作为十进制数 36 的二进制数。

我们将定义一个函数`convert_to_binary()`，它接受十进制数 *n* ，并以整数列表的形式返回二进制数。为了递归地解决这个问题，我们可以把它分成两部分:

1.  **基础案例:**如果 n 等于 0，返回一个整数为 0 的列表。如果 n 等于 1，则返回一个整数为 1 的列表。
2.  **递归步骤:**对商(数字 *n* 除以 2)调用函数`convert_to_binary()`，并跟踪该操作的余数。

以下是将十进制数转换为二进制数的递归函数的 Python 实现:

```
def convert_to_binary(n):
   if n == 0:
      return [0]
   elif n == 1: 
      return [1] 
   remainders = convert_to_binary(n // 2)
   remainders.extend([n % 2])
   return remainders
```

## 结论

递归是一个基本的编程概念，在编码面试中很流行。递归的一些常见用例是具有父子关系的数据结构。编写递归解决方案的关键是首先定义基本情况，然后考虑递归步骤。递归通常会产生更简洁的代码，但它可能没有内存效率高。

更多请看本算法讲解系列: [#1:递归](/algorithms-explained-1-recursion-f101500f9316)(本期文章) [#2:排序](/algorithms-explained-2-sorting-18d0875528fb)， [#3:搜索](/algorithms-explained-3-searching-84604e465838)， [#4:贪婪算法](/algorithms-explained-4-greedy-algorithms-f60792046d40)， [#5:动态规划](/algorithms-explained-5-dynamic-programming-e5472a4ce464)， [#6:树遍历](/algorithms-explained-6-tree-traversal-1a006ba00672)。