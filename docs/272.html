<html>
<head>
<title>Exploring the NFT transaction with Neo4j</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用Neo4j探索NFT交易</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/exploring-the-nft-transaction-with-neo4j-cba80ead7e0b#2022-01-10">https://towardsdatascience.com/exploring-the-nft-transaction-with-neo4j-cba80ead7e0b#2022-01-10</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""><h1 id="2163" class="pw-post-title io ip iq bd ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm bi translated">用Neo4j探索NFT交易</h1></div><div class=""><h2 id="ff21" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">600万次NFT交易的探索性图形分析</h2></div><p id="ac10" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">几个月前，《自然》杂志发表了一篇<a class="ae lb" href="https://www.nature.com/articles/s41598-021-00053-8#MOESM1" rel="noopener ugc nofollow" target="_blank">文章</a>，绘制了2017年6月至2021年4月间主要从以太坊和区块链蜡像馆获得的610万笔交易。这是一篇激动人心的文章，分析了市场的统计属性以及一些网络特征。作者还在CC-BY 4.0许可下提供了底层NFT事务数据集的<a class="ae lb" href="https://osf.io/wsnzr/?view_only=319a53cf1bf542bbbe538aba37916537" rel="noopener ugc nofollow" target="_blank">。</a></p><p id="7d91" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">交易可以被描述为交易者之间的联系，那么还有什么比图形更好的方式来表示数据呢？首先，<a class="lc ld ep" href="https://medium.com/u/3865848842f9?source=post_page-----cba80ead7e0b--------------------------------" rel="noopener" target="_blank">迈克尔·亨格</a>和我将数据集导入到<a class="ae lb" href="https://neo4j.com/" rel="noopener ugc nofollow" target="_blank"> Neo4j </a>，一个本地图形数据库。然后，我执行了一个简单的探索性图形分析，以更好地理解底层数据集，我将在这篇博文中演示。</p><h2 id="207f" class="le lf iq bd lg lh li dn lj lk ll dp lm ko ln lo lp ks lq lr ls kw lt lu lv lw bi translated">设置环境</h2><p id="b75b" class="pw-post-body-paragraph kf kg iq kh b ki lx jr kk kl ly ju kn ko lz kq kr ks ma ku kv kw mb ky kz la ij bi translated">首先你需要下载并安装<a class="ae lb" href="https://neo4j.com/download/" rel="noopener ugc nofollow" target="_blank"> Neo4j桌面应用</a>。数据集以数据库转储的形式提供，您可以通过<a class="ae lb" href="https://drive.google.com/file/d/1IYhD9zjM46LIVsYNU_Fo3_a6sVr3_pXH/view?usp=sharing" rel="noopener ugc nofollow" target="_blank">点击此链接</a>下载。您需要将文件复制到Neo4j桌面文件文件夹，然后选择<strong class="kh ir">从转储创建新的DBMS</strong>。</p><figure class="md me mf mg gt mh gh gi paragraph-image"><div role="button" tabindex="0" class="mi mj di mk bf ml"><div class="gh gi mc"><img src="../Images/d7b2017a79dacd5cf838eeaee55a3118.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*uTQXMuZ5CpFeHhTNUHbHew.png"/></div></div><p class="mo mp gj gh gi mq mr bd b be z dk translated">从转储创建新DMBS。图片由作者提供。</p></figure><p id="c815" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">建议选择最新版本的Neo4j数据库。接下来，你还需要安装<strong class="kh ir"> APOC </strong>和<strong class="kh ir"> GDS </strong>库。</p><figure class="md me mf mg gt mh gh gi paragraph-image"><div role="button" tabindex="0" class="mi mj di mk bf ml"><div class="gh gi ms"><img src="../Images/78c83c2bed0e89c6aa8968dda2a44e81.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FDbI3G4PnRE6PVzI0kOgqw.png"/></div></div><p class="mo mp gj gh gi mq mr bd b be z dk translated">安装GDS和APOC库。图片由作者提供。</p></figure><p id="a02b" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">由于这是一个稍大的数据集，因此还建议增加堆和页面缓存内存分配。我选择4GB内存用于堆分配，2GB用于页面缓存。</p><figure class="md me mf mg gt mh gh gi paragraph-image"><div role="button" tabindex="0" class="mi mj di mk bf ml"><div class="gh gi mt"><img src="../Images/446ee2132684069f3721f9c35239c444.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*anUafHs94awFF-Rmj3KIhw.png"/></div></div><p class="mo mp gj gh gi mq mr bd b be z dk translated">增加内存分配。图片由作者提供。</p></figure><p id="d76c" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">恭喜你，你已经成功准备好了Neo4j环境。</p><h2 id="14c5" class="le lf iq bd lg lh li dn lj lk ll dp lm ko ln lo lp ks lq lr ls kw lt lu lv lw bi translated">图形模式模型</h2><figure class="md me mf mg gt mh gh gi paragraph-image"><div role="button" tabindex="0" class="mi mj di mk bf ml"><div class="gh gi mu"><img src="../Images/848b7f9f0951a7c09eb9029fb503b94f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*c74Am2G5x7aJ8YhXK-Hk0g.png"/></div></div><p class="mo mp gj gh gi mq mr bd b be z dk translated">NFT事务的图形模式模型。图片由作者提供。</p></figure><p id="b22e" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">该数据集围绕着交易者之间的交易。每笔交易都有一个日期和价格加密和美元。由于这是一个NFT交易的数据集，所以每笔交易都描述了出售了哪个NFT。有趣的是，大多数NFT都有一个图片URL，这样你就可以检查互联网上出售的图片。一些NFT有多达四个图像URL用于冗余。我们还知道一幅NFT作品是否属于某个系列，以及它属于哪个类别。</p><h2 id="982e" class="le lf iq bd lg lh li dn lj lk ll dp lm ko ln lo lp ks lq lr ls kw lt lu lv lw bi translated">探索性图形分析</h2><p id="b561" class="pw-post-body-paragraph kf kg iq kh b ki lx jr kk kl ly ju kn ko lz kq kr ks ma ku kv kw mb ky kz la ij bi translated">现在我们可以从探索性的图形分析开始。和往常一样，我准备了一个<a class="ae lb" href="https://github.com/tomasonjo/blogs/blob/master/nft/NFT%20analysis.ipynb" rel="noopener ugc nofollow" target="_blank"> Jupyter笔记本</a>，里面包含了本帖中的所有问题。</p><p id="283d" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">首先，我们将使用<code class="fe mv mw mx my b">apoc.meta.stats</code>过程评估节点的数量和关系。</p><pre class="md me mf mg gt mz my na nb aw nc bi"><span id="096a" class="le lf iq my b gy nd ne l nf ng">CALL apoc.meta.stats<br/>YIELD nodeCount, relCount, labels</span></pre><p id="cae0" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><em class="nh">结果</em></p><figure class="md me mf mg gt mh gh gi paragraph-image"><div role="button" tabindex="0" class="mi mj di mk bf ml"><div class="gh gi ni"><img src="../Images/d416078d52532ee994113bd449435402.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5UKUYzAVbRZ2sKMASS9lsg.png"/></div></div><p class="mo mp gj gh gi mq mr bd b be z dk translated">apoc.meta.stats程序的结果。图片由作者提供。</p></figure><p id="8dc5" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">图中大约有1100万个节点和2300万个关系。数据集包含大约460万个NFT的600万个事务。NFT是4600个集合和6个类别的一部分。</p><p id="4463" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">现在，我们将更深入地挖掘，并开始检查每年的交易计数、总交易量和非金融资产的平均价格。</p><pre class="md me mf mg gt mz my na nb aw nc bi"><span id="335b" class="le lf iq my b gy nd ne l nf ng">MATCH (t:Transaction)<br/>RETURN t.Datetime_updated.year AS year, <br/>       count(*) AS transactions, <br/>       sum(t.Price_USD) AS totalVolume, <br/>       avg(t.Price_USD) AS averagePrice<br/>ORDER BY year</span></pre><p id="114f" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><em class="nh">结果</em></p><figure class="md me mf mg gt mh"><div class="bz fp l di"><div class="nj nk l"/></div></figure><p id="f050" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">2018年，只有45万笔交易，而在2021年，截至4月份，有近350万笔交易。多年来，平均价格和总量在2021年的前四个月已经上升到近7.5亿美元。NFT世界确实出现了繁荣。</p><p id="64e6" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">接下来，我们将评估有多少交易的价格低于或高于一美元。</p><pre class="md me mf mg gt mz my na nb aw nc bi"><span id="22fd" class="le lf iq my b gy nd ne l nf ng">MATCH (t:Transaction)<br/>WHERE exists(t.Price_USD)<br/>RETURN CASE WHEN t.Price_USD &gt; 1 THEN true ELSE false END AS moreThanDollar, count(*) AS count</span></pre><p id="7f33" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">大约55%的交易价格超过1美元。还剩下大约270万笔低于1美元的交易。似乎大额交易并不频繁，所以当一些交易发生时，就会成为新闻。让我们用<code class="fe mv mw mx my b">apoc.agg.statistics</code>过程来检查超过一美元的交易的分布。</p><pre class="md me mf mg gt mz my na nb aw nc bi"><span id="f16a" class="le lf iq my b gy nd ne l nf ng">MATCH (t:Transaction)<br/>WHERE exists(t.Price_USD) AND t.Price_USD &gt; 1<br/>RETURN apoc.agg.statistics(t.Price_USD) AS result</span></pre><p id="41f1" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><em class="nh">结果</em></p><figure class="md me mf mg gt mh gh gi paragraph-image"><div class="gh gi nl"><img src="../Images/7c12f5f68c99dd0c0a2a9824e43b48e6.png" data-original-src="https://miro.medium.com/v2/resize:fit:684/format:webp/1*UmOf179Ms4KiVxnDt-MNWA.png"/></div><p class="mo mp gj gh gi mq mr bd b be z dk translated">一元以上NFT交易的价格分布。图片由作者提供。</p></figure><p id="6922" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">超过一美元的交易平均价格是266美元。另一方面，99%的交易低于3349美元。这意味着只有极小比例的交易非常昂贵，最高交易价值为750万美元。</p><p id="60a1" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们可以用下面的Cypher语句来检查哪些NFT以最高价格出售。</p><pre class="md me mf mg gt mz my na nb aw nc bi"><span id="097f" class="le lf iq my b gy nd ne l nf ng">MATCH (n:NFT)&lt;-[:FOR_NFT]-(t:Transaction)<br/>WHERE exists(t.Price_USD)<br/>WITH n, t.Price_USD as price<br/>ORDER BY price DESC LIMIT 5<br/>RETURN n.ID_token as token_id, n.Image_url_1 as image_url, price</span></pre><p id="6683" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><em class="nh">结果</em></p><figure class="md me mf mg gt mh"><div class="bz fp l di"><div class="nj nk l"/></div></figure><p id="3c33" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">作为一名数据分析师，我非常怀疑两个NFT被估价为相同的价格，最重要的是，它们都是750万美元。因为我们有图片网址，你可以查看哪些图片的价值超过了100万美元。看起来加密朋克的收藏品价值很高。</p><p id="48d2" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们可以深入挖掘，检查750万美元交易中涉及哪些账户。</p><pre class="md me mf mg gt mz my na nb aw nc bi"><span id="5395" class="le lf iq my b gy nd ne l nf ng">MATCH (n:NFT)&lt;-[:FOR_NFT]-(t:Transaction),<br/>      (t)&lt;-[:BOUGHT]-(buyer),<br/>      (t)&lt;-[:SOLD]-(seller)<br/>WHERE t.Price_USD = 7501893.0<br/>RETURN buyer.address AS buyer, <br/>       seller.address AS seller, <br/>       t.Datetime_updated_seconds AS date, <br/>       t.Price_USD AS price</span></pre><p id="c615" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><em class="nh">结果</em></p><figure class="md me mf mg gt mh"><div class="bz fp l di"><div class="nj nk l"/></div></figure><p id="0212" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">多么奇怪的巧合，两笔交易在同一天执行，中间只隔了大约19个小时。买家和卖家似乎没有关系，尽管全是零的地址引起了我的注意。经过一些调查，我了解到当有人在OpenSea平台上创建NFT时，<a class="ae lb" href="https://ethereum.stackexchange.com/questions/98354/why-are-all-nfts-created-from-null-address-on-opensea" rel="noopener ugc nofollow" target="_blank">空地址总是显示为创建者</a>。另一方面，您也可以向空地址发送一个NFT来有效地删除NFT。至少网上的一些帖子是这么说的。在我戴上夏洛克·福尔摩斯的帽子后，我在OpenSea上找到了<a class="ae lb" href="https://opensea.io/NullAddress" rel="noopener ugc nofollow" target="_blank">的空地址简介</a>，在那里你可以从他们那里买到NFT。这让我更加困惑，因为我会假设向空地址出售NFT会有效地烧掉NFT令牌，但谁会送价值750万美元的NFT去烧它。也许我完全误解了，因为这是我对NFT生态系统的第一次分析，而我对此一无所知。无论如何，这一切似乎有点可疑。这两笔交易具有相同的价格，并在同一天执行。我已经检查了这三个地址之间是否有任何交易，但是数据集不包含这样的交易。</p><p id="8b3e" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">接下来，我们将评估NFT系列及其平均成本。</p><pre class="md me mf mg gt mz my na nb aw nc bi"><span id="d5fa" class="le lf iq my b gy nd ne l nf ng">MATCH (collection)&lt;-[:IN_COLLECTION]-(n:NFT)&lt;-[:FOR_NFT]-(t:Transaction)<br/>WHERE exists (t.Price_USD)<br/>RETURN collection.Collection AS collection, <br/>       avg(t.Price_USD) AS averagePrice, <br/>       count(distinct n) AS numberOfNfts<br/>ORDER BY averagePrice DESC<br/>LIMIT 5</span></pre><p id="7ff7" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><em class="nh">结果</em></p><figure class="md me mf mg gt mh"><div class="bz fp l di"><div class="nj nk l"/></div></figure><p id="a681" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">大多数最高价值的集合在我们的数据集中只有一个NFT。有趣的是，尽管他们周围有数百万美元的交易，但加密朋克甚至没有进入前五名。</p><p id="2cf7" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">接下来，我们将探究哪些交易者执行了最多的交易。</p><pre class="md me mf mg gt mz my na nb aw nc bi"><span id="55f5" class="le lf iq my b gy nd ne l nf ng">MATCH (t:Trader)<br/>RETURN coalesce(t.username, t.address) AS username,<br/>       size((t)-[:BOUGHT]-&gt;()) AS bought,<br/>       size((t)-[:SOLD]-&gt;()) AS sold<br/>ORDER BY bought + sold desc LIMIT 5;</span></pre><p id="ea3d" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><em class="nh">结果</em></p><figure class="md me mf mg gt mh"><div class="bz fp l di"><div class="nj nk l"/></div></figure><p id="9993" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">排名前五的交易商已经买入或卖出了超过4万笔NFT。由于所有的数据都可以在互联网上找到，我们可以看看<a class="ae lb" href="https://etherscan.io/address/0x76481caa104b5f6bccb540dae4cefaf1c398ebea" rel="noopener ugc nofollow" target="_blank">的顶级简介</a>。似乎自2020年4月以来，他们一笔交易也没有达成。另一方面，<a class="ae lb" href="https://opensea.io/StrongHands" rel="noopener ugc nofollow" target="_blank">strong OpenSea上的Hands个人资料</a>有17000个可供购买的NFT。</p><p id="4b15" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们已经查看了交易数量最多的交易商，现在我们将查看以美元计算的交易量最多的交易商。</p><pre class="md me mf mg gt mz my na nb aw nc bi"><span id="e696" class="le lf iq my b gy nd ne l nf ng">MATCH (t:Trader)<br/>OPTIONAL MATCH (t)-[:BOUGHT]-&gt;(bt)<br/>WITH t, sum(bt.Price_USD) AS boughtVolume<br/>OPTIONAL MATCH (t)-[:SOLD]-&gt;(st)<br/>WITH t, boughtVolume, sum(st.Price_USD) AS soldVolume<br/>RETURN t.username AS username, <br/>       t.address AS address,<br/>       boughtVolume, <br/>       soldVolume<br/>ORDER BY boughtVolume + soldVolume<br/>DESC LIMIT 5</span></pre><p id="e3f6" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><em class="nh">结果</em></p><figure class="md me mf mg gt mh"><div class="bz fp l di"><div class="nj nk l"/></div></figure><p id="8af4" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">最大的卷具有NullAddress帐户。我不知道为什么它有超过5000万美元的购买。甚至在此之前，我们有一个例子，有人发送了一个NFT到4200 ETH的NullAddress。也许你可以选择任意一个数字的交易金额当你烧NFT的时候。也许一些专家可以帮我解决这个问题。</p><p id="b20d" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">另一方面，第二个地址只对出售感兴趣，这也是奇特的。我检查了数据集中地址的<a class="ae lb" href="https://etherscan.io/tx/0x39719e398face7b276fca3984da0e9e158193f3e181cdf3e88d98f867f1aea6f" rel="noopener ugc nofollow" target="_blank">最高交易，似乎这是</a><a class="ae lb" href="https://sorare.com/" rel="noopener ugc nofollow" target="_blank"> Sorare项目</a>的钱包，看起来像是带有NFT代币的梦幻足球。我猜他们自己铸造代币，只卖给他们的平台用户。</p><p id="1026" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">接下来，我们将探究哪些用户转售了利润最高的NFT。</p><pre class="md me mf mg gt mz my na nb aw nc bi"><span id="7ad7" class="le lf iq my b gy nd ne l nf ng">MATCH (t:Trader)-[:SOLD]-&gt;(st:Transaction)-[:FOR_NFT]-&gt;(nft)<br/>WHERE st.Price_USD &gt; 100000<br/>MATCH (t)-[:BOUGHT]-&gt;(bt:Transaction)-[:FOR_NFT]-&gt;(nft)<br/>WHERE st.Datetime_updated_seconds &gt; bt.Datetime_updated_seconds<br/>RETURN coalesce(t.username, t.address) as trader, <br/>       nft.Image_url_1 as nft, <br/>       nft.ID_token AS tokenID,<br/>       st.Datetime_updated_seconds AS soldTime,<br/>       st.Price_USD AS soldAmount,<br/>       bt.Datetime_updated_seconds as boughtTime,<br/>       bt.Price_USD AS boughtAmount,<br/>       st.Price_USD - bt.Price_USD AS difference<br/>ORDER BY difference DESC LIMIT 5</span></pre><p id="969e" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><em class="nh">结果</em></p><figure class="md me mf mg gt mh"><div class="bz fp l di"><div class="nj nk l"/></div></figure><p id="27a4" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">看来隐朋克是(是？)最赚钱的代币。例如，一名用户在2021年3月12日以70万美元的价格购买了Cyptopunk 3011 NFT，然后在一个月后以170万美元的价格转售。对于一个抽烟斗的家伙的像素图像来说，这是一笔不错的交易。现在，你可能会说，为什么有人会以70万英镑的价格出售一幅NFT作品，而他们可以得到100万英镑，但问题就在这里。那个人在2020年10月以1.6万美元买入，2021年3月以70万美元卖出。实际上，从2020年10月到2021年3月，NFT的价格上涨了100倍。</p><h2 id="050d" class="le lf iq bd lg lh li dn lj lk ll dp lm ko ln lo lp ks lq lr ls kw lt lu lv lw bi translated">图形算法</h2><p id="331a" class="pw-post-body-paragraph kf kg iq kh b ki lx jr kk kl ly ju kn ko lz kq kr ks ma ku kv kw mb ky kz la ij bi translated">最后，我们将在数据集上运行一些图形算法。我们将在交易者之间构建一个推断的有向加权交易网络。关系的方向将表示资金的流向，而权重将表示数量。我们将使用Cypher投影来投影一个虚拟网络，它是底层存储图的转换版本。</p><pre class="md me mf mg gt mz my na nb aw nc bi"><span id="0f6e" class="le lf iq my b gy nd ne l nf ng">CALL gds.graph.create.cypher("nft", <br/>"MATCH (t:Trader) WHERE NOT t.username = 'NullAddress' RETURN id(t) as id",<br/>"MATCH (t1:Trader)-[:BOUGHT]-&gt;(t)&lt;-[:SOLD]-(t2:Trader)<br/> RETURN id(t1) AS source, id(t2) as target, coalesce(sum(t.Price_USD),1) as weight")</span></pre><p id="1b03" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们将执行的第一个算法是弱连通分量算法。它用于查找网络中断开的部分或孤岛。</p><pre class="md me mf mg gt mz my na nb aw nc bi"><span id="5c4e" class="le lf iq my b gy nd ne l nf ng">CALL gds.wcc.stats("nft")<br/>YIELD componentCount, componentDistribution</span></pre><p id="5d76" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><em class="nh">结果</em></p><figure class="md me mf mg gt mh gh gi paragraph-image"><div class="gh gi nm"><img src="../Images/7b270591097d3eb3914755be68870380.png" data-original-src="https://miro.medium.com/v2/resize:fit:1148/format:webp/1*CHPGVpvqIBcKcaT5pmbm6w.png"/></div><p class="mo mp gj gh gi mq mr bd b be z dk translated">WCC结果。图片由作者提供。</p></figure><p id="b1d6" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">NFT的交易网络相当混乱。有5287个独立的部分，最大的部分只包含了12%的交易者。这意味着有几个小组件，其中交易者只在一小组用户之间进行交易。更奇怪的是，超过75%的组件由单个用户组成。这意味着发送者和接收者都是同一用户。</p><p id="3f47" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">让我们来看看一个有自循环的样本交易者。</p><pre class="md me mf mg gt mz my na nb aw nc bi"><span id="bbc1" class="le lf iq my b gy nd ne l nf ng">MATCH p=(t:Trader)-[:BOUGHT]-&gt;()&lt;-[:SOLD]-(t)<br/>WHERE t.username = "grake"<br/>RETURN p LIMIT 10</span></pre><p id="9d70" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><em class="nh">结果</em></p><figure class="md me mf mg gt mh gh gi paragraph-image"><div role="button" tabindex="0" class="mi mj di mk bf ml"><div class="gh gi nn"><img src="../Images/f2a3995626064c75a3cd0ee02566050f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*KvfTuabbetZlOz7c6oPBWg.png"/></div></div><p class="mo mp gj gh gi mq mr bd b be z dk translated">在交易中作为卖方和买方的用户的样本子图。图片由作者提供。</p></figure><p id="7f44" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">起初，我认为这是底层数据集中的一个错误。然而，我在OpenSea平台上检查了一个<a class="ae lb" href="https://opensea.io/assets/0x8c9b261faef3b3c2e64ab5e58e04615f8c788099/30240" rel="noopener ugc nofollow" target="_blank">单个交易，看起来用户可以向自己出售一个NFT。然而，我认为这个平台有一些机制，这使得日志很混乱。</a></p><figure class="md me mf mg gt mh gh gi paragraph-image"><div role="button" tabindex="0" class="mi mj di mk bf ml"><div class="gh gi no"><img src="../Images/e4cc7b6ada33b3cf915ee1dbb449ac49.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rls3jbYAFR0umUmWSSSIWw.png"/></div></div><p class="mo mp gj gh gi mq mr bd b be z dk translated">NFT代币历史截图。图片由作者提供。</p></figure><p id="dd99" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">最后。我们将执行ArticleRank算法，这是PageRank算法的一种变体，用于查找网络影响者。</p><pre class="md me mf mg gt mz my na nb aw nc bi"><span id="b875" class="le lf iq my b gy nd ne l nf ng">CALL gds.articleRank.stream("nft")<br/>YIELD nodeId, score<br/>WITH gds.util.asNode(nodeId) AS node, score<br/>ORDER BY score DESC<br/>LIMIT 5<br/>RETURN node.username as username,<br/>      score,<br/>      size((node)-[:BOUGHT]-&gt;()) as boughtCount,<br/>      size((node)-[:SOLD]-&gt;()) as soldCount,<br/>      apoc.coll.sum([(node)-[:BOUGHT]-&gt;(t) | coalesce(t.Price_USD,0) ]) as boughtVolume,<br/>      apoc.coll.sum([(node)-[:SOLD]-&gt;(t) | coalesce(t.Price_USD,0) ]) as soldVolume</span></pre><p id="f86f" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><em class="nh">结果</em></p><figure class="md me mf mg gt mh"><div class="bz fp l di"><div class="nj nk l"/></div></figure><h2 id="2dfa" class="le lf iq bd lg lh li dn lj lk ll dp lm ko ln lo lp ks lq lr ls kw lt lu lv lw bi translated">结论</h2><p id="4cfc" class="pw-post-body-paragraph kf kg iq kh b ki lx jr kk kl ly ju kn ko lz kq kr ks ma ku kv kw mb ky kz la ij bi translated">我们只是触及了这个数据集的可能分析的表面。我鼓励您在您的Neo4j实例上设置<a class="ae lb" href="https://drive.google.com/file/d/1IYhD9zjM46LIVsYNU_Fo3_a6sVr3_pXH/view?usp=sharing" rel="noopener ugc nofollow" target="_blank">数据集</a>，并尝试找到一些有趣的见解。你也可以看看原始文章，了解如何进行这项研究的一些想法。如果你发现有趣的东西，让我知道。</p><p id="1652" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">和往常一样，代码可以在<a class="ae lb" href="https://github.com/tomasonjo/blogs/blob/master/nft/NFT%20analysis.ipynb" rel="noopener ugc nofollow" target="_blank"> GitHub </a>上获得。</p><h2 id="6d34" class="le lf iq bd lg lh li dn lj lk ll dp lm ko ln lo lp ks lq lr ls kw lt lu lv lw bi translated">参考</h2><ul class=""><li id="70f7" class="np nq iq kh b ki lx kl ly ko nr ks ns kw nt la nu nv nw nx bi translated">纳迪尼，m .，亚历山德罗蒂，l .，迪贾辛托，F. <em class="nh">等</em>绘制NFT革命:市场趋势，贸易网络和视觉特征。<em class="nh"> Sci Rep </em> <strong class="kh ir"> 11、</strong> 20902 (2021)。<a class="ae lb" href="https://doi.org/10.1038/s41598-021-00053-8" rel="noopener ugc nofollow" target="_blank">https://doi.org/10.1038/s41598-021-00053-8</a></li></ul></div></div>    
</body>
</html>