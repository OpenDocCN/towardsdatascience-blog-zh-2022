<html>
<head>
<title>Biased Model Coefficients — (Part 1)</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">有偏模型系数—(第一部分)</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/biased-model-coefficients-part-1-2722128b9e1c#2022-01-17">https://towardsdatascience.com/biased-model-coefficients-part-1-2722128b9e1c#2022-01-17</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""><h1 id="edfa" class="pw-post-title ir is it bd iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp bi translated">有偏模型系数—(第一部分)</h1></div><div class=""><h2 id="6ef3" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">衰减偏差/回归稀释使您的系数偏向0</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/696fd90ec703f4dd08af9abfc742e51e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qgQN_80tfX5hspxuOMNxOQ.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">图片由<a class="ae ky" href="https://pixabay.com/users/shixugang-640931/" rel="noopener ugc nofollow" target="_blank">施旭刚</a></p></figure></div><div class="ab cl kz la hx lb" role="separator"><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le"/></div><div class="im in io ip iq"><p id="c12b" class="pw-post-body-paragraph lg lh it li b lj lk ju ll lm ln jx lo lp lq lr ls lt lu lv lw lx ly lz ma mb im bi translated"><strong class="li iu">TL；DR </strong> —当X变量中存在显著噪声或测量误差时，模型系数会低估变量的影响，即如果系数为正(负)，真实影响甚至会更大。</p></div><div class="ab cl kz la hx lb" role="separator"><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le"/></div><div class="im in io ip iq"><h2 id="2de8" class="mc md it bd me mf mg dn mh mi mj dp mk lp ml mm mn lt mo mp mq lx mr ms mt mu bi translated">关于这个系列</h2><p id="16d2" class="pw-post-body-paragraph lg lh it li b lj mv ju ll lm mw jx lo lp mx lr ls lt my lv lw lx mz lz ma mb im bi translated">假设您是一名数据科学家，在一家从事房地产业务的公司(代理、开发商等)工作。)有人问你:</p><blockquote class="na nb nc"><p id="fa50" class="lg lh nd li b lj lk ju ll lm ln jx lo ne lq lr ls nf lu lv lw ng ly lz ma mb im bi translated">"每增加一平方米，房价会上涨多少？"</p></blockquote><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nh"><img src="../Images/749a03aa28b26b1c6587c88a24c7c6b8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6QbnqxBzKcnEFjCCfw6iDQ.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">图片由<a class="ae ky" href="https://pixabay.com/users/pexels-2286921/" rel="noopener ugc nofollow" target="_blank">派克斯</a>提供</p></figure><p id="8af3" class="pw-post-body-paragraph lg lh it li b lj lk ju ll lm ln jx lo lp lq lr ls lt lu lv lw lx ly lz ma mb im bi translated">这个由多个部分组成的系列致力于展示，如果没有对传统统计学的扎实理解，得到错误的答案是多么容易。</p></div><div class="ab cl kz la hx lb" role="separator"><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le"/></div><div class="im in io ip iq"><h2 id="faa1" class="mc md it bd me mf mg dn mh mi mj dp mk lp ml mm mn lt mo mp mq lx mr ms mt mu bi translated">衰减偏差/回归稀释</h2><p id="9d42" class="pw-post-body-paragraph lg lh it li b lj mv ju ll lm mw jx lo lp mx lr ls lt my lv lw lx mz lz ma mb im bi translated">衰减偏差，也称为回归稀释，是由独立(X)变量中的测量误差或噪声引起的模型系数偏差。你的模型系数变得偏向0。</p><p id="47bd" class="pw-post-body-paragraph lg lh it li b lj lk ju ll lm ln jx lo lp lq lr ls lt lu lv lw lx ly lz ma mb im bi translated">例如，假设您有一个回归模型，显示面积每增加一平方米，价格就会增加2000美元。如果您的面积要素有很多测量误差或噪声，面积的真实影响甚至更大…也许价格实际上增加了2500美元。</p><p id="7d55" class="pw-post-body-paragraph lg lh it li b lj lk ju ll lm ln jx lo lp lq lr ls lt lu lv lw lx ly lz ma mb im bi translated">反之亦然。例如，如果你的模型显示负系数为-2000，那么真实的系数会更小，比如说-2500。<strong class="li iu">系数偏向0 </strong>。</p><p id="5c6f" class="pw-post-body-paragraph lg lh it li b lj lk ju ll lm ln jx lo lp lq lr ls lt lu lv lw lx ly lz ma mb im bi translated">请注意，如果您的因变量(y)有噪声或测量误差，这种偏差不会发生…它只会受到X变量中的噪声或误差的影响。</p><p id="1947" class="pw-post-body-paragraph lg lh it li b lj lk ju ll lm ln jx lo lp lq lr ls lt lu lv lw lx ly lz ma mb im bi translated">为什么会出现这种偏差？</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ni"><img src="../Images/56b065895e6f8ff4ea0aeac732c832af.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FoOimTql3RK0zZv4ZrPUCw.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><p id="9ff1" class="pw-post-body-paragraph lg lh it li b lj lk ju ll lm ln jx lo lp lq lr ls lt lu lv lw lx ly lz ma mb im bi translated">假设面积每<strong class="li iu">实际</strong>增加1平方米，价格就上涨2000美元。</p><p id="cfa3" class="pw-post-body-paragraph lg lh it li b lj lk ju ll lm ln jx lo lp lq lr ls lt lu lv lw lx ly lz ma mb im bi translated">当我们对具有带有测量误差的报告“面积”列的数据运行回归模型时，该“面积”列表示实际面积+噪声。</p><p id="db48" class="pw-post-body-paragraph lg lh it li b lj lk ju ll lm ln jx lo lp lq lr ls lt lu lv lw lx ly lz ma mb im bi translated">报告的“面积”栏中的波动部分是由于a)面积的实际波动和b)噪音。</p><p id="df32" class="pw-post-body-paragraph lg lh it li b lj lk ju ll lm ln jx lo lp lq lr ls lt lu lv lw lx ly lz ma mb im bi translated">a)的系数应为2000，因为实际面积每增加1平方米，价格就会增加2000美元，而b)的系数应为0，因为噪音或测量误差对房价没有影响。该报告的“面积”栏的系数最终介于0和2000之间，分别是a)和b)的系数。</p><p id="c412" class="pw-post-body-paragraph lg lh it li b lj lk ju ll lm ln jx lo lp lq lr ls lt lu lv lw lx ly lz ma mb im bi translated">我们将避免可以在网上找到的详细公式，我们将跳转到python中的一个例子…</p></div><div class="ab cl kz la hx lb" role="separator"><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le"/></div><div class="im in io ip iq"><h2 id="23de" class="mc md it bd me mf mg dn mh mi mj dp mk lp ml mm mn lt mo mp mq lx mr ms mt mu bi translated">数据准备</h2><blockquote class="na nb nc"><p id="cc1f" class="lg lh nd li b lj lk ju ll lm ln jx lo ne lq lr ls nf lu lv lw ng ly lz ma mb im bi translated">1-我们住在一个有2000栋房子的城镇里。</p><p id="085b" class="lg lh nd li b lj lk ju ll lm ln jx lo ne lq lr ls nf lu lv lw ng ly lz ma mb im bi translated">2-镇上有2个区，一个高级/昂贵区和另一个非高级/普通区。</p><p id="3bc5" class="lg lh nd li b lj lk ju ll lm ln jx lo ne lq lr ls nf lu lv lw ng ly lz ma mb im bi translated">3-高档区的房屋平均面积较小(平均200平方米)。普通区的房屋平均面积为500平方米。数据中的房屋面积是从正态分布中提取的。</p><p id="c6e0" class="lg lh nd li b lj lk ju ll lm ln jx lo ne lq lr ls nf lu lv lw ng ly lz ma mb im bi translated">4-房屋的真实价值= 3000美元x面积(平方米),适用于高级住宅区的房屋。真实价值= 1000美元x非优质区面积。</p><p id="a772" class="lg lh nd li b lj lk ju ll lm ln jx lo ne lq lr ls nf lu lv lw ng ly lz ma mb im bi translated">5-房子在市场上出售，价格=真实价值+/- 20%。+/- 20%的偏差只是噪音。</p></blockquote><p id="6f1e" class="pw-post-body-paragraph lg lh it li b lj lk ju ll lm ln jx lo lp lq lr ls lt lu lv lw lx ly lz ma mb im bi translated">让我们基于上述假设创建一个包含2000所房屋的数据集…</p><pre class="kj kk kl km gt nj nk nl nm aw nn bi"><span id="d0e0" class="mc md it nk b gy no np l nq nr">import numpy as np<br/>import scipy.stats as ss</span><span id="d0c4" class="mc md it nk b gy ns np l nq nr">np.random.seed(seed=0)</span><span id="00c4" class="mc md it nk b gy ns np l nq nr">areas_premium = ss.norm(200, 50).rvs(1000)<br/>areas_non_premium = ss.norm(500, 50).rvs(1000)</span></pre><p id="f6e2" class="pw-post-body-paragraph lg lh it li b lj lk ju ll lm ln jx lo lp lq lr ls lt lu lv lw lx ly lz ma mb im bi translated">从上面创建一个包含区域和“溢价”列的数据框架…</p><p id="b6f0" class="pw-post-body-paragraph lg lh it li b lj lk ju ll lm ln jx lo lp lq lr ls lt lu lv lw lx ly lz ma mb im bi translated">“溢价”栏是一个虚拟/二元变量，表示房子是否在溢价区。</p><pre class="kj kk kl km gt nj nk nl nm aw nn bi"><span id="deb4" class="mc md it nk b gy no np l nq nr">df_premium, df_non_premium = pd.DataFrame(), pd.DataFrame()</span><span id="2669" class="mc md it nk b gy ns np l nq nr">df_premium['area'] = areas_premium<br/>df_premium['premium'] = 1</span><span id="4786" class="mc md it nk b gy ns np l nq nr">df_non_premium['area'] = areas_non_premium<br/>df_non_premium['premium'] = 0</span><span id="a6df" class="mc md it nk b gy ns np l nq nr">df = pd.concat([df_premium, df_non_premium])<br/>df</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nt"><img src="../Images/c250c841c8df42b3ce01b05254b9587d.png" data-original-src="https://miro.medium.com/v2/resize:fit:434/format:webp/1*AyqZlUM4CzTuzOf8TwpxEw.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><p id="ddc8" class="pw-post-body-paragraph lg lh it li b lj lk ju ll lm ln jx lo lp lq lr ls lt lu lv lw lx ly lz ma mb im bi translated">现在，让我们想象一下区域的分布情况…</p><pre class="kj kk kl km gt nj nk nl nm aw nn bi"><span id="23cb" class="mc md it nk b gy no np l nq nr">import matplotlib.pyplot as plt<br/>import seaborn as sns</span><span id="777f" class="mc md it nk b gy ns np l nq nr">sns.displot(df, x='area', hue='premium', height=5, aspect=16/9)</span><span id="94f4" class="mc md it nk b gy ns np l nq nr">plt.title('Distribution of areas (sqmt) for premium vs non-premium houses')</span><span id="411c" class="mc md it nk b gy ns np l nq nr">plt.show()</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nu"><img src="../Images/21ecbfb65f801ba6321575541e168f29.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ZVUdLLwQnhi56t5VSMuAYQ.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><p id="180e" class="pw-post-body-paragraph lg lh it li b lj lk ju ll lm ln jx lo lp lq lr ls lt lu lv lw lx ly lz ma mb im bi translated">我们可以看到高级住宅通常较小。</p><p id="f938" class="pw-post-body-paragraph lg lh it li b lj lk ju ll lm ln jx lo lp lq lr ls lt lu lv lw lx ly lz ma mb im bi translated">现在，由于房子的真实价值= 3000美元x高档房的面积或1000美元x非高档房的面积，我们可以将真实价值的公式改写如下:</p><blockquote class="na nb nc"><p id="326f" class="lg lh nd li b lj lk ju ll lm ln jx lo ne lq lr ls nf lu lv lw ng ly lz ma mb im bi translated">真实价值=(1000美元x面积)+(2000美元x面积x溢价)</p><p id="4a89" class="lg lh nd li b lj lk ju ll lm ln jx lo ne lq lr ls nf lu lv lw ng ly lz ma mb im bi translated">其中premium是一个二进制数，表示该房屋是否位于高级位置</p></blockquote><p id="026c" class="pw-post-body-paragraph lg lh it li b lj lk ju ll lm ln jx lo lp lq lr ls lt lu lv lw lx ly lz ma mb im bi translated">记住，房子是以真实价值+/- 20%(随机)出售的。</p><p id="8c73" class="pw-post-body-paragraph lg lh it li b lj lk ju ll lm ln jx lo lp lq lr ls lt lu lv lw lx ly lz ma mb im bi translated">最后，我们将“真实价值”和“销售价格”添加到我们的数据框架中，并可视化销售价格的分布…</p><pre class="kj kk kl km gt nj nk nl nm aw nn bi"><span id="10bf" class="mc md it nk b gy no np l nq nr">df['true_value'] = (df['area'] * (1000 + (2000 * df['premium'])))</span><span id="39c6" class="mc md it nk b gy ns np l nq nr"># Add selling price = true value x noise<br/># Noise is a random value between 80% and 120%<br/>np.random.seed(seed=0)<br/>df['sell_price'] = df['true_value'] * (<br/>    np.random.randint(low=80, high=121, size=2000) / 100)</span><span id="ea1f" class="mc md it nk b gy ns np l nq nr"># Visualize distributions of selling price<br/>sns.displot(df, x='sell_price', hue='premium', height=5, aspect=16/9)</span><span id="cfbc" class="mc md it nk b gy ns np l nq nr">plt.title('Distribution of selling price for premium vs non-premium houses')</span><span id="1382" class="mc md it nk b gy ns np l nq nr">plt.show()</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nv"><img src="../Images/cff23969316f1320e1eec3f3b2688959.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mGZv7Yv8iqlfNNFlWPNOWw.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><p id="1172" class="pw-post-body-paragraph lg lh it li b lj lk ju ll lm ln jx lo lp lq lr ls lt lu lv lw lx ly lz ma mb im bi translated">我们可以看到，高级住宅的售价范围更广。</p></div><div class="ab cl kz la hx lb" role="separator"><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le"/></div><div class="im in io ip iq"><h2 id="42d6" class="mc md it bd me mf mg dn mh mi mj dp mk lp ml mm mn lt mo mp mq lx mr ms mt mu bi translated">检查线性回归的系数</h2><p id="1d8b" class="pw-post-body-paragraph lg lh it li b lj mv ju ll lm mw jx lo lp mx lr ls lt my lv lw lx mz lz ma mb im bi translated">请注意，由于我们的目标是确定面积和销售价格之间的直接关系，就可解释性和影响测量而言，线性回归是最合适的选择。</p><p id="2dc9" class="pw-post-body-paragraph lg lh it li b lj lk ju ll lm ln jx lo lp lq lr ls lt lu lv lw lx ly lz ma mb im bi translated">我们将使用statsmodel库，它为线性回归模型生成一个很好的输出，但是结果也可以使用sklearn的linear regression实现来重现。<strong class="li iu">衰减偏差影响其他机器学习模型，无论是线性还是非线性</strong>。与OLS回归相比，线性模型(如随机梯度下降回归器(SGDRegressor ))将显示几乎相同的效果，而衰减偏差的影响对于非线性和基于树的模型更加微妙，这些模型通常需要其他解释库，如SHAP或莱姆。</p><p id="85dd" class="pw-post-body-paragraph lg lh it li b lj lk ju ll lm ln jx lo lp lq lr ls lt lu lv lw lx ly lz ma mb im bi translated">使用statsmodel运行OLS线性回归，将“真实值”作为我们的因变量(y ),将“面积X溢价”作为我们的自变量(X)。</p><pre class="kj kk kl km gt nj nk nl nm aw nn bi"><span id="7371" class="mc md it nk b gy no np l nq nr">df['area_x_premium'] = df['area'] * df['premium']</span><span id="50df" class="mc md it nk b gy ns np l nq nr"># Statsmodel implementation<br/>import statsmodel.api as sm</span><span id="4eac" class="mc md it nk b gy ns np l nq nr">y = df['true_value']<br/>X = df[['area', 'area_x_premium']]</span><span id="1863" class="mc md it nk b gy ns np l nq nr">model = sm.OLS(y, X)<br/>results = model.fit().summary()<br/>results</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nw"><img src="../Images/23e74c22c93256d7b1a63bb900af1742.png" data-original-src="https://miro.medium.com/v2/resize:fit:996/format:webp/1*BsFIwTvCOj26KBQKZ85S8w.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><p id="4194" class="pw-post-body-paragraph lg lh it li b lj lk ju ll lm ln jx lo lp lq lr ls lt lu lv lw lx ly lz ma mb im bi translated">请注意，这些系数是按照我们的预期(1000和2000)正确估计的。R2是100%，这意味着使用我们的两个变量“面积”和“面积x溢价”可以100%准确地预测“真实价值”。</p><p id="363e" class="pw-post-body-paragraph lg lh it li b lj lk ju ll lm ln jx lo lp lq lr ls lt lu lv lw lx ly lz ma mb im bi translated">我们使用sklearn的LinearRegression实现得到相同的系数，使用SGDRegressor得到几乎相同的系数。</p><pre class="kj kk kl km gt nj nk nl nm aw nn bi"><span id="2f40" class="mc md it nk b gy no np l nq nr">model = LinearRegression()<br/>model.fit(X, y)<br/>model.coef_</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nx"><img src="../Images/2d3b00575500de7e199610ff5f415045.png" data-original-src="https://miro.medium.com/v2/resize:fit:406/format:webp/1*lTKDnwunjKZ-Hfe5ORgIow.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><pre class="kj kk kl km gt nj nk nl nm aw nn bi"><span id="575d" class="mc md it nk b gy no np l nq nr">model = SGDRegressor(alpha=0, random_state=0, eta0=1e-5)<br/>model.fit(X, y)<br/>model.coef_</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ny"><img src="../Images/c8a64c23b2f06eff1a2a817eb58b36d9.png" data-original-src="https://miro.medium.com/v2/resize:fit:646/format:webp/1*iXwUt_kTvthuQjyjJzZOvw.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><p id="07cc" class="pw-post-body-paragraph lg lh it li b lj lk ju ll lm ln jx lo lp lq lr ls lt lu lv lw lx ly lz ma mb im bi translated">现在，让我们检查一下，如果我们将sell_price而不是true_value设置为y变量，回归结果(使用statsmodel)会是什么样子…</p><pre class="kj kk kl km gt nj nk nl nm aw nn bi"><span id="3932" class="mc md it nk b gy no np l nq nr">y = df['sell_price']</span><span id="c930" class="mc md it nk b gy ns np l nq nr">model = sm.OLS(y, X)<br/>results = model.fit().summary()<br/>results</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nz"><img src="../Images/f4f5cdb68e092109f75a053721dcf27d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1032/format:webp/1*7F7E9FMHGRKnP6JkHC_Bdg.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><p id="476a" class="pw-post-body-paragraph lg lh it li b lj lk ju ll lm ln jx lo lp lq lr ls lt lu lv lw lx ly lz ma mb im bi translated">现在，are模型的准确率下降到98.6%，因为sell_price包含了一些噪声，房屋的售价可能比其真实价值高出或低于20%。</p><p id="8833" class="pw-post-body-paragraph lg lh it li b lj lk ju ll lm ln jx lo lp lq lr ls lt lu lv lw lx ly lz ma mb im bi translated">估计的系数~1000和~1995非常接近我们预期的1000和2000。p值为0，表示系数的重要性。最后，我们可以看到这些系数(992–1009)和(1973–2016)的预期范围，因此我们的预期系数1000和2000落在这些范围内。</p><p id="6ec7" class="pw-post-body-paragraph lg lh it li b lj lk ju ll lm ln jx lo lp lq lr ls lt lu lv lw lx ly lz ma mb im bi translated">如果我们的y变量(sell_price)中有很多测量误差/噪声，系数应该仍然是无偏的，接近1000和2000，但是额外的噪声会降低我们模型的预测能力，因此R2会下降，2个系数的范围会更宽。</p><p id="a29a" class="pw-post-body-paragraph lg lh it li b lj lk ju ll lm ln jx lo lp lq lr ls lt lu lv lw lx ly lz ma mb im bi translated">让我们试着这样做…</p><pre class="kj kk kl km gt nj nk nl nm aw nn bi"><span id="140c" class="mc md it nk b gy no np l nq nr"># Increase noise on target variable to +/- 50% of true value<br/>np.random.seed(seed=0)<br/>df['sell_price_extreme_noise'] = df['true_value'] * (<br/>    np.random.randint(low=50, high=151, size=2000) / 100)</span><span id="0f76" class="mc md it nk b gy ns np l nq nr">y = df['sell_price_extreme_noise']</span><span id="9bd9" class="mc md it nk b gy ns np l nq nr">model = sm.OLS(y, X)<br/>results = model.fit().summary()<br/>results</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi oa"><img src="../Images/83bcd49d357c80e3cae066f88f0de0a1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1078/format:webp/1*RHtq_SZQNXeE8oGUNr08jw.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><p id="51fd" class="pw-post-body-paragraph lg lh it li b lj lk ju ll lm ln jx lo lp lq lr ls lt lu lv lw lx ly lz ma mb im bi translated">R2下降到92.1%，但我们的系数仍然接近1000和2000。正如所料，系数的范围更大。例如，对于第一个自变量(面积)，新的范围是982–1023，而上次运行的范围是992–1009。</p><p id="d22c" class="pw-post-body-paragraph lg lh it li b lj lk ju ll lm ln jx lo lp lq lr ls lt lu lv lw lx ly lz ma mb im bi translated">现在，假设测量误差在我们的独立变量中，这样我们数据集中的面积列与实际面积相差+/- 50%。这就是我们偏见产生的原因…</p><pre class="kj kk kl km gt nj nk nl nm aw nn bi"><span id="264b" class="mc md it nk b gy no np l nq nr"># We'll make area noisy such that it has +/- 50% error<br/>np.random.seed(seed=0)<br/>df['area_noise'] = df['area'] * (<br/>    np.random.randint(low=50, high=151, size=2000) / 100)</span><span id="11ef" class="mc md it nk b gy ns np l nq nr">df['area_x_premium_noise'] = df['area_noise'] * df['premium']</span><span id="e0b2" class="mc md it nk b gy ns np l nq nr">y = df['sell_price']<br/>X = df[['area_noise', 'area_x_premium_noise']]</span><span id="1f72" class="mc md it nk b gy ns np l nq nr">model = sm.OLS(y, X)<br/>results = model.fit().summary()<br/>results</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ob"><img src="../Images/c20c46c67291ea84b61cf41a6e79f2fe.png" data-original-src="https://miro.medium.com/v2/resize:fit:988/format:webp/1*cGMTh8MgFAN7iMb8guIiRw.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><p id="498e" class="pw-post-body-paragraph lg lh it li b lj lk ju ll lm ln jx lo lp lq lr ls lt lu lv lw lx ly lz ma mb im bi translated">R2下降到90.7%，但最重要的是，<strong class="li iu">我们的系数现在低估了面积的影响！</strong>我们现在看到的系数是~917和~1835。真实的预期系数(1000和2000)也超出了报告的范围(897-937和1781-1889)。这就是衰减偏差。</p></div><div class="ab cl kz la hx lb" role="separator"><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le"/></div><div class="im in io ip iq"><p id="0ec1" class="pw-post-body-paragraph lg lh it li b lj lk ju ll lm ln jx lo lp lq lr ls lt lu lv lw lx ly lz ma mb im bi translated"><strong class="li iu">结束语</strong></p><p id="87a9" class="pw-post-body-paragraph lg lh it li b lj lk ju ll lm ln jx lo lp lq lr ls lt lu lv lw lx ly lz ma mb im bi translated">如果我们的目标是预测房价，那么低估面积真实影响的估计系数很可能是<strong class="li iu">预测建模的最佳系数……你不需要做任何调整</strong>。</p><p id="e0a9" class="pw-post-body-paragraph lg lh it li b lj lk ju ll lm ln jx lo lp lq lr ls lt lu lv lw lx ly lz ma mb im bi translated">由于所报告的面积不准确且有噪声，因此，与我们有真实面积测量值的情况相比，OLS回归或机器学习模型对这种有噪声的面积测量值给予较小的权重是最佳的。不需要做任何事情来提高模型的预测精度。</p><p id="0011" class="pw-post-body-paragraph lg lh it li b lj lk ju ll lm ln jx lo lp lq lr ls lt lu lv lw lx ly lz ma mb im bi translated"><strong class="li iu">问题在于解释系数</strong>。当我们被问到</p><blockquote class="na nb nc"><p id="bc78" class="lg lh nd li b lj lk ju ll lm ln jx lo ne lq lr ls nf lu lv lw ng ly lz ma mb im bi translated">"每增加一平方米，房价会上涨多少？"</p></blockquote><p id="4f33" class="pw-post-body-paragraph lg lh it li b lj lk ju ll lm ln jx lo lp lq lr ls lt lu lv lw lx ly lz ma mb im bi translated">如果我们考虑了正确的变量，并且我们知道它们包含高测量误差，那么我们必须记住，我们获得的系数低估了由于面积增加<strong class="li iu">实际</strong> 1平方公吨而导致的价格上涨。</p><p id="dc6f" class="pw-post-body-paragraph lg lh it li b lj lk ju ll lm ln jx lo lp lq lr ls lt lu lv lw lx ly lz ma mb im bi translated">您可以使用<a class="ae ky" href="https://en.wikipedia.org/wiki/Regression_dilution#Correlation_correction" rel="noopener ugc nofollow" target="_blank"> <strong class="li iu">相关性衰减</strong> </a>或其他类似技术来估计“真实系数”。</p></div></div>    
</body>
</html>