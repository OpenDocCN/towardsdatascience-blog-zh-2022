<html>
<head>
<title>Youtube to Text with Speech Recognition in Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Python中的语音识别功能将Youtube转换为文本</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/youtube-to-text-with-speech-recognition-in-python-cd47d6d98b16#2022-01-05">https://towardsdatascience.com/youtube-to-text-with-speech-recognition-in-python-cd47d6d98b16#2022-01-05</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""><h1 id="aec9" class="pw-post-title io ip iq bd ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm bi translated">使用Python中的语音识别功能将Youtube转换为文本</h1></div><div class=""><h2 id="0570" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">基于Python的库，用于为NLP用例下载Youtube视频</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/f4d8916b7554a782faa997892fa8de80.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Q6ImnwoYA9Oq30idBs9ebg.jpeg"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">作者照片</p></figure><p id="4436" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><em class="lr">最后更新时间:2022年4月5日</em></p><p id="011f" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">为了构建一个会话式的语音到文本的NLP模型，我开始研究从Youtube平台检索音频数据的方法。目标是将音频和文本片段之间的数据配对作为输入数据源。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ls"><img src="../Images/36160cf5d4bb6b470948f73f666c5cb9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*IT5QB31lg0TLqhU1vscQ9g.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">作者照片</p></figure><p id="1eb6" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">有两个库可以从Youtube平台检索音频和文本数据集。</p><ul class=""><li id="22b1" class="lt lu iq kx b ky kz lb lc le lv li lw lm lx lq ly lz ma mb bi translated"><a class="ae mc" href="https://github.com/soimort/you-get" rel="noopener ugc nofollow" target="_blank">你-得到</a>图书馆</li><li id="e891" class="lt lu iq kx b ky md lb me le mf li mg lm mh lq ly lz ma mb bi translated"><a class="ae mc" href="https://github.com/codenamewei/youtube2text" rel="noopener ugc nofollow" target="_blank"> youtube2text </a>图书馆</li></ul><h2 id="5c9f" class="mi mj iq bd mk ml mm dn mn mo mp dp mq le mr ms mt li mu mv mw lm mx my mz na bi translated"><a class="ae mc" href="https://github.com/soimort/you-get" rel="noopener ugc nofollow" target="_blank">你-得到</a>库</h2><p id="70ba" class="pw-post-body-paragraph kv kw iq kx b ky nb jr la lb nc ju ld le nd lg lh li ne lk ll lm nf lo lp lq ij bi translated">一个简单的方法是使用<a class="ae mc" href="https://github.com/soimort/you-get" rel="noopener ugc nofollow" target="_blank"> you-get </a>库。基于python的库可以很容易地用pip安装。</p><pre class="kg kh ki kj gt ng nh ni nj aw nk bi"><span id="ac32" class="mi mj iq nh b gy nl nm l nn no">pip install you-get</span></pre><p id="aa65" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">基于python的库使用终端命令进行操作。音频文件可以在各种输出(. mp4，.而文本呈现在子剪辑字幕输出文件(.srt)。</p><p id="22d6" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">安装后使用这个库很简单。在终端中使用以下命令获取有关下载哪些源代码的信息。</p><pre class="kg kh ki kj gt ng nh ni nj aw nk bi"><span id="3fb2" class="mi mj iq nh b gy nl nm l nn no">you-get -i https://www.youtube.com/watch?v=2M_kCCcNDts</span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi np"><img src="../Images/97a1baddc56fd1fbff260a42cf0b1a7d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_GJdusd8N6m3cBCFdL6VbQ.jpeg"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">作者照片</p></figure><p id="fe66" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">使用下面的命令继续下载。将itag值更改为具有首选输出类型(. mp4，.webm)。</p><pre class="kg kh ki kj gt ng nh ni nj aw nk bi"><span id="ece1" class="mi mj iq nh b gy nl nm l nn no">you-get --itag=137 https://www.youtube.com/watch?v=2M_kCCcNDts</span></pre><p id="dbbf" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">或者，在不指定标记值的情况下运行命令将下载列表中的默认值。</p><pre class="kg kh ki kj gt ng nh ni nj aw nk bi"><span id="b11d" class="mi mj iq nh b gy nl nm l nn no">you-get https://www.youtube.com/watch?v=2M_kCCcNDts</span></pre><p id="dcd0" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">字幕文件的格式如下。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nq"><img src="../Images/d1bc20652ef629f8a67e1da9775fec6b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*V3cNHPp0Eei98yRTOfDOWQ.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">作者照片</p></figure><p id="ad42" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">注意文本都是小写的，没有用句末标点符号分开。因此，必须执行后续处理工作的连续步骤，以获得音频和文本的工作对。</p><h2 id="a94c" class="mi mj iq bd mk ml mm dn mn mo mp dp mq le mr ms mt li mu mv mw lm mx my mz na bi translated"><a class="ae mc" href="https://github.com/codenamewei/youtube2text" rel="noopener ugc nofollow" target="_blank"> Youtube2text </a>库</h2><p id="8469" class="pw-post-body-paragraph kv kw iq kx b ky nb jr la lb nc ju ld le nd lg lh li ne lk ll lm nf lo lp lq ij bi translated">Youtube2text library旨在为音频&lt;&gt;文本配对获取合适的格式。在撰写本文时，该库支持三种功能。</p><ul class=""><li id="63e8" class="lt lu iq kx b ky kz lb lc le lv li lw lm lx lq ly lz ma mb bi translated">检索Youtube URL作为音频和文本输出</li><li id="3ce7" class="lt lu iq kx b ky md lb me le mf li mg lm mh lq ly lz ma mb bi translated">下载音频文件格式的Youtube音频。wav，。flac)</li><li id="7c03" class="lt lu iq kx b ky md lb me le mf li mg lm mh lq ly lz ma mb bi translated">将音频文件提取到文本输出</li></ul><p id="c542" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">使用以下命令通过pip安装库。</p><pre class="kg kh ki kj gt ng nh ni nj aw nk bi"><span id="7f4d" class="mi mj iq nh b gy nl nm l nn no">pip install youtube2text</span></pre><p id="fc96" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">要检索作为音频和文本输出的youtube URL，请在python环境中运行以下命令。</p><pre class="kg kh ki kj gt ng nh ni nj aw nk bi"><span id="3b26" class="mi mj iq nh b gy nl nm l nn no">from youtube2text import Youtube2Text<br/><br/>converter = Youtube2Text()<br/><br/>converter.url2text("https://www.youtube.com/watch?v=Ad9Q8rM0Am0&amp;t=114s")</span></pre><p id="1794" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">该库目前支持wav或flac格式的音频和csv格式的文本，输出存储在指定路径或默认路径的子文件夹中(<homepath> \youtube2text)</homepath></p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nr"><img src="../Images/034bce747189287711ab2fefa533bfb1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1240/format:webp/1*aNQ90RH2xAewfDREgoYbUQ.png"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">作者照片。</p></figure><p id="2198" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">下面列出了目录的布局。<em class="lr"> Audio </em>文件夹包含整个音频文件，而<em class="lr"> audio-chunks </em>文件夹存储与文本文件中的元数据相匹配的音频文件片段。文本文件夹中的Csv文件是从音频到文本的翻译输出。</p><pre class="kg kh ki kj gt ng nh ni nj aw nk bi"><span id="52f7" class="mi mj iq nh b gy nl nm l nn no">&lt;Own Path&gt; or &lt;HOME_DIRECTORY&gt;/youtube2text<br/>│<br/>├── audio/<br/>│   └── 2022Jan02_011802.wav<br/>|<br/>├── audio-chunks/<br/>│   └── 2022Jan02_011802<br/>│       ├── chunk1.wav<br/>│       ├── chunk2.wav<br/>│       └── chunk3.wav<br/>│   <br/>└── text/<br/>    └── 2022Jan02_011802.csv</span></pre><p id="07af" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">我的目标是准备音频和翻译文本来训练自定义自动语音识别(ASR)模型。任何使用大型语言预训练模型的尝试都需要以期望的频率(例如:16 kHz)对新添加的音频数据进行采样。选定的采样速率应该与现有NLP模型的训练速率相匹配。在这种情况下，音频数据检索过程允许切换采样速率是很重要的。Youtube2text的设计考虑到了<a class="ae mc" href="https://github.com/codenamewei/youtube2text/blob/main/src/youtube2text/youtube2text.py#L111" rel="noopener ugc nofollow" target="_blank">音频采样率</a>的切换。</p><pre class="kg kh ki kj gt ng nh ni nj aw nk bi"><span id="b67d" class="mi mj iq nh b gy nl nm l nn no">converter.url2audio(urlpath = "https://www.youtube.com/watch?v=rFYcvrKkr90", audiosamplingrate = 22000)</span></pre><p id="6562" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">让我们看一下文本文件。文本文件包含两列:text和wav。并排提供映射到文本句子的音频块的元数据。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ns"><img src="../Images/968a37db354818375af1e5a35b9f7b8a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Gq-zh4GMVJ8u5Eib0WSMRQ.jpeg"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">作者照片</p></figure><p id="c4f9" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">文本文件输出的排列方式允许在需要时纠正任何句子。</p><p id="fad3" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">由于使用现有的语音识别模型将音频翻译成文本，因此生成的文本高度依赖于音频输出的质量。音频可能并不总是以精确的方式表达。把事情放在上下文中，想象一下，一个没有背景噪音的演讲者的Ted演讲比一个有背景音乐的多人主持的网络研讨会更容易理解。</p><p id="e9f9" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">通过几次尝试，很明显文本需要人工检查和校正，以产生高质量的翻译文本数据。希望在这个过程中花费时间和精力来获得高质量的翻译文本。</p><p id="1beb" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">虽然有时可能会很乏味，但这有助于确保为后续的NLP模型训练准备好良好的原始数据源。沿着文本列重放音频块使得更容易找到与音频输出相对应的部分配对。</p><p id="e99c" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">说明文件的列对于ASR用例之类的任务很重要。在训练模型的后一步骤中，数据准备步骤从特定音频路径读入音频文件并预处理矢量嵌入。否则，如果不需要wav信息的元数据，则可以通过在单个步骤中删除列来容易地消除说明文件的列。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nt"><img src="../Images/d7074680e814af6b08239bfe592062f5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*XzUYdlSZHaeGcZJVEuWADg.jpeg"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">作者照片</p></figure><p id="46bc" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">查看python笔记本获取更多使用youtube2text库的例子。</p><p id="01cd" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">感谢阅读。</p><h2 id="a5f8" class="mi mj iq bd mk ml mm dn mn mo mp dp mq le mr ms mt li mu mv mw lm mx my mz na bi translated">资源</h2><ul class=""><li id="9662" class="lt lu iq kx b ky nb lb nc le nu li nv lm nw lq ly lz ma mb bi translated"><a class="ae mc" href="https://github.com/soimort/you-get" rel="noopener ugc nofollow" target="_blank">https://github.com/soimort/you-get</a></li><li id="2b18" class="lt lu iq kx b ky md lb me le mf li mg lm mh lq ly lz ma mb bi translated"><a class="ae mc" href="https://github.com/codenamewei/youtube2text" rel="noopener ugc nofollow" target="_blank">https://github.com/codenamewei/youtube2text</a></li></ul></div></div>    
</body>
</html>