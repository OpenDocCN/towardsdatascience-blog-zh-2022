<html>
<head>
<title>How to Perform Content Moderation Over Audio Files with Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何使用Python对音频文件进行内容审核</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/content-moderation-python-assemblyai-4a09ca61d346#2022-01-13">https://towardsdatascience.com/content-moderation-python-assemblyai-4a09ca61d346#2022-01-13</a></blockquote><div><div class="fc ii ij ik il im"/><div class="in io ip iq ir"><div class=""><h1 id="9107" class="pw-post-title is it iu bd iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq bi translated">如何使用Python对音频文件进行内容审核</h1></div><div class=""><h2 id="543c" class="pw-subtitle-paragraph jr it iu bd b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki dk translated">用Python和AssemblyAI API检测音频文件中的敏感内容</h2></div><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj kj"><img src="../Images/8072e098f61b16b49898d0b68748b322.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kxlxi_bAupziCKpE5U76mA.jpeg"/></div></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">格伦·卡丽在<a class="ae kz" href="https://unsplash.com/s/photos/scissor?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>拍摄的照片</p></figure><h2 id="107e" class="la lb iu bd lc ld le dn lf lg lh dp li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">介绍</h2><p id="26a7" class="pw-post-body-paragraph lw lx iu ly b lz ma jv mb mc md jy me lj mf mg mh ln mi mj mk lr ml mm mn mo in bi translated">在我以前的一篇文章中，我讨论了语音识别和如何用Python 执行语音到文本转换。当处理音频或视频文件时，有时能够检测到任何敏感内容以便采取某些操作是非常重要的。</p><p id="d79f" class="pw-post-body-paragraph lw lx iu ly b lz mp jv mb mc mq jy me lj mr mg mh ln ms mj mk lr mt mm mn mo in bi translated">例如，您可能想要在播客上执行语音到文本转换，同时您想要检测是否有任何参与者或发言者讨论毒品、色情或酒精(或任何其他可能被视为敏感的内容)。</p><p id="d0c7" class="pw-post-body-paragraph lw lx iu ly b lz mp jv mb mc mq jy me lj mr mg mh ln ms mj mk lr mt mm mn mo in bi translated">在今天的教程中，我们将讨论内容审核，以及如何使用Python和AssemblyAI API检测音频甚至视频文件中的敏感内容。</p></div><div class="ab cl mu mv hy mw" role="separator"><span class="mx bw bk my mz na"/><span class="mx bw bk my mz na"/><span class="mx bw bk my mz"/></div><div class="in io ip iq ir"><h2 id="5403" class="la lb iu bd lc ld le dn lf lg lh dp li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">使用Python对音频和视频文件进行内容审核</h2><p id="38ed" class="pw-post-body-paragraph lw lx iu ly b lz ma jv mb mc md jy me lj mf mg mh ln mi mj mk lr ml mm mn mo in bi translated">AssemblyAI API提供了一个<a class="ae kz" href="https://docs.assemblyai.com/audio-intelligence#content-moderation\" rel="noopener ugc nofollow" target="_blank">内容审核功能</a>，允许你执行<strong class="ly iv">内容安全检测。</strong>在接下来的几节中，将在我们的分步指南中使用它来检测输入文件中是否提到了敏感话题，如果是，则是在何时以及说了什么。API可以捕捉的一些主题包括事故、灾难、公司财务、赌博和仇恨言论(还有更多的主题，因此如果您正在寻找其他主题，请确保查看包含所涵盖主题详细列表的<a class="ae kz" href="https://docs.assemblyai.com/audio-intelligence#content-moderation" rel="noopener ugc nofollow" target="_blank">文档</a>。</p><p id="df65" class="pw-post-body-paragraph lw lx iu ly b lz mp jv mb mc mq jy me lj mr mg mh ln ms mj mk lr mt mm mn mo in bi translated">现在，让我们从一个音频文件开始，我们将对其执行语音到文本转换，同时我们还将启用内容审核功能，以便检测音频文件是否涉及API支持的任何敏感话题。请注意，如果您想要遵循这个逐步指南，您将需要来自AssemblyAI的一个绝对免费的<a class="ae kz" href="https://app.assemblyai.com/signup" rel="noopener ugc nofollow" target="_blank"> API访问令牌</a>。</p><p id="0771" class="pw-post-body-paragraph lw lx iu ly b lz mp jv mb mc mq jy me lj mr mg mh ln ms mj mk lr mt mm mn mo in bi translated">现在我们有了API的访问令牌，让我们做一些必需的导入，并为将发送到AssemblyAI端点的请求准备头部。</p><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="nb nc l"/></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">导入请求库并准备POST请求的标题—来源:<a class="ae kz" href="https://gmyrianthous.medium.com/" rel="noopener">作者</a></p></figure><p id="b85c" class="pw-post-body-paragraph lw lx iu ly b lz mp jv mb mc mq jy me lj mr mg mh ln ms mj mk lr mt mm mn mo in bi translated">然后，我们需要读入我们想要执行语音识别和内容审核的音频文件，以便将其上传到AssemblyAI的相应托管服务，该服务将返回我们将在后续请求中使用的URL。</p><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="nb nc l"/></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">将输入文件上传到AssemblyAI的托管服务—来源:<a class="ae kz" href="https://gmyrianthous.medium.com/" rel="noopener">作者</a></p></figure><p id="cd12" class="pw-post-body-paragraph lw lx iu ly b lz mp jv mb mc mq jy me lj mr mg mh ln ms mj mk lr mt mm mn mo in bi translated">既然我们已经将音频文件上传到托管服务，并从端点接收回了<code class="fe nd ne nf ng b">upload_url</code>,我们可以继续执行实际的语音到文本任务，将它与敏感内容检测结合起来。注意，为了启用内容审核特性，我们还需要将参数<code class="fe nd ne nf ng b">content_safety</code>传递给<code class="fe nd ne nf ng b">True</code>。</p><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="nb nc l"/></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">执行语音转文本和敏感内容检测—来源:<a class="ae kz" href="https://gmyrianthous.medium.com/" rel="noopener">作者</a></p></figure><p id="403f" class="pw-post-body-paragraph lw lx iu ly b lz mp jv mb mc mq jy me lj mr mg mh ln ms mj mk lr mt mm mn mo in bi translated">响应(显示在上面的注释中)将包括已经进行的转录的转录ID。最后一步涉及使用<code class="fe nd ne nf ng b">id</code>的<code class="fe nd ne nf ng b">GET</code>请求。注意，我们一直发送<code class="fe nd ne nf ng b">GET</code>请求，直到响应的状态被标记为<code class="fe nd ne nf ng b">completed</code>(或<code class="fe nd ne nf ng b">error</code>):</p><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="nb nc l"/></div></figure><p id="deb8" class="pw-post-body-paragraph lw lx iu ly b lz mp jv mb mc mq jy me lj mr mg mh ln ms mj mk lr mt mm mn mo in bi translated">最后，我们将来自转录端点的响应写入一个文件:</p><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="nb nc l"/></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">将来自转录端点的响应写入文件—来源:<a class="ae kz" href="https://gmyrianthous.medium.com/" rel="noopener">作者</a></p></figure></div><div class="ab cl mu mv hy mw" role="separator"><span class="mx bw bk my mz na"/><span class="mx bw bk my mz na"/><span class="mx bw bk my mz"/></div><div class="in io ip iq ir"><h2 id="f7da" class="la lb iu bd lc ld le dn lf lg lh dp li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">解释内容审核输出</h2><p id="31c8" class="pw-post-body-paragraph lw lx iu ly b lz ma jv mb mc md jy me lj mf mg mh ln mi mj mk lr ml mm mn mo in bi translated">我们在上一节中发送给转录端点的<code class="fe nd ne nf ng b">POST</code>请求的响应将类似于下面共享的响应。</p><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="nb nc l"/></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">转录端点返回的响应包括语音转文本和内容安全标签—来源:<a class="ae kz" href="https://gmyrianthous.medium.com/" rel="noopener">作者</a></p></figure><p id="b49d" class="pw-post-body-paragraph lw lx iu ly b lz mp jv mb mc mq jy me lj mr mg mh ln ms mj mk lr mt mm mn mo in bi translated">音频文件的文本转录(即语音转文本的结果)包含在外部<code class="fe nd ne nf ng b">text</code>字段中。现在<strong class="ly iv">内容安全检测结果</strong>将包含在<code class="fe nd ne nf ng b">content_safety_labels</code>键中，如下所述:</p><ul class=""><li id="de9b" class="nh ni iu ly b lz mp mc mq lj nj ln nk lr nl mo nm nn no np bi translated"><code class="fe nd ne nf ng b"><strong class="ly iv">results</strong></code>:是包含内容安全检测模型标记的音频转录的所有部分的列表</li><li id="d743" class="nh ni iu ly b lz nq mc nr lj ns ln nt lr nu mo nm nn no np bi translated"><code class="fe nd ne nf ng b"><strong class="ly iv">results.text</strong></code>:包含触发检测模型的文本转录的字段。</li><li id="e8e2" class="nh ni iu ly b lz nq mc nr lj ns ln nt lr nu mo nm nn no np bi translated"><code class="fe nd ne nf ng b"><strong class="ly iv">results.labels</strong></code>:是包含内容安全检测模型为特定转录文本段预测的所有标签(例如<code class="fe nd ne nf ng b">disaster</code>、<code class="fe nd ne nf ng b">drugs</code>、<code class="fe nd ne nf ng b">alcohol</code>)的列表。这个列表中的每个JSONObject还带有<code class="fe nd ne nf ng b">confidence</code>和<code class="fe nd ne nf ng b">severity</code>指标(关于这两个术语的更多内容将在下一节讨论)。</li><li id="b596" class="nh ni iu ly b lz nq mc nr lj ns ln nt lr nu mo nm nn no np bi translated"><code class="fe nd ne nf ng b"><strong class="ly iv">results.timestamp</strong></code>:表示包含被标记内容的音频文件的开始和结束时间(以毫秒为单位)的字段。</li><li id="ad3b" class="nh ni iu ly b lz nq mc nr lj ns ln nt lr nu mo nm nn no np bi translated"><code class="fe nd ne nf ng b"><strong class="ly iv">summary</strong></code>:该键包含<code class="fe nd ne nf ng b">results</code>中预测的每个标签相对于整个音频文件的置信度。例如，如果我们以某个特定标签的单一结果结束，比如说<code class="fe nd ne nf ng b">0.99</code>置信度，但同时音频文件长达5小时，那么summary将显示该标签的置信度低得多，因为它在整个音频中没有被广泛使用。</li><li id="d25c" class="nh ni iu ly b lz nq mc nr lj ns ln nt lr nu mo nm nn no np bi translated"><code class="fe nd ne nf ng b"><strong class="ly iv">severity_score_summary</strong></code>:提供<code class="fe nd ne nf ng b">results</code>中包含的每个预测标签相对于整个音频文件的整体严重性。</li></ul></div><div class="ab cl mu mv hy mw" role="separator"><span class="mx bw bk my mz na"/><span class="mx bw bk my mz na"/><span class="mx bw bk my mz"/></div><div class="in io ip iq ir"><h2 id="7995" class="la lb iu bd lc ld le dn lf lg lh dp li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">了解严重性和置信度得分</h2><p id="8e57" class="pw-post-body-paragraph lw lx iu ly b lz ma jv mb mc md jy me lj mf mg mh ln mi mj mk lr ml mm mn mo in bi translated">在解释内容安全检测模型给出的结果时，我们遇到了两个评分术语。</p><p id="c6f4" class="pw-post-body-paragraph lw lx iu ly b lz mp jv mb mc mq jy me lj mr mg mh ln ms mj mk lr mt mm mn mo in bi translated">事实上，每一个预测的标签都会有其严重性分数<strong class="ly iv">和置信度分数<strong class="ly iv">。<strong class="ly iv">严重性</strong>分数表示<strong class="ly iv">被标记的内容有多严重</strong>，分数越低表示内容的严重性越低。另一方面，<strong class="ly iv">置信度</strong>分数表明<strong class="ly iv">模型在预测输出标签时</strong>的置信度。注意，它也是以<code class="fe nd ne nf ng b">0-1</code>的刻度来测量的。</strong></strong></p><p id="0582" class="pw-post-body-paragraph lw lx iu ly b lz mp jv mb mc mq jy me lj mr mg mh ln ms mj mk lr mt mm mn mo in bi translated">例如，考虑我们在API响应中观察到的预测的<code class="fe nd ne nf ng b">disasters</code>标签的严重性和置信度得分。</p><pre class="kk kl km kn gu nv ng nw nx aw ny bi"><span id="e9ab" class="la lb iu ng b gz nz oa l ob oc">"labels": [<br/>    {<br/>        "confidence": 0.9986903071403503,<br/>        "severity": 0.11403293907642365,<br/>        "label": "disasters"<br/>    }<br/>],</span></pre><p id="2b9c" class="pw-post-body-paragraph lw lx iu ly b lz mp jv mb mc mq jy me lj mr mg mh ln ms mj mk lr mt mm mn mo in bi translated"><code class="fe nd ne nf ng b">0.9986903071403503</code>的置信度指示AssemblyAI内容安全检测模型99.87%确信在指定的<code class="fe nd ne nf ng b">timestamp</code>的音频文件的口述内容是关于低严重性的自然灾害(<code class="fe nd ne nf ng b">0.1140</code>)。</p></div><div class="ab cl mu mv hy mw" role="separator"><span class="mx bw bk my mz na"/><span class="mx bw bk my mz na"/><span class="mx bw bk my mz"/></div><div class="in io ip iq ir"><h2 id="c964" class="la lb iu bd lc ld le dn lf lg lh dp li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">完整代码</h2><p id="18f2" class="pw-post-body-paragraph lw lx iu ly b lz ma jv mb mc md jy me lj mf mg mh ln mi mj mk lr ml mm mn mo in bi translated">今天教程中使用的完整代码可以在下面分享的GitHub Gist中找到。</p><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="nb nc l"/></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">用于音频转录和敏感内容检测的完整代码—来源:<a class="ae kz" href="https://gmyrianthous.medium.com/" rel="noopener">作者</a></p></figure></div><div class="ab cl mu mv hy mw" role="separator"><span class="mx bw bk my mz na"/><span class="mx bw bk my mz na"/><span class="mx bw bk my mz"/></div><div class="in io ip iq ir"><h2 id="78f3" class="la lb iu bd lc ld le dn lf lg lh dp li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">最后的想法</h2><p id="f311" class="pw-post-body-paragraph lw lx iu ly b lz ma jv mb mc md jy me lj mf mg mh ln mi mj mk lr ml mm mn mo in bi translated">在今天的文章中，我们展示了如何使用Python和AssemblyAI API对音频或视频文件执行敏感内容审核。相关的API端点提供了能够检测敏感内容的功能。</p><p id="820d" class="pw-post-body-paragraph lw lx iu ly b lz mp jv mb mc mq jy me lj mr mg mh ln ms mj mk lr mt mm mn mo in bi translated">此外，我们讨论了如何解释返回的响应，并检查内容安全检测模型是否标记了输入音频的任何部分。最后，我们解释了如何解释信心和严重性分数以及它们的实际含义。</p></div><div class="ab cl mu mv hy mw" role="separator"><span class="mx bw bk my mz na"/><span class="mx bw bk my mz na"/><span class="mx bw bk my mz"/></div><div class="in io ip iq ir"><p id="1b77" class="pw-post-body-paragraph lw lx iu ly b lz mp jv mb mc mq jy me lj mr mg mh ln ms mj mk lr mt mm mn mo in bi translated"><a class="ae kz" href="https://gmyrianthous.medium.com/membership" rel="noopener"> <strong class="ly iv">成为会员</strong> </a> <strong class="ly iv">阅读介质上的每一个故事。你的会员费直接支持我和你看的其他作家。你也可以在媒体上看到所有的故事。</strong></p><div class="od oe gq gs of og"><a href="https://gmyrianthous.medium.com/membership" rel="noopener follow" target="_blank"><div class="oh ab fp"><div class="oi ab oj cl cj ok"><h2 class="bd iv gz z fq ol fs ft om fv fx it bi translated">通过我的推荐链接加入Medium-Giorgos Myrianthous</h2><div class="on l"><h3 class="bd b gz z fq ol fs ft om fv fx dk translated">作为一个媒体会员，你的会员费的一部分会给你阅读的作家，你可以完全接触到每一个故事…</h3></div><div class="oo l"><p class="bd b dl z fq ol fs ft om fv fx dk translated">gmyrianthous.medium.com</p></div></div><div class="op l"><div class="oq l or os ot op ou kt og"/></div></div></a></div></div><div class="ab cl mu mv hy mw" role="separator"><span class="mx bw bk my mz na"/><span class="mx bw bk my mz na"/><span class="mx bw bk my mz"/></div><div class="in io ip iq ir"><p id="676e" class="pw-post-body-paragraph lw lx iu ly b lz mp jv mb mc mq jy me lj mr mg mh ln ms mj mk lr mt mm mn mo in bi translated"><strong class="ly iv">你可能也会喜欢</strong></p><div class="od oe gq gs of og"><a rel="noopener follow" target="_blank" href="/speech-recognition-python-assemblyai-bb5024d322d8"><div class="oh ab fp"><div class="oi ab oj cl cj ok"><h2 class="bd iv gz z fq ol fs ft om fv fx it bi translated">如何使用Python执行语音识别</h2><div class="on l"><h3 class="bd b gz z fq ol fs ft om fv fx dk translated">用Python中的AssemblyAI API执行语音转文本</h3></div><div class="oo l"><p class="bd b dl z fq ol fs ft om fv fx dk translated">towardsdatascience.com</p></div></div><div class="op l"><div class="ov l or os ot op ou kt og"/></div></div></a></div></div><div class="ab cl mu mv hy mw" role="separator"><span class="mx bw bk my mz na"/><span class="mx bw bk my mz na"/><span class="mx bw bk my mz"/></div><div class="in io ip iq ir"><div class="kk kl km kn gu og"><a rel="noopener follow" target="_blank" href="/real-time-speech-recognition-python-assemblyai-13d35eeed226"><div class="oh ab fp"><div class="oi ab oj cl cj ok"><h2 class="bd iv gz z fq ol fs ft om fv fx it bi translated">如何用Python执行实时语音识别</h2><div class="on l"><h3 class="bd b gz z fq ol fs ft om fv fx dk translated">使用Python中的AssemblyAI API执行实时语音转文本</h3></div><div class="oo l"><p class="bd b dl z fq ol fs ft om fv fx dk translated">towardsdatascience.com</p></div></div><div class="op l"><div class="ow l or os ot op ou kt og"/></div></div></a></div></div><div class="ab cl mu mv hy mw" role="separator"><span class="mx bw bk my mz na"/><span class="mx bw bk my mz na"/><span class="mx bw bk my mz"/></div><div class="in io ip iq ir"><div class="kk kl km kn gu og"><a rel="noopener follow" target="_blank" href="/sentiment-analysis-assemblyai-python-a4686967e0fc"><div class="oh ab fp"><div class="oi ab oj cl cj ok"><h2 class="bd iv gz z fq ol fs ft om fv fx it bi translated">如何用Python对音频文件进行情感分析</h2><div class="on l"><h3 class="bd b gz z fq ol fs ft om fv fx dk translated">探索如何使用AssemblyAI API提取语音中的情感</h3></div><div class="oo l"><p class="bd b dl z fq ol fs ft om fv fx dk translated">towardsdatascience.com</p></div></div><div class="op l"><div class="ox l or os ot op ou kt og"/></div></div></a></div></div></div>    
</body>
</html>