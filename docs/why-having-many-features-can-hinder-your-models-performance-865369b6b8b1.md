# 为什么拥有许多功能会影响模型的性能

> 原文：<https://towardsdatascience.com/why-having-many-features-can-hinder-your-models-performance-865369b6b8b1>

## 特征工程的活动对于提高预测模型的性能非常有用。然而，如果我们不牢记要避免的某些原则，它可能会使我们的结果变得更糟。

![](img/5dbfc8ece537f73179d6f4e03ebe5e4e.png)

图片作者。

数据分析项目总是从数据集开始。这可能是客户提供的，在 Kaggle.com 等网站上公开发现的，或者是我们和我们的团队创建的。

在任何一种情况下，数据集将显示一个解剖结构，该解剖结构将根据它想要描述的现象的类型而变化，并且将具有构成该结构的一定数量的列。

在我们项目的开发过程中，团队会对该数据集的几个方面感兴趣:

*   **代表的**现象是怎样的实际数据？
*   我们的列的**数据类型**是什么？
*   有多少**行和多少**列？

和许多其他人。回答这些问题很重要，因为它们有助于定义我们团队的调查范围。

它们帮助我们了解要做多少 **EDA** (探索性数据分析)，我们可以预测什么以及如何预测(使用机器学习或其他统计方法)以及如何构建数据预处理计划。

我在专门的文章中谈到了其中的一些问题。你可以在这里阅读它们

*   [构建您自己的数据集:优势、方法和工具](/building-your-own-dataset-benefits-approach-and-tools-6ab096e37f2)
*   [Python 中的探索性数据分析——循序渐进的过程](/exploratory-data-analysis-in-python-a-step-by-step-process-d0dfa6bf94ee)
*   [如何构建你的机器学习项目](https://medium.com/mlearning-ai/how-to-structure-your-machine-learning-project-62f8a1eef582)

一个分析管道通常要经过几个步骤，其中一个被称为*特征工程。*

在此阶段，分析师修改、转换和添加数据集中的列(也称为特征、维度、变量等)，目的是**丰富关于所描述现象的信息**。通常这是在现象本身的建模阶段完成的。

例如，如果我们正在研究一个时间序列，一个特性工程活动可以从序列中出现的日期开始创建额外的列，以提取属于周末的年、月、日等。

假设是，如果我们添加更多关于目标变量的信息，目标变量(如果我们谈论的是监督学习)可以更好地建模——在这种情况下，我们通过设计一些时间特征来丰富这个系列。

但是有时这个过程会产生一些问题，这些问题可能很难识别。这样的问题往往会导致训练集过拟合。

我已经写了关于过度拟合和[为什么它是机器学习的最大障碍之一](/overcome-the-biggest-obstacle-in-machine-learning-overfitting-cca026873970)。如果您有兴趣了解更多信息，我建议您阅读这篇文章。

在这篇文章中，我将专门讨论当我们在特征工程上走得太远时，也就是当我们向数据集添加太多信息时，可能出现的问题。

# 为什么要做特征工程？

> 特征工程的动机是增加有价值信息的可用性，并通过在数据中包含这种新的“视角”来训练模型。

对这一活动的解释是正确的。想要添加信息通常是一个要追求的活动，**但是只有当我们确信数据确实对模型有用的时候。**

正如我经常在网上写文章和发表文章一样，**我们首先关注的应该是尽可能多地收集高质量的数据**，**以便最好地代表我们想要研究和建模的现象。**

我所说的“高质量”指的是包含尽可能接近可观察现实的例子的数据。

> 我们希望确保问题的答案包含在我们的数据集中。

因此，进行特征工程可以帮助我们在分析阶段回答这些问题，或者帮助我们的模型找到一种更简单的方法来预测目标。

# 为什么拥有大量的特性是一个问题？

然而，粗心的分析师可能会遇到问题，如果他添加太多的新变量到他的数据集中。

其中一些可能实际上是有用的，**其他的甚至可能阻碍我们的模型的推广。**

> 接收潜在不相关信息的模型可能很难概括这种现象。

通过形式化，如果分析师向数据集添加了太多的列，他可能会出错，例如

*   **通过提高信噪比来添加无关信息**
*   **增加待映射现象**的复杂性
*   在数据集中插入一些**混杂**
*   **列比行多**

这些方面中的每一个都会对我们的模型产生有用结果的能力产生负面影响。让我们看看怎么做。

## 添加无关信息(提高信噪比)

我们的数据集中代表该现象的例子越多，信噪比就越高。我们总是希望以这样一种方式最大化这个比率，即我们可以使样本尽可能接近收集数据的人群。

我们数据集*中的每个例子都应该用代表我们想要研究的现象的某些特征来描述*。

如果不发生这种情况，这个例子基本上没有用。然而，这种无用性没有被我们的模型过滤掉，我们的模型将试图学习使用这种有噪声的信息来映射 X 到 y 的最佳方式。这会降低模型的性能。

## 增加要绘制的现象的复杂性

我们想要建模的现象越复杂，模型就越难找到描述该行为的函数。

我说的复杂是什么意思？在这种情况下，我们指的是列数。每一篇专栏文章都描述了一些现象，随着描述的丰富，自然会有复杂性的增长。

有时一个现象天生就很复杂，无法建模(例如天气预报)——**在这种情况下，我们需要能够理解我们添加的列会使问题变得多么复杂。**

## 添加混杂因素

混杂变量是“混淆”模型的变量。彼此相关但并不真正产生影响的变量(虚假相关性等)会在训练阶段混淆模型。

在这种情况下，模型错误地了解到变量 *K* 对目标产生了很大的影响——当后者随后被部署到生产中时，其性能与训练中看到的性能相差甚远。

同样，解决方案是相同的:**仔细研究添加到数据集中的变量的性质，思考这实际上如何帮助模型。**

## 列比行多

这是一个有点模糊的场景，但是如果分析师使用外部库来进行特性工程，这种情况就会发生。例如，如果您想对由金融蜡烛线组成的时间序列进行 FE，技术分析库会对数据集应用数百个以上的列。

> 列:**要学的东西**
> 行:**要学的例子**

基本上，我的建议是始终避免列比行多的情况。

# 如何识别最重要的特征？

我们已经看到，过于自由的特征工程过程会对我们的模型造成损害。

相比之下，识别哪些特征要包含在我们的数据集中的过程称为*特征选择。*

> 特征选择帮助我们隔离对模型性能贡献最大的变量。

有多种选择特征的方法。本文不会详细讨论这个主题，但是我可以链接到一篇关于 [Boruta 的文章，这是一个 Python](/feature-selection-with-boruta-in-python-676e3877e596) 中的特性选择库。该库易于使用，并允许计算数据集中每个要素的重要性。一个重要的特性当然要包含在训练集中，而有些甚至可以被删除或转换。

# 结论

特征工程当然是我们必须经常思考的一项活动，但重点是不要做过头。

人们很容易认为某个变量会对模型的性能产生积极影响— **检验假设的最佳方式是通过实验**。Boruta 在这方面有所帮助:当添加一个新变量时，我们可以使用这个库(和其他方法一起)来估计这个特性与结果的相关性。

如果我们不想通过选择过程来研究特征，建议是避免提到的障碍，并评估**模型的性能如何随着更多变量的逐渐插入而变化。**

**如果你想支持我的内容创作活动，欢迎点击我下面的推荐链接，加入 Medium 的会员计划**。我将收到你投资的一部分，你将能够以无缝的方式访问 Medium 的大量数据科学文章。

<https://medium.com/@theDrewDag/membership>  

下次见！👋

# 推荐阅读

对于感兴趣的人来说，这里有一个我为每个与 ML 相关的主题推荐的书籍列表。在我看来，有一些必不可少的书籍对我的职业生涯产生了巨大影响。
*免责声明:这些是亚马逊会员链接。我会收到亚马逊为你推荐这些项目的一小笔佣金。你的体验不会改变，你也不会被收取更多费用，但它将帮助我扩大业务规模，围绕人工智能制作更多内容。*

*   **ML 简介** : [*自信的数据技能:掌握处理数据的基本原理，为你的职业生涯增压*](https://amzn.to/3WZ51cE) 作者:基里尔·叶列缅科
*   **sk Learn/tensor flow**:[*使用 Scikit-Learn、Keras 和 TensorFlow*](https://amzn.to/3jseVGb) 进行动手机器学习
*   **NLP** : [*文本作为数据:机器学习和社会科学的新框架*](https://amzn.to/3l9FO22) 作者贾斯汀·格里默
*   **sk Learn/PyTorch**:[*用 py torch 和 Scikit 进行机器学习——Learn:用 Python 开发机器学习和深度学习模型*](https://amzn.to/3wYZf0e)Sebastian Raschka
*   **数据即** : [*用数据讲故事:商务人士数据可视化指南*](https://amzn.to/3HUtGtB) 作者 Cole Knaflic

# 有用的链接(我写的)

*   **了解如何在 Python 中执行顶层探索性数据分析**:[*Python 中的探索性数据分析——一步一步的过程*](/exploratory-data-analysis-in-python-a-step-by-step-process-d0dfa6bf94ee)
*   **学习 TensorFlow 的基础知识**:[*tensor flow 2.0 入门—深度学习入门*](https://medium.com/towards-data-science/a-comprehensive-introduction-to-tensorflows-sequential-api-and-model-for-deep-learning-c5e31aee49fa)
*   **用 Python 中的 TF-IDF 进行文本聚类** : [*用 Python 中的 TF-IDF 进行文本聚类*](https://medium.com/mlearning-ai/text-clustering-with-tf-idf-in-python-c94cd26a31e7)