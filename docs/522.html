<html>
<head>
<title>Beginner Guide to Streamlit Deployment on Azure</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Azure上简化it部署的初学者指南</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/beginner-guide-to-streamlit-deployment-on-azure-f6618eee1ba9#2022-01-18">https://towardsdatascience.com/beginner-guide-to-streamlit-deployment-on-azure-f6618eee1ba9#2022-01-18</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""><h1 id="4d60" class="pw-post-title io ip iq bd ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm bi translated">Azure上简化it部署的初学者指南</h1></div><div class=""><h2 id="a717" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">使用免费SSL证书在15分钟内在Microsoft Azure上部署Hello World Streamlit应用程序的完整指南</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/2028dfb74b80ed60229c11e84261f12d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gxvPQDmm13ow-K_L8dzGTg.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">使用SSL的最终应用程序部署(图片由作者提供)。</p></figure><p id="c489" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><a class="ae lr" href="https://streamlit.io/" rel="noopener ugc nofollow" target="_blank"> Streamlit </a>是一个令人惊叹的开源应用框架，数据科学家通常使用它来快速制作响应迅速的web应用。Streamlit的直观框架非常容易学习，可以在几分钟内创建漂亮的仪表板甚至更复杂的web应用程序。</p><p id="9895" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">然而，许多数据科学家将部署的想法推迟到项目结束。相反，通过从部署阶段开始他们的项目，程序员可以在工作时在最终的UI中快速可视化他们的更改。如果您完成了机器学习阶段，却发现在尝试部署您的项目时有许多意想不到的问题，这可以为您节省很多压力。</p><p id="e970" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">当试图部署我最近的一个项目时，我意识到没有太多关于如何在Azure上部署带SSL加密的Streamlit应用程序的解释。SSL证书对于任何面向客户端的页面都非常重要。如果你有一个证书，你的网页的访问者将不会面临一个网站不安全的浏览器警告。这个浏览器警告是不专业的，可能会阻止用户成功连接(取决于浏览器和设置)。因此，经过多天的试验、研究和解析不推荐的或不可理解的解决方案，我开发了一个最小的分步指南，使用SSL在线部署Hello World Streamlit应用程序。为此，我们将使用Microsoft Azure(存储库、存储帐户和容器实例)、certbot(用于SSL)和NGINX作为反向代理web服务器。如果你不懂一个(或者全部)也不用担心！)本指南是一步一步的，应该能让您在15分钟内启动并运行。事不宜迟，我们开始吧！</p></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><h1 id="a0de" class="lz ma iq bd mb mc md me mf mg mh mi mj jw mk jx ml jz mm ka mn kc mo kd mp mq bi translated">第1部分:在本地运行Streamlit</h1><p id="2d3d" class="pw-post-body-paragraph kv kw iq kx b ky mr jr la lb ms ju ld le mt lg lh li mu lk ll lm mv lo lp lq ij bi translated">首先，我们将建立一个新的虚拟环境。我推荐使用<a class="ae lr" href="https://www.anaconda.com/products/individual" rel="noopener ugc nofollow" target="_blank"> Anaconda </a>，这是一个建立虚拟环境的好工具。如果你还没有Anaconda，可以在这里下载<a class="ae lr" href="https://www.anaconda.com/products/individual" rel="noopener ugc nofollow" target="_blank">。一旦安装了Anaconda，我们就可以用</a></p><pre class="kg kh ki kj gt mw mx my mz aw na bi"><span id="2baf" class="nb ma iq mx b gy nc nd l ne nf">conda create -n NAME_OF_ENV python=3.8</span></pre><p id="ad92" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">如果提示y/n，请输入y安装所需的软件包。NAME_OF_ENV是一个占位符，用于表示您希望如何称呼您的环境。我将我的环境命名为azure_demo。之后，使用以下工具激活您的环境</p><pre class="kg kh ki kj gt mw mx my mz aw na bi"><span id="37dd" class="nb ma iq mx b gy nc nd l ne nf">conda activate NAME_OF_ENV</span></pre><p id="08b4" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">我们将只为这个最小的项目安装一个包，尽管以后可以很容易地以类似的方式添加更多的包。我们使用以下工具安装Streamlit</p><pre class="kg kh ki kj gt mw mx my mz aw na bi"><span id="f460" class="nb ma iq mx b gy nc nd l ne nf">pip install streamlit</span></pre><p id="13f7" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">我们的环境现在已经准备好了！让我们将它添加到PyCharm(如果您愿意，也可以添加到另一个Python IDE)。首先创建一个新项目(我的命名为demo_azure)，然后<a class="ae lr" href="https://www.jetbrains.com/help/pycharm/conda-support-creating-conda-virtual-environment.html" rel="noopener ugc nofollow" target="_blank">添加你作为解释器创建的新conda环境</a>。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ng"><img src="../Images/22c4070a2420d0f61e7977466cc64eb8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hJO0z827u7OK8g3_YKjiRA.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">将conda环境添加到我们的PyCharm项目中。</p></figure><p id="6025" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">我们的编码环境现在已经准备好了！让我们添加一个文件夹来保存我们的主要Python代码。我将我的项目称为_contents。在里面，我们再做一个文件夹叫app。在这里，创建一个名为app.py的新Python文件。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nh"><img src="../Images/dc4949add0e66195be0600618a637b5c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*C-RhJcED9iW7ypxlN1blDw.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">项目目录(图片由作者提供)。</p></figure><p id="4e26" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">我们现在准备创建我们的Streamlit应用程序。由于本教程的重点是部署，而不是使用Streamlit构建网页，我们将简单地创建一个标题为“Hello World！”。这可以用两行代码来完成——一行用于导入Streamlit，一行用于添加标题。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ni nj l"/></div></figure><p id="92f6" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">就是这样！我们已经准备好在本地运行我们的Streamlit应用程序。打开一个终端(例如mac中的terminal或Windows中的Anaconda提示符)，导航到您的项目根目录，确保您已经激活了之前创建的virtualenv，然后运行命令</p><pre class="kg kh ki kj gt mw mx my mz aw na bi"><span id="bdd2" class="nb ma iq mx b gy nc nd l ne nf">streamlit run project_contents/app/app.py</span></pre><p id="3016" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">在任何浏览器中输入localhost:8501，你应该会看到你的应用程序。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nk"><img src="../Images/493a90e1c2820c4bcf23ee184c692368.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1vXwxBpRVpJKvKhHIapzSw.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">我们在localhost:8501上本地部署的Streamlit应用程序(图片由作者提供)。</p></figure><p id="6127" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">恭喜你！您已经在本地部署了您的Streamlit应用程序，这是我们的第一个里程碑！作为参考，完整的项目代码可以在Github <a class="ae lr" href="https://github.com/sergeiissaev/demo_azure_streamlit/tree/master" rel="noopener ugc nofollow" target="_blank">这里</a>找到。现在，您可以通过在终端中键入Ctrl+C来终止该应用程序，然后继续第2部分。</p><h1 id="1479" class="lz ma iq bd mb mc nl me mf mg nm mi mj jw nn jx ml jz no ka mn kc np kd mp mq bi translated">第2部分:整理你的Streamlit应用程序</h1><p id="9cd1" class="pw-post-body-paragraph kv kw iq kx b ky mr jr la lb ms ju ld le mt lg lh li mu lk ll lm mv lo lp lq ij bi translated">在第2部分中，我们将使用我们的Streamlit应用程序，并协调其在<a class="ae lr" href="https://www.docker.com/" rel="noopener ugc nofollow" target="_blank"> Docker </a>中的部署。Docker将我们的应用程序容器化，使其可以部署在各种云平台上。如果你还没有安装Docker，点击<a class="ae lr" href="https://docs.docker.com/get-docker/" rel="noopener ugc nofollow" target="_blank">这里</a>。</p><p id="987c" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">首先，我们将在项目的根目录中创建一个Dockerfile(接下来，所有创建的文件都将放在项目的根目录中):</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ni nj l"/></div></figure><p id="2fcc" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">对于这个部署，我们使用micromamba映像。确保在第3–5行将项目目录名称从demo_azure替换为您的项目名称。</p><p id="0b05" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">接下来，我们将创建在docker文件的第14行引用的run.sh文件。在这里，我们只需使用Streamlit运行app.py。我在theme.base中添加了“黑暗”来设置一个黑暗的主题，尽管这是完全可选的(而且非常酷！).</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ni nj l"/></div></figure><p id="cbfb" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">接下来，我们将创建环境文件，在docker文件的第7–9行中引用。创建一个名为environment.yml的文件，并添加以下代码。这个文件将指导Docker安装必要的包来运行我们的应用程序。完成本教程后，您可以随意添加您的应用程序需要的任何其他包，只需在新的一行中添加到文件的底部“- NAME_OF_PACKAGE”即可。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ni nj l"/></div></figure><p id="bfd8" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">我们的集装箱现在准备好了！让我们在本地使用</p><pre class="kg kh ki kj gt mw mx my mz aw na bi"><span id="bbd7" class="nb ma iq mx b gy nc nd l ne nf">docker build -t azure_demo:v1 .</span><span id="2a72" class="nb ma iq mx b gy nq nd l ne nf">docker run --rm -p 8880:8501 azure_demo:v1</span></pre><p id="815c" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">标志-RM在容器停止运行后删除映像，而-p 8880:8501将我们的本地端口8880映射到容器的端口8501。因此，当我们在浏览器中导航到localhost:8880时，应该会看到以下内容:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nr"><img src="../Images/ea207e21e06fa50186e0ae4abc27408b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*R1oxY9lI_byxNWI_vk8Xtg.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">我们的容器化Streamlit应用程序可在localhost:8880(图片由作者提供)访问。</p></figure><p id="5733" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">恭喜你！您已经容器化了您的Streamlit应用程序，现在已经完成了第2部分。随时停止你的运行Docker容器。让我们通过将容器部署到Azure来结束本教程。如果你愿意，这个容器也可以部署到另一个云平台(比如AWS或者GCP ),尽管这里只讨论Azure。</p><h1 id="ed45" class="lz ma iq bd mb mc nl me mf mg nm mi mj jw nn jx ml jz no ka mn kc np kd mp mq bi translated">第3部分:将你的Dockerized应用部署到Azure</h1><p id="11c3" class="pw-post-body-paragraph kv kw iq kx b ky mr jr la lb ms ju ld le mt lg lh li mu lk ll lm mv lo lp lq ij bi translated">现在，我们的应用程序被封装在Docker容器中，我们可以部署我们的应用程序，以便它可以在互联网上访问。在我们继续之前，请确保您已经安装了<a class="ae lr" href="https://docs.microsoft.com/en-us/cli/azure/install-azure-cli" rel="noopener ugc nofollow" target="_blank"> Azure CLI </a>。登录使用</p><pre class="kg kh ki kj gt mw mx my mz aw na bi"><span id="0ea1" class="nb ma iq mx b gy nc nd l ne nf">az login</span></pre><p id="f13b" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">此外，确保您有一个资源组，可以用它来创建容器实例和容器注册表。出于演示的目的，我的资源组将被称为AMAZING_RESOURCE_GROUP。</p><p id="531b" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">我们的第一个任务是将我们的容器图像从我们的计算机上传到Azure容器注册表。我们可以使用创建一个新的注册表</p><pre class="kg kh ki kj gt mw mx my mz aw na bi"><span id="e05a" class="nb ma iq mx b gy nc nd l ne nf">az acr create --resource-group AMAZING_RESOURCE_GROUP --name NAME_OF_REGISTRY --sku Basic</span></pre><p id="c9ff" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">请记住，根据需要更改资源组的名称和注册表的名称。您可以通过登录Azure门户并导航到容器注册表来检查注册表是否存在。您的注册表应该在那里。</p><p id="db1a" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">您现在可以使用登录您的注册表</p><pre class="kg kh ki kj gt mw mx my mz aw na bi"><span id="1038" class="nb ma iq mx b gy nc nd l ne nf">az acr login -n NAME_OF_REGISTRY</span></pre><p id="3b64" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">您应该会看到“登录成功”。您可以使用门户上传容器映像，但是在本教程中我们将使用CLI。以下命令将构建我们的映像并将其推送到我们的新注册表中:</p><pre class="kg kh ki kj gt mw mx my mz aw na bi"><span id="21e2" class="nb ma iq mx b gy nc nd l ne nf">docker build -t azure_demo:v1 .</span><span id="64d4" class="nb ma iq mx b gy nq nd l ne nf">docker tag azure_demo:v1 NAME_OF_REGISTRY.azurecr.io/azure_demo:v1</span><span id="e995" class="nb ma iq mx b gy nq nd l ne nf">docker push NAME_OF_REGISTRY.azurecr.io/azure_demo:v1</span></pre><p id="bef3" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">请记住:更改注册表的名称以匹配您自己的名称。如果在第一行中没有将图像命名为azure_demo，请确保在第2行和第3行中使用相同的名称，这样图像名称就一致了。通过在Azure门户中导航到您的注册表并验证您的映像是否在注册表中(在服务&gt;存储库下)，可以进行可选的检查。</p><p id="b085" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">太棒了。我们的图像现在位于Azure注册表的一个存储库中。这使得部署更加容易。下一步是在我们的项目目录中创建一个名为deployment.yml的文件，其内容如下:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ni nj l"/></div></figure><p id="a9f4" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">为了部署我们的容器，deployment.yml文件包含Azure需要知道的所有信息。这个yml文件包含部署我们的应用程序所需的最少内容——如果你想添加更多内容，Azure上的<a class="ae lr" href="https://docs.microsoft.com/en-us/azure/container-instances/container-instances-reference-yaml" rel="noopener ugc nofollow" target="_blank"> YAML参考</a>是一个很好的资源。记住将第2行设置为您的位置(例如，eastus)，将第3行设置为一个唯一的项目名称，第8、19和20行使用您的注册表名称。第30行的FQDN指的是你希望你的域名是什么——例如，如果你把第30行的FQDN名字写成我的假期，你的网站可以通过访问我的假期来访问。最后，我们必须提供凭证来访问我们的容器注册中心，以提取我们的容器映像(第21行)。为了获得此密码，请运行以下命令:</p><pre class="kg kh ki kj gt mw mx my mz aw na bi"><span id="c110" class="nb ma iq mx b gy nc nd l ne nf">az acr update -n NAME_OF_REGISTRY --admin-enabled true</span><span id="6fad" class="nb ma iq mx b gy nq nd l ne nf">az acr credential show --name  NAME_OF_REGISTRY</span></pre><p id="1b5c" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">这将在终端中输出您的注册表的密码。复制密码，并粘贴到第21行。我们的deployment.yml现在已经准备好了。</p><p id="dbd3" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">在部署应用程序之前，我们将在项目目录中创建一个名为nginx.conf的文件。这将把网络流量从我们的FQDN重新路由到8501端口。否则，您必须在域名中指定端口8501(例如，my vacation . eastus . azure container . io:8501—yikes)。您可以将以下代码复制粘贴到nginx.conf中:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ni nj l"/></div></figure><p id="26eb" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">唯一必须更改的行是第22行和第53行，其中FQDN名称是您在deployment.yml的第30行中选择的FQDN名称，AZURE_LOCATION是您在deployment.yml的第2行中选择的位置。总的来说，这个nginx服务器将侦听端口80(连接到我们的网站时的默认端口)，并将流量重新路由到本地主机端口8501。我包括的位置(/healthz、/vendor、/stream)对Streamlit很重要——如果省略这些行，Streamlit将无法工作。</p><p id="39a3" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">完美！现在我们只需将新创建的nginx.conf文件添加到docker文件中。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ni nj l"/></div></figure><p id="4ef3" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">将您的docker文件修改为这个新版本，它包括安装nginx(以及我们将用于SSL的其他包)的一些安装步骤，还包括复制nginx.conf文件的命令。</p><p id="07e0" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">我们还必须更新我们的run.sh，添加第2行和第3行来启动nginx。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ni nj l"/></div></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi ns"><img src="../Images/a0574d1d5238af19e0ba58258612ac94.png" data-original-src="https://miro.medium.com/v2/resize:fit:514/format:webp/1*B9ViH7nYPEeYjZ61dcZ7xA.png"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">最终项目树(图片由作者提供)。</p></figure><p id="376c" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">唷！是时候看看我们的网站在互联网上运行了。但是首先，由于我们对项目进行了更改，我们必须重新创建我们的容器，并将这个新容器推送到Azure container registry来代替旧容器。我们可以使用相同的代码来构建我们的映像，并像以前一样推送它:</p><pre class="kg kh ki kj gt mw mx my mz aw na bi"><span id="4f46" class="nb ma iq mx b gy nc nd l ne nf">docker build -t azure_demo:v1 .</span><span id="c6c2" class="nb ma iq mx b gy nq nd l ne nf">docker tag azure_demo:v1 NAME_OF_REGISTRY.azurecr.io/azure_demo:v1</span><span id="f1df" class="nb ma iq mx b gy nq nd l ne nf">docker push NAME_OF_REGISTRY.azurecr.io/azure_demo:v1</span></pre><p id="3a58" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">现在，在您的终端中运行以下命令来部署您的应用程序:</p><pre class="kg kh ki kj gt mw mx my mz aw na bi"><span id="f1f3" class="nb ma iq mx b gy nc nd l ne nf">az container create --resource-group AMAZING_RESOURCE_GROUP --name demo_azure -f deployment.yml</span></pre><p id="4b3b" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">该命令使用我们的文件deployment.yml创建一个容器实例，确保— name标志与您在deployment.yml第3行中提供的名称相匹配。部署可能需要几分钟时间。您可以确认已经使用Azure门户部署了您的实例(导航到容器实例)。您将能够使用您选择的FQDN(FQDN名称)访问您的应用程序。AZURE _ location . AZURE container . io)。该名称也可以在门户网站中确认:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nt"><img src="../Images/3b97a9fb3c1b599c8644bc8df89af353.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1VDnC926eqe4NpxHe_0Tdg.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">确认我们的域名(图片由作者提供)。</p></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nu"><img src="../Images/c3b8bdb6e1de0cb8bf25401a85ab9596.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Lx40tMkk9tSg7DSbjq_r1A.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">我们部署的Streamlit应用程序(图片由作者提供)。</p></figure><p id="801b" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">恭喜你！您的Streamlit应用程序现已启动，并在您的自定义域名上在线运行。</p><h1 id="c70a" class="lz ma iq bd mb mc nl me mf mg nm mi mj jw nn jx ml jz no ka mn kc np kd mp mq bi translated">结论</h1><p id="18f8" class="pw-post-body-paragraph kv kw iq kx b ky mr jr la lb ms ju ld le mt lg lh li mu lk ll lm mv lo lp lq ij bi translated">请记住，在对我们的项目进行任何更改后，为了使这些更改反映在您的web应用程序上，您必须重新构建您的映像，推送映像，删除Azure上正在运行的容器实例，并再次构建您的容器实例。</p><p id="ca70" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">请务必阅读这个两部分系列的第二部分，在那里我将讨论如何创建一个免费的SSL证书，如何存储该SSL证书，以及如何自动安排证书的更新。我还将提到一些更高级的加快开发的技巧。</p><p id="bd48" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">我希望本教程在您的Streamlit部署过程中为您节省了大量时间和压力！欢迎关注我，获取更多关于机器学习和数据科学的实践教程。感谢您的阅读！</p><p id="040a" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">链接:</p><p id="af7a" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">领英:<a class="ae lr" href="https://www.linkedin.com/in/sergei-issaev/" rel="noopener ugc nofollow" target="_blank">https://www.linkedin.com/in/sergei-issaev/</a></p><p id="af32" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">github:【https://github.com/sergeiissaev T2】</p><p id="9130" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">https://www.kaggle.com/sergei416<a class="ae lr" href="https://www.kaggle.com/sergei416" rel="noopener ugc nofollow" target="_blank"/></p><p id="fc91" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">中:<a class="ae lr" href="https://medium.com/@sergei740" rel="noopener">https://medium.com/@sergei740</a></p><p id="3316" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">推特:<a class="ae lr" href="https://twitter.com/realSergAI" rel="noopener ugc nofollow" target="_blank">https://twitter.com/realSergAI</a></p><p id="e18e" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">了解更多关于巫班的信息:<a class="ae lr" href="https://vooban.com/en" rel="noopener ugc nofollow" target="_blank">https://vooban.com/en</a></p></div></div>    
</body>
</html>