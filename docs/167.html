<html>
<head>
<title>Downloading Datasets from Kaggle for Your ML Project</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">为您的ML项目从Kaggle下载数据集</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/downloading-datasets-from-kaggle-for-your-ml-project-b9120d405ea4#2022-01-06">https://towardsdatascience.com/downloading-datasets-from-kaggle-for-your-ml-project-b9120d405ea4#2022-01-06</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""><h1 id="315e" class="pw-post-title io ip iq bd ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm bi translated">为您的ML项目从Kaggle下载数据集</h1></div><div class=""><h2 id="ed50" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">如何利用Kaggle Python API从他们的网站下载任何数据集</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/eeb1c088e8fd4681216fdeb4c22d78ae.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*tsLfpscuxJVzQwRa"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">亚历山大·辛恩在<a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</p></figure><h1 id="a421" class="kw kx iq bd ky kz la lb lc ld le lf lg jw lh jx li jz lj ka lk kc ll kd lm ln bi translated">这是怎么回事？</h1><p id="aadc" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">我最近想在我的一个NLP项目中使用<a class="ae kv" href="https://huggingface.co/datasets/arxiv_dataset" rel="noopener ugc nofollow" target="_blank"> Arxiv数据集</a>(它是在<a class="ae kv" href="https://creativecommons.org/publicdomain/zero/1.0/" rel="noopener ugc nofollow" target="_blank"> Creative Commons CC0 1.0通用公共领域专用协议</a>下许可的)，并试图利用HF dataset hub下载数据集。在这样做的时候，我收到了这条消息:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi mk"><img src="../Images/fb3e7d65455c841b720402aefc2ed463.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xvHJBAlQ1vrfFBAeHhyuAw.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">作者图片</p></figure><p id="c737" class="pw-post-body-paragraph lo lp iq lq b lr ml jr lt lu mm ju lw lx mn lz ma mb mo md me mf mp mh mi mj ij bi translated">看起来我不得不从Kaggle的网站上手动下载数据。我可以这样做，然后把它上传到我正在开发项目的云环境中。但我认为尝试不同的方法并学习新的东西可能会很有趣:)</p><p id="3b84" class="pw-post-body-paragraph lo lp iq lq b lr ml jr lt lu mm ju lw lx mn lz ma mb mo md me mf mp mh mi mj ij bi translated">在这篇博文中，我想简单介绍一下官方的Kaggle API及其Python实现。这个API使我们能够只使用Python从Kaggle下载任何数据集。一旦我们完成了这些，我们就可以用HF的数据集库加载数据集了。</p><p id="fd68" class="pw-post-body-paragraph lo lp iq lq b lr ml jr lt lu mm ju lw lx mn lz ma mb mo md me mf mp mh mi mj ij bi translated">本教程的笔记本可以在这个<a class="ae kv" href="https://github.com/marshmellow77/kaggle-api" rel="noopener ugc nofollow" target="_blank"> Github repo </a>中找到。</p><h1 id="7f22" class="kw kx iq bd ky kz la lb lc ld le lf lg jw lh jx li jz lj ka lk kc ll kd lm ln bi translated">创建Kaggle API密钥</h1><p id="e8a7" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">为了与Kaggle API交互，我们需要一个API密钥，我们可以在网站上创建它(注意，你需要一个免费的Kaggle帐户)。为此，我们可以转到我们的帐户网站(https://www.kaggle.com/<user_name>/帐户)，在<em class="mq"> API </em>部分下，我们可以创建这样一个密钥:</user_name></p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi gj"><img src="../Images/1388d7fee874a50cc0d38543f7ac8be8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qPrTLT0QiCfpibkSQwjL7A.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">作者图片</p></figure><p id="543b" class="pw-post-body-paragraph lo lp iq lq b lr ml jr lt lu mm ju lw lx mn lz ma mb mo md me mf mp mh mi mj ij bi translated">将会下载一个名为<em class="mq"> kaggle.json </em>的文件，我们可以将这个文件存储在一个名为<em class="mq">的文件夹中。kaggle </em>放在我们的主目录中，这样就可以用它来认证API服务。在本教程中，我们将使用操作系统环境变量直接在笔记本中执行身份验证，如下所示:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mr ms l"/></div></figure><h1 id="234a" class="kw kx iq bd ky kz la lb lc ld le lf lg jw lh jx li jz lj ka lk kc ll kd lm ln bi translated">下载数据集</h1><p id="ae31" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">现在我们可以利用Kaggle API的Python实现。要做到这一点，我们只需查看一下<a class="ae kv" href="https://github.com/Kaggle/kaggle-api/blob/master/kaggle/api/kaggle_api_extended.py" rel="noopener ugc nofollow" target="_blank">源代码</a>，这是有据可查的。</p><p id="ed6d" class="pw-post-body-paragraph lo lp iq lq b lr ml jr lt lu mm ju lw lx mn lz ma mb mo md me mf mp mh mi mj ij bi translated">在那里，我们找到了一些与数据集相关的方法，例如<a class="ae kv" href="https://github.com/Kaggle/kaggle-api/blob/master/kaggle/api/kaggle_api_extended.py#L1068" rel="noopener ugc nofollow" target="_blank"><em class="mq">dataset _ list _ files()</em></a>方法。我们需要的只是我们感兴趣的数据集的标识符，我们可以从数据集的URL路径中提取这个标识符(<a class="ae kv" href="https://www.kaggle.com/Cornell-University/arxiv" rel="noopener ugc nofollow" target="_blank">https://www.kaggle.com/Cornell-University/arxiv</a>):</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi mt"><img src="../Images/fb6b60f9a754e498d5aa66dbb827eb12.png" data-original-src="https://miro.medium.com/v2/resize:fit:916/format:webp/1*GWcnBX-Dne-9Iu-qTj7WUQ.png"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">作者图片</p></figure><p id="b9eb" class="pw-post-body-paragraph lo lp iq lq b lr ml jr lt lu mm ju lw lx mn lz ma mb mo md me mf mp mh mi mj ij bi translated">为了下载数据集，我们可以利用download_files方法:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mr ms l"/></div></figure><p id="2c1b" class="pw-post-body-paragraph lo lp iq lq b lr ml jr lt lu mm ju lw lx mn lz ma mb mo md me mf mp mh mi mj ij bi translated">这将下载与数据集相关的所有文件，作为一个zip文件，我们可以简单地解压缩它。</p><h2 id="2d07" class="mu kx iq bd ky mv mw dn lc mx my dp lg lx mz na li mb nb nc lk mf nd ne lm nf bi translated">许多其他API函数</h2><p id="e7b0" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">如果您经常与Kaggle交互，请注意这个API类中有许多其他方法可以让您做其他事情，例如与竞赛交互等。</p><h1 id="0295" class="kw kx iq bd ky kz la lb lc ld le lf lg jw lh jx li jz lj ka lk kc ll kd lm ln bi translated">奖金挑战</h1><p id="f01b" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">现在我们的环境中已经有了本地数据，我们可以返回到HF dataset类来加载我们的数据集。当尝试这样做时，我们会遇到另一个错误消息:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi ng"><img src="../Images/4238d63af395e44450b90773ee987a15.png" data-original-src="https://miro.medium.com/v2/resize:fit:1270/format:webp/1*gOnbbBjUqjMBYvtwmBmc_Q.png"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">作者图片</p></figure><p id="5b05" class="pw-post-body-paragraph lo lp iq lq b lr ml jr lt lu mm ju lw lx mn lz ma mb mo md me mf mp mh mi mj ij bi translated">出现此错误消息是因为当数据集在HF Dataset Hub上创建时，它预期有176万条记录，但数据集从那时起已经更新，现在有199万条记录。然而，我们可以通过添加<em class="mq"> ignore_verifications </em>参数来规避这个问题:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mr ms l"/></div></figure><h1 id="cf25" class="kw kx iq bd ky kz la lb lc ld le lf lg jw lh jx li jz lj ka lk kc ll kd lm ln bi translated">结论</h1><p id="22cb" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">我们现在已经使用他们的Python API成功地从Kaggle网站加载了一个数据集。我希望这是有用的，请留下评论和/或问题，如果你有任何。</p></div></div>    
</body>
</html>