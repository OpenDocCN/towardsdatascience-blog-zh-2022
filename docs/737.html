<html>
<head>
<title>How to Easily Summarize Audio and Video Files in Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何用Python轻松汇总音视频文件</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/how-to-easily-summarize-audio-and-video-files-in-python-13f42be00bf2#2022-01-26">https://towardsdatascience.com/how-to-easily-summarize-audio-and-video-files-in-python-13f42be00bf2#2022-01-26</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""><h1 id="ee8a" class="pw-post-title ir is it bd iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp bi translated">如何用Python轻松汇总音视频文件</h1></div><div class=""><h2 id="fac2" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">使用自动章节来总结Python中的音频和视频文件</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/a9a1d793882053a3b619d036f77756ff.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*1vzIzYEt2M9pHEZG"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">凯利·西克玛在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</p></figure><p id="b9a7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Auto chapters是一个强大的功能，它允许我们将音频/视频文件分成“章节”,然后为创建的每个章节自动生成摘要。</p><p id="acfe" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这种自动章节功能有不同的应用。像YouTube这样的视频平台有帮助用户跳转到他们正在寻找的内容的章节，播客播放器有使播客剧集更容易搜索的章节。</p><p id="61e1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在本文中，我将向您展示如何使用AssemblyAI API在Python中使用这一特性。该API将执行语音到文本转换，然后自动生成包含摘要、标题和要点等数据的章节。</p><h1 id="2e0b" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">如何用Python对音视频文件进行摘要</h1><p id="0367" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">在本指南中，我们将为史蒂夫·乔布斯2005年斯坦福毕业典礼演讲视频创建自动章节，你可以在<a class="ae ky" href="https://youtu.be/UF8uR6Z6KLc" rel="noopener ugc nofollow" target="_blank"> YouTube </a>上找到。视频大约15分钟，我将只使用一个语音文件作为输入。</p><p id="595d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">您可以随意使用自己的音频文件，但是，为了充分利用该功能，请确保您使用的音频超过5分钟。</p><p id="e6af" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">除此之外，我们需要创建一个<a class="ae ky" href="https://www.assemblyai.com/" rel="noopener ugc nofollow" target="_blank">免费的AssemblyAI帐户</a>来获得一个API密匙。一旦你创建了你的帐号，进入首页标签，寻找一个名为“集成API”的框来复制你的API密匙。</p><h2 id="8d06" class="ms lw it bd lx mt mu dn mb mv mw dp mf li mx my mh lm mz na mj lq nb nc ml nd bi translated">步骤1:上传你的音频文件并获取网址</h2><p id="1063" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">为了将语音转换成文本，然后对其进行总结，我们首先需要将音频文件上传到AssemblyAI API。为此我们需要2个输入——音频文件的路径(<code class="fe ne nf ng nh b">filename</code>)和API键。</p><p id="eeed" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">之后，我们创建一个函数来读取我们的音频文件。我们将这个函数命名为<code class="fe ne nf ng nh b">read_file</code>。为了上传我们的音频文件，我们将在post请求中调用这个函数。这个post请求将被发送到AssemblyAI的上载端点。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ni nj l"/></div></figure><p id="8ee2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">最后，我们使用请求中的<code class="fe ne nf ng nh b">response</code>来获取上传音频文件的URL。我们将所有这些存储在一个名为<code class="fe ne nf ng nh b">audio_url</code>的变量中，我们将在下一步中使用它。</p><h2 id="0711" class="ms lw it bd lx mt mu dn mb mv mw dp mf li mx my mh lm mz na mj lq nb nc ml nd bi translated">步骤2:提交成绩单请求</h2><p id="dc3f" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">在这一步中，我们向AssemblyAI的转录端点发送一个post请求。我们使用<code class="fe ne nf ng nh b">audio_url</code>提交上传进行转录。</p><p id="83ed" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">确保在<code class="fe ne nf ng nh b">json </code>参数中添加密钥/值对<code class="fe ne nf ng nh b">‘auto_chapters’: True</code>。这将有助于我们不仅得到转录，而且总结。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ni nj l"/></div></figure><p id="c060" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">最后，我们创建一个名为<code class="fe ne nf ng nh b">transcript_id</code>的变量，表示我们提交的id，我们将在第3步中使用它。</p><h2 id="e3e3" class="ms lw it bd lx mt mu dn mb mv mw dp mf li mx my mh lm mz na mj lq nb nc ml nd bi translated">第三步:保存文字记录和总结</h2><p id="fa1d" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">为了获得我们的脚本和摘要，首先，我们使用<code class="fe ne nf ng nh b">transcript_endpoint</code>和<code class="fe ne nf ng nh b">transcript_id</code>来创建一个名为<code class="fe ne nf ng nh b">polling_endpoint</code>的变量。我们将定期向该端点发送get请求，以检查我们在步骤2中发送的请求的状态。</p><p id="d079" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">只有当状态设置为<code class="fe ne nf ng nh b">completed</code>时，我们才在文本文件中保存抄本，在JSON文件中保存摘要。我们使用变量<code class="fe ne nf ng nh b">transcript_id</code>作为这两个文件的名称。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ni nj l"/></div></figure><p id="59ea" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">就是这样！现在检查您的工作目录，您会发现一个包含脚本的<code class="fe ne nf ng nh b">.txt</code>和一个包含摘要的<code class="fe ne nf ng nh b">.json</code>文件。</p><p id="774a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">以下是视频其中一部分的摘要、标题和要点:</p><pre class="kj kk kl km gt nk nh nl nm aw nn bi"><span id="8411" class="ms lw it nh b gy no np l nq nr">{<br/>"<strong class="nh iu">summary</strong>": "You have to trust that the dots will somehow connect in your future. You have to trust in something your gut, destiny, life, karma, whatever. Because believing that the dots will connect down the road will give you the confidence to follow your heart, even when it leads you off the well worn path.",<br/>"<strong class="nh iu">headline</strong>": "Because believing that the dots will connect down the road will give you the confidence to follow your heart, even when it leads you off the well worn path.",<br/>"<strong class="nh iu">start</strong>": 312538,<br/>"<strong class="nh iu">end</strong>": 342070,<br/>"<strong class="nh iu">gist</strong>": "the dots will somehow connect"<br/>    },</span></pre><p id="8fa5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在是你自己尝试的时候了。你可以在我的<a class="ae ky" href="https://github.com/ifrankandrade/api.git" rel="noopener ugc nofollow" target="_blank"> Github </a>上找到本文使用的代码。</p></div><div class="ab cl ns nt hx nu" role="separator"><span class="nv bw bk nw nx ny"/><span class="nv bw bk nw nx ny"/><span class="nv bw bk nw nx"/></div><div class="im in io ip iq"><p id="37a5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><a class="ae ky" href="https://frankandrade.ck.page/bd063ff2d3" rel="noopener ugc nofollow" target="_blank"> <strong class="lb iu">加入我的电子邮件列表，与1万多人一起获取我在所有教程中使用的Python for Data Science备忘单(免费PDF) </strong> </a></p><p id="a5f0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果你喜欢阅读这样的故事，并想支持我成为一名作家，可以考虑报名成为一名媒体成员。每月5美元，让您可以无限制地访问数以千计的Python指南和数据科学文章。如果你用<a class="ae ky" href="https://frank-andrade.medium.com/membership" rel="noopener">我的链接</a>注册，我会赚一小笔佣金，不需要你额外付费。</p><div class="nz oa gp gr ob oc"><a href="https://frank-andrade.medium.com/membership" rel="noopener follow" target="_blank"><div class="od ab fo"><div class="oe ab of cl cj og"><h2 class="bd iu gy z fp oh fr fs oi fu fw is bi translated">通过我的推荐链接加入媒体——弗兰克·安德拉德</h2><div class="oj l"><h3 class="bd b gy z fp oh fr fs oi fu fw dk translated">作为一个媒体会员，你的会员费的一部分会给你阅读的作家，你可以完全接触到每一个故事…</h3></div><div class="ok l"><p class="bd b dl z fp oh fr fs oi fu fw dk translated">frank-andrade.medium.com</p></div></div><div class="ol l"><div class="om l on oo op ol oq ks oc"/></div></div></a></div></div></div>    
</body>
</html>