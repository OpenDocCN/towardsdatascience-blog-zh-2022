<html>
<head>
<title>Why Is ggplot2 So Good For Data Visualization?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">为什么ggplot2对数据可视化这么好？</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/why-is-ggplot2-so-good-for-data-visualization-b38705f43f85#2022-01-11">https://towardsdatascience.com/why-is-ggplot2-so-good-for-data-visualization-b38705f43f85#2022-01-11</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""><h1 id="158a" class="pw-post-title ir is it bd iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp bi translated">为什么ggplot2对数据可视化这么好？</h1></div><div class=""><h2 id="cef2" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">探索ggplot2中的图形语法</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/d896197af905302924054a7555c5eddf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2RdfimeWaFU2lsGSgWVViw.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">巴德·赫利松在<a class="ae ky" href="https://unsplash.com/s/photos/future?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</p></figure><p id="1481" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu"> ggplot2 </strong>是在r中使用的一个众所周知的数据可视化包。由于ggplot2从一开始就开发得很好，工程师可以花更多的时间专注于理解带有图形的数据，并添加额外的功能来丰富ggplot2。Python端有很多选项可供选择，例如Matplotlib、Seaborn、Plotly、Altair，还有很多其他的包。但是没有一个包像ggplot2一样在R中占主导地位，并且是数据可视化的首选。</p><p id="65f3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">为什么ggplot2对数据可视化这么好？</strong>答案是<strong class="lb iu"> ggplot2 </strong>在创建基于<a class="ae ky" href="https://www.amazon.com/Grammar-Graphics-Statistics-Computing/dp/0387245448/" rel="noopener ugc nofollow" target="_blank"> <strong class="lb iu">图形语法的数据可视化方面是声明性的和高效的。</strong> </a>分层的语法使得开发的图表有结构性和丰富性。生成ggplot2感觉就像玩乐高积木。核心概念和语法对新用户来说很优雅，社区支持高级用例。ggplot2中各种漂亮的主题和调色板使可视化看起来专业，并吸引最终用户。</p><h1 id="ff55" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">30秒内的ggplot2示例</h1><p id="301d" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">大多数数据可视化工具从选择一个可消费格式的数据集开始。ggplot2在这里也不例外。r有一个内置的<a class="ae ky" href="https://www.rdocumentation.org/packages/datasets/versions/3.6.2/topics/iris" rel="noopener ugc nofollow" target="_blank">虹膜数据集</a>，可以很容易地用作数据框。</p><pre class="kj kk kl km gt ms mt mu mv aw mw bi"><span id="1dc2" class="mx lw it mt b gy my mz l na nb">data(“iris”)<br/>summary(iris)<br/>head(iris)</span><span id="4e1e" class="mx lw it mt b gy nc mz l na nb"># Sepal.Length Sepal.Width Petal.Length Petal.Width Species<br/># 1 5.1 3.5 1.4 0.2 setosa<br/># 2 4.9 3.0 1.4 0.2 setosa<br/># 3 4.7 3.2 1.3 0.2 setosa<br/># 4 4.6 3.1 1.5 0.2 setosa</span></pre><p id="6128" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">一旦装载了虹膜数据帧。我们可以初始化一个<code class="fe nd ne nf mt b">ggplot</code>对象，用来声明共享的数据输入，建立美观(映射)。由于用户可以用不同的图层来表示同一幅图上的相同数据，这就节省了复制输入和美观的时间。</p><pre class="kj kk kl km gt ms mt mu mv aw mw bi"><span id="2d37" class="mx lw it mt b gy my mz l na nb">ggplot(data=iris, mapping=aes(x=Sepal.Length, y=Sepal.Width, color=Species)) + <br/>  geom_point() + <br/>  geom_line()</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ng"><img src="../Images/398cd49256b2234dedd2ecd2c406d658.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*AtCsdbTIGUokfdis"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><p id="9b3f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在上面的例子中，我们用萼片的长度作为x轴，萼片的宽度作为y轴来定义美学。此外，还提供了颜色参数来用相同的颜色标记相同的物种。注意，我们不必引用美学。这是由于<code class="fe nd ne nf mt b">aes()</code>是一个<a class="ae ky" href="https://www.rdocumentation.org/packages/rlang/versions/0.2.2/topics/quotation" rel="noopener ugc nofollow" target="_blank">报价功能</a>。这意味着它的输入x、y和颜色在这里被提到在虹膜数据的上下文中被评估。</p><p id="c83d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">使用<code class="fe nd ne nf mt b">geom_</code>功能创建层。根据<a class="ae ky" href="https://ggplot2.tidyverse.org/reference/" rel="noopener ugc nofollow" target="_blank"> ggplot参考，</a>有超过50种不同类型的<code class="fe nd ne nf mt b">geom_</code>功能。使用<code class="fe nd ne nf mt b">geom_point</code>和<code class="fe nd ne nf mt b">geom_line</code>时无需指定输入数据和美学，因为它们已经在<code class="fe nd ne nf mt b">ggplot</code>对象中定义。您也可以用不同的数据框和外观覆盖已经定义的<code class="fe nd ne nf mt b">ggplot</code>。</p><p id="441a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">ggplot2采用类似管道的语法使用<strong class="lb iu"> "+" </strong>来连接层，这一点超级简洁，类似于R中的<strong class="lb iu">"&gt;% "</strong>或者bash脚本中的<strong class="lb iu"> "|" </strong>。它使你的代码非常容易跟踪和调试。</p><p id="da5a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果你想有3个不同的图显示物种而不是颜色，只需将物种从颜色移动到面。</p><p id="c06c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">🎉tada，非常简单！</p><pre class="kj kk kl km gt ms mt mu mv aw mw bi"><span id="5ff4" class="mx lw it mt b gy my mz l na nb">ggplot(data=iris, mapping=aes(x=Sepal.Length, y=Sepal.Width)) +<br/>  geom_point() +<br/>  geom_line() + <br/>  facet_wrap(~Species)</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ng"><img src="../Images/4cead63602862e518d4763c7503e2941.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*Nbu5kUBq3HrpMQlS"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><h1 id="e2d4" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">ggplot2是初学者友好的</h1><p id="5f9a" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">当初学者选择数据可视化库时，一个关键的事情是它需要简单，并且反馈循环短，这意味着用户可以快速看到他们创建的图。通过上面的几行代码，我们可以生成一个好看的图形。ggplot2利用了图形的语法，这使得开发一个情节就像构建乐高积木一样。使用ggplot2用图层构建图形的整个过程很容易理解，对初学者来说非常友好</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ng"><img src="../Images/7923ac97e292716c851c7994e148a03c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*fu0mAnFa6JDG7ubT"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">照片由<a class="ae ky" href="https://unsplash.com/@xavi_cabrera?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">哈维·卡夫雷拉</a>在<a class="ae ky" href="https://unsplash.com/s/photos/lego?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>拍摄</p></figure><p id="4460" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">对于初学者选择<code class="fe nd ne nf mt b">qplot</code> (R内置)还是<code class="fe nd ne nf mt b">ggplot2</code>也有一些讨论。有几个原因让我更喜欢<code class="fe nd ne nf mt b">ggplot2</code>:</p><ul class=""><li id="a18e" class="nh ni it lb b lc ld lf lg li nj lm nk lq nl lu nm nn no np bi translated"><strong class="lb iu"> ggplot2比qplot </strong>应用更广泛。如果在StackOverflow上搜索ggplot2 vs.qplot，结果是<strong class="lb iu">96k vs . 3k</strong>(2021年12月)。这意味着作为一个初学者，你在ggplot2上找到答案的机会比qplot高。或者如果你最后问了一个问题，它能被回答的几率更高。</li><li id="d16e" class="nh ni it lb b lc nq lf nr li ns lm nt lq nu lu nm nn no np bi translated"><strong class="lb iu"> ggplot2看起来更好，主题丰富。它鼓励我去探索更多的选择，让我的情节看起来更好。ggplot2附带了大量的主题和许多第三方添加的主题。你可以参考<a class="ae ky" href="https://yutannihilation.github.io/allYourFigureAreBelongToUs/ggthemes/" rel="noopener ugc nofollow" target="_blank"> ggtheme </a>来看看众多的选项来很好地增强你的剧情。引人注目的图形可以从心理上说服初学者，学习ggplot2是值得的。</strong></li></ul><h1 id="1d3b" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">图形的语法:ggplot2背后的大思想</h1><p id="3a33" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated"><strong class="lb iu">图形需要一个作为层的结构来描述它是如何构造的</strong>。就像画画一样，我们从一个简单的草图开始，为一个初步的绘画准备草图，引入画面的阴影，最后有细化。各种步骤(层)最终有一个最终的情节定义图形的语法。</p><p id="1f47" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><a class="ae ky" href="https://en.wikipedia.org/wiki/Hadley_Wickham" rel="noopener ugc nofollow" target="_blank">Hadley Wickham</a>(《ggplot2》的作者)在他的论文《图形的分层语法》中解释说，ggplot 2是用图形的语法思维开发的他重新映射了图形的初始语法的核心思想，如下图所示。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nv"><img src="../Images/0479633dac89fb86440cc69a9ab857b3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1384/0*XHW-p2eDQE1b5Zp_"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">图片来自<a class="ae ky" href="https://en.wikipedia.org/wiki/Hadley_Wickham" rel="noopener ugc nofollow" target="_blank"> Hadley Wickham </a>论文《图形的分层语法》</p></figure><p id="8b4f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">分层语法定义了以下组件:</p><ul class=""><li id="953e" class="nh ni it lb b lc ld lf lg li nj lm nk lq nl lu nm nn no np bi translated"><strong class="lb iu">形成美学的默认数据集和映射集</strong>:我们用<strong class="lb iu">数据</strong>和<strong class="lb iu"> aes在ggplot函数调用中定义的数据集和映射集。</strong>如果图层不使用其他数据集，我们可以假设使用相同的数据框和美学。</li><li id="11d9" class="nh ni it lb b lc nq lf nr li ns lm nt lq nu lu nm nn no np bi translated"><strong class="lb iu">图层</strong>:图层可以分为四个部分:数据和美学映射、统计变换、几何对象和位置调整。图层定义了最终图形的构建模块。根据您在图上显示数据的方式，几何对象只能显示特定的美感。</li><li id="49b2" class="nh ni it lb b lc nq lf nr li ns lm nt lq nu lu nm nn no np bi translated"><strong class="lb iu"> Scale </strong>:处理数据到美学属性的映射。</li><li id="c3f6" class="nh ni it lb b lc nq lf nr li ns lm nt lq nu lu nm nn no np bi translated"><strong class="lb iu">坐标系</strong>:将物体的位置映射到绘图平面上</li><li id="b80b" class="nh ni it lb b lc nq lf nr li ns lm nt lq nu lu nm nn no np bi translated"><strong class="lb iu"> Facet </strong>:使用特定维度上的子图显示数据。</li></ul><p id="0f58" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">有了ggplot2中的分层语法，在创建情节时就可以很容易地采用这种结构。对于开发人员来说，由于该层可以轻松地独立运行，因此调试起来也不费力。通过使用管道(ggolot2中的“+”)添加带有隔离层逻辑的附加层，在现有的ggplot2图表上进行扩展也变得非常简单。</p><h1 id="d21b" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">超越R</h1><p id="e351" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">“图形语法”的概念因数据可视化而闻名。相比其他数据可视化工具，很多人真的很喜欢R中的ggplot2。比如这个<a class="ae ky" href="https://www.reddit.com/r/datascience/comments/mjkv5y/plotting_in_rs_ggplot2_vs_pythons_matplotlib_is/" rel="noopener ugc nofollow" target="_blank"> Reddit线程</a>提到ggplot2的体验比Matplotlib好很多。</p><p id="688d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">一个叫做<a class="ae ky" href="https://plotnine.readthedocs.io/en/stable/" rel="noopener ugc nofollow" target="_blank"> plotnine </a>的Python包是为采用Python中图形语法的概念而设计的。在Python环境中，用户可以编写类似ggplot2的代码，与其他Python代码混合使用。plotnine目前在Github上获得2.9k+颗星；你可以看到这个概念在其他语言中是多么有价值。<strong class="lb iu">当不同的语言开始从一个人那里借用库，这就证明了它有多好。</strong></p><p id="0c7f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在ggplot2中创建地块是结构化和有组织的。它以<code class="fe nd ne nf mt b">ggplot</code>为切入点开始。然后在<code class="fe nd ne nf mt b">geom_</code>上展开以添加层。此外，各种规模和主题也将适用。更复杂的情节遵循这种模式，给用户一致的体验。另一方面，在Matplotlib这样的框架中，代码可以与其他Python代码分散在一起。代码的顺序不太重要，但是很难阅读；Matplotlib比ggplot2写更多的代码也很麻烦。</p><h1 id="4222" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">最后的想法</h1><p id="8901" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">我以前只用Python处理数据。然而，当涉及到数据可视化时，人们使用的库非常多，并且越来越难以整合。当我碰巧学习ggplot2和图形的语法时，我开始学习R并使用R进行数据分析。对于数据分析任务，使用Python还是R仍然是一个争论，但在使用ggplot2多年后，这是我执行任何数据可视化任务的首选工具。我强烈推荐如果你对ggplot2不熟悉，即使不写一行R代码，也要虚心一试。很快你就会发现为什么ggplot2对你的推荐这么好。</p><p id="cc34" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果你想了解更多关于R和ggplot2的知识，我也强烈推荐Hadley Wickham的《数据科学的书<a class="ae ky" href="https://www.amazon.com/R-Data-Science-Hadley-Wickham/dp/1491910399/ref=as_li_ss_tl?ie=UTF8&amp;qid=1469550189&amp;sr=8-1&amp;keywords=R+for+data+science&amp;linkCode=sl1&amp;tag=devtools-20&amp;linkId=6fe0069f9605cf847ed96c191f4e84dd" rel="noopener ugc nofollow" target="_blank"> <em class="nw"> R:导入、整理、转换、可视化和建模数据</em> </a>。</p></div><div class="ab cl nx ny hx nz" role="separator"><span class="oa bw bk ob oc od"/><span class="oa bw bk ob oc od"/><span class="oa bw bk ob oc"/></div><div class="im in io ip iq"><p id="bb38" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">希望这个故事对你有帮助。本文是我的工程&amp;数据科学系列的<strong class="lb iu">部分，目前包括以下内容:</strong></p><div class="oe of gp gr og"><div role="button" tabindex="0" class="ab bv gv cb fp oh oi bn oj ks ex"><div class="ok l"><div class="ab q"><div class="l di"><img alt="Chengzhi Zhao" class="l de bw ol om fe" src="../Images/51b8d26809e870b4733e4e5b6d982a9f.png" width="20" height="20" loading="lazy" data-original-src="https://miro.medium.com/v2/resize:fill:40:40/2*SGCkys53sdZUZKnpRQoq_A.jpeg"/><div class="fb bw l ol om fc n aw fd"/></div><div class="hh l fo"><p class="bd b dl z fp fq fr fs ft fu fv fw dk translated"><a class="ae af ag ah ai aj ak al am an ao ap aq ar as" href="https://chengzhizhao.medium.com/?source=post_page-----b38705f43f85--------------------------------" rel="noopener follow" target="_top">赵承志</a></p></div></div><div class="op oq gw l"><h2 class="bd iu ty nh fp tz fr fs ua fu fw is bi translated">数据工程和数据科学故事</h2></div><div class="ab q"><div class="l fo"><a class="bd b be z bi ub au uc ud ue qj uf an eh ei ug uh ui el em eo de bk ep" href="https://chengzhizhao.medium.com/list/data-engineering-data-science-stories-ddab37f718e7?source=post_page-----b38705f43f85--------------------------------" rel="noopener follow" target="_top">View list</a></div><div class="uj l fo"><span class="bd b dl z dk">47 stories</span></div></div></div><div class="pc dh pd fp ab pe fo di"><div class="di ou bv ov ow"><div class="dh l"><img alt="" class="dh" src="../Images/4ba0357365403d685da42e6cb90b2b7e.png" width="194" height="194" loading="lazy" role="presentation" data-original-src="https://miro.medium.com/v2/da:true/resize:fill:388:388/1*b4EVtemQ1EQEup3o1ewz1w.gif"/></div></div><div class="di ou bv ox oy oz"><div class="dh l"><img alt="" class="dh" src="../Images/89f9120acd7a8b3a37b09537198b34ca.png" width="194" height="194" loading="lazy" role="presentation" data-original-src="https://miro.medium.com/v2/resize:fill:388:388/1*xj-YsbUEN_pMA4IS7hE6hw.jpeg"/></div></div><div class="di bv pa pb oz"><div class="dh l"><img alt="" class="dh" src="../Images/1f0d78b4e466ea21d6a5bd7a9f97c526.png" width="194" height="194" loading="lazy" role="presentation" data-original-src="https://miro.medium.com/v2/resize:fill:388:388/1*zF1_SxRakCIMJ2sgKtyP1w.jpeg"/></div></div></div></div></div><p id="7870" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">你也可以<a class="ae ky" href="https://chengzhizhao.medium.com/subscribe" rel="noopener"> <strong class="lb iu">订阅我的新文章</strong> </a>或者成为<a class="ae ky" href="https://chengzhizhao.medium.com/membership" rel="noopener"> <strong class="lb iu">推荐媒介会员</strong> </a> <strong class="lb iu"> </strong>也可以在媒介上获得所有的故事。</p><p id="771b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果有问题/评论，<strong class="lb iu">请不要犹豫，写下这个故事的评论</strong>或通过<a class="ae ky" href="https://www.linkedin.com/in/chengzhizhao/" rel="noopener ugc nofollow" target="_blank"> Linkedin </a>或<a class="ae ky" href="https://twitter.com/ChengzhiZhao" rel="noopener ugc nofollow" target="_blank"> Twitter </a>直接<strong class="lb iu">联系我。</strong></p></div></div>    
</body>
</html>