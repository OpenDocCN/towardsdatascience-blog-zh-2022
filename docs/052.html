<html>
<head>
<title>Building a Tool to Estimate Surrounding Area Population</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">构建一个工具来估计周围地区的人口</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/building-a-tool-to-estimate-surrounding-area-population-c7d77263468a#2022-01-03">https://towardsdatascience.com/building-a-tool-to-estimate-surrounding-area-population-c7d77263468a#2022-01-03</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""><h1 id="5c80" class="pw-post-title ir is it bd iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp bi translated">构建一个工具来估计周围地区的人口</h1></div><div class=""><h2 id="db0f" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">一步一步的指南，建立一个免费的周围人口估计工具(加上<a class="ae ki" href="http://www.jordanbean.com/population-estimator" rel="noopener ugc nofollow" target="_blank">访问一个已经建成的</a>！)</h2></div><figure class="kk kl km kn gt ko gh gi paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gh gi kj"><img src="../Images/a617509279bcedc531261270a2eb571e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*OdHKZB3QjAUdzRpm"/></div></div><p class="kv kw gj gh gi kx ky bd b be z dk translated">克里斯多夫·伯恩斯在<a class="ae ki" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure><p id="2e66" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">人口统计——尤其是人们居住的地方——是许多选址决策的重要工具。有多少25岁或25岁以上的人住在你想开餐馆的地方(现有市场)？你要建仓库的地方周围住了多少人(可用工人)？</p><p id="40d8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">解决此类问题的数据分析师可能会发现自己不得不使用复杂的数据集或学习曲线陡峭的工具来获取和加载适当的数据，计算复杂的方程，并以直观易懂的方式输出数据。许多工具将给出城市周围区域的人口，有些工具给出精确点的估计值。<strong class="lb iu">即使你得到了一个数字，你知道并理解给你这个数字的基本数据和方法吗？你能向别人解释吗？</strong></p><p id="763a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">遵循下面的步骤，看看如何自己构建一个人口估计工具——理解数据和计算——或者<a class="ae ki" href="https://jordanbean.com/population-estimator" rel="noopener ugc nofollow" target="_blank">随意使用我组装的工具</a>(都是用免费数据&amp;工具构建的)。像许多分析工具一样，它涉及假设、变通办法和一些不精确之处，但作为一种估算工具——就其成本而言——它为许多人口统计讨论提供了一个“足够好”的起点。</p><figure class="kk kl km kn gt ko gh gi paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gh gi lv"><img src="../Images/5c9ff2b90bdc0ed85155691253a4145b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*Cv5NyOAunLX0doU8akKV5A.gif"/></div></div><p class="kv kw gj gh gi kx ky bd b be z dk translated"><a class="ae ki" href="https://jordanbean.com/population-estimator" rel="noopener ugc nofollow" target="_blank">一个完整的人口估计工具的例子</a>；作者图片</p></figure></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><h1 id="274a" class="md me it bd mf mg mh mi mj mk ml mm mn jz mo ka mp kc mq kd mr kf ms kg mt mu bi translated">数据和工具</h1><figure class="kk kl km kn gt ko gh gi paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gh gi mv"><img src="../Images/5514de1423eb9c789b666c8be17afd50.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*PKOs-6XQMOKhX3Op"/></div></div><p class="kv kw gj gh gi kx ky bd b be z dk translated">照片由<a class="ae ki" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的<a class="ae ki" href="https://unsplash.com/@raheemsphoto?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Enayet Raheem </a>拍摄</p></figure><p id="24a3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">最可靠的人口数据来源通常被认为是美国人口普查局报告的数据。大多数人都知道常见的地理边界，如州、县和邮政编码。您知道人口和人口统计有更详细的视图吗？<a class="ae ki" href="https://www2.census.gov/geo/pdfs/education/CensusTracts.pdf" rel="noopener ugc nofollow" target="_blank">人口普查区</a>(平均人口约4000人)和<a class="ae ki" href="https://en.wikipedia.org/wiki/Census_block_group" rel="noopener ugc nofollow" target="_blank">人口普查区块组</a>(平均人口约600-3000人；报告的最小地理位置)是可用于分析的附加地理位置。</p><p id="1463" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">对于区域和区块组，我们获得了精度，但失去了可解释性。我们可以很好地了解包含一个县、城市或邮政编码的区域。我们可以在地图上找到它，或者把它写在我们地址的一部分。你永远不会看到一个数据点被报告为“人口普查区域37183050100”。然而，为了找到周围地区的人口，额外细节的好处超过了可解释性的损失。</p><p id="5076" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">人口普查区块组数据集包含超过170，000条记录，因此为了提高性能，我们将使用包含大约73，000条记录的人口普查区域数据。</p><p id="3898" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在人口普查数据的世界中导航可能是复杂的——不仅要找到数据，还要格式化和准备数据。这就是为什么我去了由<a class="mw mx ep" href="https://medium.com/u/745327dff78b?source=post_page-----c7d77263468a--------------------------------" rel="noopener" target="_blank">林赛·M·佩廷吉尔</a> &amp;团队开发的<a class="ae ki" href="https://docs.askiggy.com/open-data/datasets" rel="noopener ugc nofollow" target="_blank"> AskIggy的开放数据门户</a>，并导航到一个已经为我准备好的<a class="ae ki" href="https://docs.askiggy.com/open-data/datasets/acs_census_tract_social" rel="noopener ugc nofollow" target="_blank">人口普查区域数据集</a>(你需要注册一个免费账户才能访问)，以快速完成该过程的第一步。</p><p id="6b87" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">该文件以. gz文件的形式下载，所以我在R中运行了一个快速脚本，将它准备成一个可以被Tableau接收的. csv文件。</p><pre class="kk kl km kn gt my mz na nb aw nc bi"><span id="3a6b" class="nd me it mz b gy ne nf l ng nh">library(readr)</span><span id="190f" class="nd me it mz b gy ni nf l ng nh">read_csv('acs_census_tract_social_20210716.csv.gz') %&gt;%<br/>  write_csv('acs_census_tract_social.csv')</span></pre><p id="d2dd" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">您还需要<a class="ae ki" href="https://www2.census.gov/geo/tiger/GENZ2019/shp/cb_2019_us_tract_500k.zip" rel="noopener ugc nofollow" target="_blank">下载形状文件</a>，供人口普查区域稍后使用。下载数据后，我们需要通过计算每个普查区域的大致中点来对文件进行一些小的操作。这是一个众所周知的困难的练习，原因超出了本文的范围，但是对于评估工具来说，您可以使用下面的代码和函数来创建一个评估。</p><p id="8956" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">函数(<a class="ae ki" href="https://stackoverflow.com/questions/52522872/r-sf-package-centroid-within-polygon" rel="noopener ugc nofollow" target="_blank">归功于这个StackOverflow答案</a>)找到多边形形状(人口普查区域的形状)的质心(中心)。如果中心不在多边形内(想象一个类似r的不规则形状；顶部/底部和左侧/右侧中点不在形状中)，该函数使用<code class="fe nj nk nl mz b">st_point_on_surface</code>函数返回多边形中的一个点，这是一种计算开销更大的在多边形中查找点的方法。</p><pre class="kk kl km kn gt my mz na nb aw nc bi"><span id="651f" class="nd me it mz b gy ne nf l ng nh">library(sf)<br/>library(tidyverse)</span><span id="6409" class="nd me it mz b gy ni nf l ng nh">shapefile &lt;- st_read("cb_2019_us_tract_500k/cb_2019_us_tract_500k.shp")</span><span id="e614" class="nd me it mz b gy ni nf l ng nh">st_centroid_within_poly &lt;- function (poly) {</span><span id="37c5" class="nd me it mz b gy ni nf l ng nh"># check if centroid is in polygon<br/>  centroid &lt;- poly %&gt;% st_centroid() <br/>  in_poly &lt;- st_within(centroid, poly, sparse = F)[[1]]</span><span id="39ad" class="nd me it mz b gy ni nf l ng nh"># if it is, return that centroid<br/>  if (in_poly) return(centroid)</span><span id="60d4" class="nd me it mz b gy ni nf l ng nh"># if not, calculate a point on the surface and return that<br/>  centroid_in_poly &lt;- st_point_on_surface(poly) <br/>  return(centroid_in_poly)<br/>}</span><span id="50ee" class="nd me it mz b gy ni nf l ng nh">shapefile_midpoitns &lt;- shapefile  %&gt;% <br/>  mutate(lon = map_dbl(geometry, ~st_centroid_within_poly(.x)[[1]]),<br/>         lat = map_dbl(geometry, ~st_centroid_within_poly(.x)[[2]]))</span><span id="122f" class="nd me it mz b gy ni nf l ng nh">st_write(shapefile_midpoints, 'tracts_w_midpoint.shp')</span></pre><p id="4099" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">有了正确格式的数据，我们将继续讨论如何处理数据。我是一个Tableau爱好者，所以这将是我的选择工具。如果你没有Tableau的工作或个人使用许可，你可以在这里下载他们软件的免费版本。</p></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><h1 id="2286" class="md me it bd mf mg mh mi mj mk ml mm mn jz mo ka mp kc mq kd mr kf ms kg mt mu bi translated">构建工具</h1><p id="4893" class="pw-post-body-paragraph kz la it lb b lc nm ju le lf nn jx lh li no lk ll lm np lo lp lq nq ls lt lu im bi translated">下载完数据和表格后，您就拥有了构建该工具所需的所有资源。我假设你已经对使用Tableau有了基本的了解，可以继续学习本教程。</p><p id="8bc3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><em class="nr">读入并加入数据</em></p><p id="0301" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">首先创建到空间数据集的连接，并选择人口普查区域shape file(<em class="nr">tracts _ w _ midpoint . shp</em>)。添加第二个连接并将。我们从<a class="ae ki" href="http://www.askiggy.com" rel="noopener ugc nofollow" target="_blank"> AskIggy </a>数据创建的csv文件放到工作区。使用shapefile中的大地水准面和. csv中的id创建连接。您可能会看到数据类型不匹配的错误-单击进入。csv文件(通过单击文件名)并将您的Id列更改为字符串。</p><figure class="kk kl km kn gt ko gh gi paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gh gi ns"><img src="../Images/fce57cf62bb86f505023e4e08faebc19.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*mncVavaXf3f8iOWzwLB4Vg.gif"/></div></div><p class="kv kw gj gh gi kx ky bd b be z dk translated">读入和联接数据的例子；作者图片</p></figure><figure class="kk kl km kn gt ko gh gi paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gh gi nt"><img src="../Images/83299a6c12ad74d0bc00923cbe003d71.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*S4E6j2BKKgvsH-TeEzTCRA.png"/></div></div><p class="kv kw gj gh gi kx ky bd b be z dk translated">连接Geoid = id上的两个数据集，其中将Id数据类型更改为字符串；作者图片</p></figure><p id="aa1e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><em class="nr">准备数据</em></p><p id="b1ce" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们现在将设置一些计算字段和参数，为后面的分析打下基础。我们工作的基础将是经纬度点之间的计算。关于这些的基本入门，<a class="ae ki" href="http://shurdington.org/Downloads/Latitude%20&amp;%20Longitude.pdf" rel="noopener ugc nofollow" target="_blank">阅读此处</a>。</p><p id="57c1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">创建新参数以输入纬度值；我把我的名字叫做<code class="fe nj nk nl mz b">Lat Param</code>。将它创建为具有所有允许值的浮点型。对经度做同样的操作(我把我的称为<code class="fe nj nk nl mz b">Lon Param</code>)</p><figure class="kk kl km kn gt ko gh gi paragraph-image"><div class="gh gi nu"><img src="../Images/75b959f6f6bd3759513f59749a96ad6e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1128/format:webp/1*48LpHylaKX3JUiEtPhlaNw.png"/></div><p class="kv kw gj gh gi kx ky bd b be z dk translated">Tableau中Lat Param参数的示例；作者图片</p></figure><p id="c873" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们现在需要将这两个数字转换成一个地理点，一个纬度/经度对。我们将利用Tableau的<code class="fe nj nk nl mz b">MAKEPOINT</code>函数，该函数将数字作为输入，并将该字段解释为一个空间点。</p><figure class="kk kl km kn gt ko gh gi paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gh gi nv"><img src="../Images/0987918867301cb8aba97c63e6bfb90b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*oJcR7hnF7tHssslQVV8sVg.png"/></div></div><p class="kv kw gj gh gi kx ky bd b be z dk translated">Tableau中MAKEPOINT函数的示例；作者图片</p></figure><p id="bbf2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在，我们要设置计算我们点周围的半径。Tableau有一个方便的函数可以做到这一点，叫做<code class="fe nj nk nl mz b">BUFFER</code>。该函数接受一个空间点、一个数字(半径距离)和一个数字度量(如英里、米等)的参数。).我创建了一个名为<code class="fe nj nk nl mz b">Radius Buffer</code>的新参数，以便以后选择半径时更加灵活。我用英里作为我的度量。</p><p id="ac57" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><em class="nr">说白了，函数就是告诉Tableau:</em>“<em class="nr">从我选择的位置，创建一个半径为【Radius Buffer】英里的半径，从那个点向各个方向延伸”</em>。</p><figure class="kk kl km kn gt ko gh gi paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gh gi nw"><img src="../Images/d720304b1d725125a364d1246c3d27b8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*496pxoAQOG2kP9nIgzjjnQ.png"/></div></div><p class="kv kw gj gh gi kx ky bd b be z dk translated">创建缓冲区的示例函数；作者图片</p></figure><p id="e67a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们暂停一下，看看我们做了什么。</p><p id="2659" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们现在可以接受任何一组纬度和经度点(由我们/用户输入),并以英里为单位创建该点周围的半径(同样，由我们/用户输入，以获得最大的灵活性)。通过将我们的<code class="fe nj nk nl mz b">Inputted Point</code>放在一张新表的<em class="nr">细节</em>上，并添加<code class="fe nj nk nl mz b">Buffer Point</code>作为附加标记，我们可以看到该点以及从该点开始的周围距离。</p><p id="56e0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">下面是北卡罗来纳州罗利市中心附近的州议会5英里半径范围。</p><figure class="kk kl km kn gt ko gh gi paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gh gi nx"><img src="../Images/e44a1557d334e4de1bbc6ca8c737c384.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*MiP41rMQkUmc7K_riTMGdg.png"/></div></div><p class="kv kw gj gh gi kx ky bd b be z dk translated">红点是我们的输入点，灰色半径是我们的缓冲点，这里是5英里；作者图片</p></figure><p id="051c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">还记得我们之前必须创建计算来找到每个人口普查区域的大约中点吗？我们这样做是因为我们可以使用Tableau的内置<code class="fe nj nk nl mz b">DISTANCE</code>函数来计算我们输入的点和每个人口普查区域的中点之间的距离— <strong class="lb iu">这就是我们估计周围地区人口的方式。</strong></p><p id="88c7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们将创建一个新的计算字段，我将其命名为<code class="fe nj nk nl mz b">Distance Function</code>，它从我们输入的点开始，到每个人口普查区域的中点结束(注意在前面的R代码中，我们如何为中点创建了一个<code class="fe nj nk nl mz b">Lat</code>和<code class="fe nj nk nl mz b">Lon</code>列，我已经在<code class="fe nj nk nl mz b">MAKEPOINT</code>函数中使用了它们)。我们想用英里来度量距离。该函数表示:<em class="nr">计算从输入点到每个大约人口普查区域中点的距离(以英里为单位)。</em></p><figure class="kk kl km kn gt ko gh gi paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gh gi ny"><img src="../Images/402346ae18ae739615c2c4992686f8b2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*EALcymSyujb9XR8WMbe-yw.png"/></div></div></figure><p id="be6f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">最后，我们再创建一个计算字段作为过滤器。我们想知道我们计算的距离是否小于我们选择的半径缓冲区。例如，如果我们想要一个10英里的半径([半径缓冲区] = 10)，该过滤器将只让我们看到中点距离输入点不超过10英里的人口普查区域值。</p><figure class="kk kl km kn gt ko gh gi paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gh gi nz"><img src="../Images/f8648c1e94bd13adc1ae241457ca7a9a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Xh_04V9cvrnU-Lg19XrF1Q.png"/></div></div></figure><p id="ab43" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><em class="nr">把它放在一起</em></p><p id="e3b8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们现在已经准备好了构建工具的一切！</p><p id="f7c7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在新的工作表中，将您的<code class="fe nj nk nl mz b">Inputted Point</code>拖到detail上。然后拖动<code class="fe nj nk nl mz b">Buffer Point</code>到<em class="nr">添加一个标记层。</em>然后将你的<code class="fe nj nk nl mz b">Geometry</code>字段从shapefile拖到第三个标记层。添加距离过滤器=真实过滤器。将我们的AskIggy文件中的Pop总数添加到您输入的点的标签中。经过一些颜色和不透明度的调整，你可以得到如下的东西。红色点是输入点，绿色圆圈是半径缓冲区，蓝色多边形是人口估计中包含的人口普查区域。我们可以在此视图中显示参数和半径缓冲区，以便随时进行更改。</p><figure class="kk kl km kn gt ko gh gi paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gh gi ns"><img src="../Images/59129c37532c5f65aaa960c486618f44.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*AKA30RcogxRSRTHQeKrUDA.gif"/></div></div><p class="kv kw gj gh gi kx ky bd b be z dk translated">创建您的人口估计工具与一对夫妇Tableau点击。为清晰起见，编辑了一些格式化步骤；作者图片</p></figure><figure class="kk kl km kn gt ko gh gi paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gh gi oa"><img src="../Images/18153a920e065764ce6f3f3f3030b9c9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*XIBWzoWw5kVqr074vn2g7w.png"/></div></div><p class="kv kw gj gh gi kx ky bd b be z dk translated">北卡罗来纳州罗利市地址的人口估计示例；作者图片</p></figure><p id="31a2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">对于北卡罗来纳州罗利一个半径为5英里的选定点，我们估计人口约为222，719人。如果我们想要10英里的半径呢？改变半径缓冲参数，我们的视觉将自动更新。</p><figure class="kk kl km kn gt ko gh gi paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gh gi ob"><img src="../Images/073073a76cab56313980882d96bfee1c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*O7X9wR1tOh8qU88JU8OE6Q.png"/></div></div><p class="kv kw gj gh gi kx ky bd b be z dk translated">距离我们10英里的缓冲区</p></figure><p id="22d7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">还记得我们说过这只是一个估计，而且不精确吗？视觉可以帮助我们理解估计有多精确。当半径缓冲区的一部分边缘没有基础蓝色时，这是我们估计中遗漏的人口。当蓝色多边形超出缓冲区时，这是不应该包括在内的额外人口。</p><p id="2f19" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这是因为我们计算的是到人口普查区域面的中点的距离，而不是到边界的距离。如果从人口普查区域的<code class="fe nj nk nl mz b">Inputted Point</code>到<em class="nr">中点</em>的距离大于我们的半径缓冲区，即使面的一部分在我们的半径范围内，数据也会被过滤掉。然而，随着半径缓冲区的增加，我们预计误差占总人口的百分比会下降。此外，当考虑到在许多情况下既有重叠区域又有欠重叠区域时，一些误差可能会自我抵消。</p></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><figure class="kk kl km kn gt ko gh gi paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gh gi oc"><img src="../Images/189c1cd2c875d3078b868d03450a0250.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*XM-cxKQB5d-xM_4ADGTEHw.png"/></div></div><p class="kv kw gj gh gi kx ky bd b be z dk translated">谷歌地图上的纬度和经度的例子。单击地图而不是感兴趣的点来获取这些值。</p></figure><p id="19a4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">一个常见的问题可能是— <strong class="lb iu">我如何获得地址的纬度和经度？</strong>有几种免费的方法可以做到这一点。你可以进入谷歌地图，点击地图上的一个点(不是一个感兴趣的点，而是地图上的一个地方)，底部的弹出窗口(如左侧截图所示)会显示该点的纬度(第一个值)和经度(第二个值)。您还可以使用各种免费工具，输入地址来获取纬度和经度值。<a class="ae ki" href="https://www.latlong.net/convert-address-to-lat-long.html" rel="noopener ugc nofollow" target="_blank">这里有一个可以试试</a>。</p><p id="8b71" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果你把这样的工具放在别人面前，你可以把这些转换器网站嵌入到Tableau仪表板中，以帮助别人找到输入的纬度/经度点；在下面的截图中，你可以看到<a class="ae ki" href="https://jordanbean.com/population-estimator" rel="noopener ugc nofollow" target="_blank">我的方法</a>带有一个嵌入式网站和一些用户在主页上输入的参数。</p><figure class="kk kl km kn gt ko gh gi paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gh gi od"><img src="../Images/a8e442cc749dd06ec781a509eb2eaa8b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*NZXW1svAdU4FGy1aPzfrXg.png"/></div></div><p class="kv kw gj gh gi kx ky bd b be z dk translated">使用自由文本参数字段嵌入纬度/经度地址转换器的示例；作者图片</p></figure></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><p id="da4a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">概括地说，我们构建工具的步骤是:</p><ol class=""><li id="831f" class="oe of it lb b lc ld lf lg li og lm oh lq oi lu oj ok ol om bi translated">源普查区域形状文件和数据；用编程语言做一些准备</li><li id="674e" class="oe of it lb b lc on lf oo li op lm oq lq or lu oj ok ol om bi translated">加载并连接Tableau中的数据</li><li id="8eda" class="oe of it lb b lc on lf oo li op lm oq lq or lu oj ok ol om bi translated">设置参数并输入所选地址的经纬度坐标</li><li id="09c9" class="oe of it lb b lc on lf oo li op lm oq lq or lu oj ok ol om bi translated">计算从坐标到所有人口普查区域形状中点的距离</li><li id="e14b" class="oe of it lb b lc on lf oo li op lm oq lq or lu oj ok ol om bi translated">只保留我们期望半径内的人口普查区域</li><li id="daa8" class="oe of it lb b lc on lf oo li op lm oq lq or lu oj ok ol om bi translated">对步骤(5)中保存的人口普查区域中的人口进行求和</li></ol></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><h1 id="27a1" class="md me it bd mf mg mh mi mj mk ml mm mn jz mo ka mp kc mq kd mr kf ms kg mt mu bi translated">根据分析</h1><p id="024a" class="pw-post-body-paragraph kz la it lb b lc nm ju le lf nn jx lh li no lk ll lm np lo lp lq nq ls lt lu im bi translated">除了“美化”地图以使其更加用户友好(<a class="ae ki" href="https://jordanbean.com/population-estimator" rel="noopener ugc nofollow" target="_blank">这是我所做的</a>)，还有其他几个领域可以探索——我相信许多读者已经可以想到对我上面概述的内容进行改进，以使其在统计上更加严谨或在空间上更加精确。</p><p id="8d68" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我想到的一些想法是:</p><ul class=""><li id="8f6c" class="oe of it lb b lc ld lf lg li og lm oh lq oi lu os ok ol om bi translated">您可以使用人口普查区块组而不是区域来获得更精确的估计值(在加载和处理数据时，请耐心使用Tableau)</li><li id="4c20" class="oe of it lb b lc on lf oo li op lm oq lq or lu os ok ol om bi translated">您可以使用相同的数据和过程，按收入范围、年龄、有孩子的家庭等对人口进行细分；在普查区域/区块组级别发布的任何内容都可以使用这种方法进行汇总</li><li id="c7f4" class="oe of it lb b lc on lf oo li op lm oq lq or lu os ok ol om bi translated">有了Tableau的付费版本，您可以使用代码脚本为使用可用API的最终用户自动执行纬度/经度转换</li></ul><p id="42ff" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">使用空间数据极具挑战性-有许多方法会无意中误用函数、坐标和距离。然而，在许多情况下，不精确是可以的。如果一个半径内实际上有20万人，我们说有19万或21.5万人，这有关系吗？考虑您的用例可接受的误差范围，当方向数据“足够好”时，我们可以快速开发类似的工具，而无需成为ArcGIS大师或地理空间数据科学家。</p></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><p id="5f1f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><em class="nr">有兴趣讨论位置策略和分析吗？</em> <a class="ae ki" href="http://www.linkedin.com/in/jordanbean" rel="noopener ugc nofollow" target="_blank"> <em class="nr">在LinkedIn </em> </a> <em class="nr">上联系我或者在jordan@jordanbean.com给我发邮件</em></p></div></div>    
</body>
</html>