# Python 中堆栈的完整指南

> 原文：<https://towardsdatascience.com/a-complete-guide-to-stacks-in-python-ee4e2045a704>

## 在 Python 中构造和使用堆栈数据结构

![](img/8f781b270bde74026eae219da62ded95.png)

照片由[梅姆](https://unsplash.com/@picoftasty?utm_source=medium&utm_medium=referral)在 [Unsplash](https://unsplash.com?utm_source=medium&utm_medium=referral) 上拍摄

堆栈是一种抽象数据类型，它存储项目添加到结构中的顺序，但只允许对堆栈顶部进行添加和删除。这遵循了后进先出(LIFO)原则，正如它的名字所说。你可以把这想象成你吃一叠薄煎饼的方式(除非你想一次吃掉一叠薄煎饼中的一部分)，或者你吃完晚饭后洗完盘子后使用它们，然后打算重复使用它们的方式(除非出于某种原因你想冒险把它们都打碎！).以下面的 Gif 图片中吉米·法伦扔掉的那堆煎饼为例。

giphy 的 Gif

当我们希望将输出存储在一个保持其顺序的结构中，但我们只希望用户能够访问他们最后添加到该结构中的内容时，可以使用这些方法。常见的例子包括浏览器中的后退按钮，它可以转到最后一个添加到堆栈中的项目，或者文字处理器中的撤销按钮，它可以撤销最后一次添加的项目。

这当然是一个**抽象**，关注于我们希望数据结构包含什么以及我们希望如何与之交互。然后，我们可以开始考虑如何在 Python 的实际数据结构中实现这一点。

考虑到这一点，我们需要能够定义与该数据结构相关的关键方法。常见操作包括:

*   push(item):将一个项目推到堆栈的顶部
*   pop():移除堆栈的顶部项目并返回它
*   peek():返回堆栈的顶部项目，但不移除它
*   is_empty():如果堆栈为空，则返回 True
*   size():返回堆栈中有多少项

这意味着我们需要使用 Python 数据类型来构建它，这种数据类型是可变的，可以用来存储有序的项目集合。我们可以问自己的第一件事是，是否有一种已经在 Python 中实现的数据类型可以为我们做到这一点？

Giphy 的 Gif

**一份名单！我们可以用一个列表！**

我们知道列表是可变的，它可以被改变，并且我们可以使用列表已经内置的功能来实现堆栈，轻松简单地从开始和结束添加和删除项目。

在使用列表时，我们必须定义一个使用列表的类，但它只有特定的功能，允许用户以我们想要的方式与之交互。为此，我们可以使用 Python 的**类**结构来定义数据结构将包含的信息以及我们想要使用的方法。

然后要做的第一件事是将**类**命名为`Stack`，并为这个新类创建构造函数。为此，我们想要的是，一旦创建了对象的新实例，就创建一个可以使用`.items`属性访问的空列表。我们可以如下实例化该类:

这意味着当`Stack`类的一个实例被创建时，`item`属性将代表一个空列表。

然后我们可以开始向我们的`Stack` **类**添加主要功能。我们希望能够做的第一件事是将一个项目添加到堆栈的末尾。列表的好处是在`.append()`方法中有一个内置的方法。这样做的好处是，它具有恒定的时间复杂度 O(1 ),这意味着它运行的时间不会随着列表中已有项目的数量而改变，因为它只将项目添加到末尾。因此，我们可以利用这一点将一个项目推到我们的`Stack`的末尾，如下所示:

很好很简单对吧！在这种情况下，我们并不关心到底要在栈尾添加什么，只是我们可以添加它。您可以添加更多的功能，但目前这是好的。

从堆栈中移除项目呢？为此，我们首先需要检查堆栈不是空的，因为你不能从空的堆栈中移除项目，对吗？如果堆栈是空的，那么我们可以简单地返回`none`，这样我们实际上返回了一些东西，但是如果它不是空的，那么我们可以移除最后一个项目并返回它。因为我们使用 Python 的内置列表类，所以我们可以使用`.pop()`方法，在 Python 3.6+中，该方法从列表中删除最后一项并返回它。这也在常数时间 O(1)中运行，因为我们只删除最后一项，不影响任何其他索引。我们可以这样实现:

弹出前先检查列表是否存在的好处是确保不会抛出错误，否则如果不处理该错误，可能会导致代码停止运行。将它放在数据结构的实际实现中，可以确保如果在使用这个数据结构运行代码时没有想到它，那么代码会在某种程度上继续运行。

我们现在有了与堆栈相关联的主要方法，但是我们还可以添加一些额外的功能，以便让它对我们的最终用户更有用。

我们可以添加的第一件事是一个方法来查看堆栈中的最终值，允许用户在决定是否删除它之前查看该值。这可以遵循类似于`pop()`方法的实现，但是我们不使用`.pop()`而是访问列表中最后一个索引的条目。同样，它的时间复杂度为 O(1 ),因为我们使用索引从一个列表中访问一个条目，这样做既简单又方便。

我们还可以提供一种检查堆栈是否为空的方法。如果堆栈为空，这将简单地返回布尔值`True`，如果不为空，则返回`False`。这也以恒定时间运行，因为它只是检查堆栈中的列表是否存在。

最后，我们可以创建一个返回堆栈大小的方法。这告诉我们堆栈的长度，就像列表一样，并允许用户查看添加了多少项。

现在，我们拥有了 Stack 类的主要功能以及大部分附加功能。这使得我们的最终用户在我们创建的最终界面中与这个数据结构进行交互变得更加容易和简单。

唯一的问题是，如果我们试图打印该类的一个实例，我们会得到难看的输出

```
<__main__.Stack object at 0x0000027F2C960FD0>
```

这看起来不太好，也没有告诉我们这个类的实际实例。然后可以做的是使用该类的特殊的`__str__`邓德方法来告诉解释器我们想要如何打印出该类的一个实例。在这种情况下，我们只想返回包含在堆栈中的整个列表，可以实现为:

最后要做的是将所有这些放在一起，这样我们就可以在代码中创建这个 Stack 类的实例。最终产品看起来像这样:

此时你一定在想，我为什么需要知道这些？这在编程中的常见应用包括:

*   评估数学表达式
*   编程语言的语法分析
*   存储参数和局部变量
*   文字处理器中的撤消和重做操作
*   网站中的回溯

当你在构建这些程序的时候，知道这种数据结构可以给你提供处理这些挑战的功能，这是非常好的。

另一方面，堆栈也可以用在一个常见的涉及如何反转字符串的面试问题中。虽然你可以简单地用一个列表做到这一点，但是如果他们要求你创建一个数据结构并反转一个给定的字符串，那么栈就是一个很好的例子。

为此，我们可以简单地将所有字符添加到一个空堆栈中，以相反的顺序解压缩所有这些字符，将它们连接在一起，然后打印出结果。这方面的一个例子如下:

好了，现在你知道了如何用 Python 实现一个栈，以及如何使用这个数据结构反转一个字符串！恭喜你。

Giphy 的 Gif

这是探索数据结构及其在 Python 中的使用和实现的系列文章的第五篇。如果您错过了前三篇关于 Python 中的字典、元组和集合的文章，您可以在以下链接中找到它们:

[](/a-complete-guide-to-dictionaries-in-python-5c3f4c132569) [## Python 词典完全指南

### 什么是词典，创建它们，访问它们，更新它们，以及特殊的方法

towardsdatascience.com](/a-complete-guide-to-dictionaries-in-python-5c3f4c132569) [](/a-complete-guide-to-tuples-in-python-af76241e8b59) [## Python 中元组的完全指南

### 什么是元组、元组实现、数据类型、索引、不变性和扩展功能

towardsdatascience.com](/a-complete-guide-to-tuples-in-python-af76241e8b59) [](/a-complete-guide-to-sets-in-python-99dc595b633d) [## Python 中集合的完整指南

### 集合的关键特性、实现集合、访问项目、可变性和附加功能

towardsdatascience.com](/a-complete-guide-to-sets-in-python-99dc595b633d) 

本系列的后续文章将涉及链表、队列和图形。为了确保您不会错过任何内容，请注册以便在发布时收到电子邮件通知:

[](https://philip-wilkinson.medium.com/subscribe) [## 每当菲利普·威尔金森发表文章时，就收到一封电子邮件。

### 每当菲利普·威尔金森发表文章时，就收到一封电子邮件。通过注册，您将创建一个中型帐户，如果您还没有…

philip-wilkinson.medium.com](https://philip-wilkinson.medium.com/subscribe) 

如果你喜欢你所读的内容，但不是一年中的会员，那么考虑使用我下面的推荐代码注册，在这个平台上支持我自己和其他了不起的作者:

[](https://philip-wilkinson.medium.com/membership) [## 通过我的推荐链接加入媒体-菲利普·威尔金森

### 作为一个媒体会员，你的会员费的一部分会给你阅读的作家，你可以完全接触到每一个故事…

philip-wilkinson.medium.com](https://philip-wilkinson.medium.com/membership) 

感谢您的阅读！

[](/git-and-github-basics-for-data-scientists-b9fd96f8a02a) [## 面向数据科学家的 Git 和 GitHub 基础知识

### UCL 数据科学研讨会 8:什么是 Git，创建本地存储库，提交第一批文件，链接到远程…

towardsdatascience.com](/git-and-github-basics-for-data-scientists-b9fd96f8a02a) [](/maximum-likelihood-estimation-and-ols-regression-36c049c94a48) [## 最大似然估计和 OLS 回归

### 介绍他们的关系和工作方式

towardsdatascience.com](/maximum-likelihood-estimation-and-ols-regression-36c049c94a48) [](/london-convenience-store-classification-using-k-means-clustering-70c82899c61f) [## 使用 K-均值聚类的伦敦便利店分类

### 伦敦的便利店怎么分类？

towardsdatascience.com](/london-convenience-store-classification-using-k-means-clustering-70c82899c61f)