<html>
<head>
<title>Understanding Homography (a.k.a Perspective Transformation)</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">理解单应性(又名透视变换)</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/understanding-homography-a-k-a-perspective-transformation-cacaed5ca17#2022-01-31">https://towardsdatascience.com/understanding-homography-a-k-a-perspective-transformation-cacaed5ca17#2022-01-31</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""><h1 id="1b00" class="pw-post-title ir is it bd iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp bi translated">理解单应性(又名透视变换)</h1></div><div class=""><h2 id="0c14" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">从不同的角度看待事物</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/ca6433a22df813b14ce236393f881b0c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*yyFZc49YaXH4j-bGP0DzjA.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">通过单应变换。图片作者。</p></figure><h1 id="3a86" class="ky kz it bd la lb lc ld le lf lg lh li jz lj ka lk kc ll kd lm kf ln kg lo lp bi translated">一.动机</h1><p id="48ad" class="pw-post-body-paragraph lq lr it ls b lt lu ju lv lw lx jx ly lz ma mb mc md me mf mg mh mi mj mk ml im bi translated">对于那些熟悉文档扫描仪应用程序的人来说，你可能会注意到，无论你如何拿着手机，这些应用程序产生的结果看起来就像你直接从顶部扫描文档一样(鸟瞰图)。在开发一个类似的应用程序时，我学会了通过一种叫做单应的计算机图形技术(也叫透视变换)来产生相同的特征。因此，在这篇文章中，我想解释这个概念，并分享一个Python实现来执行这样的技术。</p><h1 id="d182" class="ky kz it bd la lb lc ld le lf lg lh li jz lj ka lk kc ll kd lm kf ln kg lo lp bi translated">二。单应性(又名透视变换)</h1><p id="3ec4" class="pw-post-body-paragraph lq lr it ls b lt lu ju lv lw lx jx ly lz ma mb mc md me mf mg mh mi mj mk ml im bi translated">线性代数在计算机图形学和计算机视觉中起着重要的作用。其中之一是通过矩阵乘法变换2D图像。这种变换矩阵的一个例子是单应矩阵。它允许我们通过将单应矩阵与一个视图中的点相乘来找到它们在另一个视图中的相应位置，从而从同一场景的一个视图转换到另一个视图(等式1)。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mm"><img src="../Images/127f551f65ae616d93b38cc083540d10.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4mQSG8XjPk85EjD9ePk3gQ.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">等式1:单应变换。作者图片</p></figure><p id="e206" class="pw-post-body-paragraph lq lr it ls b lt mn ju lv lw mo jx ly lz mp mb mc md mq mf mg mh mr mj mk ml im bi translated">我们的目标是理解矩阵<em class="ms"> H </em>是如何产生的，以及如何估计矩阵<em class="ms"> H </em>的元素。为此，我们首先需要理解三个基本概念:齐次坐标、射影空间和针孔摄像机模型。</p><h2 id="8e4c" class="mt kz it bd la mu mv dn le mw mx dp li lz my mz lk md na nb lm mh nc nd lo ne bi translated">齐次坐标和射影空间</h2><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nf"><img src="../Images/c8b1a58e0cf604d6c9683ddb7a3e6c8b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*lIlcbm6oh1kolSe5f8js5w.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">图1:投影空间的可视化。图片作者。</p></figure><blockquote class="ng nh ni"><p id="84b2" class="lq lr ms ls b lt mn ju lv lw mo jx ly nj mp mb mc nk mq mf mg nl mr mj mk ml im bi translated">试试<a class="ae nm" href="https://wordsandbuttons.online/interactive_guide_to_homogeneous_coordinates.html" rel="noopener ugc nofollow" target="_blank">这个互动网站</a>，对齐次坐标和射影空间如何工作有一个更好的直觉</p></blockquote><p id="846b" class="pw-post-body-paragraph lq lr it ls b lt mn ju lv lw mo jx ly lz mp mb mc md mq mf mg mh mr mj mk ml im bi translated">齐次坐标是射影空间中使用的坐标系统。你可以把射影空间想象成3D空间中位于<em class="ms"> Z </em> =1的平面。穿过3D空间的原点并与<em class="ms"> Z </em> =1平面相交的直线在射影空间中形成点。此外，在射影空间中，当3D空间中的平面穿过原点并与Z=1平面相交时，形成线。在计算机图形学和计算机视觉中，与欧几里得空间中的笛卡尔坐标系相比，射影空间中的齐次坐标提供了一些优势。一个优点是，它允许我们将旋转和缩放等图像变换与平移结合为一个矩阵乘法，而不是矩阵乘法和向量加法(Yasen，2019)。这意味着我们可以将复杂的矩阵链接成一个单一的变换矩阵，这有助于计算机执行更少的计算。</p><h2 id="4325" class="mt kz it bd la mu mv dn le mw mx dp li lz my mz lk md na nb lm mh nc nd lo ne bi translated">针孔摄像机模型</h2><p id="cbe7" class="pw-post-body-paragraph lq lr it ls b lt lu ju lv lw lx jx ly lz ma mb mc md me mf mg mh mi mj mk ml im bi translated">齐次坐标和射影空间在推导针孔摄像机模型中起着重要作用。该模型解释了如何将3D空间中的场景投影到图像平面(2D图像)上。下面的等式将3D空间中的点与其在图像平面中的对应位置相关联。请注意，生成的2D点和源3D场景点都在同质坐标中。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mm"><img src="../Images/23b48ace3fd2cbe834264f1b49b402b9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*AnomCFkIB3fQWOKlqCvybQ.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">等式2:针孔摄像机模型。图片作者。</p></figure><p id="4416" class="pw-post-body-paragraph lq lr it ls b lt mn ju lv lw mo jx ly lz mp mb mc md mq mf mg mh mr mj mk ml im bi translated">您可以看到该关系由两个转换组成。第一个变换矩阵称为摄像机外部矩阵。它告诉我们相机在3D空间中的位置。第二个变换是摄像机固有矩阵，它将图像平面转换成像素。首先，它将图像平面从单位(例如米)缩放到像素。然后，它移动图像平面的原点，以匹配左上角从(0，0)开始的像素坐标。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mm"><img src="../Images/9bf1c45a4a30b0f9a50841f29091f7cc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*U_1s8ui5w68250eq2tmfoQ.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">等式3:相机矩阵。图片作者。</p></figure><p id="0ef3" class="pw-post-body-paragraph lq lr it ls b lt mn ju lv lw mo jx ly lz mp mb mc md mq mf mg mh mr mj mk ml im bi translated">然后，我们可以通过矩阵乘法将这两种变换组合成摄像机矩阵。为了获得这个矩阵的条目的值，我们执行一个称为相机校准的过程(Bhatt，2021)。我推荐你观看Peter Corke 的视频，了解更多关于这个话题的信息。</p><h2 id="5535" class="mt kz it bd la mu mv dn le mw mx dp li lz my mz lk md na nb lm mh nc nd lo ne bi translated">推导单应矩阵</h2><p id="3df0" class="pw-post-body-paragraph lq lr it ls b lt lu ju lv lw lx jx ly lz ma mb mc md me mf mg mh mi mj mk ml im bi translated">在我们从针孔摄像机模型中知道什么是摄像机矩阵之后，我们可以导出单应矩阵。我们知道针孔摄像机模型将3D空间中的一个点映射到图像平面上。让我们假设我们的场景是一个平面，位于(X，Y，0)。然后我们可以像下面这样更新相机矩阵。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mm"><img src="../Images/244fdbd14149658383e11f410683343e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WMQTpvxzAowyPc-AF9fD5Q.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">等式4:单应矩阵。图片作者。</p></figure><p id="12ce" class="pw-post-body-paragraph lq lr it ls b lt mn ju lv lw mo jx ly lz mp mb mc md mq mf mg mh mr mj mk ml im bi translated">得到的矩阵是单应矩阵。它告诉我们，同一场景从一个视图到另一个视图的转换实质上是从一个投影平面到另一个投影平面的变换。请注意，<em class="ms"> H </em>中没有<em class="ms"> h₃₃ </em>值，因为我们可以假设它为1。</p><h2 id="dc2d" class="mt kz it bd la mu mv dn le mw mx dp li lz my mz lk md na nb lm mh nc nd lo ne bi translated">计算单应矩阵的元素</h2><p id="2398" class="pw-post-body-paragraph lq lr it ls b lt lu ju lv lw lx jx ly lz ma mb mc md me mf mg mh mi mj mk ml im bi translated">类似于相机矩阵，我们可以通过执行校准过程来找到单应矩阵的值。我们可以通过下面的等式使用彼此相关的对应点来做到这一点。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mm"><img src="../Images/9572a2cead7d046c109f805b07f1347b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*JvBFAZxCMtxQzjR4QCcRMg.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">等式5:两对匹配点之间的关系。图片作者。</p></figure><p id="05d2" class="pw-post-body-paragraph lq lr it ls b lt mn ju lv lw mo jx ly lz mp mb mc md mq mf mg mh mr mj mk ml im bi translated">然后，我们可以将等式5–3分布如下</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mm"><img src="../Images/58a6cfd2a54edca4bd1deeb576c7838b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*07JlhCWWWSTNN8XmOiMq9g.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">等式6:通过单应性的两点之间的关系。图片作者。</p></figure><p id="570e" class="pw-post-body-paragraph lq lr it ls b lt mn ju lv lw mo jx ly lz mp mb mc md mq mf mg mh mr mj mk ml im bi translated">上面的关系是一对匹配点之间的关系。由于单应矩阵具有8个自由度，我们需要至少四对对应点来求解单应矩阵的值。然后，我们可以像下面这样组合所有四个点之间的关系。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mm"><img src="../Images/03731fbe4f90fdd6155b36f360f0470c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*F87seGjeD4fG451VSkmo2Q.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">等式7:n对匹配点之间的关系。图片作者。</p></figure><p id="f945" class="pw-post-body-paragraph lq lr it ls b lt mn ju lv lw mo jx ly lz mp mb mc md mq mf mg mh mr mj mk ml im bi translated">这种形式允许我们通过最小二乘法求解<em class="ms"> h </em>向量。</p><h1 id="3aa5" class="ky kz it bd la lb lc ld le lf lg lh li jz lj ka lk kc ll kd lm kf ln kg lo lp bi translated">三。代码</h1><p id="d69c" class="pw-post-body-paragraph lq lr it ls b lt lu ju lv lw lx jx ly lz ma mb mc md me mf mg mh mi mj mk ml im bi translated">在了解了单应性之后，我们可以编写Python代码来实现我在帖子开头提到的鸟瞰图功能。我们本质上是在寻找变换矩形文档的角并将其映射到新平面的单应矩阵，其中这些角映射到新图像平面的角。</p><blockquote class="ng nh ni"><p id="34bc" class="lq lr ms ls b lt mn ju lv lw mo jx ly nj mp mb mc nk mq mf mg nl mr mj mk ml im bi translated">您可以在这里找到包含样本图像<a class="ae nm" href="https://github.com/Socret360/understanding-homography" rel="noopener ugc nofollow" target="_blank">的GitHub repo。</a></p></blockquote><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nn no l"/></div></figure><h1 id="09af" class="ky kz it bd la lb lc ld le lf lg lh li jz lj ka lk kc ll kd lm kf ln kg lo lp bi translated">四。结论</h1><p id="5a8c" class="pw-post-body-paragraph lq lr it ls b lt lu ju lv lw lx jx ly lz ma mb mc md me mf mg mh mi mj mk ml im bi translated">尽管我们只研究了如何实现文档扫描仪应用程序的鸟瞰效果，但单应还有更多用例。它还可以为OCR和自动驾驶汽车创建全景图、3D重建和预处理图像。我鼓励你更深入地研究这个概念，这样你就能找到新的方法用它来创造伟大的事物！</p></div><div class="ab cl np nq hx nr" role="separator"><span class="ns bw bk nt nu nv"/><span class="ns bw bk nt nu nv"/><span class="ns bw bk nt nu"/></div><div class="im in io ip iq"><p id="fb1c" class="pw-post-body-paragraph lq lr it ls b lt mn ju lv lw mo jx ly lz mp mb mc md mq mf mg mh mr mj mk ml im bi translated"><em class="ms">喜欢这篇文章，想表示你的支持？关注我或者给我买咖啡</em></p><figure class="kj kk kl km gt kn gh gi paragraph-image"><a href="https://www.buymeacoffee.com/socretlee"><div class="ab gu cl nw"><img src="../Images/8140cd8e4407d605f0439f0c3a38868f.png" data-original-src="https://miro.medium.com/v2/format:webp/1*gS6Sh6i8g535gOafY4Wl1w.png"/></div></a></figure><h1 id="fb84" class="ky kz it bd la lb lc ld le lf lg lh li jz lj ka lk kc ll kd lm kf ln kg lo lp bi translated">参考</h1><p id="fabe" class="pw-post-body-paragraph lq lr it ls b lt lu ju lv lw lx jx ly lz ma mb mc md me mf mg mh mi mj mk ml im bi translated">Bhatt博士(2021年11月12日)。<em class="ms">计算机视觉中的摄像机标定综合指南</em>。分析Vidhya。检索于2022年1月30日，来自<a class="ae nm" href="https://www.analyticsvidhya.com/blog/2021/10/a-comprehensive-guide-for-camera-calibration-in-computer-vision/" rel="noopener ugc nofollow" target="_blank">https://www . analyticsvidhya . com/blog/2021/10/a-comprehensive-guide-for-camera-calibration-in-computer-vision/</a></p><p id="5985" class="pw-post-body-paragraph lq lr it ls b lt mn ju lv lw mo jx ly lz mp mb mc md mq mf mg mh mr mj mk ml im bi translated"><em class="ms">讲解齐次坐标&amp;射影几何</em>。汤姆·达林。(1970年2月24日)。检索于2022年1月30日，来自<a class="ae nm" href="https://www.tomdalling.com/blog/modern-opengl/explaining-homogenous-coordinates-and-projective-geometry/" rel="noopener ugc nofollow" target="_blank">https://www . tomdalling . com/blog/modern-OpenGL/explaining-homogeneous-coordinates-and-projective-geometry/</a></p><p id="c452" class="pw-post-body-paragraph lq lr it ls b lt mn ju lv lw mo jx ly lz mp mb mc md mq mf mg mh mr mj mk ml im bi translated"><em class="ms">如何从对应点计算单应矩阵H(2D-2D平面单应)</em>。数学栈交换。(1961年9月1日)。检索于2022年1月30日，来自<a class="ae nm" href="https://math.stackexchange.com/questions/494238/how-to-compute-homography-matrix-h-from-corresponding-points-2d-2d-planar-homog" rel="noopener ugc nofollow" target="_blank">https://math . stack exchange . com/questions/494238/how-to-compute-homo-matrix-h-from-communication-points-2d-2d-planar-homo g</a></p><p id="6a15" class="pw-post-body-paragraph lq lr it ls b lt mn ju lv lw mo jx ly lz mp mb mc md mq mf mg mh mr mj mk ml im bi translated"><em class="ms">图像单应性</em>。(未注明)。2022年1月30日检索，来自<a class="ae nm" href="http://16385.courses.cs.cmu.edu/spring2021content/lectures/08_homographies/08_homographies_slides.pdf" rel="noopener ugc nofollow" target="_blank">http://16385 . courses . cs . CMU . edu/spring 2021 content/lectures/08 _ homographics/08 _ homographics _ slides . pdf</a></p><p id="c8a6" class="pw-post-body-paragraph lq lr it ls b lt mn ju lv lw mo jx ly lz mp mb mc md mq mf mg mh mr mj mk ml im bi translated">刘，女。(2021年8月4日)。理解计算机视觉中的转换。中等。2022年1月30日检索，来自<a class="ae nm" rel="noopener" target="_blank" href="/understanding-transformations-in-computer-vision-b001f49a9e61">https://towardsdatascience . com/understanding-transformations-in-computer-vision-b 001 f 49 a9 e 61</a></p><p id="aa2d" class="pw-post-body-paragraph lq lr it ls b lt mn ju lv lw mo jx ly lz mp mb mc md mq mf mg mh mr mj mk ml im bi translated"><em class="ms">针孔摄像头型号</em>。HediVision。(未注明)。2022年1月30日检索，来自https://hedivision.github.io/Pinhole.html<a class="ae nm" href="https://hedivision.github.io/Pinhole.html" rel="noopener ugc nofollow" target="_blank"/></p><p id="f28a" class="pw-post-body-paragraph lq lr it ls b lt mn ju lv lw mo jx ly lz mp mb mc md mq mf mg mh mr mj mk ml im bi translated">塞尔日·贝隆吉。(未注明)。<em class="ms"> Cse 252B:计算机视觉Ii </em>。读书。检索自<a class="ae nm" href="https://cseweb.ucsd.edu/classes/sp04/cse252b/notes/lec04/lec4.pdf." rel="noopener ugc nofollow" target="_blank">https://CSE web . ucsd . edu/classes/sp04/CSE 252 b/notes/le c04/le C4 . pdf</a></p><p id="492d" class="pw-post-body-paragraph lq lr it ls b lt mn ju lv lw mo jx ly lz mp mb mc md mq mf mg mh mr mj mk ml im bi translated">y . Shankar(2022年1月13日)。<em class="ms">估计单应矩阵</em>。中等。检索于2022年1月30日，来自<a class="ae nm" rel="noopener" target="_blank" href="/estimating-a-homography-matrix-522c70ec4b2c">https://towards data science . com/estimating-a-homo graphy-matrix-522 c 70 EC 4 B2C</a></p><p id="3864" class="pw-post-body-paragraph lq lr it ls b lt mn ju lv lw mo jx ly lz mp mb mc md mq mf mg mh mr mj mk ml im bi translated">透视变换、单应矩阵、本质矩阵和基本矩阵之间有什么区别？(未注明)。检索于2022年1月30日，来自<a class="ae nm" href="https://vivekseth.com/computer-vision-matrix-differences/" rel="noopener ugc nofollow" target="_blank">https://vivekseth.com/computer-vision-matrix-differences/</a></p><p id="cd49" class="pw-post-body-paragraph lq lr it ls b lt mn ju lv lw mo jx ly lz mp mb mc md mq mf mg mh mr mj mk ml im bi translated">亚森·胡。(2019年6月10日)。<em class="ms">齐次坐标</em>。亚森·胡。检索于2022年1月30日，来自<a class="ae nm" href="https://yasenh.github.io/post/homogeneous-coordinates/" rel="noopener ugc nofollow" target="_blank">https://yasenh.github.io/post/homogeneous-coordinates/</a></p><p id="7ab3" class="pw-post-body-paragraph lq lr it ls b lt mn ju lv lw mo jx ly lz mp mb mc md mq mf mg mh mr mj mk ml im bi translated">YouTube。(2018).<em class="ms">计算机视觉中的单应解释</em>。检索于2022年1月30日，来自<a class="ae nm" href="https://www.youtube.com/watch?v=MlaIWymLCD8." rel="noopener ugc nofollow" target="_blank">https://www.youtube.com/watch?v=MlaIWymLCD8.</a></p><p id="d785" class="pw-post-body-paragraph lq lr it ls b lt mn ju lv lw mo jx ly lz mp mb mc md mq mf mg mh mr mj mk ml im bi translated">YouTube。(2019).第12类——投影变换。<em class="ms"> YouTube </em>。于2022年1月30日从<a class="ae nm" href="https://www.youtube.com/watch?v=54Qtu3S9HJU." rel="noopener ugc nofollow" target="_blank">https://www.youtube.com/watch?v=54Qtu3S9HJU.</a>检索</p><p id="01fe" class="pw-post-body-paragraph lq lr it ls b lt mn ju lv lw mo jx ly lz mp mb mc md mq mf mg mh mr mj mk ml im bi translated">YouTube。(2021).<em class="ms">针孔和透视投影|成像</em>。<em class="ms"> YouTube </em>。于2022年1月30日从<a class="ae nm" href="https://www.youtube.com/watch?v=_EhY31MSbNM." rel="noopener ugc nofollow" target="_blank">https://www.youtube.com/watch?v=_EhY31MSbNM.</a>检索</p></div></div>    
</body>
</html>