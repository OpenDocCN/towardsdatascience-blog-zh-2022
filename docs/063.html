<html>
<head>
<title>Debunking my Assumptions on Traffic Data</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">揭穿我对交通数据的假设</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/debunking-my-assumptions-on-traffic-data-328f6a38a772#2022-01-03">https://towardsdatascience.com/debunking-my-assumptions-on-traffic-data-328f6a38a772#2022-01-03</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""><h1 id="b59c" class="pw-post-title io ip iq bd ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm bi translated">揭穿我对交通数据的假设</h1></div><div class=""><h2 id="814f" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">从数据探索到模型训练，如何充分利用交通数据集。</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/330998ed0ce7ebf2f00940dde2332ec8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*yO-v4R68Oy7Fbw9YAjJp-g.jpeg"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">美国宇航局在<a class="ae kv" href="https://unsplash.com/s/photos/usa-map?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>拍摄的照片</p></figure><p id="6304" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">前阵子，作为黑客马拉松的一部分，我对<a class="ae kv" href="https://www.kaggle.com/jboysen/us-traffic-2015" rel="noopener ugc nofollow" target="_blank"> <strong class="ky ir">美国交通2015数据</strong> </a>做了一个分析。交通数据集由<a class="ae kv" href="https://www.transportation.gov/data" rel="noopener ugc nofollow" target="_blank">美国交通部</a>编制，可在<a class="ae kv" href="https://cloud.google.com/bigquery/public-data/" rel="noopener ugc nofollow" target="_blank">谷歌大查询</a>上获得</p><p id="8c89" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">黑客马拉松组织者没有给出任何问题陈述，除了从这个数据集中找出5个最明显的模式。我照做了——事情是这样的。</p><h2 id="3878" class="ls lt iq bd lu lv lw dn lx ly lz dp ma lf mb mc md lj me mf mg ln mh mi mj mk bi translated"><strong class="ak">接近</strong></h2><p id="38b1" class="pw-post-body-paragraph kw kx iq ky b kz ml jr lb lc mm ju le lf mn lh li lj mo ll lm ln mp lp lq lr ij bi translated">我处理交通数据集的经验有限，但我确实有大量关于交通量和交通状况的数据假设。从这些假设和我自己的探索性数据分析中，我形成了假设，并尽力去证明！</p></div><div class="ab cl mq mr hu ms" role="separator"><span class="mt bw bk mu mv mw"/><span class="mt bw bk mu mv mw"/><span class="mt bw bk mu mv"/></div><div class="ij ik il im in"><h1 id="36ba" class="mx lt iq bd lu my mz na lx nb nc nd ma jw ne jx md jz nf ka mg kc ng kd mj nh bi translated">1.美国节假日和纪念日对日交通量的影响</h1><p id="b6af" class="pw-post-body-paragraph kw kx iq ky b kz ml jr lb lc mm ju le lf mn lh li lj mo ll lm ln mp lp lq lr ij bi translated">当浏览美国交通数据时，我首先想到的是许多好莱坞电影，这些电影展示了假期期间家庭在长时间的交通堵塞中穿行的场景。因此，我决定测试一下我的假设，即日流量的激增主要是由假日季节造成的。</p><p id="61f7" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我导入了2015年美国假日日期，并创建了一个Tableau可视化，每个数据点表示当天观察到的交通量。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ni"><img src="../Images/6f0156b7daf8a421dd7ad3fb16652b41.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*cZAv_UOq-1hSPtqe5efW5g.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">作者图片</p></figure><p id="5ae7" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">画出平均线后，我观察到，从“Y”(橙色)点的分布来看，假日日期对交通量的影响并不显著。</p><p id="b555" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我决定扩大突出显示点的数量，以包括节假日前后的+/- 1天(例如，圣诞节—12月24日和12月26日)。尤其是因为游客们很有可能在假期的前一天或后一天走遍全国。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ni"><img src="../Images/a555a9bf64817632a24e39bd7e2a4bb9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*YZZLvjfsc9rRSo-7OQbEoA.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">作者图片</p></figure><p id="efb4" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">不幸的是，即使突出显示的点扩大了，我仍然没有观察到假日日期和交通流量之间的任何模式。事实上，与假日日期(51.47%)相比，非假日日期高于平均交通量(57.77%)的百分比更高。这进一步证明了我最初的假设是错误的。</p><h1 id="785b" class="mx lt iq bd lu my nj na lx nb nk nd ma jw nl jx md jz nm ka mg kc nn kd mj nh bi translated">2.时刻与日交通量的相关性</h1><p id="b71d" class="pw-post-body-paragraph kw kx iq ky b kz ml jr lb lc mm ju le lf mn lh li lj mo ll lm ln mp lp lq lr ij bi translated">对于我的第二个任务，我试图在<strong class="ky ir">找出在整个24小时周期中哪个时间段对日交通量影响最大。</strong></p><p id="0536" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我是通过一天中的时间流量与每日总流量之间的关联热图来做到这一点的。</p><pre class="kg kh ki kj gt no np nq nr aw ns bi"><span id="168e" class="ls lt iq np b gy nt nu l nv nw">plt.figure(figsize=(20,10))<br/>c= df2.corr()<br/>sns.heatmap(c,cmap='BrBG',annot=True)<br/>c</span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nx"><img src="../Images/2d404d586a1c23af09ed6f638c855a11.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*o3StNDuC49uTEK1FQCEvVw.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">作者图片</p></figure><h2 id="98a0" class="ls lt iq bd lu lv lw dn lx ly lz dp ma lf mb mc md lj me mf mg ln mh mi mj mk bi translated">相关值</h2><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi ny"><img src="../Images/77bcf41936512c961424c32a2ff68551.png" data-original-src="https://miro.medium.com/v2/resize:fit:438/format:webp/1*AzaUXV2J_wUUfEdP0-Z9MQ.png"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">作者图片</p></figure><p id="4252" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在对这些值进行排序后，我观察到下班后的高峰时间与早上上班前的交通相比，对整体每日交通有更大的影响，因为在最高的5个相关值中，4/5是1500-1900的时段。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nz"><img src="../Images/5ee87ac995f990fea4946858bce8f0c0.png" data-original-src="https://miro.medium.com/v2/resize:fit:432/format:webp/1*Ub3ZTKtggudkXmqEqquQPA.png"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">作者图片</p></figure><p id="7d2c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">然后，该表通常遵循上午高峰时间，随后是下午时段。我还观察到负相关值是从0000到0300没有流量模式的奇数周期。</p><h1 id="4345" class="mx lt iq bd lu my nj na lx nb nk nd ma jw nl jx md jz nm ka mg kc nn kd mj nh bi translated">3.交通站的几何位置与交通事故和死亡人数的关系</h1><p id="7aab" class="pw-post-body-paragraph kw kx iq ky b kz ml jr lb lc mm ju le lf mn lh li lj mo ll lm ln mp lp lq lr ij bi translated">在前两次分析后，我不禁想知道交通量是否代表了整个美国，因为肯定会有农村地区的数据收集可能是一个问题。收集交通数据有多种原因，如经济和环境原因。然而，在我看来，最大的原因必须是限制交通事故和这些事故造成的死亡。</p><p id="b33f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">因此，我的假设是，美国政府会在交通事故风险更大的州设立额外的交通站。</p><p id="2278" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">为了测试我的假设，我利用了<a class="ae kv" href="https://www.openstreetmap.org/about" rel="noopener ugc nofollow" target="_blank"> <strong class="ky ir"> OpenStreetMap </strong> </a>和来自国家公路交通安全管理局(NHTSA)<a class="ae kv" href="https://console.cloud.google.com/bigquery?p=bigquery-public-data&amp;d=nhtsa_traffic_fatalities&amp;page=dataset&amp;project=ace-axon-271215&amp;ws=!1m4!1m3!3m2!1sbigquery-public-data!2snhtsa_traffic_fatalities" rel="noopener ugc nofollow" target="_blank">2<strong class="ky ir">015交通事故数据集</strong> </a>的额外数据来源。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oa"><img src="../Images/5e2b1c2bc15b199b3fd670eb54a6c2ce.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Cmhl_2fezNruUleOQCkgzA.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">作者图片</p></figure><p id="a29e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在OpenStreetMap上绘制了交通站点后，我注意到有几个热点，并希望使用<strong class="ky ir"> KMeans clustering </strong>将地图分成几个聚类，以便进一步分析。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ob"><img src="../Images/00f0abbcc3c06153db7e499d0ad83b86.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*p_WngQterIqi-75o73tt9Q.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">作者图片</p></figure><p id="b160" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">使用肘方法发现了7个簇。此外，我还决定绘制一个热图，以更好地显示交通站的密度。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oa"><img src="../Images/17a21d409ca0f64c69faef0adc917c26.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*i_zB0ASDOo8Mykur_feaxw.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">作者图片</p></figure><p id="851c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">“热区”可以通过黄色和浅绿色色调从密度图中识别出来。有了这些信息，就可以将这些“热点”区域的状态与死亡率进行比较了。</p><h2 id="8dd3" class="ls lt iq bd lu lv lw dn lx ly lz dp ma lf mb mc md lj me mf mg ln mh mi mj mk bi translated">交通事故最多的10个州(2015年)</h2><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi oc"><img src="../Images/3fcfa4da5736ecab25e912f30ad5db55.png" data-original-src="https://miro.medium.com/v2/resize:fit:916/format:webp/1*np0wwzUK6S2nXJWleZSLZQ.png"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">作者图片</p></figure><h2 id="7e0c" class="ls lt iq bd lu lv lw dn lx ly lz dp ma lf mb mc md lj me mf mg ln mh mi mj mk bi translated">事故死亡率最高的10个州(2015年)</h2><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi od"><img src="../Images/51d34208765826f18c631102c68742aa.png" data-original-src="https://miro.medium.com/v2/resize:fit:908/format:webp/1*GaMKQ0wEiSH7iYafiUhN9w.png"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">作者图片</p></figure><p id="0fb9" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在分析了每个州的事故和死亡趋势后，我观察到，事故发生率高的州很可能在道路上安装了交通站。这证明了我的假设是正确的，州政府很可能会在事故多发路段设置更多的加油站。</p><h1 id="12d7" class="mx lt iq bd lu my nj na lx nb nk nd ma jw nl jx md jz nm ka mg kc nn kd mj nh bi translated">4 &amp; 5.加州交通量预测</h1><p id="939c" class="pw-post-body-paragraph kw kx iq ky b kz ml jr lb lc mm ju le lf mn lh li lj mo ll lm ln mp lp lq lr ij bi translated">在之前的分析中，我注意到加利福尼亚州安装的交通站数量最多，与第二多的州佐治亚州相比有显著差异。</p><p id="a8ae" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">因此，在我最后的分析中，我选择关注加利福尼亚州，并部署了几个机器学习模型来预测交通量。</p><h2 id="ea40" class="ls lt iq bd lu lv lw dn lx ly lz dp ma lf mb mc md lj me mf mg ln mh mi mj mk bi translated">模型结果</h2><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi oe"><img src="../Images/bdc91b668c4016a18fd386c0ff841c3b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1232/format:webp/1*qIanzWH5PfghVAbTPWqE2Q.png"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">作者图片</p></figure><p id="5757" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在尝试了不同的ML模型之后，线性回归模型仍然是产生最低RMSE结果的模型。在最终的测试数据集上部署它之后，我能够将基准RMSE降低大约。47875.341到最终的RMSE 25285.543，提高了近50%。</p><h2 id="d553" class="ls lt iq bd lu lv lw dn lx ly lz dp ma lf mb mc md lj me mf mg ln mh mi mj mk bi translated">特征重要性分数</h2><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi of"><img src="../Images/ac9230077c48f84228da99f943e2b00f.png" data-original-src="https://miro.medium.com/v2/resize:fit:790/format:webp/1*PB9IQDpjA9tzthgGDzkjAA.png"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">作者图片</p></figure><p id="cc9e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我观察到最高的三个分数属于与车道数相关的特征。这可能是因为高速公路等车道数较多的道路能够容纳不同等级、重量和容量的大量车辆。因此提高了交通流量。反之亦然，对于车道数少的道路。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi og"><img src="../Images/af2b90f3015f35a56be95c3092994491.png" data-original-src="https://miro.medium.com/v2/resize:fit:780/format:webp/1*T6VYXne_xGkOMo92pO5ehg.png"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">作者图片</p></figure><p id="caf4" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">从下面的分数中，我们可以观察到出行交通的方向流对交通量的影响最小。因此，我相信在这个预测模型中更重要的特征是基于道路的分类而不是交通流量。</p><h1 id="246f" class="mx lt iq bd lu my nj na lx nb nk nd ma jw nl jx md jz nm ka mg kc nn kd mj nh bi translated">未来作品</h1><p id="1ec1" class="pw-post-body-paragraph kw kx iq ky b kz ml jr lb lc mm ju le lf mn lh li lj mo ll lm ln mp lp lq lr ij bi translated">在数据科学项目中，数据建模很少有尽头。即使模型已经被批准部署，也总是有机会继续完善模型，要么使用更好的机器学习工具，要么使用新的数据源。</p><p id="39dd" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在这个项目中，我相信如果黑客马拉松给出的数据包括天气条件、光照条件、道路交叉口类型和道路施工等特征，最终的模型可以进一步改进。</p><p id="fcd0" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在这个项目的过程中，我偶然发现了NHTSA<a class="ae kv" href="https://cdan.nhtsa.gov/" rel="noopener ugc nofollow" target="_blank"><strong class="ky ir">的死亡分析报告系统</strong> </a>的一个综合数据集，记录了车辆碰撞事件。我觉得这个数据集将是一个很好的方式来补充我上面所做的分析，我很高兴能够继续揭示我脑海中关于交通数据的许多假设。</p><p id="26d6" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这个项目的代码可以在我的git repo <a class="ae kv" href="https://github.com/ngohweijie/us-traffic-patterns-2015" rel="noopener ugc nofollow" target="_blank"> <strong class="ky ir">这里</strong> </a>找到。</p><p id="b491" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><em class="oh">快乐编码！</em></p></div></div>    
</body>
</html>