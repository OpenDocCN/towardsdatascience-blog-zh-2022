<html>
<head>
<title>Finding the Intersection of Python Sets: A Practical Use Case</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">寻找Python集合的交集:一个实际用例</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/finding-the-intersection-of-python-sets-a-practical-use-case-f892fef5ff83#2022-04-28">https://towardsdatascience.com/finding-the-intersection-of-python-sets-a-practical-use-case-f892fef5ff83#2022-04-28</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="f7f1" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">如何使用Python的Set？购物篮分析的交集()方法</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/e10edbc8008f293ad7a102ba012cd5ff.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*KSOmnVBQ5tn2tTcEf3pS2w.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">图片由<a class="ae ky" href="https://pixabay.com/photos/vegetables-basket-purchasing-market-2179845/" rel="noopener ugc nofollow" target="_blank"> Pixabay </a>提供</p></figure><p id="632a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Python <code class="fe lv lw lx ly b">set</code>是一个无序的、不可改变的*和唯一的元素列表，这些元素放在花括号内，用逗号分隔。注意，当我们说它是‘不可改变的’时，我们的意思是一旦一个<code class="fe lv lw lx ly b">set</code>被创建，我们不能改变一个项目，但我们仍然可以删除项目或添加新项目。</p><p id="08fd" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">python最流行的<code class="fe lv lw lx ly b">set</code>操作之一是寻找两个或更多集合的交集，使用Python的<code class="fe lv lw lx ly b">set.intersection()</code>方法可以轻松完成。例如，假设您有三个集合，如下所示:</p><pre class="kj kk kl km gt lz ly ma mb aw mc bi"><span id="fd06" class="md me it ly b gy mf mg l mh mi">set1={'Storage','Phones','Binders','Accessories','Envelopes'}<br/>set2={'Phones','Envelopes','Binders','Copiers','Tables'}<br/>set3={'Paper','Supplies','Binders','Accessories','Envelopes'}</span></pre><p id="c425" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">要找到集合1和集合2的交集，您可以:</p><pre class="kj kk kl km gt lz ly ma mb aw mc bi"><span id="fa38" class="md me it ly b gy mf mg l mh mi">s = set1.intersection(set2)</span></pre><p id="b51f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">要找到这三个集合的交集，您可以执行以下任一操作(注意，在第二个代码片段中，我们通过用星号*操作符打开列表，将所有集合作为参数传递给<code class="fe lv lw lx ly b">set.intersection()</code>):</p><pre class="kj kk kl km gt lz ly ma mb aw mc bi"><span id="42f5" class="md me it ly b gy mf mg l mh mi">s = set1.intersection(set2,set3)<br/>or:<br/>s = set.intersection(*[set1,set2,set3])</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mj"><img src="../Images/f991c2d759244dfa499f03a292567d4c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*NPSXh8WupiYwqkbWyZmAAQ.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><p id="db49" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">够简单！现在让我们看看如何将<code class="fe lv lw lx ly b">set</code>交集应用到一个实际用例中，在这个用例中，我们需要使用<code class="fe lv lw lx ly b">set.intersection()</code>方法和python <code class="fe lv lw lx ly b">for</code>循环对一百多对集合进行交集运算。我们将使用流行的<a class="ae ky" href="https://public.tableau.com/en-us/s/resources?qt-overview_resources=1#qt-overview_resources" rel="noopener ugc nofollow" target="_blank"> Tableau样本超市数据集</a>并运行一个简单的购物篮分析，使用<code class="fe lv lw lx ly b">set.intersection()</code>方法找出哪些产品倾向于从超市一起购买！</p></div><div class="ab cl mk ml hx mm" role="separator"><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp"/></div><div class="im in io ip iq"><h1 id="e3e5" class="mr me it bd ms mt mu mv mw mx my mz na jz nb ka nc kc nd kd ne kf nf kg ng nh bi translated">一个实际的用例:购物篮分析</h1><h2 id="c364" class="md me it bd ms ni nj dn mw nk nl dp na li nm nn nc lm no np ne lq nq nr ng ns bi translated">关于数据</h2><p id="3a77" class="pw-post-body-paragraph kz la it lb b lc nt ju le lf nu jx lh li nv lk ll lm nw lo lp lq nx ls lt lu im bi translated">你可以从<a class="ae ky" href="https://public.tableau.com/en-us/s/resources?qt-overview_resources=1#qt-overview_resources" rel="noopener ugc nofollow" target="_blank">这里</a>下载超市数据样本。这个免费的公共数据集包含超市的产品、销售、顾客购买历史等信息。从2014年到2017年。我们有兴趣了解哪些产品子类别可能会一起购买。让我们首先将数据导入熊猫数据框架。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ny nz l"/></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oa"><img src="../Images/cbf394be054ceea6bcc5c72d2a56f348.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*VGAFeEPMKtlcHw32uZYbnw.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><p id="c6ca" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">对于每个产品子类别(例如，书架)，我们可以通过为该子类别创建一个<code class="fe lv lw lx ly b">set</code>来获得该产品子类别中所有唯一的订单id。然后，对于任何一对产品子类别(例如，书架和椅子)，我们可以将这两个集合相交，并查看两个集合中存在多少个订单id。这两个集合之间的重叠越多，就越能表明这两个产品子类别倾向于一起购买。</p><p id="910b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们将对所有可能的产品子类别对进行<code class="fe lv lw lx ly b">set</code>交集运算，并计算每对的重叠百分比。让我们看看它是如何工作的。</p><h2 id="7e79" class="md me it bd ms ni nj dn mw nk nl dp na li nm nn nc lm no np ne lq nq nr ng ns bi translated">创建所有可能的产品子类别对</h2><p id="0388" class="pw-post-body-paragraph kz la it lb b lc nt ju le lf nu jx lh li nv lk ll lm nw lo lp lq nx ls lt lu im bi translated">首先，让我们使用下面的代码创建一个所有可能的产品子类别对的列表。<code class="fe lv lw lx ly b"> itertools.combinations(iterable,r)</code>方法允许我们创建任意数量的产品子类别的组合，由参数<code class="fe lv lw lx ly b">r</code>指定。例如，如果您想要创建3个子类别的组合，您可以简单地将第2行中的<code class="fe lv lw lx ly b">r</code>的值更改为3。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ny nz l"/></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ob"><img src="../Images/d2f8f06d999db2526725c0bf4691430d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*OW1Cw4U4SVJYB4uqeiMtmA.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><p id="8e4c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">又快又简单！看起来我们总共有136个产品子类别对要分析。如果我们要查看3个子类别的组合，那么总共会有680种组合！</p><h2 id="0d11" class="md me it bd ms ni nj dn mw nk nl dp na li nm nn nc lm no np ne lq nq nr ng ns bi translated">创建集合和集合交集</h2><p id="dfc4" class="pw-post-body-paragraph kz la it lb b lc nt ju le lf nu jx lh li nv lk ll lm nw lo lp lq nx ls lt lu im bi translated">接下来，让我们使用python <code class="fe lv lw lx ly b">for</code>循环为每一对创建两个集合，并用<code class="fe lv lw lx ly b">set.intersection()</code>方法使这两个集合相交，如下面的代码所示。注意，在第6行中，我们首先使用<code class="fe lv lw lx ly b">set()</code>方法为每一对子类别创建了两个集合。然后，我们使用<code class="fe lv lw lx ly b">set.intersection(*[set1,set2])</code>来相交这两个集合，就像我在这篇文章前面展示的那样。</p><p id="90cd" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">对于<code class="fe lv lw lx ly b">for</code>循环中的每次迭代，我们将我们的结果——每对中唯一订单id的数量、每对中重叠订单id的数量以及订单对名称添加到我们在第1–3行创建的三个列表中。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ny nz l"/></div></figure><h2 id="a992" class="md me it bd ms ni nj dn mw nk nl dp na li nm nn nc lm no np ne lq nq nr ng ns bi translated">计算重叠百分比</h2><p id="0533" class="pw-post-body-paragraph kz la it lb b lc nt ju le lf nu jx lh li nv lk ll lm nw lo lp lq nx ls lt lu im bi translated">最后，让我们把所有东西放在一起，计算每对订单id的重叠百分比，看看哪些产品子类别倾向于一起购买。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ny nz l"/></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oc"><img src="../Images/e9c691d0677d0b3839d37f84e42bc25c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*78cnkPz0S97BUFfxx514kA.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><p id="7be1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这就对了。通过不到20行代码，我们能够完成各种产品组合的市场购物篮分析，并深入了解客户的购买模式和产品分组。您可以轻松地将这一概念和方法扩展到其他类似的用例:客户喜欢一起下载的应用程序、客户喜欢一起访问的网站、客户喜欢一起购买的书籍等。</p><p id="6281" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">感谢阅读。我希望你喜欢这篇文章，并且学到了一些关于python的新知识！</p></div><div class="ab cl mk ml hx mm" role="separator"><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp"/></div><div class="im in io ip iq"><h1 id="2e7f" class="mr me it bd ms mt mu mv mw mx my mz na jz nb ka nc kc nd kd ne kf nf kg ng nh bi translated">数据源:</h1><p id="38b9" class="pw-post-body-paragraph kz la it lb b lc nt ju le lf nu jx lh li nv lk ll lm nw lo lp lq nx ls lt lu im bi translated">本文中使用的数据集是一个免费的、公开的样本数据集，可以从<a class="ae ky" href="https://public.tableau.com/en-us/s/resources?qt-overview_resources=1#qt-overview_resources" rel="noopener ugc nofollow" target="_blank"> Tableau公共资源页面</a>下载。该数据是由<a class="ae ky" href="https://www.tableau.com/about/blog/2019/2/public-data-sets-102221" rel="noopener ugc nofollow" target="_blank"> Tableau </a>提供的样本数据集，可用于学习和教育目的。</p></div><div class="ab cl mk ml hx mm" role="separator"><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp"/></div><div class="im in io ip iq"><p id="d936" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">你可以通过这个<a class="ae ky" href="https://medium.com/@insightsbees/membership" rel="noopener">推荐链接</a>注册Medium会员(每月5美元)来获得我的作品和Medium的其他内容。通过这个链接注册，我将收到你的会员费的一部分，不需要你额外付费。谢谢大家！</p></div></div>    
</body>
</html>