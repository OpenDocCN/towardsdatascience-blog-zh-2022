<html>
<head>
<title>Create Beautiful Plots Easily with these R Packages</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用这些R包轻松创建美丽的情节</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/create-beautiful-plots-easily-with-these-r-packages-bf2f278d479c#2022-04-22">https://towardsdatascience.com/create-beautiful-plots-easily-with-these-r-packages-bf2f278d479c#2022-04-22</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="1c77" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">不费吹灰之力就能制作出优雅而专业的图表</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/a28d7f6848d698618c42b3ccc09dc45b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ehiekZmABolI9PLy-1lufg.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">图片作者。</p></figure><h1 id="380c" class="ky kz it bd la lb lc ld le lf lg lh li jz lj ka lk kc ll kd lm kf ln kg lo lp bi translated">目录</h1><ol class=""><li id="2044" class="lq lr it ls b lt lu lv lw lx ly lz ma mb mc md me mf mg mh bi translated"><a class="ae mi" href="#c68d" rel="noopener ugc nofollow">简介</a></li><li id="18fb" class="lq lr it ls b lt mj lv mk lx ml lz mm mb mn md me mf mg mh bi translated"><a class="ae mi" href="#98e5" rel="noopener ugc nofollow">包</a><br/>2.1<a class="ae mi" href="#71d6" rel="noopener ugc nofollow">gg map</a><br/>2.2<a class="ae mi" href="#1703" rel="noopener ugc nofollow">gg pubr</a><br/>2.3<a class="ae mi" href="#146b" rel="noopener ugc nofollow">拼凑</a> <br/> 2.4 <a class="ae mi" href="#8e1e" rel="noopener ugc nofollow"> ggforce </a></li><li id="4385" class="lq lr it ls b lt mj lv mk lx ml lz mm mb mn md me mf mg mh bi translated"><a class="ae mi" href="#ffe2" rel="noopener ugc nofollow">结论</a></li><li id="8eab" class="lq lr it ls b lt mj lv mk lx ml lz mm mb mn md me mf mg mh bi translated"><a class="ae mi" href="#614b" rel="noopener ugc nofollow">参考文献</a></li></ol><h1 id="c68d" class="ky kz it bd la lb lc ld le lf lg lh li jz lj ka lk kc ll kd lm kf ln kg lo lp bi translated">1.介绍</h1><p id="8ef8" class="pw-post-body-paragraph mo mp it ls b lt lu ju mq lv lw jx mr lx ms mt mu lz mv mw mx mb my mz na md im bi translated">是一个强大的数据可视化R包。</p><p id="ce00" class="pw-post-body-paragraph mo mp it ls b lt nf ju mq lv ng jx mr lx nh mt mu lz ni mw mx mb nj mz na md im bi translated">遵循<em class="nk">图形</em>的语法，它将绘图定义为<em class="nk">数据</em>和:</p><ul class=""><li id="0b48" class="lq lr it ls b lt nf lv ng lx nl lz nm mb nn md no mf mg mh bi translated"><em class="nk">审美</em>:颜色或大小等属性。</li><li id="dacf" class="lq lr it ls b lt mj lv mk lx ml lz mm mb mn md no mf mg mh bi translated"><em class="nk">几何图形</em>:线条或条形物体。</li></ul><p id="2daa" class="pw-post-body-paragraph mo mp it ls b lt nf ju mq lv ng jx mr lx nh mt mu lz ni mw mx mb nj mz na md im bi translated">该软件包以模块化的方式实现这些独立的组件，允许以优雅和灵活的方式创建几乎任何情节。</p><p id="4d05" class="pw-post-body-paragraph mo mp it ls b lt nf ju mq lv ng jx mr lx nh mt mu lz ni mw mx mb nj mz na md im bi translated">在本帖中，我们探索了四个R包，它们简化了基于<code class="fe nb nc nd ne b">ggplot2</code>的高级绘图的生成。特别是:</p><ul class=""><li id="d9f5" class="lq lr it ls b lt nf lv ng lx nl lz nm mb nn md no mf mg mh bi translated"><code class="fe nb nc nd ne b">ggmap</code>为空间图形添加地理背景。</li><li id="553c" class="lq lr it ls b lt mj lv mk lx ml lz mm mb mn md no mf mg mh bi translated"><code class="fe nb nc nd ne b">ggpubr</code>生成用于发布的图表。</li><li id="c2bf" class="lq lr it ls b lt mj lv mk lx ml lz mm mb mn md no mf mg mh bi translated"><code class="fe nb nc nd ne b">patchwork</code>将独立的情节组合成相同的图形。</li><li id="b6c6" class="lq lr it ls b lt mj lv mk lx ml lz mm mb mn md no mf mg mh bi translated"><code class="fe nb nc nd ne b">ggforce</code>提供定制<code class="fe nb nc nd ne b">ggplot2</code>图表和生成更专业的可视化的方法。</li></ul><p id="1ed0" class="pw-post-body-paragraph mo mp it ls b lt nf ju mq lv ng jx mr lx nh mt mu lz ni mw mx mb nj mz na md im bi translated">我们使用<em class="nk">加州房价</em>数据集，可以在Kaggle上免费获得(CC0⁴)。它包含了从1990年人口普查中得出的加州各区房价中值。</p><p id="6997" class="pw-post-body-paragraph mo mp it ls b lt nf ju mq lv ng jx mr lx nh mt mu lz ni mw mx mb nj mz na md im bi translated">我们从导入所需的包开始:</p><pre class="kj kk kl km gt np ne nq nr aw ns bi"><span id="135c" class="nt kz it ne b gy nu nv l nw nx">library(tidyverse)<br/>library(ggmap)<br/>library(ggforce)<br/>library(ggpubr)<br/>library(patchwork)</span><span id="21ea" class="nt kz it ne b gy ny nv l nw nx">library(concaveman) # needed for hull geometry</span></pre><p id="fd81" class="pw-post-body-paragraph mo mp it ls b lt nf ju mq lv ng jx mr lx nh mt mu lz ni mw mx mb nj mz na md im bi translated">它们可以通过在R控制台中键入<code class="fe nb nc nd ne b">install.packages("package_name")</code>来安装。</p><p id="b4ed" class="pw-post-body-paragraph mo mp it ls b lt nf ju mq lv ng jx mr lx nh mt mu lz ni mw mx mb nj mz na md im bi translated"><code class="fe nb nc nd ne b">tidyverse</code>包含不同的包。其中，我们将使用:</p><ul class=""><li id="fe16" class="lq lr it ls b lt nf lv ng lx nl lz nm mb nn md no mf mg mh bi translated"><code class="fe nb nc nd ne b">dplyr</code>和<code class="fe nb nc nd ne b">tibble</code>用于数据操作。</li><li id="5ecf" class="lq lr it ls b lt mj lv mk lx ml lz mm mb mn md no mf mg mh bi translated"><code class="fe nb nc nd ne b">readr</code>加载<em class="nk"> csv </em>文件。</li><li id="c551" class="lq lr it ls b lt mj lv mk lx ml lz mm mb mn md no mf mg mh bi translated"><code class="fe nb nc nd ne b">ggplot2</code>用于可视化。</li></ul><p id="27ee" class="pw-post-body-paragraph mo mp it ls b lt nf ju mq lv ng jx mr lx nh mt mu lz ni mw mx mb nj mz na md im bi translated">让我们导入数据集，并对价格和收入变量应用简单的宁滨:</p><pre class="kj kk kl km gt np ne nq nr aw ns bi"><span id="605b" class="nt kz it ne b gy nu nv l nw nx">df &lt;- <br/>  read_delim(file      = "C:/data/housing.csv",<br/>    col_types = "dddddddddf",<br/>    delim     = ",")</span><span id="0643" class="nt kz it ne b gy ny nv l nw nx"># Create bins for income and house price<br/>df &lt;- df %&gt;% <br/>  mutate(<br/>    price_bin  = as.factor(ntile(median_house_value, 4)),<br/>    income_bin = ntile(median_income, 4))</span></pre><h1 id="98e5" class="ky kz it bd la lb lc ld le lf lg lh li jz lj ka lk kc ll kd lm kf ln kg lo lp bi translated">2.包装</h1><h2 id="71d6" class="nt kz it bd la nz oa dn le ob oc dp li lx od oe lk lz of og lm mb oh oi lo oj bi translated">2.1 ggmap</h2><p id="a001" class="pw-post-body-paragraph mo mp it ls b lt lu ju mq lv lw jx mr lx ms mt mu lz mv mw mx mb my mz na md im bi translated"><em class="nk">作者:</em> <a class="ae mi" href="https://github.com/dkahle" rel="noopener ugc nofollow" target="_blank">大卫·卡勒</a>，<a class="ae mi" href="https://github.com/hadley" rel="noopener ugc nofollow" target="_blank">哈雷·威克姆</a></p><p id="4ff9" class="pw-post-body-paragraph mo mp it ls b lt nf ju mq lv ng jx mr lx nh mt mu lz ni mw mx mb nj mz na md im bi translated">当数据集包含空间信息时，观察地理环境中的变量会很有趣。</p><p id="b9f2" class="pw-post-body-paragraph mo mp it ls b lt nf ju mq lv ng jx mr lx nh mt mu lz ni mw mx mb nj mz na md im bi translated">我们首先用<code class="fe nb nc nd ne b">ggplot2</code>来表示<code class="fe nb nc nd ne b">latitude</code>和<code class="fe nb nc nd ne b">longitude</code>，并一瞥加州的形状:</p><pre class="kj kk kl km gt np ne nq nr aw ns bi"><span id="a0d3" class="nt kz it ne b gy nu nv l nw nx">df %&gt;%<br/>  ggplot(aes(x = longitude, y = latitude)) +<br/>  geom_point()</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ok"><img src="../Images/93c9244d687163333d6785e121eeaaa2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Y0yxkNGXdfaUqB-voQegbA.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">图片作者。</p></figure><p id="1424" class="pw-post-body-paragraph mo mp it ls b lt nf ju mq lv ng jx mr lx nh mt mu lz ni mw mx mb nj mz na md im bi translated"><code class="fe nb nc nd ne b">ggmap</code> ⁵使用了与<code class="fe nb nc nd ne b">ggplot2</code>相同的分层语法来给情节添加地理背景。它允许轻松地包含静态地图，例如来自<em class="nk">谷歌地图</em>、<em class="nk"> OpenStreetMap </em>或<em class="nk"> Stamen地图</em>的静态地图。</p><p id="4c4c" class="pw-post-body-paragraph mo mp it ls b lt nf ju mq lv ng jx mr lx nh mt mu lz ni mw mx mb nj mz na md im bi translated">我们只需要将<code class="fe nb nc nd ne b">Latitude</code>和<code class="fe nb nc nd ne b">Longitude</code>信息传递给<code class="fe nb nc nd ne b">qmplot</code> ⁶函数，如下所示</p><pre class="kj kk kl km gt np ne nq nr aw ns bi"><span id="7f35" class="nt kz it ne b gy nu nv l nw nx">df %&gt;%<br/>  qmplot(x    = longitude, <br/>         y    = latitude, <br/>         data = .)</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ol"><img src="../Images/660d8841a470b2248f6bf9b9682c4a9b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*UPXrzE3ivlg8PrafRyyJxg.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">图片作者。</p></figure><p id="3e4b" class="pw-post-body-paragraph mo mp it ls b lt nf ju mq lv ng jx mr lx nh mt mu lz ni mw mx mb nj mz na md im bi translated">我们可以根据房价应用颜色渐变:</p><pre class="kj kk kl km gt np ne nq nr aw ns bi"><span id="3463" class="nt kz it ne b gy nu nv l nw nx">df %&gt;% <br/>  qmplot(x      = longitude, <br/>         y      = latitude, <br/>         data   = ., <br/>         colour = median_house_value, <br/>         legend = "topright") +<br/>  scale_color_gradient("House Prices", <br/>                       low  = "blue",<br/>                       high = "red")</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi om"><img src="../Images/c3ca124a06da5b57e9bebc02cb44e45d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*I0wAqTvpjEmIlBAWTmadDQ.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">图片作者。</p></figure><p id="8ffd" class="pw-post-body-paragraph mo mp it ls b lt nf ju mq lv ng jx mr lx nh mt mu lz ni mw mx mb nj mz na md im bi translated">我们可以过滤我们的坐标来探索特定的区域。比如我们可以观察萨克拉门托周边的房价(纬度:38.575764，经度:-121.478851):</p><pre class="kj kk kl km gt np ne nq nr aw ns bi"><span id="86a7" class="nt kz it ne b gy nu nv l nw nx">df %&gt;% <br/>  filter(between(longitude, -121.6, -121.3), <br/>         between(latitude, 38.4, 38.7)) %&gt;%<br/>  qmplot(x      = longitude, <br/>         y      = latitude, <br/>         data   = ., <br/>         colour = median_house_value, <br/>         size   = I(7), <br/>         alpha  = I(0.8), <br/>         legend = "topright") +<br/>  scale_color_gradient("House Prices", <br/>                       low  = "blue", <br/>                       high = "red")</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi on"><img src="../Images/b8626157b5697a33be2a4990125acc38.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*G8v9CKLQFr7cavCZ-L265Q.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">图片作者。</p></figure><p id="96ee" class="pw-post-body-paragraph mo mp it ls b lt nf ju mq lv ng jx mr lx nh mt mu lz ni mw mx mb nj mz na md im bi translated">更多信息和例子可以在here⁷.找到</p><h2 id="1703" class="nt kz it bd la nz oa dn le ob oc dp li lx od oe lk lz of og lm mb oh oi lo oj bi translated">2.2 ggpubr</h2><p id="e444" class="pw-post-body-paragraph mo mp it ls b lt lu ju mq lv lw jx mr lx ms mt mu lz mv mw mx mb my mz na md im bi translated"><em class="nk">作者:</em> <a class="ae mi" href="https://github.com/kassambara" rel="noopener ugc nofollow" target="_blank"> <em class="nk">阿尔布卡德尔</em> </a></p><p id="61bb" class="pw-post-body-paragraph mo mp it ls b lt nf ju mq lv ng jx mr lx nh mt mu lz ni mw mx mb nj mz na md im bi translated">基本ggplots的定制和格式化需要更深入的语法知识和更高级的R技能。</p><p id="dc80" class="pw-post-body-paragraph mo mp it ls b lt nf ju mq lv ng jx mr lx nh mt mu lz ni mw mx mb nj mz na md im bi translated">⁸套餐有助于创造美丽的情节。它提供了易于使用的功能，为研究人员和R从业人员生成可供发布的图。简而言之，它是一个围绕着<code class="fe nb nc nd ne b">ggplot2</code>的<em class="nk">包装器</em>，处理大部分复杂的情节定制。</p><p id="70af" class="pw-post-body-paragraph mo mp it ls b lt nf ju mq lv ng jx mr lx nh mt mu lz ni mw mx mb nj mz na md im bi translated">例如，我们可以用一行代码生成一个格式良好的箱线图:</p><pre class="kj kk kl km gt np ne nq nr aw ns bi"><span id="a818" class="nt kz it ne b gy nu nv l nw nx">df %&gt;%<br/> ggboxplot(x       = "income_bin", <br/>           y       = "median_house_value",<br/>           fill    = "income_bin",<br/>           palette = c("#2e00fa", "#a000bc", "#ca0086", "#e40058"))</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oo"><img src="../Images/b0fa8adbc67f1df5143cdbdfaa923361.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ivC9XzMJv7B51dZv4xjjlA.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">图片作者。</p></figure><p id="b5f6" class="pw-post-body-paragraph mo mp it ls b lt nf ju mq lv ng jx mr lx nh mt mu lz ni mw mx mb nj mz na md im bi translated">该软件包允许向图表添加p值和显著性水平。在这个例子中，我们使用<code class="fe nb nc nd ne b">ggviolin</code> ⁹创建了一个小提琴图，并添加了与<code class="fe nb nc nd ne b">stat_compare_means</code> ⁰:的平均值比较</p><pre class="kj kk kl km gt np ne nq nr aw ns bi"><span id="705b" class="nt kz it ne b gy nu nv l nw nx"># Comparison between the Income groups<br/>bin_comparisons &lt;- list( c("1", "2"), <br/>                         c("2", "3"), <br/>                         c("3", "4"),<br/>                         c("1", "3"),<br/>                         c("2", "4"),<br/>                         c("1", "4"))</span><span id="9752" class="nt kz it ne b gy ny nv l nw nx">df %&gt;%<br/> ggviolin(x          = "income_bin", <br/>          y          = "median_house_value", <br/>          title      = "Violin Plot",<br/>          xlab       = "Income Levels",<br/>          ylab       = "House Prices",<br/>          fill       = "income_bin",<br/>          alpha      = 0.8,<br/>          palette    = c("#2e00fa","#a000bc","#ca0086","#e40058"),<br/>          add        = "boxplot", <br/>          add.params = list(fill = "white")) +<br/>  stat_compare_means(comparisons = bin_comparisons, <br/>                     label       = "p.signif") +<br/>  stat_compare_means(label.y = 9000)</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oo"><img src="../Images/8d694bcfa4ab12be6d8b28cc5a22b3cf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*62yhBFdel23s-8fYMbCaCQ.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">Violin图类似于box图，只是它们也显示数据的核心概率密度。图片作者。</p></figure><p id="fbb9" class="pw-post-body-paragraph mo mp it ls b lt nf ju mq lv ng jx mr lx nh mt mu lz ni mw mx mb nj mz na md im bi translated"><code class="fe nb nc nd ne b">ggpubr</code>提供几个函数，可轻松生成格式良好的图。密度图和直方图如下所示:</p><pre class="kj kk kl km gt np ne nq nr aw ns bi"><span id="842d" class="nt kz it ne b gy nu nv l nw nx">df %&gt;%<br/>  ggdensity(x       = "median_income",<br/>            add     = "mean", <br/>            rug     = TRUE,<br/>            color   = "price_bin", <br/>            fill    = "price_bin",<br/>            title   = "Density plot",<br/>            xlab    = "Income",<br/>            ylab    = "Density",<br/>            palette = c("#2e00fa", "#a000bc", "#ca0086", "#e40058")<br/>   )</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oo"><img src="../Images/816da58cf98c7660816a6d68ba427a3a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qU-5hCMYYpalK-mxJyiFqg.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">图片作者。</p></figure><pre class="kj kk kl km gt np ne nq nr aw ns bi"><span id="6592" class="nt kz it ne b gy nu nv l nw nx">df %&gt;%<br/>  gghistogram(x       = "median_income",<br/>              add     = "mean", <br/>              rug     = TRUE,<br/>              color   = "price_bin", <br/>              fill    = "price_bin",<br/>              title   = "Histogram plot",<br/>              xlab    = "Income",<br/>              ylab    = "Count",<br/>              palette = c("#2e00fa","#a000bc","#ca0086","#e40058")<br/>   )</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oo"><img src="../Images/a8353c017c6cff328d0b0c904ab11798.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*nHcMw7QObqFJcj43I9Ariw.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">图片作者。</p></figure><p id="e1b8" class="pw-post-body-paragraph mo mp it ls b lt nf ju mq lv ng jx mr lx nh mt mu lz ni mw mx mb nj mz na md im bi translated">我们甚至可以在一个页面上混合多个图，甚至可以通过<code class="fe nb nc nd ne b">ggarrange</code>功能创建一个独特的图例:</p><pre class="kj kk kl km gt np ne nq nr aw ns bi"><span id="41ec" class="nt kz it ne b gy nu nv l nw nx">p1 &lt;- df %&gt;%<br/>  ggdensity(x       = "median_income", <br/>            add     = "mean", <br/>            rug     = TRUE,<br/>            color   = "price_bin", <br/>            fill    = "price_bin",<br/>            title   = "Density plot",<br/>            xlab    = "Income",<br/>            ylab    = "Density",<br/>            palette =  c("#2e00fa","#a000bc","#ca0086","#e40058")<br/>   )</span><span id="8db8" class="nt kz it ne b gy ny nv l nw nx">p2 &lt;- df %&gt;%<br/>  gghistogram(x       = "median_income",<br/>              add     = "mean", <br/>              rug     = TRUE,<br/>              color   = "price_bin", <br/>              fill    = "price_bin",<br/>              title   = "Histogram plot",<br/>              xlab    = "Income",<br/>              ylab    = "Count",<br/>              palette = c("#2e00fa","#a000bc","#ca0086","#e40058")<br/>   )</span><span id="91b1" class="nt kz it ne b gy ny nv l nw nx">ggarrange(p1, <br/>          p2, <br/>          labels = c("A", "B"),<br/>          ncol   = 2<br/>   )</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oo"><img src="../Images/9d511d280591ddf927b3d5652bed54b5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*px4hB__qSXbrmje8dATKWg.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">图片作者。</p></figure><p id="888a" class="pw-post-body-paragraph mo mp it ls b lt nf ju mq lv ng jx mr lx nh mt mu lz ni mw mx mb nj mz na md im bi translated">官方文档包含更多信息和示例。</p><h2 id="146b" class="nt kz it bd la nz oa dn le ob oc dp li lx od oe lk lz of og lm mb oh oi lo oj bi translated">2.3拼接</h2><p id="7045" class="pw-post-body-paragraph mo mp it ls b lt lu ju mq lv lw jx mr lx ms mt mu lz mv mw mx mb my mz na md im bi translated"><em class="nk">作者:</em> <a class="ae mi" href="https://github.com/thomasp85" rel="noopener ugc nofollow" target="_blank"> <em class="nk">托马斯·林</em> </a></p><p id="b4c4" class="pw-post-body-paragraph mo mp it ls b lt nf ju mq lv ng jx mr lx nh mt mu lz ni mw mx mb nj mz na md im bi translated"><code class="fe nb nc nd ne b">patchwork</code>允许轻松地将单独的<code class="fe nb nc nd ne b">ggplot2</code>可视化组合到同一图形中。它还提供了数学运算符，可以更直观地操纵图形。</p><p id="9b3e" class="pw-post-body-paragraph mo mp it ls b lt nf ju mq lv ng jx mr lx nh mt mu lz ni mw mx mb nj mz na md im bi translated">与前面的<code class="fe nb nc nd ne b">ggarrange</code>示例类似，我们可以在同一个图形上混合两个图，如下所示:</p><pre class="kj kk kl km gt np ne nq nr aw ns bi"><span id="f44b" class="nt kz it ne b gy nu nv l nw nx">p1 + p2</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oo"><img src="../Images/7b1eddd85e9179669d0c2abfbc9b1df9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*CNOKLDlyiCkQfcv_xhW96A.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">图片作者。</p></figure><p id="598e" class="pw-post-body-paragraph mo mp it ls b lt nf ju mq lv ng jx mr lx nh mt mu lz ni mw mx mb nj mz na md im bi translated">该软件包的最大优势在于直观和简单的API的完美结合，以及创建任意复杂的绘图组合的能力。以下是一些例子:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi op"><img src="../Images/ef7433acd707cfd74912b1c447c7e335.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*P3EYFnHrL3yYsBXkQqjvCA.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">图片作者。</p></figure><p id="0559" class="pw-post-body-paragraph mo mp it ls b lt nf ju mq lv ng jx mr lx nh mt mu lz ni mw mx mb nj mz na md im bi translated">更多信息和例子可以在这里找到。</p><h2 id="8e1e" class="nt kz it bd la nz oa dn le ob oc dp li lx od oe lk lz of og lm mb oh oi lo oj bi translated">2.4 ggforce</h2><p id="6d78" class="pw-post-body-paragraph mo mp it ls b lt lu ju mq lv lw jx mr lx ms mt mu lz mv mw mx mb my mz na md im bi translated"><em class="nk">作者:</em> <a class="ae mi" href="https://github.com/thomasp85" rel="noopener ugc nofollow" target="_blank"> <em class="nk">托马斯·林</em> </a></p><p id="239c" class="pw-post-body-paragraph mo mp it ls b lt nf ju mq lv ng jx mr lx nh mt mu lz ni mw mx mb nj mz na md im bi translated"><code class="fe nb nc nd ne b">ggforce</code>延伸<code class="fe nb nc nd ne b">ggplot2</code>为构成专门地块提供设施。</p><p id="8795" class="pw-post-body-paragraph mo mp it ls b lt nf ju mq lv ng jx mr lx nh mt mu lz ni mw mx mb nj mz na md im bi translated">在分享一些示例之前，我们创建了一个新的列，<em class="nk">大约</em>标识了一些著名的地点及其周边地区:</p><ul class=""><li id="21d0" class="lq lr it ls b lt nf lv ng lx nl lz nm mb nn md no mf mg mh bi translated">洛杉矶(纬度:34.052235，经度:118.243683)</li><li id="327b" class="lq lr it ls b lt mj lv mk lx ml lz mm mb mn md no mf mg mh bi translated">圣何塞(纬度:37.335480，经度:121.893028)</li><li id="7758" class="lq lr it ls b lt mj lv mk lx ml lz mm mb mn md no mf mg mh bi translated">旧金山(纬度:37.773972，经度:122.431297)</li><li id="abd8" class="lq lr it ls b lt mj lv mk lx ml lz mm mb mn md no mf mg mh bi translated">萨克拉门托(纬度:38.575764，经度:121.478851)</li><li id="0660" class="lq lr it ls b lt mj lv mk lx ml lz mm mb mn md no mf mg mh bi translated">圣地亚哥(纬度:32.715736，-117.161087)</li><li id="f987" class="lq lr it ls b lt mj lv mk lx ml lz mm mb mn md no mf mg mh bi translated">弗雷斯诺(纬度:36.746841，经度:119.772591)</li><li id="e1f7" class="lq lr it ls b lt mj lv mk lx ml lz mm mb mn md no mf mg mh bi translated">斯托克顿(纬度:37.961632，经度:121.275604)</li></ul><pre class="kj kk kl km gt np ne nq nr aw ns bi"><span id="32e3" class="nt kz it ne b gy nu nv l nw nx">df &lt;- df %&gt;% <br/>  mutate(area = case_when(<br/>    between(longitude, -118.54, -117.94) <br/>     &amp; between(latitude, 33.75, 34.35) ~ 'Los Angeles',<br/>    between(longitude, -122.19, -121.59) <br/>     &amp; between(latitude, 37.03, 37.63) ~ 'San Jose',<br/>    between(longitude, -122.73, -122.13) <br/>     &amp; between(latitude, 37.47, 38.07) ~ 'San Francisco',<br/>    between(longitude, -121.77, -121.17) <br/>     &amp; between(latitude, 38.27, 38.87) ~ 'Sacramento',<br/>    between(longitude, -117.46, -116.86) <br/>     &amp; between(latitude, 32.41, 33.01) ~ 'San Diego',<br/>    between(longitude, -120.07, -119.47) <br/>     &amp; between(latitude, 36.44, 37.04) ~ 'Fresno',<br/>    between(longitude, -121.57, -120.97) <br/>     &amp; between(latitude, 37.66, 38.26) ~ 'Stockton',<br/>    TRUE ~ 'Other areas'<br/>    )<br/>  ) %&gt;%<br/>  mutate_if(is.character,as.factor)</span></pre><p id="985f" class="pw-post-body-paragraph mo mp it ls b lt nf ju mq lv ng jx mr lx nh mt mu lz ni mw mx mb nj mz na md im bi translated">我们观察结果:</p><pre class="kj kk kl km gt np ne nq nr aw ns bi"><span id="579d" class="nt kz it ne b gy nu nv l nw nx">df %&gt;%<br/>  filter(area != "Other areas") %&gt;%<br/>  ggplot(aes( x = longitude, y = latitude)) +<br/>  geom_point()</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oq"><img src="../Images/a2727b681506c9bb16cd2514b9f1cd2a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2Ep9iY5it-ARt9k-S216EQ.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">图片作者。</p></figure><p id="b88c" class="pw-post-body-paragraph mo mp it ls b lt nf ju mq lv ng jx mr lx nh mt mu lz ni mw mx mb nj mz na md im bi translated"><code class="fe nb nc nd ne b">ggforce</code>提供不同的功能来高亮显示数据集。人们可以围绕具有不同形状的数据组画出轮廓:</p><ul class=""><li id="5dd3" class="lq lr it ls b lt nf lv ng lx nl lz nm mb nn md no mf mg mh bi translated">圆圈:<code class="fe nb nc nd ne b">geom_mark_circle()</code></li><li id="5301" class="lq lr it ls b lt mj lv mk lx ml lz mm mb mn md no mf mg mh bi translated">省略号:<code class="fe nb nc nd ne b">geom_mark_ellipse()</code></li><li id="237b" class="lq lr it ls b lt mj lv mk lx ml lz mm mb mn md no mf mg mh bi translated">矩形:<code class="fe nb nc nd ne b">geom_mark_rect()</code></li><li id="02ab" class="lq lr it ls b lt mj lv mk lx ml lz mm mb mn md no mf mg mh bi translated">外壳(凸闭包):<code class="fe nb nc nd ne b">geom_mark_hull()</code></li></ul><p id="c1dd" class="pw-post-body-paragraph mo mp it ls b lt nf ju mq lv ng jx mr lx nh mt mu lz ni mw mx mb nj mz na md im bi translated">我们可以试着在地理区域周围画一个矩形:</p><pre class="kj kk kl km gt np ne nq nr aw ns bi"><span id="2df4" class="nt kz it ne b gy nu nv l nw nx">df %&gt;%<br/>  filter(area != "Other areas") %&gt;%<br/>  ggplot(aes(x = longitude, y = latitude, color = area)) +<br/>  geom_mark_rect(aes(fill = area), concavity=10) +<br/>  geom_point()</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oq"><img src="../Images/0be47f737f983ef0d7eb22cfbf064d06.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*I-4Kg2T7n9fyjxNQcBcs7Q.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">图片作者。</p></figure><p id="cafc" class="pw-post-body-paragraph mo mp it ls b lt nf ju mq lv ng jx mr lx nh mt mu lz ni mw mx mb nj mz na md im bi translated">我们可以尝试用<code class="fe nb nc nd ne b">geom_mark_hull()</code>画更复杂的多边形。可以通过<code class="fe nb nc nd ne b">concavity</code>参数调整最终船体的凹度:</p><pre class="kj kk kl km gt np ne nq nr aw ns bi"><span id="13bc" class="nt kz it ne b gy nu nv l nw nx">df %&gt;%<br/>  filter(area != "Other areas") %&gt;%<br/>  ggplot(aes(x = longitude, y = latitude, color = area)) +<br/>  geom_mark_hull(aes(fill = area), concavity=10) +<br/>  geom_point()</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oq"><img src="../Images/855526d8d7e0d8ec448655a1f042e627.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*aib_q3TjZ76PKT78ydGZCg.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">图片作者。</p></figure><p id="7ee9" class="pw-post-body-paragraph mo mp it ls b lt nf ju mq lv ng jx mr lx nh mt mu lz ni mw mx mb nj mz na md im bi translated">可以向图上的组添加标签:</p><pre class="kj kk kl km gt np ne nq nr aw ns bi"><span id="21e1" class="nt kz it ne b gy nu nv l nw nx">df %&gt;%<br/>  filter(area != "Other areas") %&gt;%<br/>  ggplot(aes(x = longitude, y = latitude, color = area)) +<br/>  geom_mark_hull(aes(fill = area, label = area), concavity = 10) +<br/>  geom_point()</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oq"><img src="../Images/e00152013e56f7aad582225d713f1c03.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*SeN24R7fMPJUrhHXHXgAvQ.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">图片作者。</p></figure><p id="cb35" class="pw-post-body-paragraph mo mp it ls b lt nf ju mq lv ng jx mr lx nh mt mu lz ni mw mx mb nj mz na md im bi translated">我们也可以将图与来自<code class="fe nb nc nd ne b">ggmap</code>的地理信息结合起来，如下所示:</p><pre class="kj kk kl km gt np ne nq nr aw ns bi"><span id="8ac7" class="nt kz it ne b gy nu nv l nw nx">df %&gt;%<br/>  filter(area != "Other areas") %&gt;%<br/>  qmplot(x = longitude, y = latitude, data = .) +<br/>  geom_mark_hull(aes(fill  = area, label = area), concavity = 10) +<br/>  geom_point()</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oq"><img src="../Images/1f03f8e4aab06170b9a520ef95a4b36a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*k36NPG8i_0wvMJarBkyp9A.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">图片作者。</p></figure><p id="cba4" class="pw-post-body-paragraph mo mp it ls b lt nf ju mq lv ng jx mr lx nh mt mu lz ni mw mx mb nj mz na md im bi translated">更多信息和进一步的例子可以在这里找到⁵.</p><h1 id="ffe2" class="ky kz it bd la lb lc ld le lf lg lh li jz lj ka lk kc ll kd lm kf ln kg lo lp bi translated">3.结论</h1><p id="1940" class="pw-post-body-paragraph mo mp it ls b lt lu ju mq lv lw jx mr lx ms mt mu lz mv mw mx mb my mz na md im bi translated">r是一个强大的数据分析和可视化工具。</p><p id="9de7" class="pw-post-body-paragraph mo mp it ls b lt nf ju mq lv ng jx mr lx nh mt mu lz ni mw mx mb nj mz na md im bi translated">在这篇文章中，我们的目标是<strong class="ls iu">而不是</strong>分享完整的数据分析工作或机器学习问题的解决方案。相反，我们想探索一些能够简化创建漂亮可视化的任务的包。</p><p id="7600" class="pw-post-body-paragraph mo mp it ls b lt nf ju mq lv ng jx mr lx nh mt mu lz ni mw mx mb nj mz na md im bi translated">参考文档提供了更多示例和信息。</p><p id="08ab" class="pw-post-body-paragraph mo mp it ls b lt nf ju mq lv ng jx mr lx nh mt mu lz ni mw mx mb nj mz na md im bi translated">关于图形的<em class="nk">语法和<code class="fe nb nc nd ne b">ggplot2</code>背后的概念的更多见解，我们推荐Hadley Wickham的“<em class="nk">gg plot 2——数据分析的优雅图形</em>”。</em></p><h1 id="614b" class="ky kz it bd la lb lc ld le lf lg lh li jz lj ka lk kc ll kd lm kf ln kg lo lp bi translated">4.参考</h1><p id="42a2" class="pw-post-body-paragraph mo mp it ls b lt lu ju mq lv lw jx mr lx ms mt mu lz mv mw mx mb my mz na md im bi translated">[1] Hadley Wickham，“<em class="nk"> ggplot2 —用于数据分析的优雅图形</em>”，Springer，2009年(<a class="ae mi" href="https://ggplot2-book.org/" rel="noopener ugc nofollow" target="_blank">公共链接</a>)。</p><p id="9073" class="pw-post-body-paragraph mo mp it ls b lt nf ju mq lv ng jx mr lx nh mt mu lz ni mw mx mb nj mz na md im bi translated">[2]利兰·威尔金森，“<em class="nk">图形的语法</em>”，斯普林格，2005。</p><p id="a692" class="pw-post-body-paragraph mo mp it ls b lt nf ju mq lv ng jx mr lx nh mt mu lz ni mw mx mb nj mz na md im bi translated">[3]<a class="ae mi" href="https://www.kaggle.com/datasets/camnugent/california-housing-prices" rel="noopener ugc nofollow" target="_blank">https://www . ka ggle . com/datasets/camnugent/California-housing-prices</a></p><p id="ec60" class="pw-post-body-paragraph mo mp it ls b lt nf ju mq lv ng jx mr lx nh mt mu lz ni mw mx mb nj mz na md im bi translated"><a class="ae mi" href="https://creativecommons.org/publicdomain/zero/1.0/" rel="noopener ugc nofollow" target="_blank">https://creativecommons.org/publicdomain/zero/1.0/</a></p><p id="1b7c" class="pw-post-body-paragraph mo mp it ls b lt nf ju mq lv ng jx mr lx nh mt mu lz ni mw mx mb nj mz na md im bi translated"><a class="ae mi" href="https://cran.r-project.org/package=ggmap" rel="noopener ugc nofollow" target="_blank">https://cran.r-project.org/package=ggmap</a></p><p id="76d8" class="pw-post-body-paragraph mo mp it ls b lt nf ju mq lv ng jx mr lx nh mt mu lz ni mw mx mb nj mz na md im bi translated">[6]<a class="ae mi" href="https://www.rdocumentation.org/packages/ggmap/versions/3.0.0/topics/qmplot" rel="noopener ugc nofollow" target="_blank">https://www . rdocumentation . org/packages/gg map/versions/3 . 0 . 0/topics/QM plot</a></p><p id="77cb" class="pw-post-body-paragraph mo mp it ls b lt nf ju mq lv ng jx mr lx nh mt mu lz ni mw mx mb nj mz na md im bi translated">[7] David Kahle和Hadley Wickham，<em class="nk"> ggmap:用ggplot2 </em>实现空间可视化，《R Journal》第5/1卷，2013年6月，<a class="ae mi" href="https://journal.r-project.org/archive/2013-1/kahle-wickham.pdf" rel="noopener ugc nofollow" target="_blank">链接</a>。</p><p id="c520" class="pw-post-body-paragraph mo mp it ls b lt nf ju mq lv ng jx mr lx nh mt mu lz ni mw mx mb nj mz na md im bi translated"><a class="ae mi" href="https://cran.r-project.org/package=ggpubr" rel="noopener ugc nofollow" target="_blank">https://cran.r-project.org/package=ggpubr</a></p><p id="5e8d" class="pw-post-body-paragraph mo mp it ls b lt nf ju mq lv ng jx mr lx nh mt mu lz ni mw mx mb nj mz na md im bi translated">[9]<a class="ae mi" href="https://www.rdocumentation.org/packages/ggpubr/versions/0.4.0/topics/ggviolin" rel="noopener ugc nofollow" target="_blank">https://www . rdocumentation . org/packages/gg pubr/versions/0 . 4 . 0/topics/gg violin</a></p><p id="e292" class="pw-post-body-paragraph mo mp it ls b lt nf ju mq lv ng jx mr lx nh mt mu lz ni mw mx mb nj mz na md im bi translated">[10]<a class="ae mi" href="https://www.rdocumentation.org/packages/ggpubr/versions/0.4.0/topics/stat_compare_means" rel="noopener ugc nofollow" target="_blank">https://www . rdocumentation . org/packages/gg pubr/versions/0 . 4 . 0/topics/stat _ compare _ means</a></p><p id="6e9c" class="pw-post-body-paragraph mo mp it ls b lt nf ju mq lv ng jx mr lx nh mt mu lz ni mw mx mb nj mz na md im bi translated"><a class="ae mi" href="https://rpkgs.datanovia.com/ggpubr/" rel="noopener ugc nofollow" target="_blank">https://rpkgs.datanovia.com/ggpubr/</a></p><p id="ec22" class="pw-post-body-paragraph mo mp it ls b lt nf ju mq lv ng jx mr lx nh mt mu lz ni mw mx mb nj mz na md im bi translated"><a class="ae mi" href="https://cran.r-project.org/package=patchwork" rel="noopener ugc nofollow" target="_blank">https://cran.r-project.org/package=patchwork</a></p><p id="6835" class="pw-post-body-paragraph mo mp it ls b lt nf ju mq lv ng jx mr lx nh mt mu lz ni mw mx mb nj mz na md im bi translated">[13]<a class="ae mi" href="https://patchwork.data-imaginist.com/articles/guides/assembly.html" rel="noopener ugc nofollow" target="_blank">https://patchwork . data-imaginist . com/articles/guides/assembly . html</a></p><p id="6b7d" class="pw-post-body-paragraph mo mp it ls b lt nf ju mq lv ng jx mr lx nh mt mu lz ni mw mx mb nj mz na md im bi translated"><a class="ae mi" href="https://cran.r-project.org/package=ggforce" rel="noopener ugc nofollow" target="_blank">https://cran.r-project.org/package=ggforce</a></p><p id="f3c5" class="pw-post-body-paragraph mo mp it ls b lt nf ju mq lv ng jx mr lx nh mt mu lz ni mw mx mb nj mz na md im bi translated">[15]<a class="ae mi" href="https://ggforce.data-imaginist.com/" rel="noopener ugc nofollow" target="_blank">https://ggforce.data-imaginist.com/</a></p></div></div>    
</body>
</html>