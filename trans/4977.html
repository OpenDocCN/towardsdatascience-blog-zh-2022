<html>
<head>
<title>Computing Assortativity Coefficients on a Social Network Dataset</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在社交网络数据集上计算分类系数</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/computing-assortativity-coefficients-on-a-social-network-dataset-7f65796feb70#2022-11-05">https://towardsdatascience.com/computing-assortativity-coefficients-on-a-social-network-dataset-7f65796feb70#2022-11-05</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="5fcf" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">分类性有助于分析网络中的连接模式。让我们用它来确认人们是否倾向于与相似的人联系。</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/958e3ca0c6dd31a44661db0fb11179e5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*cyMnh-GO6xJ-z9fm"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">照片由<a class="ae kv" href="https://unsplash.com/@fabioha?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">法比奥</a>在<a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</p></figure></div><div class="ab cl kw kx hu ky" role="separator"><span class="kz bw bk la lb lc"/><span class="kz bw bk la lb lc"/><span class="kz bw bk la lb"/></div><div class="ij ik il im in"><p id="90d0" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">在本文中，我们将使用一些脸书数据来探索网络分类性(也称为同向性)的概念，我们将其定义为节点连接到其相似节点的趋势。</p><p id="1726" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">网络或图形是由节点(顶点)和边(链接)组成的数据表示:在本文中，我们将只考虑无向和未加权的边。我们将首先呈现我们打算使用的数据集，经历数据加载和争论步骤，并呈现网络。</p><p id="0282" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">接下来，我们将介绍网络匹配度的概念。将使用的主要理论框架是Newman等人2003年[1]的文章，该文章定义并解释了网络分类度的概念。</p><p id="c820" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">然后，我们将把这一指标应用到数据集上，以确认是否——如文章所述——人们倾向于与和他们相似的人联系。</p></div><div class="ab cl kw kx hu ky" role="separator"><span class="kz bw bk la lb lc"/><span class="kz bw bk la lb lc"/><span class="kz bw bk la lb"/></div><div class="ij ik il im in"><h1 id="748b" class="lz ma iq bd mb mc md me mf mg mh mi mj jw mk jx ml jz mm ka mn kc mo kd mp mq bi translated">1.数据</h1><p id="013b" class="pw-post-body-paragraph ld le iq lf b lg mr jr li lj ms ju ll lm mt lo lp lq mu ls lt lu mv lw lx ly ij bi translated">文中用到的数据[2]可以从<a class="ae kv" href="https://snap.stanford.edu/data/ego-Facebook.html" rel="noopener ugc nofollow" target="_blank">本页</a>下载。我们需要两套文件:</p><ol class=""><li id="fc02" class="mw mx iq lf b lg lh lj lk lm my lq mz lu na ly nb nc nd ne bi translated"><a class="ae kv" href="https://snap.stanford.edu/data/facebook_combined.txt.gz" rel="noopener ugc nofollow" target="_blank">文件</a>“Facebook _ combined . txt . gz”包含来自10个网络的4039个节点的边。边以邻接表格式表示(即[0，1]表示节点0和节点1之间有一条边)。</li><li id="830f" class="mw mx iq lf b lg nf lj ng lm nh lq ni lu nj ly nb nc nd ne bi translated"><a class="ae kv" href="https://snap.stanford.edu/data/facebook.tar.gz" rel="noopener ugc nofollow" target="_blank">文件</a>“Facebook . tar . gz”包含其他几个文件。我们将只使用”。“和”的壮举。featnames”文件，它对应于所有节点的网络属性(及其名称)。</li></ol><h1 id="9ec1" class="lz ma iq bd mb mc nk me mf mg nl mi mj jw nm jx ml jz nn ka mn kc no kd mp mq bi translated">1.1加载网络</h1><p id="c3a4" class="pw-post-body-paragraph ld le iq lf b lg mr jr li lj ms ju ll lm mt lo lp lq mu ls lt lu mv lw lx ly ij bi translated">我们将使用Python中的NetworkX库。</p><p id="44f0" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">导入主网络文件非常简单:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="np nq l"/></div></figure><p id="c54b" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">让我们快速浏览一下网络。以下表示允许显示两个重要特征:</p><ol class=""><li id="307a" class="mw mx iq lf b lg lh lj lk lm my lq mz lu na ly nb nc nd ne bi translated">节点颜色将随节点度数(即每个节点拥有的连接数)而变化。</li><li id="75a4" class="mw mx iq lf b lg nf lj ng lm nh lq ni lu nj ly nb nc nd ne bi translated">节点大小将根据节点介数中心性而变化，介数中心性是一种量化节点有多少位于其他节点之间的路径上的度量，或者换句话说，该度量量化移除具有高介数中心性的节点会破坏网络的程度。这一指标的公式如下:</li></ol><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nr"><img src="../Images/27fc7e79aae212f9f0e134e93bf197ca.png" data-original-src="https://miro.medium.com/v2/resize:fit:1312/format:webp/1*-TFZFduDFdcfuq_QB6ZILw.png"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">作者图片</p></figure><p id="5694" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">n^i_st:表示从“s”到“t”经过节点“I”的最短路径数；<br/> g_st:是从“s”到“t”的不一定经过节点“I”的最短路径总数；<br/> n:是节点的总nr，可以省略1/n项。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="np nq l"/></div></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ns"><img src="../Images/ff32c492b442c527f4193b30bd7285fd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*pVEnlSYg4exasZ-kB9M_oQ.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">作者图片</p></figure><h1 id="8bc2" class="lz ma iq bd mb mc nk me mf mg nl mi mj jw nm jx ml jz nn ka mn kc no kd mp mq bi translated">1.2添加节点属性</h1><p id="b140" class="pw-post-body-paragraph ld le iq lf b lg mr jr li lj ms ju ll lm mt lo lp lq mu ls lt lu mv lw lx ly ij bi translated">为了给节点分配属性，我们需要解析以下文件:</p><ul class=""><li id="c275" class="mw mx iq lf b lg lh lj lk lm my lq mz lu na ly nt nc nd ne bi translated">".feat”文件包含0/1条目的矩阵。每行代表一个节点，每列代表一个属性。如果节点“I”具有属性“j ”,则条目</li><li id="3b08" class="mw mx iq lf b lg nf lj ng lm nh lq ni lu nj ly nt nc nd ne bi translated">每一行都在”。featnames "文件包含来自"的相应列的名称。“档案壮举。这样，我们就能够理解每个属性的名称。</li></ul><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="np nq l"/></div></figure><p id="b621" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">使用nx库，我们可以通过以下方式为节点分配属性:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="np nq l"/></div></figure><p id="f39c" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">最后，我们可以获得每个节点的所有属性信息，例如节点id“200”:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nu"><img src="../Images/41c2a7074fc916356d537edb84ad11d6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*oL0xrLx9EgktIlmjYqLzUA.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">作者图片</p></figure><h1 id="b086" class="lz ma iq bd mb mc nk me mf mg nl mi mj jw nm jx ml jz nn ka mn kc no kd mp mq bi translated">2.属性匹配系数</h1><p id="edbf" class="pw-post-body-paragraph ld le iq lf b lg mr jr li lj ms ju ll lm mt lo lp lq mu ls lt lu mv lw lx ly ij bi translated">在社会网络的研究中，分析节点之间的连接模式起着重要的作用。分类性有助于理解人们是否倾向于连接到相似或不相似的节点，并且这种网络属性可能影响网络结构:例如，在离散属性上的强分类性可能将网络分成子网。假设出生年份是一个非常强的分类属性:因此我们可以期望不同年龄的人的子网连接在一起。</p><p id="2a8a" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">纽曼等人。all (2003)在他们的文章中定义了一种度量网络中的配合度的方法，即配合度系数(也可在NetworkX库<a class="ae kv" href="https://networkx.org/documentation/stable/reference/algorithms/generated/networkx.algorithms.assortativity.attribute_assortativity_coefficient.html" rel="noopener ugc nofollow" target="_blank"> Link1 </a>、<a class="ae kv" href="https://networkx.org/nx-guides/content/algorithms/assortativity/correlation.html" rel="noopener ugc nofollow" target="_blank"> Link2 </a>):</p><ul class=""><li id="1baa" class="mw mx iq lf b lg lh lj lk lm my lq mz lu na ly nt nc nd ne bi translated">让我们考虑一个节点的属性<em class="nv">和</em>。该属性可以取值:<em class="nv">【A1，A2，…】</em></li><li id="ac6f" class="mw mx iq lf b lg nf lj ng lm nh lq ni lu nj ly nt nc nd ne bi translated">我们可以构建一个<em class="nv">混合矩阵</em> M，其中条目<em class="nv"> e[i][j] </em>表示网络(E)中tot条边的分数，该网络将具有属性<em class="nv"> A = A[i] </em>的节点连接到具有属性<em class="nv"> A = A[j] </em>的节点</li></ul><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nw"><img src="../Images/7a67a14e20bfb14a63e3643a5f97c951.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9eJciKU5YYNFGI8-8fx2qw.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">作者图片</p></figure><ul class=""><li id="83d2" class="mw mx iq lf b lg lh lj lk lm my lq mz lu na ly nt nc nd ne bi translated">然后，我们构建以下数量:</li></ul><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nx"><img src="../Images/25b6949926f1781216fff9f6761c3af2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*nRMBggk-ddZBnds9iIccfQ.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">作者图片</p></figure><ul class=""><li id="f457" class="mw mx iq lf b lg lh lj lk lm my lq mz lu na ly nt nc nd ne bi translated">配合系数可以用下面的公式计算(第二个公式使用tr()迹的矩阵符号。我们将在下面看到一个例子):</li></ul><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ny"><img src="../Images/9fa9957a314eb2a7d7be86525002b6e1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*batR1j7RqOYTR2DG96DLPw.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">作者图片</p></figure><h1 id="cc6b" class="lz ma iq bd mb mc nk me mf mg nl mi mj jw nm jx ml jz nn ka mn kc no kd mp mq bi translated">2.1计算匹配系数</h1><p id="c405" class="pw-post-body-paragraph ld le iq lf b lg mr jr li lj ms ju ll lm mt lo lp lq mu ls lt lu mv lw lx ly ij bi translated">让我们计算可用数据集的一个属性的系数:“性别”。在我们的数据集中，该属性可以采用3个值:“匿名特征77”、“匿名特征78”和“无”。</p><p id="c830" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">首先，以这种方式获得混合矩阵:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="np nq l"/></div></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nz"><img src="../Images/bd733040da1828a2866852699a07e451.png" data-original-src="https://miro.medium.com/v2/resize:fit:868/format:webp/1*VXWerwAXfTNSY90t-tjk-A.png"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">作者图片</p></figure><p id="a210" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">(<em class="nv">注意:</em>通过设置normalized = False，我们将在矩阵中获得有效的边数)。</p><p id="fef1" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">我们现在将使用矩阵符号公式计算系数:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="np nq l"/></div></figure><ul class=""><li id="c6c8" class="mw mx iq lf b lg lh lj lk lm my lq mz lu na ly nt nc nd ne bi translated">矩阵轨迹(主要对角线元素的总和)表示连接节点之间性别相同的连接部分。这种情况下的痕迹是:53.65%</li><li id="0c88" class="mw mx iq lf b lg nf lj ng lm nh lq ni lu nj ly nt nc nd ne bi translated">然后我们需要混合矩阵的平方和</li></ul><p id="7be3" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">最终结果是:0.0841</p><p id="294b" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">这个系数可以从-1(完全不同配的情况)到+1(完全匹配)，在这种情况下，我们在这个属性上有一个低的但是正的匹配。</p><h1 id="b398" class="lz ma iq bd mb mc nk me mf mg nl mi mj jw nm jx ml jz nn ka mn kc no kd mp mq bi translated">3.结论</h1><p id="ab89" class="pw-post-body-paragraph ld le iq lf b lg mr jr li lj ms ju ll lm mt lo lp lq mu ls lt lu mv lw lx ly ij bi translated">通过对每个属性重复上述过程，我们可以找到网络中最合适的属性:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="np nq l"/></div></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oa"><img src="../Images/42934743bbbb8161143af91cefa1c3f2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*V_Q0KExTLfqPRxu88K___Q.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">作者图片</p></figure><p id="8884" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">正如所料，网络似乎是分类的，特别是在与地理位置、出生年份、姓氏、学校相关的属性上，这些属性可以决定人们相遇的环境或原因。唯一有点不相称的属性是政治倾向。</p></div><div class="ab cl kw kx hu ky" role="separator"><span class="kz bw bk la lb lc"/><span class="kz bw bk la lb lc"/><span class="kz bw bk la lb"/></div><div class="ij ik il im in"><h1 id="33e2" class="lz ma iq bd mb mc md me mf mg mh mi mj jw mk jx ml jz mm ka mn kc mo kd mp mq bi translated">参考</h1><ul class=""><li id="ad05" class="mw mx iq lf b lg mr lj ms lm ob lq oc lu od ly nt nc nd ne bi translated">[1]纽曼等人，“网络中的混合模式”，2003年(可在<a class="ae kv" href="https://arxiv.org/abs/cond-mat/0209450" rel="noopener ugc nofollow" target="_blank">这里</a>获得)</li><li id="7f78" class="mw mx iq lf b lg nf lj ng lm nh lq ni lu nj ly nt nc nd ne bi translated">[2]本文中使用的数据来自Jure Leskovec和Andrej Krevl在http://snap.stanford.edu/data<a class="ae kv" href="http://snap.stanford.edu/data" rel="noopener ugc nofollow" target="_blank">的SNAP Stanford _大型网络数据集</a></li></ul></div></div>    
</body>
</html>