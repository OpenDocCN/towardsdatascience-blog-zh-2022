<html>
<head>
<title>How to Quickly Anonymize Personal Names in Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在Python中快速匿名化个人姓名</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/how-to-quickly-anonymize-personal-names-in-python-6e78115a125b#2022-02-22">https://towardsdatascience.com/how-to-quickly-anonymize-personal-names-in-python-6e78115a125b#2022-02-22</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/2c38d9c16f40022d627c1202146e50c2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1_g0u3iP9hiAPhx16dsrzg.jpeg"/></div></div><p class="jy jz gj gh gi ka kb bd b be z dk translated">Julian Hochgesang 在<a class="ae kc" href="https://unsplash.com/@julianhochgesang" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片。</p></figure><p id="09d7" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">最终，大多数数据科学家将处理包含个人信息的数据集。个人数据是高度敏感的，此类数据的汇总可能会泄露个人或组织的机密信息。美国联邦贸易委员会(联邦贸易委员会)的保护个人信息指南进一步阐述[1]:</p><blockquote class="lb"><p id="0d78" class="lc ld iq bd le lf lg lh li lj lk la dk translated">[如果]敏感数据落入坏人之手，可能会导致欺诈、身份盗窃或类似的伤害[导致]失去客户的信任，甚至可能在诉讼中为自己辩护。</p><p id="3850" class="lc ld iq bd le lf lg lh li lj lk la dk translated">— <a class="ae kc" href="https://www.ftc.gov/system/files/documents/plain-language/pdf-0136_proteting-personal-information.pdf" rel="noopener ugc nofollow" target="_blank">联邦贸易委员会保护个人信息指南</a></p></blockquote><p id="f39a" class="pw-post-body-paragraph kd ke iq kf b kg ll ki kj kk lm km kn ko ln kq kr ks lo ku kv kw lp ky kz la ij bi translated">因此，未能保护个人数据的数据科学家的职业生涯将会很短暂。幸运的是，Python中有几个选项可以匿名化姓名并轻松生成虚假的个人数据。遵循下面的示例，并在 <a class="ae kc" href="https://github.com/kurtklingensmith/Anonymization" rel="noopener ugc nofollow" target="_blank"> <strong class="kf ir">链接的Github页面</strong> </a>下载完整的Jupyter笔记本和代码示例。</p><h1 id="508b" class="lq lr iq bd ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn bi translated">场景—考试分数</h1><p id="9b4c" class="pw-post-body-paragraph kd ke iq kf b kg mo ki kj kk mp km kn ko mq kq kr ks mr ku kv kw ms ky kz la ij bi translated">首先，让我们创建一个场景。假设一位教授有一组最近考试的分数，但他希望在与全班讨论考试趋势时模糊学生的名字。为了方便这个场景，Python库<a class="ae kc" href="https://pypi.org/project/Faker/" rel="noopener ugc nofollow" target="_blank"> Faker </a>使我们能够生成假数据，以包含名字[2]。生成概念数据集很简单:</p><pre class="mt mu mv mw gt mx my mz na aw nb bi"><span id="629d" class="nc lr iq my b gy nd ne l nf ng"># Import Faker<br/>from faker import Faker<br/>faker = Faker()</span><span id="2dc5" class="nc lr iq my b gy nh ne l nf ng"># Test fake data generation<br/>print("The Faker library can generate fake names. By running 'faker.name()', we get:")<br/>faker.name()</span></pre><p id="06d3" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这段代码应该提供一个假名字，这个名字会随着每次执行而改变。下面是一个输出示例:</p><figure class="mt mu mv mw gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi ni"><img src="../Images/5906a1e06f6b3b5f8f4be120bf321bc4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Qqct2NcSMAT2a5XWgq4umg.png"/></div></div><p class="jy jz gj gh gi ka kb bd b be z dk translated">作者截图。</p></figure><p id="4e34" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然而，这只能给我们一个名字；要生成一个包含10名学生和10个随机测试分数的示例数据帧，请运行以下代码:</p><pre class="mt mu mv mw gt mx my mz na aw nb bi"><span id="43ba" class="nc lr iq my b gy nd ne l nf ng"># Create a list of fake names<br/>fake_names = [faker.name() for x in range (10)]<br/>df = pd.DataFrame(fake_names, columns = ['Student'])</span><span id="ba2e" class="nc lr iq my b gy nh ne l nf ng"># Generate random test scores<br/>import numpy as np<br/>df['TestScore'] = np.random.randint(50, 100, df.shape[0])</span><span id="9a45" class="nc lr iq my b gy nh ne l nf ng"># Optional - Export to CSV<br/>df.to_csv('StudentTestScores.csv', index=False)</span></pre><p id="dd96" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">得到的数据帧是:</p><figure class="mt mu mv mw gt jr gh gi paragraph-image"><div class="gh gi nj"><img src="../Images/3cfd8f727496c6dd81e3a8337a1a37d5.png" data-original-src="https://miro.medium.com/v2/resize:fit:440/format:webp/1*v3o9cJqiWm5iGW_1-z83Ng.png"/></div><p class="jy jz gj gh gi ka kb bd b be z dk translated">作者截图。</p></figure><p id="092c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这将作为学生测试结果数据。对于这个场景，上面随机生成的名字代表学生的真实姓名。</p><h1 id="ed4a" class="lq lr iq bd ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn bi translated">1.通过匿名化实现匿名化f</h1><p id="fc75" class="pw-post-body-paragraph kd ke iq kf b kg mo ki kj kk mp km kn ko mq kq kr ks mr ku kv kw ms ky kz la ij bi translated"><a class="ae kc" href="https://pypi.org/project/anonymizedf/" rel="noopener ugc nofollow" target="_blank"> AnonymizeDF </a>是一个Python库，能够生成假数据，包括姓名、id、数字、类别等等[3]。下面是一个生成假名字的示例代码块:</p><pre class="mt mu mv mw gt mx my mz na aw nb bi"><span id="0f1b" class="nc lr iq my b gy nd ne l nf ng"># Anonymize DF<br/>from anonymizedf.anonymizedf import anonymize</span><span id="a5e9" class="nc lr iq my b gy nh ne l nf ng"># AnonymizeDF can generate fake names<br/>anon.fake_names("Student")</span></pre><p id="838f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">结果输出是:</p><figure class="mt mu mv mw gt jr gh gi paragraph-image"><div class="gh gi nk"><img src="../Images/6991fcc21fc682419042b4126bbfafab.png" data-original-src="https://miro.medium.com/v2/resize:fit:646/format:webp/1*Ti6S7b0T_F196rbbNl5thQ.png"/></div><p class="jy jz gj gh gi ka kb bd b be z dk translated">作者截图。</p></figure><p id="e911" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">AnonymizeDF还可以创建假的身份证明。下面是一个例子:</p><pre class="mt mu mv mw gt mx my mz na aw nb bi"><span id="21a3" class="nc lr iq my b gy nd ne l nf ng">anon.fake_ids("Student")</span></pre><figure class="mt mu mv mw gt jr gh gi paragraph-image"><div class="gh gi nl"><img src="../Images/48c8e410ddab7cdc4767f52917c6141a.png" data-original-src="https://miro.medium.com/v2/resize:fit:712/format:webp/1*8E5YdIMn8IAOuk8sJw1JgA.png"/></div><p class="jy jz gj gh gi ka kb bd b be z dk translated">作者截图。</p></figure><p id="a284" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">AnonymizeDF也可以创建类别。这个特性接受列名并给它加上一个数字。下面是一个例子:</p><pre class="mt mu mv mw gt mx my mz na aw nb bi"><span id="9283" class="nc lr iq my b gy nd ne l nf ng">anon.fake_categories("Student")</span></pre><figure class="mt mu mv mw gt jr gh gi paragraph-image"><div class="gh gi nm"><img src="../Images/8420bbb855476ade8c2562d67316134a.png" data-original-src="https://miro.medium.com/v2/resize:fit:604/format:webp/1*XHdUGkd6U3nCjmqVQh1GZQ.png"/></div><p class="jy jz gj gh gi ka kb bd b be z dk translated">作者截图。</p></figure><p id="3e2c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">AnonymizeDF为希望隐藏和匿名用户名的数据科学家提供了一组强大的选项，并且易于使用。但是对于那些寻求其他选择的人来说，还有其他的选择。</p><h1 id="c686" class="lq lr iq bd ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn bi translated">2.通过Faker匿名</h1><p id="1e93" class="pw-post-body-paragraph kd ke iq kf b kg mo ki kj kk mp km kn ko mq kq kr ks mr ku kv kw ms ky kz la ij bi translated">与AnonymizeDF类似，<a class="ae kc" href="https://pypi.org/project/Faker/" rel="noopener ugc nofollow" target="_blank"> Faker </a>是一个python库，它将生成从姓名到地址等范围内的假数据[4]。Faker非常容易使用:</p><pre class="mt mu mv mw gt mx my mz na aw nb bi"><span id="a584" class="nc lr iq my b gy nd ne l nf ng"># Install Faker<br/>from faker import Faker<br/>faker = Faker()</span><span id="d618" class="nc lr iq my b gy nh ne l nf ng">Faker.seed(4321)<br/>dict_names = {name: faker.name() for name in df['Student'].unique()}<br/>df['New Student Name'] = df['Student'].map(dict_names)</span></pre><figure class="mt mu mv mw gt jr gh gi paragraph-image"><div class="gh gi nn"><img src="../Images/27c6855614078a42fa538ac01444e946.png" data-original-src="https://miro.medium.com/v2/resize:fit:684/format:webp/1*EY6Jznkib5kW9vZhSoZveQ.png"/></div><p class="jy jz gj gh gi ka kb bd b be z dk translated">作者截图。</p></figure><p id="6c55" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">Faker还有一些独特的能力，比如创建一个假地址。例如:</p><pre class="mt mu mv mw gt mx my mz na aw nb bi"><span id="b69c" class="nc lr iq my b gy nd ne l nf ng">print(faker.address())</span></pre><figure class="mt mu mv mw gt jr gh gi paragraph-image"><div class="gh gi no"><img src="../Images/22581020ade6ce8b53bbb8b0d48abbac.png" data-original-src="https://miro.medium.com/v2/resize:fit:386/format:webp/1*Vjd6518GxndCMiBS4zFfeQ.png"/></div><p class="jy jz gj gh gi ka kb bd b be z dk translated">作者截图。</p></figure><h1 id="6b57" class="lq lr iq bd ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn bi translated">3.定制的字加扰器</h1><p id="cefc" class="pw-post-body-paragraph kd ke iq kf b kg mo ki kj kk mp km kn ko mq kq kr ks mr ku kv kw ms ky kz la ij bi translated">除了使用第三方库，自制解决方案也是一种选择。这些功能包括单词加扰器或用随机单词或数字替换名字的功能。加扰器函数的一个例子如下:</p><pre class="mt mu mv mw gt mx my mz na aw nb bi"><span id="5574" class="nc lr iq my b gy nd ne l nf ng"># Scrambler<br/>from random import shuffle</span><span id="e76c" class="nc lr iq my b gy nh ne l nf ng"># Create a scrambler function<br/>def word_scrambler(word):<br/>    word = list(word)<br/>    shuffle(word)<br/>    return ''.join(word)</span></pre><p id="2127" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">使用以下代码将此函数应用于数据帧:</p><pre class="mt mu mv mw gt mx my mz na aw nb bi"><span id="1c92" class="nc lr iq my b gy nd ne l nf ng">df['ScrambledName'] = df.Student.apply(word_scrambler)<br/>df['ScrambledName'] = df['ScrambledName'].str.replace(" ","")</span></pre><p id="74d3" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这会产生以下数据帧:</p><figure class="mt mu mv mw gt jr gh gi paragraph-image"><div class="gh gi np"><img src="../Images/c7fd8781ffd7d43f191bd2cd94c53034.png" data-original-src="https://miro.medium.com/v2/resize:fit:652/format:webp/1*dvJ09TdxUwXUj1M6T1Ddzg.png"/></div><p class="jy jz gj gh gi ka kb bd b be z dk translated">作者截图。</p></figure><p id="8cdd" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这种方法有一些限制。首先，事先知道学生姓名的人可以根据打乱的姓名中代表首字母的大写字母推断出谁是谁。第二，这些乱七八糟的字母在外观上不像假名那样干净，也不像假名那样容易理解。进一步的定制可以去除大写字母或生成随机数来代替名字；最合适的选择取决于客户的场景和需求。</p><h1 id="0e98" class="lq lr iq bd ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn bi translated">4.将所有这些放在一起:匿名化、清理和取消数据框的匿名化</h1><p id="bdab" class="pw-post-body-paragraph kd ke iq kf b kg mo ki kj kk mp km kn ko mq kq kr ks mr ku kv kw ms ky kz la ij bi translated">一旦选择了一种技术，将它应用于数据帧、清理帧和存储“密钥”就相当简单了。从一开始就考虑学生考试成绩的原始数据框架:</p><figure class="mt mu mv mw gt jr gh gi paragraph-image"><div class="gh gi nj"><img src="../Images/3cfd8f727496c6dd81e3a8337a1a37d5.png" data-original-src="https://miro.medium.com/v2/resize:fit:440/format:webp/1*v3o9cJqiWm5iGW_1-z83Ng.png"/></div><p class="jy jz gj gh gi ka kb bd b be z dk translated">作者截图。</p></figure><p id="6e25" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">让我们使用AnonymizeDF来创建匿名名称。下面的代码块将:</p><ul class=""><li id="3fde" class="nq nr iq kf b kg kh kk kl ko ns ks nt kw nu la nv nw nx ny bi translated">生成假名。</li><li id="be28" class="nq nr iq kf b kg nz kk oa ko ob ks oc kw od la nv nw nx ny bi translated">创建一个包含真实和虚假姓名的CSV“密钥”。</li><li id="5aa8" class="nq nr iq kf b kg nz kk oa ko ob ks oc kw od la nv nw nx ny bi translated">从原始数据帧中删除真实姓名。</li><li id="2d41" class="nq nr iq kf b kg nz kk oa ko ob ks oc kw od la nv nw nx ny bi translated">呈现一个干净、匿名的数据框架，在结构上与原始数据框架没有区别。</li></ul><pre class="mt mu mv mw gt mx my mz na aw nb bi"><span id="a7ef" class="nc lr iq my b gy nd ne l nf ng"># Create the Fake Student Names<br/>anon = anonymize(df)<br/>anon.fake_names('Student')</span><span id="48da" class="nc lr iq my b gy nh ne l nf ng"># Create a "Key"<br/>dfKey = df[['Student', 'Fake_Student']]<br/>dfKey.to_csv('key.csv')</span><span id="f94a" class="nc lr iq my b gy nh ne l nf ng">df = df.assign(Student = df['Fake_Student'])<br/>df = df.drop(columns='Fake_Student')</span></pre><p id="b48e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">输出是以下数据帧:</p><figure class="mt mu mv mw gt jr gh gi paragraph-image"><div class="gh gi oe"><img src="../Images/bfd19e4c9832f5ee738528f30756de5d.png" data-original-src="https://miro.medium.com/v2/resize:fit:420/format:webp/1*jxLxNZx02eNhur1h7fKLuA.png"/></div><p class="jy jz gj gh gi ka kb bd b be z dk translated">作者截图。</p></figure><p id="1658" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">解扰这是加载CSV“密钥”并将原始学生姓名映射到假学生姓名的简单事情:</p><pre class="mt mu mv mw gt mx my mz na aw nb bi"><span id="135e" class="nc lr iq my b gy nd ne l nf ng"># Load in the decoder key<br/>dfKey = pd.read_csv('key.csv')</span><span id="2dca" class="nc lr iq my b gy nh ne l nf ng"># Return to the original Data<br/>df['Student'] = df['Student'].map(dfKey.set_index('Fake_Student')['Student'])</span></pre><p id="6a88" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这是它在Jupyter笔记本中的样子(<a class="ae kc" href="https://github.com/kurtklingensmith/Anonymization" rel="noopener ugc nofollow" target="_blank"> <strong class="kf ir">笔记本可在链接的Github </strong> </a>下载):</p><figure class="mt mu mv mw gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi of"><img src="../Images/6409e6abeb1c3cb6f4d2ae2fbeabaaff.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fT0htFCevIIlx8O359Oc8g.png"/></div></div><p class="jy jz gj gh gi ka kb bd b be z dk translated">作者截图。</p></figure><h1 id="607e" class="lq lr iq bd ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn bi translated">结论</h1><p id="b7e9" class="pw-post-body-paragraph kd ke iq kf b kg mo ki kj kk mp km kn ko mq kq kr ks mr ku kv kw ms ky kz la ij bi translated">数据科学家不可避免地会遇到包含个人信息的数据集，这些信息的保护对于保护个人和组织至关重要。上面强调的简单匿名技术提供了一种快速生成虚假数据作为占位符来保护个人的方法。</p><p id="a5a7" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">但是，对于某些数据集，仅仅匿名化名称可能还不够。诸如地址或个人属性的其他数据点可以允许第三方重建与观察相关联的身份。因此，更复杂的数据集将需要先进的匿名和去识别技术，在某些情况下，合成数据可能是进行分析同时保护个人信息的最佳途径。</p><h2 id="cda3" class="nc lr iq bd ls og oh dn lw oi oj dp ma ko ok ol me ks om on mi kw oo op mm oq bi translated">参考资料:</h2><p id="9cd4" class="pw-post-body-paragraph kd ke iq kf b kg mo ki kj kk mp km kn ko mq kq kr ks mr ku kv kw ms ky kz la ij bi translated">[1]联邦贸易委员会，<a class="ae kc" href="https://www.ftc.gov/system/files/documents/plain-language/pdf-0136_proteting-personal-information.pdf" rel="noopener ugc nofollow" target="_blank">保护个人信息:商业指南</a> (2016)。</p><p id="425e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">[2] Faker PyPI，<a class="ae kc" href="https://pypi.org/project/Faker/" rel="noopener ugc nofollow" target="_blank"> Faker 13.0 </a> (2022)，Python包索引。</p><p id="1a27" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">[3]匿名化DF，<a class="ae kc" href="https://pypi.org/project/anonymizedf/" rel="noopener ugc nofollow" target="_blank">匿名化df 1.0.1 </a> (2022)，Python包索引。</p><p id="f7f2" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">[4] Faker PyPI，<a class="ae kc" href="https://pypi.org/project/Faker/" rel="noopener ugc nofollow" target="_blank"> Faker 13.0 </a> (2022)，Python包索引。</p></div></div>    
</body>
</html>