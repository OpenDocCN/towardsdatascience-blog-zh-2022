<html>
<head>
<title>Website Visitor Forecast with Facebook Prophet: A Complete Tutorial</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">网站访客预测与脸书先知:完整教程</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/real-world-website-visitor-forecast-with-facebook-prophet-a-complete-tutorial-8d135b848c5e#2022-03-10">https://towardsdatascience.com/real-world-website-visitor-forecast-with-facebook-prophet-a-complete-tutorial-8d135b848c5e#2022-03-10</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="f9d7" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">包括安装说明、数据、参数调整以及简单和复杂的预测—第 1 部分</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/887531dc1374fab33cc1f226cd5942c3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bJI97qZAxmQWtQcmYzuc3w.jpeg"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">预测可能会拯救你或你的公司。美国国家海洋和大气管理局在<a class="ae kv" href="https://unsplash.com/s/photos/forecast?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>拍摄的照片</p></figure><p id="47bb" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi ls translated"><span class="l lt lu lv bm lw lx ly lz ma di">作为微软的一名数据分析师，我每天都必须调查和理解时间序列数据。除了在历史背景下查看一些关键绩效指标，如 SRPVs、CPCs、转换率，我们有时还需要展望未来，即进行预测。对当前数据和未来的洞察有助于我们和我们的客户提前调整。</span></p><p id="e368" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我试过很多方法。我个人最喜欢的是 LSTM。但是在现在的公司，他们雇佣了 FB Prophet。入乡随俗。因此，在这个项目中，我将坚持 Prophet 来预测欧洲某网站的唯一访客量。网站域名，后面你会看到，是捏造的。你只会在数据集中找到日期、地点和访客数量。</p><p id="ddbd" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">脸书先知有它的优势，虽然它不是特别健壮。但在预测方面，它简单、易用、全自动、快速。你不必处理数据维度，也不需要反向标准化。如果你不太熟悉 Python 和编码，并且你没有太多的时间建模，那么在我看来，这绝对是最好的选择之一。</p><p id="91f6" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在本文中，我将介绍，</p><ol class=""><li id="ce88" class="mb mc iq ky b kz la lc ld lf md lj me ln mf lr mg mh mi mj bi translated"><a class="ae kv" rel="noopener" target="_blank" href="/real-world-website-visitor-forecast-with-facebook-prophet-a-complete-tutorial-8d135b848c5e"> <strong class="ky ir">安装先知</strong> </a></li><li id="7baa" class="mb mc iq ky b kz mk lc ml lf mm lj mn ln mo lr mg mh mi mj bi translated"><a class="ae kv" rel="noopener" target="_blank" href="/real-world-website-visitor-forecast-with-facebook-prophet-a-complete-tutorial-8d135b848c5e"> <strong class="ky ir">简单的 ETL，以及数据可视化</strong> </a></li><li id="60b6" class="mb mc iq ky b kz mk lc ml lf mm lj mn ln mo lr mg mh mi mj bi translated"><a class="ae kv" rel="noopener" target="_blank" href="/real-world-website-visitor-forecast-with-facebook-prophet-a-complete-tutorial-8d135b848c5e"> <strong class="ky ir">【简单预测(默认设置的预测)</strong> </a></li><li id="3744" class="mb mc iq ky b kz mk lc ml lf mm lj mn ln mo lr mg mh mi mj bi translated"><a class="ae kv" rel="noopener" target="_blank" href="/website-visitor-forecast-with-facebook-prophet-a-complete-tutorial-1d0a5bcd1f8f"> <strong class="ky ir">预测与模型评估</strong> </a></li><li id="3aab" class="mb mc iq ky b kz mk lc ml lf mm lj mn ln mo lr mg mh mi mj bi translated"><a class="ae kv" rel="noopener" target="_blank" href="/website-visitor-forecast-with-facebook-prophet-a-complete-tutorial-1d0a5bcd1f8f"> <strong class="ky ir">用调好的参数进行预测</strong> </a></li></ol><p id="ab4b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">但是，原文太长了。因此它现在被分成两部分——<a class="ae kv" rel="noopener" target="_blank" href="/real-world-website-visitor-forecast-with-facebook-prophet-a-complete-tutorial-8d135b848c5e">前 3 节在第 1 部分</a>中，而<a class="ae kv" rel="noopener" target="_blank" href="/website-visitor-forecast-with-facebook-prophet-a-complete-tutorial-1d0a5bcd1f8f">第 4 节</a>和<a class="ae kv" rel="noopener" target="_blank" href="/website-visitor-forecast-with-facebook-prophet-a-complete-tutorial-1d0a5bcd1f8f">第 5 节</a>在<a class="ae kv" rel="noopener" target="_blank" href="/website-visitor-forecast-with-facebook-prophet-a-complete-tutorial-1d0a5bcd1f8f">第 2 部分</a>中。如果您对安装和简单预测不感兴趣，请<a class="ae kv" rel="noopener" target="_blank" href="/website-visitor-forecast-with-facebook-prophet-a-complete-tutorial-1d0a5bcd1f8f">点击此处进入第 2 部分</a>。</p></div><div class="ab cl mp mq hu mr" role="separator"><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu"/></div><div class="ij ik il im in"><h1 id="a46c" class="mw mx iq bd my mz na nb nc nd ne nf ng jw nh jx ni jz nj ka nk kc nl kd nm nn bi translated"><strong class="ak"> 1。安装</strong></h1><p id="69a3" class="pw-post-body-paragraph kw kx iq ky b kz no jr lb lc np ju le lf nq lh li lj nr ll lm ln ns lp lq lr ij bi translated">几年前，当 python 还处于 3.8 版本时，新的 Prophet 用户只需 pip 安装库，然后进行预测。但是，尽管大多数 Python 用户已经更新到 3.9x，甚至更高的版本，但 Prophet 遗憾的是更新不快，只支持 3.8x 或更低的 Python 版本。因此，我们大多数人都需要一个解决这个不相容问题的方法。</p><p id="455b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">虚拟环境是解决这一问题的方法之一。要了解什么是虚拟环境，<a class="ae kv" rel="noopener" target="_blank" href="/virtual-environments-104c62d48c54#:~:text=Well%2C%20a%20virtual%20environment%20is%20just%20a%20directory,site%20packages%20installed%20inside%20the%20given%20virtual%20environment">请点击此处</a>。</p><p id="7327" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果你只对 FB 先知感兴趣，请随意跳过。</p><ol class=""><li id="7b67" class="mb mc iq ky b kz la lc ld lf md lj me ln mf lr mg mh mi mj bi translated">要在 Windows 10 中创建一个虚拟环境(本教程是用 Windows 10 平台编写的，而不是我曾经工作过的 Mac)，我们首先必须安装 Anaconda。请<a class="ae kv" href="https://www.anaconda.com/products/individual" rel="noopener ugc nofollow" target="_blank">点击这里进入官方网站</a>。</li></ol><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nt"><img src="../Images/741998a049e906c290eeae411f283798.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*KU_NMIdTre5jaLAJXNWcrg.jpeg"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">按照安装指南完成 Anaconda 安装。作者图片</p></figure><p id="b74d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">然后按照安装指南完成安装。安装很容易。我们只需点击“是，是……”就能得到我们需要的东西。</p><p id="1c0f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir"> 2。</strong>安装完成后，我们将使用命令行提示。但是这一次，我们没有使用 Windows 命令提示符。相反，我们将使用<strong class="ky ir"> Conda 命令提示符</strong>。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nu"><img src="../Images/a5073e1d2f8142ba9f01fb6480f68034.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*GWnS6OFAviYhygKZyxxtEw.jpeg"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">在这篇 Prophet 教程中，我们将使用 Anaconda 命令提示符。上面画圈的是 Anaconda 提示符。作者图片</p></figure><p id="13e6" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果您找不到 Anaconda 命令提示符，请转到上面红色箭头所指的搜索栏，搜索“Anaconda 提示符”。</p><p id="a54a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir"> 3。</strong>会弹出一个小黑窗口。在这个 Anaconda 命令提示符下，输入:</p><pre class="kg kh ki kj gt nv nw nx ny aw nz bi"><span id="e7cc" class="oa mx iq nw b gy ob oc l od oe">conda create -n python_3_8 python=3.8</span></pre><p id="3f53" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">它所做的是创建一个名为 python_3_8 的新工作环境，其中安装了 python3.8。</p><p id="0740" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir"> 4。</strong>然后我们进入:</p><pre class="kg kh ki kj gt nv nw nx ny aw nz bi"><span id="3550" class="oa mx iq nw b gy ob oc l od oe">conda activate python_3_8</span></pre><p id="a520" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">输入该命令后，系统将进入虚拟环境 python_3_8。从现在开始，您的 python_3_8 虚拟环境将取代您原来的 python 环境(暂时)。您也可以选择它作为 Visual Studio 代码中的工作内核。</p><p id="7b29" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">要在完成项目后逃离这个虚拟环境，只需输入:</p><pre class="kg kh ki kj gt nv nw nx ny aw nz bi"><span id="4c0a" class="oa mx iq nw b gy ob oc l od oe">conda deactivate</span></pre><p id="bb2c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir"> 5。</strong>现在我们有了工作环境，我们需要安装库。下面是我们将需要的库和依赖项。只需逐行安装下面的代码。</p><pre class="kg kh ki kj gt nv nw nx ny aw nz bi"><span id="bdce" class="oa mx iq nw b gy ob oc l od oe">conda install libpython m2w64-toolchain -c msys2</span><span id="dcd4" class="oa mx iq nw b gy of oc l od oe">conda install numpy cython -c conda-forge</span><span id="548a" class="oa mx iq nw b gy of oc l od oe">conda install matplotlib scipy pandas -c conda-forge</span><span id="3139" class="oa mx iq nw b gy of oc l od oe">conda install pystan -c conda-forge</span><span id="da69" class="oa mx iq nw b gy of oc l od oe">conda install -c anaconda ephem</span><span id="d37b" class="oa mx iq nw b gy of oc l od oe">conda install -c anaconda scikit-learn</span><span id="533f" class="oa mx iq nw b gy of oc l od oe">conda install -c conda-forge seaborn</span><span id="5d8d" class="oa mx iq nw b gy of oc l od oe">conda install -c plotly plotly</span><span id="4e5f" class="oa mx iq nw b gy of oc l od oe">conda install -c conda-forge optuna</span><span id="0b24" class="oa mx iq nw b gy of oc l od oe">conda install -c conda-forge Prophet</span></pre><p id="3a0b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">安装完所有这些之后，我们现在可以开始我们的数据了。</p></div><div class="ab cl mp mq hu mr" role="separator"><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu"/></div><div class="ij ik il im in"><h1 id="aac6" class="mw mx iq bd my mz na nb nc nd ne nf ng jw nh jx ni jz nj ka nk kc nl kd nm nn bi translated">2.<strong class="ak">简单的 ETL 和数据可视化</strong></h1><p id="4e4c" class="pw-post-body-paragraph kw kx iq ky b kz no jr lb lc np ju le lf nq lh li lj nr ll lm ln ns lp lq lr ij bi translated">我们将从 csv 加载数据，并在此显示数据。因为数据是从其他数据库中提取的，所以我不会在这里介绍这些步骤。因此，我们将直接转到 csv 文件并探索。数据可以在这里<a class="ae kv" href="https://github.com/lorenzoyeung/prophet" rel="noopener ugc nofollow" target="_blank">下载。</a></p><p id="32eb" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">Jupyter 笔记本文件也可以在这个链接中找到— <a class="ae kv" href="https://github.com/lorenzoyeung/prophet" rel="noopener ugc nofollow" target="_blank">下载笔记本</a>。</p><p id="f958" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">首先，我们导入数据。</p><pre class="kg kh ki kj gt nv nw nx ny aw nz bi"><span id="fc73" class="oa mx iq nw b gy ob oc l od oe">df = pd.read_csv(‘data.csv’)</span><span id="1748" class="oa mx iq nw b gy of oc l od oe">df2 = df.copy()<br/>df2.head()</span></pre><p id="3446" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们探索我们的数据。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi og"><img src="../Images/134486e7b85df33ac1d494711c91facb.png" data-original-src="https://miro.medium.com/v2/resize:fit:920/format:webp/1*DCy7lIsC-X3lGxtU96rbiQ.jpeg"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">网站独特访问者的数据框架。国家一栏是网站的服务区域。作者图片</p></figure><pre class="kg kh ki kj gt nv nw nx ny aw nz bi"><span id="101c" class="oa mx iq nw b gy ob oc l od oe">print(df2[‘Country’].value_counts(), “\n”)</span><span id="c1dd" class="oa mx iq nw b gy of oc l od oe">print(df2[‘Country’].nunique(), “unique values.”)</span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi oh"><img src="../Images/11f987dd8a8cdd5f87fb3de0bf6a14d3.png" data-original-src="https://miro.medium.com/v2/resize:fit:934/format:webp/1*cLO8OAR0Kzs5qfXP9Xxn0Q.jpeg"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">德国有 23563 个数据点。作者图片</p></figure><p id="6064" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">大致了解数据集后，我们清理 DateTime 列，只过滤需要的数据点。我只对德国的数据感兴趣，所以我将使用 loc 进行过滤。</p><pre class="kg kh ki kj gt nv nw nx ny aw nz bi"><span id="ae79" class="oa mx iq nw b gy ob oc l od oe">df2[‘date’] = pd.to_datetime(df2[‘datepart’], dayfirst=True).dt.date</span><span id="2203" class="oa mx iq nw b gy of oc l od oe">df2 = df2.loc[(df2[‘Country’]==’Germany’)] # we are only interested in the visitors from Germany in this tutorial.</span><span id="d7a6" class="oa mx iq nw b gy of oc l od oe">df_de = df2.copy()</span></pre><p id="8577" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在我们有了一个数据框，里面只有网站在德国的表现。</p><p id="beb8" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">确保数据集中没有空值。</p><pre class="kg kh ki kj gt nv nw nx ny aw nz bi"><span id="e6a2" class="oa mx iq nw b gy ob oc l od oe">df_de.isna().count()/df_de.count()</span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oi"><img src="../Images/a1d15a8290076ddec046147080ca4458.png" data-original-src="https://miro.medium.com/v2/resize:fit:786/format:webp/1*bmYtsX1-rZ6iorPKjEBcFA.jpeg"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">1.0 表示 100%，没有缺失数据点。作者图片</p></figure><p id="0b37" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">Prophet 对要馈入的 df 有严格的要求。<strong class="ky ir"> ds </strong>和’<strong class="ky ir">y</strong>列是需要的标准列。其他的是，例如，“上限”和“下限”。我们在教程中不需要它们，因为这次我们将把模型设置为“线性”而不是“逻辑”。我将在本教程的第 2 部分中解释原因。</p><pre class="kg kh ki kj gt nv nw nx ny aw nz bi"><span id="f902" class="oa mx iq nw b gy ob oc l od oe">df_de2 = df_de.groupby(“date”).agg(np.sum)</span><span id="63ab" class="oa mx iq nw b gy of oc l od oe">df_de2 = df_de2.reset_index()</span><span id="7808" class="oa mx iq nw b gy of oc l od oe">df_de2.columns = [‘ds’, ‘y’]</span><span id="d55f" class="oa mx iq nw b gy of oc l od oe">df_de2 = df_de2[[‘y’, ‘ds’]]</span><span id="6880" class="oa mx iq nw b gy of oc l od oe">df_de2</span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi oj"><img src="../Images/381afeb0d1b065b12805fed3cd4141d6.png" data-original-src="https://miro.medium.com/v2/resize:fit:434/format:webp/1*2sGW9OPV27wpSnMZXzbcUQ.jpeg"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">“y”是要预测的目标值，“ds”是日期。它们是先知模型的两个基本要素。作者图片</p></figure><p id="01dc" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">然后，我将使用<a class="ae kv" href="https://plotly.com/" rel="noopener ugc nofollow" target="_blank"> Plotly </a>可视化我们的唯一访问者列的数据分布。Plotly 是我最喜欢的可视化库，因为它易于应用和交互。</p><pre class="kg kh ki kj gt nv nw nx ny aw nz bi"><span id="6821" class="oa mx iq nw b gy ob oc l od oe">import plotly.io as pio</span><span id="6242" class="oa mx iq nw b gy of oc l od oe">pio.renderers.default = “notebook”</span><span id="dc76" class="oa mx iq nw b gy of oc l od oe">fig_line = px.line(df_de2, x=”ds”, y=”y”, title=’The number of unique visitors of <a class="ae kv" href="http://www.lorentzyeung.com" rel="noopener ugc nofollow" target="_blank">www.lorentzyeung.com</a> in the previous 3 years’)</span><span id="3c29" class="oa mx iq nw b gy of oc l od oe">fig_line.show()</span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ok"><img src="../Images/a122be51922c525013d89ccfa6c2feaa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*MD2UgG4h4t7zySx-6-QAKA.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">在过去的 3 年里，<a class="ae kv" href="http://www.lorentzyeung.com" rel="noopener ugc nofollow" target="_blank">www.lorentzyeung.com</a>的独立访客数量。域名是捏造的。作者图片</p></figure><p id="14dd" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">用均值和标准差找出可能的异常值。</p><pre class="kg kh ki kj gt nv nw nx ny aw nz bi"><span id="d34f" class="oa mx iq nw b gy ob oc l od oe">df_stat = df_de2.describe()</span><span id="2f7f" class="oa mx iq nw b gy of oc l od oe">mean = df_stat.loc[“mean”][“y”]</span><span id="d667" class="oa mx iq nw b gy of oc l od oe">std = df_stat.loc[“std”][“y”]</span><span id="8a4b" class="oa mx iq nw b gy of oc l od oe">upper = mean+std*3</span><span id="e841" class="oa mx iq nw b gy of oc l od oe">lower = mean-std*3</span><span id="b475" class="oa mx iq nw b gy of oc l od oe">print(‘ Mean: ‘, mean, ‘\n’, ‘Standard Deviation: ‘, std, ‘\n’, ‘Upper Limit: ‘, upper, ‘\n’, ‘Lower Limit:’, lower)</span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi ol"><img src="../Images/e38c7a0e9c167088a3371baf02a5fe52.png" data-original-src="https://miro.medium.com/v2/resize:fit:690/format:webp/1*rBtKcwaof4fODq711dQUEg.jpeg"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">现在我们清楚地知道均值和异常值在哪里。只是我习惯用 3 个标准差作为上下大纲图截止线。作者图片</p></figure><p id="2ea3" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">然后我们用方框图一点一点地显示可能的异常值。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi om"><img src="../Images/798d035e4bf68d95f0c3e64bc3627115.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*m7BQSCkLCZVparluGgrMRQ.jpeg"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">我们的数据集中没有异常值。作者图片</p></figure><p id="7cd8" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们的数据集几乎显示了一个完全对称的钟形(垂直)，这意味着发现了正态分布。我们的数据集中没有异常值。这是理想的，因为正态分布是技术市场分析和其他类型的统计分析中最常见的分布类型。</p></div><div class="ab cl mp mq hu mr" role="separator"><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu"/></div><div class="ij ik il im in"><h1 id="a4df" class="mw mx iq bd my mz na nb nc nd ne nf ng jw nh jx ni jz nj ka nk kc nl kd nm nn bi translated"><strong class="ak"> 3。简单预测(默认设置的预测)</strong></h1><p id="3ab2" class="pw-post-body-paragraph kw kx iq ky b kz no jr lb lc np ju le lf nq lh li lj nr ll lm ln ns lp lq lr ij bi translated">在这个环节中，我将从一个简单的预言开始。这很简单，因为我们不需要在这里指定任何特定的参数值。我将只使用默认设置。然后，我们将观想我们的结果。</p><pre class="kg kh ki kj gt nv nw nx ny aw nz bi"><span id="b2bd" class="oa mx iq nw b gy ob oc l od oe">m = Prophet(interval_width=0.95, weekly_seasonality=False, daily_seasonality=False)</span><span id="3978" class="oa mx iq nw b gy of oc l od oe">m.add_country_holidays(country_name=’DE’)</span><span id="6b55" class="oa mx iq nw b gy of oc l od oe">m.fit(df_de2)</span><span id="3199" class="oa mx iq nw b gy of oc l od oe">future_df = m.make_future_dataframe(periods=52,freq=’W’)</span><span id="3f0d" class="oa mx iq nw b gy of oc l od oe">forecast_default = m.predict(future_df)</span><span id="3362" class="oa mx iq nw b gy of oc l od oe">plot_forecast = m.plot(forecast_default)</span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi on"><img src="../Images/473c9ac536ba90b1c143cdfc7fc64643.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*01apv9c4YGsSpfXzMZ7kRw.jpeg"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">在 Prophet 中直观显示原始数据点和预测线非常简单。我们的网站前几年一直在改进，甚至在疫情时代也是如此。但奥米克隆似乎带走了势头，扭转了趋势。作者图片</p></figure><p id="405f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这个预测和图表对人脑有意义，至少对我的大脑有意义。尽管趋势趋于平稳，但 5 %的置信区间告诉我们，未来一年可能会呈下降趋势。</p><pre class="kg kh ki kj gt nv nw nx ny aw nz bi"><span id="e5d0" class="oa mx iq nw b gy ob oc l od oe">plt_components = m.plot_components(forecast_default)</span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi oo"><img src="../Images/3374078017d98e29c71fb1fd93ae5285.png" data-original-src="https://miro.medium.com/v2/resize:fit:1276/format:webp/1*m4DOQ4ij6KRywCdEMkZuxw.png"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">组件图。作者图片</p></figure><p id="849c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">从上面的组件图中，我们可以看到我们的访问者数量呈上升趋势，尽管假期影响了性能。似乎圣诞节是我们网站最大的障碍。然而，一月和五月的银行假日会给我们的网站带来最强劲的增长。这里的图表完全有意义，因为你的网站销售的产品与圣诞节无关。</p><p id="7aeb" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在，您已经学习了如何安装和预测开箱即用的 Prophet 模型。在接下来的<a class="ae kv" rel="noopener" target="_blank" href="/website-visitor-forecast-with-facebook-prophet-a-complete-tutorial-1d0a5bcd1f8f">第二部分</a>中，我将展示如何<a class="ae kv" rel="noopener" target="_blank" href="/website-visitor-forecast-with-facebook-prophet-a-complete-tutorial-1d0a5bcd1f8f">评估该模型，以及如何改进/优化它</a>。</p></div><div class="ab cl mp mq hu mr" role="separator"><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu"/></div><div class="ij ik il im in"><p id="2ca6" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">感谢您的阅读。如果你喜欢这个教程，请分享给你的数据科学朋友，还有<strong class="ky ir">关注我</strong>。以下是我继续为社区做贡献的动力。</p><h1 id="5dab" class="mw mx iq bd my mz op nb nc nd oq nf ng jw or jx ni jz os ka nk kc ot kd nm nn bi translated">请继续阅读文章的第二部分。</h1><p id="e9f4" class="pw-post-body-paragraph kw kx iq ky b kz no jr lb lc np ju le lf nq lh li lj nr ll lm ln ns lp lq lr ij bi translated"><a class="ae kv" rel="noopener" target="_blank" href="/website-visitor-forecast-with-facebook-prophet-a-complete-tutorial-1d0a5bcd1f8f">请点击此处进入第二部分</a>。</p></div><div class="ab cl mp mq hu mr" role="separator"><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu"/></div><div class="ij ik il im in"><h2 id="fcd3" class="oa mx iq bd my ou ov dn nc ow ox dp ng lf oy oz ni lj pa pb nk ln pc pd nm pe bi translated">参考:</h2><div class="pf pg gp gr ph pi"><a href="https://facebook.github.io/prophet/" rel="noopener  ugc nofollow" target="_blank"><div class="pj ab fo"><div class="pk ab pl cl cj pm"><h2 class="bd ir gy z fp pn fr fs po fu fw ip bi translated">先知</h2><div class="pp l"><h3 class="bd b gy z fp pn fr fs po fu fw dk translated">Prophet 是一个用 R 和 Python 实现的预测程序。它速度很快，并提供完全自动化的预测…</h3></div><div class="pq l"><p class="bd b dl z fp pn fr fs po fu fw dk translated">facebook.github.io</p></div></div><div class="pr l"><div class="ps l pt pu pv pr pw kp pi"/></div></div></a></div><h2 id="85a9" class="oa mx iq bd my ou ov dn nc ow ox dp ng lf oy oz ni lj pa pb nk ln pc pd nm pe bi translated">您可能还喜欢:</h2><div class="pf pg gp gr ph pi"><a href="https://medium.com/analytics-vidhya/sales-analytics-churn-analysis-and-prediction-with-pyspark-98fffc169f36" rel="noopener follow" target="_blank"><div class="pj ab fo"><div class="pk ab pl cl cj pm"><h2 class="bd ir gy z fp pn fr fs po fu fw ip bi translated">销售分析:使用 PySpark 进行流失分析和预测</h2><div class="pp l"><h3 class="bd b gy z fp pn fr fs po fu fw dk translated">最后用保存的模型和管道进行基础数据可视化和预测</h3></div><div class="pq l"><p class="bd b dl z fp pn fr fs po fu fw dk translated">medium.com</p></div></div><div class="pr l"><div class="px l pt pu pv pr pw kp pi"/></div></div></a></div><div class="pf pg gp gr ph pi"><a rel="noopener follow" target="_blank" href="/pandas-data-wrangling-cheat-sheet-2021-cf70f577bcdd"><div class="pj ab fo"><div class="pk ab pl cl cj pm"><h2 class="bd ir gy z fp pn fr fs po fu fw ip bi translated">熊猫数据争论备忘单 2021</h2><div class="pp l"><h3 class="bd b gy z fp pn fr fs po fu fw dk translated">要在 Python 中 excel 数据分析/数据科学/机器学习，熊猫是你需要掌握的库。这里有一个骗局…</h3></div><div class="pq l"><p class="bd b dl z fp pn fr fs po fu fw dk translated">towardsdatascience.com</p></div></div><div class="pr l"><div class="py l pt pu pv pr pw kp pi"/></div></div></a></div><div class="pf pg gp gr ph pi"><a rel="noopener follow" target="_blank" href="/fundamental-marketing-analytics-f875018391d5"><div class="pj ab fo"><div class="pk ab pl cl cj pm"><h2 class="bd ir gy z fp pn fr fs po fu fw ip bi translated">基础营销分析</h2><div class="pp l"><h3 class="bd b gy z fp pn fr fs po fu fw dk translated">通过最近-频率-货币模型和使用 Python 的管理细分</h3></div><div class="pq l"><p class="bd b dl z fp pn fr fs po fu fw dk translated">towardsdatascience.com</p></div></div><div class="pr l"><div class="pz l pt pu pv pr pw kp pi"/></div></div></a></div></div></div>    
</body>
</html>