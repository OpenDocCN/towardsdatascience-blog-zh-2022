<html>
<head>
<title>Prompt Engineering GPT-3 to solve Project Euler problems</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">促使工程GPT-3解决项目欧拉问题</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/prompt-engineering-gpt-3-to-solve-project-euler-problems-1ff3b12f7d56#2022-11-02">https://towardsdatascience.com/prompt-engineering-gpt-3-to-solve-project-euler-problems-1ff3b12f7d56#2022-11-02</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="32fe" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">用人工智能解决数学问题，这样你就不用</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ki"><img src="../Images/04c6deadf45052aec031498a1c204aa2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1280/format:webp/1*xrqTRqtULawQwhNmEydZ9g.png"/></div><p class="kq kr gj gh gi ks kt bd b be z dk translated">可爱的霓虹灯机器人做数学！使用稳定扩散生成(作者)</p></figure><p id="a9fa" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">GPT-3在解决数学和编程问题上有多好？具体来说，GPT-3在解决欧拉项目的问题上有多好？</p><p id="a77a" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated"><a class="ae lq" href="https://projecteuler.net/" rel="noopener ugc nofollow" target="_blank"> Project Euler </a>(以<a class="ae lq" href="https://en.wikipedia.org/wiki/Leonhard_Euler" rel="noopener ugc nofollow" target="_blank">著名数学家</a>命名)是一个网站，里面有数百个数学和计算机编程问题，难度不等。我第一次了解欧拉项目是在中学的时候，当时我的(亚裔)父亲坚持让我在空闲时间从网站上做数学题，以提高数学水平(我很不情愿地这样做，也许这解释了为什么我现在的数学能力相当一般)。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ls lt di lu bf lv"><div class="gh gi lr"><img src="../Images/63680e14c3dce983df4a59d4008d2aec.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*q0FfC857a_3F7SFqw5h28g.png"/></div></div><p class="kq kr gj gh gi ks kt bd b be z dk translated">显示前十个问题的欧拉项目网站截图(作者)</p></figure><p id="f3df" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">GPT3是由<a class="ae lq" href="https://openai.com/api/" rel="noopener ugc nofollow" target="_blank"> OpenAI </a>于2020年创建的一个生成语言模型。它拥有理解和生成各种人类语言的巨大能力，包括回答常识问题、总结文章、<a class="ae lq" href="https://www.gwern.net/GPT-3" rel="noopener ugc nofollow" target="_blank">生成创意小说</a>、<a class="ae lq" href="https://www.copy.ai/" rel="noopener ugc nofollow" target="_blank">撰写营销内容</a>、<a class="ae lq" href="https://www.twilio.com/blog/generating-cooking-recipes-openai-gpt3-ruby" rel="noopener ugc nofollow" target="_blank">创作菜谱、</a>和<a class="ae lq" href="https://pub.towardsai.net/crazy-gpt-3-use-cases-232c22142044" rel="noopener ugc nofollow" target="_blank">其他疯狂用例</a>。GPT-3也被用来解决小学数学问题。</p><p id="8750" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">但是欧拉项目的复杂问题呢？欧拉项目网站对它的问题做了如下描述:“<em class="lw">尽管数学将帮助你找到优雅而高效的方法，但解决大多数问题需要使用计算机和编程技巧</em>”这表明数学知识和编程技能的结合可能是解决这些问题所必需的。</p><p id="87b4" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">让我们来测试一下GPT 3号！在这篇文章中，我将展示提示工程的迭代步骤，或者制作用于提示GPT-3生成答案的文本，我采取这些步骤是为了从几个项目欧拉问题中获得正确的解决方案。</p><h1 id="eed7" class="lx ly it bd lz ma mb mc md me mf mg mh jz mi ka mj kc mk kd ml kf mm kg mn mo bi translated">GPT-3</h1><p id="e00c" class="pw-post-body-paragraph ku kv it kw b kx mp ju kz la mq jx lc ld mr lf lg lh ms lj lk ll mt ln lo lp im bi translated">为了使用GPT-3，我使用了<a class="ae lq" href="https://beta.openai.com/playground" rel="noopener ugc nofollow" target="_blank"> OpenAI Playground </a>，它可以让你使用友好的UI与GPT-3一起玩。您可以调整许多不同的超参数或设置来获得不同的结果，它们显示在右侧的窗格中。<a class="ae lq" rel="noopener" target="_blank" href="/gpt-3-parameters-and-prompt-design-1a595dc5b405">这篇文章</a>详细介绍了不同超参数的含义。对于我的实验，我保留了所有的默认设置。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ls lt di lu bf lv"><div class="gh gi mu"><img src="../Images/88734575aeb73e9c9b98619f4fd45c62.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rQHzDdBdWNPqNPzhgVnVIg.png"/></div></div><p class="kq kr gj gh gi ks kt bd b be z dk translated">OpenAI游乐场使用GPT 3的截图(作者)</p></figure></div><div class="ab cl mv mw hx mx" role="separator"><span class="my bw bk mz na nb"/><span class="my bw bk mz na nb"/><span class="my bw bk mz na"/></div><div class="im in io ip iq"><h1 id="2c13" class="lx ly it bd lz ma nc mc md me nd mg mh jz ne ka mj kc nf kd ml kf ng kg mn mo bi translated">问题1:3或5的倍数(5%难度)</h1><p id="2645" class="pw-post-body-paragraph ku kv it kw b kx mp ju kz la mq jx lc ld mr lf lg lh ms lj lk ll mt ln lo lp im bi translated">欧拉项目的<a class="ae lq" href="https://projecteuler.net/problem=1" rel="noopener ugc nofollow" target="_blank">第一个问题难度较低，可以认为是对网站上可以找到的各种问题的介绍。内容如下:</a></p><pre class="kj kk kl km gt nh ni nj nk aw nl bi"><span id="fa0e" class="nm ly it ni b gy nn no l np nq">If we list all the natural numbers below 10 that are multiples of 3 or 5, we get 3, 5, 6 and 9. The sum of these multiples is 23.</span><span id="0b54" class="nm ly it ni b gy nr no l np nq">Find the sum of all the multiples of 3 or 5 below 1000.</span></pre><h2 id="9bdb" class="nm ly it bd lz ns nt dn md nu nv dp mh ld nw nx mj lh ny nz ml ll oa ob mn oc bi translated">尝试1:天真的方法(自然语言)</h2><p id="f97e" class="pw-post-body-paragraph ku kv it kw b kx mp ju kz la mq jx lc ld mr lf lg lh ms lj lk ll mt ln lo lp im bi translated">一个简单(且天真)的方法可能是一字不差地向GPT-3提出这个问题。这是我直接从网站上复制粘贴的。GPT 3号的输出以绿色突出显示。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ls lt di lu bf lv"><div class="gh gi od"><img src="../Images/70d3effd80b56301976000e4a0eea23c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*NFdsFdEyw4PdxANeZ7Bl9Q.png"/></div></div><p class="kq kr gj gh gi ks kt bd b be z dk translated">第一次尝试解决问题1的GPT 3代(作者)</p></figure><p id="6c7d" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">正如你所看到的，GPT-3开始时很强大，但后来迷失在它的手动方法中，列出了所有能被3或5整除的数字。事实上，它失去了动力，很快就放弃了。即使你不是一个学数学的人，你也可能会推断出这显然不是解决这个问题的最佳方法。那么我们还能做什么呢？</p><h2 id="5c50" class="nm ly it bd lz ns nt dn md nu nv dp mh ld nw nx mj lh ny nz ml ll oa ob mn oc bi translated">尝试二:自然语言+思维链</h2><p id="14e8" class="pw-post-body-paragraph ku kv it kw b kx mp ju kz la mq jx lc ld mr lf lg lh ms lj lk ll mt ln lo lp im bi translated">最近在机器学习中，出现了一个新概念叫做<a class="ae lq" href="https://arxiv.org/abs/2201.11903" rel="noopener ugc nofollow" target="_blank">思维链提示</a>。本质上，不是提示语言模型你想要它做的任务，而是强迫它一步一步地推理任务——就像你在现实生活中可能做的那样(而不是“让我起床”，思维链推理可能会像这样:“让我把被子推开”——&gt;“让我把一只脚放在地上”——&gt;“让我把另一只脚放在地上”，等等)。</p><p id="74c0" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">因此，在下一次迭代中，我在原问题的末尾添加了“让我们一步一步思考”这句话。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ls lt di lu bf lv"><div class="gh gi oe"><img src="../Images/7e74c10e75b99c878443bbdfe9520c40.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mJWHVWqHjDmTBPGc-hDRWA.png"/></div></div><p class="kq kr gj gh gi ks kt bd b be z dk translated">第二次尝试解决问题1时由GPT-3生成(作者)</p></figure><p id="ef35" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">GPT 3号似乎朝着正确的方向前进……直到它转向一个完全不同的方向。它知道寻找3的倍数和5的倍数的数字，但是它忘记了最初的任务，并且在途中的某个地方搞砸了。(你能想出在哪里或发生了什么吗？)</p><h2 id="3a69" class="nm ly it bd lz ns nt dn md nu nv dp mh ld nw nx mj lh ny nz ml ll oa ob mn oc bi translated">尝试3:程序化方法</h2><p id="d874" class="pw-post-body-paragraph ku kv it kw b kx mp ju kz la mq jx lc ld mr lf lg lh ms lj lk ll mt ln lo lp im bi translated">我从之前的尝试中得出的一个假设是，对于需要数学和编程知识的复杂问题，GPT-3可能会被纯文本混淆，如果它使用编码语言思考，可能会表现得更好。由于GPT-3也接受了代码训练，所以值得一试。尤其是因为其他人已经看到了GPT 3号通过将数学问题翻译成代码取得的良好结果。</p><p id="7db6" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">因此，我在格式化问题/解决方案示例中重新格式化了问题陈述。这是一个<a class="ae lq" rel="noopener" target="_blank" href="/zero-and-few-shot-learning-c08e145dc4ed">少数镜头学习</a>的例子，这是当模型从少数例子(在这种情况下，一个例子)学习如何解决产生的问题(事实上，GPT-3是众所周知的少数镜头学习！).然后我促使GPT-3想出一个“程序化的方法”来解决这个问题。然后，我用一个代码块的开头提示它，它就想到了解决问题的办法。</p><pre class="kj kk kl km gt nh ni nj nk aw nl bi"><span id="4a30" class="nm ly it ni b gy nn no l np nq">## Example:<br/>Problem: Find the sum of all the multiples of 3 or 5 below 10.<br/>Solution: If we list all the natural numbers below 10 that are multiples of 3 or 5, we get 3,5,6 and 9. Th esum of these multiples is 23.<br/>Answer: 23<br/>---<br/>Problem: Find the sum of all the multiples of 3 or 5 below 1000.<br/>Solution: Let's think of a programmatic way to solve the problem.</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ls lt di lu bf lv"><div class="gh gi of"><img src="../Images/ea2f05a6eb60c71137059d8945669091.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*HyjAhMP1ItSPg32x7XtnDA.png"/></div></div><p class="kq kr gj gh gi ks kt bd b be z dk translated">第三次尝试解决问题1时由GPT-3生成(作者)</p></figure><p id="ce76" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">结果看起来干净简洁。如果将代码复制到Python解释器中，就能得到正确的答案。然而，对于像我这样懒惰的人来说，为了得到你的答案，这是一个额外的步骤。如果您希望答案不费吹灰之力就能送到您手中，该怎么办？这可能吗？</p><h2 id="3246" class="nm ly it bd lz ns nt dn md nu nv dp mh ld nw nx mj lh ny nz ml ll oa ob mn oc bi translated">尝试4:方案方法+参数化响应</h2><p id="3813" class="pw-post-body-paragraph ku kv it kw b kx mp ju kz la mq jx lc ld mr lf lg lh ms lj lk ll mt ln lo lp im bi translated">在我的最后一次尝试中，我将编程方法与强制GPT-3使用参数将其输出格式化成某种格式相结合。GPT-3将知道根据我的提示把问题和答案放到正确的部分。</p><pre class="kj kk kl km gt nh ni nj nk aw nl bi"><span id="d565" class="nm ly it ni b gy nn no l np nq">Use this format to find the solution:<br/>Problem: ${Problem}<br/>IPython session:<br/>```<br/>${IPython function and commands needed to find solution}<br/>```<br/>Answer: ${Answer}</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ls lt di lu bf lv"><div class="gh gi og"><img src="../Images/3eacb33d6e0cc6b54a45dbf326533d79.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*x_IOeVv8mxo0vv_iZEmp1g.png"/></div></div><p class="kq kr gj gh gi ks kt bd b be z dk translated">第四次(也是最后一次)尝试解决问题1的GPT 3代(作者)</p></figure><p id="e406" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">我们走吧！我们得到了迄今为止最简洁的解，答案在最后给了我，所以我根本不用做额外的工作。</p></div><div class="ab cl mv mw hx mx" role="separator"><span class="my bw bk mz na nb"/><span class="my bw bk mz na nb"/><span class="my bw bk mz na"/></div><div class="im in io ip iq"><h1 id="805e" class="lx ly it bd lz ma nc mc md me nd mg mh jz ne ka mj kc nf kd ml kf ng kg mn mo bi translated">其他问题呢？</h1><p id="2f8b" class="pw-post-body-paragraph ku kv it kw b kx mp ju kz la mq jx lc ld mr lf lg lh ms lj lk ll mt ln lo lp im bi translated">这是第一个也是最简单的欧拉问题。更难的问题呢？</p><h1 id="6936" class="lx ly it bd lz ma mb mc md me mf mg mh jz mi ka mj kc mk kd ml kf mm kg mn mo bi translated">问题51 —质数替换(15%难度)</h1><p id="46ad" class="pw-post-body-paragraph ku kv it kw b kx mp ju kz la mq jx lc ld mr lf lg lh ms lj lk ll mt ln lo lp im bi translated">我们可以用同样的方法解决一个稍微难一点的问题。<a class="ae lq" href="https://projecteuler.net/problem=51" rel="noopener ugc nofollow" target="_blank">问题51 </a>是关于质数替换的，难度略高(难度等级为15%)。正如你所看到的，这个问题稍微长一些，也更复杂一些。</p><pre class="kj kk kl km gt nh ni nj nk aw nl bi"><span id="a935" class="nm ly it ni b gy nn no l np nq">By replacing the 1st digit of the 2-digit number *3, it turns out that six of the nine possible values: 13, 23, 43, 53, 73, and 83, are all prime.</span><span id="87a5" class="nm ly it ni b gy nr no l np nq">By replacing the 3rd and 4th digits of 56**3 with the same digit, this 5-digit number is the first example having seven primes among the ten generated numbers, yielding the family: 56003, 56113, 56333, 56443, 56663, 56773, and 56993. Consequently 56003, being the first member of this family, is the smallest prime with this property.</span><span id="2eb9" class="nm ly it ni b gy nr no l np nq">Problem: Find the smallest prime which, by replacing part of the number (not necessarily adjacent digits) with the same digit, is part of an eight prime value family.</span><span id="99c8" class="nm ly it ni b gy nr no l np nq">Use this format to find the solution:<br/>Problem: ${Problem}<br/>IPython session:<br/>```<br/>${IPython function and commands needed to find solution}<br/>```<br/>Answer: ${Answer}</span></pre><p id="1895" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">我使用了与上次尝试解决问题1时相同的格式——通过编程迫使GPT-3解决问题。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ls lt di lu bf lv"><div class="gh gi og"><img src="../Images/ec384b326689c8a283c56e4ca8fe815a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fxCMj7hPU6ZBpplkaSC5Zw.png"/></div></div></figure><p id="2a22" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">答案是正确的！我能够毫不费力地获得这个答案，只需从Project Euler网站上复制并粘贴问题，并使用与我解决问题1时相同的提示格式。</p><h2 id="40c4" class="nm ly it bd lz ns nt dn md nu nv dp mh ld nw nx mj lh ny nz ml ll oa ob mn oc bi translated">问题111 —质数替换(45%难度)</h2><p id="4aae" class="pw-post-body-paragraph ku kv it kw b kx mp ju kz la mq jx lc ld mr lf lg lh ms lj lk ll mt ln lo lp im bi translated">我想挑战GPT-3的数学能力，所以我强迫它解决了第111个问题(45%难度)。这个问题肯定需要我思考才能解决，但是GPT 3号只用了10秒钟就解决了。这个问题比前两个问题更复杂，因为它包括一个表格和几个解释问题的段落。</p><pre class="kj kk kl km gt nh ni nj nk aw nl bi"><span id="0ba6" class="nm ly it ni b gy nn no l np nq">Considering 4-digit primes containing repeated digits it is clear that they cannot all be the same: 1111 is divisible by 11, 2222 is divisible by 22, and so on. But there are nine 4-digit primes containing three ones:</span><span id="65cf" class="nm ly it ni b gy nr no l np nq">1117, 1151, 1171, 1181, 1511, 1811, 2111, 4111, 8111</span><span id="e650" class="nm ly it ni b gy nr no l np nq">We shall say that M(n, d) represents the maximum number of repeated digits for an n-digit prime where d is the repeated digit, N(n, d) represents the number of such primes, and S(n, d) represents the sum of these primes.</span><span id="427b" class="nm ly it ni b gy nr no l np nq">So M(4, 1) = 3 is the maximum number of repeated digits for a 4-digit prime where one is the repeated digit, there are N(4, 1) = 9 such primes, and the sum of these primes is S(4, 1) = 22275. It turns out that for d = 0, it is only possible to have M(4, 0) = 2 repeated digits, but there are N(4, 0) = 13 such cases.</span><span id="3d81" class="nm ly it ni b gy nr no l np nq">In the same way we obtain the following results for 4-digit primes.<br/>Digit, d M(4, d) N(4, d) S(4, d)<br/>0 2 13 67061<br/>1 3 9 22275<br/>2 3 1 2221<br/>3 3 12 46214<br/>4 3 2 8888<br/>5 3 1 5557<br/>6 3 1 6661<br/>7 3 9 57863<br/>8 3 1 8887<br/>9 3 7 48073</span><span id="69b6" class="nm ly it ni b gy nr no l np nq">For d = 0 to 9, the sum of all S(4, d) is 273700.</span><span id="b4a6" class="nm ly it ni b gy nr no l np nq">Problem: Find the sum of all S(10, d).</span><span id="970b" class="nm ly it ni b gy nr no l np nq">Use recursion in the final solution.</span><span id="32c3" class="nm ly it ni b gy nr no l np nq">Use this format to find the solution:<br/>Problem: ${Problem}<br/>IPython session:<br/>```<br/>${IPython function and commands needed to find solution}<br/>```<br/>Answer: ${Answer}</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi oh"><img src="../Images/61c7c9d6d3fe816dbc6b567fab4f487e.png" data-original-src="https://miro.medium.com/v2/resize:fit:732/format:webp/1*pseulUZVZ5BHJa0GFdPwgA.png"/></div><p class="kq kr gj gh gi ks kt bd b be z dk translated">问题111的GPT-3输出(作者截图)</p></figure><p id="aa8d" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">这一次，GPT 3号的代码又长又复杂。虽然我很难说出GPT-3在训练中记住了多少代码，以及它自己进行了多少推理，但它最终能够获得正确的答案。</p></div><div class="ab cl mv mw hx mx" role="separator"><span class="my bw bk mz na nb"/><span class="my bw bk mz na nb"/><span class="my bw bk mz na"/></div><div class="im in io ip iq"><h1 id="75f2" class="lx ly it bd lz ma nc mc md me nd mg mh jz ne ka mj kc nf kd ml kf ng kg mn mo bi translated">结论</h1><p id="2aad" class="pw-post-body-paragraph ku kv it kw b kx mp ju kz la mq jx lc ld mr lf lg lh ms lj lk ll mt ln lo lp im bi translated">在本文中，我经历了不同的尝试，这些尝试是我用来迭代我的提示，以从GPT-3中引出不同的响应来解决Project Euler数学问题。主要收获是，我们不断学习接近GPT 3号的最佳方法，以便为我们执行某些任务。虽然在某些情况下，直截了当的提示可能会得到你想要的答案，但更有创意的提示可能会得到更有趣或更正确的答案！</p></div><div class="ab cl mv mw hx mx" role="separator"><span class="my bw bk mz na nb"/><span class="my bw bk mz na nb"/><span class="my bw bk mz na"/></div><div class="im in io ip iq"><p id="4bae" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated"><em class="lw">如果你喜欢这篇文章，你可以在我的帖子里看到更多这样的内容！</em><a class="ae lq" href="https://blog.yenniejun.com/" rel="noopener ugc nofollow" target="_blank"><em class="lw"/></a></p></div></div>    
</body>
</html>