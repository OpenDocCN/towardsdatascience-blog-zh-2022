<html>
<head>
<title>COVID-19 Mortality Triage with Streamlit, Pycaret, and Shap</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Streamlit、Pycaret和Shap进行新冠肺炎死亡率分类</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/covid-19-mortality-triage-with-streamlit-pycaret-and-shap-a8f0dca64c7d#2022-10-29">https://towardsdatascience.com/covid-19-mortality-triage-with-streamlit-pycaret-and-shap-a8f0dca64c7d#2022-10-29</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="f56e" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">用强大的Python工具构建临床决策支持系统</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/2b22d684e845a9e20227ff065adb906f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*HxsgM4ZnZ2gb914q"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">图片来自<a class="ae ky" href="https://unsplash.com/@patrickassale" rel="noopener ugc nofollow" target="_blank">Patrick Assale</a>@<a class="ae ky" href="https://unsplash.com/" rel="noopener ugc nofollow" target="_blank">Unsplash</a></p></figure><h2 id="3700" class="kz la it bd lb lc ld dn le lf lg dp lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">背景</h2><p id="4be7" class="pw-post-body-paragraph lv lw it lx b ly lz ju ma mb mc jx md li me mf mg lm mh mi mj lq mk ml mm mn im bi translated">我最近接受了一个项目的任务，目标是设想如何创建一个工具，帮助临床医生识别进入重症监护病房的新冠肺炎患者的死亡风险。这种工具也称为“临床决策支持系统”，需要为临床医生提供数据驱动的健康信息，如以前的新冠肺炎患者结果或当前的患者死亡风险，以做出明智的护理决策。</p><p id="ba70" class="pw-post-body-paragraph lv lw it lx b ly mo ju ma mb mp jx md li mq mf mg lm mr mi mj lq ms ml mm mn im bi translated">就像任何真正的修补匠会做的那样，我认为<em class="mt">设想</em>某事的最好方式是<strong class="lx iu">自己创造</strong>。而且，作为一个python爱好者，我认为会有很多工具可以实现这一点。因此，本教程概述了我如何用强大的python库创建了一个新冠肺炎临床决策支持系统，并为您提供了自己重新创建或重新构想该项目的资源。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mu"><img src="../Images/c5294ed1ffdc45ff462d1da8275e8333.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*q1NKDQSsdxggApDjNV9Akg.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">在最终产品上偷瞄:<a class="ae ky" href="https://covidtriage.streamlitapp.com/" rel="noopener ugc nofollow" target="_blank">https://covidtriage.streamlitapp.com/</a></p></figure><h2 id="71b0" class="kz la it bd lb lc ld dn le lf lg dp lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">概述</h2><p id="93e2" class="pw-post-body-paragraph lv lw it lx b ly lz ju ma mb mc jx md li me mf mg lm mh mi mj lq mk ml mm mn im bi translated">我从机器学习问题的角度来看待这个项目。因此，该项目概述如下:</p><ol class=""><li id="36d2" class="mv mw it lx b ly mo mb mp li mx lm my lq mz mn na nb nc nd bi translated">获取数据(重症监护室中患有新冠肺炎的患者)</li><li id="cd33" class="mv mw it lx b ly ne mb nf li ng lm nh lq ni mn na nb nc nd bi translated">训练和测试机器学习模型(死亡与幸存)</li><li id="01b4" class="mv mw it lx b ly ne mb nf li ng lm nh lq ni mn na nb nc nd bi translated">将机器学习模型部署到用户界面</li></ol><h2 id="25f7" class="kz la it bd lb lc ld dn le lf lg dp lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">安装库</h2><p id="2378" class="pw-post-body-paragraph lv lw it lx b ly lz ju ma mb mc jx md li me mf mg lm mh mi mj lq mk ml mm mn im bi translated">这个项目的核心库包括Pandas、Pycaret、Shap和Streamlit。所有这些都用于解决特定的需求。</p><ul class=""><li id="32d4" class="mv mw it lx b ly mo mb mp li mx lm my lq mz mn nj nb nc nd bi translated">熊猫:数据处理和分析</li><li id="f7a3" class="mv mw it lx b ly ne mb nf li ng lm nh lq ni mn nj nb nc nd bi translated">Pycaret:构建低代码机器学习管道</li><li id="1720" class="mv mw it lx b ly ne mb nf li ng lm nh lq ni mn nj nb nc nd bi translated">Shap:分析和可视化特征对模型预测的影响</li><li id="435d" class="mv mw it lx b ly ne mb nf li ng lm nh lq ni mn nj nb nc nd bi translated">Streamlit: python驱动的应用开发</li><li id="4016" class="mv mw it lx b ly ne mb nf li ng lm nh lq ni mn nj nb nc nd bi translated">Plotly:高质量的交互式图表</li></ul><p id="e080" class="pw-post-body-paragraph lv lw it lx b ly mo ju ma mb mp jx md li mq mf mg lm mr mi mj lq ms ml mm mn im bi translated">要安装这些库，请打开命令行提示符或终端，并输入以下内容。</p><pre class="kj kk kl km gt nk nl nm nn aw no bi"><span id="34f1" class="kz la it nl b gy np nq l nr ns">pip install pandas<br/>pip install pycaret<br/>pip install shap<br/>pip install streamlit<br/>pip install plotly</span></pre><p id="10b2" class="pw-post-body-paragraph lv lw it lx b ly mo ju ma mb mp jx md li mq mf mg lm mr mi mj lq ms ml mm mn im bi translated">本教程中的其他库是Streamlit的组件，用于改善用户界面/体验。</p><pre class="kj kk kl km gt nk nl nm nn aw no bi"><span id="109c" class="kz la it nl b gy np nq l nr ns">pip install streamlit_option_menu<br/>pip install streamlit_shap<br/>pip install streamlit_echarts</span></pre><h1 id="2a98" class="nt la it bd lb nu nv nw le nx ny nz lh jz oa ka ll kc ob kd lp kf oc kg lt od bi translated">获取数据</h1><p id="96c4" class="pw-post-body-paragraph lv lw it lx b ly lz ju ma mb mc jx md li me mf mg lm mh mi mj lq mk ml mm mn im bi translated">这个项目的主要障碍之一是为模型训练获取数据。由于没有来自重症监护的新冠肺炎患者的开源数据库，我认为最好的方法是创建自己的数据库。为此，我找到了一篇解决类似问题的论文。下面的论文概述了影响新冠肺炎患者死亡率预测的几个关键特征。然后，我对这些特征进行了松散的逆向工程，以生成一个代理数据集。</p><div class="oe of gp gr og oh"><a href="https://www.frontiersin.org/articles/10.3389/fdgth.2021.681608/full" rel="noopener  ugc nofollow" target="_blank"><div class="oi ab fo"><div class="oj ab ok cl cj ol"><h2 class="bd iu gy z fp om fr fs on fu fw is bi translated">使用机器学习预测ICU中新冠肺炎患者第0天的死亡率</h2><div class="oo l"><h3 class="bd b gy z fp om fr fs on fu fw dk translated">理由:考虑到新冠肺炎病例数量的增加和新一波感染的潜在可能，有一种…</h3></div><div class="op l"><p class="bd b dl z fp om fr fs on fu fw dk translated">www.frontiersin.org</p></div></div><div class="oq l"><div class="or l os ot ou oq ov ks oh"/></div></div></a></div><pre class="kj kk kl km gt nk nl nm nn aw no bi"><span id="f794" class="kz la it nl b gy np nq l nr ns">import random as rand<br/>import pandas as pd<br/>import numpy as np<br/>samples = 1000</span><span id="2c52" class="kz la it nl b gy ow nq l nr ns">age_m = 58.0<br/>age_std = 9.0</span><span id="b3c1" class="kz la it nl b gy ow nq l nr ns">bun_m = 16.0<br/>bun_std = 6.5</span><span id="a53f" class="kz la it nl b gy ow nq l nr ns">creatine_m = 1.1<br/>creatine = 0.3</span><span id="68d1" class="kz la it nl b gy ow nq l nr ns">inr_m = 1.2<br/>inr_std = 0.1</span><span id="2875" class="kz la it nl b gy ow nq l nr ns">survived = pd.DataFrame()<br/>survived['Age'] = np.random.normal(loc=age_m,scale=age_std,size=samples)<br/>survived['Gender'] = np.random.binomial(1, 0.367, size=samples)<br/>survived['Blood Urea Nitrogen'] = np.random.normal(loc=bun_m,scale=bun_std,size=samples)<br/>survived['Cardiovascular History'] = np.random.binomial(1, 0.291, size=samples)<br/>survived['Neurological History'] = np.random.binomial(1, 0.16, size=samples)<br/>survived['Int Norm Ratio'] = np.random.normal(loc=inr_m,scale=inr_std,size=samples)</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ox"><img src="../Images/74072070fc98a7d98b09361cefcd6434.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*MzkOk8AoZZaav9Z6a0QDcQ.png"/></div></div></figure><pre class="kj kk kl km gt nk nl nm nn aw no bi"><span id="6e06" class="kz la it nl b gy np nq l nr ns">age_m = 72.5<br/>age_std = 8.25</span><span id="6b89" class="kz la it nl b gy ow nq l nr ns">bun_m = 30.0<br/>bun_std = 9.0</span><span id="96a4" class="kz la it nl b gy ow nq l nr ns">creatine_m = 1.5<br/>creatine = 0.4</span><span id="6088" class="kz la it nl b gy ow nq l nr ns">inr_m = 1.3<br/>inr_std = 0.1</span><span id="938a" class="kz la it nl b gy ow nq l nr ns">deceased = pd.DataFrame()<br/>deceased['Age'] = np.random.normal(loc=age_m,scale=age_std,size=samples)<br/>deceased['Gender'] = np.random.binomial(1, 0.646, size=samples)<br/>deceased['Blood Urea Nitrogen'] = np.random.normal(loc=bun_m,scale=bun_std,size=samples)<br/>deceased['Cardiovascular History'] = np.random.binomial(1, 0.709, size=samples)<br/>deceased['Neurological History'] = np.random.binomial(1, 0.840, size=samples)<br/>deceased['Int Norm Ratio'] = np.random.normal(loc=inr_m,scale=inr_std,size=samples)</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oy"><img src="../Images/d73558a55ef9332fe868e30910a1cf40.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jR13qJnjHfv_b7DKfVccwg.png"/></div></div></figure><p id="bf4a" class="pw-post-body-paragraph lv lw it lx b ly mo ju ma mb mp jx md li mq mf mg lm mr mi mj lq ms ml mm mn im bi translated">然后，组合、重组并保存数据帧来表示我的模型训练数据集。</p><pre class="kj kk kl km gt nk nl nm nn aw no bi"><span id="9ab6" class="kz la it nl b gy np nq l nr ns">train = pd.concat([survived, deceased])<br/>train = train.sample(frac=1).reset_index(drop=True)<br/>train.to_csv('COVID_TRAIN.csv')</span></pre><h1 id="aa35" class="nt la it bd lb nu nv nw le nx ny nz lh jz oa ka ll kc ob kd lp kf oc kg lt od bi translated">创建模型</h1><p id="72f0" class="pw-post-body-paragraph lv lw it lx b ly lz ju ma mb mc jx md li me mf mg lm mh mi mj lq mk ml mm mn im bi translated">接下来，我使用Pycaret的监督分类功能来设置、训练和评估一个识别死者和幸存者的模型。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oz"><img src="../Images/20e25e876507dc22496aee874eea88da.png" data-original-src="https://miro.medium.com/v2/resize:fit:1326/format:webp/1*0yZ_sPfpKlBoaQRnR8O1lA.png"/></div></div></figure><h1 id="65e7" class="nt la it bd lb nu nv nw le nx ny nz lh jz oa ka ll kc ob kd lp kf oc kg lt od bi translated">创建用户界面</h1><p id="af9c" class="pw-post-body-paragraph lv lw it lx b ly lz ju ma mb mc jx md li me mf mg lm mh mi mj lq mk ml mm mn im bi translated">一旦模型适合我的需求，我就开始创建用户界面。我认为临床医生必须具备的三个主要要素是:</p><ul class=""><li id="933f" class="mv mw it lx b ly mo mb mp li mx lm my lq mz mn nj nb nc nd bi translated">易用性</li><li id="bdbf" class="mv mw it lx b ly ne mb nf li ng lm nh lq ni mn nj nb nc nd bi translated">可解释的模型预测</li><li id="7eca" class="mv mw it lx b ly ne mb nf li ng lm nh lq ni mn nj nb nc nd bi translated">当前和过去患者的特征探索</li></ul><p id="3ec3" class="pw-post-body-paragraph lv lw it lx b ly mo ju ma mb mp jx md li mq mf mg lm mr mi mj lq ms ml mm mn im bi translated">Streamlit提供了严格使用python语法来构建漂亮的web应用程序的能力。因此，用户界面仅由Streamlit和相关组件构建。</p><h2 id="8c44" class="kz la it bd lb lc ld dn le lf lg dp lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">设置</h2><p id="46a9" class="pw-post-body-paragraph lv lw it lx b ly lz ju ma mb mc jx md li me mf mg lm mh mi mj lq mk ml mm mn im bi translated">安装库并设置Streamlit页面配置。</p><pre class="kj kk kl km gt nk nl nm nn aw no bi"><span id="57f3" class="kz la it nl b gy np nq l nr ns">import streamlit as st<br/>import pandas as pd<br/>from streamlit_option_menu import option_menu<br/>from pycaret.classification import *<br/>import plotly.express as px<br/>import shap<br/>from streamlit_shap import st_shap<br/>from streamlit_echarts import st_echarts</span><span id="a437" class="kz la it nl b gy ow nq l nr ns">#set settings for streamlit page<br/>st.set_page_config(layout="wide",<br/>    page_title="COVID Triage",<br/>    page_icon="chart_with_upwards_trend")</span><span id="4c9a" class="kz la it nl b gy ow nq l nr ns">#hide streamlit menu bar<br/>hide_streamlit_style = """<br/>        &lt;style&gt;<br/>        #MainMenu {visibility: hidden;}<br/>        footer {visibility: hidden;}<br/>        &lt;/style&gt;<br/>        """<br/>st.markdown(hide_streamlit_style, unsafe_allow_html=True)</span></pre><h2 id="e536" class="kz la it bd lb lc ld dn le lf lg dp lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">模型</h2><p id="2e9c" class="pw-post-body-paragraph lv lw it lx b ly lz ju ma mb mc jx md li me mf mg lm mh mi mj lq mk ml mm mn im bi translated">初始化训练数据和模型。</p><pre class="kj kk kl km gt nk nl nm nn aw no bi"><span id="fdad" class="kz la it nl b gy np nq l nr ns">#use pandas to read covid data for model training and creation<br/>train = pd.read_csv('COVID_TRAIN.csv')<br/>#use pycaret to preprocess and train a decision tree supervised ML model<br/>exp = setup(train, target = 'class', silent=True, verbose=False)<br/>dt = create_model('dt')</span></pre><h2 id="0d31" class="kz la it bd lb lc ld dn le lf lg dp lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">菜单栏</h2><p id="7583" class="pw-post-body-paragraph lv lw it lx b ly lz ju ma mb mc jx md li me mf mg lm mh mi mj lq mk ml mm mn im bi translated">创建一个菜单栏，在登录和COVID triage之间切换。</p><pre class="kj kk kl km gt nk nl nm nn aw no bi"><span id="7884" class="kz la it nl b gy np nq l nr ns">#option menu from streamlit component streamlit_option_menu<br/>with st.sidebar:<br/>    selected = option_menu(None, ["Log In", "COVID Triage"], <br/>    icons=['house',  "list-task"], <br/>    menu_icon="cast", default_index=0, orientation="vertical")</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi pa"><img src="../Images/d2d103d1aa9498df01d3c1bda57f96fe.png" data-original-src="https://miro.medium.com/v2/resize:fit:848/format:webp/1*OH7_roeb9OD9fdamu7Tdgw.png"/></div></figure><h2 id="9cbb" class="kz la it bd lb lc ld dn le lf lg dp lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">登录页面</h2><p id="756f" class="pw-post-body-paragraph lv lw it lx b ly lz ju ma mb mc jx md li me mf mg lm mh mi mj lq mk ml mm mn im bi translated">为简单的不起作用的登录页面创建逻辑。</p><pre class="kj kk kl km gt nk nl nm nn aw no bi"><span id="b23c" class="kz la it nl b gy np nq l nr ns">if selected == 'Log In':<br/>    st.title('Covid 19 Mortality Risk Clinical Decision Support System')<br/>    if 'user_name' not in st.session_state:<br/>        st.session_state.user_name = 'User Name'<br/>    user_name = st.text_input("User Name", value = st.session_state.user_name)<br/>    st.session_state.user_name = user_name<br/>    password = st.text_input("Password", type="password")<br/>    st.session_state.password = password<br/>    if st.session_state.password:<br/>        sc = "Welcome " + st.session_state.user_name + " please proceed to COVID Triage"<br/>        st.success(sc)</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pb"><img src="../Images/2ec80803b7f998484039aee8c58ea065.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8i8TpA6y5iEDQ0pOsKIlEA.png"/></div></div></figure><h2 id="32cf" class="kz la it bd lb lc ld dn le lf lg dp lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">新冠肺炎分流页面-用户输入</h2><p id="bc27" class="pw-post-body-paragraph lv lw it lx b ly lz ju ma mb mc jx md li me mf mg lm mh mi mj lq mk ml mm mn im bi translated">创建小部件以获取与训练数据中的特征相对应的用户输入。</p><pre class="kj kk kl km gt nk nl nm nn aw no bi"><span id="fc77" class="kz la it nl b gy np nq l nr ns">#covid triage page<br/>#feature inputs correspond to training data<br/>if selected == 'COVID Triage':<br/>    col1, col2, col3= st.columns(3)<br/>    with col1:<br/>        name = st.text_input("Patient ID")<br/>    with col2:<br/>        gender = st.selectbox("Gender", (0, 1), help = "0 = Female, 1 = Male")<br/>    with col3:<br/>        age = st.number_input("Age", step = 1)</span><span id="eb2f" class="kz la it nl b gy ow nq l nr ns">ccol1, ccol2, ccol3, ccol4= st.columns(4)<br/>    with ccol1:<br/>        bun = st.slider("Blood Urea Nitrogen", min_value=0, max_value=60)<br/>    with ccol2:<br/>        inr = st.slider("International Normalized Ratio", min_value=0.88, max_value=1.66)<br/>    with ccol3:<br/>        honeuro = st.selectbox("History of Neurological Disorder", (0, 1), help = "0 = No history of neurological disorders, 1 = History of neurological disorders")<br/>    with ccol4:<br/>        hocard = st.selectbox("History of Cardiovascular Disorder", (0, 1), help = "0 = No history of cardiovascular disorders, 1 = History of cardiovascular disorders")<br/>        <br/>    test = pd.DataFrame({"Age": [age], "Gender":[int(gender)],"Blood Urea Nitrogen":[bun], "Cardiovascular History":[int(hocard)], "Neurological History":[int(honeuro)], "Int Norm Ratio":[inr]})</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pc"><img src="../Images/9a8d318191855d99fdfc2c43cdfc26c8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fVrG2rSWKd8MNkCZGy9lXw.png"/></div></div></figure><h2 id="4bd1" class="kz la it bd lb lc ld dn le lf lg dp lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">新冠肺炎分流页面-模型预测和信心</h2><p id="bb29" class="pw-post-body-paragraph lv lw it lx b ly lz ju ma mb mc jx md li me mf mg lm mh mi mj lq mk ml mm mn im bi translated">设置预测值和置信值的显示和逻辑。</p><pre class="kj kk kl km gt nk nl nm nn aw no bi"><span id="5b46" class="kz la it nl b gy np nq l nr ns">preds = predict_model(dt, test)<br/>    st.sidebar.text('Risk Prediction and Confidence')<br/>    preds['Mortality Risk'] = preds['Label'].replace([0,1], ['Low Mortality Risk', 'High Mortality Risk'])<br/>    if preds['Label'].iloc[0] == 0:<br/>        #display if label = 0 (low mortality risk)<br/>        st.sidebar.info(preds['Mortality Risk'].iloc[0])<br/>        liquidfill_option = {<br/>            "series": [{"type": "liquidFill", "data": [preds['Score'].iloc[0]]}]<br/>        }<br/>    if preds['Label'].iloc[0] == 1:<br/>        #display if label = 1 (high mortality risk)<br/>        st.sidebar.error(preds['Mortality Risk'].iloc[0])<br/>        liquidfill_option = {<br/>            "series": [{"type": "liquidFill", "data": [preds['Score'].iloc[0]], 'color': ['#ff0000']}]<br/>        }<br/>    with st.sidebar:<br/>        #liquid fill chart with confidence value and color corresponding to mortality risk (high = red, low = blue)<br/>        st_echarts(liquidfill_option)<br/>    #shapley additive explanation of feature weights on model prediction<br/>    explainer = shap.KernelExplainer(model = dt.predict_proba, data = get_config('X_train'), link = "identity")<br/>    shap_value_single = explainer.shap_values(X = test)<br/>    st_shap(shap.force_plot(base_value = explainer.expected_value[0],<br/>                    shap_values = shap_value_single[0], features=test<br/>                    ))</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi pd"><img src="../Images/bb2a68061703a90e6c475e9cd19986f9.png" data-original-src="https://miro.medium.com/v2/resize:fit:822/format:webp/1*se7pxsLFQ6TM_K8dP536gA.png"/></div></figure><h2 id="7e1a" class="kz la it bd lb lc ld dn le lf lg dp lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">新冠肺炎分流页面-患者图表</h2><p id="7c76" class="pw-post-body-paragraph lv lw it lx b ly lz ju ma mb mc jx md li me mf mg lm mh mi mj lq mk ml mm mn im bi translated">设置逻辑以显示当前患者与以前患者的关系和特征。</p><pre class="kj kk kl km gt nk nl nm nn aw no bi"><span id="4340" class="kz la it nl b gy np nq l nr ns">st.text("Previous COVID-19 ICU Patients")<br/>    df = train.copy()<br/>    for cols in df.drop(['Unnamed: 0', 'class'], axis=1).columns:<br/>        df['Mortality Outcome'] = train['class'].replace([1,0], ['Deceased', 'Survived'])<br/>        fig = px.histogram(df, x = cols, color = 'Mortality Outcome',<br/>                           color_discrete_map = {'Deceased':'red','Survived':'blue'})<br/>        fig.add_vline(x=test[cols].iloc[0], line_dash="dot",<br/>                      annotation_text="Current Patient", <br/>                      annotation_position="top left",<br/>                      annotation_font_size=10,<br/>                      annotation_font_color="gray"<br/>                     )<br/>        st.plotly_chart(fig, config= dict(<br/>    displayModeBar = False))</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pe"><img src="../Images/a8e369a07711f311469696233fcbbc5c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*GvxwN0B5UuwU2aIYrH4qAA.png"/></div></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pf"><img src="../Images/5d4e10bcb889e4443c48e5dc3fea1496.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8UWFCzHbrBu7B3xQ8AEcnQ.png"/></div></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pg"><img src="../Images/a0e718c3015bd1e008215f2d9895d843.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*GrxeP1-n7SHcraz6dyfqtw.png"/></div></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ph"><img src="../Images/09b7491c8aba1bc9bd88476500c624ba.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*TsNE9DagZ8_37VJ1YB8wDg.png"/></div></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pi"><img src="../Images/386e0d8df7e16b64d830d8f1a64f1401.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hnGk7KbDfaa51Szmo4rh5w.png"/></div></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pj"><img src="../Images/e17c332e16734118edacc98004cecfec.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*PqgaujMhY-ulqWUvmvS3xg.png"/></div></div></figure><h2 id="3f9a" class="kz la it bd lb lc ld dn le lf lg dp lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">把所有的放在一起</h2><p id="8b0e" class="pw-post-body-paragraph lv lw it lx b ly lz ju ma mb mc jx md li me mf mg lm mh mi mj lq mk ml mm mn im bi translated">用户界面已准备好进行部署。最后的步骤包括保存需求，将所有文件添加到GitHub，并部署到Streamlit共享服务。要访问最终产品，请访问下面的链接或从我的<a class="ae ky" href="https://github.com/chags1313/covidtriageStreamlit" rel="noopener ugc nofollow" target="_blank"> covidtriageStreamlit库</a>在您的本地机器上自行构建。</p><p id="7e96" class="pw-post-body-paragraph lv lw it lx b ly mo ju ma mb mp jx md li mq mf mg lm mr mi mj lq ms ml mm mn im bi translated">https://covidtriage.streamlitapp.com/<a class="ae ky" href="https://covidtriage.streamlitapp.com/" rel="noopener ugc nofollow" target="_blank"/></p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pk"><img src="../Images/6e76cf03ad3c1394495604aba5086851.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*BlCxbfQXUJpMwkX9C5baIA.png"/></div></div></figure><div class="oe of gp gr og oh"><a href="https://github.com/chags1313/covidtriageStreamlit" rel="noopener  ugc nofollow" target="_blank"><div class="oi ab fo"><div class="oj ab ok cl cj ol"><h2 class="bd iu gy z fp om fr fs on fu fw is bi translated">GitHub-chags 1313/covidtriageStreamlit:使用Streamlit构建的COVID triage应用程序</h2><div class="oo l"><h3 class="bd b gy z fp om fr fs on fu fw dk translated">此时您不能执行该操作。您已使用另一个标签页或窗口登录。您已在另一个选项卡中注销，或者…</h3></div><div class="op l"><p class="bd b dl z fp om fr fs on fu fw dk translated">github.com</p></div></div><div class="oq l"><div class="pl l os ot ou oq ov ks oh"/></div></div></a></div></div><div class="ab cl pm pn hx po" role="separator"><span class="pp bw bk pq pr ps"/><span class="pp bw bk pq pr ps"/><span class="pp bw bk pq pr"/></div><div class="im in io ip iq"><h1 id="e794" class="nt la it bd lb nu pt nw le nx pu nz lh jz pv ka ll kc pw kd lp kf px kg lt od bi translated">结论</h1><p id="56a7" class="pw-post-body-paragraph lv lw it lx b ly lz ju ma mb mc jx md li me mf mg lm mh mi mj lq mk ml mm mn im bi translated">本教程深入介绍了如何使用python强大的工具生态系统来制作有用的产品。在这种情况下，我们使用Pandas、Pycaret、Shap、Plotly和Streamlit建立了一个临床决策支持系统，以确定进入重症监护的新冠肺炎患者的死亡风险。</p><p id="05b7" class="pw-post-body-paragraph lv lw it lx b ly mo ju ma mb mp jx md li mq mf mg lm mr mi mj lq ms ml mm mn im bi translated"><em class="mt">感谢您的阅读！查看我的GitHub以获得更多代码和资源，或者在LinkedIn上联系我，提出任何问题或评论。</em></p><div class="oe of gp gr og oh"><a href="https://github.com/chags1313" rel="noopener  ugc nofollow" target="_blank"><div class="oi ab fo"><div class="oj ab ok cl cj ol"><h2 class="bd iu gy z fp om fr fs on fu fw is bi translated">chags1313 -概述</h2><div class="oo l"><h3 class="bd b gy z fp om fr fs on fu fw dk translated">此时您不能执行该操作。您已使用另一个标签页或窗口登录。您已在另一个选项卡中注销，或者…</h3></div><div class="op l"><p class="bd b dl z fp om fr fs on fu fw dk translated">github.com</p></div></div><div class="oq l"><div class="py l os ot ou oq ov ks oh"/></div></div></a></div><p id="ec45" class="pw-post-body-paragraph lv lw it lx b ly mo ju ma mb mp jx md li mq mf mg lm mr mi mj lq ms ml mm mn im bi translated"><a class="ae ky" href="https://www.linkedin.com/in/cole-hagen/" rel="noopener ugc nofollow" target="_blank">https://www.linkedin.com/in/cole-hagen/</a></p><h1 id="a0e0" class="nt la it bd lb nu nv nw le nx ny nz lh jz oa ka ll kc ob kd lp kf oc kg lt od bi translated">作者的相关文章</h1><div class="oe of gp gr og oh"><a rel="noopener follow" target="_blank" href="/can-you-teach-a-computer-to-see-your-pain-18c0f60eb0e4"><div class="oi ab fo"><div class="oj ab ok cl cj ol"><h2 class="bd iu gy z fp om fr fs on fu fw is bi translated">你能教电脑看到你的痛苦吗？</h2><div class="oo l"><h3 class="bd b gy z fp om fr fs on fu fw dk translated">答案是肯定的，以下是方法</h3></div><div class="op l"><p class="bd b dl z fp om fr fs on fu fw dk translated">towardsdatascience.com</p></div></div><div class="oq l"><div class="pz l os ot ou oq ov ks oh"/></div></div></a></div><div class="oe of gp gr og oh"><a rel="noopener follow" target="_blank" href="/making-it-rain-with-raincloud-plots-496c39a2756f"><div class="oi ab fo"><div class="oj ab ok cl cj ol"><h2 class="bd iu gy z fp om fr fs on fu fw is bi translated">用雨云图让它下雨</h2><div class="oo l"><h3 class="bd b gy z fp om fr fs on fu fw dk translated">使用python实现ptitprince库以实现健壮的数据可视化</h3></div><div class="op l"><p class="bd b dl z fp om fr fs on fu fw dk translated">towardsdatascience.com</p></div></div><div class="oq l"><div class="qa l os ot ou oq ov ks oh"/></div></div></a></div><div class="oe of gp gr og oh"><a rel="noopener follow" target="_blank" href="/warp-space-and-time-with-radial-heatmaps-c9a878d2ebf6"><div class="oi ab fo"><div class="oj ab ok cl cj ol"><h2 class="bd iu gy z fp om fr fs on fu fw is bi translated">使用径向热图扭曲空间和时间</h2><div class="oo l"><h3 class="bd b gy z fp om fr fs on fu fw dk translated">使用Python和HoloViews对时间序列和循环数据进行独特的数据可视化</h3></div><div class="op l"><p class="bd b dl z fp om fr fs on fu fw dk translated">towardsdatascience.com</p></div></div><div class="oq l"><div class="qb l os ot ou oq ov ks oh"/></div></div></a></div></div></div>    
</body>
</html>