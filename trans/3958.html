<html>
<head>
<title>Learn SQL with the e-commerce dataset on Google BigQuery</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Google BigQuery上的电子商务数据集学习SQL</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/learn-sql-with-the-e-commerce-dataset-on-google-bigquery-6864989e1494#2022-09-02">https://towardsdatascience.com/learn-sql-with-the-e-commerce-dataset-on-google-bigquery-6864989e1494#2022-09-02</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="d2dc" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">我经常被问到这个问题:我学习了SQL的基础知识；现在怎么办？我的回答是:开始用SQL回答现实世界的业务问题。</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/a851dc55ebb251d879efe8a1a5ddc62f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*q_sJBGXWX1C7WITx"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">图片由<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的<a class="ae ky" href="https://unsplash.com/@mercantile?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">克拉克街商业</a>拍摄</p></figure><p id="3dfd" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">学习任何东西都有一个棘手的问题，那就是从理论到实践。我来自越南，在那里学习驾驶是一场噩梦。说真的，查查“越南交通”，你就知道我的意思了。所以我知道有很多人有驾驶执照，但是在驾校之外从来没有驾驶过。</p><p id="1d99" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">对越南人来说，开车入门很难，也很吓人。人们在获得驾照后推迟驾驶的时间越长，距离他们最后一次驾驶的时间也就越长。过了一段时间，他们开始忘记基础知识，这使得开始变得更加困难。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi lv"><img src="../Images/e3ab1d6afdedd50596f7ade442fa0139.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*LZ58gfrzFYU-fO_V"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">照片由<a class="ae ky" href="https://unsplash.com/@leoniec?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">莱昂妮·克拉夫</a>在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</p></figure><p id="b1df" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">学习SQL也差不多。在你学会写一个简单的陈述后，现在做什么？建立一个本地数据库很难，并不是每个懂SQL的人都能做到。此外，处理用Excel创建的假数据一点也不好玩。</p><div class="lw lx gp gr ly lz"><a rel="noopener follow" target="_blank" href="/why-should-you-pick-up-sql-in-your-spare-time-65634dbb6eb1"><div class="ma ab fo"><div class="mb ab mc cl cj md"><h2 class="bd iu gy z fp me fr fs mf fu fw is bi translated">你为什么要在业余时间学习SQL？</h2><div class="mg l"><h3 class="bd b gy z fp me fr fs mf fu fw dk translated">SQL简单易学，可用于各种业务应用。它是一种用于数据分析的强大语言…</h3></div><div class="mh l"><p class="bd b dl z fp me fr fs mf fu fw dk translated">towardsdatascience.com</p></div></div><div class="mi l"><div class="mj l mk ml mm mi mn ks lz"/></div></div></a></div><p id="6d99" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">所以，我们去“兜风”，好吗？</p><h1 id="dda0" class="mo mp it bd mq mr ms mt mu mv mw mx my jz mz ka na kc nb kd nc kf nd kg ne nf bi translated">设置BigQuery沙箱</h1><p id="db38" class="pw-post-body-paragraph kz la it lb b lc ng ju le lf nh jx lh li ni lk ll lm nj lo lp lq nk ls lt lu im bi translated">首先，我们应该启动我们的隐喻汽车。BigQuery是Google的托管数据仓库。作为一项托管服务，您不必花费数小时来学习如何在本地创建MySQL数据库并在那里加载数据。如果你有一个谷歌账户，即使没有信用卡，你也可以在五分钟内开始编写SQL查询。</p><p id="f5fd" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">BigQuery沙盒就像一辆模型车，让你练习驾驶。谷歌已经收集了数百个真实世界的公共数据集，你可以查询。从维基百科、比特币这样的海量数据集到经济学数据，你都可以找到你感兴趣的行业的数据，并以此为起点。</p><p id="c966" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">首先，你必须访问这个<a class="ae ky" href="https://console.cloud.google.com/bigquery" rel="noopener ugc nofollow" target="_blank"> URL </a>并使用你的谷歌账户登录，如果你还没有这样做的话。接下来，选择您的国家，同意TOS并继续。您需要创建一个项目来开始使用BigQuery sandbox，这是一个免费的测试环境，允许您每月查询高达1 TB的数据。为您的项目选择一个唯一的名称并创建一个。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nl"><img src="../Images/20e9371633594597479f68bc8991e703.png" data-original-src="https://miro.medium.com/v2/resize:fit:1140/format:webp/1*XC4MPMofKSb-ssRAU7u6_Q.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">创建谷歌云项目(图片由作者提供)</p></figure><p id="764f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">只需一会儿，您现在就可以访问BigQuery沙箱了！选择<code class="fe nm nn no np b">Add data</code>、<code class="fe nm nn no np b">Pin a project</code>、<code class="fe nm nn no np b">Enter project name</code>，输入<code class="fe nm nn no np b">bigquery-public-data</code>。你可以在这个项目下看到所有240个免费的公共数据集。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nq"><img src="../Images/4156d71cfdc9403cf832ff4d1bc16c0a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ZQPdilphSMlAJn5pSTp8IQ.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">固定公共数据集项目(按作者分类的图像)</p></figure><p id="eaa0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在本文中，我不会讨论如何使用BigQuery UI。但是如果你想的话，可以看看这篇文章，或者更好的是Coursera上的这篇专业化文章。</p><h1 id="f480" class="mo mp it bd mq mr ms mt mu mv mw mx my jz mz ka na kc nb kd nc kf nd kg ne nf bi translated">Look电子商务数据集</h1><p id="7741" class="pw-post-body-paragraph kz la it lb b lc ng ju le lf nh jx lh li ni lk ll lm nj lo lp lq nk ls lt lu im bi translated">既然我们发动了汽车，让我们来了解它。使用固定的<code class="fe nm nn no np b">bigquery-public-data</code>项目，向下滚动，点击<code class="fe nm nn no np b">more results</code>，您应该能够找到<code class="fe nm nn no np b">thelook_ecommerce</code>数据集。您可以选择不同的表，探索该数据模式，并使用preview检查实际数据。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nr"><img src="../Images/15e12dd6d45b21ecde292c1596d8c62a.png" data-original-src="https://miro.medium.com/v2/resize:fit:536/format:webp/1*hpvqaQlExCu6fP9ptvF4Ag.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">虚构的电子商务数据集(图片由作者提供)</p></figure><p id="7dc9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这是一个虚构的时尚电商，叫做Fashionly。我们有一个网站，客户可以用它来购买我们的产品。</p><p id="d85c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">当客户访问我们的网站并注册账户时，她的旅程就开始了。她在注册时使用的信息存储在users表中，注册日期对应于客户的创建日期。</p><p id="d1c2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">一旦注册，她可以随时访问我们的网站。每次她访问时，events表中都会生成一个新事件。我们知道她从哪里浏览我们的网站，以及她采取了什么行动(访问、将产品添加到购物车或购买)等信息。我们还知道她来自哪里(流量来源)以及她使用什么类型的浏览器进行访问。</p><p id="3464" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">当她购物时，在orders表中会创建一个订单。订单发货、取消或退货的时间戳也记录在这里。</p><p id="b34d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">每个订单可以包含一个或多个项目，记录在订单项目表中。order items表也与产品相关联，我们在其中存储产品的详细信息。</p><p id="2315" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们有几个仓库存放存货。当新库存进入仓库时，记录库存创建日期。同样的事情也发生在产品销售的时候。</p><h1 id="d3a8" class="mo mp it bd mq mr ms mt mu mv mw mx my jz mz ka na kc nb kd nc kf nd kg ne nf bi translated">现在让我们使用您的SQL！</h1><p id="7b4e" class="pw-post-body-paragraph kz la it lb b lc ng ju le lf nh jx lh li ni lk ll lm nj lo lp lq nk ls lt lu im bi translated">想象自己是Fashionly的所有者、财务、产品或运营负责人。你想了解你公司的什么情况？这里有一些问题让你开始。</p><ul class=""><li id="49eb" class="ns nt it lb b lc ld lf lg li nu lm nv lq nw lu nx ny nz oa bi translated">我们每天的销售额是多少？与昨天，上周/月/年的同一时间相比，是高还是低？</li><li id="b054" class="ns nt it lb b lc ob lf oc li od lm oe lq of lu nx ny nz oa bi translated">谁是我们的客户？按人口统计细分。他们的购买行为是什么？他们买得多还是少？我们签约新客户的速度有多快？</li><li id="a56b" class="ns nt it lb b lc ob lf oc li od lm oe lq of lu nx ny nz oa bi translated">我们卖得最多和最少的是什么？我们靠什么赚钱？某些产品/品类是否更适合特定的客户群体？</li><li id="bafd" class="ns nt it lb b lc ob lf oc li od lm oe lq of lu nx ny nz oa bi translated">我们在哪个地理位置做得好/不好？我们的仓库能覆盖所有区域吗？我们应该在何时何地考虑扩大我们的履行能力？</li><li id="edfd" class="ns nt it lb b lc ob lf oc li od lm oe lq of lu nx ny nz oa bi translated">我们在哪个营销渠道做得好？我们目前的组合是什么？趋势有变化吗？</li></ul><p id="3154" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">为了进一步了解你的业务并做出更好的决策，你可以问很多很多更多的问题。</p><p id="dc0e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们一起来看几个问题。我们将从一个基本的查询开始，以了解我们销售了多少，每天有多少订单，以及有多少客户购买了。为此，我们必须将订单和order_items连接在一起。请确保在您的查询中过滤掉已取消和退回的订单。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="og oh l"/></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi oi"><img src="../Images/a70a994e94e865fe80191220184d5103.png" data-original-src="https://miro.medium.com/v2/resize:fit:1060/format:webp/1*2f3UOhA9LW84mlC596A_JQ.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">基本商业信息(图片由作者提供)</p></figure><p id="d5d4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们可以看到，我们每天的销售额约为30–40，000美元，处理约400份订单，约有300名客户购买。有些日子，我们的销售额远远超过平均水平。</p><p id="0073" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">接下来，让我们看一个稍微复杂一点的查询。我想知道客户第一次下单购买最多的是哪个品类。要做到这一点，我们必须使用一个窗口函数来识别第一个订单。然后我们可以按产品类别分组，计算我们的收入和用户数。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="og oh l"/></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi oj"><img src="../Images/5c8b1574a731e8e9712f2911cfd36be7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1006/format:webp/1*4AuwMdRpPfZDf-JpfutVVg.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">首批订单的主要类别(图片由作者提供)</p></figure><p id="245a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在，如果我想创建一个活动来推动新用户的获取，我知道外套可能会给我带来最多的收入，而牛仔裤会给我带来最多的客户。</p><h1 id="6d7d" class="mo mp it bd mq mr ms mt mu mv mw mx my jz mz ka na kc nb kd nc kf nd kg ne nf bi translated">总结</h1><p id="0a03" class="pw-post-body-paragraph kz la it lb b lc ng ju le lf nh jx lh li ni lk ll lm nj lo lp lq nk ls lt lu im bi translated">BigQuery是一种让您轻松开始学习SQL的方法。只有走出去“驱动”，也就是应用SQL来回答现实世界的业务问题，人们才能真正学会如何使用这种受欢迎的技能。</p><p id="b779" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这里有一些在BigQuery中使用SQL的最佳实践，我想你应该知道。</p><p id="943e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">感谢您的阅读，希望这篇文章对您有所帮助。</p></div></div>    
</body>
</html>