<html>
<head>
<title>The Easiest Way to Deploy Your Machine Learning Models in 2022: Streamlit + BentoML + DagsHub</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">2022年部署你的机器学习模型最简单的方法:Streamlit + BentoML + DagsHub</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/the-easiest-way-to-deploy-your-ml-dl-models-in-2022-streamlit-bentoml-dagshub-ccf29c901dac#2022-04-19">https://towardsdatascience.com/the-easiest-way-to-deploy-your-ml-dl-models-in-2022-streamlit-bentoml-dagshub-ccf29c901dac#2022-04-19</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="879c" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">将模型部署为具有用户友好界面的轻量级API</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/76ee85281f8c8fe0092f4b39d4b33fc5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*v4U4Mep0xF4IKmCJwfvlJA.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><h2 id="d4f9" class="ky kz it bd la lb lc dn ld le lf dp lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">介绍</h2><p id="27ae" class="pw-post-body-paragraph lu lv it lw b lx ly ju lz ma mb jx mc lh md me mf ll mg mh mi lp mj mk ml mm im bi translated">你有一个现成的机器学习模型。现在怎么办？你用它做什么？你会像珍藏一样把它藏在你的Jupyter里不让任何人看见吗？不，你让别人分享和玩你的作品变得尽可能简单。换句话说，您<em class="mn">部署</em>模型。</p><p id="5b9f" class="pw-post-body-paragraph lu lv it lw b lx mo ju lz ma mp jx mc lh mq me mf ll mr mh mi lp ms mk ml mm im bi translated">但是怎么做呢？您应该将模型作为文件共享吗？不，那是最糟糕的。</p><p id="e980" class="pw-post-body-paragraph lu lv it lw b lx mo ju lz ma mp jx mc lh mq me mf ll mr mh mi lp ms mk ml mm im bi translated">码头集装箱怎么样？是的，这样更好——用户可以在本地运行您的模型。但是……他们仍然需要在编码环境中进行。不太方便。</p><p id="b759" class="pw-post-body-paragraph lu lv it lw b lx mo ju lz ma mp jx mc lh mq me mf ll mr mh mi lp ms mk ml mm im bi translated">那么，API呢？好吧，祝你向非程序员解释API时好运。</p><p id="d7d5" class="pw-post-body-paragraph lu lv it lw b lx mo ju lz ma mp jx mc lh mq me mf ll mr mh mi lp ms mk ml mm im bi translated">嘿，如果你建立一个网络应用程序呢？是的，这似乎是最好的选择。但是怎么建呢？不需要学习web框架吗？</p><p id="7811" class="pw-post-body-paragraph lu lv it lw b lx mo ju lz ma mp jx mc lh mq me mf ll mr mh mi lp ms mk ml mm im bi translated">好消息是——你不需要做上面的任何事情。在本文中，我将展示一种部署方法，它使您能够将您的模型作为API、Docker容器和托管的web应用程序来提供，所有这一切只需几分钟和几个简短的Python脚本。</p><p id="3c4f" class="pw-post-body-paragraph lu lv it lw b lx mo ju lz ma mp jx mc lh mq me mf ll mr mh mi lp ms mk ml mm im bi translated">听起来很棒？继续读。</p><div class="mt mu gp gr mv mw"><a href="https://ibexorigin.medium.com/membership" rel="noopener follow" target="_blank"><div class="mx ab fo"><div class="my ab mz cl cj na"><h2 class="bd iu gy z fp nb fr fs nc fu fw is bi translated">通过我的推荐链接加入Medium-BEXGBoost</h2><div class="nd l"><h3 class="bd b gy z fp nb fr fs nc fu fw dk translated">获得独家访问我的所有⚡premium⚡内容和所有媒体没有限制。支持我的工作，给我买一个…</h3></div><div class="ne l"><p class="bd b dl z fp nb fr fs nc fu fw dk translated">ibexorigin.medium.com</p></div></div><div class="nf l"><div class="ng l nh ni nj nf nk ks mw"/></div></div></a></div><p id="38a6" class="pw-post-body-paragraph lu lv it lw b lx mo ju lz ma mp jx mc lh mq me mf ll mr mh mi lp ms mk ml mm im bi translated">获得由强大的AI-Alpha信号选择和总结的最佳和最新的ML和AI论文:</p><div class="mt mu gp gr mv mw"><a href="https://alphasignal.ai/?referrer=Bex" rel="noopener  ugc nofollow" target="_blank"><div class="mx ab fo"><div class="my ab mz cl cj na"><h2 class="bd iu gy z fp nb fr fs nc fu fw is bi translated">阿尔法信号|机器学习的极品。艾总结的。</h2><div class="nd l"><h3 class="bd b gy z fp nb fr fs nc fu fw dk translated">留在循环中，不用花无数时间浏览下一个突破；我们的算法识别…</h3></div><div class="ne l"><p class="bd b dl z fp nb fr fs nc fu fw dk translated">alphasignal.ai</p></div></div><div class="nf l"><div class="nl l nh ni nj nf nk ks mw"/></div></div></a></div></div><div class="ab cl nm nn hx no" role="separator"><span class="np bw bk nq nr ns"/><span class="np bw bk nq nr ns"/><span class="np bw bk nq nr"/></div><div class="im in io ip iq"><h2 id="dc42" class="ky kz it bd la lb lc dn ld le lf dp lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">我们在解决什么问题？</h2><p id="17cd" class="pw-post-body-paragraph lu lv it lw b lx ly ju lz ma mb jx mc lh md me mf ll mg mh mi lp mj mk ml mm im bi translated">今天的部署方法适用于任何ML/DL框架的任何模型架构。但是，就像我们在过去两篇文章中所做的那样，我们将继续研究<a class="ae nt" href="https://www.kaggle.com/c/petfinder-pawpularity-score" rel="noopener ugc nofollow" target="_blank">宠物流行度数据集</a>。</p><p id="ab43" class="pw-post-body-paragraph lu lv it lw b lx mo ju lz ma mp jx mc lh mq me mf ll mr mh mi lp ms mk ml mm im bi translated">Petfinder.my数据集收集了猫和狗的图像数据集，并使用他们内部的评分算法给每只猫和狗打分。我们一直试图使用这个数据集来预测给定图像的宠物的可爱程度。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="ab gu cl nu"><img src="../Images/6eee459dbc48c9236f9f6ddd040c2d63.png" data-original-src="https://miro.medium.com/v2/format:webp/1*FnTV3MOGeh_tYM3jr37WcQ.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者截图。宠物人气<a class="ae nt" href="https://www.kaggle.com/c/petfinder-pawpularity-score" rel="noopener ugc nofollow" target="_blank">比赛主页</a>。</p></figure><p id="15c5" class="pw-post-body-paragraph lu lv it lw b lx mo ju lz ma mp jx mc lh mq me mf ll mr mh mi lp ms mk ml mm im bi translated">该数据集用于在Kaggle上举办宠物流行度竞赛，希望顶级解决方案能够提高宠物收养率。</p><p id="9cdb" class="pw-post-body-paragraph lu lv it lw b lx mo ju lz ma mp jx mc lh mq me mf ll mr mh mi lp ms mk ml mm im bi translated">在第一篇文章的<a class="ae nt" rel="noopener" target="_blank" href="/open-source-ml-project-with-dagshub-improve-pet-adoption-with-machine-learning-1-e9403f8f7711">中，我们对图像及其元数据进行了EDA，并概述了我们解决问题的方法以及在此过程中使用的工具。</a></p><p id="bd47" class="pw-post-body-paragraph lu lv it lw b lx mo ju lz ma mp jx mc lh mq me mf ll mr mh mi lp ms mk ml mm im bi translated"><a class="ae nt" rel="noopener" target="_blank" href="/complete-guide-to-experiment-tracking-with-mlflow-and-dagshub-a0439479e0b9">第二篇文章</a>是一个关于跟踪你的机器学习实验并找到预测可爱评分的最佳模型的综合教程。</p><p id="e90b" class="pw-post-body-paragraph lu lv it lw b lx mo ju lz ma mp jx mc lh mq me mf ll mr mh mi lp ms mk ml mm im bi translated">最后一篇文章将展示如何将Keras图像回归模型部署为API和web应用程序，以使每个人、程序员和普通用户都可以访问它。</p></div><div class="ab cl nm nn hx no" role="separator"><span class="np bw bk nq nr ns"/><span class="np bw bk nq nr ns"/><span class="np bw bk nq nr"/></div><div class="im in io ip iq"><h2 id="6639" class="ky kz it bd la lb lc dn ld le lf dp lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">我们将使用什么工具来部署？</h2><p id="3f53" class="pw-post-body-paragraph lu lv it lw b lx ly ju lz ma mb jx mc lh md me mf ll mg mh mi lp mj mk ml mm im bi translated">很难就为生产中的模型服务的最佳工具达成一致，因为每个问题都是独特的，并且它们的解决方案有不同的约束。</p><p id="bda6" class="pw-post-body-paragraph lu lv it lw b lx mo ju lz ma mp jx mc lh mq me mf ll mr mh mi lp ms mk ml mm im bi translated">因此，我想选择一个解决方案或一套工具，让尽可能多的人受益。解决方案应该足够简单，只需要几分钟就可以完成一个工作原型，并在网上提供，如果需要，可以扩展到更大规模的问题。</p><p id="2ffa" class="pw-post-body-paragraph lu lv it lw b lx mo ju lz ma mp jx mc lh mq me mf ll mr mh mi lp ms mk ml mm im bi translated">这个解决方案的核心组件是<a class="ae nt" href="https://docs.bentoml.org/en/latest/" rel="noopener ugc nofollow" target="_blank"> BentoML包</a>。它是MLOps领域最有前途的玩家之一，已经在GitHub上积累了50万次下载。</p><p id="0e36" class="pw-post-body-paragraph lu lv it lw b lx mo ju lz ma mp jx mc lh mq me mf ll mr mh mi lp ms mk ml mm im bi translated">它的目的是用尽可能少的代码行将ML模型作为API端点，并且没有Flask等其他框架的麻烦。它适用于几乎所有的ML框架:</p><div class="kj kk kl km gt ab cb"><figure class="nv kn nw nx ny nz oa paragraph-image"><img src="../Images/e998720623e209f94c7f44bc287858e8.png" data-original-src="https://miro.medium.com/v2/resize:fit:494/format:webp/1*kUr5ECD6weMLrdq4V1PCoQ.png"/></figure><figure class="nv kn ob nx ny nz oa paragraph-image"><img src="../Images/d6c101aa46f4a8d23f72768b9ee0fd73.png" data-original-src="https://miro.medium.com/v2/resize:fit:582/format:webp/1*Jmj0AR0hpPXtJ2Xp6nnGPQ.png"/><p class="ku kv gj gh gi kw kx bd b be z dk oc di od oe translated">作者截图。<a class="ae nt" href="https://docs.bentoml.org/en/latest/frameworks/index.html#frameworks-page" rel="noopener ugc nofollow" target="_blank"> BentoML文档</a> —接受的框架。</p></figure></div><p id="f189" class="pw-post-body-paragraph lu lv it lw b lx mo ju lz ma mp jx mc lh mq me mf ll mr mh mi lp ms mk ml mm im bi translated">向前跳几步，您可以查看包含我们将在本文中构建的已部署API的链接<a class="ae nt" href="https://pet-pawpularity.herokuapp.com/" rel="noopener ugc nofollow" target="_blank">。</a></p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="ab gu cl nu"><img src="../Images/0f688d826bdc0123d322a3d85e72ab03.png" data-original-src="https://miro.medium.com/v2/format:webp/1*t5c8VacDoJSDy1ffFcDC4Q.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">图片由作者提供。加载服务器需要一分钟时间。</p></figure><p id="075b" class="pw-post-body-paragraph lu lv it lw b lx mo ju lz ma mp jx mc lh mq me mf ll mr mh mi lp ms mk ml mm im bi translated">部署也不应该仅仅停留在API上。毕竟，API只面向程序员，你也需要一些非编程社区也能与之交互的东西。这就是Streamlit 的用武之地。</p><p id="fb29" class="pw-post-body-paragraph lu lv it lw b lx mo ju lz ma mp jx mc lh mq me mf ll mr mh mi lp ms mk ml mm im bi translated">Streamlit对您来说可能并不陌生，因为它已经成为为几乎任何类型的ML应用程序创建极简web应用程序的首选库。</p><p id="8a29" class="pw-post-body-paragraph lu lv it lw b lx mo ju lz ma mp jx mc lh mq me mf ll mr mh mi lp ms mk ml mm im bi translated">由于我们在API的基础上构建了Streamlit UI，web应用程序将更加轻量级。您将不会有依赖性问题，因为您只需要<code class="fe of og oh oi b">requests</code>库来通过Streamlit应用程序处理对BentoML API的请求。</p><p id="b3d0" class="pw-post-body-paragraph lu lv it lw b lx mo ju lz ma mp jx mc lh mq me mf ll mr mh mi lp ms mk ml mm im bi translated">下面，你可以看到我们将在本文中构建的<a class="ae nt" href="https://share.streamlit.io/bextuychiev/pet_pawpularity/ui/src/ui.py" rel="noopener ugc nofollow" target="_blank">应用:</a></p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="ab gu cl nu"><img src="../Images/e8f25fdd1fb7539000a140003698960a.png" data-original-src="https://miro.medium.com/v2/format:webp/1*seNDIX3Cd0ks-5X3q4ojjg.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">图片由作者提供。</p></figure><p id="a6b4" class="pw-post-body-paragraph lu lv it lw b lx mo ju lz ma mp jx mc lh mq me mf ll mr mh mi lp ms mk ml mm im bi translated">最后但同样重要的是，我们将再次使用<a class="ae nt" href="https://dagshub.com/" rel="noopener ugc nofollow" target="_blank"> DagsHub </a>来管理整个项目。DagsHub是面向数据专业人士的GitHub，允许你进行360度的机器学习。</p><p id="a816" class="pw-post-body-paragraph lu lv it lw b lx mo ju lz ma mp jx mc lh mq me mf ll mr mh mi lp ms mk ml mm im bi translated">您可以将DagsHub存储库用于许多任务:</p><ul class=""><li id="7bcd" class="oj ok it lw b lx mo ma mp lh ol ll om lp on mm oo op oq or bi translated">托管代码:完全支持Git(就像GitHub一样)。</li><li id="7107" class="oj ok it lw b lx os ma ot lh ou ll ov lp ow mm oo op oq or bi translated"><a class="ae nt" href="https://dagshub.com/docs/reference/dagshub_storage/" rel="noopener ugc nofollow" target="_blank">存储器</a>:有数据专用存储器&amp;模型存储器，由<a class="ae nt" href="https://dvc.org/" rel="noopener ugc nofollow" target="_blank"> DVC </a>管理</li><li id="4c13" class="oj ok it lw b lx os ma ot lh ou ll ov lp ow mm oo op oq or bi translated"><a class="ae nt" href="https://dagshub.com/docs/reference/discovering_experiments/" rel="noopener ugc nofollow" target="_blank">实验跟踪</a>:支持<a class="ae nt" href="https://dagshub.com/docs/reference/mlflow_tracking/" rel="noopener ugc nofollow" target="_blank"> MLflow跟踪</a>和<a class="ae nt" href="https://dagshub.com/docs/reference/git-tracking/" rel="noopener ugc nofollow" target="_blank"> Git跟踪</a>。</li></ul><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="ab gu cl nu"><img src="../Images/7afe49abcda6d0200300dec2afebe835.png" data-original-src="https://miro.medium.com/v2/format:webp/1*Vx-we87gvj-F2m9s3fb6ow.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">图片由作者提供。<a class="ae nt" href="https://dagshub.com/BexTuychiev/pet_pawpularity" rel="noopener ugc nofollow" target="_blank">宠-paw popularity DagsHub回购。</a></p></figure><p id="c4e0" class="pw-post-body-paragraph lu lv it lw b lx mo ju lz ma mp jx mc lh mq me mf ll mr mh mi lp ms mk ml mm im bi translated">我们在实验的第二部分中使用DagsHub最多:</p><div class="mt mu gp gr mv mw"><a rel="noopener follow" target="_blank" href="/complete-guide-to-experiment-tracking-with-mlflow-and-dagshub-a0439479e0b9"><div class="mx ab fo"><div class="my ab mz cl cj na"><h2 class="bd iu gy z fp nb fr fs nc fu fw is bi translated">使用MLFlow和DagsHub进行实验跟踪的完整指南</h2><div class="nd l"><h3 class="bd b gy z fp nb fr fs nc fu fw dk translated">创建可重复且灵活的ML项目</h3></div><div class="ne l"><p class="bd b dl z fp nb fr fs nc fu fw dk translated">towardsdatascience.com</p></div></div><div class="nf l"><div class="ox l nh ni nj nf nk ks mw"/></div></div></a></div><p id="74fa" class="pw-post-body-paragraph lu lv it lw b lx mo ju lz ma mp jx mc lh mq me mf ll mr mh mi lp ms mk ml mm im bi translated">机器学习生命周期不仅仅是部署。一款车型要想在生产中获得成功，需要基础设施的坚实基础。DagsHub允许你建立这个基础。</p><p id="1256" class="pw-post-body-paragraph lu lv it lw b lx mo ju lz ma mp jx mc lh mq me mf ll mr mh mi lp ms mk ml mm im bi translated">现在，让我们进入文章的中心部分，从解释如何使用BentoML为预测服务创建API端点开始。</p></div><div class="ab cl nm nn hx no" role="separator"><span class="np bw bk nq nr ns"/><span class="np bw bk nq nr ns"/><span class="np bw bk nq nr"/></div><div class="im in io ip iq"><h2 id="561c" class="ky kz it bd la lb lc dn ld le lf dp lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">第一步:将最佳模型保存到BentoML本地商店</h2><blockquote class="oy oz pa"><p id="8044" class="lu lv mn lw b lx mo ju lz ma mp jx mc pb mq me mf pc mr mh mi pd ms mk ml mm im bi translated">本节所有代码片段摘自项目repo — <a class="ae nt" href="https://dagshub.com/BexTuychiev/pet_pawpularity/src/main/src/training.py" rel="noopener ugc nofollow" target="_blank"> training.py </a>。</p></blockquote><p id="1dea" class="pw-post-body-paragraph lu lv it lw b lx mo ju lz ma mp jx mc lh mq me mf ll mr mh mi lp ms mk ml mm im bi translated">让我们从导入必要的库开始:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="pe pf l"/></div></figure><p id="31f6" class="pw-post-body-paragraph lu lv it lw b lx mo ju lz ma mp jx mc lh mq me mf ll mr mh mi lp ms mk ml mm im bi translated">确保安装带有<code class="fe of og oh oi b">--pre</code>标签的<code class="fe of og oh oi b">bentoml</code>，因为它仍在预览中。</p><p id="48b4" class="pw-post-body-paragraph lu lv it lw b lx mo ju lz ma mp jx mc lh mq me mf ll mr mh mi lp ms mk ml mm im bi translated">下面，我们将创建几个辅助函数来创建和训练Keras卷积模型:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="pe pf l"/></div></figure><p id="ac9a" class="pw-post-body-paragraph lu lv it lw b lx mo ju lz ma mp jx mc lh mq me mf ll mr mh mi lp ms mk ml mm im bi translated">我省略了第一个函数的主体，它创建了一个Conv2D实例，其中有三个隐藏层和中间的dropout、MaxPool层。我们不必太关注模型架构。</p><p id="fbc3" class="pw-post-body-paragraph lu lv it lw b lx mo ju lz ma mp jx mc lh mq me mf ll mr mh mi lp ms mk ml mm im bi translated"><code class="fe of og oh oi b">fit_keras_conv2d</code>使用第一个函数，用提前停止和30个历元训练得到的模型。</p><p id="171e" class="pw-post-body-paragraph lu lv it lw b lx mo ju lz ma mp jx mc lh mq me mf ll mr mh mi lp ms mk ml mm im bi translated">接下来，我们创建一个函数来将模型保存到BentoML本地存储:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="pe pf l"/></div></figure><p id="eea7" class="pw-post-body-paragraph lu lv it lw b lx mo ju lz ma mp jx mc lh mq me mf ll mr mh mi lp ms mk ml mm im bi translated"><code class="fe of og oh oi b">keras.save</code>函数将Keras模型保存为适合其他BentoML操作的格式。</p><p id="aaf8" class="pw-post-body-paragraph lu lv it lw b lx mo ju lz ma mp jx mc lh mq me mf ll mr mh mi lp ms mk ml mm im bi translated">因此，让我们运行这些函数来获得一个现成的模型:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="pe pf l"/></div></figure><p id="45ad" class="pw-post-body-paragraph lu lv it lw b lx mo ju lz ma mp jx mc lh mq me mf ll mr mh mi lp ms mk ml mm im bi translated">训练和保存完成后，您可以运行下面的命令来获取BentoML商店中的模型列表:</p><pre class="kj kk kl km gt pg oi ph pi aw pj bi"><span id="d8f6" class="ky kz it oi b gy pk pl l pm pn">$ bentoml models list</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="ab gu cl nu"><img src="../Images/51e366f492615a679051bf23b7fdb9d7.png" data-original-src="https://miro.medium.com/v2/1*GoWVnKnOPyVPBfCcwJS3dg.gif"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者GIF</p></figure><p id="59db" class="pw-post-body-paragraph lu lv it lw b lx mo ju lz ma mp jx mc lh mq me mf ll mr mh mi lp ms mk ml mm im bi translated">保存的模型在BentoML文档中正式称为<em class="mn">标签</em>。默认情况下，所有模型都将保存在您的主目录和带有随机标签的<code class="fe of og oh oi b">bentoml/models</code>文件夹中，以防有多个模型同名。</p><p id="4eaf" class="pw-post-body-paragraph lu lv it lw b lx mo ju lz ma mp jx mc lh mq me mf ll mr mh mi lp ms mk ml mm im bi translated">如果您进入给定的路径，您将会找到如下文件:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="pe pf l"/></div></figure><p id="d2a2" class="pw-post-body-paragraph lu lv it lw b lx mo ju lz ma mp jx mc lh mq me mf ll mr mh mi lp ms mk ml mm im bi translated">您总是可以使用前面带有相关框架名称的<code class="fe of og oh oi b">load_runner</code>函数加载回模型:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="pe pf l"/></div></figure><p id="e55f" class="pw-post-body-paragraph lu lv it lw b lx mo ju lz ma mp jx mc lh mq me mf ll mr mh mi lp ms mk ml mm im bi translated">加载后，模型可以使用其<code class="fe of og oh oi b">run</code>方法进行预测，该方法调用引擎罩下Keras <code class="fe of og oh oi b">Model</code>对象的<code class="fe of og oh oi b">predict</code>方法。</p></div><div class="ab cl nm nn hx no" role="separator"><span class="np bw bk nq nr ns"/><span class="np bw bk nq nr ns"/><span class="np bw bk nq nr"/></div><div class="im in io ip iq"><h2 id="65d3" class="ky kz it bd la lb lc dn ld le lf dp lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">步骤2:创建服务</h2><blockquote class="oy oz pa"><p id="359c" class="lu lv mn lw b lx mo ju lz ma mp jx mc pb mq me mf pc mr mh mi pd ms mk ml mm im bi translated">本节所有代码片段均取自项目repo — <a class="ae nt" href="https://dagshub.com/BexTuychiev/pet_pawpularity/src/main/service.py" rel="noopener ugc nofollow" target="_blank"> service.py </a>。</p></blockquote><p id="8e62" class="pw-post-body-paragraph lu lv it lw b lx mo ju lz ma mp jx mc lh mq me mf ll mr mh mi lp ms mk ml mm im bi translated">现在，我们只需要几行代码就可以将保存的模型转换成一个有效的API。</p><p id="5612" class="pw-post-body-paragraph lu lv it lw b lx mo ju lz ma mp jx mc lh mq me mf ll mr mh mi lp ms mk ml mm im bi translated">首先，我们编写一个函数来创建BentoML的<a class="ae nt" href="https://docs.bentoml.org/en/latest/concepts/service_definition.html" rel="noopener ugc nofollow" target="_blank">服务对象</a>,它可以处理所有的API逻辑，而无需我们付出任何努力。</p><p id="dc90" class="pw-post-body-paragraph lu lv it lw b lx mo ju lz ma mp jx mc lh mq me mf ll mr mh mi lp ms mk ml mm im bi translated">在用<code class="fe of og oh oi b">load_runner</code>函数加载回模型之后，我们用一个任意的名字将它传递给<code class="fe of og oh oi b">Service</code>方法。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="pe pf l"/></div></figure><p id="02a2" class="pw-post-body-paragraph lu lv it lw b lx mo ju lz ma mp jx mc lh mq me mf ll mr mh mi lp ms mk ml mm im bi translated">之后，我们创建一个API端点来处理我们的POST请求。通过定义一个用我们刚刚创建的服务对象的<code class="fe of og oh oi b">api</code>方法修饰的函数，可以在BentoML中创建端点:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="pe pf l"/></div></figure><p id="6397" class="pw-post-body-paragraph lu lv it lw b lx mo ju lz ma mp jx mc lh mq me mf ll mr mh mi lp ms mk ml mm im bi translated">在讨论车身之前，先说一下<code class="fe of og oh oi b">service.api</code>装饰工。它有两个必需的参数- <code class="fe of og oh oi b">input</code>和<code class="fe of og oh oi b">output</code>。</p><p id="1c0e" class="pw-post-body-paragraph lu lv it lw b lx mo ju lz ma mp jx mc lh mq me mf ll mr mh mi lp ms mk ml mm im bi translated">您应该根据将从端点发送和返回的数据类型来定义这些参数。</p><p id="1285" class="pw-post-body-paragraph lu lv it lw b lx mo ju lz ma mp jx mc lh mq me mf ll mr mh mi lp ms mk ml mm im bi translated">当我们发送一个带有图像的请求时，上面的<code class="fe of og oh oi b">predict</code>端点返回一个可爱分数。因此，我将输入定义为<code class="fe of og oh oi b">Text()</code>,因为我们将把NumPy图像数组作为字符串发送。输出应该是<code class="fe of og oh oi b">NumpyNdarray()</code>，因为当我们调用<code class="fe of og oh oi b">model.run(image)</code>时，返回的数据类型将是一个Numpy数组。</p><p id="463f" class="pw-post-body-paragraph lu lv it lw b lx mo ju lz ma mp jx mc lh mq me mf ll mr mh mi lp ms mk ml mm im bi translated">为端点获取正确的数据类型非常重要。您可以阅读BentoML文档的本页，了解您可以处理的其他类型的数据。</p><p id="b1dd" class="pw-post-body-paragraph lu lv it lw b lx mo ju lz ma mp jx mc lh mq me mf ll mr mh mi lp ms mk ml mm im bi translated">至于主体，你应该在调用<code class="fe of og oh oi b">model.run</code>之前把所有的预处理逻辑写到图像中。在训练之前，我将图像的大小调整为(224，224，3)，并通过将它们的像素值除以255来归一化它们。所以，我也在端点函数中执行了这些步骤。</p><blockquote class="oy oz pa"><p id="3fc5" class="lu lv mn lw b lx mo ju lz ma mp jx mc pb mq me mf pc mr mh mi pd ms mk ml mm im bi translated">重要提示:如果您使用其他框架，比如Sklearn，来处理表格数据，那么也要确保在API端点内部运行所有的预处理步骤。我们可以通过酸洗您的所有处理函数并在<code class="fe of og oh oi b">predict</code>函数中调用它们来实现这一点，因此不会有任何数据泄漏或者您不会传递格式不正确的数据。</p></blockquote><p id="f607" class="pw-post-body-paragraph lu lv it lw b lx mo ju lz ma mp jx mc lh mq me mf ll mr mh mi lp ms mk ml mm im bi translated">现在，要为我们的API启动一个调试服务器，您只需要将所有代码放入根目录下的一个Python文件中，通常命名为<code class="fe of og oh oi b">service.py</code>，并调用下面的命令:</p><pre class="kj kk kl km gt pg oi ph pi aw pj bi"><span id="01fd" class="ky kz it oi b gy pk pl l pm pn">$ bentoml serve service.py:service --reload</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="ab gu cl nu"><img src="../Images/6f116b609ad5d61e532349bca053d27b.png" data-original-src="https://miro.medium.com/v2/1*wB-qku4TW2tXv-xMJcFbsg.gif"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者GIF</p></figure><p id="2471" class="pw-post-body-paragraph lu lv it lw b lx mo ju lz ma mp jx mc lh mq me mf ll mr mh mi lp ms mk ml mm im bi translated"><code class="fe of og oh oi b">--reload</code>标记确保本地服务器检测到对<code class="fe of og oh oi b">service.py</code>的更改，并自动更新逻辑。</p><p id="c2b7" class="pw-post-body-paragraph lu lv it lw b lx mo ju lz ma mp jx mc lh mq me mf ll mr mh mi lp ms mk ml mm im bi translated">从GIF上可以看到服务器在<a class="ae nt" href="http://127.0.0.1:3000/" rel="noopener ugc nofollow" target="_blank"> http://127.0.0.1:3000/ </a>上直播，有一个简单的UI:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="ab gu cl nu"><img src="../Images/94b024b64f23ea9d9defad8b4676da18.png" data-original-src="https://miro.medium.com/v2/1*tIsQpPZk8qJ63WakYdXByA.gif"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者GIF</p></figure><p id="b936" class="pw-post-body-paragraph lu lv it lw b lx mo ju lz ma mp jx mc lh mq me mf ll mr mh mi lp ms mk ml mm im bi translated">我们已经可以向本地服务器发送请求，并获得对图像的预测:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="pe pf l"/></div></figure><p id="a9c1" class="pw-post-body-paragraph lu lv it lw b lx mo ju lz ma mp jx mc lh mq me mf ll mr mh mi lp ms mk ml mm im bi translated">确保为您的数据类型设置正确的标题，并通过<code class="fe of og oh oi b">str</code>功能发送打包的图像。同样，您可以从文档的<a class="ae nt" href="https://docs.bentoml.org/en/latest/concepts/api_io_descriptors.html#" rel="noopener ugc nofollow" target="_blank">这一页</a>中找到带有每种数据类型的正确内容头的请求示例。</p><p id="f210" class="pw-post-body-paragraph lu lv it lw b lx mo ju lz ma mp jx mc lh mq me mf ll mr mh mi lp ms mk ml mm im bi translated">我们来看看回复文字:</p><pre class="kj kk kl km gt pg oi ph pi aw pj bi"><span id="0573" class="ky kz it oi b gy pk pl l pm pn">&gt;&gt;&gt; print(response.text)<br/>[35.49753189086914]</span></pre><p id="b9e1" class="pw-post-body-paragraph lu lv it lw b lx mo ju lz ma mp jx mc lh mq me mf ll mr mh mi lp ms mk ml mm im bi translated">我们发送的图像是这样的:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="ab gu cl nu"><img src="../Images/f176c480a931085757bd42e94bfaa55e.png" data-original-src="https://miro.medium.com/v2/format:webp/1*ltW0OWlzQHIrauJu_YIxCg.jpeg"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated"><strong class="bd po">图片来自</strong><a class="ae nt" href="https://www.kaggle.com/competitions/petfinder-pawpularity-score/data" rel="noopener ugc nofollow" target="_blank"><strong class="bd po">Pet paw popularity数据集</strong> </a> <strong class="bd po">。</strong></p></figure></div><div class="ab cl nm nn hx no" role="separator"><span class="np bw bk nq nr ns"/><span class="np bw bk nq nr ns"/><span class="np bw bk nq nr"/></div><div class="im in io ip iq"><div class="kj kk kl km gt mw"><a href="https://ibexorigin.medium.com/membership" rel="noopener follow" target="_blank"><div class="mx ab fo"><div class="my ab mz cl cj na"><h2 class="bd iu gy z fp nb fr fs nc fu fw is bi translated">通过我的推荐链接加入Medium。</h2><div class="nd l"><h3 class="bd b gy z fp nb fr fs nc fu fw dk translated">作为一个媒体会员，你的会员费的一部分会给你阅读的作家，你可以完全接触到每一个故事…</h3></div><div class="ne l"><p class="bd b dl z fp nb fr fs nc fu fw dk translated">ibexorigin.medium.com</p></div></div><div class="nf l"><div class="pp l nh ni nj nf nk ks mw"/></div></div></a></div><h2 id="d84b" class="ky kz it bd la lb lc dn ld le lf dp lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">第三步:做便当</h2><p id="ee3d" class="pw-post-body-paragraph lu lv it lw b lx ly ju lz ma mb jx mc lh md me mf ll mg mh mi lp mj mk ml mm im bi translated">现在，我们准备制作我们的第一份便当。</p><p id="71e0" class="pw-post-body-paragraph lu lv it lw b lx mo ju lz ma mp jx mc lh mq me mf ll mr mh mi lp ms mk ml mm im bi translated">术语“便当”是指包含运行我们的在线服务或API的一切的档案，包括所有的代码、模型、依赖信息和设置配置。</p><p id="7052" class="pw-post-body-paragraph lu lv it lw b lx mo ju lz ma mp jx mc lh mq me mf ll mr mh mi lp ms mk ml mm im bi translated">构建它首先要在目录中创建一个与<code class="fe of og oh oi b">service.py</code>文件相同级别的<code class="fe of og oh oi b">bentofile.yaml</code>文件(最好两者都在项目根目录中):</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="pe pf l"/></div></figure><p id="c27c" class="pw-post-body-paragraph lu lv it lw b lx mo ju lz ma mp jx mc lh mq me mf ll mr mh mi lp ms mk ml mm im bi translated">YAML文件的第一行应该包含服务文件名，后跟“:service”后缀。接下来，你添加所有需要的文件<code class="fe of og oh oi b">service.py</code>文件工作没有错误(数据，助手脚本等)。).在这里，我只包括服务文件本身，因为我们没有在其中使用任何额外的脚本。</p><p id="792a" class="pw-post-body-paragraph lu lv it lw b lx mo ju lz ma mp jx mc lh mq me mf ll mr mh mi lp ms mk ml mm im bi translated">然后，在Python和包下，指定依赖项及其版本。如果你不确定版本，有一个我经常使用的有用的小软件包叫做<code class="fe of og oh oi b">pipreqs</code>:</p><pre class="kj kk kl km gt pg oi ph pi aw pj bi"><span id="01a9" class="ky kz it oi b gy pk pl l pm pn">$ pip install pipreqs<br/><br/>$ pipreqs .</span></pre><p id="5329" class="pw-post-body-paragraph lu lv it lw b lx mo ju lz ma mp jx mc lh mq me mf ll mr mh mi lp ms mk ml mm im bi translated">调用<code class="fe of og oh oi b">pipreqs [path]</code>会创建一个<code class="fe of og oh oi b">requirements.txt</code>文件，其中包含您导入的所有使用过的包以及它们在给定路径下的版本，如下所示:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="pe pf l"/></div></figure><p id="4a81" class="pw-post-body-paragraph lu lv it lw b lx mo ju lz ma mp jx mc lh mq me mf ll mr mh mi lp ms mk ml mm im bi translated">列出依赖项后，只需要调用<code class="fe of og oh oi b">bentoml build</code>:</p><pre class="kj kk kl km gt pg oi ph pi aw pj bi"><span id="bcde" class="ky kz it oi b gy pk pl l pm pn">$ bentoml build</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="ab gu cl nu"><img src="../Images/1f48d94545ccb7b66254095aa9aaabc0.png" data-original-src="https://miro.medium.com/v2/format:webp/1*9WF2zjjHs8UCKvYzdIgc2A.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><p id="6247" class="pw-post-body-paragraph lu lv it lw b lx mo ju lz ma mp jx mc lh mq me mf ll mr mh mi lp ms mk ml mm im bi translated">要查看您所有便当的列表，请拨打<code class="fe of og oh oi b">bentoml list</code></p><pre class="kj kk kl km gt pg oi ph pi aw pj bi"><span id="32e3" class="ky kz it oi b gy pk pl l pm pn">$ bentoml list</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="ab gu cl nu"><img src="../Images/100559edb664cf8629180a6700ba6601.png" data-original-src="https://miro.medium.com/v2/format:webp/1*kOvqyWTx0nmh1K-7nQm2EQ.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure></div><div class="ab cl nm nn hx no" role="separator"><span class="np bw bk nq nr ns"/><span class="np bw bk nq nr ns"/><span class="np bw bk nq nr"/></div><div class="im in io ip iq"><h2 id="18a6" class="ky kz it bd la lb lc dn ld le lf dp lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">步骤4:部署到Heroku</h2><p id="a4a8" class="pw-post-body-paragraph lu lv it lw b lx ly ju lz ma mb jx mc lh md me mf ll mg mh mi lp mj mk ml mm im bi translated"><code class="fe of og oh oi b">build</code>命令在本地商店保存一份新鲜的便当，其树形结构如下:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="pe pf l"/></div></figure><p id="29f4" class="pw-post-body-paragraph lu lv it lw b lx mo ju lz ma mp jx mc lh mq me mf ll mr mh mi lp ms mk ml mm im bi translated">您可以从<a class="ae nt" href="https://docs.bentoml.org/en/latest/concepts/building_bentos.html#building-bentos" rel="noopener ugc nofollow" target="_blank">本页</a>中了解这些子文件夹的功能。我们感兴趣的文件夹是<code class="fe of og oh oi b">env/docker</code>那个。它包含了构建一个全功能Docker容器所需的一切，我们将使用它来在线部署我们的API。</p><p id="9359" class="pw-post-body-paragraph lu lv it lw b lx mo ju lz ma mp jx mc lh mq me mf ll mr mh mi lp ms mk ml mm im bi translated">这有很多选择，像亚马逊EC或谷歌云平台，但Heroku是最省事的平台。</p><p id="416c" class="pw-post-body-paragraph lu lv it lw b lx mo ju lz ma mp jx mc lh mq me mf ll mr mh mi lp ms mk ml mm im bi translated">Heroku是一个流行的云应用程序平台，支持任何语言的开发人员构建和维护云应用程序。如果您还没有，请<a class="ae nt" href="https://signup.heroku.com/" rel="noopener ugc nofollow" target="_blank">创建一个帐户</a>并<a class="ae nt" href="https://devcenter.heroku.com/articles/heroku-cli#install-the-heroku-cli" rel="noopener ugc nofollow" target="_blank">下载CLI </a>，您可以使用它来创建和管理您的Heroku应用程序。</p><p id="ee41" class="pw-post-body-paragraph lu lv it lw b lx mo ju lz ma mp jx mc lh mq me mf ll mr mh mi lp ms mk ml mm im bi translated">安装后，调用<code class="fe of og oh oi b">login</code>来验证您的终端会话:</p><pre class="kj kk kl km gt pg oi ph pi aw pj bi"><span id="7c77" class="ky kz it oi b gy pk pl l pm pn">$ heroku login</span></pre><p id="f8f5" class="pw-post-body-paragraph lu lv it lw b lx mo ju lz ma mp jx mc lh mq me mf ll mr mh mi lp ms mk ml mm im bi translated">这将在浏览器中打开一个选项卡，您可以在其中使用您的凭据登录。接下来，登录到容器注册表:</p><pre class="kj kk kl km gt pg oi ph pi aw pj bi"><span id="e6d3" class="ky kz it oi b gy pk pl l pm pn">$ heroku container:login</span></pre><p id="4747" class="pw-post-body-paragraph lu lv it lw b lx mo ju lz ma mp jx mc lh mq me mf ll mr mh mi lp ms mk ml mm im bi translated">现在，让我们创建一个名为<code class="fe of og oh oi b">pat-pawpularity</code>的应用程序:</p><pre class="kj kk kl km gt pg oi ph pi aw pj bi"><span id="f77b" class="ky kz it oi b gy pk pl l pm pn">$ heroku create pet-pawpularity</span></pre><p id="42c9" class="pw-post-body-paragraph lu lv it lw b lx mo ju lz ma mp jx mc lh mq me mf ll mr mh mi lp ms mk ml mm im bi translated">之后，该应用程序应该可以在<a class="ae nt" href="https://dashboard.heroku.com/apps:" rel="noopener ugc nofollow" target="_blank">https://dashboard.heroku.com/apps:</a>看到</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="ab gu cl nu"><img src="../Images/683cf8d954c4df9e3ff3be5513180efa.png" data-original-src="https://miro.medium.com/v2/format:webp/1*jcEXfTUilP34TcmYsyl8_w.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><p id="005b" class="pw-post-body-paragraph lu lv it lw b lx mo ju lz ma mp jx mc lh mq me mf ll mr mh mi lp ms mk ml mm im bi translated">现在，我们需要将我们的便当推送到这个应用程序，并在线部署它。为此，我们需要<code class="fe of og oh oi b">cd</code>进入便当目录(可以通过<code class="fe of og oh oi b">bentoml list</code>找到)和<code class="fe of og oh oi b">docker</code>文件夹:</p><pre class="kj kk kl km gt pg oi ph pi aw pj bi"><span id="f28b" class="ky kz it oi b gy pk pl l pm pn">$ cd ~/bentoml/bentos/keras_conv2d_smaller_service/uaaub3v3cku3ejcl<br/>$ cd env/docker</span></pre><p id="4162" class="pw-post-body-paragraph lu lv it lw b lx mo ju lz ma mp jx mc lh mq me mf ll mr mh mi lp ms mk ml mm im bi translated">从那里，您调用这个命令:</p><pre class="kj kk kl km gt pg oi ph pi aw pj bi"><span id="c191" class="ky kz it oi b gy pk pl l pm pn">$ heroku container:push web --app pet-pawpularity --context-path=../..</span></pre><p id="d3fa" class="pw-post-body-paragraph lu lv it lw b lx mo ju lz ma mp jx mc lh mq me mf ll mr mh mi lp ms mk ml mm im bi translated">根据归档文件的大小，该命令将需要几分钟才能完成。</p><p id="51ac" class="pw-post-body-paragraph lu lv it lw b lx mo ju lz ma mp jx mc lh mq me mf ll mr mh mi lp ms mk ml mm im bi translated">最后，您可以使用下面的命令发布应用程序:</p><pre class="kj kk kl km gt pg oi ph pi aw pj bi"><span id="dff3" class="ky kz it oi b gy pk pl l pm pn">$ heroku container:release web --app pet-pawpularity</span></pre><p id="46b9" class="pw-post-body-paragraph lu lv it lw b lx mo ju lz ma mp jx mc lh mq me mf ll mr mh mi lp ms mk ml mm im bi translated">现在，你可以去<a class="ae nt" href="https://pet-pawpularity.herokuapp.com/" rel="noopener ugc nofollow" target="_blank">https://pet-pawpularity.herokuapp.com/</a>在线查看API，或者去你仪表盘上的应用页面打开它:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="ab gu cl nu"><img src="../Images/3120c575fcb647a44b0f4e763fc377cf.png" data-original-src="https://miro.medium.com/v2/format:webp/1*krVmmJarZ_x-CG7j8_-RHA.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><p id="ecd4" class="pw-post-body-paragraph lu lv it lw b lx mo ju lz ma mp jx mc lh mq me mf ll mr mh mi lp ms mk ml mm im bi translated">现在，任何人都可以向这个API发送请求。让我们试试:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="pe pf l"/></div></figure></div><div class="ab cl nm nn hx no" role="separator"><span class="np bw bk nq nr ns"/><span class="np bw bk nq nr ns"/><span class="np bw bk nq nr"/></div><div class="im in io ip iq"><h2 id="bffb" class="ky kz it bd la lb lc dn ld le lf dp lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">步骤5:用Streamlit构建一个简单的UI</h2><blockquote class="oy oz pa"><p id="d0dd" class="lu lv mn lw b lx mo ju lz ma mp jx mc pb mq me mf pc mr mh mi pd ms mk ml mm im bi translated">本节所有代码片段均取自项目repo — <a class="ae nt" href="https://dagshub.com/BexTuychiev/pet_pawpularity/src/main/src/ui.py" rel="noopener ugc nofollow" target="_blank"> ui.py </a>。</p></blockquote><p id="7d35" class="pw-post-body-paragraph lu lv it lw b lx mo ju lz ma mp jx mc lh mq me mf ll mr mh mi lp ms mk ml mm im bi translated">现在，让我们围绕我们的API构建一个轻量级用户界面。首先，我们将为我们的应用程序编写一个简单的标题部分，其中包含一个任意的封面图片:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="pe pf l"/></div></figure><p id="4660" class="pw-post-body-paragraph lu lv it lw b lx mo ju lz ma mp jx mc lh mq me mf ll mr mh mi lp ms mk ml mm im bi translated">接下来，我们定义核心功能。我们将创建一个函数，通过向我们的API发送请求来生成可爱度分数:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="pe pf l"/></div></figure><p id="ca00" class="pw-post-body-paragraph lu lv it lw b lx mo ju lz ma mp jx mc lh mq me mf ll mr mh mi lp ms mk ml mm im bi translated">上传到Streamlit应用程序的图像将具有“BytesIO”格式，因此我们需要首先将它们转换为NumPy数组。第6–7行完成了这一点，剩下的就不言自明了。</p><p id="ba7e" class="pw-post-body-paragraph lu lv it lw b lx mo ju lz ma mp jx mc lh mq me mf ll mr mh mi lp ms mk ml mm im bi translated">现在，我们创建两个图像输入组件—一个用于文件上传，另一个用于网络摄像头输入:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="pe pf l"/></div></figure><p id="c5fe" class="pw-post-body-paragraph lu lv it lw b lx mo ju lz ma mp jx mc lh mq me mf ll mr mh mi lp ms mk ml mm im bi translated">使用时，这两个组件将显示一个简单的待机动画，然后返回一个可爱评分。这是我们正在运行的应用程序:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="ab gu cl nu"><img src="../Images/9fa6c29445b9fa83c37489d34d092980.png" data-original-src="https://miro.medium.com/v2/1*61yvVw-rD6RIu96yIqu7gw.gif"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者GIF</p></figure><p id="3532" class="pw-post-body-paragraph lu lv it lw b lx mo ju lz ma mp jx mc lh mq me mf ll mr mh mi lp ms mk ml mm im bi translated">现在，在你将这些改变推送到GitHub之后，你可以通过去<a class="ae nt" href="https://share.streamlit.io/deploy:" rel="noopener ugc nofollow" target="_blank">https://share.streamlit.io/deploy:</a>在线部署你的应用</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="ab gu cl nu"><img src="../Images/b406caba7222ebc8ef306c8be765fb0f.png" data-original-src="https://miro.medium.com/v2/format:webp/1*PZ5fyKt4OyfhwzLw0AMXyA.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">图片由作者提供。</p></figure><p id="a6ac" class="pw-post-body-paragraph lu lv it lw b lx mo ju lz ma mp jx mc lh mq me mf ll mr mh mi lp ms mk ml mm im bi translated">以下是已部署应用的链接:<a class="ae nt" href="https://share.streamlit.io/bextuychiev/pet_pawpularity/ui/src/ui.py" rel="noopener ugc nofollow" target="_blank">https://share . streamlit . io/bextuychiev/pet _ paw pularity/ui/src/ui . py</a></p></div><div class="ab cl nm nn hx no" role="separator"><span class="np bw bk nq nr ns"/><span class="np bw bk nq nr ns"/><span class="np bw bk nq nr"/></div><div class="im in io ip iq"><h2 id="7cb1" class="ky kz it bd la lb lc dn ld le lf dp lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">结论</h2><p id="34cf" class="pw-post-body-paragraph lu lv it lw b lx ly ju lz ma mb jx mc lh md me mf ll mg mh mi lp mj mk ml mm im bi translated">恭喜你！您刚刚构建了一个完整的图像应用程序，它为日常用户提供了一个非常棒的UI，并为您的程序员朋友或队友提供了自己的API。现在，您有了一种可靠的方式来与其他人共享您的模型，而不必担心环境设置和代码。</p><p id="8b63" class="pw-post-body-paragraph lu lv it lw b lx mo ju lz ma mp jx mc lh mq me mf ll mr mh mi lp ms mk ml mm im bi translated">感谢您的阅读！</p><div class="mt mu gp gr mv mw"><a href="https://ibexorigin.medium.com/membership" rel="noopener follow" target="_blank"><div class="mx ab fo"><div class="my ab mz cl cj na"><h2 class="bd iu gy z fp nb fr fs nc fu fw is bi translated">通过我的推荐链接加入Medium。</h2><div class="nd l"><h3 class="bd b gy z fp nb fr fs nc fu fw dk translated">作为一个媒体会员，你的会员费的一部分会给你阅读的作家，你可以完全接触到每一个故事…</h3></div><div class="ne l"><p class="bd b dl z fp nb fr fs nc fu fw dk translated">ibexorigin.medium.com</p></div></div><div class="nf l"><div class="pp l nh ni nj nf nk ks mw"/></div></div></a></div><div class="mt mu gp gr mv mw"><a href="https://ibexorigin.medium.com/subscribe" rel="noopener follow" target="_blank"><div class="mx ab fo"><div class="my ab mz cl cj na"><h2 class="bd iu gy z fp nb fr fs nc fu fw is bi translated">每当Bex T .发布时收到电子邮件。</h2><div class="nd l"><h3 class="bd b gy z fp nb fr fs nc fu fw dk translated">每当Bex T .发布时收到电子邮件。注册后，如果您还没有中型帐户，您将创建一个…</h3></div><div class="ne l"><p class="bd b dl z fp nb fr fs nc fu fw dk translated">ibexorigin.medium.com</p></div></div><div class="nf l"><div class="pq l nh ni nj nf nk ks mw"/></div></div></a></div></div><div class="ab cl nm nn hx no" role="separator"><span class="np bw bk nq nr ns"/><span class="np bw bk nq nr ns"/><span class="np bw bk nq nr"/></div><div class="im in io ip iq"><h2 id="615e" class="ky kz it bd la lb lc dn ld le lf dp lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">也可以随意查看这些内容:</h2><div class="mt mu gp gr mv mw"><a rel="noopener follow" target="_blank" href="/open-source-ml-project-with-dagshub-improve-pet-adoption-with-machine-learning-1-e9403f8f7711"><div class="mx ab fo"><div class="my ab mz cl cj na"><h2 class="bd iu gy z fp nb fr fs nc fu fw is bi translated">DagsHub的开源ML项目:通过机器学习提高宠物认养率，第一</h2><div class="nd l"><h3 class="bd b gy z fp nb fr fs nc fu fw dk translated">构建一个预测猫狗可爱程度的应用程序</h3></div><div class="ne l"><p class="bd b dl z fp nb fr fs nc fu fw dk translated">towardsdatascience.com</p></div></div><div class="nf l"><div class="pr l nh ni nj nf nk ks mw"/></div></div></a></div><div class="mt mu gp gr mv mw"><a rel="noopener follow" target="_blank" href="/complete-guide-to-experiment-tracking-with-mlflow-and-dagshub-a0439479e0b9"><div class="mx ab fo"><div class="my ab mz cl cj na"><h2 class="bd iu gy z fp nb fr fs nc fu fw is bi translated">使用MLFlow和DagsHub进行实验跟踪的完整指南</h2><div class="nd l"><h3 class="bd b gy z fp nb fr fs nc fu fw dk translated">创建可重复且灵活的ML项目</h3></div><div class="ne l"><p class="bd b dl z fp nb fr fs nc fu fw dk translated">towardsdatascience.com</p></div></div><div class="nf l"><div class="ox l nh ni nj nf nk ks mw"/></div></div></a></div><div class="mt mu gp gr mv mw"><a rel="noopener follow" target="_blank" href="/3-best-often-better-alternatives-to-histograms-61ddaec05305"><div class="mx ab fo"><div class="my ab mz cl cj na"><h2 class="bd iu gy z fp nb fr fs nc fu fw is bi translated">直方图的3个最佳(通常更好)替代方案</h2><div class="nd l"><h3 class="bd b gy z fp nb fr fs nc fu fw dk translated">避免直方图最危险的陷阱</h3></div><div class="ne l"><p class="bd b dl z fp nb fr fs nc fu fw dk translated">towardsdatascience.com</p></div></div><div class="nf l"><div class="ps l nh ni nj nf nk ks mw"/></div></div></a></div><div class="mt mu gp gr mv mw"><a rel="noopener follow" target="_blank" href="/comprehensive-guide-to-writing-python-functions-others-can-use-2fa186c6be71"><div class="mx ab fo"><div class="my ab mz cl cj na"><h2 class="bd iu gy z fp nb fr fs nc fu fw is bi translated">编写其他人可以使用的Python函数的综合指南</h2><div class="nd l"><h3 class="bd b gy z fp nb fr fs nc fu fw dk translated">函数编写是一项技能——迈出掌握它的第一步</h3></div><div class="ne l"><p class="bd b dl z fp nb fr fs nc fu fw dk translated">towardsdatascience.com</p></div></div><div class="nf l"><div class="pt l nh ni nj nf nk ks mw"/></div></div></a></div></div></div>    
</body>
</html>