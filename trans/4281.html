<html>
<head>
<title>4 Tools to Automatically Extract Data from Datetime in Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用Python从日期时间中自动提取数据的4个工具</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/4-tools-to-automatically-extract-data-from-datetime-in-python-9ecf44943f89#2022-09-22">https://towardsdatascience.com/4-tools-to-automatically-extract-data-from-datetime-in-python-9ecf44943f89#2022-09-22</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="4eb3" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">如何从文本中提取日期时间，从日期时间中提取数据</h2></div><h1 id="fbe0" class="ki kj it bd kk kl km kn ko kp kq kr ks jz kt ka ku kc kv kd kw kf kx kg ky kz bi translated">动机</h1><p id="2f7b" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">日期时间功能对于时间序列和预测非常重要。然而，您并不总是有干净的日期时间特性可以使用。</p><p id="064d" class="pw-post-body-paragraph la lb it lc b ld lw ju lf lg lx jx li lj ly ll lm ln lz lp lq lr ma lt lu lv im bi translated">如果能自动从文本中提取datetime，从datetime中提取数据，岂不是很好？</p><figure class="mc md me mf gt mg gh gi paragraph-image"><div role="button" tabindex="0" class="mh mi di mj bf mk"><div class="gh gi mb"><img src="../Images/2e83b2e4cbe17eba4aa2b6930d151be3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*D8Uk8rhyFttdtY2ollYbCg.png"/></div></div><p class="mn mo gj gh gi mp mq bd b be z dk translated">作者图片</p></figure><p id="751b" class="pw-post-body-paragraph la lb it lc b ld lw ju lf lg lx jx li lj ly ll lm ln lz lp lq lr ma lt lu lv im bi translated">在这篇文章中，你将学习4种工具来做到这一点。</p><h1 id="4072" class="ki kj it bd kk kl km kn ko kp kq kr ks jz kt ka ku kc kv kd kw kf kx kg ky kz bi translated">datefinder:自动查找Python字符串中的日期和时间</h1><figure class="mc md me mf gt mg"><div class="bz fp l di"><div class="mr ms l"/></div><p class="mn mo gj gh gi mp mq bd b be z dk translated">作者提供的视频</p></figure><p id="508e" class="pw-post-body-paragraph la lb it lc b ld lw ju lf lg lx jx li lj ly ll lm ln lz lp lq lr ma lt lu lv im bi translated">您是否曾经想从非结构化的文本中提取日期和时间，但是发现很难做到？<a class="ae mt" href="https://github.com/akoumjian/datefinder" rel="noopener ugc nofollow" target="_blank"> datefinder </a>允许你在Python字符串中自动查找不同格式的日期和时间。</p><figure class="mc md me mf gt mg gh gi paragraph-image"><div role="button" tabindex="0" class="mh mi di mj bf mk"><div class="gh gi mu"><img src="../Images/fc6e6834c3a918522c80d4a9c043aa34.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0CMxT-Z0I5ZnzDhU9QaX9g.png"/></div></div><p class="mn mo gj gh gi mp mq bd b be z dk translated">作者图片</p></figure><figure class="mc md me mf gt mg"><div class="bz fp l di"><div class="mv ms l"/></div></figure><p id="43ec" class="pw-post-body-paragraph la lb it lc b ld lw ju lf lg lx jx li lj ly ll lm ln lz lp lq lr ma lt lu lv im bi translated">输出:</p><pre class="mc md me mf gt mw mx my mz aw na bi"><span id="feef" class="nb kj it mx b gy nc nd l ne nf">Date and time: 2021-05-17 09:00:00<br/>Only day: 17<br/>Date and time: 2021-05-18 10:00:00<br/>Only day: 18</span></pre><p id="4f94" class="pw-post-body-paragraph la lb it lc b ld lw ju lf lg lx jx li lj ly ll lm ln lz lp lq lr ma lt lu lv im bi translated">要安装datefinder，请键入:</p><pre class="mc md me mf gt mw mx my mz aw na bi"><span id="0769" class="nb kj it mx b gy nc nd l ne nf">pip install datefinder</span></pre><h1 id="5c51" class="ki kj it bd kk kl km kn ko kp kq kr ks jz kt ka ku kc kv kd kw kf kx kg ky kz bi translated">Maya:自动将字符串转化为日期时间</h1><p id="8794" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">如果要将字符串类型转换为日期时间类型，常见的方法是使用<code class="fe ng nh ni mx b">strptime(date_string, format)</code>。但是指定你的datetime字符串的结构是相当不方便的，比如<code class="fe ng nh ni mx b">%Y-%m-%d %H:%M:%S.%f%z</code>。</p><figure class="mc md me mf gt mg"><div class="bz fp l di"><div class="mv ms l"/></div></figure><pre class="mc md me mf gt mw mx my mz aw na bi"><span id="1ce7" class="nb kj it mx b gy nc nd l ne nf">datetime.datetime(2016, 12, 16, 18, 23, 45, 423992, tzinfo=datetime.timezone.utc)</span></pre><p id="cd1a" class="pw-post-body-paragraph la lb it lc b ld lw ju lf lg lx jx li lj ly ll lm ln lz lp lq lr ma lt lu lv im bi translated"><a class="ae mt" href="https://github.com/timofurrer/maya" rel="noopener ugc nofollow" target="_blank"> maya </a>帮助您自动将字符串转换为日期时间。你只需要解析字符串，maya就会计算出你的字符串的结构。</p><figure class="mc md me mf gt mg gh gi paragraph-image"><div role="button" tabindex="0" class="mh mi di mj bf mk"><div class="gh gi mu"><img src="../Images/217ad776e609b8d996b8190065e2d07e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*NmiT_CxzFfXVQmDN_4Y40Q.png"/></div></div><p class="mn mo gj gh gi mp mq bd b be z dk translated">作者图片</p></figure><figure class="mc md me mf gt mg"><div class="bz fp l di"><div class="mv ms l"/></div></figure><pre class="mc md me mf gt mw mx my mz aw na bi"><span id="0b88" class="nb kj it mx b gy nc nd l ne nf">datetime.datetime(2016, 12, 16, 18, 23, 45, 423992, tzinfo=&lt;UTC&gt;)</span></pre><p id="beac" class="pw-post-body-paragraph la lb it lc b ld lw ju lf lg lx jx li lj ly ll lm ln lz lp lq lr ma lt lu lv im bi translated">maya还允许您轻松地将一个时区转换为另一个时区:</p><figure class="mc md me mf gt mg"><div class="bz fp l di"><div class="mv ms l"/></div></figure><pre class="mc md me mf gt mw mx my mz aw na bi"><span id="2704" class="nb kj it mx b gy nc nd l ne nf">datetime.datetime(2016, 12, 16, 12, 23, 45, 423992, tzinfo=&lt;DstTzInfo 'US/Central' CST-1 day, 18:00:00 STD&gt;)</span></pre><p id="96db" class="pw-post-body-paragraph la lb it lc b ld lw ju lf lg lx jx li lj ly ll lm ln lz lp lq lr ma lt lu lv im bi translated">要安装maya，请键入:</p><pre class="mc md me mf gt mw mx my mz aw na bi"><span id="a42f" class="nb kj it mx b gy nc nd l ne nf">pip install maya</span></pre><h1 id="3a3f" class="ki kj it bd kk kl km kn ko kp kq kr ks jz kt ka ku kc kv kd kw kf kx kg ky kz bi translated">Fastai的add_datepart:在一行代码中添加相关的DateTime特性</h1><p id="c504" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">在处理时间序列时，年、月、周、一周中的某一天和一年中的某一天等其他特征对于预测未来事件非常有帮助。</p><p id="4d3a" class="pw-post-body-paragraph la lb it lc b ld lw ju lf lg lx jx li lj ly ll lm ln lz lp lq lr ma lt lu lv im bi translated">有没有一种方法可以在一行代码中获得所有这些特性？</p><p id="a9d3" class="pw-post-body-paragraph la lb it lc b ld lw ju lf lg lx jx li lj ly ll lm ln lz lp lq lr ma lt lu lv im bi translated">Fastai的<code class="fe ng nh ni mx b">add_datepart</code>方法可以让你做到这一点。</p><figure class="mc md me mf gt mg gh gi paragraph-image"><div role="button" tabindex="0" class="mh mi di mj bf mk"><div class="gh gi mu"><img src="../Images/7624988b3a2754352108dcb5c4619477.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zudKofgTYNOgg2TAEQlryQ.png"/></div></div><p class="mn mo gj gh gi mp mq bd b be z dk translated">作者图片</p></figure><p id="9b8d" class="pw-post-body-paragraph la lb it lc b ld lw ju lf lg lx jx li lj ly ll lm ln lz lp lq lr ma lt lu lv im bi translated">为了了解这种方法是如何工作的，让我们从创建一个简单的数据帧开始。</p><figure class="mc md me mf gt mg"><div class="bz fp l di"><div class="mv ms l"/></div></figure><figure class="mc md me mf gt mg gh gi paragraph-image"><div class="gh gi nj"><img src="../Images/0e2f63f3b1bdb0a2d063127c8fef78cc.png" data-original-src="https://miro.medium.com/v2/resize:fit:462/format:webp/1*HBkJCM71GzYV9X7Vh6hyRg.png"/></div><p class="mn mo gj gh gi mp mq bd b be z dk translated">作者图片</p></figure><p id="04fa" class="pw-post-body-paragraph la lb it lc b ld lw ju lf lg lx jx li lj ly ll lm ln lz lp lq lr ma lt lu lv im bi translated">接下来，我们将使用<code class="fe ng nh ni mx b">add_datepart</code>向DataFrame添加日期特性。</p><figure class="mc md me mf gt mg"><div class="bz fp l di"><div class="mv ms l"/></div></figure><p id="7172" class="pw-post-body-paragraph la lb it lc b ld lw ju lf lg lx jx li lj ly ll lm ln lz lp lq lr ma lt lu lv im bi translated">我们将看到以下新列:</p><figure class="mc md me mf gt mg"><div class="bz fp l di"><div class="mv ms l"/></div></figure><p id="e03a" class="pw-post-body-paragraph la lb it lc b ld lw ju lf lg lx jx li lj ly ll lm ln lz lp lq lr ma lt lu lv im bi translated">这是新数据帧的外观:</p><figure class="mc md me mf gt mg"><div class="bz fp l di"><div class="nk ms l"/></div></figure><p id="02f1" class="pw-post-body-paragraph la lb it lc b ld lw ju lf lg lx jx li lj ly ll lm ln lz lp lq lr ma lt lu lv im bi translated">要安装Fastai，请键入:</p><pre class="mc md me mf gt mw mx my mz aw na bi"><span id="6711" class="nb kj it mx b gy nc nd l ne nf">pip install fastai</span></pre><h1 id="6da3" class="ki kj it bd kk kl km kn ko kp kq kr ks jz kt ka ku kc kv kd kw kf kx kg ky kz bi translated">Workalendar:用Python处理工作日计算</h1><p id="9fc7" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">如果您想用Python处理日历、假期和工作日相关的计算，请使用<a class="ae mt" href="https://github.com/workalendar/workalendar" rel="noopener ugc nofollow" target="_blank"> Workalendar </a>。</p><figure class="mc md me mf gt mg gh gi paragraph-image"><div role="button" tabindex="0" class="mh mi di mj bf mk"><div class="gh gi mu"><img src="../Images/55523d156d6a1153f2602c44170cbae1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*SSWgF3Xr5sdMEH3J5p43Qg.png"/></div></div><p class="mn mo gj gh gi mp mq bd b be z dk translated">作者图片</p></figure><p id="b51a" class="pw-post-body-paragraph la lb it lc b ld lw ju lf lg lx jx li lj ly ll lm ln lz lp lq lr ma lt lu lv im bi translated">Workalendar支持全球近100个国家。让我们看看在美国有什么假期。</p><figure class="mc md me mf gt mg"><div class="bz fp l di"><div class="mv ms l"/></div></figure><p id="506f" class="pw-post-body-paragraph la lb it lc b ld lw ju lf lg lx jx li lj ly ll lm ln lz lp lq lr ma lt lu lv im bi translated">输出:</p><figure class="mc md me mf gt mg"><div class="bz fp l di"><div class="mv ms l"/></div></figure><p id="2596" class="pw-post-body-paragraph la lb it lc b ld lw ju lf lg lx jx li lj ly ll lm ln lz lp lq lr ma lt lu lv im bi translated">在日本度假:</p><figure class="mc md me mf gt mg"><div class="bz fp l di"><div class="mv ms l"/></div></figure><figure class="mc md me mf gt mg"><div class="bz fp l di"><div class="mv ms l"/></div></figure><p id="a4f3" class="pw-post-body-paragraph la lb it lc b ld lw ju lf lg lx jx li lj ly ll lm ln lz lp lq lr ma lt lu lv im bi translated">我们还可以使用Workalendar来检查特定日期是否是工作日:</p><figure class="mc md me mf gt mg"><div class="bz fp l di"><div class="mv ms l"/></div></figure><pre class="mc md me mf gt mw mx my mz aw na bi"><span id="22d4" class="nb kj it mx b gy nc nd l ne nf">False</span></pre><figure class="mc md me mf gt mg"><div class="bz fp l di"><div class="mv ms l"/></div></figure><pre class="mc md me mf gt mw mx my mz aw na bi"><span id="6005" class="nb kj it mx b gy nc nd l ne nf">False</span></pre><p id="6d8a" class="pw-post-body-paragraph la lb it lc b ld lw ju lf lg lx jx li lj ly ll lm ln lz lp lq lr ma lt lu lv im bi translated">计算两个指定日期之间的工作日:</p><figure class="mc md me mf gt mg"><div class="bz fp l di"><div class="mv ms l"/></div></figure><pre class="mc md me mf gt mw mx my mz aw na bi"><span id="133a" class="nb kj it mx b gy nc nd l ne nf">81</span></pre><p id="e6f9" class="pw-post-body-paragraph la lb it lc b ld lw ju lf lg lx jx li lj ly ll lm ln lz lp lq lr ma lt lu lv im bi translated">很方便，不是吗？</p><p id="3854" class="pw-post-body-paragraph la lb it lc b ld lw ju lf lg lx jx li lj ly ll lm ln lz lp lq lr ma lt lu lv im bi translated">要安装Workalendar，请键入:</p><pre class="mc md me mf gt mw mx my mz aw na bi"><span id="58b1" class="nb kj it mx b gy nc nd l ne nf">pip install workalendar</span></pre><h1 id="d7eb" class="ki kj it bd kk kl km kn ko kp kq kr ks jz kt ka ku kc kv kd kw kf kx kg ky kz bi translated">结论</h1><p id="302b" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">恭喜你！您刚刚学习了如何使用4种不同的工具自动提取日期时间及其特征。我希望本文能为您提供从日期时间数据中获取更多信息所需的知识。</p><p id="0fb6" class="pw-post-body-paragraph la lb it lc b ld lw ju lf lg lx jx li lj ly ll lm ln lz lp lq lr ma lt lu lv im bi translated">随意发挥，并在这里叉这篇文章的源代码:</p><div class="nl nm gp gr nn no"><a href="https://github.com/khuyentran1401/Data-science/blob/master/time_series/extract_date_features.ipynb" rel="noopener  ugc nofollow" target="_blank"><div class="np ab fo"><div class="nq ab nr cl cj ns"><h2 class="bd iu gy z fp nt fr fs nu fu fw is bi translated">数据科学/extract _ date _ features . ipynb at master khuyentran 1401/数据科学</h2><div class="nv l"><h3 class="bd b gy z fp nt fr fs nu fu fw dk translated">收集有用的数据科学主题以及代码和文章-Data-science/extract _ date _ features . ipynb，网址为…</h3></div><div class="nw l"><p class="bd b dl z fp nt fr fs nu fu fw dk translated">github.com</p></div></div><div class="nx l"><div class="ny l nz oa ob nx oc ml no"/></div></div></a></div></div><div class="ab cl od oe hx of" role="separator"><span class="og bw bk oh oi oj"/><span class="og bw bk oh oi oj"/><span class="og bw bk oh oi"/></div><div class="im in io ip iq"><p id="f735" class="pw-post-body-paragraph la lb it lc b ld lw ju lf lg lx jx li lj ly ll lm ln lz lp lq lr ma lt lu lv im bi translated">我喜欢写一些基本的数据科学概念，并尝试不同的数据科学工具。你可以在LinkedIn和T2 Twitter上与我联系。</p><p id="82c3" class="pw-post-body-paragraph la lb it lc b ld lw ju lf lg lx jx li lj ly ll lm ln lz lp lq lr ma lt lu lv im bi translated">星<a class="ae mt" href="https://github.com/khuyentran1401/Data-science" rel="noopener ugc nofollow" target="_blank">这个回购</a>如果你想检查我写的所有文章的代码。在Medium上关注我，了解我的最新数据科学文章，例如:</p><div class="nl nm gp gr nn no"><a rel="noopener follow" target="_blank" href="/3-tools-to-track-and-visualize-the-execution-of-your-python-code-666a153e435e"><div class="np ab fo"><div class="nq ab nr cl cj ns"><h2 class="bd iu gy z fp nt fr fs nu fu fw is bi translated">3个跟踪和可视化Python代码执行的工具</h2><div class="nw l"><p class="bd b dl z fp nt fr fs nu fu fw dk translated">towardsdatascience.com</p></div></div><div class="nx l"><div class="ok l nz oa ob nx oc ml no"/></div></div></a></div><div class="nl nm gp gr nn no"><a rel="noopener follow" target="_blank" href="/kats-a-generalizable-framework-to-analyze-time-series-data-in-python-3c8d21efe057"><div class="np ab fo"><div class="nq ab nr cl cj ns"><h2 class="bd iu gy z fp nt fr fs nu fu fw is bi translated">kats:Python中分析时间序列数据的通用框架</h2><div class="nv l"><h3 class="bd b gy z fp nt fr fs nu fu fw dk translated">预测、检测变化点、异常，并获得时间序列中的关键统计数据</h3></div><div class="nw l"><p class="bd b dl z fp nt fr fs nu fu fw dk translated">towardsdatascience.com</p></div></div><div class="nx l"><div class="ol l nz oa ob nx oc ml no"/></div></div></a></div><div class="nl nm gp gr nn no"><a rel="noopener follow" target="_blank" href="/similarity-encoding-for-dirty-categories-using-dirty-cat-d9f0b581a552"><div class="np ab fo"><div class="nq ab nr cl cj ns"><h2 class="bd iu gy z fp nt fr fs nu fu fw is bi translated">使用dirty_cat对脏类别进行相似性编码</h2><div class="nw l"><p class="bd b dl z fp nt fr fs nu fu fw dk translated">towardsdatascience.com</p></div></div><div class="nx l"><div class="om l nz oa ob nx oc ml no"/></div></div></a></div><div class="nl nm gp gr nn no"><a rel="noopener follow" target="_blank" href="/introduction-to-yellowbrick-a-python-library-to-explain-the-prediction-of-your-machine-learning-d63ecee10ecc"><div class="np ab fo"><div class="nq ab nr cl cj ns"><h2 class="bd iu gy z fp nt fr fs nu fu fw is bi translated">Yellowbrick简介:可视化机器学习预测的Python库…</h2><div class="nv l"><h3 class="bd b gy z fp nt fr fs nu fu fw dk translated">您将f1分数提高到了98%！但这是否意味着你的模型表现更好呢？</h3></div><div class="nw l"><p class="bd b dl z fp nt fr fs nu fu fw dk translated">towardsdatascience.com</p></div></div><div class="nx l"><div class="on l nz oa ob nx oc ml no"/></div></div></a></div></div></div>    
</body>
</html>