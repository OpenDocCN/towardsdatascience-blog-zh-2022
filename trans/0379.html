<html>
<head>
<title>Python’s F-Strings Are A Lot More Useful Than You Might Have Thought</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Python的F字符串比你想象的要有用得多</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/pythons-f-strings-are-a-lot-more-useful-than-you-might-have-thought-54a2ca6d2df8#2022-02-15">https://towardsdatascience.com/pythons-f-strings-are-a-lot-more-useful-than-you-might-have-thought-54a2ca6d2df8#2022-02-15</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="f917" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">大多数人都没有意识到f字符串在Python中可以做的一些很酷的事情</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/e35965d101b8f3a94e4f05237b6e6c45.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_RY4PyNdufKReeWEePdlGg.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">(图片由<a class="ae ky" href="http://pixabay.com" rel="noopener ugc nofollow" target="_blank"> Pixabay </a>上的<a class="ae ky" href="https://pixabay.com/images/id-2667529/" rel="noopener ugc nofollow" target="_blank"> StarzySpringer </a>提供)</p></figure><h1 id="07da" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">介绍</h1><p id="aaa3" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi mn translated"><span class="l mo mp mq bm mr ms mt mu mv di">我们</span>很可能都熟悉弦乐；自计算历史开始以来，大多数编程语言中都有这种核心数据类型。字符串很棒，因为它们能够用ASCII或Unicode表示一系列对人类来说非常明显的字符。作为人类，我们可能不会说组成unicode字符的0和1的语言，但字符串是完全可以理解的。</p><p id="43a4" class="pw-post-body-paragraph lr ls it lt b lu mw ju lw lx mx jx lz ma my mc md me mz mg mh mi na mk ml mm im bi translated">如果您用来编程的编程语言本质上至少是高级的，那么您可能也熟悉字符串插值的概念。字符串插值是编程语言通过定义字符串来读取和修改字符串的能力。在Python中，像这样的字符串插值是通过一个叫做F字符串的特性来完成的。F字符串允许你用字符串做很多事情，有些人甚至没有意识到Python中F字符串的全部功能。幸运的是，互联网上有一些随机的博客作者可以为你的大脑深入探究F弦，这就是我今天要做的。如果你想与接下来的代码进行交互，我在这个小项目中使用的笔记本也可以在Github上找到:</p><div class="nb nc gp gr nd ne"><a href="https://github.com/emmettgb/Emmetts-DS-NoteBooks/blob/master/Python3/f%20strings.ipynb" rel="noopener  ugc nofollow" target="_blank"><div class="nf ab fo"><div class="ng ab nh cl cj ni"><h2 class="bd iu gy z fp nj fr fs nk fu fw is bi translated">Emmetts-DS-NoteBooks/f strings . ipynb at master emmett GB/Emmetts-DS-NoteBooks</h2><div class="nl l"><h3 class="bd b gy z fp nj fr fs nk fu fw dk translated">各种项目的随机笔记本。通过创建帐户，为emmettgb/Emmetts-DS笔记本电脑的开发做出贡献…</h3></div><div class="nm l"><p class="bd b dl z fp nj fr fs nk fu fw dk translated">github.com</p></div></div><div class="nn l"><div class="no l np nq nr nn ns ks ne"/></div></div></a></div></div><div class="ab cl nt nu hx nv" role="separator"><span class="nw bw bk nx ny nz"/><span class="nw bw bk nx ny nz"/><span class="nw bw bk nx ny"/></div><div class="im in io ip iq"><h1 id="ebb7" class="kz la it bd lb lc oa le lf lg ob li lj jz oc ka ll kc od kd ln kf oe kg lp lq bi translated">什么是F弦？</h1><p id="9458" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">在我们讨论F弦能做什么之前，我们先简单了解一下F弦到底是什么，这可能很重要。在Python中，普通字符串是不插值的。这当然可以帮助语言减少一些延迟，因为它是被解释的。我认为这也是一件好事，因为没有隐式插值的理由，它可能会导致比它解决的问题更多的问题。例如，在Julia中，字符串总是内插的，所以有可能你试图创建一个字符串</p><pre class="kj kk kl km gt of og oh oi aw oj bi"><span id="05ba" class="ok la it og b gy ol om l on oo">x = 5<br/>mystr = "and I said for $x dollars in my wallet, I will buy one icecream"</span></pre><p id="77aa" class="pw-post-body-paragraph lr ls it lt b lu mw ju lw lx mx jx lz ma my mc md me mz mg mh mi na mk ml mm im bi translated">当你想要x美元的时候却意外地得到了5美元。不确定所有这些会有多频繁地同时发生，但这肯定是<strong class="lt iu">可能</strong>发生的事情。无论如何，Python中的F字符串是通过在字符串前提供一个F来表示的，就像这样:</p><pre class="kj kk kl km gt of og oh oi aw oj bi"><span id="ad2c" class="ok la it og b gy ol om l on oo">f""</span></pre><p id="dc8b" class="pw-post-body-paragraph lr ls it lt b lu mw ju lw lx mx jx lz ma my mc md me mz mg mh mi na mk ml mm im bi translated">F字符串最明显的用法是在throws，output，等等里面插入简单的值。这是通过使用{}语法并提供值名来完成的。当然，如果可能的话，该值也将被隐式转换。</p><pre class="kj kk kl km gt of og oh oi aw oj bi"><span id="0005" class="ok la it og b gy ol om l on oo">x = 5<br/>f"One icecream is worth {x} dollars"</span></pre><p id="9ab8" class="pw-post-body-paragraph lr ls it lt b lu mw ju lw lx mx jx lz ma my mc md me mz mg mh mi na mk ml mm im bi translated">这会产生一个实际上看起来更像这样的字符串:</p><pre class="kj kk kl km gt of og oh oi aw oj bi"><span id="71a6" class="ok la it og b gy ol om l on oo">'One icecream is worth 5 dollars' </span></pre><h1 id="adc2" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">更多关于F弦的信息</h1><p id="12df" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">我们已经确定了F字符串可以用来插入Python代码，但是它能做什么呢？我们可以对F字符串做的一件值得注意的事情是提供一种“this = that”类型的插值，这可能对调试和错误处理有用。我们只需添加一个等号:</p><pre class="kj kk kl km gt of og oh oi aw oj bi"><span id="16be" class="ok la it og b gy ol om l on oo">f"If you are wondering what x is, {x=}"</span><span id="81b7" class="ok la it og b gy op om l on oo">'If you are wondering what x is, x=5'</span></pre><p id="3c7d" class="pw-post-body-paragraph lr ls it lt b lu mw ju lw lx mx jx lz ma my mc md me mz mg mh mi na mk ml mm im bi translated">我们可以利用的另一件事是所谓的转换。转换允许我们在插值之前对其应用函数，例如</p><ul class=""><li id="8d88" class="oq or it lt b lu mw lx mx ma os me ot mi ou mm ov ow ox oy bi translated">！r —显示字符串分隔符，调用repr()方法。</li><li id="26d4" class="oq or it lt b lu oz lx pa ma pb me pc mi pd mm ov ow ox oy bi translated">！a-显示字符的Ascii。</li><li id="2102" class="oq or it lt b lu oz lx pa ma pb me pc mi pd mm ov ow ox oy bi translated">！s —将值转换为字符串。</li></ul><p id="ed52" class="pw-post-body-paragraph lr ls it lt b lu mw ju lw lx mx jx lz ma my mc md me mz mg mh mi na mk ml mm im bi translated">这些都很有价值，只要打个电话就能发挥作用！r在最后，经常！s是不需要的，因为通常我们打印的数据类型，正如我提到的，是隐式转换的，不是典型的结构，但在某些情况下，你可能需要提供这个。以下是repr版本的使用示例:</p><pre class="kj kk kl km gt of og oh oi aw oj bi"><span id="bc06" class="ok la it og b gy ol om l on oo">food = "cabbage"<br/>food2brand = "Mcdonalds"<br/>food2 = "French fries"</span><span id="4503" class="ok la it og b gy op om l on oo">f"I like eating {food} and {food2brand} {food2!r}"</span><span id="da0c" class="ok la it og b gy op om l on oo">"I like eating cabbage and Mcdonalds 'French fries'"</span></pre><p id="072b" class="pw-post-body-paragraph lr ls it lt b lu mw ju lw lx mx jx lz ma my mc md me mz mg mh mi na mk ml mm im bi translated">我们也可以使用对象格式化来改变插值的格式。Python中的每个对象都可以决定它们的格式在字符串中的表示方式。为了表示这就是我们想要做的，我们使用了一个冒号，后跟我们想要添加的格式，例如在这里我们这样做是为了日期-时间。</p><pre class="kj kk kl km gt of og oh oi aw oj bi"><span id="9574" class="ok la it og b gy ol om l on oo">import datetime<br/>date = datetime.datetime.utcnow()<br/>f"The date is {time:%m-%Y %d}"</span><span id="2fba" class="ok la it og b gy op om l on oo">'The date is 02-2022 15'</span></pre><p id="15ba" class="pw-post-body-paragraph lr ls it lt b lu mw ju lw lx mx jx lz ma my mc md me mz mg mh mi na mk ml mm im bi translated">这将调用__format__方法，该方法至少提供给大多数类。</p></div><div class="ab cl nt nu hx nv" role="separator"><span class="nw bw bk nx ny nz"/><span class="nw bw bk nx ny nz"/><span class="nw bw bk nx ny"/></div><div class="im in io ip iq"><h1 id="8507" class="kz la it bd lb lc oa le lf lg ob li lj jz oc ka ll kc od kd ln kf oe kg lp lq bi translated">结论</h1><p id="5a10" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">所以你可以用F弦做一些很棒的事情。一般来说，大多数人认为F字符串的功能非常有限，但是它们确实可以做很多不同的事情。字符串在Python中是一个非常重要的概念，虽然Python可能不是元编程和将字符串解析为代码的最佳语言，但在Python的这个领域肯定也有用例。非常感谢您的阅读，并快乐插值！</p></div></div>    
</body>
</html>