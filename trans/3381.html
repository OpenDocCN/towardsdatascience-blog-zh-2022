<html>
<head>
<title>PRegEx: Write Human-Readable Regular Expressions in Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">PRegEx:用Python编写人类可读的正则表达式</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/pregex-write-human-readable-regular-expressions-in-python-9c87d1b1335#2022-07-27">https://towardsdatascience.com/pregex-write-human-readable-regular-expressions-in-python-9c87d1b1335#2022-07-27</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="64a8" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">用人类可读的语法创建复杂的正则表达式</h2></div><h1 id="25f9" class="ki kj it bd kk kl km kn ko kp kq kr ks jz kt ka ku kc kv kd kw kf kx kg ky kz bi translated">动机</h1><p id="07da" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">假设你试图找到一个文本中的所有网址。每个URL都必须:</p><ul class=""><li id="e08a" class="lw lx it lc b ld ly lg lz lj ma ln mb lr mc lv md me mf mg bi translated">以<code class="fe mh mi mj mk b">http://</code>或<code class="fe mh mi mj mk b">https://</code>或URL的域开始</li><li id="159a" class="lw lx it lc b ld ml lg mm lj mn ln mo lr mp lv md me mf mg bi translated">以<code class="fe mh mi mj mk b">.com</code>或<code class="fe mh mi mj mk b">.org</code>结尾</li></ul><p id="20ec" class="pw-post-body-paragraph la lb it lc b ld ly ju lf lg lz jx li lj mq ll lm ln mr lp lq lr ms lt lu lv im bi translated">您最终可能会编写一个复杂的正则表达式(RegEx)，如下所示:</p><figure class="mu mv mw mx gt my gh gi paragraph-image"><div role="button" tabindex="0" class="mz na di nb bf nc"><div class="gh gi mt"><img src="../Images/e53b760691ed1a6405f558e85a41ab0c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*iLClehlkgMcNEjHOln0qow.png"/></div></div><p class="nf ng gj gh gi nh ni bd b be z dk translated">作者图片</p></figure><p id="1895" class="pw-post-body-paragraph la lb it lc b ld ly ju lf lg lz jx li lj mq ll lm ln mr lp lq lr ms lt lu lv im bi translated">这个正则表达式很难阅读和创建。有没有一种方法可以让你更容易地编写一个人类可读的正则表达式？</p><p id="b83f" class="pw-post-body-paragraph la lb it lc b ld ly ju lf lg lz jx li lj mq ll lm ln mr lp lq lr ms lt lu lv im bi translated">这时PRegEx就派上用场了。</p><h1 id="7a77" class="ki kj it bd kk kl km kn ko kp kq kr ks jz kt ka ku kc kv kd kw kf kx kg ky kz bi translated">什么是PRegEx？</h1><p id="154c" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">PRegEx 是一个Python包，它允许你以一种更加人性化的方式构建正则表达式模式。</p><p id="00cc" class="pw-post-body-paragraph la lb it lc b ld ly ju lf lg lz jx li lj mq ll lm ln mr lp lq lr ms lt lu lv im bi translated">要安装<a class="ae nj" href="https://github.com/manoss96/pregex" rel="noopener ugc nofollow" target="_blank"> PRegEx </a>，输入:</p><pre class="mu mv mw mx gt nk mk nl nm aw nn bi"><span id="cfa8" class="no kj it mk b gy np nq l nr ns">pip install pregex</span></pre><p id="6bee" class="pw-post-body-paragraph la lb it lc b ld ly ju lf lg lz jx li lj mq ll lm ln mr lp lq lr ms lt lu lv im bi translated">本文中使用的PRegEx版本是2.0.1:</p><pre class="mu mv mw mx gt nk mk nl nm aw nn bi"><span id="bdbb" class="no kj it mk b gy np nq l nr ns">pip install pregex==2.0.1</span></pre><p id="c71e" class="pw-post-body-paragraph la lb it lc b ld ly ju lf lg lz jx li lj mq ll lm ln mr lp lq lr ms lt lu lv im bi translated">为了学习如何使用PRegEx，让我们从一些例子开始。</p><h1 id="1c42" class="ki kj it bd kk kl km kn ko kp kq kr ks jz kt ka ku kc kv kd kw kf kx kg ky kz bi translated">捕获URL</h1><h2 id="0b6e" class="no kj it bd kk nt nu dn ko nv nw dp ks lj nx ny ku ln nz oa kw lr ob oc ky od bi translated">获取一个简单的URL</h2><p id="67c0" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">首先，我们将尝试使用PRegEx获取文本中的URL。</p><figure class="mu mv mw mx gt my"><div class="bz fp l di"><div class="oe of l"/></div></figure><p id="c5c9" class="pw-post-body-paragraph la lb it lc b ld ly ju lf lg lz jx li lj mq ll lm ln mr lp lq lr ms lt lu lv im bi translated">输出:</p><pre class="mu mv mw mx gt nk mk nl nm aw nn bi"><span id="1306" class="no kj it mk b gy np nq l nr ns">['<a class="ae nj" href="https://github.com/khuyentran1401'" rel="noopener ugc nofollow" target="_blank">https://github.com/khuyentran1401'</a>]</span></pre><p id="1250" class="pw-post-body-paragraph la lb it lc b ld ly ju lf lg lz jx li lj mq ll lm ln mr lp lq lr ms lt lu lv im bi translated">在上面的代码中，我们使用:</p><ul class=""><li id="552c" class="lw lx it lc b ld ly lg lz lj ma ln mb lr mc lv md me mf mg bi translated"><code class="fe mh mi mj mk b">AnyButWhitespace()</code>匹配除空白字符以外的任何字符</li><li id="e48b" class="lw lx it lc b ld ml lg mm lj mn ln mo lr mp lv md me mf mg bi translated"><code class="fe mh mi mj mk b">OneOrMore()</code>一次或多次匹配提供的模式。</li><li id="75c8" class="lw lx it lc b ld ml lg mm lj mn ln mo lr mp lv md me mf mg bi translated"><code class="fe mh mi mj mk b">Either</code>匹配任何一个提供的模式。</li></ul><p id="5f19" class="pw-post-body-paragraph la lb it lc b ld ly ju lf lg lz jx li lj mq ll lm ln mr lp lq lr ms lt lu lv im bi translated">具体来说，</p><ul class=""><li id="bd3d" class="lw lx it lc b ld ly lg lz lj ma ln mb lr mc lv md me mf mg bi translated"><code class="fe mh mi mj mk b">OneOrMore(AnyButWhitespace())</code>匹配一个或多个非空白字符。</li><li id="42ac" class="lw lx it lc b ld ml lg mm lj mn ln mo lr mp lv md me mf mg bi translated"><code class="fe mh mi mj mk b">Either(".com", ".org)</code>匹配<code class="fe mh mi mj mk b">.com</code>或<code class="fe mh mi mj mk b">.org</code>。</li></ul><figure class="mu mv mw mx gt my gh gi paragraph-image"><div role="button" tabindex="0" class="mz na di nb bf nc"><div class="gh gi og"><img src="../Images/bc32e73bd1deeae374b13e6ff2d5d869.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ZIYNeprY1sdrJAq1ijwoZw.png"/></div></div></figure><h2 id="a7a9" class="no kj it bd kk nt nu dn ko nv nw dp ks lj nx ny ku ln nz oa kw lr ob oc ky od bi translated">HTTP或HTTPS</h2><p id="9e4a" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">有时候，一个URL可能使用方案<code class="fe mh mi mj mk b">http</code>而不是<code class="fe mh mi mj mk b">https</code>。让我们通过使用<code class="fe mh mi mj mk b">Optional()</code>使字符<code class="fe mh mi mj mk b">s</code>可选:</p><figure class="mu mv mw mx gt my gh gi paragraph-image"><div role="button" tabindex="0" class="mz na di nb bf nc"><div class="gh gi og"><img src="../Images/5905646762f441d42678b63f0f7f3887.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*DVeE-oyCOCxYNKWCnJH1Jw.png"/></div></div><p class="nf ng gj gh gi nh ni bd b be z dk translated">作者图片</p></figure><figure class="mu mv mw mx gt my"><div class="bz fp l di"><div class="oe of l"/></div></figure><p id="cd01" class="pw-post-body-paragraph la lb it lc b ld ly ju lf lg lz jx li lj mq ll lm ln mr lp lq lr ms lt lu lv im bi translated">输出:</p><pre class="mu mv mw mx gt nk mk nl nm aw nn bi"><span id="7d05" class="no kj it mk b gy np nq l nr ns">['http://github.com/khuyentran1401']</span></pre><h2 id="4bae" class="no kj it bd kk nt nu dn ko nv nw dp ks lj nx ny ku ln nz oa kw lr ob oc ky od bi translated">不使用方案匹配URL</h2><p id="3cd3" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">文本中的一些URL可能不包含类似于<code class="fe mh mi mj mk b">https</code>或<code class="fe mh mi mj mk b">http</code>的方案。用<code class="fe mh mi mj mk b">Optional</code>让方案可选。</p><figure class="mu mv mw mx gt my gh gi paragraph-image"><div role="button" tabindex="0" class="mz na di nb bf nc"><div class="gh gi og"><img src="../Images/e06d8843e3ada1342850c9ab0460ee05.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*oT2DiF1HTj_4jtg1QAf88Q.png"/></div></div><p class="nf ng gj gh gi nh ni bd b be z dk translated">作者图片</p></figure><p id="de7e" class="pw-post-body-paragraph la lb it lc b ld ly ju lf lg lz jx li lj mq ll lm ln mr lp lq lr ms lt lu lv im bi translated">为了使我们的代码更具可读性，我们将把PRegrex的方法赋给一个变量。</p><figure class="mu mv mw mx gt my"><div class="bz fp l di"><div class="oe of l"/></div></figure><p id="2510" class="pw-post-body-paragraph la lb it lc b ld ly ju lf lg lz jx li lj mq ll lm ln mr lp lq lr ms lt lu lv im bi translated">输出:</p><pre class="mu mv mw mx gt nk mk nl nm aw nn bi"><span id="4aa3" class="no kj it mk b gy np nq l nr ns">['mathdatasimplified.com/', 'https://github.com/khuyentran1401']</span></pre><p id="3694" class="pw-post-body-paragraph la lb it lc b ld ly ju lf lg lz jx li lj mq ll lm ln mr lp lq lr ms lt lu lv im bi translated">让我们来看看基本的正则表达式模式:</p><figure class="mu mv mw mx gt my"><div class="bz fp l di"><div class="oe of l"/></div></figure><pre class="mu mv mw mx gt nk mk nl nm aw nn bi"><span id="4dc3" class="no kj it mk b gy np nq l nr ns">(?:https?\:\/\/)?[^\s]+(?:\.com|\.org)[^\s]+</span></pre><p id="ed7d" class="pw-post-body-paragraph la lb it lc b ld ly ju lf lg lz jx li lj mq ll lm ln mr lp lq lr ms lt lu lv im bi translated">我们刚刚避免了用一些人类可读的代码行创建复杂的模式！</p><h1 id="f545" class="ki kj it bd kk kl km kn ko kp kq kr ks jz kt ka ku kc kv kd kw kf kx kg ky kz bi translated">捕获时间</h1><p id="a503" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated"><code class="fe mh mi mj mk b">AnyDigit()</code>匹配任何数字字符。让我们用它来匹配文本中的时间。</p><figure class="mu mv mw mx gt my"><div class="bz fp l di"><div class="oe of l"/></div></figure><pre class="mu mv mw mx gt nk mk nl nm aw nn bi"><span id="f219" class="no kj it mk b gy np nq l nr ns">['6:0']</span></pre><p id="e018" class="pw-post-body-paragraph la lb it lc b ld ly ju lf lg lz jx li lj mq ll lm ln mr lp lq lr ms lt lu lv im bi translated">现在，我们只匹配<code class="fe mh mi mj mk b">:</code>两边的一个数字。让我们把<code class="fe mh mi mj mk b">AddLeastOnce()</code>放在<code class="fe mh mi mj mk b">AnyDigit()</code>的周围，这样就更一般了:</p><figure class="mu mv mw mx gt my gh gi paragraph-image"><div role="button" tabindex="0" class="mz na di nb bf nc"><div class="gh gi og"><img src="../Images/93c15993fb6e29f9f07177afe2f77d55.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*baL4_hKv94p_ZSC4aqpXhw.png"/></div></div></figure><figure class="mu mv mw mx gt my"><div class="bz fp l di"><div class="oe of l"/></div></figure><pre class="mu mv mw mx gt nk mk nl nm aw nn bi"><span id="5723" class="no kj it mk b gy np nq l nr ns">['6:00']</span></pre><h1 id="de73" class="ki kj it bd kk kl km kn ko kp kq kr ks jz kt ka ku kc kv kd kw kf kx kg ky kz bi translated">获取电话号码</h1><p id="3a04" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">电话号码的常见格式有:</p><pre class="mu mv mw mx gt nk mk nl nm aw nn bi"><span id="d2bd" class="no kj it mk b gy np nq l nr ns">##########<br/>###-###-####<br/>### ### ####<br/>###.###.####</span></pre><p id="c4b8" class="pw-post-body-paragraph la lb it lc b ld ly ju lf lg lz jx li lj mq ll lm ln mr lp lq lr ms lt lu lv im bi translated">这些格式的数字之间要么有标点符号，要么没有。我们可以使用<code class="fe mh mi mj mk b">AnyFrom("-", " ", ".")</code>来匹配<code class="fe mh mi mj mk b">-</code>、<code class="fe mh mi mj mk b">.</code>或空格。</p><figure class="mu mv mw mx gt my gh gi paragraph-image"><div role="button" tabindex="0" class="mz na di nb bf nc"><div class="gh gi og"><img src="../Images/55ef52d57bf7dffa8f28028738b59f2c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*lIpRKH8veAd_odY8Eirwfg.png"/></div></div></figure><p id="be28" class="pw-post-body-paragraph la lb it lc b ld ly ju lf lg lz jx li lj mq ll lm ln mr lp lq lr ms lt lu lv im bi translated">我们还使用<code class="fe mh mi mj mk b">Optional()</code>使标点符号可选。</p><figure class="mu mv mw mx gt my"><div class="bz fp l di"><div class="oe of l"/></div></figure><pre class="mu mv mw mx gt nk mk nl nm aw nn bi"><span id="3486" class="no kj it mk b gy np nq l nr ns">['3452352312', '345-235-2312', '345 235 2312', '345.235.2312']</span></pre><h1 id="f154" class="ki kj it bd kk kl km kn ko kp kq kr ks jz kt ka ku kc kv kd kw kf kx kg ky kz bi translated">捕获电子邮件地址</h1><p id="38c4" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">现在，让我们利用我们目前所学的知识，从文本中获取一个电子邮件地址。</p><figure class="mu mv mw mx gt my gh gi paragraph-image"><div role="button" tabindex="0" class="mz na di nb bf nc"><div class="gh gi og"><img src="../Images/67a36614b80c830eec3fe449436d8067.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*uLpAUWB6qw4ufWNFNZC4qA.png"/></div></div></figure><figure class="mu mv mw mx gt my"><div class="bz fp l di"><div class="oe of l"/></div></figure><p id="1ca0" class="pw-post-body-paragraph la lb it lc b ld ly ju lf lg lz jx li lj mq ll lm ln mr lp lq lr ms lt lu lv im bi translated">输出:</p><pre class="mu mv mw mx gt nk mk nl nm aw nn bi"><span id="9a64" class="no kj it mk b gy np nq l nr ns">['abcd@gmail.com']</span></pre><h1 id="2139" class="ki kj it bd kk kl km kn ko kp kq kr ks jz kt ka ku kc kv kd kw kf kx kg ky kz bi translated">下一步</h1><p id="53e6" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">本文概述了如何使用PRegEx来匹配复杂的模式，而无需花费大量时间。</p><p id="9ba1" class="pw-post-body-paragraph la lb it lc b ld ly ju lf lg lz jx li lj mq ll lm ln mr lp lq lr ms lt lu lv im bi translated">我鼓励您查看<a class="ae nj" href="https://pregex.readthedocs.io/en/latest/docstring/pregex.html#" rel="noopener ugc nofollow" target="_blank"> PRegEx的文档</a>以了解其他有用的方法。</p><p id="9cdc" class="pw-post-body-paragraph la lb it lc b ld ly ju lf lg lz jx li lj mq ll lm ln mr lp lq lr ms lt lu lv im bi translated">随意发挥，并在这里叉这篇文章的源代码:</p><div class="oh oi gp gr oj ok"><a href="https://github.com/khuyentran1401/Data-science/blob/master/productive_tools/pregex.ipynb" rel="noopener  ugc nofollow" target="_blank"><div class="ol ab fo"><div class="om ab on cl cj oo"><h2 class="bd iu gy z fp op fr fs oq fu fw is bi translated">数据科学/pregex . ipynb at master khuyentran 1401/数据科学</h2><div class="or l"><h3 class="bd b gy z fp op fr fs oq fu fw dk translated">收集有用的数据科学主题以及代码和文章-Data-science/pregex . ipynb at master…</h3></div><div class="os l"><p class="bd b dl z fp op fr fs oq fu fw dk translated">github.com</p></div></div><div class="ot l"><div class="ou l ov ow ox ot oy nd ok"/></div></div></a></div></div><div class="ab cl oz pa hx pb" role="separator"><span class="pc bw bk pd pe pf"/><span class="pc bw bk pd pe pf"/><span class="pc bw bk pd pe"/></div><div class="im in io ip iq"><p id="a2e0" class="pw-post-body-paragraph la lb it lc b ld ly ju lf lg lz jx li lj mq ll lm ln mr lp lq lr ms lt lu lv im bi translated">我喜欢写一些基本的数据科学概念，并尝试不同的数据科学工具。你可以在LinkedIn和Twitter上与我联系。</p><p id="49fa" class="pw-post-body-paragraph la lb it lc b ld ly ju lf lg lz jx li lj mq ll lm ln mr lp lq lr ms lt lu lv im bi translated">如果你想查看我写的所有文章的代码，请点击这里。在Medium上关注我，了解我的最新数据科学文章，例如:</p><div class="oh oi gp gr oj ok"><a rel="noopener follow" target="_blank" href="/write-clean-python-code-using-pipes-1239a0f3abf5"><div class="ol ab fo"><div class="om ab on cl cj oo"><h2 class="bd iu gy z fp op fr fs oq fu fw is bi translated">使用管道编写干净的Python代码</h2><div class="or l"><h3 class="bd b gy z fp op fr fs oq fu fw dk translated">一种简洁明了的处理迭代的方法</h3></div><div class="os l"><p class="bd b dl z fp op fr fs oq fu fw dk translated">towardsdatascience.com</p></div></div><div class="ot l"><div class="pg l ov ow ox ot oy nd ok"/></div></div></a></div><div class="oh oi gp gr oj ok"><a href="https://medium.com/the-prefect-blog/sending-slack-notifications-in-python-with-prefect-840a895f81c" rel="noopener follow" target="_blank"><div class="ol ab fo"><div class="om ab on cl cj oo"><h2 class="bd iu gy z fp op fr fs oq fu fw is bi translated">使用提督在Python中发送松弛通知</h2><div class="or l"><h3 class="bd b gy z fp op fr fs oq fu fw dk translated">通过松弛通知了解Python代码的进度</h3></div><div class="os l"><p class="bd b dl z fp op fr fs oq fu fw dk translated">medium.com</p></div></div><div class="ot l"><div class="ph l ov ow ox ot oy nd ok"/></div></div></a></div><div class="oh oi gp gr oj ok"><a rel="noopener follow" target="_blank" href="/3-tools-to-track-and-visualize-the-execution-of-your-python-code-666a153e435e"><div class="ol ab fo"><div class="om ab on cl cj oo"><h2 class="bd iu gy z fp op fr fs oq fu fw is bi translated">3个跟踪和可视化Python代码执行的工具</h2><div class="os l"><p class="bd b dl z fp op fr fs oq fu fw dk translated">towardsdatascience.com</p></div></div><div class="ot l"><div class="pi l ov ow ox ot oy nd ok"/></div></div></a></div><div class="oh oi gp gr oj ok"><a rel="noopener follow" target="_blank" href="/validate-your-pandas-dataframe-with-pandera-2995910e564"><div class="ol ab fo"><div class="om ab on cl cj oo"><h2 class="bd iu gy z fp op fr fs oq fu fw is bi translated">用Pandera验证你的熊猫数据框架</h2><div class="or l"><h3 class="bd b gy z fp op fr fs oq fu fw dk translated">确保您的数据符合您的期望</h3></div><div class="os l"><p class="bd b dl z fp op fr fs oq fu fw dk translated">towardsdatascience.com</p></div></div><div class="ot l"><div class="pj l ov ow ox ot oy nd ok"/></div></div></a></div></div></div>    
</body>
</html>