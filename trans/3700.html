<html>
<head>
<title>Working with Survey Data — Clean and Visualize Likert Scale Questions in R</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用调查数据——在R中清理和可视化李克特量表问题</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/working-with-survey-data-clean-and-visualize-likert-scale-questions-in-r-6a78e3b9c7b2#2022-08-17">https://towardsdatascience.com/working-with-survey-data-clean-and-visualize-likert-scale-questions-in-r-6a78e3b9c7b2#2022-08-17</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="89ed" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">如何格式化数据以进行定量分析</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/d7a3b1e19495054d2f22d9e07da4eae4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*JBUNHHY41nn2Elx-"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">由<a class="ae kv" href="https://unsplash.com/@celpax?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Celpax </a>在<a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure><p id="23aa" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果你曾经读过或写过一份调查，你可能遇到过李克特式的问题。这些问题在某种程度上是可以回答的，比如<em class="ls">强烈不同意</em>到<em class="ls">强烈同意</em>，或者<em class="ls">总是</em>到<em class="ls">从不</em>。这种尺度允许我们量化情感，否则是主观的。今天，我们将讨论如何清理、聚合和可视化这类数据。</p><h1 id="4224" class="lt lu iq bd lv lw lx ly lz ma mb mc md jw me jx mf jz mg ka mh kc mi kd mj mk bi translated"><strong class="ak">关于数据集</strong></h1><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ml mm l"/></div></figure><p id="3f7e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们将使用1000名受访者的产品满意度调查数据。我们的目标是对这些数据进行重新编码和整形，使它们适合计算汇总统计数据和创建可视化。你可以在这里下载数据集<a class="ae kv" href="https://github.com/MartinaGiron/TDS-code/tree/main/working-with-surveys" rel="noopener ugc nofollow" target="_blank">。</a></p><h1 id="7054" class="lt lu iq bd lv lw lx ly lz ma mb mc md jw me jx mf jz mg ka mh kc mi kd mj mk bi translated"><strong class="ak">加载数据</strong></h1><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ml mm l"/></div></figure><p id="1f18" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">该数据集为我们提供了申请人ID，以及他们对每个问题的回答，每个问题编码在一列中。如您所见，列标题不是正确的变量名。这将使得在函数中调用它们变得困难。所以让我们用<code class="fe mn mo mp mq b">colnames()</code>按照类别和物品号来重命名它们。请务必将原始名称保存到单独的文件中，以供将来参考。我们还需要加载tidyverse包来执行我们的数据争论和可视化。</p><h1 id="66fb" class="lt lu iq bd lv lw lx ly lz ma mb mc md jw me jx mf jz mg ka mh kc mi kd mj mk bi translated"><strong class="ak">记录李克特反应</strong></h1><p id="0376" class="pw-post-body-paragraph kw kx iq ky b kz mr jr lb lc ms ju le lf mt lh li lj mu ll lm ln mv lp lq lr ij bi translated">我们的回复仍然是文本形式。我们需要用数字标度记录它们，以便进行定量分析。我们可以使用<code class="fe mn mo mp mq b">case_when()</code>编写一个函数来完成这个任务。这也可以用<code class="fe mn mo mp mq b">gsub()</code>来完成，但我更喜欢这种方法，因为它使我们的代码更紧凑，可读性更好。</p><p id="0cf4" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">有时，短语以否定的方式陈述，以确保回答调查的人不会不加选择地输入所有高分或低分答案。因此，我们必须:</p><ol class=""><li id="42e1" class="mw mx iq ky b kz la lc ld lf my lj mz ln na lr nb nc nd ne bi translated">确定哪些项目是积极或消极的。</li></ol><ul class=""><li id="9a0f" class="mw mx iq ky b kz la lc ld lf my lj mz ln na lr nf nc nd ne bi translated">在我们的例子中，除了以下项目，所有项目都按正比例缩放:</li></ul><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi ng"><img src="../Images/94a542f8cf60e3c67dc813b8a70cd1c0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1176/format:webp/1*U4d9xb5pJsbm2NyWhfZMzg.png"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">负面陈述项目(作者图片)</p></figure><p id="7575" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">2.将函数原样应用于按正比例缩放的项目，并翻转按负比例缩放的项目的比例。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ml mm l"/></div></figure><ul class=""><li id="32f5" class="mw mx iq ky b kz la lc ld lf my lj mz ln na lr nf nc nd ne bi translated">在这里，我写了两个独立的函数，分别用于正负比例项。</li></ul><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ml mm l"/></div></figure><ul class=""><li id="8ece" class="mw mx iq ky b kz la lc ld lf my lj mz ln na lr nf nc nd ne bi translated">为了应用正数，我使用<code class="fe mn mo mp mq b">select()</code>删除了id列和所有负数比例的项目，所以我可以很容易地<code class="fe mn mo mp mq b">mutate_all()</code>剩下的正数。</li><li id="9f5c" class="mw mx iq ky b kz nh lc ni lf nj lj nk ln nl lr nf nc nd ne bi translated">为了应用负的那个，我反其道而行之，在应用<code class="fe mn mo mp mq b">mutate_all()</code>之前只保留负比例的项目。</li><li id="1bf5" class="mw mx iq ky b kz nh lc ni lf nj lj nk ln nl lr nf nc nd ne bi translated">在应用了这两个函数之后，我们必须使用<code class="fe mn mo mp mq b">cbind()</code>重新组合我们的数据。</li></ul><h1 id="50d9" class="lt lu iq bd lv lw lx ly lz ma mb mc md jw me jx mf jz mg ka mh kc mi kd mj mk bi translated"><strong class="ak">计算总数</strong></h1><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nm"><img src="../Images/fc24184e805d881e1e4dca9b9f54ab6c.png" data-original-src="https://miro.medium.com/v2/resize:fit:758/format:webp/1*IiBnyVSuNHW49dAU69ifww.png"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">每个回答者的总体总数和类别总数的前6行(图片由作者提供)</p></figure><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ml mm l"/></div></figure><ul class=""><li id="7349" class="mw mx iq ky b kz la lc ld lf my lj mz ln na lr nf nc nd ne bi translated">由于本次调查衡量的是整体产品满意度<strong class="ky ir">，</strong>我们想知道每位受访者在所有项目上的总分。我们可以通过对重新编码的数据使用<code class="fe mn mo mp mq b">rowSums()</code>函数来实现这一点。</li></ul><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ml mm l"/></div></figure><ul class=""><li id="033e" class="mw mx iq ky b kz la lc ld lf my lj mz ln na lr nf nc nd ne bi translated">现在，让我们得到每个类别的总分。我们可以使用<code class="fe mn mo mp mq b">mutate()</code>来创建包含类别总计的新列。<code class="fe mn mo mp mq b">rowwise()</code>函数允许我们跨列执行操作。执行完所有操作后，记得使用<code class="fe mn mo mp mq b">ungroup()</code>将您的数据恢复为<em class="ls">整齐的</em>格式。</li><li id="a330" class="mw mx iq ky b kz nh lc ni lf nj lj nk ln nl lr nf nc nd ne bi translated">作为一个练习，你可以试着自己计算类别意味着什么！</li></ul><h1 id="72df" class="lt lu iq bd lv lw lx ly lz ma mb mc md jw me jx mf jz mg ka mh kc mi kd mj mk bi translated"><strong class="ak">重塑数据</strong></h1><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ml mm l"/></div></figure><p id="d7e6" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们希望我们的数据以<em class="ls">整洁的</em>格式进行分析和可视化。在这种情况下，这意味着旋转我们的数据，这样我们的新列将只包含ID号、问题号、类别和响应。首先，我们将关注问题编号和回答。然后，我们可以用<code class="fe mn mo mp mq b">mutate()</code>来分配它们的类别。我们将结合使用<code class="fe mn mo mp mq b">str_match()</code>和<em class="ls">正则表达式</em>，或<em class="ls">正则表达式</em>，从问题列中获取类别和问题编号。这里，<code class="fe mn mo mp mq b">“^[^_]+(?=_)”</code>表示<em class="ls">获取下划线</em>之前的所有字符，<code class="fe mn mo mp mq b">“[0–9]$”</code>表示<em class="ls">获取字符串</em>的最后一位数字。</p><h1 id="d4e0" class="lt lu iq bd lv lw lx ly lz ma mb mc md jw me jx mf jz mg ka mh kc mi kd mj mk bi translated"><strong class="ak">汇总数据</strong></h1><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nn"><img src="../Images/d817b212754b9753f0da9994c5d94f7e.png" data-original-src="https://miro.medium.com/v2/resize:fit:868/format:webp/1*nCOv-ZGbKga2mlFVapfSUQ.png"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">每个类别回复的平均值和标准偏差(图片由作者提供)</p></figure><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ml mm l"/></div></figure><p id="f36a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在，我们可以计算数据的汇总统计数据。因为我们想按类别计算统计数据，所以我们将按这个变量分组。然后，我们将把数据传递给<code class="fe mn mo mp mq b">summarise()</code>函数。这是我们的预期输出:</p><h1 id="b440" class="lt lu iq bd lv lw lx ly lz ma mb mc md jw me jx mf jz mg ka mh kc mi kd mj mk bi translated"><strong class="ak">可视化数据</strong></h1><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi no"><img src="../Images/e32b228588a2c75b3c99ca76dc696d44.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2pr_s_Yjj89cSzOvdLXq8Q.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">总分直方图(图片由作者提供)</p></figure><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ml mm l"/></div></figure><p id="6cb4" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">首先，我们来了解一下总分的分布概况。我们使用了<code class="fe mn mo mp mq b">survey_recoded</code>数据，因为该数据集包含每位受访者的总分。请注意，数据似乎近似遵循正态分布。这是意料之中的，因为我们有1000个大样本。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi no"><img src="../Images/7bda30797fda87379cbfd7e6bdaed0b6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*x-c3KpiSOLvdqE58OOV9gQ.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">每个类别分数的直方图(图片由作者提供)</p></figure><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ml mm l"/></div></figure><p id="872f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在，让我们看看类别级的分布。我们将使用<code class="fe mn mo mp mq b">survey_long</code>作为我们的数据，并将类别传递给<code class="fe mn mo mp mq b">facet_wrap()</code>来做这件事。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi no"><img src="../Images/7bd40c080ff10d269e6b87036dec3803.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_trCXGFlubaTS68RuMsiJg.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">每个问题分数的直方图(图片由作者提供)</p></figure><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ml mm l"/></div></figure><p id="da6f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们也可以通过相同的方法来查看问题级别的分布。在这里，我添加了一个额外的参数<code class="fe mn mo mp mq b">nrow = 3</code>，这样所有来自同一类别的问题都出现在一行中。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi no"><img src="../Images/cd3e8e12a84003b1b00891e64e16a421.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*NT4Jxr3BNrIJKuDeWo15RQ.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">每个问题的平均分(图片由作者提供)</p></figure><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ml mm l"/></div></figure><p id="fe3b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">最后，让我们看看每个问题的平均回答水平。我们将变量response除以1000，因为如果没有它，我们的图表只会给出每个问题的得分总和。我们还添加了<code class="fe mn mo mp mq b">ylim(0,5)</code>，因为否则，我们的图形在y轴上只有0到4。这是因为问题的最高平均分从来不会高于4分。</p><h1 id="1ffb" class="lt lu iq bd lv lw lx ly lz ma mb mc md jw me jx mf jz mg ka mh kc mi kd mj mk bi translated"><strong class="ak">接下来的步骤</strong></h1><p id="4a30" class="pw-post-body-paragraph kw kx iq ky b kz mr jr lb lc ms ju le lf mt lh li lj mu ll lm ln mv lp lq lr ij bi translated">本教程侧重于为探索性分析准备测量数据。我们创建的条形图很有见地，但我们可以对它们的美学进行改进，使它们更加专业和引人注目。请阅读我关于如何做到这一点的教程:</p><div class="np nq gp gr nr ns"><a rel="noopener follow" target="_blank" href="/customize-your-ggplot2-bar-graph-5-ways-to-instantly-improve-your-r-data-visualizations-f9c11dfe0163"><div class="nt ab fo"><div class="nu ab nv cl cj nw"><h2 class="bd ir gy z fp nx fr fs ny fu fw ip bi translated">定制您的ggplot2条形图——5种快速改善R数据可视化的方法</h2><div class="nz l"><h3 class="bd b gy z fp nx fr fs ny fu fw dk translated">如何抓住读者的注意力并制作出专业的图表</h3></div><div class="oa l"><p class="bd b dl z fp nx fr fs ny fu fw dk translated">towardsdatascience.com</p></div></div><div class="ob l"><div class="oc l od oe of ob og kp ns"/></div></div></a></div><p id="80c5" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">为了进行更深入的分析，我们还可以执行统计测试来检验相关性和测量调查的可靠性。您可以阅读更多关于这些概念的内容，并尝试将它们与R的<code class="fe mn mo mp mq b">cor.test()</code>函数和<code class="fe mn mo mp mq b">ltm</code>包中的<code class="fe mn mo mp mq b">cronbach.alpha()</code>一起应用。</p></div></div>    
</body>
</html>