<html>
<head>
<title>How to Create a Custom Dataset in R</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在R中创建自定义数据集</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/how-to-create-a-custom-dataset-in-r-cf045e286656#2022-07-30">https://towardsdatascience.com/how-to-create-a-custom-dataset-in-r-cf045e286656#2022-07-30</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="570d" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">制作您自己的合成数据集，用于分析您的投资组合</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/38f5430026ade974c67c119c04cc393e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*MhyeclCkPKG3M5F0"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated"><a class="ae kv" href="https://unsplash.com/@homajob?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">斯科特·格雷厄姆</a>在<a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍照</p></figure><p id="2c4a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi ls translated"><span class="l lt lu lv bm lw lx ly lz ma di">在</span>你的数据科学之旅中，你可能会遇到<em class="mb">合成数据集</em>，有时也被称为<em class="mb">玩具</em>或<em class="mb">虚拟数据集。</em>这些对于实践数据争论、可视化和建模技术非常有用。与真实世界的数据相比，它们通常是清晰易懂的。这使得使用合成数据对初学者来说是一个很有吸引力的想法。今天，我将带你了解如何制作你自己的合成数据。阅读完本文后，您将能够创建自己的大数据，其中包含您喜欢的任意数量的变量。</p><p id="7d0d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">本教程将介绍我如何创建这个人力资源数据集。它包含了300名数据科学家在一家假设公司的招聘考试中表现如何，以及他们在该公司工作1年后的绩效评估分数。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mc md l"/></div></figure><h1 id="226c" class="me mf iq bd mg mh mi mj mk ml mm mn mo jw mp jx mq jz mr ka ms kc mt kd mu mv bi translated"><strong class="ak">为什么要创建自己的数据集？</strong></h1><p id="e6a6" class="pw-post-body-paragraph kw kx iq ky b kz mw jr lb lc mx ju le lf my lh li lj mz ll lm ln na lp lq lr ij bi translated">除了易于分析之外，合成数据集还提供了优于真实世界数据的额外优势。这里有一些场景来说明:</p><p id="303c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir">您正在寻找的数据是高度小众、特定或机密的</strong></p><p id="ba60" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">起初，我试图在脑海中为我的项目寻找数据集。找了几个小时后，我两手空空。我意识到网上可能根本没有，因为公司不会到处公布申请人的数据。</p><p id="a816" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir">你想创建自己的教程</strong></p><p id="39e3" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">假设你想写一个关于执行线性回归的教程(就像我一样！).你需要保证一些预测因子与你的自变量线性相关，而一些则不是。如果你寻找你自己的数据集，你将不得不对它们中的每一个进行测试。另一方面，如果你创建了你自己的，你可以设计它来保证这个假设成立。</p><p id="6fd5" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir">您希望拥有您数据的所有权利</strong></p><p id="9280" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">再也不用担心版权、数据隐私或使用条款，因为数据完全是你的。</p><p id="bc97" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir">你的目标是练习你的数据可视化和沟通技巧</strong></p><p id="14f5" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">就我而言，我的目的是展示我在人力资源分析方面的知识。具体来说，我想展示我在执行统计测试和将结果传达给业务经理方面的知识。</p><h1 id="cbed" class="me mf iq bd mg mh mi mj mk ml mm mn mo jw mp jx mq jz mr ka ms kc mt kd mu mv bi translated">你需要什么</h1><ul class=""><li id="b072" class="nb nc iq ky b kz mw lc mx lf nd lj ne ln nf lr ng nh ni nj bi translated">你的数据集将描述什么</li><li id="e5d5" class="nb nc iq ky b kz nk lc nl lf nm lj nn ln no lr ng nh ni nj bi translated">关于数据性质的知识</li><li id="a522" class="nb nc iq ky b kz nk lc nl lf nm lj nn ln no lr ng nh ni nj bi translated">关于常见概率分布的一些知识</li><li id="fd15" class="nb nc iq ky b kz nk lc nl lf nm lj nn ln no lr ng nh ni nj bi translated">R的工作知识</li></ul><h1 id="ec47" class="me mf iq bd mg mh mi mj mk ml mm mn mo jw mp jx mq jz mr ka ms kc mt kd mu mv bi translated">制作数据集</h1><p id="8ffd" class="pw-post-body-paragraph kw kx iq ky b kz mw jr lb lc mx ju le lf my lh li lj mz ll lm ln na lp lq lr ij bi translated">r有几个函数可以让你即时生成随机数据。以下步骤将指导您选择正确的函数、组织其输出并导出完成的数据集。</p><h2 id="4dc5" class="np mf iq bd mg nq nr dn mk ns nt dp mo lf nu nv mq lj nw nx ms ln ny nz mu oa bi translated">第一步:列出所有你想包含的变量</h2><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ob"><img src="../Images/d6d67222f03188910baee1cf88753be3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*chlkJopG2I9ve59ulsYHiw.png"/></div></div></figure><p id="ee92" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">记下你需要多少单位或多少行数据。对于这个项目，我想要总共320个申请人/行的数据。</p><h2 id="422a" class="np mf iq bd mg nq nr dn mk ns nt dp mo lf nu nv mq lj nw nx ms ln ny nz mu oa bi translated">第二步:描述每个变量的要求</h2><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi oc"><img src="../Images/dea28e0810f6fe83270984cca7081090.png" data-original-src="https://miro.medium.com/v2/resize:fit:1388/format:webp/1*AjN3NKf2RtEtg5D_rmlg8Q.png"/></div></figure><p id="1f4f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这就是背景和你的现场经验发挥作用的地方。例如，面试分数可能在0到10之间。但是作为招聘人员，你知道从0到3的分数是不现实的，所以你把4和10设为这个变量的最小值和最大值。同时，对于机器学习考试的分数，现实的最低和最高分数是40和100。然而，你也知道平均分数是80分，大多数申请人的分数接近80分，所以你也希望你的数据能够反映这一趋势。如果你想让一些变量相互关联，也指出哪些变量。</p><h2 id="582e" class="np mf iq bd mg nq nr dn mk ns nt dp mo lf nu nv mq lj nw nx ms ln ny nz mu oa bi translated">第三步:为你的变量确定一个合适的分布</h2><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi oc"><img src="../Images/3aaeb8b2983b1bc9103b13a60054e141.png" data-original-src="https://miro.medium.com/v2/resize:fit:1388/format:webp/1*jIbMDdgs8DRN1LtAlAT5PQ.png"/></div></figure><p id="2a81" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这是最棘手的部分，因为这是你要运用你的普通概率分布知识的地方。如果您只是使用数据集来练习争论或可视化，您可能只需要知道均匀和正态分布就可以了。但是在我的例子中，我希望我的数据有各种各样的关系和特性，所以我使用了一大堆。</p><p id="b7bd" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我对面试分数使用了离散均匀分布，因为我希望申请人获得4分的概率等于获得4.1分或4.2分，一直到10分。同时，我对我的编码考试分数和性能分数使用了多元正态分布，因为我希望它们都是正态分布的，并且以不同的强度相互关联。</p><p id="3c5f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">请注意，每个分布都有自己的一组参数，这就是我们在步骤2中的需求。你可以在这里阅读更多关于常见概率分布<a class="ae kv" href="https://en.wikipedia.org/wiki/List_of_probability_distributions" rel="noopener ugc nofollow" target="_blank">。</a></p><h2 id="4b3f" class="np mf iq bd mg nq nr dn mk ns nt dp mo lf nu nv mq lj nw nx ms ln ny nz mu oa bi translated">步骤4:编写代码</h2><p id="88a7" class="pw-post-body-paragraph kw kx iq ky b kz mw jr lb lc mx ju le lf my lh li lj mz ll lm ln na lp lq lr ij bi translated">当然，这部分说起来容易做起来难。所以让我们一次解决一个变量(或一组变量)。</p><p id="3e34" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir">套餐</strong></p><pre class="kg kh ki kj gt od oe of og aw oh bi"><span id="6082" class="np mf iq oe b gy oi oj l ok ol">library(MASS)<br/>library(tidyverse)<br/>library(writexl)</span></pre><p id="078b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">首先，让我们装载所有我们需要的包。Tidyverse用于数据操作，MASS用于生成我们的多元正态分布，writexl用于将我们的工作保存为excel文件。</p><p id="8511" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir">申请人身份证号</strong></p><pre class="kg kh ki kj gt od oe of og aw oh bi"><span id="3373" class="np mf iq oe b gy oi oj l ok ol">id &lt;- paste0("Applicant #", 1:320)</span></pre><p id="54ff" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">生成唯一ID号的最简单方法是创建一个整数序列。这里，我们还在“申请人#”后面追加了<code class="fe om on oo oe b">paste0()</code>。</p><p id="ddfc" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir">管理</strong></p><pre class="kg kh ki kj gt od oe of og aw oh bi"><span id="793e" class="np mf iq oe b gy oi oj l ok ol"># Assign Management Experience Randomly<br/>set.seed(0717)<br/>management_random &lt;- rbinom(320, 1, 0.5)<br/>management &lt;- ifelse(management_random == 0, "manager", "non-manager")</span></pre><p id="902e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">随机生成分类变量的一种方法是首先随机抽取一组数字，然后给每个数字分配一个类别。这里，我们使用<code class="fe om on oo oe b">rbinom</code>随机选择0和1，然后将男性分配给0，女性分配给1</p><p id="3863" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir">情境判断考试成绩、缺课人数和数据可视化考试成绩</strong></p><pre class="kg kh ki kj gt od oe of og aw oh bi"><span id="5c85" class="np mf iq oe b gy oi oj l ok ol"># Situational Judgment Test Scores<br/>set.seed(0717)<br/>situational &lt;- round(runif(320, 60, 100))</span><span id="173f" class="np mf iq oe b gy op oj l ok ol"># Number of Absences<br/>set.seed(0717)<br/>absences &lt;- rpois(320, lambda = 1)</span><span id="4265" class="np mf iq oe b gy op oj l ok ol"># Data Viz Exam Scores<br/>set.seed(0717)<br/>coding_viz &lt;- rnorm(320, 85, 5) %&gt;%<br/>  cap_score(., 100) %&gt;% <br/>  round(2)</span></pre><p id="3f81" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">由于我们已经为这些变量指定了我们想要使用的分布和参数，我们现在需要做的就是将它们插入到它们各自的函数中:均匀分布的<code class="fe om on oo oe b">runif </code>、泊松分布的<code class="fe om on oo oe b">rpois</code>和单变量正态分布的<code class="fe om on oo oe b">rnorm </code>。我们还将使用我们之前创建的函数<code class="fe om on oo oe b">cap_score</code>，将数据可视化考试分数的最高分设为100。</p><p id="4633" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir">相关变量</strong></p><pre class="kg kh ki kj gt od oe of og aw oh bi"><span id="5b97" class="np mf iq oe b gy oi oj l ok ol">cor_var_means &lt;- c(6.8, 7.2, 8.4, 77, 84, 80)<br/>cor_var_matrix &lt;- matrix(<br/>  c(<br/>    0.87, 0.6, 0.7, 0.36, 1.55, 0.57,<br/>    0.6, 1.2, 0.52, 0.5, 1.2, 2.34,<br/>    0.7, 0.52, 0.68, 0.45, 0.89, 0.75,<br/>    0.36, 0.5, 0.45, 15.2, 1.09, 1.64,<br/>    1.55, 1.2, 0.89, 1.09, 17.2, 1.88,<br/>    0.57, 2.34, 0.75, 1.64, 1.88, 9.3<br/>  ), byrow = T, nrow = 6<br/>)</span><span id="6ae8" class="np mf iq oe b gy op oj l ok ol">set.seed(0717)<br/>correlated_vars_df &lt;- as.data.frame(mvrnorm(n = 320, mu = cor_var_means, Sigma = cor_var_matrix))</span></pre><p id="add4" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们需要一个均值向量和一个方差-协方差矩阵来生成多元正态分布。我们已经在前面的步骤中确定了均值，但是现在，我们必须用下面的公式计算协方差。您可能会发现在Excel中执行这一步更容易。</p><pre class="kg kh ki kj gt od oe of og aw oh bi"><span id="387a" class="np mf iq oe b gy oi oj l ok ol">correlated_vars_df_cols &lt;- c("interview_p1", "interview_p2", "interview_p3", "coding_cleaning", "coding_ml", "performance")<br/>colnames(correlated_vars_df) &lt;- correlated_vars_df_cols</span><span id="0dc7" class="np mf iq oe b gy op oj l ok ol">correlated_vars_df &lt;- correlated_vars_df %&gt;%<br/>  mutate(interview_p1 = round(cap_score(interview_p1, 10), 1),<br/>         interview_p2 = round(cap_score(interview_p2, 10), 1),<br/>         interview_p3 = round(cap_score(interview_p3, 10), 1),<br/>         coding_cleaning = round(cap_score(coding_cleaning, 100), 2),<br/>         coding_ml = round(cap_score(coding_ml, 100), 2),<br/>         performance = round(cap_score(performance, 100))<br/>         )</span></pre><p id="92d1" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在，我们有了随机生成的面试、编码考试和性能分数。让我们稍微清理一下。首先，我们给它们分配了所有的列名。接下来，让我们将面试分数四舍五入到小数点后一位，最高分为10分。为此，我创建了自己的函数<code class="fe om on oo oe b">cap_score</code>。它将列和最大分数作为其参数。编码考试成绩，小数点后两位，最高100分。为了提高性能，我们也将它们设为最大值为100的整数。</p><h2 id="5db2" class="np mf iq bd mg nq nr dn mk ns nt dp mo lf nu nv mq lj nw nx ms ln ny nz mu oa bi translated">第五步:收集并保存你的数据</h2><pre class="kg kh ki kj gt od oe of og aw oh bi"><span id="1e08" class="np mf iq oe b gy oi oj l ok ol">applicant_scores &lt;- cbind(<br/>  id, management, situational, coding_viz, correlated_vars_df, absences)</span><span id="6471" class="np mf iq oe b gy op oj l ok ol">applicant_final &lt;- applicant_scores[1:300, ]</span><span id="be77" class="np mf iq oe b gy op oj l ok ol">write_xlsx(applicant_final, "Employee Selection Scores.xlsx")</span></pre><p id="5710" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们可以很容易地收集使用<code class="fe om on oo oe b">cbind</code>生成的变量和数据集。我只保存前300行数据，因为我计划将它用作训练集。准备就绪后，您可以将最终数据集保存为您想要的格式。我选择了Excel <code class="fe om on oo oe b">.xlsx</code></p><h2 id="a125" class="np mf iq bd mg nq nr dn mk ns nt dp mo lf nu nv mq lj nw nx ms ln ny nz mu oa bi translated">(可选)第六步:分享！</h2><p id="eaa5" class="pw-post-body-paragraph kw kx iq ky b kz mw jr lb lc mx ju le lf my lh li lj mz ll lm ln na lp lq lr ij bi translated">您创建这个数据集可能是因为您没有任何替代方法。这意味着你的数据分析师同事可能也不知道。通过分享来回馈社区！这也是一个展示你的R技能和领域知识的机会。</p><p id="2d54" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">你可以在这里访问我的数据集。</p><div class="oq or gp gr os ot"><a href="https://github.com/MartinaGiron/R-Portfolio/tree/main/Employee-Selection" rel="noopener  ugc nofollow" target="_blank"><div class="ou ab fo"><div class="ov ab ow cl cj ox"><h2 class="bd ir gy z fp oy fr fs oz fu fw ip bi translated">R-投资组合/主Martina giron/R-投资组合的员工选择</h2><div class="pa l"><h3 class="bd b gy z fp oy fr fs oz fu fw dk translated">我用R和jupyter笔记本写的个人投资组合分析-R-投资组合/员工-选择在主…</h3></div><div class="pb l"><p class="bd b dl z fp oy fr fs oz fu fw dk translated">github.com</p></div></div><div class="pc l"><div class="pd l pe pf pg pc ph kp ot"/></div></div></a></div><h1 id="84ea" class="me mf iq bd mg mh mi mj mk ml mm mn mo jw mp jx mq jz mr ka ms kc mt kd mu mv bi translated">一些最后的话</h1><p id="f571" class="pw-post-body-paragraph kw kx iq ky b kz mw jr lb lc mx ju le lf my lh li lj mz ll lm ln na lp lq lr ij bi translated">今天，我们讨论了如何使用320个数据点和变量创建自己的数据集，这些数据点和变量遵循正态、泊松和离散均匀概率分布。现在，您可以分析这些数据，并将其添加到您的投资组合中。下一次，尝试添加更多的数据点(你可以有几十万，甚至几百万行！).您也可以通过让变量遵循不同的分布来进行试验，例如beta或几何分布。</p></div></div>    
</body>
</html>