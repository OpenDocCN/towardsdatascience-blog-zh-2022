<html>
<head>
<title>Keep Your ML Models out of Your Application Servers</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">让您的ML模型远离您的应用服务器</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/keep-your-ml-models-out-of-your-application-servers-9fe58f9c91a5#2022-09-08">https://towardsdatascience.com/keep-your-ml-models-out-of-your-application-servers-9fe58f9c91a5#2022-09-08</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="2d77" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">如何将一个有前途的ML模型变成一个有用的ML驱动的产品</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/8a1c1854ab6ddcbc10d0b269d6971ba3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*XsyhpzGg0Ea7gYxd"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">安德烈·泰森在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure><p id="379f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">部署您的机器学习(ML)模型从来都不是一项轻松的工作。当然，一些很棒的工具可以帮助你快速地与世界分享你的模型，比如<a class="ae ky" href="https://gradio.app/" rel="noopener ugc nofollow" target="_blank"> Gradio </a>和<a class="ae ky" href="https://streamlit.io/" rel="noopener ugc nofollow" target="_blank"> Streamlit </a>，但是如果我们谈论的不仅仅是概念验证，你必须做出一些决定！</p><p id="3b4b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Gradio和Streamlit在这方面做得很好，但提供的前端灵活性有限。你能做的只有这么多，你的ML应用程序的前端看起来就像很多其他的原型一样。此外，它们不能扩展到许多并发请求。你的模型会成为瓶颈，蚕食服务器的资源。</p><p id="38f4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在这个故事中，我会给你一个很好的理由让你的模型保持在你的应用服务器中，然后告诉你哪里会失败，为什么你不应该这样做。</p><blockquote class="lv lw lx"><p id="d722" class="kz la ly lb b lc ld ju le lf lg jx lh lz lj lk ll ma ln lo lp mb lr ls lt lu im bi translated"><a class="ae ky" href="https://www.dimpo.me/newsletter?utm_source=medium&amp;utm_medium=article&amp;utm_campaign=model-in-server" rel="noopener ugc nofollow" target="_blank">学习率</a>是为那些对AI和MLOps的世界感到好奇的人准备的时事通讯。你会在每个月的第一个星期六收到我关于最新人工智能新闻和文章的更新和想法。在这里订阅<a class="ae ky" href="https://www.dimpo.me/newsletter?utm_source=medium&amp;utm_medium=article&amp;utm_campaign=model-in-server" rel="noopener ugc nofollow" target="_blank"/>！</p></blockquote><h1 id="aaf2" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">建筑</h1><p id="74e1" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">首先，让我们看看典型的web应用程序是如何构造的。下图描述了参与用户与web应用程序交互的常见场景的实体:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mz"><img src="../Images/9b4da86bd9bdab81a711ea645d882199.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ViDM-m35ornpGWvlrKUTMA.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">一个通用的web服务架构——作者图片</p></figure><p id="8a45" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">客户端是您的用户。您的用户可以是现实生活中的人，也可以是发出请求的应用程序。服务器通常是大多数代码运行的地方。它接受请求，处理请求，并响应客户端。数据库存储应用程序的数据。它可以采取许多形式和形状，但这不是我们目前关心的问题。</p><p id="7041" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在这种情况下，客户端(例如，用户或应用程序)通过网络向服务器发出请求。服务器查看数据库系统以收集必要的信息，并向用户返回响应。</p><p id="0e95" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我简要描述的过程是一个非常简单的场景，有许多备选方案。然而，这可能是客户端发出请求时最常见的步骤。</p><p id="1b82" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在，如果您选择使用服务器中的模型体系结构，您的服务器将负责加载您的模型、处理请求的数据、运行您的模型的正向传递、转换预测，并将响应返回给用户。如果看起来工作量很大，那是因为它确实很大！</p><h2 id="1e94" class="na md it bd me nb nc dn mi nd ne dp mm li nf ng mo lm nh ni mq lq nj nk ms nl bi translated">为什么要从那里开始呢？</h2><p id="e79a" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">目睹服务器不得不做的工作令人沮丧。然而，有一个非常好的理由来使用这种方法；你必须失败得快，失败得多。</p><p id="4131" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">当您正在构建一个新的ML应用程序的原型时，最好准备好一些东西:</p><ul class=""><li id="7b57" class="nm nn it lb b lc ld lf lg li no lm np lq nq lu nr ns nt nu bi translated">拥有一个基本的用户界面，让用户更容易与应用程序交互</li><li id="2021" class="nm nn it lb b lc nv lf nw li nx lm ny lq nz lu nr ns nt nu bi translated">将您的应用程序放在URL后面，这样更容易与您的朋友和测试人员共享</li></ul><p id="4709" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">像Streamlit和Gradio这样的工具可以帮你完成繁重的工作。因此，在早期，您应该尽早并经常部署，您肯定应该利用它们的特性。此外，当你开发你的模型时，你的焦点应该停留在这上面。所以，保持简单，以后再增加复杂性。</p><p id="03be" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果你在一家公司工作，重用现有的基础设施是遵循这种方法的另一个好理由。因此，您的公司可能已经建立了可靠地将代码部署到服务器的流程，您可以搭顺风车。</p><h2 id="4fbc" class="na md it bd me nb nc dn mi nd ne dp mm li nf ng mo lm nh ni mq lq nj nk ms nl bi translated">为什么你不能就此打住</h2><p id="c8aa" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">话虽如此，但在生产环境中部署时，有许多原因会让您不想遵循这种架构。</p><p id="b586" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">首先，web服务器可以用不同的语言编写(例如，ruby或javascript)。现在，您必须以某种方式将您的模型加载到这种语言中，虽然有这样做的方法，但它们很有挑战性并且容易出错。</p><p id="d093" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然后，你在生产中的模型会经常改变。性能下降、概念漂移问题和新数据将使您经常更新您的模型。另一方面，您的web服务器代码不会经常更改。如果您遵循服务器中的模型架构，那么每当您必须更新您的模型时，您将不得不从头开始部署整个系统。您会同意我的观点，对于您的应用程序来说，这不是一个好的、优化的推广过程。</p><p id="71bc" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">其次，您的服务器硬件可能没有针对ML工作负载进行优化。例如，它可能无法访问您的模型可以用来更快进行预测的GPU设备。现在，你可以争辩说在推理过程中你可能不需要GPU设备，但是在后面的文章中，我们将讨论性能优化，你可能会发现你确实需要它们，这取决于你的用例。</p><p id="08f9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">最后，您的模型和web服务器很可能会有所不同。如果您的模型很复杂或很大，您可能希望将它托管在GPU上，并将负载分布在许多机器上。你不会想让你的网络服务器变得如此复杂。此外，您的模型会消耗您的web服务器的资源，这将使用它所有的能力来使模型运行。</p><h1 id="c371" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">结论</h1><p id="3462" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">在这个故事中，我们看到了为什么您想要使用像Streamlit和Gradio这样的工具来部署快速且常用的ML应用程序版本。我们看到了服务器模型架构的优点和缺点，以及为什么您不想在生产中采用这种方式。</p><p id="b3f0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">那么，你能做什么？在下一个故事中，我们将看到如何将您的模型从您的web服务器中分离出来，最后，使用一个众所周知的工具在一个生产就绪的环境中服务您的模型。</p><p id="20dc" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">阅读这个故事的第二部分:</p><div class="oa ob gp gr oc od"><a rel="noopener follow" target="_blank" href="/pull-your-ml-model-out-of-your-server-the-database-solution-a00b212f5e0d"><div class="oe ab fo"><div class="of ab og cl cj oh"><h2 class="bd iu gy z fp oi fr fs oj fu fw is bi translated">将您的ML模型从服务器中拉出:数据库解决方案</h2><div class="ok l"><h3 class="bd b gy z fp oi fr fs oj fu fw dk translated">何时将模型放入数据库，如何放置，为什么</h3></div><div class="ol l"><p class="bd b dl z fp oi fr fs oj fu fw dk translated">towardsdatascience.com</p></div></div><div class="om l"><div class="on l oo op oq om or ks od"/></div></div></a></div><h1 id="b564" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">关于作者</h1><p id="19c1" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">我叫<a class="ae ky" href="https://www.dimpo.me/?utm_source=medium&amp;utm_medium=article&amp;utm_campaign=model-in-server" rel="noopener ugc nofollow" target="_blank">迪米特里斯·波罗普洛斯</a>，我是一名为<a class="ae ky" href="https://www.arrikto.com/" rel="noopener ugc nofollow" target="_blank">阿里克托</a>工作的机器学习工程师。我曾为欧洲委员会、欧盟统计局、国际货币基金组织、欧洲央行、经合组织和宜家等主要客户设计和实施过人工智能和软件解决方案。</p><p id="62b5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果你有兴趣阅读更多关于机器学习、深度学习、数据科学和数据运算的帖子，请关注我的<a class="ae ky" href="https://towardsdatascience.com/medium.com/@dpoulopoulos/follow" rel="noopener" target="_blank"> Medium </a>、<a class="ae ky" href="https://www.linkedin.com/in/dpoulopoulos/" rel="noopener ugc nofollow" target="_blank"> LinkedIn </a>或Twitter上的<a class="ae ky" href="https://twitter.com/james2pl" rel="noopener ugc nofollow" target="_blank"> @james2pl </a>。</p><p id="dcde" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">所表达的观点仅代表我个人，并不代表我的雇主的观点或意见。</p></div></div>    
</body>
</html>