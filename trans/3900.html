<html>
<head>
<title>CI/CD for Machine Learning Model Training with GitHub Actions</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用GitHub动作进行机器学习模型训练的CI/CD</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/ci-cd-for-machine-learning-model-training-with-github-actions-24b6a28cab96#2022-08-30">https://towardsdatascience.com/ci-cd-for-machine-learning-model-training-with-github-actions-24b6a28cab96#2022-08-30</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="0877" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">使用EC2实例作为训练机器学习模型的服务器的综合指南</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/3d24a1d3692806d36d3b359ef95d1342.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*0k30gQnIwTWUN60S"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">图片由<a class="ae ky" href="https://unsplash.com/@thisisengineering" rel="noopener ugc nofollow" target="_blank">this engineering RAEng</a>在<a class="ae ky" href="https://unsplash.com/photos/ZPeXrWxOjRQ" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</p></figure><h1 id="e9ed" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">介绍</h1><p id="e997" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">可以使用多个开源工具来执行机器学习流水线的适当编排。Github actions是众所周知的。它是一个内置的Github工具，主要用于自动化软件的开发、测试和部署过程。</p><p id="baca" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">如今，机器学习实践者已经在使用它来自动化他们项目的整个工作流程。所有这些工作流都与可以使用Github actions服务器或您自己的服务器执行的特定作业相关。</p><p id="0e96" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">在这个概念blob的结尾，你会明白:</p><ul class=""><li id="d17a" class="ms mt it lt b lu mn lx mo ma mu me mv mi mw mm mx my mz na bi translated">招待自己的跑步者的好处。</li><li id="8e2b" class="ms mt it lt b lu nb lx nc ma nd me ne mi nf mm mx my mz na bi translated">如何创建EC2实例并为手头的任务配置它。</li><li id="0db2" class="ms mt it lt b lu nb lx nc ma nd me ne mi nf mm mx my mz na bi translated">使用您的跑步者通过GitHub动作实现机器学习工作流程。</li><li id="d1e2" class="ms mt it lt b lu nb lx nc ma nd me ne mi nf mm mx my mz na bi translated">使用DVC存储模型元数据。</li><li id="5044" class="ms mt it lt b lu nb lx nc ma nd me ne mi nf mm mx my mz na bi translated">MLFlow来跟踪您的模型的性能。</li></ul><h1 id="030c" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">为什么要使用自托管运行程序？</h1><p id="b03a" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">托管自己的运行程序意味着您可以在定制的硬件环境中执行作业，并拥有所需的处理能力和内存存储。</p><p id="4f97" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">这样做有以下好处:</p><ul class=""><li id="478e" class="ms mt it lt b lu mn lx mo ma mu me mv mi mw mm mx my mz na bi translated">用户可以轻松地增加或减少跑步者的数量，这在并行训练模型时是有益的。</li><li id="31b6" class="ms mt it lt b lu nb lx nc ma nd me ne mi nf mm mx my mz na bi translated">在操作系统方面没有限制。Linux、Windows和macOS都受支持。</li><li id="e2e6" class="ms mt it lt b lu nb lx nc ma nd me ne mi nf mm mx my mz na bi translated">当使用AWS、GCP或Azure等云服务时，跑步者可以受益于所有服务，具体取决于订阅级别。</li></ul><h1 id="306f" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">如何配置您的AWS EC2实例？</h1><p id="bd64" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">为了成功地执行这一部分，我们需要执行两个主要任务。首先，获取AWS和Github凭证，然后设置加密的秘密来同步EC2和Github。</p><h2 id="085d" class="ng la it bd lb nh ni dn lf nj nk dp lj ma nl nm ll me nn no ln mi np nq lp nr bi translated">获取您的AWS和Github证书</h2><p id="6e42" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">在开始之前，你需要首先创建一个EC2实例，这可以从<a class="ae ky" rel="noopener" target="_blank" href="/nlp-mlops-project-with-dagshub-deploy-your-streamlit-app-on-aws-ec2-instance-part-2-eb7dcb17b8ba">这篇文章</a>中完成。需要三个主要的证书，下面详细介绍了获取它们的过程。</p><p id="302b" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">→从您的Github帐户获取您的<code class="fe ns nt nu nv b"><a class="ae ky" href="https://docs.github.com/en/authentication/keeping-your-account-and-data-secure/creating-a-personal-access-token" rel="noopener ugc nofollow" target="_blank">PERSONAL_ACCESS_TOKEN</a></code>。这被用作密码的替代，需要与<a class="ae ky" href="https://docs.github.com/en/rest/overview/other-authentication-methods#via-oauth-and-personal-access-tokens" rel="noopener ugc nofollow" target="_blank"> Github API </a>交互。</p><p id="a598" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">→完成以下5个步骤后，可以取回<code class="fe ns nt nu nv b">ACCESS_KEY_ID</code>和<code class="fe ns nt nu nv b">SECRET_ACCESS_KEY</code>:</p><ul class=""><li id="9c71" class="ms mt it lt b lu mn lx mo ma mu me mv mi mw mm mx my mz na bi translated">点击右上角附近的用户名。</li><li id="4170" class="ms mt it lt b lu nb lx nc ma nd me ne mi nf mm mx my mz na bi translated">选择安全凭据选项卡。</li><li id="fce7" class="ms mt it lt b lu nb lx nc ma nd me ne mi nf mm mx my mz na bi translated">选择访问密钥(访问密钥ID和秘密访问密钥)。</li><li id="553d" class="ms mt it lt b lu nb lx nc ma nd me ne mi nf mm mx my mz na bi translated">创建新的访问密钥。</li><li id="110e" class="ms mt it lt b lu nb lx nc ma nd me ne mi nf mm mx my mz na bi translated">单击显示访问密钥查看您的访问密钥ID和秘密访问密钥。</li></ul><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nw"><img src="../Images/be2b9362a78e13972fb8e9ca3171e523.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*TYlash2uguUV11yKRr0_eA.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">获取AWS访问密钥ID和秘密访问密钥的5个步骤的图示(图片由作者提供)</p></figure><h2 id="aed3" class="ng la it bd lb nh ni dn lf nj nk dp lj ma nl nm ll me nn no ln mi np nq lp nr bi translated">为同步设置加密的机密</h2><p id="194f" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">这一步是从Github上的项目存储库中执行的。Khuyen Tran在下一篇文章的<a class="ae ky" href="https://dagshub.com/blog/ci-cd-for-machine-learning-test-and-and-deploy-your-ml-model-with-github-actions/" rel="noopener ugc nofollow" target="_blank">的加密秘密部分描述了所有步骤。</a></p><p id="0ec0" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">最后你应该会有和我差不多的东西，像这样。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nx"><img src="../Images/143da1f1d685a9d7bac9235bff837758.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-zOMpHS1VVpRftBCP-hpWQ.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">添加到Github secrets的环境机密(图片由作者提供)</p></figure><h1 id="97ee" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">使用GitHub actions和您的自托管EC2 runner实现机器学习工作流。</h1><p id="287d" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">本节涵盖的机器学习任务是使用BERT模型实现3类分类。这是使用以下工作流程执行的:</p><p id="16d8" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated"><em class="ny">数据采集→数据处理→模型训练&amp;评估→模型&amp;元数据序列化。</em></p><p id="3fb0" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">我们将首先解释每个步骤中执行的底层任务及其源代码，然后解释如何使用我们的自托管runner运行模型训练。</p><p id="80d9" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">→ <strong class="lt iu">数据采集</strong>:负责从DVC存储器采集数据。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nz oa l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">get_data.py</p></figure><p id="22bf" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">→ <strong class="lt iu">数据处理</strong>:为简单起见，仅限于去除特殊字符。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nz oa l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">准备_数据. py</p></figure><p id="1a92" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">→ <strong class="lt iu">模型训练&amp;评测</strong>:创建一个BERT变压器模型。</p><p id="36f1" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">模型训练包括两个主要部分:(1)训练和评估模型性能，以及(2)使用MLFlow跟踪度量。</p><p id="7474" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">培训生成两个主要文件:</p><ul class=""><li id="4c68" class="ms mt it lt b lu mn lx mo ma mu me mv mi mw mm mx my mz na bi translated"><code class="fe ns nt nu nv b">model/finetuned_BERT_epoch{x}.model:</code>对应于第n个<code class="fe ns nt nu nv b">x</code>纪元后生成的微调后的BERT模型。</li><li id="be56" class="ms mt it lt b lu nb lx nc ma nd me ne mi nf mm mx my mz na bi translated"><code class="fe ns nt nu nv b">metrics/metrics.json:</code>包含先前生成的模型的精度、召回率和F1值。</li></ul><p id="f3a3" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">对于模型跟踪，我们需要从您的<a class="ae ky" href="https://dagshub.com/zoumana.keita/EC2SelfHostdRunner" rel="noopener ugc nofollow" target="_blank"> DagsHub项目存储库</a>的右上角获取如下凭证。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ob"><img src="../Images/6123f3bf15e739437dbf8f3926015c01.png" data-original-src="https://miro.medium.com/v2/resize:fit:1114/format:webp/1*onsqDvI8NCpB4EXYDvPiJQ.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">从DagsHub项目获取MLFlow凭据的步骤(图片由作者提供)</p></figure><p id="4798" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">下面的脚本只显示了MLFlow的模型跟踪部分，因为显示所有的源代码会太长。然而，完整的代码可以在文章的末尾找到。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nz oa l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">培训文件中的MLFlow部分。</p></figure><p id="23bf" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">→ <strong class="lt iu"> Model &amp;元数据序列化</strong>:负责将以下元数据保存到DVC存储:<em class="ny"> metrics.json，fine tuned _ BERT _ epoch { x } . Model .</em></p><h2 id="ec39" class="ng la it bd lb nh ni dn lf nj nk dp lj ma nl nm ll me nn no ln mi np nq lp nr bi translated">使用EC2自托管跑步者训练您的模型。</h2><p id="b0f3" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">这一节主要关注在提供自托管运行器之后启动模型的训练，该运行器将用于训练模型，而不是使用默认的GitHub actions运行器。</p><p id="5d94" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">培训工作流程在<code class="fe ns nt nu nv b">.github/workflows/training.yaml</code>中实施</p><p id="9144" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">您可以随意命名<code class="fe ns nt nu nv b">training.yaml</code>文件。但是，它必须位于<code class="fe ns nt nu nv b">.github/workflows</code>文件夹中。yaml扩展。这样它将被Github认为是一个工作流文件。</p><p id="b87e" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">以下是培训工作流程的一般格式:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nz oa l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">training.yaml</p></figure><ul class=""><li id="7376" class="ms mt it lt b lu mn lx mo ma mu me mv mi mw mm mx my mz na bi translated"><code class="fe ns nt nu nv b">name</code>:工作流程的名称。</li><li id="db9d" class="ms mt it lt b lu nb lx nc ma nd me ne mi nf mm mx my mz na bi translated"><code class="fe ns nt nu nv b">on</code> : push和pull_request是我们案例中负责触发整个工作流的主要事件。</li><li id="737d" class="ms mt it lt b lu nb lx nc ma nd me ne mi nf mm mx my mz na bi translated"><code class="fe ns nt nu nv b">jobs</code>:包含我们工作流程中的一组作业，它们是:(EC2转轮的部署，以及(2)模型的训练。</li></ul><blockquote class="oc od oe"><p id="f2c3" class="lr ls ny lt b lu mn ju lw lx mo jx lz of mp mc md og mq mg mh oh mr mk ml mm im bi translated">每项工作的步骤是什么？</p></blockquote><p id="8f0a" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">在深入研究源代码之前，让我们理解工作流的底层可视化说明。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oi"><img src="../Images/feb3f9b1c51969ddc0fa32f405909009.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*PEw-1Olm9bPaITS7x9cfGw.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">博客范围的一般工作流程(图片由作者提供)</p></figure><ol class=""><li id="14d6" class="ms mt it lt b lu mn lx mo ma mu me mv mi mw mm oj my mz na bi translated">工作流由开发人员/机器学习工程师的推或拉请求启动。</li><li id="f79d" class="ms mt it lt b lu nb lx nc ma nd me ne mi nf mm oj my mz na bi translated">该训练是在供应的EC2实例中触发的。</li><li id="224c" class="ms mt it lt b lu nb lx nc ma nd me ne mi nf mm oj my mz na bi translated">元数据(metrics.json和model)存储在DVC上，度量值由DagsHub上的MLFlow跟踪。</li></ol><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nz oa l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">自托管runner (training.yaml)中培训流程的完整工作流程</p></figure><p id="b1a9" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated"><strong class="lt iu"> →第一个作业</strong> : <code class="fe ns nt nu nv b"><strong class="lt iu">deploy-runner</strong></code></p><p id="81f6" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">我们从使用<a class="ae ky" href="https://cml.dev/doc/start/github" rel="noopener ugc nofollow" target="_blank"> <em class="ny">连续机器学习库开始，通过迭代</em> </a>来自动化服务器供应和模型训练。然后，我们获得运行资源调配所需的所有凭据。</p><p id="8f71" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">正在使用的EC2实例是:</p><ul class=""><li id="6a41" class="ms mt it lt b lu mn lx mo ma mu me mv mi mw mm mx my mz na bi translated">自由层<code class="fe ns nt nu nv b">t2.micro</code>实例。</li><li id="7b01" class="ms mt it lt b lu nb lx nc ma nd me ne mi nf mm mx my mz na bi translated">位于<code class="fe ns nt nu nv b">us-east-1a</code>区域。</li><li id="3826" class="ms mt it lt b lu nb lx nc ma nd me ne mi nf mm mx my mz na bi translated">用<code class="fe ns nt nu nv b">cml-runner</code>标签标记，该标签将用于在训练模型时识别实例。</li></ul><p id="a329" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated"><strong class="lt iu"> →第二个作业</strong> : <code class="fe ns nt nu nv b"><strong class="lt iu">train-model</strong></code></p><p id="cb91" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">通过使用先前提供的运行器，我们能够使用<em class="ny"> CML </em>库来执行训练。</p><h2 id="1e28" class="ng la it bd lb nh ni dn lf nj nk dp lj ma nl nm ll me nn no ln mi np nq lp nr bi translated">将元数据保存在DVC存储中。</h2><p id="a504" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">从训练步骤生成的所有文件都自动存储在本地机器中。但是我们可能希望跟踪这些数据的所有变化。这就是我们在本节中使用<code class="fe ns nt nu nv b"><a class="ae ky" href="https://dvc.org/" rel="noopener ugc nofollow" target="_blank">dvc</a></code>的原因。</p><p id="dfd2" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">总共有两个主要步骤:(1)获取您的凭证，以及(2)实现推送数据的逻辑。</p><p id="395b" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated"><strong class="lt iu"> →获取您的DVC证书。</strong></p><p id="dbda" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">获取您的DVC证书遵循相同的流程，类似于MLFlow:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ok"><img src="../Images/920beb1b3cf365e0ae26629d43ff0bb5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1126/format:webp/1*D_L-lrAIJvV8lPb9Apaplg.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">从DagsHub项目获得DVC证书的步骤(图片由作者提供)</p></figure><p id="0629" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">→ <strong class="lt iu">执行逻辑</strong></p><p id="5d0d" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">首先，我们在<code class="fe ns nt nu nv b">save_metadata.py</code>文件中实现DVC配置和数据保存逻辑。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nz oa l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">save _元数据. py</p></figure><p id="6aee" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">然后，这个文件被工作流中的<code class="fe ns nt nu nv b">save_metadata</code>作业调用。</p><pre class="kj kk kl km gt ol nv om on aw oo bi"><span id="04e1" class="ng la it nv b gy op oq l or os">jobs:</span><span id="f6b8" class="ng la it nv b gy ot oq l or os"> ... # deploy-runner &amp; train-model jobs</span><span id="3bfe" class="ng la it nv b gy ot oq l or os"> save_metadata:<br/>   steps:<br/>     - name: Save metadata into DVC<br/>       run: python save_metadata.py </span></pre><p id="771e" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">现在，我可以提交更改并在Github上推送代码，以便能够执行拉请求。</p><pre class="kj kk kl km gt ol nv om on aw oo bi"><span id="125c" class="ng la it nv b gy op oq l or os">git add . <br/>git commit -m “Pushing the code for pull request experimentation”<br/>git push -u origin main</span></pre><p id="0182" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">在将epochs的数量更改为2之后，我们得到了触发pull请求的新版本的训练脚本。下面是一个插图。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ou"><img src="../Images/c6bef7a083db10c167554e3fc6a7cef3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qU9Cfmk0qS2qSiNC4ZM7Cw.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">拉取请求</p></figure><p id="5a67" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">下图显示了pull请求之前和之后的模型度量，分别针对时段1和时段2。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ov"><img src="../Images/e2048906ec8fa6d28a7103830cac484f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-nXpFtVgQMIDjar1d9DBDQ.png"/></div></div></figure><h1 id="650f" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">结论</h1><p id="bf6a" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">当使用Github操作实现完整的机器学习管道时，使用自托管服务器在许多方面都有好处，如本文开头所示。</p><p id="4084" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">在这篇概念博客中，我们探讨了如何提供EC2实例，从push和pull请求中触发模型序列，然后将元数据保存到DVC存储中，并使用MLFlow跟踪模型性能。</p><p id="d170" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">掌握这些技能将帮助您提供一项宝贵的技能，将您组织的整个机器学习管道提升到下一个级别。</p><p id="9b7f" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">此外，如果你喜欢阅读我的故事，并希望支持我的写作，考虑<a class="ae ky" href="https://zoumanakeita.medium.com/membership" rel="noopener">成为一个媒体成员</a>解锁无限制访问媒体上的故事。</p><p id="2e32" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">欢迎在<a class="ae ky" href="https://zoumanakeita.medium.com/" rel="noopener">媒体</a>、<a class="ae ky" href="https://twitter.com/zoumana_keita_" rel="noopener ugc nofollow" target="_blank">推特</a>、<a class="ae ky" href="https://www.youtube.com/channel/UC9xKdy8cz6ZuJU5FTNtM_pQ" rel="noopener ugc nofollow" target="_blank"> YouTube </a>上关注我，或者在<a class="ae ky" href="https://www.linkedin.com/in/zoumana-keita/" rel="noopener ugc nofollow" target="_blank"> LinkedIn </a>上问好。讨论人工智能、人工智能、数据科学、自然语言处理和人工智能是一种乐趣！</p><h1 id="76f4" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">额外资源</h1><p id="713a" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated"><a class="ae ky" href="https://dagshub.com/zoumana.keita/EC2SelfHostdRunner" rel="noopener ugc nofollow" target="_blank">项目源代码</a></p><p id="7631" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated"><a class="ae ky" href="https://docs.github.com/en/actions/hosting-your-own-runners/about-self-hosted-runners" rel="noopener ugc nofollow" target="_blank">关于自托管跑步者</a></p><p id="484c" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated"><a class="ae ky" href="https://iterative.ai/blog/CML-runners-saving-models-1" rel="noopener ugc nofollow" target="_blank">在自托管AWS EC2 runner上使用CML训练和保存模型。</a></p></div></div>    
</body>
</html>