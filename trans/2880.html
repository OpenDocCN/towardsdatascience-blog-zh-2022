<html>
<head>
<title>Median, Mode, and Average Order Value in BigQuery using SQL</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用SQL的BigQuery中的中值、众数和平均顺序值</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/median-mode-and-average-order-value-in-bigquery-using-sql-8952bfbc288a#2022-06-23">https://towardsdatascience.com/median-mode-and-average-order-value-in-bigquery-using-sql-8952bfbc288a#2022-06-23</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="2cfc" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">了解客户的订购习惯，选择最佳策略增加订单价值</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/ee4a331d63710ef5cf1ccc2f0e6b0d24.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*YcRVFBvuwRLiW9HY"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">在<a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上由<a class="ae kv" href="https://unsplash.com/@mildlee?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">小米勒</a>拍摄的照片</p></figure><h1 id="9ffc" class="kw kx iq bd ky kz la lb lc ld le lf lg jw lh jx li jz lj ka lk kc ll kd lm ln bi translated">为什么使用中位数、众数或平均顺序值？</h1><p id="1637" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">这些指标可以帮助您了解您的客户如何在<strong class="lq ir">【订单级别】</strong>进行购买。不同的维度，如你的产品组合的价格范围、获取渠道和位置，都会对这些指标产生影响。你也可以将它们与其他行业进行比较。</p><blockquote class="mk"><p id="928f" class="ml mm iq bd mn mo mp mq mr ms mt mj dk translated">这样做的目的是在尝试新的销售策略来增加订单价值之前，充分了解客户的购买行为。</p></blockquote><p id="2077" class="pw-post-body-paragraph lo lp iq lq b lr mu jr lt lu mv ju lw lx mw lz ma mb mx md me mf my mh mi mj ij bi translated">让我们从一个例子开始，假设你销售下列物品:</p><ul class=""><li id="3334" class="mz na iq lq b lr nb lu nc lx nd mb ne mf nf mj ng nh ni nj bi translated">一件t恤(15€)</li><li id="8bdd" class="mz na iq lq b lr nk lu nl lx nm mb nn mf no mj ng nh ni nj bi translated">一件连帽衫(35€)</li><li id="2fa6" class="mz na iq lq b lr nk lu nl lx nm mb nn mf no mj ng nh ni nj bi translated">一顶太阳帽(10€)</li></ul><p id="b9c5" class="pw-post-body-paragraph lo lp iq lq b lr nb jr lt lu nc ju lw lx np lz ma mb nq md me mf nr mh mi mj ij bi translated">您观察到您的平均订单价值(<strong class="lq ir"> AOV </strong>)是<strong class="lq ir"> 13，75€。</strong>这个<strong class="lq ir"> </strong>可能意味着您的客户在每个订单中购买<strong class="lq ir">少量商品</strong>以及<strong class="lq ir">低值产品。</strong></p><p id="4eb3" class="pw-post-body-paragraph lo lp iq lq b lr nb jr lt lu nc ju lw lx np lz ma mb nq md me mf nr mh mi mj ij bi translated">更准确地说，我们必须查看我们的<strong class="lq ir">订单的价值分布</strong>，并使用额外的指标，如<strong class="lq ir">中值</strong>或<strong class="lq ir">众数、</strong>或<strong class="lq ir">标准差</strong>，以给出一个比平均订单价值更广泛的图景。</p><h2 id="41e1" class="ns kx iq bd ky nt nu dn lc nv nw dp lg lx nx ny li mb nz oa lk mf ob oc lm od bi translated">使用附加维度</h2><p id="aa73" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">您还可以查看按国家或<strong class="lq ir">采购渠道、</strong>等细分的<strong class="lq ir">订单价值的这些指标(平均值、中值、众数)</strong></p><p id="b2ee" class="pw-post-body-paragraph lo lp iq lq b lr nb jr lt lu nc ju lw lx np lz ma mb nq md me mf nr mh mi mj ij bi translated">目标是发现不同的行为或不同的趋势。也许通过电子邮件渠道获得的客户<strong class="lq ir">使用了更多折扣</strong> <strong class="lq ir">(导致订单价值降低)</strong>，而法国客户喜欢你的产品，因此订购了更多数量，或者<strong class="lq ir">在每个订单中组合了多个项目</strong>(<strong class="lq ir">导致订单价值增加</strong>)。</p><h2 id="7ea1" class="ns kx iq bd ky nt nu dn lc nv nw dp lg lx nx ny li mb nz oa lk mf ob oc lm od bi translated">使用基准</h2><p id="0d2d" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">基准可以用来比较你的公司和其他公司的表现。如果时尚界的基准显示,<strong class="lq ir">AOV 60€</strong>而你有<strong class="lq ir"> 13，75€ AOV </strong>，也许你的销售策略可能不会那么有效。</p><p id="17c7" class="pw-post-body-paragraph lo lp iq lq b lr nb jr lt lu nc ju lw lx np lz ma mb nq md me mf nr mh mi mj ij bi translated">但是，请记住，您的平均订单价值<strong class="lq ir">取决于几个方面，如您的定价点、地区/位置、细分市场</strong>等等…</p><p id="d8ee" class="pw-post-body-paragraph lo lp iq lq b lr nb jr lt lu nc ju lw lx np lz ma mb nq md me mf nr mh mi mj ij bi translated">一个网站的例子，提供不同行业的AOV基准。</p><div class="oe of gp gr og oh"><a href="https://marketing.dynamicyield.com/benchmarks/average-order-value/" rel="noopener  ugc nofollow" target="_blank"><div class="oi ab fo"><div class="oj ab ok cl cj ol"><h2 class="bd ir gy z fp om fr fs on fu fw ip bi translated">电子商务的平均订单价值基准</h2><div class="oo l"><h3 class="bd b gy z fp om fr fs on fu fw dk translated">4月份的平均订单价值统计显示，奢侈品和珠宝的AOV最高，为207美元，下降了8%</h3></div><div class="op l"><p class="bd b dl z fp om fr fs on fu fw dk translated">marketing.dynamicyield.com</p></div></div><div class="oq l"><div class="or l os ot ou oq ov kp oh"/></div></div></a></div><h2 id="cf49" class="ns kx iq bd ky nt nu dn lc nv nw dp lg lx nx ny li mb nz oa lk mf ob oc lm od bi translated">增加订单价值的策略</h2><p id="75bf" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">当我们在这里关注SQL时，我推荐阅读这些不同文章中关于你可以使用什么策略来增加你的平均订单价值的内容。</p><div class="oe of gp gr og oh"><a href="https://www.shopify.com/blog/average-order-value" rel="noopener  ugc nofollow" target="_blank"><div class="oi ab fo"><div class="oj ab ok cl cj ol"><h2 class="bd ir gy z fp om fr fs on fu fw ip bi translated">提高网上商店平均订单价值的五种方法</h2><div class="oo l"><h3 class="bd b gy z fp om fr fs on fu fw dk translated">你网站的流量很高。转化率很好。但是，当你阅读小字时:你的订单价值…</h3></div><div class="op l"><p class="bd b dl z fp om fr fs on fu fw dk translated">www.shopify.com</p></div></div><div class="oq l"><div class="ow l os ot ou oq ov kp oh"/></div></div></a></div><div class="oe of gp gr og oh"><a href="https://medium.com/@Bold_Commerce/9-upselling-techniques-to-explode-your-average-order-value-99b727585b77" rel="noopener follow" target="_blank"><div class="oi ab fo"><div class="oj ab ok cl cj ol"><h2 class="bd ir gy z fp om fr fs on fu fw ip bi translated">9种追加销售技巧，让您的平均订单价值激增</h2><div class="oo l"><h3 class="bd b gy z fp om fr fs on fu fw dk translated">您希望将您的在线销售额提高10–30%吗？</h3></div><div class="op l"><p class="bd b dl z fp om fr fs on fu fw dk translated">medium.com</p></div></div><div class="oq l"><div class="ox l os ot ou oq ov kp oh"/></div></div></a></div></div><div class="ab cl oy oz hu pa" role="separator"><span class="pb bw bk pc pd pe"/><span class="pb bw bk pc pd pe"/><span class="pb bw bk pc pd"/></div><div class="ij ik il im in"><h1 id="459f" class="kw kx iq bd ky kz pf lb lc ld pg lf lg jw ph jx li jz pi ka lk kc pj kd lm ln bi translated">让我们计算和分析我们的指标</h1><p id="21aa" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">让我们定义我们的三个指标，并解释我们将使用哪些销售数据。</p><ul class=""><li id="6b10" class="mz na iq lq b lr nb lu nc lx nd mb ne mf nf mj ng nh ni nj bi translated"><strong class="lq ir">平均值:</strong>是客户在一个订单上花费的总金额，是所有订单的平均值。它可以告诉你，你预计客户在一个订单上会花多少钱。</li><li id="c2da" class="mz na iq lq b lr nk lu nl lx nm mb nn mf no mj ng nh ni nj bi translated"><strong class="lq ir">中值:</strong>是您所有订单的<strong class="lq ir">中间值。这意味着50%的订单值小于或等于中值，50%的订单值大于或等于中值。</strong></li><li id="7634" class="mz na iq lq b lr nk lu nl lx nm mb nn mf no mj ng nh ni nj bi translated"><strong class="lq ir">模式:</strong>是<strong class="lq ir"> </strong>所有订单中最频繁出现的值。也许你有一个明星销售产品，你的许多客户都在做同样的订单。</li></ul><p id="f420" class="pw-post-body-paragraph lo lp iq lq b lr nb jr lt lu nc ju lw lx np lz ma mb nq md me mf nr mh mi mj ij bi translated">为了计算这些指标，我们使用来自官方<a class="ae kv" href="https://shop.googlemerchandisestore.com/" rel="noopener ugc nofollow" target="_blank"> <strong class="lq ir"> Google商品商店</strong> </a>的销售数据，我们的表中每行都有一个产品、一个数量、一个收入和相关的订单id。我们将把这个表称为我们的“基表”。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi pk"><img src="../Images/34e34a4ebd151d251e6eb9ec8915c020.png" data-original-src="https://miro.medium.com/v2/resize:fit:1272/format:webp/1*pkLzJgoYVp77KJ_hXCVaGA.png"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">我们将用于计算指标的基础表(图片由<a class="ae kv" href="https://romaingranger.medium.com/" rel="noopener">作者</a>提供)</p></figure><h2 id="0600" class="ns kx iq bd ky nt nu dn lc nv nw dp lg lx nx ny li mb nz oa lk mf ob oc lm od bi translated">计算每个订单的价值</h2><p id="d0ee" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">我们的第一步是获取每个订单的值。在我们的例子中，产品收入一栏已经考虑了购买的数量。这意味着我们只需<strong class="lq ir">对每个订单ID </strong>的产品收入求和，即可获得订单价值。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="pl pm l"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">获取按order_id分组的每个订单的总收入</p></figure><p id="bb82" class="pw-post-body-paragraph lo lp iq lq b lr nb jr lt lu nc ju lw lx np lz ma mb nq md me mf nr mh mi mj ij bi translated">这将简单地返回每个订单产生了多少欧元收入(我们的订单价值)。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi pn"><img src="../Images/c2fb7f709c1ef76034b90acb16c3023d.png" data-original-src="https://miro.medium.com/v2/resize:fit:438/format:webp/1*E35a36i4jtgz56wj6V6Tog.png"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">显示每个订单收入的两栏表格。(图片由<a class="ae kv" href="https://romaingranger.medium.com/" rel="noopener">作者</a>提供)</p></figure><p id="15b4" class="pw-post-body-paragraph lo lp iq lq b lr nb jr lt lu nc ju lw lx np lz ma mb nq md me mf nr mh mi mj ij bi translated">在我们的案例中，我们有大约<strong class="lq ir">11，000个订单</strong>，每个订单都有一个价值(以欧元/€计算的收入)。</p><p id="db10" class="pw-post-body-paragraph lo lp iq lq b lr nb jr lt lu nc ju lw lx np lz ma mb nq md me mf nr mh mi mj ij bi translated"><strong class="lq ir">订单值直方图</strong></p><p id="a4f9" class="pw-post-body-paragraph lo lp iq lq b lr nb jr lt lu nc ju lw lx np lz ma mb nq md me mf nr mh mi mj ij bi translated">当我们知道中位数、平均值和平均数在整个数据集中的位置时，它们就更容易解释了。直方图可以用来说明这一点。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="pl pm l"/></div></figure><p id="4f57" class="pw-post-body-paragraph lo lp iq lq b lr nb jr lt lu nc ju lw lx np lz ma mb nq md me mf nr mh mi mj ij bi translated">这将导致Datastudio中的以下图表，这将帮助我们更好地了解我们的客户是如何购买的。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi po"><img src="../Images/10d74227e1cb379574457106c97da391.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*eYnQtgsDp845_6L7oj01sg.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">订单的价值分布和占订单总额的百分比。(图片由<a class="ae kv" href="https://romaingranger.medium.com/" rel="noopener">作者</a>提供)</p></figure><p id="1a13" class="pw-post-body-paragraph lo lp iq lq b lr nb jr lt lu nc ju lw lx np lz ma mb nq md me mf nr mh mi mj ij bi translated">浅蓝色条显示了我们每个订单的价值分布。我们可以观察到<strong class="lq ir">我们的大部分订单都在15–50欧元</strong>和<strong class="lq ir"> </strong>之间，也就是说<strong class="lq ir"> </strong>我们有一个超过100欧元的<strong class="lq ir">非常长的尾巴</strong>。</p><p id="c281" class="pw-post-body-paragraph lo lp iq lq b lr nb jr lt lu nc ju lw lx np lz ma mb nq md me mf nr mh mi mj ij bi translated">蓝色的实线向我们展示了与订单总数相比有多少订单(在我们的例子中是11k)。我们在这里看到，我们80%的订单价值在0到140欧元之间。这有助于你知道什么时候你看到了一条长长的订单尾巴。</p><p id="1535" class="pw-post-body-paragraph lo lp iq lq b lr nb jr lt lu nc ju lw lx np lz ma mb nq md me mf nr mh mi mj ij bi translated">我们没有在图表的右轴上达到100%,因为我们没有绘制所有的数据点。一些订单产生了巨大的收入(我们确实有从2欧元到47 000欧元的订单<strong class="lq ir">),这可能被认为是异常值。</strong></p><p id="a33b" class="pw-post-body-paragraph lo lp iq lq b lr nb jr lt lu nc ju lw lx np lz ma mb nq md me mf nr mh mi mj ij bi translated">我们可以使用桶来更好地绘制后面的整个数据集，并查看如何删除异常值。</p><p id="75a1" class="pw-post-body-paragraph lo lp iq lq b lr nb jr lt lu nc ju lw lx np lz ma mb nq md me mf nr mh mi mj ij bi translated">在我们的案例中，我们将<strong class="lq ir">删除</strong>所有超过<strong class="lq ir"> 690欧元</strong>的订单，因为<strong class="lq ir"> </strong>仅代表<strong class="lq ir">我们订单的3% </strong>。</p><blockquote class="pp pq pr"><p id="a77c" class="lo lp ps lq b lr nb jr lt lu nc ju lw pt np lz ma pu nq md me pv nr mh mi mj ij bi translated">提示<em class="iq"> : </em>要在SQL中构建存储桶，并将您的值转换成可读性更好的直方图，您可以使用以下技术。</p><p id="534b" class="lo lp ps lq b lr nb jr lt lu nc ju lw pt np lz ma pu nq md me pv nr mh mi mj ij bi translated"><code class="fe pw px py pz b"><em class="iq">TRUNC(order_value,-1)</em></code> <em class="iq"> : </em>这将返回最近的下10个值。</p><p id="c658" class="lo lp ps lq b lr nb jr lt lu nc ju lw pt np lz ma pu nq md me pv nr mh mi mj ij bi translated"><code class="fe pw px py pz b"><em class="iq">ROUND(order_value/5,0)*5</em></code> <em class="iq"> : </em>这将每5步返回最近的值。</p></blockquote><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi qa"><img src="../Images/489fcd2b8bb0d903034f0b6fa96291f4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1090/format:webp/1*sbRN9N-y46-HGIa59BLR7Q.png"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">使用桶的示例(图片由<a class="ae kv" href="https://romaingranger.medium.com/" rel="noopener">作者</a>提供)</p></figure><p id="4c69" class="pw-post-body-paragraph lo lp iq lq b lr nb jr lt lu nc ju lw lx np lz ma mb nq md me mf nr mh mi mj ij bi translated"><strong class="lq ir">平均订单值</strong></p><p id="6712" class="pw-post-body-paragraph lo lp iq lq b lr nb jr lt lu nc ju lw lx np lz ma mb nq md me mf nr mh mi mj ij bi translated">因为我们有一个包含每个订单值的表，所以我们可以简单地使用<code class="fe pw px py pz b">AVG()</code>聚合函数，如下所示:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="pl pm l"/></div></figure><p id="e7b8" class="pw-post-body-paragraph lo lp iq lq b lr nb jr lt lu nc ju lw lx np lz ma mb nq md me mf nr mh mi mj ij bi translated">是的，就是这么简单！该查询将返回一个数字，表明我们商店的订单平均价值为93欧元。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi qb"><img src="../Images/a0417479864c9a889a8db15e5cd7e025.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gbL0XCW90iETxjDhDXfhAg.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">平均订单值(红色垂直线)绘制在我们的直方图上。(图片由<a class="ae kv" href="https://romaingranger.medium.com/" rel="noopener">作者</a>提供)</p></figure><p id="6017" class="pw-post-body-paragraph lo lp iq lq b lr nb jr lt lu nc ju lw lx np lz ma mb nq md me mf nr mh mi mj ij bi translated"><strong class="lq ir">订单中值</strong></p><p id="c952" class="pw-post-body-paragraph lo lp iq lq b lr nb jr lt lu nc ju lw lx np lz ma mb nq md me mf nr mh mi mj ij bi translated">为了计算中值，我们将使用<code class="fe pw px py pz b"> PERCENTILE_CONT(order_value, 0.5)</code>函数。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="pl pm l"/></div></figure><p id="7e15" class="pw-post-body-paragraph lo lp iq lq b lr nb jr lt lu nc ju lw lx np lz ma mb nq md me mf nr mh mi mj ij bi translated">percentile函数将遍历我们数据集的每一行，并返回<code class="fe pw px py pz b">order_value</code>列的中值(这就是为什么我们使用0.5参数，这意味着50%的值高于或低于该点)。</p><p id="600d" class="pw-post-body-paragraph lo lp iq lq b lr nb jr lt lu nc ju lw lx np lz ma mb nq md me mf nr mh mi mj ij bi translated">在之前绘制的直方图中，我们可能已经使用深蓝色线检查了中值的位置。</p><p id="379b" class="pw-post-body-paragraph lo lp iq lq b lr nb jr lt lu nc ju lw lx np lz ma mb nq md me mf nr mh mi mj ij bi translated">在我们的情况下，这个查询返回的值是52。这表明我们一半的订单<strong class="lq ir">价值不到52欧元，另一半价值更多</strong>。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi qb"><img src="../Images/68256a7b8ae6cdc5c16f5e9b3df61dda.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*cBjOMY-bPQnOD2vNJ4JOFg.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">订单中值(黄色垂直线)绘制在我们的直方图上。(图片由<a class="ae kv" href="https://romaingranger.medium.com/" rel="noopener">作者</a>提供)</p></figure><p id="92a7" class="pw-post-body-paragraph lo lp iq lq b lr nb jr lt lu nc ju lw lx np lz ma mb nq md me mf nr mh mi mj ij bi translated">因为这个函数是一个导航函数，所以我们应用一个<code class="fe pw px py pz b">LIMIT 1</code>来只返回1行。</p><div class="oe of gp gr og oh"><a href="https://cloud.google.com/bigquery/docs/reference/standard-sql/navigation_functions#percentile_cont" rel="noopener  ugc nofollow" target="_blank"><div class="oi ab fo"><div class="oj ab ok cl cj ol"><h2 class="bd ir gy z fp om fr fs on fu fw ip bi translated">导航功能|大查询|谷歌云</h2><div class="oo l"><h3 class="bd b gy z fp om fr fs on fu fw dk translated">无论您的企业正处于数字化转型的早期阶段，谷歌云都可以帮助您…</h3></div><div class="op l"><p class="bd b dl z fp om fr fs on fu fw dk translated">cloud.google.com</p></div></div><div class="oq l"><div class="qc l os ot ou oq ov kp oh"/></div></div></a></div><p id="a2dd" class="pw-post-body-paragraph lo lp iq lq b lr nb jr lt lu nc ju lw lx np lz ma mb nq md me mf nr mh mi mj ij bi translated"><strong class="lq ir">模式顺序值</strong></p><p id="41d8" class="pw-post-body-paragraph lo lp iq lq b lr nb jr lt lu nc ju lw lx np lz ma mb nq md me mf nr mh mi mj ij bi translated">为了获得模式，我们将使用<code class="fe pw px py pz b">APPROX_TOP_COUNT(order_value,1)</code>功能。这将返回数据集中最常见的值。</p><p id="18bd" class="pw-post-body-paragraph lo lp iq lq b lr nb jr lt lu nc ju lw lx np lz ma mb nq md me mf nr mh mi mj ij bi translated">我们使用1作为参数，所以这个函数只返回一个结果。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="pl pm l"/></div></figure><p id="39d7" class="pw-post-body-paragraph lo lp iq lq b lr nb jr lt lu nc ju lw lx np lz ma mb nq md me mf nr mh mi mj ij bi translated">我们系列中最常见的价值是<strong class="lq ir"> 24欧元</strong>196个订单。这是我们数据集的模式。</p><p id="2d55" class="pw-post-body-paragraph lo lp iq lq b lr nb jr lt lu nc ju lw lx np lz ma mb nq md me mf nr mh mi mj ij bi translated">请记住，函数<code class="fe pw px py pz b">APPROX_TOP_COUNT()</code>返回一个数组，而不是一个整数。</p><p id="1a5c" class="pw-post-body-paragraph lo lp iq lq b lr nb jr lt lu nc ju lw lx np lz ma mb nq md me mf nr mh mi mj ij bi translated">视觉上，在我们的直方图上也很容易看到。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi qb"><img src="../Images/fa9ce617cfd8941bf98ec41e4a828b77.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*yRI5miZ17-RNybsvIYVp5w.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">模式阶数值(紫色垂直线)绘制在我们的直方图上。(图片由<a class="ae kv" href="https://romaingranger.medium.com/" rel="noopener">作者</a>提供)</p></figure><div class="oe of gp gr og oh"><a href="https://cloud.google.com/bigquery/docs/reference/standard-sql/approximate_aggregate_functions#approx_top_count" rel="noopener  ugc nofollow" target="_blank"><div class="oi ab fo"><div class="oj ab ok cl cj ol"><h2 class="bd ir gy z fp om fr fs on fu fw ip bi translated">近似聚合函数| BigQuery | Google Cloud</h2><div class="oo l"><h3 class="bd b gy z fp om fr fs on fu fw dk translated">无论您的企业正处于数字化转型的早期阶段，谷歌云都可以帮助您…</h3></div><div class="op l"><p class="bd b dl z fp om fr fs on fu fw dk translated">cloud.google.com</p></div></div><div class="oq l"><div class="qd l os ot ou oq ov kp oh"/></div></div></a></div><p id="9b1a" class="pw-post-body-paragraph lo lp iq lq b lr nb jr lt lu nc ju lw lx np lz ma mb nq md me mf nr mh mi mj ij bi translated"><strong class="lq ir">标准偏差</strong></p><p id="123a" class="pw-post-body-paragraph lo lp iq lq b lr nb jr lt lu nc ju lw lx np lz ma mb nq md me mf nr mh mi mj ij bi translated">为了完成这篇文章，我们将把最后一条信息添加到直方图中。</p><p id="ff98" class="pw-post-body-paragraph lo lp iq lq b lr nb jr lt lu nc ju lw lx np lz ma mb nq md me mf nr mh mi mj ij bi translated">标准差衡量数据集相对于其均值的离差，用更简单的术语来说，它将帮助我们了解<strong class="lq ir">什么是标准订单值，</strong>或者换句话说，当有人说<strong class="lq ir">“这是一个大订单”</strong>或<strong class="lq ir">“这是一个小订单”时，这意味着什么。</strong></p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="pl pm l"/></div></figure><p id="5a35" class="pw-post-body-paragraph lo lp iq lq b lr nb jr lt lu nc ju lw lx np lz ma mb nq md me mf nr mh mi mj ij bi translated">在我们的案例中，一份订单平均是93欧元。</p><p id="e547" class="pw-post-body-paragraph lo lp iq lq b lr nb jr lt lu nc ju lw lx np lz ma mb nq md me mf nr mh mi mj ij bi translated">根据我们的查询，我们的标准偏差是<strong class="lq ir"> 112欧元</strong>。所有在93欧元(我们的平均值)+112欧元(205欧元)和-112欧元(-19欧元)范围内的订单都被视为标准订单。当然，在这种情况下，我们将边界标在0，而不是-19。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi qb"><img src="../Images/5dc3ba5669df650006435a16579c5824.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*nIJQJl68fJCk-4ZF-hQA8Q.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">我们订单值的标准偏差(黑色垂直线)绘制在直方图上。(图片由<a class="ae kv" href="https://romaingranger.medium.com/" rel="noopener">作者</a>提供)</p></figure><p id="864e" class="pw-post-body-paragraph lo lp iq lq b lr nb jr lt lu nc ju lw lx np lz ma mb nq md me mf nr mh mi mj ij bi translated">在我们的案例中，205欧元以上的订单可以被认为是特殊的，或者是我们可以研究的边缘案例。了解它们对我们的业务意味着什么也很有意思。</p><p id="0087" class="pw-post-body-paragraph lo lp iq lq b lr nb jr lt lu nc ju lw lx np lz ma mb nq md me mf nr mh mi mj ij bi translated">此外，来自<strong class="lq ir"> 0至205欧元</strong>的订单占<strong class="lq ir">订单</strong>的85%。这意味着这是我们观察到的范围，也是我们可以预期的范围。</p><div class="oe of gp gr og oh"><a href="https://cloud.google.com/bigquery/docs/reference/standard-sql/statistical_aggregate_functions#stddev" rel="noopener  ugc nofollow" target="_blank"><div class="oi ab fo"><div class="oj ab ok cl cj ol"><h2 class="bd ir gy z fp om fr fs on fu fw ip bi translated">统计聚合函数| BigQuery | Google Cloud</h2><div class="oo l"><h3 class="bd b gy z fp om fr fs on fu fw dk translated">以下统计聚合函数在Google标准SQL中可用。了解…的语法</h3></div><div class="op l"><p class="bd b dl z fp om fr fs on fu fw dk translated">cloud.google.com</p></div></div><div class="oq l"><div class="qe l os ot ou oq ov kp oh"/></div></div></a></div></div><div class="ab cl oy oz hu pa" role="separator"><span class="pb bw bk pc pd pe"/><span class="pb bw bk pc pd pe"/><span class="pb bw bk pc pd"/></div><div class="ij ik il im in"><p id="835b" class="pw-post-body-paragraph lo lp iq lq b lr nb jr lt lu nc ju lw lx np lz ma mb nq md me mf nr mh mi mj ij bi translated"><strong class="lq ir">结论</strong></p><p id="e9be" class="pw-post-body-paragraph lo lp iq lq b lr nb jr lt lu nc ju lw lx np lz ma mb nq md me mf nr mh mi mj ij bi translated">我们确实对客户的购买方式有了更全面的了解。似乎有一些订单<strong class="lq ir">(大于205欧元)</strong>可能是异常值，或者可能与业务的某个特定方面相关(可能是大公司的订单、技术活动的采购等……)。</p><p id="b976" class="pw-post-body-paragraph lo lp iq lq b lr nb jr lt lu nc ju lw lx np lz ma mb nq md me mf nr mh mi mj ij bi translated">我们一半的订单仍处于低值<strong class="lq ir">(2-54欧元)</strong>，如果我们想增加订单价值，查看我们的产品组合和交叉销售/追加销售策略可能会很有意思。</p><p id="4d22" class="pw-post-body-paragraph lo lp iq lq b lr nb jr lt lu nc ju lw lx np lz ma mb nq md me mf nr mh mi mj ij bi translated">根据模式并查看直方图，我们的大部分订单都在<strong class="lq ir">20-24欧元之间，</strong>我们可能会在这些订单中出现畅销商品<strong class="lq ir">或低价商品组合</strong>。</p><p id="a305" class="pw-post-body-paragraph lo lp iq lq b lr nb jr lt lu nc ju lw lx np lz ma mb nq md me mf nr mh mi mj ij bi translated">希望这可以帮助你定义和决定在订单层面应用的策略，比如组合产品、改变运费、折扣优惠(买二送一)，甚至更有创意的策略。</p></div></div>    
</body>
</html>