<html>
<head>
<title>Top 10 Categories of Pandas Functions That I Use Most</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">我最常用的熊猫功能的10大类</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/top-10-categories-of-pandas-functions-that-i-use-most-61fae58082f6#2022-07-19">https://towardsdatascience.com/top-10-categories-of-pandas-functions-that-i-use-most-61fae58082f6#2022-07-19</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="11d9" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">熟悉这些函数可以帮助您处理数据</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/92a3013d60a539695174a39fd881c19f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*Fg7eA9Ei6XcHE-B3"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">照片由<a class="ae ky" href="https://unsplash.com/@firmbee?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Firmbee.com</a>在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</p></figure><p id="cfab" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">人们喜欢使用Python，因为它有一个用于各种工作的第三方库的通用存储库。对于数据科学，最受欢迎的数据处理库之一是Pandas。多年来，由于它的开源特性，许多开发人员为这个项目做出了贡献，使得pandas对于几乎任何数据处理工作都非常强大。</p><p id="d5bc" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我没数过，但我觉得熊猫有上百种功能可以使用。虽然我经常使用20或30个函数，但把它们都谈一谈是不现实的。因此，在这篇文章中，我将只关注10个最有用的函数类别。一旦你和他们相处得很好，他们可能会满足你超过70%的数据处理需求。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h2 id="8592" class="mc md it bd me mf mg dn mh mi mj dp mk li ml mm mn lm mo mp mq lq mr ms mt mu bi translated">1.读取数据</h2><p id="8a00" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">我们通常从外部来源读取数据。根据源数据的格式，我们可以使用相应的<code class="fe na nb nc nd b">read_*</code>函数。</p><ul class=""><li id="58b2" class="ne nf it lb b lc ld lf lg li ng lm nh lq ni lu nj nk nl nm bi translated"><code class="fe na nb nc nd b">read_csv</code>:当源数据为CSV格式时使用。一些值得注意的参数包括<code class="fe na nb nc nd b">header</code>(是否以及哪一行是标题)、<code class="fe na nb nc nd b">sep</code>(分隔符)和<code class="fe na nb nc nd b">usecols</code>(要使用的列的子集)。</li><li id="aea7" class="ne nf it lb b lc nn lf no li np lm nq lq nr lu nj nk nl nm bi translated"><code class="fe na nb nc nd b">read_excel</code>:当您的源数据为Excel格式时使用。一些值得注意的参数包括<code class="fe na nb nc nd b">sheet_name</code>(哪个工作表)和header。</li><li id="09ad" class="ne nf it lb b lc nn lf no li np lm nq lq nr lu nj nk nl nm bi translated"><code class="fe na nb nc nd b">read_pickle</code>:当你的源数据是一个酸洗的<code class="fe na nb nc nd b">DataFrame</code>时使用它。Pickling是一种存储数据帧的好机制，通常比CSV和Excel要好。</li><li id="4115" class="ne nf it lb b lc nn lf no li np lm nq lq nr lu nj nk nl nm bi translated"><code class="fe na nb nc nd b">read_sas</code>:我经常使用这个功能，因为我以前用SAS处理数据。</li></ul></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h2 id="c637" class="mc md it bd me mf mg dn mh mi mj dp mk li ml mm mn lm mo mp mq lq mr ms mt mu bi translated">2.写入数据</h2><p id="2d99" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">处理完数据后，您可能希望将数据帧保存到文件中，以便长期存储或与同事进行数据交换。</p><ul class=""><li id="dadb" class="ne nf it lb b lc ld lf lg li ng lm nh lq ni lu nj nk nl nm bi translated"><code class="fe na nb nc nd b">to_csv</code>:写入CSV文件。它不保留某些数据类型，比如日期。尺寸往往比别人大。我通常将参数索引设置为<code class="fe na nb nc nd b">False</code>，因为我不需要额外的列来显示数据文件中的索引。</li><li id="6438" class="ne nf it lb b lc nn lf no li np lm nq lq nr lu nj nk nl nm bi translated"><code class="fe na nb nc nd b">to_excel</code>:写入Excel文件。</li><li id="001d" class="ne nf it lb b lc nn lf no li np lm nq lq nr lu nj nk nl nm bi translated"><code class="fe na nb nc nd b">to_pickle</code>:写入pickle文件。正如我刚才提到的，我使用pickled文件，这样当我读取它们时，数据类型可以被正确地保留。</li></ul></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h2 id="dbca" class="mc md it bd me mf mg dn mh mi mj dp mk li ml mm mn lm mo mp mq lq mr ms mt mu bi translated">3.数据总结/概述</h2><p id="a53b" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">将数据读入数据帧后，获取数据集的一些描述符是一个好主意。</p><ul class=""><li id="3840" class="ne nf it lb b lc ld lf lg li ng lm nh lq ni lu nj nk nl nm bi translated"><code class="fe na nb nc nd b">head</code>:检查前几行，看数据是否读取正确。</li><li id="5188" class="ne nf it lb b lc nn lf no li np lm nq lq nr lu nj nk nl nm bi translated"><code class="fe na nb nc nd b">tail</code>:检查最后几行。这同样重要。当您处理一个大文件时，读取可能是不完整的。通过检查尾部，你会发现阅读是否已经完成。</li><li id="99f9" class="ne nf it lb b lc nn lf no li np lm nq lq nr lu nj nk nl nm bi translated"><code class="fe na nb nc nd b">info</code>:对数据集有一个整体的总结。一些有用的信息包括列的数据类型和内存使用情况。</li><li id="6fc2" class="ne nf it lb b lc nn lf no li np lm nq lq nr lu nj nk nl nm bi translated"><code class="fe na nb nc nd b">describe</code>:提供数据集的描述性摘要。</li><li id="c188" class="ne nf it lb b lc nn lf no li np lm nq lq nr lu nj nk nl nm bi translated"><code class="fe na nb nc nd b">shape</code>:行数和列数(是属性，不是函数)。</li></ul></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h2 id="9401" class="mc md it bd me mf mg dn mh mi mj dp mk li ml mm mn lm mo mp mq lq mr ms mt mu bi translated">4.分类数据</h2><p id="0685" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">我通常在完成大部分其他处理步骤后对数据进行分类。特别是，如果我要将数据帧写入外部文件，比如Excel，我几乎总是在导出之前对数据进行排序。这是因为排序后的数据更容易让其他人利用眼球定位到需要的信息。</p><ul class=""><li id="0d34" class="ne nf it lb b lc ld lf lg li ng lm nh lq ni lu nj nk nl nm bi translated"><code class="fe na nb nc nd b">sort_values</code>:通过指定列名对数据进行排序。因为我主要处理行是观察值的文件，所以排序是按列进行的。</li></ul></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h2 id="ce8d" class="mc md it bd me mf mg dn mh mi mj dp mk li ml mm mn lm mo mp mq lq mr ms mt mu bi translated">5.处理重复</h2><p id="7c66" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">当我们处理现实生活中的数据集时，很可能会有重复的数据集。例如，有些数据意外地在数据源中输入了两次。重要的是删除重复的内容。</p><ul class=""><li id="50e0" class="ne nf it lb b lc ld lf lg li ng lm nh lq ni lu nj nk nl nm bi translated"><code class="fe na nb nc nd b">duplicated</code>:识别数据帧中是否有重复。您可以指定使用哪些列来标识重复项。</li><li id="a955" class="ne nf it lb b lc nn lf no li np lm nq lq nr lu nj nk nl nm bi translated">drop_duplicates:从数据帧中删除重复项。我不盲目使用这个功能。为了谨慎起见，我总是首先使用<code class="fe na nb nc nd b">duplicated</code>函数来检查重复项。</li></ul></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h2 id="102b" class="mc md it bd me mf mg dn mh mi mj dp mk li ml mm mn lm mo mp mq lq mr ms mt mu bi translated">6.处理缺失值</h2><p id="da20" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">数据集中存在缺失值几乎是不可避免的。检查数据集的缺失并决定如何处理缺失值是一个很好的做法。</p><ul class=""><li id="ce31" class="ne nf it lb b lc ld lf lg li ng lm nh lq ni lu nj nk nl nm bi translated"><code class="fe na nb nc nd b">isnull</code>:检查您的数据帧是否丢失。</li><li id="cfbb" class="ne nf it lb b lc nn lf no li np lm nq lq nr lu nj nk nl nm bi translated"><code class="fe na nb nc nd b">dropna</code>:删除缺失数据的观测值。值得注意的参数包括<code class="fe na nb nc nd b">how</code>(如何确定是否删除一个观察值)和<code class="fe na nb nc nd b">thred</code>(符合删除条件的缺失值的数量)。</li><li id="501a" class="ne nf it lb b lc nn lf no li np lm nq lq nr lu nj nk nl nm bi translated"><code class="fe na nb nc nd b">fillna</code>:按照指定的方式填充缺失值，如向前填充(<code class="fe na nb nc nd b">ffill</code>)。</li></ul></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h2 id="6b0a" class="mc md it bd me mf mg dn mh mi mj dp mk li ml mm mn lm mo mp mq lq mr ms mt mu bi translated">7.提取新数据</h2><p id="0164" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">列可以包含多条信息。例如，我们的数据集可能有像proj-0001这样的数据，其中前四个字母是项目的缩写，而最后四个数字是主题的唯一ID。为了提取这些数据，我经常使用以下函数。</p><ul class=""><li id="58ae" class="ne nf it lb b lc ld lf lg li ng lm nh lq ni lu nj nk nl nm bi translated"><code class="fe na nb nc nd b">map</code>:使用单个列中的信息创建一个列。换句话说，你在一个<code class="fe na nb nc nd b">Series</code>对象上调用这个函数，比如<code class="fe na nb nc nd b">df[“sub_id”] = df[“temp_id”].map(lambda x: int(x[-4:]))</code>。</li><li id="562c" class="ne nf it lb b lc nn lf no li np lm nq lq nr lu nj nk nl nm bi translated"><code class="fe na nb nc nd b">apply</code>:使用多列数据创建一列或多列。在创建列时，您经常需要指定<code class="fe na nb nc nd b">axis=1</code>。</li></ul></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h2 id="f30c" class="mc md it bd me mf mg dn mh mi mj dp mk li ml mm mn lm mo mp mq lq mr ms mt mu bi translated">8.转换数据</h2><p id="572d" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">通常有两种数据。一种是“宽”格式，指的是每行代表一个单独的主题或观察，列包括对该主题的重复测量。另一种是“长”格式。在这种格式中，一个主题有多行，每一行可以代表某个时间点的度量。通常，您可能需要在这两种格式之间转换数据。</p><ul class=""><li id="f7d8" class="ne nf it lb b lc ld lf lg li ng lm nh lq ni lu nj nk nl nm bi translated"><code class="fe na nb nc nd b">melt</code>:将宽数据集转换为长数据集。值得注意的参数包括<code class="fe na nb nc nd b">id_vars</code>(用于标识符)和<code class="fe na nb nc nd b">value_vars</code>(其值构成值列的列列表)。</li><li id="61f9" class="ne nf it lb b lc nn lf no li np lm nq lq nr lu nj nk nl nm bi translated"><code class="fe na nb nc nd b">pivot</code>:将长数据集转换为宽数据集。值得注意的参数包括<code class="fe na nb nc nd b">index</code>(唯一标识符)、<code class="fe na nb nc nd b">columns</code>(成为值列的列)和<code class="fe na nb nc nd b">values</code>(具有值的列)。</li></ul></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h2 id="18ac" class="mc md it bd me mf mg dn mh mi mj dp mk li ml mm mn lm mo mp mq lq mr ms mt mu bi translated">9.合并数据集</h2><p id="edf8" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">当您有单独的数据源时，您可能希望合并它们，这样您就有了一个组合的数据集。</p><ul class=""><li id="1626" class="ne nf it lb b lc ld lf lg li ng lm nh lq ni lu nj nk nl nm bi translated"><code class="fe na nb nc nd b">merge</code>:将当前的与另一个合并。您可以指定一列或多列作为合并的标识符(参数<code class="fe na nb nc nd b">on</code>，或<code class="fe na nb nc nd b">left_on</code> &amp; <code class="fe na nb nc nd b">right_on</code>)。其他值得注意的参数包括<code class="fe na nb nc nd b">how</code>(如inner或left，或outer)，以及<code class="fe na nb nc nd b">suffixes</code>(两个数据集使用什么后缀)。</li><li id="54c3" class="ne nf it lb b lc nn lf no li np lm nq lq nr lu nj nk nl nm bi translated"><code class="fe na nb nc nd b">concat</code>:沿行或列连接DataFrame对象。当您有多个相同形状的DataFrame对象/存储相同的信息时，这很有用。</li></ul></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h2 id="edaf" class="mc md it bd me mf mg dn mh mi mj dp mk li ml mm mn lm mo mp mq lq mr ms mt mu bi translated">10.按组汇总</h2><p id="0471" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">我们的数据集通常包括指示数据特征的分类变量，例如学生的学校、科目的项目以及门票的班级级别。</p><ul class=""><li id="686d" class="ne nf it lb b lc ld lf lg li ng lm nh lq ni lu nj nk nl nm bi translated"><code class="fe na nb nc nd b">groupby</code>:创建一个GroupBy对象，可以指定一列或多列。</li><li id="453f" class="ne nf it lb b lc nn lf no li np lm nq lq nr lu nj nk nl nm bi translated"><code class="fe na nb nc nd b">mean</code>:您可以在GroupBy对象上调用mean来找出平均值。你可以对其他属性做同样的事情，比如<code class="fe na nb nc nd b">std</code>。</li><li id="ce66" class="ne nf it lb b lc nn lf no li np lm nq lq nr lu nj nk nl nm bi translated"><code class="fe na nb nc nd b">size</code>:群体频率</li><li id="bd82" class="ne nf it lb b lc nn lf no li np lm nq lq nr lu nj nk nl nm bi translated"><code class="fe na nb nc nd b">agg</code>:可定制的聚合功能。在这个函数中，您可以请求对指定的列进行统计。</li></ul></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h2 id="9c37" class="mc md it bd me mf mg dn mh mi mj dp mk li ml mm mn lm mo mp mq lq mr ms mt mu bi translated">结论</h2><p id="ff1f" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">在这篇文章中，我回顾了我在日常数据处理工作中经常使用的10大类函数。虽然这些评论很简短，但它们为你组织学习熊猫提供了指导方针。</p><p id="aa9e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">希望这篇文章对你有用。感谢阅读。</p></div></div>    
</body>
</html>