<html>
<head>
<title>Understanding the Fixed Effects Regression Model</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">了解固定效应回归模型</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/understanding-the-fixed-effects-regression-model-d2fccc2cc27e#2022-02-14">https://towardsdatascience.com/understanding-the-fixed-effects-regression-model-d2fccc2cc27e#2022-02-14</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="a5a3" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">以及关于如何在真实面板数据集上构建和训练固定效果模型的Python教程</h2></div><p id="f4f8" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kh ir">固定效应回归模型</strong>用于估计<strong class="kh ir">面板数据集</strong>中个体内在特征的效应。这种内在特征的例子有遗传、敏锐和文化因素。这些因素无法直接观察或测量，但需要找到一种方法来估计它们的影响，因为忽略它们会导致训练的回归模型不理想。固定效应模型就是为了解决这个问题而设计的。</p><p id="fd2f" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">本文是面板数据分析系列文章的第二部分:</p><ol class=""><li id="1db2" class="lb lc iq kh b ki kj kl km ko ld ks le kw lf la lg lh li lj bi translated"><a class="ae lk" rel="noopener" target="_blank" href="/how-to-build-a-pooled-ols-regression-model-for-panel-data-sets-a78358f9c2a">如何为面板数据建立混合OLS回归模型</a></li><li id="e886" class="lb lc iq kh b ki ll kl lm ko ln ks lo kw lp la lg lh li lj bi translated"><strong class="kh ir">了解固定效应回归模型</strong></li><li id="94c8" class="lb lc iq kh b ki ll kl lm ko ln ks lo kw lp la lg lh li lj bi translated"><a class="ae lk" rel="noopener" target="_blank" href="/the-no-nonsense-guide-to-the-random-effects-regression-model-be899ce415a5">随机效应回归模型的实用指南</a></li></ol><h1 id="380c" class="lq lr iq bd ls lt lu lv lw lx ly lz ma jw mb jx mc jz md ka me kc mf kd mg mh bi translated">面板数据入门</h1><p id="a2ac" class="pw-post-body-paragraph kf kg iq kh b ki mi jr kk kl mj ju kn ko mk kq kr ks ml ku kv kw mm ky kz la ij bi translated">面板数据集包含在特定数量的<strong class="kh ir">时间段</strong>内为一个或多个唯一可识别的<strong class="kh ir">单元</strong>收集的数据。单位的例子有动物、人、树、湖、公司和国家。数据面板被称为<strong class="kh ir">平衡</strong>或<strong class="kh ir">不平衡</strong>面板，这取决于是否所有单元都被跟踪了相同数量的时间段。如果在整个研究过程中跟踪同一组单位，它被称为<strong class="kh ir">固定面板</strong>，但是如果在研究过程中单位发生变化，它被称为<strong class="kh ir">旋转面板</strong>。</p><p id="c7b1" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">面板数据集通常来自<strong class="kh ir">纵向研究</strong>。弗雷明汉心脏研究可能是自1948年以来最著名的纵向研究的例子。</p><p id="5121" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在本文中，我们将研究一个真实世界的面板数据集，其中包含7个国家从1992年到2014年的人均GDP年增长率。除了GDP增长数据，该面板还包含每个国家总资本形成的同比增长:</p><figure class="mo mp mq mr gt ms gh gi paragraph-image"><div role="button" tabindex="0" class="mt mu di mv bf mw"><div class="gh gi mn"><img src="../Images/621aedc8a1a98a14c4c7976de2866e36.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*leYcxnKRL1uXIwHD-PrYUw.png"/></div></div><p class="mz na gj gh gi nb nc bd b be z dk translated">a小组数据集(来源:<a class="ae lk" href="https://databank.worldbank.org/metadataglossary/world-development-indicators/series" rel="noopener ugc nofollow" target="_blank">世界发展指标</a>数据<a class="ae lk" href="https://www.worldbank.org/en/about/legal/terms-of-use-for-datasets" rel="noopener ugc nofollow" target="_blank"> CC BY 4.0 license </a>)(图片由作者提供)</p></figure><p id="01cd" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">上述数据集中，<strong class="kh ir">单位</strong>为国家，时间框架为1992年至2014年(<strong class="kh ir"> 23个时间段</strong>，面板数据为<strong class="kh ir">固定</strong>和<strong class="kh ir">平衡</strong>。</p><p id="f363" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">属于一个单位(一个国家)的一组数据点称为<strong class="kh ir">组</strong>。在上面的数据面板中，有七组<strong class="kh ir">。</strong></p><p id="7697" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">假设我们希望调查总资本形成年同比增长对GDP年同比增长的影响。</p><p id="3692" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们的<strong class="kh ir">因变量</strong>或<strong class="kh ir">响应变量</strong> <strong class="kh ir"> <em class="nd"> y </em> </strong>是<em class="nd"> Y-o-Y %的人均GDP增长率</em>。<strong class="kh ir">自变量</strong>或<strong class="kh ir">解释变量</strong> <strong class="kh ir"> <em class="nd"> X </em> </strong>为<em class="nd">年-年资本形成总额增长率</em>。</p><p id="117f" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在符号形式中，人均国内生产总值的年同比增长率<em class="nd">可以表示为总资本形成</em>年同比增长率<em class="nd">的函数，如下所示:</em></p><figure class="mo mp mq mr gt ms gh gi paragraph-image"><div role="button" tabindex="0" class="mt mu di mv bf mw"><div class="gh gi ne"><img src="../Images/579afb9db5ab706beff28c995a990f5a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Q6YHdAVX2_lI9Wzyzab2sQ.png"/></div></div><p class="mz na gj gh gi nb nc bd b be z dk translated">在时间周期t，国家I的GDP增长是国家I在时间周期t的总资本形成增长的函数</p></figure><p id="b95b" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在上面的回归方程中，<em class="nd"> ϵ_i_t </em>是回归的残差，它捕捉到了<em class="nd"> i </em>国家在<em class="nd"> t </em>年期间人均GDP同比增长的方差，这是模型无法“解释”的。</p><p id="cf67" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">让我们创建一个<strong class="kh ir"> <em class="nd"> y </em> </strong>对<strong class="kh ir"> <em class="nd"> X </em> </strong>的散点图，看看数据是什么样子的。</p><p id="f0e3" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们将从导入所有必需的Python包开始，包括我们稍后将用来构建固定效果模型的包。</p><pre class="mo mp mq mr gt nf ng nh ni aw nj bi"><span id="0340" class="nk lr iq ng b gy nl nm l nn no"><strong class="ng ir">import </strong>pandas <strong class="ng ir">as </strong>pd<br/><strong class="ng ir">import </strong>scipy.stats <strong class="ng ir">as </strong>st<br/><strong class="ng ir">import </strong>statsmodels.api <strong class="ng ir">as </strong>sm<br/><strong class="ng ir">import </strong>statsmodels.formula.api <strong class="ng ir">as </strong>smf<br/><strong class="ng ir">from </strong>matplotlib <strong class="ng ir">import </strong>pyplot <strong class="ng ir">as </strong>plt<br/><strong class="ng ir">import </strong>seaborn <strong class="ng ir">as </strong>sns</span></pre><p id="7e0c" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">让我们将数据集加载到一个<a class="ae lk" href="https://pandas.pydata.org/" rel="noopener ugc nofollow" target="_blank">熊猫</a>数据框中。该数据集可从这里 下载<a class="ae lk" href="https://gist.github.com/sachinsdate/c40651e9e4bc13a696780462209f1992" rel="noopener ugc nofollow" target="_blank"> <strong class="kh ir">。</strong></a></p><pre class="mo mp mq mr gt nf ng nh ni aw nj bi"><span id="3180" class="nk lr iq ng b gy nl nm l nn no">df_panel = pd.<strong class="ng ir">read_csv</strong>('wb_data_panel_2ind_7units_1992_2014.csv', <strong class="ng ir">header</strong>=0)</span></pre><p id="8b65" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们将使用<a class="ae lk" href="https://seaborn.pydata.org/" rel="noopener ugc nofollow" target="_blank"> Seaborn </a>来绘制所有时间段和所有国家的人均GDP增长与每个国家总资本形成增长的关系图:</p><pre class="mo mp mq mr gt nf ng nh ni aw nj bi"><span id="b29d" class="nk lr iq ng b gy nl nm l nn no">colors = [<strong class="ng ir">'blue'</strong>, <strong class="ng ir">'red'</strong>, <strong class="ng ir">'orange'</strong>, <strong class="ng ir">'lime'</strong>, <strong class="ng ir">'yellow'</strong>, <strong class="ng ir">'cyan'</strong>, <strong class="ng ir">'violet'</strong>]</span><span id="e77d" class="nk lr iq ng b gy np nm l nn no">sns.<strong class="ng ir">scatterplot</strong>(<strong class="ng ir">x</strong>=df_panel[<strong class="ng ir">'</strong>GCF_GWTH_PCNT<strong class="ng ir">'</strong>], <br/>                <strong class="ng ir">y</strong>=df_panel[<strong class="ng ir">'</strong>GDP_PCAP_GWTH_PCNT<strong class="ng ir">'</strong>],<br/>                <strong class="ng ir">hue</strong>=df_panel[<strong class="ng ir">'</strong>COUNTRY<strong class="ng ir">'</strong>],<br/>                <strong class="ng ir">palette</strong>=colors).<br/>                <strong class="ng ir">set</strong>(<strong class="ng ir">title</strong>='Y-o-Y % Change in per-capita GDP versus Y-o-Y % Change in Gross capital formation')</span><span id="dee6" class="nk lr iq ng b gy np nm l nn no">plt.<strong class="ng ir">show</strong>()</span></pre><p id="9c80" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们看到下面的情节:</p><figure class="mo mp mq mr gt ms gh gi paragraph-image"><div role="button" tabindex="0" class="mt mu di mv bf mw"><div class="gh gi nq"><img src="../Images/41eb58f129c90b118ef8a02c02f00c12.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wbLM6t3sEfdbdPMaW5_JJg.png"/></div></div><p class="mz na gj gh gi nb nc bd b be z dk translated">国内生产总值同比增长%与总资本形成同比增长%的国家散点图(图片由作者提供)</p></figure><p id="f6b0" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">人均国内生产总值的同比增长似乎与总资本形成的同比增长呈线性相关，因此，我们将为每个单位(国家)的回归模型假定以下线性函数形式<em class="nd"> i </em>:</p><figure class="mo mp mq mr gt ms gh gi paragraph-image"><div class="gh gi nr"><img src="../Images/d1e78bfd08ee6b1eac1c6d43c445f2e4.png" data-original-src="https://miro.medium.com/v2/resize:fit:524/format:webp/1*xQkDykmvoVveWgG5GtnnTA.png"/></div><p class="mz na gj gh gi nb nc bd b be z dk translated">国家I的线性模型(图片由作者提供)</p></figure><p id="9062" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">上式中，所有变量都是某维的矩阵。假设<em class="nd"> n </em>个单位，<em class="nd"> k </em>个回归变量每单位，<em class="nd"> T </em>个时间段每单位，上式中每个矩阵变量的维数如下:</p><ul class=""><li id="a14d" class="lb lc iq kh b ki kj kl km ko ld ks le kw lf la ns lh li lj bi translated"><strong class="kh ir"> <em class="nd"> y </em> </strong> <em class="nd"> _i </em>为单位<em class="nd"> i </em>的响应变量(人均GDP增长)。它是一个大小为<em class="nd">【T×1】</em>的列向量。</li><li id="1cef" class="lb lc iq kh b ki ll kl lm ko ln ks lo kw lp la ns lh li lj bi translated"><strong class="kh ir"><em class="nd">X</em></strong><em class="nd">_ I</em>是大小<em class="nd">【T X k】</em>的回归变量矩阵。</li><li id="3713" class="lb lc iq kh b ki ll kl lm ko ln ks lo kw lp la ns lh li lj bi translated"><strong class="kh ir"><em class="nd">β</em></strong><em class="nd">_ I</em>是大小为<em class="nd">【k×1】</em>的系数矩阵，包含<strong class="kh ir"><em class="nd">×T39】<em class="nd">_ I .</em>中<em class="nd"> k </em>回归变量系数的<strong class="kh ir">总体值</strong></em></strong></li><li id="d4b5" class="lb lc iq kh b ki ll kl lm ko ln ks lo kw lp la ns lh li lj bi translated"><strong class="kh ir"><em class="nd">ϵ</em></strong><em class="nd">_ I</em>是大小为<em class="nd">【t×1】</em>的列向量，包含误差项，每个<em class="nd"> T </em>时间段一个误差。</li></ul><p id="4715" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">以下是单元<em class="nd"> i </em>的上述方程的矩阵形式:</p><figure class="mo mp mq mr gt ms gh gi paragraph-image"><div role="button" tabindex="0" class="mt mu di mv bf mw"><div class="gh gi nt"><img src="../Images/fcda214ab06da0ecb094b6a315178a98.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*tMqCLM16TdllAGj_zxHiDg.png"/></div></div><p class="mz na gj gh gi nb nc bd b be z dk translated">国家I的线性回归模型的矩阵形式(图片由作者提供)</p></figure><p id="1887" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在我们的例子中，<em class="nd"> T=23，k=1 </em>和<em class="nd"> n=7 </em>。</p><p id="415c" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">让我们把注意力集中在模型的误差项上，<strong class="kh ir"><em class="nd"/></strong><em class="nd">_ I</em>。以下是错误的重要来源:</p><ol class=""><li id="dbbb" class="lb lc iq kh b ki kj kl km ko ld ks le kw lf la lg lh li lj bi translated">由于<strong class="kh ir">随机环境噪声</strong>或测量仪器引入误差。M <strong class="kh ir">测量误差</strong>由实验者引入，因为他们不正确地使用测量仪器。</li><li id="6601" class="lb lc iq kh b ki ll kl lm ko ln ks lo kw lp la lg lh li lj bi translated">由于<strong class="kh ir">省略了可观察和可测量的解释变量</strong>而引入了误差。这些变量本来能够“解释”响应变量<strong class="kh ir"><em class="nd"/></strong>y中的一些方差，因此，它们从<strong class="kh ir"><em class="nd"/></strong>矩阵中的省略会导致无法解释的方差“泄漏”到回归模型的误差项中。</li><li id="be4c" class="lb lc iq kh b ki ll kl lm ko ln ks lo kw lp la lg lh li lj bi translated">由于<strong class="kh ir">不正确的函数形式</strong>或<strong class="kh ir">缺少某些回归变量或响应变量的变量转换</strong>而引入误差。例如，假设我们需要回归总资本形成变化的GDP变化的对数，但我们未能记录转换响应变量。</li><li id="fcd4" class="lb lc iq kh b ki ll kl lm ko ln ks lo kw lp la lg lh li lj bi translated">总有可能我们对回归模型的<strong class="kh ir">选择是错误的</strong>。例如，如果正确的模型碰巧是非线性最小二乘模型，但我们使用OLS线性回归模型，这将导致额外的回归误差。</li><li id="c0a4" class="lb lc iq kh b ki ll kl lm ko ln ks lo kw lp la lg lh li lj bi translated">最后，由于<strong class="kh ir">遗漏了<em class="nd">不可测</em>T5的变量，会引入误差。这些变量代表了被测单位的内在质量。对于以国家为单位的“我们的国家”数据面板，特定单位变量的一个示例可以是在不同环境条件下促进或抑制GDP增长的国家的<strong class="kh ir">社会经济结构</strong>，以及该国数百年来演变的企业和政府决策的<strong class="kh ir">文化方面</strong>。所有这些因素都会影响GDP的同比变化，但无法直接测量。然而，从回归矩阵<strong class="kh ir"> <em class="nd"> X </em> </strong>中省略这些因素具有与(2)中相同的效果，即，它们的效果泄漏到在误差项中观察到的附加方差中。</strong></li></ol><p id="3394" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">记住上面的注释，我们可以将国家<em class="nd"> i </em>的线性回归模型的一般形式表示如下:</p><figure class="mo mp mq mr gt ms gh gi paragraph-image"><div class="gh gi nu"><img src="../Images/e2784d90f41499db8c5b34cf984a6804.png" data-original-src="https://miro.medium.com/v2/resize:fit:988/format:webp/1*XKT6GST0BBlhkS7-5mPxkw.png"/></div><p class="mz na gj gh gi nb nc bd b be z dk translated">国家I的线性模型的一般形式(图片由作者提供)</p></figure><p id="6bf8" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在上面的等式中:</p><ul class=""><li id="4fcd" class="lb lc iq kh b ki kj kl km ko ld ks le kw lf la ns lh li lj bi translated"><strong class="kh ir"><em class="nd">y</em></strong><em class="nd">_ I</em>是一个大小为<em class="nd">【T×1】</em>的矩阵，包含国家<em class="nd"> i </em>的<em class="nd"> T </em>观察值。</li><li id="9a12" class="lb lc iq kh b ki ll kl lm ko ln ks lo kw lp la ns lh li lj bi translated"><strong class="kh ir"><em class="nd">X</em></strong><em class="nd">_ I</em>是一个大小为<em class="nd">【T X k】</em>的矩阵，包含<em class="nd"> k </em>回归变量的值，所有这些值都是可观察的和相关的。</li><li id="36f6" class="lb lc iq kh b ki ll kl lm ko ln ks lo kw lp la ns lh li lj bi translated"><strong class="kh ir"><em class="nd">β</em></strong><em class="nd">_ I</em>是一个大小为<em class="nd">【k x 1】</em>的矩阵，包含<em class="nd"> k </em>回归变量的回归系数的总体(真)值。</li><li id="8386" class="lb lc iq kh b ki ll kl lm ko ln ks lo kw lp la ns lh li lj bi translated"><strong class="kh ir"><em class="nd">Z</em></strong><em class="nd">_ I</em>是一个大小为<em class="nd">【T x m】</em>的矩阵，包含了所有变量的(理论)值(数量为<em class="nd"> m </em>)和无法直接观察到的效应。</li><li id="cc40" class="lb lc iq kh b ki ll kl lm ko ln ks lo kw lp la ns lh li lj bi translated"><strong class="kh ir"><em class="nd">γ</em></strong><em class="nd">_ I</em>是一个大小为<em class="nd">【m x 1】</em>的矩阵，包含<em class="nd"> m </em>个不可观察变量的回归系数的(理论)总体值。</li><li id="8f6c" class="lb lc iq kh b ki ll kl lm ko ln ks lo kw lp la ns lh li lj bi translated"><strong class="kh ir"><em class="nd">ε</em></strong><em class="nd">_ I</em>是一个大小为<em class="nd">【T×1】</em>的矩阵，包含与国家<em class="nd"> i </em>的<em class="nd"> T </em>观测值相对应的误差。</li></ul><p id="ded9" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">下面是矩阵乘法和加法的样子:</p><figure class="mo mp mq mr gt ms gh gi paragraph-image"><div role="button" tabindex="0" class="mt mu di mv bf mw"><div class="gh gi nv"><img src="../Images/caeea183e3bbf96c09399c0530cb88b2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*61SuFzhAhfzXJr3lw_wzBw.png"/></div></div><p class="mz na gj gh gi nb nc bd b be z dk translated">矩阵格式的国家I线性模型的一般形式(图片由作者提供)</p></figure><p id="a215" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">所有特定于单元的效应都被假设为由术语<strong class="kh ir"><em class="nd">Z</em></strong><em class="nd">_ I</em><strong class="kh ir"><em class="nd">γ</em></strong><em class="nd">_ I .</em>矩阵<strong class="kh ir"><em class="nd">Z</em></strong><em class="nd">_ I</em>及其系数向量<strong class="kh ir"><em class="nd">γ</em></strong><em class="nd">_ I</em>是纯理论术语，因为它们所代表的内容实际上无法观察和测量。</p><p id="9c61" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们的目标是找到一种方法来估计<strong class="kh ir"><em class="nd"/></strong><em class="nd">_ I</em>对<strong class="kh ir"><em class="nd"/></strong>y<em class="nd"/><em class="nd">_ I</em><em class="nd">γ</em><em class="nd">_ I</em>项对<em class="nd">的影响</em></p><p id="e23f" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">为了简化估算，我们将把所有国家特有的不可观测效应的影响合并到一个变量中，对于国家<em class="nd"> i </em>，我们称之为<strong class="kh ir"><em class="nd">z</em></strong><em class="nd">_ I</em>。<strong class="kh ir"><em class="nd">z</em></strong><em class="nd">_ I</em>是一个大小为<em class="nd">【T×1】</em>的矩阵，因为它只包含一个变量<em class="nd"> z_i </em>并且它有<em class="nd"> T </em>行对应于<em class="nd">T</em>z _ I对<em class="nd"> T </em>的“测量”数</p><p id="4f2b" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">由于<strong class="kh ir"><em class="nd">z</em></strong><em class="nd">_ I</em>不是直接可观测的，为了衡量<strong class="kh ir"> <em class="nd"> z_i </em> </strong>的效果，我们需要将省略<strong class="kh ir"> <em class="nd"> z_i </em> </strong>的效果形式化。幸运的是，在统计学中有一个被充分研究过的概念叫做<strong class="kh ir">省略变量偏差</strong>，我们可以用它来达到这个目的。</p><h2 id="abea" class="nk lr iq bd ls nw nx dn lw ny nz dp ma ko oa ob mc ks oc od me kw oe of mg og bi translated">省略可变偏差</h2><p id="2107" class="pw-post-body-paragraph kf kg iq kh b ki mi jr kk kl mj ju kn ko mk kq kr ks ml ku kv kw mm ky kz la ij bi translated">在面板数据集上训练模型时，如果我们从模型中遗漏掉<strong class="kh ir"><em class="nd"/></strong><em class="nd">_ I</em>，就会造成所谓的<strong class="kh ir">遗漏变量偏差</strong>。可以看出，如果在不考虑<strong class="kh ir"> <em class="nd"> z_i </em> </strong>的情况下估计回归模型，那么系数<strong class="kh ir"><em class="nd"/></strong><em class="nd">_ I</em>的估计值<strong class="kh ir"><em class="nd">β</em></strong><em class="nd">_ cap _ I</em>会有如下偏差:</p><figure class="mo mp mq mr gt ms gh gi paragraph-image"><div role="button" tabindex="0" class="mt mu di mv bf mw"><div class="gh gi oh"><img src="../Images/d058043b4fcbd04dc98f8fa2310de796.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*UVJbdB0b0ZJzHeymGR023g.png"/></div></div><p class="mz na gj gh gi nb nc bd b be z dk translated">省略变量偏差:由于变量 <strong class="bd oi"> <em class="oj"> z </em> </strong> <em class="oj"> _i(图片由作者提供)</em>的省略而在<strong class="bd oi"> <em class="oj"> β </em> </strong> <em class="oj"> _i的估计中引入的偏差</em></p></figure><p id="2526" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">可以看出，估计值<strong class="kh ir"><em class="nd">β</em></strong><em class="nd">_ cap _ I</em>中引入的偏差与省略变量<strong class="kh ir"><em class="nd">z</em></strong><em class="nd">_ I</em>和解释变量<strong class="kh ir"><em class="nd">X</em></strong><em class="nd">_ I</em>之间的协方差成正比。</p><p id="c790" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">上述等式建议了一种方法，用于根据上述等式中的协方差项是否为零，即不可观察效应<strong class="kh ir"> <em class="nd"> z_i </em>是否与回归变量</strong>相关，来构建以下两种模型—<strong class="kh ir">固定效应模型</strong>和<a class="ae lk" rel="noopener" target="_blank" href="/the-no-nonsense-guide-to-the-random-effects-regression-model-be899ce415a5"> <strong class="kh ir">随机效应模型</strong> </a>。</p><p id="9c87" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在本文的其余部分，我们将关注固定效果模型，而在我下周的文章中，我将解释如何构建和训练<a class="ae lk" rel="noopener" target="_blank" href="/the-no-nonsense-guide-to-the-random-effects-regression-model-be899ce415a5">随机效果模型</a>。</p><h1 id="440a" class="lq lr iq bd ls lt lu lv lw lx ly lz ma jw mb jx mc jz md ka me kc mf kd mg mh bi translated">固定效应回归模型</h1><p id="d5c5" class="pw-post-body-paragraph kf kg iq kh b ki mi jr kk kl mj ju kn ko mk kq kr ks ml ku kv kw mm ky kz la ij bi translated">在这个模型中，我们假设<strong class="kh ir">不可观察的个体效应<em class="nd"> z_i </em>与回归变量</strong>相关。实际上就是说上式中的<em class="nd">协方差(</em><strong class="kh ir"><em class="nd">X</em></strong><em class="nd">_ I、</em><strong class="kh ir"><em class="nd">z</em></strong><em class="nd">_ I)</em>非零。</p><p id="3464" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在许多面板数据研究中，这种关于相关性的假设是合理的。例如，在股票交易场景中，交易者的交易敏锐度或获利的“诀窍”是不可测量的，并且是个人独有的。这种敏锐或诀窍可以被认为随着可测量的因素如年龄和教育水平而变化。有人可能会(正确或错误地)提出，获得高等学位的过程增强了一个人在执行某些任务时的内在敏锐度或诀窍。</p><p id="9873" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在固定效应模型中，我们还假设由于忽略单位特定因素而引入的<strong class="kh ir">偏差是群体特定的。</strong></p><p id="5539" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">为了补偿这种偏差，<strong class="kh ir">我们将在模型中引入一个特定于组的截距，称为<em class="nd">c</em></strong><em class="nd">_ I</em><strong class="kh ir">。</strong> <em class="nd">假设c_i </em>的作用方向与省略变量偏差的作用方向相反(在矢量意义上)。</p><p id="2436" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">有了这两个假设，我们将固定效应回归模型的等式表示如下:</p><figure class="mo mp mq mr gt ms gh gi paragraph-image"><div class="gh gi ok"><img src="../Images/682927a025c0480533911208b86ade86.png" data-original-src="https://miro.medium.com/v2/resize:fit:900/format:webp/1*_i5ksOqCOVh2UFJw59m9zg.png"/></div><p class="mz na gj gh gi nb nc bd b be z dk translated">固定效应回归模型(图片由作者提供)</p></figure><p id="586f" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">下面是矩阵形式:</p><figure class="mo mp mq mr gt ms gh gi paragraph-image"><div role="button" tabindex="0" class="mt mu di mv bf mw"><div class="gh gi ol"><img src="../Images/5e83774b899f9c4684add6b142466b71.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Z62G5V6M4ST58KFyc8VWxg.png"/></div></div><p class="mz na gj gh gi nb nc bd b be z dk translated">固定效应回归模型(图片由作者提供)</p></figure><p id="594c" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">请注意，我们已经用代表不可观察因素影响的<strong class="kh ir"><em class="nd">c</em></strong><em class="nd">_ I</em>替换了前面等式中的<strong class="kh ir"><em class="nd">z</em></strong><em class="nd">_ I</em><strong class="kh ir"><em class="nd">γ</em></strong><em class="nd">_ I</em>项，这是一个大小为<em class="nd">[T×1】的单位特定矩阵。</em>对于给定的单位<em class="nd"> i </em>，该矩阵的每个元素具有相同的值<em class="nd"> c_i </em>并且<em class="nd"> c_i被假定为在所有时间段</em>都是恒定的。</p><p id="f0a2" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">对于特定时间段<em class="nd"> t </em>，固定效果模型的等式可以表示如下:</p><figure class="mo mp mq mr gt ms gh gi paragraph-image"><div class="gh gi om"><img src="../Images/6c41d7d4903d25abeb3a592f9b7652b7.png" data-original-src="https://miro.medium.com/v2/resize:fit:958/format:webp/1*IUp4sd42am1gN7hxwxhaPw.png"/></div><p class="mz na gj gh gi nb nc bd b be z dk translated">时间周期t时单位I的固定效应回归模型(图片由作者提供)</p></figure><p id="f2f3" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这是矩阵形式:</p><figure class="mo mp mq mr gt ms gh gi paragraph-image"><div class="gh gi on"><img src="../Images/4dd4854e51c12dcda7fc8880ad2fee22.png" data-original-src="https://miro.medium.com/v2/resize:fit:1300/format:webp/1*JVl6jOz61E5TfnkmtUz9rQ.png"/></div><p class="mz na gj gh gi nb nc bd b be z dk translated">时间周期t时单位I的固定效应回归模型(图片由作者提供)</p></figure><p id="26d3" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在这种形式中，<em class="nd"> y_i_t </em>、<em class="nd"> c_i </em>和<em class="nd"> ϵ_i_t </em>是标量，因为它们属于在时间<em class="nd"> t </em>的特定观察，并且<strong class="kh ir"><em class="nd">x</em></strong><em class="nd">_ I _ t</em>是在<strong class="kh ir"> <em class="nd">中大小为<em class="nd">【1 x k】</em>的第<em class="nd"> t个</em>行向量</em></strong></p><h2 id="2d21" class="nk lr iq bd ls nw nx dn lw ny nz dp ma ko oa ob mc ks oc od me kw oe of mg og bi translated">单位效应c_i的估计c_cap_i是随机变量</h2><p id="564f" class="pw-post-body-paragraph kf kg iq kh b ki mi jr kk kl mj ju kn ko mk kq kr ks ml ku kv kw mm ky kz la ij bi translated">请注意，<em class="nd"> c_i </em>不携带时间下标<em class="nd"> t </em>，因为它对于给定国家的所有时间段<em class="nd"> T </em>都是相同的。说到这里，国别效应<em class="nd"> c_i </em>的<strong class="kh ir">估计值</strong> <em class="nd"> c_cap_i </em>和估计系数矩阵<strong class="kh ir"><em class="nd"/></strong><em class="nd">_ cap _ I</em>中的任何一个系数一样，都是一个随机变量。要了解原因，想象一下固定效应模型被训练了数百次，每次都是在面板数据集的一个不同的、随机选择的(但连续的)子集上。在每次训练运行之后，所有估计的系数<strong class="kh ir"><em class="nd">β_ cap</em></strong><em class="nd">_ I</em>和估计的单位特定效应<em class="nd"> c_cap_i </em>将获得稍微不同的一组值。如果我们从不同的训练运行中绘制所有这些c_i的估计值，它们的频率分布将具有某种形状，具有某个平均值和某个方差。例如，我们可以推断它们正态分布在<strong class="kh ir"><em class="nd"/></strong><em class="nd">I</em>和<em class="nd"> c_i </em>中各个系数的真实总体水平值周围。因此，估计的单位特定影响<em class="nd"> c_cap_i </em>表现得像具有某种概率分布的随机变量。</p><p id="f44a" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在固定效应模型中，我们假设所有单位特定效应的估计值具有相同的恒定方差<em class="nd"> σ。</em>假设正态分布<em class="nd"> c_cap_i也很方便(尽管不是必需的)</em>因此，我们有:</p><p id="345b" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><em class="nd"> c_cap_i ~ N(c_i，σ ) </em></p><p id="1cd6" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">下图说明了假设面板数据集中三个单位的<em class="nd"> c_i </em>的概率分布:</p><figure class="mo mp mq mr gt ms gh gi paragraph-image"><div role="button" tabindex="0" class="mt mu di mv bf mw"><div class="gh gi oo"><img src="../Images/fb3e05e5ce9b3a44afdf599f74e18e45.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ddtalc-ueg5rg0LoMJIHhg.png"/></div></div><p class="mz na gj gh gi nb nc bd b be z dk translated">面板数据集中三个不同单位的单位特异性效应c_i的概率分布(图片由作者提供)</p></figure><h2 id="9e6b" class="nk lr iq bd ls nw nx dn lw ny nz dp ma ko oa ob mc ks oc od me kw oe of mg og bi translated">如果还有一些可观测变量被省略了呢？</h2><p id="4f28" class="pw-post-body-paragraph kf kg iq kh b ki mi jr kk kl mj ju kn ko mk kq kr ks ml ku kv kw mm ky kz la ij bi translated">实际中，<strong class="kh ir"> <em class="nd"> X </em> </strong>矩阵往往是不完整的。出于各种原因，人们可能从模型中遗漏了一个或多个可观察变量。也许测量一个变量w.r.t .的成本及其对<strong class="kh ir"> <em class="nd"> y </em> </strong>的假定影响是令人望而却步的。也许不测量某些变量有道德上的原因。或者一个变量可能被遗漏掉了,<strong class="kh ir"> <em class="nd"> X </em> </strong>仅仅是因为实验者的疏忽。</p><p id="4328" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在这种情况下，它们的省略将使拟合模型<em class="nd">的所有参数估计产生偏差，包括所有单元</em>的单元特定因子c_i的估计值。</p><h1 id="93e3" class="lq lr iq bd ls lt lu lv lw lx ly lz ma jw mb jx mc jz md ka me kc mf kd mg mh bi translated">估计固定效应回归模型</h1><p id="d0e6" class="pw-post-body-paragraph kf kg iq kh b ki mi jr kk kl mj ju kn ko mk kq kr ks ml ku kv kw mm ky kz la ij bi translated">固定效应模型的估计包括估计系数<strong class="kh ir"><em class="nd">【β_</em></strong><em class="nd">I</em>和每个单元<em class="nd"> i </em>的单元特定效应<em class="nd"> c_i </em>。</p><p id="19b7" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在实践中，我们通过添加对应于<em class="nd"> n </em>个单元或组的单元特定虚拟变量<em class="nd"> d_1，d_2，…，d_n </em>，将所有单元的模型汇集成一个通用回归模型，如下所示:</p><figure class="mo mp mq mr gt ms gh gi paragraph-image"><div class="gh gi op"><img src="../Images/2522d4b5d5d06889529fce99f963fad9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1062/format:webp/1*iZMFDvvfxDwC03yn1urqaQ.png"/></div><p class="mz na gj gh gi nb nc bd b be z dk translated">包含虚拟变量的固定效应模型(图片由作者提供)</p></figure><p id="dedc" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在上面的等式中:</p><ul class=""><li id="6e1f" class="lb lc iq kh b ki kj kl km ko ld ks le kw lf la ns lh li lj bi translated"><em class="nd"> y_i_t </em>是一个标量，包含在时间<em class="nd"> t. </em>对单元(国家)<em class="nd"> i </em>的特定观察</li><li id="3efc" class="lb lc iq kh b ki ll kl lm ko ln ks lo kw lp la ns lh li lj bi translated"><strong class="kh ir"><em class="nd">x</em></strong><em class="nd">_ I _ t</em>是一个大小为<em class="nd">【1 x k】</em>的行向量，包含时间<em class="nd"> t </em>时单元<em class="nd"> i </em>的所有<em class="nd"> k </em>回归变量的值。</li><li id="e859" class="lb lc iq kh b ki ll kl lm ko ln ks lo kw lp la ns lh li lj bi translated"><strong class="kh ir"><em class="nd">β</em></strong><em class="nd">_ I</em>是<em class="nd">【k x 1】</em>的列向量，包含<em class="nd"> k </em>回归变量的回归系数的总体(真)值。</li><li id="6025" class="lb lc iq kh b ki ll kl lm ko ln ks lo kw lp la ns lh li lj bi translated"><strong class="kh ir"><em class="nd">d</em></strong><em class="nd">_ I _ t</em>是一个大小为<em class="nd">【1 x n】</em>的行向量，包含一个热编码的虚拟变量<em class="nd"> d_i_j_t </em>，其中<em class="nd"> j </em>从1到<em class="nd"> n </em> —数据面板中的每个<em class="nd"> n </em>单元一个虚拟变量。例如:<strong class="kh ir"><em class="nd">d</em></strong><em class="nd">=[0 1 0 0 0 0 0]</em>是单元#2的虚拟矢量。其思想是当<em class="nd"> j=i </em>时，虚拟向量的第<em class="nd"> j个</em>元素应该是1，否则应该是0。</li><li id="ac12" class="lb lc iq kh b ki ll kl lm ko ln ks lo kw lp la ns lh li lj bi translated"><strong class="kh ir"><em class="nd">c</em></strong><em class="nd">_ I</em>是一个大小为<em class="nd">【n×1】</em>的列向量，包含与<em class="nd"> n </em>个单位相关联的单位特定效果的总体值。</li><li id="988b" class="lb lc iq kh b ki ll kl lm ko ln ks lo kw lp la ns lh li lj bi translated"><em class="nd"> ϵ_i_t </em>是一个标量，包含单元<em class="nd"> i </em>在时间<em class="nd"> t </em>的回归误差项。</li></ul><figure class="mo mp mq mr gt ms gh gi paragraph-image"><div role="button" tabindex="0" class="mt mu di mv bf mw"><div class="gh gi oq"><img src="../Images/02aec5f900bc5d3cb1c6478f00600d46.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*IXa8Qfz4cxRMmm9vhp_cBA.png"/></div></div><p class="mz na gj gh gi nb nc bd b be z dk translated">用矩阵符号表示的固定效果模型(图片由作者提供)</p></figure><p id="d908" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">上述模型是一个线性模型，可以很容易地使用OLS回归技术进行估计。这种带有虚拟变量的线性回归模型称为<strong class="kh ir">带有虚拟变量的最小二乘</strong>(简称<strong class="kh ir"> LSDV </strong>)。</p><p id="8e63" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">模型培训包括以下内容:</p><ol class=""><li id="08d2" class="lb lc iq kh b ki kj kl km ko ld ks le kw lf la lg lh li lj bi translated">将单位特定矩阵<strong class="kh ir"><em class="nd">y</em></strong><em class="nd">_ I</em><strong class="kh ir"><em class="nd">，X </em> </strong> <em class="nd"> _i </em> <strong class="kh ir"> <em class="nd">，β</em></strong><em class="nd">_ I</em><strong class="kh ir"><em class="nd">，d</em></strong><em class="nd">_ I</em><strong class="kh ir"><em class="nd">，c</em></strong><em class="nd">_ I</em><strong class="kh ir"><em class="nd"/></strong></li><li id="67ca" class="lb lc iq kh b ki ll kl lm ko ln ks lo kw lp la lg lh li lj bi translated">训练合并的模型以生成对应于<em class="nd"> k </em>回归变量的<em class="nd">【k×1】</em>大小的系数向量<strong class="kh ir"><em class="nd"/></strong><em class="nd"/>的估计，以及数据中包含的<em class="nd"> n </em>单位的<em class="nd">【n×1】</em>大小的单位特定效应向量<strong class="kh ir"><em class="nd"/></strong><em class="nd"/>的估计</li></ol><h2 id="d7aa" class="nk lr iq bd ls nw nx dn lw ny nz dp ma ko oa ob mc ks oc od me kw oe of mg og bi translated">公共系数假设</h2><p id="67f1" class="pw-post-body-paragraph kf kg iq kh b ki mi jr kk kl mj ju kn ko mk kq kr ks ml ku kv kw mm ky kz la ij bi translated">在汇集模型中，我们做了一个隐含的重要假设，即<em class="nd">估计系数</em><strong class="kh ir"><em class="nd">β</em></strong><em class="nd">_ cap对于所有n个单位</em>是共同的。<a class="ae lk" href="https://en.wikipedia.org/wiki/Chow_test" rel="noopener ugc nofollow" target="_blank"> Chow测试</a>可以用来测试这个假设(虽然我们在这里不会深入探讨)。</p><p id="e668" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">对于世界银行国家数据面板，可集合性假设的意思是，每个国家总资本形成变化(GCF_GWTH_PCNT)的斜率(<em class="nd"> β </em> <strong class="kh ir"> <em class="nd"> ) </em> </strong>的人口值是相同的。换句话说，GCF_GWTH_PCNT的单位变化预计会转化为每个国家GDP的相同变化量。因此，正是国别效应<em class="nd"> c_i </em>和误差项<em class="nd"> ϵ_i_t </em>有可能导致不同国家的总GDP百分比变化<em class="nd">因GCF_GWTH_PCNT中的每个单位变化而不同。</em></p><p id="8ad2" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这种行为是共同系数假设的直接结果，它恰好是固定效应模型的一个重要但不明显的特征。</p><p id="5eb3" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在我们深入本文的教程部分之前，这里是关于FE模型需要记住的最后一件事:</p><p id="34cd" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">通过训练固定效应回归模型生成的估计值仅适用于面板数据集中的单位。来自固定效应模型的<strong class="kh ir">估计值不会将</strong>推广到群体中具有相同性质的其他单位。</p><p id="a36e" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这对国家数据面板来说意味着<em class="nd"> β </em>和<em class="nd"> c_i </em>的估计值仅适用于数据面板中的7个国家。人们不应该通过训练数据集上的有限元模型来概括特定国家的影响<em class="nd"> c_cap_i </em>，以任何方式表示数据集中没有表示的任何国家的特定国家影响。</p><p id="4a56" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果我们想让特定单位的效应延续到相似单位的群体，随机效应模型(下周讨论)可能更合适。</p></div><div class="ab cl or os hu ot" role="separator"><span class="ou bw bk ov ow ox"/><span class="ou bw bk ov ow ox"/><span class="ou bw bk ov ow"/></div><div class="ij ik il im in"><h1 id="5bac" class="lq lr iq bd ls lt oy lv lw lx oz lz ma jw pa jx mc jz pb ka me kc pc kd mg mh bi translated">如何使用Python和Statsmodels构建固定效应回归模型</h1><p id="aca5" class="pw-post-body-paragraph kf kg iq kh b ki mi jr kk kl mj ju kn ko mk kq kr ks ml ku kv kw mm ky kz la ij bi translated">让我们为世界银行数据面板建立和训练一个固定效应模型。</p><p id="8f81" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们将继续使用文章开头的熊猫数据框架。我们将在展平的面板数据集上构建和训练有限元模型，如下所示:</p><figure class="mo mp mq mr gt ms gh gi paragraph-image"><div class="gh gi pd"><img src="../Images/7a9e87e347813bcbd3091049adde283b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1270/format:webp/1*DwVM13yvy_0hyKzFLW0t-Q.png"/></div><p class="mz na gj gh gi nb nc bd b be z dk translated">展平面板数据(作者提供的图片)</p></figure><p id="abfe" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">请注意，在这个扁平化的版本中，有一个单位(国家)列和一个时间段(年)列。</p><p id="3270" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">打印熊猫数据帧揭示了这种结构:</p><figure class="mo mp mq mr gt ms gh gi paragraph-image"><div role="button" tabindex="0" class="mt mu di mv bf mw"><div class="gh gi pe"><img src="../Images/4c900b209f866a44f9ffd4fcdea79885.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ojfxEyCiIsOQylVaMfkoaA.png"/></div></div><p class="mz na gj gh gi nb nc bd b be z dk translated">熊猫数据框显示了世界银行数据面板的前30行</p></figure><p id="6163" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">让我们创建特定于国家的虚拟变量:</p><pre class="mo mp mq mr gt nf ng nh ni aw nj bi"><span id="2f31" class="nk lr iq ng b gy nl nm l nn no">unit_col_name=<strong class="ng ir">'COUNTRY'<br/></strong>time_period_col_name=<strong class="ng ir">'YEAR'<br/><br/><em class="nd">#Create the dummy variables, one for each country<br/></em></strong>df_dummies = pd.<strong class="ng ir">get_dummies</strong>(df_panel[unit_col_name])</span></pre><p id="a566" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">将假人数据框连接到面板数据集:</p><pre class="mo mp mq mr gt nf ng nh ni aw nj bi"><span id="5dc7" class="nk lr iq ng b gy nl nm l nn no">df_panel_with_dummies = df_panel.<strong class="ng ir">join</strong>(df_dummies)</span></pre><p id="d8eb" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">下面是带有虚拟对象的数据面板的样子:</p><figure class="mo mp mq mr gt ms gh gi paragraph-image"><div role="button" tabindex="0" class="mt mu di mv bf mw"><div class="gh gi pf"><img src="../Images/bc5f1dbd980079cd00c5ac0799f3d1d9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-o4STpFCVESDW8IathA2ew.png"/></div></div><p class="mz na gj gh gi nb nc bd b be z dk translated">带有特定国家虚拟变量的数据面板(图片由作者提供)</p></figure><p id="5a5c" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">定义<strong class="kh ir"> <em class="nd"> y </em> </strong>和<strong class="kh ir"> <em class="nd"> X </em> </strong>变量名:</p><pre class="mo mp mq mr gt nf ng nh ni aw nj bi"><span id="c1be" class="nk lr iq ng b gy nl nm l nn no">y_var_name = <strong class="ng ir">'GDP_PCAP_GWTH_PCNT'<br/></strong>X_var_names = [<strong class="ng ir">'GCF_GWTH_PCNT'</strong>]</span></pre><p id="ccb3" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">定义感兴趣的单位(国家):</p><pre class="mo mp mq mr gt nf ng nh ni aw nj bi"><span id="99db" class="nk lr iq ng b gy nl nm l nn no">unit_names = [<strong class="ng ir">'Belgium'</strong>, <strong class="ng ir">'CzechRepublic'</strong>, <strong class="ng ir">'France'</strong>, <strong class="ng ir">'Ireland'</strong>, <strong class="ng ir">'Portugal'</strong>, <strong class="ng ir">'UK'</strong>, <strong class="ng ir">'USA'</strong>]</span><span id="a199" class="nk lr iq ng b gy np nm l nn no">unit_names.sort()</span></pre><p id="709b" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">构建回归方程。请注意，我们遗漏了一个虚拟变量，以避免7个虚拟变量之间的完全<a class="ae lk" href="https://en.wikipedia.org/wiki/Multicollinearity" rel="noopener ugc nofollow" target="_blank">多重共线性</a>。回归模型的截距将保存忽略的美国虚拟变量的系数值。</p><pre class="mo mp mq mr gt nf ng nh ni aw nj bi"><span id="e6d7" class="nk lr iq ng b gy nl nm l nn no">lsdv_expr = y_var_name + <strong class="ng ir">' ~ '<br/></strong>i = 0<br/><strong class="ng ir">for </strong>X_var_name <strong class="ng ir">in </strong>X_var_names:<br/>    <strong class="ng ir">if </strong>i &gt; 0:<br/>        lsdv_expr = lsdv_expr + <strong class="ng ir">' + ' </strong>+ X_var_name<br/>    <strong class="ng ir">else</strong>:<br/>        lsdv_expr = lsdv_expr + X_var_name<br/>    i = i + 1<br/><strong class="ng ir">for </strong>dummy_name <strong class="ng ir">in </strong>unit_names[:-1]:<br/>    lsdv_expr = lsdv_expr + <strong class="ng ir">' + ' </strong>+ dummy_name<br/><br/>print(<strong class="ng ir">'Regression expression for OLS with dummies=' </strong>+ lsdv_expr)</span></pre><p id="ca36" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们看到以下输出:</p><pre class="mo mp mq mr gt nf ng nh ni aw nj bi"><span id="eee8" class="nk lr iq ng b gy nl nm l nn no">Regression expression for OLS with dummies=<strong class="ng ir">GDP_PCAP_GWTH_PCNT ~ GCF_GWTH_PCNT + Belgium + CzechRepublic + France + Ireland + Portugal + UK</strong></span></pre><p id="93ba" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在包含假人的面板数据上构建和训练LSDV模型:</p><pre class="mo mp mq mr gt nf ng nh ni aw nj bi"><span id="25b5" class="nk lr iq ng b gy nl nm l nn no">lsdv_model = smf.<strong class="ng ir">ols</strong>(<strong class="ng ir">formula</strong>=lsdv_expr, <strong class="ng ir">data</strong>=df_panel_with_dummies)</span><span id="e319" class="nk lr iq ng b gy np nm l nn no">lsdv_model_results = lsdv_model.<strong class="ng ir">fit</strong>()</span><span id="ebc6" class="nk lr iq ng b gy np nm l nn no">print(lsdv_model_results.<strong class="ng ir">summary</strong>())</span></pre><p id="6cee" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们看到以下输出:</p><figure class="mo mp mq mr gt ms gh gi paragraph-image"><div role="button" tabindex="0" class="mt mu di mv bf mw"><div class="gh gi pg"><img src="../Images/b223383d129fa1045d2a4b1dc0258ad3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wQ0VQHLlN6WspmqpGNruSQ.png"/></div></div><p class="mz na gj gh gi nb nc bd b be z dk translated">LSDV模型的训练总结(图片由作者提供)</p></figure><h1 id="3068" class="lq lr iq bd ls lt lu lv lw lx ly lz ma jw mb jx mc jz md ka me kc mf kd mg mh bi translated">如何解释固定效果模型的训练输出</h1><h2 id="f42b" class="nk lr iq bd ls nw nx dn lw ny nz dp ma ko oa ob mc ks oc od me kw oe of mg og bi translated">估计系数的统计显著性</h2><p id="3d9e" class="pw-post-body-paragraph kf kg iq kh b ki mi jr kk kl mj ju kn ko mk kq kr ks ml ku kv kw mm ky kz la ij bi translated">首先要看的是拟合模型的系数:</p><figure class="mo mp mq mr gt ms gh gi paragraph-image"><div role="button" tabindex="0" class="mt mu di mv bf mw"><div class="gh gi ph"><img src="../Images/7899e7efd4048569398f97bf42e64079.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*PMIl9ihfDsamVPmaKbV5iQ.png"/></div></div><p class="mz na gj gh gi nb nc bd b be z dk translated">经过训练的有限元模型的回归系数(图片由作者提供)</p></figure><p id="da85" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们看到，总资本形成的Y — o — Y %变化系数(GCF_GWTH_PCNT)在p &lt; .001 as indicated in the P &gt; |t|列中是显著的。这是好消息。</p><h2 id="8015" class="nk lr iq bd ls nw nx dn lw ny nz dp ma ko oa ob mc ks oc od me kw oe of mg og bi translated">国别影响的估计值</h2><p id="4e3f" class="pw-post-body-paragraph kf kg iq kh b ki mi jr kk kl mj ju kn ko mk kq kr ks ml ku kv kw mm ky kz la ij bi translated">接下来，让我们看看代表特定国家影响的7个虚拟变量的系数——这就是我们建立这个模型的全部原因。</p><p id="5ec5" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们观察到，代表美国特定国家效应的回归截距(省略变量)为0.6693，在p值为0.041时具有统计显著性(即，其人口值估计为非零)。</p><p id="e52d" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">爱尔兰虚拟变量的系数为1.3879，p值为0.003时显著。爱尔兰的实际国别影响计算为0.6693+1.3879 = 2.0572。</p><p id="87e5" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">代表其余国家(比利时、捷克共和国、法国、葡萄牙和英国)的虚拟变量的系数在p值为0.05时没有统计学意义。这意味着它们的国别效应<em class="nd"> c_i </em>可以被认为与美国的相同(0.6693)。</p><p id="a3e1" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">下表列出了数据面板中所有7个国家的预计国别影响(<em class="nd"> c_cap_i </em>):</p><figure class="mo mp mq mr gt ms gh gi paragraph-image"><div role="button" tabindex="0" class="mt mu di mv bf mw"><div class="gh gi pi"><img src="../Images/7b4a833bd6f25dc8c10a1b373be34977.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*BtXAiqcSZXuv1EbqrVrOSw.png"/></div></div><p class="mz na gj gh gi nb nc bd b be z dk translated">特定国家影响的估计值(图片由作者提供)</p></figure><h2 id="ed1e" class="nk lr iq bd ls nw nx dn lw ny nz dp ma ko oa ob mc ks oc od me kw oe of mg og bi translated">固定效应模型的拟合优度</h2><p id="c4c0" class="pw-post-body-paragraph kf kg iq kh b ki mi jr kk kl mj ju kn ko mk kq kr ks ml ku kv kw mm ky kz la ij bi translated">现在让我们从各种角度分析有限元模型的拟合优度，看看它的符合程度如何。</p><p id="9a73" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kh ir">调整后的R平方</strong></p><p id="f05d" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们首先要看的是<a class="ae lk" rel="noopener" target="_blank" href="/the-complete-guide-to-r-squared-adjusted-r-squared-and-pseudo-r-squared-4136650fc06c"> <strong class="kh ir">调整后的R平方</strong> </a>值，报告为0.639:</p><figure class="mo mp mq mr gt ms gh gi paragraph-image"><div role="button" tabindex="0" class="mt mu di mv bf mw"><div class="gh gi pj"><img src="../Images/cf1a33b78bdaf890fe513a1f461931f2.png" data-original-src="https://miro.medium.com/v2/resize:fit:956/format:webp/1*E5tTnFXdja5pzddHGUhHSw.png"/></div></div><p class="mz na gj gh gi nb nc bd b be z dk translated">经过训练的有限元模型的R平方和调整的R平方(图片由作者提供)</p></figure><p id="c551" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">调整后的R平方测量响应变量<strong class="kh ir"> <em class="nd"> y </em> </strong>中方差的分数，该模型在考虑了由于回归变量的存在而损失的自由度后能够解释<em class="nd">(该模型有7个这样的变量)。调整后的R平方值为0.639(或约64%)，表明拟合度不错，但不是很好。在我关于<strong class="kh ir"> </strong> <a class="ae lk" rel="noopener" target="_blank" href="/how-to-build-a-pooled-ols-regression-model-for-panel-data-sets-a78358f9c2a"> <strong class="kh ir">混合OLS回归模型</strong> </a>的文章中，我们在同一个面板数据集上拟合了一个混合OLS模型，其调整后的R平方为0.619。就拟合优度而言，有限元模型似乎比混合OLS模型略有改进。我们将很快以另一种方式证实这一事实。</em></p><p id="6ce2" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kh ir">F统计量</strong></p><p id="813e" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">接下来，让我们看看训练总结中报告的F统计量:</p><figure class="mo mp mq mr gt ms gh gi paragraph-image"><div class="gh gi pk"><img src="../Images/777b0a0d0126975bcd08b259d7d25d98.png" data-original-src="https://miro.medium.com/v2/resize:fit:1020/format:webp/1*fxv7t3YYi2e4bX8JzQQ3vw.png"/></div><p class="mz na gj gh gi nb nc bd b be z dk translated">经过训练的有限元模型的f检验统计量和p值(图片由作者提供)</p></figure><p id="6efb" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">用于回归分析的<a class="ae lk" rel="noopener" target="_blank" href="/fisher-test-for-regression-analysis-1e1687867259"> <strong class="kh ir"> F检验</strong> </a>检验是否所有模型系数都<em class="nd">共同</em>显著，因此FE模型的拟合优度是否优于仅截距(又称平均值)模型。我们看到f检验的统计值41.48在p &lt; .001处是显著的，从而暗示模型的拟合优度确实比均值模型的好。</p><p id="f414" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kh ir">对数似然和AIC分数</strong></p><p id="2afa" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">现在让我们看看对数似然和<a class="ae lk" rel="noopener" target="_blank" href="/the-akaike-information-criterion-c20c8fd832f2"> <strong class="kh ir"> AIC得分</strong> </a>度量:</p><figure class="mo mp mq mr gt ms gh gi paragraph-image"><div class="gh gi pl"><img src="../Images/4b1b589d0f2e3010f53ff207db2379a1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1002/format:webp/1*LAFIZt4nYFziYJp8u4S7Qg.png"/></div><p class="mz na gj gh gi nb nc bd b be z dk translated">经过训练的有限元模型的对数似然和AIC分数(图片由作者提供)</p></figure><p id="17f9" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这些价值本身毫无意义。我们需要将它们与竞争模型的相应值进行比较。我们的竞争模型是<a class="ae lk" rel="noopener" target="_blank" href="/how-to-build-a-pooled-ols-regression-model-for-panel-data-sets-a78358f9c2a"> <strong class="kh ir">混合OLS回归模型</strong> </a>，我们已经在同一WB面板数据集的早期文章中对其进行了训练。下面是这两种模型的Log-LL和AIC分数的对比:</p><figure class="mo mp mq mr gt ms gh gi paragraph-image"><div role="button" tabindex="0" class="mt mu di mv bf mw"><div class="gh gi pm"><img src="../Images/a883644e8113d4c6e19559fb94bc29aa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hRyyxubJ9Z9Lr0-JBXYtBA.png"/></div></div><p class="mz na gj gh gi nb nc bd b be z dk translated">混合OLSR模型和固定效应模型的拟合优度比较(图片由作者提供)</p></figure><p id="1c56" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">有限元模型的对数-11和AIC分别略大于和略小于汇集OLSR模型的对数-11和，这表明有限元模型的拟合优度略好于汇集OLSR模型，尽管差距不大。</p><p id="31cb" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kh ir">使用f检验测试固定效应的显著性</strong></p><p id="6245" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">最后，让我们直接测试固定效应模型的零假设，即所有国家特定效应<em class="nd"> c_i </em>共同为零，这意味着，实际上，在这个数据集中没有固定效应在起作用。我们可以通过在两个模型  <strong class="kh ir"> </strong>之间运行<a class="ae lk" rel="noopener" target="_blank" href="/fisher-test-for-regression-analysis-1e1687867259"> <strong class="kh ir"> F检验来做这个测试——一个受限模型和一个非受限模型:</strong></a></p><ol class=""><li id="803a" class="lb lc iq kh b ki kj kl km ko ld ks le kw lf la lg lh li lj bi translated">受限模型(变量较少的模型)是之前文章中提到的<a class="ae lk" rel="noopener" target="_blank" href="/how-to-build-a-pooled-ols-regression-model-for-panel-data-sets-a78358f9c2a"> <strong class="kh ir">集合OLSR模型</strong> </a>，</li><li id="e12f" class="lb lc iq kh b ki ll kl lm ko ln ks lo kw lp la lg lh li lj bi translated">无限制模型是<strong class="kh ir">固定效果模型</strong>。</li></ol><p id="efb2" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">f检验的检验统计量计算如下:</p><figure class="mo mp mq mr gt ms gh gi paragraph-image"><div role="button" tabindex="0" class="mt mu di mv bf mw"><div class="gh gi pn"><img src="../Images/797de21b8488361b581fb7dfe6c769b4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*KXjE7_m0ObLthXW103kUzQ.png"/></div></div><p class="mz na gj gh gi nb nc bd b be z dk translated">F统计量的公式(图片由作者提供)</p></figure><p id="5ef3" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">其中:</p><ul class=""><li id="1629" class="lb lc iq kh b ki kj kl km ko ld ks le kw lf la ns lh li lj bi translated"><em class="nd"> RSS_restricted_model </em> =受限(参数数量较少)模型的残差平方和。</li><li id="265f" class="lb lc iq kh b ki ll kl lm ko ln ks lo kw lp la ns lh li lj bi translated"><em class="nd"> RSS_unrestricted_model </em> =未受限(参数数量较大)模型的残差平方和。</li><li id="5194" class="lb lc iq kh b ki ll kl lm ko ln ks lo kw lp la ns lh li lj bi translated"><em class="nd">k1</em>=受限模型的自由度</li><li id="a6e0" class="lb lc iq kh b ki ll kl lm ko ln ks lo kw lp la ns lh li lj bi translated"><em class="nd">k2</em>=无限制模型的自由度。所以，<em class="nd">k2</em>必然大于<em class="nd">k1</em>。</li><li id="26d8" class="lb lc iq kh b ki ll kl lm ko ln ks lo kw lp la ns lh li lj bi translated"><em class="nd"> N </em> =数据样本数</li></ul><p id="ab68" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">F统计量服从自由度为<em class="nd">(k2—k1，N—k2)</em>的<a class="ae lk" href="https://en.wikipedia.org/wiki/F-distribution" rel="noopener ugc nofollow" target="_blank"> <strong class="kh ir"> F分布</strong> </a>。</p><p id="1d3a" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">让我们进行f检验。我们将从设置用于计算f检验的变量开始:</p><pre class="mo mp mq mr gt nf ng nh ni aw nj bi"><span id="02de" class="nk lr iq ng b gy nl nm l nn no"><strong class="ng ir">#n=number of groups</strong><br/>n=len(unit_names)</span><span id="7739" class="nk lr iq ng b gy np nm l nn no"><strong class="ng ir">#T=number of time periods per unit</strong><br/>T=df_panel.shape[0]/n</span><span id="36a8" class="nk lr iq ng b gy np nm l nn no"><strong class="ng ir">#N=total number of rows in the panel data set</strong><br/>N=n*T</span><span id="f278" class="nk lr iq ng b gy np nm l nn no"><strong class="ng ir">#k=number of regression variables of the Pooled OLS model including the intercept</strong><br/>k=len(X_var_names)+1</span></pre><p id="4e13" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">获取混合OLS模型的残差平方和:</p><pre class="mo mp mq mr gt nf ng nh ni aw nj bi"><span id="33d5" class="nk lr iq ng b gy nl nm l nn no">ssr_restricted_model = pooled_olsr_model_results.<strong class="ng ir">ssr</strong></span></pre><p id="3b99" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">获得固定效应模型的残差平方和:</p><pre class="mo mp mq mr gt nf ng nh ni aw nj bi"><span id="6296" class="nk lr iq ng b gy nl nm l nn no">ssr_unrestricted_model = lsdv_model_results.<strong class="ng ir">ssr</strong></span></pre><p id="4c06" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">获得集合OLSR模型的自由度:</p><pre class="mo mp mq mr gt nf ng nh ni aw nj bi"><span id="d547" class="nk lr iq ng b gy nl nm l nn no">k1 = len(pooled_olsr_model_results.<strong class="ng ir">params</strong>)</span></pre><p id="1403" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">获取固定效果模型的自由度:</p><pre class="mo mp mq mr gt nf ng nh ni aw nj bi"><span id="dbf3" class="nk lr iq ng b gy nl nm l nn no">k2 = len(lsdv_model_results.<strong class="ng ir">params</strong>)</span></pre><p id="d453" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">计算F统计量:</p><pre class="mo mp mq mr gt nf ng nh ni aw nj bi"><span id="affe" class="nk lr iq ng b gy nl nm l nn no">f_statistic = ((ssr_restricted_model - ssr_unrestricted_model) /ssr_unrestricted_model) * ((N-k2)/(k2-k1))<br/>print(<strong class="ng ir">'F-statistic for FE model='</strong>+str(f_statistic))</span></pre><p id="7970" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">计算α= 0.05时F分布的临界值:</p><pre class="mo mp mq mr gt nf ng nh ni aw nj bi"><span id="8705" class="nk lr iq ng b gy nl nm l nn no">alpha=0.05</span><span id="7d45" class="nk lr iq ng b gy np nm l nn no">f_critical_value=st.<strong class="ng ir">f</strong>.<strong class="ng ir">ppf</strong>((1.0-alpha), (k2-k1), (N-k2))</span><span id="ec0e" class="nk lr iq ng b gy np nm l nn no">print(<strong class="ng ir">'F test critical value at alpha of 0.05='</strong>+str(f_critical_value))</span></pre><p id="faa8" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们看到以下输出:</p><pre class="mo mp mq mr gt nf ng nh ni aw nj bi"><span id="0ff4" class="nk lr iq ng b gy nl nm l nn no">F-statistic for FE model=<strong class="ng ir">2.448840073192174</strong><br/>F test critical value at alpha of 0.05=<strong class="ng ir">2.158306686033669</strong></span></pre><p id="1744" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们看到，在α= 0.05时，F统计量大于临界值，这使我们得出结论，LSDV固定效应模型的拟合优度优于集合OLSR模型。</p></div><div class="ab cl or os hu ot" role="separator"><span class="ou bw bk ov ow ox"/><span class="ou bw bk ov ow ox"/><span class="ou bw bk ov ow"/></div><div class="ij ik il im in"><p id="0a0e" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">以下是本文中使用的完整源代码:</p><figure class="mo mp mq mr gt ms"><div class="bz fp l di"><div class="po pp l"/></div></figure></div><div class="ab cl or os hu ot" role="separator"><span class="ou bw bk ov ow ox"/><span class="ou bw bk ov ow ox"/><span class="ou bw bk ov ow"/></div><div class="ij ik il im in"><h1 id="a7e6" class="lq lr iq bd ls lt oy lv lw lx oz lz ma jw pa jx mc jz pb ka me kc pc kd mg mh bi translated">参考文献、引文和版权</h1><h2 id="cb4c" class="nk lr iq bd ls nw nx dn lw ny nz dp ma ko oa ob mc ks oc od me kw oe of mg og bi translated">数据集</h2><p id="d792" class="pw-post-body-paragraph kf kg iq kh b ki mi jr kk kl mj ju kn ko mk kq kr ks ml ku kv kw mm ky kz la ij bi translated"><a class="ae lk" href="https://databank.worldbank.org/metadataglossary/world-development-indicators/series" rel="noopener ugc nofollow" target="_blank">世界发展指标</a>世界银行数据<a class="ae lk" href="https://www.worldbank.org/en/about/legal/terms-of-use-for-datasets" rel="noopener ugc nofollow" target="_blank"> CC BY 4.0 license </a>。<a class="ae lk" href="https://gist.github.com/sachinsdate/c40651e9e4bc13a696780462209f1992" rel="noopener ugc nofollow" target="_blank"> <strong class="kh ir">下载链接</strong> </a></p><h2 id="f215" class="nk lr iq bd ls nw nx dn lw ny nz dp ma ko oa ob mc ks oc od me kw oe of mg og bi translated">纸质和图书链接</h2><p id="3656" class="pw-post-body-paragraph kf kg iq kh b ki mi jr kk kl mj ju kn ko mk kq kr ks ml ku kv kw mm ky kz la ij bi translated">巴蒂·h·巴尔塔吉，<a class="ae lk" href="https://link.springer.com/book/10.1007/978-3-030-53953-5" rel="noopener ugc nofollow" target="_blank"> <em class="nd">面板数据的计量经济分析</em> </a>，第6版，<em class="nd">施普林格</em></p><p id="3d78" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">威廉·h·格林，<a class="ae lk" href="https://www.pearson.com/us/higher-education/program/Greene-Econometric-Analysis-8th-Edition/PGM334862.html" rel="noopener ugc nofollow" target="_blank"> <em class="nd">计量经济分析</em> </a>，第8版<em class="nd">，</em> 2018，<em class="nd">培生</em></p><h2 id="8b71" class="nk lr iq bd ls nw nx dn lw ny nz dp ma ko oa ob mc ks oc od me kw oe of mg og bi translated">形象</h2><p id="9273" class="pw-post-body-paragraph kf kg iq kh b ki mi jr kk kl mj ju kn ko mk kq kr ks ml ku kv kw mm ky kz la ij bi translated">本文中的所有图片版权归<a class="ae lk" href="https://creativecommons.org/licenses/by-nc-sa/4.0/" rel="noopener ugc nofollow" target="_blank"> CC-BY-NC-SA </a>所有，除非图片下面提到了不同的来源和版权。</p></div></div>    
</body>
</html>