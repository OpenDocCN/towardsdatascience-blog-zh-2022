<html>
<head>
<title>Autocorrelation For Time Series Analysis</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">时间序列分析的自相关</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/autocorrelation-for-time-series-analysis-86e68e631f77#2022-11-11">https://towardsdatascience.com/autocorrelation-for-time-series-analysis-86e68e631f77#2022-11-11</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="b137" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">描述什么是自相关，为什么它在时间序列分析中有用。</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/a37dbe2617f1f639b3b1966d50f6bd15.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*6XmjILeN3b4vXivL"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">艾萨克·史密斯在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure><h1 id="c3e6" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">介绍</h1><p id="70a5" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">在时间序列分析中，我们经常对过去进行推断，以预测未来。为了使这一过程成功，我们必须彻底诊断我们的时间序列，找到它所有的“角落和缝隙”</p><p id="b742" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">其中一种诊断方法是<a class="ae ky" href="https://en.wikipedia.org/wiki/Autocorrelation" rel="noopener ugc nofollow" target="_blank"> <strong class="lt iu">自相关</strong> </a>。这有助于我们检测系列中的某些特征，从而为我们的数据选择最佳预测模型。</p><p id="446b" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">在这篇短文中，我想回顾一下:什么是自相关，它为什么有用，以及如何在 Python 中将它应用于一个简单的数据集。</p><h1 id="a643" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">什么是自相关？</h1><p id="785a" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">自相关只是数据与自身的<a class="ae ky" href="https://en.wikipedia.org/wiki/Correlation" rel="noopener ugc nofollow" target="_blank"><strong class="lt iu"/></a>。因此，我们不是测量两个随机变量之间的相关性，而是测量一个随机变量自身之间的相关性。于是，为什么叫<a class="ae ky" href="https://www.macmillandictionary.com/dictionary/british/auto_3" rel="noopener ugc nofollow" target="_blank"> <strong class="lt iu"> <em class="ms">自动</em></strong></a>——关联。</p><blockquote class="mt mu mv"><p id="68a3" class="lr ls ms lt b lu mn ju lw lx mo jx lz mw mp mc md mx mq mg mh my mr mk ml mm im bi translated">相关性是指两个变量之间的相关程度。如果值为 1，变量完全正相关，-1，它们完全负相关，0，没有相关性。</p></blockquote><p id="612b" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">对于时间序列，自相关是时间序列在两个不同时间点的相关性(也称为<em class="ms">滞后</em>)。换句话说，我们是在用时间序列的滞后版本来衡量它。</p><p id="1f55" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated"><a class="ae ky" href="https://otexts.com/fpp3/acf.html" rel="noopener ugc nofollow" target="_blank">数学上的</a>，自相关计算为:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi mz"><img src="../Images/7088d45922ce951feb17067966feaa3f.png" data-original-src="https://miro.medium.com/v2/resize:fit:790/format:webp/1*-VRknVATGrTlvlrtLeRdhQ.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者方程式来自 LaTeX。</p></figure><p id="d27f" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">其中<strong class="lt iu"> <em class="ms"> N </em> </strong>为时间序列的长度<strong class="lt iu"><em class="ms"/></strong>y<strong class="lt iu"><em class="ms">k</em></strong>为时间序列的指定滞后。所以，在计算<strong class="lt iu"> <em class="ms"> r_1 </em> </strong>的时候，我们是在计算<strong class="lt iu"> <em class="ms"> y_t </em> </strong>和<strong class="lt iu"> <em class="ms"> y_{t-1}之间的相关性。</em>T45】</strong></p><blockquote class="mt mu mv"><p id="adb3" class="lr ls ms lt b lu mn ju lw lx mo jx lz mw mp mc md mx mq mg mh my mr mk ml mm im bi translated"><strong class="lt iu"> y_t </strong>和<strong class="lt iu"> y_t </strong>之间的自相关将是<strong class="lt iu"> 1 </strong>，因为它们是相同的。</p></blockquote><h1 id="c108" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">为什么有用？</h1><p id="1000" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">如上所述，我们使用自相关来衡量时间序列与其自身滞后版本的相关性。这种计算让我们对我们系列的特征有了一些有趣的了解:</p><ul class=""><li id="642e" class="na nb it lt b lu mn lx mo ma nc me nd mi ne mm nf ng nh ni bi translated"><a class="ae ky" href="https://www.investopedia.com/terms/s/seasonality.asp" rel="noopener ugc nofollow" target="_blank"><strong class="lt iu"/></a>:假设我们发现某些滞后倍数的相关性通常高于其他倍数。这意味着我们的数据中有一些季节性成分。例如，如果我们有每日数据，并且我们发现<strong class="lt iu"> <em class="ms"> 7 </em> </strong>滞后项的每个倍数都比其他的高，我们可能有一些周季节性。</li><li id="d47f" class="na nb it lt b lu nj lx nk ma nl me nm mi nn mm nf ng nh ni bi translated"><a class="ae ky" href="https://www.geeksforgeeks.org/what-is-a-trend-in-time-series/" rel="noopener ugc nofollow" target="_blank"> <strong class="lt iu">趋势</strong> </a> <strong class="lt iu"> : </strong>如果最近滞后的相关性较高，并且随着滞后的增加而缓慢下降，那么我们的数据中存在某种趋势。因此，我们需要进行一些差分来呈现时间序列<a class="ae ky" href="https://otexts.com/fpp2/stationarity.html" rel="noopener ugc nofollow" target="_blank"><strong class="lt iu"/></a>。</li></ul><p id="721a" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">要了解更多关于季节性、趋势和平稳性的知识，请查看我以前关于这些主题的文章:</p><div class="no np gp gr nq nr"><a rel="noopener follow" target="_blank" href="/seasonality-of-time-series-5b45b4809acd"><div class="ns ab fo"><div class="nt ab nu cl cj nv"><h2 class="bd iu gy z fp nw fr fs nx fu fw is bi translated">时间序列的季节性</h2><div class="ny l"><h3 class="bd b gy z fp nw fr fs nx fu fw dk translated">对季节性如何影响时间序列分析的直觉</h3></div><div class="nz l"><p class="bd b dl z fp nw fr fs nx fu fw dk translated">towardsdatascience.com</p></div></div><div class="oa l"><div class="ob l oc od oe oa of ks nr"/></div></div></a></div><div class="no np gp gr nq nr"><a rel="noopener follow" target="_blank" href="/time-series-decomposition-8f39432f78f9"><div class="ns ab fo"><div class="nt ab nu cl cj nv"><h2 class="bd iu gy z fp nw fr fs nx fu fw is bi translated">时间序列分解</h2><div class="ny l"><h3 class="bd b gy z fp nw fr fs nx fu fw dk translated">将时间序列分解成基本的构建块</h3></div><div class="nz l"><p class="bd b dl z fp nw fr fs nx fu fw dk translated">towardsdatascience.com</p></div></div><div class="oa l"><div class="og l oc od oe oa of ks nr"/></div></div></a></div><div class="no np gp gr nq nr"><a rel="noopener follow" target="_blank" href="/time-series-stationarity-simply-explained-125269968154"><div class="ns ab fo"><div class="nt ab nu cl cj nv"><h2 class="bd iu gy z fp nw fr fs nx fu fw is bi translated">时间序列平稳性的简单解释</h2><div class="ny l"><h3 class="bd b gy z fp nw fr fs nx fu fw dk translated">时间序列建模中平稳性需求的简单而直观的解释。</h3></div><div class="nz l"><p class="bd b dl z fp nw fr fs nx fu fw dk translated">towardsdatascience.com</p></div></div><div class="oa l"><div class="oh l oc od oe oa of ks nr"/></div></div></a></div><p id="f5d8" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">现在让我们通过 Python 中的一个例子来使这个理论更加具体！</p><h1 id="4fbd" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">Python 示例</h1><p id="d4c2" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">在本演练中，我们将使用经典的航空客运量数据集:</p><blockquote class="mt mu mv"><p id="a994" class="lr ls ms lt b lu mn ju lw lx mo jx lz mw mp mc md mx mq mg mh my mr mk ml mm im bi translated">数据<a class="ae ky" href="https://www.kaggle.com/datasets/ashfakyeafi/air-passenger-data-for-time-series-analysis" rel="noopener ugc nofollow" target="_blank">来自拥有 CC0 许可证的 Kaggle </a>。</p></blockquote><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oi oj l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者代码要点。</p></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ok"><img src="../Images/3af53709f3c5cce46b20cce879d99ab0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1300/format:webp/1*Vr3KcsZVqZcVUVGpZBUb8g.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者用 Python 生成的图。</p></figure><p id="62a9" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">有明显的上升趋势和年度季节性(数据点按月索引)。</p><p id="4f34" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">我们可以使用 statsmodels 包中的<a class="ae ky" href="https://www.statsmodels.org/dev/generated/statsmodels.graphics.tsaplots.plot_acf.html" rel="noopener ugc nofollow" target="_blank"> <strong class="lt iu"> plot_acf </strong> </a>函数来绘制我们的时间序列在不同滞后下的自相关，这种类型的图称为<em class="ms">相关图</em>:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oi oj l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者代码要点。</p></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ol"><img src="../Images/89825535cbc871fab7886a61a13c95a6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*NFl9TkftzL07X4nwp3iSKA.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者用 Python 生成的图。</p></figure><p id="7ed6" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">我们观察到以下情况:</p><ul class=""><li id="6df9" class="na nb it lt b lu mn lx mo ma nc me nd mi ne mm nf ng nh ni bi translated">在每倍数个<strong class="lt iu"> 12 </strong>的滞后中有一个清晰的<em class="ms">周期</em>模式。由于我们的数据是按月索引的，因此我们的数据中有一个<em class="ms">年度季节性</em>。</li><li id="6efd" class="na nb it lt b lu nj lx nk ma nl me nm mi nn mm nf ng nh ni bi translated">相关性的强度通常随着滞后的增加而缓慢下降。这在我们的数据中指出了一个<em class="ms">趋势</em>，在建模时需要对其进行差分以使其稳定。</li></ul><p id="3ec7" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">蓝色区域表示哪些滞后是<a class="ae ky" href="https://en.wikipedia.org/wiki/Statistical_significance" rel="noopener ugc nofollow" target="_blank"> <strong class="lt iu">统计上显著的</strong> </a>。因此，在为该数据建立预测模型时，下个月的预测可能只考虑前一个值的<strong class="lt iu"> ~15 </strong>，因为它们具有统计意义。</p><blockquote class="mt mu mv"><p id="fca2" class="lr ls ms lt b lu mn ju lw lx mo jx lz mw mp mc md mx mq mg mh my mr mk ml mm im bi translated">值为 0 的滞后具有 1 的完美相关性，因为我们将时间序列与其自身的精确副本相关联。</p></blockquote><h1 id="cab8" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">总结和其他想法</h1><p id="bf8a" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">在这篇文章中，我们描述了什么是自相关，以及我们如何用它来检测时间序列中的季节性和趋势。然而，它还有其他用途。例如，我们可以使用预测模型的<a class="ae ky" href="https://machinelearningmastery.com/model-residual-errors-correct-time-series-forecasts-python/" rel="noopener ugc nofollow" target="_blank"> <strong class="lt iu">残差</strong> </a>的自相关图来确定残差是否确实独立。如果残差的自相关是<em class="ms">而不是</em>几乎为零，那么拟合的模型没有考虑所有信息，并且可能可以改进。</p><p id="46a9" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">本文中使用的完整代码脚本可以在我的 GitHub 中找到:</p><div class="no np gp gr nq nr"><a href="https://github.com/egorhowell/Medium-Articles/blob/main/Time%20Series/Time%20Series%20Tools/autocorrelation.py" rel="noopener  ugc nofollow" target="_blank"><div class="ns ab fo"><div class="nt ab nu cl cj nv"><h2 class="bd iu gy z fp nw fr fs nx fu fw is bi translated">中型文章/auto correlation . py at main egorhowell/中型文章</h2><div class="ny l"><h3 class="bd b gy z fp nw fr fs nx fu fw dk translated">我在我的媒体博客/文章中使用的代码。通过创建一个关于…的帐户，为 egorhowell/Medium-Articles 的开发做出贡献</h3></div><div class="nz l"><p class="bd b dl z fp nw fr fs nx fu fw dk translated">github.com</p></div></div><div class="oa l"><div class="om l oc od oe oa of ks nr"/></div></div></a></div><h1 id="47b0" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">参考资料和进一步阅读</h1><ul class=""><li id="b761" class="na nb it lt b lu lv lx ly ma on me oo mi op mm nf ng nh ni bi translated"><em class="ms">预测:原理与实践:</em>T24】https://otexts.com/fpp2/</li></ul><h1 id="acc7" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">和我联系！</h1><ul class=""><li id="ca40" class="na nb it lt b lu lv lx ly ma on me oo mi op mm nf ng nh ni bi translated">要在媒体上阅读无限的故事，请务必在这里注册！  <em class="ms"> </em>💜</li><li id="9786" class="na nb it lt b lu nj lx nk ma nl me nm mi nn mm nf ng nh ni bi translated"><a class="ae ky" href="/subscribe/@egorhowell" rel="noopener ugc nofollow" target="_blank">T35<em class="ms">T37】😀</em></a></li><li id="b8dc" class="na nb it lt b lu nj lx nk ma nl me nm mi nn mm nf ng nh ni bi translated"><a class="ae ky" href="https://www.linkedin.com/in/egor-howell-092a721b3/" rel="noopener ugc nofollow" target="_blank"> <em class="ms">领英</em> </a> <em class="ms"> </em>👔</li><li id="a7a0" class="na nb it lt b lu nj lx nk ma nl me nm mi nn mm nf ng nh ni bi translated"><a class="ae ky" href="https://twitter.com/EgorHowell" rel="noopener ugc nofollow" target="_blank"> <em class="ms">推特</em> </a> <em class="ms"> </em> 🖊</li><li id="fb18" class="na nb it lt b lu nj lx nk ma nl me nm mi nn mm nf ng nh ni bi translated"><a class="ae ky" href="https://github.com/egorhowell" rel="noopener ugc nofollow" target="_blank"> <em class="ms"> GitHub </em> </a> <em class="ms"> </em> 🖥</li><li id="87b0" class="na nb it lt b lu nj lx nk ma nl me nm mi nn mm nf ng nh ni bi translated"><a class="ae ky" href="https://www.kaggle.com/egorphysics" rel="noopener ugc nofollow" target="_blank"><em class="ms"/></a><em class="ms"/>🏅</li></ul><blockquote class="mt mu mv"><p id="72f1" class="lr ls ms lt b lu mn ju lw lx mo jx lz mw mp mc md mx mq mg mh my mr mk ml mm im bi translated">(所有表情符号都是由<a class="ae ky" href="https://openmoji.org/" rel="noopener ugc nofollow" target="_blank"> OpenMoji </a>设计的——开源的表情符号和图标项目。许可证:<a class="ae ky" href="https://creativecommons.org/licenses/by-sa/4.0/#" rel="noopener ugc nofollow" target="_blank"> CC BY-SA 4.0 </a></p></blockquote></div></div>    
</body>
</html>