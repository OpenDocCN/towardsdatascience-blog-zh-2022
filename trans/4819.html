<html>
<head>
<title>Seasonality of Time Series</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">时间序列的季节性</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/seasonality-of-time-series-5b45b4809acd#2022-10-26">https://towardsdatascience.com/seasonality-of-time-series-5b45b4809acd#2022-10-26</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="f155" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">对季节性如何影响时间序列分析的直觉</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/9e64bd0308fe08a658afaaef1c86a807.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*4z3nZ1etV7GJM1W-"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">杰克·希尔斯在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</p></figure><h1 id="14a0" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">介绍</h1><p id="6af5" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated"><a class="ae ky" href="https://otexts.com/fpp2/tspatterns.html" rel="noopener ugc nofollow" target="_blank"> <strong class="lt iu">季节性</strong> </a>是<a class="ae ky" href="https://en.wikipedia.org/wiki/Time_series" rel="noopener ugc nofollow" target="_blank"> <strong class="lt iu">时间序列</strong> </a>分析的一个重要方面。由于时间序列在时间上是向前索引的，它们会受到季节波动的影响。例如，我们预计冰淇淋销售额在夏季较高，在冬季较低。</p><p id="4f7f" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">季节性可以在不同的时间间隔出现，如几天、几周或几个月。时间序列分析的关键是了解季节性如何影响我们的序列，从而使我们对未来做出更好的预测。</p><p id="9f3c" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">在本帖中，我们将回顾一个季节性数据的例子，然后展示如何删除它。我们想要删除它的原因是为了使我们的时间序列<a class="ae ky" href="https://www.itl.nist.gov/div898/handbook/pmc/section4/pmc442.htm" rel="noopener ugc nofollow" target="_blank"> <strong class="lt iu">平稳</strong> </a>，这是大多数预测模型的要求。如果你想了解更多关于平稳性的知识，请点击这里查看我以前的帖子:</p><div class="ms mt gp gr mu mv"><a rel="noopener follow" target="_blank" href="/time-series-stationarity-simply-explained-125269968154"><div class="mw ab fo"><div class="mx ab my cl cj mz"><h2 class="bd iu gy z fp na fr fs nb fu fw is bi translated">时间序列平稳性的简单解释</h2><div class="nc l"><h3 class="bd b gy z fp na fr fs nb fu fw dk translated">时间序列建模中平稳性需求的简单而直观的解释。</h3></div><div class="nd l"><p class="bd b dl z fp na fr fs nb fu fw dk translated">towardsdatascience.com</p></div></div><div class="ne l"><div class="nf l ng nh ni ne nj ks mv"/></div></div></a></div><h1 id="5092" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">观看季节性</h1><p id="0ce2" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">我们可以在下图中观察到1948-1960年间美国航空客运量的季节性:</p><blockquote class="nk nl nm"><p id="412b" class="lr ls nn lt b lu mn ju lw lx mo jx lz no mp mc md np mq mg mh nq mr mk ml mm im bi translated">数据<a class="ae ky" href="https://www.kaggle.com/datasets/ashfakyeafi/air-passenger-data-for-time-series-analysis" rel="noopener ugc nofollow" target="_blank">来源于拥有CC0许可证的Kaggle </a>。</p></blockquote><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nr ns l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者代码要点。</p></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nt"><img src="../Images/04e31a37aa5919fbed18da2aa2676e5b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1300/format:webp/1*bHWOdrl3GFSVsmqchmX0FQ.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者用Python生成的图。</p></figure><p id="6fd4" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">数据按月索引，我们可以清楚地看到每年的季节性模式，乘客数量在夏季达到高峰。随着时间的推移，乘客数量也呈现出超常规增长的趋势。</p><h1 id="0fd0" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">消除季节性</h1><p id="b668" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">我们可以使用<a class="ae ky" href="https://www.statistics.com/glossary/differencing-of-time-series/" rel="noopener ugc nofollow" target="_blank"> <strong class="lt iu">差分</strong> </a> <strong class="lt iu">，</strong>来消除数据中的季节性，它计算当前值与前一个季节的值之间的差异。这样做的原因是为了使时间序列稳定，使其统计特性随时间保持不变。当我们处于特定的季节时，季节性会导致时间序列的平均值不同。因此，它的统计特性不是恒定的。</p><p id="7b4f" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">季节性差异在数学上被描述为:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nu"><img src="../Images/6b1c5a93868bd94b8494d803dd84af6a.png" data-original-src="https://miro.medium.com/v2/resize:fit:562/format:webp/1*47HIV02u71kezzQDmALuHw.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者在LaTeX中生成的方程。</p></figure><p id="4fb0" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">其中<strong class="lt iu"> <em class="nn"> d(t) </em> </strong>为时间<strong class="lt iu"> <em class="nn"> t </em> </strong>，<strong class="lt iu"> <em class="nn"> y(t) </em> </strong>为序列在<strong class="lt iu"> <em class="nn"> t </em> </strong>，<strong class="lt iu"> <em class="nn"> y(t-m) </em> </strong>为上一季数据点的值<strong class="lt iu"> <em class="nn"> m </em>在我们的例子中<strong class="lt iu"> <em class="nn"> m=12 </em> </strong>，因为我们有每年的季节性。</strong></p><p id="4823" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">我们可以使用pandas<a class="ae ky" href="https://pandas.pydata.org/docs/reference/api/pandas.DataFrame.diff.html" rel="noopener ugc nofollow" target="_blank"><strong class="lt iu">diff()</strong></a>方法计算季节差异并绘制出结果序列:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nr ns l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者代码要点。</p></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nt"><img src="../Images/561b7e367f62dc0986923a31bf886318.png" data-original-src="https://miro.medium.com/v2/resize:fit:1300/format:webp/1*enWMl6nn6Yh_uCzhNrS0lw.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者用Python生成的图。</p></figure><p id="8ca2" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">每年的季节性现在已经消失了，然而我们现在观察到一些<a class="ae ky" href="https://otexts.com/fpp2/tspatterns.html" rel="noopener ugc nofollow" target="_blank"> <strong class="lt iu">周期</strong> </a>。这是另一个共同的特征时间序列，类似于季节性，但通常是在一个更长的时间尺度上，如这里所观察到的。</p><p id="9b5f" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">我们可以使用<strong class="lt iu">扩展的Dickey-Fuller (ADF)测试来测试结果序列是平稳的。</strong><strong class="lt iu"/>本检验的零假设是序列是非平稳的。<a class="ae ky" href="https://www.statsmodels.org/dev/generated/statsmodels.tsa.stattools.adfuller.html" rel="noopener ugc nofollow" target="_blank"> statsmodels </a>包提供了执行ADF测试的功能:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nr ns l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者代码要点。</p></figure><p id="bc10" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">输出:</p><pre class="kj kk kl km gt nv nw nx ny aw nz bi"><span id="64fe" class="oa la it nw b gy ob oc l od oe">ADF Statistic:  -3.3830207264924805<br/>P-Value:  0.011551493085514982<br/>Critical Values:<br/>        1%: -3.48<br/>        5%: -2.88<br/>        10%: -2.58</span></pre><p id="9686" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated"><a class="ae ky" href="https://www.scribbr.com/statistics/p-value/" rel="noopener ugc nofollow" target="_blank"> <strong class="lt iu"> P值</strong> </a> <strong class="lt iu"> </strong>低于<strong class="lt iu"> 5% </strong>和<strong class="lt iu"> 10% </strong>阈值，但高于<strong class="lt iu"> 1% </strong>阈值。因此，根据你的显著性水平，我们可以从统计上确认或否认我们的序列是平稳的。</p><p id="a5f0" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">我们还可以执行一些进一步的规则差分(相邻值之间的差)来进一步降低P值。然而，在这种情况下，我认为数据足够稳定，因为它低于<strong class="lt iu"> 5% </strong>阈值。</p><p id="ef1d" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">稳定方差也是最佳实践，因为这是平稳性的条件之一。为了实现这一点，我们本来可以使用<a class="ae ky" href="https://en.wikipedia.org/wiki/Power_transform" rel="noopener ugc nofollow" target="_blank"> <strong class="lt iu">框考克斯变换</strong> </a> <strong class="lt iu">。如果你想了解更多关于稳定方差的知识，请查阅我以前的文章:</strong></p><div class="ms mt gp gr mu mv"><a rel="noopener follow" target="_blank" href="/box-cox-transform-for-time-series-cc45f26082c6"><div class="mw ab fo"><div class="mx ab my cl cj mz"><h2 class="bd iu gy z fp na fr fs nb fu fw is bi translated">时间序列的Box-Cox变换</h2><div class="nc l"><h3 class="bd b gy z fp na fr fs nb fu fw dk translated">如何使用Box-Cox变换创建平稳时间序列？</h3></div><div class="nd l"><p class="bd b dl z fp na fr fs nb fu fw dk translated">towardsdatascience.com</p></div></div><div class="ne l"><div class="of l ng nh ni ne nj ks mv"/></div></div></a></div><h1 id="6b49" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">最后的想法</h1><p id="9a68" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">在这篇文章中，我们已经展示了什么是季节性，以及它看起来像什么。我们可以通过差分来消除季节性，并使用ADF检验来确认结果序列是否平稳。</p><p id="383d" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">本文的完整Python脚本可以在我的GitHub中找到:</p><div class="ms mt gp gr mu mv"><a href="https://github.com/egorhowell/Medium-Articles/blob/main/Time%20Series/Time%20Series%20Tools/seasonality.py" rel="noopener  ugc nofollow" target="_blank"><div class="mw ab fo"><div class="mx ab my cl cj mz"><h2 class="bd iu gy z fp na fr fs nb fu fw is bi translated">中型商品/季节性. py at main egorhowell/中型商品</h2><div class="nc l"><h3 class="bd b gy z fp na fr fs nb fu fw dk translated">此时您不能执行该操作。您已使用另一个标签页或窗口登录。您已在另一个选项卡中注销，或者…</h3></div><div class="nd l"><p class="bd b dl z fp na fr fs nb fu fw dk translated">github.com</p></div></div><div class="ne l"><div class="og l ng nh ni ne nj ks mv"/></div></div></a></div><h1 id="c2d4" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">参考资料和进一步阅读</h1><ul class=""><li id="1c0a" class="oh oi it lt b lu lv lx ly ma oj me ok mi ol mm om on oo op bi translated"><em class="nn">预测:原理与实践:</em><a class="ae ky" href="https://otexts.com/fpp2/" rel="noopener ugc nofollow" target="_blank">https://otexts.com/fpp2/</a></li><li id="3e74" class="oh oi it lt b lu oq lx or ma os me ot mi ou mm om on oo op bi translated"><a class="ae ky" href="https://people.duke.edu/~rnau/Decision411_2007/Class10notes.htm" rel="noopener ugc nofollow" target="_blank">https://people . duke . edu/~ rnau/decision 411 _ 2007/class 10 notes . htm</a></li></ul><h1 id="4239" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">和我联系！</h1><ul class=""><li id="ca40" class="oh oi it lt b lu lv lx ly ma oj me ok mi ol mm om on oo op bi translated">要在媒体上阅读无限的故事，请务必在此注册！T17<em class="nn">T19】💜</em></li><li id="9786" class="oh oi it lt b lu oq lx or ma os me ot mi ou mm om on oo op bi translated"><a class="ae ky" href="/subscribe/@egorhowell" rel="noopener ugc nofollow" target="_blank"> <em class="nn">要想在我发帖注册时得到更新的邮件通知就在这里！</em> </a> <em class="nn"> </em>😀</li><li id="b8dc" class="oh oi it lt b lu oq lx or ma os me ot mi ou mm om on oo op bi translated"><a class="ae ky" href="https://www.linkedin.com/in/egor-howell-092a721b3/" rel="noopener ugc nofollow" target="_blank"><em class="nn">LinkedIn</em></a><em class="nn"/>👔</li><li id="a7a0" class="oh oi it lt b lu oq lx or ma os me ot mi ou mm om on oo op bi translated"><a class="ae ky" href="https://twitter.com/EgorHowell" rel="noopener ugc nofollow" target="_blank"> <em class="nn">推特</em> </a> <em class="nn"> </em> 🖊</li><li id="fb18" class="oh oi it lt b lu oq lx or ma os me ot mi ou mm om on oo op bi translated"><a class="ae ky" href="https://github.com/egorhowell" rel="noopener ugc nofollow" target="_blank"><em class="nn">github</em></a><em class="nn"/>🖥</li><li id="87b0" class="oh oi it lt b lu oq lx or ma os me ot mi ou mm om on oo op bi translated"><a class="ae ky" href="https://www.kaggle.com/egorphysics" rel="noopener ugc nofollow" target="_blank"><em class="nn"/></a><em class="nn"/>🏅</li></ul><blockquote class="nk nl nm"><p id="72f1" class="lr ls nn lt b lu mn ju lw lx mo jx lz no mp mc md np mq mg mh nq mr mk ml mm im bi translated">(所有表情符号都是由<a class="ae ky" href="https://openmoji.org/" rel="noopener ugc nofollow" target="_blank"> OpenMoji </a>设计的——开源的表情符号和图标项目。执照:<a class="ae ky" href="https://creativecommons.org/licenses/by-sa/4.0/#" rel="noopener ugc nofollow" target="_blank"> CC BY-SA 4.0 </a></p></blockquote></div></div>    
</body>
</html>