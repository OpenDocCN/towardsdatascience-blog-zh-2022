<html>
<head>
<title>How to Build A Pooled OLS Regression Model For Panel Data Sets</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何为面板数据建立混合OLS回归模型</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/how-to-build-a-pooled-ols-regression-model-for-panel-data-sets-a78358f9c2a#2022-02-05">https://towardsdatascience.com/how-to-build-a-pooled-ols-regression-model-for-panel-data-sets-a78358f9c2a#2022-02-05</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><figure class="ip iq gp gr ir is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi io"><img src="../Images/f08d7a7e180f9bfeeecdc7b19f10d8ac.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*nv5gPBul4YsKGctA7b4OZg.png"/></div></div><p class="iz ja gj gh gi jb jc bd b be z dk translated">a面板数据集(来源:<a class="ae jd" href="https://databank.worldbank.org/metadataglossary/world-development-indicators/series" rel="noopener ugc nofollow" target="_blank">世界发展指标</a>数据在<a class="ae jd" href="https://www.worldbank.org/en/about/legal/terms-of-use-for-datasets" rel="noopener ugc nofollow" target="_blank"> CC BY 4.0 license </a>)(图片由作者提供)</p></figure><div class=""/><div class=""><h2 id="b12f" class="pw-subtitle-paragraph kd jf jg bd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku dk translated">以及使用Python和statsmodels对其拟合优度的详细分析</h2></div><p id="fee8" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">在本文中，我们将了解<strong class="kx jh">面板数据数据集</strong>，我们将学习如何使用statsmodels和Python为真实世界的面板数据集构建和训练一个<strong class="kx jh">池化OLS回归模型</strong>。</p><p id="6934" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">训练池化OLSR模型后，我们将学习如何使用调整后的R平方、对数似然、AIC和回归的f检验来分析训练模型的拟合优度。我们将通过对其残差的详细分析，更深入地了解模型的拟合优度。</p><p id="8ed7" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">与<strong class="kx jh">固定效应</strong>、<strong class="kx jh">随机效应</strong>和<strong class="kx jh">随机系数模型</strong>一起，<strong class="kx jh">混合OLS回归模型</strong>恰好是面板数据集的一个普遍考虑的模型。事实上，在许多面板数据集中，混合OLSR模型经常被用作比较其他模型性能的参考或基线模型。</p><p id="c1bc" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">本文是面板数据分析系列文章的第1部分:</p><ol class=""><li id="1db2" class="lr ls jg kx b ky kz lb lc le lt li lu lm lv lq lw lx ly lz bi translated"><strong class="kx jh">如何为面板数据集建立混合OLS回归模型</strong></li><li id="e886" class="lr ls jg kx b ky ma lb mb le mc li md lm me lq lw lx ly lz bi translated"><a class="ae jd" rel="noopener" target="_blank" href="/understanding-the-fixed-effects-regression-model-d2fccc2cc27e">了解固定效应回归模型</a></li><li id="94c8" class="lr ls jg kx b ky ma lb mb le mc li md lm me lq lw lx ly lz bi translated">随机效应回归模型的实用指南</li></ol><h1 id="f0af" class="mf mg jg bd mh mi mj mk ml mm mn mo mp km mq kn mr kp ms kq mt ks mu kt mv mw bi translated">什么是面板数据？</h1><p id="c4dc" class="pw-post-body-paragraph kv kw jg kx b ky mx kh la lb my kk ld le mz lg lh li na lk ll lm nb lo lp lq ij bi translated">面板数据集包含在一段时间内为一个或多个唯一可识别的个人或“事物”收集的数据。在面板数据术语中，为其收集数据的每个个体或“事物”被称为一个<strong class="kx jh">单元</strong>。</p><p id="2261" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">以下是面板数据集的三个真实例子:</p><p id="e84e" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">弗雷明汉心脏研究:弗雷明汉心脏研究是一项长期的实验，于1948年在马萨诸塞州的弗雷明汉市开始。每年，来自5000多个个体的健康数据被捕获，目标是识别心血管疾病的风险因素。在这个数据集中，<strong class="kx jh">单元</strong>是一个人。</p><p id="9425" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><a class="ae jd" href="https://rdrr.io/cran/AER/man/Grunfeld.html" rel="noopener ugc nofollow" target="_blank"> <strong class="kx jh">格伦菲尔德投资数据</strong> </a>:这是一个流行的研究数据集，包含10家美国公司20年来积累的公司业绩数据。在这个数据集中，<strong class="kx jh">单位</strong>是一家公司。</p><p id="910d" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><a class="ae jd" href="https://www.iser.essex.ac.uk/bhps" rel="noopener ugc nofollow" target="_blank"> <strong class="kx jh">英国家庭小组调查</strong> </a>:这是对英国家庭样本的调查。自1991年以来，每个抽样家庭的成员都被问到一系列问题，他们的回答被记录下来。随后的每一年都要对相同的家庭样本进行一次访问。这项调查的目的是分析英国发生的社会经济变化对英国家庭的影响。在这个数据集中，<strong class="kx jh">单元</strong>是一个家庭。</p><p id="7849" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">在建立面板数据集时，研究人员为每个<strong class="kx jh">单元</strong>测量一个或多个称为<strong class="kx jh">变量</strong>的参数，并以表格形式记录它们的值。变量的例子有个人的性别、种族、体重和血脂水平，或公司的员工人数、流通股和EBITDA。请注意，一些变量可能会随着时间的推移而变化，而另一些则保持不变。</p><p id="8795" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">该数据收集练习的结果是一个<strong class="kx jh">三维数据集</strong>，其中每行代表一个独特的单元，每列包含该单元的一个测量变量的数据，z轴包含该单元被跟踪的时间周期序列。</p><p id="6941" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">面板数据集来自<strong class="kx jh">纵向研究</strong>，其中研究人员希望研究测量变量对一个或多个<strong class="kx jh">响应变量</strong>的影响，如一家公司的年度投资或一个国家的GDP增长。</p><h1 id="91e4" class="mf mg jg bd mh mi mj mk ml mm mn mo mp km mq kn mr kp ms kq mt ks mu kt mv mw bi translated">真实世界面板数据集</h1><p id="2072" class="pw-post-body-paragraph kv kw jg kx b ky mx kh la lb my kk ld le mz lg lh li na lk ll lm nb lo lp lq ij bi translated">以下面板数据包含了七个国家从1992年到2014年的人均GDP年增长率。除了GDP增长数据，该面板还包含每个国家总资本形成的同比增长:</p><figure class="nd ne nf ng gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi nc"><img src="../Images/621aedc8a1a98a14c4c7976de2866e36.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*leYcxnKRL1uXIwHD-PrYUw.png"/></div></div><p class="iz ja gj gh gi jb jc bd b be z dk translated">a小组数据集(来源:<a class="ae jd" href="https://databank.worldbank.org/metadataglossary/world-development-indicators/series" rel="noopener ugc nofollow" target="_blank">世界发展指标</a>数据<a class="ae jd" href="https://www.worldbank.org/en/about/legal/terms-of-use-for-datasets" rel="noopener ugc nofollow" target="_blank"> CC BY 4.0 license </a>)(图片由作者提供)</p></figure><p id="01cd" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">在上面的数据集中，每个国家(“单位”)在相同数量的时间段内被跟踪，产生了所谓的<strong class="kx jh">平衡面板</strong>。<strong class="kx jh">不平衡或不均衡面板</strong>是指在不同的时间段跟踪不同的单元。</p><p id="b4df" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">上面的数据集也是一个<strong class="kx jh">固定面板</strong>(相对于<strong class="kx jh">旋转面板)</strong>的例子，因为我们在每个时间段都在跟踪同一组国家。</p><p id="a02b" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">在本文的其余部分，我们将看看数据面板是<strong class="kx jh">固定的</strong>和<strong class="kx jh">平衡的</strong>。</p><p id="fe6d" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">在面板数据集中，属于一个单元的数据点集称为<strong class="kx jh">组</strong>。通常，单位和组这两个词在关于面板数据集的讨论中可以互换使用。</p><p id="9631" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">回到世界银行的数据集，假设我们希望研究总资本形成的增长和一个国家的GDP增长之间的关系。为此，我们形成以下回归目标:</p><h1 id="b41e" class="mf mg jg bd mh mi mj mk ml mm mn mo mp km mq kn mr kp ms kq mt ks mu kt mv mw bi translated">回归目标</h1><p id="fb9c" class="pw-post-body-paragraph kv kw jg kx b ky mx kh la lb my kk ld le mz lg lh li na lk ll lm nb lo lp lq ij bi translated">我们的目标是精确定义一个国家总资本形成的增长与该国每年经历的GDP增长之间的关系。</p><h1 id="d585" class="mf mg jg bd mh mi mj mk ml mm mn mo mp km mq kn mr kp ms kq mt ks mu kt mv mw bi translated">回归策略</h1><p id="a08c" class="pw-post-body-paragraph kv kw jg kx b ky mx kh la lb my kk ld le mz lg lh li na lk ll lm nb lo lp lq ij bi translated">我们的策略将是选择和拟合一个适合面板数据集，特别是WB面板数据的回归模型。我们的回归模型应该允许我们将国家<em class="nh"> i </em>在时间段(年份)<em class="nh"> t </em>经历的年GDP增长表示为某个函数<em class="nh"> f(.)</em>在<em class="nh"> t </em>时间段内<em class="nh"> i </em>国家总资本形成的年增长率。</p><p id="ea6b" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">以符号形式:</p><figure class="nd ne nf ng gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi ni"><img src="../Images/579afb9db5ab706beff28c995a990f5a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Q6YHdAVX2_lI9Wzyzab2sQ.png"/></div></div><p class="iz ja gj gh gi jb jc bd b be z dk translated">在时间周期t，国家I的GDP增长是国家I在时间周期t的总资本形成增长的函数</p></figure><p id="b95b" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">在上面的回归方程中，<em class="nh"> ε_it </em>是回归的残差，它捕捉了<em class="nh"> i </em>国家在<em class="nh"> t </em>年期间的同比增长的方差，这是模型<em class="nh">无法</em>能够“解释”的。</p><h1 id="5655" class="mf mg jg bd mh mi mj mk ml mm mn mo mp km mq kn mr kp ms kq mt ks mu kt mv mw bi translated">混合OLS回归模型</h1><p id="23e6" class="pw-post-body-paragraph kv kw jg kx b ky mx kh la lb my kk ld le mz lg lh li na lk ll lm nb lo lp lq ij bi translated">如前所述，混合OLS回归模型通常是一个很好的起点，也是几个面板数据集的参考模型。我们将研究它对世界银行数据集的适用性。</p><p id="a1b4" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">为此，我们将通过将国家和年份视为两列来“展平”面板数据，如下所示:</p><figure class="nd ne nf ng gt is gh gi paragraph-image"><div class="gh gi nj"><img src="../Images/7a9e87e347813bcbd3091049adde283b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1270/format:webp/1*DwVM13yvy_0hyKzFLW0t-Q.png"/></div><p class="iz ja gj gh gi jb jc bd b be z dk translated">展平版本的面板数据集(图片由作者提供)</p></figure><p id="da93" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">我们的因变量(内生变量)和解释变量(外生变量)如下:</p><p id="7cda" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">因变量<strong class="kx jh"><em class="nh">y</em></strong>= GDP _ PCAP _长城_PCNT <br/>解释变量<strong class="kx jh"><em class="nh">X</em></strong>= GCF _长城_PCNT</p><p id="2760" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">数据集可以在 这里下载<a class="ae jd" href="https://gist.github.com/sachinsdate/c40651e9e4bc13a696780462209f1992" rel="noopener ugc nofollow" target="_blank"> <strong class="kx jh">。</strong></a></p><p id="cb3b" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">使用<a class="ae jd" href="https://pandas.pydata.org/" rel="noopener ugc nofollow" target="_blank"> Pandas </a>，我们将把这个展平的面板数据集加载到内存中，使用<a class="ae jd" href="https://seaborn.pydata.org/" rel="noopener ugc nofollow" target="_blank"> Seaborn </a>，我们将绘制plot <strong class="kx jh"> <em class="nh"> y </em> </strong>对<strong class="kx jh"> <em class="nh"> X. </em> </strong></p><p id="741f" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">我们将从导入所有必需的包开始，包括我们将在本文后面使用的包:</p><pre class="nd ne nf ng gt nk nl nm nn aw no bi"><span id="cdd2" class="np mg jg nl b gy nq nr l ns nt"><strong class="nl jh">import </strong>pandas <strong class="nl jh">as </strong>pd<br/><strong class="nl jh">import </strong>scipy.stats <strong class="nl jh">as </strong>st<br/><strong class="nl jh">import </strong>statsmodels.api <strong class="nl jh">as </strong>sm<br/><strong class="nl jh">import </strong>statsmodels.graphics.tsaplots <strong class="nl jh">as </strong>tsap<br/><strong class="nl jh">from </strong>statsmodels.compat <strong class="nl jh">import </strong>lzip<br/><strong class="nl jh">from </strong>statsmodels.stats.diagnostic <strong class="nl jh">import </strong>het_white<br/><strong class="nl jh">from </strong>matplotlib <strong class="nl jh">import </strong>pyplot <strong class="nl jh">as </strong>plt<br/><strong class="nl jh">import </strong>seaborn <strong class="nl jh">as </strong>sns</span></pre><p id="7e0c" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">将展平的数据集加载到Pandas数据框中:</p><pre class="nd ne nf ng gt nk nl nm nn aw no bi"><span id="3180" class="np mg jg nl b gy nq nr l ns nt">df_panel = pd.<strong class="nl jh">read_csv</strong>('wb_data_panel_2ind_7units_1992_2014.csv', <strong class="nl jh">header</strong>=0)</span></pre><p id="8b65" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">使用<a class="ae jd" href="https://seaborn.pydata.org/" rel="noopener ugc nofollow" target="_blank"> Seaborn </a>绘制所有国家所有时间段的GDP增长与总资本形成增长的关系图:</p><pre class="nd ne nf ng gt nk nl nm nn aw no bi"><span id="b29d" class="np mg jg nl b gy nq nr l ns nt">sns.<strong class="nl jh">scatterplot</strong>(<strong class="nl jh">x</strong>=df_panel[<strong class="nl jh">'GCF_GWTH_PCNT'</strong>],  <br/>                <strong class="nl jh">y</strong>=df_panel[<strong class="nl jh">'GDP_PCAP_GWTH_PCNT'</strong>],<br/>                <strong class="nl jh">hue</strong>=df_panel[<strong class="nl jh">'COUNTRY'</strong>]).<strong class="nl jh">set</strong>(<strong class="nl jh">title</strong>=                 <br/>                'Y-o-Y % Change in per-capita GDP versus Y-o-Y % Change in Gross capital formation')</span><span id="dee6" class="np mg jg nl b gy nu nr l ns nt">plt.<strong class="nl jh">show</strong>()</span></pre><p id="9c80" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">我们看到下面的情节:</p><figure class="nd ne nf ng gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi nv"><img src="../Images/bde6e7fc7d3d2c1a99ba1e16de18c75c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*AUIbMfHskuBsD_9dBiXJtw.png"/></div></div><p class="iz ja gj gh gi jb jc bd b be z dk translated">国内生产总值同比增长%与总资本形成同比增长%的国家散点图(图片由作者提供)</p></figure><p id="f6b0" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">在数据面板中，所有国家的GDP年同比增长率与总资本形成年同比增长率之间似乎存在线性关系。这对使用OLS技术拟合线性模型来说是个好兆头。</p><p id="2728" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">但是，我们也在响应变量GDP_PCAP_GWTH_PCNT中观察到了<a class="ae jd" rel="noopener" target="_blank" href="/heteroscedasticity-is-nothing-to-be-afraid-of-730dd3f7ca1f"> <strong class="kx jh">异方差</strong> </a> <strong class="kx jh"> </strong>的迹象。具体地，对于不同的GCF_GWTH_PCNT值，GDP_PCAP_GWTH_PCNT的方差不是常数。对于使用OLS估计技术来说，这不是一个好兆头。</p><p id="afcd" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">无论如何，让我们继续用OLS回归模型来拟合这个扁平的数据面板。在本文的后面，我们将看到如何使用一组拟合优度测试来度量模型的适用性。</p><p id="a447" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">混合OLS回归模型方程如下:</p><figure class="nd ne nf ng gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi nw"><img src="../Images/6e23053d354f959ec51c9d6348347df6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*YuwlChbhOWbSy1yIlMj9SA.png"/></div></div><p class="iz ja gj gh gi jb jc bd b be z dk translated">汇集的OLS回归模型方程(图片由作者提供)</p></figure><p id="ad52" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">在面板数据集上训练模型的目的是找到拟合系数<em class="nh"> β_cap_1 </em>和<em class="nh"> β_cap_0 </em>。<em class="nh"> β_cap </em>中的“cap”表示它是模型估计的系数的值，而不是总是未知的真实(群体水平)值<em class="nh"> β </em>。</p><p id="0025" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><em class="nh"> ε </em>是拟合模型的残差，是具有一定均值和方差的随机变量。如果OLS估计技术正确地完成了它的工作，ε将具有为零的平均值，并且ε将具有以GCF_GWTH_PCNT为条件的恒定方差(即<em class="nh"> ε </em>将不是异方差的)，并且<em class="nh"> ε </em>将不是自相关的。</p><p id="6464" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">我们将使用statsmodels的<code class="fe nx ny nz nl b">OLS</code>类来构建和拟合OLS回归模型，如下所示:</p><p id="aed0" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">定义<strong class="kx jh"> <em class="nh"> y </em> </strong>和<strong class="kx jh"> <em class="nh"> X </em> </strong>变量:</p><pre class="nd ne nf ng gt nk nl nm nn aw no bi"><span id="5a10" class="np mg jg nl b gy nq nr l ns nt">y_var_name = <strong class="nl jh">'GDP_PCAP_GWTH_PCNT'<br/></strong>X_var_names = [<strong class="nl jh">'GCF_GWTH_PCNT'</strong>]</span></pre><p id="e414" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">从数据面板中切出<strong class="kx jh"> <em class="nh"> y </em> </strong>矢量:</p><pre class="nd ne nf ng gt nk nl nm nn aw no bi"><span id="69d3" class="np mg jg nl b gy nq nr l ns nt">pooled_y=df_panel[y_var_name]</span></pre><p id="d552" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">从数据面板中切出<strong class="kx jh"> <em class="nh"> X </em> </strong>矩阵:</p><pre class="nd ne nf ng gt nk nl nm nn aw no bi"><span id="9171" class="np mg jg nl b gy nq nr l ns nt">pooled_X=df_panel[X_var_names]</span></pre><p id="f3d3" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">添加回归截距的占位符。模型拟合时，这个变量的系数就是回归模型的截距<em class="nh"> β_0 </em>。</p><pre class="nd ne nf ng gt nk nl nm nn aw no bi"><span id="0dec" class="np mg jg nl b gy nq nr l ns nt">pooled_X = sm.<strong class="nl jh">add_constant</strong>(pooled_X)</span></pre><p id="8cbb" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">构建OLS回归模型:</p><pre class="nd ne nf ng gt nk nl nm nn aw no bi"><span id="885b" class="np mg jg nl b gy nq nr l ns nt">pooled_olsr_model = sm.<strong class="nl jh">OLS</strong>(<strong class="nl jh">endog</strong>=pooled_y, <strong class="nl jh">exog</strong>=pooled_X)</span></pre><p id="398b" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">在<em class="nh">(</em><strong class="kx jh"><em class="nh">)y</em></strong><em class="nh">，</em><strong class="kx jh"><em class="nh">X</em></strong><em class="nh">)</em>数据集上训练模型并获取训练结果:</p><pre class="nd ne nf ng gt nk nl nm nn aw no bi"><span id="95d5" class="np mg jg nl b gy nq nr l ns nt">pooled_olsr_model_results = pooled_olsr_model.<strong class="nl jh">fit</strong>()</span></pre><p id="ce91" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">打印培训总结:</p><pre class="nd ne nf ng gt nk nl nm nn aw no bi"><span id="d828" class="np mg jg nl b gy nq nr l ns nt"><strong class="nl jh">print</strong>(pooled_olsr_model_results.<strong class="nl jh">summary</strong>())</span></pre><p id="9969" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">我们得到以下输出:</p><figure class="nd ne nf ng gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi oa"><img src="../Images/01625791ba26ffba6ef28b90872bac2b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fMiazfKIaJliNcwcFuD8ew.png"/></div></div><p class="iz ja gj gh gi jb jc bd b be z dk translated">WB数据集上混合OLS回归模型的训练输出(图片由作者提供)</p></figure><h1 id="70d1" class="mf mg jg bd mh mi mj mk ml mm mn mo mp km mq kn mr kp ms kq mt ks mu kt mv mw bi translated">如何解释混合OLSR模型的训练输出</h1><p id="e4b4" class="pw-post-body-paragraph kv kw jg kx b ky mx kh la lb my kk ld le mz lg lh li na lk ll lm nb lo lp lq ij bi translated">首先要注意的是拟合系数的值:<em class="nh"> β_cap_1 </em>和<em class="nh"> β_cap_0 </em></p><p id="678d" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><em class="nh"> β_cap_0 = 0.9720，β_cap_1=0.2546 </em></p><p id="8420" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">这两个系数都被估计为在p </p><p id="f7f2" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">The trained Pooled OLS model’s equation is as follows:</p><figure class="nd ne nf ng gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi ob"><img src="../Images/eef5627ca09864d98081cc6751ce9fe4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*YAn-ftKEMH1km2mg0RlqOA.png"/></div></div><p class="iz ja gj gh gi jb jc bd b be z dk translated">The trained Pooled OLS regression model (Image by Author)</p></figure><h1 id="6002" class="mf mg jg bd mh mi mj mk ml mm mn mo mp km mq kn mr kp ms kq mt ks mu kt mv mw bi translated">How to interpret the Pooled OLSR model’s performance</h1><p id="96d6" class="pw-post-body-paragraph kv kw jg kx b ky mx kh la lb my kk ld le mz lg lh li na lk ll lm nb lo lp lq ij bi translated">We will analyze whether Pooled OLS model is the adequate model for our regression problem. We will analyze the model’s goodness-of-fit using direct measures and tests such as <a class="ae jd" rel="noopener" target="_blank" href="/the-complete-guide-to-r-squared-adjusted-r-squared-and-pseudo-r-squared-4136650fc06c"> <strong class="kx jh"> R平方</strong> </a>和<a class="ae jd" rel="noopener" target="_blank" href="/fisher-test-for-regression-analysis-1e1687867259"> <strong class="kx jh"> F检验</strong> </a>以及对数似然和<strong class="kx jh"> AIC </strong>分数处显著不同于0，并且也通过残差分析间接不同。</p><h2 id="5d57" class="np mg jg bd mh oc od dn ml oe of dp mp le og oh mr li oi oj mt lm ok ol mv om bi translated">通过R平方、f检验、对数似然和AIC分析拟合优度</h2><p id="571f" class="pw-post-body-paragraph kv kw jg kx b ky mx kh la lb my kk ld le mz lg lh li na lk ll lm nb lo lp lq ij bi translated"><a class="ae jd" rel="noopener" target="_blank" href="/the-complete-guide-to-r-squared-adjusted-r-squared-and-pseudo-r-squared-4136650fc06c"> <strong class="kx jh">调整后的R平方</strong> </a>测量的是<strong class="kx jh"><em class="nh"/></strong><em class="nh"/>中由<strong class="kx jh"> <em class="nh"> X </em> </strong> <em class="nh">解释的总方差的分数，在考虑了由于包含回归变量</em>而损失的自由度之后，为0.619或约62%。这当然不是一个糟糕的数字，但仍然没有什么值得欣喜若狂的。</p><p id="d85b" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">测量模型参数联合显著性的回归的<a class="ae jd" rel="noopener" target="_blank" href="/fisher-test-for-regression-analysis-1e1687867259"> <strong class="kx jh"> F检验</strong> </a>产生了261.4的检验统计量，p值为2.15e-35，从而使我们得出结论，模型的系数估计在p值为&lt;001时联合显著。</p><p id="c93f" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">该模型的对数似然为-300.29，<a class="ae jd" rel="noopener" target="_blank" href="/the-akaike-information-criterion-c20c8fd832f2"> <strong class="kx jh"> AIC </strong> </a>得分为604.6。这些拟合优度值本身是没有意义的，除非我们将它们与竞争模型进行比较。在我下周的文章中，我们将在相同的数据面板上建立一个固定效应模型，并使用这两种方法来比较有限元模型和混合OLSR模型的拟合质量。</p><h2 id="e272" class="np mg jg bd mh oc od dn ml oe of dp mp le og oh mr li oi oj mt lm ok ol mv om bi translated">残差分析</h2><p id="1d6e" class="pw-post-body-paragraph kv kw jg kx b ky mx kh la lb my kk ld le mz lg lh li na lk ll lm nb lo lp lq ij bi translated">让我们分析拟合模型的<strong class="kx jh">残差</strong>为<a class="ae jd" rel="noopener" target="_blank" href="/testing-for-normality-using-skewness-and-kurtosis-afd61be860"> <strong class="kx jh">正态性</strong> </a>、<a class="ae jd" rel="noopener" target="_blank" href="/heteroscedasticity-is-nothing-to-be-afraid-of-730dd3f7ca1f"> <strong class="kx jh">异方差性</strong> </a> <strong class="kx jh"> </strong>和<a class="ae jd" rel="noopener" target="_blank" href="/the-intuition-behind-correlation-62ca11a3c4a"> <strong class="kx jh">相关性</strong></a><strong class="kx jh"/>——影响线性模型拟合优度的三个属性。</p><p id="7a18" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">回想每个原始残差<em class="nh">ε_ it = y _ OBS _ it—y _ pred _ it</em>，即GDP_PCAP_GWTH_PCNT的观测值和预测值之间的差值。让我们打印出包含训练模型的原始残差的Pandas <code class="fe nx ny nz nl b">Series</code>对象:</p><p id="c112" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><strong class="kx jh">打印</strong>(pooled _ olsr _ model _ results . resid)</p><figure class="nd ne nf ng gt is gh gi paragraph-image"><div class="gh gi on"><img src="../Images/15494a13427f66c0243c1e4605e97607.png" data-original-src="https://miro.medium.com/v2/resize:fit:1084/format:webp/1*P8pCXVulfTZhUdNs7gUmGw.png"/></div><p class="iz ja gj gh gi jb jc bd b be z dk translated">模型的原始残差</p></figure><p id="8a4f" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">以下是残差的平均值:</p><pre class="nd ne nf ng gt nk nl nm nn aw no bi"><span id="afa1" class="np mg jg nl b gy nq nr l ns nt"><strong class="nl jh">print</strong>(<strong class="nl jh">'Mean value of residual errors='</strong>+<strong class="nl jh">str</strong>(pooled_olsr_model_results.resid.<strong class="nl jh">mean</strong>()))</span></pre><p id="0154" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><code class="fe nx ny nz nl b">Mean value of residual errors=<strong class="kx jh">3.682354628259836e-16</strong></code></p><p id="1fa4" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">平均值实际上为零，这是使用OLS估计技术的预期结果。</p><h2 id="4916" class="np mg jg bd mh oc od dn ml oe of dp mp le og oh mr li oi oj mt lm ok ol mv om bi translated">残差是正态分布的吗？</h2><p id="7814" class="pw-post-body-paragraph kv kw jg kx b ky mx kh la lb my kk ld le mz lg lh li na lk ll lm nb lo lp lq ij bi translated">让我们绘制残差的Q-Q图:</p><pre class="nd ne nf ng gt nk nl nm nn aw no bi"><span id="da71" class="np mg jg nl b gy nq nr l ns nt">sm.<strong class="nl jh">qqplot</strong>(data=pooled_olsr_model_results.<strong class="nl jh">resid</strong>, <strong class="nl jh">line</strong>=<strong class="nl jh">'</strong>45<strong class="nl jh">'</strong>)</span><span id="c0c1" class="np mg jg nl b gy nu nr l ns nt">plt.<strong class="nl jh">show</strong>()</span></pre><figure class="nd ne nf ng gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi oo"><img src="../Images/fa5703a37e39b07c769ffdfabb8666f6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*UtJUd8t7Bc2MpxAo794Rmw.png"/></div></div><p class="iz ja gj gh gi jb jc bd b be z dk translated">混合OLS模型的残差Q-Q图(图片由作者提供)</p></figure><p id="c172" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">这是我们观察问题的第一个迹象。残差的Q-Q图是对正态性的直观检验，它清楚地表明拟合模型的残差不是正态分布的。Q-Q测试的结果由<a class="ae jd" rel="noopener" target="_blank" href="/testing-for-normality-using-skewness-and-kurtosis-afd61be860"> <strong class="kx jh"> Jarque-Bera和综合测试</strong> </a>的输出支持，用于显示在训练总结的底部面板中的常态。两个测试都表明残差在p &lt; .001处不是正态分布的。</p><figure class="nd ne nf ng gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi op"><img src="../Images/8373fa3a01a286692699ac2886936bb0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*cUweBylAGkpErTNNkb0Gfw.png"/></div></div><p class="iz ja gj gh gi jb jc bd b be z dk translated">正态性的JB检验和综合检验的结果(图片由作者提供)</p></figure><p id="6e6b" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">即使残差不是正态分布的，混合OLS估计仍然是面板数据回归问题的最佳线性无偏估计。残差的非正态性不影响OLS回归模型的蓝色性。</p><p id="e003" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">具有非正态分布的残差的一个缺点是，人们不能<a class="ae jd" rel="noopener" target="_blank" href="/interval-estimation-an-overview-and-a-how-to-guide-for-practitioners-e2a0c4bcf108"> <strong class="kx jh">为模型的预测建立可靠的置信区间</strong> </a>。我们可以容忍小的偏离正态分布，但是大的偏离会使正态分布或学生的t分布失效。因此，可靠的置信区间不能(也不应该)计算。</p><h2 id="f5e9" class="np mg jg bd mh oc od dn ml oe of dp mp le og oh mr li oi oj mt lm ok ol mv om bi translated">残差是齐次的吗？</h2><p id="ce98" class="pw-post-body-paragraph kv kw jg kx b ky mx kh la lb my kk ld le mz lg lh li na lk ll lm nb lo lp lq ij bi translated">如果OLSR模型的残差是异方差的，即残差的方差在<strong class="kx jh"> <em class="nh"> X </em> </strong>的所有值上不是常数，则OLS估计器不是<a class="ae jd" rel="noopener" target="_blank" href="/a-guide-to-estimator-efficiency-bae31a06e570"> <strong class="kx jh">有效的</strong> </a>(尽管它仍然是<a class="ae jd" rel="noopener" target="_blank" href="/understanding-estimation-bias-and-the-bias-variance-tradeoff-79ba42ab79c"> <strong class="kx jh">无偏的</strong> </a>)。</p><p id="a8fc" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">让我们目视检查残差，看看残差相对于<strong class="kx jh"> <em class="nh"> X </em> </strong>的曲线中是否存在任何趋势:</p><pre class="nd ne nf ng gt nk nl nm nn aw no bi"><span id="8b92" class="np mg jg nl b gy nq nr l ns nt">fig, ax = plt.<strong class="nl jh">subplots</strong>()</span><span id="9548" class="np mg jg nl b gy nu nr l ns nt">fig.<strong class="nl jh">suptitle</strong>('Raw residuals of Pooled OLS versus X')</span><span id="2dea" class="np mg jg nl b gy nu nr l ns nt">plt.<strong class="nl jh">ylabel</strong>('Residual (y - mu)')</span><span id="79d3" class="np mg jg nl b gy nu nr l ns nt">plt.<strong class="nl jh">xlabel</strong>(<strong class="nl jh">'X='</strong>+<strong class="nl jh">str</strong>(X_var_names[0]))</span><span id="6853" class="np mg jg nl b gy nu nr l ns nt">ax.<strong class="nl jh">scatter</strong>(pooled_X[X_var_names[0]], pooled_olsr_model_results.<strong class="nl jh">resid</strong>, <strong class="nl jh">s</strong>=4, <strong class="nl jh">c</strong>=<strong class="nl jh">'</strong>black<strong class="nl jh">'</strong>, <strong class="nl jh">label</strong>=<strong class="nl jh">'</strong>Residual Error<strong class="nl jh">'</strong>)</span><span id="4312" class="np mg jg nl b gy nu nr l ns nt">plt.<strong class="nl jh">show</strong>()</span></pre><p id="1612" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">我们看到下面的情节。对于<strong class="kx jh"> <em class="nh"> X </em> </strong>的不同值，残差似乎没有恒定的方差。我用红色箭头标出了差异趋势:</p><figure class="nd ne nf ng gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi oq"><img src="../Images/b36255f4887c2c10fb3c847460218782.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7DdHyP9R2irXhCujy348EQ.png"/></div></div><p class="iz ja gj gh gi jb jc bd b be z dk translated">混合OLS模型的残差与x的关系图。该图显示异方差残差(图片由作者提供)</p></figure><p id="bacd" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">可以通过运行<a class="ae jd" href="https://en.wikipedia.org/wiki/White_test" rel="noopener ugc nofollow" target="_blank">白色测试</a>来确认异方差，其中我们将回归<strong class="kx jh"> <em class="nh"> X </em> </strong>上的残差平方，并测试所得回归模型系数的显著性，如下所示:</p><pre class="nd ne nf ng gt nk nl nm nn aw no bi"><span id="e7b5" class="np mg jg nl b gy nq nr l ns nt">keys = [<strong class="nl jh">'Lagrange Multiplier statistic:'</strong>, <strong class="nl jh">'LM test\'s p-value:'</strong>,<br/>        <strong class="nl jh">'F-statistic:'</strong>, <strong class="nl jh">'F-test\'s ' 'p-value:'</strong>]</span><span id="393d" class="np mg jg nl b gy nu nr l ns nt">results = <strong class="nl jh">het_white</strong>(<strong class="nl jh">resid</strong>=pooled_olsr_model_results.<strong class="nl jh">resid</strong>, <strong class="nl jh">exog</strong>=pooled_X)</span><span id="1547" class="np mg jg nl b gy nu nr l ns nt">print(<strong class="nl jh">'Results of the White test for heteroskedasticity of residual errors ===&gt; '</strong>)<br/>print(<strong class="nl jh">lzip</strong>(keys,results))</span></pre><p id="9eab" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">我们看到以下输出:</p><pre class="nd ne nf ng gt nk nl nm nn aw no bi"><span id="9132" class="np mg jg nl b gy nq nr l ns nt"><strong class="nl jh">Results of the White test for heteroskedasticity of residual errors ===&gt;<br/>[(‘Lagrange Multiplier statistic:’, </strong>9.918681580385458<strong class="nl jh">), (“LM test’s p-value:”, </strong>0.007017552347485667<strong class="nl jh">), (‘F-statistic:’, </strong>5.186450932829045<strong class="nl jh">), (“F-test’s p-value:”, </strong>0.006582734100668208<strong class="nl jh">)]</strong></span></pre><p id="1efb" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">LM检验的p值是&lt; .001 indicating a <strong class="kx jh">对残差是同伦齐次的White检验的零假设</strong>的拒绝。</p><p id="eb1a" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">如前所述，混合OLS回归模型将产生总体值的无偏估计，即使拟合模型的残差是异方差的。但是残差中的异方差将违反<a class="ae jd" href="https://en.wikipedia.org/wiki/Gauss%E2%80%93Markov_theorem" rel="noopener ugc nofollow" target="_blank">高斯-马尔可夫假设</a>中的一个，该假设使OLS估计量成为手头问题的最佳线性无偏估计量。具体而言，当残差是异方差的时，OLS估计器变得<a class="ae jd" rel="noopener" target="_blank" href="/a-guide-to-estimator-efficiency-bae31a06e570"> <strong class="kx jh">低效</strong> </a> <strong class="kx jh"> </strong>，即，它失去了在所有可能的线性无偏估计器中生成具有最低可能方差的预测的能力。当残差是异方差的时，OLS估计量会低估或高估参数估计中的方差，导致参数估计的标准误差被遗漏指定。由于标准误差用于计算置信区间，参数估计的置信区间也变得不正确。对于与模型预测相关的标准误差和置信区间，也可以看到相同类型的不规范。</p><h2 id="9ad9" class="np mg jg bd mh oc od dn ml oe of dp mp le og oh mr li oi oj mt lm ok ol mv om bi translated">残差与响应变量y相关吗？</h2><p id="07b7" class="pw-post-body-paragraph kv kw jg kx b ky mx kh la lb my kk ld le mz lg lh li na lk ll lm nb lo lp lq ij bi translated">让我们绘制相对于y=GDP_PCAP_GWTH_PCNT的残差:</p><pre class="nd ne nf ng gt nk nl nm nn aw no bi"><span id="19a2" class="np mg jg nl b gy nq nr l ns nt">fig, ax = plt.<strong class="nl jh">subplots</strong>()</span><span id="cc8a" class="np mg jg nl b gy nu nr l ns nt">fig.<strong class="nl jh">suptitle</strong>('Raw residuals of Pooled OLS versus y')</span><span id="23ce" class="np mg jg nl b gy nu nr l ns nt">plt.<strong class="nl jh">ylabel</strong>('Residual (y - mu)')</span><span id="ddca" class="np mg jg nl b gy nu nr l ns nt">plt.<strong class="nl jh">xlabel</strong>('y')</span><span id="17cc" class="np mg jg nl b gy nu nr l ns nt">ax.<strong class="nl jh">scatter</strong>(pooled_y, pooled_olsr_model_results.<strong class="nl jh">resid</strong>, <strong class="nl jh">s</strong>=4, <strong class="nl jh">c</strong>=<strong class="nl jh">'</strong>black<strong class="nl jh">'</strong>, <strong class="nl jh">label</strong>=<strong class="nl jh">'</strong>Residual Error<strong class="nl jh">'</strong>)</span><span id="4e52" class="np mg jg nl b gy nu nr l ns nt">plt.<strong class="nl jh">show</strong>()</span></pre><p id="be48" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">我们得到如下的情节:</p><figure class="nd ne nf ng gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi or"><img src="../Images/5ab65e9cf794dd67b38fbc81634bc8c9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4lUMwp_BqaisON5S9kvs-w.png"/></div></div><p class="iz ja gj gh gi jb jc bd b be z dk translated">混合OLS模型相对于y=GDP_PCAP_GWTH_PCNT的残差图(图片由作者提供)</p></figure><p id="f68d" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">在残差和<strong class="kx jh"> <em class="nh"> y </em> </strong>之间似乎有一个线性趋势。使用<a class="ae jd" rel="noopener" target="_blank" href="/the-intuition-behind-correlation-62ca11a3c4a"> <strong class="kx jh">皮尔逊r </strong> </a>的相关性测试证实了这一视觉判断:</p><pre class="nd ne nf ng gt nk nl nm nn aw no bi"><span id="0e14" class="np mg jg nl b gy nq nr l ns nt">keys = [<strong class="nl jh">'Pearson\'s r:'</strong>, <strong class="nl jh">'p-value:'</strong>]</span><span id="70a0" class="np mg jg nl b gy nu nr l ns nt">results = st.<strong class="nl jh">pearsonr</strong>(<strong class="nl jh">x</strong>=pooled_y, <strong class="nl jh">y</strong>=pooled_olsr_model_results.<strong class="nl jh">resid</strong>)</span><span id="546c" class="np mg jg nl b gy nu nr l ns nt">print(<strong class="nl jh">'Results of the Pearson\'s r test of correlation between the residual errors and the response variable y ===&gt;'</strong>)</span><span id="04bf" class="np mg jg nl b gy nu nr l ns nt"><strong class="nl jh">print</strong>(<strong class="nl jh">lzip</strong>(keys,results))</span></pre><p id="5868" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">我们看到以下输出:</p><pre class="nd ne nf ng gt nk nl nm nn aw no bi"><span id="b7cf" class="np mg jg nl b gy nq nr l ns nt"><strong class="nl jh">Results of the Pearson's r test of correlation between the residual errors and the response variable y ===&gt;</strong><br/>[("<strong class="nl jh">Pearson's r:</strong>", 0.6149931069935411), ('<strong class="nl jh">p-value:</strong>', 3.996454333518694e-18)]</span></pre><p id="e122" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">第一个值0.61499是残差和<strong class="kx jh"><em class="nh"/></strong>之间的相关量(~ 61%)，第二个值3.99645e-18是结果的p值。我们将忽略报告的p值，因为我们知道残差远非正态分布。无论如何，报道的相关性(61%)本身明显大于零，因此是显著的。</p><p id="0fcc" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">回归残差和响应变量之间的高度相关性表明，我们的混合OLSR模型缺少重要的解释变量，否则这些变量将能够“解释”这种相关性。无论该国的人均GDP增长率(<strong class="kx jh"> <em class="nh"> y </em> </strong>)如何变化，总资本形成率(<strong class="kx jh"> <em class="nh"> X </em> </strong>)都无法解释已经以与<strong class="kx jh"> <em class="nh"> y </em> </strong>相关和异方差的形式泄漏到残差中。</p><h2 id="9fb9" class="np mg jg bd mh oc od dn ml oe of dp mp le og oh mr li oi oj mt lm ok ol mv om bi translated">残差是自相关的吗？</h2><p id="fbfd" class="pw-post-body-paragraph kv kw jg kx b ky mx kh la lb my kk ld le mz lg lh li na lk ll lm nb lo lp lq ij bi translated">让我们绘制残差的自相关函数(ACF)图:</p><pre class="nd ne nf ng gt nk nl nm nn aw no bi"><span id="7035" class="np mg jg nl b gy nq nr l ns nt">tsap.<strong class="nl jh">plot_acf</strong>(<strong class="nl jh">x</strong>=pooled_olsr_model_results.<strong class="nl jh">resid</strong>)</span><span id="2d2f" class="np mg jg nl b gy nu nr l ns nt"><strong class="nl jh">plt</strong>.show()</span></pre><p id="e40f" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">我们看到下面的情节:</p><figure class="nd ne nf ng gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi os"><img src="../Images/f2b95a1c544dbce9bdda2c93be890f40.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*w45Ukahhyr1qK1ajzMEPDQ.png"/></div></div><p class="iz ja gj gh gi jb jc bd b be z dk translated">混合OLSR模型残差的自相关图(图片由作者提供)</p></figure><p id="6c8b" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">滞后0时1.0的完美相关性将被忽略，因为一个数总是与其自身完美相关。但我们看到滞后1、2和3处的残差之间存在显著的自相关。</p><p id="769c" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">正如残差中的异方差一样，残差中的自相关违反了高斯-马尔可夫假设中的一个假设，该假设使OLS估计量变蓝。具体来说，自相关残差会导致标准误差被遗漏指定(低估)，从而导致t值(或z值)被高估，并且参数估计的置信区间被遗漏指定。实际上为零(即无关紧要)的系数可能被错误地报告为非零(重要)。</p><h1 id="bf61" class="mf mg jg bd mh mi mj mk ml mm mn mo mp km mq kn mr kp ms kq mt ks mu kt mv mw bi translated">调查结果摘要</h1><p id="84ac" class="pw-post-body-paragraph kv kw jg kx b ky mx kh la lb my kk ld le mz lg lh li na lk ll lm nb lo lp lq ij bi translated">总之，我们发现我们为世界银行数据集构建的混合OLS回归模型具有以下特性:</p><ul class=""><li id="13aa" class="lr ls jg kx b ky kz lb lc le lt li lu lm lv lq ot lx ly lz bi translated">其<strong class="kx jh">调整后的R平方约为62% </strong>对于真实世界的数据集来说，这并不坏。</li><li id="e2a6" class="lr ls jg kx b ky ma lb mb le mc li md lm me lq ot lx ly lz bi translated">发现<strong class="kx jh">模型的参数系数在p&lt;0.001处</strong>显著。</li><li id="8328" class="lr ls jg kx b ky ma lb mb le mc li md lm me lq ot lx ly lz bi translated">f检验表明<strong class="kx jh">参数系数在p&lt;0.001处</strong>联合显著。</li><li id="a9cb" class="lr ls jg kx b ky ma lb mb le mc li md lm me lq ot lx ly lz bi translated">模型的<strong class="kx jh">残差不是正态分布的</strong>，这意味着与模型预测相关的标准误差和置信区间可能不完全可靠。</li><li id="746c" class="lr ls jg kx b ky ma lb mb le mc li md lm me lq ot lx ly lz bi translated"><strong class="kx jh">残差是异方差的</strong>，这意味着模型参数的参数显著性t检验结果、参数估计的相应置信区间以及f检验结果并不完全可靠。该结论适用于与模型预测相关的标准误差和置信区间。</li><li id="1f32" class="lr ls jg kx b ky ma lb mb le mc li md lm me lq ot lx ly lz bi translated"><strong class="kx jh">残差与响应变量<em class="nh">y</em>T3】相关，这意味着模型遗漏了重要的回归变量，否则这些变量将与<strong class="kx jh">T5】yT7】相关，它们的缺失导致相关性的余额泄漏到残差中。</strong></strong></li><li id="bf8e" class="lr ls jg kx b ky ma lb mb le mc li md lm me lq ot lx ly lz bi translated"><strong class="kx jh">残差在滞后1、2和3 </strong>处是自相关的，这意味着模型参数估计的标准误差可能被低估，而报告的z值(或t值)相应地被高估。从功能上讲，残差中的自相关意味着回归模型的一般不规范。</li></ul><p id="6665" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">总的来说，混合OLSR模型的残差分析指向了手头问题的回归模型的错误规范。我们也许可以用面板数据集的另外两种回归模型中的一种做得更好，即<strong class="kx jh">固定效应</strong>和<strong class="kx jh">随机效应</strong>回归模型。</p><p id="08c8" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">在我下周的文章中，我们将深入探讨固定效应回归模型，并研究如何在世界银行数据集上构建和拟合FE模型。我们将比较它与集合OLSR模型的拟合优度。</p></div><div class="ab cl ou ov hu ow" role="separator"><span class="ox bw bk oy oz pa"/><span class="ox bw bk oy oz pa"/><span class="ox bw bk oy oz"/></div><div class="ij ik il im in"><p id="eb0d" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">这里是本文使用的世界银行数据集的<a class="ae jd" href="https://gist.github.com/sachinsdate/c40651e9e4bc13a696780462209f1992" rel="noopener ugc nofollow" target="_blank"> <strong class="kx jh">下载链接</strong> </a>。</p><p id="0edc" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">下面是本文中使用的完整源代码:</p><figure class="nd ne nf ng gt is"><div class="bz fp l di"><div class="pb pc l"/></div></figure></div><div class="ab cl ou ov hu ow" role="separator"><span class="ox bw bk oy oz pa"/><span class="ox bw bk oy oz pa"/><span class="ox bw bk oy oz"/></div><div class="ij ik il im in"><h1 id="3cd0" class="mf mg jg bd mh mi pd mk ml mm pe mo mp km pf kn mr kp pg kq mt ks ph kt mv mw bi translated">参考文献、引文和版权</h1><h2 id="cb4c" class="np mg jg bd mh oc od dn ml oe of dp mp le og oh mr li oi oj mt lm ok ol mv om bi translated">数据集</h2><p id="d792" class="pw-post-body-paragraph kv kw jg kx b ky mx kh la lb my kk ld le mz lg lh li na lk ll lm nb lo lp lq ij bi translated"><a class="ae jd" href="https://databank.worldbank.org/metadataglossary/world-development-indicators/series" rel="noopener ugc nofollow" target="_blank">世界发展指标</a>世界银行数据<a class="ae jd" href="https://www.worldbank.org/en/about/legal/terms-of-use-for-datasets" rel="noopener ugc nofollow" target="_blank"> CC BY 4.0 license </a>。<a class="ae jd" href="https://gist.github.com/sachinsdate/c40651e9e4bc13a696780462209f1992" rel="noopener ugc nofollow" target="_blank"> <strong class="kx jh">下载链接</strong> </a></p><h2 id="f215" class="np mg jg bd mh oc od dn ml oe of dp mp le og oh mr li oi oj mt lm ok ol mv om bi translated">纸质和图书链接</h2><p id="488d" class="pw-post-body-paragraph kv kw jg kx b ky mx kh la lb my kk ld le mz lg lh li na lk ll lm nb lo lp lq ij bi translated">巴蒂·h·巴尔塔吉，<a class="ae jd" href="https://link.springer.com/book/10.1007/978-3-030-53953-5" rel="noopener ugc nofollow" target="_blank"> <em class="nh">面板数据的计量经济分析</em> </a>，第6版，<em class="nh">施普林格</em></p><p id="3656" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">威廉·h·格林，<a class="ae jd" href="https://www.pearson.com/us/higher-education/program/Greene-Econometric-Analysis-8th-Edition/PGM334862.html" rel="noopener ugc nofollow" target="_blank"> <em class="nh">计量经济分析</em> </a>，第8版<em class="nh">，</em> 2018，<em class="nh">培生</em></p><h2 id="8b71" class="np mg jg bd mh oc od dn ml oe of dp mp le og oh mr li oi oj mt lm ok ol mv om bi translated">形象</h2><p id="9273" class="pw-post-body-paragraph kv kw jg kx b ky mx kh la lb my kk ld le mz lg lh li na lk ll lm nb lo lp lq ij bi translated">本文中所有图片的版权归<a class="ae jd" href="https://creativecommons.org/licenses/by-nc-sa/4.0/" rel="noopener ugc nofollow" target="_blank"> CC-BY-NC-SA </a>所有，除非图片下面提到了不同的来源和版权。</p></div></div>    
</body>
</html>