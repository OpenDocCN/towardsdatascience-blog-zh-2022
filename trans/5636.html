<html>
<head>
<title>Environment Variables in Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Python 中的环境变量</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/environment-variables-in-python-a37cab6d2530#2022-12-20">https://towardsdatascience.com/environment-variables-in-python-a37cab6d2530#2022-12-20</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="a99a" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">在本文中，我们将探索如何在 Python 中使用环境变量</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/9ea399b7f660f688121e6a14a68d9ce4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mI0_PbuQmPqMVCSwvUOIUQ.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">由<a class="ae ky" href="https://unsplash.com/s/photos/environment?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的<a class="ae ky" href="https://unsplash.com/@karsten_wuerth?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">卡斯滕·沃思</a>拍摄的照片</p></figure><p id="270d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">目录</strong></p><ul class=""><li id="77d5" class="lv lw it lb b lc ld lf lg li lx lm ly lq lz lu ma mb mc md bi translated">介绍</li><li id="c3cc" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated">如何使用 Python 获取环境变量</li><li id="bfa1" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated">如何使用 Python 设置环境变量</li><li id="d748" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated">结论</li></ul></div><div class="ab cl mj mk hx ml" role="separator"><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo"/></div><div class="im in io ip iq"><h1 id="b9b3" class="mq mr it bd ms mt mu mv mw mx my mz na jz nb ka nc kc nd kd ne kf nf kg ng nh bi translated">介绍</h1><p id="8c32" class="pw-post-body-paragraph kz la it lb b lc ni ju le lf nj jx lh li nk lk ll lm nl lo lp lq nm ls lt lu im bi translated">环境变量是存储在程序之外(在操作系统级别)的变量，它们会影响程序的运行方式，并有助于存储敏感信息。</p><p id="644f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">例如，你的程序可能正在使用一些有密钥的 API。这个密钥应该作为环境变量存储在您正在运行的代码之外。</p><p id="23f1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">但我们为什么要这么做？</p><p id="373d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">使用环境变量有两个主要优点:</p><ol class=""><li id="f452" class="lv lw it lb b lc ld lf lg li lx lm ly lq lz lu nn mb mc md bi translated"><strong class="lb iu">提高敏感数据的安全性</strong>——当多个开发人员在一个代码库上工作时，您可能希望将您的密钥放在代码库之外，以提高安全性。或者，如果您在 GitHub 上共享某个程序的源代码，您希望将您的 API 密匙保密，不要让任何下载代码的人都可以访问。</li><li id="3ff5" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu nn mb mc md bi translated"><strong class="lb iu">自动化</strong> —将秘密存储在环境变量中有助于避免手动更新代码库，例如，当您在其他人的机器上运行相同的代码时。因此，您可以使用环境变量自动更新源代码，而不是根据运行代码的不同“用户”来更改源代码。</li></ol><p id="7af9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">接下来，让我们探索如何在 Python 中使用环境变量！</p><p id="7955" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在本教程中，我们将使用<a class="ae ky" href="https://docs.python.org/3/library/datetime.html" rel="noopener ugc nofollow" target="_blank"> os </a>模块，该模块提供了一种使用操作系统相关功能的可移植方式，因此不需要额外安装。</p></div><div class="ab cl mj mk hx ml" role="separator"><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo"/></div><div class="im in io ip iq"><h1 id="97af" class="mq mr it bd ms mt mu mv mw mx my mz na jz nb ka nc kc nd kd ne kf nf kg ng nh bi translated">如何使用 Python 获取环境变量</h1><p id="0077" class="pw-post-body-paragraph kz la it lb b lc ni ju le lf nj jx lh li nk lk ll lm nl lo lp lq nm ls lt lu im bi translated">在 Python 中，环境变量是通过 os 模块实现的，并且可以使用<strong class="lb iu"> os.environ </strong>进行检索，它提供了表示流程环境的键值对的映射。</p><p id="7c41" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">要使用 Python 获取所有环境变量，只需运行:</p><pre class="kj kk kl km gt no np nq bn nr ns bi"><span id="5b68" class="nt mr it np b be nu nv l nw nx">#Import the required dependency<br/>import os<br/><br/>#Get all environment variables<br/>env_vars = os.environ<br/><br/>#Print environment variables<br/>for key, value in dict(env_vars).items():<br/>    print(f'{key} : {value}')</span></pre><p id="088b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">您应该可以打印出环境变量的完整映射:</p><pre class="kj kk kl km gt no np nq bn nr ns bi"><span id="d167" class="nt mr it np b be nu nv l nw nx">TERM_PROGRAM : vscode<br/>SHELL : /bin/bash<br/>TERM_PROGRAM_VERSION : 1.72.2<br/>ORIGINAL_XDG_CURRENT_DESKTOP : undefined<br/>USER : datas<br/>PATH : /Library/Frameworks/Python.framework/Versions/3.7<br/>__CFBundleIdentifier : com.microsoft.VSCode<br/>LANG : en_US.UTF-8<br/>HOME : /Users/datas<br/>COLORTERM : truecolor<br/>_ : /usr/local/bin/python3<br/>__PYVENV_LAUNCHER__ : /usr/local/bin/python3</span></pre><p id="aeca" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">为了获得特定环境变量的值，我们将使用<strong class="lb iu"> os.environ.get() </strong>。它将检索指定的环境变量的值。</p><p id="8d7a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">例如，我想检索用户环境变量:</p><pre class="kj kk kl km gt no np nq bn nr ns bi"><span id="3d3e" class="nt mr it np b be nu nv l nw nx">#Import the required dependency<br/>import os<br/><br/>#Get specific environment variable<br/>user_var = os.environ.get('USER')<br/><br/>#Print environment variables<br/>print(user_var)</span></pre><p id="4817" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">您应该可以打印出系统上设置的特定用户变量。</p><p id="00f9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我的情况是:</p><pre class="kj kk kl km gt no np nq bn nr ns bi"><span id="e767" class="nt mr it np b be nu nv l nw nx">datas</span></pre><p id="3373" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果你要查找一个没有匹配关键字的环境变量，代码应该简单地返回“None”。</p><p id="1746" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们尝试查找一些不存在的环境变量，比如“TEST_PASSWORD”:</p><pre class="kj kk kl km gt no np nq bn nr ns bi"><span id="5f4d" class="nt mr it np b be nu nv l nw nx">#Import the required dependency<br/>import os<br/><br/>#Get specific environment variable<br/>pwd_var = os.environ.get('TEST_PASSWORD')<br/><br/>#Print environment variables<br/>print(pwd_var)</span></pre><p id="dffe" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">您应该得到:</p><pre class="kj kk kl km gt no np nq bn nr ns bi"><span id="9762" class="nt mr it np b be nu nv l nw nx">None</span></pre></div><div class="ab cl mj mk hx ml" role="separator"><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo"/></div><div class="im in io ip iq"><h1 id="8e9e" class="mq mr it bd ms mt mu mv mw mx my mz na jz nb ka nc kc nd kd ne kf nf kg ng nh bi translated">如何使用 Python 设置环境变量</h1><p id="3be7" class="pw-post-body-paragraph kz la it lb b lc ni ju le lf nj jx lh li nk lk ll lm nl lo lp lq nm ls lt lu im bi translated">在 Python 中，环境变量是通过 os 模块实现的，并且可以使用<strong class="lb iu"> os.environ </strong>进行设置，这与将键值对插入字典是一样的。</p><p id="b504" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">环境变量 key 和值都必须是字符串格式。</p><p id="322e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在上一节中，我们尝试检索一个不存在的环境变量“TEST_PASSWORD”，代码返回“None”。</p><p id="41b7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在让我们用一个自定义值设置这个环境变量，并将其打印出来:</p><pre class="kj kk kl km gt no np nq bn nr ns bi"><span id="b2df" class="nt mr it np b be nu nv l nw nx">#Import the required dependency<br/>import os<br/><br/>#Set specific environment variable<br/>os.environ['TEST_PASSWORD'] = '12345'<br/><br/>#Get specific environment variable<br/>pwd_var = os.environ.get('TEST_PASSWORD')<br/><br/>#Print environment variables<br/>print(pwd_var)</span></pre><p id="5a00" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">您应该得到:</p><pre class="kj kk kl km gt no np nq bn nr ns bi"><span id="00ba" class="nt mr it np b be nu nv l nw nx">12345</span></pre><p id="c8cf" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">注意:</strong>在运行代码时，对环境变量(在我们的例子中是添加的环境变量)的更改只对这一个会话有效。它不会影响系统环境变量或其他会话中的环境变量。</p></div><div class="ab cl mj mk hx ml" role="separator"><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo"/></div><div class="im in io ip iq"><h1 id="de67" class="mq mr it bd ms mt mu mv mw mx my mz na jz nb ka nc kc nd kd ne kf nf kg ng nh bi translated">结论</h1><p id="3e90" class="pw-post-body-paragraph kz la it lb b lc ni ju le lf nj jx lh li nk lk ll lm nl lo lp lq nm ls lt lu im bi translated">在本文中，我们将探索如何在 Python 中使用环境变量。</p><p id="797c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们重点讨论了如何使用 Python 获取现有的环境变量，以及如何在 Python 中为会话设置环境变量。</p><p id="aa21" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果你有任何问题或对编辑有任何建议，请随时在下面留下评论，并查看我的更多<a class="ae ky" href="https://pyshark.com/category/python-programming/" rel="noopener ugc nofollow" target="_blank"> Python 编程</a>教程。</p></div><div class="ab cl mj mk hx ml" role="separator"><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo"/></div><div class="im in io ip iq"><p id="1b55" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><em class="ny">原载于 2022 年 12 月 20 日 https://pyshark.com</em><em class="ny"/><a class="ae ky" href="https://pyshark.com/environment-variables-in-python/" rel="noopener ugc nofollow" target="_blank"><em class="ny">。</em></a></p></div></div>    
</body>
</html>