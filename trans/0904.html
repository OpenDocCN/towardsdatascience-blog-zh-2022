<html>
<head>
<title>Three Techniques for Scaling Features for Machine Learning</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用于机器学习的缩放特征的三种技术</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/three-techniques-for-scaling-features-for-machine-learning-a7bc063ecd69#2022-03-10">https://towardsdatascience.com/three-techniques-for-scaling-features-for-machine-learning-a7bc063ecd69#2022-03-10</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="0d6e" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">现代数据堆栈的扩展功能</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/7dca3b667aa53892faf138ef7b73dcbd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*ugnq6J0fRsbHz9nt"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">照片由<a class="ae kv" href="https://unsplash.com/@julensan09?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Julentto 摄影</a>在<a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</p></figure><p id="6aa6" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">虽然数字特征的缩放并不总是需要像<a class="ae kv" href="https://medium.com/@praveenmec67" rel="noopener"> Praveen Thenraj </a>在他关于基于树的机器学习技术的<a class="ae kv" rel="noopener" target="_blank" href="/do-decision-trees-need-feature-scaling-97809eaa60c6">帖子</a>中解释的那样进行，但它确实有利于线性和逻辑回归、支持向量机和神经网络。许多数据科学家已经创建了建模脚本，用于自动构建和测试许多不同类型的建模算法。这些脚本允许数据科学家为该数据选择性能最佳的模型。特征的缩放通常在这些脚本中执行。</p><p id="5bc6" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">使用了两种主要的缩放技术。第一种是标准缩放(或 z 缩放),计算方法是减去平均值并除以标准差。第二个是最小-最大缩放，计算方法是减去最小值，再除以最大值和最小值之差。</p><h2 id="c83a" class="ls lt iq bd lu lv lw dn lx ly lz dp ma lf mb mc md lj me mf mg ln mh mi mj mk bi translated">sci kit-基于学习的缩放</h2><p id="129a" class="pw-post-body-paragraph kw kx iq ky b kz ml jr lb lc mm ju le lf mn lh li lj mo ll lm ln mp lp lq lr ij bi translated">通过从预处理模块导入<code class="fe mq mr ms mt b">StandardScaler</code>并将其应用于数据帧，标准缩放器可用于缩放列<code class="fe mq mr ms mt b">scale_columns</code>的列表</p><pre class="kg kh ki kj gt mu mt mv mw aw mx bi"><span id="cbf1" class="ls lt iq mt b gy my mz l na nb">from sklearn.preprocessing import StandardScaler<br/>scaler = StandardScaler()<br/>df[scale_columns] = scaler.fit_transform(df[scale_columns])</span></pre><p id="49a3" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">类似地，最小-最大缩放器可以应用于与</p><pre class="kg kh ki kj gt mu mt mv mw aw mx bi"><span id="b7dc" class="ls lt iq mt b gy my mz l na nb">from sklearn.preprocessing import MinMaxScaler<br/>scaler = MinMaxScaler()<br/>df[scale_columns] = scaler.fit_transform(df[scale_columns])</span></pre><h2 id="1e17" class="ls lt iq bd lu lv lw dn lx ly lz dp ma lf mb mc md lj me mf mg ln mh mi mj mk bi translated">仅基于熊猫的缩放</h2><p id="83a8" class="pw-post-body-paragraph kw kx iq ky b kz ml jr lb lc mm ju le lf mn lh li lj mo ll lm ln mp lp lq lr ij bi translated">由于 scikit-learn 模块相当大，如果它仅用于缩放特征，那么使用 pandas 进行缩放会更容易。要按平均值和标准差缩放每个要素，请调用</p><pre class="kg kh ki kj gt mu mt mv mw aw mx bi"><span id="a35e" class="ls lt iq mt b gy my mz l na nb">df[scale_columns] = (df[scale_columns] - df[scale_columns].mean()) /<br/>                     df[scale_columns].std()</span></pre><p id="18d1" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">请注意，这并不重复来自<code class="fe mq mr ms mt b">StandardScaler</code>的结果。这是因为 scikit-learn 使用了 numpy 的<code class="fe mq mr ms mt b">std</code>函数。默认情况下，该函数使用 0 个自由度。另一方面，熊猫的<code class="fe mq mr ms mt b">std</code>是默认的无偏估计量。要获得相同的值，请运行</p><pre class="kg kh ki kj gt mu mt mv mw aw mx bi"><span id="67e2" class="ls lt iq mt b gy my mz l na nb">df[scale_columns] = (df[scale_columns] - df[scale_columns].mean()) /<br/>                     df[scale_columns].std(ddof=1)</span></pre><p id="6618" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">类似地，要获得最小-最大缩放器，运行</p><pre class="kg kh ki kj gt mu mt mv mw aw mx bi"><span id="2956" class="ls lt iq mt b gy my mz l na nb">df[scale_columns] = (df[scale_columns] - df[scale_columns].min()) /<br/>                 (df[scale_columns].max() - df[scale_columns].min())</span></pre><h2 id="c0cd" class="ls lt iq bd lu lv lw dn lx ly lz dp ma lf mb mc md lj me mf mg ln mh mi mj mk bi translated">数据仓库中的 RasgoQL 伸缩</h2><p id="ceff" class="pw-post-body-paragraph kw kx iq ky b kz ml jr lb lc mm ju le lf mn lh li lj mo ll lm ln mp lp lq lr ij bi translated">开源 Python 包<a class="ae kv" href="https://github.com/rasgointelligence/RasgoQL" rel="noopener ugc nofollow" target="_blank"> RasgoQL </a>可以直接在数据仓库中创建缩放变量，而不是从数据仓库中提取数据。首先，这将节省提取数据并在缩放后将其推回数据仓库的时间。其次，通过利用仓库的能力，可以一次转换大得多的数据集。</p><p id="2f03" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">标准定标器可用作</p><pre class="kg kh ki kj gt mu mt mv mw aw mx bi"><span id="c66e" class="ls lt iq mt b gy my mz l na nb">scaledset = dataset.standard_scaler(<br/>                       columns_to_scale=['DS_DAILY_HIGH_TEMP', <br/>                                         'DS_DAILY_LOW_TEMP',<br/>                                         'DS_DAILY_TEMP_VARIATION',<br/>                                         'DS_DAILY_TOTAL_RAINFALL'])</span><span id="47e7" class="ls lt iq mt b gy nc mz l na nb">scaledset.save(table_name='DS_STANDARD_SCALED')</span></pre><p id="ac1c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">类似地，最小-最大缩放器可以应用为</p><pre class="kg kh ki kj gt mu mt mv mw aw mx bi"><span id="c159" class="ls lt iq mt b gy my mz l na nb">scaledset = dataset.min_max_scaler(<br/>                       columns_to_scale=['DS_DAILY_HIGH_TEMP', <br/>                                         'DS_DAILY_LOW_TEMP',<br/>                                         'DS_DAILY_TEMP_VARIATION',<br/>                                         'DS_DAILY_TOTAL_RAINFALL'])</span><span id="a2a3" class="ls lt iq mt b gy nc mz l na nb">scaledset.save(table_name='DS_MIN_MAX_SCALED')</span></pre><p id="8e2e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这些缩放后的要素现在可以通过连接到原始数据或任何其他数据来使用。它们还可以用于管道建模、数据可视化和生产管道预测。可以通过调用<code class="fe mq mr ms mt b">to_df</code>将缩放后的数据下载到 pandas 中用于建模</p><pre class="kg kh ki kj gt mu mt mv mw aw mx bi"><span id="6c01" class="ls lt iq mt b gy my mz l na nb">df = scaledset.to_df()</span></pre><p id="3106" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果您想检查 RasgoQL 用来创建这个表或视图的 SQL，运行<code class="fe mq mr ms mt b">sql</code>:</p><pre class="kg kh ki kj gt mu mt mv mw aw mx bi"><span id="8a17" class="ls lt iq mt b gy my mz l na nb">print(scaledset.sql())</span></pre><p id="6aa0" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">最后，如果您在生产中使用 dbt，并且希望将这项工作导出为 dbt 模型，供您的数据工程团队使用，请致电<code class="fe mq mr ms mt b">to_dbt</code>:</p><pre class="kg kh ki kj gt mu mt mv mw aw mx bi"><span id="f1bd" class="ls lt iq mt b gy my mz l na nb">scaledset.to_dbt(project_directory='&lt;path to dbt project&gt;'</span></pre><p id="0342" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">当在单台机器上处理少量数据时，scikit-learn 和 pandas 方法将很好地用于在建模之前缩放特征。但是，如果数据很大或者已经存储在数据库中，在数据库中执行缩放(使用 RasgoQL 或 SQL)可以在数据准备期间节省大量时间。更重要的是，用于缩放数据的代码可以很容易地放入生产工作流中，潜在地节省了将模型投入生产的数周时间。</p><p id="b504" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果您想查看 RasgoQL，可以在这里找到文档<a class="ae kv" href="https://docs.rasgoql.com/" rel="noopener ugc nofollow" target="_blank">，在这里</a>找到存储库<a class="ae kv" href="https://github.com/rasgointelligence/RasgoQL" rel="noopener ugc nofollow" target="_blank">。</a></p></div></div>    
</body>
</html>