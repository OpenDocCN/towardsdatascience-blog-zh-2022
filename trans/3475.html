<html>
<head>
<title>Interpreting ACF and PACF Plots for Time Series Forecasting</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">解读用于时间序列预测的ACF和PACF图</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/interpreting-acf-and-pacf-plots-for-time-series-forecasting-af0d6db4061c#2022-08-02">https://towardsdatascience.com/interpreting-acf-and-pacf-plots-for-time-series-forecasting-af0d6db4061c#2022-08-02</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="3722" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">如何确定AR和MA模型的阶数</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/041a4a548e1e2e5470a83ac07a5895a6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*QKqzfIHFSm2xCvphNoedJA.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">图片由作者通过<a class="ae ky" href="https://www.kaggle.com/code/iamleonie/time-series-interpreting-acf-and-pacf/notebook" rel="noopener ugc nofollow" target="_blank"> Kaggle </a>提供</p></figure><p id="03db" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">自相关分析是时间序列预测探索性数据分析的重要步骤。<strong class="lb iu">自相关分析有助于检测模式和检查随机性。</strong>当您打算使用自回归移动平均(ARMA)模型进行预测时，这一点尤为重要，因为它有助于确定其参数。该分析包括查看自相关函数(ACF)和偏自相关函数(PACF)图。</p><blockquote class="lv"><p id="20de" class="lw lx it bd ly lz ma mb mc md me lu dk translated">这篇文章帮助你建立一个解释ACF和PACF情节的直觉。</p></blockquote><p id="1271" class="pw-post-body-paragraph kz la it lb b lc mf ju le lf mg jx lh li mh lk ll lm mi lo lp lq mj ls lt lu im bi translated">这篇文章帮助你建立一种直觉来解释这些ACF和PACF情节。我们将简要回顾ACF和PACF的基本原理。然而，由于重点在于对剧情的<strong class="lb iu">解读</strong>，对底层数学的详细讨论超出了本文的范围。我们将参考其他资源。</p></div><div class="ab cl mk ml hx mm" role="separator"><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp"/></div><div class="im in io ip iq"><p id="7df8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><em class="mr">本文是我的</em> <a class="ae ky" href="https://www.kaggle.com/code/iamleonie/time-series-interpreting-acf-and-pacf/notebook" rel="noopener ugc nofollow" target="_blank"> <em class="mr"> Kaggle笔记本</em> </a> <em class="mr">的改版，原载于2021年12月。您可以在那里下载或派生代码。</em></p><h1 id="a2fb" class="ms mt it bd mu mv mw mx my mz na nb nc jz nd ka ne kc nf kd ng kf nh kg ni nj bi translated">基本原则</h1><p id="19c7" class="pw-post-body-paragraph kz la it lb b lc nk ju le lf nl jx lh li nm lk ll lm nn lo lp lq no ls lt lu im bi translated">ACF和PACF图用于计算AR、MA和ARMA模型的阶数。在这一节中，我们将只简要介绍相关术语。对于详细的解释，我们将参考其他资源。</p><h2 id="1aba" class="np mt it bd mu nq nr dn my ns nt dp nc li nu nv ne lm nw nx ng lq ny nz ni oa bi translated">自回归和移动平均模型</h2><p id="0170" class="pw-post-body-paragraph kz la it lb b lc nk ju le lf nl jx lh li nm lk ll lm nn lo lp lq no ls lt lu im bi translated"><strong class="lb iu">自回归模型</strong></p><p id="b458" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">自回归(AR)模型假设当前值(y_t)依赖于先前值 ( <em class="mr"> y_( </em> t-1)，y_(t-2)，…)。因为这个假设，我们可以建立一个<strong class="lb iu">线性</strong>回归模型。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ob"><img src="../Images/119790be78f301f912f4bcebe6d605cf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1364/format:webp/1*O6l94lPN-3dl4y-ilEirbw.png"/></div></figure><p id="d679" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">要弄清楚一个AR模型的<strong class="lb iu">顺序，你需要<strong class="lb iu">看一下PACF </strong>。</strong></p><p id="578e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">移动平均模型</strong></p><p id="7fba" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">移动平均(MA)模型假设当前值(y_t)取决于误差项，包括当前误差(𝜖_t，𝜖_(t-1),…).因为误差项是随机的，所以在当前值和误差项之间没有线性关系。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ob"><img src="../Images/64d37a39079082fe068fb09581a80099.png" data-original-src="https://miro.medium.com/v2/resize:fit:1364/format:webp/1*ye-hv0jI0nYGdJiBOCkTKQ.png"/></div></figure><p id="70f8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">要搞清楚一个MA型号的<strong class="lb iu">顺序，需要<strong class="lb iu">看ACF </strong>。</strong></p><h2 id="de3b" class="np mt it bd mu nq nr dn my ns nt dp nc li nu nv ne lm nw nx ng lq ny nz ni oa bi translated">前提条件:平稳性</h2><p id="bac3" class="pw-post-body-paragraph kz la it lb b lc nk ju le lf nl jx lh li nm lk ll lm nn lo lp lq no ls lt lu im bi translated">ACF和PACF假设基础时间序列平稳。</p><h2 id="a5a6" class="np mt it bd mu nq nr dn my ns nt dp nc li nu nv ne lm nw nx ng lq ny nz ni oa bi translated">自相关函数(ACF)和偏自相关函数(PACF)</h2><p id="e897" class="pw-post-body-paragraph kz la it lb b lc nk ju le lf nl jx lh li nm lk ll lm nn lo lp lq no ls lt lu im bi translated">ACF和PACF用于计算AR、MA和ARMA模型的阶数。</p><p id="1853" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果你需要一些关于ACF和PACF的介绍或复习，我推荐以下视频:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oc od l"/></div></figure><p id="9ef6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">自相关函数</strong></p><p id="db3b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">自相关是时间序列与其自身滞后版本之间的相关性。ACF从滞后0开始，这是时间序列与其自身的相关性，因此导致相关性为1。</p><p id="011b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们将使用<code class="fe oe of og oh b">statsmodels.graphics.tsaplots</code>库[5]中的<code class="fe oe of og oh b">plot_acf</code>函数。在这篇文章中，我们将只看15个滞后，因为我们使用了最少的例子。</p><pre class="kj kk kl km gt oi oh oj ok aw ol bi"><span id="d3f9" class="np mt it oh b gy om on l oo op">from statsmodels.graphics.tsaplots import plot_acf</span><span id="6b9f" class="np mt it oh b gy oq on l oo op">plot_acf(time_series_values, lags = 15) </span></pre><p id="04f4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">ACF图可以回答以下问题:</p><ul class=""><li id="7b3b" class="or os it lb b lc ld lf lg li ot lm ou lq ov lu ow ox oy oz bi translated">观察到的时间序列<strong class="lb iu">是否为白噪声/随机</strong>？</li><li id="3159" class="or os it lb b lc pa lf pb li pc lm pd lq pe lu ow ox oy oz bi translated">一个观察值是否与一个相邻的观察值相关，一个被删除两次的观察值，等等？</li><li id="c4ad" class="or os it lb b lc pa lf pb li pc lm pd lq pe lu ow ox oy oz bi translated">观察到的时间序列可以用<strong class="lb iu"> MA模型</strong>建模吗？如果是，顺序是什么？</li></ul><p id="7dbf" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">偏自相关函数(PACF) </strong></p><blockquote class="pf pg ph"><p id="8ce6" class="kz la mr lb b lc ld ju le lf lg jx lh pi lj lk ll pj ln lo lp pk lr ls lt lu im bi translated">滞后k处的部分自相关是滞后1到𝑘−1.没有考虑的X_t_t和X_(t-k)之间的自相关[4]</p></blockquote><p id="ceab" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们将使用<code class="fe oe of og oh b">statsmodels.graphics.tsaplots</code>库中的<code class="fe oe of og oh b">plot_pacf</code>函数，带有参数<code class="fe oe of og oh b">method = "ols"</code>(时间序列的滞后和常数回归)[5]。</p><pre class="kj kk kl km gt oi oh oj ok aw ol bi"><span id="25d2" class="np mt it oh b gy om on l oo op">from statsmodels.graphics.tsaplots import plot_pacf</span><span id="7015" class="np mt it oh b gy oq on l oo op">plot_pacf(time_series_values, lags = 15, method = "ols")</span></pre><p id="7b96" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><em class="mr">侧注:</em> <code class="fe oe of og oh b"><em class="mr">method</em></code> <em class="mr">的默认参数是</em> <code class="fe oe of og oh b"><em class="mr">yw</em></code> <em class="mr"> (Yule-Walker在acovf的分母中调整样本大小)。但是，该默认值会导致样本数据中出现一些高于1的不可信自相关。因此，我们将</em> <code class="fe oe of og oh b"><em class="mr">method</em></code> <em class="mr">参数更改为不会导致此问题的参数。</em> <code class="fe oe of og oh b"><em class="mr">ywmle</em></code> <em class="mr">也能很好地工作，就像这篇StackExchange帖子中建议的那样[3]。</em></p><p id="4a59" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">PACF图可以为以下问题提供答案:</p><ul class=""><li id="3079" class="or os it lb b lc ld lf lg li ot lm ou lq ov lu ow ox oy oz bi translated">观察到的时间序列可以用一个<strong class="lb iu"> AR模型</strong>建模吗？如果是，顺序是什么？</li></ul><h2 id="dfaa" class="np mt it bd mu nq nr dn my ns nt dp nc li nu nv ne lm nw nx ng lq ny nz ni oa bi translated">AR、MA和ARMA模型的阶数</h2><p id="f412" class="pw-post-body-paragraph kz la it lb b lc nk ju le lf nl jx lh li nm lk ll lm nn lo lp lq no ls lt lu im bi translated">下面你可以看到一个ACF和PACF图的例子。这些地块被称为“棒棒糖地块”[2]。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pl"><img src="../Images/f8fa76de1b3846148619faf44f2a79e4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*TaDZs7MKjvpIGRDm_534qg.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">ACF和PACF图的示例。(图片由作者通过<a class="ae ky" href="https://www.kaggle.com/code/iamleonie/time-series-interpreting-acf-and-pacf/notebook" rel="noopener ugc nofollow" target="_blank"> Kaggle </a>提供)</p></figure><p id="64eb" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">ACF和PACF都以0 的<strong class="lb iu">滞后开始，这是时间序列与其自身的相关性，因此导致1 </strong>的<strong class="lb iu">相关性。</strong></p><p id="8786" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">ACF和PACF的区别在于计算中是否包含间接相关性。</p><p id="e6a0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">此外，您可以在ACF和PACF图中看到一个蓝色区域。这个蓝色区域描绘了95%的置信区间，并且是<strong class="lb iu">显著性阈值</strong>的指示器。这意味着，蓝色区域内的任何东西在统计上接近于零，蓝色区域外的任何东西在统计上不为零。</p><p id="9567" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">要确定模型的顺序，您需要检查:</p><blockquote class="pf pg ph"><p id="2091" class="kz la mr lb b lc ld ju le lf lg jx lh pi lj lk ll pj ln lo lp pk lr ls lt lu im bi translated">“在下一个棒棒糖进入蓝色区域之前，有多少棒棒糖高于或低于置信区间？”— [2]</p></blockquote><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pm"><img src="../Images/1cf33bc75472a78e3a38557eccdccd34.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*X7T8Xg1DAqAYf9dcX6n_7A.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">图片由作者via <a class="ae ky" href="https://www.kaggle.com/code/iamleonie/time-series-interpreting-acf-and-pacf/notebook" rel="noopener ugc nofollow" target="_blank"> Kaggle </a>启发而来[1]</p></figure></div><div class="ab cl mk ml hx mm" role="separator"><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp"/></div><div class="im in io ip iq"><h1 id="b0c9" class="ms mt it bd mu mv pn mx my mz po nb nc jz pp ka ne kc pq kd ng kf pr kg ni nj bi translated">例子</h1><p id="0e7b" class="pw-post-body-paragraph kz la it lb b lc nk ju le lf nl jx lh li nm lk ll lm nn lo lp lq no ls lt lu im bi translated">在本节中，我们将查看一些时间序列示例，并了解:</p><ul class=""><li id="3dfc" class="or os it lb b lc ld lf lg li ot lm ou lq ov lu ow ox oy oz bi translated">ACF和PACF图是什么样子的</li><li id="4138" class="or os it lb b lc pa lf pb li pc lm pd lq pe lu ow ox oy oz bi translated">如何确定是用AR模型还是MA模型对时间序列建模</li><li id="c37d" class="or os it lb b lc pa lf pb li pc lm pd lq pe lu ow ox oy oz bi translated">如何确定AR或MA模型的阶数</li><li id="fc76" class="or os it lb b lc pa lf pb li pc lm pd lq pe lu ow ox oy oz bi translated">如何找到AR或MA模型的参数</li></ul><h2 id="9a75" class="np mt it bd mu nq nr dn my ns nt dp nc li nu nv ne lm nw nx ng lq ny nz ni oa bi translated">AR(1)过程</h2><p id="f70a" class="pw-post-body-paragraph kz la it lb b lc nk ju le lf nl jx lh li nm lk ll lm nn lo lp lq no ls lt lu im bi translated">下面的时间序列是一个AR(1)过程，有128个时间步和<code class="fe oe of og oh b">alpha_1 = 0.5</code>。它满足平稳性的前提条件。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ps"><img src="../Images/d9bf75294089ce11880a490725783c68.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8eUUp8C4W-p0tptAWLeg1A.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">虚构的样本时间序列:alpha_1 = 0.5的AR(1)过程(图片由作者通过<a class="ae ky" href="https://www.kaggle.com/code/iamleonie/time-series-interpreting-acf-and-pacf/notebook" rel="noopener ugc nofollow" target="_blank"> Kaggle </a>提供)</p></figure><p id="401f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">下图显示了生成的ACF和PACF图:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pl"><img src="../Images/452278149d2fd2a717b0de61219e654f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qMP5uCgDpyLiM4m0ZnCAGw.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">ACF和AR(1)过程的PACF图。(图片由作者通过<a class="ae ky" href="https://www.kaggle.com/code/iamleonie/time-series-interpreting-acf-and-pacf/notebook" rel="noopener ugc nofollow" target="_blank"> Kaggle </a>提供)</p></figure><p id="e297" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们可以做出如下观察:</p><ul class=""><li id="381f" class="or os it lb b lc ld lf lg li ot lm ou lq ov lu ow ox oy oz bi translated">有几个明显非零的自相关。因此，时间序列是非随机的。</li><li id="7b3a" class="or os it lb b lc pa lf pb li pc lm pd lq pe lu ow ox oy oz bi translated">PACF图中相邻(滞后= 1)之间的高度自相关</li><li id="6334" class="or os it lb b lc pa lf pb li pc lm pd lq pe lu ow ox oy oz bi translated">ACF图中的几何衰减</li></ul><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pl"><img src="../Images/6f135da168427f310cfda85a91e65901.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*JQ62K6vj7fsugXtVBU0oVw.png"/></div></div></figure><p id="96b0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">基于上表，我们可以使用一个<strong class="lb iu"> AR(1)模型</strong>来建模这个过程。</p><p id="23e2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">对于AR(p=1)，公式为</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ob"><img src="../Images/119790be78f301f912f4bcebe6d605cf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1364/format:webp/1*O6l94lPN-3dl4y-ilEirbw.png"/></div></figure><p id="d79b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">可以重写为以下内容:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi pt"><img src="../Images/3b7f9ba1a3fce51fb4d4254cf8e40e20.png" data-original-src="https://miro.medium.com/v2/resize:fit:1276/format:webp/1*-BkTMrOajLQ_XOU6PjHrmw.png"/></div></figure><p id="d60f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">为了找到参数<code class="fe oe of og oh b">alpha_1</code>,我们拟合AR模型如下:</p><pre class="kj kk kl km gt oi oh oj ok aw ol bi"><span id="4e0e" class="np mt it oh b gy om on l oo op">from statsmodels.tsa.ar_model import AutoReg</span><span id="320a" class="np mt it oh b gy oq on l oo op">ar_model = AutoReg(X_train, <strong class="oh iu">lags = 1</strong>).fit()<br/><br/>ar_model.summary()</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pu"><img src="../Images/65e9d73fe23ac5619a26273d189fdb85.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Oecq8kyVI1IvC_p4zQDMLg.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">AR模型拟合的参数。(图片由作者通过<a class="ae ky" href="https://www.kaggle.com/code/iamleonie/time-series-interpreting-acf-and-pacf/notebook" rel="noopener ugc nofollow" target="_blank"> Kaggle </a>提供)</p></figure><p id="1b64" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如您所见，AR(1)模型符合一个<code class="fe oe of og oh b">alpha_1 = 0.4710</code>，它与我们设定的<code class="fe oe of og oh b">alpha_1 = 0.5</code>非常接近。</p><h2 id="a7af" class="np mt it bd mu nq nr dn my ns nt dp nc li nu nv ne lm nw nx ng lq ny nz ni oa bi translated">AR(2)过程</h2><p id="442c" class="pw-post-body-paragraph kz la it lb b lc nk ju le lf nl jx lh li nm lk ll lm nn lo lp lq no ls lt lu im bi translated">以下时间序列是具有128个时间步长的AR(2)过程，<code class="fe oe of og oh b">alpha_1 = 0.5</code>和<code class="fe oe of og oh b">alpha_2 = -0.5</code>。它满足平稳性的前提条件。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ps"><img src="../Images/dbf0223e0e81359e3763ea1e257a3e24.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gegIfKAQMbxa47A_jJbs4Q.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">虚构样本时间序列:alpha_1 = 0.5，alpha_2 = -0.5的AR(2)过程(图片由作者通过<a class="ae ky" href="https://www.kaggle.com/code/iamleonie/time-series-interpreting-acf-and-pacf/notebook" rel="noopener ugc nofollow" target="_blank"> Kaggle </a>提供)</p></figure><p id="424d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">下图显示了生成的ACF和PACF图:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pl"><img src="../Images/3bcbb20db467d849cfc63864f377c201.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Wq1tGW8rLxnP8PBr-d6o1A.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">ACF和AR(2)过程的PACF图。(图片由作者通过<a class="ae ky" href="https://www.kaggle.com/code/iamleonie/time-series-interpreting-acf-and-pacf/notebook" rel="noopener ugc nofollow" target="_blank"> Kaggle </a>提供)</p></figure><p id="d5ec" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们可以做出如下观察:</p><ul class=""><li id="1332" class="or os it lb b lc ld lf lg li ot lm ou lq ov lu ow ox oy oz bi translated">有几个明显非零的自相关。因此，时间序列是非随机的。</li><li id="7daa" class="or os it lb b lc pa lf pb li pc lm pd lq pe lu ow ox oy oz bi translated">PACF图中相邻(滞后= 1)和近相邻(滞后= 2)观测值之间的高度自相关</li><li id="9ab6" class="or os it lb b lc pa lf pb li pc lm pd lq pe lu ow ox oy oz bi translated">ACF图中的几何衰减</li></ul><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pl"><img src="../Images/6f135da168427f310cfda85a91e65901.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*JQ62K6vj7fsugXtVBU0oVw.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">图片由作者通过<a class="ae ky" href="https://www.kaggle.com/code/iamleonie/time-series-interpreting-acf-and-pacf/notebook" rel="noopener ugc nofollow" target="_blank"> Kaggle </a>获得灵感[1]</p></figure><p id="2dbb" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">基于上表，我们可以使用一个<strong class="lb iu"> AR(2)模型</strong>来建模这个过程。</p><p id="4eff" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">对于AR(p=2)，公式为</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ob"><img src="../Images/119790be78f301f912f4bcebe6d605cf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1364/format:webp/1*O6l94lPN-3dl4y-ilEirbw.png"/></div></figure><p id="4f2a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">可以重写为以下内容:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi pt"><img src="../Images/992c3dfcfa7fa92cf4791deecbcdaf4f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1276/format:webp/1*3Gw4Ht_5h5x3mQF8gHE7Wg.png"/></div></figure><p id="a47f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">为了找到参数<code class="fe oe of og oh b">alpha_1</code>和<code class="fe oe of og oh b">alpha_2</code>，我们拟合AR模型如下:</p><pre class="kj kk kl km gt oi oh oj ok aw ol bi"><span id="2ee9" class="np mt it oh b gy om on l oo op">from statsmodels.tsa.ar_model import AutoReg</span><span id="7044" class="np mt it oh b gy oq on l oo op">ar_model = AutoReg(X_train, <strong class="oh iu">lags = 2</strong>).fit()<br/><br/>ar_model.summary()</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pu"><img src="../Images/ddc74839a3982e810f3ff690bee8d38a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*25gf4WNs4jh3qkWE9u6lSg.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">AR模型拟合的参数。(图片由作者通过<a class="ae ky" href="https://www.kaggle.com/code/iamleonie/time-series-interpreting-acf-and-pacf/notebook" rel="noopener ugc nofollow" target="_blank"> Kaggle </a>提供)</p></figure><p id="4592" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如你所见，AR(2)模型符合一个<code class="fe oe of og oh b">alpha_1 = 0.5191</code>和<code class="fe oe of og oh b">alpha_2 = -0.5855</code>，与我们设定的<code class="fe oe of og oh b">alpha_1 = 0.5</code>和<code class="fe oe of og oh b">alpha_2 = -0.5</code>相当接近。</p><h2 id="1762" class="np mt it bd mu nq nr dn my ns nt dp nc li nu nv ne lm nw nx ng lq ny nz ni oa bi translated">MA(1)过程</h2><p id="8d20" class="pw-post-body-paragraph kz la it lb b lc nk ju le lf nl jx lh li nm lk ll lm nn lo lp lq no ls lt lu im bi translated">以下时间序列是具有128个时间步长和<code class="fe oe of og oh b">beta_1 = 0.5</code>的MA(1)过程。它满足平稳性的前提条件。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ps"><img src="../Images/6429609856db25b6a49f7f388db4ed00.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9UaEJqYaYf4NTp_e0sYz6w.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">虚构的样本时间序列:beta_1 = 0.5的MA(1)过程(图片由作者通过<a class="ae ky" href="https://www.kaggle.com/code/iamleonie/time-series-interpreting-acf-and-pacf/notebook" rel="noopener ugc nofollow" target="_blank"> Kaggle </a>提供)</p></figure><p id="7be6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">下图显示了生成的ACF和PACF图:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pl"><img src="../Images/d293954fb961f45cdb2c3231e93fd3a8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*PEcYzbNVCSavOXDlBL7YoQ.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">ACF和MA(1)过程的PACF图。(图片由作者通过<a class="ae ky" href="https://www.kaggle.com/code/iamleonie/time-series-interpreting-acf-and-pacf/notebook" rel="noopener ugc nofollow" target="_blank"> Kaggle </a>提供)</p></figure><p id="8431" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们可以做出如下观察:</p><ul class=""><li id="bf74" class="or os it lb b lc ld lf lg li ot lm ou lq ov lu ow ox oy oz bi translated">有几个明显非零的自相关。因此，时间序列是非随机的。</li><li id="5c90" class="or os it lb b lc pa lf pb li pc lm pd lq pe lu ow ox oy oz bi translated">ACF图中相邻(滞后= 1)之间的高度自相关</li><li id="bd6e" class="or os it lb b lc pa lf pb li pc lm pd lq pe lu ow ox oy oz bi translated">PACF图中的几何衰变</li></ul><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pl"><img src="../Images/7a1b643f7f0cfedd65156f49516d1997.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wGZyk7Jbtc2pS5I32g51rQ.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">图片由作者via <a class="ae ky" href="https://www.kaggle.com/code/iamleonie/time-series-interpreting-acf-and-pacf/notebook" rel="noopener ugc nofollow" target="_blank"> Kaggle </a>启发而来[1]</p></figure><p id="3655" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">基于上表，我们可以使用一个<strong class="lb iu"> MA(1)模型</strong>来对这个过程建模。</p><p id="fbf7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">用MA(q=1)，公式</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ob"><img src="../Images/64d37a39079082fe068fb09581a80099.png" data-original-src="https://miro.medium.com/v2/resize:fit:1364/format:webp/1*ye-hv0jI0nYGdJiBOCkTKQ.png"/></div></figure><p id="8598" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">可以重写为以下内容:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi pt"><img src="../Images/03f728cd6ace6ae0e1ce0a117af440b4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1276/format:webp/1*IC1MR6sUaLLsQ2WMtTFpOw.png"/></div></figure><p id="30d1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">为了找到参数<code class="fe oe of og oh b">beta_1</code>,我们拟合MA模型如下:</p><pre class="kj kk kl km gt oi oh oj ok aw ol bi"><span id="a8b3" class="np mt it oh b gy om on l oo op">from statsmodels.tsa.arima_model import ARMA</span><span id="fbdd" class="np mt it oh b gy oq on l oo op">ma_model = ARMA(X_train, <strong class="oh iu">order = (0, 1)</strong>).fit()<br/><br/>ma_model.summary()</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pu"><img src="../Images/3957d8bda535d060d159dfbde5e35d4c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*K1sMbHNW2oHUaX68N0rznA.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">(AR)MA模型拟合的参数。(图片由作者通过<a class="ae ky" href="https://www.kaggle.com/code/iamleonie/time-series-interpreting-acf-and-pacf/notebook" rel="noopener ugc nofollow" target="_blank"> Kaggle </a>提供)</p></figure><p id="ea91" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">正如你所看到的，MA(1)模型符合一个<code class="fe oe of og oh b">beta_1 = 0.5172</code>，它与我们设定的<code class="fe oe of og oh b">beta_1 = 0.5</code>非常接近。</p><h2 id="629a" class="np mt it bd mu nq nr dn my ns nt dp nc li nu nv ne lm nw nx ng lq ny nz ni oa bi translated">MA(2)过程</h2><p id="cbb3" class="pw-post-body-paragraph kz la it lb b lc nk ju le lf nl jx lh li nm lk ll lm nn lo lp lq no ls lt lu im bi translated">下面的时间序列是一个MA(2)过程，有128个时间步和<code class="fe oe of og oh b">beta_1 = 0.5</code>和<code class="fe oe of og oh b">beta_2 = 0.5</code>。它满足平稳性的前提条件。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ps"><img src="../Images/faf14c176ffc7b7a0a6d7fa28cf6d6f4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Ij5BrPQfA2O9PS9df9YlWQ.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">虚构的样本时间序列:beta_1 = 0.5和beta_2 = 0.5的MA(2)过程(图片由作者通过<a class="ae ky" href="https://www.kaggle.com/code/iamleonie/time-series-interpreting-acf-and-pacf/notebook" rel="noopener ugc nofollow" target="_blank"> Kaggle </a>提供)</p></figure><p id="f052" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">下图显示了生成的ACF和PACF图:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pl"><img src="../Images/40bdc7113c02a7b83e6492cdde7a44a7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xa5s81TcqWtAN_BpdHhfIg.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">ACF和MA(2)过程的PACF图。(图片由作者通过<a class="ae ky" href="https://www.kaggle.com/code/iamleonie/time-series-interpreting-acf-and-pacf/notebook" rel="noopener ugc nofollow" target="_blank"> Kaggle </a>提供)</p></figure><p id="9532" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们可以做出如下观察:</p><ul class=""><li id="0d36" class="or os it lb b lc ld lf lg li ot lm ou lq ov lu ow ox oy oz bi translated">有几个明显非零的自相关。因此，时间序列是非随机的。</li><li id="8f7d" class="or os it lb b lc pa lf pb li pc lm pd lq pe lu ow ox oy oz bi translated">ACF图中相邻(滞后= 1)和近相邻(滞后= 2)观测值之间的高度自相关</li><li id="e4e8" class="or os it lb b lc pa lf pb li pc lm pd lq pe lu ow ox oy oz bi translated">PACF图中的几何衰变</li></ul><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pl"><img src="../Images/7a1b643f7f0cfedd65156f49516d1997.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wGZyk7Jbtc2pS5I32g51rQ.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">图片由作者via <a class="ae ky" href="https://www.kaggle.com/code/iamleonie/time-series-interpreting-acf-and-pacf/notebook" rel="noopener ugc nofollow" target="_blank"> Kaggle </a>启发而来[1]</p></figure><p id="5053" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">根据上表，我们可以使用一个<strong class="lb iu"> MA(2)模型</strong>来对这个过程建模。</p><p id="22a0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">用MA(q=2)，公式</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ob"><img src="../Images/64d37a39079082fe068fb09581a80099.png" data-original-src="https://miro.medium.com/v2/resize:fit:1364/format:webp/1*ye-hv0jI0nYGdJiBOCkTKQ.png"/></div></figure><p id="b946" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">可以重写为以下内容:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pv"><img src="../Images/3dc1fe023fb28baaef544f33a78f25ca.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*HYTcsVrToHp4hQlBAYTQRg.png"/></div></div></figure><p id="b754" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">为了找到参数<code class="fe oe of og oh b">beta_1</code>和<code class="fe oe of og oh b">beta_2</code>，我们拟合MA模型如下:</p><pre class="kj kk kl km gt oi oh oj ok aw ol bi"><span id="3581" class="np mt it oh b gy om on l oo op">from statsmodels.tsa.arima_model import ARMA</span><span id="20db" class="np mt it oh b gy oq on l oo op">ma_model = ARMA(X_train, <strong class="oh iu">order = (0, 2)</strong>).fit()<br/><br/>ma_model.summary()</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pu"><img src="../Images/ef7e49045efcd5e1b3fec3dba4fc0ace.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*RI6t16qqhacgjJL1Hfh1CA.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">(AR)MA模型拟合的参数。(图片由作者通过<a class="ae ky" href="https://www.kaggle.com/code/iamleonie/time-series-interpreting-acf-and-pacf/notebook" rel="noopener ugc nofollow" target="_blank"> Kaggle </a>提供)</p></figure><p id="3b58" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如你所见，MA(2)模型符合一个<code class="fe oe of og oh b">beta_1 = 0.5226</code>和<code class="fe oe of og oh b">beta_2 = 0.5843</code>，与我们设定的<code class="fe oe of og oh b">beta_1 = 0.5</code>和<code class="fe oe of og oh b">beta_2 = 0.5</code>相当接近。</p><h2 id="83d1" class="np mt it bd mu nq nr dn my ns nt dp nc li nu nv ne lm nw nx ng lq ny nz ni oa bi translated">期刊</h2><p id="e9f4" class="pw-post-body-paragraph kz la it lb b lc nk ju le lf nl jx lh li nm lk ll lm nn lo lp lq no ls lt lu im bi translated">以下时间序列是周期性的，T=12。它由48个时间步长组成。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ps"><img src="../Images/5b66fe0590355835f2638cf16eecf935.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*88oUbu5WaNEMd75weajq9g.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">虚构的样本时间序列:T=12的期刊(图片由作者通过<a class="ae ky" href="https://www.kaggle.com/code/iamleonie/time-series-interpreting-acf-and-pacf/notebook" rel="noopener ugc nofollow" target="_blank"> Kaggle </a>提供)</p></figure><p id="4e22" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">下图显示了生成的ACF和PACF图:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pl"><img src="../Images/b8eb7eadd0b83232039ed0ba215dc99f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*PQsqeRiLw31j6-NfJOSu1w.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">ACF与周期过程的PACF图。(图片由作者通过<a class="ae ky" href="https://www.kaggle.com/code/iamleonie/time-series-interpreting-acf-and-pacf/notebook" rel="noopener ugc nofollow" target="_blank"> Kaggle </a>提供)</p></figure><p id="66ff" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们可以做出如下观察:</p><ul class=""><li id="3c0e" class="or os it lb b lc ld lf lg li ot lm ou lq ov lu ow ox oy oz bi translated">有几个明显非零的自相关。因此，时间序列是非随机的。</li><li id="fc02" class="or os it lb b lc pa lf pb li pc lm pd lq pe lu ow ox oy oz bi translated">PACF图中相邻(滞后= 1)和近相邻观测值之间的高度自相关</li><li id="a1c5" class="or os it lb b lc pa lf pb li pc lm pd lq pe lu ow ox oy oz bi translated">从ACF和PACF图中，我们可以看到与相邻观测值(滞后= 1)的强相关性，以及滞后12，这是t的值</li></ul><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pl"><img src="../Images/6f135da168427f310cfda85a91e65901.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*JQ62K6vj7fsugXtVBU0oVw.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">图片由作者via <a class="ae ky" href="https://www.kaggle.com/code/iamleonie/time-series-interpreting-acf-and-pacf/notebook" rel="noopener ugc nofollow" target="_blank"> Kaggle </a>启发而来[1]</p></figure><p id="4500" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">对于AR(p=12)，公式为</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ob"><img src="../Images/119790be78f301f912f4bcebe6d605cf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1364/format:webp/1*O6l94lPN-3dl4y-ilEirbw.png"/></div></figure><p id="7ad3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">可以重写为以下内容:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pw"><img src="../Images/4465cc386091ce64eb4c9eb5a09779cf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*CX2XbTsCOeu8UoVMJnIxww.png"/></div></div></figure><p id="c078" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">为了找到参数<code class="fe oe of og oh b">alpha_1</code>到<code class="fe oe of og oh b">alpha_12</code>，我们拟合AR模型如下:</p><pre class="kj kk kl km gt oi oh oj ok aw ol bi"><span id="3838" class="np mt it oh b gy om on l oo op">from statsmodels.tsa.ar_model import AutoReg</span><span id="7b54" class="np mt it oh b gy oq on l oo op">ar_model = AutoReg(X_train, <strong class="oh iu">lags = 12</strong>).fit()<br/><br/>ar_model.summary()</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pu"><img src="../Images/0cc8a19b60c128e379852537ae4dee7d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7PTi-GP0V_HxyRBsORhesA.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">AR模型拟合的参数。(图片由作者通过<a class="ae ky" href="https://www.kaggle.com/code/iamleonie/time-series-interpreting-acf-and-pacf/notebook" rel="noopener ugc nofollow" target="_blank"> Kaggle </a>提供)</p></figure><p id="464a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如你所见，MA(2)模型符合参数<code class="fe oe of og oh b">alpha_1..11 = -0.0004</code>和<code class="fe oe of og oh b">alpha_12 = 0.9996</code>，与我们设定的<code class="fe oe of og oh b">alpha_1..11 = 0</code>和<code class="fe oe of og oh b">alpha_12 = 1</code>相当接近。</p><p id="7519" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">有了这些参数，公式可以改写如下:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pv"><img src="../Images/205b6fef353c9e2ee2ce336942500a84.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*DeggWxe70OSZEOYFK-Q51g.png"/></div></div></figure><h2 id="87e6" class="np mt it bd mu nq nr dn my ns nt dp nc li nu nv ne lm nw nx ng lq ny nz ni oa bi translated">白噪声</h2><p id="4813" class="pw-post-body-paragraph kz la it lb b lc nk ju le lf nl jx lh li nm lk ll lm nn lo lp lq no ls lt lu im bi translated">以下时间序列是随机的。它由48个时间步长组成。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ps"><img src="../Images/13fffb4f799bccb61e257262e49861eb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*X-L9qmz7LNOh5CJyokQREQ.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">虚构的时间序列样本:白噪声(图片由作者通过<a class="ae ky" href="https://www.kaggle.com/code/iamleonie/time-series-interpreting-acf-and-pacf/notebook" rel="noopener ugc nofollow" target="_blank"> Kaggle </a>提供)</p></figure><p id="051d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">下图显示了生成的ACF和PACF图:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pl"><img src="../Images/bc926192a92a19992bc362cc058c2cbe.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*eeaZc_8OHFInx6u7VbxiOw.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">ACF和白噪声的PACF图。(图片由作者via <a class="ae ky" href="https://www.kaggle.com/code/iamleonie/time-series-interpreting-acf-and-pacf/notebook" rel="noopener ugc nofollow" target="_blank"> Kaggle </a></p></figure><p id="8517" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们可以做出如下观察:</p><ul class=""><li id="0013" class="or os it lb b lc ld lf lg li ot lm ou lq ov lu ow ox oy oz bi translated">只有一个自相关在滞后为0时显著非零。因此，时间序列是随机的。</li></ul><p id="703a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">建模白噪声是困难的，因为我们无法从ACF和PACF图中检索任何参数。</p><h1 id="bf68" class="ms mt it bd mu mv mw mx my mz na nb nc jz nd ka ne kc nf kd ng kf nh kg ni nj bi translated">结论</h1><p id="f370" class="pw-post-body-paragraph kz la it lb b lc nk ju le lf nl jx lh li nm lk ll lm nn lo lp lq no ls lt lu im bi translated">在本文中，我们查看了AR和MA过程、周期性时间序列和白噪声的各种示例，以帮助您建立解释ACF和PACF图的直觉。</p><p id="95c4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">本文讨论了:</p><ul class=""><li id="90fd" class="or os it lb b lc ld lf lg li ot lm ou lq ov lu ow ox oy oz bi translated">如何检测时间序列中的随机性</li><li id="8bf7" class="or os it lb b lc pa lf pb li pc lm pd lq pe lu ow ox oy oz bi translated">如何确定是用AR模型还是MA模型对时间序列建模</li><li id="04e0" class="or os it lb b lc pa lf pb li pc lm pd lq pe lu ow ox oy oz bi translated">如何确定AR或MA模型的阶数</li><li id="3218" class="or os it lb b lc pa lf pb li pc lm pd lq pe lu ow ox oy oz bi translated">如何找到AR或MA模型的参数</li></ul></div><div class="ab cl mk ml hx mm" role="separator"><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp"/></div><div class="im in io ip iq"><p id="9591" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">下图以备忘单的形式直观地总结了本文:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi px"><img src="../Images/c9fbf8a1ca447e4496238712ce0e3825.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*BFZhxMlJLw_UgFGUVzadRA.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">解读ACF和PACF备忘单(图片由作者提供)</p></figure></div><div class="ab cl mk ml hx mm" role="separator"><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp"/></div><div class="im in io ip iq"><h1 id="21f5" class="ms mt it bd mu mv pn mx my mz po nb nc jz pp ka ne kc pq kd ng kf pr kg ni nj bi translated">喜欢这个故事吗？</h1><p id="b6ed" class="pw-post-body-paragraph kz la it lb b lc nk ju le lf nl jx lh li nm lk ll lm nn lo lp lq no ls lt lu im bi translated">成为一名媒体会员，阅读更多来自我和其他作家的故事。报名时可以使用我的 <a class="ae ky" href="https://medium.com/@iamleonie/membership" rel="noopener"> <em class="mr">推荐链接</em> </a> <em class="mr">支持我。我将收取佣金，不需要你额外付费。</em></p><div class="py pz gp gr qa qb"><a href="https://medium.com/@iamleonie/membership" rel="noopener follow" target="_blank"><div class="qc ab fo"><div class="qd ab qe cl cj qf"><h2 class="bd iu gy z fp qg fr fs qh fu fw is bi translated">通过我的推荐链接加入Medium—Leonie Monigatti</h2><div class="qi l"><h3 class="bd b gy z fp qg fr fs qh fu fw dk translated">阅读Leonie Monigatti(以及媒体上成千上万的其他作家)的每一个故事。您的会员费直接…</h3></div><div class="qj l"><p class="bd b dl z fp qg fr fs qh fu fw dk translated">medium.com</p></div></div><div class="qk l"><div class="ql l qm qn qo qk qp ks qb"/></div></div></a></div><p id="c115" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><em class="mr">在</em><a class="ae ky" href="https://www.linkedin.com/in/804250ab/" rel="noopener ugc nofollow" target="_blank"><em class="mr">LinkedIn</em></a><em class="mr">和</em><a class="ae ky" href="https://www.kaggle.com/iamleonie" rel="noopener ugc nofollow" target="_blank"><em class="mr">ka ggle</em></a><em class="mr">！</em></p><h1 id="16de" class="ms mt it bd mu mv mw mx my mz na nb nc jz nd ka ne kc nf kd ng kf nh kg ni nj bi translated">参考</h1><p id="bc61" class="pw-post-body-paragraph kz la it lb b lc nk ju le lf nl jx lh li nm lk ll lm nn lo lp lq no ls lt lu im bi translated">[1] S. Ali，“解读ACF和PACF阴谋——缺失的手册/备忘单”。linkedin.com。<a class="ae ky" href="https://www.linkedin.com/pulse/reading-acf-pacf-plots-missing-manual-cheatsheet-saqib-ali/" rel="noopener ugc nofollow" target="_blank">https://www . LinkedIn . com/pulse/reading-ACF-pacf-plots-missing-manual-cheat sheet-saq IB-Ali/</a>(2022年7月27日访问)</p><p id="e20e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">[2]“Arauto”，“如何为模型选择参数”。arauto . readthe docs . io .<a class="ae ky" href="https://arauto.readthedocs.io/en/latest/how_to_choose_terms.html" rel="noopener ugc nofollow" target="_blank">https://arauto . readthe docs . io/en/latest/how _ to _ choose _ terms . html</a>(2022年7月29日访问)</p><p id="3bc5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">[3]“交叉验证”，“非常高的PACF值(&gt; 10)意味着什么？”。stackexchange.com。<a class="ae ky" href="https://stats.stackexchange.com/questions/380196/what-do-very-high-pacf-values-10-mean" rel="noopener ugc nofollow" target="_blank">https://stats . stack exchange . com/questions/380196/what-do-very-high-pacf-values-10-mean</a>(2022年7月27日访问)</p><p id="a6f7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">[4] NIST，“6.4.4.6.3。偏自相关图”。nist.gov。https://www . ITL . NIST . gov/div 898/handbook/PMC/section 4/PMC 4463 . htm(2022年7月27日访问)</p><p id="4ace" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">[5]“stats models 0 . 14 . 0(+497)”，“statsmodels.tsa.stattools.acf”。statsmodels.org。<a class="ae ky" href="https://www.statsmodels.org/dev/generated/statsmodels.tsa.stattools.acf.html" rel="noopener ugc nofollow" target="_blank">https://www . stats models . org/dev/generated/stats models . TSA . stat tools . ACF . html</a>(2022年7月27日访问)</p></div></div>    
</body>
</html>