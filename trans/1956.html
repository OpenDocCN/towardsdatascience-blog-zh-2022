<html>
<head>
<title>Creating Various Plot Types and Subplots with Plotly</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用Plotly创建各种剧情类型和支线剧情</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/creating-various-plot-types-and-subplots-with-plotly-bd727f808262#2022-05-04">https://towardsdatascience.com/creating-various-plot-types-and-subplots-with-plotly-bd727f808262#2022-05-04</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><h2 id="a651" class="ir is it bd b dl iu iv iw ix iy iz dk ja translated" aria-label="kicker paragraph">Python科学绘图</h2><div class=""/><div class=""><h2 id="af74" class="pw-subtitle-paragraph jz jc it bd b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq dk translated">使用plotly创建条形图、直方图、散点图、气泡图和箱线图，并用子图排列它们</h2></div><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi kr"><img src="../Images/79bd216f6d1a3f5ccfb7be93c19d1f48.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*yCwjmzHs1rwLWWBM"/></div></div><p class="ld le gj gh gi lf lg bd b be z dk translated">卢克·切瑟在<a class="ae lh" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure><p id="cc10" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">现在你已经有了一些使用<code class="fe me mf mg mh b">plotly</code>包的背景知识(如果你想要一个好的介绍，你可以阅读我以前写的一篇文章)，你可能想要扩展一些你有的绘图选项。在这篇文章中，我将展示<code class="fe me mf mg mh b">plotly</code>中其他一些基本的剧情选项，以及如何利用支线剧情来设置面板人物。我们将查看条形图、直方图、散点图/气泡图和箱线图。正如我们在以前的文章中所做的那样，我们将使用<code class="fe me mf mg mh b">plotly.graph_objects</code>从零开始构建我们的数字。</p><h1 id="ae24" class="mi mj it bd mk ml mm mn mo mp mq mr ms ki mt kj mu kl mv km mw ko mx kp my mz bi translated">条形图</h1><p id="19ff" class="pw-post-body-paragraph li lj it lk b ll na kd ln lo nb kg lq lr nc lt lu lv nd lx ly lz ne mb mc md im bi translated">让我们从创建一些虚拟数据来绘制条形图开始。我们可以使用<code class="fe me mf mg mh b">numpy</code>如下所示:</p><pre class="ks kt ku kv gt nf mh ng nh aw ni bi"><span id="9c2f" class="nj mj it mh b gy nk nl l nm nn"># import packages<br/>import numpy as np</span><span id="1a7a" class="nj mj it mh b gy no nl l nm nn"># create dummy data<br/>vals = np.ceil(100 * np.random.rand(5)).astype(int)<br/>keys = ["A", "B", "C", "D", "E"]</span></pre><p id="de68" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">现在我们可以在柱状图上绘制这些键值对。我们需要做的第一件事是使用<code class="fe me mf mg mh b">plotly.graph_objects</code>创建一个图形:</p><pre class="ks kt ku kv gt nf mh ng nh aw ni bi"><span id="91b5" class="nj mj it mh b gy nk nl l nm nn"># import packages<br/>import plotly.graph_objects as go</span><span id="c432" class="nj mj it mh b gy no nl l nm nn"># create figure<br/>fig = go.Figure()</span></pre><p id="a272" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">现在，我们将条形图添加到我们的图中，并用以下代码行显示结果。为了便于查看，我们还可以更新布局中图形的高度和宽度。</p><pre class="ks kt ku kv gt nf mh ng nh aw ni bi"><span id="bec6" class="nj mj it mh b gy nk nl l nm nn"># plot data<br/>fig.add_trace(<br/> go.Bar(x=keys, y=vals)<br/>)</span><span id="c8fb" class="nj mj it mh b gy no nl l nm nn">fig.update_layout(height=600, width=600)</span><span id="fc12" class="nj mj it mh b gy no nl l nm nn">fig.show()</span></pre><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi np"><img src="../Images/78fed57c8ce9e3ca1b7569de265d9d25.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*j8eYNV2-tt8sC5W4dA850A.png"/></div></div><p class="ld le gj gh gi lf lg bd b be z dk translated">条形图—作者创建的图形</p></figure><p id="cb5e" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">让我们对绘图布局做一些修饰性的更新，以修复某些东西，如轴标签和悬停在条形上方时显示的信息。</p><pre class="ks kt ku kv gt nf mh ng nh aw ni bi"><span id="1581" class="nj mj it mh b gy nk nl l nm nn"># create figure<br/>fig = go.Figure()</span><span id="ed2c" class="nj mj it mh b gy no nl l nm nn"># plot data<br/>fig.add_trace(<br/>    go.Bar(x=keys, y=vals, hovertemplate="&lt;b&gt;Key:&lt;/b&gt; %{x}&lt;br&gt;&lt;b&gt;Value:&lt;/b&gt; %{y}&lt;extra&gt;&lt;/extra&gt;")<br/>)</span><span id="2108" class="nj mj it mh b gy no nl l nm nn"># update layout<br/>fig.update_layout(<br/>    font_family="Averta",<br/>    hoverlabel_font_family="Averta",<br/>    title_text="Bar Chart of Key-Value Pairs",<br/>    xaxis_title_text="Keys",<br/>    xaxis_title_font_size=18,<br/>    xaxis_tickfont_size=16,<br/>    yaxis_title_text="Values",<br/>    yaxis_title_font_size=18,<br/>    yaxis_tickfont_size=16,<br/>    hoverlabel_font_size=16,<br/>    height=600, <br/>    width=600<br/>)</span><span id="ab4c" class="nj mj it mh b gy no nl l nm nn">fig.show()</span></pre><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi np"><img src="../Images/9089afcbc6643c4975cb6ae92a81c6c7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*HzelW7IGwTMeaz8AjlHxYw.png"/></div></div><p class="ld le gj gh gi lf lg bd b be z dk translated">修改后的条形图—由作者创建的图表</p></figure><h2 id="41db" class="nj mj it bd mk nq nr dn mo ns nt dp ms lr nu nv mu lv nw nx mw lz ny nz my iz bi translated">分组和堆叠条形图</h2><p id="fc71" class="pw-post-body-paragraph li lj it lk b ll na kd ln lo nb kg lq lr nc lt lu lv nd lx ly lz ne mb mc md im bi translated">如果我们想要比较具有相同关键字的多个组的值，我们可以制作一个分组或堆叠条形图。为此，我们可以先在我们的图形中添加多个条形图，然后使用<code class="fe me mf mg mh b">fig.update_layout()</code>来改变条形图的模式。让我们首先制作几组虚拟数据，这样我们就可以创建分组和堆叠条形图。</p><pre class="ks kt ku kv gt nf mh ng nh aw ni bi"><span id="7f62" class="nj mj it mh b gy nk nl l nm nn"># create more dummy data<br/>vals_2 = np.ceil(100 * np.random.rand(5)).astype(int)<br/>vals_3 = np.ceil(100 * np.random.rand(5)).astype(int)</span><span id="7487" class="nj mj it mh b gy no nl l nm nn">vals_array = [vals, vals_2, vals_3]</span></pre><p id="a138" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">对于新的哑数据数组，我们现在遍历数组中的每个值列表，并向图中添加一个条形图。然后我们用<code class="fe me mf mg mh b">barmode="group"</code>更新布局，将它变成一个分组条形图。</p><pre class="ks kt ku kv gt nf mh ng nh aw ni bi"><span id="684b" class="nj mj it mh b gy nk nl l nm nn"># create figure<br/>fig = go.Figure()</span><span id="73f1" class="nj mj it mh b gy no nl l nm nn"># plot data<br/>for i, vals in enumerate(vals_array):<br/>    fig.add_trace(<br/>        go.Bar(x=keys, y=vals, name=f"Group {i+1}", hovertemplate=f"&lt;b&gt;Group {i+1}&lt;/b&gt;&lt;br&gt;&lt;b&gt;Key:&lt;/b&gt; %{{x}}&lt;br&gt;&lt;b&gt;Value:&lt;/b&gt; %{{y}}&lt;extra&gt;&lt;/extra&gt;")<br/>    )</span><span id="03b7" class="nj mj it mh b gy no nl l nm nn"># update layout<br/>fig.update_layout(<br/>    barmode="group",<br/>    font_family="Averta",<br/>    hoverlabel_font_family="Averta",<br/>    title_text="Bar Chart of Key-Value Pairs",<br/>    xaxis_title_text="Keys",<br/>    xaxis_title_font_size=18,<br/>    xaxis_tickfont_size=16,<br/>    yaxis_title_text="Values",<br/>    yaxis_title_font_size=18,<br/>    yaxis_tickfont_size=16,<br/>    hoverlabel_font_size=16,<br/>    legend_font_size=16,<br/>    height=600, <br/>    width=600<br/>)</span><span id="45a4" class="nj mj it mh b gy no nl l nm nn">fig.show()</span></pre><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi oa"><img src="../Images/5a286eea52db3f21655b8f9f367d32af.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wFFqGdx-sS-Hx6_h4SvFXg.png"/></div></div><p class="ld le gj gh gi lf lg bd b be z dk translated">分组条形图—由作者创建的图表</p></figure><p id="c50c" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">为了把它变成一个堆积条形图，我们简单地把<code class="fe me mf mg mh b">fig.update_layout(barmode="group")</code>修改为<code class="fe me mf mg mh b">fig.update_layout(barmode="stack")</code></p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi ob"><img src="../Images/a002ed06958dd06a6f02ef12841bd60b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9x_6NrAcvNHDll3yz25TZQ.png"/></div></div><p class="ld le gj gh gi lf lg bd b be z dk translated">堆积条形图—由作者创建的图表</p></figure><h1 id="55a7" class="mi mj it bd mk ml mm mn mo mp mq mr ms ki mt kj mu kl mv km mw ko mx kp my mz bi translated">直方图</h1><p id="b1a6" class="pw-post-body-paragraph li lj it lk b ll na kd ln lo nb kg lq lr nc lt lu lv nd lx ly lz ne mb mc md im bi translated">绘制直方图对于理解基础数据非常有用，通过观察数据的分布，您可以了解更多关于定量趋势和异常值的信息。这些在<code class="fe me mf mg mh b">plotly</code>中也很简单，只需要几行代码。同样，我们从创建虚拟数据开始——我们将使用<code class="fe me mf mg mh b">numpy.random.normal()</code>从正态分布中取样，并将该数据绘制成直方图。</p><pre class="ks kt ku kv gt nf mh ng nh aw ni bi"><span id="26f6" class="nj mj it mh b gy nk nl l nm nn"># create data<br/>data = np.random.normal(size=1000)</span></pre><p id="7100" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">现在，为了绘制一个简单的直方图，我们使用下面几行代码:</p><pre class="ks kt ku kv gt nf mh ng nh aw ni bi"><span id="5fab" class="nj mj it mh b gy nk nl l nm nn"># create figure<br/>fig = go.Figure()</span><span id="c259" class="nj mj it mh b gy no nl l nm nn"># plot data<br/>fig.add_trace(<br/>    go.Histogram(x=data, hovertemplate="&lt;b&gt;Bin Edges:&lt;/b&gt; %{x}&lt;br&gt;&lt;b&gt;Count:&lt;/b&gt; %{y}&lt;extra&gt;&lt;/extra&gt;")<br/>)</span><span id="9fed" class="nj mj it mh b gy no nl l nm nn">fig.update_layout(<br/>    height=600,<br/>    width=600<br/>)</span><span id="2b6d" class="nj mj it mh b gy no nl l nm nn">fig.show()</span></pre><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi oc"><img src="../Images/2784fb41c1c2985bcb3b347234e07a8a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*DsKSkVbyMVpG0w7l_sfeDQ.png"/></div></div><p class="ld le gj gh gi lf lg bd b be z dk translated">简单直方图—由作者创建的图表</p></figure><p id="1078" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">正如预期的那样，直方图类似于正态分布，这是有意义的，因为这是我们从中采样的。请注意，本例中的y轴是每个仓中的样本数，我们也可以将其归一化为一个概率值，这与y轴上的计数值除以样本总数基本相同。</p><pre class="ks kt ku kv gt nf mh ng nh aw ni bi"><span id="22e4" class="nj mj it mh b gy nk nl l nm nn"># create figure<br/>fig = go.Figure()</span><span id="a9d4" class="nj mj it mh b gy no nl l nm nn"># plot data<br/>fig.add_trace(<br/>    go.Histogram(x=data, histnorm="probability", hovertemplate="&lt;b&gt;Bin Edges:&lt;/b&gt; %{x}&lt;br&gt;&lt;b&gt;Count:&lt;/b&gt; %{y}&lt;extra&gt;&lt;/extra&gt;")<br/>)</span><span id="8eb7" class="nj mj it mh b gy no nl l nm nn">fig.update_layout(<br/>    font_family="Averta",<br/>    hoverlabel_font_family="Averta",<br/>    title_text="Histogram of Samples from Normal Distribution",<br/>    xaxis_title_text="Values",<br/>    xaxis_title_font_size=18,<br/>    xaxis_tickfont_size=16,<br/>    yaxis_title_text="Probability",<br/>    yaxis_title_font_size=18,<br/>    yaxis_tickfont_size=16,<br/>    hoverlabel_font_size=16,<br/>    height=600, <br/>    width=600<br/>)</span><span id="562d" class="nj mj it mh b gy no nl l nm nn">fig.show()</span></pre><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi od"><img src="../Images/a54da6ef5f5e81b1d9499869ef712af0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*lLf8EOLItlvsAvHDJjPjGQ.png"/></div></div><p class="ld le gj gh gi lf lg bd b be z dk translated">概率直方图—由作者创建的图表</p></figure><p id="6abc" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">最后，如果我们想把我们的直方图看作一个累积分布函数而不是一个概率分布函数，我们可以如下传递参数<code class="fe me mf mg mh b">cumulative_enabled=True</code>:</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi oe"><img src="../Images/8cad3d15bf639b0aac5a3b410f3cb7bb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6Xb_E2brcJuJMLdc5S0gzA.png"/></div></div><p class="ld le gj gh gi lf lg bd b be z dk translated">累积直方图—由作者创建的图表</p></figure><h1 id="ab61" class="mi mj it bd mk ml mm mn mo mp mq mr ms ki mt kj mu kl mv km mw ko mx kp my mz bi translated">散点图和气泡图</h1><p id="1ba9" class="pw-post-body-paragraph li lj it lk b ll na kd ln lo nb kg lq lr nc lt lu lv nd lx ly lz ne mb mc md im bi translated">让我们从创建一个简单的散点图开始。我们从创建一些虚拟数据开始:</p><pre class="ks kt ku kv gt nf mh ng nh aw ni bi"><span id="dfdd" class="nj mj it mh b gy nk nl l nm nn"># create dummy data<br/>x = [i for i in range(1, 6)]<br/>y = np.ceil(100 * np.random.rand(5)).astype(int)</span></pre><p id="4b52" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">现在，我们可以将这些数据绘制成散点图，如下所示:</p><pre class="ks kt ku kv gt nf mh ng nh aw ni bi"><span id="992e" class="nj mj it mh b gy nk nl l nm nn"># create figure<br/>fig = go.Figure()</span><span id="9ac6" class="nj mj it mh b gy no nl l nm nn"># plot data<br/>fig.add_trace(<br/>    go.Scatter(x=x, y=y, mode="markers", hovertemplate="&lt;b&gt;x:&lt;/b&gt; %{x}&lt;br&gt;&lt;b&gt;y:&lt;/b&gt; %{y}&lt;extra&gt;&lt;/extra&gt;")<br/>)</span><span id="8e81" class="nj mj it mh b gy no nl l nm nn">fig.update_layout(<br/>    font_family="Averta",<br/>    hoverlabel_font_family="Averta",<br/>    title_text="Basic Scatter Plot",<br/>    xaxis_title_text="x",<br/>    xaxis_title_font_size=18,<br/>    xaxis_tickfont_size=16,<br/>    yaxis_title_text="y",<br/>    yaxis_title_font_size=18,<br/>    yaxis_tickfont_size=16,<br/>    hoverlabel_font_size=16,<br/>    height=600, <br/>    width=600<br/>)</span><span id="3d69" class="nj mj it mh b gy no nl l nm nn">fig.show()</span></pre><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi of"><img src="../Images/d53a30c4b7174beb4ca9fb97a5cbfba3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WAJu1d7l6zMr30e2L36zYg.png"/></div></div><p class="ld le gj gh gi lf lg bd b be z dk translated">基本散点图—由作者创建的图形</p></figure><p id="b782" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">现在我们可以把它变成一个气泡图——气泡图只是一个散点图，通过标记的大小传达第三维信息。首先，让我们为我们的标记创建一些不同的大小。</p><pre class="ks kt ku kv gt nf mh ng nh aw ni bi"><span id="a5d0" class="nj mj it mh b gy nk nl l nm nn"># dummy data for marker size<br/>s = np.ceil(30 * np.random.rand(5)).astype(int)</span></pre><p id="98fa" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">现在，要将上面的散点图转换成气泡图，我们需要做的就是将一个大小值数组传递给<code class="fe me mf mg mh b">marker_size</code>参数。如果我们想在悬停工具提示中包含大小，我们还需要创建一个<code class="fe me mf mg mh b">text</code>参数，并将其设置为等于我们的数组大小。然后，我们可以在创建<code class="fe me mf mg mh b">hovertemplate</code>时引用该文本—为了创建气泡图，我们使用了以下代码行:</p><pre class="ks kt ku kv gt nf mh ng nh aw ni bi"><span id="e842" class="nj mj it mh b gy nk nl l nm nn"># create figure<br/>fig = go.Figure()</span><span id="2d6c" class="nj mj it mh b gy no nl l nm nn"># plot data<br/>fig.add_trace(<br/>    go.Scatter(x=x, y=y, mode="markers", marker_size=s, text=s, hovertemplate="&lt;b&gt;x:&lt;/b&gt; %{x}&lt;br&gt;&lt;b&gt;y:&lt;/b&gt; %{y}&lt;br&gt;&lt;b&gt;Size:&lt;/b&gt; %{text}&lt;extra&gt;&lt;/extra&gt;")<br/>)</span><span id="0214" class="nj mj it mh b gy no nl l nm nn">fig.update_layout(<br/>    font_family="Averta",<br/>    hoverlabel_font_family="Averta",<br/>    title_text="Basic Bubble Chart",<br/>    xaxis_title_text="x",<br/>    xaxis_title_font_size=18,<br/>    xaxis_tickfont_size=16,<br/>    yaxis_title_text="y",<br/>    yaxis_title_font_size=18,<br/>    yaxis_tickfont_size=16,<br/>    hoverlabel_font_size=16,<br/>    height=600, <br/>    width=600<br/>)</span><span id="5d3f" class="nj mj it mh b gy no nl l nm nn">fig.show()</span></pre><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi og"><img src="../Images/3b04d2e7ba28db05f30c54312ce6b043.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*RAQAZjTZ-HNl3yU3Q4jijg.png"/></div></div><p class="ld le gj gh gi lf lg bd b be z dk translated">基本气泡图—由作者创建的图形</p></figure><h1 id="a6df" class="mi mj it bd mk ml mm mn mo mp mq mr ms ki mt kj mu kl mv km mw ko mx kp my mz bi translated">箱线图</h1><p id="ee06" class="pw-post-body-paragraph li lj it lk b ll na kd ln lo nb kg lq lr nc lt lu lv nd lx ly lz ne mb mc md im bi translated">箱线图是收集有关数据分布的汇总统计信息的最有用的图之一。方框图显示数据范围和四分位值，以及数据中存在的异常值。在<code class="fe me mf mg mh b">plotly</code>中，这些都是非常简单的生产。我们将从创建一些虚拟数据开始:</p><pre class="ks kt ku kv gt nf mh ng nh aw ni bi"><span id="4953" class="nj mj it mh b gy nk nl l nm nn"># create dummy data for boxplots<br/>y1 = np.random.normal(size=1000)<br/>y2 = np.random.normal(size=1000)</span></pre><p id="a724" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">我们可以将这两个数据集添加为同一轴上的独立盒状图，并将它们标记为<code class="fe me mf mg mh b">Dataset 1</code>和<code class="fe me mf mg mh b">Dataset 2</code></p><pre class="ks kt ku kv gt nf mh ng nh aw ni bi"><span id="8839" class="nj mj it mh b gy nk nl l nm nn"># create figure<br/>fig = go.Figure()</span><span id="d3e3" class="nj mj it mh b gy no nl l nm nn"># plot data<br/>fig.add_trace(<br/>    go.Box(y=y1, name="Dataset 1"),<br/>)</span><span id="07b0" class="nj mj it mh b gy no nl l nm nn">fig.add_trace(<br/>    go.Box(y=y2, name="Dataset 2"),<br/>)</span><span id="17db" class="nj mj it mh b gy no nl l nm nn">fig.update_layout(<br/>    font_family="Averta",<br/>    hoverlabel_font_family="Averta",<br/>    title_text="Basic Box Plots",<br/>    xaxis_title_text="Datasets",<br/>    xaxis_title_font_size=18,<br/>    xaxis_tickfont_size=16,<br/>    yaxis_title_text="Values",<br/>    yaxis_title_font_size=18,<br/>    yaxis_tickfont_size=16,<br/>    hoverlabel_font_size=16,<br/>    height=600, <br/>    width=600<br/>)</span><span id="26cb" class="nj mj it mh b gy no nl l nm nn">fig.show()</span></pre><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi oh"><img src="../Images/039046b1c88023bd435d44a13ba0d50b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*BqRsQ43EJnTAP03frUJHfw.png"/></div></div><p class="ld le gj gh gi lf lg bd b be z dk translated">基本箱线图—作者创建的图形</p></figure><p id="8bae" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">这已经包含了我们需要的大部分信息，你会注意到悬停模板已经很好了，并且传达了这些信息。如果我们想让这个看起来更“有趣”，我们可以在方框图旁边添加实际的数据分布，以便读者查看。当我们这样做时，我们需要设置参数<code class="fe me mf mg mh b">boxpoints="all"</code>并添加一个<code class="fe me mf mg mh b">jitter</code>，它是一个值，用于将具有相似值的点展开，以便读者更容易看到分布。</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi oi"><img src="../Images/dedda23ac07d120aa532350801f1a972.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Vm_SK43q5YnTf_41vZDAXQ.png"/></div></div><p class="ld le gj gh gi lf lg bd b be z dk translated">带数据分布的箱线图—由作者创建的图表</p></figure><h1 id="16df" class="mi mj it bd mk ml mm mn mo mp mq mr ms ki mt kj mu kl mv km mw ko mx kp my mz bi translated">支线剧情</h1><p id="c69b" class="pw-post-body-paragraph li lj it lk b ll na kd ln lo nb kg lq lr nc lt lu lv nd lx ly lz ne mb mc md im bi translated">现在把它们放在一起，让我们用条形图、柱状图、气泡图和箱线图创建一个包含4个支线剧情的面板图。为了创建支线剧情，我们首先需要从<code class="fe me mf mg mh b">plotly.subplots</code>导入<code class="fe me mf mg mh b">make_subplots</code>:</p><pre class="ks kt ku kv gt nf mh ng nh aw ni bi"><span id="1c8b" class="nj mj it mh b gy nk nl l nm nn"># import packages<br/>from plotly.subplots import make_subplots</span></pre><p id="be03" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">现在，与之前唯一的不同是，当我们初始化我们的图形时，我们使用<code class="fe me mf mg mh b">make_subplots</code>来创建我们想要的图形布局。</p><pre class="ks kt ku kv gt nf mh ng nh aw ni bi"><span id="c5ce" class="nj mj it mh b gy nk nl l nm nn"># create figure<br/>fig = make_subplots(rows=2, cols=2)</span></pre><p id="6629" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">让我们首先创建一组主虚拟数据，我们将需要这四个图，我们将添加到这个数字:</p><pre class="ks kt ku kv gt nf mh ng nh aw ni bi"><span id="7c6d" class="nj mj it mh b gy nk nl l nm nn"># create dummy data<br/>x = [i for i in range(1, 6)]<br/>y = np.ceil(100 * np.random.rand(5)).astype(int)<br/>s = np.ceil(30 * np.random.rand(5)).astype(int)<br/>y1 = np.random.normal(size=1000)<br/>y2 = np.random.normal(size=1000)</span></pre><p id="30fd" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">我们现在所要做的就是，当我们向我们的图形添加一个轨迹时，我们需要提供一个行和列值，以便<code class="fe me mf mg mh b">plotly</code>知道在哪里放置这个图。需要注意的一点是，这里的索引从1开始！</p><pre class="ks kt ku kv gt nf mh ng nh aw ni bi"><span id="5015" class="nj mj it mh b gy nk nl l nm nn"># plot data<br/>fig.add_trace(<br/>    go.Bar(x=x, y=y, hovertemplate="&lt;b&gt;x:&lt;/b&gt; %{x}&lt;br&gt;&lt;b&gt;y:&lt;/b&gt; %{y}&lt;extra&gt;&lt;/extra&gt;"),<br/>    row=1, col=1<br/>)</span><span id="d324" class="nj mj it mh b gy no nl l nm nn">fig.add_trace(<br/>    go.Histogram(x=y1, hovertemplate="&lt;b&gt;Bin Edges:&lt;/b&gt; %{x}&lt;br&gt;&lt;b&gt;Count:&lt;/b&gt; %{y}&lt;extra&gt;&lt;/extra&gt;"),<br/>    row=1, col=2<br/>)</span><span id="b75a" class="nj mj it mh b gy no nl l nm nn">fig.add_trace(<br/>    go.Scatter(x=x, y=y, mode="markers", marker_size=s, text=s, hovertemplate="&lt;b&gt;x:&lt;/b&gt; %{x}&lt;br&gt;&lt;b&gt;y:&lt;/b&gt; %{y}&lt;br&gt;&lt;b&gt;Size:&lt;/b&gt; %{text}&lt;extra&gt;&lt;/extra&gt;"),<br/>    row=2, col=1<br/>)</span><span id="373c" class="nj mj it mh b gy no nl l nm nn">fig.add_trace(<br/>    go.Box(y=y1, name="Dataset 1"),<br/>    row=2, col=2<br/>)</span><span id="efbd" class="nj mj it mh b gy no nl l nm nn">fig.add_trace(<br/>    go.Box(y=y2, name="Dataset 2"),<br/>    row=2, col=2<br/>)</span><span id="d8b7" class="nj mj it mh b gy no nl l nm nn">fig.update_xaxes(title_font_size=18, tickfont_size=16)<br/>fig.update_yaxes(title_font_size=18, tickfont_size=16)</span><span id="9713" class="nj mj it mh b gy no nl l nm nn">fig.update_layout(<br/>    font_family="Averta",<br/>    hoverlabel_font_family="Averta",<br/>    title_text="Subplots with Bar, Histogram, Bubble, and Box Plots",<br/>    xaxis1_title_text="x",<br/>    yaxis1_title_text="y",<br/>    xaxis2_title_text="Values",<br/>    yaxis2_title_text="Count",<br/>    xaxis3_title_text="x",<br/>    yaxis3_title_text="y",<br/>    xaxis4_title_text="Dataset",<br/>    yaxis4_title_text="Values",<br/>    hoverlabel_font_size=16,<br/>    showlegend=False,<br/>    height=800, <br/>    width=1000<br/>)</span><span id="6e68" class="nj mj it mh b gy no nl l nm nn">fig.show()</span></pre><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi oj"><img src="../Images/fccd9c63bae302d2c044ea6335e85930.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mS91b0xoyLHfKHbr_Q3RdQ.png"/></div></div><p class="ld le gj gh gi lf lg bd b be z dk translated">带有条形图、直方图、气泡图和方框图的支线图—由作者创建的图形</p></figure><p id="e033" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">就在那里！</p><h1 id="b024" class="mi mj it bd mk ml mm mn mo mp mq mr ms ki mt kj mu kl mv km mw ko mx kp my mz bi translated">结论</h1><p id="9034" class="pw-post-body-paragraph li lj it lk b ll na kd ln lo nb kg lq lr nc lt lu lv nd lx ly lz ne mb mc md im bi translated">这是对各种类型的人物和使用<code class="fe me mf mg mh b">plotly</code>创建支线剧情的基本介绍。您可以进入<code class="fe me mf mg mh b">plotly</code> <a class="ae lh" href="https://plotly.com/python-api-reference/generated/plotly.graph_objects.Layout.html" rel="noopener ugc nofollow" target="_blank">布局文档</a>查看使用<code class="fe me mf mg mh b">fig.update_layout()</code>时的所有可能性。本文中的<code class="fe me mf mg mh b">plotly-charts.ipynb</code>笔记本将在这个<a class="ae lh" href="https://github.com/venkatesannaveen/python-science-tutorial" rel="noopener ugc nofollow" target="_blank"> Github资源库</a>中提供。</p><p id="a394" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">感谢您的阅读！我感谢任何反馈，你可以在<a class="ae lh" href="https://twitter.com/naveenv_92" rel="noopener ugc nofollow" target="_blank"> Twitter </a>上找到我，并在<a class="ae lh" href="https://www.linkedin.com/in/naveenvenkatesan/" rel="noopener ugc nofollow" target="_blank"> LinkedIn </a>上与我联系，以获取更多更新和文章。</p></div></div>    
</body>
</html>