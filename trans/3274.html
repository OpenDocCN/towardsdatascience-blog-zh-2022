<html>
<head>
<title>Exception Handling in C++</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">C++中的异常处理</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/exception-handling-in-c-eb2a2f55a2d9#2022-07-20">https://towardsdatascience.com/exception-handling-in-c-eb2a2f55a2d9#2022-07-20</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="0c6d" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">C++中的错误处理介绍</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/ffa40e9ecd78a5770a353b2647c931a8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-bsirYcdtaRA3puW3Li4Ag.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">图片由<a class="ae ky" href="https://www.pexels.com/@shvets-production/" rel="noopener ugc nofollow" target="_blank">在<a class="ae ky" href="https://www.pexels.com/photo/fresh-lemons-with-juicy-flesh-on-blue-background-7195055/" rel="noopener ugc nofollow" target="_blank">像素</a>上拍摄制作</a></p></figure><p id="6e47" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在<a class="ae ky" href="https://builtin.com/software-engineering-perspectives" rel="noopener ugc nofollow" target="_blank">计算机编程</a>中，异常处理是处理程序中错误的过程，这样它就能在异常情况下运行。此外，它清楚地向用户解释了程序失败的原因。在许多情况下，软件程序会得到坏数据或其他影响代码成功运行的异常情况。</p><p id="adb6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">因此，异常处理是软件开发的关键，因为可靠地处理错误可以防止软件程序表现出非预期的行为。理想情况下，很好地实现错误处理可以保证代码在任何条件下都能成功运行。</p><p id="f8d3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">意外行为的例子包括程序运行缓慢或在接收到错误输入时失败。在错误输入的情况下，考虑一个函数，该函数将一个实数值(float)作为用户输入，执行计算，并返回结果值。如果该函数期望浮点值，但却收到字符串，则该函数将引发错误并失败。错误异常处理可以用来处理这样的情况。如果用户输入一个错误的值，比如字符串，程序会返回一个有意义的消息，而不是失败或提供一个不清楚的系统错误信息。</p><p id="de9a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在C++ 中，异常处理使用了表达式Try、Throw和Catch。Try表达式标识可能有错误异常的代码块。它可能包含逻辑，例如将两个数字相除或在数字列表上迭代。Throw表达式处理异常。例如，当您的代码试图将两个数相除，但分母为零时，您可以抛出一条错误消息，如“不能被零除”最后，Catch表达式处理错误。这些表达式可以处理C++中的各种异常，包括数组和向量的长度错误。</p><p id="c1c7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在这里，我们将通过一些简单的例子来说明如何在C++中实现异常处理。首先，我们将考虑一个运行时错误的例子。我们将定义一个以身高和体重为输入并计算体重指数的函数。身体质量指数的公式是体重除以身高的平方。如果零值作为参数传递给函数，代码将尝试除以零。我们将使用try、catch和throw来处理运行时错误。最后，我们将通过一个额外的长度错误异常处理的例子。这两个例子应该为刚刚开始使用C++进行异常处理的开发人员提供了一个很好的起点。</p><p id="91a4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">运行时异常处理</strong></p><p id="f2a1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">为了演示运行时错误的异常处理，我们将构建一个简单的身体质量指数计算器应用程序。该应用程序将用户的姓名，体重和身高作为输入，并显示计算出的身体质量指数。首先，让我们看一下如何在没有任何异常处理的情况下构建应用程序。</p><p id="7251" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">首先，让我们写一个脚本，我们称之为bmi.cpp。我们将包括<iostream>和<string>标题。<iostream>标题允许我们写入标准输入/输出流。<string>标题允许我们定义字符串标识符。</string></iostream></string></iostream></p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="ff97" class="ma mb it lw b gy mc md l me mf">#include &lt;iostream&gt;<br/>#include &lt;string&gt;</span><span id="8497" class="ma mb it lw b gy mg md l me mf">using namespace std;</span></pre><p id="3821" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">编译和执行时，程序会询问用户的名字。为此，我们需要为name定义一个字符串变量，为weight和height分别定义两个浮点变量:</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="34ae" class="ma mb it lw b gy mc md l me mf">// Main() function: where the execution of program begins</span><span id="e447" class="ma mb it lw b gy mg md l me mf">int main(){</span><span id="f7f2" class="ma mb it lw b gy mg md l me mf">string name;<br/>float weight;<br/>float height;</span><span id="f9fb" class="ma mb it lw b gy mg md l me mf">}</span></pre><p id="ce11" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">接下来，让我们添加询问用户名的逻辑:</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="d9bd" class="ma mb it lw b gy mc md l me mf">// Main() function: where the execution of program begins</span><span id="ba0e" class="ma mb it lw b gy mg md l me mf">int main()</span><span id="9b49" class="ma mb it lw b gy mg md l me mf">{</span><span id="4130" class="ma mb it lw b gy mg md l me mf">string name;<br/>float weight;<br/>float height;</span><span id="ed5f" class="ma mb it lw b gy mg md l me mf">cout &lt;&lt; "Please Enter your Name \n";<br/>cin &gt;&gt; name;</span><span id="3300" class="ma mb it lw b gy mg md l me mf">}</span></pre><p id="fa7d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">为了编译我们的代码，我们在终端中运行以下命令:</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="3994" class="ma mb it lw b gy mc md l me mf">g++ bmi.cpp</span></pre><p id="4859" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们使用以下命令执行:</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="fa52" class="ma mb it lw b gy mc md l me mf">./a.out</span></pre><p id="4dd4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们得到以下输出:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mh"><img src="../Images/f1578ca30ed939f31dfa86c80ece0bff.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*2pKEnliQZAzN8HDQ"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><p id="1ca8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在，让我们编写一个逻辑，在用户输入姓名时问候用户并询问他们的体重:</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="125e" class="ma mb it lw b gy mc md l me mf">// Main() function: where the execution of program begins</span><span id="9dd6" class="ma mb it lw b gy mg md l me mf">int main(){</span><span id="fec5" class="ma mb it lw b gy mg md l me mf">string name;<br/>float weight;<br/>float height;</span><span id="32a4" class="ma mb it lw b gy mg md l me mf">cout &lt;&lt; "Please Enter your Name \n";<br/>cin &gt;&gt; name;<br/>cout &lt;&lt; "Hello "&lt;&lt; name &lt;&lt; ", please enter your weight in Kg \n";</span><span id="e2bc" class="ma mb it lw b gy mg md l me mf">}</span></pre><p id="56f8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果我们编译并执行，我们会得到以下结果:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mh"><img src="../Images/f4fb7386fcbcbddd2da41f2d0b54e359.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*FJbNiaNbQAtYFOx_"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><p id="886d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然后，我们可以添加权重逻辑作为用户输入:</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="8465" class="ma mb it lw b gy mc md l me mf">int main()</span><span id="5844" class="ma mb it lw b gy mg md l me mf">{</span><span id="a36a" class="ma mb it lw b gy mg md l me mf">string name;<br/>float weight;<br/>float height;</span><span id="17d0" class="ma mb it lw b gy mg md l me mf">cout &lt;&lt; "Please Enter your Name \n";<br/>cin &gt;&gt; name;<br/>cout &lt;&lt; "Hello "&lt;&lt; name &lt;&lt; ", please enter your weight in Kg \n";<br/>cin &gt;&gt; weight;</span><span id="dae4" class="ma mb it lw b gy mg md l me mf">}</span></pre><p id="9bfb" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">将提示用户输入重量值。现在，让我们包含逻辑，以便在提供以kg为单位的体重时，我们要求用户提供以米为单位的身高:</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="46f3" class="ma mb it lw b gy mc md l me mf">int main()</span><span id="4721" class="ma mb it lw b gy mg md l me mf">{</span><span id="62fe" class="ma mb it lw b gy mg md l me mf">string name;<br/>float weight;<br/>float height;</span><span id="c1b4" class="ma mb it lw b gy mg md l me mf">cout &lt;&lt; "Please Enter your Name \n";<br/>cin &gt;&gt; name;<br/>cout &lt;&lt; "Hello "&lt;&lt; name &lt;&lt; ", please enter your weight in Kg \n";<br/>cin &gt;&gt; weight;<br/>cout &lt;&lt; "Thank you "&lt;&lt; name &lt;&lt; ", now please enter your height in meters \n";<br/>cin &gt;&gt; height;</span><span id="6e38" class="ma mb it lw b gy mg md l me mf">}</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mi"><img src="../Images/c5731d8039d42f8a06ef672fb445f50a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*T4vHXOBEMJVphAQ4"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><p id="591c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在我们可以用这些数据来计算身体质量指数。身体质量指数的公式是体重/身高2。我输入我的名字Sadrach，我的体重90公斤，我的身高1.92米:</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="8480" class="ma mb it lw b gy mc md l me mf">int main()</span><span id="eabc" class="ma mb it lw b gy mg md l me mf">{</span><span id="12c6" class="ma mb it lw b gy mg md l me mf">string name;<br/>float weight;<br/>float height;</span><span id="011e" class="ma mb it lw b gy mg md l me mf">cout &lt;&lt; "Please Enter your Name \n";<br/>cin &gt;&gt; name;<br/>cout &lt;&lt; "Hello "&lt;&lt; name &lt;&lt; ", please enter your weight in Kg \n";<br/>cin &gt;&gt; weight;<br/>cout &lt;&lt; "Thank you "&lt;&lt; name &lt;&lt; ", now please enter your height in meters \n";<br/>cin &gt;&gt; height;<br/>bmi = weight/(height*height);<br/>cout &lt;&lt; "Your BMI is: "&lt;&lt; bmi &lt;&lt;"\n";</span><span id="9a35" class="ma mb it lw b gy mg md l me mf">}</span></pre><p id="73d2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">身高1.92米，体重90公斤，我们可以计算出身体质量指数为24.4:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi mj"><img src="../Images/10de0f611a832e87a37651e7e29b7097.png" data-original-src="https://miro.medium.com/v2/resize:fit:924/0*3s9ZmrTLnQ_7ypsu"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><p id="943e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在，让我们尝试为高度传递一个零值:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi mk"><img src="../Images/f892f7c7ec2915d0694d97a2ab07355e.png" data-original-src="https://miro.medium.com/v2/resize:fit:732/0*IqbvrXmyp52plQDH"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><p id="4468" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们看到，在输入零的高度，我们有一个“inf”的身体质量指数计算，“INF”意味着无限。这对于用户来说显然不是一个有用的值，可能只会引起混乱。我们应该尝试捕捉这个错误并向用户显示一条消息，告诉用户他们提供了一个无效的高度值，而不是显示infinity。我们可以通过捕获运行时错误来实现这一点:</p><p id="df23" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">首先，在脚本的顶部，我们需要导入' stdexcept '来使用runtime_error:</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="0887" class="ma mb it lw b gy mc md l me mf">#include&lt;stdexcept&gt;</span></pre><p id="ffa6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">接下来，我们可以在函数中重写身体质量指数计算的逻辑:</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="a71d" class="ma mb it lw b gy mc md l me mf">float BMI_calculator(float weight, float height){</span><span id="8c08" class="ma mb it lw b gy mg md l me mf">if (height == 0){</span><span id="3d83" class="ma mb it lw b gy mg md l me mf">throw runtime_error("You attempted to calculate BMI with an invalid value of zero for height \n");</span><span id="95d6" class="ma mb it lw b gy mg md l me mf">}</span><span id="9a6c" class="ma mb it lw b gy mg md l me mf">return weight/(height*height);</span><span id="0e5e" class="ma mb it lw b gy mg md l me mf">}</span></pre><p id="0de9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然后我们可以修改我们的主函数来尝试计算身体质量指数:</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="adec" class="ma mb it lw b gy mc md l me mf">try{</span><span id="ff2b" class="ma mb it lw b gy mg md l me mf">bmi = BMI_calculator(weight, height);<br/>cout &lt;&lt; "Your BMI is: "&lt;&lt; bmi &lt;&lt;"\n";</span><span id="7a33" class="ma mb it lw b gy mg md l me mf">}</span></pre><p id="6bc7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">并在运行时错误发生时捕获它。如果出现这种情况，我们将显示文本“警告:您试图用无效的零值来计算身体质量指数的高度”</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="647e" class="ma mb it lw b gy mc md l me mf">catch (runtime_error&amp;e){</span><span id="bd10" class="ma mb it lw b gy mg md l me mf">cout&lt;&lt; "Warning: "&lt;&lt; e.what();</span><span id="7e1f" class="ma mb it lw b gy mg md l me mf">}</span></pre><p id="9990" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然后，我们编译并执行代码，将零作为高度的输入。我们得到以下显示消息:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mh"><img src="../Images/980c1dd9fd1e85298834f7ac0b21c21d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*L82erUqCeuP0eIEs"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><p id="03c0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们看到这条消息比原来的显示消息“您的身体质量指数是:inf”更具描述性和有用</p><p id="b164" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">长度错误异常处理</strong></p><p id="bf66" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">另一个常见的异常是向量的长度错误异常。为了演示这种错误的发生，我们将定义一个函数来计算退休金账户的每月缴款总额。首先，让我们定义一个名为retirement_contributions.cpp的C++脚本。</p><p id="6ed6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们添加我们的主函数以及必要的<iostream>标题，一个<vector>标题，它将允许我们定义向量:</vector></iostream></p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="de8f" class="ma mb it lw b gy mc md l me mf">#include &lt;iostream&gt;<br/>#include &lt;stdexcept&gt; // std::out_of_range<br/>#include &lt;vector&gt;</span><span id="5be0" class="ma mb it lw b gy mg md l me mf">using namespace std;</span><span id="2005" class="ma mb it lw b gy mg md l me mf">int main(){</span><span id="11c0" class="ma mb it lw b gy mg md l me mf">}</span></pre><p id="809f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们添加逻辑，以便用户可以指定他们想要计算总退休金的月数:</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="b6a5" class="ma mb it lw b gy mc md l me mf">#include &lt;iostream&gt;<br/>#include &lt;stdexcept&gt; // std::out_of_range<br/>#include &lt;vector&gt;</span><span id="11f6" class="ma mb it lw b gy mg md l me mf">using namespace std;</span><span id="50f0" class="ma mb it lw b gy mg md l me mf">int main(){</span><span id="e2fc" class="ma mb it lw b gy mg md l me mf">int months;<br/>cout &lt;&lt; "Please enter the number of months \n";<br/>cin &gt;&gt; months;</span><span id="ca0d" class="ma mb it lw b gy mg md l me mf">}</span></pre><p id="23b8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">接下来，让我们定义一个向量，它是月数的大小。向量将包含美元金额贡献，因此它将是一个浮动向量:</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="ccf9" class="ma mb it lw b gy mc md l me mf">int main(){</span><span id="6b46" class="ma mb it lw b gy mg md l me mf">int months;</span><span id="0bb8" class="ma mb it lw b gy mg md l me mf">cout &lt;&lt; "Please enter the number of months \n";<br/>cin &gt;&gt; months;<br/>std::vector&lt;float&gt; contributions(months);</span><span id="c0e6" class="ma mb it lw b gy mg md l me mf">}</span></pre><p id="e35e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们初始化一个名为current month的变量，它将是我们用来迭代数组的索引:</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="2340" class="ma mb it lw b gy mc md l me mf">int current_month = 1;</span></pre><p id="ee12" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然后，让我们将数组的第一个元素定义为我们的初始贡献:</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="0d35" class="ma mb it lw b gy mc md l me mf">contributions[1] = initial_contrbution;</span></pre><p id="463e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在while循环中，当当前月份少于总月份数时，我们将后续贡献增加2 %:</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="5537" class="ma mb it lw b gy mc md l me mf">while (current_month &lt;= months){</span><span id="cec2" class="ma mb it lw b gy mg md l me mf">contributions[current_month + 1] =1.02*contributions[current_month];</span><span id="36ee" class="ma mb it lw b gy mg md l me mf">}</span></pre><p id="19ae" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们还可以显示每个月的贡献，同时将我们的指数递增1:</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="c7e1" class="ma mb it lw b gy mc md l me mf">while (current_month &lt;= months){</span><span id="edb0" class="ma mb it lw b gy mg md l me mf">contributions[current_month + 1] =1.02*contributions[current_month];</span><span id="39f4" class="ma mb it lw b gy mg md l me mf">cout &lt;&lt; "Month "&lt;&lt; current_month &lt;&lt; "contribution is: "&lt;&lt; contributions[current_month]&lt;&lt; endl;</span><span id="fd99" class="ma mb it lw b gy mg md l me mf">current_month++;</span><span id="be6b" class="ma mb it lw b gy mg md l me mf">}</span></pre><p id="b370" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">所以，完整的脚本如下:</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="0f23" class="ma mb it lw b gy mc md l me mf">int main(){</span><span id="7e35" class="ma mb it lw b gy mg md l me mf">int months;</span><span id="dea2" class="ma mb it lw b gy mg md l me mf">int current_month = 1;</span><span id="acae" class="ma mb it lw b gy mg md l me mf">cout &lt;&lt; "Please enter the number of months \n";<br/>cin &gt;&gt; months;</span><span id="20e8" class="ma mb it lw b gy mg md l me mf">std::vector&lt;float&gt; contributions(months);<br/>float initial_contrbution = 100;<br/>contributions[1] = initial_contrbution;</span><span id="7284" class="ma mb it lw b gy mg md l me mf">while (current_month &lt;= months){</span><span id="d5cf" class="ma mb it lw b gy mg md l me mf">contributions[current_month + 1] =1.02*contributions[current_month];</span><span id="9998" class="ma mb it lw b gy mg md l me mf">cout &lt;&lt; "Month "&lt;&lt; current_month &lt;&lt; "contribution is: "&lt;&lt; contributions[current_month]&lt;&lt; endl;</span><span id="d713" class="ma mb it lw b gy mg md l me mf">current_month++;</span><span id="1e46" class="ma mb it lw b gy mg md l me mf">}</span><span id="ca02" class="ma mb it lw b gy mg md l me mf">}</span></pre><p id="10bb" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果我们使用五个月的输入值编译并执行这个脚本，我们将得到以下输出:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ml"><img src="../Images/fc206bc98683f8014d7ac6c64ebbf441.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*jaMu8_JEP5BTL7-z"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><p id="a127" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">从这里，我们可以计算出贡献的总和。让我们初始化一个浮点变量，我们将使用它来存储总和，并在while循环中计算总和:</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="9edc" class="ma mb it lw b gy mc md l me mf">int main(){</span><span id="9c6d" class="ma mb it lw b gy mg md l me mf">int months;<br/>int current_month = 1;</span><span id="edfd" class="ma mb it lw b gy mg md l me mf">cout &lt;&lt; "Please enter the number of months \n";<br/>cin &gt;&gt; months;</span><span id="79df" class="ma mb it lw b gy mg md l me mf">std::vector&lt;float&gt; contributions(months);<br/>float initial_contrbution = 100;<br/>float sum_contributions = 0;<br/>contributions[1] = initial_contrbution;</span><span id="0e9d" class="ma mb it lw b gy mg md l me mf">while (current_month &lt;= months){</span><span id="ad2e" class="ma mb it lw b gy mg md l me mf">contributions[current_month + 1] =1.02*contributions[current_month];</span><span id="9200" class="ma mb it lw b gy mg md l me mf">cout &lt;&lt; "Month "&lt;&lt; current_month &lt;&lt; "contribution is: "&lt;&lt; contributions[current_month]&lt;&lt; endl;</span><span id="1bf8" class="ma mb it lw b gy mg md l me mf">sum_contributions += contributions[current_month];</span><span id="db25" class="ma mb it lw b gy mg md l me mf">current_month++;</span><span id="8099" class="ma mb it lw b gy mg md l me mf">}</span><span id="af6c" class="ma mb it lw b gy mg md l me mf">cout&lt;&lt;"Sum of contributions for "&lt;&lt; months &lt;&lt; "months is: "&lt;&lt;sum_contributions &lt;&lt; endl;</span><span id="accd" class="ma mb it lw b gy mg md l me mf">}</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mm"><img src="../Images/65bd4135ebbbd725e80a25c636176bec.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*1IG6qTB9SKfoeBJU"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><p id="2e4b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在让我们考虑一个特例。假设用户不小心输入了一个负值，比如负五，持续了几个月。我们得到以下std::length_error:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mh"><img src="../Images/59aa08e1637da8622ea2814751c2bcad.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*D5SpS-hlDRxZtqZo"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><p id="d785" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们看到我们的代码失败了，并显示了一条与我们的向量std::length_error的长度相关的神秘消息。这是因为我们可以定义一个长度为负五的向量。我们可以使用异常处理来解决这样的情况:</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="2308" class="ma mb it lw b gy mc md l me mf">try{</span><span id="3297" class="ma mb it lw b gy mg md l me mf">std::vector&lt;float&gt; contributions(months); //float contributions[months];</span><span id="4a6f" class="ma mb it lw b gy mg md l me mf">float initial_contrbution = 100;<br/>float sum_contributions = 0;<br/>contributions[1] = initial_contrbution;</span><span id="581b" class="ma mb it lw b gy mg md l me mf">while (current_month &lt;= months){</span><span id="8933" class="ma mb it lw b gy mg md l me mf">contributions[current_month + 1] =1.02*contributions[current_month];</span><span id="9ad3" class="ma mb it lw b gy mg md l me mf">cout &lt;&lt; "Month "&lt;&lt; current_month &lt;&lt; "contribution is: "&lt;&lt; contributions[current_month]&lt;&lt; endl;</span><span id="2b33" class="ma mb it lw b gy mg md l me mf">sum_contributions += contributions[current_month];</span><span id="a531" class="ma mb it lw b gy mg md l me mf">current_month++;</span><span id="226d" class="ma mb it lw b gy mg md l me mf">}</span><span id="b30d" class="ma mb it lw b gy mg md l me mf">cout&lt;&lt;"Sum of contributions for "&lt;&lt; months &lt;&lt; "months is: "&lt;&lt;sum_contributions &lt;&lt; endl;</span><span id="8ac5" class="ma mb it lw b gy mg md l me mf">catch (const std::length_error&amp; le) {</span><span id="0d55" class="ma mb it lw b gy mg md l me mf">std::cerr &lt;&lt; "Length of "&lt;&lt; le.what() &lt;&lt; "can’t be negative \n";</span><span id="d6e8" class="ma mb it lw b gy mg md l me mf">}</span></pre><p id="16c2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">所以，完整的脚本如下:</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="3f96" class="ma mb it lw b gy mc md l me mf">int main(){</span><span id="65a0" class="ma mb it lw b gy mg md l me mf">int months;<br/>int current_month = 1;</span><span id="2e5f" class="ma mb it lw b gy mg md l me mf">cout &lt;&lt; "Please enter the number of months \n";<br/>cin &gt;&gt; months;</span><span id="837a" class="ma mb it lw b gy mg md l me mf">try{</span><span id="dd3b" class="ma mb it lw b gy mg md l me mf">std::vector&lt;float&gt; contributions(months); //float contributions[months];</span><span id="aff4" class="ma mb it lw b gy mg md l me mf">float initial_contrbution = 100;<br/>float sum_contributions = 0;<br/>contributions[1] = initial_contrbution;</span><span id="cb90" class="ma mb it lw b gy mg md l me mf">while (current_month &lt;= months){</span><span id="62d2" class="ma mb it lw b gy mg md l me mf">contributions[current_month + 1] =1.02*contributions[current_month];<br/>cout &lt;&lt; "Month "&lt;&lt; current_month &lt;&lt; "contribution is: "&lt;&lt; contributions[current_month]&lt;&lt; endl;<br/>sum_contributions += contributions[current_month];<br/>current_month++;</span><span id="f7ed" class="ma mb it lw b gy mg md l me mf">}</span><span id="b9cf" class="ma mb it lw b gy mg md l me mf">cout&lt;&lt;"Sum of contributions for "&lt;&lt; months &lt;&lt; "months is: "&lt;&lt;sum_contributions &lt;&lt; endl;</span><span id="8b8a" class="ma mb it lw b gy mg md l me mf">catch (const std::length_error&amp; le) {</span><span id="ef09" class="ma mb it lw b gy mg md l me mf">std::cerr &lt;&lt; "Length of "&lt;&lt; le.what() &lt;&lt; "can’t be negative \n";</span><span id="ef29" class="ma mb it lw b gy mg md l me mf">}</span><span id="e4c2" class="ma mb it lw b gy mg md l me mf">}</span><span id="e2cb" class="ma mb it lw b gy mg md l me mf">}</span></pre><p id="0a0e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在，如果我们连续几个月编译、执行并传递一个负值，我们会适当地处理错误:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mn"><img src="../Images/7958fa64561d6ce4b324efc020854a10.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*5n_UJTnZ3fgKrzvC"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><p id="a29a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们看到，通过适当地处理长度错误，我们能够向用户显示一条描述性的消息。</p><p id="bd18" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这篇博客中使用的脚本可以在<a class="ae ky" href="https://github.com/spierre91/builtiin/tree/main/cpp_tutorials" rel="noopener ugc nofollow" target="_blank"> GitHub </a>上获得。</p><p id="02c1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">结论</strong></p><p id="22fd" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">异常处理是软件编程中非常重要的一部分。它允许开发人员处理代码的意外行为、异常输入、意外运行时等等。</p><p id="e7e1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这通常是防止代码无法成功运行的有效措施。此外，异常情况通常会导致难以理解的系统生成的错误。不透明的、系统生成的错误消息会让用户、开发人员和工程师感到沮丧。如果用户无意中提供了一个错误的输入值，最好采取措施来处理这些类型的值，并向用户提供一条有意义的消息，说明错误发生的原因。理解异常处理对于软件开发人员、软件工程师甚至机器学习工程师和数据科学家来说都很重要。</p><p id="e347" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果你有兴趣学习python编程的基础知识、Pandas的数据操作以及python中的机器学习，请查看<a class="ae ky" href="https://www.amazon.com/dp/B08N38XW2Q/ref=sr_1_1?dchild=1&amp;keywords=sadrach+python&amp;qid=1604966500&amp;s=books&amp;sr=1-1" rel="noopener ugc nofollow" target="_blank"><em class="mo">Python for Data Science and Machine Learning:Python编程、Pandas和sci kit-初学者学习教程</em> </a> <em class="mo">。我希望你觉得这篇文章有用/有趣。</em></p><p id="a908" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu"> <em class="mo">本帖原载于</em> </strong> <a class="ae ky" href="https://builtin.com/software-engineering-perspectives" rel="noopener ugc nofollow" target="_blank"> <strong class="lb iu"> <em class="mo">内置博客</em> </strong> </a> <strong class="lb iu"> <em class="mo">。原片可以在这里找到</em></strong><a class="ae ky" href="https://builtin.com/software-engineering-perspectives/how-to-write-clean-exception-handling-code-c%2B%2B" rel="noopener ugc nofollow" target="_blank"><strong class="lb iu"><em class="mo"/></strong></a><strong class="lb iu"><em class="mo">。</em>T29】</strong></p></div></div>    
</body>
</html>