<html>
<head>
<title>Python is About to Become 64% Faster — Python 3.10 vs. Python 3.11 Benchmark</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Python将快64%——Python 3.10与Python 3.11基准测试</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/python-is-about-to-become-64-faster-python-3-10-vs-python-3-11-benchmark-3a6abcc25b90#2022-04-28">https://towardsdatascience.com/python-is-about-to-become-64-faster-python-3-10-vs-python-3-11-benchmark-3a6abcc25b90#2022-04-28</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="6260" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">为Python 3.11激动吧——终于到了显著提高性能的时候了</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/2dce6be8fa6fa6b27284390f7f6a036d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*lUpFysYOjZmQg_vl"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">马修·布罗德尔在Unsplash<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">上的照片</a></p></figure><p id="3ba1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">众所周知，Python不是最快的编程语言。这种情况即将改变，或者至少会朝着正确的方向发展。最新的Python版本——Python 3.11——预计将于2022年10月发布。更好的是有一个发布候选(RC)版本可供我们使用。</p><p id="bc10" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这正是我们今天要做的。我们将在不同的Docker容器中安装Python 3.10和3.11，并在一组基准测试中比较它们。我计划使用<a class="ae ky" href="https://pyperformance.readthedocs.io/" rel="noopener ugc nofollow" target="_blank"> pyperformance包</a>来完成这项工作，因为它将完成所有繁重的工作。</p><p id="00f3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">TL；DR </strong> —平均来说，Python 3.11比Python 3.10快14%。在一些基准测试中，新版本稍微慢了一些，但在其他测试中，它的速度提高了64%。我在配有10核CPU的M1 Pro MacBook Pro 16上运行了基准测试。每个Python版本都安装在Docker中，Docker使用了5个逻辑CPU内核。相对而言，您的里程可能会有所不同，但您应该会看到类似的结果。</p><p id="774e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">不想看书？请观看我的视频:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="lv lw l"/></div></figure></div><div class="ab cl lx ly hx lz" role="separator"><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc"/></div><div class="im in io ip iq"><h1 id="21b2" class="me mf it bd mg mh mi mj mk ml mm mn mo jz mp ka mq kc mr kd ms kf mt kg mu mv bi translated">如何在Docker中安装Python 3.11</h1><p id="f400" class="pw-post-body-paragraph kz la it lb b lc mw ju le lf mx jx lh li my lk ll lm mz lo lp lq na ls lt lu im bi translated">如果你想跟着做，你需要安装Docker。它是任何数据科学工具带中的必备工具，因此不应该成为问题。Docker运行后，打开两个终端标签。</p><p id="6dcc" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">首先，我们将在后台获取并运行Python 3.10:</p><pre class="kj kk kl km gt nb nc nd ne aw nf bi"><span id="8a34" class="ng mf it nc b gy nh ni l nj nk">docker run -t -d python:3.10.4-bullseye</span></pre><p id="8705" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在第二个例子中，我们将做同样的事情，但针对Python 3.11:</p><pre class="kj kk kl km gt nb nc nd ne aw nf bi"><span id="9a5a" class="ng mf it nc b gy nh ni l nj nk">docker run -t -d python:3.11-rc-bullseye</span></pre><p id="e640" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Docker将需要一些时间来下载和启动这两个图像，这取决于您的硬件配置和互联网速度。完成后，您可以打开两个Visual Studio代码窗口，并将它们附加到Docker容器(使用Docker VSCode扩展，右键单击图像，并选择“附加Visual Studio代码”)。或者，您也可以只附加壳。</p><p id="185c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">进入容器后，启动新的VSCode集成终端并检查Python版本:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nl"><img src="../Images/a72bf045236201a3aa0b783717ea78a2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*TkoyFHgQb8HuCaTNvJtXDw.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">图Visual Studio代码中附加的Python 3.10和3.11容器(图片由作者提供)</p></figure><p id="d30a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">你可以看到，我左边是Python 3.10，右边是Python 3.11。接下来，我们将安装<code class="fe nm nn no nc b">pyperformance</code>包并运行基准测试。</p></div><div class="ab cl lx ly hx lz" role="separator"><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc"/></div><div class="im in io ip iq"><h1 id="674e" class="me mf it bd mg mh mi mj mk ml mm mn mo jz mp ka mq kc mr kd ms kf mt kg mu mv bi translated">如何用PyPerformance运行Python基准测试</h1><p id="da57" class="pw-post-body-paragraph kz la it lb b lc mw ju le lf mx jx lh li my lk ll lm mz lo lp lq na ls lt lu im bi translated">好了，我们让两个容器都运行并附加在VSCode中。那是困难的部分。</p><p id="948a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">下一步是安装<code class="fe nm nn no nc b">pyperformance</code>包。在<strong class="lb iu">的两个</strong>容器中运行以下命令:</p><pre class="kj kk kl km gt nb nc nd ne aw nf bi"><span id="ec5f" class="ng mf it nc b gy nh ni l nj nk">python3 -m pip install pyperformance</span></pre><p id="a052" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">安装后，在Python 3.10容器附带的VSCode窗口中运行以下shell命令:</p><pre class="kj kk kl km gt nb nc nd ne aw nf bi"><span id="407d" class="ng mf it nc b gy nh ni l nj nk">pyperformance run -o py310.json</span></pre><p id="7d85" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">并在Python 3.11容器中运行类似的命令:</p><pre class="kj kk kl km gt nb nc nd ne aw nf bi"><span id="863b" class="ng mf it nc b gy nh ni l nj nk">pyperformance run -o py311.json</span></pre><p id="4a39" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这些命令将运行几十个基准测试，所以去喝杯咖啡吧——这需要一些时间。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi np"><img src="../Images/229d275d409bd9ef68e2751e4188730c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*E-cLFqbZvcAF3RTzkli9PQ.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">图2 —在Docker中的3.10和3.11上运行Python基准测试(图片由作者提供)</p></figure><p id="abe3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">一旦完成，<code class="fe nm nn no nc b">pyperformance</code>会将输出分别保存到<code class="fe nm nn no nc b">py310.json</code>和<code class="fe nm nn no nc b">py311.json</code>文件中:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nq"><img src="../Images/b80a57cfb01437383b184adb5d057426.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*y9gOhkmtMSVDjqbV4ch6_Q.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">图3 —两个Python版本的基准测试都已完成(图片由作者提供)</p></figure><p id="81bf" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">每个文件都在一个单独的Docker容器中，所以为了实际比较这两个文件，您必须将JSON文件下载到您的本地机器上(或者将文件从一个容器上传到另一个容器)。</p><p id="7aa3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我已经在本地下载了它们，并在Python虚拟环境中安装了pyperformance包。接下来看看他们怎么比。</p></div><div class="ab cl lx ly hx lz" role="separator"><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc"/></div><div class="im in io ip iq"><h1 id="637e" class="me mf it bd mg mh mi mj mk ml mm mn mo jz mp ka mq kc mr kd ms kf mt kg mu mv bi translated">Python 3.10和Python 3.11——哪个更快？</h1><p id="ef67" class="pw-post-body-paragraph kz la it lb b lc mw ju le lf mx jx lh li my lk ll lm mz lo lp lq na ls lt lu im bi translated">最好将两个JSON文件放在同一个文件夹中。在终端窗口中打开该文件夹，并运行以下shell命令:</p><pre class="kj kk kl km gt nb nc nd ne aw nf bi"><span id="fc2f" class="ng mf it nc b gy nh ni l nj nk">pyperf compare_to py310.json py311.json --table</span></pre><p id="8883" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">以下是输出结果:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nr"><img src="../Images/0fcef27c08af8333720f684926d60981.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*tPXS13THHzq-x8oNJSL1bA.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">图4 — Python 3.10与3.11的基准测试结果(图片由作者提供)</p></figure><p id="2ff1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我统计了五次测试，其中Python 3.10比Python 3.11略快。在其他方面，Python 3.11比Python 3.10快64%。按照几何平均数，Python 3.11比Python 3.10快14%。</p></div><div class="ab cl lx ly hx lz" role="separator"><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc"/></div><div class="im in io ip iq"><h1 id="db98" class="me mf it bd mg mh mi mj mk ml mm mn mo jz mp ka mq kc mr kd ms kf mt kg mu mv bi translated">Python 3.10与Python 3.11基准对比总结</h1><p id="3a44" class="pw-post-body-paragraph kz la it lb b lc mw ju le lf mx jx lh li my lk ll lm mz lo lp lq na ls lt lu im bi translated">这就是Python 3.10和Python 3.11之间的性能比较。值得注意的是，Python 3.11还没有发布，所以我们将一个完全稳定的版本与一个候选版本进行比较。可能正式发布后两者差距会更大。只有时间能证明一切。</p><p id="9c1f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><em class="ns">你对即将到来的Python版本有什么看法？看到Python跑得更快，你是兴奋，还是根本不在乎？请在下面的评论区告诉我。</em></p></div><div class="ab cl lx ly hx lz" role="separator"><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc"/></div><div class="im in io ip iq"><p id="be3a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><em class="ns">喜欢这篇文章吗？成为</em> <a class="ae ky" href="https://medium.com/@radecicdario/membership" rel="noopener"> <em class="ns">中等会员</em> </a> <em class="ns">继续无限制学习。如果你使用下面的链接，我会收到你的一部分会员费，不需要你额外付费。</em></p><div class="nt nu gp gr nv nw"><a href="https://medium.com/@radecicdario/membership" rel="noopener follow" target="_blank"><div class="nx ab fo"><div class="ny ab nz cl cj oa"><h2 class="bd iu gy z fp ob fr fs oc fu fw is bi translated">通过我的推荐链接加入Medium-Dario rade ci</h2><div class="od l"><h3 class="bd b gy z fp ob fr fs oc fu fw dk translated">作为一个媒体会员，你的会员费的一部分会给你阅读的作家，你可以完全接触到每一个故事…</h3></div><div class="oe l"><p class="bd b dl z fp ob fr fs oc fu fw dk translated">medium.com</p></div></div><div class="of l"><div class="og l oh oi oj of ok ks nw"/></div></div></a></div></div><div class="ab cl lx ly hx lz" role="separator"><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc"/></div><div class="im in io ip iq"><h2 id="3792" class="ng mf it bd mg ol om dn mk on oo dp mo li op oq mq lm or os ms lq ot ou mu ov bi translated">推荐阅读</h2><ul class=""><li id="d338" class="ow ox it lb b lc mw lf mx li oy lm oz lq pa lu pb pc pd pe bi translated"><a class="ae ky" href="https://betterdatascience.com/best-data-science-prerequisite-books/" rel="noopener ugc nofollow" target="_blank">学习数据科学先决条件(数学、统计和编程)的5本最佳书籍</a></li><li id="332d" class="ow ox it lb b lc pf lf pg li ph lm pi lq pj lu pb pc pd pe bi translated"><a class="ae ky" href="https://betterdatascience.com/top-books-to-learn-data-science/" rel="noopener ugc nofollow" target="_blank">2022年学习数据科学的前5本书</a></li><li id="254c" class="ow ox it lb b lc pf lf pg li ph lm pi lq pj lu pb pc pd pe bi translated"><a class="ae ky" href="https://betterdatascience.com/python-list-print/" rel="noopener ugc nofollow" target="_blank">用Python打印列表的7种方法</a></li></ul><h2 id="119e" class="ng mf it bd mg ol om dn mk on oo dp mo li op oq mq lm or os ms lq ot ou mu ov bi translated">保持联系</h2><ul class=""><li id="c6f5" class="ow ox it lb b lc mw lf mx li oy lm oz lq pa lu pb pc pd pe bi translated">雇用我作为一名<a class="ae ky" href="https://betterdatascience.com/contact/" rel="noopener ugc nofollow" target="_blank">技术作家</a></li><li id="abc2" class="ow ox it lb b lc pf lf pg li ph lm pi lq pj lu pb pc pd pe bi translated">在YouTube<a class="ae ky" href="https://www.youtube.com/c/BetterDataScience" rel="noopener ugc nofollow" target="_blank">上订阅</a></li><li id="0d38" class="ow ox it lb b lc pf lf pg li ph lm pi lq pj lu pb pc pd pe bi translated">在<a class="ae ky" href="https://www.linkedin.com/in/darioradecic/" rel="noopener ugc nofollow" target="_blank"> LinkedIn </a>上连接</li></ul></div><div class="ab cl lx ly hx lz" role="separator"><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc"/></div><div class="im in io ip iq"><p id="7bdb" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><em class="ns">原载于2022年4月28日https://betterdatascience.com</em><a class="ae ky" href="https://betterdatascience.com/python-310-vs-python-311/" rel="noopener ugc nofollow" target="_blank"><em class="ns"/></a><em class="ns">。</em></p></div></div>    
</body>
</html>