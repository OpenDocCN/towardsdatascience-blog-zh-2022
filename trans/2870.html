<html>
<head>
<title>How to Solve Scheduling Problems in Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何用Python解决调度问题</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/how-to-solve-scheduling-problems-in-python-36a9af8de451#2022-06-22">https://towardsdatascience.com/how-to-solve-scheduling-problems-in-python-36a9af8de451#2022-06-22</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="9162" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">使用线性规划来最小化所需资源和计划资源之间的差异</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/cc18bcffc38879b95f685a0e2ac0b2bd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*VKIGzmJrYBzcPlB6USx8OA.jpeg"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">埃里克·罗瑟梅尔在<a class="ae kv" href="https://unsplash.com/es/fotos/FoKO4DpXamQ" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</p></figure><p id="0353" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在劳动力管理中，计划是指根据每个时间间隔的预计需求，找到安排一组资源的“最佳”方法。例如，这可能是在给定一些需求(例如，使用ErlangC)和一些限制的情况下，找出每一小时间隔要调度多少呼叫中心代理。</p><p id="8f89" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">“最优”标准是在一个目标函数下定义的，例如，最小化预定资源的数量或需求和计划资源之间的绝对差异。</p><h1 id="45af" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated"><strong class="ak"> 1。配方</strong></h1><p id="f476" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">让我们假设我们正在为一个呼叫中心操作创建调度；我们有每60分钟间隔所需的估计人数。查看<a class="ae kv" rel="noopener" target="_blank" href="/workforce-planning-optimization-using-python-69af0ef9011a">这篇</a>其他帖子，了解如何找到需求。</p><p id="e6c9" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">需求可能如下所示:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi mp"><img src="../Images/475d02b383b2e52c5cf35573a41409d6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1280/format:webp/1*sMY_jXSjARdBsBvwEBuzDA.png"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">必需的代理。图片由作者提供。</p></figure><p id="e418" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们想回答这样一个问题:给定一组覆盖部分时间间隔的班次，我应该安排多少个座席代表每个班次？例如，每个区间所需人员和计划人员之间的差异尽可能低，以确保尽可能满足需求，而不会出现大量人员不足或人员过多的情况。</p><p id="de25" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">考虑到轮班覆盖可能看起来像这样，所以在一个时间间隔，来自不同班次的人同时工作。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi mq"><img src="../Images/0ae533721f7bda1a359a3a1b775997bd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*i2HUn181uffkM4jIg3BvCg.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">轮班设计。图片由作者提供。</p></figure><h1 id="7484" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">1.1数学公式</h1><p id="de65" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">在这一节中，我将把这种情况定义为优化问题。为此，我引入以下变量和符号:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi mr"><img src="../Images/ae2abef2fc0d5caef58e8efcc700a7c6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*984wBQwEaOqExlEs5EThZw.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">调度变量。图片由作者提供。</p></figure><p id="5aec" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">请注意，period的定义允许将一天分成任意数量的间隔；它可以是24个一小时的间隔，48个30分钟的间隔，等等。这将取决于需求的粒度。</p><p id="a408" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在我们必须定义目标函数和模型的限制；根据可用数据和业务需求，此步骤可能会有所变化。</p><p id="e466" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我将把这个公式称为“最小绝对差”模型；在这种方法中，求解器将最小化所需资源和计划资源之间的绝对差异；这意味着计划资源可能高于或低于实际需求。</p><p id="bfe8" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在这个定义下，目标函数被公式化为:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi ms"><img src="../Images/e629379055acfce6053beac2f34b3b69.png" data-original-src="https://miro.medium.com/v2/resize:fit:790/format:webp/1*qVuFONP3V8YxaGABNRjEeQ.png"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">目标函数。图片由作者提供。</p></figure><p id="8911" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">请注意，术语Xds÷Esp将得出某个时间段和某一天的计划资源数量，术语Ndp是所需资源。因此，该目标有效地最小化了需求与实际计划在所有日期和期间的绝对差异。</p><p id="7ee3" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在我们介绍这个模型的限制:</p><ul class=""><li id="df3b" class="mt mu iq ky b kz la lc ld lf mv lj mw ln mx lr my mz na nb bi translated">周期<em class="nc"> p </em>和日期<em class="nc"> d </em>的调度资源数量不能超过最大允许能力。</li></ul><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nd"><img src="../Images/bcf7ceed6d3b425fa0b4dbfbdbc5f373.png" data-original-src="https://miro.medium.com/v2/resize:fit:906/format:webp/1*GCuUsd2yCzCp28Mv4C6b0w.png"/></div></figure><ul class=""><li id="5633" class="mt mu iq ky b kz la lc ld lf mv lj mw ln mx lr my mz na nb bi translated">同一班次的计划资源数量不能超过最大允许能力。</li></ul><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi ne"><img src="../Images/7db247ffc5043ee8fbc099d9c99ccef6.png" data-original-src="https://miro.medium.com/v2/resize:fit:694/format:webp/1*5_oHK30OWVf8FblDHkm7pw.png"/></div></figure><ul class=""><li id="d618" class="mt mu iq ky b kz la lc ld lf mv lj mw ln mx lr my mz na nb bi translated">正整数限制</li></ul><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nf"><img src="../Images/f5f46bee94d2dba3c3a439be7426a822.png" data-original-src="https://miro.medium.com/v2/resize:fit:978/format:webp/1*rF6-1b1OFkw5jV0e_BUmwA.png"/></div></figure><ul class=""><li id="012f" class="mt mu iq ky b kz la lc ld lf mv lj mw ln mx lr my mz na nb bi translated">布尔限制</li></ul><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi ng"><img src="../Images/8795bc0df5ec833094e343b90a8017b7.png" data-original-src="https://miro.medium.com/v2/resize:fit:684/format:webp/1*ZtWE2-xID0HrHEAIOcR1EA.png"/></div></figure><h1 id="2e79" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated"><strong class="ak"> 2。Python解决方案</strong></h1><p id="b5c0" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">从上一节可以看出，问题已经完全定义好了，您可以使用任何支持定义不同变量和目标函数的求解器。</p><p id="19ac" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">然而，将这些方程翻译成代码并求解它们可能需要相当多的优化知识；幸运的是，一些软件包已经简化了这个过程；在这种情况下，我将使用<a class="ae kv" href="https://pyworkforce.readthedocs.io/" rel="noopener ugc nofollow" target="_blank"> pyworkforce </a>，这是运筹学中常见问题的python接口，适用于排队、调度、排班和优化问题。</p><p id="8b50" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">首先，让我们定义每个间隔的需求和我们可以使用的固定班次，我将只解决一天的问题:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nh ni l"/></div></figure><p id="27ff" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在，在pyworkfoce的帮助下，我们只需要将这些数据传递给MinAbsDifference对象，然后运行solve方法:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nh ni l"/></div></figure><p id="23a9" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">对于这个特定的运行，我得到以下输出:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nh ni l"/></div></figure><p id="fca6" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">首先要注意的是状态是“最优”，这意味着求解器能够找到最优可行解。接下来，我们有一个35.0的成本，这是找到解后目标函数的值。</p><p id="4fb9" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">resources _ shifts对象将告诉我们在每个可用的班次中要安排多少代理人；例如，您应该在第三班安排13名座席代表。</p><p id="43e1" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果我们将此信息与班次覆盖范围相匹配，即我们找到Xds÷Esp，我们将得到每个间隔的以下计划座席代表与理论上所需的座席代表:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi mp"><img src="../Images/4aa9094bbbbda32efa9001797a88d23e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1280/format:webp/1*UxHajykXpFsyP8r9p8eH5g.png"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">必需代理与预定代理。</p></figure><p id="59ee" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">您可以看到，有时我们的代理可能比我们需要的多/少；你可以把它想成有六个位移只能得到所需曲线的某种程度的离散化，但它保证是在目标函数及其限制的定义下的最好的。</p></div><div class="ab cl nj nk hu nl" role="separator"><span class="nm bw bk nn no np"/><span class="nm bw bk nn no np"/><span class="nm bw bk nn no"/></div><div class="ij ik il im in"><p id="ffd0" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我希望这篇文章对你开始处理调度问题有用。如果您想了解更多关于pyworkforce以及如何解决其他优化问题的信息，您可以查看文档及其repo:</p><div class="nq nr gp gr ns nt"><a href="https://pyworkforce.readthedocs.io/en/stable/" rel="noopener  ugc nofollow" target="_blank"><div class="nu ab fo"><div class="nv ab nw cl cj nx"><h2 class="bd ir gy z fp ny fr fs nz fu fw ip bi translated">py劳动力-py劳动力0.5.0文档</h2></div></div></a></div><div class="nq nr gp gr ns nt"><a href="https://github.com/rodrigo-arenas/pyworkforce" rel="noopener  ugc nofollow" target="_blank"><div class="nu ab fo"><div class="nv ab nw cl cj nx"><h2 class="bd ir gy z fp ny fr fs nz fu fw ip bi translated">GitHub-Rodrigo-arenas/py work force</h2><div class="oa l"><h3 class="bd b gy z fp ny fr fs nz fu fw dk translated">劳动力管理、排队、调度、排班和优化问题的标准工具。请务必检查…</h3></div><div class="ob l"><p class="bd b dl z fp ny fr fs nz fu fw dk translated">github.com</p></div></div><div class="oc l"><div class="od l oe of og oc oh kp nt"/></div></div></a></div></div></div>    
</body>
</html>