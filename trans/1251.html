<html>
<head>
<title>An Ode to F-stings</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">F-stings 颂歌</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/an-ode-to-f-stings-dcb0fb4fc67a#2022-03-29">https://towardsdatascience.com/an-ode-to-f-stings-dcb0fb4fc67a#2022-03-29</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="f9dc" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">格式化字符串的显而易见的(也是最好的)方法</h2></div><blockquote class="kf kg kh"><p id="eb8a" class="ki kj kk kl b km kn jr ko kp kq ju kr ks kt ku kv kw kx ky kz la lb lc ld le ij bi translated">应该有一种——最好只有一种——显而易见的方法来做这件事。</p><p id="26e1" class="ki kj kk kl b km kn jr ko kp kq ju kr ks kt ku kv kw kx ky kz la lb lc ld le ij bi translated">Python 的禅</p></blockquote><figure class="lg lh li lj gt lk gh gi paragraph-image"><div role="button" tabindex="0" class="ll lm di ln bf lo"><div class="gh gi lf"><img src="../Images/5369b6f37dc8ccd787a6d693d8a30592.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*HFx2R9WGY8Mi1Sox"/></div></div><p class="lr ls gj gh gi lt lu bd b be z dk translated">照片由<a class="ae lv" href="https://unsplash.com/@tjholowaychuk?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Tj·霍洛韦丘克</a>在<a class="ae lv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</p></figure><h1 id="47a6" class="lw lx iq bd ly lz ma mb mc md me mf mg jw mh jx mi jz mj ka mk kc ml kd mm mn bi translated">所有字符串格式化方法概述</h1><p id="dceb" class="pw-post-body-paragraph ki kj iq kl b km mo jr ko kp mp ju kr mq mr ku kv ms mt ky kz mu mv lc ld le ij bi translated">当我第一次学习编码时，我犯了许多错误。像任何新手一样，我专注于输出，而不是担心最佳实践。因此，我的指纹中不乏类似这样的代码:</p><figure class="lg lh li lj gt lk"><div class="bz fp l di"><div class="mw mx l"/></div></figure><p id="5194" class="pw-post-body-paragraph ki kj iq kl b km kn jr ko kp kq ju kr mq kt ku kv ms kx ky kz mu lb lc ld le ij bi translated">如果我需要格式化某些变量，它看起来像这样:</p><figure class="lg lh li lj gt lk"><div class="bz fp l di"><div class="mw mx l"/></div></figure><p id="9fb3" class="pw-post-body-paragraph ki kj iq kl b km kn jr ko kp kq ju kr mq kt ku kv ms kx ky kz mu lb lc ld le ij bi translated">以这种方式连接字符串是我打印语句、绘图标题甚至文件路径的常用方法。这很有效，为什么要质疑呢？我有太多破碎的脚本要修复，知识空白要填补。我没有花时间去考虑是否有更好的办法。</p><p id="b95d" class="pw-post-body-paragraph ki kj iq kl b km kn jr ko kp kq ju kr mq kt ku kv ms kx ky kz mu lb lc ld le ij bi translated">通过教程和堆栈溢出问题，我了解了<code class="fe my mz na nb b">%-formatting</code>和<code class="fe my mz na nb b">str.format()</code>方法。但是我发现这些方法很难读懂。它们需要来回移动。我想要像我的连接方法一样的东西，可以从左到右阅读的东西。</p><p id="6d40" class="pw-post-body-paragraph ki kj iq kl b km kn jr ko kp kq ju kr mq kt ku kv ms kx ky kz mu lb lc ld le ij bi translated">最终，我偶然发现了格式化字符串的最好也是最明显的方法:f-strings。Python 3.6 中引入的 f 字符串(又名格式化字符串)允许嵌入表达式。所有需要做的就是在字符串前加上一个<code class="fe my mz na nb b">f</code>或<code class="fe my mz na nb b">F</code>，并用括号将表达式分组。f 字符串可以用单引号<code class="fe my mz na nb b">’</code>或双引号<code class="fe my mz na nb b">“</code>初始化。这里有一个简单的例子:</p><figure class="lg lh li lj gt lk"><div class="bz fp l di"><div class="mw mx l"/></div></figure><h1 id="0f7a" class="lw lx iq bd ly lz ma mb mc md me mf mg jw mh jx mi jz mj ka mk kc ml kd mm mn bi translated">爱上 F 弦的 5 个理由</h1><h2 id="a080" class="nc lx iq bd ly nd ne dn mc nf ng dp mg mq nh ni mi ms nj nk mk mu nl nm mm nn bi translated">1.可读性📚</h2><blockquote class="kf kg kh"><p id="f722" class="ki kj kk kl b km kn jr ko kp kq ju kr ks kt ku kv kw kx ky kz la lb lc ld le ij bi translated">可读性很重要。Python 的禅</p></blockquote><p id="2c98" class="pw-post-body-paragraph ki kj iq kl b km kn jr ko kp kq ju kr mq kt ku kv ms kx ky kz mu lb lc ld le ij bi translated">在所有的字符串格式化方法中，f-strings 的可读性最强，因为它使用了最少的语法和嵌入式表达式。例如，考虑这些例子:</p><figure class="lg lh li lj gt lk"><div class="bz fp l di"><div class="mw mx l"/></div></figure><p id="a45b" class="pw-post-body-paragraph ki kj iq kl b km kn jr ko kp kq ju kr mq kt ku kv ms kx ky kz mu lb lc ld le ij bi translated">所有的打印语句产生相同的输出。然而，f 弦将三个变量嵌入到弦中，因此眼睛不需要来回扫视。你可以像读日常散文一样从左到右读 f 弦。</p><h2 id="b841" class="nc lx iq bd ly nd ne dn mc nf ng dp mg mq nh ni mi ms nj nk mk mu nl nm mm nn bi translated">2.速度⚡️</h2><p id="b6b9" class="pw-post-body-paragraph ki kj iq kl b km mo jr ko kp mp ju kr mq mr ku kv ms mt ky kz mu mv lc ld le ij bi translated">f 字符串是许多字符串格式化方法中最快的。Jupyter 笔记本上的一个简单测试证实了这一点:</p><figure class="lg lh li lj gt lk gh gi paragraph-image"><div role="button" tabindex="0" class="ll lm di ln bf lo"><div class="gh gi no"><img src="../Images/14f1e3cf31ea8cfaf44fe0fa847bbed0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*nDBFnIPcxab0BZDLKKJ1bw.png"/></div></div><p class="lr ls gj gh gi lt lu bd b be z dk translated">图片作者。</p></figure><p id="a3cd" class="pw-post-body-paragraph ki kj iq kl b km kn jr ko kp kq ju kr mq kt ku kv ms kx ky kz mu lb lc ld le ij bi translated">这是它的图像:</p><figure class="lg lh li lj gt lk gh gi paragraph-image"><div role="button" tabindex="0" class="ll lm di ln bf lo"><div class="gh gi np"><img src="../Images/0a869b54af5f82c492a209c4e837f251.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_8BlVNikyeiFFQaVicZkaw.png"/></div></div><p class="lr ls gj gh gi lt lu bd b be z dk translated">图片作者。</p></figure><h2 id="28b7" class="nc lx iq bd ly nd ne dn mc nf ng dp mg mq nh ni mi ms nj nk mk mu nl nm mm nn bi translated">3.嵌入表达式和函数💯</h2><p id="105e" class="pw-post-body-paragraph ki kj iq kl b km mo jr ko kp mp ju kr mq mr ku kv ms mt ky kz mu mv lc ld le ij bi translated">除了变量，还可以嵌入数学表达式。它们被视为常规 Python 表达式。例如:</p><figure class="lg lh li lj gt lk"><div class="bz fp l di"><div class="mw mx l"/></div></figure><p id="2b0f" class="pw-post-body-paragraph ki kj iq kl b km kn jr ko kp kq ju kr mq kt ku kv ms kx ky kz mu lb lc ld le ij bi translated">Lambda 函数也适用于 f 字符串。下面是上面重写为 lambda 函数的示例:</p><figure class="lg lh li lj gt lk"><div class="bz fp l di"><div class="mw mx l"/></div></figure><h2 id="25c9" class="nc lx iq bd ly nd ne dn mc nf ng dp mg mq nh ni mi ms nj nk mk mu nl nm mm nn bi translated">4.格式精度和 Type✂️</h2><p id="46b4" class="pw-post-body-paragraph ki kj iq kl b km mo jr ko kp mp ju kr mq mr ku kv ms mt ky kz mu mv lc ld le ij bi translated">f 字符串使得格式化嵌入的表达式变得容易。只需在表达式后添加<code class="fe my mz na nb b">‘:’</code>和一个格式说明符。格式规范是一种确定如何表示表达式的小型语言。除了其他属性之外，它还控制表达式的精度和类型。</p><p id="463e" class="pw-post-body-paragraph ki kj iq kl b km kn jr ko kp kq ju kr mq kt ku kv ms kx ky kz mu lb lc ld le ij bi translated">要控制表达式的<strong class="kl ir">精度，请在格式说明符中的<code class="fe my mz na nb b">‘.’</code>后添加所需的位数。例如:</strong></p><figure class="lg lh li lj gt lk"><div class="bz fp l di"><div class="mw mx l"/></div></figure><p id="3ed4" class="pw-post-body-paragraph ki kj iq kl b km kn jr ko kp kq ju kr mq kt ku kv ms kx ky kz mu lb lc ld le ij bi translated">精度不需要存储在变量中，然后用大括号嵌入。上面的例子是为了清楚起见。</p><p id="ae73" class="pw-post-body-paragraph ki kj iq kl b km kn jr ko kp kq ju kr mq kt ku kv ms kx ky kz mu lb lc ld le ij bi translated">格式规范还通过添加类型代码<strong class="kl ir">定义了表达式类型</strong>。例如，<code class="fe my mz na nb b">‘e’</code>是科学记数法的类型代码。默认表达式类型是字符串或<code class="fe my mz na nb b">‘s’</code>。</p><p id="d724" class="pw-post-body-paragraph ki kj iq kl b km kn jr ko kp kq ju kr mq kt ku kv ms kx ky kz mu lb lc ld le ij bi translated">对于定点符号(<code class="fe my mz na nb b">‘f’</code>和<code class="fe my mz na nb b">‘F’</code>类型)，精度值控制小数点后的位数。对于通用格式(<code class="fe my mz na nb b">‘g’</code>和<code class="fe my mz na nb b">‘G’</code>类型)，精度值决定小数点前后显示的位数。</p><p id="f366" class="pw-post-body-paragraph ki kj iq kl b km kn jr ko kp kq ju kr mq kt ku kv ms kx ky kz mu lb lc ld le ij bi translated">以下是演示不同表达式类型的一些示例:</p><p id="5e3c" class="pw-post-body-paragraph ki kj iq kl b km kn jr ko kp kq ju kr mq kt ku kv ms kx ky kz mu lb lc ld le ij bi translated"><strong class="kl ir">百分比</strong></p><figure class="lg lh li lj gt lk"><div class="bz fp l di"><div class="mw mx l"/></div></figure><p id="c209" class="pw-post-body-paragraph ki kj iq kl b km kn jr ko kp kq ju kr mq kt ku kv ms kx ky kz mu lb lc ld le ij bi translated"><strong class="kl ir">科学符号</strong></p><figure class="lg lh li lj gt lk"><div class="bz fp l di"><div class="mw mx l"/></div></figure><p id="eb1e" class="pw-post-body-paragraph ki kj iq kl b km kn jr ko kp kq ju kr mq kt ku kv ms kx ky kz mu lb lc ld le ij bi translated"><strong class="kl ir">不带尾随零</strong></p><figure class="lg lh li lj gt lk"><div class="bz fp l di"><div class="mw mx l"/></div></figure><p id="ec8a" class="pw-post-body-paragraph ki kj iq kl b km kn jr ko kp kq ju kr mq kt ku kv ms kx ky kz mu lb lc ld le ij bi translated"><strong class="kl ir">带尾随零</strong></p><figure class="lg lh li lj gt lk"><div class="bz fp l di"><div class="mw mx l"/></div></figure><h2 id="2dee" class="nc lx iq bd ly nd ne dn mc nf ng dp mg mq nh ni mi ms nj nk mk mu nl nm mm nn bi translated">5.间距和对齐🗂</h2><blockquote class="kf kg kh"><p id="ba02" class="ki kj kk kl b km kn jr ko kp kq ju kr ks kt ku kv kw kx ky kz la lb lc ld le ij bi translated">漂亮总比难看好。Python 的禅</p></blockquote><p id="a81e" class="pw-post-body-paragraph ki kj iq kl b km kn jr ko kp kq ju kr mq kt ku kv ms kx ky kz mu lb lc ld le ij bi translated">格式规范还定义了 f 字符串中的间距和对齐方式。这在输出列表或格式化模板时非常有用。首先，通过使用对齐选项之一来定义对齐。<code class="fe my mz na nb b">‘&lt;’</code>左对齐，<code class="fe my mz na nb b">‘&gt;’</code>右对齐，<code class="fe my mz na nb b">‘=’</code>居中对齐。对齐选项位于精度和类型参数之前。</p><p id="2d63" class="pw-post-body-paragraph ki kj iq kl b km kn jr ko kp kq ju kr mq kt ku kv ms kx ky kz mu lb lc ld le ij bi translated">接下来，使用整数指定嵌入表达式的宽度。宽度定义了表达式的字符长度。如果宽度比表达式本身长，那么表达式将用空格填充。如果宽度较短，则没有填充。如果没有定义宽度，则表达式确定字符串的长度。没有宽度参数，就没有理由定义对齐。</p><figure class="lg lh li lj gt lk"><div class="bz fp l di"><div class="mw mx l"/></div></figure><figure class="lg lh li lj gt lk gh gi paragraph-image"><div role="button" tabindex="0" class="ll lm di ln bf lo"><div class="gh gi nq"><img src="../Images/73939a3a8e416bca54a2747f74dbc86a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*tb4M41m68vIMrbJqQ0PK2Q.png"/></div></div><p class="lr ls gj gh gi lt lu bd b be z dk translated">输出。图片作者。</p></figure><p id="283b" class="pw-post-body-paragraph ki kj iq kl b km kn jr ko kp kq ju kr mq kt ku kv ms kx ky kz mu lb lc ld le ij bi translated">阅读文档了解更多使用格式规范的方法<a class="ae lv" href="https://docs.python.org/3/library/string.html#grammar-token-format-spec-grouping_option" rel="noopener ugc nofollow" target="_blank">这里</a>。</p><h1 id="4451" class="lw lx iq bd ly lz ma mb mc md me mf mg jw mh jx mi jz mj ka mk kc ml kd mm mn bi translated">结论</h1><p id="175b" class="pw-post-body-paragraph ki kj iq kl b km mo jr ko kp mp ju kr mq mr ku kv ms mt ky kz mu mv lc ld le ij bi translated">感谢您阅读我的文章。如果您喜欢我的内容，<em class="kk">请考虑关注我</em>。此外，欢迎所有反馈。我总是渴望学习新的或更好的做事方法。请随时留下您的评论或联系我 katyhagerty19@gmail.com。</p><div class="nr ns gp gr nt nu"><a href="https://medium.com/@katyhagerty19/membership" rel="noopener follow" target="_blank"><div class="nv ab fo"><div class="nw ab nx cl cj ny"><h2 class="bd ir gy z fp nz fr fs oa fu fw ip bi translated">加入我的介绍链接媒体-凯蒂哈格蒂</h2><div class="ob l"><h3 class="bd b gy z fp nz fr fs oa fu fw dk translated">作为一个媒体会员，你的会员费的一部分会给你阅读的作家，你可以完全接触到每一个故事…</h3></div><div class="oc l"><p class="bd b dl z fp nz fr fs oa fu fw dk translated">medium.com</p></div></div><div class="od l"><div class="oe l of og oh od oi lp nu"/></div></div></a></div></div></div>    
</body>
</html>