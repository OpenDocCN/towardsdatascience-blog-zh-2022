<html>
<head>
<title>statannotations: Add Statistical Significance Annotations on Seaborn Plots</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">statan注释:在Seaborn图上添加统计显著性注释</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/statsannotations-add-statistical-significance-annotations-on-seaborn-plots-6b753346a42a#2022-08-10">https://towardsdatascience.com/statsannotations-add-statistical-significance-annotations-on-seaborn-plots-6b753346a42a#2022-08-10</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="70be" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">从三行代码的比较中获得洞察力</h2></div><h1 id="9ab4" class="ki kj it bd kk kl km kn ko kp kq kr ks jz kt ka ku kc kv kd kw kf kx kg ky kz bi translated">动机</h1><figure class="la lb lc ld gt le"><div class="bz fp l di"><div class="lf lg l"/></div></figure><p id="af27" class="pw-post-body-paragraph lh li it lj b lk ll ju lm ln lo jx lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">假设您正试图确定出租车在两个城市之间的总支付中值是否有显著差异。您决定创建一个箱形图来观察每个接送城市的总费用。</p><figure class="la lb lc ld gt le gh gi paragraph-image"><div class="gh gi md"><img src="../Images/3b6fd96cc7cb6650d6fb42fa8d7b38ef.png" data-original-src="https://miro.medium.com/v2/resize:fit:1228/format:webp/1*KgDHlOfw1Q-H_jWnTd4A-g.png"/></div><p class="mg mh gj gh gi mi mj bd b be z dk translated">作者图片</p></figure><p id="c7b3" class="pw-post-body-paragraph lh li it lj b lk ll ju lm ln lo jx lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">这张图让你对多个城市之间的总票价差异有所了解，但不能让你深入了解你在寻找什么。</p><p id="7b16" class="pw-post-body-paragraph lh li it lj b lk ll ju lm ln lo jx lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">如果像下面这样在一个箱线图上添加统计注释不是很好吗？这就是statannotations派上用场的时候了。</p><figure class="la lb lc ld gt le gh gi paragraph-image"><div class="gh gi md"><img src="../Images/d5d3719072ef35e3505971a544bdb135.png" data-original-src="https://miro.medium.com/v2/resize:fit:1228/format:webp/1*1WzCrRvHjFG_EpQ0tFdoZw.png"/></div><p class="mg mh gj gh gi mi mj bd b be z dk translated">作者图片</p></figure><h1 id="c530" class="ki kj it bd kk kl km kn ko kp kq kr ks jz kt ka ku kc kv kd kw kf kx kg ky kz bi translated">什么是statannotations？</h1><p id="007f" class="pw-post-body-paragraph lh li it lj b lk mk ju lm ln ml jx lp lq mm ls lt lu mn lw lx ly mo ma mb mc im bi translated"><a class="ae mp" href="https://github.com/trevismd/statannotations" rel="noopener ugc nofollow" target="_blank"> statannotations </a>是一个Python包，可以选择计算统计测试，并在seaborn生成的图上添加统计注释。</p><p id="0922" class="pw-post-body-paragraph lh li it lj b lk ll ju lm ln lo jx lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">要安装statannotations，请键入:</p><pre class="la lb lc ld gt mq mr ms mt aw mu bi"><span id="c3bb" class="mv kj it mr b gy mw mx l my mz">pip install statannotations</span></pre><h1 id="b35a" class="ki kj it bd kk kl km kn ko kp kq kr ks jz kt ka ku kc kv kd kw kf kx kg ky kz bi translated">分析数据</h1><p id="fb3b" class="pw-post-body-paragraph lh li it lj b lk mk ju lm ln ml jx lp lq mm ls lt lu mn lw lx ly mo ma mb mc im bi translated">为了学习如何使用statannotations，我们首先从从seaborn加载纽约出租车的数据集开始。</p><figure class="la lb lc ld gt le"><div class="bz fp l di"><div class="na lg l"/></div></figure><figure class="la lb lc ld gt le"><div class="bz fp l di"><div class="nb lg l"/></div></figure><p id="737f" class="pw-post-body-paragraph lh li it lj b lk ll ju lm ln lo jx lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">让我们看看每个城市的总票价中值:</p><figure class="la lb lc ld gt le"><div class="bz fp l di"><div class="na lg l"/></div></figure><figure class="la lb lc ld gt le gh gi paragraph-image"><div class="gh gi nc"><img src="../Images/8a6b153c05103dd246a991bdc469e69c.png" data-original-src="https://miro.medium.com/v2/resize:fit:632/format:webp/1*mvBXrpo-DLx49dOoCIlf4w.png"/></div><p class="mg mh gj gh gi mi mj bd b be z dk translated">作者图片</p></figure><p id="fb20" class="pw-post-body-paragraph lh li it lj b lk ll ju lm ln lo jx lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">我们可以看到，从皇后区接乘客的出租车的总费用中值最高，其次是布朗克斯、布鲁克林和曼哈顿。</p><p id="1638" class="pw-post-body-paragraph lh li it lj b lk ll ju lm ln lo jx lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">为了更好地了解每个城市总票价的分布情况，我们可以创建每个城市总票价的箱线图:</p><figure class="la lb lc ld gt le"><div class="bz fp l di"><div class="na lg l"/></div></figure><figure class="la lb lc ld gt le gh gi paragraph-image"><div class="gh gi md"><img src="../Images/3b6fd96cc7cb6650d6fb42fa8d7b38ef.png" data-original-src="https://miro.medium.com/v2/resize:fit:1228/format:webp/1*KgDHlOfw1Q-H_jWnTd4A-g.png"/></div><p class="mg mh gj gh gi mi mj bd b be z dk translated">作者图片</p></figure><p id="d8aa" class="pw-post-body-paragraph lh li it lj b lk ll ju lm ln lo jx lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">为了给绘图添加统计注释，我们将使用statsannotions。</p><h1 id="ce2e" class="ki kj it bd kk kl km kn ko kp kq kr ks jz kt ka ku kc kv kd kw kf kx kg ky kz bi translated">在图上添加统计注释</h1><p id="7dd6" class="pw-post-body-paragraph lh li it lj b lk mk ju lm ln ml jx lp lq mm ls lt lu mn lw lx ly mo ma mb mc im bi translated">首先获取每个城市所有乘车的总费用:</p><figure class="la lb lc ld gt le"><div class="bz fp l di"><div class="na lg l"/></div></figure><p id="c6c4" class="pw-post-body-paragraph lh li it lj b lk ll ju lm ln lo jx lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">接下来，获取这两个城市的所有可能的比较组合:</p><figure class="la lb lc ld gt le"><div class="bz fp l di"><div class="na lg l"/></div></figure><pre class="la lb lc ld gt mq mr ms mt aw mu bi"><span id="0d90" class="mv kj it mr b gy mw mx l my mz">[('Manhattan', 'Brooklyn'),<br/> ('Manhattan', 'Bronx'),<br/> ('Manhattan', 'Queens'),<br/> ('Brooklyn', 'Bronx'),<br/> ('Brooklyn', 'Queens'),<br/> ('Bronx', 'Queens')]</span></pre><p id="caf5" class="pw-post-body-paragraph lh li it lj b lk ll ju lm ln lo jx lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">现在我们已经准备好向图中添加统计注释了！特别地，我们将使用<a class="ae mp" href="https://www.statisticshowto.com/mann-whitney-u-test/" rel="noopener ugc nofollow" target="_blank">曼-惠特尼U检验</a>来比较两个独立的组。</p><p id="e76a" class="pw-post-body-paragraph lh li it lj b lk ll ju lm ln lo jx lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">无效假设是两个城市的总票价相等。另一个假设是两个城市的总票价不相等。</p><figure class="la lb lc ld gt le"><div class="bz fp l di"><div class="na lg l"/></div></figure><pre class="la lb lc ld gt mq mr ms mt aw mu bi"><span id="1de1" class="mv kj it mr b gy mw mx l my mz">Manhattan vs. Brooklyn: Mann-Whitney-Wilcoxon test two-sided, P_val:7.225e-01 U_stat=9.979e+05<br/>Brooklyn vs. Bronx: Mann-Whitney-Wilcoxon test two-sided, P_val:1.992e-02 U_stat=1.608e+04<br/>Bronx vs. Queens: Mann-Whitney-Wilcoxon test two-sided, P_val:1.676e-02 U_stat=2.768e+04<br/>Manhattan vs. Bronx: Mann-Whitney-Wilcoxon test two-sided, P_val:5.785e-04 U_stat=2.082e+05<br/>Brooklyn vs. Queens: Mann-Whitney-Wilcoxon test two-sided, P_val:3.666e-12 U_stat=9.335e+04<br/>Manhattan vs. Queens: Mann-Whitney-Wilcoxon test two-sided, P_val:2.929e-30 U_stat=1.258e+06</span></pre><figure class="la lb lc ld gt le gh gi paragraph-image"><div class="gh gi md"><img src="../Images/113e34892a2e414ecb8afffaf1c4e408.png" data-original-src="https://miro.medium.com/v2/resize:fit:1228/format:webp/1*h0W79zjASrsHruRw6Apf2A.png"/></div><p class="mg mh gj gh gi mi mj bd b be z dk translated">作者图片</p></figure><p id="640e" class="pw-post-body-paragraph lh li it lj b lk ll ju lm ln lo jx lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">图中星星数量的含义:</p><pre class="la lb lc ld gt mq mr ms mt aw mu bi"><span id="ed2e" class="mv kj it mr b gy mw mx l my mz">      ns: p &lt;= 1.00e+00<br/>       *: 1.00e-02 &lt; p &lt;= 5.00e-02<br/>      **: 1.00e-03 &lt; p &lt;= 1.00e-02<br/>     ***: 1.00e-04 &lt; p &lt;= 1.00e-03<br/>    ****: p &lt;= 1.00e-04</span></pre><p id="38fd" class="pw-post-body-paragraph lh li it lj b lk ll ju lm ln lo jx lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated"><code class="fe nd ne nf mr b">ns</code>代表无统计学意义。一般来说，p值越小，支持替代假设的证据就越强。</p><p id="00e8" class="pw-post-body-paragraph lh li it lj b lk ll ju lm ln lo jx lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">在上图中，我们可以看到，除了曼哈顿和布鲁克林，大多数城市对之间的总支付中值存在显著差异。</p><h1 id="80a6" class="ki kj it bd kk kl km kn ko kp kq kr ks jz kt ka ku kc kv kd kw kf kx kg ky kz bi translated">将p值添加到图中</h1><p id="4e12" class="pw-post-body-paragraph lh li it lj b lk mk ju lm ln ml jx lp lq mm ls lt lu mn lw lx ly mo ma mb mc im bi translated">如果您不喜欢星形符号，而是希望将p值添加到您的图中，请指定<code class="fe nd ne nf mr b">text_format="simple"</code>:</p><figure class="la lb lc ld gt le"><div class="bz fp l di"><div class="na lg l"/></div></figure><figure class="la lb lc ld gt le gh gi paragraph-image"><div class="gh gi md"><img src="../Images/d5d3719072ef35e3505971a544bdb135.png" data-original-src="https://miro.medium.com/v2/resize:fit:1228/format:webp/1*1WzCrRvHjFG_EpQ0tFdoZw.png"/></div><p class="mg mh gj gh gi mi mj bd b be z dk translated">作者图片</p></figure><p id="10d4" class="pw-post-body-paragraph lh li it lj b lk ll ju lm ln lo jx lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">您将看到特定城市对之间比较的p值！</p><h1 id="1dbc" class="ki kj it bd kk kl km kn ko kp kq kr ks jz kt ka ku kc kv kd kw kf kx kg ky kz bi translated">结论</h1><p id="db7a" class="pw-post-body-paragraph lh li it lj b lk mk ju lm ln ml jx lp lq mm ls lt lu mn lw lx ly mo ma mb mc im bi translated">恭喜你！您刚刚学习了如何向seaborn图添加统计注释。我希望这篇文章能让你在更深的层次上研究两个数据之间的关系。</p><p id="5886" class="pw-post-body-paragraph lh li it lj b lk ll ju lm ln lo jx lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">随意发挥，并在这里叉这篇文章的源代码:</p><div class="ng nh gp gr ni nj"><a href="https://github.com/khuyentran1401/Data-science/blob/master/visualization/statsannotation_example.ipynb" rel="noopener  ugc nofollow" target="_blank"><div class="nk ab fo"><div class="nl ab nm cl cj nn"><h2 class="bd iu gy z fp no fr fs np fu fw is bi translated">数据科学/stats annotation _ example . ipynb at master khuyentran 1401/数据科学</h2><div class="nq l"><h3 class="bd b gy z fp no fr fs np fu fw dk translated">有用的数据科学主题以及代码和文章的集合-Data-science/stats annotation _ example . ipynb位于…</h3></div><div class="nr l"><p class="bd b dl z fp no fr fs np fu fw dk translated">github.com</p></div></div><div class="ns l"><div class="nt l nu nv nw ns nx me nj"/></div></div></a></div></div><div class="ab cl ny nz hx oa" role="separator"><span class="ob bw bk oc od oe"/><span class="ob bw bk oc od oe"/><span class="ob bw bk oc od"/></div><div class="im in io ip iq"><p id="96af" class="pw-post-body-paragraph lh li it lj b lk ll ju lm ln lo jx lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">我喜欢写一些基本的数据科学概念，并尝试不同的数据科学工具。你可以在LinkedIn和T2 Twitter上与我联系。</p><p id="5ee2" class="pw-post-body-paragraph lh li it lj b lk ll ju lm ln lo jx lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">星<a class="ae mp" href="https://github.com/khuyentran1401/Data-science" rel="noopener ugc nofollow" target="_blank">这个回购</a>如果你想检查我写的所有文章的代码。在Medium上关注我，了解我的最新数据科学文章，例如:</p><div class="ng nh gp gr ni nj"><a href="https://pub.towardsai.net/atoti-build-a-bi-platform-in-python-beea47b92c7b" rel="noopener  ugc nofollow" target="_blank"><div class="nk ab fo"><div class="nl ab nm cl cj nn"><h2 class="bd iu gy z fp no fr fs np fu fw is bi translated">atoti——用Python构建BI平台</h2><div class="nq l"><h3 class="bd b gy z fp no fr fs np fu fw dk translated">通过交互式用户界面从您的数据中获得洞察力</h3></div><div class="nr l"><p class="bd b dl z fp no fr fs np fu fw dk translated">pub.towardsai.net</p></div></div><div class="ns l"><div class="of l nu nv nw ns nx me nj"/></div></div></a></div><div class="ng nh gp gr ni nj"><a rel="noopener follow" target="_blank" href="/how-to-create-interactive-and-elegant-plot-with-altair-8dd87a890f2a"><div class="nk ab fo"><div class="nl ab nm cl cj nn"><h2 class="bd iu gy z fp no fr fs np fu fw is bi translated">如何用Altair创建交互式剧情</h2><div class="nq l"><h3 class="bd b gy z fp no fr fs np fu fw dk translated">在5行简单的Python代码中利用您的数据分析</h3></div><div class="nr l"><p class="bd b dl z fp no fr fs np fu fw dk translated">towardsdatascience.com</p></div></div><div class="ns l"><div class="og l nu nv nw ns nx me nj"/></div></div></a></div><div class="ng nh gp gr ni nj"><a rel="noopener follow" target="_blank" href="/introduction-to-yellowbrick-a-python-library-to-explain-the-prediction-of-your-machine-learning-d63ecee10ecc"><div class="nk ab fo"><div class="nl ab nm cl cj nn"><h2 class="bd iu gy z fp no fr fs np fu fw is bi translated">Yellowbrick简介:可视化机器学习预测的Python库…</h2><div class="nq l"><h3 class="bd b gy z fp no fr fs np fu fw dk translated">您将f1分数提高到了98%！但这是否意味着你的模型表现更好呢？</h3></div><div class="nr l"><p class="bd b dl z fp no fr fs np fu fw dk translated">towardsdatascience.com</p></div></div><div class="ns l"><div class="oh l nu nv nw ns nx me nj"/></div></div></a></div><div class="ng nh gp gr ni nj"><a rel="noopener follow" target="_blank" href="/how-to-sketch-your-data-science-ideas-with-excalidraw-a993d049f55c"><div class="nk ab fo"><div class="nl ab nm cl cj nn"><h2 class="bd iu gy z fp no fr fs np fu fw is bi translated">如何用Excalidraw勾画您的数据科学想法</h2><div class="nr l"><p class="bd b dl z fp no fr fs np fu fw dk translated">towardsdatascience.com</p></div></div><div class="ns l"><div class="oi l nu nv nw ns nx me nj"/></div></div></a></div></div></div>    
</body>
</html>