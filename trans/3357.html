<html>
<head>
<title>Configure a Poetry environment that runs in PyCharm</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">配置一个在PyCharm中运行的诗歌环境</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/configure-a-poetry-environment-that-runs-in-pycharm-eba47420f0b6#2022-07-26">https://towardsdatascience.com/configure-a-poetry-environment-that-runs-in-pycharm-eba47420f0b6#2022-07-26</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><figure class="ip iq gp gr ir is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi io"><img src="../Images/e36c39aa98ad3f675b2d44dbbc93732e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*3M_gtRDj_-QHmICp"/></div></div><p class="iz ja gj gh gi jb jc bd b be z dk translated">由<a class="ae jd" href="https://unsplash.com/@iamtru?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Tru“Tru”kat sande</a>在<a class="ae jd" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure><h2 id="5118" class="je jf jg bd b dl jh ji jj jk jl jm dk jn translated" aria-label="kicker paragraph">诗歌结构</h2><div class=""/><div class=""><h2 id="21ce" class="pw-subtitle-paragraph km jp jg bd b kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld dk translated">Python中依赖性管理和打包的快速简单指南</h2></div><p id="d9a7" class="pw-post-body-paragraph le lf jg lg b lh li kq lj lk ll kt lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated"><a class="ae jd" href="https://github.com/python-poetry/poetry" rel="noopener ugc nofollow" target="_blank">poems</a>是一个很棒的开源工具，可以减轻设置环境和配置依赖项的痛苦。</p><p id="e7c3" class="pw-post-body-paragraph le lf jg lg b lh li kq lj lk ll kt lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">在这篇博客中，我将向你略略展示诗歌的能力和其中蕴含的力量。我还将指导您完成在PyCharm中配置诗歌环境的技术过程。</p><p id="8a5c" class="pw-post-body-paragraph le lf jg lg b lh li kq lj lk ll kt lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">与一些现有的依赖管理和打包工具相比，poem有几个优点(更多细节请参考<a class="ae jd" href="https://github.com/python-poetry/poetry#introduction" rel="noopener ugc nofollow" target="_blank">poem的介绍</a>和<a class="ae jd" rel="noopener" target="_blank" href="/a-poetic-apology-71a41db4ecce">一个诗意的道歉</a>)。也许诗歌越来越受欢迎的关键原因可以在下面的引言中找到:</p><blockquote class="ma mb mc"><p id="ab25" class="le lf md lg b lh li kq lj lk ll kt lm me lo lp lq mf ls lt lu mg lw lx ly lz ij bi translated"><code class="fe mh mi mj mk b">poetry</code>是一个处理依赖项安装以及构建和打包Python包的工具。它只需要一个文件来完成所有这些:新的，<a class="ae jd" href="https://www.python.org/dev/peps/pep-0518/" rel="noopener ugc nofollow" target="_blank">标准化的</a> <code class="fe mh mi mj mk b">pyproject.toml</code>。</p><p id="a67f" class="le lf md lg b lh li kq lj lk ll kt lm me lo lp lq mf ls lt lu mg lw lx ly lz ij bi translated">换句话说，诗歌用<code class="fe mh mi mj mk b">pyproject.toml</code>来代替<code class="fe mh mi mj mk b">setup.py</code>、<code class="fe mh mi mj mk b">requirements.txt</code>、<code class="fe mh mi mj mk b">setup.cfg</code>、<code class="fe mh mi mj mk b">MANIFEST.in</code>、<code class="fe mh mi mj mk b">Pipfile</code>。</p></blockquote><p id="6ee7" class="pw-post-body-paragraph le lf jg lg b lh li kq lj lk ll kt lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">使用诗歌管理Python打包和依赖项有许多不同的配置选项。我将在这篇博客中展示的是我认为最方便的配置，它满足了我的所有需求。</p></div><div class="ab cl ml mm hu mn" role="separator"><span class="mo bw bk mp mq mr"/><span class="mo bw bk mp mq mr"/><span class="mo bw bk mp mq"/></div><div class="ij ik il im in"><h1 id="b7be" class="ms mt jg bd mu mv mw mx my mz na nb nc kv nd kw ne ky nf kz ng lb nh lc ni nj bi translated">装置诗歌</h1><p id="16c7" class="pw-post-body-paragraph le lf jg lg b lh nk kq lj lk nl kt lm ln nm lp lq lr nn lt lu lv no lx ly lz ij bi translated">按照poems的<a class="ae jd" href="https://python-poetry.org/docs/master/#installing-with-the-official-installer" rel="noopener ugc nofollow" target="_blank">文档</a>按照你的系统环境安装poems。</p></div><div class="ab cl ml mm hu mn" role="separator"><span class="mo bw bk mp mq mr"/><span class="mo bw bk mp mq mr"/><span class="mo bw bk mp mq"/></div><div class="ij ik il im in"><h1 id="c863" class="ms mt jg bd mu mv mw mx my mz na nb nc kv nd kw ne ky nf kz ng lb nh lc ni nj bi translated">为PyCharm安装诗歌插件</h1><p id="8a7f" class="pw-post-body-paragraph le lf jg lg b lh nk kq lj lk nl kt lm ln nm lp lq lr nn lt lu lv no lx ly lz ij bi translated">对于PyCharm版本&gt; =2021.3，无需手动安装插件即可集成诗歌。</p><p id="3ef8" class="pw-post-body-paragraph le lf jg lg b lh li kq lj lk ll kt lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">对于版本低于2021.3的PyCharm，我们将安装PyCharm所需的插件。你可以在下面找到不同JetBrains IDEs的诗歌版本列表。</p><div class="ip iq gp gr ir np"><a href="https://plugins.jetbrains.com/plugin/14307-poetry/versions" rel="noopener  ugc nofollow" target="_blank"><div class="nq ab fo"><div class="nr ab ns cl cj nt"><h2 class="bd jq gy z fp nu fr fs nv fu fw jp bi translated">诗歌智能插件|市场</h2><div class="nw l"><h3 class="bd b gy z fp nu fr fs nv fu fw dk translated">这个插件支持诗歌，诗歌是Python帮助的一个包管理器，更多细节见文档。</h3></div><div class="nx l"><p class="bd b dl z fp nu fr fs nv fu fw dk translated">plugins.jetbrains.com</p></div></div><div class="ny l"><div class="nz l oa ob oc ny od ix np"/></div></div></a></div><p id="57d5" class="pw-post-body-paragraph le lf jg lg b lh li kq lj lk ll kt lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">单击上面的链接后，IDE中将出现一个弹出窗口，显示如何安装插件的说明。</p></div><div class="ab cl ml mm hu mn" role="separator"><span class="mo bw bk mp mq mr"/><span class="mo bw bk mp mq mr"/><span class="mo bw bk mp mq"/></div><div class="ij ik il im in"><h1 id="7913" class="ms mt jg bd mu mv mw mx my mz na nb nc kv nd kw ne ky nf kz ng lb nh lc ni nj bi translated">创建新的诗歌项目</h1><p id="e9f4" class="pw-post-body-paragraph le lf jg lg b lh nk kq lj lk nl kt lm ln nm lp lq lr nn lt lu lv no lx ly lz ij bi translated">我们现在准备创建我们的新的诗歌环境！在本例中，我将创建一个名为<em class="md"> reviews </em>的包，用于训练和服务我们的文本分类模型，该模型从租户评论中提取与住宅区生活质量相关的信息(<a class="ae jd" href="https://aclanthology.org/2021.findings-emnlp.217/" rel="noopener ugc nofollow" target="_blank"> Haber和Waks，2021 </a>)。</p><pre class="oe of og oh gt oi mk oj bn ok ol bi"><span id="b87c" class="om mt jg mk b be on oo l op oq">poetry new reviews</span></pre><p id="9e48" class="pw-post-body-paragraph le lf jg lg b lh li kq lj lk ll kt lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">这一步的输出是<code class="fe mh mi mj mk b">pyproject.toml</code>文件:</p><pre class="oe of og oh gt oi mk or os aw ot bi"><span id="8336" class="ou mt jg mk b gy ov ow l op oq">[tool.poetry]<br/>name = "reviews"<br/>version = "0.1.0"<br/>description = ""<br/>authors = ["hai.rozencwajg &lt;EMAIL&gt;"]<br/><br/>[tool.poetry.dependencies]<br/>python = "^3.7"<br/><br/>[tool.poetry.dev-dependencies]<br/>pytest = "^5.2"<br/><br/>[build-system]<br/>requires = ["poetry-core&gt;=1.0.0"]<br/>build-backend = "poetry.core.masonry.api"</span></pre><p id="b837" class="pw-post-body-paragraph le lf jg lg b lh li kq lj lk ll kt lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">我安装的Python版本是<code class="fe mh mi mj mk b"><em class="md">3.7.9</em></code>,<code class="fe mh mi mj mk b">[tool.poetry.dependencies]</code>下的Python版本是<code class="fe mh mi mj mk b">^3.7</code>，即等于或大于<code class="fe mh mi mj mk b">3.7</code>小于<code class="fe mh mi mj mk b">4</code>的Python版本。</p><p id="c30b" class="pw-post-body-paragraph le lf jg lg b lh li kq lj lk ll kt lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">要阅读更多关于诗歌的符号，如脱字符号(<code class="fe mh mi mj mk b">^</code>)和其他版本约束，请参阅<a class="ae jd" href="https://python-poetry.org/docs/dependency-specification/" rel="noopener ugc nofollow" target="_blank">诗歌的依赖规范</a>指南。</p></div><div class="ab cl ml mm hu mn" role="separator"><span class="mo bw bk mp mq mr"/><span class="mo bw bk mp mq mr"/><span class="mo bw bk mp mq"/></div><div class="ij ik il im in"><h1 id="cd59" class="ms mt jg bd mu mv mw mx my mz na nb nc kv nd kw ne ky nf kz ng lb nh lc ni nj bi translated">创建一个诗歌虚拟环境</h1><p id="2886" class="pw-post-body-paragraph le lf jg lg b lh nk kq lj lk nl kt lm ln nm lp lq lr nn lt lu lv no lx ly lz ij bi translated">接下来，我们将通过运行以下命令为这个项目创建一个诗歌环境:</p><pre class="oe of og oh gt oi mk oj bn ok ol bi"><span id="c241" class="om mt jg mk b be on oo l op oq">poetry install</span></pre><p id="3ec1" class="pw-post-body-paragraph le lf jg lg b lh li kq lj lk ll kt lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">这将创建一个本地虚拟环境，用于根据<code class="fe mh mi mj mk b">pyproject.toml</code>文件中列出的配置运行项目。</p><p id="56ad" class="pw-post-body-paragraph le lf jg lg b lh li kq lj lk ll kt lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">本地环境是在诗歌本地环境<code class="fe mh mi mj mk b">~/Library/Caches/pypoetry/virtualenvs</code>的默认路径中创建的。</p></div><div class="ab cl ml mm hu mn" role="separator"><span class="mo bw bk mp mq mr"/><span class="mo bw bk mp mq mr"/><span class="mo bw bk mp mq"/></div><div class="ij ik il im in"><h1 id="651f" class="ms mt jg bd mu mv mw mx my mz na nb nc kv nd kw ne ky nf kz ng lb nh lc ni nj bi translated">添加虚拟环境作为解释器</h1><figure class="oe of og oh gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi ox"><img src="../Images/795b8f69e6bf3745789d9eac924c9197.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*YzlQWSmX1C9EDBF7_d1yXw.png"/></div></div><p class="iz ja gj gh gi jb jc bd b be z dk translated">在PyCharm中添加Python解释器。PyCharm截图。</p></figure><p id="b701" class="pw-post-body-paragraph le lf jg lg b lh li kq lj lk ll kt lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">在PyCharm中点击<em class="md">添加解释器</em>按钮后，自动找到已有的解释器，自动为该项目激活诗歌虚拟环境。</p></div><div class="ab cl ml mm hu mn" role="separator"><span class="mo bw bk mp mq mr"/><span class="mo bw bk mp mq mr"/><span class="mo bw bk mp mq"/></div><div class="ij ik il im in"><h1 id="0b79" class="ms mt jg bd mu mv mw mx my mz na nb nc kv nd kw ne ky nf kz ng lb nh lc ni nj bi translated">安装Python包</h1><p id="06aa" class="pw-post-body-paragraph le lf jg lg b lh nk kq lj lk nl kt lm ln nm lp lq lr nn lt lu lv no lx ly lz ij bi translated">类似于著名的<code class="fe mh mi mj mk b">pip install</code>命令，诗歌也支持使用诗歌<em class="md">添加</em>命令轻松安装Python包。</p><pre class="oe of og oh gt oi mk oj bn ok ol bi"><span id="03ca" class="om mt jg mk b be on oo l op oq">poetry add google-cloud-storage</span></pre><p id="2a82" class="pw-post-body-paragraph le lf jg lg b lh li kq lj lk ll kt lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">运行上面的代码后，一个新的行被添加到记录<code class="fe mh mi mj mk b">google-cloud-storage</code>包版本的<code class="fe mh mi mj mk b">pyproject.toml</code>文件中。</p><pre class="oe of og oh gt oi mk or os aw ot bi"><span id="644d" class="ou mt jg mk b gy ov ow l op oq">[tool.poetry]<br/>name = "reviews"<br/>version = "0.1.0"<br/>description = ""<br/>authors = ["hai.rozencwajg &lt;EMAIL&gt;"]</span><span id="3acc" class="ou mt jg mk b gy oy ow l op oq">[tool.poetry.dependencies]<br/>python = "^3.7"<br/><strong class="mk jq">google-cloud-storage = "^2.4.0"<br/></strong><br/>[tool.poetry.dev-dependencies]<br/>pytest = "^5.2"<br/><br/>[build-system]<br/>requires = ["poetry-core&gt;=1.0.0"]<br/>build-backend = "poetry.core.masonry.api"</span></pre><p id="cc47" class="pw-post-body-paragraph le lf jg lg b lh li kq lj lk ll kt lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">此外，还创建了一个<code class="fe mh mi mj mk b">poetry.lock</code>文件。该文件跟踪软件包的已安装版本及其依赖项，如下面的日志中所列:</p><pre class="oe of og oh gt oi mk or os aw ot bi"><span id="e5c9" class="ou mt jg mk b gy ov ow l op oq">Using version ^2.4.0 for google-cloud-storage</span><span id="74cf" class="ou mt jg mk b gy oy ow l op oq">Updating dependencies<br/>Resolving dependencies... (9.7s)</span><span id="6935" class="ou mt jg mk b gy oy ow l op oq">Writing lock file</span><span id="a8a2" class="ou mt jg mk b gy oy ow l op oq">Package operations: 18 installs, 0 updates, 0 removals</span><span id="1795" class="ou mt jg mk b gy oy ow l op oq">  • Installing pyasn1 (0.4.8)<br/>  • Installing cachetools (5.2.0)<br/>  • Installing certifi (2022.6.15)<br/>  • Installing charset-normalizer (2.1.0)<br/>  • Installing idna (3.3)<br/>  • Installing protobuf (4.21.2)<br/>  • Installing pyasn1-modules (0.2.8)<br/>  • Installing rsa (4.8)<br/>  • Installing six (1.16.0)<br/>  • Installing urllib3 (1.26.10)<br/>  • Installing google-auth (2.9.0)<br/>  • Installing googleapis-common-protos (1.56.3)<br/>  • Installing requests (2.28.1)<br/>  • Installing google-api-core (2.8.2)<br/>  • Installing google-crc32c (1.3.0)<br/>  • Installing google-cloud-core (2.3.1)<br/>  • Installing google-resumable-media (2.3.3)<br/>  • Installing google-cloud-storage (2.4.0)</span></pre></div><div class="ab cl ml mm hu mn" role="separator"><span class="mo bw bk mp mq mr"/><span class="mo bw bk mp mq mr"/><span class="mo bw bk mp mq"/></div><div class="ij ik il im in"><h1 id="52db" class="ms mt jg bd mu mv mw mx my mz na nb nc kv nd kw ne ky nf kz ng lb nh lc ni nj bi translated">利用诗歌的力量解决兼容性问题</h1><p id="3360" class="pw-post-body-paragraph le lf jg lg b lh nk kq lj lk nl kt lm ln nm lp lq lr nn lt lu lv no lx ly lz ij bi translated">接下来，我想将<code class="fe mh mi mj mk b">google-cloud-bigquery</code>包添加到诗歌中，所以我运行了诗歌<em class="md">添加</em>命令:</p><pre class="oe of og oh gt oi mk oj bn ok ol bi"><span id="a319" class="om mt jg mk b be on oo l op oq">poetry add google-cloud-bigquery</span></pre><p id="e278" class="pw-post-body-paragraph le lf jg lg b lh li kq lj lk ll kt lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">但是这一次，我犯了一个错误，这个错误展示了诗歌的力量:</p><pre class="oe of og oh gt oi mk or os aw ot bi"><span id="dbfa" class="ou mt jg mk b gy ov ow l op oq">Using version ^3.2.0 for google-cloud-bigquery</span><span id="6784" class="ou mt jg mk b gy oy ow l op oq">Updating dependencies<br/>Resolving dependencies... (0.2s)</span><span id="c369" class="ou mt jg mk b gy oy ow l op oq">SolverProblemError</span><span id="2a77" class="ou mt jg mk b gy oy ow l op oq">The current project's Python requirement (&gt;=3.7,&lt;4.0) is not compatible with some of the required packages Python requirement:<br/>    - google-cloud-bigquery requires Python &gt;=3.6, &lt;3.11, so it will not be satisfied for Python &gt;=3.11,&lt;4.0<br/>  <br/>  Because google-cloud-bigquery (3.2.0) requires Python &gt;=3.6, &lt;3.11<br/>   and no versions of google-cloud-bigquery match &gt;3.2.0,&lt;4.0.0, google-cloud-bigquery is forbidden.<br/>  So, because reviews depends on google-cloud-bigquery (^3.2.0), version solving failed.</span><span id="0c4a" class="ou mt jg mk b gy oy ow l op oq">at ~/.poetry/lib/poetry/puzzle/solver.py:241 in _solve<br/>      237│             packages = result.packages<br/>      238│         except OverrideNeeded as e:<br/>      239│             return self.solve_in_compatibility_mode(e.overrides, use_latest=use_latest)<br/>      240│         except SolveFailure as e:<br/>    → 241│             raise SolverProblemError(e)<br/>      242│ <br/>      243│         results = dict(<br/>      244│             depth_first_search(<br/>      245│                 PackageNode(self._package, packages), aggregate_package_nodes</span><span id="e476" class="ou mt jg mk b gy oy ow l op oq">• Check your dependencies Python requirement: The Python requirement can be specified via the `python` or `markers` properties<br/>    <br/>    For google-cloud-bigquery, a possible solution would be to set the `python` property to "&gt;=3.7,&lt;3.11"</span><span id="3793" class="ou mt jg mk b gy oy ow l op oq"><a class="ae jd" href="https://python-poetry.org/docs/dependency-specification/#python-restricted-dependencies" rel="noopener ugc nofollow" target="_blank">https://python-poetry.org/docs/dependency-specification/#python-restricted-dependencies</a>,<br/>    <a class="ae jd" href="https://python-poetry.org/docs/dependency-specification/#using-environment-markers" rel="noopener ugc nofollow" target="_blank">https://python-poetry.org/docs/dependency-specification/#using-environment-markers</a></span></pre><p id="bcb6" class="pw-post-body-paragraph le lf jg lg b lh li kq lj lk ll kt lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">原来在最新版本的<code class="fe mh mi mj mk b">google-cloud-bigquery==3.2.0</code>和在<code class="fe mh mi mj mk b">pyproject.toml</code>文件中列出的可能的Python版本之间有一个兼容性问题。</p><p id="910d" class="pw-post-body-paragraph le lf jg lg b lh li kq lj lk ll kt lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">幸运的是，诗歌也为我们提供了一个可能的解决方案:</p><blockquote class="ma mb mc"><p id="afed" class="le lf md lg b lh li kq lj lk ll kt lm me lo lp lq mf ls lt lu mg lw lx ly lz ij bi translated">对于google-cloud-bigquery，一个可能的解决方案是将“python”属性设置为“&gt; =3.7，&lt;3.11"</p></blockquote><p id="21d1" class="pw-post-body-paragraph le lf jg lg b lh li kq lj lk ll kt lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">As we can see above, Poetry instructs us to be stricter about the Python version by limiting to  【T3】  instead of the current setup  【T4】 , so I changed the Python version in  【T5】  file as suggested.</p><pre class="oe of og oh gt oi mk or os aw ot bi"><span id="8016" class="ou mt jg mk b gy ov ow l op oq">[tool.poetry]<br/>name = "reviews"<br/>version = "0.1.0"<br/>description = ""<br/>authors = ["hai.rozencwajg &lt;EMAIL&gt;"]<br/><br/>[tool.poetry.dependencies]<br/><strong class="mk jq">python = "&gt;=3.7,&lt;3.11"<br/></strong>google-cloud-storage = "^2.4.0"<br/><br/>[tool.poetry.dev-dependencies]<br/>pytest = "^5.2"<br/><br/>[build-system]<br/>requires = ["poetry-core&gt;=1.0.0"]<br/>build-backend = "poetry.core.masonry.api"</span></pre><p id="c300" class="pw-post-body-paragraph le lf jg lg b lh li kq lj lk ll kt lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">Now, after re-running the Poetry <em class="md"> add </em>命令用于<code class="fe mh mi mj mk b">google-cloud-bigquery</code>包，安装成功结束。</p><pre class="oe of og oh gt oi mk or os aw ot bi"><span id="bd66" class="ou mt jg mk b gy ov ow l op oq">Using version ^3.2.0 for google-cloud-bigquery</span><span id="e8bf" class="ou mt jg mk b gy oy ow l op oq">Updating dependencies<br/>Resolving dependencies... (91.8s)</span><span id="abf8" class="ou mt jg mk b gy oy ow l op oq">Writing lock file</span><span id="9d85" class="ou mt jg mk b gy oy ow l op oq">Package operations: 8 installs, 1 update, 0 removals</span><span id="b1c9" class="ou mt jg mk b gy oy ow l op oq">  • Updating protobuf (4.21.2 -&gt; 3.20.1)<br/>  • Installing grpcio (1.47.0)<br/>  • Installing grpcio-status (1.47.0)<br/>  • Installing numpy (1.21.6)<br/>  • Installing proto-plus (1.20.6)<br/>  • Installing google-cloud-bigquery-storage (2.14.0)<br/>  • Installing pyarrow (8.0.0)<br/>  • Installing python-dateutil (2.8.2)<br/>  • Installing google-cloud-bigquery (3.2.0)</span></pre><p id="ae86" class="pw-post-body-paragraph le lf jg lg b lh li kq lj lk ll kt lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">我们还可以看到<code class="fe mh mi mj mk b">protobuf</code>版本被降级(自动)以支持我们所有的版本兼容性约束。</p><p id="0219" class="pw-post-body-paragraph le lf jg lg b lh li kq lj lk ll kt lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">新的<code class="fe mh mi mj mk b">pyproject.toml</code>文件现在看起来像这样:</p><pre class="oe of og oh gt oi mk or os aw ot bi"><span id="334c" class="ou mt jg mk b gy ov ow l op oq">[tool.poetry]<br/>name = "reviews"<br/>version = "0.1.0"<br/>description = ""<br/>authors = ["hai.rozencwajg &lt;EMAIL&gt;"]<br/><br/>[tool.poetry.dependencies]<br/>python = "&gt;=3.7,&lt;3.11"<br/>google-cloud-storage = "^2.4.0"<br/><strong class="mk jq">google-cloud-bigquery = "^3.2.0"<br/></strong><br/>[tool.poetry.dev-dependencies]<br/>pytest = "^5.2"<br/><br/>[build-system]<br/>requires = ["poetry-core&gt;=1.0.0"]<br/>build-backend = "poetry.core.masonry.api"</span></pre></div><div class="ab cl ml mm hu mn" role="separator"><span class="mo bw bk mp mq mr"/><span class="mo bw bk mp mq mr"/><span class="mo bw bk mp mq"/></div><div class="ij ik il im in"><h1 id="13d8" class="ms mt jg bd mu mv mw mx my mz na nb nc kv nd kw ne ky nf kz ng lb nh lc ni nj bi translated">其他好吃的</h1><h2 id="445a" class="ou mt jg bd mu oz pa dn my pb pc dp nc ln pd pe ne lr pf pg ng lv ph pi ni jm bi translated">特定软件包版本的安装</h2><p id="c245" class="pw-post-body-paragraph le lf jg lg b lh nk kq lj lk nl kt lm ln nm lp lq lr nn lt lu lv no lx ly lz ij bi translated">与<code class="fe mh mi mj mk b">pip</code>类似，poems支持特定包版本的安装:</p><pre class="oe of og oh gt oi mk oj bn ok ol bi"><span id="b7ba" class="om mt jg mk b be on oo l op oq">poetry add pandas~=1.3</span></pre><h2 id="cacb" class="ou mt jg bd mu oz pa dn my pb pc dp nc ln pd pe ne lr pf pg ng lv ph pi ni jm bi translated">仅为开发环境安装包</h2><p id="1591" class="pw-post-body-paragraph le lf jg lg b lh nk kq lj lk nl kt lm ln nm lp lq lr nn lt lu lv no lx ly lz ij bi translated">告别多个<code class="fe mh mi mj mk b">requirements.txt</code>文件很好玩。poem支持在一个文件下管理生产和开发环境。下面我安装了<code class="fe mh mi mj mk b">pandas-profiling</code>,仅用于开发环境中的数据探索。</p><pre class="oe of og oh gt oi mk oj bn ok ol bi"><span id="ee63" class="om mt jg mk b be on oo l op oq">poetry add pandas-profiling --dev</span></pre><p id="9424" class="pw-post-body-paragraph le lf jg lg b lh li kq lj lk ll kt lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated"><code class="fe mh mi mj mk b">pandas-profiling</code>包将列在<code class="fe mh mi mj mk b">[tool.poetry.dev-dependencies]</code>部分下，而不是<code class="fe mh mi mj mk b">[tool.poetry.dependencies]</code>下。</p><h2 id="5677" class="ou mt jg bd mu oz pa dn my pb pc dp nc ln pd pe ne lr pf pg ng lv ph pi ni jm bi translated">卸载软件包</h2><p id="1866" class="pw-post-body-paragraph le lf jg lg b lh nk kq lj lk nl kt lm ln nm lp lq lr nn lt lu lv no lx ly lz ij bi translated">卸载就像添加软件包一样简单:</p><pre class="oe of og oh gt oi mk oj bn ok ol bi"><span id="e97a" class="om mt jg mk b be on oo l op oq">poetry remove google-cloud-bigquery</span></pre><h2 id="ec1c" class="ou mt jg bd mu oz pa dn my pb pc dp nc ln pd pe ne lr pf pg ng lv ph pi ni jm bi translated">打开一个新的外壳，用一个诗歌环境激活它</h2><pre class="oe of og oh gt oi mk oj bn ok ol bi"><span id="2930" class="om mt jg mk b be on oo l op oq">poetry shell</span></pre></div><div class="ab cl ml mm hu mn" role="separator"><span class="mo bw bk mp mq mr"/><span class="mo bw bk mp mq mr"/><span class="mo bw bk mp mq"/></div><div class="ij ik il im in"><h1 id="f4d1" class="ms mt jg bd mu mv mw mx my mz na nb nc kv nd kw ne ky nf kz ng lb nh lc ni nj bi translated">结论</h1><p id="0404" class="pw-post-body-paragraph le lf jg lg b lh nk kq lj lk nl kt lm ln nm lp lq lr nn lt lu lv no lx ly lz ij bi translated">诗歌是一个伟大的工具，它有许多功能，使你作为一个开发人员能够以一种清晰、简单和透明的方式管理你的依赖关系。使用诗歌有助于环境设置，并有助于解决兼容性问题。</p><p id="583d" class="pw-post-body-paragraph le lf jg lg b lh li kq lj lk ll kt lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">我肯定会在我未来的项目中继续使用诗歌，我希望你也这么想。</p></div><div class="ab cl ml mm hu mn" role="separator"><span class="mo bw bk mp mq mr"/><span class="mo bw bk mp mq mr"/><span class="mo bw bk mp mq"/></div><div class="ij ik il im in"><p id="d04b" class="pw-post-body-paragraph le lf jg lg b lh li kq lj lk ll kt lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated"><a class="pj pk ep" href="https://medium.com/u/5921283ee0f1?source=post_page-----eba47420f0b6--------------------------------" rel="noopener" target="_blank"> <em class="md">海</em></a>【】是一名首席数据科学家在 <a class="ae jd" href="https://www.skyline.ai/" rel="noopener ugc nofollow" target="_blank"> <em class="md">天际线</em> </a> <em class="md">，一家</em><a class="ae jd" href="https://www.jll.co.il/" rel="noopener ugc nofollow" target="_blank"><em class="md"/></a><em class="md">公司和部分</em><a class="ae jd" href="https://www.jllt.com/" rel="noopener ugc nofollow" target="_blank"><em class="md">【JLL】科技</em> </a> <em class="md">任职。我们使用大量多样的信息和尖端技术，为房地产专业人士提供产生独特商业价值的视角。</em></p></div><div class="ab cl ml mm hu mn" role="separator"><span class="mo bw bk mp mq mr"/><span class="mo bw bk mp mq mr"/><span class="mo bw bk mp mq"/></div><div class="ij ik il im in"><h1 id="91e5" class="ms mt jg bd mu mv mw mx my mz na nb nc kv nd kw ne ky nf kz ng lb nh lc ni nj bi translated">参考</h1><div class="ip iq gp gr ir np"><a href="https://python-poetry.org/" rel="noopener  ugc nofollow" target="_blank"><div class="nq ab fo"><div class="nr ab ns cl cj nt"><h2 class="bd jq gy z fp nu fr fs nv fu fw jp bi translated">诗意</h2><div class="nw l"><h3 class="bd b gy z fp nu fr fs nv fu fw dk translated">诗歌展示-树请求-工具带0.8.0高级用户的工具带...└──要求=2.0.1 ├──认证…</h3></div><div class="nx l"><p class="bd b dl z fp nu fr fs nv fu fw dk translated">python-poetry.org</p></div></div></div></a></div><div class="ip iq gp gr ir np"><a rel="noopener follow" target="_blank" href="/a-poetic-apology-71a41db4ecce"><div class="nq ab fo"><div class="nr ab ns cl cj nt"><h2 class="bd jq gy z fp nu fr fs nv fu fw jp bi translated">诗意的道歉</h2><div class="nw l"><h3 class="bd b gy z fp nu fr fs nv fu fw dk translated">或者为什么要用诗歌来管理Python的依赖性</h3></div><div class="nx l"><p class="bd b dl z fp nu fr fs nv fu fw dk translated">towardsdatascience.com</p></div></div><div class="ny l"><div class="pl l oa ob oc ny od ix np"/></div></div></a></div><div class="ip iq gp gr ir np"><a href="https://www.jetbrains.com/help/pycharm/poetry.html" rel="noopener  ugc nofollow" target="_blank"><div class="nq ab fo"><div class="nr ab ns cl cj nt"><h2 class="bd jq gy z fp nu fr fs nv fu fw jp bi translated">配置诗歌环境| PyCharm</h2><div class="nw l"><h3 class="bd b gy z fp nu fr fs nv fu fw dk translated">诗歌是一个工具，它基于项目依赖关系来创建Python虚拟环境。你可以…</h3></div><div class="nx l"><p class="bd b dl z fp nu fr fs nv fu fw dk translated">www.jetbrains.com</p></div></div><div class="ny l"><div class="pm l oa ob oc ny od ix np"/></div></div></a></div></div></div>    
</body>
</html>