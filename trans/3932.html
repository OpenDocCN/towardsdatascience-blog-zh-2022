<html>
<head>
<title>How to Generate Docstrings for Data Science Projects</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何为数据科学项目生成文档字符串</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/how-to-generate-docstrings-for-data-science-projects-bb78c56fd539#2022-08-31">https://towardsdatascience.com/how-to-generate-docstrings-for-data-science-projects-bb78c56fd539#2022-08-31</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="b228" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">在几秒钟内生成清晰且格式良好的python文档字符串</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/dc3aa5ba001e341c8682984bef8f7aa9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*fsyC-ZKetVeAmLD9"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">照片由<a class="ae ky" href="https://unsplash.com/@helenatheactress?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">凯蒂·赫尔</a>在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>拍摄</p></figure><h1 id="de20" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">介绍</h1><p id="ca04" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">"我6个月前写了这个函数，现在我不记得它是做什么的了！"这听起来熟悉吗？在赶时间的过程中，我们经常忽略了好的文档(又名docstrings)对于我们创建的类、方法和函数的重要性。</p><p id="6e19" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">那么什么是docstrings呢？</p><p id="a7bf" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">文档字符串也称为文档字符串，是描述python类、函数或方法的字符串文字。这里有一个Google docstring格式的函数的docstring的例子。</p><pre class="kj kk kl km gt ms mt mu mv aw mw bi"><span id="d9c6" class="mx la it mt b gy my mz l na nb">def add_two_values(x:int, y:int = 0) -&gt; int:<br/>    """Add two values and return the sum.</span><span id="8c09" class="mx la it mt b gy nc mz l na nb">    Args:<br/>        x (int): first value<br/>        y (int, optional): second value. Defaults to 0.</span><span id="0f54" class="mx la it mt b gy nc mz l na nb">    Raises:<br/>        TypeError: x and y must be integers</span><span id="08e1" class="mx la it mt b gy nc mz l na nb">    Returns:<br/>        int: summation of x and y<br/>    """</span><span id="3394" class="mx la it mt b gy nc mz l na nb">    if not all([isinstance(i, int) for i in [x,y]]):<br/>        raise TypeError('inputs must be integer')<br/>    else:<br/>        z = x + y</span><span id="6d8e" class="mx la it mt b gy nc mz l na nb">    return z</span></pre><p id="76b3" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">上面的docstring提供了对<code class="fe nd ne nf mt b">add_two_values</code>函数的一般描述，随后是对输入参数<code class="fe nd ne nf mt b">x</code>和<code class="fe nd ne nf mt b">y</code>、输出<code class="fe nd ne nf mt b">z</code>和引发的错误的描述。Docstrings为试图使用您开发的类、函数或方法的开发人员提供了指南。</p><p id="561f" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">在本文中，我们将研究常见的python docstring格式，以及如何使用<a class="ae ky" href="https://github.com/NilsJPWerner/autoDocstring" rel="noopener ugc nofollow" target="_blank"> autoDocstring </a>和VSCode为python函数、类和类方法生成自动化的docstring。</p><h1 id="1720" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">常见的Python文档字符串格式</h1><p id="45cd" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">下面是一些常用的python docstring格式[1]。通常，文档字符串格式包括以下元素:</p><ul class=""><li id="1379" class="ng nh it lt b lu mn lx mo ma ni me nj mi nk mm nl nm nn no bi translated">对该函数功能的描述</li><li id="4cfc" class="ng nh it lt b lu np lx nq ma nr me ns mi nt mm nl nm nn no bi translated">参数:说明和数据类型</li><li id="2482" class="ng nh it lt b lu np lx nq ma nr me ns mi nt mm nl nm nn no bi translated">返回值:说明和数据类型</li><li id="f6f5" class="ng nh it lt b lu np lx nq ma nr me ns mi nt mm nl nm nn no bi translated">出现的错误的描述</li></ul><p id="1c83" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated"><strong class="lt iu">谷歌</strong></p><pre class="kj kk kl km gt ms mt mu mv aw mw bi"><span id="6446" class="mx la it mt b gy my mz l na nb">def abc(a: int, c = [1,2]):<br/>    """_summary_</span><span id="ce23" class="mx la it mt b gy nc mz l na nb">    Args:<br/>        a (int): _description_<br/>        c (list, optional): _description_. Defaults to [1,2].</span><span id="0cf5" class="mx la it mt b gy nc mz l na nb">    Raises:<br/>        AssertionError: _description_</span><span id="abf1" class="mx la it mt b gy nc mz l na nb">    Returns:<br/>        _type_: _description_<br/>    """<br/>    if a &gt; 10:<br/>        raise AssertionError("a is more than 10")</span><span id="f5b0" class="mx la it mt b gy nc mz l na nb">    return c</span></pre><p id="8045" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated"><strong class="lt iu"> NumPy </strong></p><pre class="kj kk kl km gt ms mt mu mv aw mw bi"><span id="abe5" class="mx la it mt b gy my mz l na nb">def abc(a: int, c = [1,2]):<br/>    """_summary_</span><span id="fe37" class="mx la it mt b gy nc mz l na nb">    Parameters<br/>    ----------<br/>    a : int<br/>        _description_<br/>    c : list, optional<br/>        _description_, by default [1,2]</span><span id="a086" class="mx la it mt b gy nc mz l na nb">    Returns<br/>    -------<br/>    _type_<br/>        _description_</span><span id="feb4" class="mx la it mt b gy nc mz l na nb">    Raises<br/>    ------<br/>    AssertionError<br/>        _description_<br/>    """<br/>    if a &gt; 10:<br/>        raise AssertionError("a is more than 10")</span><span id="bef9" class="mx la it mt b gy nc mz l na nb">    return c</span></pre><p id="c454" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated"><strong class="lt iu">狮身人面像</strong></p><pre class="kj kk kl km gt ms mt mu mv aw mw bi"><span id="7bc7" class="mx la it mt b gy my mz l na nb">def abc(a: int, c = [1,2]):<br/>    """_summary_</span><span id="b441" class="mx la it mt b gy nc mz l na nb">    :param a: _description_<br/>    :type a: int<br/>    :param c: _description_, defaults to [1,2]<br/>    :type c: list, optional<br/>    :raises AssertionError: _description_<br/>    :return: _description_<br/>    :rtype: _type_<br/>    """<br/>    if a &gt; 10:<br/>        raise AssertionError("a is more than 10")</span><span id="b96c" class="mx la it mt b gy nc mz l na nb">    return c</span></pre><p id="028f" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated"><strong class="lt iu"> PEP257 </strong></p><pre class="kj kk kl km gt ms mt mu mv aw mw bi"><span id="059c" class="mx la it mt b gy my mz l na nb">def abc(a: int, c = [1,2]):<br/>    """_summary_</span><span id="94e2" class="mx la it mt b gy nc mz l na nb">    Arguments:<br/>        a -- _description_</span><span id="fca2" class="mx la it mt b gy nc mz l na nb">    Keyword Arguments:<br/>        c -- _description_ (default: {[1,2]})</span><span id="1ebf" class="mx la it mt b gy nc mz l na nb">    Raises:<br/>        AssertionError: _description_</span><span id="5d32" class="mx la it mt b gy nc mz l na nb">    Returns:<br/>        _description_<br/>    """<br/>    if a &gt; 10:<br/>        raise AssertionError("a is more than 10")</span><span id="c4b2" class="mx la it mt b gy nc mz l na nb">    return c</span></pre><h1 id="74b8" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">在VsCode中生成自动文档字符串</h1><p id="5245" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">在本节中，我们将通过示例演示如何在VSCode中生成自动化的docstring。</p><h2 id="8adf" class="mx la it bd lb nu nv dn lf nw nx dp lj ma ny nz ll me oa ob ln mi oc od lp oe bi translated">设置</h2><p id="93dd" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">要在VSCode中生成自动化的docstring，我们需要</p><ol class=""><li id="1034" class="ng nh it lt b lu mn lx mo ma ni me nj mi nk mm of nm nn no bi translated">虚拟代码</li><li id="f10b" class="ng nh it lt b lu np lx nq ma nr me ns mi nt mm of nm nn no bi translated"><a class="ae ky" href="https://marketplace.visualstudio.com/items?itemName=njpwerner.autodocstring" rel="noopener ugc nofollow" target="_blank">安装了autoDocstring </a> VSCode扩展</li><li id="e0f3" class="ng nh it lt b lu np lx nq ma nr me ns mi nt mm of nm nn no bi translated">Python 3.5及以上版本</li></ol><h2 id="8cfa" class="mx la it bd lb nu nv dn lf nw nx dp lj ma ny nz ll me oa ob ln mi oc od lp oe bi translated">VSCode设置</h2><p id="069b" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">autoDocstring允许我们从VSCode的用户设置中选择一系列常用的Docstring格式。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi og"><img src="../Images/28591c94432b6165970be9a324b829ef.png" data-original-src="https://miro.medium.com/v2/resize:fit:954/0*WnxL7FgEsk6f3Fx9"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><p id="63f7" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">对于其余的例子，我们将使用默认的Google docstring格式。</p><h2 id="1f75" class="mx la it bd lb nu nv dn lf nw nx dp lj ma ny nz ll me oa ob ln mi oc od lp oe bi translated">函数的文档字符串</h2><p id="756e" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">让我们写一个简单的函数将两个整数值相加。</p><pre class="kj kk kl km gt ms mt mu mv aw mw bi"><span id="9df3" class="mx la it mt b gy my mz l na nb">def add_two_values(x, y):</span><span id="f485" class="mx la it mt b gy nc mz l na nb">    return x + y</span></pre><p id="2217" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">要生成docstring，将光标放在函数定义正下方的行中(即在<code class="fe nd ne nf mt b">def</code>关键字下方),并执行以下任一步骤:</p><ol class=""><li id="92f2" class="ng nh it lt b lu mn lx mo ma ni me nj mi nk mm of nm nn no bi translated">用三个双引号或三个单引号开始docstring，然后按下<code class="fe nd ne nf mt b">Enter</code>键</li><li id="5c17" class="ng nh it lt b lu np lx nq ma nr me ns mi nt mm of nm nn no bi translated">windows使用键盘快捷键<code class="fe nd ne nf mt b">CTRL+SHIFT+2</code>，mac使用<code class="fe nd ne nf mt b">CMD+SHIFT+2</code></li><li id="524e" class="ng nh it lt b lu np lx nq ma nr me ns mi nt mm of nm nn no bi translated">使用VsCode命令面板中的<code class="fe nd ne nf mt b">Generate Docstring</code></li></ol><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oh"><img src="../Images/1dc5b18c553dae06a9f93b2ba81b8a8c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*feC4_lhOXrw3Cqd1"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者GIF</p></figure><p id="a1cb" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">这将以如下方式填充函数体。</p><pre class="kj kk kl km gt ms mt mu mv aw mw bi"><span id="ccde" class="mx la it mt b gy my mz l na nb">def add_two_values(x, y):<br/>    """_summary_</span><span id="6ee3" class="mx la it mt b gy nc mz l na nb">    Args:<br/>        x (_type_): _description_<br/>        y (_type_): _description_</span><span id="c716" class="mx la it mt b gy nc mz l na nb">    Returns:<br/>        _type_: _description_<br/>    """<br/>    return x + y</span></pre><p id="1e0c" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated"><code class="fe nd ne nf mt b">_summary_</code>、<code class="fe nd ne nf mt b">_type_</code>和<code class="fe nd ne nf mt b">_description_</code>是占位符，我们需要用实际的描述来替换它们。</p><p id="92bc" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">autoDocString可以通过从类型提示推断参数类型来自动填充<code class="fe nd ne nf mt b">_type_</code>占位符。让我们在函数中包含参数和返回值的类型提示。</p><pre class="kj kk kl km gt ms mt mu mv aw mw bi"><span id="4ec6" class="mx la it mt b gy my mz l na nb">def add_two_values(x:int, y:int)-&gt;int:</span><span id="8913" class="mx la it mt b gy nc mz l na nb">    return x + y</span></pre><p id="f1c6" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">生成docstring后，函数体将按以下方式填充。</p><pre class="kj kk kl km gt ms mt mu mv aw mw bi"><span id="6071" class="mx la it mt b gy my mz l na nb">def add_two_values(x:int, y:int)-&gt;int:<br/>    """_summary_</span><span id="10e6" class="mx la it mt b gy nc mz l na nb">    Args:<br/>        x (int): _description_<br/>        y (int): _description_</span><span id="1a6f" class="mx la it mt b gy nc mz l na nb">    Returns:<br/>        int: _description_<br/>    """<br/>    return x + y</span></pre><p id="2564" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">请注意，<code class="fe nd ne nf mt b">_type_</code>占位符现在填充了参数和返回值的数据类型。</p><p id="85d5" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">大多数docstring格式还包括对出现的错误的描述。如果<code class="fe nd ne nf mt b">x</code>或<code class="fe nd ne nf mt b">y</code>参数不是整数，我们就抛出一个<code class="fe nd ne nf mt b">TypeError</code>。</p><pre class="kj kk kl km gt ms mt mu mv aw mw bi"><span id="a21b" class="mx la it mt b gy my mz l na nb">def add_two_values(x:int, y:int)-&gt;int:</span><span id="bb4a" class="mx la it mt b gy nc mz l na nb">    if not all([isinstance(i, int) for i in [x,y]]):<br/>        raise TypeError('inputs must be integer')<br/>    else:<br/>        return x + y</span></pre><p id="9c79" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">新生成的docstring将包含一个描述出现的错误的子部分。这是我们在替换了<code class="fe nd ne nf mt b">_description_</code>和<code class="fe nd ne nf mt b">_summary_</code>占位符后得到的结果。</p><pre class="kj kk kl km gt ms mt mu mv aw mw bi"><span id="8551" class="mx la it mt b gy my mz l na nb">def add_two_values(x:int, y:int)-&gt;int:<br/>    """Add two values and return their sum.</span><span id="038f" class="mx la it mt b gy nc mz l na nb">    Args:<br/>        x (int): first value<br/>        y (int): second value</span><span id="34c2" class="mx la it mt b gy nc mz l na nb">    Raises:<br/>        TypeError: input values must be integers</span><span id="35ef" class="mx la it mt b gy nc mz l na nb">    Returns:<br/>        int: sum of input values<br/>    """<br/>    if not all([isinstance(i, int) for i in [x,y]]):<br/>        raise TypeError('inputs must be integer')<br/>    else:<br/>        return x + y</span></pre><h2 id="283c" class="mx la it bd lb nu nv dn lf nw nx dp lj ma ny nz ll me oa ob ln mi oc od lp oe bi translated">类和类方法的Docstring</h2><p id="859a" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">类似的方法可以扩展到类和类方法docstrings。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oi"><img src="../Images/8348ab728d92fd07717af18b0dfa68ac.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*2rr63MjNdeUD3E1L"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者GIF</p></figure><h1 id="3b25" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">结论</h1><p id="c699" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">在本文中，我们研究了以下内容:</p><ol class=""><li id="ac54" class="ng nh it lt b lu mn lx mo ma ni me nj mi nk mm of nm nn no bi translated">文档字符串的重要性</li><li id="c8c2" class="ng nh it lt b lu np lx nq ma nr me ns mi nt mm of nm nn no bi translated">常见的文档字符串格式</li><li id="34c8" class="ng nh it lt b lu np lx nq ma nr me ns mi nt mm of nm nn no bi translated">使用AutoDocString在VsCode中自动生成文档字符串</li></ol><p id="8ef0" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">文档字符串是任何代码的重要组成部分，因为它有助于开发人员理解函数、类和模块的整体功能。想象一下，如果scikit-learn、pandas和NumPy等数据科学库没有docstrings，会有多混乱！快乐记录！</p></div><div class="ab cl oj ok hx ol" role="separator"><span class="om bw bk on oo op"/><span class="om bw bk on oo op"/><span class="om bw bk on oo"/></div><div class="im in io ip iq"><p id="9ddd" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">加入Medium阅读更多这样的文章！</p><div class="oq or gp gr os ot"><a href="https://medium.com/@edwin.tan/membership" rel="noopener follow" target="_blank"><div class="ou ab fo"><div class="ov ab ow cl cj ox"><h2 class="bd iu gy z fp oy fr fs oz fu fw is bi translated">加入我的介绍链接-埃德温谭媒体</h2><div class="pa l"><h3 class="bd b gy z fp oy fr fs oz fu fw dk translated">阅读埃德温·谭(以及媒体上成千上万的其他作家)的每一个故事。你的会员费直接支持埃德温…</h3></div><div class="pb l"><p class="bd b dl z fp oy fr fs oz fu fw dk translated">medium.com</p></div></div><div class="pc l"><div class="pd l pe pf pg pc ph ks ot"/></div></div></a></div><h1 id="270a" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">参考</h1><p id="f744" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">[1]<a class="ae ky" href="https://github.com/NilsJPWerner/autoDocstring/tree/master/docs" rel="noopener ugc nofollow" target="_blank">https://github . com/NilsJPWerner/autoDocstring/tree/master/docs</a></p></div></div>    
</body>
</html>