<html>
<head>
<title>Data Documentation Best Practices</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">数据记录最佳实践</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/data-documentation-best-practices-3e1a97cfeda6#2022-08-02">https://towardsdatascience.com/data-documentation-best-practices-3e1a97cfeda6#2022-08-02</a></blockquote><div><div class="fc ij ik il im in"/><div class="io ip iq ir is"><div class=""/><div class=""><h2 id="c6ac" class="pw-subtitle-paragraph js iu iv bd b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj dk translated">节省时间，提高透明度，并提供高质量的数据</h2></div><figure class="kl km kn ko gt kp gh gi paragraph-image"><div role="button" tabindex="0" class="kq kr di ks bf kt"><div class="gh gi kk"><img src="../Images/6396f9a1635f147ba696178e09016681.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*QCzk580yVN3mk3fz88d_2w.jpeg"/></div></div><p class="kw kx gj gh gi ky kz bd b be z dk translated">在<a class="ae la" href="https://unsplash.com/s/photos/libraries?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上由<a class="ae la" href="https://unsplash.com/@luisabrimble?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Luisa Brimble </a>拍摄的照片</p></figure><p id="7e3a" class="pw-post-body-paragraph lb lc iv ld b le lf jw lg lh li jz lj lk ll lm ln lo lp lq lr ls lt lu lv lw io bi translated">作为一名<a class="ae la" rel="noopener" target="_blank" href="/analytics-engineer-the-newest-data-career-role-b312a73d57d7">分析工程师</a>，我一直在追踪我在旧数据模型中看到的各种数据集的所有者。有大量的谷歌表单四处流动，被用于复杂的数据模型，然而没有人真正知道它们是如何被使用的。我通常必须向来自每个业务领域的多个团队成员发送消息，以便最终找到了解旧数据集的人。即使这样，他们也可能不知道最初为什么要创建它，或者它是否仍在使用。这是一个永无止境的循环，试图记录公司内部使用的所有数据。</p><p id="237e" class="pw-post-body-paragraph lb lc iv ld b le lf jw lg lh li jz lj lk ll lm ln lo lp lq lr ls lt lu lv lw io bi translated">这个问题的解决方案不必很复杂。事实上，这相当简单。从开发的一开始，您就需要记录所有的数据源和数据模型。许多团队认为文档是在数据被完美地结构化和组织后做的事情。但是，您的数据会是最佳的吗？</p><p id="8fef" class="pw-post-body-paragraph lb lc iv ld b le lf jw lg lh li jz lj lk ll lm ln lo lp lq lr ls lt lu lv lw io bi translated">如果我们等到一切都“完美”了才实施最佳实践，那么我们就是在给企业造成巨大的伤害。在构建数据栈时记录数据源和模型将有助于实现最佳的数据文化。数据文档是<em class="lx">的</em>解决方案，而不是从解决方案中产生<em class="lx">的东西。</em></p><h1 id="60ef" class="ly lz iv bd ma mb mc md me mf mg mh mi kb mj kc mk ke ml kf mm kh mn ki mo mp bi translated">为什么数据文档很重要</h1><p id="afb2" class="pw-post-body-paragraph lb lc iv ld b le mq jw lg lh mr jz lj lk ms lm ln lo mt lq lr ls mu lu lv lw io bi translated">数据文档为您的业务提供了其他方式无法获得的好处。它培养了更好的数据文化，节省了您的数据团队的宝贵时间，并增加了业务的透明度。</p><h2 id="b7ec" class="mv lz iv bd ma mw mx dn me my mz dp mi lk na nb mk lo nc nd mm ls ne nf mo ng bi translated"><strong class="ak">节省时间</strong></h2><p id="401b" class="pw-post-body-paragraph lb lc iv ld b le mq jw lg lh mr jz lj lk ms lm ln lo mt lq lr ls mu lu lv lw io bi translated">预先记录你的数据集可以减少未来的技术债务。不用在构建堆栈后回顾过去并试图记住所有数据的意义，您可以随时记录。你正在做的事情背后的<em class="lx">为什么</em>仍然历历在目。每当我等到完成构建某个东西来记录它时，我就会忘记数据的复杂细节。在构建数据模型的过程中，您学到了如此多的部落知识，值得尽一切努力去记住它们。</p><h2 id="b649" class="mv lz iv bd ma mw mx dn me my mz dp mi lk na nb mk lo nc nd mm ls ne nf mo ng bi translated"><strong class="ak">增加透明度</strong></h2><p id="17c2" class="pw-post-body-paragraph lb lc iv ld b le mq jw lg lh mr jz lj lk ms lm ln lo mt lq lr ls mu lu lv lw io bi translated">当您记录所有数据集时，业务中的每个人都有一个了解他们可用数据的窗口。利益相关者很少会问哪些事情可以做，哪些事情不能做，哪些事情不能做。这还意味着，分析工程师和数据分析师不必每次去使用不同数据集时都去寻找它们的所有者。一旦数据集被记录下来，所需的信息就随时可供参考。</p><h2 id="8612" class="mv lz iv bd ma mw mx dn me my mz dp mi lk na nb mk lo nc nd mm ls ne nf mo ng bi translated"><strong class="ak">确保高质量数据</strong></h2><p id="62ad" class="pw-post-body-paragraph lb lc iv ld b le mq jw lg lh mr jz lj lk ms lm ln lo mt lq lr ls mu lu lv lw io bi translated">作为数据从业者，没有什么比数据质量更重要的了。记录您的数据可确保数据始终以正确的方式使用。KPI将跨模型保持一致，相同的时区将用于不同的日期字段，并且可以跟踪代码更改(或者至少这是目标)。文档有助于跟踪数据集的新鲜度、潜在的错误以及模型之间的依赖性——所有这些都是数据质量的关键因素</p><h1 id="4e95" class="ly lz iv bd ma mb mc md me mf mg mh mi kb mj kc mk ke ml kf mm kh mn ki mo mp bi translated">数据记录最佳实践</h1><p id="3b58" class="pw-post-body-paragraph lb lc iv ld b le mq jw lg lh mr jz lj lk ms lm ln lo mt lq lr ls mu lu lv lw io bi translated">既然我们知道数据文档是游戏规则的改变者，那么让我们来讨论一些现在就可以在数据栈中实现的技巧和诀窍。</p><h2 id="edba" class="mv lz iv bd ma mw mx dn me my mz dp mi lk na nb mk lo nc nd mm ls ne nf mo ng bi translated"><strong class="ak">为您的数据模型创建dbt风格指南。</strong></h2><p id="8a6e" class="pw-post-body-paragraph lb lc iv ld b le mq jw lg lh mr jz lj lk ms lm ln lo mt lq lr ls mu lu lv lw io bi translated">在阅读了<a class="ae la" rel="noopener" target="_blank" href="/what-is-dbt-a0d91109f7d0"> dbt </a>网站上的大量博客文章后，我发现了创建风格指南的最佳实践。即使不使用dbt编写数据模型，也应该创建一个风格指南，详细说明您希望遵循的不同代码和命名约定。</p><p id="d4c4" class="pw-post-body-paragraph lb lc iv ld b le lf jw lg lh li jz lj lk ll lm ln lo lp lq lr ls lt lu lv lw io bi translated">这是我做的第一件事，甚至在建立任何数据模型之前。我很感激我这样做了，因为它给了我一个可以严格遵循的标准。你可以想把所有的事情都记在脑子里，但是在记到某个地方之前，很容易忘记。每当我在编写我的数据模型时遇到问题，我都能够查看指南并回答它，而不必查看其他数据模型并猜测我想要什么标准。</p><p id="9c90" class="pw-post-body-paragraph lb lc iv ld b le lf jw lg lh li jz lj lk ll lm ln lo lp lq lr ls lt lu lv lw io bi translated">你的风格指南中应包含哪些内容:</p><ul class=""><li id="8455" class="nh ni iv ld b le lf lh li lk nj lo nk ls nl lw nm nn no np bi translated">命名约定(列名的大小写和时态)</li><li id="bfa2" class="nh ni iv ld b le nq lh nr lk ns lo nt ls nu lw nm nn no np bi translated">SQL最佳实践(注释代码、cte、子查询等。)</li><li id="4448" class="nh ni iv ld b le nq lh nr lk ns lo nt ls nu lw nm nn no np bi translated">模型的文档标准</li><li id="f6f5" class="nh ni iv ld b le nq lh nr lk ns lo nt ls nu lw nm nn no np bi translated">日期、时间戳和货币列的数据类型</li><li id="ab84" class="nh ni iv ld b le nq lh nr lk ns lo nt ls nu lw nm nn no np bi translated">所有日期的时区标准</li></ul><p id="328d" class="pw-post-body-paragraph lb lc iv ld b le lf jw lg lh li jz lj lk ll lm ln lo lp lq lr ls lt lu lv lw io bi translated">下面是我的风格指南中的几个部分的例子，你会想要模仿你的风格:</p><p id="273c" class="pw-post-body-paragraph lb lc iv ld b le lf jw lg lh li jz lj lk ll lm ln lo lp lq lr ls lt lu lv lw io bi translated"><strong class="ld iw"> dbt约定</strong></p><pre class="kl km kn ko gt nv nw nx ny aw nz bi"><span id="a85c" class="mv lz iv nw b gy oa ob l oc od">Only base_ models should select from sources.</span><span id="3828" class="mv lz iv nw b gy oe ob l oc od">All other models should only select from other models.</span></pre><p id="9e38" class="pw-post-body-paragraph lb lc iv ld b le lf jw lg lh li jz lj lk ll lm ln lo lp lq lr ls lt lu lv lw io bi translated"><strong class="ld iw">测试</strong></p><pre class="kl km kn ko gt nv nw nx ny aw nz bi"><span id="7c41" class="mv lz iv nw b gy oa ob l oc od">At a minimum, unique and not_null tests should be applied to the primary key of each model.</span><span id="c38b" class="mv lz iv nw b gy oe ob l oc od">Run the drop_old_relations script after completing a model in order to delete old views/tables</span></pre><p id="7086" class="pw-post-body-paragraph lb lc iv ld b le lf jw lg lh li jz lj lk ll lm ln lo lp lq lr ls lt lu lv lw io bi translated"><strong class="ld iw">命名和字段约定</strong></p><pre class="kl km kn ko gt nv nw nx ny aw nz bi"><span id="2c34" class="mv lz iv nw b gy oa ob l oc od">Schema, table and column names should be in snake_case.</span><span id="a800" class="mv lz iv nw b gy oe ob l oc od">Each model should have a primary key.</span><span id="f827" class="mv lz iv nw b gy oe ob l oc od">The primary key of a model should be named &lt;object&gt;_id, e.g. account_id – this makes it easier to know what id is being referenced in downstream joined models.</span></pre><h1 id="2f6b" class="ly lz iv bd ma mb mc md me mf mg mh mi kb mj kc mk ke ml kf mm kh mn ki mo mp bi translated"><strong class="ak">建立模型时记录列定义。</strong></h1><p id="4902" class="pw-post-body-paragraph lb lc iv ld b le mq jw lg lh mr jz lj lk ms lm ln lo mt lq lr ls mu lu lv lw io bi translated">我们已经谈到了在构建数据模型时记录数据将如何节省您的时间。但是，这也有助于提高数据的质量。为列创建定义时，您希望确保它们是一致和准确的。当你正在处理数据时，而不是在事后，你通常对数据有最深刻的理解。这是因为在编写数据模型时，您已经了解了数据中的细微差别。</p><p id="c429" class="pw-post-body-paragraph lb lc iv ld b le lf jw lg lh li jz lj lk ll lm ln lo lp lq lr ls lt lu lv lw io bi translated">我强烈推荐直接在dbt中进行文档化。如果您不熟悉dbt中的源文件，这是您记录模型及其列的地方。dbt允许您直接在这些文件中定义表、模型和列描述。直接在代码旁边编写和存储文档可以确保分析工程师和数据分析师的工作流程顺畅。</p><p id="5379" class="pw-post-body-paragraph lb lc iv ld b le lf jw lg lh li jz lj lk ll lm ln lo lp lq lr ls lt lu lv lw io bi translated">像<a class="ae la" href="https://www.castordoc.com/" rel="noopener ugc nofollow" target="_blank"> Castor </a>这样的数据目录工具允许您跨不同数据集自动填充dbt中定义的这些定义，从而将文档化向前推进了一步。这样，如果在多个数据集中有相同的列名，就不必一直定义它。Castor只需点击一个按钮就可以完成这项工作，节省了您的宝贵时间，让您可以专注于数据模型的编码。</p><h1 id="f81b" class="ly lz iv bd ma mb mc md me mf mg mh mi kb mj kc mk ke ml kf mm kh mn ki mo mp bi translated"><strong class="ak">对您的数据模型和数据管道使用版本控制。</strong></h1><p id="6403" class="pw-post-body-paragraph lb lc iv ld b le mq jw lg lh mr jz lj lk ms lm ln lo mt lq lr ls mu lu lv lw io bi translated">版本控制是一项重要的软件工程最佳实践，也可以引入到您的分析工作流程中。大多数团队使用Github来跟踪任何代码的变更。然而，我也喜欢在像dbt和<a class="ae la" rel="noopener" target="_blank" href="/tired-of-airflow-try-this-c51ec26cd29d">perfect</a>这样的工具中直接记录不同的版本。这些工具使得在代码旁边显示文档变得容易。</p><h2 id="601d" class="mv lz iv bd ma mw mx dn me my mz dp mi lk na nb mk lo nc nd mm ls ne nf mo ng bi translated">dbt</h2><p id="8dd8" class="pw-post-body-paragraph lb lc iv ld b le mq jw lg lh mr jz lj lk ms lm ln lo mt lq lr ls mu lu lv lw io bi translated">在dbt中，每个源文件都有一个“版本”块。在这里，您可以在每次进行更改时更改版本。它是如此简单，但在记录数据随时间的变化方面却非常重要。</p><figure class="kl km kn ko gt kp gh gi paragraph-image"><div class="gh gi of"><img src="../Images/5b7f65b332eed46c1d1c4d338bc15b31.png" data-original-src="https://miro.medium.com/v2/resize:fit:1084/0*9NTyM2mQhCQ1K8u_"/></div><p class="kw kx gj gh gi ky kz bd b be z dk translated">src_marketing.yml(图片作者)</p></figure><h2 id="12bb" class="mv lz iv bd ma mw mx dn me my mz dp mi lk na nb mk lo nc nd mm ls ne nf mo ng bi translated">长官</h2><p id="9259" class="pw-post-body-paragraph lb lc iv ld b le mq jw lg lh mr jz lj lk ms lm ln lo mt lq lr ls mu lu lv lw io bi translated">Prefect是我自动化和部署数据管道的首选工具。这是一个基于Python的工具，有一个非常干净的用户界面，易于使用。使用UI部署管道时，可以在管道运行代码旁边添加一个自述文件。我利用这个自述文件记录我所有不同的管道版本，包括它们同步的数据和它们运行的模型。</p><p id="a7aa" class="pw-post-body-paragraph lb lc iv ld b le lf jw lg lh li jz lj lk ll lm ln lo lp lq lr ls lt lu lv lw io bi translated">这是一个非常权宜的解决方案，但它并没有淡化它的重要性。有时文档可以简单到保存一个包含一堆关键信息的文档！用你能得到的来凑合没有错。</p><figure class="kl km kn ko gt kp gh gi paragraph-image"><div role="button" tabindex="0" class="kq kr di ks bf kt"><div class="gh gi og"><img src="../Images/8234f2b535fd39bb5c11341e66929d67.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*Ww2tqX8vyE7tFJ8n"/></div></div><p class="kw kx gj gh gi ky kz bd b be z dk translated">作者图片</p></figure><p id="204c" class="pw-post-body-paragraph lb lc iv ld b le lf jw lg lh li jz lj lk ll lm ln lo lp lq lr ls lt lu lv lw io bi translated">如您所见，我记录了版本号以及该版本中所做的更改、正在同步的数据源和计划运行的数据模型。</p><h1 id="ba35" class="ly lz iv bd ma mb mc md me mf mg mh mi kb mj kc mk ke ml kf mm kh mn ki mo mp bi translated">将数据目录工具集成到您的堆栈中。</h1><p id="ca95" class="pw-post-body-paragraph lb lc iv ld b le mq jw lg lh mr jz lj lk ms lm ln lo mt lq lr ls mu lu lv lw io bi translated">虽然我的其他数据文档最佳实践更多的是使用您已经使用的工具，但是您也可以在您的堆栈中实现一个专门关注数据文档的工具。数据目录集成在您的数据堆栈中，将来自不同工具(如<a class="ae la" rel="noopener" target="_blank" href="/how-i-organize-my-snowflake-data-warehouse-996965fe51dc?source=your_stories_page-------------------------------------">【雪花】</a>、dbt和Looker)的文档跨您的堆栈同步到一个位置。我们很幸运，市场上有很好的解决我到目前为止提到的具体痛点的产品。</p><p id="c5d3" class="pw-post-body-paragraph lb lc iv ld b le lf jw lg lh li jz lj lk ll lm ln lo lp lq lr ls lt lu lv lw io bi translated">数据目录允许您为数据集和标签资源分配所有者。这确保了当你对数据或数据质量状况有疑问时，你知道该找谁帮忙，消除了不必要的来回奔波。标记资源还允许您基于数据集的业务领域来分离数据集。当业务团队只想查看其领域中的数据集时，这很有帮助。当用于限制谁可以查看某些数据集时，标记也是一种数据治理形式。</p><p id="93b0" class="pw-post-body-paragraph lb lc iv ld b le lf jw lg lh li jz lj lk ll lm ln lo lp lq lr ls lt lu lv lw io bi translated">虽然这些是数据目录的核心功能，但不同工具之间还有一些强大的文档功能。我觉得非常有趣的一点是Castor的“部落知识”自动化。有多少次你发现自己在一个团队松弛渠道发帖，询问某个数据集？对该数据集了解最多的人会回复一个松散的线程，告诉你所有你需要知道的。</p><figure class="kl km kn ko gt kp gh gi paragraph-image"><div role="button" tabindex="0" class="kq kr di ks bf kt"><div class="gh gi oh"><img src="../Images/da45bf5b0f21ca39d1719cd16877b676.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*GxJSQIB3yP7v0UF1"/></div></div><p class="kw kx gj gh gi ky kz bd b be z dk translated">作者图片</p></figure><p id="b0c3" class="pw-post-body-paragraph lb lc iv ld b le lf jw lg lh li jz lj lk ll lm ln lo lp lq lr ls lt lu lv lw io bi translated"><a class="ae la" href="https://www.castordoc.com/" rel="noopener ugc nofollow" target="_blank"> Castor </a>实际上是在一个松散的线程上提取评论，并将它们存储在目录中数据集的一个部分中。这样,“部落知识”就永远不会丢失！它将永远与您其他有价值的文档保存在一起。</p><h1 id="e749" class="ly lz iv bd ma mb mc md me mf mg mh mi kb mj kc mk ke ml kf mm kh mn ki mo mp bi translated">结论</h1><p id="0104" class="pw-post-body-paragraph lb lc iv ld b le mq jw lg lh mr jz lj lk ms lm ln lo mt lq lr ls mu lu lv lw io bi translated">实话实说吧。记录我们的数据一点也不“迷人”。对于分析工程师或数据分析师来说，这不是最有趣的事情。但是，我认为这是最重要的。这是改变公司内部数据文化的最佳方式。</p><p id="4853" class="pw-post-body-paragraph lb lc iv ld b le lf jw lg lh li jz lj lk ll lm ln lo lp lq lr ls lt lu lv lw io bi translated">当您专注于文档时，利益相关者可以更快地做出决策，数据团队在试图完成工作时会经历更少的摩擦，并且每个人都有可以依赖的数据。不要仅仅为了在将来为你自己和你的团队创造更多的工作而推掉文档。现在优先考虑它，你会很高兴你做了。</p><p id="a165" class="pw-post-body-paragraph lb lc iv ld b le lf jw lg lh li jz lj lk ll lm ln lo lp lq lr ls lt lu lv lw io bi translated">关于分析工程、现代数据堆栈和最佳实践的更多信息，<a class="ae la" href="https://madisonmae.substack.com/" rel="noopener ugc nofollow" target="_blank">订阅</a>我的免费每周简讯。</p></div></div>    
</body>
</html>