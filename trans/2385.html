<html>
<head>
<title>3 Things to Know Before Building with PyScript</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用PyScript构建之前要知道的3件事</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/3-things-you-must-know-before-building-with-pyscript-245a0a82f2c3#2022-05-25">https://towardsdatascience.com/3-things-you-must-know-before-building-with-pyscript-245a0a82f2c3#2022-05-25</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="a780" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">在最近遇到一些障碍、错误和怪癖之后，我想用PyScript、Python和HTML做一个构建指南</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/ccc42abbf59af54152ee7f8cfbcf47ea.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*8rqqNslFC0cdboyv"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">戴维·克洛德在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</p></figure><p id="d7ef" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">对于那些还没有听说过<a class="ae ky" href="https://pyscript.net/" rel="noopener ugc nofollow" target="_blank">的人来说，在</a><a class="ae ky" href="https://us.pycon.org/2022/" rel="noopener ugc nofollow" target="_blank"> PyCon 2022 </a>上首次亮相的PyScript 是一个嵌入浏览器的python环境，构建在一个名为<a class="ae ky" href="https://pyodide.org/en/stable/" rel="noopener ugc nofollow" target="_blank"> Pyodide </a>的现有项目之上。这个项目让长期的Python爱好者和web开发人员感到震惊，它在一个双向环境中无缝地融合了(<em class="lv">好得几乎是</em> ) JavaScript和Python，允许开发人员在浏览器中使用Python staples，如<strong class="lb iu"/><a class="ae ky" href="https://numpy.org/" rel="noopener ugc nofollow" target="_blank"><strong class="lb iu">NumPy</strong></a><strong class="lb iu">或</strong> <a class="ae ky" href="https://pandas.pydata.org/" rel="noopener ugc nofollow" target="_blank"> <strong class="lb iu">熊猫</strong> </a> <strong class="lb iu">。</strong></p><p id="67d4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">玩了几天这个项目后，我想分享一些我在掌握PyScript的过程中遇到的学习和gotchya的经验。</p><p id="dd39" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">前奏</strong>:py script<br/><strong class="lb iu">1</strong>中的<a class="ae ky" href="#a820" rel="noopener ugc nofollow">速成班。</a><a class="ae ky" href="#e1f7" rel="noopener ugc nofollow">包装压痕至关重要！</a><br/>T36】2。<a class="ae ky" href="#4958" rel="noopener ugc nofollow">本地文件访问</a> <br/> <strong class="lb iu"> 3 </strong>。<a class="ae ky" href="#2e74" rel="noopener ugc nofollow"> DOM操作</a></p></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><h2 id="a820" class="md me it bd mf mg mh dn mi mj mk dp ml li mm mn mo lm mp mq mr lq ms mt mu mv bi translated">PyScript速成班</h2><p id="fef2" class="pw-post-body-paragraph kz la it lb b lc mw ju le lf mx jx lh li my lk ll lm mz lo lp lq na ls lt lu im bi translated">要开始使用PyScript，我们首先必须将我们的HTML文件与PyScript脚本链接起来，就像我们处理任何普通javascript文件一样。此外，我们可以链接PyScript样式表来提高可用性。</p><pre class="kj kk kl km gt nb nc nd ne aw nf bi"><span id="16e7" class="md me it nc b gy ng nh l ni nj"><strong class="nc iu">&lt;head&gt;</strong><br/>    &lt;link rel="stylesheet" href="https://pyscript.net/alpha/pyscript.css" /&gt;<br/>    &lt;script defer src="https://pyscript.net/alpha/pyscript.js"&gt;&lt;/script&gt;<br/><strong class="nc iu">&lt;/head&gt;</strong></span></pre><p id="db66" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在HTML文件头中导入PyScript后，我们现在可以利用HTML主体中的<strong class="lb iu"> &lt; py-script &gt; </strong>标签来编写python代码。</p><pre class="kj kk kl km gt nb nc nd ne aw nf bi"><span id="612f" class="md me it nc b gy ng nh l ni nj"><strong class="nc iu">&lt;body&gt;</strong><br/>    &lt;py-script&gt;<br/>        for i in ["Python", "in", "html?"]:<br/>            print(i)<br/>    &lt;/py-script&gt;<br/><strong class="nc iu">&lt;/body&gt;</strong></span></pre><p id="32e0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">没错。开始真的就这么简单。现在，事情在哪里变得棘手？</p></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><h2 id="e1f7" class="md me it bd mf mg mh dn mi mj mk dp ml li mm mn mo lm mp mq mr lq ms mt mu mv bi translated">包装压痕很重要</h2><p id="719b" class="pw-post-body-paragraph kz la it lb b lc mw ju le lf mx jx lh li my lk ll lm mz lo lp lq na ls lt lu im bi translated">使用PyScript的一个很大的优势是能够导入Python库，比如NumPy或Pandas，这首先在<em class="lv">头</em>中使用<em class="lv"> &lt; py-env &gt; </em>标签完成，然后在<em class="lv"> &lt; py-script &gt; </em>标签内部完成，就像在普通Python中一样。</p><pre class="kj kk kl km gt nb nc nd ne aw nf bi"><span id="db22" class="md me it nc b gy ng nh l ni nj"><strong class="nc iu">&lt;head&gt;</strong><br/>    &lt;link rel="stylesheet" href="https://pyscript.net/alpha/pyscript.css" /&gt;<br/>    &lt;script defer src="https://pyscript.net/alpha/pyscript.js"&gt;&lt;/script&gt;</span><span id="0481" class="md me it nc b gy nk nh l ni nj">    &lt;py-env&gt;<br/>- numpy<br/>- pandas<br/>    &lt;/py-env&gt;<br/><strong class="nc iu">&lt;/head&gt;</strong></span><span id="b936" class="md me it nc b gy nk nh l ni nj"><strong class="nc iu">&lt;body&gt;</strong><br/>    &lt;py-script&gt;<br/>        <strong class="nc iu">import pandas as pd</strong><br/>    &lt;/py-script&gt;<br/><strong class="nc iu">&lt;/body&gt;</strong></span></pre><p id="0ff5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">从表面上看，这似乎很简单<strong class="lb iu">，但是请注意<em class="lv"> &lt; py-env &gt; </em>中的包</strong>的缩进。</p><pre class="kj kk kl km gt nb nc nd ne aw nf bi"><span id="d221" class="md me it nc b gy ng nh l ni nj">    &lt;py-env&gt;<br/><strong class="nc iu">- numpy<br/>- pandas</strong><br/>    &lt;/py-env&gt;</span></pre><p id="4860" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">原来，如果有<a class="ae ky" href="https://github.com/pyscript/pyscript/issues/136" rel="noopener ugc nofollow" target="_blank">任何缩进</a>，您将收到一个<strong class="lb iu"><em class="lv">ModuleNotFoundError</em></strong><em class="lv">:没有名为‘pandas’</em>或<em class="lv"/><strong class="lb iu"><em class="lv">ModuleNotFoundError</em></strong><em class="lv">:没有名为‘numpy’)</em>的模块用于PyScript。这个错误一开始让我措手不及，因为Python中的缩进非常重要。</p></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><h2 id="4958" class="md me it bd mf mg mh dn mi mj mk dp ml li mm mn mo lm mp mq mr lq ms mt mu mv bi translated">本地文件访问</h2><p id="93b2" class="pw-post-body-paragraph kz la it lb b lc mw ju le lf mx jx lh li my lk ll lm mz lo lp lq na ls lt lu im bi translated">与Python相比，JavaScript处理文件访问的方式非常不同……鉴于web开发与隐私和安全之间的关系，这是理所应当的。因此普通JavaScript不能直接访问本地文件。因为PyScript项目是建立在JavaScript <strong class="lb iu">之上的，所以您的Python代码将不能像您可能习惯的那样访问本地文件</strong>。</p><p id="c116" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">PyScript确实在<py-env>标签中提供了文件访问的解决方案。除了导入包之外，还可以导入CSV或XLSXs等文件。</py-env></p><pre class="kj kk kl km gt nb nc nd ne aw nf bi"><span id="dc09" class="md me it nc b gy ng nh l ni nj">    &lt;py-env&gt;<br/>- numpy<br/>- pandas<br/><strong class="nc iu">- paths:<br/>    - /views.csv</strong><br/>    &lt;/py-env&gt;</span></pre><p id="82bd" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">再次<strong class="lb iu">注意缩进</strong>，因为在这种情况下，CSV必须相对于路径缩进。</p><p id="6765" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">有了包含在路径中的文件，您可以在您的<py-script>代码中读取它。</py-script></p><pre class="kj kk kl km gt nb nc nd ne aw nf bi"><span id="7d57" class="md me it nc b gy ng nh l ni nj">&lt;py-script&gt;<br/>    import pandas as pd<br/>    df = pd.read_csv("<strong class="nc iu">views.csv</strong>")<br/>&lt;/py-script&gt;</span></pre></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><h2 id="a64e" class="md me it bd mf mg mh dn mi mj mk dp ml li mm mn mo lm mp mq mr lq ms mt mu mv bi translated">DOM操作</h2><p id="67a0" class="pw-post-body-paragraph kz la it lb b lc mw ju le lf mx jx lh li my lk ll lm mz lo lp lq na ls lt lu im bi translated">对于任何从事过web开发的人来说，您应该熟悉DOM或文档对象模型。DOM操作在大多数web应用程序中很常见，因为开发人员通常希望他们的网站与用户交互，读取输入并响应按钮点击。在PyScript的例子中，这提出了一个有趣的问题:按钮和输入字段如何与Python代码交互？</p><p id="3b10" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">PyScript对此也有一个解决方案，但是，它可能不是您所期望的。下面是PyScript具有功能的几个例子:</p><ol class=""><li id="b64e" class="nl nm it lb b lc ld lf lg li nn lm no lq np lu nq nr ns nt bi translated">对于按钮，可以包含<em class="lv">pys-onClick = " your _ function "</em>参数，在点击时触发python函数。</li><li id="ad97" class="nl nm it lb b lc nu lf nv li nw lm nx lq ny lu nq nr ns nt bi translated">用于从<em class="lv"> &lt; py-script &gt; </em>标签<em class="lv">document . getelementbyid(' input _ obj _ id ')中检索用户输入。值</em>可以检索输入值。</li><li id="b65f" class="nl nm it lb b lc nu lf nv li nw lm nx lq ny lu nq nr ns nt bi translated">最后<em class="lv">py script . write(" output _ obj _ id "，data) </em>可以从<em class="lv"> &lt; py-script &gt; </em>标签内将输出写入标签。</li></ol><p id="39e8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们可以看到这三种DOM操作技术被放在一个web应用程序中，该应用程序允许用户检查CSV是否已被添加到PyScript路径中:</p><pre class="kj kk kl km gt nb nc nd ne aw nf bi"><span id="6dfa" class="md me it nc b gy ng nh l ni nj">&lt;body&gt;<br/>   &lt;form onsubmit = 'return false'&gt;<br/>   &lt;label for="fpath"&gt;filepath&lt;/label&gt;<br/>   &lt;input type="text" id="fpath" name="filepath" placeholder="Your name.."&gt;<br/>   &lt;input <strong class="nc iu">pys-onClick="onSub"</strong> type="submit" id="btn-form" value="submit"&gt;<br/>    &lt;/form&gt;</span><span id="e22b" class="md me it nc b gy nk nh l ni nj">&lt;div <strong class="nc iu">id="outp"</strong>&gt;&lt;/div&gt;</span><span id="ab77" class="md me it nc b gy nk nh l ni nj">    &lt;py-script&gt;<br/>        import pandas as pd</span><span id="ba1e" class="md me it nc b gy nk nh l ni nj">        def onSub(*args, **kwargs):<br/>            file_path = <strong class="nc iu">document.getElementById('fpath').value</strong><br/>            df = pd.read_csv(file_path)<br/>            <strong class="nc iu">pyscript.write("outp",df.head())</strong><br/>    &lt;/py-script&gt;<br/>&lt;/body&gt;</span></pre><p id="b60b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这些例子并不全面，因为该项目还支持<a class="ae ky" href="https://github.com/pyscript/pyscript/blob/main/docs/tutorials/getting-started.md" rel="noopener ugc nofollow" target="_blank">可视组件标签</a>。</p></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><h2 id="512d" class="md me it bd mf mg mh dn mi mj mk dp ml li mm mn mo lm mp mq mr lq ms mt mu mv bi translated"><strong class="ak">结论</strong></h2><p id="09cf" class="pw-post-body-paragraph kz la it lb b lc mw ju le lf mx jx lh li my lk ll lm mz lo lp lq na ls lt lu im bi translated">PyScript将一些优秀的Python包引入web开发领域，是朝着正确方向迈出的精彩一步。尽管如此，它仍然有一点成长要做，在该项目被广泛采用之前，还有许多需要改进的地方。</p><blockquote class="nz oa ob"><p id="0920" class="kz la lv lb b lc ld ju le lf lg jx lh oc lj lk ll od ln lo lp oe lr ls lt lu im bi translated">对在这个【https://github.com/pyscript】棒极了的项目中工作的团队表示一些支持</p></blockquote><p id="285a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">留下您在使用PyScript时可能遇到的任何其他见解或gotchya的评论，我将制作第2部分。</strong></p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi of"><img src="../Images/7516a80072309e14ab26b667ae9e80a7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*oD1E1b6pcLx-tgtW"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">Jan Kahánek 在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure></div></div>    
</body>
</html>