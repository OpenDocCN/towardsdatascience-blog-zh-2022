<html>
<head>
<title>Connecting DBeaver to Google BigQuery</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">将DBeaver连接到Google BigQuery</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/connecting-dbeaver-to-google-bigquery-23c8a12e55b5#2022-08-17">https://towardsdatascience.com/connecting-dbeaver-to-google-bigquery-23c8a12e55b5#2022-08-17</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="f777" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">利用JDBC，一步一步</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/cfdadfd23353b42928823fc0db962ed3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*A2hIVUWlsVrjIQoaTG6Aig.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">图片来源于<a class="ae ky" href="https://unsplash.com/photos/IKHvOlZFCOg" rel="noopener ugc nofollow" target="_blank">unsplash.com</a></p></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi kz"><img src="../Images/a7df1b0323d4d0152a3901e0add5eb47.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*YIaNjrCBOYjzcy9LWpjyJg.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">BigQuery Web界面。作者截图。</p></figure><p id="551d" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">从我第一次使用Google BigQuery开始，我就觉得有必要连接到本地IDE，而不是使用Web界面。尽管如此，我还是给了使用的时间，心想也许是因为多年使用专业工具像DataGrip、Toad、SQLDeveloper、SQL Server Management Studio、Workbench J等，我已经过时了。</p><p id="0e84" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">也许我没有足够的耐心，或者我是对的，但是无论如何，如果以下任何一个问题正发生在你身上，也许这篇文章会帮助你:</p><ul class=""><li id="00cd" class="lw lx it lc b ld le lg lh lj ly ln lz lr ma lv mb mc md me bi translated">你有没有感觉到Google BigQuery的网络界面让你的速度变慢了？</li><li id="0611" class="lw lx it lc b ld mf lg mg lj mh ln mi lr mj lv mb mc md me bi translated">当你知道你的SQL是正确的时候，你有一些奇怪的错误信息吗？</li><li id="90a4" class="lw lx it lc b ld mf lg mg lj mh ln mi lr mj lv mb mc md me bi translated">您想重用您的代码并拥有一个包含SQL的本地文件吗？</li><li id="58f9" class="lw lx it lc b ld mf lg mg lj mh ln mi lr mj lv mb mc md me bi translated">你用标签输了吗？</li><li id="5566" class="lw lx it lc b ld mf lg mg lj mh ln mi lr mj lv mb mc md me bi translated">创建新的数据库对象时，是否需要刷新整个页面？</li></ul></div><div class="ab cl mk ml hx mm" role="separator"><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp"/></div><div class="im in io ip iq"><h1 id="edc7" class="mr ms it bd mt mu mv mw mx my mz na nb jz nc ka nd kc ne kd nf kf ng kg nh ni bi translated">摘要</h1><p id="cf41" class="pw-post-body-paragraph la lb it lc b ld nj ju lf lg nk jx li lj nl ll lm ln nm lp lq lr nn lt lu lv im bi translated">在本帖中，我们将学习如何使用JDBC连接到BigQuery:</p><ol class=""><li id="0aaa" class="lw lx it lc b ld le lg lh lj ly ln lz lr ma lv no mc md me bi translated">安装DBeaver</li><li id="86ae" class="lw lx it lc b ld mf lg mg lj mh ln mi lr mj lv no mc md me bi translated">了解先决条件</li><li id="2463" class="lw lx it lc b ld mf lg mg lj mh ln mi lr mj lv no mc md me bi translated">配置BigQuery连接</li><li id="8c4d" class="lw lx it lc b ld mf lg mg lj mh ln mi lr mj lv no mc md me bi translated">测试连接</li></ol><p id="caed" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">最后，我将添加<strong class="lc iu">感谢</strong>、<strong class="lc iu">结论、</strong>和<strong class="lc iu">有用的资源。</strong></p><p id="623d" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">我建议您查看我之前在<a class="ae ky" rel="noopener" target="_blank" href="/run-bigquery-sql-using-python-api-client-b5287ac05b99">https://towardsdatascience . com/Run-big query-SQL-using-Python-API-Client-b 5287 AC 05 b 99</a>上发表的关于<a class="ae ky" rel="noopener" target="_blank" href="/run-bigquery-sql-using-python-api-client-b5287ac05b99">使用Python API客户端运行big query SQL</a>的帖子，因为它详细介绍了创建和配置服务帐户以及添加公共数据集的步骤。</p></div><div class="ab cl mk ml hx mm" role="separator"><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp"/></div><div class="im in io ip iq"><h1 id="727d" class="mr ms it bd mt mu mv mw mx my mz na nb jz nc ka nd kc ne kd nf kf ng kg nh ni bi translated">安装DBeaver</h1><p id="b5c6" class="pw-post-body-paragraph la lb it lc b ld nj ju lf lg nk jx li lj nl ll lm ln nm lp lq lr nn lt lu lv im bi translated">DBeaver是面向开发人员和数据库管理员的免费、流行、开源的通用数据库工具。</p><p id="af01" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">我选择在以下<a class="ae ky" href="https://dbeaver.io/download/" rel="noopener ugc nofollow" target="_blank">链接</a>下载并安装<strong class="lc iu"> DBeaver社区版</strong>:</p><pre class="kj kk kl km gt np nq nr ns aw nt bi"><span id="54fe" class="nu ms it nq b gy nv nw l nx ny"><a class="ae ky" href="https://dbeaver.io/download/" rel="noopener ugc nofollow" target="_blank">https://dbeaver.io/download/</a></span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nz"><img src="../Images/0b77e571cdc354f8c3d6585c331cdc14.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*IMnJpewyX7Y99ZmX2Fk14Q.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">DBeaver社区安装程序。作者截图。</p></figure></div><div class="ab cl mk ml hx mm" role="separator"><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp"/></div><div class="im in io ip iq"><h1 id="8f37" class="mr ms it bd mt mu mv mw mx my mz na nb jz nc ka nd kc ne kd nf kf ng kg nh ni bi translated">了解先决条件</h1><p id="29b9" class="pw-post-body-paragraph la lb it lc b ld nj ju lf lg nk jx li lj nl ll lm ln nm lp lq lr nn lt lu lv im bi translated">要使用JDBC连接BigQuery，您需要:</p><ul class=""><li id="2b23" class="lw lx it lc b ld le lg lh lj ly ln lz lr ma lv mb mc md me bi translated"><strong class="lc iu">项目</strong>:项目ID</li><li id="652c" class="lw lx it lc b ld mf lg mg lj mh ln mi lr mj lv mb mc md me bi translated"><strong class="lc iu">用户</strong>:服务账号邮箱</li><li id="0272" class="lw lx it lc b ld mf lg mg lj mh ln mi lr mj lv mb mc md me bi translated"><strong class="lc iu">密钥路径</strong>:服务账户密钥文件</li></ul><h1 id="6180" class="mr ms it bd mt mu oa mw mx my ob na nb jz oc ka nd kc od kd nf kf oe kg nh ni bi translated">项目</h1><p id="e1df" class="pw-post-body-paragraph la lb it lc b ld nj ju lf lg nk jx li lj nl ll lm ln nm lp lq lr nn lt lu lv im bi translated">项目名称不起作用。您听说您正在寻找<strong class="lc iu">项目ID </strong>，您可以在创建一个项目并选择页面顶部的项目名称后获得它，如下图所示:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi of"><img src="../Images/d1d15f89428c93ccfc6095b1f62b3e94.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*CdH_K0OF1NkoDRN44w4Esw.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">项目名称不起作用。您需要一个项目ID。图片由作者编辑。</p></figure><h1 id="1ceb" class="mr ms it bd mt mu oa mw mx my ob na nb jz oc ka nd kc od kd nf kf oe kg nh ni bi translated">用户</h1><p id="81f1" class="pw-post-body-paragraph la lb it lc b ld nj ju lf lg nk jx li lj nl ll lm ln nm lp lq lr nn lt lu lv im bi translated">您可以通过选择<strong class="lc iu">基于用户的</strong>认证来使用您的Google帐户，但是当您关闭并打开IDE时，它会要求您再次登录。作为最佳实践，建议使用服务帐户。</p><p id="5901" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">如果不知道如何创建<strong class="lc iu">服务账号</strong>，可以查看我之前在<a class="ae ky" rel="noopener" target="_blank" href="/run-bigquery-sql-using-python-api-client-b5287ac05b99">的帖子https://towardsdatascience . com/run-big query-SQL-using-python-API-client-b 5287 AC 05 b 99</a></p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi og"><img src="../Images/83bd5f2a99e494d068352f755a48a141.png" data-original-src="https://miro.medium.com/v2/resize:fit:1048/format:webp/1*mhM-tOVWliGA4q1OqX_kbg.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">OAuth类型，DBeaver连接。作者截图。</p></figure><p id="7249" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">在DBeaver中，较新版本不请求<strong class="lc iu">用户</strong>，但是如果您使用的是旧版本，请注意<strong class="lc iu">用户字段</strong>正在等待<strong class="lc iu">服务帐户电子邮件</strong>。你可以进入<strong class="lc iu">IAM&amp;Admin→Service Account:</strong></p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oh"><img src="../Images/1fa33abbfe02e5899b758bff930f9ebd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6xsZZUT95xZprJYkPOs4Rg.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">服务帐户电子邮件。图片由作者编辑。</p></figure><h1 id="3e67" class="mr ms it bd mt mu oa mw mx my ob na nb jz oc ka nd kc od kd nf kf oe kg nh ni bi translated">关键路径</h1><p id="2419" class="pw-post-body-paragraph la lb it lc b ld nj ju lf lg nk jx li lj nl ll lm ln nm lp lq lr nn lt lu lv im bi translated">密钥路径是指创建密钥时生成的JSON文件。如需了解更多信息，您可以查看我之前在<a class="ae ky" rel="noopener" target="_blank" href="/run-bigquery-sql-using-python-api-client-b5287ac05b99">https://towardsdatascience . com/run-big query-SQL-using-python-API-client-b 5287 AC 05 b 99</a>上的帖子</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oi"><img src="../Images/f8a98949e0e3fc9d956bf46a6bc09cc3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*apyhpDE2RcTucALqww-IEA.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">添加关键服务帐户。图片由作者编辑。</p></figure></div><div class="ab cl mk ml hx mm" role="separator"><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp"/></div><div class="im in io ip iq"><h1 id="5981" class="mr ms it bd mt mu mv mw mx my mz na nb jz nc ka nd kc ne kd nf kf ng kg nh ni bi translated">配置BigQuery连接</h1><p id="c221" class="pw-post-body-paragraph la lb it lc b ld nj ju lf lg nk jx li lj nl ll lm ln nm lp lq lr nn lt lu lv im bi translated">我们将通过转到<strong class="lc iu">文件→新建</strong>并选择<strong class="lc iu">数据库连接</strong>来连接到BigQuery:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oj"><img src="../Images/e4736e973f99481b42b7e669b46e9850.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Pb0Z_S4HZ2joYay2h9MMcQ.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">新连接，DBeaver向导。作者截图。</p></figure><p id="fde5" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">然后在搜索栏写<strong class="lc iu"> bigquery </strong>，选择左边的<strong class="lc iu"> All </strong>，选择<strong class="lc iu"> Google BigQuery图标，</strong>和下一步按钮:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ok"><img src="../Images/dd2529fb483f24b78afc116510ad415b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*yiDYQf1yHodL0JLzyPgZXg.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">连接到数据库。DBeaver。作者截图。</p></figure><p id="9412" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">对于连接设置，输入<strong class="lc iu">项目ID </strong>，选择<strong class="lc iu">服务库</strong>，选择<strong class="lc iu"> KEY JSON文件</strong>的路径，如果是询问用户字段，则使用<strong class="lc iu">服务账户邮箱</strong>。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ol"><img src="../Images/bd4c34b4aa8565959288e7a03fc5c5c8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*chC4BaDDN9pnX6FwUZRo8Q.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">连接到数据库。DBeaver。图片由作者编辑。</p></figure><p id="9f18" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">然后选择左边的<strong class="lc iu">测试连接</strong>按钮，下载辛巴JDBC驱动程序:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi om"><img src="../Images/52ae021ed031874a76f3ca5fd59ab7a4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mnKa_R9Bjm__hRVpIZsR5A.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">下载辛巴JDBC驱动程序。DBeaver。作者截图。</p></figure></div><div class="ab cl mk ml hx mm" role="separator"><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp"/></div><div class="im in io ip iq"><h1 id="ec29" class="mr ms it bd mt mu mv mw mx my mz na nb jz nc ka nd kc ne kd nf kf ng kg nh ni bi translated">测试连接</h1><p id="6cd5" class="pw-post-body-paragraph la lb it lc b ld nj ju lf lg nk jx li lj nl ll lm ln nm lp lq lr nn lt lu lv im bi translated">我们将使用美国名称来测试连接。要添加公共数据集，请遵循我在<a class="ae ky" rel="noopener" target="_blank" href="/run-bigquery-sql-using-python-api-client-b5287ac05b99">https://towardsdatascience . com/run-big query-SQL-using-python-API-client-b 5287 AC 05b 99</a>上一篇文章中的步骤</p><p id="0e79" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">使用以下SQL查询并按左侧的播放橙色三角形:</p><pre class="kj kk kl km gt np nq nr ns aw nt bi"><span id="d724" class="nu ms it nq b gy nv nw l nx ny">SELECT name, SUM(number) as total_people<br/>FROM `bigquery-public-data.usa_names.usa_1910_2013`<br/>WHERE state = 'TX'<br/>GROUP BY name, state<br/>ORDER BY total_people DESC<br/>LIMIT 20</span></pre><p id="25dc" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">您将获得以下结果:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi on"><img src="../Images/b7b8731ba3c252a9a55f5dfb254c050c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wKtuS_7h4R0gSerqzwxbeg.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">使用DBeaver的BigQuery SQL查询结果。作者截图。</p></figure></div><div class="ab cl mk ml hx mm" role="separator"><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp"/></div><div class="im in io ip iq"><h1 id="5046" class="mr ms it bd mt mu mv mw mx my mz na nb jz nc ka nd kc ne kd nf kf ng kg nh ni bi translated">结论</h1><p id="e57f" class="pw-post-body-paragraph la lb it lc b ld nj ju lf lg nk jx li lj nl ll lm ln nm lp lq lr nn lt lu lv im bi translated">使用本地IDE连接Google BigQuery有两种方式，一种是使用ODBC，另一种是使用JDBC。</p><p id="1fa1" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">我发现与JDBC连接可能会令人困惑，如果你不知道该做什么，它会花费太多的时间，这就是为什么我解释了如何配置它，我很确定同样的过程可以与其他支持它的数据库工具一起工作。</p><p id="e901" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">请注意，您将失去的一个重要东西是要扫描的卷的可见性:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oo"><img src="../Images/0c62c9a62c30e127621d5920268a780b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mtMQJ8xezFRu1HBPAyedMA.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">谷歌大查询图形用户界面。作者截图。</p></figure></div><div class="ab cl mk ml hx mm" role="separator"><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp"/></div><div class="im in io ip iq"><h1 id="a5d6" class="mr ms it bd mt mu mv mw mx my mz na nb jz nc ka nd kc ne kd nf kf ng kg nh ni bi translated">谢谢</h1><p id="9b60" class="pw-post-body-paragraph la lb it lc b ld nj ju lf lg nk jx li lj nl ll lm ln nm lp lq lr nn lt lu lv im bi translated">给我的妻子戴安娜，她陪伴着我，忍受着我，并推动我继续分享。</p></div><div class="ab cl mk ml hx mm" role="separator"><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp"/></div><div class="im in io ip iq"><h1 id="731b" class="mr ms it bd mt mu mv mw mx my mz na nb jz nc ka nd kc ne kd nf kf ng kg nh ni bi translated">有用的资源</h1><div class="op oq gp gr or os"><a href="https://cloud.google.com/bigquery/docs/reference/odbc-jdbc-drivers" rel="noopener  ugc nofollow" target="_blank"><div class="ot ab fo"><div class="ou ab ov cl cj ow"><h2 class="bd iu gy z fp ox fr fs oy fu fw is bi translated">BigQuery |谷歌云的ODBC和JDBC驱动程序</h2><div class="oz l"><h3 class="bd b gy z fp ox fr fs oy fu fw dk translated">Google与Magnitude Simba合作提供ODBC和JDBC驱动程序，这些驱动程序利用了BigQuery的强大功能…</h3></div><div class="pa l"><p class="bd b dl z fp ox fr fs oy fu fw dk translated">cloud.google.com</p></div></div><div class="pb l"><div class="pc l pd pe pf pb pg ks os"/></div></div></a></div><div class="op oq gp gr or os"><a href="https://dbeaver.io/" rel="noopener  ugc nofollow" target="_blank"><div class="ot ab fo"><div class="ou ab ov cl cj ow"><h2 class="bd iu gy z fp ox fr fs oy fu fw is bi translated">DBeaver</h2><div class="oz l"><h3 class="bd b gy z fp ox fr fs oy fu fw dk translated">免费的多平台数据库工具，面向开发人员、数据库管理员、分析师和所有需要工作的人…</h3></div><div class="pa l"><p class="bd b dl z fp ox fr fs oy fu fw dk translated">dbeaver.io</p></div></div><div class="pb l"><div class="ph l pd pe pf pb pg ks os"/></div></div></a></div></div></div>    
</body>
</html>