<html>
<head>
<title>Create Robust Data Pipelines with Prefect, Docker, and GitHub</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Prefect、Docker和GitHub创建强大的数据管道</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/create-robust-data-pipelines-with-prefect-docker-and-github-12b231ca6ed2#2022-09-08">https://towardsdatascience.com/create-robust-data-pipelines-with-prefect-docker-and-github-12b231ca6ed2#2022-09-08</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="8836" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">将您的工作流存储在GitHub中，并在Docker容器中执行它</h2></div><h1 id="3b52" class="ki kj it bd kk kl km kn ko kp kq kr ks jz kt ka ku kc kv kd kw kf kx kg ky kz bi translated">动机</h1><p id="aceb" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">您是否曾经想要在两个位置存储和执行您的工作流，但发现很难做到这一点？</p><figure class="lx ly lz ma gt mb gh gi paragraph-image"><div role="button" tabindex="0" class="mc md di me bf mf"><div class="gh gi lw"><img src="../Images/4010ff6abce4e45c420fa90adccb7f2e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Pzn24DXHu5z3IPmLaMDzKw.png"/></div></div><p class="mi mj gj gh gi mk ml bd b be z dk translated">作者图片</p></figure><p id="8b05" class="pw-post-body-paragraph la lb it lc b ld mm ju lf lg mn jx li lj mo ll lm ln mp lp lq lr mq lt lu lv im bi translated">如果您可以轻松地在不同的位置存储和执行您的代码，那不是很好吗？Prefect允许您在上面列出的所有环境中轻松存储和执行您的工作流，同时在一个漂亮的仪表板中跟踪所有运行。</p><figure class="lx ly lz ma gt mb gh gi paragraph-image"><div role="button" tabindex="0" class="mc md di me bf mf"><div class="gh gi mr"><img src="../Images/9610a7630edcbb06bbbb127539bd43f8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fOGjHsDWwUFghNHJ1vZeDw.png"/></div></div><p class="mi mj gj gh gi mk ml bd b be z dk translated">作者图片</p></figure><figure class="lx ly lz ma gt mb gh gi paragraph-image"><div role="button" tabindex="0" class="mc md di me bf mf"><div class="gh gi ms"><img src="../Images/ed73becd52268a986d93e5c853e081a0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9Z_xdz8cHMRKlzmLs2y9cA.png"/></div></div><p class="mi mj gj gh gi mk ml bd b be z dk translated">作者图片</p></figure><p id="a431" class="pw-post-body-paragraph la lb it lc b ld mm ju lf lg mn jx li lj mo ll lm ln mp lp lq lr mq lt lu lv im bi translated">在本文中，您将学习如何在GitHub中存储工作流代码，并在Docker容器中运行工作流。</p><figure class="lx ly lz ma gt mb gh gi paragraph-image"><div role="button" tabindex="0" class="mc md di me bf mf"><div class="gh gi mt"><img src="../Images/4c8cba33d184509fe6a2b4c5e47b1947.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*cpCO9aPmnz-7TsxflR3AFw.png"/></div></div><p class="mi mj gj gh gi mk ml bd b be z dk translated">作者图片</p></figure><h1 id="9fb6" class="ki kj it bd kk kl km kn ko kp kq kr ks jz kt ka ku kc kv kd kw kf kx kg ky kz bi translated">什么是提督？</h1><p id="9073" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated"><a class="ae mu" href="https://www.prefect.io/" rel="noopener ugc nofollow" target="_blank">perfect</a>是一个开源库，可以让你在Python中协调数据工作流。</p><p id="944c" class="pw-post-body-paragraph la lb it lc b ld mm ju lf lg mn jx li lj mo ll lm ln mp lp lq lr mq lt lu lv im bi translated">要安装提督，请键入:</p><pre class="lx ly lz ma gt mv mw mx my aw mz bi"><span id="7185" class="na kj it mw b gy nb nc l nd ne">pip install -U prefect</span></pre><p id="861e" class="pw-post-body-paragraph la lb it lc b ld mm ju lf lg mn jx li lj mo ll lm ln mp lp lq lr mq lt lu lv im bi translated">本文中使用的提督版本是2.3.2:</p><pre class="lx ly lz ma gt mv mw mx my aw mz bi"><span id="2417" class="na kj it mw b gy nb nc l nd ne">pip install prefect==2.3.2</span></pre><h1 id="5905" class="ki kj it bd kk kl km kn ko kp kq kr ks jz kt ka ku kc kv kd kw kf kx kg ky kz bi translated">项目目标</h1><p id="6376" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">在本文中，我们将创建一个工作流:</p><ul class=""><li id="1f99" class="nf ng it lc b ld mm lg mn lj nh ln ni lr nj lv nk nl nm nn bi translated">从Google Trends获取统计数据并创建报告</li><li id="8a05" class="nf ng it lc b ld no lg np lj nq ln nr lr ns lv nk nl nm nn bi translated">存储在GitHub上</li><li id="3ae0" class="nf ng it lc b ld no lg np lj nq ln nr lr ns lv nk nl nm nn bi translated">在Docker容器中执行</li><li id="5a8e" class="nf ng it lc b ld no lg np lj nq ln nr lr ns lv nk nl nm nn bi translated">以<code class="fe nt nu nv mw b">keyword</code>、<code class="fe nt nu nv mw b">start_date</code>和<code class="fe nt nu nv mw b">num_countries</code>为自变量</li><li id="0af8" class="nf ng it lc b ld no lg np lj nq ln nr lr ns lv nk nl nm nn bi translated">计划每周运行</li></ul><figure class="lx ly lz ma gt mb gh gi paragraph-image"><div role="button" tabindex="0" class="mc md di me bf mf"><div class="gh gi nw"><img src="../Images/492620b3d4b04ae6cdb2f70281a2f1af.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1z62NBJaYKdaZA0XRhaSuw.png"/></div></div><p class="mi mj gj gh gi mk ml bd b be z dk translated">作者图片</p></figure><p id="d8a9" class="pw-post-body-paragraph la lb it lc b ld mm ju lf lg mn jx li lj mo ll lm ln mp lp lq lr mq lt lu lv im bi translated">每当执行工作流时，都会创建以下报告。然后，您可以与您的队友或经理分享该报告。</p><figure class="lx ly lz ma gt mb gh gi paragraph-image"><div role="button" tabindex="0" class="mc md di me bf mf"><div class="gh gi nx"><img src="../Images/87f128f78b85f20ddd4d9315711d9631.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*zthqhw9gUC6fyWKMSUhJuQ.gif"/></div></div><p class="mi mj gj gh gi mk ml bd b be z dk translated"><a class="ae mu" href="https://datapane.com/reports/dA9oEY7/covid-report/" rel="noopener ugc nofollow" target="_blank">链接到报告</a></p></figure><h1 id="64ee" class="ki kj it bd kk kl km kn ko kp kq kr ks jz kt ka ku kc kv kd kw kf kx kg ky kz bi translated">创建一个流程</h1><p id="2c12" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">流程是所有完美工作流程的基础。要将Python函数转换成完美的流，只需向该函数添加装饰器<code class="fe nt nu nv mw b">@flow</code>:</p><figure class="lx ly lz ma gt mb"><div class="bz fp l di"><div class="ny nz l"/></div></figure><p id="20cb" class="pw-post-body-paragraph la lb it lc b ld mm ju lf lg mn jx li lj mo ll lm ln mp lp lq lr mq lt lu lv im bi translated"><a class="ae mu" href="https://github.com/khuyentran1401/prefect-docker/tree/master/src" rel="noopener ugc nofollow" target="_blank"> <em class="oa">完整代码创建一个流。</em>T13】</a></p><h1 id="a3a1" class="ki kj it bd kk kl km kn ko kp kq kr ks jz kt ka ku kc kv kd kw kf kx kg ky kz bi translated">创建简单的部署</h1><p id="482f" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">一个<a class="ae mu" href="https://docs.prefect.io/concepts/deployments/" rel="noopener ugc nofollow" target="_blank">部署</a>存储关于流的代码存储在哪里以及流应该如何运行的元数据。通过部署流程，我们可以:</p><ul class=""><li id="40ff" class="nf ng it lc b ld mm lg mn lj nh ln ni lr nj lv nk nl nm nn bi translated">指定流程运行的执行环境基础结构</li><li id="1334" class="nf ng it lc b ld no lg np lj nq ln nr lr ns lv nk nl nm nn bi translated">指定提督代理如何存储和检索您的流代码</li><li id="5f96" class="nf ng it lc b ld no lg np lj nq ln nr lr ns lv nk nl nm nn bi translated">使用UI中的自定义参数创建流运行</li><li id="f7f7" class="nf ng it lc b ld no lg np lj nq ln nr lr ns lv nk nl nm nn bi translated">创建运行流程的计划</li></ul><p id="93ec" class="pw-post-body-paragraph la lb it lc b ld mm ju lf lg mn jx li lj mo ll lm ln mp lp lq lr mq lt lu lv im bi translated">还有更多。</p><p id="6ace" class="pw-post-body-paragraph la lb it lc b ld mm ju lf lg mn jx li lj mo ll lm ln mp lp lq lr mq lt lu lv im bi translated">下图显示了具有不同计划、基础架构和存储的两个部署中的相同流程。</p><figure class="lx ly lz ma gt mb gh gi paragraph-image"><div role="button" tabindex="0" class="mc md di me bf mf"><div class="gh gi ob"><img src="../Images/84d0cbe711be97b15f487872da276ff1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*MaYjEIqiOpgyXRnpeE32Og.png"/></div></div><p class="mi mj gj gh gi mk ml bd b be z dk translated">作者图片</p></figure><p id="8e5d" class="pw-post-body-paragraph la lb it lc b ld mm ju lf lg mn jx li lj mo ll lm ln mp lp lq lr mq lt lu lv im bi translated">创建部署有两个步骤:</p><ol class=""><li id="c6ed" class="nf ng it lc b ld mm lg mn lj nh ln ni lr nj lv oc nl nm nn bi translated">构建部署定义文件，并有选择地将您的流上传到指定的远程存储位置</li><li id="6737" class="nf ng it lc b ld no lg np lj nq ln nr lr ns lv oc nl nm nn bi translated">通过应用部署定义来创建部署</li></ol><figure class="lx ly lz ma gt mb gh gi paragraph-image"><div role="button" tabindex="0" class="mc md di me bf mf"><div class="gh gi od"><img src="../Images/bcb4492bbf785f826951f4f9ae3ab148.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*imiIIJWaqkCPpV6iXTp4uA.png"/></div></div><p class="mi mj gj gh gi mk ml bd b be z dk translated">作者图片</p></figure><h2 id="3e05" class="na kj it bd kk oe of dn ko og oh dp ks lj oi oj ku ln ok ol kw lr om on ky oo bi translated">构建部署</h2><p id="796b" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">要构建部署，请键入:</p><figure class="lx ly lz ma gt mb"><div class="bz fp l di"><div class="ny nz l"/></div></figure><p id="158d" class="pw-post-body-paragraph la lb it lc b ld mm ju lf lg mn jx li lj mo ll lm ln mp lp lq lr mq lt lu lv im bi translated">例如，要从文件<code class="fe nt nu nv mw b">src/main.py</code>中为流<code class="fe nt nu nv mw b">create_pytrends_report</code>创建部署，在您的终端上键入以下内容:</p><figure class="lx ly lz ma gt mb"><div class="bz fp l di"><div class="ny nz l"/></div></figure><p id="af6f" class="pw-post-body-paragraph la lb it lc b ld mm ju lf lg mn jx li lj mo ll lm ln mp lp lq lr mq lt lu lv im bi translated">其中:</p><ul class=""><li id="2e25" class="nf ng it lc b ld mm lg mn lj nh ln ni lr nj lv nk nl nm nn bi translated"><code class="fe nt nu nv mw b">-n google-trends-gh-docker</code>指定部署的名称为<code class="fe nt nu nv mw b">google-trends-gh-docker</code>。</li><li id="952c" class="nf ng it lc b ld no lg np lj nq ln nr lr ns lv nk nl nm nn bi translated"><code class="fe nt nu nv mw b">-q test</code>指定工作队列为<code class="fe nt nu nv mw b">test</code>。一个<a class="ae mu" href="https://docs.prefect.io/concepts/work-queues/" rel="noopener ugc nofollow" target="_blank">工作队列</a>将部署组织到队列中以供执行。</li></ul><p id="88b7" class="pw-post-body-paragraph la lb it lc b ld mm ju lf lg mn jx li lj mo ll lm ln mp lp lq lr mq lt lu lv im bi translated">运行该命令将在当前目录下创建一个<code class="fe nt nu nv mw b">create_pytrends_report-deployment.yaml</code>文件和一个<code class="fe nt nu nv mw b">.prefectignore</code>。</p><pre class="lx ly lz ma gt mv mw mx my aw mz bi"><span id="4d0f" class="na kj it mw b gy nb nc l nd ne">.<br/>├── .prefectignore<br/>├── create_pytrends_report-deployment.yaml</span></pre><p id="2df0" class="pw-post-body-paragraph la lb it lc b ld mm ju lf lg mn jx li lj mo ll lm ln mp lp lq lr mq lt lu lv im bi translated">这些文件的功能:</p><ul class=""><li id="c04f" class="nf ng it lc b ld mm lg mn lj nh ln ni lr nj lv nk nl nm nn bi translated"><code class="fe nt nu nv mw b">.prefectignore</code>防止某些文件或目录上传到配置的存储位置。</li><li id="91e5" class="nf ng it lc b ld no lg np lj nq ln nr lr ns lv nk nl nm nn bi translated"><code class="fe nt nu nv mw b">create_pytrends_report-deployment.yaml</code>指定流程代码的存储位置以及流程应该如何运行。</li></ul><figure class="lx ly lz ma gt mb gh gi paragraph-image"><div role="button" tabindex="0" class="mc md di me bf mf"><div class="gh gi op"><img src="../Images/0c97690b552447f9fcdd00ddf046f924.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qtRuD8bJRoDQa0VKFEzKdA.png"/></div></div><p class="mi mj gj gh gi mk ml bd b be z dk translated">作者图片</p></figure><h2 id="9be4" class="na kj it bd kk oe of dn ko og oh dp ks lj oi oj ku ln ok ol kw lr om on ky oo bi translated">通过API创建部署</h2><p id="24f7" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">在创建了<code class="fe nt nu nv mw b">create_pytrends_report-deployment.yaml</code>文件之后，我们可以通过键入以下命令在API上创建部署:</p><figure class="lx ly lz ma gt mb"><div class="bz fp l di"><div class="ny nz l"/></div></figure><p id="2bb7" class="pw-post-body-paragraph la lb it lc b ld mm ju lf lg mn jx li lj mo ll lm ln mp lp lq lr mq lt lu lv im bi translated">如果您想将<code class="fe nt nu nv mw b">prefect deployment build</code>和<code class="fe nt nu nv mw b">prefect deployment apply</code>步骤合并为一个步骤，将<code class="fe nt nu nv mw b">--apply</code>选项添加到<code class="fe nt nu nv mw b">prefect deployment build</code>:</p><figure class="lx ly lz ma gt mb"><div class="bz fp l di"><div class="ny nz l"/></div></figure><p id="efcf" class="pw-post-body-paragraph la lb it lc b ld mm ju lf lg mn jx li lj mo ll lm ln mp lp lq lr mq lt lu lv im bi translated">现在，当进入猎户座府尹UI上的“部署”选项卡时(通过键入<code class="fe nt nu nv mw b">prefect orion start</code>或<a class="ae mu" href="https://docs.prefect.io/ui/cloud/" rel="noopener ugc nofollow" target="_blank">府尹云</a>，您应该会看到以下内容:</p><figure class="lx ly lz ma gt mb gh gi paragraph-image"><div role="button" tabindex="0" class="mc md di me bf mf"><div class="gh gi oq"><img src="../Images/ae4fbb0a8911fca9107794139b37f6b1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qT6ne-oLJTGXJABJUfM_pg.png"/></div></div><p class="mi mj gj gh gi mk ml bd b be z dk translated">作者图片</p></figure><h1 id="bea4" class="ki kj it bd kk kl km kn ko kp kq kr ks jz kt ka ku kc kv kd kw kf kx kg ky kz bi translated">创建块</h1><p id="7937" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated"><a class="ae mu" href="https://docs.prefect.io/ui/blocks/" rel="noopener ugc nofollow" target="_blank">模块</a>使您能够:</p><ul class=""><li id="9179" class="nf ng it lc b ld mm lg mn lj nh ln ni lr nj lv nk nl nm nn bi translated"><strong class="lc iu">存储配置</strong>:安全地存储凭证，以便使用AWS、GitHub、GCS、Slack等服务进行身份验证</li><li id="6130" class="nf ng it lc b ld no lg np lj nq ln nr lr ns lv nk nl nm nn bi translated"><strong class="lc iu">与外部系统交互</strong>:创建定制的基础架构块和存储块</li></ul><p id="c8d5" class="pw-post-body-paragraph la lb it lc b ld mm ju lf lg mn jx li lj mo ll lm ln mp lp lq lr mq lt lu lv im bi translated">“块”选项卡下提供了所有块。</p><figure class="lx ly lz ma gt mb gh gi paragraph-image"><div role="button" tabindex="0" class="mc md di me bf mf"><div class="gh gi or"><img src="../Images/fc0afe8b6001b0d9fd7d979a045e06da.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*BI_n9YgsgUbZfoae_gCIsQ.png"/></div></div><p class="mi mj gj gh gi mk ml bd b be z dk translated">作者图片</p></figure><h2 id="7c7a" class="na kj it bd kk oe of dn ko og oh dp ks lj oi oj ku ln ok ol kw lr om on ky oo bi translated">实例化Docker容器块</h2><p id="6f80" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">要实例化Docker容器块，首先单击Docker容器块上的<code class="fe nt nu nv mw b">Add</code>按钮。</p><figure class="lx ly lz ma gt mb gh gi paragraph-image"><div role="button" tabindex="0" class="mc md di me bf mf"><div class="gh gi os"><img src="../Images/51075e450d2fc83da97e7488b4380268.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-Ozo1q7ZLWUdDn4VPjwvhQ.png"/></div></div><p class="mi mj gj gh gi mk ml bd b be z dk translated">作者图片</p></figure><p id="e596" class="pw-post-body-paragraph la lb it lc b ld mm ju lf lg mn jx li lj mo ll lm ln mp lp lq lr mq lt lu lv im bi translated">在本文中，我们将只填写以下字段:</p><ul class=""><li id="dbbe" class="nf ng it lc b ld mm lg mn lj nh ln ni lr nj lv nk nl nm nn bi translated"><strong class="lc iu">块名:</strong>块名</li><li id="97f9" class="nf ng it lc b ld no lg np lj nq ln nr lr ns lv nk nl nm nn bi translated"><strong class="lc iu"> Env </strong>:要在已配置的基础设施中设置的环境变量。我们可以使用<code class="fe nt nu nv mw b">EXTRA_PIP_PACKAGES</code>在运行时安装依赖项</li><li id="6800" class="nf ng it lc b ld no lg np lj nq ln nr lr ns lv nk nl nm nn bi translated"><strong class="lc iu">类型</strong>:基础设施的类型。在这种情况下，它是<code class="fe nt nu nv mw b">docker-container</code></li><li id="e6c7" class="nf ng it lc b ld no lg np lj nq ln nr lr ns lv nk nl nm nn bi translated"><strong class="lc iu">流输出</strong>:如果设置，输出将从容器流到本地标准输出</li></ul><p id="48c2" class="pw-post-body-paragraph la lb it lc b ld mm ju lf lg mn jx li lj mo ll lm ln mp lp lq lr mq lt lu lv im bi translated">下图显示了我用于我的<code class="fe nt nu nv mw b">docker-container/google-trends</code>模块的配置。</p><figure class="lx ly lz ma gt mb gh gi paragraph-image"><div role="button" tabindex="0" class="mc md di me bf mf"><div class="gh gi ot"><img src="../Images/65b53e9a778fe3a9f94dbe8e54f3dc49.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*PrpnFUEepg9XtXP7c-SYuw.png"/></div></div><p class="mi mj gj gh gi mk ml bd b be z dk translated">作者图片</p></figure><p id="13a0" class="pw-post-body-paragraph la lb it lc b ld mm ju lf lg mn jx li lj mo ll lm ln mp lp lq lr mq lt lu lv im bi translated">这应该是你点击<code class="fe nt nu nv mw b">Save</code>按钮后看到的。</p><figure class="lx ly lz ma gt mb gh gi paragraph-image"><div role="button" tabindex="0" class="mc md di me bf mf"><div class="gh gi ou"><img src="../Images/3e4bd8758ccdb0d20d3522bf64acf63b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*V3AVEDNJoUAJ1ECmAwYxqw.png"/></div></div><p class="mi mj gj gh gi mk ml bd b be z dk translated">作者图片</p></figure><p id="3a60" class="pw-post-body-paragraph la lb it lc b ld mm ju lf lg mn jx li lj mo ll lm ln mp lp lq lr mq lt lu lv im bi translated">您还可以通过添加Docker图像的标签来使用自定义Docker图像。</p><figure class="lx ly lz ma gt mb gh gi paragraph-image"><div role="button" tabindex="0" class="mc md di me bf mf"><div class="gh gi ov"><img src="../Images/23a713ed916fdf8ee947850ad7dcb4ea.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*CVZ3terG9c-iLMfG9P07WA.png"/></div></div><p class="mi mj gj gh gi mk ml bd b be z dk translated">作者图片</p></figure><h2 id="e721" class="na kj it bd kk oe of dn ko og oh dp ks lj oi oj ku ln ok ol kw lr om on ky oo bi translated">实例化一个GitHub存储块</h2><p id="0e52" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">要实例化GitHub存储块，首先单击GitHub块上的<code class="fe nt nu nv mw b">Add</code>按钮。</p><figure class="lx ly lz ma gt mb gh gi paragraph-image"><div role="button" tabindex="0" class="mc md di me bf mf"><div class="gh gi ow"><img src="../Images/0c4f427678230ebf703a15c0f211715b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kIO_k9BIHWqiKLuEig8zxA.png"/></div></div><p class="mi mj gj gh gi mk ml bd b be z dk translated">作者图片</p></figure><p id="f67e" class="pw-post-body-paragraph la lb it lc b ld mm ju lf lg mn jx li lj mo ll lm ln mp lp lq lr mq lt lu lv im bi translated">下图显示了我的GitHub块的配置。</p><figure class="lx ly lz ma gt mb gh gi paragraph-image"><div role="button" tabindex="0" class="mc md di me bf mf"><div class="gh gi ox"><img src="../Images/8bbd15b3534b9d60705f53dea93256bb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*boFwlwd-CuETmXtEzN-dWw.png"/></div></div><p class="mi mj gj gh gi mk ml bd b be z dk translated">作者图片</p></figure><p id="ea1b" class="pw-post-body-paragraph la lb it lc b ld mm ju lf lg mn jx li lj mo ll lm ln mp lp lq lr mq lt lu lv im bi translated">点击<code class="fe nt nu nv mw b">Save</code>按钮后，您应该会看到以下内容。</p><figure class="lx ly lz ma gt mb gh gi paragraph-image"><div role="button" tabindex="0" class="mc md di me bf mf"><div class="gh gi oy"><img src="../Images/606567150393b4459e818559fe7b3372.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_QdIJX6M7omRn1eqvyGF_Q.png"/></div></div><p class="mi mj gj gh gi mk ml bd b be z dk translated">作者图片</p></figure><p id="0e50" class="pw-post-body-paragraph la lb it lc b ld mm ju lf lg mn jx li lj mo ll lm ln mp lp lq lr mq lt lu lv im bi translated">实例化的块将显示在“块”选项卡下。</p><figure class="lx ly lz ma gt mb gh gi paragraph-image"><div role="button" tabindex="0" class="mc md di me bf mf"><div class="gh gi oz"><img src="../Images/8004f5f5be348bb389fbbf83b7c59a8d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fmS5jNJrgxWXyFDNwqX_QA.png"/></div></div><p class="mi mj gj gh gi mk ml bd b be z dk translated">作者图片</p></figure><h1 id="a964" class="ki kj it bd kk kl km kn ko kp kq kr ks jz kt ka ku kc kv kd kw kf kx kg ky kz bi translated">使用Docker基础架构+ GitHub存储创建部署</h1><p id="9c45" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">要使用我们刚刚创建的两个块创建部署，请在您的终端上键入以下命令:</p><figure class="lx ly lz ma gt mb"><div class="bz fp l di"><div class="ny nz l"/></div></figure><p id="2e8d" class="pw-post-body-paragraph la lb it lc b ld mm ju lf lg mn jx li lj mo ll lm ln mp lp lq lr mq lt lu lv im bi translated">其中:</p><ul class=""><li id="894e" class="nf ng it lc b ld mm lg mn lj nh ln ni lr nj lv nk nl nm nn bi translated"><code class="fe nt nu nv mw b">-n google-trends-gh-docker</code>指定部署的名称为<code class="fe nt nu nv mw b">google-trends-gh-docker</code></li><li id="a93a" class="nf ng it lc b ld no lg np lj nq ln nr lr ns lv nk nl nm nn bi translated"><code class="fe nt nu nv mw b">-q test</code>指定工作队列为<code class="fe nt nu nv mw b">test</code></li><li id="3207" class="nf ng it lc b ld no lg np lj nq ln nr lr ns lv nk nl nm nn bi translated"><code class="fe nt nu nv mw b">-sb github/pytrends</code>指定存储为<code class="fe nt nu nv mw b">github/pytrends</code>块</li><li id="8c0f" class="nf ng it lc b ld no lg np lj nq ln nr lr ns lv nk nl nm nn bi translated"><code class="fe nt nu nv mw b">-ib docker-container/google-trends</code>指定基础设施为<code class="fe nt nu nv mw b">docker-container/google-trends</code>块</li><li id="7082" class="nf ng it lc b ld no lg np lj nq ln nr lr ns lv nk nl nm nn bi translated"><code class="fe nt nu nv mw b">-o prefect-docker-deployment</code>指定YAML文件的名称为<code class="fe nt nu nv mw b">prefect-docker-deployment.yaml</code></li></ul><p id="034e" class="pw-post-body-paragraph la lb it lc b ld mm ju lf lg mn jx li lj mo ll lm ln mp lp lq lr mq lt lu lv im bi translated">运行该命令后，您应该会看到以下输出:</p><figure class="lx ly lz ma gt mb"><div class="bz fp l di"><div class="ny nz l"/></div></figure><p id="2668" class="pw-post-body-paragraph la lb it lc b ld mm ju lf lg mn jx li lj mo ll lm ln mp lp lq lr mq lt lu lv im bi translated">新部署将出现在“部署”选项卡下。</p><figure class="lx ly lz ma gt mb gh gi paragraph-image"><div role="button" tabindex="0" class="mc md di me bf mf"><div class="gh gi pa"><img src="../Images/4cc63c0063367fa8efb710a9a9ef17f0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-ZtIz9rsYCu_9YcSlNzTqw.png"/></div></div><p class="mi mj gj gh gi mk ml bd b be z dk translated">作者图片</p></figure><p id="c46b" class="pw-post-body-paragraph la lb it lc b ld mm ju lf lg mn jx li lj mo ll lm ln mp lp lq lr mq lt lu lv im bi translated">要查看有关部署的更多详细信息，请单击该部署。</p><figure class="lx ly lz ma gt mb gh gi paragraph-image"><div role="button" tabindex="0" class="mc md di me bf mf"><div class="gh gi pb"><img src="../Images/a00cb8bbe6ee811ec08c0be81b2f71b6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ZD5ZhahF7G3p7Pb1F7UXRw.png"/></div></div><p class="mi mj gj gh gi mk ml bd b be z dk translated">作者图片</p></figure><h1 id="1acc" class="ki kj it bd kk kl km kn ko kp kq kr ks jz kt ka ku kc kv kd kw kf kx kg ky kz bi translated">运行部署</h1><p id="afef" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">为了从这个部署执行流运行，启动一个代理从<code class="fe nt nu nv mw b">test</code>工作队列中提取工作:</p><pre class="lx ly lz ma gt mv mw mx my aw mz bi"><span id="1772" class="na kj it mw b gy nb nc l nd ne">prefect agent start -q 'test'</span></pre><p id="2837" class="pw-post-body-paragraph la lb it lc b ld mm ju lf lg mn jx li lj mo ll lm ln mp lp lq lr mq lt lu lv im bi translated">输出:</p><figure class="lx ly lz ma gt mb"><div class="bz fp l di"><div class="ny nz l"/></div></figure><p id="0598" class="pw-post-body-paragraph la lb it lc b ld mm ju lf lg mn jx li lj mo ll lm ln mp lp lq lr mq lt lu lv im bi translated">接下来，单击<code class="fe nt nu nv mw b">google-trends-gh-docker</code>部署中的<code class="fe nt nu nv mw b">Run</code>按钮，并选择<code class="fe nt nu nv mw b">Now with defaults</code>以使用默认参数运行部署。</p><figure class="lx ly lz ma gt mb gh gi paragraph-image"><div role="button" tabindex="0" class="mc md di me bf mf"><div class="gh gi pc"><img src="../Images/7cb62ea22fb0054df4b43922fc035416.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*CCQQKq2L59uOxQ7ePEskQQ.png"/></div></div><p class="mi mj gj gh gi mk ml bd b be z dk translated">作者图片</p></figure><p id="7541" class="pw-post-body-paragraph la lb it lc b ld mm ju lf lg mn jx li lj mo ll lm ln mp lp lq lr mq lt lu lv im bi translated">您应该在代理启动的终端上看到以下输出。</p><figure class="lx ly lz ma gt mb"><div class="bz fp l di"><div class="ny nz l"/></div></figure><p id="ef1e" class="pw-post-body-paragraph la lb it lc b ld mm ju lf lg mn jx li lj mo ll lm ln mp lp lq lr mq lt lu lv im bi translated">单击输出末尾的Datapane链接后，您将看到以下报告:</p><figure class="lx ly lz ma gt mb gh gi paragraph-image"><div role="button" tabindex="0" class="mc md di me bf mf"><div class="gh gi nx"><img src="../Images/87f128f78b85f20ddd4d9315711d9631.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*zthqhw9gUC6fyWKMSUhJuQ.gif"/></div></div><p class="mi mj gj gh gi mk ml bd b be z dk translated"><a class="ae mu" href="https://datapane.com/reports/dA9oEY7/covid-report/" rel="noopener ugc nofollow" target="_blank">报告链接</a></p></figure><h1 id="c7aa" class="ki kj it bd kk kl km kn ko kp kq kr ks jz kt ka ku kc kv kd kw kf kx kg ky kz bi translated">使用自定义参数运行部署</h1><p id="6639" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">你可能会对Google Trends上关键字<code class="fe nt nu nv mw b">TikTok</code>的统计数据感兴趣，而不是COVID。通过点击<code class="fe nt nu nv mw b">Run</code>按钮下的<code class="fe nt nu nv mw b">Custom</code>，Prefect可以很容易地使用自定义参数运行部署。</p><figure class="lx ly lz ma gt mb gh gi paragraph-image"><div role="button" tabindex="0" class="mc md di me bf mf"><div class="gh gi pd"><img src="../Images/aa41cfb5135c5642537665f899e8ae76.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mAlelgq-V8NVI_LcK9Xzfg.png"/></div></div><p class="mi mj gj gh gi mk ml bd b be z dk translated">作者图片</p></figure><p id="b49d" class="pw-post-body-paragraph la lb it lc b ld mm ju lf lg mn jx li lj mo ll lm ln mp lp lq lr mq lt lu lv im bi translated">以下是我的自定义配置:</p><figure class="lx ly lz ma gt mb gh gi paragraph-image"><div role="button" tabindex="0" class="mc md di me bf mf"><div class="gh gi ow"><img src="../Images/1c29b16f79bd77776cc9f166523b5129.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4lGP99mbeUbQjsgtWk4DKQ.png"/></div></div><p class="mi mj gj gh gi mk ml bd b be z dk translated">作者图片</p></figure><p id="7475" class="pw-post-body-paragraph la lb it lc b ld mm ju lf lg mn jx li lj mo ll lm ln mp lp lq lr mq lt lu lv im bi translated">流程运行完成后，将会为您创建一个新的报告！</p><figure class="lx ly lz ma gt mb gh gi paragraph-image"><div role="button" tabindex="0" class="mc md di me bf mf"><div class="gh gi pe"><img src="../Images/8ffbdefccbfc5fa6b690ecd937e085ef.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*7aksv_nFCtW32JbXGzlWiA.gif"/></div></div><p class="mi mj gj gh gi mk ml bd b be z dk translated"><a class="ae mu" href="https://datapane.com/reports/0kzdW23/tiktok-report/" rel="noopener ugc nofollow" target="_blank">链接到报告</a></p></figure><h1 id="6b3a" class="ki kj it bd kk kl km kn ko kp kq kr ks jz kt ka ku kc kv kd kw kf kx kg ky kz bi translated">向部署添加时间表</h1><p id="96d8" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">您还可以通过单击部署中的<code class="fe nt nu nv mw b">Edit</code>按钮，然后单击Scheduling部分下的<code class="fe nt nu nv mw b">Add</code>按钮，向部署添加一个时间表。</p><figure class="lx ly lz ma gt mb gh gi paragraph-image"><div role="button" tabindex="0" class="mc md di me bf mf"><div class="gh gi pf"><img src="../Images/f6fe2afb118fe7baa79fa3c2d94d2746.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*m7wBHtMnefmhlxbaCgkFIw.png"/></div></div><p class="mi mj gj gh gi mk ml bd b be z dk translated">作者图片</p></figure><figure class="lx ly lz ma gt mb gh gi paragraph-image"><div class="gh gi pg"><img src="../Images/f6fad7e15addae9f2d68357f012f75e5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1062/format:webp/1*JHeolGcO7A49jrYHNaVDWQ.png"/></div><p class="mi mj gj gh gi mk ml bd b be z dk translated">作者图片</p></figure><p id="ad7e" class="pw-post-body-paragraph la lb it lc b ld mm ju lf lg mn jx li lj mo ll lm ln mp lp lq lr mq lt lu lv im bi translated">提督支持三种类型的时间表:<a class="ae mu" href="https://docs.prefect.io/concepts/schedules/#cron" rel="noopener ugc nofollow" target="_blank"> Cron </a>、<a class="ae mu" href="https://docs.prefect.io/concepts/schedules/#interval" rel="noopener ugc nofollow" target="_blank"> Interval </a>和<a class="ae mu" href="https://docs.prefect.io/concepts/schedules/#rrules" rel="noopener ugc nofollow" target="_blank"> RRule </a>。我们将使用Cron来安排在周日上午12:00运行部署。</p><figure class="lx ly lz ma gt mb gh gi paragraph-image"><div role="button" tabindex="0" class="mc md di me bf mf"><div class="gh gi ph"><img src="../Images/ba3e15f9af17fc6b634383b8401d2488.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*osGpWQlsdnb3WA7z_5pUvQ.png"/></div></div><p class="mi mj gj gh gi mk ml bd b be z dk translated">作者图片</p></figure><h1 id="c8a5" class="ki kj it bd kk kl km kn ko kp kq kr ks jz kt ka ku kc kv kd kw kf kx kg ky kz bi translated">下一步</h1><p id="f67d" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">恭喜你！您刚刚学习了如何使用Prefect将工作流代码存储在GitHub中，并在Docker容器中运行管道。我希望这篇文章能给你自动化你自己的工作流所需要的知识。</p><p id="dc04" class="pw-post-body-paragraph la lb it lc b ld mm ju lf lg mn jx li lj mo ll lm ln mp lp lq lr mq lt lu lv im bi translated">随意发挥，并在这里叉这篇文章的源代码:</p><div class="pi pj gp gr pk pl"><a href="https://github.com/khuyentran1401/prefect-docker" rel="noopener  ugc nofollow" target="_blank"><div class="pm ab fo"><div class="pn ab po cl cj pp"><h2 class="bd iu gy z fp pq fr fs pr fu fw is bi translated">GitHub-khuyentran 1401/prefect-docker:演示如何在Docker中使用Prefect</h2><div class="ps l"><h3 class="bd b gy z fp pq fr fs pr fu fw dk translated">此时您不能执行该操作。您已使用另一个标签页或窗口登录。您已在另一个选项卡中注销，或者…</h3></div><div class="pt l"><p class="bd b dl z fp pq fr fs pr fu fw dk translated">github.com</p></div></div><div class="pu l"><div class="pv l pw px py pu pz mg pl"/></div></div></a></div></div><div class="ab cl qa qb hx qc" role="separator"><span class="qd bw bk qe qf qg"/><span class="qd bw bk qe qf qg"/><span class="qd bw bk qe qf"/></div><div class="im in io ip iq"><p id="663a" class="pw-post-body-paragraph la lb it lc b ld mm ju lf lg mn jx li lj mo ll lm ln mp lp lq lr mq lt lu lv im bi translated">我喜欢写一些基本的数据科学概念，并尝试不同的数据科学工具。你可以在LinkedIn和Twitter上与我联系。</p><p id="7a98" class="pw-post-body-paragraph la lb it lc b ld mm ju lf lg mn jx li lj mo ll lm ln mp lp lq lr mq lt lu lv im bi translated">如果你想查看我写的所有文章的代码，请点击这里。在Medium上关注我，了解我的最新数据科学文章，例如:</p><div class="pi pj gp gr pk pl"><a href="https://medium.com/the-prefect-blog/orchestrate-your-data-science-project-with-prefect-2-0-4118418fd7ce" rel="noopener follow" target="_blank"><div class="pm ab fo"><div class="pn ab po cl cj pp"><h2 class="bd iu gy z fp pq fr fs pr fu fw is bi translated">使用Prefect 2.0协调您的数据科学项目</h2><div class="ps l"><h3 class="bd b gy z fp pq fr fs pr fu fw dk translated">让您的数据科学管道能够抵御故障</h3></div><div class="pt l"><p class="bd b dl z fp pq fr fs pr fu fw dk translated">medium.com</p></div></div><div class="pu l"><div class="qh l pw px py pu pz mg pl"/></div></div></a></div><div class="pi pj gp gr pk pl"><a rel="noopener follow" target="_blank" href="/4-pre-commit-plugins-to-automate-code-reviewing-and-formatting-in-python-c80c6d2e9f5"><div class="pm ab fo"><div class="pn ab po cl cj pp"><h2 class="bd iu gy z fp pq fr fs pr fu fw is bi translated">4个预提交插件，用于在Python中自动检查和格式化代码</h2><div class="ps l"><h3 class="bd b gy z fp pq fr fs pr fu fw dk translated">使用black、flake8、isort和interrogate编写高质量的代码</h3></div><div class="pt l"><p class="bd b dl z fp pq fr fs pr fu fw dk translated">towardsdatascience.com</p></div></div><div class="pu l"><div class="qi l pw px py pu pz mg pl"/></div></div></a></div><div class="pi pj gp gr pk pl"><a rel="noopener follow" target="_blank" href="/how-to-structure-a-data-science-project-for-readability-and-transparency-360c6716800"><div class="pm ab fo"><div class="pn ab po cl cj pp"><h2 class="bd iu gy z fp pq fr fs pr fu fw is bi translated">如何构建可读性和透明度的数据科学项目</h2><div class="ps l"><h3 class="bd b gy z fp pq fr fs pr fu fw dk translated">以及如何用一行代码创建一个</h3></div><div class="pt l"><p class="bd b dl z fp pq fr fs pr fu fw dk translated">towardsdatascience.com</p></div></div><div class="pu l"><div class="qj l pw px py pu pz mg pl"/></div></div></a></div><div class="pi pj gp gr pk pl"><a rel="noopener follow" target="_blank" href="/pytest-for-data-scientists-2990319e55e6"><div class="pm ab fo"><div class="pn ab po cl cj pp"><h2 class="bd iu gy z fp pq fr fs pr fu fw is bi translated">数据科学家Pytest</h2><div class="ps l"><h3 class="bd b gy z fp pq fr fs pr fu fw dk translated">适用于您的数据科学项目的Pytest综合指南</h3></div><div class="pt l"><p class="bd b dl z fp pq fr fs pr fu fw dk translated">towardsdatascience.com</p></div></div><div class="pu l"><div class="qk l pw px py pu pz mg pl"/></div></div></a></div></div></div>    
</body>
</html>