<html>
<head>
<title>Essential Techniques to Style Pandas DataFrames</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">设计熊猫数据框的基本技巧</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/essential-techniques-to-style-pandas-dataframes-8796c74c9ff3#2022-06-27">https://towardsdatascience.com/essential-techniques-to-style-pandas-dataframes-8796c74c9ff3#2022-06-27</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="87fc" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">如何有效地用表格(包括备忘单)交流数据</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/6d3e6fd255fcc55bf430d1fc40fbb865.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ZHppDK8lRukmO8LQ0nmWHQ.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated"><em class="ky">造型熊猫(作者图片)</em></p></figure><p id="3ce0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在数据分析的最后，你需要决定如何传达你的发现。<strong class="lb iu">当你需要你的听众查找单个的精确值并将它们与其他值进行比较时，表格比图表</strong>更适合于交流数据。然而，表格包含了大量的信息，你的听众通过阅读来处理这些信息，这使得你的听众很难马上理解你的信息。表格的随意设计，如太多的颜色、粗体边框或太多的信息，会额外分散你的观众的注意力。但是，有目的地使用格式和样式可以将观众的注意力引导到表格中最重要的数字上。</p><blockquote class="lv"><p id="fcfa" class="lw lx it bd ly lz ma mb mc md me lu dk translated">有目的地使用格式和样式可以引导你的观众注意到表格中最重要的数字。</p></blockquote><p id="9609" class="pw-post-body-paragraph kz la it lb b lc mf ju le lf mg jx lh li mh lk ll lm mi lo lp lq mj ls lt lu im bi translated">pandas库中的数据帧非常适合在Python中将数据可视化为表格。此外，pandas库提供了通过<code class="fe mk ml mm mn b">style</code>属性格式化和样式化数据帧的方法。因此，本文讨论了对pandas数据帧进行格式化和样式化的基本技术，以便有效地传递数据。</p><p id="1eee" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果您想尝试本文中描述的技术，您可以从我的相关<a class="ae mo" href="https://www.kaggle.com/code/iamleonie/essential-techniques-to-style-pandas-dataframes" rel="noopener ugc nofollow" target="_blank"> Kaggle笔记本</a>下载或派生本文的代码，包括示例数据集。</p><p id="0901" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在本教程中，我们将使用以下小型虚构数据集:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mp"><img src="../Images/bad6914bf0af2d1354af0d2d20a26a93.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ePNGAGunnT_nXQ7-9y_gBg.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">虚构样本数据集的无样式熊猫数据框架(图片作者来自<a class="ae mo" href="https://www.kaggle.com/code/iamleonie/essential-techniques-to-style-pandas-dataframes" rel="noopener ugc nofollow" target="_blank"> Kaggle </a></p></figure><h1 id="c069" class="mq mr it bd ms mt mu mv mw mx my mz na jz nb ka nc kc nd kd ne kf nf kg ng nh bi translated">全局显示选项</h1><p id="abf1" class="pw-post-body-paragraph kz la it lb b lc ni ju le lf nj jx lh li nk lk ll lm nl lo lp lq nm ls lt lu im bi translated">在开始为单个数据帧定制可视化之前，您可以使用<code class="fe mk ml mm mn b">.set_option()</code>方法[1]调整pandas的全局显示行为。您可以处理的两个常见任务是:</p><ul class=""><li id="33b3" class="nn no it lb b lc ld lf lg li np lm nq lq nr lu ns nt nu nv bi translated">显示数据帧的所有列</li><li id="3b28" class="nn no it lb b lc nw lf nx li ny lm nz lq oa lu ns nt nu nv bi translated">调整DataFrame列的宽度。</li></ul><p id="7229" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">当你的数据帧有太多的列时，pandas不会显示所有的列，而是隐藏中间的列。要强制pandas<strong class="lb iu">显示所有列</strong>，您可以设置:</p><pre class="kj kk kl km gt ob mn oc od aw oe bi"><span id="88a7" class="of mr it mn b gy og oh l oi oj">pd.set_option("display.max_columns", None)</span></pre><p id="dd3d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">当您处理长文本时，pandas会截断列中的文本。要通过增加列宽来强制pandas<strong class="lb iu">显示整列内容，您可以设置:</strong></p><pre class="kj kk kl km gt ob mn oc od aw oe bi"><span id="3a09" class="of mr it mn b gy og oh l oi oj">pd.set_option("display.max_colwidth", None)</span></pre><h1 id="691d" class="mq mr it bd ms mt mu mv mw mx my mz na jz nb ka nc kc nd kd ne kf nf kg ng nh bi translated">一般提示</h1><p id="7cfc" class="pw-post-body-paragraph kz la it lb b lc ni ju le lf nj jx lh li nk lk ll lm nl lo lp lq nm ls lt lu im bi translated">DataFrame的<code class="fe mk ml mm mn b">style</code>属性返回一个类<code class="fe mk ml mm mn b">Styler</code>的对象。该类包含各种格式和样式方法。以下提示适用于<code class="fe mk ml mm mn b">Styler</code>对象的所有方法。</p><h1 id="addd" class="mq mr it bd ms mt mu mv mw mx my mz na jz nb ka nc kc nd kd ne kf nf kg ng nh bi translated">多种风格</h1><p id="d4ae" class="pw-post-body-paragraph kz la it lb b lc ni ju le lf nj jx lh li nk lk ll lm nl lo lp lq nm ls lt lu im bi translated">通过将多个方法链接在一起，可以组合多种样式。</p><p id="f98a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">例如<code class="fe mk ml mm mn b">df.style.set_caption(...).format(...).bar(...).set_properties(...)</code></p><h1 id="231f" class="mq mr it bd ms mt mu mv mw mx my mz na jz nb ka nc kc nd kd ne kf nf kg ng nh bi translated">列方式与行方式的样式</h1><p id="644f" class="pw-post-body-paragraph kz la it lb b lc ni ju le lf nj jx lh li nk lk ll lm nl lo lp lq nm ls lt lu im bi translated">默认情况下，样式是按列应用的(<code class="fe mk ml mm mn b">axis = 0</code>)。</p><pre class="kj kk kl km gt ob mn oc od aw oe bi"><span id="1c25" class="of mr it mn b gy og oh l oi oj">df.style.highlight_max() # default is axis = 0</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mp"><img src="../Images/46622406603f7928a47b47d3efbd2373.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*taE7cBuJHZv_kkKQh0czdQ.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">用“轴= 0”突出显示列方向的最大值(图片由作者从<a class="ae mo" href="https://www.kaggle.com/code/iamleonie/essential-techniques-to-style-pandas-dataframes" rel="noopener ugc nofollow" target="_blank"> Kaggle </a>获得)</p></figure><p id="8314" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果您想按行应用样式，请在属性中使用<code class="fe mk ml mm mn b">axis = 1</code>。</p><pre class="kj kk kl km gt ob mn oc od aw oe bi"><span id="2347" class="of mr it mn b gy og oh l oi oj">df.style.highlight_max(axis = 1))</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mp"><img src="../Images/cf2ceb4baff297cdd8f03abdd2d0daf9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*VlLOA-DnnRJWrBrR8o3bOw.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">用“轴= 1”高亮显示行方向的最大值(图片由作者从<a class="ae mo" href="https://www.kaggle.com/code/iamleonie/essential-techniques-to-style-pandas-dataframes" rel="noopener ugc nofollow" target="_blank"> Kaggle </a>获得)</p></figure><h1 id="de38" class="mq mr it bd ms mt mu mv mw mx my mz na jz nb ka nc kc nd kd ne kf nf kg ng nh bi translated">仅设计子集的样式</h1><p id="6c66" class="pw-post-body-paragraph kz la it lb b lc ni ju le lf nj jx lh li nk lk ll lm nl lo lp lq nm ls lt lu im bi translated">默认情况下，样式方法应用于所有列。</p><pre class="kj kk kl km gt ob mn oc od aw oe bi"><span id="f9b0" class="of mr it mn b gy og oh l oi oj">df.style.background_gradient()</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mp"><img src="../Images/4a207fe9e6e34278dcdb9a92421aed11.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*e1wPxldNPZQspRnXXleAew.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">应用于所有列的背景渐变(图片由作者从<a class="ae mo" href="https://www.kaggle.com/code/iamleonie/essential-techniques-to-style-pandas-dataframes" rel="noopener ugc nofollow" target="_blank"> Kaggle </a>获得)</p></figure><p id="f09b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果您想将样式仅应用于一列或一组选定的列，使用<code class="fe mk ml mm mn b">subset</code>参数。</p><pre class="kj kk kl km gt ob mn oc od aw oe bi"><span id="b0a0" class="of mr it mn b gy og oh l oi oj">df.style.background_gradient(subset = ["A", "D"]))</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mp"><img src="../Images/368cc721f9defda88a8eb1fe9c653e24.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*LsMMHzFU28tsy4XrTqD-Xw.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">应用于A列和D列的背景渐变(图片由作者从<a class="ae mo" href="https://www.kaggle.com/code/iamleonie/essential-techniques-to-style-pandas-dataframes" rel="noopener ugc nofollow" target="_blank"> Kaggle </a>获得)</p></figure><h1 id="cc9c" class="mq mr it bd ms mt mu mv mw mx my mz na jz nb ka nc kc nd kd ne kf nf kg ng nh bi translated">格式化</h1><p id="e1d2" class="pw-post-body-paragraph kz la it lb b lc ni ju le lf nj jx lh li nk lk ll lm nl lo lp lq nm ls lt lu im bi translated">在我们开始任何特定的着色之前，让我们先来看看一些基本的格式化技术，让你的数据帧看起来更加完美。</p><h1 id="24bc" class="mq mr it bd ms mt mu mv mw mx my mz na jz nb ka nc kc nd kd ne kf nf kg ng nh bi translated">标题</h1><p id="0267" class="pw-post-body-paragraph kz la it lb b lc ni ju le lf nj jx lh li nk lk ll lm nl lo lp lq nm ls lt lu im bi translated">向表格添加标题对于向受众提供一些背景信息至关重要。您可以使用<code class="fe mk ml mm mn b">.set_caption()</code>方法向数据帧添加标题。</p><pre class="kj kk kl km gt ob mn oc od aw oe bi"><span id="d706" class="of mr it mn b gy og oh l oi oj">df.style.set_caption("Caption Text")</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mp"><img src="../Images/7023d57c87fd1529063c2116e4201564.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_WK7G6Z2SZF3IeuDPYO2HA.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">数据框上方添加的标题(图片由作者从<a class="ae mo" href="https://www.kaggle.com/code/iamleonie/essential-techniques-to-style-pandas-dataframes" rel="noopener ugc nofollow" target="_blank"> Kaggle </a>获得)</p></figure><h1 id="3b4c" class="mq mr it bd ms mt mu mv mw mx my mz na jz nb ka nc kc nd kd ne kf nf kg ng nh bi translated">重命名列</h1><p id="90c2" class="pw-post-body-paragraph kz la it lb b lc ni ju le lf nj jx lh li nk lk ll lm nl lo lp lq nm ls lt lu im bi translated">如果列名是变量名或缩写，您的读者可能不清楚他们正在查看什么数据。为列提供直观的列名，可以支持您的受众对数据的理解。</p><p id="101b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">重命名列有两个选项:</p><ul class=""><li id="ce72" class="nn no it lb b lc ld lf lg li np lm nq lq nr lu ns nt nu nv bi translated">一次重命名所有列</li><li id="ade8" class="nn no it lb b lc nw lf nx li ny lm nz lq oa lu ns nt nu nv bi translated">仅重命名列的子集</li></ul><p id="cb7a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果您稍后需要使用数据帧，创建数据帧的副本仅用于可视化目的可能是有意义的。</p><pre class="kj kk kl km gt ob mn oc od aw oe bi"><span id="edd5" class="of mr it mn b gy og oh l oi oj"># Create a copy of the DataFrame for visualization purposes<br/>df_viz = df.copy()</span></pre><p id="6c65" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">您可以通过更改<code class="fe mk ml mm mn b">columns</code>属性来一次重命名所有列:</p><pre class="kj kk kl km gt ob mn oc od aw oe bi"><span id="000c" class="of mr it mn b gy og oh l oi oj"># Rename all columns<br/>df_viz.columns = ["New Column Name A", <br/>                  "New Column Name B", <br/>                  "New Column Name C", <br/>                  "New Column Name D"]</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mp"><img src="../Images/ee23e26d7cb6c2dcddc2146323d96d95.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*yvTNafOrhj_Y_qnky83PTw.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">重命名DataFrame的所有列(图片作者来自<a class="ae mo" href="https://www.kaggle.com/code/iamleonie/essential-techniques-to-style-pandas-dataframes" rel="noopener ugc nofollow" target="_blank"> Kaggle </a>)</p></figure><p id="b363" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">或者您可以使用 <code class="fe mk ml mm mn b">.rename()</code>方法和一个字典<strong class="lb iu">只重命名列的子集。</strong></p><pre class="kj kk kl km gt ob mn oc od aw oe bi"><span id="690d" class="of mr it mn b gy og oh l oi oj"># Rename selection of columns<br/>df_viz.rename(columns = {"A" : "New Column Name A", <br/>                         "B" : "New Column Name B"}, <br/>              inplace = True)</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mp"><img src="../Images/07c7eeb7cc36ccb86fc7f1afaa08b707.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*QZAlnm7enduqh2-2527TBg.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">仅重命名列的子集(图片由来自<a class="ae mo" href="https://www.kaggle.com/code/iamleonie/essential-techniques-to-style-pandas-dataframes" rel="noopener ugc nofollow" target="_blank"> Kaggle </a>的作者提供)</p></figure><h1 id="b70b" class="mq mr it bd ms mt mu mv mw mx my mz na jz nb ka nc kc nd kd ne kf nf kg ng nh bi translated">隐藏索引</h1><p id="6566" class="pw-post-body-paragraph kz la it lb b lc ni ju le lf nj jx lh li nk lk ll lm nl lo lp lq nm ls lt lu im bi translated">索引是否添加了任何有价值的信息？如果没有，你可以用<code class="fe mk ml mm mn b">.hide_index()</code>的方法隐藏索引。</p><pre class="kj kk kl km gt ob mn oc od aw oe bi"><span id="dc6c" class="of mr it mn b gy og oh l oi oj">df.style.hide_index()</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mp"><img src="../Images/325d10b934c4fcfff099ebc83f2f9dcf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*BVxXfxrtHp4QvIpWk9qWKw.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">隐藏索引(图片作者来自<a class="ae mo" href="https://www.kaggle.com/code/iamleonie/essential-techniques-to-style-pandas-dataframes" rel="noopener ugc nofollow" target="_blank"> Kaggle </a></p></figure><h1 id="25e9" class="mq mr it bd ms mt mu mv mw mx my mz na jz nb ka nc kc nd kd ne kf nf kg ng nh bi translated">格式化列</h1><p id="1342" class="pw-post-body-paragraph kz la it lb b lc ni ju le lf nj jx lh li nk lk ll lm nl lo lp lq nm ls lt lu im bi translated"><strong class="lb iu">添加千位分隔符或截断浮点数</strong>到更少的小数位数可以增加数据帧的可读性。为此，<code class="fe mk ml mm mn b">Styler</code>对象可以区分显示值和实际值。</p><p id="e176" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">通过使用<code class="fe mk ml mm mn b">.format()</code>方法，您可以根据格式规范字符串[3]操作显示值。您甚至可以在数字之前或之后添加一个单位作为格式的一部分。</p><pre class="kj kk kl km gt ob mn oc od aw oe bi"><span id="7be8" class="of mr it mn b gy og oh l oi oj">df.style.format({"A" : "{:,.0f}",<br/>                 "B" : "{:d} $",<br/>                 "C" : "{:.3f}",<br/>                 "D" : "{:.2f}"})</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mp"><img src="../Images/326ba99dd804e24ada46edbe2be31f01.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*pDrtWGpI-83hIgUBrXp-KA.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">使用千位分隔符和自定义浮点数格式化的列(图片来自作者来自<a class="ae mo" href="https://www.kaggle.com/code/iamleonie/essential-techniques-to-style-pandas-dataframes" rel="noopener ugc nofollow" target="_blank"> Kaggle </a></p></figure><p id="bf35" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然而，为了不引起注意，<strong class="lb iu">我建议在列名</strong>中将单位放在方括号中，例如“薪金[$]”。</p><h1 id="8dc7" class="mq mr it bd ms mt mu mv mw mx my mz na jz nb ka nc kc nd kd ne kf nf kg ng nh bi translated">样式属性</h1><p id="a89e" class="pw-post-body-paragraph kz la it lb b lc ni ju le lf nj jx lh li nk lk ll lm nl lo lp lq nm ls lt lu im bi translated">有时，你想做的可能只是通过调整背景和字体颜色来让<strong class="lb iu">突出显示数据框中的一列</strong>。为此，您可以使用<code class="fe mk ml mm mn b">.set_properties()</code>方法调整DataFrame的相关CSS属性，如颜色、字体、边框等。</p><pre class="kj kk kl km gt ob mn oc od aw oe bi"><span id="e44d" class="of mr it mn b gy og oh l oi oj">df.style.set_properties(subset = ["C"],<br/>                        **{"background-color": "lightblue",  <br/>                           "color" : "white",<br/>                           "border" : "0.5px solid white"})</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mp"><img src="../Images/d5202b7996d87467d48753a82820bbff.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*CUY9z_VXqerRUIvHIwkoAQ.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">突出显示的栏(图片由作者从<a class="ae mo" href="https://www.kaggle.com/code/iamleonie/essential-techniques-to-style-pandas-dataframes" rel="noopener ugc nofollow" target="_blank"> Kaggle </a>获得)</p></figure><h1 id="4238" class="mq mr it bd ms mt mu mv mw mx my mz na jz nb ka nc kc nd kd ne kf nf kg ng nh bi translated">内置样式</h1><p id="4cba" class="pw-post-body-paragraph kz la it lb b lc ni ju le lf nj jx lh li nk lk ll lm nl lo lp lq nm ls lt lu im bi translated"><code class="fe mk ml mm mn b">Style</code>类有一些用于常见样式任务的内置方法。</p><h1 id="b282" class="mq mr it bd ms mt mu mv mw mx my mz na jz nb ka nc kc nd kd ne kf nf kg ng nh bi translated">突出</h1><p id="5a46" class="pw-post-body-paragraph kz la it lb b lc ni ju le lf nj jx lh li nk lk ll lm nl lo lp lq nm ls lt lu im bi translated">突出显示单个单元格是一种简单的方法，可以将观众的注意力引导到您想要展示的内容上。您可能想要突出显示的常见值有最小值、最大值和空值。对于这些情况，您可以使用各自的内置方法。</p><p id="546d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">您可以使用参数<code class="fe mk ml mm mn b">color</code>调整高亮颜色，以进行最小和最大高亮显示，使用参数<code class="fe mk ml mm mn b">nullcolor</code>调整零高亮显示。</p><pre class="kj kk kl km gt ob mn oc od aw oe bi"><span id="e29b" class="of mr it mn b gy og oh l oi oj">df.style.highlight_null(null_color = "yellow")</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mp"><img src="../Images/ba93169d215ddd79b10891f48e0ad820.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*q6xh4_M16vOd8qVFC391Og.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">突出显示的空值(图片来自作者来自<a class="ae mo" href="https://www.kaggle.com/code/iamleonie/essential-techniques-to-style-pandas-dataframes" rel="noopener ugc nofollow" target="_blank"> Kaggle </a></p></figure><p id="e978" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果您想要突出显示最小值和最大值，可以通过将两个函数链接在一起来实现。</p><pre class="kj kk kl km gt ob mn oc od aw oe bi"><span id="e517" class="of mr it mn b gy og oh l oi oj">df.style.highlight_min(color = "red")\<br/>        .highlight_max(color = "green")</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mp"><img src="../Images/014d07f26dd415b9f913df0c9a5dcee4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wuHicX754HyHy71A9ZtYRg.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">突出显示的最小值和最大值(图片由作者从<a class="ae mo" href="https://www.kaggle.com/code/iamleonie/essential-techniques-to-style-pandas-dataframes" rel="noopener ugc nofollow" target="_blank"> Kaggle </a>获得)</p></figure><h1 id="f529" class="mq mr it bd ms mt mu mv mw mx my mz na jz nb ka nc kc nd kd ne kf nf kg ng nh bi translated">梯度</h1><p id="9a9c" class="pw-post-body-paragraph kz la it lb b lc ni ju le lf nj jx lh li nk lk ll lm nl lo lp lq nm ls lt lu im bi translated">添加渐变样式可以帮助读者理解表格、单列或单行中的数值之间的关系。例如，渐变可以指示一个值是大还是小，是正还是负，甚至是好还是坏。</p><p id="3087" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">还有两种技术可以向数据帧添加渐变:</p><ol class=""><li id="873c" class="nn no it lb b lc ld lf lg li np lm nq lq nr lu ok nt nu nv bi translated">您可以将渐变样式应用于文本或</li><li id="7aa8" class="nn no it lb b lc nw lf nx li ny lm nz lq oa lu ok nt nu nv bi translated">您可以将渐变样式应用于背景[2]。</li></ol><p id="6822" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">使用<code class="fe mk ml mm mn b">cmap</code>参数、<code class="fe mk ml mm mn b">vmin</code>和<code class="fe mk ml mm mn b">vmax</code>可以设置渐变的属性。<code class="fe mk ml mm mn b">cmap</code>设置使用的颜色图，<code class="fe mk ml mm mn b">vmin</code>和<code class="fe mk ml mm mn b">vmax</code>设置相关的开始和结束值。</p><p id="abd0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">您可以使用<code class="fe mk ml mm mn b">.text_gradient()</code>方法对文本应用渐变:</p><pre class="kj kk kl km gt ob mn oc od aw oe bi"><span id="83f1" class="of mr it mn b gy og oh l oi oj">df.style.text_gradient(subset = ["D"], <br/>                       cmap = "RdYlGn", <br/>                       vmin = -1, <br/>                       vmax = 1)</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mp"><img src="../Images/c19066bfbffd9157b95068238222cb78.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*L0AgnRpTWjVwHUKmf3X0GQ.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">渐变样式应用于D列的文本(图片由作者从<a class="ae mo" href="https://www.kaggle.com/code/iamleonie/essential-techniques-to-style-pandas-dataframes" rel="noopener ugc nofollow" target="_blank"> Kaggle </a>获得)</p></figure><p id="bb3a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">或者您可以使用<code class="fe mk ml mm mn b">.background_gradient()</code>方法将渐变应用于背景:</p><pre class="kj kk kl km gt ob mn oc od aw oe bi"><span id="1605" class="of mr it mn b gy og oh l oi oj">df.style.background_gradient(subset = ["D"], <br/>                             cmap = "RdYlGn", <br/>                             vmin = -1, <br/>                             vmax = 1)</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mp"><img src="../Images/0efae69f6b726c032b0b9ff926630d4b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3X7W5BKztbJfEGWL-KYfYw.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">应用于D列背景的渐变样式(图片来自<a class="ae mo" href="https://www.kaggle.com/code/iamleonie/essential-techniques-to-style-pandas-dataframes" rel="noopener ugc nofollow" target="_blank"> Kaggle </a>)</p></figure><h1 id="b093" class="mq mr it bd ms mt mu mv mw mx my mz na jz nb ka nc kc nd kd ne kf nf kg ng nh bi translated">酒吧</h1><p id="a9ad" class="pw-post-body-paragraph kz la it lb b lc ni ju le lf nj jx lh li nk lk ll lm nl lo lp lq nm ls lt lu im bi translated">另一种可视化列或行中的关系和顺序的方法是在单元格的背景中绘制线条[2]。</p><p id="f893" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">同样，在数据帧中使用条形有两个基本技巧:</p><ol class=""><li id="4512" class="nn no it lb b lc ld lf lg li np lm nq lq nr lu ok nt nu nv bi translated">直接的应用是使用标准的单色条。</li><li id="a69f" class="nn no it lb b lc nw lf nx li ny lm nz lq oa lu ok nt nu nv bi translated">或者你也可以从中点创建双色条形图。</li></ol><p id="f9bc" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">对于标准条形图，简单使用<code class="fe mk ml mm mn b">.bar()</code>方法如下:</p><pre class="kj kk kl km gt ob mn oc od aw oe bi"><span id="ea64" class="of mr it mn b gy og oh l oi oj">df.style.bar(subset = ["A"], <br/>             color = "lightblue", <br/>             vmin = 0)</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mp"><img src="../Images/44762e2a2b02cef053a77c8fc4c69709.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dXLpaMtHgP_wY-ebfF7eyg.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">添加到A列背景的条(图片由作者从<a class="ae mo" href="https://www.kaggle.com/code/iamleonie/essential-techniques-to-style-pandas-dataframes" rel="noopener ugc nofollow" target="_blank"> Kaggle </a>获得)</p></figure><p id="3e20" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">要创建双色条形图，将校准设置为<code class="fe mk ml mm mn b">mid</code>并定义上下限值的颜色。在使用这种方法时，我建议结合一些边框来增加可读性。</p><pre class="kj kk kl km gt ob mn oc od aw oe bi"><span id="7130" class="of mr it mn b gy og oh l oi oj">df.style.bar(subset = ["D"], <br/>             align = "mid", <br/>             color = ["salmon", "lightgreen"])\<br/>        .set_properties(**{'border': '0.5px solid black'})</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mp"><img src="../Images/c15f9e8d10df278ac3b25979278561c1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bWlBDpkhpksO6CmdUCOnOw.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">添加到D列背景的正值和负值条(图片由作者从<a class="ae mo" href="https://www.kaggle.com/code/iamleonie/essential-techniques-to-style-pandas-dataframes" rel="noopener ugc nofollow" target="_blank"> Kaggle </a>获得)</p></figure><h1 id="3e13" class="mq mr it bd ms mt mu mv mw mx my mz na jz nb ka nc kc nd kd ne kf nf kg ng nh bi translated">自定义样式</h1><p id="8329" class="pw-post-body-paragraph kz la it lb b lc ni ju le lf nj jx lh li nk lk ll lm nl lo lp lq nm ls lt lu im bi translated">如果内置的样式方法不足以满足您的需求，您可以编写自己的样式函数，并将其应用于DataFrame。您可以使用<code class="fe mk ml mm mn b">.applymap()</code>方法应用元素样式，或者使用<code class="fe mk ml mm mn b">.apply()</code>方法[2]应用列或行样式。</p><p id="a7cb" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">一个常见的例子是<strong class="lb iu">用红色显示数据帧的负值</strong>，如下所示:</p><pre class="kj kk kl km gt ob mn oc od aw oe bi"><span id="613d" class="of mr it mn b gy og oh l oi oj">def custom_styling(val):<br/>    color = "red" if val &lt; 0 else "black"<br/>    return f"color: {color}"</span><span id="2937" class="of mr it mn b gy ol oh l oi oj">df.style.applymap(custom_styling)</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mp"><img src="../Images/bc4c83d855cc4ae4a31156debb728a8f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*t_z7RLU68zeNgy8y6YZr9Q.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">用红色突出显示负值(图片由来自<a class="ae mo" href="https://www.kaggle.com/code/iamleonie/essential-techniques-to-style-pandas-dataframes" rel="noopener ugc nofollow" target="_blank"> Kaggle </a>的作者提供)</p></figure><h1 id="d7da" class="mq mr it bd ms mt mu mv mw mx my mz na jz nb ka nc kc nd kd ne kf nf kg ng nh bi translated">导出到Excel</h1><p id="3c79" class="pw-post-body-paragraph kz la it lb b lc ni ju le lf nj jx lh li nk lk ll lm nl lo lp lq nm ls lt lu im bi translated">如果您需要Excel格式的样式化数据帧，您可以<strong class="lb iu">将其导出，包括样式化和格式化</strong>到。xlsx文件[3]。为此，您需要安装openpyxl包。</p><pre class="kj kk kl km gt ob mn oc od aw oe bi"><span id="1e75" class="of mr it mn b gy og oh l oi oj">pip install openpyxl</span></pre><p id="b447" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">要导出数据帧，您可以像往常一样对数据帧应用样式和格式，然后使用<code class="fe mk ml mm mn b">.to_excel()</code>方法。</p><pre class="kj kk kl km gt ob mn oc od aw oe bi"><span id="7cee" class="of mr it mn b gy og oh l oi oj">df.style.background_gradient(subset = ["D"], <br/>                             cmap = "RdYlGn", <br/>                             vmin = -1, <br/>                             vmax = 1)\<br/>        .to_excel("styled.xlsx", engine = "openpyxl")</span></pre><h1 id="79ca" class="mq mr it bd ms mt mu mv mw mx my mz na jz nb ka nc kc nd kd ne kf nf kg ng nh bi translated">结论</h1><p id="96bf" class="pw-post-body-paragraph kz la it lb b lc ni ju le lf nj jx lh li nk lk ll lm nl lo lp lq nm ls lt lu im bi translated">pandas数据框架的<code class="fe mk ml mm mn b">style</code>属性使您能够格式化和设计数据框架，以有效地传达您的数据分析的见解。本文讨论了设置pandas数据帧样式的基本技术，包括如何设置全局显示选项、格式化和定制样式，甚至如何将数据帧导出为Excel格式。在pandas文档中有更多的样式和格式选项。</p><p id="9639" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">为了进行进一步的实验，您可以从我的相关<a class="ae mo" href="https://www.kaggle.com/code/iamleonie/essential-techniques-to-style-pandas-dataframes" rel="noopener ugc nofollow" target="_blank"> Kaggle笔记本</a>中下载或派生本文的代码，包括示例数据集。</p><p id="bdb9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">以下是我在备忘单中总结的所有提示:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi om"><img src="../Images/05f7ee6ec7cfbc4fce8c7fad4ba676a1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*I-0S6V9yHWlFZUlJnIhz9w.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">熊猫数据框架的基本格式和样式技术备忘单(图片由作者提供)。</p></figure></div><div class="ab cl on oo hx op" role="separator"><span class="oq bw bk or os ot"/><span class="oq bw bk or os ot"/><span class="oq bw bk or os"/></div><div class="im in io ip iq"><h1 id="7953" class="mq mr it bd ms mt ou mv mw mx ov mz na jz ow ka nc kc ox kd ne kf oy kg ng nh bi translated">喜欢这个故事吗？</h1><p id="3ba6" class="pw-post-body-paragraph kz la it lb b lc ni ju le lf nj jx lh li nk lk ll lm nl lo lp lq nm ls lt lu im bi translated">要阅读更多来自我和其他作家的故事，请在Medium上注册。报名时可以用我的 <a class="ae mo" href="https://medium.com/@iamleonie/membership" rel="noopener"> <em class="oz">推荐链接</em> </a> <em class="oz">支持我。我将收取佣金，不需要你额外付费。</em></p><div class="pa pb gp gr pc pd"><a href="https://medium.com/@iamleonie/membership" rel="noopener follow" target="_blank"><div class="pe ab fo"><div class="pf ab pg cl cj ph"><h2 class="bd iu gy z fp pi fr fs pj fu fw is bi translated">通过我的推荐链接加入Medium—Leonie Monigatti</h2><div class="pk l"><h3 class="bd b gy z fp pi fr fs pj fu fw dk translated">阅读Leonie Monigatti(以及媒体上成千上万的其他作家)的每一个故事。您的会员费直接…</h3></div><div class="pl l"><p class="bd b dl z fp pi fr fs pj fu fw dk translated">medium.com</p></div></div><div class="pm l"><div class="pn l po pp pq pm pr ks pd"/></div></div></a></div><p id="ae10" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><em class="oz">在</em> <a class="ae mo" href="https://www.linkedin.com/in/804250ab/" rel="noopener ugc nofollow" target="_blank"> <em class="oz"> LinkedIn </em> </a> <em class="oz">和</em> <a class="ae mo" href="https://www.kaggle.com/iamleonie" rel="noopener ugc nofollow" target="_blank"> <em class="oz">上找我Kaggle </em> </a> <em class="oz">！</em></p><h1 id="cadd" class="mq mr it bd ms mt mu mv mw mx my mz na jz nb ka nc kc nd kd ne kf nf kg ng nh bi translated">参考</h1><p id="7065" class="pw-post-body-paragraph kz la it lb b lc ni ju le lf nj jx lh li nk lk ll lm nl lo lp lq nm ls lt lu im bi translated">[1]“熊猫1.4.2文档”，“选项和设置。”pandas.pydata.org。<a class="ae mo" href="https://pandas.pydata.org/docs/user_guide/options.html" rel="noopener ugc nofollow" target="_blank">https://pandas.pydata.org/docs/user_guide/options.html</a>(2022年6月13日访问)</p><p id="010e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">[2]《熊猫1.4.2文档》，《样式》pandas.pydata.org。<a class="ae mo" href="https://pandas.pydata.org/docs/reference/style.html" rel="noopener ugc nofollow" target="_blank">https://pandas.pydata.org/docs/reference/style.html</a>(2022年6月16日访问)</p><p id="bb31" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">[3]“熊猫1.4.2文档化”，“表格可视化。”pandas.pydata.org。<a class="ae mo" href="https://pandas.pydata.org/docs/user_guide/style.html" rel="noopener ugc nofollow" target="_blank">https://pandas.pydata.org/docs/user_guide/style.html</a>(2022年6月16日访问)</p><p id="669b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">[4]“Python”，“string——常见的字符串操作。”python.org。https://docs.python.org/3/library/string.html#formatspec(2022年6月13日访问)</p></div></div>    
</body>
</html>