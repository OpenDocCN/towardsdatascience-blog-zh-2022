<html>
<head>
<title>4 NLP Libraries for Automatic Language Identification of Text Data In Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">4 个 NLP 库，用于 Python 中文本数据的自动语言识别</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/4-nlp-libraries-for-automatic-language-identification-of-text-data-in-python-cbc6bf664774#2022-02-21">https://towardsdatascience.com/4-nlp-libraries-for-automatic-language-identification-of-text-data-in-python-cbc6bf664774#2022-02-21</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="56dd" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">自动语言检测开源库综述</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/4f7e92e1fe253a11ae3b07bf876c6f84.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*ZDtuoCEjNHy-z5dU"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">图片来自<a class="ae ky" href="https://unsplash.com/photos/jhtPCeQ2mMU" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的<a class="ae ky" href="https://unsplash.com/@sonereker" rel="noopener ugc nofollow" target="_blank"> Soner Eker </a></p></figure><h1 id="dfac" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">介绍</h1><p id="6a2c" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">大多数处理文本数据的行业更注重使用数字功能，因为这是处理这些文档的最快方式。在国际层面上，在任何进一步处理之前自动识别文档的基础语言可能是有益的。一个简单的用例可能是公司检测传入文本信息的语言，以便将其路由到相关部门进行处理。</p><p id="0ab3" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">本文旨在提供四个可以执行此类任务的 python 库的概述。</p><h1 id="a5ca" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">语言检测库</h1><p id="8562" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">本节的目标是向您介绍一些用于文本语言检测的库及其实现。所有的源代码都在我的<a class="ae ky" href="https://colab.research.google.com/drive/1ca3IOMXUIlBTMi5KEjAv5hrpgg4zCsA3?usp=sharing" rel="noopener ugc nofollow" target="_blank"> Google colab </a>上。</p><h2 id="fbec" class="ms la it bd lb mt mu dn lf mv mw dp lj ma mx my ll me mz na ln mi nb nc lp nd bi translated">1.LangDetect</h2><p id="de63" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">这个库是 Google 的语言检测库从 Java 到 Python 的直接端口，可以识别 50 多种语言。由 Cybozu Labs，Inc .的 Nakatani Shuyo 开发的<code class="fe ne nf ng nh b">lang_detect</code>有两个主要功能，都将文本作为输入进行分析:</p><ul class=""><li id="b80b" class="ni nj it lt b lu mn lx mo ma nk me nl mi nm mm nn no np nq bi translated"><code class="fe ne nf ng nh b">detect</code>输出对应于所识别语言代码的双字母 ISO 693。</li><li id="0034" class="ni nj it lt b lu nr lx ns ma nt me nu mi nv mm nn no np nq bi translated"><code class="fe ne nf ng nh b">detect_langs</code>输出检测到的所有候选顶级语言及其相应概率得分的列表。</li></ul><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nw nx l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">lang_detect.py</p></figure><p id="8f27" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">在<code class="fe ne nf ng nh b">text</code>变量中，为了加噪音，我故意用法语加了最后一句。</p><pre class="kj kk kl km gt ny nh nz oa aw ob bi"><span id="d75f" class="ms la it nh b gy oc od l oe of">text = """This library is the direct port of Google's language-detection library from Java to Python. <strong class="nh iu">Elle est vraiment éfficace dans la détection de langue</strong>."""</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi og"><img src="../Images/073d0ba283e62d1fddeeaeb6d7763dc3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*RCCNTBer-eR83FNAN5HgLQ.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">第一次案例测试，第一次和第五次执行语言检测(图片由作者提供)</p></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oh"><img src="../Images/accac0a3931032fa44100ee84c3d443e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*43VBsFSmBKc-86hLnGCLNw.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">第二次案例测试，第一次和第四次执行语言检测(图片由作者提供)</p></figure><ul class=""><li id="2976" class="ni nj it lt b lu mn lx mo ma nk me nl mi nm mm nn no np nq bi translated"><strong class="lt iu">测试第一种情况</strong> ( <code class="fe ne nf ng nh b">detect</code>):第一次执行(<strong class="lt iu"> fr </strong>为法语)和第五次执行(<strong class="lt iu"> en </strong>为英语)中确定的语言不相同。</li><li id="0b4e" class="ni nj it lt b lu nr lx ns ma nt me nu mi nv mm nn no np nq bi translated">测试第二种情况 ( <code class="fe ne nf ng nh b">detect_langs</code>):我们得到两种候选语言法语和英语。在第一次执行中，语言是法语的概率得分高。第 4 次执行后，英语的概率变高了。</li></ul><p id="3c07" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">所有这些结果中的不一致都是因为遮光罩下的算法是非确定性的，文本中的噪声越高，不一致性就越高。通过在运行语言检测指令之前将种子设置为:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nw nx l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">fix_non_deterministic.py</p></figure><p id="2fc2" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">由于使用了<code class="fe ne nf ng nh b">DetectorFactor</code>，前面代码的结果总是相同的。这个库即使易于使用，也可能与简单的用例有关。</p><h2 id="2802" class="ms la it bd lb mt mu dn lf mv mw dp lj ma mx my ll me mz na ln mi nb nc lp nd bi translated">2.Spacy-langdetect</h2><p id="413f" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">Spacy 是一个 NLP 库，其功能包括从标记化、命名实体识别到预训练模型的所有内容。Spacy 提出<code class="fe ne nf ng nh b">spacy-langdetect</code> <strong class="lt iu"> </strong>是为了给它的文本处理管道增加语言检测的味道。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nw nx l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">spacy_langdetect.py</p></figure><ul class=""><li id="b1e2" class="ni nj it lt b lu mn lx mo ma nk me nl mi nm mm nn no np nq bi translated"><code class="fe ne nf ng nh b">model</code>可以是任何定制的语言检测器，意味着你自己的预训练模型或来自<a class="ae ky" href="https://spacy.io/models/en" rel="noopener ugc nofollow" target="_blank"> Spacy 模型中心</a>的模型。</li><li id="8978" class="ni nj it lt b lu nr lx ns ma nt me nu mi nv mm nn no np nq bi translated"><code class="fe ne nf ng nh b">LanguageDetector</code>是执行语言检测并在幕后使用<code class="fe ne nf ng nh b">detect_langs</code>功能的类。</li><li id="b458" class="ni nj it lt b lu nr lx ns ma nt me nu mi nv mm nn no np nq bi translated"><code class="fe ne nf ng nh b">name</code>参数设置为<code class="fe ne nf ng nh b">language_detector</code>可以访问管道中的语言检测功能。</li><li id="6b21" class="ni nj it lt b lu nr lx ns ma nt me nu mi nv mm nn no np nq bi translated"><code class="fe ne nf ng nh b">._.language</code>属性对应于包含在文档中检测到的候选语言信息的字典。</li></ul><p id="7b0e" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">下面是关于英文和法文文本都<strong class="lt iu"> <em class="oi">免执照</em> </strong>的结果，分别摘自<a class="ae ky" href="https://www.actuia.com/english/africa-launch-of-the-initiative-for-the-development-of-artificial-intelligence-in-french-speaking-african-countries/" rel="noopener ugc nofollow" target="_blank">actuia.com</a>和<a class="ae ky" href="https://www.jeuneafrique.com/1208966/economie/intelligence-artificielle-la-solution-pour-ameliorer-lacces-au-credit-en-afrique/?utm_source=facebook.com&amp;utm_medium=social&amp;utm_content=jeune_afrique&amp;utm_campaign=post_articles_facebook_28_07_2021&amp;fbclid=IwAR1m5pzxtVZz9uakocmhDaHjVHJ-4ZeSx_HVXX5sk3d40l-NwSYf1ZNULts" rel="noopener ugc nofollow" target="_blank">jeuneafrique.com</a>。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nw nx l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">spacy_langdetect_examples.py</p></figure><ul class=""><li id="6c9e" class="ni nj it lt b lu mn lx mo ma nk me nl mi nm mm nn no np nq bi translated"><strong class="lt iu"> <em class="oi">第 14 行</em> </strong>显示{'language': 'en '，' score': 0.9999963977276909}，几乎 100%确信文本是英文。</li><li id="aac6" class="ni nj it lt b lu nr lx ns ma nt me nu mi nv mm nn no np nq bi translated"><strong class="lt iu"> <em class="oi">第 17 行</em> </strong>显示{'language': 'fr '，' score': 0.9999963767662121}，几乎 100%确信文本是法语。</li></ul><h2 id="ed4c" class="ms la it bd lb mt mu dn lf mv mw dp lj ma mx my ll me mz na ln mi nb nc lp nd bi translated">3.快速文本</h2><p id="4997" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">这个库是由脸书人工智能研究实验室开发的。它是为工业化用例而不是研究而构建的，这使它成为一个快速、准确、轻便的工具，内存不到 1MB，能够识别 170 多种语言。它带有以下两个版本的预训练模型。</p><ul class=""><li id="14ef" class="ni nj it lt b lu mn lx mo ma nk me nl mi nm mm nn no np nq bi translated">这个更快，也更精确，但是可能有点大(大小= 126MB)</li><li id="76e4" class="ni nj it lt b lu nr lx ns ma nt me nu mi nv mm nn no np nq bi translated"><a class="ae ky" href="https://dl.fbaipublicfiles.com/fasttext/supervised-models/lid.176.ftz" rel="noopener ugc nofollow" target="_blank"> lid.176.ftz </a>:这是模型的压缩版本，文件大小为 917kB</li></ul><p id="62a7" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">让我们关注第一个模型(<code class="fe ne nf ng nh b">lid.176.bin</code>)，因为它是最准确的。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nw nx l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">fasttext_lang_detect.py</p></figure><ul class=""><li id="2afd" class="ni nj it lt b lu mn lx mo ma nk me nl mi nm mm nn no np nq bi translated"><code class="fe ne nf ng nh b">ft_model</code>是从我的<strong class="lt iu"><em class="oi">pretrained _ model</em></strong>文件夹中加载的<strong class="lt iu"> fasttext </strong>预训练模型的实例。</li><li id="07b9" class="ni nj it lt b lu nr lx ns ma nt me nu mi nv mm nn no np nq bi translated"><code class="fe ne nf ng nh b">.replace("\n", " ")</code>习惯于<code class="fe ne nf ng nh b">fasttext</code>不抛出错误。</li></ul><p id="f0a2" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">下面是<strong class="lt iu"> <em class="oi">第 16 行</em> </strong>和<strong class="lt iu"> <em class="oi">第 17 行</em> </strong>中先前打印语句的输出。['__label__en']表示第一个文本被预测为 89%可信的英文文本。['__label__fr']表示以 99%的置信度检测到第二个是法语。</p><pre class="kj kk kl km gt ny nh nz oa aw ob bi"><span id="0c45" class="ms la it nh b gy oc od l oe of">([['__label__en']], [array([0.8957091], dtype=float32)])<br/>([['__label__fr']], [array([0.99077034], dtype=float32)])</span></pre><h2 id="d07b" class="ms la it bd lb mt mu dn lf mv mw dp lj ma mx my ll me mz na ln mi nb nc lp nd bi translated">4.gcld3</h2><p id="bff3" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">这是 Google Compact 语言检测器 v3，是 Google 开发的神经网络语言识别库。在撰写本文时，这个预先训练的模型支持 107 种语言，并具有两个主要的语言识别功能。</p><ul class=""><li id="de3a" class="ni nj it lt b lu mn lx mo ma nk me nl mi nm mm nn no np nq bi translated"><code class="fe ne nf ng nh b">FindLanguage</code>对应<strong class="lt iu"> <em class="oi">第一特征</em> </strong>，并连同置信度得分一起返回被检测语言对应的<a class="ae ky" href="https://github.com/google/cld3#supported-languages" rel="noopener ugc nofollow" target="_blank"> BCP-47 风格码</a>。</li><li id="450b" class="ni nj it lt b lu nr lx ns ma nt me nu mi nv mm nn no np nq bi translated"><code class="fe ne nf ng nh b">FindTopNMostFreqLangs</code>对应于<strong class="lt iu"> <em class="oi">第二特征</em> </strong>，其替代地生成顶级候选语言(使用<code class="fe ne nf ng nh b">num_langs</code>参数)及其置信度得分。</li></ul><p id="7e3d" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">在使用这些特性之前，<strong class="lt iu"> <em class="oi">我们需要</em> </strong> <strong class="lt iu"> <em class="oi">来实例化一个检测器</em> </strong>，在推理过程中需要以下两个参数。</p><ul class=""><li id="e275" class="ni nj it lt b lu mn lx mo ma nk me nl mi nm mm nn no np nq bi translated"><code class="fe ne nf ng nh b">min_num_bytes</code>最小字节数。</li><li id="b9ba" class="ni nj it lt b lu nr lx ns ma nt me nu mi nv mm nn no np nq bi translated"><code class="fe ne nf ng nh b">max_num_bytes</code>最大字节数。</li></ul><p id="ff2d" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated"><strong class="lt iu">注意</strong>:请记住，强烈建议在实现这个库时使用虚拟环境。</p><p id="ca01" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">下面是这两个特性的实现。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nw nx l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">gcld3_lang_detect.py</p></figure><ul class=""><li id="f0bd" class="ni nj it lt b lu mn lx mo ma nk me nl mi nm mm nn no np nq bi translated"><strong class="lt iu">第一个特征的结果</strong></li></ul><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nw nx l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">功能 _1.py</p></figure><pre class="kj kk kl km gt ny nh nz oa aw ob bi"><span id="c312" class="ms la it nh b gy oc od l oe of">{'language': 'en', 'probability': 0.9998331069946289}<br/>{'language': 'fr', 'probability': 0.9999961853027344}</span></pre><ul class=""><li id="a5f2" class="ni nj it lt b lu mn lx mo ma nk me nl mi nm mm nn no np nq bi translated"><strong class="lt iu">第二个特征的结果</strong></li></ul><p id="2098" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">我将<code class="fe ne nf ng nh b">num_langs</code>初始化为两个，因为我想为每个文本确定前两种语言。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nw nx l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">功能 _2.py</p></figure><pre class="kj kk kl km gt ny nh nz oa aw ob bi"><span id="027f" class="ms la it nh b gy oc od l oe of">[{'language': 'en', 'probability': 0.9998331069946289}, {'language': 'und', 'probability': 0.0}]<br/>[{'language': 'fr', 'probability': 0.9999961853027344}, {'language': 'und', 'probability': 0.0}]</span></pre><p id="1b56" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">我们注意到结果中的<code class="fe ne nf ng nh b">und</code>语言类型，因为没有发现第二种语言，尽管我们想要前 2 种。当第一语言被确定为具有非常高的置信度得分时，这种情况经常发生，在我们的例子中几乎是 100%。</p><h2 id="c5b8" class="ms la it bd lb mt mu dn lf mv mw dp lj ma mx my ll me mz na ln mi nb nc lp nd bi translated">感谢阅读！</h2><p id="d808" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">祝贺您走到这一步，我希望您喜欢阅读这篇文章，并且它让您清楚地看到了使用预训练模型进行自动语言检测的好处。请在下面找到更多资源来帮助您进一步学习。</p><p id="5987" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">不要犹豫在 LinkedIn<a class="ae ky" href="https://www.linkedin.com/in/zoumana-keita/" rel="noopener ugc nofollow" target="_blank">上添加我或者在 YouTube</a><a class="ae ky" href="https://www.youtube.com/channel/UC9xKdy8cz6ZuJU5FTNtM_pQ" rel="noopener ugc nofollow" target="_blank">和 Twitter </a>上关注我。讨论人工智能，人工智能，数据科学，自然语言处理的东西总是令人愉快的！</p><p id="bdc3" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated"><a class="ae ky" href="https://colab.research.google.com/drive/1ca3IOMXUIlBTMi5KEjAv5hrpgg4zCsA3?usp=sharing" rel="noopener ugc nofollow" target="_blank">Google colab 上文章的源代码</a></p><p id="d2e2" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated"><a class="ae ky" href="https://spacy.io/universe/project/spacy-langdetect" rel="noopener ugc nofollow" target="_blank">空间-语言检测</a></p><p id="c4f5" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">谷歌的 langdetect </p><p id="e557" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated"><a class="ae ky" href="https://fasttext.cc/blog/2017/10/02/blog-post.html" rel="noopener ugc nofollow" target="_blank">快速文本语言识别</a></p><p id="a10b" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated"><a class="ae ky" rel="noopener" target="_blank" href="/introduction-to-googles-compact-language-detector-v3-in-python-b6887101ae47">python 中 Google 的紧凑型语言检测器 v3 介绍</a></p><p id="901d" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">再见🏃🏾</p></div></div>    
</body>
</html>