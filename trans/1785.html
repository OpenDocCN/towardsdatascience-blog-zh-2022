<html>
<head>
<title>Dissecting the Birthday Paradox</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">剖析生日悖论</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/dissecting-the-birthday-paradox-c26754aff6b5#2022-04-26">https://towardsdatascience.com/dissecting-the-birthday-paradox-c26754aff6b5#2022-04-26</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="5481" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">统计学并不总是很直观</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/60825b45e2c2175f768d12a88b185550.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*OiVi_9j2bjnZnKFx"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">照片由<a class="ae kv" href="https://unsplash.com/@adigold1?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">阿迪·戈尔茨坦</a>在<a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a></p></figure><h1 id="0aeb" class="kw kx iq bd ky kz la lb lc ld le lf lg jw lh jx li jz lj ka lk kc ll kd lm ln bi translated">介绍</h1><p id="13e3" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">试着回答这个问题，但不要实际算出来。</p><blockquote class="mk"><p id="5a04" class="ml mm iq bd mn mo mp mq mr ms mt mj dk translated">你需要多少人在一个房间里来确保有50%的机会让两个人过同一天生日？</p></blockquote><p id="0201" class="pw-post-body-paragraph lo lp iq lq b lr mu jr lt lu mv ju lw lx mw lz ma mb mx md me mf my mh mi mj ij bi translated">你会纯粹凭直觉回答什么？合理的答案应该是什么样的？50个人？100?183?365?</p><p id="581c" class="pw-post-body-paragraph lo lp iq lq b lr mz jr lt lu na ju lw lx nb lz ma mb nc md me mf nd mh mi mj ij bi translated">当我遇到这个问题时，我猜测答案是大约70-80人。之后我算了一下，答案让我大吃一惊。</p><p id="8422" class="pw-post-body-paragraph lo lp iq lq b lr mz jr lt lu na ju lw lx nb lz ma mb nc md me mf nd mh mi mj ij bi translated">显然只需要23个人！</p><p id="20e5" class="pw-post-body-paragraph lo lp iq lq b lr mz jr lt lu na ju lw lx nb lz ma mb nc md me mf nd mh mi mj ij bi translated">让我们证明这一点。</p></div><div class="ab cl ne nf hu ng" role="separator"><span class="nh bw bk ni nj nk"/><span class="nh bw bk ni nj nk"/><span class="nh bw bk ni nj"/></div><div class="ij ik il im in"><h2 id="90a0" class="nl kx iq bd ky nm nn dn lc no np dp lg lx nq nr li mb ns nt lk mf nu nv lm nw bi translated">目录</h2><pre class="kg kh ki kj gt nx ny nz oa aw ob bi"><span id="cfce" class="nl kx iq ny b gy oc od l oe of">* The Math -- proving it mathematically<br/>* Exploring Real World Data -- checking our theory<br/>* Why this isn't so intuitive<br/>* Code and References</span></pre></div><div class="ab cl ne nf hu ng" role="separator"><span class="nh bw bk ni nj nk"/><span class="nh bw bk ni nj nk"/><span class="nh bw bk ni nj"/></div><div class="ij ik il im in"><h1 id="474c" class="kw kx iq bd ky kz og lb lc ld oh lf lg jw oi jx li jz oj ka lk kc ok kd lm ln bi translated">数学</h1><h2 id="1b42" class="nl kx iq bd ky nm nn dn lc no np dp lg lx nq nr li mb ns nt lk mf nu nv lm nw bi translated">假设</h2><p id="37f8" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">我们将做以下假设来简化问题:</p><ul class=""><li id="9ed3" class="ol om iq lq b lr mz lu na lx on mb oo mf op mj oq or os ot bi translated">没有闰年</li><li id="a9b0" class="ol om iq lq b lr ou lu ov lx ow mb ox mf oy mj oq or os ot bi translated">每一天都同样可能是一个潜在的生日</li></ul><p id="82dc" class="pw-post-body-paragraph lo lp iq lq b lr mz jr lt lu na ju lw lx nb lz ma mb nc md me mf nd mh mi mj ij bi translated">第一个假设让我们假设有365个可能的出生日期。</p><p id="adf9" class="pw-post-body-paragraph lo lp iq lq b lr mz jr lt lu na ju lw lx nb lz ma mb nc md me mf nd mh mi mj ij bi translated"><strong class="lq ir">第二个假设</strong>意味着我们正在解决最坏的情况，因为任何不平衡都会使两个日期更有可能冲突(比如，两个生日在同一天)。</p><h2 id="50c0" class="nl kx iq bd ky nm nn dn lc no np dp lg lx nq nr li mb ns nt lk mf nu nv lm nw bi translated">微不足道的案子</h2><p id="99a4" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">假设我们正好有两个人。他们同一天生日的概率有多大？</p><p id="cc35" class="pw-post-body-paragraph lo lp iq lq b lr mz jr lt lu na ju lw lx nb lz ma mb nc md me mf nd mh mi mj ij bi translated">第一个人可以在一年中的任何一天过生日，但是第二个人需要和第一个人在同一天过生日。</p><p id="8f91" class="pw-post-body-paragraph lo lp iq lq b lr mz jr lt lu na ju lw lx nb lz ma mb nc md me mf nd mh mi mj ij bi translated">所以概率可以这样算出来:</p><pre class="kg kh ki kj gt nx ny nz oa aw ob bi"><span id="82a7" class="nl kx iq ny b gy oc od l oe of">P_2 = number of possible days for the 1st person * number of possibilities for the 2nd Person / total number of possibilities.</span></pre><p id="cb33" class="pw-post-body-paragraph lo lp iq lq b lr mz jr lt lu na ju lw lx nb lz ma mb nc md me mf nd mh mi mj ij bi translated">这相当于:</p><pre class="kg kh ki kj gt nx ny nz oa aw ob bi"><span id="901f" class="nl kx iq ny b gy oc od l oe of">P_2 = 365 * 1 / 365 * 365 = 1/365</span></pre><p id="a30c" class="pw-post-body-paragraph lo lp iq lq b lr mz jr lt lu na ju lw lx nb lz ma mb nc md me mf nd mh mi mj ij bi translated">这只是0.3%左右。</p><h2 id="782b" class="nl kx iq bd ky nm nn dn lc no np dp lg lx nq nr li mb ns nt lk mf nu nv lm nw bi translated"><strong class="ak">对于人数较多的人</strong></h2><p id="1f1f" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">当我们有更多的人要考虑时，比如说，5个人，首先计算没有生日匹配的概率，然后找到这个概率的补集就更容易了。</p><p id="2e8d" class="pw-post-body-paragraph lo lp iq lq b lr mz jr lt lu na ju lw lx nb lz ma mb nc md me mf nd mh mi mj ij bi translated">对于5个人:</p><ul class=""><li id="a9f3" class="ol om iq lq b lr mz lu na lx on mb oo mf op mj oq or os ot bi translated">第一个人可以有365个生日中的任何一个——365种方式</li><li id="06b5" class="ol om iq lq b lr ou lu ov lx ow mb ox mf oy mj oq or os ot bi translated">第二个人可以拥有任何东西，除了第一个人的生日——364种方式。</li><li id="e0b0" class="ol om iq lq b lr ou lu ov lx ow mb ox mf oy mj oq or os ot bi translated">类似地，第三、第四和第五个人有363、362和361个可能的生日</li><li id="cab7" class="ol om iq lq b lr ou lu ov lx ow mb ox mf oy mj oq or os ot bi translated">我们将它们相乘，然后除以可能日期的总数——365乘以365..(5次)—^ 5区365号</li><li id="6697" class="ol om iq lq b lr ou lu ov lx ow mb ox mf oy mj oq or os ot bi translated">我们从1中减去这个结果，得到匹配的概率，因为我们刚刚计算的是没有匹配</li></ul><p id="3ce9" class="pw-post-body-paragraph lo lp iq lq b lr mz jr lt lu na ju lw lx nb lz ma mb nc md me mf nd mh mi mj ij bi translated">我们在这里的结果是:</p><pre class="kg kh ki kj gt nx ny nz oa aw ob bi"><span id="8f17" class="nl kx iq ny b gy oc od l oe of">P(A) = 1 - 365 * 364 * 363 * 362 * 361 / 365 ^ 5<br/>     = 0.027</span></pre><h2 id="df41" class="nl kx iq bd ky nm nn dn lc no np dp lg lx nq nr li mb ns nt lk mf nu nv lm nw bi translated">通解</h2><p id="f3a2" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">让我们为一群人解决这个问题。</p><p id="dd55" class="pw-post-body-paragraph lo lp iq lq b lr mz jr lt lu na ju lw lx nb lz ma mb nc md me mf nd mh mi mj ij bi translated">按照与上面相同的逻辑，我们将首先计算补数，然后从<code class="fe oz pa pb ny b">1</code>中减去它，以获得我们想要的答案。第一个人可以在任何一天生日— <code class="fe oz pa pb ny b">365</code>可能性。除了第一个人的生日之外，第二个人可以在任何一天过生日——<code class="fe oz pa pb ny b">364</code>可能性，等等。</p><pre class="kg kh ki kj gt nx ny nz oa aw ob bi"><span id="9729" class="nl kx iq ny b gy oc od l oe of">P_n(A)' = 365*364*363*...(365-(n-1)) / 365 ^ n</span></pre><p id="28db" class="pw-post-body-paragraph lo lp iq lq b lr mz jr lt lu na ju lw lx nb lz ma mb nc md me mf nd mh mi mj ij bi translated">从鸽笼原理(甚至通过直观的方法)，对于<code class="fe oz pa pb ny b">n &gt; 365</code>、<code class="fe oz pa pb ny b">P_n == 1</code>。</p><p id="a792" class="pw-post-body-paragraph lo lp iq lq b lr mz jr lt lu na ju lw lx nb lz ma mb nc md me mf nd mh mi mj ij bi translated">这可以像这样进一步简化。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi pc"><img src="../Images/b634b37ac93ae902e38746bded65391d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*lrebycAUBXUV4ia6qzgNWw.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">计算互补概率—维基百科</p></figure><pre class="kg kh ki kj gt nx ny nz oa aw ob bi"><span id="879f" class="nl kx iq ny b gy oc od l oe of">P_n(A)' = (365 p n) / 365 ^ n</span></pre><p id="df37" class="pw-post-body-paragraph lo lp iq lq b lr mz jr lt lu na ju lw lx nb lz ma mb nc md me mf nd mh mi mj ij bi translated">其中<code class="fe oz pa pb ny b">(365 p n)</code>代表总数<code class="fe oz pa pb ny b">365</code>中<code class="fe oz pa pb ny b">n</code>项的排列数。</p><p id="48da" class="pw-post-body-paragraph lo lp iq lq b lr mz jr lt lu na ju lw lx nb lz ma mb nc md me mf nd mh mi mj ij bi translated">因此，为了计算我们实际需要什么，我们有:</p><pre class="kg kh ki kj gt nx ny nz oa aw ob bi"><span id="2801" class="nl kx iq ny b gy oc od l oe of">P_n(A) = 1 - P_n(A)'</span></pre><p id="3be7" class="pw-post-body-paragraph lo lp iq lq b lr mz jr lt lu na ju lw lx nb lz ma mb nc md me mf nd mh mi mj ij bi translated">对于<code class="fe oz pa pb ny b">n = 23</code>，我们得到的刚好超过<code class="fe oz pa pb ny b">50%</code>(准确地说是<code class="fe oz pa pb ny b">50.7%</code>)，这与我们最初的答案一致，即需要23个人才能有<code class="fe oz pa pb ny b">50%</code>的生日匹配机会。</p><h1 id="0c88" class="kw kx iq bd ky kz la lb lc ld le lf lg jw lh jx li jz lj ka lk kc ll kd lm ln bi translated">真实世界的数据</h1><p id="b821" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">现在让我们来看一些真实的数据，看看我们的假设是否足以模拟真实世界的场景。</p><p id="8bb4" class="pw-post-body-paragraph lo lp iq lq b lr mz jr lt lu na ju lw lx nb lz ma mb nc md me mf nd mh mi mj ij bi translated">我们将使用来自<strong class="lq ir">538</strong>的出生日期数据集。它链接在下面的参考文献中。这是在<a class="ae kv" href="http://creativecommons.org/licenses/by/4.0/" rel="noopener ugc nofollow" target="_blank">知识共享署名4.0国际许可</a>下，正如他们的<a class="ae kv" href="https://data.fivethirtyeight.com/" rel="noopener ugc nofollow" target="_blank">网站</a>上提到的。</p><p id="7852" class="pw-post-body-paragraph lo lp iq lq b lr mz jr lt lu na ju lw lx nb lz ma mb nc md me mf nd mh mi mj ij bi translated">数据集是2000年至2014年间的出生频率，看起来像这样。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi pd"><img src="../Images/d34bfa67f0f52b71a0302c895a97edbf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1102/format:webp/1*uoKNkHYlAQbCEWgiEs7kWw.png"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">数据集的几行-按作者分类的图像</p></figure><p id="3aa8" class="pw-post-body-paragraph lo lp iq lq b lr mz jr lt lu na ju lw lx nb lz ma mb nc md me mf nd mh mi mj ij bi translated">一个更广泛的EDA将被添加到附带的笔记本，链接在最后。</p><h2 id="517d" class="nl kx iq bd ky nm nn dn lc no np dp lg lx nq nr li mb ns nt lk mf nu nv lm nw bi translated">预处理</h2><p id="d9b5" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">很难找到如此干净的数据集。我们所要做的就是删除一些列并创建一个日期时间列。</p><pre class="kg kh ki kj gt nx ny nz oa aw ob bi"><span id="deae" class="nl kx iq ny b gy oc od l oe of"># drop an irrelevant column<br/>df = df.drop('day_of_week', axis=1)</span><span id="921e" class="nl kx iq ny b gy pe od l oe of"># rename day_of_month to day -- helps with the datetime conversion<br/>df = df.rename({"date_of_month": "day"}, axis=1)</span><span id="0eda" class="nl kx iq ny b gy pe od l oe of"># convert year, month and day into datetime<br/>df['date'] = pd.to_datetime(df[['year', 'month', 'day']])</span><span id="f8f9" class="nl kx iq ny b gy pe od l oe of"># drop the now redundant year, month and day cols<br/>df = df.drop(['year', 'month', 'day'], axis=1)</span></pre><p id="daa6" class="pw-post-body-paragraph lo lp iq lq b lr mz jr lt lu na ju lw lx nb lz ma mb nc md me mf nd mh mi mj ij bi translated">我们的数据框<code class="fe oz pa pb ny b">df</code>现在看起来像这样。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi pf"><img src="../Images/c012fc0827552b5908c4baae2f4c2cbc.png" data-original-src="https://miro.medium.com/v2/resize:fit:640/format:webp/1*mbKhFvJPxLd5kfsMYpNLrw.png"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">经过处理的数据框-作者提供的图像</p></figure><h2 id="cf33" class="nl kx iq bd ky nm nn dn lc no np dp lg lx nq nr li mb ns nt lk mf nu nv lm nw bi translated">分析数据</h2><p id="c3f1" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">我们将使用<code class="fe oz pa pb ny b">calmap</code>库来绘制2014年的出生热图。该库接受用DateTimeIndex索引的数据，所以让我们先创建它。</p><pre class="kg kh ki kj gt nx ny nz oa aw ob bi"><span id="4a19" class="nl kx iq ny b gy oc od l oe of"># accessing the rows belonging for 2014<br/>df_14 = df[df['date'].dt.year == 2014]</span><span id="d7b4" class="nl kx iq ny b gy pe od l oe of"># duplicating the "birth" column into a separate series<br/>df_dates_14 = pd.Series(df_14['births'])</span><span id="5199" class="nl kx iq ny b gy pe od l oe of"># setting the index to df_14’s date column<br/>df_dates_14.index = df_14['date']</span></pre><p id="a87e" class="pw-post-body-paragraph lo lp iq lq b lr mz jr lt lu na ju lw lx nb lz ma mb nc md me mf nd mh mi mj ij bi translated">现在让我们创建日历图。</p><pre class="kg kh ki kj gt nx ny nz oa aw ob bi"><span id="771b" class="nl kx iq ny b gy oc od l oe of">plt.figure(figsize=(30, 10))</span><span id="79c5" class="nl kx iq ny b gy pe od l oe of">_ = calmap.yearplot(df_dates_14)</span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi pg"><img src="../Images/78ef394ee4ec6f780656648dd023c2ad.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*B0VII6cRmT-CwQl6F-N_qA.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">2014年日历热图—图片由作者提供</p></figure><p id="f002" class="pw-post-body-paragraph lo lp iq lq b lr mz jr lt lu na ju lw lx nb lz ma mb nc md me mf nd mh mi mj ij bi translated">很明显，如我们所料，一致性假设不成立。你可以看到，在周末和一些公共假日，出生人数明显减少。让我们更仔细地看看这个。</p><h2 id="54c6" class="nl kx iq bd ky nm nn dn lc no np dp lg lx nq nr li mb ns nt lk mf nu nv lm nw bi translated">挑战一致性假设</h2><p id="2a4e" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">虽然我们没有闰日的第一个假设足够安全，不会对我们的答案产生重大影响，但我们做出的第二个假设(每个日期的可能性相等)似乎有点不现实。嗯，确实是。</p><p id="e5a8" class="pw-post-body-paragraph lo lp iq lq b lr mz jr lt lu na ju lw lx nb lz ma mb nc md me mf nd mh mi mj ij bi translated">数据显示，生日有两种潜在的模式——美国模式和欧洲模式。<strong class="lq ir">美国的出生模式</strong>显示在九月有一个明显的高峰，而<strong class="lq ir">欧洲模式</strong>在春季有一个大的高峰，随后在九月有一个较小的高峰。</p><p id="62bc" class="pw-post-body-paragraph lo lp iq lq b lr mz jr lt lu na ju lw lx nb lz ma mb nc md me mf nd mh mi mj ij bi translated">另一个反常现象出现在节假日——因为更多的医院关门，在像公共假日这样的日子出生的可能性更小。</p><p id="f3d7" class="pw-post-body-paragraph lo lp iq lq b lr mz jr lt lu na ju lw lx nb lz ma mb nc md me mf nd mh mi mj ij bi translated">同样，周末的出生人数也比平日略少。</p><p id="6cb1" class="pw-post-body-paragraph lo lp iq lq b lr mz jr lt lu na ju lw lx nb lz ma mb nc md me mf nd mh mi mj ij bi translated">所有这些都指向一个事实，即真实世界的数据并不遵循一致性的假设。我们很快就会看到这种变化对我们的答案有多大影响。</p><h2 id="64af" class="nl kx iq bd ky nm nn dn lc no np dp lg lx nq nr li mb ns nt lk mf nu nv lm nw bi translated">寻找不同样本量的概率</h2><p id="e9db" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">让我们假设一年，比如2014年。我们将随机抽取不同样本量的日期，并计算至少有两个相同生日的概率。</p><p id="1f2c" class="pw-post-body-paragraph lo lp iq lq b lr mz jr lt lu na ju lw lx nb lz ma mb nc md me mf nd mh mi mj ij bi translated">我们将进行两种实验——一种有一致性假设，另一种没有。</p><p id="99ce" class="pw-post-body-paragraph lo lp iq lq b lr mz jr lt lu na ju lw lx nb lz ma mb nc md me mf nd mh mi mj ij bi translated"><strong class="lq ir">效用函数</strong></p><p id="c340" class="pw-post-body-paragraph lo lp iq lq b lr mz jr lt lu na ju lw lx nb lz ma mb nc md me mf nd mh mi mj ij bi translated">让我们首先创建一个效用函数，它接受:</p><ul class=""><li id="edc7" class="ol om iq lq b lr mz lu na lx on mb oo mf op mj oq or os ot bi translated">数据帧</li><li id="c043" class="ol om iq lq b lr ou lu ov lx ow mb ox mf oy mj oq or os ot bi translated">样本量</li><li id="b779" class="ol om iq lq b lr ou lu ov lx ow mb ox mf oy mj oq or os ot bi translated">用于测试的样本数量</li><li id="1bc2" class="ol om iq lq b lr ou lu ov lx ow mb ox mf oy mj oq or os ot bi translated">一面引发统一的旗帜</li></ul><p id="abe5" class="pw-post-body-paragraph lo lp iq lq b lr mz jr lt lu na ju lw lx nb lz ma mb nc md me mf nd mh mi mj ij bi translated">在高层次上，这个函数简单地从我们的数据框中创建给定样本大小的多个样本，并检查该样本是否有生日匹配。然后，它返回这些样本中匹配的部分。</p><p id="74a0" class="pw-post-body-paragraph lo lp iq lq b lr mz jr lt lu na ju lw lx nb lz ma mb nc md me mf nd mh mi mj ij bi translated">它看起来会像这样:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ph"><img src="../Images/3602e2ab25f70f2223e81d735597ab87.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*oTkBfprXSUw4z9kWw1LKsA.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">效用函数——作者的形象</p></figure><p id="940f" class="pw-post-body-paragraph lo lp iq lq b lr mz jr lt lu na ju lw lx nb lz ma mb nc md me mf nd mh mi mj ij bi translated">现在，让我们针对不同的样本大小，计算至少有一个生日匹配的样本的分数。</p><p id="3d5b" class="pw-post-body-paragraph lo lp iq lq b lr mz jr lt lu na ju lw lx nb lz ma mb nc md me mf nd mh mi mj ij bi translated">我们暂时不强加一致性假设。请记住，我们现在期望在样本量为<code class="fe oz pa pb ny b">23</code>时比计算出的<code class="fe oz pa pb ny b">0.507</code>有更高的概率，因为出生日期的不一致性使得生日匹配更容易。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi pi"><img src="../Images/62944bff3c0aa9f9ff3ee8e74ec756c8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*96GytQjbxRc8F4hJk_QDiA.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">计算不同样本大小的概率-按作者分类的图片</p></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi pj"><img src="../Images/d65ff02647e9e7454a231ab38842f907.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Q6JxfTxRSfj68Nd7oF15og.png"/></div></div></figure><p id="e7e9" class="pw-post-body-paragraph lo lp iq lq b lr mz jr lt lu na ju lw lx nb lz ma mb nc md me mf nd mh mi mj ij bi translated">让我们画出结果。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi pk"><img src="../Images/b8a16e60de347faed8a9ad1a49e1d344.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8UpDiiUlWPCATiWnei9yaA.png"/></div></div></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi pl"><img src="../Images/e0de51eb3765bd783e2158e5c2d962c8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-o6lJF5q0CmV76Odo5hp4A.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">不同样本大小的匹配发生概率图(不一致)-按作者分类的图像</p></figure><p id="d12d" class="pw-post-body-paragraph lo lp iq lq b lr mz jr lt lu na ju lw lx nb lz ma mb nc md me mf nd mh mi mj ij bi translated">不出所料，我们得到了一个比<code class="fe oz pa pb ny b">0.5</code>略高的值。</p><p id="e9e3" class="pw-post-body-paragraph lo lp iq lq b lr mz jr lt lu na ju lw lx nb lz ma mb nc md me mf nd mh mi mj ij bi translated">让我们重复这个实验。但这一次，我们将对日期进行统一加权。对于<code class="fe oz pa pb ny b">23</code>的样本量，我们期望概率略大于0.5，但小于我们在前一个案例中得到的概率。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi pm"><img src="../Images/ad9d4933e4bff131eee12bd151121c13.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*NNKN7sEg1qjqdG3RmQIjVA.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">不同样本大小的匹配发生概率图(统一)-图片由作者提供</p></figure><p id="d086" class="pw-post-body-paragraph lo lp iq lq b lr mz jr lt lu na ju lw lx nb lz ma mb nc md me mf nd mh mi mj ij bi translated">这和我们没有一致性假设时得到的值非常相似。这里的关键点是，对于<code class="fe oz pa pb ny b">n = 23</code>，我们得到了一个比没有均匀性假设时稍低的值。</p><p id="3500" class="pw-post-body-paragraph lo lp iq lq b lr mz jr lt lu na ju lw lx nb lz ma mb nc md me mf nd mh mi mj ij bi translated">这与直觉一致，即如果一些日期比其他日期更有可能，那么两个人更有可能有相同的生日。虽然这只是我们数据集中15年中的一年，但对所有年份进行平均可能会得到更一致的结果(尽管我们不会这样做，因为文章越来越长)。</p><h2 id="7205" class="nl kx iq bd ky nm nn dn lc no np dp lg lx nq nr li mb ns nt lk mf nu nv lm nw bi translated">一致性假设有多重要？</h2><p id="dd59" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">记住这些发现，这个假设有多重要？我们计算出的答案23会不会比1高了很多？还是3？也许更多？</p><p id="eae5" class="pw-post-body-paragraph lo lp iq lq b lr mz jr lt lu na ju lw lx nb lz ma mb nc md me mf nd mh mi mj ij bi translated">Mario Cortina Borja和John Haigh的论文对此进行了深入的解释。他们使用递归公式来计算答案会有多大的变化。他们得出了一个乘数<code class="fe oz pa pb ny b">0.99917</code>，这意味着答案在很大程度上仍然是<code class="fe oz pa pb ny b">23</code>，即使我们放松了一致性规则。</p><p id="e224" class="pw-post-body-paragraph lo lp iq lq b lr mz jr lt lu na ju lw lx nb lz ma mb nc md me mf nd mh mi mj ij bi translated">这篇论文在参考文献部分有链接。</p><p id="52e9" class="pw-post-body-paragraph lo lp iq lq b lr mz jr lt lu na ju lw lx nb lz ma mb nc md me mf nd mh mi mj ij bi translated">如果我们从数据集(2000年至2014年)中检查这一趋势，我们会得到一个图来加强这一点。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi pn"><img src="../Images/87b97392b111428e4aaddf0b7b193613.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*z9Srh4T-1ybHMCce8shAFA.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">样本大小为23的匹配概率趋势—作者图片</p></figure><p id="14f2" class="pw-post-body-paragraph lo lp iq lq b lr mz jr lt lu na ju lw lx nb lz ma mb nc md me mf nd mh mi mj ij bi translated">几乎所有的年份，“均匀”的情节都比“不均匀”的情节低很多。趋势线后面非常淡的蓝色和橙色水平线代表均值。两者接近，一致均值低于预期。</p></div><div class="ab cl ne nf hu ng" role="separator"><span class="nh bw bk ni nj nk"/><span class="nh bw bk ni nj nk"/><span class="nh bw bk ni nj"/></div><div class="ij ik il im in"><h1 id="562b" class="kw kx iq bd ky kz og lb lc ld oh lf lg jw oi jx li jz oj ka lk kc ok kd lm ln bi translated">为什么它不那么直观</h1><p id="5cbd" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">正如你可能想象的那样，我们非常重视两个特定人的生日匹配，这是一个<code class="fe oz pa pb ny b">0.3%</code>。虽然这种概率确实很小，但我们没有考虑这样一个事实，即当我们有<code class="fe oz pa pb ny b">23</code>人时，我们谈论的是<code class="fe oz pa pb ny b">253</code>对个体。</p><p id="38cf" class="pw-post-body-paragraph lo lp iq lq b lr mz jr lt lu na ju lw lx nb lz ma mb nc md me mf nd mh mi mj ij bi translated">这样想想，任何两个人同一天生日的几率似乎都没那么小，尤其是唯一的生日只有365个。</p></div><div class="ab cl ne nf hu ng" role="separator"><span class="nh bw bk ni nj nk"/><span class="nh bw bk ni nj nk"/><span class="nh bw bk ni nj"/></div><div class="ij ik il im in"><h1 id="5622" class="kw kx iq bd ky kz og lb lc ld oh lf lg jw oi jx li jz oj ka lk kc ok kd lm ln bi translated">示例代码和参考</h1><h2 id="6451" class="nl kx iq bd ky nm nn dn lc no np dp lg lx nq nr li mb ns nt lk mf nu nv lm nw bi translated">资料组</h2><p id="5f99" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">我在这里使用了<strong class="lq ir">出生</strong>数据集(知识共享许可)。</p><div class="po pp gp gr pq pr"><a href="https://data.fivethirtyeight.com/" rel="noopener  ugc nofollow" target="_blank"><div class="ps ab fo"><div class="pt ab pu cl cj pv"><h2 class="bd ir gy z fp pw fr fs px fu fw ip bi translated">我们的数据</h2><div class="py l"><h3 class="bd b gy z fp pw fr fs px fu fw dk translated">我们正在分享一些文章和图片背后的数据和代码。</h3></div><div class="pz l"><p class="bd b dl z fp pw fr fs px fu fw dk translated">data.fivethirtyeight.com</p></div></div><div class="qa l"><div class="qb l qc qd qe qa qf kp pr"/></div></div></a></div><h2 id="4df0" class="nl kx iq bd ky nm nn dn lc no np dp lg lx nq nr li mb ns nt lk mf nu nv lm nw bi translated">论文谈均匀性假设</h2><p id="2bd9" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated"><a class="ae kv" href="https://rss.onlinelibrary.wiley.com/doi/10.1111/j.1740-9713.2007.00246.x" rel="noopener ugc nofollow" target="_blank">https://RSS . online library . Wiley . com/doi/10.1111/j . 1740-9713.2007 . 00246 . x</a></p><h2 id="33dd" class="nl kx iq bd ky nm nn dn lc no np dp lg lx nq nr li mb ns nt lk mf nu nv lm nw bi translated">密码</h2><div class="po pp gp gr pq pr"><a href="https://github.com/Polaris000/BlogCode/tree/main/BirthdayParadox" rel="noopener  ugc nofollow" target="_blank"><div class="ps ab fo"><div class="pt ab pu cl cj pv"><h2 class="bd ir gy z fp pw fr fs px fu fw ip bi translated">博客代码/生日悖论在主北极星000/博客代码</h2><div class="py l"><h3 class="bd b gy z fp pw fr fs px fu fw dk translated">示例代码来自我在Medium和我的个人网站上的博客文章。-博客代码/生日悖论在主…</h3></div><div class="pz l"><p class="bd b dl z fp pw fr fs px fu fw dk translated">github.com</p></div></div><div class="qa l"><div class="qg l qc qd qe qa qf kp pr"/></div></div></a></div></div><div class="ab cl ne nf hu ng" role="separator"><span class="nh bw bk ni nj nk"/><span class="nh bw bk ni nj nk"/><span class="nh bw bk ni nj"/></div><div class="ij ik il im in"><h2 id="2f4b" class="nl kx iq bd ky nm nn dn lc no np dp lg lx nq nr li mb ns nt lk mf nu nv lm nw bi translated">更新</h2><blockquote class="qh qi qj"><p id="b651" class="lo lp qk lq b lr mz jr lt lu na ju lw ql nb lz ma qm nc md me qn nd mh mi mj ij bi">26.4.22</p></blockquote><p id="4509" class="pw-post-body-paragraph lo lp iq lq b lr mz jr lt lu na ju lw lx nb lz ma mb nc md me mf nd mh mi mj ij bi translated">添加缺少的结果</p></div><div class="ab cl ne nf hu ng" role="separator"><span class="nh bw bk ni nj nk"/><span class="nh bw bk ni nj nk"/><span class="nh bw bk ni nj"/></div><div class="ij ik il im in"><h1 id="0aa4" class="kw kx iq bd ky kz og lb lc ld oh lf lg jw oi jx li jz oj ka lk kc ok kd lm ln bi translated">最后</h1><p id="7218" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">我写这篇文章是为了分享一个统计问题，这个问题的答案在没有实际解决之前并不明显。这表明统计在某些情况下不是很直观。</p><p id="b5bd" class="pw-post-body-paragraph lo lp iq lq b lr mz jr lt lu na ju lw lx nb lz ma mb nc md me mf nd mh mi mj ij bi translated">我希望这是一次有趣的阅读，你能从中得到一些东西。感谢阅读。</p></div></div>    
</body>
</html>