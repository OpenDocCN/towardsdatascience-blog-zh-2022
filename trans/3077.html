<html>
<head>
<title>Understanding Partial Effects, Main Effects, and Interaction Effects in a Regression Model</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">了解回归模型中的部分效应、主效应和交互效应</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/understanding-partial-effects-main-effects-and-interaction-effects-in-a-regression-model-54e8a127c62d#2022-07-06">https://towardsdatascience.com/understanding-partial-effects-main-effects-and-interaction-effects-in-a-regression-model-54e8a127c62d#2022-07-06</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><figure class="ip iq gp gr ir is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi io"><img src="../Images/3f34e27b2aa398e8efee48d9479c2b48.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*JqitR5tDIDubKNY2Mp4-XQ.png"/></div></div><p class="iz ja gj gh gi jb jc bd b be z dk translated">图片由<a class="ae jd" href="https://pixabay.com/vectors/boys-studying-children-student-1844435/" rel="noopener ugc nofollow" target="_blank"> Pixabay </a> ( <a class="ae jd" href="https://pixabay.com/service/license/" rel="noopener ugc nofollow" target="_blank"> Pixabay许可</a>)的<a class="ae jd" href="https://pixabay.com/users/eommina-1183101/" rel="noopener ugc nofollow" target="_blank">欧米娜</a>拍摄</p></figure><div class=""/><div class=""><h2 id="994f" class="pw-subtitle-paragraph kd jf jg bd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku dk translated">我们将学习如何使用合适的例子在回归模型中识别和测量这些影响。</h2></div><p id="3ad3" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">在本文中，我们将弄清楚如何计算回归变量对回归模型响应变量的部分(或边际)效应、主要效应和交互效应。我们还将学习如何根据适当的效果来解释回归模型的系数。</p></div><div class="ab cl lr ls hu lt" role="separator"><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw"/></div><div class="ij ik il im in"><p id="816a" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">先说部分效应，也叫边际效应。</p><h1 id="eea6" class="ly lz jg bd ma mb mc md me mf mg mh mi km mj kn mk kp ml kq mm ks mn kt mo mp bi translated">部分效应</h1><blockquote class="mq mr ms"><p id="d330" class="kv kw mt kx b ky kz kh la lb lc kk ld mu lf lg lh mv lj lk ll mw ln lo lp lq ij bi translated">在回归模型中，回归变量的部分效应是回归变量中每单位变化的响应变量值的变化。</p></blockquote><p id="d54c" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">在微积分的语言中，部分效应是响应的期望值相对于感兴趣的回归变量的偏导数。</p><p id="14cf" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">让我们来看三个日益复杂的部分效应的例子。</p><p id="614c" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">考虑以下线性回归模型:</p><figure class="my mz na nb gt is gh gi paragraph-image"><div class="gh gi mx"><img src="../Images/f5e5f2f0fcfcaf3f1b42b7d7fabf48c2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1088/format:webp/1*UUyGrs_SZtHom-DNpWB1Gg.png"/></div><p class="iz ja gj gh gi jb jc bd b be z dk translated">仅包含线性项的线性回归模型(图片由作者提供)</p></figure><p id="82f7" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">以上模型中<strong class="kx jh"> <em class="mt">，y </em> </strong>为因变量，<strong class="kx jh"><em class="mt">x</em></strong><em class="mt">_ 1</em><strong class="kx jh"><em class="mt">，x </em> </strong> <em class="mt"> _2 </em>为回归变量。<em class="mt"> y_i </em>、<em class="mt"> x_i_1 </em>和<em class="mt"> x_i_2 </em>是对应于第<em class="mt">个</em>个观察值，即数据集第<em class="mt">个</em>行的值。</p><p id="48e6" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><em class="mt"> β_0 </em>为截距。<em class="mt"> ϵ_i </em>是捕获<em class="mt"> y_i </em>中模型无法解释的方差的误差项。</p><p id="b0fc" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">当我们在数据集上拟合上述模型时，我们正在估计期望值，即<em class="mt"> x_i_1 </em>和<em class="mt"> x_i_2 </em>的一些观察值的<em class="mt"> y_i </em>的平均值。如果我们应用期望操作符<em class="mt"> E(。)</em>在等式(1)的两边，我们得到下面的等式(注意，误差项已经消失，因为它的期望值是零):</p><figure class="my mz na nb gt is gh gi paragraph-image"><div class="gh gi nc"><img src="../Images/66b48f89165b5449c71a0845f0908ab1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1108/format:webp/1*7SmuExlq-HWrlw99syPcJA.png"/></div><p class="iz ja gj gh gi jb jc bd b be z dk translated">y_i的期望值取决于<strong class="bd nd"> x </strong> _i(图片由作者提供)</p></figure><p id="2c55" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><em class="mt"> x_i_1 </em>和<em class="mt"> x_i_2 </em>(或一般情况下<strong class="kx jh">T5】x</strong><em class="mt">_ 1</em>和<strong class="kx jh"><em class="mt">x</em></strong><em class="mt">_ 2</em>)对<em class="mt"> y_i </em>期望值的偏导数分别为<em class="mt"> y_i </em> w.r.t. <em class="mt"> x_i_1</em></p><figure class="my mz na nb gt is gh gi paragraph-image"><div class="gh gi ne"><img src="../Images/4557ee6ff5c1dc5c0b7a086d700d7142.png" data-original-src="https://miro.medium.com/v2/resize:fit:696/format:webp/1*fk_ssGU7BwTKYezFMbmA7A.png"/></div><p class="iz ja gj gh gi jb jc bd b be z dk translated">x_i_1和x_i_2对E(y_i)的部分效应(图片由作者提供)</p></figure><blockquote class="mq mr ms"><p id="0882" class="kv kw mt kx b ky kz kh la lb lc kk ld mu lf lg lh mv lj lk ll mw ln lo lp lq ij bi translated">在仅包含线性项的线性模型的情况下，部分效应只是各自的系数。在这样的模型中，部分效应是常数。</p></blockquote><p id="fec4" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">现在，让我们通过添加一个二次项和一个交互项来稍微调整一下这个模型:</p><figure class="my mz na nb gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi nf"><img src="../Images/a2b98d8f56f3fee9c2ce6125f88791d7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*t-bFeqeHaTbR54mBP9c0tg.png"/></div></div><p class="iz ja gj gh gi jb jc bd b be z dk translated">包含线性、二次和交互项的线性模型(图片由作者提供)</p></figure><p id="cdd5" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">上述模型仍然是线性模型<em class="mt">，因为其系数</em>是线性的。但是<em class="mt"> x_i_2 </em>对<em class="mt"> y_i </em>期望值的部分影响不再是常数。相反，效果取决于<em class="mt"> x_i_2 </em>和<em class="mt"> x_i_1 </em>的当前值，如下所示:</p><figure class="my mz na nb gt is gh gi paragraph-image"><div class="gh gi ng"><img src="../Images/6e9c92e0b49472c702d106375d18738f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1240/format:webp/1*B7fjEzFDCv4e471BAAZPNQ.png"/></div><p class="iz ja gj gh gi jb jc bd b be z dk translated">E(y_i) w.r.t. x_i_2的变化率取决于x_i_2和x_i_1的当前值(图片由作者提供)</p></figure><p id="dc38" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">最后，让我们看看下面这个包含指数均值函数的非线性模型。该模型用于模拟泊松过程的均值函数:</p><figure class="my mz na nb gt is gh gi paragraph-image"><div class="gh gi nh"><img src="../Images/d8c38669731f8f9b7bb77d1592397fad.png" data-original-src="https://miro.medium.com/v2/resize:fit:1318/format:webp/1*LfSWiCz1tVlM_--5-dwHRg.png"/></div><p class="iz ja gj gh gi jb jc bd b be z dk translated">指数均值函数(图片由作者提供)</p></figure><p id="5615" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">在该模型中，<em class="mt"> x_i_1 </em>的部分效果如下:</p><figure class="my mz na nb gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi ni"><img src="../Images/511a7a4b02235f3c752296255295121a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rRF-ELgn1Btr8BtW-u3aGA.png"/></div></div><p class="iz ja gj gh gi jb jc bd b be z dk translated">x_i_1对E(y_i)的部分效应(图片由作者提供)</p></figure><p id="a96e" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">在这种情况下，每单位改变<em class="mt"> x_i_1 </em>的<em class="mt"> y_i </em>的期望值的改变不仅是<em class="mt">而不是</em>常数，而且它取决于模型中每个单个变量的当前值，以及所有系数的值。</p></div><div class="ab cl lr ls hu lt" role="separator"><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw"/></div><div class="ij ik il im in"><p id="58b5" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">让我们把注意力转向回归模型中的<strong class="kx jh">主效应</strong>意味着什么。</p><h1 id="1602" class="ly lz jg bd ma mb mc md me mf mg mh mi km mj kn mk kp ml kq mm ks mn kt mo mp bi translated">主要效果</h1><blockquote class="mq mr ms"><p id="7daf" class="kv kw mt kx b ky kz kh la lb lc kk ld mu lf lg lh mv lj lk ll mw ln lo lp lq ij bi translated">在仅包含线性项的线性回归模型中，每个回归变量的<strong class="kx jh">主效应</strong>与该变量的部分效应相同。</p></blockquote><p id="38f4" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">让我们回顾一下文章开头提到的线性模型:</p><figure class="my mz na nb gt is gh gi paragraph-image"><div class="gh gi mx"><img src="../Images/f5e5f2f0fcfcaf3f1b42b7d7fabf48c2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1088/format:webp/1*UUyGrs_SZtHom-DNpWB1Gg.png"/></div><p class="iz ja gj gh gi jb jc bd b be z dk translated">仅包含线性项的线性回归模型(图片由作者提供)</p></figure><p id="ca3d" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">以上模型中的主要效果简单来说就是<em class="mt"> β_1 </em>和<em class="mt"> β_2。</em></p><p id="8f51" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">由于该模型仅包含线性项，因此有时被称为<strong class="kx jh">主效果模型</strong>。</p><p id="cc7f" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">当模型包含二次项、交互项、非线性项或对数线性项时，对主要效应的解释就变得有趣了。</p><p id="bd58" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">在以下类型的模型中:</p><figure class="my mz na nb gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi nf"><img src="../Images/a2b98d8f56f3fee9c2ce6125f88791d7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*t-bFeqeHaTbR54mBP9c0tg.png"/></div></div><p class="iz ja gj gh gi jb jc bd b be z dk translated">包含线性、二次和交互项的线性模型(图片由作者提供)</p></figure><p id="e947" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">与变量<strong class="kx jh"> <em class="mt"> x </em> </strong> <em class="mt"> _1 </em>和<strong class="kx jh"><em class="mt">x</em></strong><em class="mt">_ 2</em>关联的系数<em class="mt"> β_1 </em>和<em class="mt"> β_2 </em>不能再解释为与这些变量关联的主效应。那么，在这样的模型中，主要效应是如何计算的呢？</p><p id="1935" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">一种方法是计算每个变量的部分效应，并计算数据集每一行的值。然后取所有这些部分效应的平均值。</p><p id="5b8e" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">例如，在上述模型中，<em class="mt"> x_i_1 </em>(或一般的<strong class="kx jh"><em class="mt">x</em></strong><em class="mt">_ 1</em>)对<em class="mt"> E(y_i) </em>的部分效应计算如下:</p><figure class="my mz na nb gt is gh gi paragraph-image"><div class="gh gi nj"><img src="../Images/70858a1f93f8691fc427e5e14ca5d6eb.png" data-original-src="https://miro.medium.com/v2/resize:fit:912/format:webp/1*KCMwRhutsyT4oWlNDjb8nA.png"/></div><p class="iz ja gj gh gi jb jc bd b be z dk translated">x_i_1对E(y_i)的部分效应(图片由作者提供)</p></figure><p id="d19e" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">为了计算<em class="mt"> x_i_1 </em>的主效应，我们必须计算数据集中每一行的上述部分效应的值，并取所有这些部分效应的平均值:</p><figure class="my mz na nb gt is gh gi paragraph-image"><div class="gh gi nk"><img src="../Images/c9352c54b9ecb3d76aea156157d28336.png" data-original-src="https://miro.medium.com/v2/resize:fit:1360/format:webp/1*PAhtqkcT-Y27-x5il1TT-A.png"/></div><p class="iz ja gj gh gi jb jc bd b be z dk translated">将主效应计算为整个数据集上部分效应的平均值(图片由作者提供)</p></figure><p id="867a" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">虽然上述公式为计算主要效应提供了可靠的基础，但它只是一个近似效应，实际上只适用于手头的数据集。事实上，在这样的模型中，主要效应<em class="mt">是否应该</em>被计算，或者是否应该被简单地忽略，这是有争议的。</p></div><div class="ab cl lr ls hu lt" role="separator"><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw"/></div><div class="ij ik il im in"><p id="57fa" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">让我们把注意力转向交互作用效应。</p><h1 id="0155" class="ly lz jg bd ma mb mc md me mf mg mh mi km mj kn mk kp ml kq mm ks mn kt mo mp bi translated">交互效应</h1><p id="d480" class="pw-post-body-paragraph kv kw jg kx b ky nl kh la lb nm kk ld le nn lg lh li no lk ll lm np lo lp lq ij bi translated">让我们通过增加一项来扩展线性模型，如下所示:</p><figure class="my mz na nb gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi nq"><img src="../Images/1bb5e57be4b6fe4188c57a7264cace99.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*o9JwPT7IuJie8f4RKRpX5w.png"/></div></div><p class="iz ja gj gh gi jb jc bd b be z dk translated">包含交互项的线性回归模型(图片由作者提供)</p></figure><p id="62c3" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">同样，上述模型仍然是一个线性模型，因为它的系数仍然是线性的。</p><p id="7c11" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">术语<em class="mt"> (x_i_1*x_i_2) </em>是两个回归变量的观察值的乘积，表示两个变量之间的相互作用。这次，当我们对<em class="mt">y _ I</em>w . r . t .<em class="mt">x _ I _ 1</em>的期望值进行偏导数时，我们得到如下结果:</p><figure class="my mz na nb gt is gh gi paragraph-image"><div class="gh gi nr"><img src="../Images/ea4d7959d714b12e6fa997798aa93490.png" data-original-src="https://miro.medium.com/v2/resize:fit:910/format:webp/1*Uf2MDrt06iSU3gVa1xLx6w.png"/></div><p class="iz ja gj gh gi jb jc bd b be z dk translated">y_i w.r.t. x_i_1的期望值偏导数包含了相互作用项的影响(图片由作者提供)</p></figure><p id="f758" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><em class="mt"> E(y_i) </em>相对于<em class="mt"> x_i_1 </em>的变化不再仅仅是<em class="mt"> β_1 </em>。由于相互作用项的存在，它是<em class="mt"> β_1 </em>加上一个取决于当前值<em class="mt"> x_i_2 </em>乘以相互作用项的系数<em class="mt"> β_3 </em>的量。如果系数<em class="mt"> β_3 </em>恰好为负，那么对于<em class="mt"> x_i_1 </em>中的每一个单位变化，它将减少<em class="mt"> y_i </em>中的净变化，如果<em class="mt"> β_4 </em>为正，它将提升它(假设两种情况下<em class="mt"> x_i_2 </em>都为正)。</p><p id="bf75" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">而如果<em class="mt"> β_3 </em>恰好不具有统计显著性(换句话说，为零)，交互项就失去了作用，<em class="mt"> x_i_1 </em>对<em class="mt"> E(y_i) </em>的部分作用又恰好与<em class="mt"> x_i_1 </em>对<em class="mt"> E(y_i)的主作用相同。</em></p><p id="3544" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">如果我们对<em class="mt"> E(y_i) </em>求二阶导数，这次是w.r.t. <em class="mt"> x_i_2 </em>，我们得到如下结果:</p><figure class="my mz na nb gt is gh gi paragraph-image"><div class="gh gi ns"><img src="../Images/681a3f470b5e74aa4d8419a1891d1a7f.png" data-original-src="https://miro.medium.com/v2/resize:fit:708/format:webp/1*HG0RpWfe-n92NLqvsm2kfA.png"/></div><p class="iz ja gj gh gi jb jc bd b be z dk translated">y_i期望值的二重导数(图片由作者提供)</p></figure><p id="fcc0" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">我们现在可以看到交互项<em class="mt"> (x_i_1*x_i_2) </em>对模型的影响。</p><p id="9357" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">系数<em class="mt"> β_3 </em>测量<em class="mt">E(y _ I)</em>w . r . t .<em class="mt">x _ I _ 1</em>的变化率，即<em class="mt"> x_i_2 </em>的每单位变化量。因此，<em class="mt"> β_3 </em>度量了<em class="mt"> x_i_1 </em>和<em class="mt"> x_i_2之间的相互作用程度。</em></p><p id="d91f" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><em class="mt"> β_3 </em>称为<strong class="kx jh">相互作用效应</strong>。</p><h2 id="e75b" class="nt lz jg bd ma nu nv dn me nw nx dp mi le ny nz mk li oa ob mm lm oc od mo oe bi translated">相互作用项系数的解释</h2><blockquote class="mq mr ms"><p id="4991" class="kv kw mt kx b ky kz kh la lb lc kk ld mu lf lg lh mv lj lk ll mw ln lo lp lq ij bi translated">正如主效应一样，交互作用项的系数可以解释为交互作用效应的大小，但仅限于只包含线性项和一个交互作用项的线性模型。</p></blockquote><p id="a125" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">对于所有其他情况，尤其是在非线性模型中，相互作用项的系数在指示相互作用项大小的能力方面没有意义。为了说明，再次考虑下面的非线性模型，该模型将平均值估计为回归变量的指数线性组合。该模型通常用于表示<a class="ae jd" rel="noopener" target="_blank" href="/an-illustrated-guide-to-the-poisson-regression-model-50cccba15958">泊松回归模型</a>中的非负<a class="ae jd" rel="noopener" target="_blank" href="/the-poisson-process-everything-you-need-to-know-322aa0ab9e9a">泊松过程均值</a>:</p><figure class="my mz na nb gt is gh gi paragraph-image"><div class="gh gi nh"><img src="../Images/d8c38669731f8f9b7bb77d1592397fad.png" data-original-src="https://miro.medium.com/v2/resize:fit:1318/format:webp/1*LfSWiCz1tVlM_--5-dwHRg.png"/></div><p class="iz ja gj gh gi jb jc bd b be z dk translated">指数均值函数(图片由作者提供)</p></figure><p id="f07d" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><em class="mt">E(y _ I)</em>w . r . t .<em class="mt">x _ I _ 1</em>的一阶导数产生了<em class="mt"> x_i_1 </em>对<em class="mt"> E(y_i) </em>的以下部分影响:</p><figure class="my mz na nb gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi of"><img src="../Images/e35be3105953fb5b99cb7ef7a3353e94.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1s74DrB1IzbwS8CPX_pWpA.png"/></div></div><p class="iz ja gj gh gi jb jc bd b be z dk translated">x_i_1对E(y_i)的部分效应(图片由作者提供)</p></figure><p id="6426" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">显然，相对于只有线性项的线性模型，在上述部分效应中，<em class="mt"> x_i_1 </em>的系数<em class="mt"> β_3 </em>不再提供<em class="mt"> x_i_1主效应大小的任何线索。</em></p><p id="4f38" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><em class="mt"> E(y_i) </em>的二阶导数，这次w.r.t. <em class="mt"> x_i_2 </em>给出了一个更加混乱的情况:</p><figure class="my mz na nb gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi og"><img src="../Images/5ad357321b9dbff276ca0d22dacdb91f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ZwqMCum7ELt6YN0FQKG3SQ.png"/></div></div><p class="iz ja gj gh gi jb jc bd b be z dk translated">E(y_i)的二重导数先w.r.t. x_i_1，再w.r.t. x_i_2(图片由作者提供)</p></figure><blockquote class="mq mr ms"><p id="71dc" class="kv kw mt kx b ky kz kh la lb lc kk ld mu lf lg lh mv lj lk ll mw ln lo lp lq ij bi translated">关键的一点是，在一个非线性模型中，人们不应该试图给相互作用效应的系数赋予任何意义。</p></blockquote><h2 id="1ea7" class="nt lz jg bd ma nu nv dn me nw nx dp mi le ny nz mk li oa ob mm lm oc od mo oe bi translated">添加交互术语的好处</h2><p id="f7bc" class="pw-post-body-paragraph kv kw jg kx b ky nl kh la lb nm kk ld le nn lg lh li no lk ll lm np lo lp lq ij bi translated">人们可能想知道为什么要在回归模型中引入交互项。</p><p id="2f3e" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">交互项是一种有用的工具，用于表示同一模型中一个回归变量对另一个回归变量的影响。主效应测量响应变量对单个<em class="mt">回归变量的值的变化有多敏感，保持所有其他变量的值不变(或处于它们各自的平均值)，而交互效应测量<em class="mt">对另一个变量<strong class="kx jh"> <em class="mt"> z </em>的变化的敏感度</strong></em></em></p><p id="4491" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">这里有几个例子来说明互动效果的用法:</p><ul class=""><li id="f0b3" class="oh oi jg kx b ky kz lb lc le oj li ok lm ol lq om on oo op bi translated">在研究一个人的收入与年龄、性别和教育等特征之间关系的模型中，如果这个人恰好是女性而不是男性，那么他可能想知道教育水平每改变一个单位，收入会改变多少。换句话说，在所有其他因素保持不变的情况下，女性参与者从额外教育中获得的好处比男性参与者多(或少)吗？如果我们使用回归年龄、性别、教育程度和(性别*教育程度)的线性收入模型来表示这些关系，那么交互作用效应就是(性别*教育程度)的系数。</li><li id="f7e0" class="oh oi jg kx b ky oq lb or le os li ot lm ou lq om on oo op bi translated">在一个研究温度和微粒空气数量对降雨强度影响的模型中，主要影响将分别通过单位温度变化或空气污染的降雨量变化来衡量，而交互影响可以通过单位污染水平变化的降雨量变化量来衡量，<em class="mt">本身将随着单位温度变化而变化</em>。</li></ul></div><div class="ab cl lr ls hu lt" role="separator"><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw"/></div><div class="ij ik il im in"><h1 id="32c8" class="ly lz jg bd ma mb ov md me mf ow mh mi km ox kn mk kp oy kq mm ks oz kt mo mp bi translated">包含交互项的模型示例</h1><p id="5f6e" class="pw-post-body-paragraph kv kw jg kx b ky nl kh la lb nm kk ld le nn lg lh li no lk ll lm np lo lp lq ij bi translated">在本文的其余部分，我们将构建一个包含交互项的模型。具体来说，我们将通过回归一组六个变量和一个交互项来评估两所葡萄牙学校学生的学术表现。完整的数据集可以从<a class="ae jd" href="https://archive.ics.uci.edu/ml/datasets/Student+Performance" rel="noopener ugc nofollow" target="_blank">加州大学欧文分校的机器学习知识库网站</a>下载。我们从原始数据集中删除了大部分列，并将所有二进制变量编码为0或1的数据集精选子集<a class="ae jd" href="https://gist.github.com/sachinsdate/82c9486e4f7d1dd387772ad105fb0544" rel="noopener ugc nofollow" target="_blank"> <strong class="kx jh">可从这里</strong> </a>下载。</p><p id="26a7" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">这是这个精选数据集的一部分的样子:</p><figure class="my mz na nb gt is gh gi paragraph-image"><div class="gh gi pa"><img src="../Images/2e712518f7cbae57a2a80b547aa25c1e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1032/format:webp/1*H3DIfadbtMeF4MSoexTu2Q.png"/></div><p class="iz ja gj gh gi jb jc bd b be z dk translated">学生成绩数据集(数据集来源于<a class="ae jd" href="https://creativecommons.org/licenses/by/4.0/legalcode" rel="noopener ugc nofollow" target="_blank"> CC BY 4.0 </a>和<a class="ae jd" href="https://archive.ics.uci.edu/ml/citation_policy.html" rel="noopener ugc nofollow" target="_blank"> UCI ML引用政策</a>下的<a class="ae jd" href="https://archive-beta.ics.uci.edu/ml/datasets/student+performance" rel="noopener ugc nofollow" target="_blank"> UCI ML知识库</a></p></figure><p id="f870" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">每一行包含一个独特的学生的测试表现。因变量(<em class="mt"> G1 </em>)是他们的第一堂数学课成绩，从0到20不等。我们将根据多个因素和一个<strong class="kx jh">交互项</strong>回归等级，如下所示:</p><figure class="my mz na nb gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi pb"><img src="../Images/96ff1e789344b8d462025c2d8ec060d6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bIbokdqrrkly0c4bF-uoHw.png"/></div></div><p class="iz ja gj gh gi jb jc bd b be z dk translated">学生数学成绩模型(图片由作者提供)</p></figure><p id="3119" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">这里，<em class="mt">失败</em>是学生在过去的课上失败的次数。该值从0到4。它在4点被右删。</p><p id="aa53" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><em class="mt"> schoolsup </em>和<em class="mt"> famsup </em>是布尔变量，分别表示学生是否从学校或家庭获得了额外的教育支持。值为1表示他们得到了一些支持，值为0表示他们没有得到任何支持。</p><p id="f317" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><em class="mt"> studytime </em>包含学生每周花在学习上的时间。其值以1为增量在1到4之间变化，其中1表示&lt; 2小时，2表示2到5小时，3表示5到10小时，4表示大于10小时。</p><p id="a965" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">goout代表学生和朋友在户外闲逛的程度。它是一个从1到5的整数值，其中1表示非常低的范围，5表示非常高的范围。</p><p id="7346" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><em class="mt">性别</em>是一个布尔变量(1 =女性，0 =男性)。</p><p id="f9d6" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">我们还在这个模型中加入了一个交互项，叫做<em class="mt">(失败*性)</em>。</p><p id="4666" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">如果我们区分<em class="mt"> G1 </em>瓦特<em class="mt">性别</em>，我们得到<em class="mt">性别</em>对<em class="mt"> G1 </em>的部分效应如下:</p><figure class="my mz na nb gt is gh gi paragraph-image"><div class="gh gi pc"><img src="../Images/881ac0c87369f5118b6eaf4cbf884929.png" data-original-src="https://miro.medium.com/v2/resize:fit:1132/format:webp/1*uqccTekNEJCL-fVHJMM-SQ.png"/></div><p class="iz ja gj gh gi jb jc bd b be z dk translated">男女学生在数学方面的预期成绩差异(图片由作者提供)</p></figure><p id="10fb" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">这个等式给出了男女学生平均成绩的差异。由于交互项的存在，这种差异也取决于过去的失败次数。</p><p id="2870" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">如果我们再进行一次微分，这次是w.r.t. <em class="mt">故障</em>，我们得到以下结果:</p><figure class="my mz na nb gt is gh gi paragraph-image"><div class="gh gi pd"><img src="../Images/2a359f497178a81d65a6bcaf3a2a47e2.png" data-original-src="https://miro.medium.com/v2/resize:fit:840/format:webp/1*DIuNWr_G28dNpUtKt-OSMg.png"/></div><p class="iz ja gj gh gi jb jc bd b be z dk translated">过去失败次数的单位变化对男女学生数学预期成绩的影响(图片由作者提供)</p></figure><p id="03bc" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><em class="mt"> β_7 </em>是过去失败次数每单位变化，男女生平均成绩差变化的比率。</p><p id="e261" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">因此<em class="mt"> β_7 </em>估计了<em class="mt">性别</em>和<em class="mt">失败次数之间的<strong class="kx jh">交互效应</strong>。</em></p><p id="73ba" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">让我们在数据集上构建和训练这个模型。我们将使用Python和<a class="ae jd" href="https://pandas.pydata.org/docs/getting_started/index.html" rel="noopener ugc nofollow" target="_blank"> Pandas </a>数据分析库和<a class="ae jd" href="https://www.statsmodels.org/stable/gettingstarted.html" rel="noopener ugc nofollow" target="_blank"> statsmodels </a>统计模型库。</p><p id="8b38" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">让我们从导入所有需要的包开始。</p><pre class="my mz na nb gt pe pf pg ph aw pi bi"><span id="4ccc" class="nt lz jg pf b gy pj pk l pl pm"><strong class="pf jh">import </strong>pandas <strong class="pf jh">as </strong>pd<br/><strong class="pf jh">from </strong>patsy <strong class="pf jh">import </strong>dmatrices<br/><strong class="pf jh">import </strong>statsmodels.api <strong class="pf jh">as </strong>sm</span></pre><p id="cee9" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">接下来，我们将使用Pandas将数据集加载到Pandas数据框架中:</p><pre class="my mz na nb gt pe pf pg ph aw pi bi"><span id="7a2f" class="nt lz jg pf b gy pj pk l pl pm">df = pd.<strong class="pf jh">read_csv</strong>(<strong class="pf jh">'uciml_portuguese_students_math_performance_subset.csv'</strong>, <strong class="pf jh">header</strong>=0)</span></pre><p id="f40f" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">我们现在将在<a class="ae jd" href="https://patsy.readthedocs.io/en/latest/quickstart.html" rel="noopener ugc nofollow" target="_blank"> Patsy </a>语法中形成回归表达式。我们不需要明确指定截距。Patsy将在接下来的步骤中自动将其添加到<strong class="kx jh"> <em class="mt"> X </em> </strong>矩阵中。</p><pre class="my mz na nb gt pe pf pg ph aw pi bi"><span id="7f94" class="nt lz jg pf b gy pj pk l pl pm">reg_exp = <strong class="pf jh">'G1 ~ failures + schoolsup + famsup + studytime + goout + sex + I(failures*sex)'</strong></span></pre><p id="2244" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">让我们雕刻出<strong class="kx jh"> <em class="mt"> X </em> </strong>和<strong class="kx jh"> <em class="mt"> y </em> </strong>矩阵:</p><pre class="my mz na nb gt pe pf pg ph aw pi bi"><span id="bad4" class="nt lz jg pf b gy pj pk l pl pm">y_train, X_train = <strong class="pf jh">dmatrices</strong>(reg_exp, df, <strong class="pf jh">return_type</strong>=<strong class="pf jh">'</strong>dataframe<strong class="pf jh">'</strong>)</span></pre><p id="d1b0" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">这是设计矩阵的外观:</p><figure class="my mz na nb gt is gh gi paragraph-image"><div class="gh gi pn"><img src="../Images/9d7e7deb7006de9aad8772dd7015d9f2.png" data-original-src="https://miro.medium.com/v2/resize:fit:638/format:webp/1*eJcn8GyZWnkw_3yl8WIETw.png"/></div><p class="iz ja gj gh gi jb jc bd b be z dk translated">y_train(图片由作者提供)</p></figure><figure class="my mz na nb gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi po"><img src="../Images/55130cad72d838c4722d8e482e2b346b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*z3io7QS8Dy0ox78uKRtymA.png"/></div></div><p class="iz ja gj gh gi jb jc bd b be z dk translated">X_train(图片由作者提供)</p></figure><p id="8f07" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">注意，Patsy在<strong class="kx jh"> <em class="mt"> X </em> </strong>中为截距<em class="mt"> β_0 </em>添加了一个占位符列，它还添加了包含交互术语<em class="mt"> failures*sex </em>的列。</p><p id="64c7" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">我们现在将在数据集<em class="mt">(</em><strong class="kx jh"><em class="mt">y</em></strong><em class="mt">_ train，</em><strong class="kx jh"><em class="mt">X</em></strong><em class="mt">_ train)</em>上构建和训练模型:</p><pre class="my mz na nb gt pe pf pg ph aw pi bi"><span id="666d" class="nt lz jg pf b gy pj pk l pl pm">olsr_model = sm.<strong class="pf jh">OLS</strong>(<strong class="pf jh">endog</strong>=y_train, <strong class="pf jh">exog</strong>=X_train)<br/><br/>olsr_model_results = olsr_model.<strong class="pf jh">fit</strong>()</span></pre><p id="a3f3" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">让我们打印培训总结:</p><pre class="my mz na nb gt pe pf pg ph aw pi bi"><span id="bca9" class="nt lz jg pf b gy pj pk l pl pm"><strong class="pf jh">print</strong>(olsr_model_results.<strong class="pf jh">summary</strong>())</span></pre><p id="effb" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">我们看到下面的输出(我强调了一些有趣的元素):</p><figure class="my mz na nb gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi pp"><img src="../Images/8aeb8a70d19d5aba315dee2b694b0c52.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*C26YbrACYi8MMVB1B9mggg.png"/></div></div><p class="iz ja gj gh gi jb jc bd b be z dk translated">培训总结(图片由作者提供)</p></figure><h2 id="a979" class="nt lz jg bd ma nu nv dn me nw nx dp mi le ny nz mk li oa ob mm lm oc od mo oe bi translated">如何解释回归模型的训练效果</h2><p id="0d88" class="pw-post-body-paragraph kv kw jg kx b ky nl kh la lb nm kk ld le nn lg lh li no lk ll lm np lo lp lq ij bi translated">调整后的R平方为0.210，这意味着该模型能够解释<em class="mt"> G1 </em>得分中21%的方差。<a class="ae jd" rel="noopener" target="_blank" href="/fisher-test-for-regression-analysis-1e1687867259"> F检验</a>的F统计量为15.96，在p值为&lt;0.001时显著，这意味着模型的变量<em class="mt">和</em>都高度显著。与简单的均值模型相比，该模型能够更好地解释学生表现的差异。</p><p id="49a7" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">接下来，让我们注意到，几乎所有的系数在p值为0.05或更低时都具有统计显著性。</p><p id="d475" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">系数<em class="mt"> famsup </em>在p为. 061时显著，交互项<em class="mt"> failures*sex </em>在p为. 073时显著。</p><p id="52ae" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">拟合模型的方程如下:</p><figure class="my mz na nb gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi pq"><img src="../Images/e954d9cca3f3e937a80c510992f1a92e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*i-aA0861gIkYKM-OUyIBXg.png"/></div></div><p class="iz ja gj gh gi jb jc bd b be z dk translated">拟合模型的方程(图片由作者提供)</p></figure><h2 id="81f2" class="nt lz jg bd ma nu nv dn me nw nx dp mi le ny nz mk li oa ob mm lm oc od mo oe bi translated">系数的解释</h2><p id="e2c2" class="pw-post-body-paragraph kv kw jg kx b ky nl kh la lb nm kk ld le nn lg lh li no lk ll lm np lo lp lq ij bi translated">让我们看看如何解释拟合模型的各种系数。</p><p id="d498" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">故障对<em class="mt"> G1 </em>的部分影响由下式给出:</p><figure class="my mz na nb gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi pr"><img src="../Images/ba10978c1169a9c70a64c50837620d62.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*eNBQo1Srl9o0Z5wypyeFXw.png"/></div></div><p class="iz ja gj gh gi jb jc bd b be z dk translated">失败对G1的部分影响(图片由作者提供)</p></figure><p id="ce85" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><em class="mt">失效系数</em>为-1.7986。由于交互项<em class="mt">(失败*性)</em>的存在，-1.7986是<em class="mt">不再是过去失败对期望<em class="mt"> G1 </em>分数的主要影响</em>。事实上，除了在<em class="mt">性别</em>的系数为0的情况下，人们不应该赋予这个系数的值任何意义，在这种情况下，它不是。因此，我们能做的最好的事情是计算数据集中每一行的<em class="mt">故障</em>对<em class="mt"> E(G1) </em>的部分影响，并将所有这些值的平均值视为<em class="mt">故障</em>对<em class="mt"> E(G1) </em>的主要影响。如前所述，这种策略的价值值得怀疑，考虑到交互项的存在，更安全的方法是放弃计算<em class="mt">故障</em>的主要影响。</p><p id="c504" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">请注意，在解释训练输出中的<em class="mt">性别</em>系数时，完全相同的一组考虑因素成立。</p><p id="c807" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">在解释<em class="mt"> schoolsup </em>、<em class="mt"> famsup </em>、<em class="mt"> studytime </em>和<em class="mt"> goout </em>的系数时，考虑因素发生了巨大变化。交互项<em class="mt">(故障*性别)</em>中不涉及这些变量，导致其系数的直接解释如下。</p><p id="64b1" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">对所有学生来说，他们花在“外出”上的时间每增加一个单位，他们的<em class="mt"> G1 </em>分数的估计平均降幅为. 3105。这是<em class="mt"> goout </em>对<em class="mt"> E(G1) </em>的局部效果。也是<em class="mt"> goout </em>对<em class="mt"> E(G1) </em>的主要效果。</p><p id="ad7c" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">同样，布尔变量<em class="mt"> schoolsup </em>和<em class="mt"> famsup </em>的系数是该变量对<em class="mt"> E(G1) </em>各自的部分影响，也是该变量对<em class="mt"> E(G1) </em>各自的主要影响。令人惊讶的是，两个系数都是负的，这表明从学校或家庭获得额外支持的学生平均比那些没有获得支持的学生表现更差。解释这一结果的一种方法是假设大多数接受额外支持的学生是因为他们的数学成绩不好而接受的。</p><p id="090d" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">另一方面，<em class="mt">学习时间</em>与<em class="mt"> G1 </em>分数具有可预测的正关系。<em class="mt">学习时间</em>每增加一个单位，导致<em class="mt"> G1 </em>分数增加0.5848分。</p><p id="3176" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">最后，让我们检查失败与<em class="mt">性别</em>的交互作用<em class="mt">。互动项的系数(<em class="mt">失败*性别</em>)为正，表明学生经历的过去失败次数每增加一个单位，男生在<em class="mt"> G1 </em>分数中似乎对女生的领先优势就迅速消失，减少了0.7312分，这是<em class="mt">(失败*性别)</em>的系数。这一结论通过对<em class="mt"> E(G1) </em> w.r.t. <em class="mt">性别</em>求导得到证实，这给出了<em class="mt">性别</em>对平均<em class="mt"> G1 </em>分数的部分影响:</em></p><figure class="my mz na nb gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi ps"><img src="../Images/de1155d6d485a034b256b7e7744793b7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_5khOV0I4z-3QM-JBsU0vQ.png"/></div></div><p class="iz ja gj gh gi jb jc bd b be z dk translated">性别对平均G1分数的部分影响(图片由作者提供)</p></figure><p id="9bc9" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">从上面的等式(以及下面显示的这个等式的曲线图)中，我们可以看到<em class="mt">性别</em>对<em class="mt"> E(G1) </em>的部分影响随着过去失败次数的增加而很快反转其符号:</p><figure class="my mz na nb gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi pt"><img src="../Images/7a50e59722d3ee4078a66459bf4e1f08.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*e5V0h82uV0LfBmCTyLk0Eg.png"/></div></div><p class="iz ja gj gh gi jb jc bd b be z dk translated">随着过去失败次数的增加，性别对G1的部分影响发生了变化</p></figure><p id="46be" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">下面的表格和图表显示了对相同情况的另一种看法(经验观点)。它显示了从数据集中计算出的男女学生过去失败的平均分数:</p><figure class="my mz na nb gt is gh gi paragraph-image"><div class="gh gi pa"><img src="../Images/7cca5197bae2135b6fdb2110d7c855ec.png" data-original-src="https://miro.medium.com/v2/resize:fit:1032/format:webp/1*18Ckp6ir0tsGfP_uXEJjeA.png"/></div><p class="iz ja gj gh gi jb jc bd b be z dk translated">男女学生对过去失败的不同价值观的平均分(图片由作者提供)</p></figure><figure class="my mz na nb gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi pu"><img src="../Images/3eca0cc2ad77b72f15b6a18a445186b0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ER9OhTU0ngwnwJsw10EKGA.png"/></div></div><p class="iz ja gj gh gi jb jc bd b be z dk translated">男女学生对过去失败的不同价值观的平均分(图片由作者提供)</p></figure><p id="73b8" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">正如预期的那样，我们看到经验结果与模型结果一致，模型结果使用了性别对G1的部分影响的方程。随着过去失败次数的增加，男女学生的G1分数差异迅速逆转。过去失败的次数越多，对男生成绩的负面影响似乎就越大。这种现象背后的原因很可能源于模型中的其他因素，或者它们可能是从根本上不可观察的影响，会泄漏到模型的误差项中。</p><p id="696a" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">通过在回归模型中包含<strong class="kx jh">相互作用项</strong>，这种观察是可能的。如果在回归模型中只包括性别和失败的主要影响，我们将很难发现这种模式。</p></div><div class="ab cl lr ls hu lt" role="separator"><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw"/></div><div class="ij ik il im in"><h1 id="e9e9" class="ly lz jg bd ma mb ov md me mf ow mh mi km ox kn mk kp oy kq mm ks oz kt mo mp bi translated">关键要点</h1><ul class=""><li id="655d" class="oh oi jg kx b ky nl lb nm le pv li pw lm px lq om on oo op bi translated">在回归模型中，回归变量的<strong class="kx jh">部分效应</strong>或<strong class="kx jh">边际效应</strong>是回归变量中每单位变化的响应变量的值的变化。</li><li id="e653" class="oh oi jg kx b ky oq lb or le os li ot lm ou lq om on oo op bi translated">在仅包含线性项的线性模型中，即不包含二次项、对数项和其他种类的非线性项，每个回归变量的<strong class="kx jh">主效应</strong>与其部分效应相同。</li><li id="dc7d" class="oh oi jg kx b ky oq lb or le os li ot lm ou lq om on oo op bi translated">对于所有其他模型，变量的<strong class="kx jh">主效应</strong>可以通过在整个数据集上平均变量的部分效应来计算。这充其量是一个近似值，基本上适用于手头的数据集。因此，一些从业者宁愿完全忽略这类模型中的主要影响。</li><li id="d288" class="oh oi jg kx b ky oq lb or le os li ot lm ou lq om on oo op bi translated"><strong class="kx jh">交互项</strong>帮助建模者估计一个回归变量对模型中其他变量<em class="mt">的影响，它们共同解释了响应变量</em>中的方差。</li><li id="31df" class="oh oi jg kx b ky oq lb or le os li ot lm ou lq om on oo op bi translated">在某些简单的线性模型中，相互作用项的系数可以用来估计<strong class="kx jh">相互作用效应</strong>的大小。然而，在大多数模型中，人们不应该赋予相互作用项的系数任何意义。</li></ul></div><div class="ab cl lr ls hu lt" role="separator"><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw"/></div><div class="ij ik il im in"><h1 id="1810" class="ly lz jg bd ma mb ov md me mf ow mh mi km ox kn mk kp oy kq mm ks oz kt mo mp bi translated">参考文献、引文和版权</h1><h2 id="93be" class="nt lz jg bd ma nu nv dn me nw nx dp mi le ny nz mk li oa ob mm lm oc od mo oe bi translated">数据集</h2><p id="4c1f" class="pw-post-body-paragraph kv kw jg kx b ky nl kh la lb nm kk ld le nn lg lh li no lk ll lm np lo lp lq ij bi translated">来自<a class="ae jd" href="https://archive-beta.ics.uci.edu/ml/datasets/student+performance" rel="noopener ugc nofollow" target="_blank"> UCI机器学习库</a>的学生成绩数据集由4.0 在<a class="ae jd" href="https://creativecommons.org/licenses/by/4.0/legalcode" rel="noopener ugc nofollow" target="_blank"> CC下使用，并符合其</a><a class="ae jd" href="https://archive.ics.uci.edu/ml/citation_policy.html" rel="noopener ugc nofollow" target="_blank">引用政策</a>(见下文):</p><p id="ad3f" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">Dua d .和Graff c .(2019年)。UCI机器学习知识库[http://archive . ics . UCI . edu/ml]。加州欧文:加州大学信息与计算机科学学院。</p><p id="9cc8" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">本文中使用的数据集的精选版本<a class="ae jd" href="https://gist.github.com/sachinsdate/76eaeda29fab2668cd0bb637c1a14e25" rel="noopener ugc nofollow" target="_blank"> <strong class="kx jh">可以从这里</strong> </a>下载。</p><h2 id="9297" class="nt lz jg bd ma nu nv dn me nw nx dp mi le ny nz mk li oa ob mm lm oc od mo oe bi translated">纸</h2><p id="a031" class="pw-post-body-paragraph kv kw jg kx b ky nl kh la lb nm kk ld le nn lg lh li no lk ll lm np lo lp lq ij bi translated">页（page的缩写）科尔特斯和a .席尔瓦。使用数据挖掘预测中学生成绩。<em class="mt">在a .布里托和j .特谢拉编辑的。，第五届未来商业技术会议论文集(FUBUTEC 2008)第5–12页，葡萄牙波尔图，2008年4月，EUROSIS </em>，ISBN 978–9077381–39–7。<br/> <a class="ae jd" href="http://www3.dsi.uminho.pt/pcortez/student.pdf" rel="noopener ugc nofollow" target="_blank">【网页链接】</a></p><h2 id="eb3c" class="nt lz jg bd ma nu nv dn me nw nx dp mi le ny nz mk li oa ob mm lm oc od mo oe bi translated">形象</h2><p id="7d20" class="pw-post-body-paragraph kv kw jg kx b ky nl kh la lb nm kk ld le nn lg lh li no lk ll lm np lo lp lq ij bi translated">本文中的所有图片版权归<a class="ae jd" href="https://www.linkedin.com/in/sachindate/" rel="noopener ugc nofollow" target="_blank"> Sachin Date </a>所有，版权归<a class="ae jd" href="https://creativecommons.org/licenses/by-nc-sa/4.0/" rel="noopener ugc nofollow" target="_blank"> CC-BY-NC-SA </a>所有，除非图片下方提到了不同的来源和版权。</p></div><div class="ab cl lr ls hu lt" role="separator"><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw"/></div><div class="ij ik il im in"><p id="8036" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><em class="mt">如果您喜欢这篇文章，请关注我的</em><a class="ae jd" href="https://timeseriesreasoning.medium.com" rel="noopener"><strong class="kx jh"><em class="mt">Sachin Date</em></strong></a><em class="mt">以获得关于回归、时间序列分析和预测主题的提示、操作方法和编程建议。</em></p></div></div>    
</body>
</html>