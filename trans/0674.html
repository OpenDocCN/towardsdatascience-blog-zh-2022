<html>
<head>
<title>Build a Django CRUD App by Using Class-Based Views</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用基于类的视图构建 Django CRUD 应用程序</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/build-a-django-crud-app-by-using-class-based-views-12bc69d36ab6#2022-02-28">https://towardsdatascience.com/build-a-django-crud-app-by-using-class-based-views-12bc69d36ab6#2022-02-28</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="597e" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">是的，对姜戈来说就是这么简单和快速</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/1099d84c220645bb60a253ee9ef37eff.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xbgILuxzBtDBWvwJGd-6ZA.jpeg"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">丹尼尔·科尔派在<a class="ae kv" href="https://unsplash.com/s/photos/screen?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure><p id="7627" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir">简介</strong></p><p id="d107" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在本教程中，我将向您展示如何使用 Django 最强大的功能之一:基于类的视图(CBV)来构建一个完全功能化的 CRUD(创建-读取-更新-删除)应用程序。这种方法最大化了代码重用，并允许您更快、更有效地构建 Django 应用程序。</p><p id="8a0c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">所以，没有任何延迟，让我们开始吧。我们将创建一个简单的应用程序来管理电影及其流派的信息。如果你愿意，可以访问<a class="ae kv" href="https://github.com/fabricius1/DjangoFilmsCRUD" rel="noopener ugc nofollow" target="_blank">我的 GitHub 库上的完整代码。或者继续阅读并遵循以下步骤。我使用 GitBash for Windows 作为我的终端，所以这里的一些命令可能需要适应您的首选终端，特别是如果您使用 Power Shell 或 Windows 命令提示符。</a></p><p id="5311" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir">第 1 部分:建立项目</strong></p><p id="a3bf" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">1.创建您的项目文件夹，并在其中移动。我把我的叫做<code class="fe ls lt lu lv b">films_project</code>。</p><pre class="kg kh ki kj gt lw lv lx ly aw lz bi"><span id="3401" class="ma mb iq lv b gy mc md l me mf">mkdir films_project<br/>cd films_project</span></pre><p id="2dd5" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">2.用<code class="fe ls lt lu lv b">venv</code>(我的名字叫<code class="fe ls lt lu lv b">.myenv</code>)创建一个新的虚拟环境。</p><pre class="kg kh ki kj gt lw lv lx ly aw lz bi"><span id="a6e5" class="ma mb iq lv b gy mc md l me mf">python -m venv .myenv</span></pre><p id="0f3f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">3.现在激活你的虚拟环境。下面的命令适用于 GitBash。参考这个<a class="ae kv" href="https://docs.python.org/3/library/venv.html" rel="noopener ugc nofollow" target="_blank"> Python 文档页面</a>来检查你的终端和操作系统的命令。</p><pre class="kg kh ki kj gt lw lv lx ly aw lz bi"><span id="7296" class="ma mb iq lv b gy mc md l me mf">source .myenv/Scripts/activate</span></pre><p id="14ae" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">4.安装我们在这个项目中需要的 Python 包:</p><pre class="kg kh ki kj gt lw lv lx ly aw lz bi"><span id="7624" class="ma mb iq lv b gy mc md l me mf">pip install django django-extensions</span></pre><p id="0a6d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">5.创建一个<code class="fe ls lt lu lv b">requirements.txt</code>文件。您可以使用以下命令:</p><pre class="kg kh ki kj gt lw lv lx ly aw lz bi"><span id="262b" class="ma mb iq lv b gy mc md l me mf">pip freeze | grep -i django &gt;&gt; requirements.txt</span></pre><p id="bfb2" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">6.开始一个新的 Django 项目。我的就叫<code class="fe ls lt lu lv b">project</code>。不要忘记在这个命令的末尾加上点。</p><pre class="kg kh ki kj gt lw lv lx ly aw lz bi"><span id="19ae" class="ma mb iq lv b gy mc md l me mf">django-admin startproject project .</span></pre><p id="e850" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">7.启动一个叫<code class="fe ls lt lu lv b">films</code>的 Django app。</p><pre class="kg kh ki kj gt lw lv lx ly aw lz bi"><span id="6a8e" class="ma mb iq lv b gy mc md l me mf">python manage.py startapp films</span></pre><p id="ef25" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">8.打开<code class="fe ls lt lu lv b">project/settings.py</code>并将<code class="fe ls lt lu lv b">django_extensions</code>和<code class="fe ls lt lu lv b">films</code>应用添加到<code class="fe ls lt lu lv b">INSTALLED APPS</code>列表中。不要换其他线。</p><pre class="kg kh ki kj gt lw lv lx ly aw lz bi"><span id="3694" class="ma mb iq lv b gy mc md l me mf">INSTALLED_APPS = [<br/>    'django.contrib.admin',<br/>    'django.contrib.auth',<br/>    'django.contrib.contenttypes',<br/>    'django.contrib.sessions',<br/>    'django.contrib.messages',<br/>    'django.contrib.staticfiles',</span><span id="60b6" class="ma mb iq lv b gy mg md l me mf">    # add these lines: <br/>    'django_extensions',<br/>    'films.apps.FilmsConfig',<br/>]</span></pre><p id="14af" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">9.应用迁移在 sqlite3 数据库中创建表。</p><pre class="kg kh ki kj gt lw lv lx ly aw lz bi"><span id="9359" class="ma mb iq lv b gy mc md l me mf">python manage.py migrate</span></pre><p id="6b24" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">10.通过运行以下命令创建超级用户:</p><pre class="kg kh ki kj gt lw lv lx ly aw lz bi"><span id="64fe" class="ma mb iq lv b gy mc md l me mf">python manage.py createsuperuser</span></pre><p id="73d0" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">告知用户名、电子邮件和密码。稍后，您将使用这些数据登录管理区域。</p><p id="ee38" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">11.使用<code class="fe ls lt lu lv b">python manage.py runserver</code>运行服务器，访问<code class="fe ls lt lu lv b">http://localhost:8000</code>并检查应用程序是否正常工作。</p><p id="39f2" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">12.去<code class="fe ls lt lu lv b">http://localhost:8000/admin</code>，使用你的登录数据，检查你是否可以访问管理区。</p><p id="60b8" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir">第二部分:定义模型</strong></p><p id="a3cc" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">13.在<code class="fe ls lt lu lv b">films/models.py</code>中，输入以下代码:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mh mi l"/></div></figure><p id="cd2f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们正在创建两个模型类(<code class="fe ls lt lu lv b">Film</code>和<code class="fe ls lt lu lv b">Genre</code>)，它们之间有一个简化的关系，因为一部电影在这里只能有一个类型。将来，如果需要，您可以将这些表之间的关系改为多对多关系，或者您甚至可以向模型中添加其他实体，如主管或奖项。</p><p id="73bc" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在<code class="fe ls lt lu lv b">Films</code>类中，注意重要的<code class="fe ls lt lu lv b">get_fields()</code>方法。这将为<code class="fe ls lt lu lv b">films_film</code>表中除 id 之外的每一列创建一个标签/值对列表，我们可以在未来的<code class="fe ls lt lu lv b">film_detail.html</code>模板中的 for 循环中使用这个结构。如果我们在一个模型中有几十甚至几百个列，这样的结构可能会更有帮助，所以这段代码可能值得保存起来供将来的项目使用。</p><p id="064f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir">第 3 部分:使用管理区创建新类别</strong></p><p id="5dc6" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">14.运行命令在数据库中创建新表:</p><pre class="kg kh ki kj gt lw lv lx ly aw lz bi"><span id="2130" class="ma mb iq lv b gy mc md l me mf">python manage.py makemigrations<br/>python manage.py migrate</span></pre><p id="b438" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">15.打开<code class="fe ls lt lu lv b">films/admin.py</code>，写下这几行。现在<code class="fe ls lt lu lv b">Films</code>和<code class="fe ls lt lu lv b">Genre</code>型号将出现在管理区:</p><pre class="kg kh ki kj gt lw lv lx ly aw lz bi"><span id="53f7" class="ma mb iq lv b gy mc md l me mf">from django.contrib import admin<br/>from .models import Film, Genre</span><span id="3857" class="ma mb iq lv b gy mg md l me mf">admin.site.register(Film)<br/>admin.site.register(Genre)</span></pre><p id="7ac3" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">16.接下来，登录到管理区域，选择<code class="fe ls lt lu lv b">Genre</code>型号，然后创建并保存两到三个新流派。当我们使用 films CRUD 保存新电影时，我们将需要这些类型。</p><p id="7150" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir">第 4 部分:构建应用程序路线和基于类别的视图</strong></p><p id="86a7" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">17.创建<code class="fe ls lt lu lv b">films/urls.py</code>文件。</p><p id="9707" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">18.打开<code class="fe ls lt lu lv b">project/urls.py</code>，导入<code class="fe ls lt lu lv b">include</code>函数，并使用它创建一条新路线:</p><pre class="kg kh ki kj gt lw lv lx ly aw lz bi"><span id="51db" class="ma mb iq lv b gy mc md l me mf">from django.contrib import admin<br/>from django.urls import path, include # added</span><span id="41bc" class="ma mb iq lv b gy mg md l me mf">urlpatterns = [<br/>    path('', include('films.urls')), # added<br/>    path('admin/', admin.site.urls),<br/>]</span></pre><p id="693a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">19.接下来，打开<code class="fe ls lt lu lv b">films/urls.py</code>并添加以下代码。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mh mi l"/></div></figure><p id="9d77" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">CBV 尚未创建，因此此时运行服务器将会产生错误。</p><p id="c880" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">20.在<code class="fe ls lt lu lv b">films/views.py</code>中，这段代码将创建我们需要的通用 CBV:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mh mi l"/></div></figure><p id="d1d9" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">注意这段代码有多简洁:我们只创建了一个<code class="fe ls lt lu lv b">FilmBaseView</code>，这样我们就不会重复<code class="fe ls lt lu lv b">model</code>、<code class="fe ls lt lu lv b">fields</code>和<code class="fe ls lt lu lv b">success_url</code>信息行，然后我们让我们的电影视图类继承了<code class="fe ls lt lu lv b">FilmBaseView</code>和 Django 已经拥有的用于 CRUD 操作的通用视图类。所有这些都不需要使用表单逻辑，也不需要编写代码来访问数据库，然后将这些信息保存在上下文字典中。Django 的 CBV 已经设计出了这些程序。这样做的好处是，我们可以随时修改它们的任何方法，并根据我们的特定需求向视图类添加新的行为。</p><p id="5105" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在我们只需要创建模板来显示和更改我们的电影类视图提供的信息。</p><p id="2314" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir">第 5 部分:创建模板</strong></p><p id="6553" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">21.打开<code class="fe ls lt lu lv b">project/settings.py</code>，在变量<code class="fe ls lt lu lv b">TEMPLATES</code>中，用以下信息填充<code class="fe ls lt lu lv b">TEMPLATES['DIR']</code>键中的空列表(只改变这一行，保持另一行不变):</p><pre class="kg kh ki kj gt lw lv lx ly aw lz bi"><span id="e56f" class="ma mb iq lv b gy mc md l me mf">TEMPLATES = [<br/>{</span><span id="9652" class="ma mb iq lv b gy mg md l me mf">(...)</span><span id="de2f" class="ma mb iq lv b gy mg md l me mf">'DIRS': [ BASE_DIR.joinpath('templates') ],</span><span id="3586" class="ma mb iq lv b gy mg md l me mf">(...)</span><span id="233e" class="ma mb iq lv b gy mg md l me mf">}<br/>]</span></pre><p id="f0d9" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">22.确保您在根项目中(文件夹<code class="fe ls lt lu lv b">films_project</code>，与<code class="fe ls lt lu lv b">manage.py</code>在同一层)，然后创建这三个新文件夹。</p><pre class="kg kh ki kj gt lw lv lx ly aw lz bi"><span id="a3f1" class="ma mb iq lv b gy mc md l me mf">mkdir templates films/templates films/templates/films</span></pre><p id="00c1" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在，是时候创建我们将用作电影 CRUD 模板的 HTML 文件了。然而，在我们这样做之前，一个实际的观察:事实上，我认为最好不要在这里复制模板代码，因为大部分代码都太长了。因此，我将提供一些链接，链接到保存在我的 GitHub 库中的每个模板文件的原始内容，以便您可以复制/粘贴或转录到您自己的代码中。</p><p id="2e1f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">23.创建一个<code class="fe ls lt lu lv b">templates/base.html</code>文件。这个文件不应该在<code class="fe ls lt lu lv b">films</code>模板文件夹中，要小心。</p><ul class=""><li id="f94c" class="mj mk iq ky b kz la lc ld lf ml lj mm ln mn lr mo mp mq mr bi translated"><code class="fe ls lt lu lv b">touch templates/base.html</code> ( <a class="ae kv" href="https://raw.githubusercontent.com/fabricius1/DjangoFilmsCRUD/master/templates/base.html" rel="noopener ugc nofollow" target="_blank">内容此处</a>)；</li></ul><p id="c5fe" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">24.在<code class="fe ls lt lu lv b">films/templates/films</code>文件夹中，创建四个文件名如下的文件，因为这些是 Django 的通用视图使用的模板名称模式:</p><ul class=""><li id="8602" class="mj mk iq ky b kz la lc ld lf ml lj mm ln mn lr mo mp mq mr bi translated"><code class="fe ls lt lu lv b">film_confirm_delete.html</code>(此处<a class="ae kv" href="https://raw.githubusercontent.com/fabricius1/DjangoFilmsCRUD/master/films/templates/films/film_confirm_delete.html" rel="noopener ugc nofollow" target="_blank">内容</a>)；</li><li id="1bb8" class="mj mk iq ky b kz ms lc mt lf mu lj mv ln mw lr mo mp mq mr bi translated"><code class="fe ls lt lu lv b">film_detail.html</code> ( <a class="ae kv" href="https://raw.githubusercontent.com/fabricius1/DjangoFilmsCRUD/master/films/templates/films/film_detail.html" rel="noopener ugc nofollow" target="_blank">内容此处</a>)；</li><li id="852c" class="mj mk iq ky b kz ms lc mt lf mu lj mv ln mw lr mo mp mq mr bi translated"><code class="fe ls lt lu lv b">film_form.html</code>(此处<a class="ae kv" href="https://raw.githubusercontent.com/fabricius1/DjangoFilmsCRUD/master/films/templates/films/film_form.html" rel="noopener ugc nofollow" target="_blank">内容</a>)；</li><li id="6bb2" class="mj mk iq ky b kz ms lc mt lf mu lj mv ln mw lr mo mp mq mr bi translated"><code class="fe ls lt lu lv b">film_list.html</code> ( <a class="ae kv" href="https://github.com/fabricius1/DjangoFilmsCRUD/blob/master/films/templates/films/film_list.html" rel="noopener ugc nofollow" target="_blank">内容此处</a>)；</li></ul><p id="da62" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">您可以通过在 Linux 终端(或 Git Bash)中运行这一行代码来立即创建这些文件:</p><pre class="kg kh ki kj gt lw lv lx ly aw lz bi"><span id="46ab" class="ma mb iq lv b gy mc md l me mf">touch films/templates/films/film_{confirm_delete,detail,form,list}.html</span></pre><p id="c3e3" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">注意这些 HTML 文件名是如何在前面加上<code class="fe ls lt lu lv b">film_</code>的，这是我们的模型名，用小大写字母加上下划线。在未来的 Django 项目中，当使用 CBV 创建 CRUD 应用程序时，您应该使用这种模式。</p><p id="b70f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">25.运行<code class="fe ls lt lu lv b">python manage.py check</code>看看有没有错误；然后用<code class="fe ls lt lu lv b">python manage.py runserver</code>运行服务器。您的 CRUD films 应用程序已经完成，现在您可以使用它来列出、添加、更新和删除电影信息。</p><p id="ad04" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir">第 6 部分:使用 PYTHON 脚本向你的数据库添加一些额外的电影</strong></p><p id="c527" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">探索您的新应用程序，并对其进行一些更改。如果你想要额外的数据，你可以把我准备的 20 多部皮克斯电影加载到 Django 中。你只需要遵循以下步骤:</p><p id="1a2f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">26.在<code class="fe ls lt lu lv b">manage.py</code>的同一层创建一个<code class="fe ls lt lu lv b">scripts</code>文件夹</p><p id="e935" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">27.创建一个<code class="fe ls lt lu lv b">films/pixar.csv</code>文件，然后<a class="ae kv" href="https://raw.githubusercontent.com/fabricius1/DjangoFilmsCRUD/master/films/pixar.csv" rel="noopener ugc nofollow" target="_blank">将该内容复制到其中</a>。</p><p id="3dd9" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">28.创建一个<code class="fe ls lt lu lv b">scripts/load_pixar.py</code>文件，<a class="ae kv" href="https://raw.githubusercontent.com/fabricius1/DjangoFilmsCRUD/master/scripts/load_pixar.py" rel="noopener ugc nofollow" target="_blank">将该内容复制到其中</a>。</p><p id="aa24" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">29.运行<code class="fe ls lt lu lv b">python manage.py runscript load_pixar</code>。访问您的电影应用程序，并检查它是如何填充皮克斯电影信息的。</p><p id="7cd8" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果您想了解更多关于在 Django 中运行 Python 脚本的知识，我邀请您阅读我写的另一篇教程:</p><div class="mx my gp gr mz na"><a rel="noopener follow" target="_blank" href="/use-python-scripts-to-insert-csv-data-into-django-databases-72eee7c6a433"><div class="nb ab fo"><div class="nc ab nd cl cj ne"><h2 class="bd ir gy z fp nf fr fs ng fu fw ip bi translated">使用 Python 脚本将 CSV 数据插入 Django 数据库</h2><div class="nh l"><h3 class="bd b gy z fp nf fr fs ng fu fw dk translated">Django-extensions 是您正在寻找的工具</h3></div><div class="ni l"><p class="bd b dl z fp nf fr fs ng fu fw dk translated">towardsdatascience.com</p></div></div><div class="nj l"><div class="nk l nl nm nn nj no kp na"/></div></div></a></div><p id="1e49" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir">最后备注:制作你自己的 DJANGO CRUD 应用</strong></p><p id="8986" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在，您已经拥有了使用自己的模型构建更复杂的 Django CRUD 应用程序的所有必要工具。</p><p id="e302" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">例如，假设您有三个表:机构、项目和课程。一个机构可以提交多个项目，一个项目可以有一个或多个与之相关的课程。</p><p id="31f0" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">要在这种情况下制作 Django CRUD，您只需要在一个新的 Django 项目中按照我们上面讨论的这三个实体的步骤:</p><ul class=""><li id="500b" class="mj mk iq ky b kz la lc ld lf ml lj mm ln mn lr mo mp mq mr bi translated">在一个<code class="fe ls lt lu lv b">models.py</code>文件中定义模型；</li><li id="40c8" class="mj mk iq ky b kz ms lc mt lf mu lj mv ln mw lr mo mp mq mr bi translated">在一个<code class="fe ls lt lu lv b">urls.py</code>文件中，按照我们展示的模式，为每个模型创建五条路线。因为我们有三个模型，所以总共有 15 个路由，可能还有一个主页。你可以在导航栏中设置链接，直接进入各自的<em class="np">列表，所有</em>页面的机构、项目和课程。</li><li id="88b5" class="mj mk iq ky b kz ms lc mt lf mu lj mv ln mw lr mo mp mq mr bi translated">将所有必要的代码放入<code class="fe ls lt lu lv b">views.py</code>。我们为电影创建了六个基于类的视图，所以我们总共有 18 个 CBV:6 个用于机构，6 个用于项目，6 个用于课程，所有这些都在同一个文件中。</li><li id="d77d" class="mj mk iq ky b kz ms lc mt lf mu lj mv ln mw lr mo mp mq mr bi translated">最后，只需为您的 CRUD 创建 12 个模板文件(每个模型 4 个)，遵循 HTML 名称模式并在模板 HTML 代码中进行必要的更改。</li></ul><p id="cabf" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">一旦你有了这个电影的启动代码，就可以很容易很快地为你自己的项目复制代码，并根据你的具体需要进行必要的调整。</p><p id="a44c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我自己最近有一个非常好的经历，当我设法在仅仅几个小时的工作中构建了我上面向我妻子描述的几乎精确的 CRUD。而<code class="fe ls lt lu lv b">models.py</code>变成了一个巨大的，例如，仅课程模型就有超过 50 列。所以，我花了大部分时间对数据建模；一旦完成，安装和运行 CRUD 应用程序就变得超级简单和快速。</p><p id="198a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在这段代码投入生产之前，我和我的妻子仍然会讨论一些调整和改进，但是这样的经历足以向我展示用 Django 构建 CRUD 应用程序是多么容易。如果你把你在这里学到的东西和一个更简洁、更精细的前端结合起来，你可能会用你新的 Django 编码技能给你的客户或潜在雇主带来惊喜。</p><p id="14a5" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">亲爱的读者，非常感谢你花时间和精力阅读我的文章。</p><p id="e862" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><em class="np">编码快乐！</em></p></div></div>    
</body>
</html>