<html>
<head>
<title>How to Perform Speech-To-Text and Remove PII with Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何使用 Python 执行语音转文本和删除 PII</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/speech-to-text-pii-python-assemblyai-45dfcc02eebe#2022-02-02">https://towardsdatascience.com/speech-to-text-pii-python-assemblyai-45dfcc02eebe#2022-02-02</a></blockquote><div><div class="fc ii ij ik il im"/><div class="in io ip iq ir"><div class=""/><div class=""><h2 id="88be" class="pw-subtitle-paragraph jr it iu bd b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki dk translated">使用 AssemblyAI 和 Python 从文本转录中移除个人身份信息(PII)</h2></div><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj kj"><img src="../Images/37b59032a6491817cc795679e70fea8c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WunwV-Uvs79kUBlPkK4lrA.jpeg"/></div></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">本·斯威特在<a class="ae kz" href="https://unsplash.com/s/photos/identity?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</p></figure><h2 id="1df9" class="la lb iu bd lc ld le dn lf lg lh dp li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">介绍</h2><p id="961a" class="pw-post-body-paragraph lw lx iu ly b lz ma jv mb mc md jy me lj mf mg mh ln mi mj mk lr ml mm mn mo in bi translated">在我最近的两篇文章中，我讨论了关于音频转录的<a class="ae kz" rel="noopener" target="_blank" href="/profanity-filtering-audio-files-python-3dd2335bc567"> <em class="mp">脏话过滤</em> </a>和<a class="ae kz" rel="noopener" target="_blank" href="/content-moderation-python-assemblyai-4a09ca61d346">敏感内容检测</a>。数据处理和存储的另一个重要方面是如何处理敏感数据。</p><p id="471f" class="pw-post-body-paragraph lw lx iu ly b lz mq jv mb mc mr jy me lj ms mg mh ln mt mj mk lr mu mm mn mo in bi translated">用来描述敏感数据的一个常用术语是<strong class="ly iv">个人身份信息</strong> (PII)。一般来说，任何可以用来(或结合其他信息)识别、<strong class="ly iv">联系人</strong>或<strong class="ly iv">定位</strong>个人的信息都被认为是 PII。</p><p id="e12d" class="pw-post-body-paragraph lw lx iu ly b lz mq jv mb mc mr jy me lj ms mg mh ln mt mj mk lr mu mm mn mo in bi translated">根据美国<a class="ae kz" href="https://www.nist.gov/publications/guide-protecting-confidentiality-personally-identifiable-information-pii" rel="noopener ugc nofollow" target="_blank">国家标准与技术研究院</a> (NIST)的规定，以下数据元素被视为个人身份信息:全名、面部数据、地址、电子邮件地址、身份证或护照号、指纹、信用卡号、出生日期、出生地、基因信息、电话号码、登录名、昵称、驾照或车牌号。</p><p id="d592" class="pw-post-body-paragraph lw lx iu ly b lz mq jv mb mc mr jy me lj ms mg mh ln mt mj mk lr mu mm mn mo in bi translated">例如，考虑客户和代理之间的电话呼叫，其中前者需要提供信用卡信息。同时，该公司可能会出于监控或培训目的对通话进行录音。因此，我们需要编辑信用卡信息，以确保没有 PII 出现。另一个例子是医疗记录中的健康信息编辑。</p><p id="4b24" class="pw-post-body-paragraph lw lx iu ly b lz mq jv mb mc mr jy me lj ms mg mh ln mt mj mk lr mu mm mn mo in bi translated">在今天的教程中，我们将使用 AssemblyAI API 和 Python 来对音频文件执行语音到文本转换，同时确保消除个人身份信息。</p></div><div class="ab cl mv mw hy mx" role="separator"><span class="my bw bk mz na nb"/><span class="my bw bk mz na nb"/><span class="my bw bk mz na"/></div><div class="in io ip iq ir"><h2 id="0012" class="la lb iu bd lc ld le dn lf lg lh dp li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">执行语音到文本转换并消除 PII</h2><p id="b785" class="pw-post-body-paragraph lw lx iu ly b lz ma jv mb mc md jy me lj mf mg mh ln mi mj mk lr ml mm mn mo in bi translated">在本节中，我们将逐步介绍如何对输入音频文件执行文本转录，同时删除任何个人身份信息。</p><p id="768b" class="pw-post-body-paragraph lw lx iu ly b lz mq jv mb mc mr jy me lj ms mg mh ln mt mj mk lr mu mm mn mo in bi translated">为此，我们将使用 AssemblyAI API。如果你想跟随这个教程，你首先需要从他们的网站<a class="ae kz" href="https://app.assemblyai.com/signup" rel="noopener ugc nofollow" target="_blank">发布一个访问令牌</a>(这是完全免费的)，我们将在发送到 API 端点的请求的头中使用这个令牌。</p><p id="d340" class="pw-post-body-paragraph lw lx iu ly b lz mq jv mb mc mr jy me lj ms mg mh ln mt mj mk lr mu mm mn mo in bi translated">现在让我们开始导入一些今天将使用的库，并为请求准备头部，包括我们的访问令牌。</p><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="nc nd l"/></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">准备请求的标题—来源:<a class="ae kz" href="https://gmyrianthous.medium.com/" rel="noopener">作者</a></p></figure><p id="f803" class="pw-post-body-paragraph lw lx iu ly b lz mq jv mb mc mr jy me lj ms mg mh ln mt mj mk lr mu mm mn mo in bi translated">现在，我们需要做的第二件事是读取输入音频文件，然后将其上传到 AssemblyAI 的托管服务。API 的端点将返回一个链接，指向我们将在后续请求中使用的上传文件。</p><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="nc nd l"/></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">读入输入音频文件并将其上传到 AssemblyAI 主机端点—来源:<a class="ae kz" href="https://gmyrianthous.medium.com/" rel="noopener">作者</a></p></figure><p id="cc27" class="pw-post-body-paragraph lw lx iu ly b lz mq jv mb mc mr jy me lj ms mg mh ln mt mj mk lr mu mm mn mo in bi translated">既然我们已经在托管服务上上传了音频文件，我们就可以继续进行语音到文本的转换了。同时，我们将使用 AssemblyAI 的<a class="ae kz" href="https://docs.assemblyai.com/audio-intelligence#pii-redaction" rel="noopener ugc nofollow" target="_blank"> PII 修订</a>功能，以便在转录文本返回给我们之前，从转录文本中删除个人身份信息，如电话号码和社会保险号。</p><p id="37aa" class="pw-post-body-paragraph lw lx iu ly b lz mq jv mb mc mr jy me lj ms mg mh ln mt mj mk lr mu mm mn mo in bi translated">为了执行语音到文本转换，我们只需要在向 AssemblyAI 的相应端点发送我们的<code class="fe ne nf ng nh b">POST</code>请求时提供<code class="fe ne nf ng nh b">audio_url</code>参数。对于 PII 修订，我们只需要提供一个名为<code class="fe ne nf ng nh b">redact_pii</code>的附加参数，并将其设置为<code class="fe ne nf ng nh b">True</code>。</p><p id="cd86" class="pw-post-body-paragraph lw lx iu ly b lz mq jv mb mc mr jy me lj ms mg mh ln mt mj mk lr mu mm mn mo in bi translated">默认情况下，音频文件中说出的任何 PII 都将被转录为一个哈希码(<code class="fe ne nf ng nh b">#</code>)。比如提到名字<code class="fe ne nf ng nh b">John</code>，就会转录成<code class="fe ne nf ng nh b">####</code>。该默认行为可通过<code class="fe ne nf ng nh b">redact_pii_sub</code>参数控制，该参数用于定制如何替换 PII。该参数可以有两个值，或者是<code class="fe ne nf ng nh b">hash</code>(这是我们已经提到的默认值)或者是<code class="fe ne nf ng nh b">entity_name</code>。如果选择后一个值，则检测到的 PII 将替换为关联的策略名称。比如用<code class="fe ne nf ng nh b">[PERSON_NAME]</code>代替<code class="fe ne nf ng nh b">John</code>。<strong class="ly iv">这是为了可读性</strong>而推荐的。</p><p id="490a" class="pw-post-body-paragraph lw lx iu ly b lz mq jv mb mc mr jy me lj ms mg mh ln mt mj mk lr mu mm mn mo in bi translated">今后，我们甚至可以从执行 PII 修订的检测算法中指定应该应用什么类型的策略。这种策略的列表可以通过接受各种有效选项的<code class="fe ne nf ng nh b">redact_pii_policies</code>参数来确定。其中包括(但不限于)<code class="fe ne nf ng nh b">email_address</code>、<code class="fe ne nf ng nh b">blood_type</code>、<code class="fe ne nf ng nh b">medical_process</code>、<code class="fe ne nf ng nh b">date_of_birth</code>、<code class="fe ne nf ng nh b">phone_number</code>。要更全面地了解可用政策选项，请务必参考官方文件的<a class="ae kz" href="https://docs.assemblyai.com/audio-intelligence#pii-redaction" rel="noopener ugc nofollow" target="_blank">相关章节。</a></p><p id="c00e" class="pw-post-body-paragraph lw lx iu ly b lz mq jv mb mc mr jy me lj ms mg mh ln mt mj mk lr mu mm mn mo in bi translated">现在，让我们使用其中的一些参数来执行语音到文本转换和编辑 PII，如下所示:</p><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="nc nd l"/></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">PII 修订版语音转文本—来源:<a class="ae kz" href="https://gmyrianthous.medium.com/" rel="noopener">作者</a></p></figure><p id="374c" class="pw-post-body-paragraph lw lx iu ly b lz mq jv mb mc mr jy me lj ms mg mh ln mt mj mk lr mu mm mn mo in bi translated">在上面分享的要点的最后，我们可以看到一个来自端点的示例响应。您还可以观察所有参数的值(包括<code class="fe ne nf ng nh b">redact_pii</code>和<code class="fe ne nf ng nh b">redact_pii_sub</code>)。</p><p id="a6de" class="pw-post-body-paragraph lw lx iu ly b lz mq jv mb mc mr jy me lj ms mg mh ln mt mj mk lr mu mm mn mo in bi translated">所做的转录是<a class="ae kz" href="https://docs.assemblyai.com/#processing-times" rel="noopener ugc nofollow" target="_blank">异步</a>，这意味着当一个音频文件被提交用于文本转录时，它通常会在音频文件持续时间的大约 15–30%内完成。因此，我们需要不断地发出一些<code class="fe ne nf ng nh b">GET</code>请求，直到响应的状态为<code class="fe ne nf ng nh b">completed</code>或<code class="fe ne nf ng nh b">error</code>。</p><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="nc nd l"/></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">从异步转录中获取结果—来源:<a class="ae kz" href="https://gmyrianthous.medium.com/" rel="noopener">作者</a></p></figure><p id="e44b" class="pw-post-body-paragraph lw lx iu ly b lz mq jv mb mc mr jy me lj ms mg mh ln mt mj mk lr mu mm mn mo in bi translated">最后，我们现在可以将文本转录到输出文件中，这将使我们在检查结果时更加容易。</p><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="nc nd l"/></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">将文本转录写入输出文件—来源:<a class="ae kz" href="https://gmyrianthous.medium.com/" rel="noopener">作者</a></p></figure></div><div class="ab cl mv mw hy mx" role="separator"><span class="my bw bk mz na nb"/><span class="my bw bk mz na nb"/><span class="my bw bk mz na"/></div><div class="in io ip iq ir"><h2 id="ed20" class="la lb iu bd lc ld le dn lf lg lh dp li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">解读回应</h2><p id="b591" class="pw-post-body-paragraph lw lx iu ly b lz ma jv mb mc md jy me lj mf mg mh ln mi mj mk lr ml mm mn mo in bi translated">现在，输出文件应该包含从相关 API 端点返回的文本转录。输入音频文件的(口述)内容如下。</p><pre class="kk kl km kn gu ni nh nj nk aw nl bi"><span id="9a51" class="la lb iu nh b gz nm nn l no np">John was born in 12/02/1993. </span></pre><p id="b182" class="pw-post-body-paragraph lw lx iu ly b lz mq jv mb mc mr jy me lj ms mg mh ln mt mj mk lr mu mm mn mo in bi translated">生成的文本转录如下所示:</p><pre class="kk kl km kn gu ni nh nj nk aw nl bi"><span id="d01c" class="la lb iu nh b gz nm nn l no np">[<!-- -->PERSON_NAME<!-- -->] was born in [DATE_OF_BIRTH]</span></pre><p id="be08" class="pw-post-body-paragraph lw lx iu ly b lz mq jv mb mc mr jy me lj ms mg mh ln mt mj mk lr mu mm mn mo in bi translated">下面给出了返回响应的更完整形式。</p><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="nc nd l"/></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">来自汇编 AI 转录端点的示例响应—来源:<a class="ae kz" href="https://gmyrianthous.medium.com/" rel="noopener">作者</a></p></figure><p id="bbd0" class="pw-post-body-paragraph lw lx iu ly b lz mq jv mb mc mr jy me lj ms mg mh ln mt mj mk lr mu mm mn mo in bi translated">文本转录位于响应的<code class="fe ne nf ng nh b">text</code>参数下。转录算法检测到的单词将与观察到所说单词的时间戳和<code class="fe ne nf ng nh b">confidence</code>分数一起包含在<code class="fe ne nf ng nh b">words</code>字段中。关于响应中包含的各个字段的更完整描述，请参考<a class="ae kz" href="https://docs.assemblyai.com/reference#transcript" rel="noopener ugc nofollow" target="_blank">官方文件</a>中的相关章节。</p></div><div class="ab cl mv mw hy mx" role="separator"><span class="my bw bk mz na nb"/><span class="my bw bk mz na nb"/><span class="my bw bk mz na"/></div><div class="in io ip iq ir"><h2 id="b9d4" class="la lb iu bd lc ld le dn lf lg lh dp li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">完整代码</h2><p id="0d9f" class="pw-post-body-paragraph lw lx iu ly b lz ma jv mb mc md jy me lj mf mg mh ln mi mj mk lr ml mm mn mo in bi translated">本教程中使用的完整代码可以在下面分享的 GitHub Gist 中找到。</p><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="nc nd l"/></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">文本转录和个人身份信息编辑完整代码—来源:<a class="ae kz" href="https://gmyrianthous.medium.com/" rel="noopener">作者</a></p></figure></div><div class="ab cl mv mw hy mx" role="separator"><span class="my bw bk mz na nb"/><span class="my bw bk mz na nb"/><span class="my bw bk mz na"/></div><div class="in io ip iq ir"><h2 id="aaa0" class="la lb iu bd lc ld le dn lf lg lh dp li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">最后的想法</h2><p id="f311" class="pw-post-body-paragraph lw lx iu ly b lz ma jv mb mc md jy me lj mf mg mh ln mi mj mk lr ml mm mn mo in bi translated">在今天的文章中，我们讨论了个人身份信息的重要性以及哪些数据被视为个人身份信息。此外，我们展示了如何使用 AssemblyAI API 执行语音到文本的转换，并从生成的文本转录中消除 PII。</p></div><div class="ab cl mv mw hy mx" role="separator"><span class="my bw bk mz na nb"/><span class="my bw bk mz na nb"/><span class="my bw bk mz na"/></div><div class="in io ip iq ir"><p id="1b77" class="pw-post-body-paragraph lw lx iu ly b lz mq jv mb mc mr jy me lj ms mg mh ln mt mj mk lr mu mm mn mo in bi translated"><a class="ae kz" href="https://gmyrianthous.medium.com/membership" rel="noopener"> <strong class="ly iv">成为会员</strong> </a> <strong class="ly iv">阅读介质上的每一个故事。你的会员费直接支持我和你看的其他作家。你也可以在媒体上看到所有的故事。</strong></p><div class="nq nr gq gs ns nt"><a href="https://gmyrianthous.medium.com/membership" rel="noopener follow" target="_blank"><div class="nu ab fp"><div class="nv ab nw cl cj nx"><h2 class="bd iv gz z fq ny fs ft nz fv fx it bi translated">通过我的推荐链接加入 Medium-Giorgos Myrianthous</h2><div class="oa l"><h3 class="bd b gz z fq ny fs ft nz fv fx dk translated">作为一个媒体会员，你的会员费的一部分会给你阅读的作家，你可以完全接触到每一个故事…</h3></div><div class="ob l"><p class="bd b dl z fq ny fs ft nz fv fx dk translated">gmyrianthous.medium.com</p></div></div><div class="oc l"><div class="od l oe of og oc oh kt nt"/></div></div></a></div></div><div class="ab cl mv mw hy mx" role="separator"><span class="my bw bk mz na nb"/><span class="my bw bk mz na nb"/><span class="my bw bk mz na"/></div><div class="in io ip iq ir"><p id="676e" class="pw-post-body-paragraph lw lx iu ly b lz mq jv mb mc mr jy me lj ms mg mh ln mt mj mk lr mu mm mn mo in bi translated"><strong class="ly iv">你可能也会喜欢</strong></p><div class="nq nr gq gs ns nt"><a rel="noopener follow" target="_blank" href="/sentiment-analysis-assemblyai-python-a4686967e0fc"><div class="nu ab fp"><div class="nv ab nw cl cj nx"><h2 class="bd iv gz z fq ny fs ft nz fv fx it bi translated">如何用 Python 对音频文件进行情感分析</h2><div class="oa l"><h3 class="bd b gz z fq ny fs ft nz fv fx dk translated">探索如何使用 AssemblyAI API 提取语音中的情感</h3></div><div class="ob l"><p class="bd b dl z fq ny fs ft nz fv fx dk translated">towardsdatascience.com</p></div></div><div class="oc l"><div class="oi l oe of og oc oh kt nt"/></div></div></a></div></div><div class="ab cl mv mw hy mx" role="separator"><span class="my bw bk mz na nb"/><span class="my bw bk mz na nb"/><span class="my bw bk mz na"/></div><div class="in io ip iq ir"><div class="kk kl km kn gu nt"><a rel="noopener follow" target="_blank" href="/real-time-speech-recognition-python-assemblyai-13d35eeed226"><div class="nu ab fp"><div class="nv ab nw cl cj nx"><h2 class="bd iv gz z fq ny fs ft nz fv fx it bi translated">如何用 Python 执行实时语音识别</h2><div class="oa l"><h3 class="bd b gz z fq ny fs ft nz fv fx dk translated">使用 Python 中的 AssemblyAI API 执行实时语音转文本</h3></div><div class="ob l"><p class="bd b dl z fq ny fs ft nz fv fx dk translated">towardsdatascience.com</p></div></div><div class="oc l"><div class="oj l oe of og oc oh kt nt"/></div></div></a></div></div></div>    
</body>
</html>