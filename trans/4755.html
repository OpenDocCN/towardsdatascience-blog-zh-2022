<html>
<head>
<title>Box-Cox Transform for Time Series</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">时间序列的Box-Cox变换</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/box-cox-transform-for-time-series-cc45f26082c6#2022-10-22">https://towardsdatascience.com/box-cox-transform-for-time-series-cc45f26082c6#2022-10-22</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="6f1c" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">如何使用Box-Cox变换创建平稳时间序列？</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/33f2aad622e9181bf7fac6d44b221bcf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*aeLSnqqLPcd2pMPR"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">克里斯托夫·比尔在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</p></figure><h1 id="4fd4" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">介绍</h1><p id="866c" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">使时间序列<a class="ae ky" href="https://en.wikipedia.org/wiki/Stationary_process" rel="noopener ugc nofollow" target="_blank"> <strong class="lt iu">平稳</strong> </a>是进行任何<a class="ae ky" href="https://en.wikipedia.org/wiki/Time_series" rel="noopener ugc nofollow" target="_blank"> <strong class="lt iu">时间序列</strong> </a>分析或预测时必不可少的一部分。平稳性确保我们的数据不会随时间发生统计变化，因此它可以更准确地模拟概率分布，从而更容易建模。</p><p id="c521" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">平稳性的一个要求是时间序列需要一个恒定的方差。换句话说，波动应该始终如一地在同一尺度上。实现这一点的一个方法是取序列的自然对数，然而这假设你的原始序列遵循指数趋势。因此，自然对数变换可能并不总是最佳选择。</p><p id="5d3c" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">在这篇文章中，我想介绍一下<a class="ae ky" href="https://en.wikipedia.org/wiki/Power_transform#Box%E2%80%93Cox_transformation" rel="noopener ugc nofollow" target="_blank"> <strong class="lt iu"> Box-Cox </strong> </a>变换，它是自然对数变换的推广。Box-Cox允许确定自然对数是否确实是最佳变换，或者某个其他的<a class="ae ky" href="https://en.wikipedia.org/wiki/Power_transform" rel="noopener ugc nofollow" target="_blank"> <strong class="lt iu">幂变换</strong> </a>是否更优。</p><p id="c4cb" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">如果您想了解更多关于平稳性的背景和要求，请查阅我以前的文章:</p><div class="ms mt gp gr mu mv"><a rel="noopener follow" target="_blank" href="/time-series-stationarity-simply-explained-125269968154"><div class="mw ab fo"><div class="mx ab my cl cj mz"><h2 class="bd iu gy z fp na fr fs nb fu fw is bi translated">时间序列平稳性的简单解释</h2><div class="nc l"><h3 class="bd b gy z fp na fr fs nb fu fw dk translated">时间序列建模中平稳性需求的简单而直观的解释。</h3></div><div class="nd l"><p class="bd b dl z fp na fr fs nb fu fw dk translated">towardsdatascience.com</p></div></div><div class="ne l"><div class="nf l ng nh ni ne nj ks mv"/></div></div></a></div><h1 id="12a3" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">什么是Box-Cox变换？</h1><p id="78f2" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">从根本上说，Box-Cox将非正态数据转换成更像<a class="ae ky" href="https://en.wikipedia.org/wiki/Normal_distribution" rel="noopener ugc nofollow" target="_blank"> <strong class="lt iu">正态分布</strong> </a> <strong class="lt iu"> </strong>的数据。</p><p id="f0a1" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">现在你可能想知道为什么我们需要时间序列数据来模拟正态分布？嗯，在拟合某些模型的时候，比如<a class="ae ky" href="https://en.wikipedia.org/wiki/Autoregressive_integrated_moving_average" rel="noopener ugc nofollow" target="_blank"><strong class="lt iu">【ARIMA】</strong></a>，他们用<a class="ae ky" href="https://en.wikipedia.org/wiki/Maximum_likelihood_estimation" rel="noopener ugc nofollow" target="_blank"> <strong class="lt iu">最大似然估计(MLE) </strong> </a> <strong class="lt iu"> </strong>来确定他们的参数。根据定义，最大似然估计必须符合某种分布，对于大多数包装来说，这是正态分布。</p><p id="f312" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">Box-Cox变换由<strong class="lt iu"> <em class="nk"> λ </em> </strong>参数化(从<strong class="lt iu"> -5 </strong>到<strong class="lt iu"> 5 </strong> ) <strong class="lt iu"> </strong>将时间序列、<strong class="lt iu"> <em class="nk"> y </em> </strong> <em class="nk">、</em> <strong class="lt iu"> </strong>变换为:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nl"><img src="../Images/299f32dc7a0c9db013efbfafa74ebe5a.png" data-original-src="https://miro.medium.com/v2/resize:fit:690/format:webp/1*jf-zNg4Cu1bb3YIAjFActQ.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者在LaTeX中创建的方程。</p></figure><p id="a7ff" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">我们看到，<strong class="lt iu"> <em class="nk"> λ=0 </em> </strong>是自然对数变换，然而还有许多其他依赖于值<strong class="lt iu"> <em class="nk"> λ的变换。</em> </strong>举个例子，如果<strong class="lt iu"> <em class="nk"> λ=0 </em> </strong>就是平方根变换<strong class="lt iu"> <em class="nk">，λ=1 </em> </strong>就没有变换<strong class="lt iu"> <em class="nk"> λ=3 </em> </strong>就是三次变换。</p><p id="8a14" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">值<strong class="lt iu"> <em class="nk"> λ </em> </strong>通过查看哪个值最接近正态分布的变换数据来选择。幸运的是，在计算软件包中，这对于我们来说很容易做到！</p><blockquote class="nm nn no"><p id="d45d" class="lr ls nk lt b lu mn ju lw lx mo jx lz np mp mc md nq mq mg mh nr mr mk ml mm im bi translated">Box-Cox是一种<a class="ae ky" href="https://en.wikipedia.org/wiki/Power_transform" rel="noopener ugc nofollow" target="_blank"> <strong class="lt iu">幂变换</strong> </a> <strong class="lt iu"> </strong>的类型，因为我们总是将我们的原始系列提升到某个幂，即<strong class="lt iu"> λ <em class="it">。</em> </strong></p></blockquote><h1 id="c763" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">应用Box-Cox变换</h1><p id="1c17" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">让我们通过一个例子来展示如何在Python中使用Box-Cox变换。以下是1948-1960年间美国航空客运量的典型图表:</p><blockquote class="nm nn no"><p id="d54f" class="lr ls nk lt b lu mn ju lw lx mo jx lz np mp mc md nq mq mg mh nr mr mk ml mm im bi translated">数据<a class="ae ky" href="https://www.kaggle.com/datasets/ashfakyeafi/air-passenger-data-for-time-series-analysis" rel="noopener ugc nofollow" target="_blank">来自拥有CC0许可证的Kaggle </a>。</p></blockquote><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ns nt l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者代码要点。</p></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nu"><img src="../Images/3af53709f3c5cce46b20cce879d99ab0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1300/format:webp/1*Vr3KcsZVqZcVUVGpZBUb8g.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者用Python生成的图。</p></figure><p id="2441" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">数据显然不是静态的，因为平均值和方差都随着时间的推移而增加。为了稳定方差，我们可以像上面讨论的那样使用Box-Cox变换。Scipy有一个名为<a class="ae ky" href="https://docs.scipy.org/doc/scipy/reference/generated/scipy.stats.boxcox.html" rel="noopener ugc nofollow" target="_blank"><strong class="lt iu"><em class="nk">boxcox</em></strong></a><strong class="lt iu"><em class="nk"/></strong>的函数，它可以找到<strong class="lt iu"> <em class="nk"> λ </em> </strong>的最佳值，并使用它相应地转换我们的数据:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ns nt l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者代码要点。</p></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nu"><img src="../Images/68cfb5345ccd769485848676ad93f642.png" data-original-src="https://miro.medium.com/v2/resize:fit:1300/format:webp/1*AzPCLRxzkGmkX6qnOsSGhw.jpeg"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者用Python生成的图。</p></figure><p id="41d7" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">我们的方差现在是稳定的，波动在一个一致的水平上！最佳<strong class="lt iu"> <em class="nk"> λ </em> </strong>值为<strong class="lt iu"> 0.148 </strong>，接近完美的自然对数变换，但不完全。这表明对数变换并不总是最好的方法，通过Box-Cox变换可以使用更彻底的方法。</p><p id="ef79" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">用于生成图和转换的完整代码可以在我的GitHub中找到:</p><div class="ms mt gp gr mu mv"><a href="https://github.com/egorhowell/Medium-Articles/blob/main/Time%20Series/Time%20Series%20Tools/box_cox_transform.py" rel="noopener  ugc nofollow" target="_blank"><div class="mw ab fo"><div class="mx ab my cl cj mz"><h2 class="bd iu gy z fp na fr fs nb fu fw is bi translated">Medium-Articles/box _ Cox _ transform . py at main egorhowell/Medium-Articles</h2><div class="nc l"><h3 class="bd b gy z fp na fr fs nb fu fw dk translated">此时您不能执行该操作。您已使用另一个标签页或窗口登录。您已在另一个选项卡中注销，或者…</h3></div><div class="nd l"><p class="bd b dl z fp na fr fs nb fu fw dk translated">github.com</p></div></div><div class="ne l"><div class="nv l ng nh ni ne nj ks mv"/></div></div></a></div><h1 id="b075" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">结论</h1><p id="7dd6" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">稳定的方差是时间序列平稳性的一个要求。平稳性很重要，因为它通常是大多数预测模型所必需的。获得稳定方差的一般方法是对序列应用Box-Cox变换，通过<strong class="lt iu"> <em class="nk"> λ、</em> </strong>进行参数化。Python中的变换会自动适应最佳值<strong class="lt iu"> <em class="nk"> λ </em> </strong>并相应地变换您的系列。</p><h1 id="1185" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">参考资料和进一步阅读</h1><ul class=""><li id="1c0a" class="nw nx it lt b lu lv lx ly ma ny me nz mi oa mm ob oc od oe bi translated"><em class="nk">预测:原理与实践:</em>T30】https://otexts.com/fpp2/</li><li id="0dec" class="nw nx it lt b lu of lx og ma oh me oi mi oj mm ob oc od oe bi translated">博克斯，乔治E. P .考克斯博士(1964)。“对转变的分析”。皇家统计学会杂志，B辑。<strong class="lt iu">26</strong>(2):211–252</li></ul><h1 id="4239" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">和我联系！</h1><ul class=""><li id="ca40" class="nw nx it lt b lu lv lx ly ma ny me nz mi oa mm ob oc od oe bi translated">要在媒体上阅读无限的故事，请务必在这里注册！  <em class="nk"> </em>💜</li><li id="9786" class="nw nx it lt b lu of lx og ma oh me oi mi oj mm ob oc od oe bi translated"><a class="ae ky" href="/subscribe/@egorhowell" rel="noopener ugc nofollow" target="_blank"> <em class="nk">想在我发帖注册时得到更新的邮件通知吗！</em>T45<em class="nk">T47】😀</em></a></li><li id="b8dc" class="nw nx it lt b lu of lx og ma oh me oi mi oj mm ob oc od oe bi translated"><a class="ae ky" href="https://www.linkedin.com/in/egor-howell-092a721b3/" rel="noopener ugc nofollow" target="_blank"> <em class="nk">领英</em> </a> <em class="nk"> </em>👔</li><li id="a7a0" class="nw nx it lt b lu of lx og ma oh me oi mi oj mm ob oc od oe bi translated"><a class="ae ky" href="https://twitter.com/EgorHowell" rel="noopener ugc nofollow" target="_blank"> <em class="nk">碎碎念</em> </a> <em class="nk"> </em> 🖊</li><li id="fb18" class="nw nx it lt b lu of lx og ma oh me oi mi oj mm ob oc od oe bi translated"><a class="ae ky" href="https://github.com/egorhowell" rel="noopener ugc nofollow" target="_blank"> <em class="nk"> GitHub </em> </a> <em class="nk"> </em> 🖥</li><li id="87b0" class="nw nx it lt b lu of lx og ma oh me oi mi oj mm ob oc od oe bi translated"><a class="ae ky" href="https://www.kaggle.com/egorphysics" rel="noopener ugc nofollow" target="_blank"><em class="nk"/></a><em class="nk"/>🏅</li></ul><blockquote class="nm nn no"><p id="72f1" class="lr ls nk lt b lu mn ju lw lx mo jx lz np mp mc md nq mq mg mh nr mr mk ml mm im bi translated">(所有表情符号都是由<a class="ae ky" href="https://openmoji.org/" rel="noopener ugc nofollow" target="_blank"> OpenMoji </a>设计的——开源的表情符号和图标项目。许可证:<a class="ae ky" href="https://creativecommons.org/licenses/by-sa/4.0/#" rel="noopener ugc nofollow" target="_blank"> CC BY-SA 4.0 </a></p></blockquote></div></div>    
</body>
</html>