<html>
<head>
<title>How to Easily Get Football Data with a Python Package (Without Web Scraping)</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何用 Python 包轻松获取足球数据(无需网络抓取)</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/how-to-easily-get-football-data-with-a-python-package-without-web-scraping-c922e7ebfb41#2022-11-30">https://towardsdatascience.com/how-to-easily-get-football-data-with-a-python-package-without-web-scraping-c922e7ebfb41#2022-11-30</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="b3f0" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">在几分钟内获取关于世界杯、冠军联赛、西甲联赛等的数据</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/d9d708c50cad2c6e771b71ada4ac8c3d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*yHKJpkECsjkzWZ-C_RoTIA.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">图片来自 Shutterstock，授权给 Frank Andrade</p></figure><p id="1e4e" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">足球比赛的每一分钟都会产生数据，这些数据可用于获得高质量的见解，从而推动球员招募、比赛分析并帮助教练做出更好的决策。</p><p id="2750" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">不幸的是，大多数在线免费数据集只包含基本数据，如进球、球队名称和比赛日期。</p><p id="a9ff" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">只有基本的统计数据，我们无法获得许多有价值的见解。</p><p id="6c50" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">要获得高级统计数据，你可以尝试网络抓取，但在花时间在这上面之前，你可以探索一些体育数据提供商免费共享的数据。</p><p id="74ad" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">在本指南中，我们将探索 Statsbomb 在其 Python 包<code class="fe lu lv lw lx b">statsbombpy</code>上共享的所有免费足球数据。</p><h2 id="f0b5" class="ly lz it bd ma mb mc dn md me mf dp mg lh mh mi mj ll mk ml mm lp mn mo mp mq bi translated">安装库</h2><p id="cde4" class="pw-post-body-paragraph ky kz it la b lb mr ju ld le ms jx lg lh mt lj lk ll mu ln lo lp mv lr ls lt im bi translated">为了访问所有的足球数据 Statsbomb 共享，我们需要安装<code class="fe lu lv lw lx b">statsbombpy</code>。</p><pre class="kj kk kl km gt mw lx mx bn my mz bi"><span id="ca5f" class="na lz it lx b be nb nc l nd ne">pip install statsbombpy</span></pre><p id="02e5" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">一旦我们安装了库，我们必须导入它。</p><pre class="kj kk kl km gt mw lx mx bn my mz bi"><span id="d589" class="na lz it lx b be nb nc l nf ne">from statsbombpy import sb</span></pre><h2 id="798c" class="ly lz it bd ma mb mc dn md me mf dp mg lh mh mi mj ll mk ml mm lp mn mo mp mq bi translated">提供比赛</h2><p id="76f2" class="pw-post-body-paragraph ky kz it la b lb mr ju ld le ms jx lg lh mt lj lk ll mu ln lo lp mv lr ls lt im bi translated">要查看 Statsbomb 免费分享的所有比赛，我们只需要运行<code class="fe lu lv lw lx b">sb.competitions().</code></p><p id="a49e" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我将删除<code class="fe lu lv lw lx b">country_name</code>和<code class="fe lu lv lw lx b">competition_name</code>列中的重复项，以显示 Statsbomb 的独特竞争。</p><pre class="kj kk kl km gt mw lx mx bn my mz bi"><span id="d510" class="na lz it lx b be nb nc l nf ne"># show all competitions<br/>sb.competitions()<br/><br/># show unique competitions<br/>sb.competitions().drop_duplicates(['country_name', 'competition_name'])</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ng"><img src="../Images/fab3abda8ce0b56c61b15cbbc0ddd6a5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1042/format:webp/1*BmgRBFsS6ONbVY7C3JSBJQ.png"/></div></figure><p id="fc1e" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我们可以看到，Statsbomb 的免费版有 FIFA 世界杯、欧冠、西甲、英超等比赛。</p><p id="3c4d" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">也就是说，Statsbomb 有更多的竞争对手，这些竞争对手只能通过 API 访问付费用户。</p><p id="1100" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">让我们探索数据集中可用的比赛之一——2018 年国际足联世界杯。</p><h2 id="93e8" class="ly lz it bd ma mb mc dn md me mf dp mg lh mh mi mj ll mk ml mm lp mn mo mp mq bi translated">2018 年国际足联世界杯:探索比赛</h2><p id="c3b8" class="pw-post-body-paragraph ky kz it la b lb mr ju ld le ms jx lg lh mt lj lk ll mu ln lo lp mv lr ls lt im bi translated">为了探索 2018 年 FIFA 世界杯的数据，我们需要<code class="fe lu lv lw lx b">competition_id</code>和<code class="fe lu lv lw lx b">season_id</code>。从上图我们可以看到，数值分别是 43 和 3。</p><pre class="kj kk kl km gt mw lx mx bn my mz bi"><span id="14da" class="na lz it lx b be nb nc l nf ne">df_2018 = sb.matches(competition_id=43, season_id=3)<br/>df_2018.head(5)</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nh"><img src="../Images/57e40b2a31b0766bfc94cb1618451eac.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Gff219CihaJpeGJv3PMrjw.png"/></div></div></figure><p id="bfb1" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">虽然在上图中看不到，但 dataframe <code class="fe lu lv lw lx b">df_2018</code>有 22 列。这是一个足球分析项目的良好开端。</p><p id="250d" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">为了获得关于特定比赛的更多信息，我们需要<code class="fe lu lv lw lx b">match_id</code>。比如 2018 世界杯决赛，法国 vs 克罗地亚，id 8658。</p><pre class="kj kk kl km gt mw lx mx bn my mz bi"><span id="369b" class="na lz it lx b be nb nc l nf ne">id_final_2018 = 8658<br/>df_2018[df_2018['match_id']==id_final_2018]</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ni"><img src="../Images/6a7ff73b242b6fa0832bc1aaa6a5d7dd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6RHkMqO81fuPHjYrRV3qJQ.png"/></div></div></figure><p id="1b57" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">既然我们已经验证了 8658 是正确的 id，那么让我们来看看这 90 分钟内的阵容和发生的所有事件。</p><h2 id="f3db" class="ly lz it bd ma mb mc dn md me mf dp mg lh mh mi mj ll mk ml mm lp mn mo mp mq bi translated">阵容</h2><p id="8bfd" class="pw-post-body-paragraph ky kz it la b lb mr ju ld le ms jx lg lh mt lj lk ll mu ln lo lp mv lr ls lt im bi translated">让我们看看法国对克罗地亚的比赛阵容。</p><pre class="kj kk kl km gt mw lx mx bn my mz bi"><span id="df82" class="na lz it lx b be nb nc l nf ne">lineups = sb.lineups(match_id=id_final_2018)</span></pre><p id="179d" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">如果我们打印<code class="fe lu lv lw lx b">lineups</code>，我们会看到它是一本字典。让我们看看它的钥匙。</p><pre class="kj kk kl km gt mw lx mx bn my mz bi"><span id="7534" class="na lz it lx b be nb nc l nf ne">&gt;&gt;&gt; lineups.keys()<br/>dict_keys(['France', 'Croatia'])</span></pre><p id="cc6c" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我们可以通过钥匙进入法国和克罗地亚的阵容。</p><p id="dbd1" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">这是克罗地亚的阵容。</p><pre class="kj kk kl km gt mw lx mx bn my mz bi"><span id="9328" class="na lz it lx b be nb nc l nf ne">lineups['Croatia']</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nj"><img src="../Images/05fa3f8fb94f239cfe5eb0718c1bd45b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-lB42-l9vuApy5q-NLqNIQ.png"/></div></div></figure><p id="76fc" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">这是法国队的阵容。</p><pre class="kj kk kl km gt mw lx mx bn my mz bi"><span id="6495" class="na lz it lx b be nb nc l nf ne">lineups['France']</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nk"><img src="../Images/f6a30ed6d1372956dd7bec5ac9ddcf5f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*PnkHR6REkIzBJFqwBZOB-g.png"/></div></div></figure><h2 id="5688" class="ly lz it bd ma mb mc dn md me mf dp mg lh mh mi mj ll mk ml mm lp mn mo mp mq bi translated">比赛项目</h2><p id="8abe" class="pw-post-body-paragraph ky kz it la b lb mr ju ld le ms jx lg lh mt lj lk ll mu ln lo lp mv lr ls lt im bi translated">要获得法国对克罗地亚比赛中的事件，我们需要再次使用比赛的 id。</p><pre class="kj kk kl km gt mw lx mx bn my mz bi"><span id="0c90" class="na lz it lx b be nb nc l nf ne">df_events = sb.events(match_id=id_final_2018)</span></pre><p id="8521" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">让我们看看<code class="fe lu lv lw lx b">df_events</code>里面的所有列</p><pre class="kj kk kl km gt mw lx mx bn my mz bi"><span id="8b2f" class="na lz it lx b be nb nc l nf ne">df_events.columns</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nh"><img src="../Images/e44639f3c734d9b4dbbf29d77237f2c0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*71eUCOpHonfo7DewXda2aQ.png"/></div></div></figure><p id="5611" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我们可以看到这个数据集中有很多信息。让我们只选择几列，并按<code class="fe lu lv lw lx b">minute</code>和<code class="fe lu lv lw lx b">timestamp</code>列对数据帧进行排序。</p><pre class="kj kk kl km gt mw lx mx bn my mz bi"><span id="ddf3" class="na lz it lx b be nb nc l nf ne">df_events = df_events[['timestamp','team', 'type', 'minute', 'location', 'pass_end_location', 'player']]<br/>df_events = df_events.sort_values(['minute', 'timestamp'])</span></pre><p id="0008" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">让我们来看看法国对克罗地亚比赛最后一分钟的情况。</p><pre class="kj kk kl km gt mw lx mx bn my mz bi"><span id="971e" class="na lz it lx b be nb nc l nf ne">df_events.tail(30)</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nl"><img src="../Images/046f019b3ba07055d8a849202e6a76af.png" data-original-src="https://miro.medium.com/v2/resize:fit:1324/format:webp/1*ZdBpGfuGBvY0d-JDQcfYNQ.png"/></div></figure><p id="c161" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">就是这样！现在你可以自己探索这个包来开始你的足球分析项目。</p></div><div class="ab cl nm nn hx no" role="separator"><span class="np bw bk nq nr ns"/><span class="np bw bk nq nr ns"/><span class="np bw bk nq nr"/></div><div class="im in io ip iq"><p id="d34d" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">用 Python 学习数据科学？<a class="ae nt" href="https://frankandrade.ck.page/26b76e9130" rel="noopener ugc nofollow" target="_blank"> <strong class="la iu">加入我的 20k 多人电子邮件列表，获取我的免费 Python for Data Science 备忘单。</strong> </a></p><p id="293f" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">如果你喜欢阅读这样的故事，并想支持我成为一名作家，可以考虑报名成为一名媒体成员。每月 5 美元，让您可以无限制地访问数以千计的 Python 指南和数据科学文章。如果你使用<a class="ae nt" href="https://frank-andrade.medium.com/membership" rel="noopener">我的链接</a>注册，我会赚一小笔佣金，不需要你额外付费。</p><div class="nu nv gp gr nw nx"><a href="https://frank-andrade.medium.com/membership" rel="noopener follow" target="_blank"><div class="ny ab fo"><div class="nz ab oa cl cj ob"><h2 class="bd iu gy z fp oc fr fs od fu fw is bi translated">通过我的推荐链接加入媒体——弗兰克·安德拉德</h2><div class="oe l"><h3 class="bd b gy z fp oc fr fs od fu fw dk translated">作为一个媒体会员，你的会员费的一部分会给你阅读的作家，你可以完全接触到每一个故事…</h3></div><div class="of l"><p class="bd b dl z fp oc fr fs od fu fw dk translated">frank-andrade.medium.com</p></div></div><div class="og l"><div class="oh l oi oj ok og ol ks nx"/></div></div></a></div></div></div>    
</body>
</html>