<html>
<head>
<title>Data Mesh Patterns: Event Streaming Backbone</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">数据网格模式:事件流主干</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/data-mesh-pattern-deep-dive-event-streaming-backbone-99a5bb2a7cbf#2022-02-02">https://towardsdatascience.com/data-mesh-pattern-deep-dive-event-streaming-backbone-99a5bb2a7cbf#2022-02-02</a></blockquote><div><div class="fc ii ij ik il im"/><div class="in io ip iq ir"><div class=""/><p id="2ac9" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko in bi translated">事件流主干是一种基本的企业数据网格模式。让我们探索一下它在企业数据网格中是如何工作的。</p><figure class="kq kr ks kt gu ku gi gj paragraph-image"><div role="button" tabindex="0" class="kv kw di kx bf ky"><div class="gi gj kp"><img src="../Images/32c15fbafdfbfc48b73b5f991c54ce5b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*coCnSviPngoyD8XqFDsxvA.jpeg"/></div></div><p class="lb lc gk gi gj ld le bd b be z dk translated">照片由<a class="ae lf" href="https://unsplash.com/@retrosupply?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">在<a class="ae lf" href="https://unsplash.com/s/photos/writing?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上反推</a></p></figure><h1 id="1bd3" class="lg lh iu bd li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md bi translated">事件流骨干网:一种基本的数据网格模式</h1><p id="2031" class="pw-post-body-paragraph jr js iu jt b ju me jw jx jy mf ka kb kc mg ke kf kg mh ki kj kk mi km kn ko in bi translated">本文讨论事件流主干，这是关于基础数据网格模式的系列文章的第二篇。将讨论几个主题:</p><ul class=""><li id="e3b5" class="mj mk iu jt b ju jv jy jz kc ml kg mm kk mn ko mo mp mq mr bi translated">模式总结，</li><li id="d3c7" class="mj mk iu jt b ju ms jy mt kc mu kg mv kk mw ko mo mp mq mr bi translated">模式问题域和上下文，</li><li id="bced" class="mj mk iu jt b ju ms jy mt kc mu kg mv kk mw ko mo mp mq mr bi translated">企业数据网格中的模式执行，</li><li id="3538" class="mj mk iu jt b ju ms jy mt kc mu kg mv kk mw ko mo mp mq mr bi translated">实现事件流主干模式以支持企业数据网格的候选供应商。</li></ul><p id="fc82" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko in bi translated">本文假设您对数据网格有很高的理解。但是不要担心，如果你需要复习，看看下面的资源:</p><ul class=""><li id="b734" class="mj mk iu jt b ju jv jy jz kc ml kg mm kk mn ko mo mp mq mr bi translated">数据网格原则(更多信息可在<a class="ae lf" href="https://martinfowler.com/articles/data-mesh-principles.html" rel="noopener ugc nofollow" target="_blank">这里</a>获得)</li><li id="dd2a" class="mj mk iu jt b ju ms jy mt kc mu kg mv kk mw ko mo mp mq mr bi translated">数据网格架构(更多信息请点击<a class="ae lf" rel="noopener" target="_blank" href="/an-architecture-for-the-data-mesh-32ff4a15f16f">这里</a></li><li id="b6fa" class="mj mk iu jt b ju ms jy mt kc mu kg mv kk mw ko mo mp mq mr bi translated">数据网格模式(更多信息见<a class="ae lf" rel="noopener" target="_blank" href="/data-mesh-architecture-patterns-98cc1014f251">此处</a>)</li></ul><p id="48b6" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko in bi translated">本文末尾提供了完整系列文章的列表。</p><h1 id="2170" class="lg lh iu bd li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md bi translated">模式摘要</h1><p id="62d5" class="pw-post-body-paragraph jr js iu jt b ju me jw jx jy mf ka kb kc mg ke kf kg mh ki kj kk mi km kn ko in bi translated">“<strong class="jt iv"> Event Streaming Backbone </strong>”模式用于以接近实时的方式在数据产品内、企业数据网格中的数据产品之间以及更大范围的组织内移动数据(建模为事件)。</p><h1 id="a391" class="lg lh iu bd li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md bi translated">背景和业务问题</h1><p id="0436" class="pw-post-body-paragraph jr js iu jt b ju me jw jx jy mf ka kb kc mg ke kf kg mh ki kj kk mi km kn ko in bi translated">如今，大多数企业仍在使用通宵批处理流程，运行数百甚至数千个“提取-转换-加载”(ETL)作业，处理数据并将其转移到整个企业的不同数据集。这会导致不必要的复杂性、陈旧和不一致的数据，并最终导致客户投诉。</p><h1 id="7784" class="lg lh iu bd li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md bi translated">解决办法</h1><p id="3320" class="pw-post-body-paragraph jr js iu jt b ju me jw jx jy mf ka kb kc mg ke kf kg mh ki kj kk mi km kn ko in bi translated">事件流主干模式负责安全、一致、可靠地管理和分发“<strong class="jt iv">事件</strong>”,并且接近实时。在企业数据网格中，每个事件代表一个应用程序状态变化、一个API消息或企业数据网格中数据变化的通知。事件通常在<a class="ae lf" href="https://avro.apache.org/docs/current/spec.html" rel="noopener ugc nofollow" target="_blank"> Apache Avro </a>或<a class="ae lf" href="https://json-schema.org/" rel="noopener ugc nofollow" target="_blank"> JSON模式</a>中定义。</p><p id="5427" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko in bi translated">事件流主干使用主题来存储事件。事件被发布或写入到类似队列的主题中。应用程序可以充当生产者(写入主题)、消费者(读取主题)，或者两者兼而有之。</p><p id="92df" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko in bi translated">事件流主干模式还提供了复杂的处理能力:</p><ul class=""><li id="bf93" class="mj mk iu jt b ju jv jy jz kc ml kg mm kk mn ko mo mp mq mr bi translated"><strong class="jt iv">事件源/持续</strong>:主题上的事件作为事件序列存储在只附加日志中；这允许应用程序状态是可恢复的，同时还允许在企业数据网格中重放事件的时间窗口(这在生产问题诊断期间非常有用)。</li><li id="22a9" class="mj mk iu jt b ju ms jy mt kc mu kg mv kk mw ko mo mp mq mr bi translated"><strong class="jt iv">数据谱系</strong>:事件源机制创建“事件历史”——实际上是数据谱系——为问题诊断以及企业数据网格中的数据治理提供有用的信息。</li><li id="e18e" class="mj mk iu jt b ju ms jy mt kc mu kg mv kk mw ko mo mp mq mr bi translated"><strong class="jt iv">事件流处理</strong>:事件流主干允许在每个事件、时间窗口或聚合的基础上对事件进行分割；由于事件是由流式引擎中的内核功能处理的，因此在企业数据网格中很容易获得接近实时的事件处理功能。</li><li id="bdc6" class="mj mk iu jt b ju ms jy mt kc mu kg mv kk mw ko mo mp mq mr bi translated"><strong class="jt iv">事务性</strong>:事件流主干允许使用事务语义产生和消费事件；这提供了一种“全有或全无”的功能，将写/读主题和外部操作(如写入数据库)绑定在一起，在企业数据网格中提供了与我们对数据库的期望相同的一致性、安全性和可靠性。</li></ul><p id="e63f" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko in bi translated">事件流主干模式，尤其是当与<a class="ae lf" rel="noopener" target="_blank" href="/data-mesh-pattern-deep-dive-change-data-capture-eb3090178c34"> CDC </a>模式结合使用时，建立了一个可重复的模式，用于在企业数据网格中捕获和交流数据变更。这些方法有几个好处:</p><ul class=""><li id="548b" class="mj mk iu jt b ju jv jy jz kc ml kg mm kk mn ko mo mp mq mr bi translated"><strong class="jt iv">不太复杂的架构</strong>:它透明地从一个数据源捕获数据，并将其传递给任何下游实体，并为企业数据网格培育一个非常受欢迎的松散耦合架构。有了事务处理能力，围绕数据一致性的许多繁重工作都以无缝的方式得到了解决。</li><li id="f4b0" class="mj mk iu jt b ju ms jy mt kc mu kg mv kk mw ko mo mp mq mr bi translated"><strong class="jt iv">易于使用</strong>:它使用行业标准JSON模式(以及其他格式，如AVRO)为所有在企业数据网格中管理的事件提供了一种通用格式。</li><li id="54c9" class="mj mk iu jt b ju ms jy mt kc mu kg mv kk mw ko mo mp mq mr bi translated"><strong class="jt iv">生产级集成</strong>:它具有通用数据库和云SaaS解决方案的生产级内置连接器，可以轻松地在企业数据网格和更广泛的组织之间安全可靠地传递数据变更。</li><li id="836c" class="mj mk iu jt b ju ms jy mt kc mu kg mv kk mw ko mo mp mq mr bi translated"><strong class="jt iv">近实时数据传输</strong>:通过事件流主干传输的数据是近实时可用的；事实上，从发布事件到收到事件的时间通常在50-500毫秒之间；如果您的组织正在向所谓的“实时企业”发展，那么事件流骨干网必须是您的企业数据网的一个关键考虑因素。</li></ul><h1 id="0f49" class="lg lh iu bd li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md bi translated">它是如何工作的</h1><p id="84de" class="pw-post-body-paragraph jr js iu jt b ju me jw jx jy mf ka kb kc mg ke kf kg mh ki kj kk mi km kn ko in bi translated">图1(下图)展示了事件流主干在企业数据网格中的工作方式。</p><figure class="kq kr ks kt gu ku gi gj paragraph-image"><div role="button" tabindex="0" class="kv kw di kx bf ky"><div class="gi gj kp"><img src="../Images/32a38611dcd8dc81e31fbbf3aa943558.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*H-iFnDt3EfqUcWYxIVHXMQ.png"/></div></div><p class="lb lc gk gi gj ld le bd b be z dk translated"><em class="mx">图1:数据网状模式:企业流骨干网</em></p></figure><ol class=""><li id="8f10" class="mj mk iu jt b ju jv jy jz kc ml kg mm kk mn ko my mp mq mr bi translated">授权的“制作者”发布事件；在企业数据网格中，常见的生产者可能包括<a class="ae lf" rel="noopener" target="_blank" href="/data-mesh-pattern-deep-dive-change-data-capture-eb3090178c34">变更数据捕获</a>工具、数据产品组件(目录、变更/审计日志)、应用程序和批处理作业。</li><li id="eb7f" class="mj mk iu jt b ju ms jy mt kc mu kg mv kk mw ko my mp mq mr bi translated">使用事件流组件在事件发生时对其进行处理，允许在企业数据网格中的时间窗口内对每个事件进行连续处理、聚合和分析。</li><li id="4224" class="mj mk iu jt b ju ms jy mt kc mu kg mv kk mw ko my mp mq mr bi translated">授权消费者，并在事件到达主题时得到通知；消费者获取事件并根据需要处理它；企业数据网格中的普通消费者可能包括数据网格中的其他数据产品、数据科学家(他们使用事件来更新他们的模型训练数据)、应用程序和其他分析系统。</li><li id="ba26" class="mj mk iu jt b ju ms jy mt kc mu kg mv kk mw ko my mp mq mr bi translated">事件代理管理事件流主干上的事件流，并确保事件在企业数据网格中安全可靠地传输。</li></ol><h1 id="6a05" class="lg lh iu bd li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md bi translated">企业数据网格的使用场景</h1><p id="8a55" class="pw-post-body-paragraph jr js iu jt b ju me jw jx jy mf ka kb kc mg ke kf kg mh ki kj kk mi km kn ko in bi translated">事件流主干的一个特别有趣的用例是，当它与"<a class="ae lf" rel="noopener" target="_blank" href="/data-mesh-pattern-deep-dive-change-data-capture-eb3090178c34">变更数据捕获</a> " (CDC)模式相结合，将变更从一个数据产品传播到另一个数据产品时。</p><p id="6117" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko in bi translated">例如，如今的数据科学家往往依赖陈旧的数据(在通宵批量运行后可用)来训练他们的模型。在企业数据网格中，带有CDC的事件流主干从运营系统中捕获数据，并近乎实时地将其同步到分析或培训数据存储库。结果是:数据科学家现在可以用最新数据训练AI/ML模型，并产生最佳输出。</p><h1 id="3084" class="lg lh iu bd li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md bi translated">供应商前景</h1><p id="da89" class="pw-post-body-paragraph jr js iu jt b ju me jw jx jy mf ka kb kc mg ke kf kg mh ki kj kk mi km kn ko in bi translated">下面是实现事件流主干模式的产品列表，其中每个产品都在企业数据网格中运行良好。</p><ul class=""><li id="98d4" class="mj mk iu jt b ju jv jy jz kc ml kg mm kk mn ko mo mp mq mr bi translated"><a class="ae lf" href="https://kafka.apache.org/" rel="noopener ugc nofollow" target="_blank">Apache Kafka</a>:Kafka的开源发布是所有事件流骨干评判的基线。它最初是在LinkedIn上经过实战检验的，现在已经在全球范围内使用。这简直是一个神奇的产品！对于大型企业来说，唯一需要考虑的是产品支持——只要这很重要，大多数组织都会求助于供应商支持版本。</li><li id="fd5a" class="mj mk iu jt b ju ms jy mt kc mu kg mv kk mw ko mo mp mq mr bi translated"><a class="ae lf" href="https://www.confluent.io/" rel="noopener ugc nofollow" target="_blank">Confluent Kafka</a>:Confluent是Apache Kafka的主要企业支持供应商。但Confluent也在此基础上构建并扩展了它，以提供一组引人注目的功能，包括云原生支持(沙箱、生产运行时环境和端到端托管实例)、包括时间窗处理在内的复杂事件处理功能，以及独特的流处理工具，如<a class="ae lf" href="https://www.confluent.io/product/ksql/" rel="noopener ugc nofollow" target="_blank"> KSQLDB </a>，使大规模执行流处理变得更加容易。</li><li id="f3fe" class="mj mk iu jt b ju ms jy mt kc mu kg mv kk mw ko mo mp mq mr bi translated">云流媒体供应商:虽然您可以在所有云供应商上安装和运行Kafka，但每个供应商都提供类似的针对其云进行优化的功能(与其他供应商特定的集成)。AWS提供<a class="ae lf" href="https://aws.amazon.com/msk/" rel="noopener ugc nofollow" target="_blank">MSK</a>(Apache Kafka的托管流媒体)，Azure提供<a class="ae lf" href="https://azure.microsoft.com/en-ca/services/event-hubs/#overview" rel="noopener ugc nofollow" target="_blank">事件中心</a>，谷歌提供<a class="ae lf" href="https://cloud.google.com/pubsub/docs/overview" rel="noopener ugc nofollow" target="_blank"> PubSub </a>。这种方法有两个考虑因素，根据您的情况，它们的重要性可能会有所不同:首先，由于使用了特定于云的功能，这些功能不容易被否决/删除，因此会受到供应商的限制；其次，在混合的本地和云环境中运行通用Kafka发行版时会增加复杂性(对于使用Kafka将数据中心中运行的应用程序集成到云环境中的大型企业来说，这种情况很常见)。</li></ul><p id="9bff" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko in bi translated"><em class="mz">完全披露:在推荐上述任何产品时，我没有</em> <strong class="jt iv"> <em class="mz">经济利益</em></strong><em class="mz">——我强调这些产品是因为我对它们有一些经验，它们对我很有效。</em></p><h1 id="5668" class="lg lh iu bd li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md bi translated">本系列的其他文章</h1><p id="fa7b" class="pw-post-body-paragraph jr js iu jt b ju me jw jx jy mf ka kb kc mg ke kf kg mh ki kj kk mi km kn ko in bi translated">下面列出了本系列中关于基础数据网格模式的全部文章。</p><ul class=""><li id="6ebd" class="mj mk iu jt b ju jv jy jz kc ml kg mm kk mn ko mo mp mq mr bi translated"><strong class="jt iv">变更数据捕获(CDC)模式</strong>，它跟踪数据库中的变更，并将它们捕获为“事件”。此条可用<a class="ae lf" rel="noopener" target="_blank" href="/data-mesh-pattern-deep-dive-change-data-capture-eb3090178c34"> <strong class="jt iv">此处</strong> </a> <strong class="jt iv">。</strong></li><li id="b58e" class="mj mk iu jt b ju ms jy mt kc mu kg mv kk mw ko mo mp mq mr bi translated"><strong class="jt iv">事件流骨干模式</strong>，CDC和其他应用程序使用它来发布和订阅/接收企业数据网格中的事件(本文)。</li><li id="7160" class="mj mk iu jt b ju ms jy mt kc mu kg mv kk mw ko mo mp mq mr bi translated"><strong class="jt iv">企业数据产品目录模式</strong>，这是一个目录/存储库，包含关于企业数据网格中数据产品的元数据(即将推出)。</li><li id="6ab4" class="mj mk iu jt b ju ms jy mt kc mu kg mv kk mw ko mo mp mq mr bi translated"><strong class="jt iv">不可变的变更/审计日志模式</strong>，它保留日志并跟踪企业数据网格中的数据沿袭，用于未来的审计和治理目的(即将推出)。</li></ul><h1 id="567d" class="lg lh iu bd li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md bi translated">总结想法</h1><p id="f905" class="pw-post-body-paragraph jr js iu jt b ju me jw jx jy mf ka kb kc mg ke kf kg mh ki kj kk mi km kn ko in bi translated">事件流主干是一种基本的数据网格模式。它是在企业数据网中以安全、可靠和一致的方式移动事件(以及数据)的高速公路。</p><p id="f812" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko in bi translated">技术细节——以及提供的rational应该帮助您启动事件流主干的设计和实现，并引导您的企业数据网格！</p><p id="08c7" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko in bi">***</p><p id="90ec" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko in bi translated"><em class="mz">除非另有说明，本文中的所有图片均由Eric Broda(本文作者)创作。图像中使用的所有图标都是普通的PowerPoint图标，不受版权保护。</em></p></div></div>    
</body>
</html>