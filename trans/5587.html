<html>
<head>
<title>How to Create a Virtual Environment and Use it on Jupyter Notebook</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何创建虚拟环境并在 Jupyter 笔记本上使用</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/how-to-create-a-virtual-environment-and-use-it-on-jupyter-notebook-6c0b7b1cfca0#2022-12-16">https://towardsdatascience.com/how-to-create-a-virtual-environment-and-use-it-on-jupyter-notebook-6c0b7b1cfca0#2022-12-16</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="d3b6" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">使用 Jupyter 笔记本中的虚拟环境</h2></div><figure class="ki kj kk kl gt km"><div class="bz fp l di"><div class="kn ko l"/></div></figure><h1 id="617f" class="kp kq it bd kr ks kt ku kv kw kx ky kz jz la ka lb kc lc kd ld kf le kg lf lg bi translated">动机</h1><p id="e8c5" class="pw-post-body-paragraph lh li it lj b lk ll ju lm ln lo jx lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">创建虚拟环境是一个很好的实践。它将特定项目的依赖项与操作系统上全局安装的其他包隔离开来。作为一名数据科学家，在处理通常需要不同依赖关系的不同项目时，这可能是有益的。</p><p id="3928" class="pw-post-body-paragraph lh li it lj b lk md ju lm ln me jx lp lq mf ls lt lu mg lw lx ly mh ma mb mc im bi translated">在本概念性博客结束时，您将能够:</p><p id="e17b" class="pw-post-body-paragraph lh li it lj b lk md ju lm ln me jx lp lq mf ls lt lu mg lw lx ly mh ma mb mc im bi translated">(1)使用<code class="fe mi mj mk ml b">virtualenv</code>和<code class="fe mi mj mk ml b">conda</code>创建虚拟环境</p><p id="e577" class="pw-post-body-paragraph lh li it lj b lk md ju lm ln me jx lp lq mf ls lt lu mg lw lx ly mh ma mb mc im bi translated">(2)将虚拟环境连接到 Jupyter 笔记本电脑。</p><h1 id="2649" class="kp kq it bd kr ks kt ku kv kw kx ky kz jz la ka lb kc lc kd ld kf le kg lf lg bi translated">创建您的虚拟环境</h1><p id="e8d2" class="pw-post-body-paragraph lh li it lj b lk ll ju lm ln lo jx lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">每个工具都用于管理 python 包和环境。两者的主要区别在于，<code class="fe mi mj mk ml b">virtualenv</code>用于管理单个项目的 Python 包，而<code class="fe mi mj mk ml b">conda</code>是一个更通用的包管理工具，可以用于多个项目和 Java、R、Python 等语言。</p><p id="f933" class="pw-post-body-paragraph lh li it lj b lk md ju lm ln me jx lp lq mf ls lt lu mg lw lx ly mh ma mb mc im bi translated">首先，你需要在你的电脑上安装<a class="ae mm" href="https://www.python.org/downloads/" rel="noopener ugc nofollow" target="_blank"> Python </a>。一旦完成，我们就可以使用 Python 包管理器<code class="fe mi mj mk ml b">pip</code>继续创建环境。</p><h2 id="bdb6" class="mn kq it bd kr mo mp dn kv mq mr dp kz lq ms mt lb lu mu mv ld ly mw mx lf my bi translated">使用 virtualenv 创建环境</h2><p id="21e2" class="pw-post-body-paragraph lh li it lj b lk ll ju lm ln lo jx lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated"><code class="fe mi mj mk ml b">virtualenv</code>可通过命令行界面或提示命令进行安装，如下所示:</p><pre class="ki kj kk kl gt mz ml na bn nb nc bi"><span id="9d22" class="nd kq it ml b be ne nf l ng nh">pip3 install virtualenv</span></pre><p id="fa1e" class="pw-post-body-paragraph lh li it lj b lk md ju lm ln me jx lp lq mf ls lt lu mg lw lx ly mh ma mb mc im bi translated">成功安装后，您可以使用以下语法继续创建虚拟环境:</p><pre class="ki kj kk kl gt mz ml na bn nb nc bi"><span id="2c6e" class="nd kq it ml b be ne nf l ng nh">virtualenv virtual_env_1</span></pre><p id="8d4b" class="pw-post-body-paragraph lh li it lj b lk md ju lm ln me jx lp lq mf ls lt lu mg lw lx ly mh ma mb mc im bi translated">根据前面的语法，<code class="fe mi mj mk ml b">virtual_env_1</code>对应于您的虚拟环境的名称。</p><p id="8552" class="pw-post-body-paragraph lh li it lj b lk md ju lm ln me jx lp lq mf ls lt lu mg lw lx ly mh ma mb mc im bi translated">下一步是激活它，以便能够使用它。激活取决于您的操作系统:</p><pre class="ki kj kk kl gt mz ml na bn nb nc bi"><span id="b82b" class="nd kq it ml b be ne nf l ng nh"># On Mac<br/>source virtual_env_1/bin/activate</span></pre><pre class="ni mz ml nj nk aw nl bi"><span id="968c" class="mn kq it ml b gy nm nn l no nh"># On Windows<br/>virtual_env_1\Scripts\activate</span></pre><p id="2404" class="pw-post-body-paragraph lh li it lj b lk md ju lm ln me jx lp lq mf ls lt lu mg lw lx ly mh ma mb mc im bi translated">运行前面的命令之一应该会显示虚拟环境括号的名称，如下所示:</p><figure class="ki kj kk kl gt km gh gi paragraph-image"><div role="button" tabindex="0" class="nq nr di ns bf nt"><div class="gh gi np"><img src="../Images/3f1964ec73fdc04bb23cdd19b7341132.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ZWHY7uTJ5fboFMOWIlSsFg.png"/></div></div><p class="nw nx gj gh gi ny nz bd b be z dk translated">来自 virtualenv 的第一个虚拟环境(图片由作者提供)</p></figure><p id="d7fa" class="pw-post-body-paragraph lh li it lj b lk md ju lm ln me jx lp lq mf ls lt lu mg lw lx ly mh ma mb mc im bi translated"><code class="fe mi mj mk ml b"><strong class="lj iu">(virtual_env_1)</strong></code>表示<code class="fe mi mj mk ml b">virtual_env_1</code>被认为是当前环境。现在，您可以继续安装软件包，并在环境中管理它们。这里有一个例子:</p><pre class="ki kj kk kl gt mz ml na bn nb nc bi"><span id="fd5f" class="nd kq it ml b be ne nf l ng nh">pip install pandas # to install pandas library</span></pre><h2 id="1797" class="mn kq it bd kr mo mp dn kv mq mr dp kz lq ms mt lb lu mu mv ld ly mw mx lf my bi translated">使用 conda</h2><p id="0272" class="pw-post-body-paragraph lh li it lj b lk ll ju lm ln lo jx lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">创建虚拟环境的第一步是在您的系统上安装<code class="fe mi mj mk ml b">conda</code>。如果没有，你可以下载并安装已经包含了<code class="fe mi mj mk ml b">conda</code>的<a class="ae mm" href="https://docs.anaconda.com/anaconda/install/index.html" rel="noopener ugc nofollow" target="_blank"> Anaconda </a>或者<a class="ae mm" href="https://docs.conda.io/en/latest/miniconda.html" rel="noopener ugc nofollow" target="_blank"> Miniconda </a>。</p><p id="3b24" class="pw-post-body-paragraph lh li it lj b lk md ju lm ln me jx lp lq mf ls lt lu mg lw lx ly mh ma mb mc im bi translated">在创建环境之前，让我们用<code class="fe mi mj mk ml b">deactivate</code>命令停用之前创建的环境:</p><pre class="ki kj kk kl gt mz ml na bn nb nc bi"><span id="3073" class="nd kq it ml b be ne nf l ng nh">deactivate</span></pre><p id="89a4" class="pw-post-body-paragraph lh li it lj b lk md ju lm ln me jx lp lq mf ls lt lu mg lw lx ly mh ma mb mc im bi translated">现在，您可以通过运行以下命令，用<code class="fe mi mj mk ml b">conda</code>和<code class="fe mi mj mk ml b">Python 3.8</code>创建您的新环境<code class="fe mi mj mk ml b">virtual_env_2</code>:</p><pre class="ki kj kk kl gt mz ml na bn nb nc bi"><span id="fba7" class="nd kq it ml b be ne nf l ng nh">conda create --name virtual_env_2 python=3.8</span></pre><p id="db22" class="pw-post-body-paragraph lh li it lj b lk md ju lm ln me jx lp lq mf ls lt lu mg lw lx ly mh ma mb mc im bi translated">最后，您可以激活环境，如下所示。无论您使用何种操作系统，激活过程都是一样的:</p><pre class="ki kj kk kl gt mz ml na bn nb nc bi"><span id="ccb0" class="nd kq it ml b be ne nf l ng nh">conda activate virtual_env_2</span></pre><p id="01a0" class="pw-post-body-paragraph lh li it lj b lk md ju lm ln me jx lp lq mf ls lt lu mg lw lx ly mh ma mb mc im bi translated">该命令激活<code class="fe mi mj mk ml b">virtual_env_2</code>，并使其成为当前环境。下面是预期的输出。</p><figure class="ki kj kk kl gt km gh gi paragraph-image"><div role="button" tabindex="0" class="nq nr di ns bf nt"><div class="gh gi oa"><img src="../Images/f1793f6084129161848c0a36f33b9f4d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*SSIE6OLFo0QhBdgxWFciWA.png"/></div></div><p class="nw nx gj gh gi ny nz bd b be z dk translated">来自 conda 的第二个虚拟环境(图片由作者提供)</p></figure><p id="8ce0" class="pw-post-body-paragraph lh li it lj b lk md ju lm ln me jx lp lq mf ls lt lu mg lw lx ly mh ma mb mc im bi translated">我们可以使用以下语法停用环境:</p><pre class="ki kj kk kl gt mz ml na bn nb nc bi"><span id="bbc8" class="nd kq it ml b be ne nf l ng nh">conda deactivate</span></pre><h1 id="3cab" class="kp kq it bd kr ks kt ku kv kw kx ky kz jz la ka lb kc lc kd ld kf le kg lf lg bi translated">将您的虚拟环境连接到 Jupyter 笔记本电脑。</h1><p id="681d" class="pw-post-body-paragraph lh li it lj b lk ll ju lm ln lo jx lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">作为数据科学家，我们的大部分分析和模型训练主要是在 Jupyter 笔记本上完成的。</p><blockquote class="ob oc od"><p id="e795" class="lh li oe lj b lk md ju lm ln me jx lp of mf ls lt og mg lw lx oh mh ma mb mc im bi translated">从笔记本电脑上就能创建我们的虚拟环境不是很好吗？</p></blockquote><p id="82e9" class="pw-post-body-paragraph lh li it lj b lk md ju lm ln me jx lp lq mf ls lt lu mg lw lx ly mh ma mb mc im bi translated">这是本节的主要目标。它解释了如何将以前的环境连接到 jupyter 笔记本电脑。</p><p id="6bce" class="pw-post-body-paragraph lh li it lj b lk md ju lm ln me jx lp lq mf ls lt lu mg lw lx ly mh ma mb mc im bi translated">第一步，安装<code class="fe mi mj mk ml b">ipykernel</code>。这个包允许我们管理来自不同环境的内核。使用<code class="fe mi mj mk ml b">pip</code>完成安装:</p><pre class="ki kj kk kl gt mz ml na bn nb nc bi"><span id="8290" class="nd kq it ml b be ne nf l ng nh">pip3 install --user ipykernel</span></pre><p id="1344" class="pw-post-body-paragraph lh li it lj b lk md ju lm ln me jx lp lq mf ls lt lu mg lw lx ly mh ma mb mc im bi translated">使用<code class="fe mi mj mk ml b">ipykernel</code>我们可以使用以下通用语法添加任何虚拟环境:</p><pre class="ki kj kk kl gt mz ml na bn nb nc bi"><span id="d5a6" class="nd kq it ml b be ne nf l ng nh">python -m ipykernel install --user --name=[my_virtual_env]</span></pre><ul class=""><li id="b87c" class="oi oj it lj b lk md ln me lq ok lu ol ly om mc on oo op oq bi translated"><code class="fe mi mj mk ml b">[my_virtual_env]</code>是现有虚拟环境的名称。</li></ul><p id="7869" class="pw-post-body-paragraph lh li it lj b lk md ju lm ln me jx lp lq mf ls lt lu mg lw lx ly mh ma mb mc im bi translated">因此，让我们添加我们的虚拟环境<code class="fe mi mj mk ml b">virtual_env_1</code>和<code class="fe mi mj mk ml b">virtual_env_2</code>:</p><pre class="ki kj kk kl gt mz ml na bn nb nc bi"><span id="3a19" class="nd kq it ml b be ne nf l ng nh"># Add the first virtual environment<br/>python -m ipykernel install --user --name=virtual_env_1</span></pre><pre class="ni mz ml nj nk aw nl bi"><span id="73fa" class="mn kq it ml b gy nm nn l no nh"># Add the second virtual environment<br/>python -m ipykernel install --user --name=virtual_env_2</span></pre><p id="606e" class="pw-post-body-paragraph lh li it lj b lk md ju lm ln me jx lp lq mf ls lt lu mg lw lx ly mh ma mb mc im bi translated">前面的命令添加了您的环境！现在，如果您运行 Jupyter notebook，您应该能够在创建新笔记本时看到这两种环境。</p><pre class="ki kj kk kl gt mz ml na bn nb nc bi"><span id="74d7" class="nd kq it ml b be ne nf l ng nh"># Run your notebook <br/>jupyter notebook</span></pre><p id="4003" class="pw-post-body-paragraph lh li it lj b lk md ju lm ln me jx lp lq mf ls lt lu mg lw lx ly mh ma mb mc im bi translated">从笔记本中，我们应该看到如下所示的内核，我们可以决定使用哪一个:</p><figure class="ki kj kk kl gt km gh gi paragraph-image"><div role="button" tabindex="0" class="nq nr di ns bf nt"><div class="gh gi or"><img src="../Images/5bf2d13f1e4b16af7508bed03ea39b8c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*O6URdbFnUGbXB1j2YASIGw.png"/></div></div><p class="nw nx gj gh gi ny nz bd b be z dk translated">Jupyter 笔记本中添加的环境(图片由作者提供)</p></figure><h1 id="fe3c" class="kp kq it bd kr ks kt ku kv kw kx ky kz jz la ka lb kc lc kd ld kf le kg lf lg bi translated">结论</h1><p id="fa49" class="pw-post-body-paragraph lh li it lj b lk ll ju lm ln lo jx lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">恭喜你！🎉你已经学会了如何使用<code class="fe mi mj mk ml b">conda</code>和<code class="fe mi mj mk ml b">virtualenv</code>创建虚拟环境。此外，您还了解了如何将您的环境连接到 Jupyter 笔记本电脑。</p><p id="e523" class="pw-post-body-paragraph lh li it lj b lk md ju lm ln me jx lp lq mf ls lt lu mg lw lx ly mh ma mb mc im bi translated">如果你喜欢阅读我的故事，并希望支持我的写作，考虑<a class="ae mm" href="https://zoumanakeita.medium.com/membership" rel="noopener">成为一个媒体成员</a>。每月支付 5 美元，你就可以无限制地阅读媒体上的故事。</p><p id="8c6e" class="pw-post-body-paragraph lh li it lj b lk md ju lm ln me jx lp lq mf ls lt lu mg lw lx ly mh ma mb mc im bi translated">欢迎在<a class="ae mm" href="https://zoumanakeita.medium.com/" rel="noopener">媒体</a>、<a class="ae mm" href="https://twitter.com/zoumana_keita_" rel="noopener ugc nofollow" target="_blank">推特</a>和<a class="ae mm" href="https://www.youtube.com/channel/UC9xKdy8cz6ZuJU5FTNtM_pQ" rel="noopener ugc nofollow" target="_blank"> YouTube </a>上关注我，或者在<a class="ae mm" href="https://www.linkedin.com/in/zoumana-keita/" rel="noopener ugc nofollow" target="_blank"> LinkedIn </a>上打招呼。讨论人工智能、人工智能、数据科学、自然语言处理和人工智能是一种乐趣！</p></div></div>    
</body>
</html>