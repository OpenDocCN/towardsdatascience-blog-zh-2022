<html>
<head>
<title>Deploy your first computer vision app for AWS Panorama in five minutes</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在五分钟内为AWS Panorama部署您的第一个计算机视觉应用</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/deploy-your-first-computer-vision-app-for-aws-panorama-in-five-minutes-221e974606e3#2022-10-25">https://towardsdatascience.com/deploy-your-first-computer-vision-app-for-aws-panorama-in-five-minutes-221e974606e3#2022-10-25</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="4f85" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">了解如何以简单的方式设置您的第一个Panorama应用程序</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/9af97370ecf8914ad0495394ba83770a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*6YfQ1_vqMWcvarIL"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">瑞秋·麦克德莫特在<a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</p></figure><p id="5612" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">大约一年前，我在这里发表了<a class="ae kv" rel="noopener" target="_blank" href="/deploy-an-object-detector-model-at-the-edge-on-aws-panorama-9b80ea1dd03a">关于在AWS Panorama上部署物体探测器应用程序的数据科学分步指南</a>。文章挺长的(17分钟看完！)并涉及到许多微妙的步骤。使用官方工具创建Panorama应用程序并不容易:您应该使用固定且复杂的项目结构，记住许多关于项目的参数，并在每次调用它们时将它们传递给工具。然后，文件和文件夹必须以特定的方式命名，并且您必须在项目的不同部分维护相同信息(例如，深度学习模型属性)的一致副本。所有这些“内务”任务并没有交付真正的商业价值:它们仅仅是为了保持项目和样板代码的更新。</p><p id="af76" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在过去的几个月里，我构建并部署了十几个Panorama应用程序，亲身经历了这种负担。显然，一些重复的任务和模式促使我尽可能自动化Panorama应用程序的设置和部署过程。我很高兴介绍<a class="ae kv" href="https://github.com/mrtj/cookiecutter-panorama" rel="noopener ugc nofollow" target="_blank"> cookiecutter-panorama </a>，一个AWS Panorama项目生成器工具和构建系统。让我们深入探讨一下，从AWS Panorama应用程序的定义开始。</p><h1 id="be65" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">全景应用程序的剖析</h1><p id="9a0f" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">如果你错过了<a class="ae kv" rel="noopener" target="_blank" href="/deploy-an-object-detector-model-at-the-edge-on-aws-panorama-9b80ea1dd03a">之前的</a> <a class="ae kv" rel="noopener" target="_blank" href="/remote-view-your-computer-vision-models-running-on-aws-panorama-32922369ecf">集</a>，AWS Panorama是一个<a class="ae kv" href="https://aws.amazon.com/panorama/" rel="noopener ugc nofollow" target="_blank">硬件和软件平台</a>，可以运行计算机视觉(CV)应用程序，分析来自内部互联网协议(IP)摄像机的视频流。</p><p id="e055" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><em class="mp"> Panorama应用</em>是打包的深度学习模型、业务逻辑代码和清单结构(也称为“应用图”)的集合，清单结构定义了这些组件之间的数据管道。</p><p id="97fc" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在“经典”全景应用程序的情况下，深度学习模型(在Pytorch、Tensorflow或MXNet中训练)由应用程序的构建过程打包在一个称为“模型资产”的工件中。类似地，您的业务逻辑代码(用Python编写，使用Panorama应用程序SDK)被打包在“代码资产”工件中。这些工件被注册并上传到您的AWS帐户。每当您想要将CV应用程序部署到Panorama设备时，您必须提供引用这些工件的清单结构，并描述设备应该如何连接它们。</p><p id="9d28" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">因此，Panorama应用程序松散地耦合到一组深度学习和业务逻辑包，这些包通过清单文件绑定在一起。开发人员必须不断地同步应用程序清单文件和包中的引用。这是cookiecutter-panorama可以自动化的最大维护任务之一。</p><h1 id="80d8" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">烹饪刀具</h1><p id="94ca" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">下面就来说说怎么做饼干吧！</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi mq"><img src="../Images/61570de7e134a7fe2f6e36855cf59274.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*uE68IXHGkVXYOWah"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated"><a class="ae kv" href="https://unsplash.com/@anshu18?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">安舒阿</a>在<a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍照</p></figure><p id="6070" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><a class="ae kv" href="https://github.com/cookiecutter/cookiecutter" rel="noopener ugc nofollow" target="_blank"> Cookiecutter </a>是一个命令行实用程序，它从Cookiecutter(项目模板)创建项目。它成为在Python生态系统中生成项目的事实上的标准，因为它漂亮简单的设计与引人注目的特性相匹配。目前，GitHub上发布了超过<a class="ae kv" href="https://github.com/search?q=cookiecutter&amp;type=Repositories" rel="noopener ugc nofollow" target="_blank"> 7000个cookiecutter项目模板</a>。Cookiecutter-panorama将panorama应用程序模板添加到这个pantheon中。</p><h1 id="6ba6" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">开始吧！</h1><p id="bb15" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">首先，<a class="ae kv" href="https://cookiecutter.readthedocs.io/en/stable/installation.html" rel="noopener ugc nofollow" target="_blank">用pip ( <code class="fe mr ms mt mu b"><strong class="ky ir">pip install cookiecutter</strong></code>)、conda ( <code class="fe mr ms mt mu b"><strong class="ky ir">conda install -c conda-forge cookiecutter</strong></code>)或<a class="ae kv" href="https://pypa.github.io/pipx/" rel="noopener ugc nofollow" target="_blank"> pipx </a> ( <code class="fe mr ms mt mu b"><strong class="ky ir">pipx install cookiecutter</strong></code>，推荐方式)安装cookiecutter命令行</a>工具。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi mv"><img src="../Images/0a88775da4a39329e4c251854d4cb553.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*-PoJJ-41MB0QPuoF"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">由<a class="ae kv" href="https://unsplash.com/@spacex?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> SpaceX </a>在<a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure><p id="bbc6" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">创建Panorama应用程序项目非常简单:</p><pre class="kg kh ki kj gt mw mu mx my aw mz bi"><span id="8f7b" class="na lt iq mu b gy nb nc l nd ne"><strong class="mu ir">$ cookiecutter </strong><a class="ae kv" href="https://github.com/mrtj/cookiecutter-panorama.git" rel="noopener ugc nofollow" target="_blank"><strong class="mu ir">https://github.com/mrtj/cookiecutter-panorama.git</strong></a></span></pre><p id="94c3" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">模板引擎会问你一堆参数的值。但是，它也提供了合理的默认值，您可以在大多数情况下保留这些值并确认选项。</p><p id="977a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">你只需要设置两个参数:<code class="fe mr ms mt mu b">project_name</code>和<code class="fe mr ms mt mu b">s3_working_bucket</code>。后者应该是您拥有读/写权限的帐户中现有S3存储桶的名称。你可以在cookiecutter-panorama 的<a class="ae kv" href="https://github.com/mrtj/cookiecutter-panorama/blob/main/README.md" rel="noopener ugc nofollow" target="_blank">自述文件中找到参数的详细描述。</a></p><pre class="kg kh ki kj gt mw mu mx my aw mz bi"><span id="6669" class="na lt iq mu b gy nb nc l nd ne"><strong class="mu ir">$ cookiecutter </strong><a class="ae kv" href="https://github.com/mrtj/cookiecutter-panorama.git" rel="noopener ugc nofollow" target="_blank"><strong class="mu ir">https://github.com/mrtj/cookiecutter-panorama.git</strong></a><br/>project_name [Panorama Video Processor]: ↲<br/>project_slug [panorama_video_processor]: ↲<br/>s3_working_bucket [my_bucket]: <strong class="mu ir">my_real_bucket</strong><br/>s3_working_path [s3://my_real_bucket/panorama_projects/panorama_video_processor]: ↲<br/>camera_node_name [camera_input]: ↲<br/>display_node_name [display_output]: ↲<br/>code_package_name [panorama_video_processor_logic]: ↲<br/>code_package_version [1.0]: ↲<br/>code_asset_name [panorama_video_processor_logic_asset]: ↲<br/>code_node_name [panorama_video_processor_logic_node]: ↲<br/>model_package_name [panorama_video_processor_model]: ↲<br/>model_package_version [1.0]: ↲<br/>model_asset_name [panorama_video_processor_model_asset]: ↲<br/>model_node_name [panorama_video_processor_model_node]: ↲<br/>model_input_name [input0]: ↲<br/>model_processing_width [224]: ↲<br/>model_processing_height [224]: ↲</span></pre><p id="5112" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">Cookiecutter将在名为<code class="fe mr ms mt mu b">project_slug</code>参数的目录中生成您的项目，在上面的例子中是<code class="fe mr ms mt mu b">panorama_video_processor</code>:</p><pre class="kg kh ki kj gt mw mu mx my aw mz bi"><span id="11ac" class="na lt iq mu b gy nb nc l nd ne"><strong class="mu ir">$ cd </strong><strong class="mu ir">panorama_video_processor</strong></span></pre><h1 id="da68" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">包含电池:构建系统</h1><p id="0fa9" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">一旦生成了项目，您就可以开始与Makefile进行交互了。构建系统提供了一组丰富的功能:配置git存储库，构建应用程序容器和深度学习模型，将包上传到您的AWS帐户以准备部署到Panorama设备，在您的开发工作站上使用<a class="ae kv" href="https://github.com/aws-samples/aws-panorama-samples" rel="noopener ugc nofollow" target="_blank">测试实用程序</a>运行您的应用程序，防止您的AWS帐户id在公共git存储库中泄露，等等。有关功能的完整列表，请参考Panorama项目中生成的自述文件。<a class="ae kv" href="https://github.com/mrtj/cookiecutter-panorama/blob/main/%7B%7Bcookiecutter.project_slug%7D%7D/README.md" rel="noopener ugc nofollow" target="_blank">这里</a>是预览。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi mq"><img src="../Images/d16b78024b15e93e632e6cf5a85330ba.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*_GloJiI8-zNkQnUs"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated"><a class="ae kv" href="https://unsplash.com/@hojipago?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">姚</a>在<a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍照</p></figure><p id="15e6" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">cookiecutter-panorama提供的一些任务您可以从中受益:</p><ul class=""><li id="331b" class="nf ng iq ky b kz la lc ld lf nh lj ni ln nj lr nk nl nm nn bi translated"><code class="fe mr ms mt mu b"><strong class="ky ir">make init-repo</strong></code>:初始化一个git仓库</li><li id="530e" class="nf ng iq ky b kz no lc np lf nq lj nr ln ns lr nk nl nm nn bi translated">安装所需的构建工具:<a class="ae kv" href="https://aws.amazon.com/cli/" rel="noopener ugc nofollow" target="_blank"> aws-cli </a>、<a class="ae kv" href="https://github.com/aws/aws-panorama-cli" rel="noopener ugc nofollow" target="_blank"> panorama-cli </a>和<a class="ae kv" href="https://docs.docker.com/get-docker/" rel="noopener ugc nofollow" target="_blank"> docker </a>。<a class="ae kv" href="https://docs.aws.amazon.com/cli/latest/userguide/cli-chap-configure.html" rel="noopener ugc nofollow" target="_blank">将aws-cli配置为注册Panorama设备的帐户的凭据。</a></li><li id="a579" class="nf ng iq ky b kz no lc np lf nq lj nr ln ns lr nk nl nm nn bi translated"><code class="fe mr ms mt mu b"><strong class="ky ir">make import</strong></code>:将项目导入您的AWS账户</li><li id="cd55" class="nf ng iq ky b kz no lc np lf nq lj nr ln ns lr nk nl nm nn bi translated"><code class="fe mr ms mt mu b"><strong class="ky ir">make build</strong></code>:构建项目，创建一个虚拟的深度学习模型，以后可以用实际的模型替换。虚拟模型将使用模型包基础架构和Panorama设备的真实GPU计算输入视频帧的RGB通道的平均值。</li><li id="9d21" class="nf ng iq ky b kz no lc np lf nq lj nr ln ns lr nk nl nm nn bi translated"><code class="fe mr ms mt mu b"><strong class="ky ir">make package</strong></code>:将编译好的应用容器和打包好的深度学习模型上传到你的AWS账号。这个脚本还将输出编译后的清单JSON的路径。</li></ul><p id="cfc4" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">然后您可以拿起清单JSON，前往<a class="ae kv" href="https://console.aws.amazon.com/panorama/home" rel="noopener ugc nofollow" target="_blank"> AWS Panorama控制台</a>并部署您的应用程序！</p><p id="1816" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">有问题吗？问题？建议？<a class="ae kv" href="https://github.com/mrtj/cookiecutter-panorama/issues/new/choose" rel="noopener ugc nofollow" target="_blank">在<a class="ae kv" href="https://github.com/mrtj/cookiecutter-panorama" rel="noopener ugc nofollow" target="_blank"> cookiecutter-panorama github项目</a>中打开一个问题</a>，或使用以下联系人联系！</p><h1 id="7640" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">关于作者</h1><p id="39e1" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">Janos Tolgyesi是Neosperience的AWS社区构建者和机器学习团队负责人，拥有5年多的ML技术专业知识和8年多的AWS经验。他喜欢构建东西，让它成为边缘的<a class="ae kv" href="https://www.neosperience.com/solutions/people-analytics/" rel="noopener ugc nofollow" target="_blank">视频分析应用</a>，或者基于点击流事件的<a class="ae kv" href="https://www.neosperience.com/solutions/user-insight/" rel="noopener ugc nofollow" target="_blank">用户分析器</a>。你可以在<a class="ae kv" href="https://twitter.com/jtolgyesi" rel="noopener ugc nofollow" target="_blank"> Twitter </a>、<a class="ae kv" href="https://towardsdatascience.com/@janos.tolgyesi" rel="noopener" target="_blank"> Medium </a>和<a class="ae kv" href="http://linkedin.com/in/janostolgyesi" rel="noopener ugc nofollow" target="_blank"> LinkedIn </a>上找到我。</p><p id="af09" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">cookiecutter-panorama开源项目得到了<a class="ae kv" href="https://www.neosperience.com/" rel="noopener ugc nofollow" target="_blank"> Neosperience </a>的支持。</p><p id="2dda" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我要特别感谢<a class="ae kv" href="https://medium.com/u/6550450171ac" rel="noopener">卢卡·比安奇</a>校对了这篇文章。</p></div></div>    
</body>
</html>