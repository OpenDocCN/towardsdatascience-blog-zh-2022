<html>
<head>
<title>Probability of Being Affected While the Test is Positive</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">测试呈阳性时受影响的概率</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/probability-of-being-affected-while-the-test-is-positive-e62ac19311fa#2022-02-07">https://towardsdatascience.com/probability-of-being-affected-while-the-test-is-positive-e62ac19311fa#2022-02-07</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="1971" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">用 Excel 计算，以减少对假阳性悖论的混淆</h2></div><p id="f5ff" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们对统计数据的直觉可能是错误的，统计悖论可能无处不在。当我们意识到这一点时，我们可以对我们的直觉如何误导我们得出的结论持更加批判的态度。</p><p id="dc52" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在这篇文章中，我将谈论假阳性悖论。对于一直知道这个悖论的人，你也可以看看我对它和机器学习关系的思考。</p><h1 id="91d1" class="le lf it bd lg lh li lj lk ll lm ln lo jz lp ka lq kc lr kd ls kf lt kg lu lv bi translated">悖论</h1><p id="36a9" class="pw-post-body-paragraph ki kj it kk b kl lw ju kn ko lx jx kq kr ly kt ku kv lz kx ky kz ma lb lc ld im bi translated">想象一下，有一个疫情，政府试图为每个人组织测试。</p><p id="11dc" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">通常给出测试的以下特征:</p><ul class=""><li id="d538" class="mb mc it kk b kl km ko kp kr md kv me kz mf ld mg mh mi mj bi translated">测试的<strong class="kk iu">灵敏度</strong>表示该测试正确识别受感染人群的性能。它也被称为<strong class="kk iu">真阳性率</strong>或<strong class="kk iu">回忆</strong>。最高值为 100%,意味着所有<strong class="kk iu">感染者</strong>都被正确识别。</li><li id="cbff" class="mb mc it kk b kl mk ko ml kr mm kv mn kz mo ld mg mh mi mj bi translated">测试的<strong class="kk iu">特异性</strong>表明测试的性能能够正确识别未被感染的人。最高值也是 100%，意味着所有未受感染的人都被正确识别。在我们的例子中，假设测试的特异性为 98%。现在，你认为它已经很高了吗？我们将改变这个值，看看它将如何影响结果。</li></ul><p id="d913" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">受影响的人口估计为 2%。我们也称这个指标为疾病的患病率。</p><p id="aa8e" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">现在想象你做了一个测试，它是阳性的。你真正被感染的概率有多大？该指标也被称为测试的<strong class="kk iu">精度</strong>。</p><blockquote class="mp mq mr"><p id="a953" class="ki kj ms kk b kl km ju kn ko kp jx kq mt ks kt ku mu kw kx ky mv la lb lc ld im bi translated">凭直觉，你觉得有什么价值？90 %左右？如果告诉你是相当于 50%呢！是的，测试是阳性的，但是你只有 50%的机会被真正感染。</p></blockquote><p id="e045" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">为了清楚地说明计算过程，我创建了一个<strong class="kk iu"/><a class="ae mw" href="https://docs.google.com/spreadsheets/d/1xVsMiXV1dxJ6KtXlp-1DeX4zPlbicyND2My0mSr1KBc/edit?usp=sharing" rel="noopener ugc nofollow" target="_blank"><strong class="kk iu">Google Sheet</strong></a><strong class="kk iu"/>来完成所有的计算。我们开始吧！</p><figure class="my mz na nb gt nc gh gi paragraph-image"><div role="button" tabindex="0" class="nd ne di nf bf ng"><div class="gh gi mx"><img src="../Images/b6e219d7ae461afdaaafd4cd0c6f420c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*ks8ScgBL6tho01AD"/></div></div><p class="nj nk gj gh gi nl nm bd b be z dk translated">在<a class="ae mw" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上<a class="ae mw" href="https://unsplash.com/@mufidpwt?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Mufid Majnun </a>拍摄的照片</p></figure><h1 id="1be1" class="le lf it bd lg lh li lj lk ll lm ln lo jz lp ka lq kc lr kd ls kf lt kg lu lv bi translated">低患病率的混淆矩阵</h1><h2 id="e4ba" class="nn lf it bd lg no np dn lk nq nr dp lo kr ns nt lq kv nu nv ls kz nw nx lu ny bi translated">真正的积极和真正的消极</h2><p id="9680" class="pw-post-body-paragraph ki kj it kk b kl lw ju kn ko lx jx kq kr ly kt ku kv lz kx ky kz ma lb lc ld im bi translated">让我们从真正感染和未感染的人数开始。考虑到总人口是 1000 人，由于患病率是 2%，我们只有 20 人感染。</p><figure class="my mz na nb gt nc gh gi paragraph-image"><div class="gh gi nz"><img src="../Images/7acd67609996afe9916e2eaec61fa9ad.png" data-original-src="https://miro.medium.com/v2/resize:fit:1236/format:webp/1*ru0hWzkIrdryVSUj5kh5cw.png"/></div><p class="nj nk gj gh gi nl nm bd b be z dk translated">作者图片</p></figure><p id="5911" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">现在，给定<strong class="kk iu">特异性</strong>和<strong class="kk iu">敏感性</strong>，我们可以计算真阳性和真阴性的数量。</p><ul class=""><li id="14fe" class="mb mc it kk b kl km ko kp kr md kv me kz mf ld mg mh mi mj bi translated">由于检测是<strong class="kk iu">高度特异性</strong>，所有感染者都被识别出来。</li><li id="3e93" class="mb mc it kk b kl mk ko ml kr mm kv mn kz mo ld mg mh mi mj bi translated">特异性还不完善，我们在 980 人中鉴定了 960 人。</li></ul><figure class="my mz na nb gt nc gh gi paragraph-image"><div class="gh gi oa"><img src="../Images/6b2a2ff40747534742553ea11ecc600b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1212/format:webp/1*w15NN14eQ1dSuF9hXYLdgg.png"/></div><p class="nj nk gj gh gi nl nm bd b be z dk translated">作者图片</p></figure><h2 id="f7cd" class="nn lf it bd lg no np dn lk nq nr dp lo kr ns nt lq kv nu nv ls kz nw nx lu ny bi translated"><strong class="ak">假阴性</strong>和<strong class="ak">假阳性</strong></h2><p id="695a" class="pw-post-body-paragraph ki kj it kk b kl lw ju kn ko lx jx kq kr ly kt ku kv lz kx ky kz ma lb lc ld im bi translated">为了完成表格，我们可以做一些减法，我们有了<strong class="kk iu">假阴性</strong>和<strong class="kk iu">假阳性的数量。</strong></p><figure class="my mz na nb gt nc gh gi paragraph-image"><div class="gh gi ob"><img src="../Images/447e966896cbbe33cec5a4777f5ed0da.png" data-original-src="https://miro.medium.com/v2/resize:fit:1332/format:webp/1*xxUEPNU0nvZoJiGAWbAyJA.png"/></div><p class="nj nk gj gh gi nl nm bd b be z dk translated">作者图片</p></figure><h2 id="ae5c" class="nn lf it bd lg no np dn lk nq nr dp lo kr ns nt lq kv nu nv ls kz nw nx lu ny bi translated">测试的精确度</h2><p id="3672" class="pw-post-body-paragraph ki kj it kk b kl lw ju kn ko lx jx kq kr ly kt ku kv lz kx ky kz ma lb lc ld im bi translated">完成混淆矩阵后，我们现在可以通过将真阳性的数量除以测试阳性的总数来计算测试的精确度。</p><p id="cfb3" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">由于低流行率导致真阳性的数量很低，即使测试非常特异(98%)，假阳性的数量与真阳性相比相对较高。</p><p id="58a2" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">所以测试的精度相当低，51%左右！</p><figure class="my mz na nb gt nc gh gi paragraph-image"><div class="gh gi oc"><img src="../Images/82a6ec5dd54dce7edc05b66b61627517.png" data-original-src="https://miro.medium.com/v2/resize:fit:1324/format:webp/1*fmopC7xnuKcQ9I2EC8zlNw.png"/></div><p class="nj nk gj gh gi nl nm bd b be z dk translated">作者图片</p></figure><p id="9200" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们可以对测试的特征做一些改变，更高的特异性会增加测试的精确度。</p><figure class="my mz na nb gt nc gh gi paragraph-image"><div class="gh gi od"><img src="../Images/6c033ffbc6fd1f430a99605c50d2fdd9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1344/format:webp/1*kUWYy0Y1u_BMM5DbHn6Kqg.png"/></div><p class="nj nk gj gh gi nl nm bd b be z dk translated">作者图片</p></figure><h1 id="b08f" class="le lf it bd lg lh li lj lk ll lm ln lo jz lp ka lq kc lr kd ls kf lt kg lu lv bi translated">假阳性悖论</h1><blockquote class="mp mq mr"><p id="880a" class="ki kj ms kk b kl km ju kn ko kp jx kq mt ks kt ku mu kw kx ky mv la lb lc ld im bi translated">统计学上的<strong class="kk iu">悖论</strong>是虽然特异性很高，但由于患病率非常低，精确度很低。这被称为<strong class="kk iu">假阳性悖论</strong>，因为尽管事实上测试是阳性的，我们仍然有相对高的几率成为<strong class="kk iu">假阳性</strong>。</p></blockquote><p id="96bc" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这也是一种基本比率谬误，因为我们忽略了一个事实，即相对于总人口而言，受感染的人数很低。</p><h2 id="9923" class="nn lf it bd lg no np dn lk nq nr dp lo kr ns nt lq kv nu nv ls kz nw nx lu ny bi translated">高患病率的混淆矩阵</h2><p id="9471" class="pw-post-body-paragraph ki kj it kk b kl lw ju kn ko lx jx kq kr ly kt ku kv lz kx ky kz ma lb lc ld im bi translated">有了 Excel 文件，如果你增加流行度，那么我们就不会看到这个悖论。</p><figure class="my mz na nb gt nc gh gi paragraph-image"><div role="button" tabindex="0" class="nd ne di nf bf ng"><div class="gh gi oe"><img src="../Images/00eb6bc8506b3240546152b3fc57ac87.png" data-original-src="https://miro.medium.com/v2/resize:fit:1254/format:webp/1*R5A5HdRpXkTDqIPycRdW3Q.png"/></div></div><p class="nj nk gj gh gi nl nm bd b be z dk translated">作者图片</p></figure><h2 id="6bb0" class="nn lf it bd lg no np dn lk nq nr dp lo kr ns nt lq kv nu nv ls kz nw nx lu ny bi translated">真实世界的数据</h2><p id="af6b" class="pw-post-body-paragraph ki kj it kk b kl lw ju kn ko lx jx kq kr ly kt ku kv lz kx ky kz ma lb lc ld im bi translated">我搜索了一些关于 Covid 测试的真实数据。你可以阅读这个关于测试特性的<a class="ae mw" href="https://ec.europa.eu/health/system/files/2022-01/covid-19_rat_common-list_en.pdf" rel="noopener ugc nofollow" target="_blank">文件</a>。我们可以看到特异性通常高于 99.8%。有时候，甚至是 100%。</p><h1 id="153b" class="le lf it bd lg lh li lj lk ll lm ln lo jz lp ka lq kc lr kd ls kf lt kg lu lv bi translated">与机器学习的联系</h1><h2 id="019a" class="nn lf it bd lg no np dn lk nq nr dp lo kr ns nt lq kv nu nv ls kz nw nx lu ny bi translated">性能赋值</h2><p id="83c8" class="pw-post-body-paragraph ki kj it kk b kl lw ju kn ko lx jx kq kr ly kt ku kv lz kx ky kz ma lb lc ld im bi translated">混淆矩阵用于<strong class="kk iu">医疗诊断</strong>，也用于<strong class="kk iu">信息检索</strong>和机器学习<strong class="kk iu">分类任务</strong>。</p><p id="3240" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">用机器学习的术语来说，低流行率意味着<strong class="kk iu">不平衡的训练数据</strong>。在这种情况下，评估一款车型的性能，少不了既看<strong class="kk iu">精度</strong>又看<strong class="kk iu">召回</strong>。然后我们就可以计算出<strong class="kk iu"> F1-score </strong>，这是精度和召回率的调和平均值。</p><blockquote class="mp mq mr"><p id="cc37" class="ki kj ms kk b kl km ju kn ko kp jx kq mt ks kt ku mu kw kx ky mv la lb lc ld im bi translated">我们可能知道，在建立模型时，不可能同时获得高精度和高召回率。所以我们要选择强调其中的一个。对于医学诊断的情况，你决定强调哪一个？</p></blockquote><h2 id="f2b8" class="nn lf it bd lg no np dn lk nq nr dp lo kr ns nt lq kv nu nv ls kz nw nx lu ny bi translated">欠拟合</h2><p id="4594" class="pw-post-body-paragraph ki kj it kk b kl lw ju kn ko lx jx kq kr ly kt ku kv lz kx ky kz ma lb lc ld im bi translated">如果我们考虑到混淆矩阵是为一个机器学习模型计算的，那么这个模型<strong class="kk iu">只有一个变量</strong>(测试的结果)，是一种<strong class="kk iu">欠拟合</strong>。在实践中，我们有更多的变量可以是不同的<strong class="kk iu">症状</strong>。所以把它们结合起来，我们应该能提高精度。当然，如果疾病是<strong class="kk iu">无症状的</strong>，我们就无法获得更多的信息，所以我们会在高缺失值的情况下。</p><p id="c3be" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">比如<a class="ae mw" href="https://en.wikipedia.org/wiki/Base_rate_fallacy#Example_2:_Drunk_drivers" rel="noopener ugc nofollow" target="_blank">基础谬误率</a>的维基百科页面上，我们有一个酒驾的例子。悖论是可以应用的，但是在实践中，通常还有其他的符号来增加精度。如果司机不能直线驾驶，或者他不能清楚地说话，那么，在现实中，我们在我们的“<strong class="kk iu">模型</strong>中有更多的变量来确定司机是否喝醉。</p><figure class="my mz na nb gt nc gh gi paragraph-image"><div class="gh gi of"><img src="../Images/13cb875025224113daf5c5f7280a44b5.png" data-original-src="https://miro.medium.com/v2/resize:fit:908/format:webp/1*XF2pbQrRUOR3TjIX_lHMSQ.png"/></div><p class="nj nk gj gh gi nl nm bd b be z dk translated">作者图片</p></figure><h1 id="1964" class="le lf it bd lg lh li lj lk ll lm ln lo jz lp ka lq kc lr kd ls kf lt kg lu lv bi translated">结论</h1><p id="c43e" class="pw-post-body-paragraph ki kj it kk b kl lw ju kn ko lx jx kq kr ly kt ku kv lz kx ky kz ma lb lc ld im bi translated">对于这个悖论和其他我也想写的悖论，我们能说些什么呢？一方面，重要的是要有一种统计文化，让我们知道有时我们的直觉可能会误导我们得出错误的结论。另一方面，现实世界要复杂得多，我们不应该停留在简单的统计数字上。</p><div class="og oh gp gr oi oj"><a href="https://medium.com/@angela.shi/membership" rel="noopener follow" target="_blank"><div class="ok ab fo"><div class="ol ab om cl cj on"><h2 class="bd iu gy z fp oo fr fs op fu fw is bi translated">通过我的推荐链接加入 Medium-Angela Shi</h2><div class="oq l"><h3 class="bd b gy z fp oo fr fs op fu fw dk translated">作为一个媒体会员，你的会员费的一部分会给你阅读的作家，你可以完全接触到每一个故事…</h3></div><div class="or l"><p class="bd b dl z fp oo fr fs op fu fw dk translated">medium.com</p></div></div><div class="os l"><div class="ot l ou ov ow os ox nh oj"/></div></div></a></div></div></div>    
</body>
</html>