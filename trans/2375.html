<html>
<head>
<title>Two Methods for Performing Graphical Residuals Analysis</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">执行图形残差分析的两种方法</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/two-methods-for-performing-graphical-residuals-analysis-6899fd4c78e5#2022-05-24">https://towardsdatascience.com/two-methods-for-performing-graphical-residuals-analysis-6899fd4c78e5#2022-05-24</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="1b8c" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">猜测你是否可以在你的ML问题中使用线性模型的一些技巧</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/77e8788dfe2dfb11ce937ca568c48c52.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Uw3IaV-wHnYkMUrLBVTfpg.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">艾萨克·史密斯在<a class="ae ky" href="https://unsplash.com/s/photos/analysis?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure><p id="56aa" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi lv translated"><span class="l lw lx ly bm lz ma mb mc md di">回归分析的一个重要部分是了解我们是否可以使用线性模型来解决我们的ML问题。有很多方法可以做到这一点，通常，我们必须使用多种方法来了解我们的数据是否真的是线性分布的。</span></p><p id="9c19" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在本文中，我们将看到两种不同的图形方法来分析回归问题中的残差:但这只是有助于理解我们的数据是否是线性分布的两种方法。</p><p id="5f32" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">您可以只使用这些方法中的一种，甚至两种都用，但是您将需要其他度量的帮助来更好地验证您的假设(要使用的模型是线性的):我们将在以后的文章中看到其他方法。</p><p id="8855" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">但是首先…回归问题中的残差是什么？</p><h1 id="7873" class="me mf it bd mg mh mi mj mk ml mm mn mo jz mp ka mq kc mr kd ms kf mt kg mu mv bi translated">1.解释残差</h1><p id="a296" class="pw-post-body-paragraph kz la it lb b lc mw ju le lf mx jx lh li my lk ll lm mz lo lp lq na ls lt lu im bi translated">执行回归分析时，最好先检查其线性。当我们执行简单的线性回归分析时，我们得到所谓的最佳拟合线，这是最接近我们正在研究的数据的线。通常，用普通的最小二乘法计算“最适合”数据的线。有很多方法可以找到最符合数据的线；举个例子，一个是用一个正则化方法(如果你想加深正则化背后的概念，可以在这里阅读我的解释<a class="ae ky" rel="noopener" target="_blank" href="/understanding-l1-and-l2-regularization-93918a5ac8d0">。</a></p><p id="d8b9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们考虑将简单的线性回归公式应用于我们的数据；通常会出现的情况是，数据点没有恰好落在回归线上(即使我们使用两种正则化方法中的一种)；它们分散在我们“最适合”的系列中。在这种情况下，我们称<strong class="lb iu">残差为数据点和回归线</strong>之间的垂直距离。因此，残差可以是:</p><ul class=""><li id="e01f" class="nb nc it lb b lc ld lf lg li nd lm ne lq nf lu ng nh ni nj bi translated">如果它们高于回归线，则为正</li><li id="abfe" class="nb nc it lb b lc nk lf nl li nm lm nn lq no lu ng nh ni nj bi translated">如果低于回归线，则为负值</li><li id="7b6c" class="nb nc it lb b lc nk lf nl li nm lm nn lq no lu ng nh ni nj bi translated">如果回归线实际上通过该点，则为零</li></ul><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi np"><img src="../Images/fd33e3cff1b637889ba034a0376fb848.png" data-original-src="https://miro.medium.com/v2/resize:fit:542/format:webp/1*_niq-AIAeLugqWvVAAgZBg.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">残差被可视化:它们是绿色的垂直线(红线是回归线)。图片作者。</p></figure><p id="fe10" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">所以，残差也可以看作是t <strong class="lb iu">任意数据点与回归线之间的差值，</strong>与<strong class="lb iu">，</strong>由于这个原因，<strong class="lb iu">，</strong>它们有时被称为“误差”。在这种情况下，错误并不意味着分析有问题:它只是意味着存在一些无法解释的差异。</p><p id="0064" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在，让我们看看如何用图形表示残差，以及如何解释这些图形。</p><h1 id="314a" class="me mf it bd mg mh mi mj mk ml mm mn mo jz mp ka mq kc mr kd ms kf mt kg mu mv bi translated">2.残差与预测值</h1><p id="7e1e" class="pw-post-body-paragraph kz la it lb b lc mw ju le lf mx jx lh li my lk ll lm mz lo lp lq na ls lt lu im bi translated">我们可能感兴趣的与残差相关的图表之一是“<strong class="lb iu">残差与预测值</strong>的关系图。当我们用线性模型预测值时，必须绘制这种图形。</p><p id="659b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我从我的一个项目中提取了以下代码。假设我们的线性模型预测了我们的值:我们想要绘制“残差与预测”图；我们可以用这段代码来实现:</p><pre class="kj kk kl km gt nq nr ns nt aw nu bi"><span id="a51f" class="nv mf it nr b gy nw nx l ny nz">import matplotlib.pyplot as plt<br/>import seaborn as sns</span><span id="de9f" class="nv mf it nr b gy oa nx l ny nz">#figure size<br/>plt.figure(figsize=(10, 7))</span><span id="9031" class="nv mf it nr b gy oa nx l ny nz">#residual plot (y_test and Y_test_pred already calculated)<br/>sns.residplot(x=y_test, y=y_test_pred)</span><span id="4a1f" class="nv mf it nr b gy oa nx l ny nz">#labeling<br/>plt.title('REDISUALS VS PREDICTED VALUES')<br/>plt.xlabel('PREDICTED VALUES (DIABETES PROGRESSION)')<br/>plt.ylabel('REDISUALS')</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ob"><img src="../Images/f1de15e5febdbf71d92b3577b685f341.png" data-original-src="https://miro.medium.com/v2/resize:fit:1240/format:webp/1*8cRtJipng8zzO99bT7N9VA.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">残差与预测值。图片作者。</p></figure><p id="1bca" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">关于这个情节，我们能说些什么呢？</p><p id="4a39" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">残差是随机分布的(上图没有明确的模式)，这告诉我们选择的(线性)模型还不错，但是残差的高值太多(甚至超过100)意味着模型的误差高。</p><p id="c3f2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">像这样的图可以给我们这样的感觉，我们可以应用线性模型来解决我们的ML问题。在这个项目的具体案例中，我不能(如果你想加深理解，你可以阅读我的研究的第一部分和第二部分<a class="ae ky" rel="noopener" target="_blank" href="/predicting-diabetes-with-machine-learning-part-ii-a6f703e8cf04"/>)，这就是为什么我在上面写道，我们需要将这些图与其他指标“整合”，然后才能宣布数据确实是线性分布的。</p><p id="2790" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">有没有一种方法可以让残差警告我们，我们应用的线性模型不是一个好的选择？假设你找到了这样一个图表:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oc"><img src="../Images/fe6c0c56bcc5def883cbac2e504c842f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*NKzJCIwDEdr4FRwPA5ASQg.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">残差与预测值。图片作者。</p></figure><p id="f4de" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在这种情况下，该图显示了一个清晰的模式(一个比喻),它向我们表明，线性模型可能不是这个ML问题的一个好选择。</p><p id="af46" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><em class="od">总结</em>:</p><p id="2335" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这种图可以给我们一种直觉，告诉我们是否可以使用线性模型进行回归分析。如果图中显示<strong class="lb iu"><em class="od"/></strong><em class="od"/><strong class="lb iu"><em class="od">没有特定的模式，很可能我们可以使用线性模型</em></strong><em class="od">；</em> <strong class="lb iu"> <em class="od">如果有特定的模式，我们很可能应该尝试不同的ML模式</em> </strong> <em class="od">。</em> <strong class="lb iu"> <em class="od">无论如何</em> </strong> <em class="od">，在这个情节之后，</em> <strong class="lb iu"> <em class="od">我们必须用其他的度量来验证我们最初的直觉。</em>T29】</strong></p><h1 id="a6bb" class="me mf it bd mg mh mi mj mk ml mm mn mo jz mp ka mq kc mr kd ms kf mt kg mu mv bi translated">3.QQ情节</h1><p id="1924" class="pw-post-body-paragraph kz la it lb b lc mw ju le lf mx jx lh li my lk ll lm mz lo lp lq na ls lt lu im bi translated">QQ图是“分位数-分位数”图，是一种通过绘制两个概率分布的分位数来比较它们的图形方法。</p><p id="fa7d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">假设我们有数据(称为“数据”)要绘制在qq-plot中；我们可以用下面的代码来实现:</p><pre class="kj kk kl km gt nq nr ns nt aw nu bi"><span id="d513" class="nv mf it nr b gy nw nx l ny nz">import statsmodels.api as sm<br/>import pylab<br/></span><span id="057b" class="nv mf it nr b gy oa nx l ny nz">#qq-plot<br/>sm.qqplot(data, line='45')</span><span id="db45" class="nv mf it nr b gy oa nx l ny nz">#showing plot<br/>pylab.show()</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi oe"><img src="../Images/7e195c244cef43c40faa519ffdfbc361.png" data-original-src="https://miro.medium.com/v2/resize:fit:768/format:webp/1*HT8MnEk4pi5R9qh7gWJyfA.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者的qq图。</p></figure><p id="08fe" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果结果显示<strong class="lb iu">残差分布在线</strong>周围，就像上面的图一样，那么<strong class="lb iu">很有可能我们可以使用线性模型</strong>来解决我们的ML问题。但是，再一次:我们需要其他指标来证实这个最初的直觉。</p><h1 id="43e0" class="me mf it bd mg mh mi mj mk ml mm mn mo jz mp ka mq kc mr kd ms kf mt kg mu mv bi translated"><strong class="ak">结论</strong></h1><p id="cbe6" class="pw-post-body-paragraph kz la it lb b lc mw ju le lf mx jx lh li my lk ll lm mz lo lp lq na ls lt lu im bi translated">当我们执行回归分析时，一个好主意是首先测试ist线性。我们要做的第一件事是计算一些度量(例如R和MSE)并获得对问题的第一直觉，试图了解是否可以用线性模型来解决；然后，我们可以用本文中看到的一个(或者两个)情节来加强(或者不加强！)我们最初的直觉；然后，我们必须使用其他方法来最终决定是否可以将线性模型应用于我们的问题(但我们将在另一篇文章中看到这些方法)。</p></div><div class="ab cl of og hx oh" role="separator"><span class="oi bw bk oj ok ol"/><span class="oi bw bk oj ok ol"/><span class="oi bw bk oj ok"/></div><div class="im in io ip iq"><p id="9f76" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><em class="od">我们一起连线吧！</em></p><p id="1c25" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><a class="ae ky" href="https://federicotrotta.medium.com/" rel="noopener"> <em class="od">中等</em> </a></p><p id="7cc4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><a class="ae ky" href="https://www.linkedin.com/in/federico-trotta/" rel="noopener ugc nofollow" target="_blank"><em class="od">LINKEDIN</em></a><em class="od">(给我发送连接请求)</em></p><p id="2456" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><em class="od">如果你愿意，你可以</em> <a class="ae ky" href="https://federicotrotta.medium.com/subscribe" rel="noopener"> <em class="od">订阅我的邮件列表</em> </a> <em class="od">这样你就可以一直保持更新了！</em></p></div><div class="ab cl of og hx oh" role="separator"><span class="oi bw bk oj ok ol"/><span class="oi bw bk oj ok ol"/><span class="oi bw bk oj ok"/></div><div class="im in io ip iq"><p id="4046" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">考虑成为会员:你可以免费支持我和其他像我一样的作家。点击 <a class="ae ky" href="https://federicotrotta.medium.com/membership" rel="noopener"> <em class="od">这里</em> </a> <em class="od">成为会员。</em></p></div></div>    
</body>
</html>