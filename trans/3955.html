<html>
<head>
<title>25 Advanced Pandas Functions People Are Using Without Telling You</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">人们在不告诉你的情况下使用的25种先进的熊猫功能</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/25-advanced-pandas-functions-people-are-using-without-telling-you-b65fa442f0f4#2022-09-02">https://towardsdatascience.com/25-advanced-pandas-functions-people-are-using-without-telling-you-b65fa442f0f4#2022-09-02</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="9593" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">ExcelWriter，因式分解，分解，挤压，T，遮罩，idxmax，剪辑，…</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/9307dd7025db0997ae497a580d36c30c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*NyZYkBjwiZuXQ0COgMNkmQ.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">来自<a class="ae ky" href="https://www.pexels.com/photo/man-wearing-black-blazer-3051576/" rel="noopener ugc nofollow" target="_blank"> Pexels </a>的Caleb Oquendo的照片</p></figure><p id="5812" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">“我希望我能在熊猫身上做这个手术……”</p><p id="eac6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">很有可能，你可以！</p><p id="7a25" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Pandas是如此的庞大和深入，它使您能够执行几乎任何您能想到的表格操作。然而，这种巨大有时会成为劣势。</p><p id="55c0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">许多优雅、高级的特性解决了罕见的边缘情况和独特的场景，但这些特性在文档中消失了，被更频繁使用的特性所掩盖。</p><p id="ea5a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这篇文章旨在重新发现这些特征，并向你展示熊猫比你所知道的更令人敬畏。</p><div class="lw lx gp gr ly lz"><a href="https://ibexorigin.medium.com/membership" rel="noopener follow" target="_blank"><div class="ma ab fo"><div class="mb ab mc cl cj md"><h2 class="bd iu gy z fp me fr fs mf fu fw is bi translated">通过我的推荐链接加入Medium-BEXGBoost</h2><div class="mg l"><h3 class="bd b gy z fp me fr fs mf fu fw dk translated">获得独家访问我的所有⚡premium⚡内容和所有媒体没有限制。支持我的工作，给我买一个…</h3></div><div class="mh l"><p class="bd b dl z fp me fr fs mf fu fw dk translated">ibexorigin.medium.com</p></div></div><div class="mi l"><div class="mj l mk ml mm mi mn ks lz"/></div></div></a></div><p id="37b8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">获得由强大的AI-Alpha信号选择和总结的最佳和最新的ML和AI论文:</p><div class="lw lx gp gr ly lz"><a href="https://alphasignal.ai/?referrer=Bex" rel="noopener  ugc nofollow" target="_blank"><div class="ma ab fo"><div class="mb ab mc cl cj md"><h2 class="bd iu gy z fp me fr fs mf fu fw is bi translated">阿尔法信号|机器学习的极品。艾总结的。</h2><div class="mg l"><h3 class="bd b gy z fp me fr fs mf fu fw dk translated">留在循环中，不用花无数时间浏览下一个突破；我们的算法识别…</h3></div><div class="mh l"><p class="bd b dl z fp me fr fs mf fu fw dk translated">alphasignal.ai</p></div></div><div class="mi l"><div class="mo l mk ml mm mi mn ks lz"/></div></div></a></div></div><div class="ab cl mp mq hx mr" role="separator"><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu"/></div><div class="im in io ip iq"><h1 id="3fd5" class="mw mx it bd my mz na nb nc nd ne nf ng jz nh ka ni kc nj kd nk kf nl kg nm nn bi translated">1.<code class="fe no np nq nr b">ExcelWriter</code></h1><p id="1b16" class="pw-post-body-paragraph kz la it lb b lc ns ju le lf nt jx lh li nu lk ll lm nv lo lp lq nw ls lt lu im bi translated"><code class="fe no np nq nr b">ExcelWriter</code>是创建excel文件的通用类(带工作表！)并将数据帧写入其中。假设我们有2:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nx ny l"/></div></figure><p id="b76d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">它有额外的属性来指定要使用的日期时间格式，您是否想要创建一个新的excel文件或修改一个现有的文件，当一个工作表存在时会发生什么，等等。查看<a class="ae ky" href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.ExcelWriter.html" rel="noopener ugc nofollow" target="_blank">文档</a>中的详细信息。</p></div><div class="ab cl mp mq hx mr" role="separator"><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu"/></div><div class="im in io ip iq"><h1 id="8e65" class="mw mx it bd my mz na nb nc nd ne nf ng jz nh ka ni kc nj kd nk kf nl kg nm nn bi translated">2.<code class="fe no np nq nr b">pipe</code></h1><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nz"><img src="../Images/f95d24fa223808c22df3b757ee5bd288.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2MGii6YBvod5EQls2oW1Aw.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated"><strong class="bd oa">照片由</strong> <a class="ae ky" href="https://www.pexels.com/@leah-kelley-50725?utm_content=attributionCopyText&amp;utm_medium=referral&amp;utm_source=pexels" rel="noopener ugc nofollow" target="_blank"> <strong class="bd oa">莉亚·凯利</strong> </a> <strong class="bd oa">上</strong> <a class="ae ky" href="https://www.pexels.com/photo/grayscale-photo-of-man-holding-tobacco-pipe-192473/?utm_content=attributionCopyText&amp;utm_medium=referral&amp;utm_source=pexels" rel="noopener ugc nofollow" target="_blank"> <strong class="bd oa">佩克斯</strong> </a></p></figure><p id="9068" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe no np nq nr b">pipe</code>是Pandas中以简洁紧凑的方式进行数据清理的最佳功能之一。它允许您将多个自定义函数链接到一个操作中。</p><p id="c975" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">例如，假设你有接受自己参数的函数<code class="fe no np nq nr b">drop_duplicates</code>、<code class="fe no np nq nr b">remove_outliers</code>、<code class="fe no np nq nr b">encode_categoricals</code>。以下是如何在一次操作中应用这三种方法:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nx ny l"/></div></figure><p id="ba85" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我喜欢这个函数如何类似于<a class="ae ky" rel="noopener" target="_blank" href="/how-to-use-sklearn-pipelines-for-ridiculously-neat-code-a61ab66ca90d"> Sklearn管道</a>。你可以用它做更多的事情，所以查看一下<a class="ae ky" href="https://pandas.pydata.org/docs/reference/api/pandas.DataFrame.pipe.html" rel="noopener ugc nofollow" target="_blank">文档</a>或者这篇<a class="ae ky" rel="noopener" target="_blank" href="/a-better-way-for-data-preprocessing-pandas-pipe-a08336a012bc">有用的文章</a>。</p></div><div class="ab cl mp mq hx mr" role="separator"><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu"/></div><div class="im in io ip iq"><h1 id="151b" class="mw mx it bd my mz na nb nc nd ne nf ng jz nh ka ni kc nj kd nk kf nl kg nm nn bi translated">3.<code class="fe no np nq nr b">factorize</code></h1><p id="3f78" class="pw-post-body-paragraph kz la it lb b lc ns ju le lf nt jx lh li nu lk ll lm nv lo lp lq nw ls lt lu im bi translated">这个功能是Sklearn的<code class="fe no np nq nr b">LabelEncoder</code>的熊猫替代品:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nx ny l"/></div></figure><p id="28b6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">与<code class="fe no np nq nr b">LabelEncoder</code>不同，<code class="fe no np nq nr b">factorize</code>返回两个值的元组:编码列和唯一类别列表:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nx ny l"/></div></figure></div><div class="ab cl mp mq hx mr" role="separator"><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu"/></div><div class="im in io ip iq"><h1 id="5836" class="mw mx it bd my mz na nb nc nd ne nf ng jz nh ka ni kc nj kd nk kf nl kg nm nn bi translated">4.<code class="fe no np nq nr b">explode</code>—🤯🤯🤯</h1><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ob"><img src="../Images/571f4d9a86d65b6eeeacc7c4aff7534c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*y3JFnNAtvOnpS-Ev6SIN9A.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated"><strong class="bd oa">照片由</strong> <a class="ae ky" href="https://unsplash.com/@joshuas?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> <strong class="bd oa">约书亚·苏科夫</strong> </a> <strong class="bd oa">上</strong><a class="ae ky" href="https://unsplash.com/s/photos/explode?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"><strong class="bd oa">Unsplash</strong></a></p></figure><p id="0fa8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">一个名字很有趣的函数叫<code class="fe no np nq nr b">explode</code>。先看个例子再解释:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nx ny l"/></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="ab gu cl oc"><img src="../Images/5b22529971bd0fb7e594df45200c2ed2.png" data-original-src="https://miro.medium.com/v2/format:webp/1*avVhEJshuwSiUA4-otqIRg.png"/></div></figure><p id="6a9f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe no np nq nr b">dirty</code>列有两行，其中的值被记录为实际列表。您可能经常在调查中看到这种类型的数据，因为有些问题接受多个答案。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nx ny l"/></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="ab gu cl oc"><img src="../Images/ad602569aee667e568a1a1fbf90d0e1f.png" data-original-src="https://miro.medium.com/v2/format:webp/1*NxVFb5utbefODj3MBBPEzA.png"/></div></figure><p id="3ab3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe no np nq nr b">explode</code>获取一个具有类似数组的值的单元格，<em class="lv">将它分解</em>成多行。将<code class="fe no np nq nr b">ignore_index</code>设置为True以保持数字索引的顺序。</p></div><div class="ab cl mp mq hx mr" role="separator"><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu"/></div><div class="im in io ip iq"><h1 id="34bc" class="mw mx it bd my mz na nb nc nd ne nf ng jz nh ka ni kc nj kd nk kf nl kg nm nn bi translated">5.<code class="fe no np nq nr b">squeeze</code></h1><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nz"><img src="../Images/70c7b1b211d3597293008cede376ff70.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mBt5v62bsbg0L2yqCBCqxA.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated"><strong class="bd oa">图片由</strong><a class="ae ky" href="https://www.pexels.com/@cottonbro?utm_content=attributionCopyText&amp;utm_medium=referral&amp;utm_source=pexels" rel="noopener ugc nofollow" target="_blank"><strong class="bd oa">cotton bro</strong></a><strong class="bd oa">上</strong> <a class="ae ky" href="https://www.pexels.com/photo/close-up-photo-of-sausage-5875701/?utm_content=attributionCopyText&amp;utm_medium=referral&amp;utm_source=pexels" rel="noopener ugc nofollow" target="_blank"> <strong class="bd oa"> Pexels </strong> </a></p></figure><p id="ac04" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">另一个有着时髦名字的函数是<code class="fe no np nq nr b">squeeze</code>,用于非常罕见但令人讨厌的边缘情况。</p><p id="e611" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">其中一种情况是从用于数据帧子集的条件返回单个值。考虑这个例子:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nx ny l"/></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="ab gu cl oc"><img src="../Images/1928e4b891308d37bb495e21b5d8a357.png" data-original-src="https://miro.medium.com/v2/format:webp/1*j-FQi6KpQHvbRTvabnAqVQ.png"/></div></figure><p id="5dad" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">即使只有一个单元格，它也会作为DataFrame返回。这可能很烦人，因为现在您必须再次使用<code class="fe no np nq nr b">.loc</code>和列名和索引来访问价格。</p><p id="6844" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">但是，如果你知道<code class="fe no np nq nr b">squeeze</code>，你就不必。函数使您能够从单个单元格数据帧或系列中删除坐标轴。例如:</p><pre class="kj kk kl km gt od nr oe of aw og bi"><span id="b4ca" class="oh mx it nr b gy oi oj l ok ol">&gt;&gt;&gt; subset.squeeze()</span><span id="94a1" class="oh mx it nr b gy om oj l ok ol">326</span></pre><p id="fb77" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在，只返回标量。也可以指定要移除的轴:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nx ny l"/></div></figure><p id="8fb3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">注意<code class="fe no np nq nr b">squeeze</code>仅适用于单值的数据帧或序列。</p></div><div class="ab cl mp mq hx mr" role="separator"><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu"/></div><div class="im in io ip iq"><h1 id="5515" class="mw mx it bd my mz na nb nc nd ne nf ng jz nh ka ni kc nj kd nk kf nl kg nm nn bi translated">6.在...之间</h1><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi on"><img src="../Images/f08dd2a50d2da638dba2dbde5af582ae.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*PJYFJmzcTPUyEutj804C3Q.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated"><strong class="bd oa">照片由</strong> <a class="ae ky" href="https://unsplash.com/@jujudreaminx?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> <strong class="bd oa">贾斯汀做梦</strong> </a> <strong class="bd oa">上</strong> <a class="ae ky" href="https://unsplash.com/s/photos/between?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> <strong class="bd oa">像素</strong> </a></p></figure><p id="f3d4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">一个相当漂亮的函数，用于对一个范围内的数字特征进行布尔索引:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nx ny l"/></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="ab gu cl oc"><img src="../Images/b6057213bfcebf5efc79f9b72cd0cfaa.png" data-original-src="https://miro.medium.com/v2/format:webp/1*PwCzYy4sUmgZ02O50m7nYA.png"/></div></figure></div><div class="ab cl mp mq hx mr" role="separator"><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu"/></div><div class="im in io ip iq"><h1 id="28a4" class="mw mx it bd my mz na nb nc nd ne nf ng jz nh ka ni kc nj kd nk kf nl kg nm nn bi translated">7.<code class="fe no np nq nr b">T</code></h1><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nz"><img src="../Images/1fb50ee42675392e1a1878274d97e607.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jhghF1WWkobbE2CkTIVdcQ.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated"><strong class="bd oa">照片由</strong><a class="ae ky" href="https://www.pexels.com/@pixabay?utm_content=attributionCopyText&amp;utm_medium=referral&amp;utm_source=pexels" rel="noopener ugc nofollow" target="_blank"><strong class="bd oa">Pixabay</strong></a><strong class="bd oa">上的</strong> <a class="ae ky" href="https://www.pexels.com/photo/close-up-of-illuminated-text-against-black-background-258083/?utm_content=attributionCopyText&amp;utm_medium=referral&amp;utm_source=pexels" rel="noopener ugc nofollow" target="_blank"> <strong class="bd oa">像素</strong> </a>组成</p></figure><p id="e5ed" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">所有数据帧都有一个简单的<code class="fe no np nq nr b">T</code>属性，代表<em class="lv">转置</em>。您可能不经常使用它，但是我发现它在显示<code class="fe no np nq nr b">describe</code>方法的数据帧时非常有用:</p><pre class="kj kk kl km gt od nr oe of aw og bi"><span id="cee7" class="oh mx it nr b gy oi oj l ok ol">&gt;&gt;&gt; boston.describe().T.head(10)</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="ab gu cl oc"><img src="../Images/bb864ec5f80b1c28187951fad68c8afa.png" data-original-src="https://miro.medium.com/v2/format:webp/1*qtPXjAM-odmgB3vm9C175A.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><p id="57b5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">波士顿住房数据集有30个数值列。如果您按原样调用【the DataFrame将会水平拉伸，从而很难比较统计数据。进行转置将会切换轴，从而以列的形式给出汇总统计数据。</p></div><div class="ab cl mp mq hx mr" role="separator"><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu"/></div><div class="im in io ip iq"><h1 id="37c4" class="mw mx it bd my mz na nb nc nd ne nf ng jz nh ka ni kc nj kd nk kf nl kg nm nn bi translated">8.熊猫造型</h1><p id="9947" class="pw-post-body-paragraph kz la it lb b lc ns ju le lf nt jx lh li nu lk ll lm nv lo lp lq nw ls lt lu im bi translated">你知道熊猫允许你设计数据框架吗？</p><p id="db4b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">它们有一个<code class="fe no np nq nr b">style</code>属性，打开了只受你的HTML和CSS知识限制的定制和样式的大门。我不会讨论你可以用<code class="fe no np nq nr b">style</code>做什么的全部细节，而只会向你展示我最喜欢的功能:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nx ny l"/></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="ab gu cl oc"><img src="../Images/694ec33a59823aa73207a45630f2bcbb.png" data-original-src="https://miro.medium.com/v2/format:webp/1*0sHktRcBeUJlV32-eQyQ9A.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><p id="af70" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">上面，我们突出显示了保存一列最大值的单元格。另一个很酷的样式器是<code class="fe no np nq nr b">background_gradient</code>，它可以根据列的值给列一个渐变的背景颜色:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nx ny l"/></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="ab gu cl oc"><img src="../Images/b62029458b2eca99730cfcf00fb0b2a4.png" data-original-src="https://miro.medium.com/v2/format:webp/1*5Q4Qqsie51W8cAoWaVO13A.png"/></div></figure><p id="3e13" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">当您在一个有许多列的表上使用<code class="fe no np nq nr b">describe</code>并想要比较汇总统计数据时，这个特性特别方便。点击查看styler <a class="ae ky" href="https://pandas.pydata.org/docs/reference/style.html" rel="noopener ugc nofollow" target="_blank">的文档。</a></p></div><div class="ab cl mp mq hx mr" role="separator"><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu"/></div><div class="im in io ip iq"><h1 id="8e03" class="mw mx it bd my mz na nb nc nd ne nf ng jz nh ka ni kc nj kd nk kf nl kg nm nn bi translated">9.熊猫选项</h1><p id="0d8c" class="pw-post-body-paragraph kz la it lb b lc ns ju le lf nt jx lh li nu lk ll lm nv lo lp lq nw ls lt lu im bi translated">与Matplotlib一样，pandas也有全局设置，您可以调整这些设置来更改默认行为:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nx ny l"/></div></figure><p id="98fe" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这些设置分为5个模块。我们来看看<code class="fe no np nq nr b">display</code>下有哪些设置:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nx ny l"/></div></figure><p id="9a60" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe no np nq nr b">display</code>下有很多选项，但我主要使用<code class="fe no np nq nr b">max_columns</code>和<code class="fe no np nq nr b">precision</code>:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nx ny l"/></div></figure><p id="b084" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">你可以查看<a class="ae ky" href="https://pandas.pydata.org/pandas-docs/stable/user_guide/options.html" rel="noopener ugc nofollow" target="_blank">文档</a>来深入了解这个奇妙的特性。</p></div><div class="ab cl mp mq hx mr" role="separator"><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu"/></div><div class="im in io ip iq"><h1 id="ec82" class="mw mx it bd my mz na nb nc nd ne nf ng jz nh ka ni kc nj kd nk kf nl kg nm nn bi translated">10.<code class="fe no np nq nr b">convert_dtypes</code></h1><p id="fe8e" class="pw-post-body-paragraph kz la it lb b lc ns ju le lf nt jx lh li nu lk ll lm nv lo lp lq nw ls lt lu im bi translated">我们都知道pandas有一个令人讨厌的倾向，就是将一些列标记为<code class="fe no np nq nr b">object</code>数据类型。您可以使用试图推断最佳数据类型的<code class="fe no np nq nr b">convert_dtypes</code>方法，而不是手动指定它们的类型:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nx ny l"/></div></figure><p id="9713" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">不幸的是，由于不同日期时间格式的限制，它不能解析日期。</p></div><div class="ab cl mp mq hx mr" role="separator"><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu"/></div><div class="im in io ip iq"><h1 id="fa29" class="mw mx it bd my mz na nb nc nd ne nf ng jz nh ka ni kc nj kd nk kf nl kg nm nn bi translated">11.<code class="fe no np nq nr b">select_dtypes</code></h1><p id="3221" class="pw-post-body-paragraph kz la it lb b lc ns ju le lf nt jx lh li nu lk ll lm nv lo lp lq nw ls lt lu im bi translated">我一直在用的一个函数是<code class="fe no np nq nr b">select_dtypes</code>。我认为从它的名字可以明显看出这个函数是做什么的。它有<code class="fe no np nq nr b">include</code>和<code class="fe no np nq nr b">exclude</code>参数，您可以使用它们来选择包含或排除某些数据类型的列。</p><p id="ca4f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">例如，仅选择带有<code class="fe no np nq nr b">np.number</code>的数字列:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nx ny l"/></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="ab gu cl oc"><img src="../Images/2a218395aa25f14c22a56f92a17c9ac3.png" data-original-src="https://miro.medium.com/v2/format:webp/1*6qECYE19Nsas9nFLgLvGwA.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><p id="9214" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">或者<code class="fe no np nq nr b">exclude</code>他们:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nx ny l"/></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="ab gu cl oc"><img src="../Images/c1c9d99a4ec577fa77641a644595f9d7.png" data-original-src="https://miro.medium.com/v2/format:webp/1*1iDWK21ubKf7DhQ1lNtwAw.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure></div><div class="ab cl mp mq hx mr" role="separator"><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu"/></div><div class="im in io ip iq"><h1 id="7ae3" class="mw mx it bd my mz na nb nc nd ne nf ng jz nh ka ni kc nj kd nk kf nl kg nm nn bi translated">12.<code class="fe no np nq nr b">mask</code></h1><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nz"><img src="../Images/82f970ae5931f24bb5bf3c9b77da1a99.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*BHPTpIiSWChBwxgzMIRHnw.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated"><strong class="bd oa">照片由</strong><a class="ae ky" href="https://www.pexels.com/@pixabay?utm_content=attributionCopyText&amp;utm_medium=referral&amp;utm_source=pexels" rel="noopener ugc nofollow" target="_blank"><strong class="bd oa">Pixabay</strong></a><strong class="bd oa">上的</strong> <a class="ae ky" href="https://www.pexels.com/photo/photo-of-guy-fawkes-mask-with-red-flower-on-top-on-hand-38275/?utm_content=attributionCopyText&amp;utm_medium=referral&amp;utm_source=pexels" rel="noopener ugc nofollow" target="_blank"> <strong class="bd oa">像素组成。</strong> </a></p></figure><p id="ac88" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe no np nq nr b">mask</code>允许您快速替换自定义条件为真的单元格值。</p><p id="b547" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">例如，假设我们有从50-60岁人群中收集的调查数据。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nx ny l"/></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="ab gu cl oc"><img src="../Images/a7e2083ec57c415f431ea742d808873a.png" data-original-src="https://miro.medium.com/v2/format:webp/1*5SfT1XqkOkF2RGcLwXmdMw.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><p id="1306" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们将把50-60范围之外的年龄(有两个，49和66)视为数据输入错误，并用NaNs替换它们。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nx ny l"/></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="ab gu cl oc"><img src="../Images/5e29e188c2339b4077b5c1fc5e09d9b1.png" data-original-src="https://miro.medium.com/v2/format:webp/1*p2FvnfKyAX3x90b_xc7T4w.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><p id="7cba" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">所以，<code class="fe no np nq nr b">mask</code>用<code class="fe no np nq nr b">other</code>替换不满足<code class="fe no np nq nr b">cond</code>的值。</p></div><div class="ab cl mp mq hx mr" role="separator"><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu"/></div><div class="im in io ip iq"><h1 id="db65" class="mw mx it bd my mz na nb nc nd ne nf ng jz nh ka ni kc nj kd nk kf nl kg nm nn bi translated">13.沿着列轴的<code class="fe no np nq nr b">min</code>和<code class="fe no np nq nr b">max</code></h1><p id="06fe" class="pw-post-body-paragraph kz la it lb b lc ns ju le lf nt jx lh li nu lk ll lm nv lo lp lq nw ls lt lu im bi translated">尽管<code class="fe no np nq nr b">min</code>和<code class="fe no np nq nr b">max</code>函数是众所周知的，但它们对于某些边缘情况还有另一个有用的属性。考虑这个数据集:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nx ny l"/></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="ab gu cl oc"><img src="../Images/3a067f19fd3e1d73e97bb4379a6da82a.png" data-original-src="https://miro.medium.com/v2/format:webp/1*sVADHdU0MOtLnzQ6mBCYlA.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><p id="c16f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">上面的假数据帧是4个不同梯度增强库在5个数据集上的点性能。我们希望找到在每个数据集上表现最好的库。以下是你如何用<code class="fe no np nq nr b">max</code>优雅地做到这一点:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nx ny l"/></div></figure><p id="8fee" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">只需将轴更改为1，就可以得到行方向的最大值/最小值。</p></div><div class="ab cl mp mq hx mr" role="separator"><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu"/></div><div class="im in io ip iq"><h1 id="5e0f" class="mw mx it bd my mz na nb nc nd ne nf ng jz nh ka ni kc nj kd nk kf nl kg nm nn bi translated">14.<code class="fe no np nq nr b">nlargest</code>和<code class="fe no np nq nr b">nsmallest</code></h1><p id="f6e9" class="pw-post-body-paragraph kz la it lb b lc ns ju le lf nt jx lh li nu lk ll lm nv lo lp lq nw ls lt lu im bi translated">有时，您不仅仅需要列的最小值/最大值。你想看一个变量的前N个或者~(top N)个值。这就是<code class="fe no np nq nr b">nlargest</code>和<code class="fe no np nq nr b">nsmallest</code>派上用场的地方。</p><p id="038b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们来看看最贵和最便宜的五大钻石:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nx ny l"/></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="ab gu cl oc"><img src="../Images/637f85c4a1b6775064cfe908ea51bc87.png" data-original-src="https://miro.medium.com/v2/format:webp/1*95ww3IXtZ3X1k3ufkRAx-Q.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nx ny l"/></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="ab gu cl oc"><img src="../Images/a06170bd5dcb8e4f915531ae53a52330.png" data-original-src="https://miro.medium.com/v2/format:webp/1*LFGP_dU1ICU2bY5Nx2vymg.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure></div><div class="ab cl mp mq hx mr" role="separator"><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu"/></div><div class="im in io ip iq"><h1 id="aa65" class="mw mx it bd my mz na nb nc nd ne nf ng jz nh ka ni kc nj kd nk kf nl kg nm nn bi translated">15.<code class="fe no np nq nr b">idxmax</code>和<code class="fe no np nq nr b">idxmin</code></h1><p id="eca4" class="pw-post-body-paragraph kz la it lb b lc ns ju le lf nt jx lh li nu lk ll lm nv lo lp lq nw ls lt lu im bi translated">当您在列上调用<code class="fe no np nq nr b">max</code>或<code class="fe no np nq nr b">min</code>时，pandas返回最大/最小值。然而，有时您想要最小/最大值的<em class="lv">位置</em>，这对于这些功能是不可能的。</p><p id="f476" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">相反，你应该使用<code class="fe no np nq nr b">idxmax</code> / <code class="fe no np nq nr b">idxmin</code>:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nx ny l"/></div></figure><p id="8377" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">您还可以指定<code class="fe no np nq nr b">columns</code>轴，在这种情况下，函数会返回列的索引号。</p></div><div class="ab cl mp mq hx mr" role="separator"><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu"/></div><div class="im in io ip iq"><h1 id="8dd0" class="mw mx it bd my mz na nb nc nd ne nf ng jz nh ka ni kc nj kd nk kf nl kg nm nn bi translated">16.<code class="fe no np nq nr b">value_counts</code>同<code class="fe no np nq nr b">dropna=False</code></h1><p id="702e" class="pw-post-body-paragraph kz la it lb b lc ns ju le lf nt jx lh li nu lk ll lm nv lo lp lq nw ls lt lu im bi translated">寻找缺失值百分比的常见操作是将<code class="fe no np nq nr b">isnull</code>和<code class="fe no np nq nr b">sum</code>链接起来，然后除以数组的长度。</p><p id="e74d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">但是，你可以用相关的参数对<code class="fe no np nq nr b">value_counts</code>做同样的事情:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nx ny l"/></div></figure><p id="c60d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">埃姆斯住宅数据集的壁炉质量包含47%的零。</p></div><div class="ab cl mp mq hx mr" role="separator"><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu"/></div><div class="im in io ip iq"><h1 id="529a" class="mw mx it bd my mz na nb nc nd ne nf ng jz nh ka ni kc nj kd nk kf nl kg nm nn bi translated">17.<code class="fe no np nq nr b">clip</code></h1><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nz"><img src="../Images/52650d1a7e328889be8bc73979fb25a3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2wsV_LdCUFHfI85vie1EKA.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated"><strong class="bd oa">照片由</strong> <a class="ae ky" href="https://www.pexels.com/@ann-h-45017?utm_content=attributionCopyText&amp;utm_medium=referral&amp;utm_source=pexels" rel="noopener ugc nofollow" target="_blank"> <strong class="bd oa">安H </strong> </a> <strong class="bd oa">上</strong> <a class="ae ky" href="https://www.pexels.com/photo/a-lot-of-paper-clips-2448452/?utm_content=attributionCopyText&amp;utm_medium=referral&amp;utm_source=pexels" rel="noopener ugc nofollow" target="_blank"> <strong class="bd oa"> Pexels </strong> </a></p></figure><p id="bbf8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">异常值检测和去除在数据分析中很常见。</p><p id="3498" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe no np nq nr b">clip</code>函数使得找出超出范围的异常值并用硬限制替换它们变得非常容易。</p><p id="aaf0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们回到年龄的例子:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="ab gu cl oc"><img src="../Images/a7e2083ec57c415f431ea742d808873a.png" data-original-src="https://miro.medium.com/v2/format:webp/1*5SfT1XqkOkF2RGcLwXmdMw.png"/></div></figure><p id="5677" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这一次，我们将把超出范围的年龄替换为50岁和60岁的硬性限制:</p><pre class="kj kk kl km gt od nr oe of aw og bi"><span id="cd96" class="oh mx it nr b gy oi oj l ok ol">&gt;&gt;&gt; ages.clip(50, 60)</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="ab gu cl oc"><img src="../Images/624beeed6e2ceff8a181abc789f41136.png" data-original-src="https://miro.medium.com/v2/format:webp/1*xQb0KWCaVyn-3qToFkZNBA.png"/></div></figure><p id="f583" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">快速高效！</p></div><div class="ab cl mp mq hx mr" role="separator"><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu"/></div><div class="im in io ip iq"><h1 id="5475" class="mw mx it bd my mz na nb nc nd ne nf ng jz nh ka ni kc nj kd nk kf nl kg nm nn bi translated">18.<code class="fe no np nq nr b">at_time</code>和<code class="fe no np nq nr b">between_time</code></h1><p id="d775" class="pw-post-body-paragraph kz la it lb b lc ns ju le lf nt jx lh li nu lk ll lm nv lo lp lq nw ls lt lu im bi translated">当处理高粒度的时间序列时，这两种方法会很有用。</p><p id="ec40" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe no np nq nr b">at_time</code>允许您在特定日期或时间对值进行子集化。考虑这个时间序列:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nx ny l"/></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="ab gu cl oc"><img src="../Images/629d06ae6ef6eb692338b1a281f6b177.png" data-original-src="https://miro.medium.com/v2/format:webp/1*DtdGuUCCZ0N6yVMgdKB0Dg.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><p id="3b1d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们选择下午3点的所有行:</p><pre class="kj kk kl km gt od nr oe of aw og bi"><span id="78f9" class="oh mx it nr b gy oi oj l ok ol">&gt;&gt;&gt; data.at_time("15:00")</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="ab gu cl oc"><img src="../Images/675bd72fbb4b71ca271ff21c2641a201.png" data-original-src="https://miro.medium.com/v2/format:webp/1*E-ZG-Qw-SoUxZuev7QVEcQ.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><p id="e97a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">很酷吧。现在，让我们使用<code class="fe no np nq nr b">between_time</code>来选择自定义间隔内的行:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nx ny l"/></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="ab gu cl oc"><img src="../Images/b870686087e219260274c5eaa2262100.png" data-original-src="https://miro.medium.com/v2/format:webp/1*j64veEQOMlCpdmQ_q6M9KA.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><p id="5c66" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">注意，这两个函数都需要一个DateTimeIndex，并且它们只处理时间(如在<em class="lv">点</em>)。如果你想在日期时间间隔内子集化，使用<code class="fe no np nq nr b">between</code>。</p></div><div class="ab cl mp mq hx mr" role="separator"><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu"/></div><div class="im in io ip iq"><h1 id="e210" class="mw mx it bd my mz na nb nc nd ne nf ng jz nh ka ni kc nj kd nk kf nl kg nm nn bi translated">19.<code class="fe no np nq nr b">bdate_range</code></h1><p id="173c" class="pw-post-body-paragraph kz la it lb b lc ns ju le lf nt jx lh li nu lk ll lm nv lo lp lq nw ls lt lu im bi translated"><code class="fe no np nq nr b">bdate_range</code>是一个创建具有工作日频率的时间序列指数的简写函数:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nx ny l"/></div></figure><p id="0676" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">工作日频率在金融界很常见。因此，当使用<code class="fe no np nq nr b">reindex</code>功能重新索引现有时间序列时，该功能可能会派上用场。</p></div><div class="ab cl mp mq hx mr" role="separator"><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu"/></div><div class="im in io ip iq"><h1 id="e120" class="mw mx it bd my mz na nb nc nd ne nf ng jz nh ka ni kc nj kd nk kf nl kg nm nn bi translated">20.<code class="fe no np nq nr b">autocorr</code></h1><p id="f5b1" class="pw-post-body-paragraph kz la it lb b lc ns ju le lf nt jx lh li nu lk ll lm nv lo lp lq nw ls lt lu im bi translated">时间序列分析的一个关键部分是检查变量的自相关性。</p><p id="1a75" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">自相关是<a class="ae ky" href="https://towardsdev.com/how-to-not-misunderstand-correlation-75ce9b0289e" rel="noopener ugc nofollow" target="_blank">简单的相关系数</a>，但它是用时间序列的滞后版本计算的。</p><p id="30f7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">更详细地说，时间序列在<code class="fe no np nq nr b">lag=k</code>的自相关计算如下:</p><ol class=""><li id="f909" class="oo op it lb b lc ld lf lg li oq lm or lq os lu ot ou ov ow bi translated">时间序列移动到<code class="fe no np nq nr b">k</code>周期:</li></ol><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nx ny l"/></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="ab gu cl oc"><img src="../Images/24e0c66f3ac560ccdbc5ed3e7ef304ba.png" data-original-src="https://miro.medium.com/v2/format:webp/1*BMEAigusWFvfk_joAhyQxw.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><p id="0682" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">2.计算原始<code class="fe no np nq nr b">tip</code>和每个<code class="fe no np nq nr b">lag_*</code>之间的相关性。</p><p id="dd97" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">你可以使用熊猫的<code class="fe no np nq nr b">autocorr</code>功能，而不是手动完成所有这些操作:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nx ny l"/></div></figure><p id="d900" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">你可以从这篇<a class="ae ky" rel="noopener" target="_blank" href="/advanced-time-series-analysis-in-python-decomposition-autocorrelation-115aa64f475e">文章</a>中了解更多关于自相关在时间序列分析中的重要性。</p></div><div class="ab cl mp mq hx mr" role="separator"><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu"/></div><div class="im in io ip iq"><h1 id="6ddd" class="mw mx it bd my mz na nb nc nd ne nf ng jz nh ka ni kc nj kd nk kf nl kg nm nn bi translated">21.<code class="fe no np nq nr b">hasnans</code></h1><p id="52e5" class="pw-post-body-paragraph kz la it lb b lc ns ju le lf nt jx lh li nu lk ll lm nv lo lp lq nw ls lt lu im bi translated">Pandas提供了一种快速的方法来检查一个给定的序列是否包含任何带有<code class="fe no np nq nr b">hasnans</code>属性的空值:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nx ny l"/></div></figure><p id="5722" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">根据其<a class="ae ky" href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.Series.hasnans.html" rel="noopener ugc nofollow" target="_blank">文档</a>，它可以实现各种性能提升。注意，该属性仅在<code class="fe no np nq nr b">pd.Series</code>上有效。</p></div><div class="ab cl mp mq hx mr" role="separator"><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu"/></div><div class="im in io ip iq"><h1 id="3a0c" class="mw mx it bd my mz na nb nc nd ne nf ng jz nh ka ni kc nj kd nk kf nl kg nm nn bi translated">22.<code class="fe no np nq nr b">at</code>和<code class="fe no np nq nr b">iat</code></h1><p id="3ef1" class="pw-post-body-paragraph kz la it lb b lc ns ju le lf nt jx lh li nu lk ll lm nv lo lp lq nw ls lt lu im bi translated">这两个访问器比<code class="fe no np nq nr b">loc</code>和<code class="fe no np nq nr b">iloc</code>快得多，但有一个缺点。它们一次只允许选择或替换一个值:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nx ny l"/></div></figure></div><div class="ab cl mp mq hx mr" role="separator"><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu"/></div><div class="im in io ip iq"><h1 id="8efe" class="mw mx it bd my mz na nb nc nd ne nf ng jz nh ka ni kc nj kd nk kf nl kg nm nn bi translated">23.<code class="fe no np nq nr b">argsort</code></h1><p id="2b71" class="pw-post-body-paragraph kz la it lb b lc ns ju le lf nt jx lh li nu lk ll lm nv lo lp lq nw ls lt lu im bi translated">当您想要提取将对数组进行排序的索引时，应该使用此函数:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nx ny l"/></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="ab gu cl oc"><img src="../Images/624caf9214c6ce1d5c34d9d13fb2f852.png" data-original-src="https://miro.medium.com/v2/format:webp/1*dN6FynHQZ3m3q3BPzZZgzA.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure></div><div class="ab cl mp mq hx mr" role="separator"><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu"/></div><div class="im in io ip iq"><h1 id="1557" class="mw mx it bd my mz na nb nc nd ne nf ng jz nh ka ni kc nj kd nk kf nl kg nm nn bi translated">24.<code class="fe no np nq nr b">cat</code>访问器</h1><p id="1c66" class="pw-post-body-paragraph kz la it lb b lc ns ju le lf nt jx lh li nu lk ll lm nv lo lp lq nw ls lt lu im bi translated">众所周知，Pandas允许使用像<code class="fe no np nq nr b">dt</code>或<code class="fe no np nq nr b">str</code>这样的访问器对日期和字符串使用内置的Python函数。</p><p id="1be6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Pandas还有一个特殊的<code class="fe no np nq nr b">category</code>数据类型用于分类变量，如下所示:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nx ny l"/></div></figure><p id="1b71" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">当一个列为<code class="fe no np nq nr b">category</code>时，您可以使用<code class="fe no np nq nr b">cat</code>访问器来使用几个特殊的函数。例如，让我们看看钻石切割的独特类别:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nx ny l"/></div></figure><p id="585d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">还有类似<code class="fe no np nq nr b">remove_categories</code>或<code class="fe no np nq nr b">rename_categories</code>等功能。：</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nx ny l"/></div></figure><p id="67a0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">你可以在这里看到<code class="fe no np nq nr b">cat</code>访问器<a class="ae ky" href="https://pandas.pydata.org/pandas-docs/stable/reference/series.html#categorical-accessor" rel="noopener ugc nofollow" target="_blank">下的完整函数列表。</a></p></div><div class="ab cl mp mq hx mr" role="separator"><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu"/></div><div class="im in io ip iq"><h1 id="7042" class="mw mx it bd my mz na nb nc nd ne nf ng jz nh ka ni kc nj kd nk kf nl kg nm nn bi translated">25.<code class="fe no np nq nr b">GroupBy.nth</code></h1><p id="295f" class="pw-post-body-paragraph kz la it lb b lc ns ju le lf nt jx lh li nu lk ll lm nv lo lp lq nw ls lt lu im bi translated">该功能仅适用于<code class="fe no np nq nr b">GroupBy</code>对象。具体来说，分组后，<code class="fe no np nq nr b">nth</code>从每个组中返回第n行:</p><pre class="kj kk kl km gt od nr oe of aw og bi"><span id="f3ff" class="oh mx it nr b gy oi oj l ok ol">&gt;&gt;&gt; diamonds.groupby("cut").nth(5)</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="ab gu cl oc"><img src="../Images/307974100e4760c7dd69bda15231ac7a.png" data-original-src="https://miro.medium.com/v2/format:webp/1*UBgxTvcL5lPfG1EBHS8zDg.png"/></div></figure></div><div class="ab cl mp mq hx mr" role="separator"><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu"/></div><div class="im in io ip iq"><h1 id="25b7" class="mw mx it bd my mz na nb nc nd ne nf ng jz nh ka ni kc nj kd nk kf nl kg nm nn bi translated">摘要</h1><p id="3bc8" class="pw-post-body-paragraph kz la it lb b lc ns ju le lf nt jx lh li nu lk ll lm nv lo lp lq nw ls lt lu im bi translated">尽管像Dask和datatable这样的库正在以其处理海量数据集的闪亮新功能慢慢赢得Pandas，Pandas仍然是Python数据科学生态系统中使用最广泛的数据操作工具。</p><p id="bb16" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">该库是其他软件包模仿和改进的榜样，因为它很好地集成到了现代SciPy堆栈中。</p><p id="cca2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">感谢您的阅读！</p><div class="lw lx gp gr ly lz"><a href="https://ibexorigin.medium.com/membership" rel="noopener follow" target="_blank"><div class="ma ab fo"><div class="mb ab mc cl cj md"><h2 class="bd iu gy z fp me fr fs mf fu fw is bi translated">通过我的推荐链接加入Medium。</h2><div class="mg l"><h3 class="bd b gy z fp me fr fs mf fu fw dk translated">获得独家访问我的所有⚡premium⚡内容和所有媒体没有限制。你可以给我买一个coffee☕，用你的…</h3></div><div class="mh l"><p class="bd b dl z fp me fr fs mf fu fw dk translated">ibexorigin.medium.com</p></div></div><div class="mi l"><div class="ox l mk ml mm mi mn ks lz"/></div></div></a></div><div class="lw lx gp gr ly lz"><a href="https://ibexorigin.medium.com/subscribe" rel="noopener follow" target="_blank"><div class="ma ab fo"><div class="mb ab mc cl cj md"><h2 class="bd iu gy z fp me fr fs mf fu fw is bi translated">每当Bex T .发布时收到电子邮件。</h2><div class="mg l"><h3 class="bd b gy z fp me fr fs mf fu fw dk translated">每当Bex T .发布时收到电子邮件。注册后，如果您还没有中型帐户，您将创建一个…</h3></div><div class="mh l"><p class="bd b dl z fp me fr fs mf fu fw dk translated">ibexorigin.medium.com</p></div></div><div class="mi l"><div class="oy l mk ml mm mi mn ks lz"/></div></div></a></div></div><div class="ab cl mp mq hx mr" role="separator"><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu"/></div><div class="im in io ip iq"><p id="f39c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">更多来自我的故事…</p><div class="lw lx gp gr ly lz"><a rel="noopener follow" target="_blank" href="/forget-roadmaps-here-is-how-to-dominate-the-data-science-stack-blazingly-fast-a49e62f2bcf"><div class="ma ab fo"><div class="mb ab mc cl cj md"><h2 class="bd iu gy z fp me fr fs mf fu fw is bi translated">别管路线图了！以下是如何快速掌控数据科学堆栈的方法</h2><div class="mg l"><h3 class="bd b gy z fp me fr fs mf fu fw dk translated">以前所未有的方式学习新软件包</h3></div><div class="mh l"><p class="bd b dl z fp me fr fs mf fu fw dk translated">towardsdatascience.com</p></div></div><div class="mi l"><div class="oz l mk ml mm mi mn ks lz"/></div></div></a></div><div class="lw lx gp gr ly lz"><a href="https://ibexorigin.medium.com/28-weekly-machine-learning-tricks-and-resources-that-are-pure-gems-1-8e5259a93c94" rel="noopener follow" target="_blank"><div class="ma ab fo"><div class="mb ab mc cl cj md"><h2 class="bd iu gy z fp me fr fs mf fu fw is bi translated">28个每周机器学习技巧和资源，它们是纯粹的珍宝#1</h2><div class="mg l"><h3 class="bd b gy z fp me fr fs mf fu fw dk translated">一次学习一个片段的机器学习</h3></div><div class="mh l"><p class="bd b dl z fp me fr fs mf fu fw dk translated">ibexorigin.medium.com</p></div></div><div class="mi l"><div class="pa l mk ml mm mi mn ks lz"/></div></div></a></div><div class="lw lx gp gr ly lz"><a rel="noopener follow" target="_blank" href="/18-non-cliché-datasets-for-beginner-data-scientists-to-build-a-strong-portfolio-c59743b2a829"><div class="ma ab fo"><div class="mb ab mc cl cj md"><h2 class="bd iu gy z fp me fr fs mf fu fw is bi translated">18个非陈词滥调数据集，供初学数据科学家构建强大的投资组合</h2><div class="mg l"><h3 class="bd b gy z fp me fr fs mf fu fw dk translated">从微生物学到体育的独特数据集</h3></div><div class="mh l"><p class="bd b dl z fp me fr fs mf fu fw dk translated">towardsdatascience.com</p></div></div><div class="mi l"><div class="pb l mk ml mm mi mn ks lz"/></div></div></a></div><div class="lw lx gp gr ly lz"><a rel="noopener follow" target="_blank" href="/advanced-tutorial-how-to-master-matplotlib-like-an-absolute-boss-aae2d4936734"><div class="ma ab fo"><div class="mb ab mc cl cj md"><h2 class="bd iu gy z fp me fr fs mf fu fw is bi translated">进阶教程:如何像绝对Boss一样掌握Matplotlib</h2><div class="mg l"><h3 class="bd b gy z fp me fr fs mf fu fw dk translated">以前所未有的方式使用Matplotlib</h3></div><div class="mh l"><p class="bd b dl z fp me fr fs mf fu fw dk translated">towardsdatascience.com</p></div></div><div class="mi l"><div class="pc l mk ml mm mi mn ks lz"/></div></div></a></div></div></div>    
</body>
</html>