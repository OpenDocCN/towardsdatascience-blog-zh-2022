<html>
<head>
<title>Jarque-Bera Test with Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用Python进行Jarque-Bera测试</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/jarque-bera-test-with-python-98677c073de3#2022-08-05">https://towardsdatascience.com/jarque-bera-test-with-python-98677c073de3#2022-08-05</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><p id="dcbf" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">让您的数据遵循正态分布非常好，因为它允许您利用正态分布提供的所有好处。但是我们如何知道我们的数据遵循正态分布呢？这就是Jarque-Bera测试的用武之地。在本文中，我们将了解Jarque-Bera测试，如何使用Scipy将它应用于Python中的数据，以及一些快速练习，并从头开始创建测试统计等式。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi ko"><img src="../Images/64245202a0a4df329b3c1bb5c8decd07.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*gJlyIyxmTjIjPYEs"/></div></div><p class="la lb gj gh gi lc ld bd b be z dk translated">茱莉亚·科布利茨在<a class="ae le" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</p></figure><h1 id="4fa7" class="lf lg it bd lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc bi translated">什么是Jarque-Bera测试？</h1><p id="abf0" class="pw-post-body-paragraph jq jr it js b jt md jv jw jx me jz ka kb mf kd ke kf mg kh ki kj mh kl km kn im bi translated">Jarque-Bera测试是一种基于数据的偏斜度和峰度来确定一组数据值是否遵循正态分布的测试。包含偏度和峰度的检验统计方程为:</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div class="gh gi mi"><img src="../Images/0b3a1eb96726932782ab8a282bc4e038.png" data-original-src="https://miro.medium.com/v2/resize:fit:658/format:webp/1*XoHEzcajCJpr1F5yYa8Bjw.png"/></div><p class="la lb gj gh gi lc ld bd b be z dk translated">Jarque Bera检验统计方程。作者在https://latex.codecogs.com/eqneditor/editor.php<a class="ae le" href="https://latex.codecogs.com/eqneditor/editor.php" rel="noopener ugc nofollow" target="_blank">制作</a></p></figure><p id="37f8" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">其中n =数据值的数量。s是样本偏斜度(数据偏离平均值的程度)，定义如下:</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div class="gh gi mj"><img src="../Images/b992c329898707ca46c273beda24dbf5.png" data-original-src="https://miro.medium.com/v2/resize:fit:604/format:webp/1*1v495Muy_xAyEC7fNojalQ.png"/></div><p class="la lb gj gh gi lc ld bd b be z dk translated">Jarque Bera检验统计方程的样本偏度。作者于<a class="ae le" href="https://latex.codecogs.com/eqneditor/editor.php" rel="noopener ugc nofollow" target="_blank">https://latex.codecogs.com/eqneditor/editor.php</a>制作</p></figure><p id="42c5" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">k是样本峰度(分布的尾部有多厚),定义如下:</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div class="gh gi mk"><img src="../Images/8fbe806987a7574b34777da98afbb84d.png" data-original-src="https://miro.medium.com/v2/resize:fit:616/format:webp/1*yx9WihfsMhiGy1__IGEWGQ.png"/></div><p class="la lb gj gh gi lc ld bd b be z dk translated">Jarque Bera检验统计方程的样本峰度。作者于<a class="ae le" href="https://latex.codecogs.com/eqneditor/editor.php" rel="noopener ugc nofollow" target="_blank">https://latex.codecogs.com/eqneditor/editor.php</a>发表</p></figure><p id="58fc" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">测试统计结果将总是大于或等于零，因为:</p><ol class=""><li id="0805" class="ml mm it js b jt ju jx jy kb mn kf mo kj mp kn mq mr ms mt bi translated">检验统计等式中的样本偏度总是平方的，这意味着S总是正的或零。</li><li id="113b" class="ml mm it js b jt mu jx mv kb mw kf mx kj my kn mq mr ms mt bi translated">样本峰度总是正的或零，因为分子是4次方，分母是平方。</li><li id="85f3" class="ml mm it js b jt mu jx mv kb mw kf mx kj my kn mq mr ms mt bi translated">样本峰度和3之间的差是平方，意味着检验统计等式的这一项总是正的或零。</li><li id="f22f" class="ml mm it js b jt mu jx mv kb mw kf mx kj my kn mq mr ms mt bi translated">两项之和≥ 0也将大于或等于零。</li></ol><p id="bc54" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">如果检验统计量接近于零并且p值大于我们的标准值0.05，我们就知道我们的数据是否遵循正态分布。p值与数据遵循正态分布的无效假设相关。如果检验统计量很大且p值小于0.05，则数据不符合正态分布。</p><p id="9690" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">现在我们已经建立了测试统计，您可以提取一个具有数字特征的数据集，并对它们应用Jarque-Bera测试。对于本文，我将使用来自纽约<a class="ae le" href="https://opendata.cityofnewyork.us/data/" rel="noopener ugc nofollow" target="_blank">open data</a>的<a class="ae le" href="https://data.cityofnewyork.us/Health/Popular-Baby-Names/25th-nujf" rel="noopener ugc nofollow" target="_blank">流行婴儿名字</a>数据集。</p><h2 id="581c" class="mz lg it bd lh na nb dn ll nc nd dp lp kb ne nf lt kf ng nh lx kj ni nj mb nk bi translated">数据设置和探索</h2><p id="70f6" class="pw-post-body-paragraph jq jr it js b jt md jv jw jx me jz ka kb mf kd ke kf mg kh ki kj mh kl km kn im bi translated">首先，我们将加载必要的导入包并导入数据。注意我们从Scipy导入了<code class="fe nl nm nn no b">jarque_bera</code>函数。然后我们用<code class="fe nl nm nn no b">pd.info()</code>检查数据。</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="np nq l"/></div></figure><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div class="gh gi nr"><img src="../Images/35d4660d01541d0291ec25978f24bfc1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1040/format:webp/1*W5pC79IONlIoVVtJy7FFgA.png"/></div><p class="la lb gj gh gi lc ld bd b be z dk translated">pandas.info()关于流行婴儿名字数据的结果</p></figure><p id="ff1b" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">查看info方法的结果，我们看到一个可以应用Jacque-Bera测试的<code class="fe nl nm nn no b">Count</code>列。这一列是有名字的婴儿总数。我们还看到在那个列中没有丢失的值，所以我们不需要对它应用像<code class="fe nl nm nn no b">dropna()</code>这样的方法来删除空值。考虑到有一个<code class="fe nl nm nn no b">Year of Birth</code>专栏，让我们看看我们还有多少年的时间。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi ns"><img src="../Images/c72e93e8291893fe1646ee5c443b955e.png" data-original-src="https://miro.medium.com/v2/resize:fit:786/format:webp/1*UiOhm6xu9fTrcmHKfVkbgA.png"/></div></div><p class="la lb gj gh gi lc ld bd b be z dk translated">对baby_names[“出生年份”]调用value_counts方法的结果。</p></figure><p id="bbb5" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">所以我们有8年的婴儿名字。有趣的是，前几年的名字总数比后半年多。我还注意到，2018年被跳过了，在数据的网页上没有任何关于这一点的内容。就本文的目的而言，这不会造成任何伤害。</p><h1 id="d370" class="lf lg it bd lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc bi translated">Scipy示例</h1><p id="ead8" class="pw-post-body-paragraph jq jr it js b jt md jv jw jx me jz ka kb mf kd ke kf mg kh ki kj mh kl km kn im bi translated">应用我们的正态分布测试的快速方法是对我们的数据列应用<code class="fe nl nm nn no b">scipy.stats</code>函数，如下所示。</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="np nq l"/></div></figure><p id="7673" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">这将输出一个元组，左边是测试统计数据，还有一个p值。</p><pre class="kp kq kr ks gt nt no nu nv aw nw bi"><span id="7db9" class="mz lg it no b gy nx ny l nz oa">(533643.0597435309, 0.0)</span></pre><p id="9a07" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">左边的值是本文开头的JB方程的测试统计量。右边的值是我们假设数据遵循正态分布的零假设的p值。它是由1与卡方分布的CDF之差计算得出的，卡方分布具有应用于检验统计的两个自由度。CDF再次代表累积分布函数，用于确定分布中一系列可能性的概率。</p><p id="fb61" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">由于测试统计量非常大，p值小于0.05，我们拒绝了零假设，即<code class="fe nl nm nn no b">Counts</code>数据来自正态分布。</p><h1 id="60d8" class="lf lg it bd lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc bi translated">附加实践</h1><p id="3799" class="pw-post-body-paragraph jq jr it js b jt md jv jw jx me jz ka kb mf kd ke kf mg kh ki kj mh kl km kn im bi translated">如果你正在使用这个数据集并希望进一步实践，我建议你对所有8年的<code class="fe nl nm nn no b">Count</code>数据进行Jarque-Bera测试。您可以单独完成这项工作，也可以创建一个for循环，每年进行一次迭代。当你准备好检查答案时，请看下面。</p><h2 id="c85d" class="mz lg it bd lh na nb dn ll nc nd dp lp kb ne nf lt kf ng nh lx kj ni nj mb nk bi translated">答案</h2><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="np nq l"/></div></figure><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi ob"><img src="../Images/8b186f153a0ff1cd4a167997675e4820.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*SfI-eQAKF-J_4vOtZJnHMw.png"/></div></div><p class="la lb gj gh gi lc ld bd b be z dk translated">Jarque-Bera每年的计数结果</p></figure><p id="f998" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">与所有年份的<code class="fe nl nm nn no b">Count</code>列的结果相似，当p值小于0.05时，测试统计值非常高。因此，假设每年的数据来自正态分布的零假设被拒绝。</p><h1 id="f2de" class="lf lg it bd lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc bi translated">从头开始示例(编码实践)</h1><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi oc"><img src="../Images/50d98ed5af381c5a117ef9f8f3ce3e32.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*w3lZwFtM0Ey2sr8E"/></div></div><p class="la lb gj gh gi lc ld bd b be z dk translated">照片由<a class="ae le" href="https://unsplash.com/@spencerwuwu?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">吴伟成</a>在<a class="ae le" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a></p></figure><p id="114e" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">在这里，我们将尝试从头开始创建Jarque-Bera检验统计方程。这将是一个很好的编码练习，因为公式在数学符号方面并不复杂。为了简单起见，让我们集中使用Pandas数据框列作为输入。在你尝试之后，你可以看看我下面的版本。</p><p id="3ebd" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">注意我的可能不是最佳的，因为我列出了更多的步骤。对于正在编写的Jarque-Bera最干净的版本，请查看<a class="ae le" href="https://docs.scipy.org/doc/scipy/reference/generated/scipy.stats.chi2.html" rel="noopener ugc nofollow" target="_blank"> Jarque-Bera测试文档</a>中的<a class="ae le" href="https://github.com/scipy/scipy/blob/v1.9.0/scipy/stats/_stats_py.py#L1875-L1929" rel="noopener ugc nofollow" target="_blank"> Scipy源代码</a>。我建议您查看源代码，看看这个测试的p值是如何使用测试统计的卡方CDF计算的。截至本文撰写时，<code class="fe nl nm nn no b">chi2</code>是从<code class="fe nl nm nn no b">scipy.stats</code>引进的<a class="ae le" href="https://docs.scipy.org/doc/scipy/reference/generated/scipy.stats.chi2.html" rel="noopener ugc nofollow" target="_blank">。</a></p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="np nq l"/></div></figure><h1 id="79f6" class="lf lg it bd lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc bi translated">什么时候使用Jarque-Bera测试最好？</h1><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi od"><img src="../Images/ea75cb21f98d0d323b54e7761d66487e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*OeOAHC7fWDy1Rwea"/></div></div><p class="la lb gj gh gi lc ld bd b be z dk translated">兰迪·塔兰皮在<a class="ae le" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</p></figure><p id="8e2c" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">假设有其他<a class="ae le" rel="noopener" target="_blank" href="/6-ways-to-test-for-a-normal-distribution-which-one-to-use-9dcf47d8fa93">方法</a>来测试数据是否来自正态分布，我们需要看看什么时候最好使用Jarque-Bera测试。根据<a class="ae le" href="https://www.statisticshowto.com/jarque-bera-test/" rel="noopener ugc nofollow" target="_blank">这些</a> <a class="ae le" href="https://en.wikipedia.org/wiki/Jarque%E2%80%93Bera_test" rel="noopener ugc nofollow" target="_blank">来源</a>，建议一个样本的总数据值较大。至少大于2000。这使得数据可以与具有2个自由度的卡方分布进行比较。任何更小的值都可能导致错误的测试统计和p值。</p><h1 id="f2bb" class="lf lg it bd lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc bi translated">最后的想法</h1><p id="bff8" class="pw-post-body-paragraph jq jr it js b jt md jv jw jx me jz ka kb mf kd ke kf mg kh ki kj mh kl km kn im bi translated">感谢阅读！同样，让您的数据遵循正态分布非常好！它允许您利用均值、中值和众数都相等的对称分布。当您在数据中处理更多样本时，您还可以依赖中心极限定理。您只需要一个像Jarque-Bera测试这样的测试来帮助您确定您是否正在使用正态分布。</p><p id="af38" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">如果你喜欢在媒体上阅读，并愿意进一步支持我，你可以使用我的<a class="ae le" href="https://medium.com/@j.dejesus22/membership" rel="noopener">推荐链接</a>注册一个媒体会员。这样做可以用你的会费的一部分在经济上支持我，我将不胜感激。</p><p id="c014" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">如果您有任何问题，请随时在Linkedin<a class="ae le" href="https://www.linkedin.com/in/jdejesus22/" rel="noopener ugc nofollow" target="_blank">和Twitter</a><a class="ae le" href="https://twitter.com/johnnydata22?lang=en" rel="noopener ugc nofollow" target="_blank">上发表评论或联系我们。对Twitter上的DM开放。如果你喜欢这篇文章，也可以看看我下面的其他相关文章:</a></p><div class="oe of gp gr og oh"><a rel="noopener follow" target="_blank" href="/hypergeometric-distribution-explained-with-python-2c80bc613bf4"><div class="oi ab fo"><div class="oj ab ok cl cj ol"><h2 class="bd iu gy z fp om fr fs on fu fw is bi translated">用Python解释超几何分布</h2><div class="oo l"><h3 class="bd b gy z fp om fr fs on fu fw dk translated">数学课上的概率问题，你需要的概率要么给你，要么相对容易…</h3></div><div class="op l"><p class="bd b dl z fp om fr fs on fu fw dk translated">towardsdatascience.com</p></div></div><div class="oq l"><div class="or l os ot ou oq ov ky oh"/></div></div></a></div><div class="oe of gp gr og oh"><a rel="noopener follow" target="_blank" href="/what-why-and-how-to-read-empirical-cdf-123e2b922480"><div class="oi ab fo"><div class="oj ab ok cl cj ol"><h2 class="bd iu gy z fp om fr fs on fu fw is bi translated">什么，为什么，以及如何阅读经验CDF</h2><div class="oo l"><h3 class="bd b gy z fp om fr fs on fu fw dk translated">鼓励探索性数据分析(EDA)来获得数据的可消化的一瞥。这包括直方图，用于…</h3></div><div class="op l"><p class="bd b dl z fp om fr fs on fu fw dk translated">towardsdatascience.com</p></div></div><div class="oq l"><div class="ow l os ot ou oq ov ky oh"/></div></div></a></div><div class="oe of gp gr og oh"><a rel="noopener follow" target="_blank" href="/point-biserial-correlation-with-python-f7cd591bd3b1"><div class="oi ab fo"><div class="oj ab ok cl cj ol"><h2 class="bd iu gy z fp om fr fs on fu fw is bi translated">与Python的点双列相关</h2><div class="oo l"><h3 class="bd b gy z fp om fr fs on fu fw dk translated">线性回归是确定数据的两个或多个连续特征之间相关性的经典技术…</h3></div><div class="op l"><p class="bd b dl z fp om fr fs on fu fw dk translated">towardsdatascience.com</p></div></div><div class="oq l"><div class="ox l os ot ou oq ov ky oh"/></div></div></a></div><p id="e54e" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">直到下一次，</p><p id="c07d" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">约翰·德杰苏斯</p></div></div>    
</body>
</html>