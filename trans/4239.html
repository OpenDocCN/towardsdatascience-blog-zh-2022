<html>
<head>
<title>Debugging in Python Is Easy With With Assert Statements</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Assert语句在Python中调试很容易</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/debugging-in-python-is-easy-with-with-assert-statements-ff333bfb3388#2022-09-20">https://towardsdatascience.com/debugging-in-python-is-easy-with-with-assert-statements-ff333bfb3388#2022-09-20</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="573a" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">了解一种能够带来无痛苦故障排除体验的工具</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/e93f365dfe8e1d48cde89ad38341ca9e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*q0E7DzAjNozaGO5p"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">马特·阿特兹在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure><p id="3ee3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">你是否厌倦了不断与讨厌的虫子打交道？即使使用流行的ide提供的调试功能，最小的错误也可能花费宝贵的时间来排除故障。</p><p id="47f0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果我告诉你，通过在运行程序时主动执行健全性检查，你可以更好地处理错误，那会怎么样？</p><p id="8b9a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">幸运的是，Python提供了assert语句，使用户能够做到这一点。</p><p id="a817" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在这里，我们提供了Python的assert语句的概述，并解释了为什么它是Python脚本的资产。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h2 id="a85f" class="mc md it bd me mf mg dn mh mi mj dp mk li ml mm mn lm mo mp mq lq mr ms mt mu bi translated">断言语句</h2><p id="82b3" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">assert语句遵循以下逻辑:</p><blockquote class="na nb nc"><p id="555e" class="kz la nd lb b lc ld ju le lf lg jx lh ne lj lk ll nf ln lo lp ng lr ls lt lu im bi translated">如果<expression>为假，则抛出AssertionError</expression></p></blockquote><p id="b810" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">换句话说，assert语句是一行程序，如果不满足特定的条件，它就会引发错误。</p><p id="9c15" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">您可以将这些语句视为“安全卫士”，在允许任何后续操作之前对您的程序进行搜身。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h2 id="72ae" class="mc md it bd me mf mg dn mh mi mj dp mk li ml mm mn lm mo mp mq lq mr ms mt mu bi translated">句法</h2><p id="0f42" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">assert语句遵循以下语法:</p><pre class="kj kk kl km gt nh ni nj nk aw nl bi"><span id="bc34" class="mc md it ni b gy nm nn l no np">assert &lt;expression&gt;<br/>assert &lt;expression&gt;, &lt;error message&gt;</span></pre><p id="abb7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">举个例子，假设我们有一个变量，它必须是一个正数，这样后续的操作才能成功。我们可以使用assert语句在程序中进行健全性检查。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nq nr l"/></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ns"><img src="../Images/4220e838542a0105155166489ea4f39c.png" data-original-src="https://miro.medium.com/v2/resize:fit:304/format:webp/1*krCnL4DdzfCN1LBi9VR1_g.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">代码输出(由作者创建)</p></figure><p id="a757" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在这种情况下，由于变量为负，将引发AssertionError。</p><p id="1450" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">用户还可以选择添加他们自己的自定义错误信息，这些信息将在引发AssertionError时显示。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nq nr l"/></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nt"><img src="../Images/be06eeae2fbff7ab5d83870ad72e4842.png" data-original-src="https://miro.medium.com/v2/resize:fit:996/format:webp/1*f2v_GllohsAVw4v5PEBF6w.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">代码输出(由作者创建)</p></figure><p id="b598" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这是一个有用的特性，尤其是当一个脚本将要包含多个assert语句时。该消息将使用户更深入地了解问题的原因。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h2 id="7cbd" class="mc md it bd me mf mg dn mh mi mj dp mk li ml mm mn lm mo mp mq lq mr ms mt mu bi translated">利益</h2><p id="2a15" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">虽然assert语句不是程序中的强制包含项，但它非常有用。</p><p id="7115" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">仅仅这个简单的一行程序就可以改善您的编码体验。</p><p id="0047" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">用户可以使用assert语句主动执行健全性检查，以确保满足必要的条件，而不是采取被动的方法来调试程序。</p><p id="32cc" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果条件不满足，程序将会产生一个错误，这将使用户能够立即发现问题并解决它。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h2 id="93a5" class="mc md it bd me mf mg dn mh mi mj dp mk li ml mm mn lm mo mp mq lq mr ms mt mu bi translated">现实生活中的例子</h2><p id="163c" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">到目前为止，assert语句的应用可能看起来很抽象，因此有必要提供一些例子来说明如何将它集成到数据科学项目中。</p><p id="5ca6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我参加了一门课程，这门课程将机器学习问题作为考试的一部分。要求是将模型的预测作为CSV文件提交，然后进行评分。</p><p id="219f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">不幸的是，我的CSV文件的尺寸不正确，所以我第一次提交时得到了0分(幸运的是我被允许提交5次)。</p><p id="24b2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我之所以犯这个错误，是因为我没有主动检查文件的尺寸是否符合要求，但是我能够通过在脚本的末尾添加一个assert语句来执行检查，以确保生成的CSV文件与提供的示例CSV文件具有相同的尺寸，从而纠正这个错误。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nq nr l"/></div></figure><p id="a74b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">通过简单的一行程序，我能够避免意外提交维度错误的文件。这是我在机器学习黑客马拉松中经常用到的一行代码。</p><p id="3492" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">从那以后，我养成了使用assert语句在程序的某些部分执行健全性检查的习惯，以确保满足特定的条件。总的来说，这个习惯极大地改善了我的调试体验。</p><p id="08d7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">以下是可以使用assert语句执行的其他一些健全性检查示例:</p><ul class=""><li id="4735" class="nu nv it lb b lc ld lf lg li nw lm nx lq ny lu nz oa ob oc bi translated">检查变量是否具有正确的数据类型</li><li id="939f" class="nu nv it lb b lc od lf oe li of lm og lq oh lu nz oa ob oc bi translated">检查一个数字是否在某个范围内</li><li id="f0bc" class="nu nv it lb b lc od lf oe li of lm og lq oh lu nz oa ob oc bi translated">检查输入矩阵是否具有神经网络的正确维数</li><li id="2638" class="nu nv it lb b lc od lf oe li of lm og lq oh lu nz oa ob oc bi translated">检查列表、集合或字典是否有特定的元素</li></ul></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h2 id="c61b" class="mc md it bd me mf mg dn mh mi mj dp mk li ml mm mn lm mo mp mq lq mr ms mt mu bi translated">常见错误</h2><p id="4f74" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">此时，有必要指出在执行健全性检查时会犯的两个常见错误。</p><p id="21d8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu"> 1。使用非调试工具进行调试。</strong></p><p id="33eb" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">人们可能会犯使用if语句和try/except子句来执行健全性检查的错误。不幸的是，这些工具不是用来调试的。为此目的使用这样的工具是低效的，并且不可避免地会导致更长的代码行，这会妨碍可读性。</p><p id="5f97" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">希望本文为使用assert语句来实现这一目的提供了有力的证据。</p><p id="9808" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu"> 2。将断言语句用于非调试目的</strong></p><p id="e100" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">断言语句是用来调试的，应该只有使用<em class="nd">来调试。对于像错误处理这样的应用程序，最好依靠try/except子句。</em></p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h2 id="473c" class="mc md it bd me mf mg dn mh mi mj dp mk li ml mm mn lm mo mp mq lq mr ms mt mu bi translated">结论</h2><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oi"><img src="../Images/4eec54d17d5604a3fc7f9ffa2d511641.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*VAm1GjQH53BKKgVR"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">照片由<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的<a class="ae ky" href="https://unsplash.com/@prateekkatyal?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Prateek Katyal </a>拍摄</p></figure><p id="b390" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果我继续将assert语句类比为安全卫士，我会说，在Python脚本中包含assert语句就像在程序的任何给定点设置安全检查点，以确保所有活动部分都按预期运行。</p><p id="b5aa" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这是一个一行程序，使用户能够主动执行健全性检查，从而省去他们被动排除错误的麻烦。</p><p id="fb1e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我祝你在数据科学的努力中好运！</p></div></div>    
</body>
</html>