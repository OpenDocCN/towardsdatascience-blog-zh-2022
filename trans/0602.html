<html>
<head>
<title>Bokeh Interactive Plots: Part 3</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">散景互动图:第三部分</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/bokeh-interactive-plots-part-3-683153f5f5ce#2022-02-23">https://towardsdatascience.com/bokeh-interactive-plots-part-3-683153f5f5ce#2022-02-23</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="b0b2" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">如何构建自定义交互式散景应用程序</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/d920455fa4e0370ca4d321d96e497613.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*d54AEg8rT-fGo4td"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">康斯坦丁·叶夫多基莫夫在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</p></figure><h2 id="5d41" class="kz la it bd lb lc ld dn le lf lg dp lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">概观</h2><p id="d539" class="pw-post-body-paragraph lv lw it lx b ly lz ju ma mb mc jx md li me mf mg lm mh mi mj lq mk ml mm mn im bi translated">这是散景互动图系列的第三篇也是最后一篇文章。第 3 部分建立在第 1 部分和第 2 部分的基础上。在继续之前，我建议阅读第 1 部分和第 2 部分。</p><div class="mo mp gp gr mq mr"><a href="https://medium.com/@katyhagerty19/bokeh-stock-comparison-tool-part-1-81afb176a14e" rel="noopener follow" target="_blank"><div class="ms ab fo"><div class="mt ab mu cl cj mv"><h2 class="bd iu gy z fp mw fr fs mx fu fw is bi translated">散景互动图:第 1 部分</h2><div class="my l"><h3 class="bd b gy z fp mw fr fs mx fu fw dk translated">如何指导构建自定义交互式散景应用程序</h3></div><div class="mz l"><p class="bd b dl z fp mw fr fs mx fu fw dk translated">medium.com</p></div></div><div class="na l"><div class="nb l nc nd ne na nf ks mr"/></div></div></a></div><div class="mo mp gp gr mq mr"><a href="https://medium.com/@katyhagerty19/bokeh-interactive-plotting-part-2-316f8d58f476" rel="noopener follow" target="_blank"><div class="ms ab fo"><div class="mt ab mu cl cj mv"><h2 class="bd iu gy z fp mw fr fs mx fu fw is bi translated">散景互动图:第二部分</h2><div class="my l"><h3 class="bd b gy z fp mw fr fs mx fu fw dk translated">如何构建自定义交互式散景应用程序</h3></div><div class="mz l"><p class="bd b dl z fp mw fr fs mx fu fw dk translated">medium.com</p></div></div><div class="na l"><div class="ng l nc nd ne na nf ks mr"/></div></div></a></div><p id="cdda" class="pw-post-body-paragraph lv lw it lx b ly nh ju ma mb ni jx md li nj mf mg lm nk mi mj lq nl ml mm mn im bi translated">第 1 部分创建了应用程序的基础，并将管理基金与指数进行了比较。第 2 部分通过将可交易资产与指数进行比较，拓宽了应用的范围。如下所示，第 3 部分添加了一个新的选项卡和图表，让用户可以比较任意两种证券。<strong class="lx iu"> <em class="nm">为清晰起见，本文将顶部“股票代码”小部件中的资产称为主要投资。</em></strong>“Stock 2 Ticker Symbol”小部件中的资产是相对于主要投资的资产。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nn"><img src="../Images/ebb607d104557f27232318ea5dbbd9aa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*NXPVmYzNVNJI_wJ4cdpphw.gif"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">图片作者。</p></figure><p id="7e2c" class="pw-post-body-paragraph lv lw it lx b ly nh ju ma mb ni jx md li nj mf mg lm nk mi mj lq nl ml mm mn im bi translated">第 3 部分还在小部件下的每个选项卡中添加了一个文本框。文本框显示主要投资升值或贬值的程度、两项投资当前价值之间的差异以及主要投资的成本基础。文本框可以很容易地比较两种不同投资的结果。</p><p id="c5c4" class="pw-post-body-paragraph lv lw it lx b ly nh ju ma mb ni jx md li nj mf mg lm nk mi mj lq nl ml mm mn im bi translated">第 3 部分试图尽可能多地重用前面的代码。与第 2 部分相比，只有<code class="fe no np nq nr b">find_min_date</code>和<code class="fe no np nq nr b">update</code>发生了变化。第 3 部分为新文本框引入了一个新功能<code class="fe no np nq nr b">div_text</code>。</p></div><div class="ab cl ns nt hx nu" role="separator"><span class="nv bw bk nw nx ny"/><span class="nv bw bk nw nx ny"/><span class="nv bw bk nw nx"/></div><div class="im in io ip iq"><h2 id="30a0" class="kz la it bd lb lc ld dn le lf lg dp lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">密码</h2><p id="c3db" class="pw-post-body-paragraph lv lw it lx b ly lz ju ma mb mc jx md li me mf mg lm mh mi mj lq mk ml mm mn im bi translated">这个项目的 Git 回购在这里链接<a class="ae ky" href="https://github.com/katyhagerty/index_fund_comparison" rel="noopener ugc nofollow" target="_blank">。</a></p><h2 id="f793" class="kz la it bd lb lc ld dn le lf lg dp lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">小工具</h2><p id="ad37" class="pw-post-body-paragraph lv lw it lx b ly lz ju ma mb mc jx md li me mf mg lm mh mi mj lq mk ml mm mn im bi translated">选项卡 3 的小部件与选项卡 2 的小部件非常相似，只是选项卡 3 有两个 TextInput 小部件。TextInput 小部件允许用户输入两个股票代码，并比较任意两个资产。此外，第 3 部分使用了一个新的小部件 Div，它与 HTML <code class="fe no np nq nr b">&lt;div&gt;</code>元素保持一致。</p><p id="94a4" class="pw-post-body-paragraph lv lw it lx b ly nh ju ma mb ni jx md li nj mf mg lm nk mi mj lq nl ml mm mn im bi translated">与第 2 部分一样，字典存储新选项卡的小部件。一个新的字典，<code class="fe no np nq nr b">div</code>，保存文本以填充新的文本框。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nz oa l"/></div></figure></div><div class="ab cl ns nt hx nu" role="separator"><span class="nv bw bk nw nx ny"/><span class="nv bw bk nw nx ny"/><span class="nv bw bk nw nx"/></div><div class="im in io ip iq"><h2 id="9a92" class="kz la it bd lb lc ld dn le lf lg dp lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">调用函数</h2><p id="4ab0" class="pw-post-body-paragraph lv lw it lx b ly lz ju ma mb mc jx md li me mf mg lm mh mi mj lq mk ml mm mn im bi translated">下面显示了如何调用函数来初始化表 3 的数据和绘图。这遵循第 2 部分的格式，除了创建文本框的<code class="fe no np nq nr b">line 14</code>。<code class="fe no np nq nr b">div_text</code>输出格式化文本。通过将<code class="fe no np nq nr b">sizing_mode</code>设置为<code class="fe no np nq nr b">‘stretch_width’</code>，文本框会拉伸以填充所有可用宽度。第 1 部分详细介绍了一个<code class="fe no np nq nr b">column</code>对象如何存储所有的小部件。这个容器还将存储 div 小部件。所以不会占用整个浏览器宽度，只占用<code class="fe no np nq nr b">column</code>的宽度。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nz oa l"/></div></figure></div><div class="ab cl ns nt hx nu" role="separator"><span class="nv bw bk nw nx ny"/><span class="nv bw bk nw nx ny"/><span class="nv bw bk nw nx"/></div><div class="im in io ip iq"><h2 id="06ac" class="kz la it bd lb lc ld dn le lf lg dp lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">功能</h2><p id="1827" class="pw-post-body-paragraph lv lw it lx b ly lz ju ma mb mc jx md li me mf mg lm mh mi mj lq mk ml mm mn im bi translated">新函数<code class="fe no np nq nr b">div_text</code>计算主要投资的增长、两项投资之间的差额以及主要投资的成本基础。它有三个输入— <code class="fe no np nq nr b">df_source</code>、<code class="fe no np nq nr b">cost_basis</code>和<code class="fe no np nq nr b">investment_type</code>。<code class="fe no np nq nr b">df_source</code>是一个数据框架，包含特定选项卡上引用的两项投资的数据。由于无法购买指数，如果为选项卡 1 调用<code class="fe no np nq nr b">div_text</code>，则<code class="fe no np nq nr b">cost_basis</code>为“不适用”。对于表 2 和表 3，<code class="fe no np nq nr b">cost_basis</code>是一个<code class="fe no np nq nr b">float</code>，代表在开始日期单个份额的初始投资成本。<code class="fe no np nq nr b">investment_type</code>是描述主要投资的字符串。运行计算后，<code class="fe no np nq nr b">div_text</code>将信息格式化并返回一个字符串，供文本框显示。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nz oa l"/></div></figure></div><div class="ab cl ns nt hx nu" role="separator"><span class="nv bw bk nw nx ny"/><span class="nv bw bk nw nx ny"/><span class="nv bw bk nw nx"/></div><div class="im in io ip iq"><p id="05d7" class="pw-post-body-paragraph lv lw it lx b ly nh ju ma mb ni jx md li nj mf mg lm nk mi mj lq nl ml mm mn im bi translated"><code class="fe no np nq nr b">find_min_date</code>包括用于标签 3 的额外<code class="fe no np nq nr b">elif</code>。现在，当调用 Tab 3 时，该函数使用<code class="fe no np nq nr b">yfinance</code>来检查每项资产何时上市。像以前一样，它返回两个日期中最近的一个，因为该日期表示两个资产的历史重叠的时间。这两种资产需要同样长的时间来升值，以便进行公平的比较。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nz oa l"/></div></figure></div><div class="ab cl ns nt hx nu" role="separator"><span class="nv bw bk nw nx ny"/><span class="nv bw bk nw nx ny"/><span class="nv bw bk nw nx"/></div><div class="im in io ip iq"><h2 id="3f87" class="kz la it bd lb lc ld dn le lf lg dp lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">回调函数</h2><p id="be0c" class="pw-post-body-paragraph lv lw it lx b ly lz ju ma mb mc jx md li me mf mg lm mh mi mj lq mk ml mm mn im bi translated">回调函数<code class="fe no np nq nr b">update</code>，只有微小的改动。<code class="fe no np nq nr b">Line 20</code>调用<code class="fe no np nq nr b">div_text</code>更新选项卡 1 的文本框，而<code class="fe no np nq nr b">line 29</code>对选项卡 2 和 3 做同样的事情。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nz oa l"/></div></figure></div><div class="ab cl ns nt hx nu" role="separator"><span class="nv bw bk nw nx ny"/><span class="nv bw bk nw nx ny"/><span class="nv bw bk nw nx"/></div><div class="im in io ip iq"><h2 id="a886" class="kz la it bd lb lc ld dn le lf lg dp lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">结论</h2><p id="d629" class="pw-post-body-paragraph lv lw it lx b ly lz ju ma mb mc jx md li me mf mg lm mh mi mj lq mk ml mm mn im bi translated">感谢您阅读散景互动剧情系列的最后一篇文章。这些文章的目标是一步一步地分解如何构建交互式散景图。希望这个应用程序能帮助你更好地理解散景，甚至启发你建立一个散景应用程序。</p><p id="0c54" class="pw-post-body-paragraph lv lw it lx b ly nh ju ma mb ni jx md li nj mf mg lm nk mi mj lq nl ml mm mn im bi translated">欢迎所有反馈。我总是渴望学习新的或更好的做事方法。请随时留下您的评论或联系我 katyhagerty19@gmail.com。</p><div class="mo mp gp gr mq mr"><a href="https://medium.com/@katyhagerty19/membership" rel="noopener follow" target="_blank"><div class="ms ab fo"><div class="mt ab mu cl cj mv"><h2 class="bd iu gy z fp mw fr fs mx fu fw is bi translated">加入我的介绍链接媒体-凯蒂哈格蒂</h2><div class="my l"><h3 class="bd b gy z fp mw fr fs mx fu fw dk translated">作为一个媒体会员，你的会员费的一部分会给你阅读的作家，你可以完全接触到每一个故事…</h3></div><div class="mz l"><p class="bd b dl z fp mw fr fs mx fu fw dk translated">medium.com</p></div></div><div class="na l"><div class="ob l nc nd ne na nf ks mr"/></div></div></a></div></div></div>    
</body>
</html>