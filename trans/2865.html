<html>
<head>
<title>Interpreting Regression Coefficient: Wish I Had Known This Before</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">解读回归系数:希望我以前就知道</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/interpreting-regression-coefficient-wish-i-had-known-this-before-177dabb27f58#2022-06-22">https://towardsdatascience.com/interpreting-regression-coefficient-wish-i-had-known-this-before-177dabb27f58#2022-06-22</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="3dcf" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">回归估计量的直观解释</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/ae76aba2f6b2b66b36ec539e9c963a6c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*914XfJvZcsBYSBrn"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">在<a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上由<a class="ae kv" href="https://unsplash.com/es/@mialiamani?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Samia Liamani </a>拍摄的照片</p></figure><p id="fa6f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果你学过应用计量经济学/统计学/数据科学的入门课程，你必须熟悉<em class="ls">使用回归估计的线性模型中预测因子系数的解释</em>。<strong class="ky ir">今天我要分享一个直观的例子来强调这样一个事实——<em class="ls">就像这个作者</em>——你<em class="ls">(大概)</em>带着对兴趣系数的误解通过了入门课程/课程。</strong></p><p id="cfdf" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><em class="ls">* *这篇文章是我上一篇文章的延续，我将使用相同的玩具示例(不同的数字)。万一你错过了，你可以考虑快速浏览一下。然而，阅读是可选的，因为我要重复必要的部分。** </em></p><div class="lt lu gp gr lv lw"><a rel="noopener follow" target="_blank" href="/what-does-it-mean-to-control-for-something-in-multiple-regression-744880620988"><div class="lx ab fo"><div class="ly ab lz cl cj ma"><h2 class="bd ir gy z fp mb fr fs mc fu fw ip bi translated">控制回归中的一个变量意味着什么？</h2><div class="md l"><h3 class="bd b gy z fp mb fr fs mc fu fw dk translated">直观的解释</h3></div><div class="me l"><p class="bd b dl z fp mb fr fs mc fu fw dk translated">towardsdatascience.com</p></div></div><div class="mf l"><div class="mg l mh mi mj mf mk kp lw"/></div></div></a></div><h1 id="bf47" class="ml mm iq bd mn mo mp mq mr ms mt mu mv jw mw jx mx jz my ka mz kc na kd nb nc bi translated">假设的例子</h1><p id="d049" class="pw-post-body-paragraph kw kx iq ky b kz nd jr lb lc ne ju le lf nf lh li lj ng ll lm ln nh lp lq lr ij bi translated">上个月，一家连锁杂货店XYZ向所有光顾其ABC市商店的顾客提供购物卡。有些顾客接受了这张卡，有些则没有。该连锁店在其他10个城市有商店，在其他城市引入该卡之前，他们试图了解接受购物卡在影响每月消费方面的效果如何。你被聘为分析师来调查这个问题！</p><p id="b618" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">首先，你意识到<strong class="ky ir">购物卡既不是随机提供的，也不是随机接受的</strong>。由于您接受过因果建模培训，因此您担心混淆变量，即<em class="ls">影响治疗(接受购物卡)和结果(每月在商店消费)的因素</em>。</p><p id="b885" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">你对接受卡片的人(治疗组)和不接受卡片的人(对照组)的特征做一些背景研究。仔细探索之后，你发现收入是两个群体唯一的区别。高收入的顾客更有可能接受购物卡；此外，根据你的先验知识，你知道高收入顾客更有可能在商店花费更多。你有信心做出这样的假设:除了收入，这两个群体平均来说是相同的。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ni"><img src="../Images/4212e9c71fafd6e13c6ed84fc7689b46.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*pfWya91GxO-25SJaoNtXog.png"/></div></div></figure><p id="f440" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">让我们看看数据集。为了简单起见，我们假设只有三个收入群体:50k，75k和100k。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nj"><img src="../Images/ae58fbf3fa256d420d26610b06b6af26.png" data-original-src="https://miro.medium.com/v2/resize:fit:1178/format:webp/1*90ditr26DHxEuwqIZUGZfQ.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">这个假数据集有400个观察值，但您只能关注这16个观察值。我将这16个观察值复制粘贴了25次，使样本量达到400，这样我就得到统计上显著的结果:D</p></figure><h1 id="b43f" class="ml mm iq bd mn mo mp mq mr ms mt mu mv jw mw jx mx jz my ka mz kc na kd nb nc bi translated"><strong class="ak">手动估计平均因果效应</strong></h1><p id="8514" class="pw-post-body-paragraph kw kx iq ky b kz nd jr lb lc ne ju le lf nf lh li lj ng ll lm ln nh lp lq lr ij bi translated"><strong class="ky ir"> (Angrist and Pischke，2009) </strong>在他们著名的计量经济学教材《大多无害计量经济学》中提到了以下关于<strong class="ky ir">平均待遇效应(ATE)的表述:</strong></p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nk"><img src="../Images/f1dd9330723f6112b9f16dde2ff40398.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*nk4unnGi83Yt4YvOtiyEGw.png"/></div></div></figure><p id="c818" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><em class="ls">* *我在本文中使用术语平均因果效应来指代相同的估计需求(即我试图估计的东西)** </em></p><p id="02ef" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在我们的例子中，<em class="ls"> delta_x </em>是在<em class="ls"> X_i </em> <strong class="ky ir">(收入类别)</strong>的每个值下<em class="ls">接受卡</em>的人和<em class="ls">不接受卡</em>的人之间的平均月支出的<em class="ls">差。<em class="ls"> P(X_i=x) </em>是<em class="ls"> X_i </em> <strong class="ky ir">的概率质量函数(即三个收入类别中每一个的总回答者比例)</strong>。</em></p><p id="01c6" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">简而言之，你要做以下事情:</p><ol class=""><li id="d419" class="nl nm iq ky b kz la lc ld lf nn lj no ln np lr nq nr ns nt bi translated">在三个收入类别(<em class="ls"> X_i </em>)的每一个中，计算接受卡的人和不接受卡的人之间的平均月支出的差异(<em class="ls"> delta_x) </em>)。</li><li id="0563" class="nl nm iq ky b kz nu lc nv lf nw lj nx ln ny lr nq nr ns nt bi translated">将每个特定收入类别的差异(<em class="ls"> delta_x) </em>乘以该特定类别中总受访者的比例<em class="ls">P(X _ I = X)</em>，并将它们相加得到一个估计值。</li></ol><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nz"><img src="../Images/ec605e9b003a245c8ebb49b7c6ef60dc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-N6H4Tcj9uDEAX6_rkqdSQ.png"/></div></div></figure><blockquote class="oa ob oc"><p id="c6c9" class="kw kx ls ky b kz la jr lb lc ld ju le od lg lh li oe lk ll lm of lo lp lq lr ij bi translated"><strong class="ky ir"><em class="iq"/></strong><em class="iq">= 10.75 *(5/16)-20 *(6/16)+18.75(5/16)=</em><strong class="ky ir"><em class="iq">1.72</em></strong></p></blockquote><p id="064d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">太好了！但是，正如我们在上一篇文章中所讨论的，我们更喜欢使用回归来估计平均因果效应，因为我们不仅想得到点估计，还想得到标准误差<em class="ls">(也因为我们很聪明🤓)</em>。</p><h1 id="a9e9" class="ml mm iq bd mn mo mp mq mr ms mt mu mv jw mw jx mx jz my ka mz kc na kd nb nc bi translated">使用回归估计平均因果效应</h1><p id="55b4" class="pw-post-body-paragraph kw kx iq ky b kz nd jr lb lc ne ju le lf nf lh li lj ng ll lm ln nh lp lq lr ij bi translated">您使用回归估计以下<strong class="ky ir">传统模型</strong>:</p><p id="8093" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><em class="ls">月支出= B0+</em><strong class="ky ir"><em class="ls">B1</em></strong><em class="ls">*购物卡受理+ b2*Income50 +b3*Income75+ e </em></p><p id="c725" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">其中购物卡接受度是一个虚拟变量，如果顾客接受该卡，则取值1，否则取值0；Income50是一个虚拟变量，如果客户的收入为5万美元，则取值为1，否则取值为0；Income75是一个虚拟变量，如果客户的收入为7.5万美元，则取值为1，否则取值为0。并且，<em class="ls"> e </em>是误差项，其包括每月花费的所有其他原因；重要的是，这些其他原因对顾客是否接受购物卡没有任何影响(<em class="ls">因为你假设它只取决于你已经在模型中考虑的收入)。</em>最后，在这个常规模型中，<strong class="ky ir"> <em class="ls"> b1 </em> </strong>是<strong class="ky ir">的<strong class="ky ir">回归估计量</strong>的平均因果效应。</strong></p><p id="969f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir"> ** </strong> <em class="ls">我会这样解读B1；否则，在这种特定的环境下使用回归有什么意义呢？</em>😕<em class="ls"> ** </em></p><p id="c162" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这是我使用回归估计上述模型时得到的结果:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi og"><img src="../Images/dd23e1df9fba6e134a384b7abe666946.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qbg-LxuyzFLlHN9hi-wi2g.png"/></div></div></figure><p id="14d9" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">天哪！😲</p><h1 id="a241" class="ml mm iq bd mn mo mp mq mr ms mt mu mv jw mw jx mx jz my ka mz kc na kd nb nc bi translated">虽然真实的<strong class="ak">平均因果效应</strong>为<strong class="ak"> 1.72，但是</strong>的<strong class="ak">回归估计平均因果效应</strong>为<strong class="ak"> -2.06，尽管控制了混杂变量！</strong></h1><p id="f987" class="pw-post-body-paragraph kw kx iq ky b kz nd jr lb lc ne ju le lf nf lh li lj ng ll lm ln nh lp lq lr ij bi translated">让我们暂时忘记因果关系。</p><p id="01fe" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">让我们假设你正在做一项描述性/相关性研究。在这种情况下，您会得出以下一个或两个结论:</p><ol class=""><li id="688a" class="nl nm iq ky b kz la lc ld lf nn lj no ln np lr nq nr ns nt bi translated">在控制收入的情况下，购物卡的接受度与月支出呈显著负相关。</li><li id="7e7b" class="nl nm iq ky b kz nu lc nv lf nw lj nx ln ny lr nq nr ns nt bi translated">在控制收入的情况下，平均来说，接受购物卡的顾客比不接受购物卡的顾客每月花费少2.06美元。这种差异在5%的显著性水平上具有统计显著性<strong class="ky ir">。</strong></li></ol><h1 id="1f36" class="ml mm iq bd mn mo mp mq mr ms mt mu mv jw mw jx mx jz my ka mz kc na kd nb nc bi translated"><strong class="ak">猜猜看！你的(描述性的/ </strong>相关性的<strong class="ak">)结论，基于回归估计，将是明显错误的。而且，你的老板——他相信数据驱动的决策——会将这一结论解释为购物卡对每月支出有整体负面影响的证据。🥺 </strong></h1><h1 id="40c7" class="ml mm iq bd mn mo mp mq mr ms mt mu mv jw mw jx mx jz my ka mz kc na kd nb nc bi translated">了解回归估计量</h1><p id="0399" class="pw-post-body-paragraph kw kx iq ky b kz nd jr lb lc ne ju le lf nf lh li lj ng ll lm ln nh lp lq lr ij bi translated">现在，让我们试着理解为什么回归估计与真正的平均因果效应相差如此之大。</p><p id="d33d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir"> (Angrist和Pischke，2009) </strong>提到普通最小二乘(OLS)回归使用<strong class="ky ir">不同的权重</strong>来估计平均因果效应。回归估计量可以表示为:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oh"><img src="../Images/9e6b43a77b7e99a2409971c2519a887f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*CW2T4HgPE1M97yhI8R5WXA.png"/></div></div></figure><p id="5753" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><em class="ls">* *在我们的案例中，D是待遇(购物卡接受度)，X是混杂变量/协变量(收入)** </em></p><p id="7132" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">让我们使用这个公式，看看我们是否得到与回归<strong class="ky ir">(即-2.06) </strong>相同的估计值。我们使用以下步骤:</p><blockquote class="oa ob oc"><p id="2a44" class="kw kx ls ky b kz la jr lb lc ld ju le od lg lh li oe lk ll lm of lo lp lq lr ij bi translated"><strong class="ky ir"> <em class="iq"> (1) </em> </strong> <em class="iq">计算收入类别权重:</em></p></blockquote><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi oi"><img src="../Images/2022d9684ca7a7b363a9f252cadbb53f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1236/format:webp/1*IxMryA49s7qTH-xACp5dGQ.png"/></div></figure><blockquote class="oa ob oc"><p id="8281" class="kw kx ls ky b kz la jr lb lc ld ju le od lg lh li oe lk ll lm of lo lp lq lr ij bi translated"><strong class="ky ir"> <em class="iq"> (2) </em> </strong> <em class="iq">计算</em> <strong class="ky ir">增量_回归<em class="iq"> : </em> </strong></p><p id="7855" class="kw kx ls ky b kz la jr lb lc ld ju le od lg lh li oe lk ll lm of lo lp lq lr ij bi translated"><strong class="ky ir">delta _ Regression</strong><em class="iq">=(10.75 * 0.05+20 * 0.09375+18.75 * 0.05)/(0.05+0.09375+0.05)=</em><strong class="ky ir"><em class="iq">-2.06</em></strong></p></blockquote><h1 id="b491" class="ml mm iq bd mn mo mp mq mr ms mt mu mv jw mw jx mx jz my ka mz kc na kd nb nc bi translated">很有趣，不是吗？🤔</h1><p id="ab45" class="pw-post-body-paragraph kw kx iq ky b kz nd jr lb lc ne ju le lf nf lh li lj ng ll lm ln nh lp lq lr ij bi translated">根据<strong class="ky ir"> (Angrist和Pischke，2009)，“回归将最大的权重放在治疗状态的条件方差最大的协变量细胞上。”因此，基本上，回归估计器估计一个方差加权平均因果效应<strong class="ky ir">，这是我们不希望看到的</strong> 🥺.在我们的示例中，三种收入类别中购物卡接受度的差异为:</strong></p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi oj"><img src="../Images/d85822622b17647396c0791e64a90a79.png" data-original-src="https://miro.medium.com/v2/resize:fit:1018/format:webp/1*8YQyTzMZ5_Qf65p-e5GqSQ.png"/></div></figure><p id="3123" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><em class="ls">* *我用的是VAR。excel中的s函数** </em></p><p id="e799" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">由于收入等于75，000美元的组在购物卡接受度方面的差异最大，因此收入等于75，000美元的组中接受购物卡的人与未接受购物卡的人之间的<em class="ls">月支出差异获得了<em class="ls">最高权重</em>。</em></p><p id="dd7a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这种加权的结果是什么？在我们的例子中，5万美元、7.5万美元和10万美元组的平均因果效应分别为10.75、-20和18.75。在回归估计量中，7.5万美元组的权重最高，这解释了为什么我们使用回归得到了治疗变量(购物卡接受度)的负系数(尽管真正的平均因果效应是正的)。</p><h1 id="0eae" class="ml mm iq bd mn mo mp mq mr ms mt mu mv jw mw jx mx jz my ka mz kc na kd nb nc bi translated">有什么补救措施？</h1><p id="8b16" class="pw-post-body-paragraph kw kx iq ky b kz nd jr lb lc ne ju le lf nf lh li lj ng ll lm ln nh lp lq lr ij bi translated"><strong class="ky ir">(和康，2008) </strong>提到了解决这个问题的办法。它包括以下内容:</p><blockquote class="oa ob oc"><p id="fef0" class="kw kx ls ky b kz la jr lb lc ld ju le od lg lh li oe lk ll lm of lo lp lq lr ij bi translated"><strong class="ky ir"><em class="iq">【1】</em></strong><em class="iq">通过从每个协变量中减去该协变量的样本均值，使所有协变量居中。这可以通过用(X_i - E(X_i))替换向量X_i来一次对所有协变量完成。</em></p><p id="e31a" class="kw kx ls ky b kz la jr lb lc ld ju le od lg lh li oe lk ll lm of lo lp lq lr ij bi translated"><strong class="ky ir"><em class="iq">【②】</em></strong><em class="iq">计算治疗变量与各居中协变量的乘积。</em></p></blockquote><p id="3f19" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">基于以上所述，在我们的例子中，我们必须估计下面的修正模型:</p><p id="bca2" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><em class="ls">月消费= B0+</em><strong class="ky ir"><em class="ls">B1</em></strong><em class="ls">*购物卡受理+B2 * c _ income 50+B3 * c _ income 75+B4 *购物卡受理* c _ income 50+b5 *购物卡受理*c_Income75 + e </em></p><p id="1de7" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">重要的是，c_Income50和c_Income75以样本均值为中心。在这个修正模型中，<strong class="ky ir"> <em class="ls"> b1 </em> </strong>是<strong class="ky ir">平均因果效应</strong>的回归估计量。</p><p id="1ae6" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在，我使用回归估计上述模型，并得到以下结果:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ok"><img src="../Images/7f417d8de39e2cfa9b1faa0742e78787.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*EvnSfGJIXecG9Y_5JTHP7Q.png"/></div></div></figure><h1 id="30ab" class="ml mm iq bd mn mo mp mq mr ms mt mu mv jw mw jx mx jz my ka mz kc na kd nb nc bi translated">令人惊异的🤩我们调整了我们的模型，找到了一种通过回归得到真实平均因果效应的方法！</h1><h1 id="26d9" class="ml mm iq bd mn mo mp mq mr ms mt mu mv jw mw jx mx jz my ka mz kc na kd nb nc bi translated">在R中实现它</h1><p id="99e0" class="pw-post-body-paragraph kw kx iq ky b kz nd jr lb lc ne ju le lf nf lh li lj ng ll lm ln nh lp lq lr ij bi translated">如果你认为如果你有许多协变量，实现居中将是一项艰苦的任务，这里有一些好消息！我们可以使用<strong class="ky ir">margin effects</strong>包在R中轻松实现整个过程。代码如下:</p><pre class="kg kh ki kj gt ol om on oo aw op bi"><span id="1008" class="oq mm iq om b gy or os l ot ou">library(dplyr)<br/>library(marginaleffects)<br/>library(readr)</span><span id="dc0d" class="oq mm iq om b gy ov os l ot ou"><strong class="om ir">#Import the dataset</strong><br/>data &lt;- read_csv("<a class="ae kv" href="https://raw.githubusercontent.com/vivdas92/Medium-Blogs/main/regression_toy_example_data.csv" rel="noopener ugc nofollow" target="_blank">https://raw.githubusercontent.com/vivdas92/Medium-Blogs/main/regression_toy_example_data.csv</a>")</span><span id="e427" class="oq mm iq om b gy ov os l ot ou"><strong class="om ir">#Estimate the model</strong><br/>model&lt;-lm(Monthly_Spending~Shoppers_Card+Income50+Income75+Shoppers_Card:Income50+Shoppers_Card:Income75,data=data)<br/>summary(model)</span><span id="05a6" class="oq mm iq om b gy ov os l ot ou"><strong class="om ir">#Average Causal Effect</strong><br/>marginaleffects(model, variables = "Shoppers_Card") %&gt;%<br/>  summary()</span></pre><p id="ee21" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">以下是R输出:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi ow"><img src="../Images/c472389b5b66b46961e10e89dafee38e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1202/format:webp/1*vCTNpJEfeyHiZf1Me8UMYw.png"/></div></figure><h1 id="dc47" class="ml mm iq bd mn mo mp mq mr ms mt mu mv jw mw jx mx jz my ka mz kc na kd nb nc bi translated">回归估计量何时估计平均因果效应？</h1><p id="b4f4" class="pw-post-body-paragraph kw kx iq ky b kz nd jr lb lc ne ju le lf nf lh li lj ng ll lm ln nh lp lq lr ij bi translated">从上面的例子中，我们可以得出两个观察结果:</p><p id="5f8b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir"> (1) </strong>常规回归估计量估计真实的平均因果效应，如果在每个水平的添加协变量内的<strong class="ky ir">效应(<em class="ls"> delta_x </em>)是相同的(同质处理效应)</strong>。在我们的例子中，如果这三个收入类别的影响都是10，那么:</p><blockquote class="oa ob oc"><p id="a1dc" class="kw kx ls ky b kz la jr lb lc ld ju le od lg lh li oe lk ll lm of lo lp lq lr ij bi translated"><strong class="ky ir">平均因果效应</strong>=<em class="iq">10 * 0.3125+10 * 0.375+10 * 0.3125 =</em><strong class="ky ir"><em class="iq">10</em></strong></p><p id="5ffa" class="kw kx ls ky b kz la jr lb lc ld ju le od lg lh li oe lk ll lm of lo lp lq lr ij bi translated"><strong class="ky ir">delta _ Regression</strong><em class="iq">=(10 * 0.05+10 * 0.09375+10 * 0.05)/(0.05+0.09375+0.05)=</em><strong class="ky ir"><em class="iq">10</em></strong></p></blockquote><p id="9409" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">因此，如果你愿意假设加入模型的协变量水平的处理效果是同质的，那么你可以声称传统的回归估计器估计了真正的平均因果效应。</p><p id="6e52" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir"> (2) </strong>如果<strong class="ky ir">添加协变量的每个水平内治疗状态的方差相同</strong>，常规回归估计器估计真实的平均因果效应。例如，让我们看看下面的数据集:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi ox"><img src="../Images/5b4fbd243f2ad60ed1abfb075330ad76.png" data-original-src="https://miro.medium.com/v2/resize:fit:1088/format:webp/1*8CwA7aWC9MT2512DzZQoYw.png"/></div></figure><p id="288e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">有了这些数据，如果你使用回归估计没有交互作用的传统模型，你得到真实的平均因果效应(18.11)。有趣的是，这里的因果关系在不同的收入类别中并不一致；然而，购物卡接受度的方差在所有三个收入类别中都是相同的(0.3)。</p><blockquote class="oa ob oc"><p id="f8f7" class="kw kx ls ky b kz la jr lb lc ld ju le od lg lh li oe lk ll lm of lo lp lq lr ij bi translated"><strong class="ky ir"> <em class="iq">一般来说，这意味着</em>如果满足两个条件中的任何一个，常规回归估计量就会估计真实的平均因果效应:</strong></p><p id="d31e" class="kw kx ls ky b kz la jr lb lc ld ju le od lg lh li oe lk ll lm of lo lp lq lr ij bi translated"><strong class="ky ir"> <em class="iq"> (1)治疗效果同质性</em> </strong></p><p id="04cd" class="kw kx ls ky b kz la jr lb lc ld ju le od lg lh li oe lk ll lm of lo lp lq lr ij bi translated"><strong class="ky ir"> <em class="iq"> (2)协变量水平内治疗状态的等方差</em> </strong></p></blockquote><p id="d944" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们可以从上面的数据集得到的另一个有趣的观察结果是，它看起来完全像块随机实验数据(或完全平衡的数据)。显然，在这里，收入甚至不是一个混淆因素！为什么？因为这三种收入类别接受购物卡的可能性都是一样的。这意味着，如果你不愿意用相互作用来估计模型，那么你必须找到一种方法，在你的非实验数据集中达到这种平衡。实现平衡分析样本的两种流行方法是(1)倾向得分匹配和(2)逆概率加权。</p><h1 id="e013" class="ml mm iq bd mn mo mp mq mr ms mt mu mv jw mw jx mx jz my ka mz kc na kd nb nc bi translated">最后的想法</h1><p id="5599" class="pw-post-body-paragraph kw kx iq ky b kz nd jr lb lc ne ju le lf nf lh li lj ng ll lm ln nh lp lq lr ij bi translated">回归一直是分析师工具箱中一个令人惊奇的工具，而且在未来也将继续如此。尽管有这些限制，但如果建模得当，回归可能是许多经验背景下最合适的估计技术(<em class="ls">尤其是当你试图估计做某事的平均因果效应时</em>)。</p><p id="3018" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">最后，我要重申几个方法论者多年来推荐的一个要点。✨并不把任何实证方法视为灵丹妙药，而是希望🙏🏽它会像预期的那样自动工作——<strong class="ky ir">在任何分析的开始，问我们自己这两个问题是一个好主意:1)我们试图估计什么，以及2)我们正在估计我们相信我们正在估计的东西吗？</strong>一旦我们搞清楚了这些问题的答案，就要据此制定分析计划！</p><p id="084a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">*除非特别注明，所有图片均为作者。这些是来自MS Excel，MS Word，和r的截图。</p><p id="bcd0" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">*您可以找到编制好的excel文件和。本文使用的csv文件如下:【https://github.com/vivdas09/Medium-Blogs T4】</p><p id="8bd8" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果你想阅读我以前关于如何尝试了解未知的的一些帖子，这里有一些建议:</p><div class="lt lu gp gr lv lw"><a href="https://vivdas.medium.com/how-to-explore-the-effect-of-doing-something-1d5f0e70a778" rel="noopener follow" target="_blank"><div class="lx ab fo"><div class="ly ab lz cl cj ma"><h2 class="bd ir gy z fp mb fr fs mc fu fw ip bi translated">如何探究做某事的效果？(第一部分)</h2><div class="md l"><h3 class="bd b gy z fp mb fr fs mc fu fw dk translated">应用因果推理101:反事实世界和实验理想</h3></div></div><div class="mf l"><div class="oy l mh mi mj mf mk kp lw"/></div></div></a></div><div class="lt lu gp gr lv lw"><a href="https://vivdas.medium.com/how-to-explore-the-effect-of-doing-something-part-2-228f857bb060" rel="noopener follow" target="_blank"><div class="lx ab fo"><div class="ly ab lz cl cj ma"><h2 class="bd ir gy z fp mb fr fs mc fu fw ip bi translated">如何探究做某事的效果？(第二部分)</h2><div class="md l"><h3 class="bd b gy z fp mb fr fs mc fu fw dk translated">应用因果推理101:非实验数据</h3></div></div><div class="mf l"><div class="oz l mh mi mj mf mk kp lw"/></div></div></a></div><div class="lt lu gp gr lv lw"><a href="https://medium.datadriveninvestor.com/does-money-buy-happiness-4ad92109c303" rel="noopener  ugc nofollow" target="_blank"><div class="lx ab fo"><div class="ly ab lz cl cj ma"><h2 class="bd ir gy z fp mb fr fs mc fu fw ip bi translated">金钱能买到幸福吗？</h2><div class="md l"><h3 class="bd b gy z fp mb fr fs mc fu fw dk translated">探索这个问题的实用教程</h3></div></div><div class="mf l"><div class="pa l mh mi mj mf mk kp lw"/></div></div></a></div><h1 id="e060" class="ml mm iq bd mn mo mp mq mr ms mt mu mv jw mw jx mx jz my ka mz kc na kd nb nc bi translated">参考</h1><p id="0e03" class="pw-post-body-paragraph kw kx iq ky b kz nd jr lb lc ne ju le lf nf lh li lj ng ll lm ln nh lp lq lr ij bi translated">安格里斯特博士和皮施克博士(2009年)。<em class="ls">大多无害的计量经济学:一个经验主义者的伴侣</em>。普林斯顿大学出版社。</p><p id="90f9" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">、李俊林、康(2008)。非随机研究的平均因果效应:实践指南和模拟实例。<em class="ls">心理方法</em>，<em class="ls"> 13 </em> (4)，279。</p></div></div>    
</body>
</html>