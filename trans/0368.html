<html>
<head>
<title>How to Count The Occurrences of a Value in a Pandas DataFrame Column</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何计算熊猫数据帧列中某个值的出现次数</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/count-occurrences-of-a-value-pandas-e5dad02303e9#2022-02-15">https://towardsdatascience.com/count-occurrences-of-a-value-pandas-e5dad02303e9#2022-02-15</a></blockquote><div><div class="fc ii ij ik il im"/><div class="in io ip iq ir"><div class=""/><div class=""><h2 id="1747" class="pw-subtitle-paragraph jr it iu bd b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki dk translated">计算熊猫数据帧列中特定值的出现频率</h2></div><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj kj"><img src="../Images/ab739194055c092b4911cc06e94fb5ed.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*veVf1FoznZEQK9n3Ypr2Tw.jpeg"/></div></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">照片由<a class="ae kz" href="https://unsplash.com/@nadineshaabana?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">纳丁·沙巴纳</a>在<a class="ae kz" href="https://unsplash.com/s/photos/count?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</p></figure><h2 id="8699" class="la lb iu bd lc ld le dn lf lg lh dp li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">介绍</h2><p id="26a7" class="pw-post-body-paragraph lw lx iu ly b lz ma jv mb mc md jy me lj mf mg mh ln mi mj mk lr ml mm mn mo in bi translated">当处理pandas数据框架时，我们通常需要检查数据并提取一些指标，这些指标最终将帮助我们更好地理解数据，甚至识别一些异常情况。我们在日常工作中需要执行的一个非常简单但常见的任务是计算某个值在数据帧中出现的次数。</p><p id="4b97" class="pw-post-body-paragraph lw lx iu ly b lz mp jv mb mc mq jy me lj mr mg mh ln ms mj mk lr mt mm mn mo in bi translated">在今天的简短教程中，我们将展示如何计算熊猫数据帧列中特定值的频率。我们将探讨如何计算该列中出现的所有唯一值的频率，或者只计算某个特定值的频率。</p></div><div class="ab cl mu mv hy mw" role="separator"><span class="mx bw bk my mz na"/><span class="mx bw bk my mz na"/><span class="mx bw bk my mz"/></div><div class="in io ip iq ir"><p id="2148" class="pw-post-body-paragraph lw lx iu ly b lz mp jv mb mc mq jy me lj mr mg mh ln ms mj mk lr mt mm mn mo in bi translated">首先，让我们创建一个示例数据框架，我们将在本教程中引用它来演示几个概念。</p><pre class="kk kl km kn gu nb nc nd ne aw nf bi"><span id="494c" class="la lb iu nc b gz ng nh l ni nj">import pandas a pd</span><span id="6f5f" class="la lb iu nc b gz nk nh l ni nj">df = pd.DataFrame(<br/>    [<br/>        (1, 5, 'A', True),<br/>        (2, 15, 'A', False),<br/>        (3, 5, 'B', True),<br/>        (4, 6, 'A', False),<br/>        (5, 15, 'C', True),<br/>        (6, None, 'B', True),<br/>        (7, 15, 'A', False),<br/>    ],<br/>    columns=['colA', 'colB', 'colC', 'colD']<br/>)</span><span id="4972" class="la lb iu nc b gz nk nh l ni nj">print(df)<br/><strong class="nc iv"><em class="nl">   colA  colB colC   colD<br/>0     1   5.0    A   True<br/>1     2  15.0    A  False<br/>2     3   5.0    B   True<br/>3     4   6.0    A  False<br/>4     5  15.0    C   True<br/>5     6   NaN    B   True<br/>6     7  15.0    A  False</em></strong></span></pre></div><div class="ab cl mu mv hy mw" role="separator"><span class="mx bw bk my mz na"/><span class="mx bw bk my mz na"/><span class="mx bw bk my mz"/></div><div class="in io ip iq ir"><h2 id="cfa4" class="la lb iu bd lc ld le dn lf lg lh dp li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">使用groupby</h2><p id="112b" class="pw-post-body-paragraph lw lx iu ly b lz ma jv mb mc md jy me lj mf mg mh ln mi mj mk lr ml mm mn mo in bi translated">在计算某个特定值在特定列中出现的次数时，我们的第一个选择是用<code class="fe nm nn no nc b">groupby</code>和<code class="fe nm nn no nc b">count</code>来计算该特定值。让我们假设我们想要计算列<code class="fe nm nn no nc b">colB</code>中的每个值出现了多少次。下面的表达式可以帮我们解决这个问题:</p><pre class="kk kl km kn gu nb nc nd ne aw nf bi"><span id="d8fe" class="la lb iu nc b gz ng nh l ni nj"><strong class="nc iv">&gt;&gt;&gt; df.groupby('colB')['colB'].count()</strong></span><span id="25ae" class="la lb iu nc b gz nk nh l ni nj">5.0     2<br/>6.0     1<br/>15.0    3<br/>Name: colB, dtype: int64</span></pre><p id="404c" class="pw-post-body-paragraph lw lx iu ly b lz mp jv mb mc mq jy me lj mr mg mh ln ms mj mk lr mt mm mn mo in bi translated">请注意，上面的表达式将给出指定列中出现的每个非空值的频率。</p></div><div class="ab cl mu mv hy mw" role="separator"><span class="mx bw bk my mz na"/><span class="mx bw bk my mz na"/><span class="mx bw bk my mz"/></div><div class="in io ip iq ir"><h2 id="ea7b" class="la lb iu bd lc ld le dn lf lg lh dp li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">使用值计数</h2><p id="2c26" class="pw-post-body-paragraph lw lx iu ly b lz ma jv mb mc md jy me lj mf mg mh ln mi mj mk lr ml mm mn mo in bi translated">或者，我们可以使用<code class="fe nm nn no nc b"><a class="ae kz" href="https://pandas.pydata.org/docs/reference/api/pandas.Series.value_counts.html" rel="noopener ugc nofollow" target="_blank">pandas.Series.value_counts()</a></code>方法，该方法将返回包含唯一值计数的熊猫<code class="fe nm nn no nc b">Series</code>。</p><pre class="kk kl km kn gu nb nc nd ne aw nf bi"><span id="9c7f" class="la lb iu nc b gz ng nh l ni nj"><strong class="nc iv">&gt;&gt;&gt; df['colB'].value_counts()</strong></span><span id="713a" class="la lb iu nc b gz nk nh l ni nj">15.0    3<br/>5.0     2<br/>6.0     1<br/>Name: colB, dtype: int64</span></pre><p id="3d71" class="pw-post-body-paragraph lw lx iu ly b lz mp jv mb mc mq jy me lj mr mg mh ln ms mj mk lr mt mm mn mo in bi translated">默认情况下，<code class="fe nm nn no nc b">value_counts()</code>将返回非空值的频率。如果您还想包括<code class="fe nm nn no nc b">None</code>值的频率，您可以简单地将<code class="fe nm nn no nc b">dropna</code>参数设置为<code class="fe nm nn no nc b">False</code>:</p><pre class="kk kl km kn gu nb nc nd ne aw nf bi"><span id="7484" class="la lb iu nc b gz ng nh l ni nj"><strong class="nc iv">&gt;&gt;&gt; df['colB'].value_counts(dropna=False)</strong></span><span id="be86" class="la lb iu nc b gz nk nh l ni nj">15.0    3<br/>5.0     2<br/>NaN     1<br/>6.0     1<br/>Name: colB, dtype: int64</span></pre></div><div class="ab cl mu mv hy mw" role="separator"><span class="mx bw bk my mz na"/><span class="mx bw bk my mz na"/><span class="mx bw bk my mz"/></div><div class="in io ip iq ir"><h2 id="96e0" class="la lb iu bd lc ld le dn lf lg lh dp li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">将计数添加为新列</h2><p id="85c4" class="pw-post-body-paragraph lw lx iu ly b lz ma jv mb mc md jy me lj mf mg mh ln mi mj mk lr ml mm mn mo in bi translated">如果您想将结果添加回原始数据帧，您需要使用<code class="fe nm nn no nc b">transform()</code>方法，如下图所示:</p><pre class="kk kl km kn gu nb nc nd ne aw nf bi"><span id="9510" class="la lb iu nc b gz ng nh l ni nj"><strong class="nc iv">&gt;&gt;&gt;</strong> <strong class="nc iv">df['colB_cnt'] = </strong><strong class="nc iv">df.groupby('colB')['colB'].transform('count')<br/>&gt;&gt;&gt; df<br/></strong>   colA  colB colC   colD  colB_cnt<br/>0     1   5.0    A   True       2.0<br/>1     2  15.0    A  False       3.0<br/>2     3   5.0    B   True       2.0<br/>3     4   6.0    A  False       1.0<br/>4     5  15.0    C   True       3.0<br/>5     6   NaN    B   True       NaN<br/>6     7  15.0    A  False       3.0</span></pre><p id="c862" class="pw-post-body-paragraph lw lx iu ly b lz mp jv mb mc mq jy me lj mr mg mh ln ms mj mk lr mt mm mn mo in bi translated">现在，每一行都将具有在新创建的列<code class="fe nm nn no nc b">colB_cnt</code>下的列<code class="fe nm nn no nc b">colB</code>中出现的值的相关频率。</p></div><div class="ab cl mu mv hy mw" role="separator"><span class="mx bw bk my mz na"/><span class="mx bw bk my mz na"/><span class="mx bw bk my mz"/></div><div class="in io ip iq ir"><h2 id="fe03" class="la lb iu bd lc ld le dn lf lg lh dp li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">获取特定值的频率</h2><p id="1ccb" class="pw-post-body-paragraph lw lx iu ly b lz ma jv mb mc md jy me lj mf mg mh ln mi mj mk lr ml mm mn mo in bi translated">在前面的部分中，我们展示了如何计算出现在特定列中的所有唯一值的频率。如果您只对单个值的频率感兴趣，那么您可以使用以下任何一种方法(假设我们希望值<code class="fe nm nn no nc b">15</code>出现在列<code class="fe nm nn no nc b">colB</code>中的次数):</p><pre class="kk kl km kn gu nb nc nd ne aw nf bi"><span id="9b07" class="la lb iu nc b gz ng nh l ni nj"><strong class="nc iv">&gt;&gt;&gt; (df.colB.values == 15).sum()</strong><br/>3</span><span id="ed07" class="la lb iu nc b gz nk nh l ni nj">&gt;&gt;&gt; <strong class="nc iv">(df.colB == 15).sum()</strong><br/>3</span><span id="668e" class="la lb iu nc b gz nk nh l ni nj">&gt;&gt;&gt; <strong class="nc iv">len(df[df['colB'] == 15])<br/></strong>3</span></pre></div><div class="ab cl mu mv hy mw" role="separator"><span class="mx bw bk my mz na"/><span class="mx bw bk my mz na"/><span class="mx bw bk my mz"/></div><div class="in io ip iq ir"><h2 id="78f3" class="la lb iu bd lc ld le dn lf lg lh dp li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">最后的想法</h2><p id="f311" class="pw-post-body-paragraph lw lx iu ly b lz ma jv mb mc md jy me lj mf mg mh ln mi mj mk lr ml mm mn mo in bi translated">在今天的短文中，我们探讨了在计算特定pandas DataFrame列中值的频率时的一些不同选项。此外，我们展示了如何在现有数据框架中添加计算的计数/频率作为新列。</p><p id="e54a" class="pw-post-body-paragraph lw lx iu ly b lz mp jv mb mc mq jy me lj mr mg mh ln ms mj mk lr mt mm mn mo in bi translated">最后，我们探索了如何使用一些不同的选项计算DataFrame列中特定值的频率。</p></div><div class="ab cl mu mv hy mw" role="separator"><span class="mx bw bk my mz na"/><span class="mx bw bk my mz na"/><span class="mx bw bk my mz"/></div><div class="in io ip iq ir"><p id="1b77" class="pw-post-body-paragraph lw lx iu ly b lz mp jv mb mc mq jy me lj mr mg mh ln ms mj mk lr mt mm mn mo in bi translated"><a class="ae kz" href="https://gmyrianthous.medium.com/membership" rel="noopener"> <strong class="ly iv">成为会员</strong> </a> <strong class="ly iv">阅读介质上的每一个故事。你的会员费直接支持我和你看的其他作家。你也可以在媒体上看到所有的故事。</strong></p><div class="np nq gq gs nr ns"><a href="https://gmyrianthous.medium.com/membership" rel="noopener follow" target="_blank"><div class="nt ab fp"><div class="nu ab nv cl cj nw"><h2 class="bd iv gz z fq nx fs ft ny fv fx it bi translated">通过我的推荐链接加入Medium-Giorgos Myrianthous</h2><div class="nz l"><h3 class="bd b gz z fq nx fs ft ny fv fx dk translated">作为一个媒体会员，你的会员费的一部分会给你阅读的作家，你可以完全接触到每一个故事…</h3></div><div class="oa l"><p class="bd b dl z fq nx fs ft ny fv fx dk translated">gmyrianthous.medium.com</p></div></div><div class="ob l"><div class="oc l od oe of ob og kt ns"/></div></div></a></div></div><div class="ab cl mu mv hy mw" role="separator"><span class="mx bw bk my mz na"/><span class="mx bw bk my mz na"/><span class="mx bw bk my mz"/></div><div class="in io ip iq ir"><p id="676e" class="pw-post-body-paragraph lw lx iu ly b lz mp jv mb mc mq jy me lj mr mg mh ln ms mj mk lr mt mm mn mo in bi translated"><strong class="ly iv">你可能也会喜欢</strong></p><div class="np nq gq gs nr ns"><a rel="noopener follow" target="_blank" href="/how-to-efficiently-convert-a-pyspark-dataframe-to-pandas-8bda2c3875c3"><div class="nt ab fp"><div class="nu ab nv cl cj nw"><h2 class="bd iv gz z fq nx fs ft ny fv fx it bi translated">加快PySpark和Pandas数据帧之间的转换</h2><div class="nz l"><h3 class="bd b gz z fq nx fs ft ny fv fx dk translated">将大型Spark数据帧转换为熊猫时节省时间</h3></div><div class="oa l"><p class="bd b dl z fq nx fs ft ny fv fx dk translated">towardsdatascience.com</p></div></div><div class="ob l"><div class="oh l od oe of ob og kt ns"/></div></div></a></div></div><div class="ab cl mu mv hy mw" role="separator"><span class="mx bw bk my mz na"/><span class="mx bw bk my mz na"/><span class="mx bw bk my mz"/></div><div class="in io ip iq ir"><div class="kk kl km kn gu ns"><a href="https://betterprogramming.pub/11-python-one-liners-for-everyday-programming-f346a0a73f39" rel="noopener  ugc nofollow" target="_blank"><div class="nt ab fp"><div class="nu ab nv cl cj nw"><h2 class="bd iv gz z fq nx fs ft ny fv fx it bi translated">用于日常编程的11个Python一行程序</h2><div class="nz l"><h3 class="bd b gz z fq nx fs ft ny fv fx dk translated">令人惊叹的Python片段不会降低可读性</h3></div><div class="oa l"><p class="bd b dl z fq nx fs ft ny fv fx dk translated">better编程. pub</p></div></div><div class="ob l"><div class="oi l od oe of ob og kt ns"/></div></div></a></div></div></div>    
</body>
</html>