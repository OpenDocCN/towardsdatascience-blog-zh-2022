<html>
<head>
<title>Create a Bar Chart Race Animation App Using Streamlit and Raceplotly</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用 Streamlit 和 Raceplotly 创建一个条形图比赛动画应用程序</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/create-a-bar-chart-race-animation-app-using-streamlit-and-raceplotly-e44495249f11#2022-02-22">https://towardsdatascience.com/create-a-bar-chart-race-animation-app-using-streamlit-and-raceplotly-e44495249f11#2022-02-22</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="5d26" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">了解如何使用 Streamlit 构建一个无需编码即可在几秒钟内生成条形图比赛动画的应用程序</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/0def4890948fb86b6d117b874e75c180.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*m-rEoJwi9xLRcrHTHlzyug.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">图片由<a class="ae ky" href="https://pixabay.com/photos/up-growth-success-arrow-graphic-2081170/" rel="noopener ugc nofollow" target="_blank">皮克斯拜</a>(作者修改)</p></figure><h1 id="5644" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">介绍</h1><p id="0e1f" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">条形图竞赛是一个有趣的数据可视化，显示随着时间的推移，随着条形图的演变而变化的数据。它被广泛有效地用作一种可视化类型，以显示和评估一组实体在定义的时间范围内的排名。</p><p id="b57a" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">在过去，用 Python(例如<code class="fe ms mt mu mv b">Plotly</code>)创建条形图竞赛并不是一件容易的事情，需要大量的编码。幸运的是，我找到了这个名为<code class="fe ms mt mu mv b">raceplotly</code>的包，它是专门为用几行简单的 python 代码创建这样一个图形而编写的。当我需要创建一个条形图比赛动画时，它确实节省了我很多时间和头痛。</p><p id="2cd7" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">然后，我进一步思考:我们创建一个应用程序，让用户快速轻松地创建条形图比赛动画，而无需编写任何代码或了解 python，如何？这可能是一个很酷的动手项目，以提高我的 Streamlit 技能！你感兴趣吗？</p><p id="19ac" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">所以，没有进一步的拖延，让我们开始建立这个应用程序。我们将要创建的应用程序如下所示(2 分钟的 YouTube 视频演示):</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mw mx l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者的 YouTube 视频</p></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi my"><img src="../Images/10b6a0960d22fe702346f9becafc5ebe.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2dXl2s65MpMbVRCDFZ5L5A.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure></div><div class="ab cl mz na hx nb" role="separator"><span class="nc bw bk nd ne nf"/><span class="nc bw bk nd ne nf"/><span class="nc bw bk nd ne"/></div><div class="im in io ip iq"><h1 id="8d7b" class="kz la it bd lb lc ng le lf lg nh li lj jz ni ka ll kc nj kd ln kf nk kg lp lq bi translated">先决条件</h1><p id="b259" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated"><strong class="lt iu">安装 Streamlit: </strong></p><p id="01e1" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">可以参考下面的<a class="ae ky" rel="noopener" target="_blank" href="/streamlit-hands-on-from-zero-to-your-first-awesome-web-app-2c28f9f4e214">文章</a>，按照说明安装 Streamlit，学习基础知识。</p><div class="nl nm gp gr nn no"><a rel="noopener follow" target="_blank" href="/streamlit-hands-on-from-zero-to-your-first-awesome-web-app-2c28f9f4e214"><div class="np ab fo"><div class="nq ab nr cl cj ns"><h2 class="bd iu gy z fp nt fr fs nu fu fw is bi translated">简化实践:从零到你的第一个优秀的网络应用</h2><div class="nv l"><h3 class="bd b gy z fp nt fr fs nu fu fw dk translated">学习核心概念并使用 Streamlit 创建您的第一个 Web 应用程序的分步指南</h3></div><div class="nw l"><p class="bd b dl z fp nt fr fs nu fu fw dk translated">towardsdatascience.com</p></div></div><div class="nx l"><div class="ny l nz oa ob nx oc ks no"/></div></div></a></div><h2 id="8dfa" class="od la it bd lb oe of dn lf og oh dp lj ma oi oj ll me ok ol ln mi om on lp oo bi translated">安装以下软件包:</h2><pre class="kj kk kl km gt op mv oq or aw os bi"><span id="7ccd" class="od la it mv b gy ot ou l ov ow">pip install raceplotly</span><span id="91d4" class="od la it mv b gy ox ou l ov ow">pip install streamlit-aggrid</span><span id="724d" class="od la it mv b gy ox ou l ov ow">pip install streamlit-option-menu</span></pre></div><div class="ab cl mz na hx nb" role="separator"><span class="nc bw bk nd ne nf"/><span class="nc bw bk nd ne nf"/><span class="nc bw bk nd ne"/></div><div class="im in io ip iq"><h1 id="d520" class="kz la it bd lb lc ng le lf lg nh li lj jz ni ka ll kc nj kd ln kf nk kg lp lq bi translated">导入库</h1><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oy mx l"/></div></figure></div><div class="ab cl mz na hx nb" role="separator"><span class="nc bw bk nd ne nf"/><span class="nc bw bk nd ne nf"/><span class="nc bw bk nd ne"/></div><div class="im in io ip iq"><h1 id="d7a6" class="kz la it bd lb lc ng le lf lg nh li lj jz ni ka ll kc nj kd ln kf nk kg lp lq bi translated">应用程序设计概述</h1><p id="7b84" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">先简单说一下 app 的整体布局和设计。在我之前的<a class="ae ky" href="https://medium.com/codex/create-a-multi-page-app-with-the-new-streamlit-option-menu-component-3e3edaf7e7ad" rel="noopener">文章</a>中，我们谈到了如何使用<code class="fe ms mt mu mv b">streamlit-option-menu</code>来创建一个漂亮的、专业外观的导航菜单。</p><div class="nl nm gp gr nn no"><a href="https://medium.com/codex/create-a-multi-page-app-with-the-new-streamlit-option-menu-component-3e3edaf7e7ad" rel="noopener follow" target="_blank"><div class="np ab fo"><div class="nq ab nr cl cj ns"><h2 class="bd iu gy z fp nt fr fs nu fu fw is bi translated">使用新的简化选项菜单组件创建一个多页面应用程序</h2><div class="nv l"><h3 class="bd b gy z fp nt fr fs nu fu fw dk translated">还用 st.radio()创建菜单？是时候尝试在 Github 中提供完整代码的 Streamlit-Option-Menu 了</h3></div><div class="nw l"><p class="bd b dl z fp nt fr fs nu fu fw dk translated">medium.com</p></div></div><div class="nx l"><div class="oz l nz oa ob nx oc ks no"/></div></div></a></div><p id="4b6d" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">我们可以对这个应用程序做同样的事情。我们将创建一个多页应用程序，包括:</p><ul class=""><li id="3059" class="pa pb it lt b lu mn lx mo ma pc me pd mi pe mm pf pg ph pi bi translated">“关于”页面:介绍应用程序或应用程序创建者</li><li id="581a" class="pa pb it lt b lu pj lx pk ma pl me pm mi pn mm pf pg ph pi bi translated">“演示”页面:显示了该应用程序的简短视频演示</li><li id="4279" class="pa pb it lt b lu pj lx pk ma pl me pm mi pn mm pf pg ph pi bi translated">应用程序页面:允许用户上传一个 csv 文件，并立即生成一个条形图比赛动画</li><li id="a54d" class="pa pb it lt b lu pj lx pk ma pl me pm mi pn mm pf pg ph pi bi translated">“联系人”页面:显示供用户填写的联系人表单</li></ul><p id="dd1e" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">在本帖中，我们将主要关注<strong class="lt iu"> </strong>“应用”页面，因为我们已经在前述<a class="ae ky" href="https://medium.com/codex/create-a-multi-page-app-with-the-new-streamlit-option-menu-component-3e3edaf7e7ad" rel="noopener">文章</a>中讨论了如何使用<code class="fe ms mt mu mv b">streamlit-option-menu</code>创建多页面应用。对于“应用”页面，我将详细解释代码，而对于其他页面，代码非常简单易懂。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi po"><img src="../Images/2db4060d720db3210b9ad3314457cc45.png" data-original-src="https://miro.medium.com/v2/resize:fit:788/format:webp/1*CVqemPFP0dAZkRm21orOIA.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure></div><div class="ab cl mz na hx nb" role="separator"><span class="nc bw bk nd ne nf"/><span class="nc bw bk nd ne nf"/><span class="nc bw bk nd ne"/></div><div class="im in io ip iq"><h1 id="c166" class="kz la it bd lb lc ng le lf lg nh li lj jz ni ka ll kc nj kd ln kf nk kg lp lq bi translated">在边栏中创建菜单</h1><p id="e892" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">首先，让我们使用<code class="fe ms mt mu mv b">streamlit-option-menu</code>创建一个菜单，并使用下面的代码将其添加到侧边栏。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oy mx l"/></div></figure></div><div class="ab cl mz na hx nb" role="separator"><span class="nc bw bk nd ne nf"/><span class="nc bw bk nd ne nf"/><span class="nc bw bk nd ne"/></div><div class="im in io ip iq"><h1 id="3d28" class="kz la it bd lb lc ng le lf lg nh li lj jz ni ka ll kc nj kd ln kf nk kg lp lq bi translated">创建“关于”页面</h1><p id="b2f4" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">接下来，让我们使用下面的代码创建“关于”页面:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oy mx l"/></div></figure></div><div class="ab cl mz na hx nb" role="separator"><span class="nc bw bk nd ne nf"/><span class="nc bw bk nd ne nf"/><span class="nc bw bk nd ne"/></div><div class="im in io ip iq"><h1 id="4e1c" class="kz la it bd lb lc ng le lf lg nh li lj jz ni ka ll kc nj kd ln kf nk kg lp lq bi translated">创建“演示”页面</h1><p id="1444" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">我们可以创建一个演示页面，显示一个简短的视频剪辑来演示应用程序。为此，您可以录制一个关于该应用程序的短视频，并将其保存为. mp4 媒体文件，路径与 python 文件相同。</p><p id="3319" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">在下面的代码中，第 6–7 行将视频文件读入 Streamlit，第 8 行使用<code class="fe ms mt mu mv b">st.video()</code>显示视频播放器。从 Streamlit 的<a class="ae ky" href="https://docs.streamlit.io/library/api-reference/media/st.video" rel="noopener ugc nofollow" target="_blank">文档</a>来看，看起来你也可以通过直接指向 YouTube URLs 来显示 YouTube 视频，这非常好！</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oy mx l"/></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pp"><img src="../Images/33a9bc117fdd2bbee896f85b0fb75d00.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Y-NJUl2T-OgXPE-DnvxcIQ.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure></div><div class="ab cl mz na hx nb" role="separator"><span class="nc bw bk nd ne nf"/><span class="nc bw bk nd ne nf"/><span class="nc bw bk nd ne"/></div><div class="im in io ip iq"><h1 id="ebd3" class="kz la it bd lb lc ng le lf lg nh li lj jz ni ka ll kc nj kd ln kf nk kg lp lq bi translated">创建“应用程序”页面:</h1><h2 id="f045" class="od la it bd lb oe of dn lf og oh dp lj ma oi oj ll me ok ol ln mi om on lp oo bi translated">步骤 1:添加文件上传程序</h2><p id="d710" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">这是酒吧比赛生成器的应用程序页面，也是应用程序中最重要的页面。我们将在这里花大量的时间解释这个页面是如何创建的。</p><p id="0c97" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">我们首先创建一个文件上传程序，允许用户上传一个 csv 文件，然后使用<code class="fe ms mt mu mv b">st.aggrid()</code>将数据显示为一个格式良好的表格。你需要记住的一件重要的事情是，在我们使用<code class="fe ms mt mu mv b">st.file_uploader()</code>创建一个文件上传程序(第 8 行)之后，我们需要将剩余的代码(第 10–21 行)放在<code class="fe ms mt mu mv b">if uploaded_file is not None:</code>语句中。使用此语句可以确保当 csv 文件尚未上传时，应用程序不会因为找不到任何要导入和显示的文件而抛出任何错误消息。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oy mx l"/></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pq"><img src="../Images/54078f1f0ae140959d1982f641ed8dde.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zyYYxkHwoRXqpTatWVTymA.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><h2 id="645f" class="od la it bd lb oe of dn lf og oh dp lj ma oi oj ll me ok ol ln mi om on lp oo bi translated">第二步:使用<code class="fe ms mt mu mv b">Raceplotly</code>创建条形图比赛动画</h2><p id="9eb3" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">在用户上传数据后，我们希望将该数据传递给幕后的 dataframe，并使用<code class="fe ms mt mu mv b">raceplotly</code>生成 bar race 图。如果没有<code class="fe ms mt mu mv b">raceplotly</code>，可以通过运行下面的命令行来安装:</p><pre class="kj kk kl km gt op mv oq or aw os bi"><span id="5c90" class="od la it mv b gy ot ou l ov ow">pip install raceplotly</span></pre><p id="2a39" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">要使用<code class="fe ms mt mu mv b">raceplotly</code>创建一个酒吧比赛图，您只需要两行带有几个参数的代码。下面是一个使用我们之前上传的样本数据创建条形图比赛动画的例子。</p><pre class="kj kk kl km gt op mv oq or aw os bi"><span id="7fa0" class="od la it mv b gy ot ou l ov ow">raceplot = barplot(df,  item_column='Country Name', value_column='GDP', time_column='Year')<br/><br/>raceplot.plot(item_label = 'Top 10 Countries', value_label = 'GDP ($)', frame_duration = 800)</span></pre><p id="b956" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">这里最重要和必需的参数是:</p><ul class=""><li id="1c52" class="pa pb it lt b lu mn lx mo ma pc me pd mi pe mm pf pg ph pi bi translated"><code class="fe ms mt mu mv b">item_column</code>:表示要排名的项目/栏的列名(如国家、团队、公司等)。)</li><li id="12a7" class="pa pb it lt b lu pj lx pk ma pl me pm mi pn mm pf pg ph pi bi translated"><code class="fe ms mt mu mv b">value_column</code>:表示用于排名的数值/指标的列名(如国内生产总值、人口、分数等)。)</li><li id="807c" class="pa pb it lt b lu pj lx pk ma pl me pm mi pn mm pf pg ph pi bi translated"><code class="fe ms mt mu mv b">time_column</code>:表示时间变量的列名(如年、月等)。).</li></ul><p id="cc70" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">其余的论点(如<code class="fe ms mt mu mv b"> item_label</code>、<code class="fe ms mt mu mv b">value_label</code>等)。)只是自定义和微调剧情的方法。如果你想了解更多关于这些参数的信息，你可以在这里阅读官方<code class="fe ms mt mu mv b">raceplotly</code>文档<a class="ae ky" href="https://pypi.org/project/raceplotly/" rel="noopener ugc nofollow" target="_blank">。</a></p><h2 id="4f8e" class="od la it bd lb oe of dn lf og oh dp lj ma oi oj ll me ok ol ln mi om on lp oo bi translated">步骤 3:创建输入部件来接收用户输入</h2><p id="9894" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">上面两行代码的问题是，当用户上传他们自己的数据时，数据很可能具有与上面的例子不同的列名。因此，除非用户明确告诉我们，否则我们不知道应该为<code class="fe ms mt mu mv b">item_column</code>、<code class="fe ms mt mu mv b">value_column</code>或<code class="fe ms mt mu mv b">time_column</code>使用哪个列名。</p><p id="17e0" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">因此，我们需要在应用程序中创建一些用户输入小部件，以接受用户对这些参数的输入。我们还可以添加一些小部件，允许用户对情节进行各种定制，以增强应用程序的用户体验。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pr"><img src="../Images/e2492979b9da9ca41ad295c92c58c873.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*oZvawYpXlGl7SZyoktTZhg.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><p id="fb89" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">如上图所示，我们将创建 12 个输入参数，排列成 4 行 3 列。前三个参数是<strong class="lt iu">必需的</strong>字段，而其余的是可选的。让我们用下面的代码来看看如何做到这一点。确保在<code class="fe ms mt mu mv b">if uploaded_file is not None:</code>语句中插入的代码具有正确的缩进。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oy mx l"/></div></figure><p id="548b" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">让我们更详细地看看上面的代码:</p><p id="31cc" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">第 3–5 行:创建一个包含用户上传数据中所有列名的列表。我还在列表的开头加了一个“-”。这是我用来在窗口小部件中允许默认选择为'-'的一个小技巧，这样对用户来说更明确，他们必须从列表中选择一些东西。</p><p id="02ac" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">第 7–15 行:创建前 3 个参数，并使用<code class="fe ms mt mu mv b">st.columns()</code>并排显示它们。注意，我们还可以通过在<code class="fe ms mt mu mv b">st.selectbox()</code>小部件中包含<code class="fe ms mt mu mv b">help=</code>来在小部件上显示一个小的帮助图标。</p><p id="e3c5" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">第 17–50 行:创建其余的参数。这些参数是可选的，允许用户定制或微调图，例如改变条的方向、调整动画速度、改变图的大小等。</p><p id="2683" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">第 6 行和第 52 行:我们使用<code class="fe ms mt mu mv b">st.form()</code>和<code class="fe ms mt mu mv b">st.form_submit_button()</code>来批量输入所有的小部件，这样用户就可以随心所欲地与小部件进行交互，而不会在每次更改小部件时触发应用程序的重新运行。</p><h2 id="8222" class="od la it bd lb oe of dn lf og oh dp lj ma oi oj ll me ok ol ln mi om on lp oo bi translated">步骤 4:生成条形图比赛动画</h2><p id="29c0" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">在用户提交他们的输入部件选择后，我们将把他们的输入传递给<code class="fe ms mt mu mv b">raceplotly</code>并生成条形图比赛动画。但在此之前，我们需要首先关注两件重要的事情:</p><ol class=""><li id="cebf" class="pa pb it lt b lu mn lx mo ma pc me pd mi pe mm ps pg ph pi bi translated">我们希望确保用户为前三个参数提供输入，因为它们是生成绘图所需的字段。如果用户没有完成必填字段，我们可以显示一条警告消息。</li><li id="08b8" class="pa pb it lt b lu pj lx pk ma pl me pm mi pn mm ps pg ph pi bi translated"><code class="fe ms mt mu mv b">value_column</code>必须是数字，<code class="fe ms mt mu mv b">time_column</code>必须是日期类型。用户上传的数据可能并不总是符合要求，因此我们需要确保在将 dataframe 传递给<code class="fe ms mt mu mv b">raceplotly</code>之前，这两列被转换为正确的数据类型。</li></ol><p id="6d2a" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">在下面的代码中，第 3–8 行处理了这两点。第 10–19 行接受用户输入并将参数传递给<code class="fe ms mt mu mv b">barplot()</code>函数，生成一个动画条形图比赛图，并在应用程序中显示。请确保您在<code class="fe ms mt mu mv b">if uploaded_file is not None:</code>语句中插入的代码块具有正确的缩进。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oy mx l"/></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pt"><img src="../Images/05db6d94b4ce2d2f516ee72c48b809eb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*yFoplzTjZAQgldyTrCl7zw.gif"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者 Gif</p></figure><p id="eff0" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">你也可以给这个应用程序添加更多的功能，比如让用户能够将条形图比赛动画导出到 HTML，并与他人分享。我已经在另一篇关于如何在 Streamlit 中创建一个“导出”按钮的文章中介绍了这种技术，该按钮允许用户将<code class="fe ms mt mu mv b">plotly</code>图表导出到 HTML。如果你有兴趣，你可以在这里阅读文章。</p><div class="nl nm gp gr nn no"><a href="https://medium.com/codex/create-a-simple-project-planning-app-using-streamlit-and-gantt-chart-6c6adf8f46dd" rel="noopener follow" target="_blank"><div class="np ab fo"><div class="nq ab nr cl cj ns"><h2 class="bd iu gy z fp nt fr fs nu fu fw is bi translated">使用 Streamlit 和甘特图创建简单的项目规划应用程序</h2><div class="nv l"><h3 class="bd b gy z fp nt fr fs nu fu fw dk translated">了解 Streamlit 的文件上传/下载、可编辑表格、交互式图表等特性和功能</h3></div><div class="nw l"><p class="bd b dl z fp nt fr fs nu fu fw dk translated">medium.com</p></div></div><div class="nx l"><div class="pu l nz oa ob nx oc ks no"/></div></div></a></div></div><div class="ab cl mz na hx nb" role="separator"><span class="nc bw bk nd ne nf"/><span class="nc bw bk nd ne nf"/><span class="nc bw bk nd ne"/></div><div class="im in io ip iq"><h1 id="f55e" class="kz la it bd lb lc ng le lf lg nh li lj jz ni ka ll kc nj kd ln kf nk kg lp lq bi translated">创建“联系人”页面</h1><p id="0d69" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">最后，让我们使用下面的代码创建一个联系页面:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oy mx l"/></div></figure></div><div class="ab cl mz na hx nb" role="separator"><span class="nc bw bk nd ne nf"/><span class="nc bw bk nd ne nf"/><span class="nc bw bk nd ne"/></div><div class="im in io ip iq"><p id="63c7" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">万岁！我们已经使用 Streamlit 和<code class="fe ms mt mu mv b">raceplotly</code>创建了一个快速简单的条形图比赛生成器！我总是喜欢动手项目，因为对我个人来说，这是学习新东西和提高编程技能的最有效方式。</p><p id="f339" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">感谢阅读。我希望你喜欢这篇文章，并准备将你所学到的应用到你的下一个新的令人兴奋的项目中！</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pv"><img src="../Images/c8b8ffb61d4a11ab4f79765b5eecf2a9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Jk1JbxAvxuAsxZRG8FHTJQ.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure></div><div class="ab cl mz na hx nb" role="separator"><span class="nc bw bk nd ne nf"/><span class="nc bw bk nd ne nf"/><span class="nc bw bk nd ne"/></div><div class="im in io ip iq"><p id="887a" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">数据源:</p><p id="2bcc" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">应用程序演示中使用的数据集是从世界银行网站<a class="ae ky" href="https://data.worldbank.org/indicator/NY.GDP.MKTP.CD?name_desc=true" rel="noopener ugc nofollow" target="_blank">https://data.worldbank.org/indicator/NY.下载的开放数据集(无需许可)GDP.MKTP.CD？name_desc=true </a></p></div><div class="ab cl mz na hx nb" role="separator"><span class="nc bw bk nd ne nf"/><span class="nc bw bk nd ne nf"/><span class="nc bw bk nd ne"/></div><div class="im in io ip iq"><p id="1265" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">你可以通过这个<a class="ae ky" href="https://medium.com/@insightsbees/membership" rel="noopener">推荐链接</a>注册 Medium 会员(每月 5 美元)来获得我的作品和 Medium 的其他内容。通过这个链接注册，我将收到你的会员费的一部分，不需要你额外付费。谢谢大家！</p></div></div>    
</body>
</html>