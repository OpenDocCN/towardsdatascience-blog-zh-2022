<html>
<head>
<title>Time Series Forecasting with Holt’s Linear Trend Exponential Smoothing</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">霍尔特线性趋势指数平滑的时间序列预测</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/forecasting-with-holts-linear-trend-exponential-smoothing-af2aa4590c18#2022-12-13">https://towardsdatascience.com/forecasting-with-holts-linear-trend-exponential-smoothing-af2aa4590c18#2022-12-13</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="5e81" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">指数平滑模型中的趋势补偿</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/5d39ae809428d4d841b502be331e55dd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*RicRHqEuRuZyfuoq"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated"><a class="ae ky" href="https://unsplash.com/@jeremythomasphoto?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">杰瑞米·托马斯</a>在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍照</p></figure><h1 id="95e6" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">背景</h1><p id="8cbd" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">在我的<a class="ae ky" href="https://medium.com/towards-data-science/forecasting-with-simple-exponential-smoothing-dd8f8470a14c" rel="noopener">上一篇</a>文章中，我们介绍了<a class="ae ky" href="https://en.wikipedia.org/wiki/Exponential_smoothing" rel="noopener ugc nofollow" target="_blank"> <strong class="lt iu">指数平滑</strong> </a> <strong class="lt iu"> </strong>的思想来构建预测模型。指数平滑法的要点是对最近的观测值给予更多的权重，而对更多的历史观测值给予更少的权重。</p><p id="2ca3" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">我们介绍的第一个模型是<em class="ms">简单</em>指数平滑。“简单”部分是指模型不考虑<a class="ae ky" href="https://medium.com/towards-data-science/time-series-stationarity-simply-explained-125269968154" rel="noopener">趋势</a>或<a class="ae ky" href="https://medium.com/towards-data-science/seasonality-of-time-series-5b45b4809acd" rel="noopener">季节性</a>，只预测<em class="ms">水平</em>。这导致这种特殊的模型经常对大多数时间序列提供不充分的预测。因此，我们需要从这个简单的方法进一步迭代。</p><p id="8714" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">在来了<a class="ae ky" href="https://en.wikipedia.org/wiki/Exponential_smoothing#Double_exponential_smoothing_(Holt_linear)" rel="noopener ugc nofollow" target="_blank"> <strong class="lt iu">霍尔特的线性趋势法</strong> </a>(也称为双指数平滑)，顾名思义，就是在简单的指数平滑模型中加入一个(线性)趋势成分。在这篇文章中，我们将介绍霍尔特线性趋势模型的理论和实际应用。</p><h1 id="227b" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">霍尔特的线性趋势模型理论</h1><h2 id="7f63" class="mt la it bd lb mu mv dn lf mw mx dp lj ma my mz ll me na nb ln mi nc nd lp ne bi translated">简单指数平滑</h2><p id="65e8" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">让我们首先回顾一下简单的指数平滑方程:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nf"><img src="../Images/cfe7a3d0bd501e147e2aab713087304f.png" data-original-src="https://miro.medium.com/v2/resize:fit:624/format:webp/1*WVtlQyr1J56LuR-A3O0GTg.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者在 LaTeX 中生成的方程。</p></figure><p id="e0f0" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">这里<strong class="lt iu"><em class="ms">【ŷ_{t+1}】</em></strong>是我们预测的时间步长，<strong class="lt iu"> <em class="ms"> y_t </em> </strong>是时间序列的最近观测值，<strong class="lt iu"> <em class="ms"> ŷ_{t-1} </em> </strong>是之前的预测，<strong class="lt iu"> <em class="ms"> α </em> </strong>是取值为<strong class="lt iu"> <em class="ms"> 0 ≤ α ≤ 1 的平滑因子。</em> </strong>我们看到，预测仅仅是对以前观测值的加权平均，这就是指数平滑的本质。</p><p id="0621" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">上述等式可以改写为分量形式:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ng"><img src="../Images/ac0627b8d4405ce00c380939807bb754.png" data-original-src="https://miro.medium.com/v2/resize:fit:924/format:webp/1*a6D07sO_S5WyfeytzM-lPw.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者在 LaTeX 中生成的方程。</p></figure><p id="d8af" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">其中<strong class="lt iu"> <em class="ms"> h </em> </strong>是我们预测的未来时间步，我们让<strong class="lt iu"><em class="ms">l _ t</em></strong><em class="ms">=</em><strong class="lt iu"><em class="ms">【ŷ_{t+1}】</em></strong>来明确地证明这是水平分量。如果你想了解更多关于简单指数平滑的知识，请参考我以前的文章:</p><div class="nh ni gp gr nj nk"><a rel="noopener follow" target="_blank" href="/forecasting-with-simple-exponential-smoothing-dd8f8470a14c"><div class="nl ab fo"><div class="nm ab nn cl cj no"><h2 class="bd iu gy z fp np fr fs nq fu fw is bi translated">简单指数平滑预测</h2><div class="nr l"><h3 class="bd b gy z fp np fr fs nq fu fw dk translated">指数平滑简介以及在 Python 中实现指数平滑进行预测</h3></div><div class="ns l"><p class="bd b dl z fp np fr fs nq fu fw dk translated">towardsdatascience.com</p></div></div><div class="nt l"><div class="nu l nv nw nx nt ny ks nk"/></div></div></a></div><h2 id="58cc" class="mt la it bd lb mu mv dn lf mw mx dp lj ma my mz ll me na nb ln mi nc nd lp ne bi translated">添加趋势</h2><p id="aa51" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">如前所述，该模型没有趋势或季节成分，并导致<a class="ae ky" href="https://medium.com/towards-data-science/basic-forecasting-techniques-ef4295248e46" rel="noopener">持平预测</a>(所有预测将相同并等于最近观察到的值)。因此，1957 年<a class="ae ky" href="https://en.wikipedia.org/wiki/Charles_C._Holt" rel="noopener ugc nofollow" target="_blank"> Charles Holt </a>扩展了这个模型，加入了一个趋势成分，<strong class="lt iu"> <em class="ms"> b_t </em> </strong>:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nz"><img src="../Images/5733c95a9bd1465fe401bc77edb8f253.png" data-original-src="https://miro.medium.com/v2/resize:fit:1144/format:webp/1*1_BcNXLhz79nFCbRgz2euA.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者在 LaTeX 中生成的方程。</p></figure><p id="0bc4" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">其中<strong class="lt iu"> <em class="ms"> b_t </em> </strong>为预测趋势分量，<em class="ms"/><strong class="lt iu"><em class="ms">b _ { t-1 }</em></strong>为之前的预测趋势，<strong class="lt iu"> <em class="ms"> β </em> </strong>为可取值为<strong class="lt iu"> <em class="ms"> 0 ≤ β ≤ 1 的趋势平滑因子。</em> </strong></p><p id="5c45" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">趋势方程是根据水平分量的逐级变化计算的。此外，从总体方程来看，趋势分量现在正乘以时间步长<strong class="lt iu"> <em class="ms"> h </em> </strong>，因此预测不再是平坦的，而是<strong class="lt iu"><em class="ms"/></strong>h 的线性函数。因此，模型的名称为<em class="ms">霍尔特线性趋势法。</em></p><p id="625b" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">对于这个模型，我们需要为趋势分量设置一个初始值，常见的选择是:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi oa"><img src="../Images/4ab8472304528f4287263b0b3315f054.png" data-original-src="https://miro.medium.com/v2/resize:fit:330/format:webp/1*fYmDsAo4BpIt7kCIngJFUg.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者在 LaTeX 中生成的方程。</p></figure><p id="b58a" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">其中<strong class="lt iu"> <em class="ms"> t </em> </strong>是时间序列中的某个任意时间步长。这基本上只是一个<a class="ae ky" href="https://medium.com/towards-data-science/basic-forecasting-techniques-ef4295248e46" rel="noopener">平均预测模型</a>。</p><h2 id="ec90" class="mt la it bd lb mu mv dn lf mw mx dp lj ma my mz ll me na nb ln mi nc nd lp ne bi translated">抑制</h2><p id="8e0b" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">目前这种公式的一个问题是，预测在未来会任意增加或减少。事实上，没有什么东西会无限增长或衰减。因此，通常会添加一个抑制性术语<strong class="lt iu"><em class="ms">【ϕ</em></strong>】,以缩减长期预测:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ob"><img src="../Images/77d9aa49987115748659dcb7e6c540f2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1204/format:webp/1*PC7Yyz6SbbHvg0m_H8ezCQ.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者在 LaTeX 中生成的方程。</p></figure><p id="9ef8" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">其中<strong class="lt iu"> <em class="ms"> ϕ </em> </strong>的值可以是<strong class="lt iu"> <em class="ms"> 0 &lt; ϕ &lt; 1 </em> </strong>。不能是<strong class="lt iu"> <em class="ms"> 0 </em> </strong>或<strong class="lt iu"> <em class="ms"> 1 </em> </strong>的原因是为了确保确实发生一些阻尼。如果<strong class="lt iu"> <em class="ms"> ϕ=1 </em> </strong>那么这个模型就是普通的霍尔特线性趋势法。</p><p id="61bc" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">现在让我们用 Python 实现这个新的指数平滑模型！</p><h1 id="390c" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">Python 实现</h1><p id="bf58" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">下面是在一个非常简单的数据集上使用<a class="ae ky" href="https://www.statsmodels.org/dev/generated/statsmodels.tsa.holtwinters.Holt.html" rel="noopener ugc nofollow" target="_blank">stat models</a>包实现 Holt 线性趋势方法的代码片段:</p><blockquote class="oc od oe"><p id="28d1" class="lr ls ms lt b lu mn ju lw lx mo jx lz of mp mc md og mq mg mh oh mr mk ml mm im bi translated">这些数据是美国航空公司的乘客数据集，来自拥有 CC0 执照的 Kaggle。</p></blockquote><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oi oj l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者 GitHub 要点。</p></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ok"><img src="../Images/f048c5aa3210c95fcaee487167b01559.png" data-original-src="https://miro.medium.com/v2/resize:fit:1300/format:webp/1*E4ijcemcC-vyfWHD56P7iQ.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者用 Python 生成的图</p></figure><p id="fb70" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">我们观察到霍尔特的方法捕捉到了趋势，而简单的指数平滑模型只是一个像我们预期的平面预测。然而，房间里仍然有一头大象。我们的时间序列具有相当高且明显的季节性，这是霍尔特的模型所没有捕捉到的。我将在下一篇文章中讨论如何处理季节性，但是现在我们可以得出结论，霍尔特的方法只适用于没有季节性的数据。</p><p id="035b" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">通过对拟合的模型对象调用以下方法，可以进一步诊断拟合的霍尔特模型:</p><pre class="kj kk kl km gt ol om on bn oo op bi"><span id="d4ff" class="oq la it om b be or os l ot ou">model_holt.summary()</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ov"><img src="../Images/715aac5ee78f01801085dbaa0ca33045.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*OtpudaW22WW826cyILE5xA.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者用 Python 生成的图像。</p></figure><p id="789c" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">这里的<code class="fe ow ox oy om b">smoothing_level</code>是指平滑电平参数<strong class="lt iu"> <em class="ms"> α </em> </strong>，非常大，表示电平变化非常频繁。然而，<code class="fe ow ox oy om b">smoothing_trend</code>指的是平滑趋势参数<strong class="lt iu"><em class="ms">【β</em></strong>，非常低，意味着趋势几乎没有太大变化。最后，<code class="fe ow ox oy om b">damping_trend</code>，也就是<strong class="lt iu"><em class="ms">【ϕ】</em></strong>，<strong class="lt iu"> <em class="ms"> </em> </strong>很大，说明我们需要预测未来很长一段时间，才能观察到上升趋势的衰减。</p><h1 id="c3dd" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">总结和进一步的思考</h1><p id="b97b" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">在本文中，我们展示了 Holt 的线性趋势方法在将趋势合并到指数平滑中的数学原理，以及如何用 Python 实现该模型。当数据有趋势但没有季节性成分时，Holt 的方法产生最好的预测。在以后的文章中，我们将回顾一下<a class="ae ky" href="https://en.wikipedia.org/wiki/Exponential_smoothing#Triple_exponential_smoothing_(Holt_Winters)" rel="noopener ugc nofollow" target="_blank"> Holt Winters </a>模型，该模型增加了季节性。</p><p id="8577" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">本文中使用的完整代码可以在我的 GitHub 中找到:</p><div class="nh ni gp gr nj nk"><a href="https://github.com/egorhowell/Medium-Articles/blob/main/Time%20Series/Exponential%20Smoothing/holts_forecasting.py" rel="noopener  ugc nofollow" target="_blank"><div class="nl ab fo"><div class="nm ab nn cl cj no"><h2 class="bd iu gy z fp np fr fs nq fu fw is bi translated">Medium-Articles/holts _ forecasting . py at main egorhowell/Medium-Articles</h2><div class="nr l"><h3 class="bd b gy z fp np fr fs nq fu fw dk translated">此时您不能执行该操作。您已使用另一个标签页或窗口登录。您已在另一个选项卡中注销，或者…</h3></div><div class="ns l"><p class="bd b dl z fp np fr fs nq fu fw dk translated">github.com</p></div></div><div class="nt l"><div class="oz l nv nw nx nt ny ks nk"/></div></div></a></div><h1 id="bdd8" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">参考资料和进一步阅读</h1><ul class=""><li id="8f28" class="pa pb it lt b lu lv lx ly ma pc me pd mi pe mm pf pg ph pi bi translated"><em class="ms">预测:原理与实践:</em>【https://otexts.com/fpp2/】T4</li></ul><h1 id="2651" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">和我联系！</h1><ul class=""><li id="ca40" class="pa pb it lt b lu lv lx ly ma pc me pd mi pe mm pf pg ph pi bi translated">要在媒体上阅读无限的故事，请务必在此注册！  <em class="ms"> </em>💜</li><li id="9786" class="pa pb it lt b lu pj lx pk ma pl me pm mi pn mm pf pg ph pi bi translated"><a class="ae ky" href="/subscribe/@egorhowell" rel="noopener ugc nofollow" target="_blank"> <em class="ms">当我在这里发布注册邮件通知时获得更新！</em> </a> <em class="ms"> </em>😀</li><li id="b8dc" class="pa pb it lt b lu pj lx pk ma pl me pm mi pn mm pf pg ph pi bi translated"><a class="ae ky" href="https://www.linkedin.com/in/egor-howell-092a721b3/" rel="noopener ugc nofollow" target="_blank"><em class="ms">LinkedIn</em></a><em class="ms"/>👔</li><li id="a7a0" class="pa pb it lt b lu pj lx pk ma pl me pm mi pn mm pf pg ph pi bi translated"><a class="ae ky" href="https://twitter.com/EgorHowell" rel="noopener ugc nofollow" target="_blank"> <em class="ms">碎碎念</em> </a> <em class="ms"> </em> 🖊</li><li id="fb18" class="pa pb it lt b lu pj lx pk ma pl me pm mi pn mm pf pg ph pi bi translated"><a class="ae ky" href="https://github.com/egorhowell" rel="noopener ugc nofollow" target="_blank"><em class="ms">github</em></a><em class="ms"/>🖥</li><li id="87b0" class="pa pb it lt b lu pj lx pk ma pl me pm mi pn mm pf pg ph pi bi translated"><a class="ae ky" href="https://www.kaggle.com/egorphysics" rel="noopener ugc nofollow" target="_blank"><em class="ms"/></a><em class="ms"/>🏅</li></ul><blockquote class="oc od oe"><p id="cc46" class="lr ls ms lt b lu mn ju lw lx mo jx lz of mp mc md og mq mg mh oh mr mk ml mm im bi translated">(所有表情符号由<a class="ae ky" href="https://openmoji.org/" rel="noopener ugc nofollow" target="_blank"> OpenMoji </a>设计——开源表情符号和图标项目。许可证:<a class="ae ky" href="https://creativecommons.org/licenses/by-sa/4.0/#" rel="noopener ugc nofollow" target="_blank"> CC BY-SA 4.0 </a></p></blockquote></div></div>    
</body>
</html>