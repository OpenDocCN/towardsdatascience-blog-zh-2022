<html>
<head>
<title>5 Methods for Filtering Strings with Python Pandas</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Python熊猫过滤字符串的5种方法</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/5-methods-for-filtering-strings-with-python-pandas-ebe4746dcc74#2022-08-10">https://towardsdatascience.com/5-methods-for-filtering-strings-with-python-pandas-ebe4746dcc74#2022-08-10</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="6e88" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">举例说明</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/adeb43cb7abb69caf1e1a4581409e9da.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*e1p6ZFThdgGka6KE6o8uOA.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">(照片由<a class="ae ky" href="https://unsplash.com/@nevenkrcmarek?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Neven Krcmarek </a>在<a class="ae ky" href="https://unsplash.com/s/photos/hand-writing?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄)</p></figure><p id="8c4b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们经常处理文本数据，这比数字数据需要更多的清理。为了从文本数据中提取有用的信息，我们通常需要执行几个预处理和过滤步骤。</p><p id="2a7b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Pandas库有许多函数和方法，使得处理文本数据变得容易和简单。在本文中，我们将学习5种不同的方法，可用于过滤文本数据(即字符串):</p><ol class=""><li id="7963" class="lv lw it lb b lc ld lf lg li lx lm ly lq lz lu ma mb mc md bi translated">包含一系列字符</li><li id="c1b6" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated">字符串的长度</li><li id="c7e1" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated">以特定的字符序列开始或结束</li><li id="5a5d" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated">数字或字母数字字符</li><li id="b82c" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated">特定字符序列出现的次数</li></ol></div><div class="ab cl mj mk hx ml" role="separator"><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo"/></div><div class="im in io ip iq"><p id="e67a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们从从csv文件创建数据帧开始。</p><pre class="kj kk kl km gt mq mr ms mt aw mu bi"><span id="58b5" class="mv mw it mr b gy mx my l mz na">import pandas as pd</span><span id="8b2c" class="mv mw it mr b gy nb my l mz na">df = pd.read_csv("example.csv")</span><span id="4c26" class="mv mw it mr b gy nb my l mz na">df</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nc"><img src="../Images/4c6d71829fcf2a2e70761548ee6f8303.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bMqnYNFn7q_6NaJ_N-vxGw.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">df(作者图片)</p></figure><p id="a383" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">数据帧包含6行和4列。我们将使用不同的方法来过滤该数据帧中的行。这些方法可以通过Pandas的str访问器获得。</p><p id="d9fc" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们要做的第一个过滤操作是检查字符串是否包含特定的单词或字符序列。我们可以使用contains方法来完成这项任务。以下代码行查找描述字段包含“二手车”的行。</p><pre class="kj kk kl km gt mq mr ms mt aw mu bi"><span id="f3e8" class="mv mw it mr b gy mx my l mz na">df[df["description"].str.contains("used car")]</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nc"><img src="../Images/5c38ed286edac2f9336f657b3fa429a7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*iZRr_HalqzPhIJTr9HuflQ.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">(图片由作者提供)</p></figure><p id="975c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">二手车实际上有另一行，但描述中不包含“二手车”表达式。为了找到这个数据框架中的所有二手车，我们可以分别查找单词“used”和“car”。</p><pre class="kj kk kl km gt mq mr ms mt aw mu bi"><span id="dfad" class="mv mw it mr b gy mx my l mz na">df[df["description"].str.contains("used") &amp;<br/>   df["description"].str.contains("car")]</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nc"><img src="../Images/a9671b92153ca7eb5342df8e7d3efb94.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-CGj2iqdRUtc-rP7kpYl9A.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">(图片由作者提供)</p></figure><p id="9883" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">最后一行包含“汽车”和“二手”，但不在一起。</p></div><div class="ab cl mj mk hx ml" role="separator"><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo"/></div><div class="im in io ip iq"><p id="a253" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们也可以根据字符串的长度进行过滤。假设我们只对长度超过15个字符的描述感兴趣。我们可以通过使用内置的len函数来执行此操作，如下所示:</p><pre class="kj kk kl km gt mq mr ms mt aw mu bi"><span id="f282" class="mv mw it mr b gy mx my l mz na">df[df["description"].apply(lambda x: len(x) &gt; 15)]</span></pre><p id="747a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们编写一个lambda表达式，其中包括用len函数检查长度，并将其应用于description列中的每一行。更实际、更有效的方法是通过str访问器使用len方法。</p><pre class="kj kk kl km gt mq mr ms mt aw mu bi"><span id="7176" class="mv mw it mr b gy mx my l mz na">df[df["description"].str.len() &gt; 15]</span></pre><p id="f528" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">输出将是相同的:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nc"><img src="../Images/ef53280a5bd704590c0723afdfa85b1e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*m2_NfJXbbVAZQP5G_hToKQ.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">(图片由作者提供)</p></figure></div><div class="ab cl mj mk hx ml" role="separator"><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo"/></div><div class="im in io ip iq"><p id="52e4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们可以分别使用startswith和endswith方法基于字符串的第一个或最后一个字母进行过滤。</p><pre class="kj kk kl km gt mq mr ms mt aw mu bi"><span id="9dde" class="mv mw it mr b gy mx my l mz na">df[df["lot"].str.startswith("A")]</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nc"><img src="../Images/626eed1b0898e509a44b11b61618eaa5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*SV-TH9lAjv5N0EmIdI1TqQ.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">(图片由作者提供)</p></figure><p id="4b31" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这些方法也能够检查前n个字符。例如，我们可以选择批次值以“A-0”开头的行:</p><pre class="kj kk kl km gt mq mr ms mt aw mu bi"><span id="eef2" class="mv mw it mr b gy mx my l mz na">df[df["lot"].str.startswith("A-0")]</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nc"><img src="../Images/d69c5c16136fa85e7f160d9de58d9e2b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2gnteEq70I6cKfoKEom74w.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">(图片由作者提供)</p></figure></div><div class="ab cl mj mk hx ml" role="separator"><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo"/></div><div class="im in io ip iq"><p id="4646" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Python有一些内置的字符串函数，可以用来过滤熊猫数据帧中的字符串值。例如，在price列中，有一些非数字字符，比如$和k。</p><pre class="kj kk kl km gt mq mr ms mt aw mu bi"><span id="2c45" class="mv mw it mr b gy mx my l mz na">df[df["price"].apply(lambda x: x.isnumeric()==True)]</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nc"><img src="../Images/6c2e936443a6e1f7dfaa7968ef0a857d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*nL5QPFuNz2rTf0KL_jIl_A.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">(图片由作者提供)</p></figure><p id="d528" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果我们正在寻找字母数字字符(即只有字母和数字)，我们可以使用isalphanum函数。</p></div><div class="ab cl mj mk hx ml" role="separator"><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo"/></div><div class="im in io ip iq"><p id="aad0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">count方法计算单个字符或一系列字符出现的次数。在某些情况下，这对于过滤可能会很方便。例如，您可能正在查找不多次包含一个字符序列的字符串。</p><p id="97b1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们可以将描述栏中的“已用”一词统计如下:</p><pre class="kj kk kl km gt mq mr ms mt aw mu bi"><span id="082d" class="mv mw it mr b gy mx my l mz na">df["description"].str.count("used")</span><span id="259d" class="mv mw it mr b gy nb my l mz na"><strong class="mr iu"># output</strong><br/>0    1<br/>1    0<br/>2    1<br/>3    1<br/>4    1<br/>5    0<br/>Name: description, dtype: int64</span></pre><p id="cbf4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果您想使用它进行过滤，只需将它与如下值进行比较:</p><pre class="kj kk kl km gt mq mr ms mt aw mu bi"><span id="adbe" class="mv mw it mr b gy mx my l mz na">df[df["description"].str.count("used") &lt; 1]</span></pre></div><div class="ab cl mj mk hx ml" role="separator"><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo"/></div><div class="im in io ip iq"><p id="e250" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们已经介绍了基于字符串值的熊猫数据帧的5种不同方式。我们倾向于更加重视数字数据，但是文本数据也同样重要，它承载了大量有价值的信息。因此，能够清理和预处理文本数据对于数据分析和建模至关重要。</p></div><div class="ab cl mj mk hx ml" role="separator"><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo"/></div><div class="im in io ip iq"><p id="d69a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><em class="nd">你可以成为</em> <a class="ae ky" href="https://sonery.medium.com/membership" rel="noopener"> <em class="nd">媒介会员</em> </a> <em class="nd">解锁我的全部写作权限，外加其余媒介。如果你已经是了，别忘了订阅</em><a class="ae ky" href="https://sonery.medium.com/subscribe" rel="noopener"><em class="nd"/></a><em class="nd">如果你想在我发表新文章时收到电子邮件。</em></p><p id="2e8d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">感谢您的阅读。如果您有任何反馈，请告诉我。</p></div></div>    
</body>
</html>