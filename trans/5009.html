<html>
<head>
<title>Command-Line Data Analytics Made Easy</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">命令行数据分析变得简单</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/command-line-data-analytics-b2ac88f912d1#2022-11-08">https://towardsdatascience.com/command-line-data-analytics-b2ac88f912d1#2022-11-08</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="3c07" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">使用Python支持的SQL</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/153b1d0fc8de48b61fdcdd7db34e69c4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WVsgLM-TtOABYMgYd1Lozw.jpeg"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">由<a class="ae kv" href="https://unsplash.com/@6heinz3r?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">加布里埃尔·海因策</a>在<a class="ae kv" href="https://unsplash.com/?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>拍摄的照片</p></figure><p id="711b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">当涉及到数据处理时，命令行非常强大。尽管如此，我们中的许多人并没有利用数据。我能想到一些原因:</p><ul class=""><li id="b691" class="ls lt iq ky b kz la lc ld lf lu lj lv ln lw lr lx ly lz ma bi translated">可读性差:重点是尽量减少您需要键入的内容，而不是一系列命令的可读性；</li><li id="e615" class="ls lt iq ky b kz mb lc mc lf md lj me ln mf lr lx ly lz ma bi translated">陡峭的学习曲线:许多命令，有许多选项；</li><li id="90a6" class="ls lt iq ky b kz mb lc mc lf md lj me ln mf lr lx ly lz ma bi translated">看起来过时了:这些工具中的一些是从70年代开始的，目标是分隔文本文件(而不是像JSON和YAML这样的现代格式)。</li></ul><p id="a119" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这些促使我编写一个命令行工具，它注重可读性、易学性和现代数据格式，同时利用命令行生态系统。最重要的是，它还利用了Python生态系统！遇见<a class="ae kv" href="https://github.com/dcmoura/spyql" rel="noopener ugc nofollow" target="_blank"> SPyQL —中间有Python的SQL</a>:</p><pre class="kg kh ki kj gt mg mh mi mj aw mk bi"><span id="2e59" class="ml mm iq mh b gy mn mo l mp mq"><strong class="mh ir">SELECT <br/>  </strong>date.fromtimestamp(purchase_ts) <strong class="mh ir">AS</strong> purchase_date,<br/>  sum_agg(price * quantity) <strong class="mh ir">AS</strong> total<br/><strong class="mh ir">FROM</strong> csv('<em class="mr">my_purchases.csv</em>')<br/><strong class="mh ir">WHERE</strong> department.upper() == 'IT' and purchase_ts is not Null<br/><strong class="mh ir">GROUP</strong> BY 1<br/><strong class="mh ir">ORDER</strong> BY 1<br/><strong class="mh ir">TO</strong> json</span></pre><h1 id="431c" class="ms mm iq bd mt mu mv mw mx my mz na nb jw nc jx nd jz ne ka nf kc ng kd nh ni bi translated">SPyQL在行动</h1><p id="db2b" class="pw-post-body-paragraph kw kx iq ky b kz nj jr lb lc nk ju le lf nl lh li lj nm ll lm ln nn lp lq lr ij bi translated">我认为了解SPyQL并熟悉命令行的最佳方式是打开终端并解决问题。在这种情况下，我们将尝试了解手机信号塔的地理分布。开始吧！</p><h2 id="05be" class="ml mm iq bd mt no np dn mx nq nr dp nb lf ns nt nd lj nu nv nf ln nw nx nh ny bi translated">设置</h2><p id="2c16" class="pw-post-body-paragraph kw kx iq ky b kz nj jr lb lc nk ju le lf nl lh li lj nm ll lm ln nn lp lq lr ij bi translated">让我们从安装SPyQL开始:</p><pre class="kg kh ki kj gt mg mh mi mj aw mk bi"><span id="fc5d" class="ml mm iq mh b gy mn mo l mp mq">$ pip3 install -U spyql</span></pre><p id="71fd" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">并检查其版本:</p><pre class="kg kh ki kj gt mg mh mi mj aw mk bi"><span id="4686" class="ml mm iq mh b gy mn mo l mp mq">$ spyql --version<br/>spyql, version 0.8.0</span></pre><p id="a486" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">让我们也安装<a class="ae kv" href="https://github.com/dcmoura/matplotcli" rel="noopener ugc nofollow" target="_blank"> MatplotCLI </a>，这是一个利用<a class="ae kv" href="https://github.com/matplotlib/matplotlib" rel="noopener ugc nofollow" target="_blank"> Matplotlib </a>从命令行创建绘图的实用程序:</p><pre class="kg kh ki kj gt mg mh mi mj aw mk bi"><span id="691f" class="ml mm iq mh b gy mn mo l mp mq">$ pip3 install -U matplotcli</span></pre><p id="16c5" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">最后，我们将下载一些示例数据(您也可以将URL复制粘贴到您的浏览器，并从那里下载文件):</p><pre class="kg kh ki kj gt mg mh mi mj aw mk bi"><span id="dc20" class="ml mm iq mh b gy mn mo l mp mq">$ wget <a class="ae kv" href="https://raw.githubusercontent.com/dcmoura/blogposts/master/spyql_cell_towers/sample.csv" rel="noopener ugc nofollow" target="_blank">https://raw.githubusercontent.com/dcmoura/blogposts/master/spyql_cell_towers/sample.csv</a></span></pre><p id="80f7" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">该CSV文件包含2022年9月10日添加到<a class="ae kv" href="https://www.opencellid.org/" rel="noopener ugc nofollow" target="_blank"> OpenCellid数据库</a>的手机信号塔数据。(<a class="ae kv" href="https://www.opencellid.org/" rel="noopener ugc nofollow" target="_blank"> OpenCellid </a>项目的<code class="fe nz oa ob mh b">OCID-diff-cell-export-2022–09–10-T000000.csv</code>文件，根据<a class="ae kv" href="https://creativecommons.org/licenses/by-sa/4.0/" rel="noopener ugc nofollow" target="_blank">知识共享署名-类似共享4.0国际许可</a>未经修改进行再分发)。</p><h2 id="896e" class="ml mm iq bd mt no np dn mx nq nr dp nb lf ns nt nd lj nu nv nf ln nw nx nh ny bi translated">检查数据</h2><p id="ddda" class="pw-post-body-paragraph kw kx iq ky b kz nj jr lb lc nk ju le lf nl lh li lj nm ll lm ln nn lp lq lr ij bi translated">让我们通过获取文件的前3行来查看数据:</p><pre class="kg kh ki kj gt mg mh mi mj aw mk bi"><span id="091e" class="ml mm iq mh b gy mn mo l mp mq">$ head -3 <em class="mr">sample.csv</em></span><span id="6544" class="ml mm iq mh b gy oc mo l mp mq">radio,mcc,net,area,cell,unit,lon,lat,range,samples,changeable,created,updated,averageSignal<br/>GSM,262,2,852,2521,0,10.948628,50.170324,15762,200,1,1294561074,1662692508,0<br/>GSM,262,2,852,2501,0,10.940241,50.174076,10591,200,1,1294561074,1662692508,0</span></pre><p id="9c73" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">您可以用SPyQL做同样的操作:</p><pre class="kg kh ki kj gt mg mh mi mj aw mk bi"><span id="176f" class="ml mm iq mh b gy mn mo l mp mq">$ spyql "<strong class="mh ir">SELECT</strong> * <strong class="mh ir">FROM</strong> csv <strong class="mh ir">LIMIT</strong> 2" &lt; <em class="mr">sample.csv</em></span></pre><p id="bd43" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">或者</p><pre class="kg kh ki kj gt mg mh mi mj aw mk bi"><span id="542a" class="ml mm iq mh b gy mn mo l mp mq">$ spyql "<strong class="mh ir">SELECT</strong> * <strong class="mh ir">FROM</strong> csv('<em class="mr">sample.csv</em>') <strong class="mh ir">LIMIT</strong> 2"</span></pre><p id="9701" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">请注意，我们告诉获取2行数据，而不是3行文件(其中第一行是标题)。SPyQL的一个优点是我们可以很容易地改变输出格式。让我们将输出更改为JSON，并查看第一条记录:</p><pre class="kg kh ki kj gt mg mh mi mj aw mk bi"><span id="8e67" class="ml mm iq mh b gy mn mo l mp mq">$ spyql "<strong class="mh ir">SELECT</strong> * <strong class="mh ir">FROM</strong> csv('<em class="mr">sample.csv</em>') <strong class="mh ir">LIMIT</strong> 1 <strong class="mh ir">TO</strong> json(indent=2)"</span><span id="3aab" class="ml mm iq mh b gy oc mo l mp mq">{<br/>  "radio": "GSM",<br/>  "mcc": 262,<br/>  "net": 2,<br/>  "area": 852,<br/>  "cell": 2521,<br/>  "unit": 0,<br/>  "lon": 10.948628,<br/>  "lat": 50.170324,<br/>  "range": 15762,<br/>  "samples": 200,<br/>  "changeable": 1,<br/>  "created": 1294561074,<br/>  "updated": 1662692508,<br/>  "averageSignal": 0<br/>}</span></pre><h2 id="7e18" class="ml mm iq bd mt no np dn mx nq nr dp nb lf ns nt nd lj nu nv nf ln nw nx nh ny bi translated">查询数据</h2><p id="9326" class="pw-post-body-paragraph kw kx iq ky b kz nj jr lb lc nk ju le lf nl lh li lj nm ll lm ln nn lp lq lr ij bi translated">让我们先数一数我们有多少记录:</p><pre class="kg kh ki kj gt mg mh mi mj aw mk bi"><span id="1256" class="ml mm iq mh b gy mn mo l mp mq">$ spyql "<strong class="mh ir">SELECT</strong> count_agg(*) <strong class="mh ir">AS</strong> n <strong class="mh ir">FROM</strong> csv('<em class="mr">sample.csv</em>')"</span><span id="f40e" class="ml mm iq mh b gy oc mo l mp mq">n<br/>45745</span></pre><p id="e9e4" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">注意，聚合函数有后缀<code class="fe nz oa ob mh b">_agg</code>，以避免与Python的函数冲突，如<code class="fe nz oa ob mh b">min</code>、<code class="fe nz oa ob mh b">max</code>和<code class="fe nz oa ob mh b">sum</code>。</p><p id="cb02" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在，让我们按类型数一数我们有多少个手机信号塔:</p><pre class="kg kh ki kj gt mg mh mi mj aw mk bi"><span id="6f50" class="ml mm iq mh b gy mn mo l mp mq">$ spyql "<strong class="mh ir">SELECT</strong> radio, count_agg(*) <strong class="mh ir">AS</strong> n <strong class="mh ir">FROM</strong> csv('<em class="mr">sample.csv</em>') <strong class="mh ir">GROUP BY</strong> 1 <strong class="mh ir">ORDER BY</strong> 2 DESC <strong class="mh ir">TO</strong> pretty"</span><span id="113d" class="ml mm iq mh b gy oc mo l mp mq">radio        n<br/>-------  -----<br/>GSM      31549<br/>LTE      12996<br/>UMTS      1182<br/>CDMA        16<br/>NR           2</span></pre><p id="627b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">注意漂亮的打印输出。我们可以通过将输出格式设置为JSON并将结果传送到<a class="ae kv" href="https://github.com/dcmoura/matplotcli" rel="noopener ugc nofollow" target="_blank"> MatplotCLI </a>来绘制上述结果:</p><pre class="kg kh ki kj gt mg mh mi mj aw mk bi"><span id="081e" class="ml mm iq mh b gy mn mo l mp mq">$ spyql "<strong class="mh ir">SELECT</strong> radio, count_agg(*) <strong class="mh ir">AS</strong> n <strong class="mh ir">FROM</strong> csv('<em class="mr">sample.csv</em>') <strong class="mh ir">GROUP BY</strong> 1 <strong class="mh ir">ORDER BY</strong> 2 DESC <strong class="mh ir">TO</strong> json" | plt "<strong class="mh ir">bar</strong>(radio, n)"</span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi od"><img src="../Images/b7325c5116f53af3c9f58f04f8d5dcb5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_bVbOK7aqhyWPsV11vnb8A.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">由MatplotCLI使用SPyQL查询的输出创建的Matplolib图</p></figure><p id="8ade" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">有多简单？:-)</p><h2 id="b0c5" class="ml mm iq bd mt no np dn mx nq nr dp nb lf ns nt nd lj nu nv nf ln nw nx nh ny bi translated">查询数据:一个更复杂的例子</h2><p id="43e7" class="pw-post-body-paragraph kw kx iq ky b kz nj jr lb lc nk ju le lf nl lh li lj nm ll lm ln nn lp lq lr ij bi translated">现在，让我们来看看当天新增手机基站最多的前5个国家:</p><pre class="kg kh ki kj gt mg mh mi mj aw mk bi"><span id="d9f4" class="ml mm iq mh b gy mn mo l mp mq">$ spyql "<strong class="mh ir">SELECT</strong> mcc, count_agg(*) <strong class="mh ir">AS</strong> n <strong class="mh ir">FROM</strong> csv('<em class="mr">sample.csv</em>') <strong class="mh ir">GROUP</strong> <strong class="mh ir">BY</strong> 1 <strong class="mh ir">ORDER</strong> <strong class="mh ir">BY</strong> 2 DESC <strong class="mh ir">LIMIT</strong> 5 <strong class="mh ir">TO</strong> pretty"</span><span id="b4eb" class="ml mm iq mh b gy oc mo l mp mq">  mcc      n<br/>-----  -----<br/>  262  24979<br/>  440   5085<br/>  208   4573<br/>  310   2084<br/>  311    799</span></pre><p id="bb36" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">MCC代表移动国家代码(262是德国的代码)。MCC的第一个数字标识区域。这里有一段来自维基百科的摘录:</p><pre class="kg kh ki kj gt mg mh mi mj aw mk bi"><span id="e2b3" class="ml mm iq mh b gy mn mo l mp mq">0: Test networks<br/>2: Europe<br/>3: North America and the Caribbean<br/>4: Asia and the Middle East<br/>5: Australia and Oceania<br/>6: Africa<br/>7: South and Central America<br/>9: Worldwide</span></pre><p id="5be2" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">让我们复制粘贴上述地区列表，并创建一个新的文件名<code class="fe nz oa ob mh b">mcc_geo.txt</code>。在mac上，这和<code class="fe nz oa ob mh b">$ pbpaste &gt; mcc_geo.txt</code>一样简单，但是你也可以将它粘贴到文本编辑器中并保存。现在，让我们要求SPyQL以CSV格式打开该文件并打印其内容:</p><pre class="kg kh ki kj gt mg mh mi mj aw mk bi"><span id="e37e" class="ml mm iq mh b gy mn mo l mp mq">$ spyql "<strong class="mh ir">SELECT</strong> * <strong class="mh ir">FROM</strong> csv('<em class="mr">mcc_geo.txt</em>') <strong class="mh ir">TO</strong> pretty"</span><span id="15e5" class="ml mm iq mh b gy oc mo l mp mq">  col1  col2<br/>------  -------------------------------<br/>     0  Test networks<br/>     2  Europe<br/>     3  North America and the Caribbean<br/>     4  Asia and the Middle East<br/>     5  Australia and Oceania<br/>     6  Africa<br/>     7  South and Central America<br/>     9  Worldwide</span></pre><p id="26e8" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">SPyQL检测到分隔符是冒号，并且文件没有标题。我们可以使用<em class="mr"> colN </em>语法来寻址第<em class="mr">n</em>列。现在，让我们创建一个JSON对象，它具有与输入行一样多的键值对。让输入的第一列为<em class="mr">键</em>，第二列为<em class="mr">值</em>，并将结果保存到一个新文件中:</p><pre class="kg kh ki kj gt mg mh mi mj aw mk bi"><span id="b26e" class="ml mm iq mh b gy mn mo l mp mq">$ spyql "<strong class="mh ir">SELECT</strong> dict_agg(col1,col2) <strong class="mh ir">AS</strong> json <strong class="mh ir">FROM</strong> csv('<em class="mr">mcc_geo.txt</em>') <strong class="mh ir">TO</strong> json('<em class="mr">mcc_geo.json</em>', indent=2)"</span></pre><p id="9f7a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们可以使用<code class="fe nz oa ob mh b">cat</code>来检查输出文件:</p><pre class="kg kh ki kj gt mg mh mi mj aw mk bi"><span id="efd1" class="ml mm iq mh b gy mn mo l mp mq">$ cat <em class="mr">mcc_geo.json</em>                                               </span><span id="f1d6" class="ml mm iq mh b gy oc mo l mp mq">{<br/>  "0": "Test networks",<br/>  "2": "Europe",<br/>  "3": "North America and the Caribbean",<br/>  "4": "Asia and the Middle East",<br/>  "5": "Australia and Oceania",<br/>  "6": "Africa",<br/>  "7": "South and Central America",<br/>  "9": "Worldwide "<br/>}</span></pre><p id="99cf" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">基本上，我们已经将所有输入行聚合到一个Python字典中，然后将其保存为一个JSON文件。尝试从<code class="fe nz oa ob mh b">SELECT</code>中移除<code class="fe nz oa ob mh b">AS json</code>别名，以理解我们为什么需要它:-)</p><p id="9b40" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在，让我们按地区而不是按MCC来获取统计数据。为此，我们将加载刚刚创建的JSON文件(使用<code class="fe nz oa ob mh b">-J</code>选项)并进行字典查找:</p><pre class="kg kh ki kj gt mg mh mi mj aw mk bi"><span id="765b" class="ml mm iq mh b gy mn mo l mp mq">$ spyql -Jgeo=<em class="mr">mcc_geo.json</em> "<strong class="mh ir">SELECT</strong> geo[mcc//100] <strong class="mh ir">AS</strong> region, count_agg(*) <strong class="mh ir">AS</strong> n <strong class="mh ir">FROM</strong> csv('<em class="mr">sample.csv</em>') <strong class="mh ir">GROUP</strong> <strong class="mh ir">BY</strong> 1 <strong class="mh ir">ORDER</strong> <strong class="mh ir">BY</strong> 2 DESC <strong class="mh ir">TO</strong> pretty"</span><span id="eba9" class="ml mm iq mh b gy oc mo l mp mq">region                               n<br/>-------------------------------  -----<br/>Europe                           35601<br/>Asia and the Middle East          5621<br/>North America and the Caribbean   3247<br/>Australia and Oceania              894<br/>Africa                             381<br/>South and Central America            1</span></pre><p id="fcb3" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们将整数除以100，得到MCC的第一个数字，然后在我们刚刚创建的JSON(作为Python字典加载)上查找这个数字。这就是我们在SPyQL中通过字典查找进行连接的方式:-)</p><h2 id="bb3a" class="ml mm iq bd mt no np dn mx nq nr dp nb lf ns nt nd lj nu nv nf ln nw nx nh ny bi translated">在查询中利用Python库</h2><p id="7bed" class="pw-post-body-paragraph kw kx iq ky b kz nj jr lb lc nk ju le lf nl lh li lj nm ll lm ln nn lp lq lr ij bi translated">SPyQL的另一个优势是我们可以利用Python生态系统。让我们试着做更多的地理统计。让我们来数一数欧洲H3单元(分辨率为5)的塔。首先，我们需要安装<a class="ae kv" href="https://github.com/uber/h3-py" rel="noopener ugc nofollow" target="_blank"> H3库</a>:</p><pre class="kg kh ki kj gt mg mh mi mj aw mk bi"><span id="9350" class="ml mm iq mh b gy mn mo l mp mq">$ pip3 install -U h3</span></pre><p id="1e7c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">然后，我们可以将经纬度对转换为H3单元，通过H3单元计算我们有多少座塔，并将结果保存到CSV中:</p><pre class="kg kh ki kj gt mg mh mi mj aw mk bi"><span id="5ca4" class="ml mm iq mh b gy mn mo l mp mq">$ spyql "<strong class="mh ir">IMPORT</strong> h3 <strong class="mh ir">SELECT</strong> h3.geo_to_h3(lat, lon, 5) <strong class="mh ir">AS</strong> cell, count_agg(*) <strong class="mh ir">AS</strong> n <strong class="mh ir">FROM</strong> csv('<em class="mr">sample.csv</em>') <strong class="mh ir">WHERE</strong> mcc//100==2 <strong class="mh ir">GROUP</strong> <strong class="mh ir">BY</strong> 1 <strong class="mh ir">TO</strong> csv('<em class="mr">towers_by_h3_res5.csv</em>')"</span></pre><p id="d1e6" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">借助开普勒，可视化这些结果相当简单。只要去kepler.gl/demo的<a class="ae kv" href="https://kepler.gl/demo" rel="noopener ugc nofollow" target="_blank">打开上面的文件。您应该会看到类似这样的内容:</a></p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oe"><img src="../Images/ea93361e2fc3fe649658425e20ac3f0e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*OILE5o2twQbYJNl43DYokw.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">通过SPyQL的H3池(分辨率5)对聚集进行开普勒可视化</p></figure><h1 id="7050" class="ms mm iq bd mt mu mv mw mx my mz na nb jw nc jx nd jz ne ka nf kc ng kd nh ni bi translated">最后的话</h1><p id="019a" class="pw-post-body-paragraph kw kx iq ky b kz nj jr lb lc nk ju le lf nl lh li lj nm ll lm ln nn lp lq lr ij bi translated">我希望您喜欢SPyQL，并且我可以向您展示从命令行查询数据是多么简单。在这篇关于SPyQL的第一篇文章中，我们只是触及了皮毛。我们能做的还有很多。在本文中，我们几乎没有利用Shell和Python生态系统。我们使用了一个小文件(SPyQL可以处理GB大小的文件，而不会影响系统资源)。所以，敬请期待！</p><p id="3ed9" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">试用SPyQL，然后将您的想法反馈给我。谢谢大家！</p><h1 id="8641" class="ms mm iq bd mt mu mv mw mx my mz na nb jw nc jx nd jz ne ka nf kc ng kd nh ni bi translated">资源</h1><p id="c0ea" class="pw-post-body-paragraph kw kx iq ky b kz nj jr lb lc nk ju le lf nl lh li lj nm ll lm ln nn lp lq lr ij bi translated">SPyQL回购:【github.com/dcmoura/spyql T4】</p><p id="3059" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">SPyQL文档:<a class="ae kv" href="https://spyql.readthedocs.io" rel="noopener ugc nofollow" target="_blank"> spyql.readthedocs.io </a></p><p id="f796" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">MatplotCLI回购:<a class="ae kv" href="https://github.com/dcmoura/matplotcli" rel="noopener ugc nofollow" target="_blank">github.com/dcmoura/matplotcli</a></p></div><div class="ab cl of og hu oh" role="separator"><span class="oi bw bk oj ok ol"/><span class="oi bw bk oj ok ol"/><span class="oi bw bk oj ok"/></div><div class="ij ik il im in"><p id="f4f7" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">你可以在<a class="ae kv" href="https://twitter.com/daniel_c_moura" rel="noopener ugc nofollow" target="_blank"> Tweeter </a>、<a class="ae kv" href="https://www.linkedin.com/in/dmoura/" rel="noopener ugc nofollow" target="_blank"> LinkedIn </a>和<a class="ae kv" href="https://vimeo.com/danielcmoura" rel="noopener ugc nofollow" target="_blank"> Vimeo </a>上找到我！</p><p id="01ac" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">文章最初发表于danielcmoura.com。</p></div></div>    
</body>
</html>