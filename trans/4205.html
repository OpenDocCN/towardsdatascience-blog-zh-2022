<html>
<head>
<title>Manage Your AWS EKS Load Balancer Like a Pro</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">像专业人士一样管理您的AWS EKS负载平衡器</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/manage-your-aws-eks-load-balancer-like-a-pro-7ca599e081ca#2022-09-19">https://towardsdatascience.com/manage-your-aws-eks-load-balancer-like-a-pro-7ca599e081ca#2022-09-19</a></blockquote><div><div class="fc if ig ih ii ij"/><div class="ik il im in io"><div class=""/><div class=""><h2 id="5503" class="pw-subtitle-paragraph jo iq ir bd b jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf dk translated">AWS负载平衡器高级提示和技巧</h2></div><figure class="kh ki kj kk gu kl gi gj paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><div class="gi gj kg"><img src="../Images/d8be372ed925af9e21445b153db0a4c1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4TbYJytXLTALLVcbgS_eDQ.jpeg"/></div></div><p class="ks kt gk gi gj ku kv bd b be z dk translated">在<a class="ae kw" href="https://unsplash.com/s/photos/orchestra?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上由<a class="ae kw" href="https://unsplash.com/@gwundrig?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Manuel n Geli</a>拍摄的照片</p></figure><p id="f21e" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">我的<a class="ae kw" href="https://meysam.io/how-to-set-up-ingress-controller-in-aws-eks-d745d9107307" rel="noopener ugc nofollow" target="_blank">上一篇文章</a>描述了在AWS管理的Kubernetes集群(EKS)中设置入口控制器。在本文中，我想强调一些高级特性，否则这些特性可能会被忽略，但会显著影响集群内部的自动化水平。</p><p id="0a26" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">你在下面看到的提示和技巧是为了遵守软件工程的基本原则之一<a class="ae kw" href="https://en.wikipedia.org/wiki/Don%27t_repeat_yourself" rel="noopener ugc nofollow" target="_blank"> DRY </a>而设计的。</p><h1 id="1544" class="lt lu ir bd lv lw lx ly lz ma mb mc md jx me jy mf ka mg kb mh kd mi ke mj mk bi translated">什么是入口“控制器”？</h1><p id="8111" class="pw-post-body-paragraph kx ky ir kz b la ml js lc ld mm jv lf lg mn li lj lk mo lm ln lo mp lq lr ls ik bi translated">Kubernetes的设计和开发使用了一组“控制器”，负责将<em class="mq">当前状态</em>带到由集群内的配置和资源<a class="ae kw" href="https://kubernetes.io/docs/concepts/architecture/controller/" rel="noopener ugc nofollow" target="_blank">源</a>定义的<em class="mq">期望状态</em>。</p><p id="9a94" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">作为一个实际的例子，如果您将您的Nginx部署扩展到2个副本，负责的控制器将与运行在worker节点上的Kubelet对话，以加速Nginx映像的两个副本，根据需要放大或缩小。</p><p id="a96b" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">当涉及到将您的逻辑添加到Kubernetes工作负载时，这为您打开了一个无限可能的世界。</p><p id="e345" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">我们今天将深入探讨的可能性之一是入口“控制器”，它负责将到达您的集群的流量<strong class="kz is">路由到具有<a class="ae kw" href="https://kubernetes.io/docs/reference/kubernetes-api/service-resources/ingress-v1/" rel="noopener ugc nofollow" target="_blank">配置规则</a>的适当服务。</strong></p><h1 id="b0bc" class="lt lu ir bd lv lw lx ly lz ma mb mc md jx me jy mf ka mg kb mh kd mi ke mj mk bi translated">Kubernetes中的运算符是什么？</h1><p id="6991" class="pw-post-body-paragraph kx ky ir kz b la ml js lc ld mm jv lf lg mn li lj lk mo lm ln lo mp lq lr ls ik bi translated">在我们进入主要讨论之前，定义一个操作符是至关重要的，但是如果您已经知道这个模式，您可以安全地跳过这一部分。</p><p id="cf5d" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">Kubernetes集群中的<a class="ae kw" href="https://kubernetes.io/docs/concepts/extend-kubernetes/operator/" rel="noopener ugc nofollow" target="_blank">操作符是一组自定义资源定义和一个“控制器”，它将负责将CRD的<em class="mq">当前状态</em>带到<em class="mq">期望状态</em>，与上面定义的其他</a><a class="ae kw" href="https://kubernetes.io/docs/concepts/architecture/controller/" rel="noopener ugc nofollow" target="_blank"> Kubernetes控制器</a>的行为非常相似。</p><p id="4161" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">作为一个虚拟示例，假设您在集群中定义了以下CRD。</p><figure class="kh ki kj kk gu kl"><div class="bz fq l di"><div class="mr ms l"/></div></figure><p id="20d8" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">这可能不是这个星球上最好的三明治。尽管如此，一旦您的控制器被部署到集群中，对端点上的Kubernetes api-server的每个API调用，然后通过应用上面的YAML文件，您将在集群中拥有一个汉堡三明治。</p><p id="4d99" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">如果您有兴趣了解更多信息，请进入<a class="ae kw" href="https://kubernetes.io/docs/concepts/extend-kubernetes/operator/" rel="noopener ugc nofollow" target="_blank">文档</a>获取完整参考。</p><h1 id="be64" class="lt lu ir bd lv lw lx ly lz ma mb mc md jx me jy mf ka mg kb mh kd mi ke mj mk bi translated">为什么在这里了解运营商很重要？</h1><p id="1867" class="pw-post-body-paragraph kx ky ir kz b la ml js lc ld mm jv lf lg mn li lj lk mo lm ln lo mp lq lr ls ik bi translated">Kubernetes不附带任何入口控制器[ <a class="ae kw" href="https://kubernetes.io/docs/concepts/services-networking/ingress-controllers/" rel="noopener ugc nofollow" target="_blank">来源</a> ]。但是它允许社区编写他们的入口控制器，这些控制器可能有也可能没有一组CRDs因此，了解操作符模式非常重要！</p><p id="f7f4" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">AWS负载平衡器控制器是Operator模式的一个实现，它监听集群内部的入口资源，在创建这些资源时，将执行一系列API调用来创建正确的<code class="fe mt mu mv mw b">TargetGroupBinding</code>资源。</p><blockquote class="mx my mz"><p id="7ba7" class="kx ky mq kz b la lb js lc ld le jv lf na lh li lj nb ll lm ln nc lp lq lr ls ik bi translated"><code class="fe mt mu mv mw b">TargetGroupBinding</code>填补了Kubernetes工作负载和AWS基础设施之间的空白，因为AWS设计和构建了其负载平衡器的方式&amp;位于这些负载平衡器的上游。如果你想了解更多，这里有参考指南的链接。</p></blockquote><p id="09eb" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">目标组和<code class="fe mt mu mv mw b">TargetGroupBindings</code>之间是一一对应的。</p><blockquote class="mx my mz"><p id="353d" class="kx ky mq kz b la lb js lc ld le jv lf na lh li lj nb ll lm ln nc lp lq lr ls ik bi translated">目标组是位于AWS应用程序负载平衡器[ <a class="ae kw" href="https://docs.aws.amazon.com/elasticloadbalancing/latest/application/load-balancer-target-groups.html" rel="noopener ugc nofollow" target="_blank"> source </a> ]后面的一个或多个EC2实例的组。</p></blockquote><p id="a2f0" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">你可以在下面看到一个<code class="fe mt mu mv mw b">TargetGroupBinding</code>资源的例子。</p><figure class="kh ki kj kk gu kl"><div class="bz fq l di"><div class="mr ms l"/></div><p class="ks kt gk gi gj ku kv bd b be z dk translated">TargetGroupBinding是AWS管理的Kubernetes中<a class="ae kw" href="https://docs.aws.amazon.com/elasticloadbalancing/latest/application/load-balancer-target-groups.html" rel="noopener ugc nofollow" target="_blank">目标组</a>的映射。</p></figure><p id="0482" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">这不是您通常自己创建/管理的资源，而是在您创建/修改入口资源时由<a class="ae kw" href="https://kubernetes-sigs.github.io/aws-load-balancer-controller/v2.4/" rel="noopener ugc nofollow" target="_blank"> AWS负载平衡器控制器</a>维护的资源。</p><p id="53cf" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">了解了这一点，当您试图创建一个带有入口的服务来接收来自互联网的流量时，您应该记住一个重要的注意事项。您的服务资源应该是NodePort类型，以便入口控制器能够创建<code class="fe mt mu mv mw b">TargetGroupBindings</code>。这在AWS的世界中是有意义的，因为如果服务只作为<code class="fe mt mu mv mw b">ClusterIP</code>公开，AWS负载平衡器就不能与之对话，因为它只公开在集群内部，实际上甚至从主机工作节点本身都无法访问。</p><p id="c31d" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">你可以通过下面的链接阅读我上一篇文章中的讨论，或者阅读参考指南来理解设计和配置。</p><div class="nd ne gq gs nf ng"><a rel="noopener follow" target="_blank" href="/how-to-set-up-ingress-controller-in-aws-eks-d745d9107307"><div class="nh ab fp"><div class="ni ab nj cl cj nk"><h2 class="bd is gz z fq nl fs ft nm fv fx iq bi translated">如何在自动气象站EKS设置入口控制器</h2><div class="nn l"><h3 class="bd b gz z fq nl fs ft nm fv fx dk translated">以正确的方式在AWS EKS上部署入口控制器</h3></div><div class="no l"><p class="bd b dl z fq nl fs ft nm fv fx dk translated">towardsdatascience.com</p></div></div><div class="np l"><div class="nq l nr ns nt np nu kq ng"/></div></div></a></div><p id="a991" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">既然我们已经介绍了基础知识和先决条件，现在是时候谈谈控制器和CRD了，这就是你想要如何配置你的<a class="ae kw" href="https://aws.amazon.com/elasticloadbalancing/" rel="noopener ugc nofollow" target="_blank"> AWS负载平衡器</a>。</p><h1 id="398e" class="lt lu ir bd lv lw lx ly lz ma mb mc md jx me jy mf ka mg kb mh kd mi ke mj mk bi translated">IngressClass的作用是什么？</h1><p id="c63c" class="pw-post-body-paragraph kx ky ir kz b la ml js lc ld mm jv lf lg mn li lj lk mo lm ln lo mp lq lr ls ik bi translated">IngressClass是将管理入口资源的责任委派给指定控制器的资源。为了澄清这一说法，让我们来看一些代码。</p><figure class="kh ki kj kk gu kl"><div class="bz fq l di"><div class="mr ms l"/></div><p class="ks kt gk gi gj ku kv bd b be z dk translated">如果您遵循<a class="ae kw" href="https://kubernetes-sigs.github.io/aws-load-balancer-controller/v2.4/deploy/installation/" rel="noopener ugc nofollow" target="_blank">安装指南</a>，这个<code class="fe mt mu mv mw b"><em class="nv">IngressClass</em></code>将会为您创建。</p></figure><p id="c08b" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">正如你从上面看到的，两个基本属性在<code class="fe mt mu mv mw b">spec</code>部分下面。<code class="fe mt mu mv mw b">controller</code>是决定谁/什么将通过这个IngressClass处理入口资源，而<code class="fe mt mu mv mw b">parameters</code>是传递给同一个控制器以定制其行为的可选键值。</p><blockquote class="mx my mz"><p id="5136" class="kx ky mq kz b la lb js lc ld le jv lf na lh li lj nb ll lm ln nc lp lq lr ls ik bi translated">拥有<code class="fe mt mu mv mw b">parameters</code>允许拥有具有不同风格的相同<code class="fe mt mu mv mw b">controller</code>，定制为不同地处理不同的入口资源。</p></blockquote><p id="dd20" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">简单地说，如果我创建一个入口资源，并将<code class="fe mt mu mv mw b">ingressClassName</code>设置为<code class="fe mt mu mv mw b">aws-alb</code>，名为<code class="fe mt mu mv mw b">ingress.k8s.aws/alb</code>的控制器将做它必须做的事情，以便将传入的流量路由到上游的Kubernetes服务。</p><p id="4da7" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">我们在接下来的讨论中需要的关键信息放在<code class="fe mt mu mv mw b">spec.parameters.kind</code>下面。这个属性的值是<code class="fe mt mu mv mw b">IngressClassParams</code>，这是一个CRD，AWS负载平衡器控制器将使用它来为您创建最终的负载平衡器。</p><figure class="kh ki kj kk gu kl gi gj paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><div class="gi gj nw"><img src="../Images/756f5a2f843a7891b8f3d0c014f46c84.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jDp2wD2X27mEO6wlHAKh9Q.jpeg"/></div></div><p class="ks kt gk gi gj ku kv bd b be z dk translated">照片由<a class="ae kw" href="https://unsplash.com/@whitfieldjordan?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">乔丹·怀特菲尔德</a>在<a class="ae kw" href="https://unsplash.com/s/photos/piano?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</p></figure><h1 id="8e2d" class="lt lu ir bd lv lw lx ly lz ma mb mc md jx me jy mf ka mg kb mh kd mi ke mj mk bi translated">IngressClassParams是你最好的朋友</h1><p id="f044" class="pw-post-body-paragraph kx ky ir kz b la ml js lc ld mm jv lf lg mn li lj lk mo lm ln lo mp lq lr ls ik bi translated"><a class="ae kw" href="https://kubernetes-sigs.github.io/aws-load-balancer-controller/v2.4/" rel="noopener ugc nofollow" target="_blank"> AWS负载平衡器控制器</a>有自己的一套CRD。您应该知道的最重要的CRD名为<code class="fe mt mu mv mw b">IngressClassParams</code>，它有一系列有益的可配置属性，这些属性会影响如何创建/配置最终的<a class="ae kw" href="https://aws.amazon.com/elasticloadbalancing/" rel="noopener ugc nofollow" target="_blank"> AWS负载平衡器</a>。</p><p id="c5eb" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">这些属性允许您定义和定制您的AWS负载平衡器，它将充当您的应用程序的前沿。</p><blockquote class="mx my mz"><p id="3074" class="kx ky mq kz b la lb js lc ld le jv lf na lh li lj nb ll lm ln nc lp lq lr ls ik bi translated">注意:我在本文中说的是<a class="ae kw" href="https://docs.aws.amazon.com/elasticloadbalancing/latest/application/introduction.html" rel="noopener ugc nofollow" target="_blank">应用负载均衡器</a>。如果您需要使用<a class="ae kw" href="https://docs.aws.amazon.com/elasticloadbalancing/latest/network/introduction.html" rel="noopener ugc nofollow" target="_blank">网络负载平衡器</a>，您可以使用相同的控制器，但一定要检查<a class="ae kw" href="https://kubernetes-sigs.github.io/aws-load-balancer-controller/v2.4/guide/service/nlb/" rel="noopener ugc nofollow" target="_blank">此链接</a>以获取相应的信息。</p></blockquote><p id="18fb" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">现在，我们来介绍一下<code class="fe mt mu mv mw b">IngressClassParams</code><a class="ae kw" href="https://kubernetes-sigs.github.io/aws-load-balancer-controller/v2.4/guide/ingress/ingress_class/" rel="noopener ugc nofollow" target="_blank">来源</a>提供的规范API。没有一个好的例子是最好的，所以让我们用下面的例子来支持这个论点。</p><figure class="kh ki kj kk gu kl"><div class="bz fq l di"><div class="mr ms l"/></div><p class="ks kt gk gi gj ku kv bd b be z dk translated">将影响如何创建负载平衡器的属性。</p></figure><p id="1fbe" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">如果您打开AWS控制台，上述配置将导致以下负载平衡器。</p><figure class="kh ki kj kk gu kl gi gj paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><div class="gi gj nx"><img src="../Images/94d6bd9fb25095efa3d10b5a66388b36.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*eG8lr_IthroK1w2wf03jJQ.png"/></div></div><p class="ks kt gk gi gj ku kv bd b be z dk translated">截图由作者取自AWS控制台。</p></figure><p id="50ea" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">当在生产级别的环境中工作时，这些属性中的一些是至关重要的，而其他的只是好的。我们将在下面深入探讨每一个问题。</p><p id="4190" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">您可以在<code class="fe mt mu mv mw b">IngressClassParams</code>资源上指定以下属性。</p><ul class=""><li id="d94e" class="ny nz ir kz b la lb ld le lg oa lk ob lo oc ls od oe of og bi translated"><code class="fe mt mu mv mw b"><strong class="kz is">spec.group.name</strong></code>:这种“分组”使得在一个负载均衡器后面有多个入口资源成为可能。如果在<code class="fe mt mu mv mw b">IngressClassParams</code>级别没有提供，那么另一种方法是注释你的每一个入口资源<a class="ae kw" href="https://kubernetes-sigs.github.io/aws-load-balancer-controller/v2.4/guide/ingress/annotations/#group.name" rel="noopener ugc nofollow" target="_blank"> source </a>。如果你没有为入口资源“分组”，AWS将为每个入口资源创建一个负载平衡器，这<a class="ae kw" href="https://aws.amazon.com/elasticloadbalancing/pricing/" rel="noopener ugc nofollow" target="_blank">将花费大量的成本</a>。</li><li id="c885" class="ny nz ir kz b la oh ld oi lg oj lk ok lo ol ls od oe of og bi translated"><code class="fe mt mu mv mw b"><strong class="kz is">spec.scheme</strong></code>:由于AWS中可能有<em class="mq">内部</em>和<em class="mq">面向互联网的</em>负载平衡器，您可以在此指定您的选择。区别是显而易见的，一个只对您的内部资源可用，另一个在公共互联网上公开。</li><li id="e413" class="ny nz ir kz b la oh ld oi lg oj lk ok lo ol ls od oe of og bi translated"><code class="fe mt mu mv mw b"><strong class="kz is">spec.loadBalancerAttributes</strong></code>:最有价值的规范之一将为您提供足够的灵活性来根据您的需求定制您的负载平衡器。这个规范就是本文的全部内容，所以我们将再次讨论它。</li><li id="e41f" class="ny nz ir kz b la oh ld oi lg oj lk ok lo ol ls od oe of og bi translated"><code class="fe mt mu mv mw b"><strong class="kz is">spec.ipAddressType</strong></code>:您可以选择<code class="fe mt mu mv mw b">ipv4</code>和<code class="fe mt mu mv mw b">dualstack</code>。以防有一天世界用完了IPv4！</li></ul><h1 id="c0fe" class="lt lu ir bd lv lw lx ly lz ma mb mc md jx me jy mf ka mg kb mh kd mi ke mj mk bi translated">负载平衡器属性</h1><p id="8769" class="pw-post-body-paragraph kx ky ir kz b la ml js lc ld mm jv lf lg mn li lj lk mo lm ln lo mp lq lr ls ik bi translated">参考上一节中从AWS控制台截取的屏幕截图，从<strong class="kz is">属性</strong>部分可以看到，您在这里修改了相当多的属性。所有这些属性都在<a class="ae kw" href="https://docs.aws.amazon.com/elasticloadbalancing/latest/application/application-load-balancers.html#load-balancer-attributes" rel="noopener ugc nofollow" target="_blank">相应的网页</a>上有适当的记录。所以，一定要去查一下，全面了解。</p><p id="6007" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">简单介绍一下，下面是从<code class="fe mt mu mv mw b">IngressClassParams</code>资源配置的属性。</p><ul class=""><li id="102d" class="ny nz ir kz b la lb ld le lg oa lk ob lo oc ls od oe of og bi translated"><code class="fe mt mu mv mw b"><strong class="kz is">deletion_protection.enabled</strong></code>:移除最后一个入口资源是否会终止负载平衡器。您可能想要关闭它，因为每个新的负载平衡器都将获得一个新的DNS名称，所以您必须在AWS DNS条目中或之外重新配置您的DNS记录。</li><li id="a21a" class="ny nz ir kz b la oh ld oi lg oj lk ok lo ol ls od oe of og bi translated"><code class="fe mt mu mv mw b"><strong class="kz is">idle_timeout.timeout_seconds</strong></code>:这是负载均衡器在自身和连接两端(用户&amp;上游服务器)之间保持两个通信通道打开的秒数。对于文件上传和类似的大型操作，您可能希望增加这个数量，并对您的客户端进行编程，以便在这个数量之前至少发送一个字节[ <a class="ae kw" href="https://docs.aws.amazon.com/elasticloadbalancing/latest/application/application-load-balancers.html#connection-idle-timeout" rel="noopener ugc nofollow" target="_blank"> source </a> ]。</li><li id="a395" class="ny nz ir kz b la oh ld oi lg oj lk ok lo ol ls od oe of og bi translated"><code class="fe mt mu mv mw b"><strong class="kz is">routing.http.drop_invalid_header_fields.enabled</strong></code> : <a class="ae kw" href="https://www.iana.org/assignments/http-fields/http-fields.xhtml" rel="noopener ugc nofollow" target="_blank">根据IANA </a>，HTTP头名应该符合字母数字和连字符。如果您希望负载平衡器丢弃不对应的标头，请启用此配置。</li><li id="c383" class="ny nz ir kz b la oh ld oi lg oj lk ok lo ol ls od oe of og bi translated"><code class="fe mt mu mv mw b"><strong class="kz is">routing.http2.enabled</strong></code>:顾名思义，这将为您的负载平衡器打开HTTP/2协议。默认为<code class="fe mt mu mv mw b">true</code>。</li><li id="0422" class="ny nz ir kz b la oh ld oi lg oj lk ok lo ol ls od oe of og bi translated"><code class="fe mt mu mv mw b"><strong class="kz is">routing.http.preserve_host_header.enabled</strong></code>:如果设置为<code class="fe mt mu mv mw b">true</code>，负载均衡器会将HTTP请求的主机头传递给上游服务器。不过，这不会改变<code class="fe mt mu mv mw b"><a class="ae kw" href="https://docs.aws.amazon.com/elasticloadbalancing/latest/application/x-forwarded-headers.html" rel="noopener ugc nofollow" target="_blank">X-FORWARDED</a></code> <a class="ae kw" href="https://docs.aws.amazon.com/elasticloadbalancing/latest/application/x-forwarded-headers.html" rel="noopener ugc nofollow" target="_blank">标题</a>的行为。</li><li id="2aa9" class="ny nz ir kz b la oh ld oi lg oj lk ok lo ol ls od oe of og bi translated"><code class="fe mt mu mv mw b"><strong class="kz is">access_logs.s3.enabled</strong></code>:这将打开记录负载平衡器对S3的访问日志。</li></ul><p id="5017" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">每个入口组只需指定一次这些设置。如果您使用Helm安装入口控制器，您可以在安装过程中将它们设置为值。作为一个实用的指南，这里有一个你将使用的样本<code class="fe mt mu mv mw b">values.yaml</code>文件，把它传给Helm安装。</p><figure class="kh ki kj kk gu kl"><div class="bz fq l di"><div class="mr ms l"/></div><p class="ks kt gk gi gj ku kv bd b be z dk translated">AWS入口控制器舵安装的values.yml</p></figure><blockquote class="mx my mz"><p id="95f8" class="kx ky mq kz b la lb js lc ld le jv lf na lh li lj nb ll lm ln nc lp lq lr ls ik bi translated">如果您没有将任何IngressClass注释为<code class="fe mt mu mv mw b">default</code>，也没有在您的入口资源中指定任何<code class="fe mt mu mv mw b">ingressClassName</code>，就好像您根本没有任何入口，因为没有控制器会拾取它！</p></blockquote><p id="9ef6" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">创建此类入口类后，由此类控制的任何入口都将归入同一个<code class="fe mt mu mv mw b">group.name</code>下，并有效地位于单个负载平衡器之后，从而节省您的成本并为您提供对进入您集群的向内流量的更多管理&amp;控制。</p><p id="17a5" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">如果您没有在<code class="fe mt mu mv mw b">IngressClassParams</code>中指定<code class="fe mt mu mv mw b">group.name</code>，您将被要求如下注释每个入口。</p><figure class="kh ki kj kk gu kl"><div class="bz fq l di"><div class="mr ms l"/></div></figure><p id="c7b8" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">现在我们已经介绍了IngressClass，是时候讨论入口资源和通过指定正确的注释集来控制负载平衡器了。</p><h1 id="c9ec" class="lt lu ir bd lv lw lx ly lz ma mb mc md jx me jy mf ka mg kb mh kd mi ke mj mk bi translated">入口注释</h1><p id="237d" class="pw-post-body-paragraph kx ky ir kz b la ml js lc ld mm jv lf lg mn li lj lk mo lm ln lo mp lq lr ls ik bi translated">Kubernetes集群中的入口资源没有任何特别之处。它们只是一个或多个规则的规范，必须被处理并发送到指定的服务。您指定主机和路径，相应的入口控制器将处理剩下的工作。</p><p id="dd9f" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">然而，让它们与众不同的是<code class="fe mt mu mv mw b">metadata.annotations</code>，当它位于任何供应商或非供应商负载平衡器之后时，它可以对您想要如何定制入口进行更多的控制。</p><p id="196f" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">为了保持传统，让我们从另一个实际例子开始这一部分，并使用这个例子解释每个注释。</p><figure class="kh ki kj kk gu kl"><div class="bz fq l di"><div class="mr ms l"/></div></figure><ul class=""><li id="279a" class="ny nz ir kz b la lb ld le lg oa lk ob lo oc ls od oe of og bi translated"><code class="fe mt mu mv mw b"><strong class="kz is">group.order</strong></code>:该整数指定当数据包到达负载均衡器时要匹配的规则的优先级。负载平衡器将从最低编号到最高编号评估规则。你通常希望你最常访问的网址在最上面，这样匹配你最常点击的规则就不会花太多时间。</li><li id="de26" class="ny nz ir kz b la oh ld oi lg oj lk ok lo ol ls od oe of og bi translated">与健康检查相关的注释非常简单明了，不言自明，所以我在这里就不多花时间了。</li><li id="18f4" class="ny nz ir kz b la oh ld oi lg oj lk ok lo ol ls od oe of og bi translated"><code class="fe mt mu mv mw b"><strong class="kz is">listen.ports</strong></code>:这将是您的负载平衡器中的最终<a class="ae kw" href="https://docs.aws.amazon.com/elasticloadbalancing/latest/application/load-balancer-listeners.html" rel="noopener ugc nofollow" target="_blank">监听器</a>。如果不指定此注释，默认情况下，AWS负载平衡器控制器将在端口80上公开入口。您很可能希望处理安全端口443(称为HTTPS)上的每个流量，同时将所有内容从HTTP(端口80)重定向到它。本文的最后一部分就是关于这个重定向的！</li><li id="b91d" class="ny nz ir kz b la oh ld oi lg oj lk ok lo ol ls od oe of og bi translated"><code class="fe mt mu mv mw b"><strong class="kz is">target-type</strong></code>:默认值是<code class="fe mt mu mv mw b">instance</code>，意味着负载均衡器会将流量发送到EC2的exposed NodePort。另一个允许的值是<code class="fe mt mu mv mw b">ip</code>，它将把流量发送到Pod的IP，但是这个选项要求VPC CNI支持它[ <a class="ae kw" href="https://kubernetes-sigs.github.io/aws-load-balancer-controller/v2.4/guide/ingress/annotations/#target-type" rel="noopener ugc nofollow" target="_blank">源</a> ]。</li><li id="5dac" class="ny nz ir kz b la oh ld oi lg oj lk ok lo ol ls od oe of og bi translated"><code class="fe mt mu mv mw b"><strong class="kz is">success-codes</strong></code>:可以是单个值，如<code class="fe mt mu mv mw b">200</code>，也可以是多个逗号分隔的值，如<code class="fe mt mu mv mw b">200,300</code>，也可以是一系列值，如<code class="fe mt mu mv mw b">200-300</code>。</li></ul><p id="bce3" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">上面讨论的注释是您需要为您创建的每个入口资源指定的注释。其他注释只需设置一次，负载均衡器就会选择它并将其用于所有入口资源。我将在下一节&amp;最后一节讨论这些。</p><figure class="kh ki kj kk gu kl gi gj paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><div class="gi gj om"><img src="../Images/f56298cd96fe4f884ac9b5aa21c39a15.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*BaL3Iqbqc8CEKlIs38Bjqw.jpeg"/></div></div><p class="ks kt gk gi gj ku kv bd b be z dk translated"><a class="ae kw" href="https://unsplash.com/@oppofindx5pro?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> OPPO Find X5 Pro </a>在<a class="ae kw" href="https://unsplash.com/s/photos/nature?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍照</p></figure><h1 id="933d" class="lt lu ir bd lv lw lx ly lz ma mb mc md jx me jy mf ka mg kb mh kd mi ke mj mk bi translated">负载平衡器的一次性配置</h1><h2 id="ec06" class="on lu ir bd lv oo op dn lz oq or dp md lg os ot mf lk ou ov mh lo ow ox mj oy bi translated">将HTTP重定向到HTTPS</h2><p id="8552" class="pw-post-body-paragraph kx ky ir kz b la ml js lc ld mm jv lf lg mn li lj lk mo lm ln lo mp lq lr ls ik bi translated">正如在上一篇文章中提到的，仅仅通过部署AWS入口控制器不会得到任何负载平衡器。您将需要创建您的第一个入口资源，具有规范中指定的Ingres class或者是默认的Ingres class，然后AWS将在一两分钟内提供您的负载平衡器。</p><p id="b200" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">安全最佳实践之一是配置负载平衡器，将非HTTPS流量重定向到安全的HTTPS流量。要使用AWS入口控制器做到这一点，您需要创建一个带有正确注释集的入口资源。</p><p id="4d1a" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">这个任务我们需要的注释是:<code class="fe mt mu mv mw b">actions.${action-name}</code>。“action name”将是一个虚拟服务名，甚至不作为Kubernetes服务资源存在，但是为了填补AWS和Kubernetes之间的空白，需要在<code class="fe mt mu mv mw b">spec.defaultBackend.service.name</code>下指定它。</p><p id="afcd" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">这是AWS EKS内部的入口资源将HTTP流量重定向到HTTPS的最终效果。</p><figure class="kh ki kj kk gu kl"><div class="bz fq l di"><div class="mr ms l"/></div></figure><p id="e228" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">在<code class="fe mt mu mv mw b">actions.ssl-redirect</code>下指定的注释是一种特殊的注释，只有AWS入口控制器可以理解，尽管JSON格式看起来需要处理很多，但它是可读的，您可以了解它的作用。</p><p id="1f97" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">这里要提到的重要一点是，<code class="fe mt mu mv mw b">spec.defaultBackend.service.port.name</code>应该完全是<code class="fe mt mu mv mw b">use-annotation</code>，如果你想让它像解释的那样工作，你不能在那里放任何东西。</p><p id="6cc1" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">这里需要再次提及的另一个重要问题是，集群中没有名为<code class="fe mt mu mv mw b">ssl-redirect</code>的Kubernetes服务资源。我们之所以在这里指定这个名称，是因为要使用<code class="fe mt mu mv mw b">kubectl</code>创建这个资源，我们必须填写所有必需的属性&amp;规范，因为它将在发送到api服务器之前被验证，即使您通过了<code class="fe mt mu mv mw b">--validate=false</code>，API服务器本身也会向您反馈错误的规范。</p><p id="5a4f" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">最终，上述入口资源会将所有HTTP流量重定向到HTTPS端口，为了确保这一点，下面是它在AWS控制台中的样子。</p><figure class="kh ki kj kk gu kl gi gj paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><div class="gi gj nx"><img src="../Images/ab918bac40c2c8ade85bb415f31dbc98.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FRKd3NL0Go64T7ik_Pe3mg.png"/></div></div></figure><p id="a17c" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">这个负载均衡器目前只监听端口80，所以让我们定义一个虚拟服务来重定向所有不需要的流量，以防所有其他规则与传入的数据包不匹配。</p><blockquote class="mx my mz"><p id="19d1" class="kx ky mq kz b la lb js lc ld le jv lf na lh li lj nb ll lm ln nc lp lq lr ls ik bi translated">每个负载平衡器都有一个默认的后端规则，如果所有先前的规则都不匹配传入的数据包，该规则将确定将流量发送到哪里。这允许您将用户重定向到一个友好的页面，提醒他们没有这样的主机或路径，他们需要确保他们正在前往正确的地址。</p></blockquote><h2 id="2df1" class="on lu ir bd lv oo op dn lz oq or dp md lg os ot mf lk ou ov mh lo ow ox mj oy bi translated">默认后端的虚拟上游</h2><p id="22c7" class="pw-post-body-paragraph kx ky ir kz b la ml js lc ld mm jv lf lg mn li lj lk mo lm ln lo mp lq lr ls ik bi translated">这一部分非常简单明了，因为您可以根据自己的需要定制它。但是，我会尝试将所有没有特定规则的流量发送到一个友好的维护页面，如下所示。</p><figure class="kh ki kj kk gu kl gi gj paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><div class="gi gj oz"><img src="../Images/f9abae2e456ff0a584171680f210d200.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WyjNznE-X0dsWShKS_7Osw.png"/></div></div><p class="ks kt gk gi gj ku kv bd b be z dk translated">我个人对哑上游的偏好(图片由作者提供)。</p></figure><p id="8f11" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">下面提供了该规则的代码和资源，包括前面的SSL重定向。</p><figure class="kh ki kj kk gu kl"><div class="bz fq l di"><div class="mr ms l"/></div></figure><p id="56ca" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">创建上述资源后，每个不是以您配置的入口规则为目的地的传入流量都将被发送到友好维护页面。</p><p id="21bb" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">您还可以选择审核这些传入的数据包，以了解最常被请求的内容，并在发现任何可疑情况时采取相应的措施。</p><h2 id="920e" class="on lu ir bd lv oo op dn lz oq or dp md lg os ot mf lk ou ov mh lo ow ox mj oy bi translated">其他非关键但注释</h2><p id="ed49" class="pw-post-body-paragraph kx ky ir kz b la ml js lc ld mm jv lf lg mn li lj lk mo lm ln lo mp lq lr ls ik bi translated">作为最后一块拼图和一个奖励，这里列出了所有其他可能对您的工作负载有用的注释。</p><figure class="kh ki kj kk gu kl"><div class="bz fq l di"><div class="mr ms l"/></div></figure><p id="eeb9" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">不要忘记，这些最后的注释在每个入口组中只被指定一次。如果您用不同的值设置多个，它将覆盖以前的值，并且您可能会得到意外的结果。</p><figure class="kh ki kj kk gu kl gi gj paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><div class="gi gj nw"><img src="../Images/8654c3cb34f620dbdfb58fe6a56b0084.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*clRIg4i09Bj6w8sEnjFJOQ.jpeg"/></div></div><p class="ks kt gk gi gj ku kv bd b be z dk translated"><a class="ae kw" href="https://unsplash.com/ja/@bchild311?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">本杰明·蔡尔德</a>在<a class="ae kw" href="https://unsplash.com/s/photos/meditation?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</p></figure><h1 id="87a8" class="lt lu ir bd lv lw lx ly lz ma mb mc md jx me jy mf ka mg kb mh kd mi ke mj mk bi translated">结论</h1><p id="5832" class="pw-post-body-paragraph kx ky ir kz b la ml js lc ld mm jv lf lg mn li lj lk mo lm ln lo mp lq lr ls ik bi translated">如果您选择加入AWS中的托管Kubernetes集群，那么在拥有生产级集群时，请准备好应对一些严峻的挑战。</p><p id="17cf" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">Kubernetes是与云无关的，允许您将数据库、缓存、消息代理和其他所有东西作为自我管理的解决方案放在集群中。这为您提供了更高的性能，因为您的应用程序将受益于地理上的接近，但这也意味着您将花费更少的钱来购买RDS、ElastiCache和AWS提供的其他产品。我很确定他们不喜欢这种声音。</p><p id="cac5" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">这意味着您将面临Kubernetes领域之外的挑战，以使您的集群在AWS基础设施中工作，为您提供学习和成长的机会。我建议你尽可能多带些，并且一定要享受旅程！</p><p id="afc4" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">祝你今天休息愉快，<a class="ae kw" href="https://meysam.io" rel="noopener ugc nofollow" target="_blank">敬请期待</a>保重！</p><h1 id="3967" class="lt lu ir bd lv lw lx ly lz ma mb mc md jx me jy mf ka mg kb mh kd mi ke mj mk bi translated">参考</h1><ul class=""><li id="ab23" class="ny nz ir kz b la ml ld mm lg pa lk pb lo pc ls od oe of og bi translated"><a class="ae kw" href="https://kubernetes-sigs.github.io/aws-load-balancer-controller/v2.4/" rel="noopener ugc nofollow" target="_blank">https://kubernetes-sigs . github . io/AWS-load-balancer-controller/v 2.4/</a></li><li id="08a4" class="ny nz ir kz b la oh ld oi lg oj lk ok lo ol ls od oe of og bi translated"><a class="ae kw" href="https://aws.amazon.com/elasticloadbalancing/" rel="noopener ugc nofollow" target="_blank">https://aws.amazon.com/elasticloadbalancing/</a></li><li id="97a1" class="ny nz ir kz b la oh ld oi lg oj lk ok lo ol ls od oe of og bi translated"><a class="ae kw" href="https://kubernetes.io/docs/" rel="noopener ugc nofollow" target="_blank">https://kubernetes.io/docs/</a></li></ul></div><div class="ab cl pd pe hv pf" role="separator"><span class="pg bw bk ph pi pj"/><span class="pg bw bk ph pi pj"/><span class="pg bw bk ph pi"/></div><div class="ik il im in io"><p id="6320" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">如果你喜欢这篇文章，看看我的其他内容，你可能也会觉得有帮助。</p><div class="nd ne gq gs nf ng"><a href="https://medium.com/skilluped/what-is-iptables-and-how-to-use-it-781818422e52" rel="noopener follow" target="_blank"><div class="nh ab fp"><div class="ni ab nj cl cj nk"><h2 class="bd is gz z fq nl fs ft nm fv fx iq bi translated">什么是iptables，如何使用？</h2><div class="nn l"><h3 class="bd b gz z fq nl fs ft nm fv fx dk translated">管理系统端口的防火墙界面</h3></div><div class="no l"><p class="bd b dl z fq nl fs ft nm fv fx dk translated">medium.com</p></div></div><div class="np l"><div class="pk l nr ns nt np nu kq ng"/></div></div></a></div><div class="nd ne gq gs nf ng"><a href="https://medium.com/amerandish/clean-architecture-simplified-223f45e1a10" rel="noopener follow" target="_blank"><div class="nh ab fp"><div class="ni ab nj cl cj nk"><h2 class="bd is gz z fq nl fs ft nm fv fx iq bi translated">简化的简洁架构</h2><div class="nn l"><h3 class="bd b gz z fq nl fs ft nm fv fx dk translated">以友好的方式解释清洁建筑是如何工作的</h3></div><div class="no l"><p class="bd b dl z fq nl fs ft nm fv fx dk translated">medium.com</p></div></div><div class="np l"><div class="pl l nr ns nt np nu kq ng"/></div></div></a></div><div class="nd ne gq gs nf ng"><a href="https://medium.com/amerandish/a-tmux-a-beginners-guide-7c129733148" rel="noopener follow" target="_blank"><div class="nh ab fp"><div class="ni ab nj cl cj nk"><h2 class="bd is gz z fq nl fs ft nm fv fx iq bi translated">Tmux:初学者指南</h2><div class="nn l"><h3 class="bd b gz z fq nl fs ft nm fv fx dk translated">将您的单个终端变成多个终端。</h3></div><div class="no l"><p class="bd b dl z fq nl fs ft nm fv fx dk translated">medium.com</p></div></div><div class="np l"><div class="pm l nr ns nt np nu kq ng"/></div></div></a></div><div class="nd ne gq gs nf ng"><a href="https://medium.com/skilluped/10-tips-on-writing-a-proper-dockerfile-13956ceb435f" rel="noopener follow" target="_blank"><div class="nh ab fp"><div class="ni ab nj cl cj nk"><h2 class="bd is gz z fq nl fs ft nm fv fx iq bi translated">写一份合适的文档的10个技巧</h2><div class="nn l"><h3 class="bd b gz z fq nl fs ft nm fv fx dk translated">编写一个合适的docker文件并不太难</h3></div><div class="no l"><p class="bd b dl z fq nl fs ft nm fv fx dk translated">medium.com</p></div></div><div class="np l"><div class="pn l nr ns nt np nu kq ng"/></div></div></a></div><div class="nd ne gq gs nf ng"><a href="https://meysam.io/what-is-haproxy-how-to-get-the-most-from-of-it-a9009b67f618" rel="noopener  ugc nofollow" target="_blank"><div class="nh ab fp"><div class="ni ab nj cl cj nk"><h2 class="bd is gz z fq nl fs ft nm fv fx iq bi translated">什么是HAProxy &amp;如何充分利用它？</h2><div class="nn l"><h3 class="bd b gz z fq nl fs ft nm fv fx dk translated">负载平衡、SSL/TLS、缓存等等。</h3></div><div class="no l"><p class="bd b dl z fq nl fs ft nm fv fx dk translated">meysam.io</p></div></div><div class="np l"><div class="po l nr ns nt np nu kq ng"/></div></div></a></div></div></div>    
</body>
</html>