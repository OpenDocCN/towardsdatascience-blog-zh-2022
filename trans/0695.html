<html>
<head>
<title>How Do Chatbots Understand?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">聊天机器人是怎么理解的？</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/how-do-chatbots-understand-87227f9f96a7#2022-02-28">https://towardsdatascience.com/how-do-chatbots-understand-87227f9f96a7#2022-02-28</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="c415" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">用Rasa构建聊天机器人——第四部分</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/681caeaf4ea67644313e56ac5b562664.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*BDyEgGP5aTVTFm3Q3a3xxQ.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">作者图片</p></figure><p id="1b96" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">在本系列的前几篇文章中，我们已经讨论了构建聊天机器人、插槽和实体以及处理机器人故障的基础。我们现在将讨论Rasa如何通过意图实现机器人理解。我们还将基于逻辑回归构建一个简单的定制意图分类器，尽管Rasa确实提供了一些现成的好分类器。</p><h2 id="fa47" class="lr ls iq bd lt lu lv dn lw lx ly dp lz le ma mb mc li md me mf lm mg mh mi mj bi translated">目录</h2><pre class="kg kh ki kj gt mk ml mm mn aw mo bi"><span id="179f" class="lr ls iq ml b gy mp mq l mr ms">- Natural Language Understanding<br/>- Intent Classification<br/>- The DIETClassifier<br/>- A custom intent Classifier</span></pre></div><div class="ab cl mt mu hu mv" role="separator"><span class="mw bw bk mx my mz"/><span class="mw bw bk mx my mz"/><span class="mw bw bk mx my"/></div><div class="ij ik il im in"><h2 id="12e9" class="lr ls iq bd lt lu lv dn lw lx ly dp lz le ma mb mc li md me mf lm mg mh mi mj bi translated">本系列的前几篇文章</h2><blockquote class="na nb nc"><p id="b128" class="kv kw nd kx b ky kz jr la lb lc ju ld ne lf lg lh nf lj lk ll ng ln lo lp lq ij bi translated">第一部分:<a class="ae nh" rel="noopener" target="_blank" href="/building-a-chatbot-with-rasa-3f03ecc5b324">用Rasa构建聊天机器人</a></p><p id="2fc1" class="kv kw nd kx b ky kz jr la lb lc ju ld ne lf lg lh nf lj lk ll ng ln lo lp lq ij bi translated">第二部分:<a class="ae nh" rel="noopener" target="_blank" href="/are-slots-and-entities-the-same-f98a38ac328d">槽和实体一样吗？</a></p><p id="44a2" class="kv kw nd kx b ky kz jr la lb lc ju ld ne lf lg lh nf lj lk ll ng ln lo lp lq ij bi translated">第三部分:<a class="ae nh" rel="noopener" target="_blank" href="/handling-chatbot-failure-gracefully-466f0fb1dcc5">处理聊天机器人故障</a></p></blockquote></div><div class="ab cl mt mu hu mv" role="separator"><span class="mw bw bk mx my mz"/><span class="mw bw bk mx my mz"/><span class="mw bw bk mx my"/></div><div class="ij ik il im in"><h1 id="2442" class="ni ls iq bd lt nj nk nl lw nm nn no lz jw np jx mc jz nq ka mf kc nr kd mi ns bi translated">自然语言理解</h1><p id="f300" class="pw-post-body-paragraph kv kw iq kx b ky nt jr la lb nu ju ld le nv lg lh li nw lk ll lm nx lo lp lq ij bi translated">自然语言理解，简称NLU，是研究机器如何进行阅读理解的领域。这是自然语言处理的一个子领域。</p><p id="e8e8" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">虽然NLP关注的是理解本身，但是NLP可以推导出可能不是直接显而易见的上下文和含义。Rasa使用<strong class="kx ir">意图</strong>来帮助机器人理解用户在说什么。</p><p id="0638" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">实体用于提取关键信息，这些信息也有助于机器人制定响应。在这篇文章中，我们将关注意图分类。</p></div><div class="ab cl mt mu hu mv" role="separator"><span class="mw bw bk mx my mz"/><span class="mw bw bk mx my mz"/><span class="mw bw bk mx my"/></div><div class="ij ik il im in"><h1 id="d847" class="ni ls iq bd lt nj nk nl lw nm nn no lz jw np jx mc jz nq ka mf kc nr kd mi ns bi translated">意图分类</h1><p id="4e4f" class="pw-post-body-paragraph kv kw iq kx b ky nt jr la lb nu ju ld le nv lg lh li nw lk ll lm nx lo lp lq ij bi translated"><strong class="kx ir">意图分类</strong>是我们刚刚讨论的技术之一。您只需为用户输入的每条消息分配一个标签。这个标签代表一个主题，称为一个<code class="fe ny nz oa ml b">intent</code>。例如，您可以定义类似于<code class="fe ny nz oa ml b">greet</code>、<code class="fe ny nz oa ml b">goodbye</code>、<code class="fe ny nz oa ml b">supply_contact_info</code>等的意图。</p><p id="246c" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">因为我们已经将这些训练数据标记为nlu数据的一部分，所以它变成了一个(通常)简单的文本分类问题。我说“通常”是因为你定义意图的方式与它们分类的难易程度有很大关系。</p><p id="5fc6" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">这对于任何分类问题都是正确的:与不同种类的马相比，区分不同的哺乳动物更容易。类似地，更容易使用名为<code class="fe ny nz oa ml b">book_flight</code>的意图和实体来提取目的地、日期等。而不是每个用例都有不同的意图:</p><ul class=""><li id="6298" class="ob oc iq kx b ky kz lb lc le od li oe lm of lq og oh oi oj bi translated"><code class="fe ny nz oa ml b">book_flights_destination_given</code></li><li id="fe1a" class="ob oc iq kx b ky ok lb ol le om li on lm oo lq og oh oi oj bi translated"><code class="fe ny nz oa ml b">book_flights_date_mentioned</code></li><li id="3569" class="ob oc iq kx b ky ok lb ol le om li on lm oo lq og oh oi oj bi translated"><code class="fe ny nz oa ml b">book_flights_budget_mentioned</code>等。</li></ul><h2 id="51a0" class="lr ls iq bd lt lu lv dn lw lx ly dp lz le ma mb mc li md me mf lm mg mh mi mj bi translated">意图分类器</h2><p id="e249" class="pw-post-body-paragraph kv kw iq kx b ky nt jr la lb nu ju ld le nv lg lh li nw lk ll lm nx lo lp lq ij bi translated">可以采用许多方法对意图进行分类。你可以有一个纯粹基于规则的系统，它会寻找特定的单词和短语来判断用户想说什么。可以想象，这种方法不会工作得太好，尤其是对于更复杂的用例。</p><p id="6f16" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">机器学习方法在这里真的很好，尤其是随着自然语言处理领域的发展。例如，您可以使用简单的朴素贝叶斯模型来构建自己的意图分类器。</p><p id="f62d" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">另一方面，您可以使用DIETClassifier，这是一个基于transformer的模型，可以执行实体提取和意图分类，我们稍后将对此进行讨论。</p><p id="c5c0" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">Rasa提供了一些意图分类器，您可以在<code class="fe ny nz oa ml b">config.yml</code>文件中直接使用它们。其中一些是:</p><ul class=""><li id="1030" class="ob oc iq kx b ky kz lb lc le od li oe lm of lq og oh oi oj bi translated"><strong class="kx ir">减肥分类器</strong></li><li id="28f9" class="ob oc iq kx b ky ok lb ol le om li on lm oo lq og oh oi oj bi translated"><strong class="kx ir"> SklearnIntentClassifier </strong>:使用sklearn的SVC</li><li id="c54a" class="ob oc iq kx b ky ok lb ol le om li on lm oo lq og oh oi oj bi translated"><strong class="kx ir">keyworditintentclassifier</strong>:匹配字符串和数据(基于规则)</li><li id="f23d" class="ob oc iq kx b ky ok lb ol le om li on lm oo lq og oh oi oj bi translated"><strong class="kx ir"> FallbackClassifier </strong>:帮助处理边缘情况和低置信度结果。这在之前的帖子中讨论过。</li></ul><blockquote class="na nb nc"><p id="c470" class="kv kw nd kx b ky kz jr la lb lc ju ld ne lf lg lh nf lj lk ll ng ln lo lp lq ij bi translated"><strong class="kx ir">注</strong></p><p id="bba4" class="kv kw nd kx b ky kz jr la lb lc ju ld ne lf lg lh nf lj lk ll ng ln lo lp lq ij bi translated">有关回退和处理失败的更多信息，请查看本系列的这篇文章:</p></blockquote><div class="op oq gp gr or os"><a rel="noopener follow" target="_blank" href="/handling-chatbot-failure-gracefully-466f0fb1dcc5"><div class="ot ab fo"><div class="ou ab ov cl cj ow"><h2 class="bd ir gy z fp ox fr fs oy fu fw ip bi translated">优雅地处理聊天机器人故障</h2><div class="oz l"><h3 class="bd b gy z fp ox fr fs oy fu fw dk translated">用Rasa构建聊天机器人——第三部分</h3></div><div class="pa l"><p class="bd b dl z fp ox fr fs oy fu fw dk translated">towardsdatascience.com</p></div></div><div class="pb l"><div class="pc l pd pe pf pb pg kp os"/></div></div></a></div><p id="28b4" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">让我们看看除了预测意图本身之外，意图分类器通常提供的信息。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ph"><img src="../Images/c34e9a43294f9dedec837abdf4f90701.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*RnEf-rkq_8tk2fC6JR72Nw.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">意图分类器的典型输出—按作者分类的图像</p></figure><p id="4e21" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">除了意图之外，这些分类器通常还会返回一个置信度得分(如果是概率模型的话)和一个意图排名。这些在调试你的机器人性能的时候真的很有用。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi pi"><img src="../Images/27a17e1d280b0e9d65dfd791debfa8c1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*p9XwNp62Ficxw52er2rtkA.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">一些意向分类器如DIET也输出意向排名——按作者分类的图片</p></figure></div><div class="ab cl mt mu hu mv" role="separator"><span class="mw bw bk mx my mz"/><span class="mw bw bk mx my mz"/><span class="mw bw bk mx my"/></div><div class="ij ik il im in"><h1 id="a0cb" class="ni ls iq bd lt nj nk nl lw nm nn no lz jw np jx mc jz nq ka mf kc nr kd mi ns bi translated">饮食分类器</h1><p id="8240" class="pw-post-body-paragraph kv kw iq kx b ky nt jr la lb nu ju ld le nv lg lh li nw lk ll lm nx lo lp lq ij bi translated">DIETCLassifier是一个基于转换器的模型，既作为实体提取器又作为意图分类器，因此被命名为<strong class="kx ir">双重意图实体转换器。</strong>由Rasa开发。</p><p id="28be" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">这是Rasa附带的组件之一。让我们讨论一下架构中最有趣的部分。</p><ul class=""><li id="a812" class="ob oc iq kx b ky kz lb lc le od li oe lm of lq og oh oi oj bi translated">有两种特殊的代币:<code class="fe ny nz oa ml b">_MASK_</code>和<code class="fe ny nz oa ml b">_CLS_</code>。</li><li id="53fc" class="ob oc iq kx b ky ok lb ol le om li on lm oo lq og oh oi oj bi translated"><code class="fe ny nz oa ml b">_CLS_</code>令牌通过其他令牌的稀疏嵌入的总和或直接像BERT那样的预训练嵌入来表示整个用户消息。它有助于意图分类。</li><li id="5de6" class="ob oc iq kx b ky ok lb ol le om li on lm oo lq og oh oi oj bi translated"><code class="fe ny nz oa ml b">_MASK_</code>令牌通过屏蔽随机令牌来帮助一般化模型。它用于计算掩模损耗。</li><li id="13be" class="ob oc iq kx b ky ok lb ol le om li on lm oo lq og oh oi oj bi translated">前馈模块由所有令牌共享，并且默认情况下具有80%的掉线连接。</li><li id="ff19" class="ob oc iq kx b ky ok lb ol le om li on lm oo lq og oh oi oj bi translated">这些令牌通过前馈层传递到默认情况下有两层的转换器中。</li><li id="eeb2" class="ob oc iq kx b ky ok lb ol le om li on lm oo lq og oh oi oj bi translated">然后，这些被传递到使用Tensorflow实现的条件随机场模块中。这就是实体提取发生的地方(回想一下，DIETClassifier能够进行提取和意图分类)。</li><li id="eddc" class="ob oc iq kx b ky ok lb ol le om li on lm oo lq og oh oi oj bi translated">最后，所有三种损失:实体损失、意图损失和屏蔽损失给出了我们试图通过反向传播来减少的总损失。</li></ul><p id="34a6" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">你可以看到下面的建筑。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi pj"><img src="../Images/119ecb279d6cbe1211530a7237610272.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*TN1_IV1rZ18UJ6mOnaPZaQ.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">饮食分类器——图片来自Rasa的<a class="ae nh" href="https://arxiv.org/pdf/2004.09936.pdf" rel="noopener ugc nofollow" target="_blank">论文</a></p></figure><h2 id="e2d8" class="lr ls iq bd lt lu lv dn lw lx ly dp lz le ma mb mc li md me mf lm mg mh mi mj bi translated">为什么饮食分类器如此灵活</h2><p id="3060" class="pw-post-body-paragraph kv kw iq kx b ky nt jr la lb nu ju ld le nv lg lh li nw lk ll lm nx lo lp lq ij bi translated">Rasa将DIETClassifier设计成非常可定制的。除了你可以在大多数模型中改变的通常的超参数，像时期的数量，隐藏层的数量等等。这些是Rasa的DIETClassifier提供的功能:</p><ul class=""><li id="3235" class="ob oc iq kx b ky kz lb lc le od li oe lm of lq og oh oi oj bi translated"><strong class="kx ir">添加预训练嵌入</strong>:支持BERT、GloVe和ConveRT等嵌入。这为您提供了使用稀疏嵌入(例如，计数矢量器)和密集嵌入的灵活性。</li><li id="cfdc" class="ob oc iq kx b ky ok lb ol le om li on lm oo lq og oh oi oj bi translated"><strong class="kx ir">仅将其用作意图分类器或实体提取器:</strong>您可以使用DIET来完成一项任务，并让其他组件来完成其余任务。</li><li id="6ab2" class="ob oc iq kx b ky ok lb ol le om li on lm oo lq og oh oi oj bi translated"><strong class="kx ir">_ MASK _ variable标志:</strong>这随机屏蔽了某些记号，因此模型有更好的机会进行泛化。</li><li id="3db9" class="ob oc iq kx b ky ok lb ol le om li on lm oo lq og oh oi oj bi translated"><strong class="kx ir">修改前馈层的连接密度:</strong>默认情况下，DIETClassifier只保留所有权重的20%为非零，保持模型轻便，减少过拟合的机会。您可以修改这些超参数来构建越来越复杂的模型。</li></ul></div><div class="ab cl mt mu hu mv" role="separator"><span class="mw bw bk mx my mz"/><span class="mw bw bk mx my mz"/><span class="mw bw bk mx my"/></div><div class="ij ik il im in"><h1 id="2b9d" class="ni ls iq bd lt nj nk nl lw nm nn no lz jw np jx mc jz nq ka mf kc nr kd mi ns bi translated">构建我们的意图分类器</h1><p id="637f" class="pw-post-body-paragraph kv kw iq kx b ky nt jr la lb nu ju ld le nv lg lh li nw lk ll lm nx lo lp lq ij bi translated">Rasa使得构建我们自己的组件变得非常简单，从实体提取器、策略和意图分类器一直到拼写检查器和语义分析器。</p><p id="d23d" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">让我们建立一个基于逻辑回归的意图分类器，它接受我们的NLU数据并符合<code class="fe ny nz oa ml b">sklearn</code>的<code class="fe ny nz oa ml b">LogisticRegression</code>模型。我们将使用和以前一样的聊天机器人，包括NLU数据，故事和行动。</p><h2 id="c77d" class="lr ls iq bd lt lu lv dn lw lx ly dp lz le ma mb mc li md me mf lm mg mh mi mj bi translated">蓝图</h2><p id="bdc1" class="pw-post-body-paragraph kv kw iq kx b ky nt jr la lb nu ju ld le nv lg lh li nw lk ll lm nx lo lp lq ij bi translated">每个组件都被定义为一个从<code class="fe ny nz oa ml b">Component</code>继承的类。有些属性是在类中定义的，还有一组必要的方法，rasa使用这些方法来训练并最终根据<code class="fe ny nz oa ml b">config.yml</code>文件中定义的步骤将数据传递给我们的组件。</p><p id="70b2" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">我们的意图分类器的高级结构如下所示:</p><pre class="kg kh ki kj gt mk ml mm mn aw mo bi"><span id="2a97" class="lr ls iq ml b gy mp mq l mr ms"># imports</span><span id="720f" class="lr ls iq ml b gy pk mq l mr ms">class LRClassifier(IntentClassifier):</span><span id="2c4f" class="lr ls iq ml b gy pk mq l mr ms"><em class="nd">    def</em> __init__(self, component_config: Optional[Dict[Text, Any]] =        None) -&gt; None:<br/>        super().__init__(component_config)</span><span id="614a" class="lr ls iq ml b gy pk mq l mr ms">    # necessary attributes: eg. name, provides, requires, etc.</span><span id="0ca1" class="lr ls iq ml b gy pk mq l mr ms">    # necessary methods: eg. train, process, persist, etc. </span></pre><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="pl pm l"/></div></figure><h2 id="9e1d" class="lr ls iq bd lt lu lv dn lw lx ly dp lz le ma mb mc li md me mf lm mg mh mi mj bi translated"><strong class="ak">训练方法</strong></h2><p id="a3d4" class="pw-post-body-paragraph kv kw iq kx b ky nt jr la lb nu ju ld le nv lg lh li nw lk ll lm nx lo lp lq ij bi translated">这个方法只是训练我们的分类器。因为我们使用的是sklearn，所以非常简单。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="pl pm l"/></div></figure><h2 id="8bbc" class="lr ls iq bd lt lu lv dn lw lx ly dp lz le ma mb mc li md me mf lm mg mh mi mj bi translated"><strong class="ak">工艺方法</strong></h2><p id="e4b9" class="pw-post-body-paragraph kv kw iq kx b ky nt jr la lb nu ju ld le nv lg lh li nw lk ll lm nx lo lp lq ij bi translated">每次运行Rasa的管道时都会执行该方法，这发生在每个用户消息之后。它包含组件的逻辑。在我们的意图分类器的例子中，<code class="fe ny nz oa ml b">process</code>方法将包含一个<code class="fe ny nz oa ml b">predict</code>调用，它预测一个意图，如果我们需要的话，还有一个意图排名。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="pl pm l"/></div></figure><h2 id="894e" class="lr ls iq bd lt lu lv dn lw lx ly dp lz le ma mb mc li md me mf lm mg mh mi mj bi translated">持久化方法</h2><p id="8a85" class="pw-post-body-paragraph kv kw iq kx b ky nt jr la lb nu ju ld le nv lg lh li nw lk ll lm nx lo lp lq ij bi translated">这个方法保存了我们的模型供以后使用。我们将使用<code class="fe ny nz oa ml b">joblib</code>,因为我们正在使用sklearn。Sklearn的文档推荐使用<code class="fe ny nz oa ml b">joblib</code>，因为它的模型通常包含许多<code class="fe ny nz oa ml b">numpy</code>矩阵。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="pl pm l"/></div></figure><h2 id="92de" class="lr ls iq bd lt lu lv dn lw lx ly dp lz le ma mb mc li md me mf lm mg mh mi mj bi translated"><strong class="ak">加载方法</strong></h2><p id="8b82" class="pw-post-body-paragraph kv kw iq kx b ky nt jr la lb nu ju ld le nv lg lh li nw lk ll lm nx lo lp lq ij bi translated">每当您启动聊天机器人时，就会调用<code class="fe ny nz oa ml b">load</code>方法。它从保存在<code class="fe ny nz oa ml b">persist</code>方法中的文件中加载模型。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="pl pm l"/></div></figure><h2 id="ad6a" class="lr ls iq bd lt lu lv dn lw lx ly dp lz le ma mb mc li md me mf lm mg mh mi mj bi translated">评估我们的模型</h2><p id="294a" class="pw-post-body-paragraph kv kw iq kx b ky nt jr la lb nu ju ld le nv lg lh li nw lk ll lm nx lo lp lq ij bi translated">Rasa为评估NLU和机器人核心提供支持。我们所要做的就是创建一些测试数据并运行<code class="fe ny nz oa ml b">rasa test</code>。也支持交叉验证。</p><p id="0ca4" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">为了测试我们的分类器，将测试数据添加到<code class="fe ny nz oa ml b">tests/test.yml</code>。它看起来会像这样:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="pl pm l"/></div></figure><p id="f047" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">之后，运行:</p><pre class="kg kh ki kj gt mk ml mm mn aw mo bi"><span id="a205" class="lr ls iq ml b gy mp mq l mr ms">rasa test</span></pre><p id="b923" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">将生成一个<code class="fe ny nz oa ml b">results</code>文件夹，您可以通过图表和报告查看分类器的性能。您还将看到<code class="fe ny nz oa ml b">DIETClassifier's</code>实体提取的性能。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi pn"><img src="../Images/2e8eabb0b137e0314408b76fac126c66.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FYwhmPsfLOs3LroGG0uZWA.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">Rasa测试支持生成的图表—图片由作者提供</p></figure></div><div class="ab cl mt mu hu mv" role="separator"><span class="mw bw bk mx my mz"/><span class="mw bw bk mx my mz"/><span class="mw bw bk mx my"/></div><div class="ij ik il im in"><h1 id="65b5" class="ni ls iq bd lt nj nk nl lw nm nn no lz jw np jx mc jz nq ka mf kc nr kd mi ns bi translated">笔记</h1><h2 id="f1cc" class="lr ls iq bd lt lu lv dn lw lx ly dp lz le ma mb mc li md me mf lm mg mh mi mj bi translated">意图是有限的</h2><p id="5210" class="pw-post-body-paragraph kv kw iq kx b ky nt jr la lb nu ju ld le nv lg lh li nw lk ll lm nx lo lp lq ij bi translated">你或许可以想象，让一个机器人将一条消息分类到一组排他的类中是非常有限的。Rasa通过提供对等级意图的支持来帮助解决这个问题，并且正在努力消除所有的意图。</p><p id="cb5e" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">与此同时，我们可以设计一个更好的对话代理，方法是将我们的意图构造得非常通用，然后使用实体或层次意图提取用户消息中更细微的方面。</p><h2 id="664e" class="lr ls iq bd lt lu lv dn lw lx ly dp lz le ma mb mc li md me mf lm mg mh mi mj bi translated">高级测试</h2><p id="c9df" class="pw-post-body-paragraph kv kw iq kx b ky nt jr la lb nu ju ld le nv lg lh li nw lk ll lm nx lo lp lq ij bi translated">Rasa提供了许多您可以在测试组件时使用的特性。其中包括:</p><ul class=""><li id="c188" class="ob oc iq kx b ky kz lb lc le od li oe lm of lq og oh oi oj bi translated">交叉验证</li><li id="7139" class="ob oc iq kx b ky ok lb ol le om li on lm oo lq og oh oi oj bi translated">比较模型</li><li id="3968" class="ob oc iq kx b ky ok lb ol le om li on lm oo lq og oh oi oj bi translated">策略测试</li></ul><p id="0586" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">还有很多东西，尽管我们不会在这篇文章中讨论它们。</p></div><div class="ab cl mt mu hu mv" role="separator"><span class="mw bw bk mx my mz"/><span class="mw bw bk mx my mz"/><span class="mw bw bk mx my"/></div><div class="ij ik il im in"><h1 id="5cf8" class="ni ls iq bd lt nj nk nl lw nm nn no lz jw np jx mc jz nq ka mf kc nr kd mi ns bi translated">示例代码</h1><div class="op oq gp gr or os"><a href="https://github.com/Polaris000/BlogCode/tree/main/CustomIntentClassifier" rel="noopener  ugc nofollow" target="_blank"><div class="ot ab fo"><div class="ou ab ov cl cj ow"><h2 class="bd ir gy z fp ox fr fs oy fu fw ip bi translated">blog code/CustomIntentClassifier在主Polaris000/BlogCode</h2><div class="oz l"><h3 class="bd b gy z fp ox fr fs oy fu fw dk translated">这是一个示例机器人，展示了Rasa对定制组件的支持——特别是定制意图分类器……</h3></div><div class="pa l"><p class="bd b dl z fp ox fr fs oy fu fw dk translated">github.com</p></div></div><div class="pb l"><div class="po l pd pe pf pb pg kp os"/></div></div></a></div><h2 id="5877" class="lr ls iq bd lt lu lv dn lw lx ly dp lz le ma mb mc li md me mf lm mg mh mi mj bi translated">本系列的前几篇文章</h2><blockquote class="na nb nc"><p id="664f" class="kv kw nd kx b ky kz jr la lb lc ju ld ne lf lg lh nf lj lk ll ng ln lo lp lq ij bi translated">第一部分:<a class="ae nh" rel="noopener" target="_blank" href="/building-a-chatbot-with-rasa-3f03ecc5b324">用Rasa构建聊天机器人</a></p><p id="6804" class="kv kw nd kx b ky kz jr la lb lc ju ld ne lf lg lh nf lj lk ll ng ln lo lp lq ij bi translated">第二部分:<a class="ae nh" rel="noopener" target="_blank" href="/are-slots-and-entities-the-same-f98a38ac328d">槽和实体一样吗？</a></p><p id="180d" class="kv kw nd kx b ky kz jr la lb lc ju ld ne lf lg lh nf lj lk ll ng ln lo lp lq ij bi translated">第三部分:<a class="ae nh" rel="noopener" target="_blank" href="/handling-chatbot-failure-gracefully-466f0fb1dcc5">处理聊天机器人故障</a></p></blockquote></div><div class="ab cl mt mu hu mv" role="separator"><span class="mw bw bk mx my mz"/><span class="mw bw bk mx my mz"/><span class="mw bw bk mx my"/></div><div class="ij ik il im in"><h1 id="5fba" class="ni ls iq bd lt nj nk nl lw nm nn no lz jw np jx mc jz nq ka mf kc nr kd mi ns bi translated">结论</h1><p id="7de9" class="pw-post-body-paragraph kv kw iq kx b ky nt jr la lb nu ju ld le nv lg lh li nw lk ll lm nx lo lp lq ij bi translated">在这篇文章中，我们讨论了聊天机器人是如何理解用户所说的话的。我们还构建了一个理解简单查询的定制模型，这是通过将用户消息分类到一组固定的意图中来实现的。</p><p id="4b86" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">我们还谈到了为什么意图是有限的，以及是否有更好的方法来处理意图分类。</p><p id="7172" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">希望这篇文章能让你对聊天机器人如何从用户信息中提取含义有所了解。</p></div></div>    
</body>
</html>