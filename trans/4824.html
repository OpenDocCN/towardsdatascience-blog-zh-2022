<html>
<head>
<title>Beginner’s Guide to NebulaGraph Database</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">星云图数据库初学者指南</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/beginners-guide-to-nebulagraph-database-5d35bdee442f#2022-10-26">https://towardsdatascience.com/beginners-guide-to-nebulagraph-database-5d35bdee442f#2022-10-26</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="46d1" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">一个用于信息检索的开源图形数据库</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/fe7c10094ce0c2c43766271c690897ba.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*3Vb0Udf3a4pGrxXW"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated"><a class="ae ky" href="https://unsplash.com/es/@guerrillabuzz_blockchain_pr_agency?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> GuerrillaBuzz区块链公关机构</a>在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</p></figure><p id="95ec" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">通过阅读本文，您将了解NebulaGraph(一个开源图形数据库)背后的基本概念。根据官方文档，NebulaGraph是</p><blockquote class="lv lw lx"><p id="b31c" class="kz la ly lb b lc ld ju le lf lg jx lh lz lj lk ll ma ln lo lp mb lr ls lt lu im bi translated">“…一个分布式、快速的开源图形数据库，具有横向可扩展性和高可用性。它是一个数据库，专门存储庞大的图形网络，并从中检索信息。”</p></blockquote><p id="89ce" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在此之前，让我们探讨一下关系数据库和图形数据库之间的区别。</p><p id="8cb0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">关系数据库将数据存储在表中。每个表都由自己的列和行定义。关系数据库需要联接来连接不同表。这种类型的数据库适合于以事务为中心的用例，例如会计和在线事务。</p><p id="0b8f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">另一方面，图数据库由节点或边来表示。某些图形数据库使用术语顶点、边和属性来代替。它们被设计用来表示实体和实体之间的关系。图形数据库是欺诈检测和推荐系统的理想选择。</p><p id="3333" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">继续下一节的设置和安装。</p></div><div class="ab cl mc md hx me" role="separator"><span class="mf bw bk mg mh mi"/><span class="mf bw bk mg mh mi"/><span class="mf bw bk mg mh"/></div><div class="im in io ip iq"><h1 id="e32d" class="mj mk it bd ml mm mn mo mp mq mr ms mt jz mu ka mv kc mw kd mx kf my kg mz na bi translated">设置和安装</h1><p id="c28f" class="pw-post-body-paragraph kz la it lb b lc nb ju le lf nc jx lh li nd lk ll lm ne lo lp lq nf ls lt lu im bi translated">本教程涵盖了以下软件包的安装:</p><ul class=""><li id="c1a4" class="ng nh it lb b lc ld lf lg li ni lm nj lq nk lu nl nm nn no bi translated"><code class="fe np nq nr ns b">NebulaGraph server</code>—nebula graph服务器的二进制文件</li><li id="0aa0" class="ng nh it lb b lc nt lf nu li nv lm nw lq nx lu nl nm nn no bi translated"><code class="fe np nq nr ns b">Nebula Console</code>—nebula graph服务器的命令行界面</li></ul><h2 id="dd6d" class="ny mk it bd ml nz oa dn mp ob oc dp mt li od oe mv lm of og mx lq oh oi mz oj bi translated">NebulaGraph (RPM或DEB包)</h2><p id="dbe8" class="pw-post-body-paragraph kz la it lb b lc nb ju le lf nc jx lh li nd lk ll lm ne lo lp lq nf ls lt lu im bi translated">在撰写本文时，NebulaGraph仅在Linux操作系统(Ubuntu、CentOS)上受支持。根据期望的<code class="fe np nq nr ns b">release_version</code>下载期望的包:</p><pre class="kj kk kl km gt ok ns ol om aw on bi"><span id="dbae" class="ny mk it ns b gy oo op l oq or">//Centos 6<br/>https://oss-cdn.nebula-graph.io/package/&lt;release_version&gt;/nebula-graph-&lt;release_version&gt;.el6.x86_64.rpm</span><span id="b439" class="ny mk it ns b gy os op l oq or">//Centos 7<br/>https://oss-cdn.nebula-graph.io/package/&lt;release_version&gt;/nebula-graph-&lt;release_version&gt;.el7.x86_64.rpm</span><span id="19fb" class="ny mk it ns b gy os op l oq or">//Centos 8<br/>https://oss-cdn.nebula-graph.io/package/&lt;release_version&gt;/nebula-graph-&lt;release_version&gt;.el8.x86_64.rpm</span><span id="c66e" class="ny mk it ns b gy os op l oq or">//Ubuntu 1604<br/>https://oss-cdn.nebula-graph.io/package/&lt;release_version&gt;/nebula-graph-&lt;release_version&gt;.ubuntu1604.amd64.deb</span><span id="4f4b" class="ny mk it ns b gy os op l oq or">//Ubuntu 1804<br/>https://oss-cdn.nebula-graph.io/package/&lt;release_version&gt;/nebula-graph-&lt;release_version&gt;.ubuntu1804.amd64.deb</span><span id="2f55" class="ny mk it ns b gy os op l oq or">//Ubuntu 2004<br/>https://oss-cdn.nebula-graph.io/package/&lt;release_version&gt;/nebula-graph-&lt;release_version&gt;.ubuntu2004.amd64.deb</span></pre><p id="aaa3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">例如，您可以运行以下命令来下载3.2.1版的软件包:</p><pre class="kj kk kl km gt ok ns ol om aw on bi"><span id="153c" class="ny mk it ns b gy oo op l oq or"># CentOS 7.5<br/>wget https://oss-cdn.nebula-graph.io/package/3.2.1/nebula-graph-3.2.1.el7.x86_64.rpm</span><span id="001b" class="ny mk it ns b gy os op l oq or"># Ubuntu 1804<br/>wget https://oss-cdn.nebula-graph.io/package/3.2.1/nebula-graph-3.2.1.ubuntu1804.amd64.deb</span><span id="c39e" class="ny mk it ns b gy os op l oq or"># Ubuntu 2004<br/>wget https://oss-cdn.nebula-graph.io/package/3.2.1/nebula-graph-3.2.1.ubuntu2004.amd64.deb</span></pre><p id="5971" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">下载完软件包后，运行以下命令安装NebulaGraph:</p><pre class="kj kk kl km gt ok ns ol om aw on bi"><span id="cc8c" class="ny mk it ns b gy oo op l oq or"># CentOS 7.5<br/>sudo rpm -ivh nebula-graph-3.2.1.el7.x86_64.rpm</span><span id="3061" class="ny mk it ns b gy os op l oq or"># Ubuntu 1804<br/>sudo dpkg -i nebula-graph-3.2.1.ubuntu1804.amd64.deb</span><span id="59dd" class="ny mk it ns b gy os op l oq or"># Ubuntu 2004<br/>sudo dpkg -i nebula-graph-3.2.1.ubuntu2004.amd64.deb</span></pre><p id="98c0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">接下来，通过以下命令启动NebulaGraph服务器:</p><pre class="kj kk kl km gt ok ns ol om aw on bi"><span id="69bf" class="ny mk it ns b gy oo op l oq or">sudo /usr/local/nebula/scripts/nebula.service start all</span></pre><p id="4a50" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">您应该会看到以下输出，表明服务器已经启动:</p><pre class="kj kk kl km gt ok ns ol om aw on bi"><span id="2c53" class="ny mk it ns b gy oo op l oq or">[INFO] Starting nebula-metad...<br/>[INFO] Done<br/>[INFO] Starting nebula-graphd...<br/>[INFO] Done<br/>[INFO] Starting nebula-storaged...<br/>[INFO] Done</span></pre><p id="dde1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">以下命令可用于检查状态:</p><pre class="kj kk kl km gt ok ns ol om aw on bi"><span id="447f" class="ny mk it ns b gy oo op l oq or">sudo /usr/local/nebula/scripts/nebula.service status all</span></pre><p id="525c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">它将输出进程id和NebulaGraph服务使用的相应端口:</p><pre class="kj kk kl km gt ok ns ol om aw on bi"><span id="8724" class="ny mk it ns b gy oo op l oq or">[INFO] nebula-metad(ef6d6a0): Running as 713187, Listening on 9559<br/>[INFO] nebula-graphd(ef6d6a0): Running as 713233, Listening on 9669<br/>[WARN] nebula-storaged after v3.0.0 will not start service until it is added to cluster.<br/>[WARN] See Manage Storage hosts:ADD HOSTS in <a class="ae ky" href="https://docs.nebula-graph.io/" rel="noopener ugc nofollow" target="_blank">https://docs.nebula-graph.io/</a><br/>[INFO] nebula-storaged(ef6d6a0): Running as 713262, Listening on 9779</span></pre><p id="06fc" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">除此之外，还有一个停止命令来停止NebulaGraph进程:</p><pre class="kj kk kl km gt ok ns ol om aw on bi"><span id="1603" class="ny mk it ns b gy oo op l oq or">sudo /usr/local/nebula/scripts/nebula.service stop all</span></pre><p id="0a49" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">终端将打印出以下日志:</p><pre class="kj kk kl km gt ok ns ol om aw on bi"><span id="4d48" class="ny mk it ns b gy oo op l oq or">[INFO] Stopping nebula-metad...<br/>[INFO] Done<br/>[INFO] Stopping nebula-graphd...<br/>[INFO] Done<br/>[INFO] Stopping nebula-storaged...<br/>[INFO] Done</span></pre><blockquote class="lv lw lx"><p id="d2f4" class="kz la ly lb b lc ld ju le lf lg jx lh lz lj lk ll ma ln lo lp mb lr ls lt lu im bi translated">请查看<a class="ae ky" href="https://docs.nebula-graph.io/3.2.1/2.quick-start/5.start-stop-service/#syntax" rel="noopener ugc nofollow" target="_blank">下面的文档</a>以获得关于所有可用语法的更多信息。</p></blockquote><h2 id="daa8" class="ny mk it bd ml nz oa dn mp ob oc dp mt li od oe mv lm of og mx lq oh oi mz oj bi translated">星云图(Docker和Kubernetes)</h2><p id="4a10" class="pw-post-body-paragraph kz la it lb b lc nb ju le lf nc jx lh li nd lk ll lm ne lo lp lq nf ls lt lu im bi translated">或者，NebulaGraph也可用于Docker和Kubernetes。对于标准安装，使用由官方仓库提供的以下<a class="ae ky" href="https://github.com/vesoft-inc/nebula/tree/master/docker" rel="noopener ugc nofollow" target="_blank">文档文件</a>:</p><ul class=""><li id="cced" class="ng nh it lb b lc ld lf lg li ni lm nj lq nk lu nl nm nn no bi translated"><code class="fe np nq nr ns b"><a class="ae ky" href="https://hub.docker.com/r/vesoft/nebula-graphd" rel="noopener ugc nofollow" target="_blank">vesoft/nebula-graphd</a></code> :- <code class="fe np nq nr ns b">nebula-graphd</code>用<code class="fe np nq nr ns b">Dockerfile.graphd</code>构建的服务</li><li id="8223" class="ng nh it lb b lc nt lf nu li nv lm nw lq nx lu nl nm nn no bi translated"><code class="fe np nq nr ns b"><a class="ae ky" href="https://hub.docker.com/r/vesoft/nebula-metad" rel="noopener ugc nofollow" target="_blank">vesoft/nebula-metad</a></code>——<code class="fe np nq nr ns b">Dockerfile.metad</code>建成的<code class="fe np nq nr ns b">nebula-metad</code>服务</li><li id="6029" class="ng nh it lb b lc nt lf nu li nv lm nw lq nx lu nl nm nn no bi translated"><code class="fe np nq nr ns b"><a class="ae ky" href="https://hub.docker.com/r/vesoft/nebula-storaged" rel="noopener ugc nofollow" target="_blank">vesoft/nebula-storaged</a></code>:用<code class="fe np nq nr ns b">Dockerfile.storaged</code>构建的<code class="fe np nq nr ns b">nebula-storaged</code>服务</li><li id="5ed0" class="ng nh it lb b lc nt lf nu li nv lm nw lq nx lu nl nm nn no bi translated"><code class="fe np nq nr ns b"><a class="ae ky" href="https://hub.docker.com/r/vesoft/nebula-tools" rel="noopener ugc nofollow" target="_blank">vesoft/nebula-tools</a></code>:用<code class="fe np nq nr ns b">Dockerfile.tools</code>构建的星云工具</li></ul><p id="c94f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">此外，您可以直接从Docker Hub获取Docker图片。只需前往<a class="ae ky" href="https://hub.docker.com/u/vesoft" rel="noopener ugc nofollow" target="_blank">下面的链接</a>并提取所需图像。例如，您可以使用以下命令来拉动<code class="fe np nq nr ns b">nebula-graphd</code>图像:</p><pre class="kj kk kl km gt ok ns ol om aw on bi"><span id="58df" class="ny mk it ns b gy oo op l oq or">docker pull vesoft/nebula-graphd</span></pre><p id="a3c9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">对于Kubernetes，请前往<a class="ae ky" href="https://github.com/vesoft-inc/nebula-docker-compose/tree/master/charts/nebula" rel="noopener ugc nofollow" target="_blank">以下链接</a>并遵循提供的说明。</p><h2 id="211c" class="ny mk it bd ml nz oa dn mp ob oc dp mt li od oe mv lm of og mx lq oh oi mz oj bi translated">星云控制台</h2><p id="d523" class="pw-post-body-paragraph kz la it lb b lc nb ju le lf nc jx lh li nd lk ll lm ne lo lp lq nf ls lt lu im bi translated">NebulaGraph服务器文件不附带Nebula控制台。Nebula控制台提供了一个命令行界面来与NebulaGraph服务器进行交互。</p><p id="ad83" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">请注意，如果您打算通过NebulaGraph自己的客户端SDK (Python、Java、Go、C++)连接到Nebula graph，则不需要Nebula控制台。然而，对于调试和测试来说，它是一个很好的工具。</p><p id="506e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">根据您机器的操作系统和架构，从下面的Github库下载所需的二进制文件。您可以运行<code class="fe np nq nr ns b">lscpu</code>命令来识别架构。</p><blockquote class="lv lw lx"><p id="0ea8" class="kz la ly lb b lc ld ju le lf lg jx lh lz lj lk ll ma ln lo lp mb lr ls lt lu im bi translated">为了方便起见，建议将二进制文件重命名为<code class="fe np nq nr ns b">nebula-console</code>。此外，您需要授予执行该文件的权限。你可以通过运行<code class="fe np nq nr ns b">chmod 111 nebula-console</code>来实现。请不要使用chmod 777，因为任何人都可以读取、写入和执行该文件。</p></blockquote><p id="3cb3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">将工作目录改为与<code class="fe np nq nr ns b">nebula-console</code>可执行文件相同的目录。然后，运行以下命令启动命令行界面:</p><pre class="kj kk kl km gt ok ns ol om aw on bi"><span id="0530" class="ny mk it ns b gy oo op l oq or"># syntax<br/>./nebula-console -addr &lt;address&gt; -port &lt;port&gt; -u &lt;username&gt; -p &lt;password&gt;</span><span id="95ea" class="ny mk it ns b gy os op l oq or"># example<br/>./nebula-console -addr 127.0.0.1 -port 9669 -u root -p root</span></pre><ul class=""><li id="f7c5" class="ng nh it lb b lc ld lf lg li ni lm nj lq nk lu nl nm nn no bi translated"><code class="fe np nq nr ns b">address</code> —设置图形服务的IP地址。默认地址是127.0.0.1。</li><li id="ee0a" class="ng nh it lb b lc nt lf nu li nv lm nw lq nx lu nl nm nn no bi translated"><code class="fe np nq nr ns b">port</code> —设置图形服务的端口号。默认端口号是9669。</li><li id="2778" class="ng nh it lb b lc nt lf nu li nv lm nw lq nx lu nl nm nn no bi translated"><code class="fe np nq nr ns b">username </code> —设置用户名。默认用户名是<code class="fe np nq nr ns b">root</code>。</li><li id="3aca" class="ng nh it lb b lc nt lf nu li nv lm nw lq nx lu nl nm nn no bi translated"><code class="fe np nq nr ns b">password</code> —设置的密码。如果未启用身份验证，您可以使用任何字符作为密码。</li></ul><p id="825c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">当您执行<code class="fe np nq nr ns b">nebula-console</code>文件时，您应该会看到以下输出:</p><pre class="kj kk kl km gt ok ns ol om aw on bi"><span id="ad65" class="ny mk it ns b gy oo op l oq or">Welcome to NebulaGraph!</span><span id="14c0" class="ny mk it ns b gy os op l oq or">(root@nebula) [(none)]&gt;</span></pre><p id="ca17" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在下一节中，您将学习使用命令行界面执行nGQL。</p></div><div class="ab cl mc md hx me" role="separator"><span class="mf bw bk mg mh mi"/><span class="mf bw bk mg mh mi"/><span class="mf bw bk mg mh"/></div><div class="im in io ip iq"><h1 id="0816" class="mj mk it bd ml mm mn mo mp mq mr ms mt jz mu ka mv kc mw kd mx kf my kg mz na bi translated">星云图查询语言(nGQL)</h1><p id="bc6b" class="pw-post-body-paragraph kz la it lb b lc nb ju le lf nc jx lh li nd lk ll lm ne lo lp lq nf ls lt lu im bi translated">顾名思义，nGQL是一种用于NebulaGraph的声明式图查询语言。当第一次连接到NebulaGraph服务器时，需要添加新的存储主机。</p><h2 id="83e8" class="ny mk it bd ml nz oa dn mp ob oc dp mt li od oe mv lm of og mx lq oh oi mz oj bi translated">存储主机</h2><p id="7eeb" class="pw-post-body-paragraph kz la it lb b lc nb ju le lf nc jx lh li nd lk ll lm ne lo lp lq nf ls lt lu im bi translated">确保您的终端通过<code class="fe np nq nr ns b">nebula-console</code>连接到NebulaGraph服务器。运行以下查询来标识所有可用的存储主机:</p><pre class="kj kk kl km gt ok ns ol om aw on bi"><span id="1d53" class="ny mk it ns b gy oo op l oq or">SHOW HOSTS;</span></pre><p id="0340" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">您应该会看到一个空表，表明它当前是空的。通过以下查询添加新主机:</p><pre class="kj kk kl km gt ok ns ol om aw on bi"><span id="de8e" class="ny mk it ns b gy oo op l oq or">ADD HOSTS 127.0.0.1:9779;</span></pre><p id="51fd" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">再次运行<code class="fe np nq nr ns b">SHOW HOSTS;</code>查询。终端将输出以下结果:</p><pre class="kj kk kl km gt ok ns ol om aw on bi"><span id="7243" class="ny mk it ns b gy oo op l oq or">+-------------+------+-----------+-----------+--------------+<br/>| Host        | Port | HTTP port | Status    | Leader count |<br/>+-------------+------+-----------+-----------+--------------+<br/>| "127.0.0.1" | 9779 | 19669     | "ONLINE"  | 0            |<br/>+-------------+------+-----------+-----------+--------------+</span></pre><p id="0900" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">NebulaGraph实例可以包含零个或多个图形空间。每个空间在物理上相互隔离，并有自己的模式。你可以把它想象成关系数据库中的一个数据库。</p><h2 id="68e1" class="ny mk it bd ml nz oa dn mp ob oc dp mt li od oe mv lm of og mx lq oh oi mz oj bi translated">(计划或理论的)纲要</h2><p id="7597" class="pw-post-body-paragraph kz la it lb b lc nb ju le lf nc jx lh li nd lk ll lm ne lo lp lq nf ls lt lu im bi translated">空间的模式由以下组件表示:</p><ul class=""><li id="aecf" class="ng nh it lb b lc ld lf lg li ni lm nj lq nk lu nl nm nn no bi translated"><code class="fe np nq nr ns b">VERTEX</code> —代表一个实体。它可以有零到多个标签。</li><li id="ed46" class="ng nh it lb b lc nt lf nu li nv lm nw lq nx lu nl nm nn no bi translated"><code class="fe np nq nr ns b">TAG</code> —描述顶点的属性。</li><li id="0acd" class="ng nh it lb b lc nt lf nu li nv lm nw lq nx lu nl nm nn no bi translated"><code class="fe np nq nr ns b">EDGE</code> —表示两个顶点之间的有向关系</li><li id="1557" class="ng nh it lb b lc nt lf nu li nv lm nw lq nx lu nl nm nn no bi translated"><code class="fe np nq nr ns b">EDGE TYPE</code> —描述边的属性</li></ul><p id="2930" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">例如，请看下图，它展示了一个空间的模式:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ot"><img src="../Images/bec7c57aa49e0ab72eb525fc60b586d5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rFhYwugRIq8dKgT3ZlCj1Q.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><ul class=""><li id="3539" class="ng nh it lb b lc ld lf lg li ni lm nj lq nk lu nl nm nn no bi translated">该空间包含三个<code class="fe np nq nr ns b">Person</code>顶点。</li><li id="35e8" class="ng nh it lb b lc nt lf nu li nv lm nw lq nx lu nl nm nn no bi translated">每个<code class="fe np nq nr ns b">Person</code>顶点都有<code class="fe np nq nr ns b">name</code>和<code class="fe np nq nr ns b">age</code>作为标签。</li><li id="1ac6" class="ng nh it lb b lc nt lf nu li nv lm nw lq nx lu nl nm nn no bi translated">人的顶点由<code class="fe np nq nr ns b">like</code>边连接</li><li id="187a" class="ng nh it lb b lc nt lf nu li nv lm nw lq nx lu nl nm nn no bi translated">每个like边都有<code class="fe np nq nr ns b">likeness</code>作为边类型。</li></ul><p id="ec61" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">因此，我们可以很容易地将上面的空间解释如下:</p><ul class=""><li id="1dbe" class="ng nh it lb b lc ld lf lg li ni lm nj lq nk lu nl nm nn no bi translated">人物(姓名:鲍勃，年龄:22岁)相似(相似度:90.0)人物(姓名:玛丽，年龄:30岁)</li><li id="fe1d" class="ng nh it lb b lc nt lf nu li nv lm nw lq nx lu nl nm nn no bi translated">人物(姓名:鲍勃，年龄:22岁)相似(相似度:70.0)人物(姓名:爱丽丝，年龄:22岁)</li></ul><h2 id="13c9" class="ny mk it bd ml nz oa dn mp ob oc dp mt li od oe mv lm of og mx lq oh oi mz oj bi translated">创造</h2><p id="1f4c" class="pw-post-body-paragraph kz la it lb b lc nb ju le lf nc jx lh li nd lk ll lm ne lo lp lq nf ls lt lu im bi translated">让我们根据上面的用例创建一个新的空间和相应的模式。在控制台中运行以下查询:</p><pre class="kj kk kl km gt ok ns ol om aw on bi"><span id="2fee" class="ny mk it ns b gy oo op l oq or">CREATE SPACE IF NOT EXISTS test(vid_type=FIXED_STRING(30));</span><span id="60a2" class="ny mk it ns b gy os op l oq or">USE test;</span><span id="8899" class="ny mk it ns b gy os op l oq or">CREATE TAG IF NOT EXISTS person(name string, age int);</span><span id="c44d" class="ny mk it ns b gy os op l oq or">CREATE EDGE like (likeness double);</span></pre><h2 id="c7aa" class="ny mk it bd ml nz oa dn mp ob oc dp mt li od oe mv lm of og mx lq oh oi mz oj bi translated">插入</h2><p id="60cc" class="pw-post-body-paragraph kz la it lb b lc nb ju le lf nc jx lh li nd lk ll lm ne lo lp lq nf ls lt lu im bi translated">之后，使用以下查询将新的<code class="fe np nq nr ns b">Person</code>顶点插入到空间中:</p><pre class="kj kk kl km gt ok ns ol om aw on bi"><span id="647e" class="ny mk it ns b gy oo op l oq or">INSERT VERTEX person(name, age) VALUES "Bob":("Bob", 22), "Alice":("Alice", 22), "Mary":("Mary", 30);</span></pre><p id="b078" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在，我们可以如下建立新创建的顶点之间的关系:</p><pre class="kj kk kl km gt ok ns ol om aw on bi"><span id="4733" class="ny mk it ns b gy oo op l oq or">INSERT EDGE like(likeness) VALUES "Bob"-&gt;"Alice":(70.0), "Bob"-&gt;"Mary":(90.0);</span></pre><h2 id="e6c8" class="ny mk it bd ml nz oa dn mp ob oc dp mt li od oe mv lm of og mx lq oh oi mz oj bi translated">阅读</h2><p id="23c7" class="pw-post-body-paragraph kz la it lb b lc nb ju le lf nc jx lh li nd lk ll lm ne lo lp lq nf ls lt lu im bi translated">NebulaGraph提供了4种从图形服务器读取数据的不同方法:</p><ul class=""><li id="ff56" class="ng nh it lb b lc ld lf lg li ni lm nj lq nk lu nl nm nn no bi translated"><code class="fe np nq nr ns b">GO</code> —根据具体情况遍历数据库，获取所需信息</li><li id="b862" class="ng nh it lb b lc nt lf nu li nv lm nw lq nx lu nl nm nn no bi translated"><code class="fe np nq nr ns b">FETCH</code> —从顶点或边获取属性</li><li id="8b18" class="ng nh it lb b lc nt lf nu li nv lm nw lq nx lu nl nm nn no bi translated"><code class="fe np nq nr ns b">LOOKUP</code> —根据索引搜索符合特定条件的数据</li><li id="0718" class="ng nh it lb b lc nt lf nu li nv lm nw lq nx lu nl nm nn no bi translated"><code class="fe np nq nr ns b">MATCH</code> —描述基于索引的各种图形模式</li></ul><p id="14f7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">本教程涵盖了<code class="fe np nq nr ns b">FETCH</code>和<code class="fe np nq nr ns b">GO</code>的功能。使用以下查询从名为<code class="fe np nq nr ns b">Bob</code>的<code class="fe np nq nr ns b">Person</code>顶点获取属性:</p><pre class="kj kk kl km gt ok ns ol om aw on bi"><span id="3a10" class="ny mk it ns b gy oo op l oq or">FETCH PROP ON person "Bob" YIELD vertex as node;</span></pre><p id="daeb" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">控制台将输出以下结果:</p><pre class="kj kk kl km gt ok ns ol om aw on bi"><span id="d54a" class="ny mk it ns b gy oo op l oq or">+---------------------------------------+<br/>| node                                  |<br/>+---------------------------------------+<br/>| ("Bob" :person{age: 22, name: "Bob"}) |<br/>+---------------------------------------+</span></pre><p id="3569" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">对于EDGE，您可以使用下面的查询来获取从<code class="fe np nq nr ns b">Bob</code>到<code class="fe np nq nr ns b">Alice</code>的<code class="fe np nq nr ns b">like</code>边的属性:</p><pre class="kj kk kl km gt ok ns ol om aw on bi"><span id="9d5a" class="ny mk it ns b gy oo op l oq or">FETCH PROP ON like "Bob"-&gt;"Alice" YIELD edge as e;</span></pre><p id="5a7b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">您应该得到以下输出</p><pre class="kj kk kl km gt ok ns ol om aw on bi"><span id="8e7c" class="ny mk it ns b gy oo op l oq or">+--------------------------------------------+<br/>| e                                          |<br/>+--------------------------------------------+<br/>| [:like "Bob"-&gt;"Alice" @0 {likeness: 70.0}] |<br/>+--------------------------------------------+</span></pre><p id="bf20" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">另一方面，<code class="fe np nq nr ns b">GO</code>语句可以用来遍历数据库。例如，你可以很容易地通过鲍勃识别出所有的<code class="fe np nq nr ns b">Person</code>顶点<code class="fe np nq nr ns b">like</code>:</p><pre class="kj kk kl km gt ok ns ol om aw on bi"><span id="2dff" class="ny mk it ns b gy oo op l oq or">GO FROM "Bob" OVER like YIELD properties($$).name AS Name, properties($$).age AS Age;</span></pre><p id="199a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">终端将打印以下文本:</p><pre class="kj kk kl km gt ok ns ol om aw on bi"><span id="54e0" class="ny mk it ns b gy oo op l oq or">+---------+-----+<br/>| Name    | Age |<br/>+---------+-----+<br/>| "Alice" | 22  |<br/>| "Mary"  | 30  |<br/>+---------+-----+</span></pre><blockquote class="lv lw lx"><p id="b027" class="kz la ly lb b lc ld ju le lf lg jx lh lz lj lk ll ma ln lo lp mb lr ls lt lu im bi translated"><code class="fe np nq nr ns b">$$</code>符号代表目标顶点。在这种情况下，查询将返回目标顶点的属性。您可以使用<code class="fe np nq nr ns b">$^</code>符号来获取源顶点的属性。</p></blockquote><p id="92fe" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">您可以使用如下的<code class="fe np nq nr ns b">WHERE</code>子句指定条件:</p><pre class="kj kk kl km gt ok ns ol om aw on bi"><span id="e9a5" class="ny mk it ns b gy oo op l oq or"># Person liked by Bob that is over 25 in age<br/>GO FROM "Bob" OVER like WHERE properties($$).age &gt;= 25 YIELD properties($$).name AS Name, properties($$).age AS Age;</span><span id="4a67" class="ny mk it ns b gy os op l oq or"># Person liked by Bob with less than 80 likeness<br/>GO FROM "Bob" OVER like WHERE properties(edge).likeness &lt; 80 YIELD properties($$).name AS Name, properties($$).age AS Age;</span></pre><h2 id="08d2" class="ny mk it bd ml nz oa dn mp ob oc dp mt li od oe mv lm of og mx lq oh oi mz oj bi translated">更新</h2><p id="547e" class="pw-post-body-paragraph kz la it lb b lc nb ju le lf nc jx lh li nd lk ll lm ne lo lp lq nf ls lt lu im bi translated">要更新现有顶点和边，请运行以下查询:</p><pre class="kj kk kl km gt ok ns ol om aw on bi"><span id="cf7d" class="ny mk it ns b gy oo op l oq or"># Update the age of Bob<br/>UPDATE VERTEX "Bob" SET person.age = 25;</span><span id="9d76" class="ny mk it ns b gy os op l oq or"># Update the likeness from Bob to Alice<br/>UPDATE EDGE "Bob" -&gt; "Alice" OF like SET likeness = 99.9;</span></pre><h2 id="915b" class="ny mk it bd ml nz oa dn mp ob oc dp mt li od oe mv lm of og mx lq oh oi mz oj bi translated">删除</h2><p id="7d9c" class="pw-post-body-paragraph kz la it lb b lc nb ju le lf nc jx lh li nd lk ll lm ne lo lp lq nf ls lt lu im bi translated">子句可以用来从数据库中删除一个顶点或边。按如下方式使用它:</p><pre class="kj kk kl km gt ok ns ol om aw on bi"><span id="38f3" class="ny mk it ns b gy oo op l oq or">DELETE VERTEX "Bob", "Alice";<br/>DELETE EDGE like "Bob" -&gt; "Mary";</span></pre><blockquote class="lv lw lx"><p id="db22" class="kz la ly lb b lc ld ju le lf lg jx lh lz lj lk ll ma ln lo lp mb lr ls lt lu im bi translated">查看<a class="ae ky" href="https://docs.nebula-graph.io/3.2.1/2.quick-start/6.cheatsheet-for-ngql/" rel="noopener ugc nofollow" target="_blank">下面的备忘单</a>了解更多关于nGQL的信息。</p></blockquote></div><div class="ab cl mc md hx me" role="separator"><span class="mf bw bk mg mh mi"/><span class="mf bw bk mg mh mi"/><span class="mf bw bk mg mh"/></div><div class="im in io ip iq"><h1 id="64c3" class="mj mk it bd ml mm mn mo mp mq mr ms mt jz mu ka mv kc mw kd mx kf my kg mz na bi translated">Python客户端</h1><p id="c305" class="pw-post-body-paragraph kz la it lb b lc nb ju le lf nc jx lh li nd lk ll lm ne lo lp lq nf ls lt lu im bi translated">NebulaGraph附带以下客户端SDK:</p><ul class=""><li id="fbfa" class="ng nh it lb b lc ld lf lg li ni lm nj lq nk lu nl nm nn no bi translated">C++</li><li id="7de6" class="ng nh it lb b lc nt lf nu li nv lm nw lq nx lu nl nm nn no bi translated">Java 语言(一种计算机语言，尤用于创建网站)</li><li id="96ae" class="ng nh it lb b lc nt lf nu li nv lm nw lq nx lu nl nm nn no bi translated">去</li><li id="1ca1" class="ng nh it lb b lc nt lf nu li nv lm nw lq nx lu nl nm nn no bi translated">计算机编程语言</li></ul><p id="cb20" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">本教程介绍了一个用Python连接和管理图形数据库的简单示例。您可以在同一台机器上本地运行该脚本，也可以从远程机器上运行该脚本。</p><h2 id="9b34" class="ny mk it bd ml nz oa dn mp ob oc dp mt li od oe mv lm of og mx lq oh oi mz oj bi translated">Python包</h2><p id="7bb8" class="pw-post-body-paragraph kz la it lb b lc nb ju le lf nc jx lh li nd lk ll lm ne lo lp lq nf ls lt lu im bi translated">在此之前，让我们在目标机器中创建一个新的虚拟环境。激活它并运行以下命令来安装NebulaGraph Python API。</p><pre class="kj kk kl km gt ok ns ol om aw on bi"><span id="4c9e" class="ny mk it ns b gy oo op l oq or">pip install nebula3-python</span></pre><p id="5cb6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">接下来，创建一个名为<code class="fe np nq nr ns b">main.py</code>的新文件，并在其中添加以下代码:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ou ov l"/></div></figure><p id="a92a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">函数将返回一个<code class="fe np nq nr ns b">ResultSet</code>对象。例如:</p><pre class="kj kk kl km gt ok ns ol om aw on bi"><span id="e84f" class="ny mk it ns b gy oo op l oq or">ResultSet(keys: ['node'], values: [("Bob" :person{age: 22, name: "Bob"})])</span></pre><p id="6df8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">您可以使用以下代码将其转换为Python字典:</p><pre class="kj kk kl km gt ok ns ol om aw on bi"><span id="6d6f" class="ny mk it ns b gy oo op l oq or">columns = result.keys()<br/>d = {}<br/>for col_num in range(result.col_size()):<br/>    col_name = columns[col_num]<br/>    col_list = result.column_values(col_name)<br/>    d[col_name] = [x for x in col_list]</span></pre><p id="5612" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">输出<code class="fe np nq nr ns b">dict</code>应该如下所示:</p><pre class="kj kk kl km gt ok ns ol om aw on bi"><span id="7bc5" class="ny mk it ns b gy oo op l oq or">{'node': [("Bob" :person{age: 22, name: "Bob"})]}</span></pre></div><div class="ab cl mc md hx me" role="separator"><span class="mf bw bk mg mh mi"/><span class="mf bw bk mg mh mi"/><span class="mf bw bk mg mh"/></div><div class="im in io ip iq"><h1 id="9566" class="mj mk it bd ml mm mn mo mp mq mr ms mt jz mu ka mv kc mw kd mx kf my kg mz na bi translated">NebulaGraph生态系统工具</h1><p id="16d1" class="pw-post-body-paragraph kz la it lb b lc nb ju le lf nc jx lh li nd lk ll lm ne lo lp lq nf ls lt lu im bi translated">NebulaGraph还提供了一些有用的工具，作为其生态系统的一部分:</p><ul class=""><li id="c7bd" class="ng nh it lb b lc ld lf lg li ni lm nj lq nk lu nl nm nn no bi translated"><code class="fe np nq nr ns b"><a class="ae ky" href="https://docs.nebula-graph.io/3.2.0/nebula-explorer/about-explorer/ex-ug-what-is-explorer/" rel="noopener ugc nofollow" target="_blank">NebulaGraph Explorer</a></code> —基于浏览器的可视化工具，用于可视化与图形数据的交互。帮助显示图形数据以便快速分析。</li><li id="db96" class="ng nh it lb b lc nt lf nu li nv lm nw lq nx lu nl nm nn no bi translated"><code class="fe np nq nr ns b"><a class="ae ky" href="https://docs.nebula-graph.io/3.2.0/nebula-dashboard/1.what-is-dashboard/" rel="noopener ugc nofollow" target="_blank">NebulaGraph Dashboard</a></code> —监控NebulaGraph集群中机器和服务状态的可视化工具。它带有社区版和企业版。</li><li id="a965" class="ng nh it lb b lc nt lf nu li nv lm nw lq nx lu nl nm nn no bi translated"><code class="fe np nq nr ns b"><a class="ae ky" href="https://docs.nebula-graph.io/3.2.0/nebula-exchange/about-exchange/ex-ug-what-is-exchange/" rel="noopener ugc nofollow" target="_blank">NebulaGraph Exchange</a></code>—Apache Spark应用程序，用于分布式环境中的数据流和集群数据到NebulaGraph的迁移。它带有社区版和企业版。</li></ul></div><div class="ab cl mc md hx me" role="separator"><span class="mf bw bk mg mh mi"/><span class="mf bw bk mg mh mi"/><span class="mf bw bk mg mh"/></div><div class="im in io ip iq"><h1 id="6bd6" class="mj mk it bd ml mm mn mo mp mq mr ms mt jz mu ka mv kc mw kd mx kf my kg mz na bi translated">结论</h1><p id="722f" class="pw-post-body-paragraph kz la it lb b lc nb ju le lf nc jx lh li nd lk ll lm ne lo lp lq nf ls lt lu im bi translated">让我们回顾一下你今天所学的内容。</p><p id="4cf1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">本文首先简要介绍了NebulaGraph。它还介绍了图形数据库和关系数据库之间的区别。</p><p id="203d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然后，它强调了在本地机器上设置和安装NebulaGraph服务器和Nebula控制台的步骤。</p><p id="1dd8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">随后，它探索了NebulaGraph查询语言(nGQL)。本教程提供了与CRUD操作相关的详细解释和代码示例。</p><p id="86a1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">本文继续举例说明如何使用Python客户机来连接和管理NebulaGraph服务器。</p><p id="db92" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">最后一节讲了NebulaGraph提供的生态系统工具。</p><p id="7d8e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">感谢你阅读这篇文章。祝你有美好的一天！</p></div><div class="ab cl mc md hx me" role="separator"><span class="mf bw bk mg mh mi"/><span class="mf bw bk mg mh mi"/><span class="mf bw bk mg mh"/></div><div class="im in io ip iq"><h1 id="f81e" class="mj mk it bd ml mm mn mo mp mq mr ms mt jz mu ka mv kc mw kd mx kf my kg mz na bi translated">参考</h1><ol class=""><li id="8206" class="ng nh it lb b lc nb lf nc li ow lm ox lq oy lu oz nm nn no bi translated"><a class="ae ky" href="https://www.nebula-graph.io/" rel="noopener ugc nofollow" target="_blank">星云图——官方网页</a></li><li id="8bfe" class="ng nh it lb b lc nt lf nu li nv lm nw lq nx lu oz nm nn no bi translated"><a class="ae ky" href="https://docs.nebula-graph.io" rel="noopener ugc nofollow" target="_blank">星云图—文档</a></li><li id="6c23" class="ng nh it lb b lc nt lf nu li nv lm nw lq nx lu oz nm nn no bi translated"><a class="ae ky" href="https://github.com/vesoft-inc/nebula-python" rel="noopener ugc nofollow" target="_blank"> NebulaGraph — Python客户端</a></li></ol></div></div>    
</body>
</html>