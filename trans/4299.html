<html>
<head>
<title>How To Drop a List of Rows From Pandas DataFrame</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何从Pandas数据框架中删除行列表</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/drop-rows-pandas-d1772a054f0#2022-09-22">https://towardsdatascience.com/drop-rows-pandas-d1772a054f0#2022-09-22</a></blockquote><div><div class="fc ii ij ik il im"/><div class="in io ip iq ir"><div class=""/><div class=""><h2 id="af72" class="pw-subtitle-paragraph jr it iu bd b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki dk translated">用Python从pandas数据帧中删除多行</h2></div><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj kj"><img src="../Images/d176a6bdf984eff91bfd9fed0e6f5dd4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*uAkp9Fyh4Dq0MlI6m79wWA.jpeg"/></div></div><p class="kv kw gk gi gj kx ky bd b be z dk translated"><a class="ae kz" href="https://unsplash.com/@stanyw?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">王禹</a>在<a class="ae kz" href="https://unsplash.com/s/photos/pandas?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍照</p></figure><p id="915a" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">当处理pandas数据帧时，我们通常希望丢弃原始结构中的行。Pandas提供了一个直观的API，我们可以利用它来执行这样的操作。</p><p id="ceee" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">在今天的文章中，我们将通过提供相应记录的索引列表来演示如何从pandas数据帧中删除行。此外，在处理大量数据时，我们将探索一些替代方法。</p></div><div class="ab cl lw lx hy ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="in io ip iq ir"><p id="bdca" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">首先，让我们创建一个示例数据框架，我们将在整个教程中引用它来演示一些概念，并帮助您逐步完成这个过程。</p><pre class="kk kl km kn gu md me mf mg aw mh bi"><span id="69a1" class="mi mj iu me b gz mk ml l mm mn">import pandas as pd </span><span id="868b" class="mi mj iu me b gz mo ml l mm mn">df = pd.DataFrame(<br/>    [<br/>        (1, 125, True, 'A'),<br/>        (2, 222, False, 'A'),<br/>        (3, 871, False, 'C'),<br/>        (4, 134, False, 'D'),<br/>        (5, 908, True, 'D'),<br/>        (6, 321, False, 'E'),<br/>        (7, 434, False, 'B'),<br/>        (8, 678, True, 'C'),<br/>    ], <br/>    columns=['colA', 'colB', 'colC', 'colD']<br/>)</span><span id="7bc9" class="mi mj iu me b gz mo ml l mm mn">print(df)<br/><strong class="me iv"><em class="mp">   colA  colB   colC colD<br/></em></strong><em class="mp">0     1   125   True    A<br/>1     2   222  False    A<br/>2     3   871  False    C<br/>3     4   134  False    D<br/>4     5   908   True    D<br/>5     6   321  False    E<br/>6     7   434  False    B<br/>7     8   678   True    C</em></span></pre></div><div class="ab cl lw lx hy ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="in io ip iq ir"><h2 id="b3b4" class="mi mj iu bd mq mr ms dn mt mu mv dp mw lj mx my mz ln na nb nc lr nd ne nf ng bi translated">删除带有索引列表的记录</h2><p id="8797" class="pw-post-body-paragraph la lb iu lc b ld nh jv lf lg ni jy li lj nj ll lm ln nk lp lq lr nl lt lu lv in bi translated">上面输出中最左边的列(0–7)对应于我们的pandas数据帧中每个记录的索引。然后，我们可以创建一个列表，包含我们希望删除的记录的索引</p><pre class="kk kl km kn gu md me mf mg aw mh bi"><span id="0c6a" class="mi mj iu me b gz mk ml l mm mn">drop_idx = [1, 3, 6]</span></pre><p id="08e0" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">然后利用<code class="fe nm nn no me b"><a class="ae kz" href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.drop.html" rel="noopener ugc nofollow" target="_blank">pandas.DataFrame.drop()</a></code>方法直接指定要删除的索引或列名。最后，我们将索引列表分为一系列索引标签:</p><pre class="kk kl km kn gu md me mf mg aw mh bi"><span id="6041" class="mi mj iu me b gz mk ml l mm mn">df = df.drop(df.index[<!-- -->drop_idx<!-- -->])</span><span id="f89c" class="mi mj iu me b gz mo ml l mm mn">print(df)</span><span id="8f17" class="mi mj iu me b gz mo ml l mm mn"><strong class="me iv"><em class="mp">   colA  colB   colC colD<br/></em></strong><em class="mp">0     1   125   True    A<br/>2     3   871  False    C<br/>4     5   908   True    D<br/>5     6   321  False    E<br/>7     8   678   True    C</em></span></pre><p id="0e46" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">请注意，如果您不执行就地更改，您将不得不将<code class="fe nm nn no me b">drop()</code>方法的结果赋回您的<code class="fe nm nn no me b">df</code>，如上例所示。要执行就地更改，您需要做的就是在调用<code class="fe nm nn no me b">drop()</code>时传递相应的参数:</p><pre class="kk kl km kn gu md me mf mg aw mh bi"><span id="6d08" class="mi mj iu me b gz mk ml l mm mn">df.drop(df.index[<!-- -->drop_idx<!-- -->], <!-- -->axis=0, <!-- -->inplace=True)</span></pre></div><div class="ab cl lw lx hy ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="in io ip iq ir"><h2 id="9aec" class="mi mj iu bd mq mr ms dn mt mu mv dp mw lj mx my mz ln na nb nc lr nd ne nf ng bi translated">处理大量数据</h2><p id="3acb" class="pw-post-body-paragraph la lb iu lc b ld nh jv lf lg ni jy li lj nj ll lm ln nk lp lq lr nl lt lu lv in bi translated">当处理大型数据帧时——或者甚至当需要删除大量记录时，上一节中介绍的<code class="fe nm nn no me b">df.drop()</code>效率不会很高，并且可能会花费大量时间。</p><p id="83e8" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">在按索引删除行时，处理大型数据帧的最有效方法是实际上反转问题。换句话说，我们不是找出需要删除的记录，而是处理我们实际上想要保留在结果数据帧中的行。</p><p id="b5d5" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">因此，我们从数据帧的所有索引中排除想要删除的索引，如下所示</p><pre class="kk kl km kn gu md me mf mg aw mh bi"><span id="c085" class="mi mj iu me b gz mk ml l mm mn">drop_idx = [1, 3, 6]<br/>keep_idx = list(set(range(df.shape[0])) - set(drop_idx))</span></pre><p id="6a30" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">最后，代替<code class="fe nm nn no me b">drop()</code>，我们调用<code class="fe nm nn no me b"><a class="ae kz" href="https://pandas.pydata.org/docs/reference/api/pandas.DataFrame.take.html" rel="noopener ugc nofollow" target="_blank">pandas.DataFrame.take()</a></code>方法，该方法可以通过提供沿轴的位置索引来检索元素(在我们的例子中，这将是行轴)。</p><pre class="kk kl km kn gu md me mf mg aw mh bi"><span id="f575" class="mi mj iu me b gz mk ml l mm mn">df = df.take(<!-- -->keep_idx<!-- -->)</span><span id="9e69" class="mi mj iu me b gz mo ml l mm mn">print(df)<br/><strong class="me iv"><em class="mp">   colA  colB   colC colD<br/></em></strong><em class="mp">0     1   125   True    A<br/>2     3   871  False    C<br/>4     5   908   True    D<br/>5     6   321  False    E<br/>7     8   678   True    C</em></span></pre></div><div class="ab cl lw lx hy ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="in io ip iq ir"><h2 id="3eda" class="mi mj iu bd mq mr ms dn mt mu mv dp mw lj mx my mz ln na nb nc lr nd ne nf ng bi translated">最后的想法</h2><p id="f311" class="pw-post-body-paragraph la lb iu lc b ld nh jv lf lg ni jy li lj nj ll lm ln nk lp lq lr nl lt lu lv in bi translated">通常，我们希望通过为想要删除的相应行提供一个索引列表来删除特定的记录。在今天的简短教程中，我们演示了几种不同的方法，具体取决于您正在处理的数据的大小。</p><p id="3ed9" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">请注意，您可能希望选择满足(或不满足)特定条件的记录，而不是删除特定的记录。如果这是你正在寻找的，那么请随意阅读下面的文章，它将带你完成这个过程。</p><div class="np nq gq gs nr ns"><a rel="noopener follow" target="_blank" href="/how-to-select-rows-from-pandas-dataframe-based-on-column-values-d3f5da421e93"><div class="nt ab fp"><div class="nu ab nv cl cj nw"><h2 class="bd iv gz z fq nx fs ft ny fv fx it bi translated">如何根据列值从Pandas数据框架中选择行</h2><div class="nz l"><h3 class="bd b gz z fq nx fs ft ny fv fx dk translated">探索如何根据pandas数据框架中的条件选择行</h3></div><div class="oa l"><p class="bd b dl z fq nx fs ft ny fv fx dk translated">towardsdatascience.com</p></div></div><div class="ob l"><div class="oc l od oe of ob og kt ns"/></div></div></a></div></div><div class="ab cl lw lx hy ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="in io ip iq ir"><p id="1b77" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated"><a class="ae kz" href="https://gmyrianthous.medium.com/membership" rel="noopener"> <strong class="lc iv">成为会员</strong> </a> <strong class="lc iv">阅读介质上的每一个故事。你的会员费直接支持我和你看的其他作家。你也可以在媒体上看到所有的故事。</strong></p><div class="np nq gq gs nr ns"><a href="https://gmyrianthous.medium.com/membership" rel="noopener follow" target="_blank"><div class="nt ab fp"><div class="nu ab nv cl cj nw"><h2 class="bd iv gz z fq nx fs ft ny fv fx it bi translated">通过我的推荐链接加入Medium-Giorgos Myrianthous</h2><div class="nz l"><h3 class="bd b gz z fq nx fs ft ny fv fx dk translated">作为一个媒体会员，你的会员费的一部分会给你阅读的作家，你可以完全接触到每一个故事…</h3></div><div class="oa l"><p class="bd b dl z fq nx fs ft ny fv fx dk translated">gmyrianthous.medium.com</p></div></div><div class="ob l"><div class="oh l od oe of ob og kt ns"/></div></div></a></div></div><div class="ab cl lw lx hy ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="in io ip iq ir"><p id="676e" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated"><strong class="lc iv">相关文章你可能也喜欢</strong></p><div class="np nq gq gs nr ns"><a rel="noopener follow" target="_blank" href="/how-to-efficiently-convert-a-pyspark-dataframe-to-pandas-8bda2c3875c3"><div class="nt ab fp"><div class="nu ab nv cl cj nw"><h2 class="bd iv gz z fq nx fs ft ny fv fx it bi translated">加快PySpark和Pandas数据帧之间的转换</h2><div class="nz l"><h3 class="bd b gz z fq nx fs ft ny fv fx dk translated">将大火花数据帧转换为熊猫时节省时间</h3></div><div class="oa l"><p class="bd b dl z fq nx fs ft ny fv fx dk translated">towardsdatascience.com</p></div></div><div class="ob l"><div class="oi l od oe of ob og kt ns"/></div></div></a></div></div><div class="ab cl lw lx hy ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="in io ip iq ir"><div class="kk kl km kn gu ns"><a rel="noopener follow" target="_blank" href="/how-to-merge-pandas-dataframes-221e49c41bec"><div class="nt ab fp"><div class="nu ab nv cl cj nw"><h2 class="bd iv gz z fq nx fs ft ny fv fx it bi translated">如何合并熊猫数据帧</h2><div class="nz l"><h3 class="bd b gz z fq nx fs ft ny fv fx dk translated">对熊猫数据帧执行左、右、内和反连接</h3></div><div class="oa l"><p class="bd b dl z fq nx fs ft ny fv fx dk translated">towardsdatascience.com</p></div></div><div class="ob l"><div class="oj l od oe of ob og kt ns"/></div></div></a></div></div><div class="ab cl lw lx hy ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="in io ip iq ir"><div class="kk kl km kn gu ns"><a rel="noopener follow" target="_blank" href="/data-engineer-tools-c7e68eed28ad"><div class="nt ab fp"><div class="nu ab nv cl cj nw"><h2 class="bd iv gz z fq nx fs ft ny fv fx it bi translated">数据工程师的工具</h2><div class="nz l"><h3 class="bd b gz z fq nx fs ft ny fv fx dk translated">数据工程工具箱的基础</h3></div><div class="oa l"><p class="bd b dl z fq nx fs ft ny fv fx dk translated">towardsdatascience.com</p></div></div><div class="ob l"><div class="ok l od oe of ob og kt ns"/></div></div></a></div></div></div>    
</body>
</html>