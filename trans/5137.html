<html>
<head>
<title>Building a Simple Web Application Using AWS</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用 AWS 构建简单的 Web 应用程序</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/building-a-simple-web-application-using-aws-605436d77407#2022-11-16">https://towardsdatascience.com/building-a-simple-web-application-using-aws-605436d77407#2022-11-16</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="1629" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">你是 AWS 新手吗？—本教程是为您设计的。</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/474de1c6411211cad9e481bd84812e51.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*PXVODZEHnDUFM1fGWO-3cw.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">克里斯·斯皮格尔在<a class="ae ky" href="https://unsplash.com/@chrisspiegl?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</p></figure><p id="0c35" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在本文中，我将向您展示如何在 AWS 上构建一个简单的 web 应用程序。首先，我们将创建一个显示“Hello World”的静态 web 应用程序然后，我们将发现如何将不同的 AWS 特性整合到 web 应用程序中，并了解它们如何协同工作。</p><p id="03c3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在这个项目中，你可以从标题中猜到，我们将使用 AWS cloud，它代表 Amazon Web Services 一个优秀的云平台，为许多不同的用例提供了无尽的服务，从训练机器学习模型到托管网站和应用程序(在撰写本文时，大约有 200 个 AWS 服务可用)。</p><p id="077f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这个项目很好地介绍了云计算平台。如果你是新手，刚刚进入云服务，不要担心。开始学习新的东西永远不会太晚。</p><p id="21ad" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果你准备好了，让我们开始工作吧。这是我们将遵循的结构。</p><h2 id="ac68" class="lv lw it bd lx ly lz dn ma mb mc dp md li me mf mg lm mh mi mj lq mk ml mm mn bi translated">目录:</h2><ul class=""><li id="37c2" class="mo mp it lb b lc mq lf mr li ms lm mt lq mu lu mv mw mx my bi translated"><em class="mz">第一步——开始</em></li><li id="00dc" class="mo mp it lb b lc na lf nb li nc lm nd lq ne lu mv mw mx my bi translated"><em class="mz">步骤 2 — AWS Lambda 无服务器功能</em></li><li id="0ed3" class="mo mp it lb b lc na lf nb li nc lm nd lq ne lu mv mw mx my bi translated"><em class="mz">步骤 3 —将 Lambda 功能连接到网络应用</em></li><li id="22d9" class="mo mp it lb b lc na lf nb li nc lm nd lq ne lu mv mw mx my bi translated"><em class="mz">步骤 4 —创建一个 DynamoDB 表</em></li><li id="0a3d" class="mo mp it lb b lc na lf nb li nc lm nd lq ne lu mv mw mx my bi translated"><em class="mz">步骤 5— IAM 策略和权限</em></li><li id="e652" class="mo mp it lb b lc na lf nb li nc lm nd lq ne lu mv mw mx my bi translated"><em class="mz">最后一步——测试网络应用</em></li></ul></div><div class="ab cl nf ng hx nh" role="separator"><span class="ni bw bk nj nk nl"/><span class="ni bw bk nj nk nl"/><span class="ni bw bk nj nk"/></div><div class="im in io ip iq"><h1 id="2385" class="nm lw it bd lx nn no np ma nq nr ns md jz nt ka mg kc nu kd mj kf nv kg mm nw bi translated">步骤 1 —开始</h1><p id="5946" class="pw-post-body-paragraph kz la it lb b lc mq ju le lf mr jx lh li nx lk ll lm ny lo lp lq nz ls lt lu im bi translated">在这一步中，我们将学习如何使用 AWS Amplify 控制台为我们的 web 应用程序部署静态资源。</p><p id="d379" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">基本的 web 开发知识对这部分会有帮助。我们将创建我们的 HTML 文件。如前所述，该网站将是直截了当的，一个标题说“你好，世界！”</p><p id="a5a3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">作为这个项目的代码编辑，我使用了 Atom。随意用你最喜欢的。以下是该页面的代码片段:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oa ob l"/></div></figure><p id="4b45" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">有多种方法可以将我们的代码上传到 Amplify 控制台。比如我喜欢用 Git。为了使本文简单，我将向您展示如何通过拖放方法将它直接放入 Amplify 中。为此，我们必须压缩我们的 HTML 文件。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi oc"><img src="../Images/7f3eb178bf37c5958ac7246672a3f36b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1278/format:webp/1*JIKwiznHYTwgWz30ojq-XA.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">图片由作者提供。</p></figure><p id="3aee" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在，让我们去 AWS 放大器控制台。它看起来会像这样:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi od"><img src="../Images/a707fc680896bdee9d4d414c38884998.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dMq-LZbXWTPTDZAzIDxRng.png"/></div></div></figure><p id="115b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">当我们点击“开始”时，它会将我们带到以下屏幕(我们将在此屏幕上选择 Amplify Hosting):</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oe"><img src="../Images/5cb5c33365642e368c97871845b4b59d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jbqVK4fSTu_judijE1mZCg.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">图片由作者提供。</p></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi of"><img src="../Images/af9bfbf51baa42dbec92a596c90d40b4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*o2PwWF5ihwbn2sfHEgGjIw.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">图片由作者提供。</p></figure><p id="9fe9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我已经创建了一个 Amplify 应用程序项目，并将其命名为“Step1”</p><p id="88d8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然后，我删除了压缩的索引文件。Amplify 部署了代码，并返回了一个我们可以访问网站的域名 URL。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi og"><img src="../Images/d77f26dd0b106f2ba88d6dc8991d306d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0C8axsWvGXvg1UnWd__xKw.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">图片由作者提供。</p></figure><p id="62a1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">目前，我们的网站是这样的:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oh"><img src="../Images/63aca3034c7b01caa37f161588d7cc16.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fNV-vYIX6wdaiN6ukKAEDw.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">网站域名直播。图片由作者提供。</p></figure><p id="609f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这一步都做完了！多亏了 AWS Amplify，我们的静态 HTML 代码得以部署和运行。</p></div><div class="ab cl nf ng hx nh" role="separator"><span class="ni bw bk nj nk nl"/><span class="ni bw bk nj nk nl"/><span class="ni bw bk nj nk"/></div><div class="im in io ip iq"><h1 id="b13a" class="nm lw it bd lx nn no np ma nq nr ns md jz nt ka mg kc nu kd mj kf nv kg mm nw bi translated">步骤 2 — <em class="oi"> AWS Lambda 无服务器功能</em></h1><p id="68a2" class="pw-post-body-paragraph kz la it lb b lc mq ju le lf mr jx lh li nx lk ll lm ny lo lp lq nz ls lt lu im bi translated">在这一步中，我们将使用 AWS Lambda 服务创建一个无服务器功能。AWS Lambda 是一种计算服务，让我们在不使用全时运行的计算引擎的情况下完成任务。相反，只有当某些东西调用它时才起作用；非常有效的解决方案。</p><p id="cb17" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">给你一些想法，现实生活中无服务器计算的一个很好的例子是自动售货机。他们将请求发送到云端，然后处理作业，只是有人开始使用机器。你可以从<a class="ae ky" href="https://aws.amazon.com/lambda/" rel="noopener ugc nofollow" target="_blank">这里</a>了解更多关于 AWS Lambda 的信息。</p><p id="33e1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们转到 AWS 控制台内部的 Lambda 服务。顺便说一下，确保在 Amplify 中部署 web 应用程序代码的同一区域中创建函数。您可以在页面的右上角看到地区名称，就在帐户名称的旁边。</p><p id="6fbb" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">是时候创建一个函数了。对于运行时编程语言参数:我选择了 Python 3.7，但也可以选择一种您更熟悉的语言和版本。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oj"><img src="../Images/5130f6715ea7a88541b3d813f3588423.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7oncsJw2lo1AfK5SKkZzSA.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">λ函数。图片由作者提供。</p></figure><p id="8400" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">创建 lambda 函数后，我们将看到以下屏幕:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ok"><img src="../Images/b3f38b6a1fc897bf38b3318bcc988c30.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*TcEUbS3qTsyhj9ZQQmyYIg.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">Lambda 功能代码。图片由作者提供。</p></figure><p id="48c4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在，让我们编辑 lambda 函数。下面是一个从事件 JSON 输入中提取名字和姓氏的函数。然后返回一个上下文字典。body 键存储 JSON，这是一个问候字符串。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oa ob l"/></div></figure><p id="3344" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">编辑并保存<em class="mz"> lambda_function </em>之后，让我们继续前进到<strong class="lb iu"> Test </strong>选项卡并创建一个事件。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ol"><img src="../Images/7576a65e2a7a768feeebd2882dced3eb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*MK9imCRZ-VrIUALc97NzIQ.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">测试 Lambda 函数。图片由作者提供。</p></figure><p id="9852" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">以下是我们部署并运行测试后的执行结果:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi om"><img src="../Images/dacf39fc86e1556c0cf95067ea9347e8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*656Yxm7ZPSRtTrLEGRcNYQ.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">图片由作者提供。</p></figure><p id="970e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">执行结果包含以下元素:</p><ul class=""><li id="7de3" class="mo mp it lb b lc ld lf lg li on lm oo lq op lu mv mw mx my bi translated">测试事件名称</li><li id="e2bb" class="mo mp it lb b lc na lf nb li nc lm nd lq ne lu mv mw mx my bi translated">反应</li><li id="3bb9" class="mo mp it lb b lc na lf nb li nc lm nd lq ne lu mv mw mx my bi translated">功能日志</li><li id="1fed" class="mo mp it lb b lc na lf nb li nc lm nd lq ne lu mv mw mx my bi translated">请求 ID</li></ul></div><div class="ab cl nf ng hx nh" role="separator"><span class="ni bw bk nj nk nl"/><span class="ni bw bk nj nk nl"/><span class="ni bw bk nj nk"/></div><div class="im in io ip iq"><h1 id="0256" class="nm lw it bd lx nn no np ma nq nr ns md jz nt ka mg kc nu kd mj kf nv kg mm nw bi translated">步骤 3— <em class="oi">将 Lambda 函数连接到 Web 应用程序</em></h1><p id="21af" class="pw-post-body-paragraph kz la it lb b lc mq ju le lf mr jx lh li nx lk ll lm ny lo lp lq nz ls lt lu im bi translated">在这一步中，我们将把无服务器 lambda 函数部署到我们的 web 应用程序中。我们将使用 API Gateway 来创建一个 REST API，它将允许我们从 web 浏览器发出请求。API Gateway service，从它的名字我们就能理解，就像是一座桥梁，连接着应用的后端和前端。</p><blockquote class="oq or os"><p id="3950" class="kz la mz lb b lc ld ju le lf lg jx lh ot lj lk ll ou ln lo lp ov lr ls lt lu im bi translated">REST:表象状态转移。</p><p id="b049" class="kz la mz lb b lc ld ju le lf lg jx lh ot lj lk ll ou ln lo lp ov lr ls lt lu im bi translated">API:应用编程接口。</p></blockquote><p id="568e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们抓紧时间，从 AWS 控制台打开 API 网关服务，然后创建一个新的 REST API。</p><p id="5d4c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">API 网关服务主页:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ow"><img src="../Images/c423912b7f49dcf07874cf955cbeff71.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*lJmoHJPX86LKsfOUJbBBRw.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">图片由作者提供。</p></figure><p id="15f9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">API 创建页面，我们为 REST API 命名、选择协议类型和端点类型。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ox"><img src="../Images/2d362ddd836f1269bf0bac671dd04128.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mGKaqwl1flAuKuOwK8rpPg.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">创建 API 页面。图片由作者提供。</p></figure><p id="a8c4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在下一页中，我们从<strong class="lb iu">动作</strong>按钮创建一个 POST 方法。集成类型将是 lambda 函数，并确保<strong class="lb iu">区域</strong>与您用来创建 lambda 函数的区域相同。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oy"><img src="../Images/c9301d034d87a720dcdb0b18011103ab.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*nwODwaK8amiaF3CuW72jDg.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">新的 API 方法设置。图片由作者提供。</p></figure><p id="7cbf" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">接下来，我们将启用 CORS，它代表<em class="mz">跨源资源共享</em>。这是一个 HTTP 头。然后单击启用 CORS 并替换现有的 CORS 标题。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oz"><img src="../Images/b21961f572005337a3c7055775a8f50a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*n74HJhYfxL5Nd7_pufl0Kg.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">API CORS 设置。图片由作者提供。</p></figure><p id="840f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">启用 CORS 头后，<strong class="lb iu">从 API actions 部署 API </strong>。</p><p id="85eb" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这将创造一个新的舞台；您将在左边栏的<strong class="lb iu">阶段</strong>选项卡下看到它。当您查看 stage 时，顶部会有一个名为<strong class="lb iu"> Invoke URL </strong>的 URL。请确保复制该 URL 在这个项目的最后一步，我们将使用它来调用我们的 lambda 函数。</p><p id="284b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">是时候测试我们的 REST API 了。</p><p id="6ae3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在<strong class="lb iu"> Resources </strong>选项卡下，点击 POST 后，我们将看到方法执行屏幕。当我们点击我在下面圈出的按钮时，就会出现<strong class="lb iu">测试</strong>页面。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pa"><img src="../Images/6d1dda4ab494b1887583972a365615a5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*sa_3ck-8sCQn4qoWY0KxvA.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">REST API 详细信息。图片由作者提供。</p></figure></div><div class="ab cl nf ng hx nh" role="separator"><span class="ni bw bk nj nk nl"/><span class="ni bw bk nj nk nl"/><span class="ni bw bk nj nk"/></div><div class="im in io ip iq"><h1 id="a135" class="nm lw it bd lx nn no np ma nq nr ns md jz nt ka mg kc nu kd mj kf nv kg mm nw bi translated">步骤 4— <em class="oi">创建一个 DynamoDB 表</em></h1><p id="5b6c" class="pw-post-body-paragraph kz la it lb b lc mq ju le lf mr jx lh li nx lk ll lm ny lo lp lq nz ls lt lu im bi translated">在这一步中，我们将在 Amazon DynamoDB(另一个 AWS 服务)中创建一个数据表。DynamoDB 是一个完全托管的 NoSQL 数据库服务，支持键值数据结构。</p><p id="0301" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">DynamoDB 仪表板:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pb"><img src="../Images/d78ce755464485f5400004ebbd72e746.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-bqv3PQKDgADfwv0kDrk3g.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">AWS DynamoDB 服务仪表板。图片由作者提供。</p></figure><p id="8ad8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们点击<strong class="lb iu">创建表格</strong>并填写一些关于我们数据表的信息:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pc"><img src="../Images/b8fff905354feee12032b0328789eda5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kOUAyCriO65EPyolF3dvVg.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">创建新的 DynamoDB 表。图片由作者提供。</p></figure><p id="fe3b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然后，让我们查看表的细节并复制 ARN，它代表<em class="mz">亚马逊资源名称:</em></p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pd"><img src="../Images/da901ca5c67c78c58c8107d39bac420d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4yrjQGO22kf1IzTnC7XxuA.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">web app-表格附加信息。图片由作者提供。</p></figure><p id="d378" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在下一步创建 IAM 访问策略时，我们将使用 ARN。</p></div><div class="ab cl nf ng hx nh" role="separator"><span class="ni bw bk nj nk nl"/><span class="ni bw bk nj nk nl"/><span class="ni bw bk nj nk"/></div><div class="im in io ip iq"><h1 id="5359" class="nm lw it bd lx nn no np ma nq nr ns md jz nt ka mg kc nu kd mj kf nv kg mm nw bi translated">步骤 5-IAM 策略和权限</h1><blockquote class="oq or os"><p id="a399" class="kz la mz lb b lc ld ju le lf lg jx lh ot lj lk ll ou ln lo lp ov lr ls lt lu im bi translated">IAM:身份和访问管理</p></blockquote><p id="5eaa" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我知道你在想什么。政策是一个无聊的话题，我也有这种感觉——直到我意识到政策在保护我们的安全方面起着至关重要的作用。AWS 推荐最小特权访问模型，这意味着不给用户超过需要的访问权限。同样的规则也适用于 AWS 服务。</p><p id="44ee" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">例如，即使对于这个简单的 web 应用程序项目，我们也已经开发了多个 AWS 服务:Amplify、Lambda、DynamoDB 和 API Gateway。了解他们如何相互交流以及他们共享何种信息至关重要。如果您想了解这方面的更多信息，这里的<a class="ae ky" href="https://docs.aws.amazon.com/IAM/latest/UserGuide/access_policies.html" rel="noopener ugc nofollow" target="_blank">是涵盖 IAM 中的策略和权限的官方文档部分。</a></p><p id="c9e1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">回到我们的项目。</p><p id="f7f1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们将在这里定义的策略将允许访问我们的 lambda 函数来写/更新我们使用 DynamoDB 创建的数据表。</p><p id="5a77" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们去 AWS Lambda 控制台。选择λ函数。然后，我们转到“配置”选项卡，我们将看到“执行”角色。点击链接，这将带我们到该功能的配置设置。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pe"><img src="../Images/4f080302d19a560cc8c123c060f13db2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*HdPXAG605aJks-wFBRyvJg.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">Lambda 功能配置。图片由作者提供。</p></figure><p id="3f83" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">从权限策略中，我们创建一个新的内联策略。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pf"><img src="../Images/99f524e90deec61c06fc770ec759293e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*GWXNkrOC9HCFoETLmDt5qg.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">Lambda 函数 IAM 策略。图片由作者提供。</p></figure><p id="af02" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然后，让我们将下面的代码添加到 JSON 部分。</p><pre class="kj kk kl km gt pg ph pi bn pj pk bi"><span id="f7e5" class="pl lw it ph b be pm pn l po pp">{<br/>"Version": "2022-11-10",<br/>"Statement": [<br/>    {<br/>        "Sid": "VisualEditor0",<br/>        "Effect": "Allow",<br/>        "Action": [<br/>            "dynamodb:PutItem",<br/>            "dynamodb:DeleteItem",<br/>            "dynamodb:GetItem",<br/>            "dynamodb:Scan",<br/>            "dynamodb:Query",<br/>            "dynamodb:UpdateItem"<br/>        ],<br/>        "Resource": "YOUR-DB-TABLE-ARN"<br/>    }<br/>    ]<br/>}</span></pre><p id="1819" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这个策略将允许我们的 Lambda 函数从 DynamoDB 数据表中读取、编辑、删除和更新项目。</p><p id="8803" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">最后，我们将更新 lambda 函数 python 代码。在主页上，我们可以在“配置”选项卡中找到“执行”角色。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pq"><img src="../Images/ec1c2bd2460d55d3f2f219ad64b1dd44.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*KURWvjkUY3WvOUU6-WRrEA.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">拉姆达代码。图片由作者提供。</p></figure><p id="a3a2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">下面是函数内部的 Python 代码:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oa ob l"/></div></figure><p id="5cea" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">响应采用 REST API 格式。完成更改后，确保部署代码。部署完成后，我们可以从橙色的测试按钮<strong class="lb iu">测试</strong>程序。</p><p id="0074" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们可以检查 DynamoDB 的结果。当我们运行该函数时，它已经更新了我们的数据表。当我们去 AWS DynamoDB，选择你的桌子，点击左边导航栏的<strong class="lb iu">探索项目</strong>。下面是 lambda 函数返回的对象:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pr"><img src="../Images/f93e7b5c1b16223c01b3fc40c912a175.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0IjnSOa5U3sQoKnsCJC34w.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">web app-表格。图片由作者提供。</p></figure></div><div class="ab cl nf ng hx nh" role="separator"><span class="ni bw bk nj nk nl"/><span class="ni bw bk nj nk nl"/><span class="ni bw bk nj nk"/></div><div class="im in io ip iq"><h1 id="19f2" class="nm lw it bd lx nn no np ma nq nr ns md jz nt ka mg kc nu kd mj kf nv kg mm nw bi translated">最后一步— <em class="oi">测试 Web 应用程序</em></h1><p id="c2b3" class="pw-post-body-paragraph kz la it lb b lc mq ju le lf mr jx lh li nx lk ll lm ny lo lp lq nz ls lt lu im bi translated">恭喜你走到这一步！</p><p id="fddf" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在这最后一步中，我们将看到我们刚刚构建的一切都在运行。我们将更新前端，以便能够在 lambda 函数的帮助下调用 REST API 并接收数据。</p><p id="4088" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">首先，让我们在代码编辑器中打开一个新文件，并添加以下代码行(我将其保存为 index.html):</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oa ob l"/></div></figure><p id="0222" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在保存之前，请确保更新 api 键文本。您可以在 REST API 细节下的 API 网关服务中找到它，称为 invoke URL。代码在第 34 行，这里我们用 requestOptions 变量获取 URL 链接。</p><p id="94ef" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">当代码全部设置好后，我们将把它导出为一个压缩文件，就像步骤 1 中一样。然后，使用控制台将文件上传到 AWS Amplify。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ps"><img src="../Images/e6064b1caad1128a3f18b37f7a33aafc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*sVk3aeaIjfpq9EQlFIfCWg.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">用户界面。图片由作者提供。</p></figure><p id="f004" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们的数据表接收带有输入数据的 post 请求。当点击“<strong class="lb iu">调用 API </strong>按钮时，lambda 函数调用 API。然后使用 javascript，我们将 JSON 格式的数据发送给 API。你可以在 callAPI 函数下找到这些步骤。</p><p id="eaf4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">您可以在下面的“我的数据表”中找到返回的项目:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pt"><img src="../Images/bd399f3d436af07855db4bdf5eb15f4d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6reVPLosOM-efNUtVn7UTA.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">web app-表返回的项目。图片由作者提供。</p></figure></div><div class="ab cl nf ng hx nh" role="separator"><span class="ni bw bk nj nk nl"/><span class="ni bw bk nj nk nl"/><span class="ni bw bk nj nk"/></div><div class="im in io ip iq"><h2 id="db29" class="lv lw it bd lx ly lz dn ma mb mc dp md li me mf mg lm mh mi mj lq mk ml mm mn bi translated">结论</h2><p id="39b3" class="pw-post-body-paragraph kz la it lb b lc mq ju le lf mr jx lh li nx lk ll lm ny lo lp lq nz ls lt lu im bi translated">恭喜你。我们已经使用 AWS 云平台创建了一个简单的 web 应用程序。云计算像滚雪球一样越来越成为开发新软件和技术的一部分。<a class="ae ky" href="https://builtin.com/data-science/cloud-computing-platforms" rel="noopener ugc nofollow" target="_blank">这里的</a>是一篇我与认证项目分享顶级云计算平台的文章。如果你今天能从这篇文章中学到一些新东西，我会很高兴。</p><p id="7b13" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">从事动手编程项目是提高技能的最佳方式。如果你对这个项目有任何问题或反馈，请随时联系我。我会尽我所能给你回信。</p><blockquote class="oq or os"><p id="20f6" class="kz la mz lb b lc ld ju le lf lg jx lh ot lj lk ll ou ln lo lp ov lr ls lt lu im bi translated">我是<a class="ae ky" href="https://lifexplorer.medium.com/membership" rel="noopener">贝希克·居文</a>，我喜欢分享关于编程、教育和生活的故事。<a class="ae ky" href="https://sonsuzdesignblog.ck.page/4226a8782a" rel="noopener ugc nofollow" target="_blank"> <strong class="lb iu">订阅</strong> </a>给我的时事通讯留下灵感。泰，</p></blockquote><p id="eabe" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果你想知道我写的是什么样的文章，这里有一些:</p><ul class=""><li id="eeae" class="mo mp it lb b lc ld lf lg li on lm oo lq op lu mv mw mx my bi translated"><a class="ae ky" rel="noopener" target="_blank" href="/building-a-face-recognizer-in-python-7fd6630c6340">使用 Python 构建人脸识别器</a></li><li id="af7c" class="mo mp it lb b lc na lf nb li nc lm nd lq ne lu mv mw mx my bi translated"><a class="ae ky" rel="noopener" target="_blank" href="/building-a-speech-emotion-recognizer-using-python-4c1c7c89d713">使用 Python 构建语音情感识别器</a></li><li id="29da" class="mo mp it lb b lc na lf nb li nc lm nd lq ne lu mv mw mx my bi translated"><a class="ae ky" href="https://medium.com/towards-data-science/speech-recognition-in-real-time-using-python-fbbd62e6ff9d" rel="noopener">使用 Python 进行实时语音识别</a></li></ul></div></div>    
</body>
</html>