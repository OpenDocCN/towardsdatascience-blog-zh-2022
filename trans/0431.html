<html>
<head>
<title>Production ML: Getting Started with MLOps</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">生产MLOps入门</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/production-ml-getting-started-with-mlops-4856c38b3eab#2022-02-17">https://towardsdatascience.com/production-ml-getting-started-with-mlops-4856c38b3eab#2022-02-17</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="a444" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">MLOps如何帮助您生产您的ML项目？为什么您需要尽快开始采用MLOps？</h2></div></div><div class="ab cl kf kg hu kh" role="separator"><span class="ki bw bk kj kk kl"/><span class="ki bw bk kj kk kl"/><span class="ki bw bk kj kk"/></div><div class="ij ik il im in"><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="gh gi km"><img src="../Images/d9b9cae56a80c6f8206584343670577f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*E5sni9fPGiQgFhpY"/></div></div><p class="ky kz gj gh gi la lb bd b be z dk translated">马库斯·温克勒在<a class="ae lc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</p></figure></div><div class="ab cl kf kg hu kh" role="separator"><span class="ki bw bk kj kk kl"/><span class="ki bw bk kj kk kl"/><span class="ki bw bk kj kk"/></div><div class="ij ik il im in"><p id="3a7b" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">长期以来，持续集成和持续交付(CI/CD)问题在“经典”IT项目中是众所周知的。这就是DevOps这个术语诞生的原因，它指定了促进软件开发所有阶段的自动化和监控的编程原则。</p><p id="7e5e" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">在我们的机器学习系统中，越来越多地开始工业化并集成到现有的IT系统中，挑战是将这些原则应用到数据科学的世界中。</p><p id="8d0b" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">构建模型很难，而将它们投入生产则更难。复制您的管道和结果，或者允许其他数据科学家这样做，也同样复杂。有多少次你不得不放弃以前的工作，因为它没有被适当地记录或太难复制？</p><p id="9cbd" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">在本文中，我们将看到MLOps如何解决这个问题，以及如何将这种方法集成到完整的机器学习生命周期中。</p><h1 id="2527" class="lz ma iq bd mb mc md me mf mg mh mi mj jw mk jx ml jz mm ka mn kc mo kd mp mq bi translated">什么是MLOps？</h1><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div class="gh gi mr"><img src="../Images/1d6e861296af5794dcc0a5862fbc2e7d.png" data-original-src="https://miro.medium.com/v2/resize:fit:800/format:webp/1*P3uNIUmehzi_QqkphImQ2Q.png"/></div><p class="ky kz gj gh gi la lb bd b be z dk translated">图片由作者提供—使用<a class="ae lc" href="https://www.openpeeps.com/" rel="noopener ugc nofollow" target="_blank"> open peeps </a>库。</p></figure><p id="fd0c" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">MLOps往往被定义为机器学习的DevOps的对应物。因此，我们可以推断MLOps允许机器学习项目的步骤的自动化和监控。</p><p id="d300" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">但在进一步深入这个主题之前，让我们简单回忆一下机器学习项目的不同阶段:</p><ul class=""><li id="6ece" class="ms mt iq lf b lg lh lj lk lm mu lq mv lu mw ly mx my mz na bi translated">业务需求和要求的定义，</li><li id="f634" class="ms mt iq lf b lg nb lj nc lm nd lq ne lu nf ly mx my mz na bi translated">数据收集和分析，</li><li id="e35c" class="ms mt iq lf b lg nb lj nc lm nd lq ne lu nf ly mx my mz na bi translated">数据验证，</li><li id="b1ff" class="ms mt iq lf b lg nb lj nc lm nd lq ne lu nf ly mx my mz na bi translated">数据预处理，</li><li id="0c1f" class="ms mt iq lf b lg nb lj nc lm nd lq ne lu nf ly mx my mz na bi translated">模型探索、培训、选择和验证，</li><li id="e09e" class="ms mt iq lf b lg nb lj nc lm nd lq ne lu nf ly mx my mz na bi translated">在生产中部署模型。</li></ul><h1 id="f0f7" class="lz ma iq bd mb mc md me mf mg mh mi mj jw mk jx ml jz mm ka mn kc mo kd mp mq bi translated">那么，MLOps和这一切有什么关系呢？</h1><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div class="gh gi ng"><img src="../Images/020ee4c6152dc2c809968f99b97dd0c8.png" data-original-src="https://miro.medium.com/v2/resize:fit:580/format:webp/1*OMgeqX3kTd8XlkTj-Ra9EA.png"/></div><p class="ky kz gj gh gi la lb bd b be z dk translated">图片由作者提供——使用<a class="ae lc" href="https://www.openpeeps.com/" rel="noopener ugc nofollow" target="_blank"> open peeps </a>库。</p></figure><p id="5ea5" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">嗯，理想情况下，到处都是！但是我把它分成了三个主要部分，我认为这三个部分很重要，我将在下面详述:</p><ul class=""><li id="015b" class="ms mt iq lf b lg lh lj lk lm mu lq mv lu mw ly mx my mz na bi translated">实验管理，</li><li id="707f" class="ms mt iq lf b lg nb lj nc lm nd lq ne lu nf ly mx my mz na bi translated">管道自动化，</li><li id="3cd6" class="ms mt iq lf b lg nb lj nc lm nd lq ne lu nf ly mx my mz na bi translated">和模型监控(尤其是功能性的)。</li></ul><p id="1b59" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">并非所有的原则对你的项目都是必要的。相反，它们是工具箱，您可以根据自己的需要决定是否应用。</p><h1 id="c8e9" class="lz ma iq bd mb mc md me mf mg mh mi mj jw mk jx ml jz mm ka mn kc mo kd mp mq bi translated">实验跟踪</h1><p id="04dd" class="pw-post-body-paragraph ld le iq lf b lg nh jr li lj ni ju ll lm nj lo lp lq nk ls lt lu nl lw lx ly ij bi translated">在某些情况下，很难跟踪一段时间内完成的所有实验(因为它们非常多，或者因为它们分散在几个月中，或者因为团队非常大，等等)。).此外，代码并不总是保留(当我们决定尝试另一种模型时，这有什么意义呢？).但是，跟踪这些运行对于审计来说非常有用，有助于调试或证明所做的选择。</p><p id="0bd2" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">这就是实验跟踪的用武之地:</p><p id="eab8" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">实验跟踪侧重于迭代模型开发阶段，此时数据科学家尝试不同的配置以实现期望的性能。</p><p id="75bc" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">例如，如何避免截图来记录和分享项目进展，并快速重现以前的实验？</p><p id="e839" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">实验跟踪可以总结为几个简单的原则:</p><ul class=""><li id="e926" class="ms mt iq lf b lg lh lj lk lm mu lq mv lu mw ly mx my mz na bi translated">在一个地方集中和组织所有的实验，</li><li id="e846" class="ms mt iq lf b lg nb lj nc lm nd lq ne lu nf ly mx my mz na bi translated">对比实验和分析结果来调试模型，</li><li id="0076" class="ms mt iq lf b lg nb lj nc lm nd lq ne lu nf ly mx my mz na bi translated">改善协作:查看每个人都在做什么，轻松共享实验结果，访问实验数据(输入、指标等。),</li><li id="783b" class="ms mt iq lf b lg nb lj nc lm nd lq ne lu nf ly mx my mz na bi translated">分析和管理实验。</li></ul><h1 id="e91b" class="lz ma iq bd mb mc md me mf mg mh mi mj jw mk jx ml jz mm ka mn kc mo kd mp mq bi translated">从技术上来说，我们该怎么做？</h1><p id="4c10" class="pw-post-body-paragraph ld le iq lf b lg nh jr li lj ni ju ll lm nj lo lp lq nk ls lt lu nl lw lx ly ij bi translated">每个团队可以使用其工具来管理和遵循其项目的ML实验的不同步骤。然而，出于效率的原因，建议考虑关于该主题的专门工具。许多开源或软件工具可以满足这种需求，并且可以轻松、安全地集成到所需的工作流程中。</p><p id="e61f" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">根据需要，实验跟踪工具可以具有不同的功能。从本质上讲，这是一个从纯技术角度出发的专用工具可以为我们提供的服务的非详尽列表。</p><p id="ae1d" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated"><strong class="lf ir">创建模型:</strong>在研究和数据探索阶段，必须能够:</p><ul class=""><li id="61ca" class="ms mt iq lf b lg lh lj lk lm mu lq mv lu mw ly mx my mz na bi translated">记录、记录、显示模型元数据(数据、指标、标签等。);</li><li id="0701" class="ms mt iq lf b lg nb lj nc lm nd lq ne lu nf ly mx my mz na bi translated">比较几个执行:比较表，图表等。</li><li id="70b5" class="ms mt iq lf b lg nb lj nc lm nd lq ne lu nf ly mx my mz na bi translated">创建或自动生成仪表板/摘要报告；</li><li id="6e95" class="ms mt iq lf b lg nb lj nc lm nd lq ne lu nf ly mx my mz na bi translated">跟踪硬件消耗，包括CPU、GPU、内存等。；</li><li id="138a" class="ms mt iq lf b lg nb lj nc lm nd lq ne lu nf ly mx my mz na bi translated">能够在同一个项目上合作，并分享这些新的集成；</li></ul><p id="4a9e" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated"><strong class="lf ir">部署到生产:</strong>一旦数据科学家选择了一个模型，ML工程师就必须将它投入生产。为此，在一个好工具的帮助下，实验跟踪允许:</p><ul class=""><li id="3417" class="ms mt iq lf b lg lh lj lk lm mu lq mv lu mw ly mx my mz na bi translated">轻松快速地重现和重新执行实验；</li><li id="6d04" class="ms mt iq lf b lg nb lj nc lm nd lq ne lu nf ly mx my mz na bi translated">跟踪实验及其元数据；</li><li id="4d74" class="ms mt iq lf b lg nb lj nc lm nd lq ne lu nf ly mx my mz na bi translated">将模型集成到自动化和CI/CD链中</li></ul><h1 id="49da" class="lz ma iq bd mb mc md me mf mg mh mi mj jw mk jx ml jz mm ka mn kc mo kd mp mq bi translated">管道自动化</h1><p id="37f3" class="pw-post-body-paragraph ld le iq lf b lg nh jr li lj ni ju ll lm nj lo lp lq nk ls lt lu nl lw lx ly ij bi translated">管道自动化的挑战是满足自动化我们的模型部署中可以自动化的东西的需求。毕竟，我们需要一个人每个月去运行Jupyter Notebook中的一个代码来重新培训生产中的模型吗？这个数据科学家在创建新模型时不是更有用吗？</p><p id="8c23" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">因此，让我们来看看应该采取什么措施:</p><ul class=""><li id="5125" class="ms mt iq lf b lg lh lj lk lm mu lq mv lu mw ly mx my mz na bi translated"><strong class="lf ir">代码的版本管理(<em class="nm">首先是模型，还有数据和预测)</em> </strong>:对于这一步，建议在代码管理工具(例如Git)中注册代码，并设置管理模型注册、ML元数据存储和特性存储的工具。</li><li id="245e" class="ms mt iq lf b lg nb lj nc lm nd lq ne lu nf ly mx my mz na bi translated"><strong class="lf ir">自动重新训练</strong>:一个模型在生产中的性能会随着时间的推移而下降，所以我们必须能够用更多的数据或更新的数据来重新训练模型，以跟上最新的趋势。注意，可以根据时间表或根据触发器(例如，性能下降到阈值以下)来触发再训练</li><li id="8499" class="ms mt iq lf b lg nb lj nc lm nd lq ne lu nf ly mx my mz na bi translated">自动测试:测试必须像传统的开发周期一样关注代码，但也要关注数据。</li><li id="868c" class="ms mt iq lf b lg nb lj nc lm nd lq ne lu nf ly mx my mz na bi translated"><strong class="lf ir">生产监控</strong>能够适应模型在生产中的行为。</li></ul><p id="772c" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">如果我们总结一下，就会得到下面的图表:</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="gh gi nn"><img src="../Images/f3f118ee2a41b6c82287488a862c5ff4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*lv368N51VQr_RhUd.jpg"/></div></div><p class="ky kz gj gh gi la lb bd b be z dk translated">演职员表:<a class="ae lc" href="https://ml-ops.org/content/mlops-principles," rel="noopener ugc nofollow" target="_blank">https://ml-ops.org/content/mlops-principles</a>(抄送-SA)</p></figure><h1 id="303c" class="lz ma iq bd mb mc md me mf mg mh mi mj jw mk jx ml jz mm ka mn kc mo kd mp mq bi translated">功能监控</h1><p id="f007" class="pw-post-body-paragraph ld le iq lf b lg nh jr li lj ni ju ll lm nj lo lp lq nk ls lt lu nl lw lx ly ij bi translated">机器学习模型是动态的，并且根据输入数据不断进化。因此，可以肯定地说，当数据科学家进行最后的修改时，模型在部署之前处于最佳状态。但是，如何确保这种模式随着时间的推移保持有效呢？</p><p id="bc5d" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">将监控、日志记录和警报工具与数据处理流程相结合可以防止风险。</p><p id="4ce8" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">但是什么会出错呢？</p><p id="3609" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">来源已更改，新数据，处理错误，数据规范化。</p><p id="aa0e" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">以下是我们可能遇到的不同步骤:</p><p id="b7ba" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated"><strong class="lf ir">如果数据与您的模型预期不符，很可能会影响性能。</strong></p><p id="dc88" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">我们可以控制每个输入变量的类型、格式和缺失数据的数量。此外，还有各种各样的统计测试和工具来测量数据中的偏差:</p><p id="9711" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">对于连续变量:散度和距离检验如Kullback-Leibler散度、Kolmogorov-Smirnov统计量(广泛使用)、总体稳定性指数(PSI)、Hellinger距离等。</p><p id="2712" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">分类变量:卡方检验、熵、基数或模态频率。</p><p id="34b8" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated"><strong class="lf ir">输入变量和目标之间的关系也会随着时间而改变。</strong></p><p id="9eaf" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">模型漂移可以用与上述相同的统计测试来检查。此外，度量和检查应该放在现实与早期的预测进行比较。最后，使用生产数据(当它变得可用时)，我们可以计算我们的模型的真实准确性。</p><p id="a556" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">可以解决的最后一点是业务KPI的创建，因为我们不能忘记我们的模型应该对业务问题做出响应。因此，遵循这些指标也有助于理解我们模型的性能。</p><p id="582b" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">现在已经发现了差距，我们应该做什么？</p><ul class=""><li id="4f2b" class="ms mt iq lf b lg lh lj lk lm mu lq mv lu mw ly mx my mz na bi translated">记录问题并确定它是季节性问题还是一次性异常。</li><li id="028d" class="ms mt iq lf b lg nb lj nc lm nd lq ne lu nf ly mx my mz na bi translated">重新训练模型，并将此模型应用于新数据。</li><li id="42ea" class="ms mt iq lf b lg nb lj nc lm nd lq ne lu nf ly mx my mz na bi translated">记录</li><li id="8164" class="ms mt iq lf b lg nb lj nc lm nd lq ne lu nf ly mx my mz na bi translated">提醒:不需要经常看仪表盘；当有必要采取行动时，我们会得到提醒。</li></ul><h1 id="9f69" class="lz ma iq bd mb mc md me mf mg mh mi mj jw mk jx ml jz mm ka mn kc mo kd mp mq bi translated">结论</h1><p id="d0aa" class="pw-post-body-paragraph ld le iq lf b lg nh jr li lj ni ju ll lm nj lo lp lq nk ls lt lu nl lw lx ly ij bi translated">MLOps是机器学习模型管理的可操作化。它旨在创建一个端到端的过程，用于创建、实现和管理可重复、可测试和可扩展的机器学习模型。</p><p id="7267" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">重要的是要明白实践MLOps的方法，顾名思义，并不是固定不变的。过程、架构和工具必须适应您环境的现实。</p><p id="5540" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">然而，在大多数情况下，有一些工作流模型可以用作指南。这些工作流程中的每个主要步骤都可以使用特定的工具来执行。有许多工具，无论是专有的还是开源的，都有助于MLOps的实践。</p><p id="42ad" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">如果要记住一件事，那就是:MLOps是一套实践，它应该尽可能敏捷，并且应该基于ML应用程序的交付和持续集成过程的自动化。</p></div><div class="ab cl kf kg hu kh" role="separator"><span class="ki bw bk kj kk kl"/><span class="ki bw bk kj kk kl"/><span class="ki bw bk kj kk"/></div><div class="ij ik il im in"><p id="5c80" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated"><strong class="lf ir">关于作者:</strong></p><p id="9b80" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">Hajar是人工智能倡导者、演讲者、顾问和认证机器学习工程师，他重视技术、创新和卓越。</p><p id="8ff1" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">她帮助任务驱动的组织利用数据科学和机器学习的力量来最大限度地发挥它们的影响。她以倾听客户需求并精心设计架构完善、创新且可扩展的ML解决方案来帮助客户实现目标而自豪。</p><p id="9c7d" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">可以在<a class="ae lc" href="https://www.linkedin.com/in/hajarkhizou/" rel="noopener ugc nofollow" target="_blank">LinkedIn</a>&amp;<a class="ae lc" href="https://twitter.com/HajarKhizou" rel="noopener ugc nofollow" target="_blank">Twitter</a>上找到她。</p></div></div>    
</body>
</html>