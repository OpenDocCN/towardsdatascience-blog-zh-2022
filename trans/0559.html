<html>
<head>
<title>How to Share your Jupyter Notebook with Mercury or Voilà</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何与 Mercury 或 Voilà共享您的 Jupyter 笔记本</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/how-to-share-your-jupyter-notebook-with-mercury-or-voil%C3%A0-2177110d2f6e#2022-02-22">https://towardsdatascience.com/how-to-share-your-jupyter-notebook-with-mercury-or-voil%C3%A0-2177110d2f6e#2022-02-22</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><h2 id="6f9e" class="ir is it bd b dl iu iv iw ix iy iz dk ja translated" aria-label="kicker paragraph">数据可视化</h2><div class=""/><div class=""><h2 id="e8d0" class="pw-subtitle-paragraph jz jc it bd b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq dk translated">使用 Mercury 或 Voilà将您的 Jupyter 笔记本放在网络上相当容易，但哪一种更容易呢——下面是这两种技术的简单比较</h2></div><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi kr"><img src="../Images/f9918a7ca8a9a3c743315a56dadeee26.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*SkoorhcspULJ2uOssBhjqw.png"/></div></div><p class="ld le gj gh gi lf lg bd b be z dk translated">这两个应用程序，作者图片</p></figure><p id="d2aa" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">在网上分享你的数据应该简单而有效。</p><p id="2219" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">你想把时间花在分析数据和产生结果上，对吗？演示很重要，但越简单越好。</p><p id="ef35" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">Mercury 和 Voilà都是可以将你的笔记本自动转换成交互式网络应用的工具。我们要看看哪个更容易和/或更好。</p><p id="ec27" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">为了说明使用<em class="md"> Mercury </em>或<em class="md"> Voilà </em>之间的区别，我将通过一个简单的应用程序从一个数据集生成一些交互式图形。</p><p id="bea2" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">将有两个版本:第一个是简单的笔记本，我们将使用 Mercury 框架将其转换为交互式应用程序；第二个使用<em class="md"> ipywidgets </em>，因此交互内置于笔记本中，并使用<em class="md"> </em> Voilà <em class="md">作为网页。</em></p><p id="ded0" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">然后我们会考虑哪种方法更好。</p><p id="e3a1" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">应用程序很简单，从 csv 读取伦敦的天气数据，并生成一个应用程序，显示所选年份每月的四个值的图表，<em class="md">最高温度</em>、<em class="md">最低温度</em>、<em class="md">降雨量</em>和<em class="md">日照时数</em>。使用滑块控件选择年份。</p><h2 id="4cf1" class="me mf it bd mg mh mi dn mj mk ml dp mm lq mn mo mp lu mq mr ms ly mt mu mv iz bi translated">汞</h2><p id="c1bf" class="pw-post-body-paragraph lh li it lj b lk mw kd lm ln mx kg lp lq my ls lt lu mz lw lx ly na ma mb mc im bi translated">第一种方法是使用水银。Mercury 将任何普通的 Jupyter 笔记本转变成一个网络应用程序。</p><p id="0481" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">为了包含交互，你需要在笔记本开头的一个特殊的<em class="md"> raw </em>单元格中定义小部件。下面是我为本文创建的一个:</p><pre class="ks kt ku kv gt nb nc nd ne aw nf bi"><span id="443a" class="me mf it nc b gy ng nh l ni nj">---<br/>title: Exploring London Weather Data<br/>description: Use Mercury to make a web app from a Jupyter notebook<br/>show-code: False<br/>params:<br/>   year:<br/>      input: slider<br/>      label: Select year<br/>      value: 1952<br/>      min: 1952<br/>      max: 2018<br/>---</span></pre><p id="eb8c" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">在一些描述性的值定义之后是一个<code class="fe nk nl nm nc b">params</code>部分。这指定了变量<code class="fe nk nl nm nc b">year</code>被绑定到一个输入控件，并为该控件定义了一些值(这些值是不言自明的)。</p><p id="6cd5" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">这必须是笔记本中的第一个单元格；第二个单元格应该定义绑定了控件的变量。在我们的案例中:</p><pre class="ks kt ku kv gt nb nc nd ne aw nf bi"><span id="f8c0" class="me mf it nc b gy ng nh l ni nj">year = 1952</span></pre><p id="57ed" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">接下来是笔记本的其余部分——我已经在一个代码单元中编写了整个应用程序。</p><figure class="ks kt ku kv gt kw"><div class="bz fp l di"><div class="nn no l"/></div><p class="ld le gj gh gi lf lg bd b be z dk translated">作者图片</p></figure><p id="0c01" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">正如您在上面的代码中看到的，我们将一个 csv 文件读入 Pandas 数据帧。数据从 1948 年开始，一直持续到 2018 年。这是 1962 年的数据:</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div class="gh gi np"><img src="../Images/6fb967c58fe719fba39177c4a99c419b.png" data-original-src="https://miro.medium.com/v2/resize:fit:980/format:webp/1*91MvhniZKN-ZkKYSaVqFXg.png"/></div><p class="ld le gj gh gi lf lg bd b be z dk translated">数据来源:作者，来自英国气象局发布的公开数据</p></figure><p id="384c" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">然后，我们使用由<code class="fe nk nl nm nc b">year</code>的值选择的数据帧的子集绘制图表:</p><p id="5eec" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated"><code class="fe nk nl nm nc b">weather[weather['Year']==year].plot(…)</code></p><p id="161d" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">如果你运行笔记本，你会看到 1952 年的图表，这是我们为<code class="fe nk nl nm nc b">year</code>设定的初始值。</p><p id="6675" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">然而，如果我们从笔记本中创建一个 Mercury 应用程序，并在我们的网络浏览器中运行，我们将看到交互式应用程序。</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi nq"><img src="../Images/e51d1bfa9bee0cb3a9b49d2f3d1dd357.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ep50yFq95n-YZj_n8xMDtQ.png"/></div></div><p class="ld le gj gh gi lf lg bd b be z dk translated">水星应用程序，作者图片</p></figure><p id="4f1d" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">滑块显示在左侧面板中，图表显示在右侧面板中。要更改年份值，我们移动滑块，然后点击<em class="md">运行</em>按钮，一组新的图表将会显示出来。</p><p id="a4df" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">当然，要创建 Mercury 应用程序，你需要安装 Mercury，</p><pre class="ks kt ku kv gt nb nc nd ne aw nf bi"><span id="38e5" class="me mf it nc b gy ng nh l ni nj">pip install mljar-mercury</span></pre><p id="b337" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">或者</p><pre class="ks kt ku kv gt nb nc nd ne aw nf bi"><span id="50d2" class="me mf it nc b gy ng nh l ni nj">conda install -c conda-forge mljar-mercury</span></pre><p id="5176" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">在终端窗口中，导航到笔记本所在的目录并运行命令:</p><pre class="ks kt ku kv gt nb nc nd ne aw nf bi"><span id="531b" class="me mf it nc b gy ng nh l ni nj">mercury run</span></pre><p id="22dd" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">该应用程序将在本地主机上运行:127.0.0.1:8000</p><h2 id="a79d" class="me mf it bd mg mh mi dn mj mk ml dp mm lq mn mo mp lu mq mr ms ly mt mu mv iz bi translated">瞧</h2><p id="250b" class="pw-post-body-paragraph lh li it lj b lk mw kd lm ln mx kg lp lq my ls lt lu mz lw lx ly na ma mb mc im bi translated">第二种方法是使用 Voilà从笔记本创建一个 web 应用程序，为此我们需要使用<em class="md"> ipywidgets </em>来创建交互控件。</p><p id="266c" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">因此，这里没有特殊的单元格，整个代码(我承认有点难看)都在一个单元格中:</p><figure class="ks kt ku kv gt kw"><div class="bz fp l di"><div class="nn no l"/></div></figure><p id="2b85" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">为图表定义了四个小部件，为标题定义了一个小部件，这些小部件显示在一个 4 x 2 的网格中。每个图表部件都绑定到一个 slider 部件，该部件在第 38 行定义，并显示在最后一个网格位置。</p><p id="46f3" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">其结果是，笔记本本身是交互式的，但当与 Voilà一起转换时，就变成了一个独立的网络应用程序。</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi nr"><img src="../Images/5e4edf46609bcc8f324bd04342b28746.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*atHhMCSpZZcrB_2fI1z_Qg.png"/></div></div><p class="ld le gj gh gi lf lg bd b be z dk translated">作者图片</p></figure><p id="a585" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">要转换笔记本电脑，您需要安装 Voilà:</p><pre class="ks kt ku kv gt nb nc nd ne aw nf bi"><span id="49b3" class="me mf it nc b gy ng nh l ni nj">pip install voila</span></pre><p id="10f5" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">或者</p><pre class="ks kt ku kv gt nb nc nd ne aw nf bi"><span id="98ba" class="me mf it nc b gy ng nh l ni nj">conda install -c conda-forge voila</span></pre><p id="baa1" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">在笔记本目录中，在终端窗口和弹出的网页中运行命令<code class="fe nk nl nm nc b">voila</code>,导航到笔记本。</p><p id="09da" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">我倾向于认为代码的不雅是由于<em class="md"> ipwidgets </em>的限制——你可能有不同的看法！</p><h2 id="359e" class="me mf it bd mg mh mi dn mj mk ml dp mm lq mn mo mp lu mq mr ms ly mt mu mv iz bi translated">选择哪一个</h2><p id="1878" class="pw-post-body-paragraph lh li it lj b lk mw kd lm ln mx kg lp lq my ls lt lu mz lw lx ly na ma mb mc im bi translated">那么，哪种方法是最好的呢？</p><p id="49b9" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">起初，我倾向于支持<strong class="lj jd"> Voilà </strong>因为交互是即时的，当你移动滑块时，图表会立即改变。非常好。但缺点是(即使在这个非常简单的应用程序中)代码也比其他情况下复杂，这完全是由于使用了 ipwidgets。</p><p id="87b3" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated"><strong class="lj jd"> Mercury </strong>方法是添加定义控件的额外单元格，并将它们绑定到笔记本中的变量。缺点是笔记本本身不是交互式的(当然，应用程序是)，但它的好处是更简单，因为笔记本专注于重要的东西，数据分析，而不是交互。</p><p id="031f" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">水银解决方案也需要按下按钮来实现改变。但这是一个缺点吗——也许浮华的动态图表有点被高估了。</p><p id="0ca2" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">我不会在这件事上下定决心。您可以下载代码(参见下面的链接)并查看产品网站(也链接到下面的),然后自己做出决定。</p><p id="2760" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated"><em class="md">关于如何将应用程序部署到公共网络主机(如 Heroku)的说明，请访问 Voilà和 Mercury 网站。</em></p></div><div class="ab cl ns nt hx nu" role="separator"><span class="nv bw bk nw nx ny"/><span class="nv bw bk nw nx ny"/><span class="nv bw bk nw nx"/></div><div class="im in io ip iq"><p id="7932" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">一如既往地感谢您的阅读，如果您想知道我何时发布新文章，请考虑注册下面的电子邮件提醒或订阅我在<a class="ae nz" href="https://technofile.substack.com/" rel="noopener ugc nofollow" target="_blank"> Substack </a>上的免费临时简讯。</p><p id="5cc0" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">如果你还不是一个媒体订阅者，那就注册吧，这样你就可以每月花 5 美元阅读尽可能多的文章。在这里注册<a class="ae nz" href="https://alan-jones.medium.com/membership" rel="noopener"/>，我将赚取一小笔佣金。</p></div><div class="ab cl ns nt hx nu" role="separator"><span class="nv bw bk nw nx ny"/><span class="nv bw bk nw nx ny"/><span class="nv bw bk nw nx"/></div><div class="im in io ip iq"><h2 id="79f8" class="me mf it bd mg mh mi dn mj mk ml dp mm lq mn mo mp lu mq mr ms ly mt mu mv iz bi translated">密码</h2><p id="e5ec" class="pw-post-body-paragraph lh li it lj b lk mw kd lm ln mx kg lp lq my ls lt lu mz lw lx ly na ma mb mc im bi translated">你需要的三个文件在我的<a class="ae nz" href="https://alanjones2.github.io/Alan-Jones-article-code/" rel="noopener ugc nofollow" target="_blank"> Github 库</a>里，直接链接在这里:</p><p id="e6ea" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated"><a class="ae nz" href="https://github.com/alanjones2/Alan-Jones-article-code/raw/master/mercury/heathrowDataFiltered.csv" rel="noopener ugc nofollow" target="_blank"> heathrowDataFiltered </a>。战斗支援车</p><p id="c1ef" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated"><a class="ae nz" href="https://github.com/alanjones2/Alan-Jones-article-code/raw/master/mercury/heathrowdataMercury2.ipynb" rel="noopener ugc nofollow" target="_blank">heathrowdatamercury 2 . ipynb</a></p><p id="ddc3" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated"><a class="ae nz" href="https://github.com/alanjones2/Alan-Jones-article-code/raw/master/mercury/heathrowdatawidgets2.ipynb" rel="noopener ugc nofollow" target="_blank">heathrowdatawidgets 2 . ipynb</a></p><h2 id="004f" class="me mf it bd mg mh mi dn mj mk ml dp mm lq mn mo mp lu mq mr ms ly mt mu mv iz bi translated">参考</h2><p id="a50e" class="pw-post-body-paragraph lh li it lj b lk mw kd lm ln mx kg lp lq my ls lt lu mz lw lx ly na ma mb mc im bi translated">我所使用的三种技术的网站如下:</p><div class="oa ob gp gr oc od"><a href="https://voila.readthedocs.io/en/stable/using.html" rel="noopener  ugc nofollow" target="_blank"><div class="oe ab fo"><div class="of ab og cl cj oh"><h2 class="bd jd gy z fp oi fr fs oj fu fw jc bi translated">使用瞧-瞧 0.3.0 文档</h2><div class="ok l"><h3 class="bd b gy z fp oi fr fs oj fu fw dk translated">Voilà可作为独立应用程序运行、转换和维护 Jupyter 笔记本电脑。这可以通过…</h3></div><div class="ol l"><p class="bd b dl z fp oi fr fs oj fu fw dk translated">瞧，readthedocs.io</p></div></div></div></a></div><div class="oa ob gp gr oc od"><a href="https://ipywidgets.readthedocs.io/en/latest/" rel="noopener  ugc nofollow" target="_blank"><div class="oe ab fo"><div class="of ab og cl cj oh"><h2 class="bd jd gy z fp oi fr fs oj fu fw jc bi translated">ipywidgets - Jupyter 小部件 8.0.0b1 文档</h2><div class="ok l"><h3 class="bd b gy z fp oi fr fs oj fu fw dk translated">学习变成一种身临其境的有趣体验。研究人员可以很容易地看到如何改变模型的输入影响…</h3></div><div class="ol l"><p class="bd b dl z fp oi fr fs oj fu fw dk translated">ipywidgets.readthedocs.io</p></div></div></div></a></div><div class="oa ob gp gr oc od"><a href="https://mljar.com/mercury/" rel="noopener  ugc nofollow" target="_blank"><div class="oe ab fo"><div class="of ab og cl cj oh"><h2 class="bd jd gy z fp oi fr fs oj fu fw jc bi translated">Mercury 与他人共享 Python 笔记本</h2><div class="ok l"><h3 class="bd b gy z fp oi fr fs oj fu fw dk translated">Mercury web framework 可以很容易地用于开发和部署在生产环境中。这种开发模式非常适合…</h3></div><div class="ol l"><p class="bd b dl z fp oi fr fs oj fu fw dk translated">mljar.com</p></div></div><div class="om l"><div class="on l oo op oq om or lb od"/></div></div></a></div></div></div>    
</body>
</html>