<html>
<head>
<title>4 Fundamental Questions When Working With a Confusion Matrix</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用混淆矩阵时的4个基本问题</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/4-fundamental-questions-when-working-with-a-confusion-matrix-e49fc9536066#2022-09-06">https://towardsdatascience.com/4-fundamental-questions-when-working-with-a-confusion-matrix-e49fc9536066#2022-09-06</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="fa4f" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">这将有望让你对混淆矩阵不那么困惑</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/4d9b633927975064f2deafa649b44d7e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*OtSw2RXzA5Hx34vh"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">丹尼尔·利维斯·佩鲁西在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</p></figure><p id="f7b2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">混淆矩阵是在<a class="ae ky" href="https://databasecamp.de/en/machine-learning" rel="noopener ugc nofollow" target="_blank">机器学习</a>中评估分类模型质量的工具。它检查有多少预测被正确或错误地分配给一个类。</p><h1 id="1513" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">1.如何判断一个分类？</h1><p id="12c6" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">在最简单的情况下，分类由两种状态组成。假设我们想调查电晕试验如何反映病人的感染状况。在这种情况下，电晕测试用作总共两种状态的分类器:感染或未感染。</p><p id="4d38" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">根据测试的分类是否真正正确，这两个类别总共可以产生四种状态:</p><ul class=""><li id="3435" class="ms mt it lb b lc ld lf lg li mu lm mv lq mw lu mx my mz na bi translated"><strong class="lb iu">真阳性</strong>:快速检测将此人归类为受感染，随后的聚合酶链式反应测试证实了这一结果。因此，快速测试是正确的。</li><li id="306b" class="ms mt it lb b lc nb lf nc li nd lm ne lq nf lu mx my mz na bi translated"><strong class="lb iu">假阳性</strong>:快速检测对一个人呈阳性，但随后的聚合酶链式反应测试显示这个人实际上没有被感染，即阴性。</li><li id="9594" class="ms mt it lb b lc nb lf nc li nd lm ne lq nf lu mx my mz na bi translated"><strong class="lb iu">真阴性</strong>:快速检测为阴性，人实际上没有被感染。</li><li id="9786" class="ms mt it lb b lc nb lf nc li nd lm ne lq nf lu mx my mz na bi translated"><strong class="lb iu">假阴性</strong>:电晕快速检测将受检者分类为健康，即阴性，然而，受检者被感染，因此应进行阳性快速检测。</li></ul><h1 id="8cdf" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">2.什么是混淆矩阵？</h1><p id="8109" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">混淆矩阵有助于评价和中立地评估学习分类的质量。此外，在矩阵的帮助下，可以更容易地计算具体指标。为了构建混淆矩阵，需要数据集的测试集。分类器将类别分配给数据点。</p><p id="5871" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">矩阵由已经提到的错误类型组成。行是测试集的预测类，列是测试集的实际标签:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ng"><img src="../Images/5f4f7be92708bbb8d2a628fa5b932134.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Apap5_v9isu_wUSvNO8eDw.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">混乱矩阵结构|来源:作者</p></figure><p id="daea" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">假设我们用于Corona快速测试的测试集包括200个人，按细胞细分如下:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nh"><img src="../Images/eabd503f565588ae6ee3b4297c245a61.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*m7fgda4W7hSEgHCuXr-L9w.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">混淆矩阵示例|来源:作者</p></figure><p id="68d7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">具体来说，该矩阵产生以下值:</p><ul class=""><li id="8574" class="ms mt it lb b lc ld lf lg li mu lm mv lq mw lu mx my mz na bi translated"><strong class="lb iu">真阳性= 120 </strong>:共有120人被快速检测归类为感染者，实际携带病毒。</li><li id="f2a6" class="ms mt it lb b lc nb lf nc li nd lm ne lq nf lu mx my mz na bi translated"><strong class="lb iu">假阳性= 20 </strong>:根据快速检测有20人患病，但并未实际感染。</li><li id="c27a" class="ms mt it lb b lc nb lf nc li nd lm ne lq nf lu mx my mz na bi translated"><strong class="lb iu">假阴性= 40 </strong> : 40名受试者快速检测呈阴性，但实际上已被感染。</li><li id="b16e" class="ms mt it lb b lc nb lf nc li nd lm ne lq nf lu mx my mz na bi translated"><strong class="lb iu">真阴性= 20 </strong> : 20人呈阴性，快速检测证实了这一点。</li></ul><p id="be84" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">因此，混淆矩阵通常用于确定分类器中经常出现的错误类型。我们的示例性Corona快速测试在70 %的情况下是正确的((120 + 20) / 200)，乍一看这是一个不错的值。然而，假阴性错误发生在所有病例的20 % (40 / 200)中。这意味着，在20%的情况下，这个人看起来是健康的，尽管他实际上是生病了，而且具有传染性。因此，在病毒性疾病的情况下，不仅准确性是决定性的，假阴性率也是决定性的。</p><p id="c26d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这些比率可以很容易地从混淆矩阵中读出，然后计算出来。</p><h1 id="8557" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">3.从混淆矩阵中可以计算出哪些比率？</h1><p id="8d80" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">由于每个用例关注不同的度量标准，其中一些度量标准已经随着时间的推移而发展。在这一章中，我们简要介绍最重要的几个。</p><h2 id="26bb" class="ni lw it bd lx nj nk dn mb nl nm dp mf li nn no mh lm np nq mj lq nr ns ml nt bi translated">灵敏度</h2><p id="4cef" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">敏感度或真阳性率描述了阳性分类数据点实际上为阳性的情况:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nu"><img src="../Images/43438e4153a344115e27f94a01899a86.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1Z4ckZXVTfLAol6imkt1Iw.png"/></div></div></figure><h2 id="97de" class="ni lw it bd lx nj nk dn mb nl nm dp mf li nn no mh lm np nq mj lq nr ns ml nt bi translated">特征</h2><p id="7102" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">特异性，或真阴性率，测量阴性分类数据点实际上为阴性的所有情况:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nv"><img src="../Images/2cf85fc045c153970dc110a43b60f3a8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4CI8U07iz_yalydGQO4YPg.png"/></div></div></figure><h2 id="b3a3" class="ni lw it bd lx nj nk dn mb nl nm dp mf li nn no mh lm np nq mj lq nr ns ml nt bi translated">精确</h2><p id="b0fd" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">精确度是正确、肯定分类的主题的相对频率:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nw"><img src="../Images/303b5e8f0ec69fa7c66020c7c3524a9e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*s_buq0DjuwHOBmyr1Jo7xg.png"/></div></div></figure><h2 id="49a4" class="ni lw it bd lx nj nk dn mb nl nm dp mf li nn no mh lm np nq mj lq nr ns ml nt bi translated">准确(性)</h2><p id="d491" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">我们已经知道其他类型模型的准确性。它描述了与所有分类相关的正确分类人员的总数:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nx"><img src="../Images/7abdb3597dadf58d2a5db7838e8cd351.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9nvpLNFAJMYAf5ye_yhylw.png"/></div></div></figure><h2 id="9ecb" class="ni lw it bd lx nj nk dn mb nl nm dp mf li nn no mh lm np nq mj lq nr ns ml nt bi translated">出错率</h2><p id="a7cf" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">错误率与准确性相反，即错误分类的百分比:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ny"><img src="../Images/73a599bfecb1c03a38a1d3be59dcf480.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*KSxxuUezkJEW8ezDOm80qA.png"/></div></div></figure><h1 id="1d47" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">4.如何用Python创建混淆矩阵？</h1><p id="021f" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">一旦你用<a class="ae ky" href="https://databasecamp.de/en/python-coding" rel="noopener ugc nofollow" target="_blank"> Python </a>训练了一个分类器，就可以使用“Scikit-Learn”模块创建真相矩阵。为此，我们只需要两个数组，其中包含测试集的预测类和测试集的实际标签。在我们的例子中，分类模型可以区分类“猫”、“蚂蚁”和“鸟”。因此，我们期望一个具有三行三列的混淆矩阵。</p><pre class="kj kk kl km gt nz oa ob oc aw od bi"><span id="85ee" class="ni lw it oa b gy oe of l og oh"># Import Scikit-Learn<br/>from sklearn.metrics import confusion_matrix</span><span id="57b1" class="ni lw it oa b gy oi of l og oh"># True Labels of Testset<br/>y_true = ["cat", "ant", "cat", "cat", "ant", "bird"]</span><span id="3a26" class="ni lw it oa b gy oi of l og oh"># Predicted Labels of Testset<br/>y_pred = ["ant", "ant", "cat", "cat", "ant", "cat"]<br/></span><span id="2019" class="ni lw it oa b gy oi of l og oh"># Create Confusion Matrix<br/>confusion_matrix(y_true, y_pred, labels=["ant", "bird", "cat"])</span><span id="2e0a" class="ni lw it oa b gy oi of l og oh">Out: <br/>array([[2, 0, 0],<br/>       [0, 0, 1],<br/>       [1, 0, 2]], dtype=int64)</span></pre><p id="d80d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这个矩阵现在也可以用来计算真阳性、假阳性等。从中。超过两个类别的分类手动起来会很复杂。</p><pre class="kj kk kl km gt nz oa ob oc aw od bi"><span id="76de" class="ni lw it oa b gy oe of l og oh"># Get Figures of a two-class Classification<br/>tn, fp, fn, tp = confusion_matrix([0, 1, 0, 1], [1, 1, 1, 0]).ravel()<br/>(tn, fp, fn, tp)</span><span id="eeb2" class="ni lw it oa b gy oi of l og oh">Out: <br/>(0, 2, 1, 1)</span><span id="ed73" class="ni lw it oa b gy oi of l og oh"># Get Figures of a multi-class Classification<br/>confusion_matrix(y_true, y_pred, labels=["ant", "bird", "cat"]).ravel()</span><span id="64bb" class="ni lw it oa b gy oi of l og oh">Out: <br/>array([2, 0, 0, 0, 0, 1, 1, 0, 2], dtype=int64)</span></pre><h1 id="1ae8" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">这是你应该带走的东西</h1><ul class=""><li id="8067" class="ms mt it lb b lc mn lf mo li oj lm ok lq ol lu mx my mz na bi translated">混淆矩阵有助于评估分类模型。</li><li id="e2b7" class="ms mt it lb b lc nb lf nc li nd lm ne lq nf lu mx my mz na bi translated">在大多数情况下，它包含四个字段:真阳性、真阴性、假阳性和假阴性。</li><li id="eeb8" class="ms mt it lb b lc nb lf nc li nd lm ne lq nf lu mx my mz na bi translated">这些字段可用于计算有助于评估分类器的特定指标。</li></ul></div><div class="ab cl om on hx oo" role="separator"><span class="op bw bk oq or os"/><span class="op bw bk oq or os"/><span class="op bw bk oq or"/></div><div class="im in io ip iq"><p id="9107" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><em class="ot">如果你喜欢我的作品，请在这里订阅</em><a class="ae ky" href="https://medium.com/subscribe/@niklas_lang" rel="noopener"><em class="ot"/></a><em class="ot">或者查看我的网站</em> <a class="ae ky" href="http://www.databasecamp.de/en/homepage" rel="noopener ugc nofollow" target="_blank"> <em class="ot">数据大本营</em> </a> <em class="ot">！还有，medium允许你每月免费阅读</em> <strong class="lb iu"> <em class="ot"> 3篇</em> </strong> <em class="ot">。如果你希望有</em><strong class="lb iu"><em class="ot">无限制的</em> </strong> <em class="ot">访问我的文章和数以千计的精彩文章，不要犹豫，点击我的推荐链接:</em><a class="ae ky" href="https://medium.com/@niklas_lang/membership" rel="noopener">【https://medium.com/@niklas_lang/membership】</a>每月花$<strong class="lb iu"><em class="ot">5</em></strong><em class="ot">获得会员资格</em></p></div><div class="ab cl om on hx oo" role="separator"><span class="op bw bk oq or os"/><span class="op bw bk oq or os"/><span class="op bw bk oq or"/></div><div class="im in io ip iq"><div class="kj kk kl km gt ou"><a rel="noopener follow" target="_blank" href="/association-rules-with-apriori-algorithm-574593e35223"><div class="ov ab fo"><div class="ow ab ox cl cj oy"><h2 class="bd iu gy z fp oz fr fs pa fu fw is bi translated">关联规则与Apriori算法</h2><div class="pb l"><h3 class="bd b gy z fp oz fr fs pa fu fw dk translated">了解如何查找频繁项集并计算置信度和支持度</h3></div><div class="pc l"><p class="bd b dl z fp oz fr fs pa fu fw dk translated">towardsdatascience.com</p></div></div><div class="pd l"><div class="pe l pf pg ph pd pi ks ou"/></div></div></a></div><div class="pj pk gp gr pl ou"><a rel="noopener follow" target="_blank" href="/an-introduction-to-tensorflow-fa5b17051f6b"><div class="ov ab fo"><div class="ow ab ox cl cj oy"><h2 class="bd iu gy z fp oz fr fs pa fu fw is bi translated">张量流简介</h2><div class="pb l"><h3 class="bd b gy z fp oz fr fs pa fu fw dk translated">了解机器学习框架、其架构以及与PyTorch的比较</h3></div><div class="pc l"><p class="bd b dl z fp oz fr fs pa fu fw dk translated">towardsdatascience.com</p></div></div><div class="pd l"><div class="pm l pf pg ph pd pi ks ou"/></div></div></a></div><div class="pj pk gp gr pl ou"><a rel="noopener follow" target="_blank" href="/software-as-a-service-the-game-changer-for-small-it-departments-f841b292b02a"><div class="ov ab fo"><div class="ow ab ox cl cj oy"><h2 class="bd iu gy z fp oz fr fs pa fu fw is bi translated">软件即服务:小型IT部门的游戏规则改变者</h2><div class="pb l"><h3 class="bd b gy z fp oz fr fs pa fu fw dk translated">软件即服务简介，与内部解决方案进行比较</h3></div><div class="pc l"><p class="bd b dl z fp oz fr fs pa fu fw dk translated">towardsdatascience.com</p></div></div><div class="pd l"><div class="pn l pf pg ph pd pi ks ou"/></div></div></a></div></div></div>    
</body>
</html>