<html>
<head>
<title>Using Sentiment Analysis to Explore Emotions Within Text</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用情感分析探索文本中的情感</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/using-sentiment-analysis-to-explore-emotions-within-text-ae48e3e93999#2022-02-26">https://towardsdatascience.com/using-sentiment-analysis-to-explore-emotions-within-text-ae48e3e93999#2022-02-26</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="cd11" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">应用2 <strong class="ak"> </strong>自然语言处理技术来比较玛丽·雪莱的《弗兰肯斯坦》中的情感与TF-IDF的每章关键词分析。</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/c4aa104179466be1edde9a7875ea65a8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*3O-rXV4uW_CVbJR9"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">照片由<a class="ae ky" href="https://unsplash.com/@nevenkrcmarek?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Neven Krcmarek </a>在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</p></figure><h1 id="664f" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">前提</h1><p id="d506" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">玛丽·雪莱的《弗兰肯斯坦》不仅因其在流行文化中的突出地位而闻名(例如<a class="ae ky" href="https://www.nationaltheatre.org.uk/shows/nt-at-home-frankenstein" rel="noopener ugc nofollow" target="_blank">https://www . national theatre . org . uk/shows/nt-at-home-Frankenstein</a>)，还因其在文学经典中的地位而闻名。这部小说充斥着(当时)新奇的想法，再加上情感的大起大落——这一点在这本书的形式中得到了反映。这样一个故事的丰富和复杂的结构使它成为情感分析的完美候选。</p><h2 id="3f50" class="mn la it bd lb mo mp dn lf mq mr dp lj ma ms mt ll me mu mv ln mi mw mx lp my bi translated">数据集</h2><p id="91ef" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">数据集是从古腾堡项目提供的在线书籍中提取的。</p><h2 id="b02d" class="mn la it bd lb mo mp dn lf mq mr dp lj ma ms mt ll me mu mv ln mi mw mx lp my bi translated">关键词分析</h2><p id="db66" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">为了验证，我们将每章的情感立场与使用TF-IDF算法提取的摘要关键词进行比较。这将在下面描述，并被发现可靠地代表了我之前的作品所展示的弗兰肯斯坦的叙事:</p><div class="mz na gp gr nb nc"><a rel="noopener follow" target="_blank" href="/using-tf-idf-to-form-descriptive-chapter-summaries-via-keyword-extraction-4e6fd857d190"><div class="nd ab fo"><div class="ne ab nf cl cj ng"><h2 class="bd iu gy z fp nh fr fs ni fu fw is bi translated">使用TF-IDF通过关键词提取形成描述性章节摘要。</h2><div class="nj l"><h3 class="bd b gy z fp nh fr fs ni fu fw dk translated">使用TF-IDF获取玛丽·雪莱的《弗兰肯斯坦》中每一章的描述性关键词。</h3></div><div class="nk l"><p class="bd b dl z fp nh fr fs ni fu fw dk translated">towardsdatascience.com</p></div></div><div class="nl l"><div class="nm l nn no np nl nq ks nc"/></div></div></a></div><h2 id="5af8" class="mn la it bd lb mo mp dn lf mq mr dp lj ma ms mt ll me mu mv ln mi mw mx lp my bi translated">内容</h2><p id="a620" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">在本文中，我们主要关注两个支持情感分析的python NLP库。这些是:</p><ul class=""><li id="2b63" class="nr ns it lt b lu nt lx nu ma nv me nw mi nx mm ny nz oa ob bi translated"><code class="fe oc od oe of b">TextBlob</code></li><li id="b641" class="nr ns it lt b lu og lx oh ma oi me oj mi ok mm ny nz oa ob bi translated"><code class="fe oc od oe of b">Text2Emotion</code></li></ul><p id="3476" class="pw-post-body-paragraph lr ls it lt b lu nt ju lw lx nu jx lz ma ol mc md me om mg mh mi on mk ml mm im bi translated">我们将依次把这些应用到《弗兰肯斯坦》的文本中，并利用这种类型的分析向我们揭示的任何洞见。</p></div><div class="ab cl oo op hx oq" role="separator"><span class="or bw bk os ot ou"/><span class="or bw bk os ot ou"/><span class="or bw bk os ot"/></div><div class="im in io ip iq"><h1 id="adcc" class="kz la it bd lb lc ov le lf lg ow li lj jz ox ka ll kc oy kd ln kf oz kg lp lq bi translated">TextBlob:简化文本处理</h1><p id="8d73" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">我们使用的第一个NLP库叫做<code class="fe oc od oe of b">textblob</code>，可以使用<code class="fe oc od oe of b">pip install textblob</code>安装。这是一个一体化的自然语言处理API，允许我们提取关于文本情感或极性的信息。</p><h2 id="b40c" class="mn la it bd lb mo mp dn lf mq mr dp lj ma ms mt ll me mu mv ln mi mw mx lp my bi translated">使用</h2><p id="6d60" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">我们首先将我们的章节文本转换成一个blob，然后可以查询它以获得总体统计数据。</p><pre class="kj kk kl km gt pa of pb pc aw pd bi"><span id="661d" class="mn la it of b gy pe pf l pg ph">from textblob import TextBlob</span><span id="88af" class="mn la it of b gy pi pf l pg ph">blob = TextBlob(chapter)</span></pre><p id="c97b" class="pw-post-body-paragraph lr ls it lt b lu nt ju lw lx nu jx lz ma ol mc md me om mg mh mi on mk ml mm im bi translated">这将返回一个具有几个属性的已处理对象，这将在下面讨论。</p><h1 id="acfb" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">感情</h1><p id="6ef7" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">由于我们主要对情感分析感兴趣，我们可以提取文本的主观性和极性:</p><pre class="kj kk kl km gt pa of pb pc aw pd bi"><span id="a945" class="mn la it of b gy pe pf l pg ph">blob.sentiment</span><span id="1ddf" class="mn la it of b gy pi pf l pg ph"># Sentiment(polarity=0.11179997960976226, subjectivity=0.48238807327937727)</span></pre><p id="fc45" class="pw-post-body-paragraph lr ls it lt b lu nt ju lw lx nu jx lz ma ol mc md me om mg mh mi on mk ml mm im bi translated">在这里，我们的文本内容被赋予两个分数:</p><ul class=""><li id="5f19" class="nr ns it lt b lu nt lx nu ma nv me nw mi nx mm ny nz oa ob bi translated"><em class="pj">主观性</em>:这是排名[0–1]，其中1是主观的，0是客观的</li><li id="8c93" class="nr ns it lt b lu og lx oh ma oi me oj mi ok mm ny nz oa ob bi translated"><em class="pj">极性:</em>文本音调的等级，其中+1为正，-1为负。接近0的值表示中性。</li></ul><h2 id="8579" class="mn la it bd lb mo mp dn lf mq mr dp lj ma ms mt ll me mu mv ln mi mw mx lp my bi translated">极性</h2><p id="bc17" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">结合前面工作中的关键词分析，我们可以使用它们的极性对章节进行排序。虽然这里所有的值都大于零，但分数越低的章节出现在怪物被追捕或胜利者哀悼死亡的地方。</p><pre class="kj kk kl km gt pa of pb pc aw pd bi"><span id="af1b" class="mn la it of b gy pe pf l pg ph">chapter 16         [cottage, hidingplace, towards, felix, wood]</span><span id="4ba5" class="mn la it of b gy pi pf l pg ph">chapter 10                    [thy, thou, ice, thee, mountains]</span><span id="d35b" class="mn la it of b gy pi pf l pg ph">chapter 17             [shall, consent, swear, demand, portion]</span><span id="5ad5" class="mn la it of b gy pi pf l pg ph">chapter 8     [innocence, justine, elizabeth, judges, confes...</span><span id="8d40" class="mn la it of b gy pi pf l pg ph">chapter 24                  [yet, ice, vengeance, shall, still]</span><span id="163b" class="mn la it of b gy pi pf l pg ph">chapter 7            [william, poor, ernest, murderer, justine]</span></pre><p id="258b" class="pw-post-body-paragraph lr ls it lt b lu nt ju lw lx nu jx lz ma ol mc md me om mg mh mi on mk ml mm im bi translated">相反，更快乐的篇章是在维克多·弗兰肯斯坦的青年时代，那时他对科学和医学的热情和兴趣仍然驱动着他所有的意图。同样地，我们也受到怪物的教育和崇拜，尽管他观察了菲利克斯和林中老人(第12-15章)。然而，当他新收养的家庭回避他时，这很快就被并置了(第16章)。</p><pre class="kj kk kl km gt pa of pb pc aw pd bi"><span id="2a64" class="mn la it of b gy pe pf l pg ph">chapter 15             [protectors, cottage, admire, old, read]</span><span id="6cd5" class="mn la it of b gy pi pf l pg ph">chapter 12                 [cottagers, felix, found, day, wood]</span><span id="bd79" class="mn la it of b gy pi pf l pg ph">chapter 2           [agrippa, studies, spirit, things, natural]</span><span id="909f" class="mn la it of b gy pi pf l pg ph">chapter 4               [pursuit, study, life, one, corruption]</span></pre><h2 id="4f44" class="mn la it bd lb mo mp dn lf mq mr dp lj ma ms mt ll me mu mv ln mi mw mx lp my bi translated">主观性</h2><p id="d6ad" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">同样，我们可以看看哪些章节更主观。我们再次看到与科学和发现有一个更客观的方向有关的章节:</p><pre class="kj kk kl km gt pa of pb pc aw pd bi"><span id="2c20" class="mn la it of b gy pe pf l pg ph">chapter 3     [science, natural, professor, philosophy, modern]</span><span id="06bf" class="mn la it of b gy pi pf l pg ph">chapter 11                  [cottage, found, fire, wood, light]</span><span id="a200" class="mn la it of b gy pi pf l pg ph">chapter 4               [pursuit, study, life, one, corruption]</span></pre><p id="18d2" class="pw-post-body-paragraph lr ls it lt b lu nt ju lw lx nu jx lz ma ol mc md me om mg mh mi on mk ml mm im bi translated">而那些关注情感和感觉的人更主观:</p><pre class="kj kk kl km gt pa of pb pc aw pd bi"><span id="6103" class="mn la it of b gy pe pf l pg ph">chapter 7            [william, poor, ernest, murderer, justine]</span><span id="2b57" class="mn la it of b gy pi pf l pg ph">chapter 8     [innocence, justine, elizabeth, judges, confes...</span><span id="a2f3" class="mn la it of b gy pi pf l pg ph">chapter 10                    [thy, thou, ice, thee, mountains]</span></pre></div><div class="ab cl oo op hx oq" role="separator"><span class="or bw bk os ot ou"/><span class="or bw bk os ot ou"/><span class="or bw bk os ot"/></div><div class="im in io ip iq"><h2 id="d085" class="mn la it bd lb mo mp dn lf mq mr dp lj ma ms mt ll me mu mv ln mi mw mx lp my bi translated">单字分析</h2><p id="8509" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">我们可以通过查看对每个极性和主观性得分有贡献的单词来进一步分析。我们可以通过以下方式访问它:</p><pre class="kj kk kl km gt pa of pb pc aw pd bi"><span id="d95f" class="mn la it of b gy pe pf l pg ph">blob.sentiment_assessments.assessments</span></pre><p id="2474" class="pw-post-body-paragraph lr ls it lt b lu nt ju lw lx nu jx lz ma ol mc md me om mg mh mi on mk ml mm im bi translated">例如，如果我们想在最后一章看到哪些单词是正面的，哪些是负面的(以及它们各自的权重)，我们可以使用:</p><pre class="kj kk kl km gt pa of pb pc aw pd bi"><span id="0f7c" class="mn la it of b gy pe pf l pg ph">In [127]: assesments[-1].sort_values('polarity')</span><span id="122d" class="mn la it of b gy pi pf l pg ph">Out[127]:</span><span id="0569" class="mn la it of b gy pi pf l pg ph">               polarity  subjectivity</span><span id="8d84" class="mn la it of b gy pi pf l pg ph">evil           -1.00           1.0<br/>pathetic       -1.00           1.0<br/>miserable      -1.00           1.0<br/>horrible       -1.00           1.0<br/>miserable      -1.00           1.0<br/>...              ...           ...<br/>incredible      0.90           0.9<br/>consummate      0.95           1.0<br/>exquisite       1.00           1.0<br/>excellent       1.00           1.0<br/>wonderful       1.00           1.0</span></pre></div><div class="ab cl oo op hx oq" role="separator"><span class="or bw bk os ot ou"/><span class="or bw bk os ot ou"/><span class="or bw bk os ot"/></div><div class="im in io ip iq"><h2 id="7ab8" class="mn la it bd lb mo mp dn lf mq mr dp lj ma ms mt ll me mu mv ln mi mw mx lp my bi translated">名词短语</h2><p id="ec7d" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">另一种分析情感的有用方法是使用名词短语。这些允许我们查看与正在讨论的相关的<em class="pj">上下文。要访问这些，我们可以使用:</em></p><pre class="kj kk kl km gt pa of pb pc aw pd bi"><span id="8311" class="mn la it of b gy pe pf l pg ph">blob.noun_phrases</span></pre><p id="ba3f" class="pw-post-body-paragraph lr ls it lt b lu nt ju lw lx nu jx lz ma ol mc md me om mg mh mi on mk ml mm im bi translated">这里我们选择了一些短语，它们为角色和物体的互动设置了场景。例如，即使没有阅读最后一章，我们也能从下面有限的片段中得出结论。</p><pre class="kj kk kl km gt pa of pb pc aw pd bi"><span id="c42c" class="mn la it of b gy pe pf l pg ph">WordList(['present situation', '<strong class="of iu">fury revenge</strong>', '<strong class="of iu">hateful i</strong>', 'life i', 'vast portion', '<strong class="of iu">barbarous countries</strong>', 'alive i', '<strong class="of iu">fiendish enemy</strong>', 'hours round', 'path i', 'william elizabeth', 'deep grief', 'i knelt', 'i kneel', '<strong class="of iu">eternal grief</strong>', 'i swear', 'thee o night', 'mortal conflict', 'purpose i', 'dear revenge', 'green herbage', <br/>...<br/>'<strong class="of iu">miserable frame</strong>', '<strong class="of iu">vanish i</strong>', 'cheeks light feeling', 'world affords', '<strong class="of iu">bitterest remorse</strong>', 'death farewell i', 'behold farewell frankenstein', '<strong class="of iu">thou wert</strong>', '<strong class="of iu">thou didst</strong>', '<strong class="of iu">thou hadst</strong>', '<strong class="of iu">thou wouldst</strong>', 'thou wert', 'solemn enthusiasm i', '<strong class="of iu">extinct i</strong>', 'funeral pile', 'ice raft'])</span></pre></div><div class="ab cl oo op hx oq" role="separator"><span class="or bw bk os ot ou"/><span class="or bw bk os ot ou"/><span class="or bw bk os ot"/></div><div class="im in io ip iq"><h1 id="9a10" class="kz la it bd lb lc ov le lf lg ow li lj jz ox ka ll kc oy kd ln kf oz kg lp lq bi translated">文本2情感:从文本中识别情感</h1><p id="3106" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">这是我们要看的两个库的第二个。Text2Emotion专注于表现消息中的潜在情绪，而不是简单地对其极性进行评分(如情绪分析)。这里，我们将剧本分为以下几组，而不是一个等级:</p><ul class=""><li id="80f0" class="nr ns it lt b lu nt lx nu ma nv me nw mi nx mm ny nz oa ob bi translated">幸福的</li><li id="fd0a" class="nr ns it lt b lu og lx oh ma oi me oj mi ok mm ny nz oa ob bi translated">愤怒的</li><li id="eeca" class="nr ns it lt b lu og lx oh ma oi me oj mi ok mm ny nz oa ob bi translated">惊喜</li><li id="6a2a" class="nr ns it lt b lu og lx oh ma oi me oj mi ok mm ny nz oa ob bi translated">悲哀的</li><li id="2297" class="nr ns it lt b lu og lx oh ma oi me oj mi ok mm ny nz oa ob bi translated">害怕</li></ul><h2 id="f54b" class="mn la it bd lb mo mp dn lf mq mr dp lj ma ms mt ll me mu mv ln mi mw mx lp my bi translated">装置</h2><pre class="kj kk kl km gt pa of pb pc aw pd bi"><span id="7d00" class="mn la it of b gy pe pf l pg ph">pip install text2emotion</span></pre><h2 id="3c4a" class="mn la it bd lb mo mp dn lf mq mr dp lj ma ms mt ll me mu mv ln mi mw mx lp my bi translated">使用</h2><p id="f121" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">使用非常简单，只需导入库，然后使用<code class="fe oc od oe of b">get_emotion</code>函数:</p><pre class="kj kk kl km gt pa of pb pc aw pd bi"><span id="8d1a" class="mn la it of b gy pe pf l pg ph">import text2emotion as te</span><span id="159d" class="mn la it of b gy pi pf l pg ph">emotion = te.get_emotion(chapter)</span></pre><p id="7459" class="pw-post-body-paragraph lr ls it lt b lu nt ju lw lx nu jx lz ma ol mc md me om mg mh mi on mk ml mm im bi translated">将此应用于我们语料库中的每一章，允许我们比较文本中存在的情感类型:</p><div class="kj kk kl km gt ab cb"><figure class="pk kn pl pm pn po pp paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><img src="../Images/236fa2b9983c4646ce821e861014b1b8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1502/format:webp/1*ReKujaF1DsMmHesMzi7pbw.png"/></div></figure><figure class="pk kn pq pm pn po pp paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><img src="../Images/8e3af08ad32a895dc5e5c9c87bc2d885.png" data-original-src="https://miro.medium.com/v2/resize:fit:500/format:webp/1*5_sK-cLB3k5QVeGhNIej0A.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk pr di ps pt translated">堆积面积图显示每个章节中的不同情绪。来源:丹尼尔·埃利斯</p></figure></div><p id="2a47" class="pw-post-body-paragraph lr ls it lt b lu nt ju lw lx nu jx lz ma ol mc md me om mg mh mi on mk ml mm im bi translated">堆积面积图让我们看到了小说所经历的周期性动荡。例如，在第12-14章中出现了明显的快乐高峰，怪物在森林里观察费利克斯，在故事的乞讨部分，维克多仍然对医学的奇迹和他的发现感兴趣。然而，这些时期紧接着是恐惧和悲伤的篇章(死亡和私刑)。利用这一点，我们能够将更多的信息归因于上面情感分析中提供的积极/消极。</p></div><div class="ab cl oo op hx oq" role="separator"><span class="or bw bk os ot ou"/><span class="or bw bk os ot ou"/><span class="or bw bk os ot"/></div><div class="im in io ip iq"><h1 id="dd79" class="kz la it bd lb lc ov le lf lg ow li lj jz ox ka ll kc oy kd ln kf oz kg lp lq bi translated">结论</h1><p id="194c" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">我们已经成功地执行了从情感到情感分析的一系列自然语言处理任务，并将其与由TF-IDF提取的章节内容和关键词进行了比较。</p><p id="84ea" class="pw-post-body-paragraph lr ls it lt b lu nt ju lw lx nu jx lz ma ol mc md me om mg mh mi on mk ml mm im bi translated">乍一看，似乎每个算法对小说的描述都多少反映了小说中的结构和事件。这表明对大量数据的自动分析在诸如新分类的任务中可以证明是非常宝贵的。</p><p id="588d" class="pw-post-body-paragraph lr ls it lt b lu nt ju lw lx nu jx lz ma ol mc md me om mg mh mi on mk ml mm im bi translated">不管怎样，为什么不自己尝试一下，看看你的想法呢？</p><p id="e2e7" class="pw-post-body-paragraph lr ls it lt b lu nt ju lw lx nu jx lz ma ol mc md me om mg mh mi on mk ml mm im bi translated"><em class="pj">(显然我的博士论文充满恐惧</em> \_(ツ)_/ <em class="pj"> ) </em></p></div><div class="ab cl oo op hx oq" role="separator"><span class="or bw bk os ot ou"/><span class="or bw bk os ot ou"/><span class="or bw bk os ot"/></div><div class="im in io ip iq"><h2 id="ce88" class="mn la it bd lb mo mp dn lf mq mr dp lj ma ms mt ll me mu mv ln mi mw mx lp my bi translated">额外资源</h2><div class="mz na gp gr nb nc"><a href="https://github.com/wolfiex/SentimentAnalysis-Frankenstein" rel="noopener  ugc nofollow" target="_blank"><div class="nd ab fo"><div class="ne ab nf cl cj ng"><h2 class="bd iu gy z fp nh fr fs ni fu fw is bi translated">GitHub-wolf iex/sentiment analysis-Frankenstein:比较玛丽的情感过山车…</h2><div class="nk l"><p class="bd b dl z fp nh fr fs ni fu fw dk translated">github.com</p></div></div><div class="nl l"><div class="pu l nn no np nl nq ks nc"/></div></div></a></div></div></div>    
</body>
</html>