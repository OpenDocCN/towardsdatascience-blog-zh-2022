<html>
<head>
<title>DagsHub: a GitHub Supplement for Data Scientists and ML Engineers</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Dag shub:GitHub 对数据科学家和 ML 工程师的补充</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/dagshub-a-github-supplement-for-data-scientists-and-ml-engineers-9ecaf49cc505#2022-02-28">https://towardsdatascience.com/dagshub-a-github-supplement-for-data-scientists-and-ml-engineers-9ecaf49cc505#2022-02-28</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="8aae" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">将您的数据、模型、实验和代码保存在一个地方</h2></div><h1 id="1ff7" class="ki kj it bd kk kl km kn ko kp kq kr ks jz kt ka ku kc kv kd kw kf kx kg ky kz bi translated">动机</h1><p id="7f32" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">作为一名数据科学家，您可能希望对您的代码、模型、数据、参数和指标进行版本化，以便能够重现某个实验。</p><figure class="lx ly lz ma gt mb gh gi paragraph-image"><div class="gh gi lw"><img src="../Images/70eee3befc8948a9d28e38fb1614f9da.png" data-original-src="https://miro.medium.com/v2/resize:fit:1392/format:webp/1*d8A13xRhLkUtOLIXTrQF-A.png"/></div><p class="me mf gj gh gi mg mh bd b be z dk translated">作者图片</p></figure><p id="ef42" class="pw-post-body-paragraph la lb it lc b ld mi ju lf lg mj jx li lj mk ll lm ln ml lp lq lr mm lt lu lv im bi translated">GitHub 是对代码进行版本控制的一个很好的平台，但是对数据、模型和指标进行版本控制并不理想，原因有二:</p><ul class=""><li id="484e" class="mn mo it lc b ld mi lg mj lj mp ln mq lr mr lv ms mt mu mv bi translated">GitHub 有一个 100MB 的严格文件限制，所以上传一个中等大小的二进制文件很容易超过这个限制。</li><li id="dc97" class="mn mo it lc b ld mw lg mx lj my ln mz lr na lv ms mt mu mv bi translated">用 GitHub 比较不同版本数据的变化很乱。我曾经在使用<code class="fe nb nc nd ne b">git pull</code>后手动接受过 100 多次数据的更改，那是一种痛苦。</li></ul><p id="291f" class="pw-post-body-paragraph la lb it lc b ld mi ju lf lg mj jx li lj mk ll lm ln ml lp lq lr mm lt lu lv im bi translated"><a class="ae nf" rel="noopener" target="_blank" href="/introduction-to-dvc-data-version-control-tool-for-machine-learning-projects-7cb49c229fe0"> DVC </a>(数据版本控制)是对二进制数据进行版本控制的理想工具。但是，你不能在 GitHub 上查看 DVC 跟踪的文件。</p><figure class="lx ly lz ma gt mb gh gi paragraph-image"><div class="gh gi ng"><img src="../Images/aa37b7721190d773ba84a5d20dbae8ce.png" data-original-src="https://miro.medium.com/v2/resize:fit:966/format:webp/1*jjZ9YOz4Nhrq-MCunOBxaw.png"/></div><p class="me mf gj gh gi mg mh bd b be z dk translated">作者图片</p></figure><p id="4aa6" class="pw-post-body-paragraph la lb it lc b ld mi ju lf lg mj jx li lj mk ll lm ln ml lp lq lr mm lt lu lv im bi translated">如果有一个类似于 GitHub 的平台，但是更适合数据科学家和机器学习工程师，那不是很好吗？这时 DagsHub 就派上用场了。</p><h1 id="bb00" class="ki kj it bd kk kl km kn ko kp kq kr ks jz kt ka ku kc kv kd kw kf kx kg ky kz bi translated">DagsHub 是什么？</h1><p id="b8de" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated"><a class="ae nf" href="https://dagshub.com/" rel="noopener ugc nofollow" target="_blank"> DagsHub </a>是数据科学家和机器学习工程师对他们的数据、模型、实验和代码进行版本化的平台。</p><p id="5f62" class="pw-post-body-paragraph la lb it lc b ld mi ju lf lg mj jx li lj mk ll lm ln ml lp lq lr mm lt lu lv im bi translated">DagsHub 允许您在他们的平台上创建一个新的存储库，或者连接到 GitHub 上的存储库。如果要在 DagsHub 上创建新的存储库，请单击新建存储库:</p><figure class="lx ly lz ma gt mb gh gi paragraph-image"><div class="gh gi nh"><img src="../Images/d22e7e050f628376a5ea22ae77c478da.png" data-original-src="https://miro.medium.com/v2/resize:fit:374/format:webp/1*jzsHKGaK7kNA61ymys_muA.png"/></div><p class="me mf gj gh gi mg mh bd b be z dk translated">作者图片</p></figure><p id="8e13" class="pw-post-body-paragraph la lb it lc b ld mi ju lf lg mj jx li lj mk ll lm ln ml lp lq lr mm lt lu lv im bi translated">如果您在 GitHub 上已经有一个存储库，并且想要将您的存储库迁移到 DagsHub，请单击 Migrate A Repo:</p><figure class="lx ly lz ma gt mb gh gi paragraph-image"><div class="gh gi ni"><img src="../Images/079f634041c572e2c0a068b78dbcbca6.png" data-original-src="https://miro.medium.com/v2/resize:fit:376/format:webp/1*y-Dt143jHSW3pTlriHcjIA.png"/></div><p class="me mf gj gh gi mg mh bd b be z dk translated">作者图片</p></figure><p id="3aaa" class="pw-post-body-paragraph la lb it lc b ld mi ju lf lg mj jx li lj mk ll lm ln ml lp lq lr mm lt lu lv im bi translated">如果您想同时通过 GitHub 和 DagsHub 管理您的存储库，请单击 Connect A Repo:</p><figure class="lx ly lz ma gt mb gh gi paragraph-image"><div class="gh gi nj"><img src="../Images/f27315d7456df168a9dabc4d7e33588e.png" data-original-src="https://miro.medium.com/v2/resize:fit:386/format:webp/1*jg6bsxpCVul0hI64cWi02Q.png"/></div><p class="me mf gj gh gi mg mh bd b be z dk translated">作者图片</p></figure><p id="0695" class="pw-post-body-paragraph la lb it lc b ld mi ju lf lg mj jx li lj mk ll lm ln ml lp lq lr mm lt lu lv im bi translated">DagsHub 上新存储库的界面应该与 GitHub 上的界面非常相似，只是增加了一些选项卡，如实验、数据、模型、笔记本、DVC 和 Git。</p><figure class="lx ly lz ma gt mb gh gi paragraph-image"><div role="button" tabindex="0" class="nl nm di nn bf no"><div class="gh gi nk"><img src="../Images/8119132723e6256e7b5e78a856dced2d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1308/format:webp/1*kMLz2t7SYnPPmdNMlfcPUA.png"/></div></div><p class="me mf gj gh gi mg mh bd b be z dk translated">作者图片</p></figure><p id="f1d0" class="pw-post-body-paragraph la lb it lc b ld mi ju lf lg mj jx li lj mk ll lm ln ml lp lq lr mm lt lu lv im bi translated">你可以在这里查看<a class="ae nf" href="https://dagshub.com/khuyentran1401/dagshub-demo" rel="noopener ugc nofollow" target="_blank">上面的资源库。让我们探索 DagsHub 的一些功能。</a></p><h1 id="12f3" class="ki kj it bd kk kl km kn ko kp kq kr ks jz kt ka ku kc kv kd kw kf kx kg ky kz bi translated">数据和代码版本化</h1><p id="e102" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">假设您的机器上有 GitHub 库的本地副本，我们将使用<a class="ae nf" rel="noopener" target="_blank" href="/introduction-to-dvc-data-version-control-tool-for-machine-learning-projects-7cb49c229fe0"> DVC </a>来版本化您的二进制数据。</p><p id="9731" class="pw-post-body-paragraph la lb it lc b ld mi ju lf lg mj jx li lj mk ll lm ln ml lp lq lr mm lt lu lv im bi translated">从安装 DVC 开始:</p><pre class="lx ly lz ma gt np ne nq nr aw ns bi"><span id="1493" class="nt kj it ne b gy nu nv l nw nx">pip install dvc</span></pre><p id="55a8" class="pw-post-body-paragraph la lb it lc b ld mi ju lf lg mj jx li lj mk ll lm ln ml lp lq lr mm lt lu lv im bi translated">通常情况下，在使用 DVC 时，您需要使用一个外部存储，如 Google Drive、亚马逊 S3、Azure Blob 存储、谷歌云存储等。但是，使用 DagsHub，您可以将数据直接存储在平台上。</p><p id="7058" class="pw-post-body-paragraph la lb it lc b ld mi ju lf lg mj jx li lj mk ll lm ln ml lp lq lr mm lt lu lv im bi translated">要将您的数据上传到 DagsHub，首先获取远程按钮下的 DVC 链接:</p><figure class="lx ly lz ma gt mb gh gi paragraph-image"><div class="gh gi ny"><img src="../Images/1ae674d374bb68275c4dc222bf0835f3.png" data-original-src="https://miro.medium.com/v2/resize:fit:964/format:webp/1*bjM9WtbJ44bHY3rj0yxHeA.png"/></div><p class="me mf gj gh gi mg mh bd b be z dk translated">作者图片</p></figure><p id="e240" class="pw-post-body-paragraph la lb it lc b ld mi ju lf lg mj jx li lj mk ll lm ln ml lp lq lr mm lt lu lv im bi translated">接下来，将该链接设置为 DVC 的远程存储:</p><pre class="lx ly lz ma gt np ne nq nr aw ns bi"><span id="071d" class="nt kj it ne b gy nu nv l nw nx">dvc remote add origin <a class="ae nf" href="https://dagshub.com/khuyentran1401/dagshub-demo.dvc" rel="noopener ugc nofollow" target="_blank">https://dagshub.com/khuyentran1401/dagshub-demo.dvc</a></span></pre><p id="90a5" class="pw-post-body-paragraph la lb it lc b ld mi ju lf lg mj jx li lj mk ll lm ln ml lp lq lr mm lt lu lv im bi translated">添加身份验证:</p><pre class="lx ly lz ma gt np ne nq nr aw ns bi"><span id="5250" class="nt kj it ne b gy nu nv l nw nx">dvc remote modify origin --local auth basic<br/>dvc remote modify origin --local user DAGSHUB_USERNAME<br/>dvc remote modify origin --local password DAGSHUB_PASSWORD</span></pre><p id="bd85" class="pw-post-body-paragraph la lb it lc b ld mi ju lf lg mj jx li lj mk ll lm ln ml lp lq lr mm lt lu lv im bi translated">接下来，添加我们希望存储在 DagsHub 上的二进制数据。例如，要添加目录<code class="fe nb nc nd ne b">data/raw</code>，我运行:</p><pre class="lx ly lz ma gt np ne nq nr aw ns bi"><span id="cc02" class="nt kj it ne b gy nu nv l nw nx">dvc add <!-- -->data/raw</span></pre><p id="1fb2" class="pw-post-body-paragraph la lb it lc b ld mi ju lf lg mj jx li lj mk ll lm ln ml lp lq lr mm lt lu lv im bi translated">该命令将创建一个新的<code class="fe nb nc nd ne b">.dvc</code>文件。这些是小文本文件，存储如何访问原始数据的信息，而不是原始数据本身。</p><pre class="lx ly lz ma gt np ne nq nr aw ns bi"><span id="31cb" class="nt kj it ne b gy nu nv l nw nx">data<br/>├── raw<br/>│   └── marketing_campaign.csv<br/>└── raw.dvc</span></pre><p id="5de6" class="pw-post-body-paragraph la lb it lc b ld mi ju lf lg mj jx li lj mk ll lm ln ml lp lq lr mm lt lu lv im bi translated">将这些文件推送到 DagsHub 的存储中:</p><pre class="lx ly lz ma gt np ne nq nr aw ns bi"><span id="fc69" class="nt kj it ne b gy nu nv l nw nx">dvc push</span></pre><p id="2cb0" class="pw-post-body-paragraph la lb it lc b ld mi ju lf lg mj jx li lj mk ll lm ln ml lp lq lr mm lt lu lv im bi translated">现在我们可以在数据和代码中添加更改，然后将您的更改提交并推送到 GitHub:</p><pre class="lx ly lz ma gt np ne nq nr aw ns bi"><span id="9b4d" class="nt kj it ne b gy nu nv l nw nx">git add .<br/>git commit -m 'push data and code'<br/>git push origin master</span></pre><p id="45e7" class="pw-post-body-paragraph la lb it lc b ld mi ju lf lg mj jx li lj mk ll lm ln ml lp lq lr mm lt lu lv im bi translated">如果你同时使用 GitHub 和 DagsHub，你只需要把你的文件推送到 GitHub。DagsHub 会自动与 GitHub 同步！</p><p id="522a" class="pw-post-body-paragraph la lb it lc b ld mi ju lf lg mj jx li lj mk ll lm ln ml lp lq lr mm lt lu lv im bi translated"><em class="nz">注意:如果 DagsHub 不同步，单击存储库标题下的刷新图标:</em></p><figure class="lx ly lz ma gt mb gh gi paragraph-image"><div class="gh gi oa"><img src="../Images/c40a1d1d75fbf2ed7bc30236c8a77ce1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1014/format:webp/1*--QihKrYDLY-vV2gJWQOsQ.png"/></div><p class="me mf gj gh gi mg mh bd b be z dk translated">作者图片</p></figure><p id="d23b" class="pw-post-body-paragraph la lb it lc b ld mi ju lf lg mj jx li lj mk ll lm ln ml lp lq lr mm lt lu lv im bi translated">如果你熟悉 DVC，这里没什么新鲜的。然而，当您访问 DagsHub 上的存储库时，神奇的事情发生了。</p><p id="5dec" class="pw-post-body-paragraph la lb it lc b ld mi ju lf lg mj jx li lj mk ll lm ln ml lp lq lr mm lt lu lv im bi translated">在 GitHub 上，你可以看到你的<code class="fe nb nc nd ne b">.dvc</code>文件，但看不到数据本身。这是因为实际数据存储在其他地方:</p><figure class="lx ly lz ma gt mb gh gi paragraph-image"><div class="gh gi ob"><img src="../Images/5cdbe5de60197449b56f67e078df6c1a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1038/format:webp/1*1bfVk3YMPSbx7vGuEU_khA.png"/></div><p class="me mf gj gh gi mg mh bd b be z dk translated">作者图片</p></figure><p id="ff70" class="pw-post-body-paragraph la lb it lc b ld mi ju lf lg mj jx li lj mk ll lm ln ml lp lq lr mm lt lu lv im bi translated">在 DagsHub 上，您可以看到<code class="fe nb nc nd ne b">.dvc</code>文件和数据本身，因为数据存储在 DagsHub 上！</p><figure class="lx ly lz ma gt mb gh gi paragraph-image"><div class="gh gi oc"><img src="../Images/a203bb48bfeccd99ca86a61e974e3a41.png" data-original-src="https://miro.medium.com/v2/resize:fit:1268/format:webp/1*Bdw8maYccZ-sIY4hx8RqnA.png"/></div><p class="me mf gj gh gi mg mh bd b be z dk translated">作者图片</p></figure><p id="e0c7" class="pw-post-body-paragraph la lb it lc b ld mi ju lf lg mj jx li lj mk ll lm ln ml lp lq lr mm lt lu lv im bi translated">这非常方便，因为我可以在一个平台上查看代码和数据。</p><figure class="lx ly lz ma gt mb gh gi paragraph-image"><div class="gh gi od"><img src="../Images/b2be94fd876a9ada2eeea0730d1abb72.png" data-original-src="https://miro.medium.com/v2/resize:fit:1106/format:webp/1*6eghrlMA8OWL9HllX0Siow.png"/></div><p class="me mf gj gh gi mg mh bd b be z dk translated">作者图片</p></figure><h1 id="cc8a" class="ki kj it bd kk kl km kn ko kp kq kr ks jz kt ka ku kc kv kd kw kf kx kg ky kz bi translated">跟踪实验</h1><p id="022c" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">像 MLFlow 这样的库允许数据科学家跟踪他们的实验以及模型和参数。然而，他们不跟踪代码。</p><p id="85e2" class="pw-post-body-paragraph la lb it lc b ld mi ju lf lg mj jx li lj mk ll lm ln ml lp lq lr mm lt lu lv im bi translated">如果能保存一个实验的代码、模型、参数、数据不是很好吗？</p><figure class="lx ly lz ma gt mb gh gi paragraph-image"><div class="gh gi lw"><img src="../Images/70eee3befc8948a9d28e38fb1614f9da.png" data-original-src="https://miro.medium.com/v2/resize:fit:1392/format:webp/1*d8A13xRhLkUtOLIXTrQF-A.png"/></div><p class="me mf gj gh gi mg mh bd b be z dk translated">作者图片</p></figure><p id="7aa7" class="pw-post-body-paragraph la lb it lc b ld mi ju lf lg mj jx li lj mk ll lm ln ml lp lq lr mm lt lu lv im bi translated">使用 DagsHub 可以轻松做到这一点。DagsHub 允许您使用 DagsHub logger 或 MLFlow 记录您的实验。实验选项卡下的实验应该如下所示:</p><figure class="lx ly lz ma gt mb gh gi paragraph-image"><div class="gh gi oe"><img src="../Images/9029f23160134b6a63d08483723c1e66.png" data-original-src="https://miro.medium.com/v2/resize:fit:704/format:webp/1*Jpc1Ubq2azhiXH_KaIr0Pg.png"/></div></figure><figure class="lx ly lz ma gt mb gh gi paragraph-image"><div class="gh gi of"><img src="../Images/0d0edd81e257cf894a4b65f9a7c9be23.png" data-original-src="https://miro.medium.com/v2/resize:fit:1216/format:webp/1*Z4-z-bHAgnLRRYAFot2iEg.png"/></div><p class="me mf gj gh gi mg mh bd b be z dk translated">作者图片</p></figure><p id="7c6a" class="pw-post-body-paragraph la lb it lc b ld mi ju lf lg mj jx li lj mk ll lm ln ml lp lq lr mm lt lu lv im bi translated">使用 MLFlow 在不提交代码的情况下快速试验不同的参数是一个很好的实践。一旦您找到了具有良好结果的实验，您可以使用 DagsHub logger 将结果保存为开放格式(metric.csv，param.yaml ),并将其与生成结果的代码、模型和数据封装在一起。</p><p id="8b46" class="pw-post-body-paragraph la lb it lc b ld mi ju lf lg mj jx li lj mk ll lm ln ml lp lq lr mm lt lu lv im bi translated">让我们来学习如何用这些方法来记录你的实验。</p><h1 id="547f" class="ki kj it bd kk kl km kn ko kp kq kr ks jz kt ka ku kc kv kd kw kf kx kg ky kz bi translated">用 MLFlow 记录您的实验</h1><p id="3530" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">MLflow 是一个开源平台，允许你跟踪和比较实验。要安装 MLflow，请键入:</p><pre class="lx ly lz ma gt np ne nq nr aw ns bi"><span id="6d91" class="nt kj it ne b gy nu nv l nw nx">pip install mlflow</span></pre><p id="f6ae" class="pw-post-body-paragraph la lb it lc b ld mi ju lf lg mj jx li lj mk ll lm ln ml lp lq lr mm lt lu lv im bi translated">在下面的代码中，我使用 MLFlow 来记录度量和参数。</p><figure class="lx ly lz ma gt mb"><div class="bz fp l di"><div class="og oh l"/></div></figure><p id="1598" class="pw-post-body-paragraph la lb it lc b ld mi ju lf lg mj jx li lj mk ll lm ln ml lp lq lr mm lt lu lv im bi translated">我还将跟踪 URI 设置为在 MLflow 跟踪远程下找到的 URL:</p><figure class="lx ly lz ma gt mb"><div class="bz fp l di"><div class="og oh l"/></div></figure><figure class="lx ly lz ma gt mb gh gi paragraph-image"><div class="gh gi oi"><img src="../Images/4f6ea9c8c2e4f8117c2980c35efcab4d.png" data-original-src="https://miro.medium.com/v2/resize:fit:918/format:webp/1*XWQUqBWEounlDywpcOvXRw.png"/></div><p class="me mf gj gh gi mg mh bd b be z dk translated">作者图片</p></figure><p id="9c40" class="pw-post-body-paragraph la lb it lc b ld mi ju lf lg mj jx li lj mk ll lm ln ml lp lq lr mm lt lu lv im bi translated">就是这样！现在，每次运行代码时，每个实验的参数和指标都会显示在 DagsHub 存储库的 Experiments 选项卡下:</p><figure class="lx ly lz ma gt mb gh gi paragraph-image"><div class="gh gi oj"><img src="../Images/b934fc3cd47a27bdd4b53d095c8f54d8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1366/format:webp/1*4ceDabZwVZPprquhmnsjnA.png"/></div><p class="me mf gj gh gi mg mh bd b be z dk translated">作者图片</p></figure><p id="217b" class="pw-post-body-paragraph la lb it lc b ld mi ju lf lg mj jx li lj mk ll lm ln ml lp lq lr mm lt lu lv im bi translated">能够在 DagsHub 这样的远程服务器而不是本地数据库中记录您的 MLflow 实验将允许您的队友在他们的浏览器中访问您的实验。</p><h1 id="c8b5" class="ki kj it bd kk kl km kn ko kp kq kr ks jz kt ka ku kc kv kd kw kf kx kg ky kz bi translated">用 DagsHub Logger 记录你的实验</h1><p id="413e" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">一旦您找到了一个好的实验，并准备好记录该实验的代码、数据和输出，只需将 MLFlow 切换到 DagsHub logger。</p><p id="d42c" class="pw-post-body-paragraph la lb it lc b ld mi ju lf lg mj jx li lj mk ll lm ln ml lp lq lr mm lt lu lv im bi translated">要使用 DagsHub 记录器，请从安装 DagsHub 开始:</p><pre class="lx ly lz ma gt np ne nq nr aw ns bi"><span id="a5a1" class="nt kj it ne b gy nu nv l nw nx">pip install dagshub</span></pre><p id="9548" class="pw-post-body-paragraph la lb it lc b ld mi ju lf lg mj jx li lj mk ll lm ln ml lp lq lr mm lt lu lv im bi translated">使用 DagsHub logger 记录您的实验与使用 MLFlow 记录非常相似:</p><figure class="lx ly lz ma gt mb"><div class="bz fp l di"><div class="og oh l"/></div></figure><p id="de66" class="pw-post-body-paragraph la lb it lc b ld mi ju lf lg mj jx li lj mk ll lm ln ml lp lq lr mm lt lu lv im bi translated">运行您的代码后，DagsHub 将自动在您的工作目录中创建两个文件<code class="fe nb nc nd ne b">metrics.csv</code>和<code class="fe nb nc nd ne b">params.yml</code>:</p><pre class="lx ly lz ma gt np ne nq nr aw ns bi"><span id="1790" class="nt kj it ne b gy nu nv l nw nx">.<br/>├── metrics.csv<br/>└── params.yml</span></pre><p id="86b2" class="pw-post-body-paragraph la lb it lc b ld mi ju lf lg mj jx li lj mk ll lm ln ml lp lq lr mm lt lu lv im bi translated">将所有更改添加到临时区域，然后将这些更改提交并推送到 GitHub:</p><pre class="lx ly lz ma gt np ne nq nr aw ns bi"><span id="a80f" class="nt kj it ne b gy nu nv l nw nx">git add .<br/>git commit -m 'experiment 1'<br/>git push origin master</span></pre><p id="edd2" class="pw-post-body-paragraph la lb it lc b ld mi ju lf lg mj jx li lj mk ll lm ln ml lp lq lr mm lt lu lv im bi translated">现在，新的实验将在实验选项卡下用 Git 记录。</p><figure class="lx ly lz ma gt mb gh gi paragraph-image"><div class="gh gi ok"><img src="../Images/7b1fa72e7c8b5f3d2da2c2f7695fa9c4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1270/format:webp/1*237DLbf2EGNRUxGnhg6vbQ.png"/></div><p class="me mf gj gh gi mg mh bd b be z dk translated">作者图片</p></figure><h1 id="8006" class="ki kj it bd kk kl km kn ko kp kq kr ks jz kt ka ku kc kv kd kw kf kx kg ky kz bi translated">同时使用 MLflow 和 DagsHub 记录器</h1><p id="4a18" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">尽管在 MLflow 和 DagsHub logger 之间切换很有用，但我发现每次想切换到另一个 logger 时都要重写代码，这很不方便。</p><p id="20eb" class="pw-post-body-paragraph la lb it lc b ld mi ju lf lg mj jx li lj mk ll lm ln ml lp lq lr mm lt lu lv im bi translated">我的解决方案是创建一个<code class="fe nb nc nd ne b">BaseLogger</code>类，它的方法是<code class="fe nb nc nd ne b">log_metrics</code>和<code class="fe nb nc nd ne b">log_params</code>。每个方法都将使用 MLflow logger 和 DagsHub logger。</p><figure class="lx ly lz ma gt mb"><div class="bz fp l di"><div class="og oh l"/></div></figure><p id="c9a2" class="pw-post-body-paragraph la lb it lc b ld mi ju lf lg mj jx li lj mk ll lm ln ml lp lq lr mm lt lu lv im bi translated">有了<code class="fe nb nc nd ne b">BaseLogger</code>，我可以在一行代码中同时使用两个记录器。</p><figure class="lx ly lz ma gt mb"><div class="bz fp l di"><div class="og oh l"/></div></figure><h1 id="dc41" class="ki kj it bd kk kl km kn ko kp kq kr ks jz kt ka ku kc kv kd kw kf kx kg ky kz bi translated">MLflow 实验之间的比较</h1><p id="72cf" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">要比较两个或多个实验，请勾选要比较的实验框，然后单击比较。</p><figure class="lx ly lz ma gt mb gh gi paragraph-image"><div class="gh gi ol"><img src="../Images/258cbc6d35cf7f348914827284991e01.png" data-original-src="https://miro.medium.com/v2/resize:fit:920/format:webp/1*DoNK5KzL8nZTh3hKWwIbyg.png"/></div><p class="me mf gj gh gi mg mh bd b be z dk translated">作者图片</p></figure><p id="0964" class="pw-post-body-paragraph la lb it lc b ld mi ju lf lg mj jx li lj mk ll lm ln ml lp lq lr mm lt lu lv im bi translated">您应该会看到所有实验的比较，如下所示:</p><figure class="lx ly lz ma gt mb gh gi paragraph-image"><div class="gh gi om"><img src="../Images/22b743f2f939801a34adeb416ec50395.png" data-original-src="https://miro.medium.com/v2/resize:fit:1362/format:webp/1*GuZrkfCZ-0a_eD0tgFg4wg.png"/></div><p class="me mf gj gh gi mg mh bd b be z dk translated">作者图片</p></figure><p id="e545" class="pw-post-body-paragraph la lb it lc b ld mi ju lf lg mj jx li lj mk ll lm ln ml lp lq lr mm lt lu lv im bi translated">DagsHub 还自动创建图，如平行坐标图和条形图，以便您可以观察参数和输出之间的关系</p><figure class="lx ly lz ma gt mb gh gi paragraph-image"><div class="gh gi on"><img src="../Images/dbcc5efbc663985f6c0dc48062407818.png" data-original-src="https://miro.medium.com/v2/resize:fit:1320/format:webp/1*H7C8W6U6OhteUFWxPiC0yg.png"/></div><p class="me mf gj gh gi mg mh bd b be z dk translated">作者图片</p></figure><figure class="lx ly lz ma gt mb gh gi paragraph-image"><div class="gh gi oo"><img src="../Images/da3973759681ec8865ebf4895d42c0e7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1202/format:webp/1*WFEB-kbo4Ffh72PuZqIP7A.png"/></div><p class="me mf gj gh gi mg mh bd b be z dk translated">作者图片</p></figure><h1 id="4c69" class="ki kj it bd kk kl km kn ko kp kq kr ks jz kt ka ku kc kv kd kw kf kx kg ky kz bi translated">Git 实验之间的比较</h1><p id="8098" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">要比较两个 Git 实验之间的文件差异，请在 experiments 选项卡下复制它们的提交 id:</p><figure class="lx ly lz ma gt mb gh gi paragraph-image"><div class="gh gi op"><img src="../Images/883aa35ff2827ba042ce7f79a2086e98.png" data-original-src="https://miro.medium.com/v2/resize:fit:626/format:webp/1*-0Sl07-AzcMgNQE30nhhtw.png"/></div><p class="me mf gj gh gi mg mh bd b be z dk translated">作者图片</p></figure><p id="d454" class="pw-post-body-paragraph la lb it lc b ld mi ju lf lg mj jx li lj mk ll lm ln ml lp lq lr mm lt lu lv im bi translated">然后将每个提交 ID 粘贴到文件选项卡下的每个分支上:</p><figure class="lx ly lz ma gt mb gh gi paragraph-image"><div class="gh gi oq"><img src="../Images/a60f17a183dd366c2d4a285e16fdfc6e.png" data-original-src="https://miro.medium.com/v2/resize:fit:564/format:webp/1*SnQ229rMHHQUiWEa_Xhs8A.png"/></div><p class="me mf gj gh gi mg mh bd b be z dk translated">作者图片</p></figure><figure class="lx ly lz ma gt mb gh gi paragraph-image"><div class="gh gi or"><img src="../Images/2cb756e2a7dce2d05bd3722d3e9ee6f0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1006/1*RVb8AYsXXZ6AwDvGT4R-Rw.gif"/></div><p class="me mf gj gh gi mg mh bd b be z dk translated">作者 GIF</p></figure><p id="60a0" class="pw-post-body-paragraph la lb it lc b ld mi ju lf lg mj jx li lj mk ll lm ln ml lp lq lr mm lt lu lv im bi translated">两次提交之间不同的文件将以黄色突出显示。</p><figure class="lx ly lz ma gt mb gh gi paragraph-image"><div role="button" tabindex="0" class="nl nm di nn bf no"><div class="gh gi os"><img src="../Images/1b6586c66e3ee59961e2e00cc6e4b73b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*u8vfHN6Q7tBoKBvt3QkhAw.png"/></div></div><p class="me mf gj gh gi mg mh bd b be z dk translated">作者图片</p></figure><p id="ee1c" class="pw-post-body-paragraph la lb it lc b ld mi ju lf lg mj jx li lj mk ll lm ln ml lp lq lr mm lt lu lv im bi translated">要查看差异，请单击文件。由于缺少的信息以红色突出显示，附加信息以绿色突出显示，因此我们可以清楚地看到两次提交之间的差异。</p><figure class="lx ly lz ma gt mb gh gi paragraph-image"><div class="gh gi ot"><img src="../Images/85331e0035254c4f19c00bf5262406e6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1316/1*3xKkHfwGeaOctGoG7O4kow.gif"/></div><p class="me mf gj gh gi mg mh bd b be z dk translated">作者 GIF</p></figure><p id="acd3" class="pw-post-body-paragraph la lb it lc b ld mi ju lf lg mj jx li lj mk ll lm ln ml lp lq lr mm lt lu lv im bi translated">更好的是，DagsHub 提供了一个很好的界面来比较两个 Jupyter 笔记本。</p><figure class="lx ly lz ma gt mb gh gi paragraph-image"><div class="gh gi ou"><img src="../Images/1b85225d1341a2a6961c4e18153772a6.png" data-original-src="https://miro.medium.com/v2/resize:fit:468/format:webp/1*BCcU90Hhrp1gIhiyZvXNkQ.png"/></div><p class="me mf gj gh gi mg mh bd b be z dk translated">作者图片</p></figure><figure class="lx ly lz ma gt mb gh gi paragraph-image"><div class="gh gi ov"><img src="../Images/6f35b6d66277ac267cf013818f4da139.png" data-original-src="https://miro.medium.com/v2/resize:fit:1298/format:webp/1*FbgjRteEF316TZ_I3gO-Rw.png"/></div><p class="me mf gj gh gi mg mh bd b be z dk translated">作者图片</p></figure><p id="6c64" class="pw-post-body-paragraph la lb it lc b ld mi ju lf lg mj jx li lj mk ll lm ln ml lp lq lr mm lt lu lv im bi translated">由于数据科学家经常使用 Jupyter Notebook，因此能够比较两台笔记本的输出非常有用。</p><h1 id="8402" class="ki kj it bd kk kl km kn ko kp kq kr ks jz kt ka ku kc kv kd kw kf kx kg ky kz bi translated">额外提示:创建一个 DVC 管道</h1><p id="a1a8" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">有时，您可能希望其他人理解您项目的工作流程(例如，一个脚本的输出如何用于另一个脚本)。DagsHub 允许您通过 DVC 管道创建数据工作流的可视化。</p><figure class="lx ly lz ma gt mb gh gi paragraph-image"><div class="gh gi ow"><img src="../Images/cfa36c91d741370cc4d01fa020d69e79.png" data-original-src="https://miro.medium.com/v2/resize:fit:1304/format:webp/1*cRlRw_j245fudBc3UD6D5g.png"/></div><p class="me mf gj gh gi mg mh bd b be z dk translated">作者图片</p></figure><p id="d562" class="pw-post-body-paragraph la lb it lc b ld mi ju lf lg mj jx li lj mk ll lm ln ml lp lq lr mm lt lu lv im bi translated">要创建 DVC 管道，首先要创建一个<code class="fe nb nc nd ne b">dvc.yaml</code>文件。在下面的代码中，我将我的工作流分为 3 个阶段:<code class="fe nb nc nd ne b">process_data</code>、<code class="fe nb nc nd ne b">segment</code>和<code class="fe nb nc nd ne b">analyze</code>。对于每个阶段，</p><ul class=""><li id="de8f" class="mn mo it lc b ld mi lg mj lj mp ln mq lr mr lv ms mt mu mv bi translated"><code class="fe nb nc nd ne b">cmd</code>指定执行阶段的命令</li><li id="43cf" class="mn mo it lc b ld mw lg mx lj my ln mz lr na lv ms mt mu mv bi translated"><code class="fe nb nc nd ne b">deps</code>指定阶段的依赖关系</li><li id="526b" class="mn mo it lc b ld mw lg mx lj my ln mz lr na lv ms mt mu mv bi translated"><code class="fe nb nc nd ne b">outs</code>指定阶段的输出</li><li id="4864" class="mn mo it lc b ld mw lg mx lj my ln mz lr na lv ms mt mu mv bi translated"><code class="fe nb nc nd ne b">metrics</code>指定阶段的指标</li></ul><figure class="lx ly lz ma gt mb"><div class="bz fp l di"><div class="og oh l"/></div></figure><p id="edc1" class="pw-post-body-paragraph la lb it lc b ld mi ju lf lg mj jx li lj mk ll lm ln ml lp lq lr mm lt lu lv im bi translated">在<code class="fe nb nc nd ne b">outs</code>中列出的所有文件都被缓存，这与使用<code class="fe nb nc nd ne b">dvc add</code>时发生的情况类似。这就是为什么你不再需要对这些文件使用<code class="fe nb nc nd ne b">dvc add</code>。</p><p id="d3ff" class="pw-post-body-paragraph la lb it lc b ld mi ju lf lg mj jx li lj mk ll lm ln ml lp lq lr mm lt lu lv im bi translated">现在，您可以通过运行以下命令来再现<code class="fe nb nc nd ne b">dvc.yaml</code>中指定的整个管道:</p><pre class="lx ly lz ma gt np ne nq nr aw ns bi"><span id="a833" class="nt kj it ne b gy nu nv l nw nx">dvc repro</span></pre><p id="a73b" class="pw-post-body-paragraph la lb it lc b ld mi ju lf lg mj jx li lj mk ll lm ln ml lp lq lr mm lt lu lv im bi translated">产出:</p><pre class="lx ly lz ma gt np ne nq nr aw ns bi"><span id="3322" class="nt kj it ne b gy nu nv l nw nx">Running stage 'process_data':<br/>&gt; python src/process_data.py<br/>Updating lock file 'dvc.lock'                                                                                                                                                      <br/>                                                                                                                                                                                   <br/>Running stage 'segment':<br/>&gt; python src/segment.py<br/>Updating lock file 'dvc.lock'                                                                                                                                                      <br/>                                                                                                                                                                                   <br/>Running stage 'analyze':<br/>&gt; python src/run_notebook.py<br/>Updating lock file 'dvc.lock'</span></pre><p id="9080" class="pw-post-body-paragraph la lb it lc b ld mi ju lf lg mj jx li lj mk ll lm ln ml lp lq lr mm lt lu lv im bi translated">现在，其他人可以通过运行<code class="fe nb nc nd ne b">dvc repro</code>命令复制您的结果。多方便啊？</p><p id="6bb2" class="pw-post-body-paragraph la lb it lc b ld mi ju lf lg mj jx li lj mk ll lm ln ml lp lq lr mm lt lu lv im bi translated">接下来，运行<code class="fe nb nc nd ne b">dvc push</code>将 DVC 跟踪的所有文件推送到 DagsHub。使用<code class="fe nb nc nd ne b">git add</code>和<code class="fe nb nc nd ne b">git commit</code>将代码和数据的变化推送到 GitHub。</p><p id="88c8" class="pw-post-body-paragraph la lb it lc b ld mi ju lf lg mj jx li lj mk ll lm ln ml lp lq lr mm lt lu lv im bi translated">如果您访问 DagsHub 上的存储库，您应该会在 DagsHub 上看到整个管道的漂亮的交互式图形！</p><figure class="lx ly lz ma gt mb gh gi paragraph-image"><div role="button" tabindex="0" class="nl nm di nn bf no"><div class="gh gi ox"><img src="../Images/c324e17cd8fadb9350011dbccdc5207e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1294/1*sgoqLuVvng22Sni8Fz6kyg.gif"/></div></div><p class="me mf gj gh gi mg mh bd b be z dk translated">作者 GIF</p></figure><p id="b2ae" class="pw-post-body-paragraph la lb it lc b ld mi ju lf lg mj jx li lj mk ll lm ln ml lp lq lr mm lt lu lv im bi translated">通过单击图中的节点，可以获得该节点的更多详细信息。现在，其他人只需访问 DagsHub 上的存储库，就可以了解您的数据工作流。</p><h1 id="4bb5" class="ki kj it bd kk kl km kn ko kp kq kr ks jz kt ka ku kc kv kd kw kf kx kg ky kz bi translated">结论</h1><p id="8095" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">恭喜你！您刚刚学习了如何使用 DagsHub 对您的数据项目进行版本化。使用 DagsHub，您可以在一个地方轻松再现实验并查看数据科学项目的所有组件。</p><p id="ab67" class="pw-post-body-paragraph la lb it lc b ld mi ju lf lg mj jx li lj mk ll lm ln ml lp lq lr mm lt lu lv im bi translated">本文的源代码可以在这里找到:</p><div class="oy oz gp gr pa pb"><a href="https://dagshub.com/khuyentran1401/dagshub-demo" rel="noopener  ugc nofollow" target="_blank"><div class="pc ab fo"><div class="pd ab pe cl cj pf"><h2 class="bd iu gy z fp pg fr fs ph fu fw is bi translated">khuyentran1401/dagshub-demo</h2><div class="pi l"><h3 class="bd b gy z fp pg fr fs ph fu fw dk translated">DagsHub-khuyentran 1401/DagsHub-demo 演示</h3></div><div class="pj l"><p class="bd b dl z fp pg fr fs ph fu fw dk translated">dagshub.com</p></div></div><div class="pk l"><div class="pl l pm pn po pk pp mc pb"/></div></div></a></div></div><div class="ab cl pq pr hx ps" role="separator"><span class="pt bw bk pu pv pw"/><span class="pt bw bk pu pv pw"/><span class="pt bw bk pu pv"/></div><div class="im in io ip iq"><p id="547d" class="pw-post-body-paragraph la lb it lc b ld mi ju lf lg mj jx li lj mk ll lm ln ml lp lq lr mm lt lu lv im bi translated">我喜欢写一些基本的数据科学概念，并尝试不同的数据科学工具。你可以在 LinkedIn 和 Twitter 上与我联系。</p><p id="5aa0" class="pw-post-body-paragraph la lb it lc b ld mi ju lf lg mj jx li lj mk ll lm ln ml lp lq lr mm lt lu lv im bi translated">Star <a class="ae nf" href="https://github.com/khuyentran1401/Data-science" rel="noopener ugc nofollow" target="_blank">这个回购</a>如果你想检查我写的所有文章的代码。在 Medium 上关注我，了解我的最新数据科学文章，例如:</p><div class="oy oz gp gr pa pb"><a rel="noopener follow" target="_blank" href="/orchestrate-a-data-science-project-in-python-with-prefect-e69c61a49074"><div class="pc ab fo"><div class="pd ab pe cl cj pf"><h2 class="bd iu gy z fp pg fr fs ph fu fw is bi translated">用 Prefect 编制 Python 中的数据科学项目</h2><div class="pi l"><h3 class="bd b gy z fp pg fr fs ph fu fw dk translated">用几行代码优化您的数据科学工作流程</h3></div><div class="pj l"><p class="bd b dl z fp pg fr fs ph fu fw dk translated">towardsdatascience.com</p></div></div><div class="pk l"><div class="px l pm pn po pk pp mc pb"/></div></div></a></div><div class="oy oz gp gr pa pb"><a rel="noopener follow" target="_blank" href="/introduction-to-dvc-data-version-control-tool-for-machine-learning-projects-7cb49c229fe0"><div class="pc ab fo"><div class="pd ab pe cl cj pf"><h2 class="bd iu gy z fp pg fr fs ph fu fw is bi translated">DVC 介绍:机器学习项目的数据版本控制工具</h2><div class="pi l"><h3 class="bd b gy z fp pg fr fs ph fu fw dk translated">就像 Git 一样，但是有数据！</h3></div><div class="pj l"><p class="bd b dl z fp pg fr fs ph fu fw dk translated">towardsdatascience.com</p></div></div><div class="pk l"><div class="py l pm pn po pk pp mc pb"/></div></div></a></div><div class="oy oz gp gr pa pb"><a rel="noopener follow" target="_blank" href="/introduction-to-weight-biases-track-and-visualize-your-machine-learning-experiments-in-3-lines-9c9553b0f99d"><div class="pc ab fo"><div class="pd ab pe cl cj pf"><h2 class="bd iu gy z fp pg fr fs ph fu fw is bi translated">权重和偏差介绍:用 3 条线跟踪和可视化你的机器学习实验…</h2><div class="pi l"><h3 class="bd b gy z fp pg fr fs ph fu fw dk translated">无缝比较不同的实验，并使用 Python 重现您的机器学习实验</h3></div><div class="pj l"><p class="bd b dl z fp pg fr fs ph fu fw dk translated">towardsdatascience.com</p></div></div><div class="pk l"><div class="pz l pm pn po pk pp mc pb"/></div></div></a></div><div class="oy oz gp gr pa pb"><a rel="noopener follow" target="_blank" href="/pytest-for-data-scientists-2990319e55e6"><div class="pc ab fo"><div class="pd ab pe cl cj pf"><h2 class="bd iu gy z fp pg fr fs ph fu fw is bi translated">数据科学家 Pytest</h2><div class="pi l"><h3 class="bd b gy z fp pg fr fs ph fu fw dk translated">适用于您的数据科学项目的 Pytest 综合指南</h3></div><div class="pj l"><p class="bd b dl z fp pg fr fs ph fu fw dk translated">towardsdatascience.com</p></div></div><div class="pk l"><div class="qa l pm pn po pk pp mc pb"/></div></div></a></div></div></div>    
</body>
</html>