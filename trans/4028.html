<html>
<head>
<title>Infrastructure as Code</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">基础设施作为代码</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/infrastructure-as-code-f153d810428b#2022-09-07">https://towardsdatascience.com/infrastructure-as-code-f153d810428b#2022-09-07</a></blockquote><div><div class="fc ii ij ik il im"/><div class="in io ip iq ir"><div class=""/><div class=""><h2 id="ceb4" class="pw-subtitle-paragraph jr it iu bd b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki dk translated">用代码管理基础设施资源</h2></div><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj kj"><img src="../Images/ed3fd52dd4249d2f6376d0b4e133f357.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*llXmRqzdmko3WpALGS-Jhw.jpeg"/></div></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">照片由<a class="ae kz" href="https://unsplash.com/@fabioha?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">法比奥</a>在<a class="ae kz" href="https://unsplash.com/s/photos/server?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</p></figure><p id="5973" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">在我的工程之旅中，我意识到我们使用的工具总是会改变，这是技术不断进步的结果。我认为我们都需要接受这一现实，以便能够跟上能够真正影响我们构建系统和应用程序的技术。</p><p id="cfd6" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">在过去十年中，全球大多数公司都不得不经历一次技术提升(也称为数字化转型)，从内部基础架构迁移到云。我相信在这样的项目中，最大的困难是让人们相信一项新技术(比如云)应该以一种不同于你所习惯的方式来管理。可以帮助您管理云(甚至本地)资源的最佳工具之一是基础设施即代码。</p></div><div class="ab cl lw lx hy ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="in io ip iq ir"><h2 id="c2a6" class="md me iu bd mf mg mh dn mi mj mk dp ml lj mm mn mo ln mp mq mr lr ms mt mu mv bi translated">什么是基础设施即代码(IaC)</h2><p id="df29" class="pw-post-body-paragraph la lb iu lc b ld mw jv lf lg mx jy li lj my ll lm ln mz lp lq lr na lt lu lv in bi translated">基础设施即代码是DevOps采用的一种方法，它让团队能够以编程方式管理基础设施资源(如计算、存储和网络资源)。换句话说，IaC可以帮助您将基础设施定义和部署为连续交付机制的一部分。</p><p id="8f7d" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">像技术中的几乎所有东西一样，IaC工具发展得相当快，现在大多数现代工具都使用人类和机器可读的代码。这是一个非常重要的特性，因为它支持各种基础设施组件的可重用性。</p><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj nb"><img src="../Images/a3beb97a04c0665cff0320d4c1b055a7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*KclAtvUR4f-EjWjwjrc5uQ.png"/></div></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">谷歌趋势上的基础设施代码——来源:作者</p></figure></div><div class="ab cl lw lx hy ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="in io ip iq ir"><h2 id="a730" class="md me iu bd mf mg mh dn mi mj mk dp ml lj mm mn mo ln mp mq mr lr ms mt mu mv bi translated">IaC的优势</h2><p id="9de4" class="pw-post-body-paragraph la lb iu lc b ld mw jv lf lg mx jy li lj my ll lm ln mz lp lq lr na lt lu lv in bi translated">基础设施作为代码范例的最大优势是<strong class="lc iv">一致性</strong>。如果没有IaC，组织需要以手动方式维护基础架构资源部署或修改。</p><p id="cbe2" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">这意味着，在某些时候，要重现这种配置是极其困难的，因为需要一些特别的步骤，而其他一些步骤是以不同的顺序执行的。基础设施即代码通过允许用户使用代码来表示基础设施环境来加强一致性。因此，资源的部署和修改将总是<strong class="lc iv">一致</strong>和<strong class="lc iv">幂等</strong>(即每次执行一个特定的操作，都会产生相同的结果)。</p><p id="1e94" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">此外，IaC工具将节省您的时间和精力，否则这些时间和精力将花费在变更的手动部署上。现代IaC工具利用声明性代码文件，用户可以在其中描述组织内基础设施的最终状态。这意味着您不必太担心底层的逻辑，因为达到最终状态所需的操作将由IaC工具自动执行。</p><p id="5336" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">此外，IaC工具通常提供增强可重用性的机制。这个特性使您的代码库不那么冗长，可读性更好，同时鼓励团队成员应用最佳实践。</p><p id="3719" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">IaC的另一大优势是协作。由于基础设施资源是在配置文件中定义的，这意味着这些文件可以进行版本控制。在任何给定的时间，团队都能够协作来修改环境，甚至能够查看基础架构资源的历史(来自提交)。这使得调试更加容易和准确。</p></div><div class="ab cl lw lx hy ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="in io ip iq ir"><h2 id="572c" class="md me iu bd mf mg mh dn mi mj mk dp ml lj mm mn mo ln mp mq mr lr ms mt mu mv bi translated">使用Terraform将基础设施作为代码</h2><p id="72a0" class="pw-post-body-paragraph la lb iu lc b ld mw jv lf lg mx jy li lj my ll lm ln mz lp lq lr na lt lu lv in bi translated">DevOps世界中最流行的IaC工具之一是<a class="ae kz" href="https://www.hashicorp.com/products/terraform" rel="noopener ugc nofollow" target="_blank"> HashiCorp Terraform </a>，这是一个开源工具，您可以使用它在<strong class="lc iv">声明性配置文件</strong>中定义和更新您的基础设施资源。</p><p id="eddb" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">该工具可用于定义内部和云资源，并管理您组织的基础架构的生命周期。从本质上讲，Terraform工作流程由三个不同的步骤组成，即<strong class="lc iv">编写</strong>、<strong class="lc iv">计划</strong>和<strong class="lc iv">应用</strong>。</p><ul class=""><li id="7d9d" class="nc nd iu lc b ld le lg lh lj ne ln nf lr ng lv nh ni nj nk bi translated"><strong class="lc iv">写</strong>:这个步骤涉及资源定义(本地或云)。这些资源可以是存储和计算等低级组件，也可以是SaaS和DNS条目等更高级别的组件。</li><li id="78bb" class="nc nd iu lc b ld nl lg nm lj nn ln no lr np lv nh ni nj nk bi translated"><strong class="lc iv">计划</strong>:在这一步，Terraform将准备一份执行计划，其中将描述所有涉及的步骤。这些步骤可能与基于上一步中所做的更改的资源的创建、更新或删除相关。</li><li id="c71b" class="nc nd iu lc b ld nl lg nm lj nn ln no lr np lv nh ni nj nk bi translated"><strong class="lc iv">应用</strong>:在最后一步中，Terraform将执行(在用户确认/批准后)计划步骤中描述的操作。例如，如果您更新虚拟专用云网络，那么Terraform会根据新配置重新创建资源。</li></ul><p id="589a" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">事实上，Terraform社区已经编写了1700多个不同的提供者，可以用来管理大量不同类型的资源。此外，该工具允许用户定义他们自己的定制模块，这也可以增强代码库中的可重用性。</p><p id="c0c9" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">除了IaC功能，Terraform还可用于多云部署、Kubernetes和网络基础设施管理、策略即代码(PoC)和虚拟机映像管理。</p></div><div class="ab cl lw lx hy ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="in io ip iq ir"><h2 id="f059" class="md me iu bd mf mg mh dn mi mj mk dp ml lj mm mn mo ln mp mq mr lr ms mt mu mv bi translated">其他IaC工具</h2><p id="2102" class="pw-post-body-paragraph la lb iu lc b ld mw jv lf lg mx jy li lj my ll lm ln mz lp lq lr na lt lu lv in bi translated">Ansible是另一个提供IT自动化的流行工具。</p><blockquote class="nq nr ns"><p id="3f92" class="la lb nt lc b ld le jv lf lg lh jy li nu lk ll lm nv lo lp lq nw ls lt lu lv in bi translated">它处理配置管理、应用部署、云供应、临时任务执行、网络自动化和多节点协调。Ansible使复杂的变化变得简单，如使用负载平衡器的零停机滚动更新</p></blockquote><p id="8895" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated"><a class="ae kz" href="https://www.chef.io/products/chef-infrastructure-management#implementing-and-using" rel="noopener ugc nofollow" target="_blank"> Chef </a>还提供基础设施管理自动化工具:</p><blockquote class="nq nr ns"><p id="f006" class="la lb nt lc b ld le jv lf lg lh jy li nu lk ll lm nv lo lp lq nw ls lt lu lv in bi translated">Chef Infrastructure Management使<a class="ae kz" href="https://www.chef.io/solutions/devops" rel="noopener ugc nofollow" target="_blank"> DevOps </a>团队能够跨任何云、虚拟机和/或物理基础架构建模和部署安全且可扩展的基础架构自动化。</p></blockquote><p id="8b5d" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">除了第三方工具，一些云提供商还提供本地IaC工具。</p><p id="41d3" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated"><a class="ae kz" href="https://cloud.google.com/deployment-manager/docs" rel="noopener ugc nofollow" target="_blank"> Deployment Manager </a>是Google云平台上的原生IaC管理工具，可以帮助您自动管理云上的基础设施资源。</p><p id="1bfa" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">微软Azure提供了对基础设施作为代码的原生支持，Azure Resource Manager  (ARM)允许开发人员将基础设施资源定义为ARM模板。</p></div><div class="ab cl lw lx hy ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="in io ip iq ir"><h2 id="ddec" class="md me iu bd mf mg mh dn mi mj mk dp ml lj mm mn mo ln mp mq mr lr ms mt mu mv bi translated">最后的想法</h2><p id="7263" class="pw-post-body-paragraph la lb iu lc b ld mw jv lf lg mx jy li lj my ll lm ln mz lp lq lr na lt lu lv in bi translated">作为代码的基础设施是能够真正影响团队构建、测试和维护系统和应用程序的方法之一。有各种工具可以帮助您定义基础架构，并持续一致地部署资源。</p><p id="0059" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">IaC可以帮助您摆脱基础架构资源的手动配置和部署，并提供一种自动化(最重要的是一致性)的方式来实现这一点。</p><p id="aa01" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">此外，使用IaC，您能够对定义基础设施资源的文件进行版本控制，并实施最佳实践，如模块化和代码可重用性。</p><p id="1ea1" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">最后，我们浏览了一些最受欢迎和最常用的基础设施，如代码工具，包括Terraform、Ansible、Chef，甚至是一些由云提供商(如亚马逊、谷歌和微软)原生提供的工具。</p></div><div class="ab cl lw lx hy ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="in io ip iq ir"><p id="aaa3" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated"><a class="ae kz" href="https://gmyrianthous.medium.com/membership" rel="noopener"> <strong class="lc iv">成为会员</strong> </a> <strong class="lc iv">阅读介质上的每一个故事。你的会员费直接支持我和你看的其他作家。你也可以在媒体上看到所有的故事。</strong></p><div class="nx ny gq gs nz oa"><a href="https://gmyrianthous.medium.com/membership" rel="noopener follow" target="_blank"><div class="ob ab fp"><div class="oc ab od cl cj oe"><h2 class="bd iv gz z fq of fs ft og fv fx it bi translated">通过我的推荐链接加入Medium-Giorgos Myrianthous</h2><div class="oh l"><h3 class="bd b gz z fq of fs ft og fv fx dk translated">作为一个媒体会员，你的会员费的一部分会给你阅读的作家，你可以完全接触到每一个故事…</h3></div><div class="oi l"><p class="bd b dl z fq of fs ft og fv fx dk translated">gmyrianthous.medium.com</p></div></div><div class="oj l"><div class="ok l ol om on oj oo kt oa"/></div></div></a></div></div><div class="ab cl lw lx hy ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="in io ip iq ir"><p id="676e" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated"><strong class="lc iv">相关文章你可能也喜欢</strong></p><div class="nx ny gq gs nz oa"><a rel="noopener follow" target="_blank" href="/diagrams-as-code-python-d9cbaa959ed5"><div class="ob ab fp"><div class="oc ab od cl cj oe"><h2 class="bd iv gz z fq of fs ft og fv fx it bi translated">Python中作为代码的图</h2><div class="oh l"><h3 class="bd b gz z fq of fs ft og fv fx dk translated">用Python创建云系统架构图</h3></div><div class="oi l"><p class="bd b dl z fq of fs ft og fv fx dk translated">towardsdatascience.com</p></div></div><div class="oj l"><div class="op l ol om on oj oo kt oa"/></div></div></a></div></div><div class="ab cl lw lx hy ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="in io ip iq ir"><div class="kk kl km kn gu oa"><a rel="noopener follow" target="_blank" href="/apache-airflow-architecture-496b9cb28288"><div class="ob ab fp"><div class="oc ab od cl cj oe"><h2 class="bd iv gz z fq of fs ft og fv fx it bi translated">阿帕奇气流架构</h2><div class="oh l"><h3 class="bd b gz z fq of fs ft og fv fx dk translated">深入探讨Apache Airflow架构及其如何编排工作流</h3></div><div class="oi l"><p class="bd b dl z fq of fs ft og fv fx dk translated">towardsdatascience.com</p></div></div><div class="oj l"><div class="oq l ol om on oj oo kt oa"/></div></div></a></div></div><div class="ab cl lw lx hy ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="in io ip iq ir"><div class="kk kl km kn gu oa"><a rel="noopener follow" target="_blank" href="/docker-image-vs-container-7d9acab24c5"><div class="ob ab fp"><div class="oc ab od cl cj oe"><h2 class="bd iv gz z fq of fs ft og fv fx it bi translated">Docker图像与容器</h2><div class="oh l"><h3 class="bd b gz z fq of fs ft og fv fx dk translated">理解Docker中图像和容器的区别</h3></div><div class="oi l"><p class="bd b dl z fq of fs ft og fv fx dk translated">towardsdatascience.com</p></div></div><div class="oj l"><div class="or l ol om on oj oo kt oa"/></div></div></a></div></div></div>    
</body>
</html>