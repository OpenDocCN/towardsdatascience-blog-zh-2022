<html>
<head>
<title>How to Create a GIF from Matplotlib Plots in Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何用Python从Matplotlib图创建GIF</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/how-to-create-a-gif-from-matplotlib-plots-in-python-6bec6c0c952c#2022-10-18">https://towardsdatascience.com/how-to-create-a-gif-from-matplotlib-plots-in-python-6bec6c0c952c#2022-10-18</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="71e3" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">基于imageio的二维时间序列数据可视化技术</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ki"><img src="../Images/8c1aad7c988a05650e4db665e3b681cc.png" data-original-src="https://miro.medium.com/v2/resize:fit:864/1*LMtJAdt9SffpKRQPyhckGA.gif"/></div><p class="kq kr gj gh gi ks kt bd b be z dk translated">用Matplotlib和imageio创建的GIF(图片由作者提供)</p></figure><p id="20d5" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">我们都知道线图是可视化时间序列的最直观的方式。但是，如何可视化具有两个有关系的特征的时间序列，比如x和y坐标或经度和纬度？gif是可视化二维时间序列数据的好方法。</p><blockquote class="lq"><p id="a78a" class="lr ls it bd lt lu lv lw lx ly lz lp dk translated">gif是可视化二维时间序列数据的好方法。</p></blockquote><p id="34b1" class="pw-post-body-paragraph ku kv it kw b kx ma ju kz la mb jx lc ld mc lf lg lh md lj lk ll me ln lo lp im bi translated">让我们看看下面的例子。</p><pre class="kj kk kl km gt mf mg mh mi aw mj bi"><span id="76e0" class="mk ml it mg b gy mm mn l mo mp">x = [1, 2, 3, 4, 4, 4, 4, 3, 2, 1, 1, 1, 1]<br/>y = [1, 1, 1, 1, 2, 3, 4, 4, 4, 4, 3, 2, 1]<br/>time = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12</span></pre><p id="765c" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">您可以首先用线图绘制一段时间内的每个要素。但是对于这种数据可视化，这两个特征之间的关系并不清楚。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi mq"><img src="../Images/73935d1e13c7f83761ea88a5501cdbe1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1152/format:webp/1*E-2whiYKbi25BaF1vG5x7A.png"/></div><p class="kq kr gj gh gi ks kt bd b be z dk translated">两个独立时间序列的折线图(图片由作者提供)</p></figure><p id="1061" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">接下来，你可以在y上绘制x，这揭示了两个特征之间的关系。但是现在你错过了时间。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ki"><img src="../Images/80516483abd95890120e8a3d9d5c9559.png" data-original-src="https://miro.medium.com/v2/resize:fit:864/format:webp/1*WzelpYFphxU01T-WkobXkg.png"/></div><p class="kq kr gj gh gi ks kt bd b be z dk translated">x在y之上(图片由作者提供)</p></figure><p id="696c" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">为了形象化两个特征和时间之间的关系，我们可以使用GIF。</p><p id="1288" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">本教程将向你展示如何用Python通过三个简单的步骤快速创建GIF。</p><h1 id="0f1d" class="mr ml it bd ms mt mu mv mw mx my mz na jz nb ka nc kc nd kd ne kf nf kg ng nh bi translated">如何用Python创建GIF</h1><p id="92b8" class="pw-post-body-paragraph ku kv it kw b kx ni ju kz la nj jx lc ld nk lf lg lh nl lj lk ll nm ln lo lp im bi translated">你可以使用库<a class="ae nn" href="https://matplotlib.org/" rel="noopener ugc nofollow" target="_blank"> Matplotlib </a>和<a class="ae nn" href="https://imageio.readthedocs.io/en/stable/" rel="noopener ugc nofollow" target="_blank"> imageio </a>通过三个简单的步骤用Python创建GIF:</p><ol class=""><li id="ad0e" class="no np it kw b kx ky la lb ld nq lh nr ll ns lp nt nu nv nw bi translated"><a class="ae nn" href="#7d88" rel="noopener ugc nofollow">创建一个函数，用<a class="ae nn" href="https://matplotlib.org/" rel="noopener ugc nofollow" target="_blank"> Matplotlib </a>绘制时间相关帧</a></li><li id="e9de" class="no np it kw b kx nx la ny ld nz lh oa ll ob lp nt nu nv nw bi translated"><a class="ae nn" href="#38ba" rel="noopener ugc nofollow">绘制GIF的所有帧</a></li><li id="dd38" class="no np it kw b kx nx la ny ld nz lh oa ll ob lp nt nu nv nw bi translated"><a class="ae nn" href="#1cac" rel="noopener ugc nofollow">用<a class="ae nn" href="https://imageio.readthedocs.io/en/stable/" rel="noopener ugc nofollow" target="_blank">图像</a>将这些帧组合成GIF </a></li></ol></div><div class="ab cl oc od hx oe" role="separator"><span class="of bw bk og oh oi"/><span class="of bw bk og oh oi"/><span class="of bw bk og oh"/></div><div class="im in io ip iq"><p id="f6c7" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">对于本教程，我们将使用<a class="ae nn" href="https://matplotlib.org/" rel="noopener ugc nofollow" target="_blank"> Matplotlib </a>来绘制GIF的单个帧，并使用<a class="ae nn" href="https://imageio.readthedocs.io/en/stable/" rel="noopener ugc nofollow" target="_blank"> imageio </a>将单个帧组合成一个GIF。</p><pre class="kj kk kl km gt mf mg mh mi aw mj bi"><span id="8d49" class="mk ml it mg b gy mm mn l mo mp">import matplotlib.pyplot as plt<br/>import imageio</span></pre><h2 id="7d88" class="mk ml it bd ms oj ok dn mw ol om dp na ld on oo nc lh op oq ne ll or os ng ot bi translated">1.创建一个绘制时间相关帧的函数</h2><p id="351f" class="pw-post-body-paragraph ku kv it kw b kx ni ju kz la nj jx lc ld nk lf lg lh nl lj lk ll nm ln lo lp im bi translated">首先，您将创建一个函数<code class="fe ou ov ow mg b">create_frame(t)</code>,它在一个特定的时间戳绘制GIF的单个帧，并用一个惟一的名称保存它。</p><p id="abc4" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">我建议设置参数<code class="fe ou ov ow mg b">transparent = False</code>和<code class="fe ou ov ow mg b">facecolor = 'white'</code>，以避免由于单个透明帧重叠而在gif中产生奇怪的效果。</p><pre class="kj kk kl km gt mf mg mh mi aw mj bi"><span id="0114" class="mk ml it mg b gy mm mn l mo mp">def create_frame(t):<br/>    fig = plt.figure(figsize=(6, 6))</span><span id="e102" class="mk ml it mg b gy ox mn l mo mp">    plt.plot(x[:(t+1)], y[:(t+1)], color = 'grey' )<br/>    plt.plot(x[t], y[t], color = 'black', marker = 'o' )</span><span id="f58c" class="mk ml it mg b gy ox mn l mo mp">    plt.xlim([0,5])<br/>    plt.xlabel('x', fontsize = 14)<br/>    plt.ylim([0,5])<br/>    plt.ylabel('y', fontsize = 14)<br/>    plt.title(f'Relationship between x and y at step {t}',<br/>              fontsize=14)</span><span id="a638" class="mk ml it mg b gy ox mn l mo mp"><strong class="mg iu">    plt.savefig(f'./img/img_{t}.png', <br/>                transparent = False,  <br/>                facecolor = 'white'<br/>               )</strong></span><span id="a2d0" class="mk ml it mg b gy ox mn l mo mp">    plt.close()</span></pre><h2 id="38ba" class="mk ml it bd ms oj ok dn mw ol om dp na ld on oo nc lh op oq ne ll or os ng ot bi translated">2.绘制GIF的所有框架</h2><p id="90c4" class="pw-post-body-paragraph ku kv it kw b kx ni ju kz la nj jx lc ld nk lf lg lh nl lj lk ll nm ln lo lp im bi translated">接下来，你要做的就是绘制GIF的所有帧。</p><pre class="kj kk kl km gt mf mg mh mi aw mj bi"><span id="f679" class="mk ml it mg b gy mm mn l mo mp">for t in time:<br/>    create_frame(t)</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="oz pa di pb bf pc"><div class="gh gi oy"><img src="../Images/5da2fa1f83eec937ab79918988828466.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WsLFZS08g2wZo1ZRgMyBcA.png"/></div></div><p class="kq kr gj gh gi ks kt bd b be z dk translated">用Matplotlib绘制的GIF的所有单帧(图片由作者提供)</p></figure><p id="b9c6" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">并将所有的单帧保存到一个名为<code class="fe ou ov ow mg b">frames</code>的数组中。</p><pre class="kj kk kl km gt mf mg mh mi aw mj bi"><span id="b421" class="mk ml it mg b gy mm mn l mo mp">frames = []</span><span id="d996" class="mk ml it mg b gy ox mn l mo mp">for t in time:<br/>    image = imageio.v2.imread(f'./img/img_{t}.png')<br/>    frames.append(image)</span></pre><h2 id="1cac" class="mk ml it bd ms oj ok dn mw ol om dp na ld on oo nc lh op oq ne ll or os ng ot bi translated">3.将这些帧组合成一个GIF</h2><p id="3437" class="pw-post-body-paragraph ku kv it kw b kx ni ju kz la nj jx lc ld nk lf lg lh nl lj lk ll nm ln lo lp im bi translated">最后，您所要做的就是用<code class="fe ou ov ow mg b">mimsave</code>方法将这些帧保存到GIF文件中。您可以使用<code class="fe ou ov ow mg b">fps</code>参数调整GIF的每秒帧数(fps)。</p><pre class="kj kk kl km gt mf mg mh mi aw mj bi"><span id="9ef6" class="mk ml it mg b gy mm mn l mo mp">imageio.mimsave('./example.gif', # output gif<br/>                frames,          # array of input frames<br/>                fps = 5)         # optional: frames per second</span></pre><p id="04bc" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">生成的GIF如下所示。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ki"><img src="../Images/8c1aad7c988a05650e4db665e3b681cc.png" data-original-src="https://miro.medium.com/v2/resize:fit:864/1*LMtJAdt9SffpKRQPyhckGA.gif"/></div><p class="kq kr gj gh gi ks kt bd b be z dk translated">用Matplotlib和imageio创建的GIF(图片由作者提供)</p></figure><p id="33f1" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">如果你想让GIF在最后一帧后停止，给<code class="fe ou ov ow mg b">mimsave</code>方法添加参数<code class="fe ou ov ow mg b">loop = 1</code>。</p><pre class="kj kk kl km gt mf mg mh mi aw mj bi"><span id="5e13" class="mk ml it mg b gy mm mn l mo mp">imageio.mimsave('./example.gif', <br/>                frames, <br/>                fps = 5, <br/>                <strong class="mg iu">loop = 1</strong>)</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ki"><img src="../Images/967e099a163c2a36f5e7a3514352c822.png" data-original-src="https://miro.medium.com/v2/resize:fit:864/1*ucCKCGohOyfbsOHtdARY3A.gif"/></div><p class="kq kr gj gh gi ks kt bd b be z dk translated">使用Matplotlib和imageio创建的GIF，在最后一帧循环一次后停止(图片由作者提供)</p></figure><h1 id="cca5" class="mr ml it bd ms mt mu mv mw mx my mz na jz nb ka nc kc nd kd ne kf nf kg ng nh bi translated">结论</h1><p id="fcca" class="pw-post-body-paragraph ku kv it kw b kx ni ju kz la nj jx lc ld nk lf lg lh nl lj lk ll nm ln lo lp im bi translated">用线图可视化二维时间序列数据可能是无效的，因为它不能显示两个特征之间的关系。对于经度和纬度或x和y坐标这样的二维时间序列数据，使用gif是更好的数据可视化替代方法。</p><p id="679c" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">在这个简短的教程中，您学习了如何使用Python中的<a class="ae nn" href="https://matplotlib.org/" rel="noopener ugc nofollow" target="_blank"> Matplotlib </a>和<a class="ae nn" href="https://imageio.readthedocs.io/en/stable/" rel="noopener ugc nofollow" target="_blank"> imageio </a>创建GIF，只需三个简单的步骤:</p><ol class=""><li id="f8b1" class="no np it kw b kx ky la lb ld nq lh nr ll ns lp nt nu nv nw bi translated"><a class="ae nn" href="#7d88" rel="noopener ugc nofollow">创建一个函数，用<a class="ae nn" href="https://matplotlib.org/" rel="noopener ugc nofollow" target="_blank"> Matplotlib </a>绘制时间相关帧</a></li><li id="daca" class="no np it kw b kx nx la ny ld nz lh oa ll ob lp nt nu nv nw bi translated"><a class="ae nn" href="#38ba" rel="noopener ugc nofollow">绘制GIF的所有帧</a></li><li id="0ecb" class="no np it kw b kx nx la ny ld nz lh oa ll ob lp nt nu nv nw bi translated"><a class="ae nn" href="#1cac" rel="noopener ugc nofollow">用<a class="ae nn" href="https://imageio.readthedocs.io/en/stable/" rel="noopener ugc nofollow" target="_blank">图像</a>将这些帧组合成GIF </a></li></ol></div><div class="ab cl oc od hx oe" role="separator"><span class="of bw bk og oh oi"/><span class="of bw bk og oh oi"/><span class="of bw bk og oh"/></div><div class="im in io ip iq"><h1 id="1830" class="mr ml it bd ms mt pd mv mw mx pe mz na jz pf ka nc kc pg kd ne kf ph kg ng nh bi translated">喜欢这个故事吗？</h1><p id="ae97" class="pw-post-body-paragraph ku kv it kw b kx ni ju kz la nj jx lc ld nk lf lg lh nl lj lk ll nm ln lo lp im bi translated"><em class="pi">这里收集了我的其他时间序列分析和预测文章:</em></p><div class="pj pk gp gr pl"><div role="button" tabindex="0" class="ab bv gv cb fp pm pn bn po ko ex"><div class="pp l"><div class="ab q"><div class="l di"><img alt="Leonie Monigatti" class="l de bw pq pr fe" src="../Images/61f354281722566e5c755e2cf181514f.png" width="20" height="20" loading="lazy" data-original-src="https://miro.medium.com/v2/resize:fill:40:40/1*TTIl4oynrJyfIkLbC6fumA.png"/><div class="fb bw l pq pr fc n aw fd"/></div><div class="hh l fo"><p class="bd b dl z fp fq fr fs ft fu fv fw dk translated">莉奥妮·莫尼加蒂</p></div></div><div class="pu pv gw l"><h2 class="bd iu vl no fp vm fr fs qt fu fw is bi translated">时间序列分析和预测</h2></div><div class="ab q"><div class="l fo"><a class="bd b be z bi vn au vo vp vq sc vr an eh ei vs vt vu el em eo de bk ep" href="https://medium.com/@iamleonie/list/time-series-analysis-and-forecasting-ff223343e5b3?source=post_page-----6bec6c0c952c--------------------------------" rel="noopener follow" target="_top">View list</a></div><div class="vv l fo"><span class="bd b dl z dk">6 stories</span></div></div></div><div class="qh dh qi fp ab qj fo di"><div class="di pz bv qa qb"><div class="dh l"><img alt="Hierarchical time series forecasting" class="dh" src="../Images/4bb5c99058251c4c4d0c2dbd429c6a49.png" width="194" height="194" loading="lazy" data-original-src="https://miro.medium.com/v2/resize:fill:388:388/1*CmvIoCBjwqFAtcuKfFZDqQ@2x.jpeg"/></div></div><div class="di pz bv qc qd qe"><div class="dh l"><img alt="GIF created with Matplotlib and imageio" class="dh" src="../Images/abc6639dcdc3f96a50cebc7d09560695.png" width="194" height="194" loading="lazy" data-original-src="https://miro.medium.com/v2/da:true/resize:fill:388:388/1*LMtJAdt9SffpKRQPyhckGA.gif"/></div></div><div class="di bv qf qg qe"><div class="dh l"><img alt="A time series with lines indicating trend and variance for time series analysis. The last three data points are in a contrast color to indicate that they are predicted values from the time series forecasting model" class="dh" src="../Images/ac9f4944cc2d98de3172e5cc0f2daac2.png" width="194" height="194" loading="lazy" data-original-src="https://miro.medium.com/v2/resize:fill:388:388/1*41Vdmjh7lCeD2bpHbI1JEw.png"/></div></div></div></div></div><p id="b6ed" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">如果你想把我的新故事直接发到你的收件箱，请务必订阅<a class="ae nn" href="https://medium.com/subscribe/@iamleonie" rel="noopener"><em class="pi"/></a><em class="pi">！</em></p><p id="e677" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated"><em class="pi">成为媒介会员，阅读更多来自我和其他作家的故事。报名时可以用我的</em> <a class="ae nn" href="https://medium.com/@iamleonie/membership" rel="noopener"> <em class="pi">推荐链接</em> </a> <em class="pi">支持我。我将收取佣金，不需要你额外付费。</em></p><div class="pj pk gp gr pl qn"><a href="https://medium.com/@iamleonie/membership" rel="noopener follow" target="_blank"><div class="qo ab fo"><div class="qp ab qq cl cj qr"><h2 class="bd iu gy z fp qs fr fs qt fu fw is bi translated">通过我的推荐链接加入Medium—Leonie Monigatti</h2><div class="qu l"><h3 class="bd b gy z fp qs fr fs qt fu fw dk translated">阅读Leonie Monigatti(以及媒体上成千上万的其他作家)的每一个故事。您的会员费直接…</h3></div><div class="qv l"><p class="bd b dl z fp qs fr fs qt fu fw dk translated">medium.com</p></div></div><div class="qw l"><div class="qx l qy qz ra qw rb ko qn"/></div></div></a></div><p id="c115" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated"><em class="pi">在</em><a class="ae nn" href="https://twitter.com/helloiamleonie" rel="noopener ugc nofollow" target="_blank"><em class="pi">Twitter</em></a><em class="pi"/><a class="ae nn" href="https://www.linkedin.com/in/804250ab/" rel="noopener ugc nofollow" target="_blank"><em class="pi">LinkedIn</em></a><em class="pi"/><a class="ae nn" href="https://www.kaggle.com/iamleonie" rel="noopener ugc nofollow" target="_blank"><em class="pi">Kaggle</em></a><em class="pi">！</em></p></div></div>    
</body>
</html>