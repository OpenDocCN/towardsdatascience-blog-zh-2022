<html>
<head>
<title>Analysis of the polarity of tweets with the hashtag #bridgerton on Twitter</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Twitter上标签为#bridgerton的推文的极性分析</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/analysis-of-the-polarity-of-tweets-with-the-hashtag-bridgerton-on-twitter-7ed7ac75cf3b#2022-05-15">https://towardsdatascience.com/analysis-of-the-polarity-of-tweets-with-the-hashtag-bridgerton-on-twitter-7ed7ac75cf3b#2022-05-15</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/92e3b5da446c624acbbe90201b707961.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*nCbznu69Q3Ozfnum"/></div></div><p class="jy jz gj gh gi ka kb bd b be z dk translated">在Unsplash的Shayna Douglas</p></figure><p id="9831" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kf ir"> Twitter </strong>是一个社交网络，用户在这里自发地对时事做出反应。从数据分析的角度来看，Twitter上的可用数据非常有趣，因为它的分析可以让研究人员实时确定用户对某个产品或某个人的<strong class="kf ir">感受</strong>。例如，对Twitter上可用信息的分析将使公司能够快速发现用户对特定产品的不满，并采取相应行动以避免经济损失。Twitter上可用的信息也可以用来分析用户对某个人的感觉，例如，政治家、商人、名人或运动员。基本上，我们可以利用Twitter上可用的信息来分析几乎任何事物的极性，包括电视剧和节目。</p><p id="b3a3" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">《布里奇顿》是一部根据朱莉娅·奎因的小说改编的美剧。该系列以<strong class="kf ir">摄政时代</strong>(1811–1820)<em class="lb"/>为背景，重点讲述了一个<strong class="kf ir">伦敦上流社会家庭</strong>——布里奇顿家族的故事。在社交季节，英国上流社会的成员在竞争激烈的婚姻市场上首次亮相。第一季聚焦于家族长女达芙妮·布里吉顿的出道。第二季聚焦于家族长子安东尼·布里德顿的寻妻之旅。这最后一季于2022年3月25日上映，并迅速成为网飞最受关注的英语系列之一。但是，公众对上一季真的满意吗？</p><p id="0e5c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在这个项目中，我们将使用推文中包含的<strong class="kf ir">观点词和表情符号</strong>来分析标签为#bridgerton的推文的<strong class="kf ir">极性。这些元素在文本中被用来传达观点，因此可以帮助我们了解在上次发布后公众的反应是积极的还是消极的。</strong></p><h1 id="c276" class="lc ld iq bd le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz bi translated">项目步骤</h1><p id="370a" class="pw-post-body-paragraph kd ke iq kf b kg ma ki kj kk mb km kn ko mc kq kr ks md ku kv kw me ky kz la ij bi translated">项目部分如下:</p><ol class=""><li id="bd33" class="mf mg iq kf b kg kh kk kl ko mh ks mi kw mj la mk ml mm mn bi translated"><strong class="kf ir"> Tweepy安装和认证。</strong></li><li id="14e5" class="mf mg iq kf b kg mo kk mp ko mq ks mr kw ms la mk ml mm mn bi translated"><strong class="kf ir">使用Tweepy收集数据。</strong></li><li id="112b" class="mf mg iq kf b kg mo kk mp ko mq ks mr kw ms la mk ml mm mn bi translated"><strong class="kf ir">数据清洗。</strong></li><li id="e594" class="mf mg iq kf b kg mo kk mp ko mq ks mr kw ms la mk ml mm mn bi translated"><strong class="kf ir">情绪分析。</strong></li><li id="4f61" class="mf mg iq kf b kg mo kk mp ko mq ks mr kw ms la mk ml mm mn bi translated"><strong class="kf ir"> AFINN字典和表情符号字典。</strong></li><li id="b0a7" class="mf mg iq kf b kg mo kk mp ko mq ks mr kw ms la mk ml mm mn bi translated">在表情符号前后添加空格。</li><li id="4184" class="mf mg iq kf b kg mo kk mp ko mq ks mr kw ms la mk ml mm mn bi translated"><strong class="kf ir">计算微博的极性。</strong></li><li id="fc33" class="mf mg iq kf b kg mo kk mp ko mq ks mr kw ms la mk ml mm mn bi translated"><strong class="kf ir">分析推特的极性。</strong></li><li id="78f6" class="mf mg iq kf b kg mo kk mp ko mq ks mr kw ms la mk ml mm mn bi translated"><strong class="kf ir">未来的改进和需要克服的主要挑战。</strong></li><li id="d8a0" class="mf mg iq kf b kg mo kk mp ko mq ks mr kw ms la mk ml mm mn bi translated"><strong class="kf ir">分析极性随时间的演变。</strong></li><li id="2846" class="mf mg iq kf b kg mo kk mp ko mq ks mr kw ms la mk ml mm mn bi translated"><strong class="kf ir">项目总结。</strong></li></ol><h1 id="6ba5" class="lc ld iq bd le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz bi translated">Tweepy安装和身份验证</h1><p id="0384" class="pw-post-body-paragraph kd ke iq kf b kg ma ki kj kk mb km kn ko mc kq kr ks md ku kv kw me ky kz la ij bi translated">在这个项目中，我们使用<strong class="kf ir"> Twitter API </strong>来获取分析所需的数据。有各种不同编程语言的包可以使用Twitter API提取数据。在这个分析中，我们将使用名为<strong class="kf ir"> Tweepy </strong>的Python库。该库处于持续维护中，并被开发人员广泛使用，因此我们认为它是获取数据的最合适的替代方案。</p><p id="6163" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">当我们想要使用API时，第一步是<strong class="kf ir">获得允许我们使用API获取数据的凭证</strong>。在这种情况下，有必要<strong class="kf ir">注册一个开发者账户，并申请免费提升权限</strong>。然后，您需要在<strong class="kf ir"> Twitter开发者web控制台</strong>中<strong class="kf ir">创建一个应用</strong>。重要的是要记住，使用API需要一个Twitter帐户。如果你没有Twitter账户，你需要在你的电脑上创建一个来运行这个项目。</p><figure class="mu mv mw mx gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mt"><img src="../Images/121fb7a2a6022fe0f0a2ef1f9122dbaf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hgfGXOFs9f8P5x9iDTwDmw.png"/></div></div><p class="jy jz gj gh gi ka kb bd b be z dk translated">Twitter开发人员门户(提升的帐户)—图片由作者创建</p></figure><p id="f93b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在完成获取<strong class="kf ir"> Twitter API </strong>的凭证的步骤后，我们继续在我们的计算机上安装和配置<strong class="kf ir"> Tweepy </strong>。要安装Tweepy，我们需要在终端或Anaconda提示符下键入以下命令之一:</p><blockquote class="my mz na"><p id="f316" class="kd ke lb kf b kg kh ki kj kk kl km kn nb kp kq kr nc kt ku kv nd kx ky kz la ij bi translated">pip安装tweepy(终端安装)</p><p id="0f2e" class="kd ke lb kf b kg kh ki kj kk kl km kn nb kp kq kr nc kt ku kv nd kx ky kz la ij bi translated">conda install-c conda-forge tweepy(Anaconda即时安装)</p></blockquote><p id="c82f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">一旦安装了Tweepy，我们<strong class="kf ir">将库</strong>导入到脚本中，并且<strong class="kf ir">设置凭证</strong>。在试图从社交网络收集数据之前，我们需要提供以下<strong class="kf ir">密钥和令牌</strong>来保证通过Tweepy访问Twitter的API。所有密钥都是令牌，可在应用程序的<em class="lb">密钥和令牌</em>选项卡中找到。</p><ol class=""><li id="30de" class="mf mg iq kf b kg kh kk kl ko mh ks mi kw mj la mk ml mm mn bi translated"><strong class="kf ir">消费者_密钥</strong></li><li id="4b4c" class="mf mg iq kf b kg mo kk mp ko mq ks mr kw ms la mk ml mm mn bi translated"><strong class="kf ir">消费者_秘密</strong></li><li id="5419" class="mf mg iq kf b kg mo kk mp ko mq ks mr kw ms la mk ml mm mn bi translated"><strong class="kf ir">访问令牌</strong></li><li id="6113" class="mf mg iq kf b kg mo kk mp ko mq ks mr kw ms la mk ml mm mn bi translated"><strong class="kf ir">访问_令牌_秘密</strong></li></ol><p id="2f5a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们向Tweepy的<code class="fe ne nf ng nh b">OAuthHandler</code>对象提供<strong class="kf ir">消费者密钥</strong>和<strong class="kf ir">消费者秘密</strong>。然后，我们需要用<code class="fe ne nf ng nh b">set_access_token</code>方法设置访问代码，提供<strong class="kf ir">访问令牌</strong>和<strong class="kf ir">访问令牌秘密</strong>作为参数。最后，我们以下面的方式将授权对象(<code class="fe ne nf ng nh b">auth</code>)传递给<code class="fe ne nf ng nh b">tweepy.API</code>函数:</p><figure class="mu mv mw mx gt jr"><div class="bz fp l di"><div class="ni nj l"/></div></figure><p id="13f0" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如上所示，我们可以使用<code class="fe ne nf ng nh b">API</code>类的<code class="fe ne nf ng nh b">verify_credentials</code>方法来检查凭证是否有效。</p><p id="bed2" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">现在，我们准备开始从Twitter收集数据。💙</p></div><div class="ab cl nk nl hu nm" role="separator"><span class="nn bw bk no np nq"/><span class="nn bw bk no np nq"/><span class="nn bw bk no np"/></div><div class="ij ik il im in"><h1 id="bbe0" class="lc ld iq bd le lf nr lh li lj ns ll lm ln nt lp lq lr nu lt lu lv nv lx ly lz bi translated">使用Tweepy收集数据</h1><p id="e977" class="pw-post-body-paragraph kd ke iq kf b kg ma ki kj kk mb km kn ko mc kq kr ks md ku kv kw me ky kz la ij bi translated">我们使用<strong class="kf ir"> Tweepy </strong>提供的<code class="fe ne nf ng nh b">Cursor</code>函数来获取包含<em class="lb"> #bridgertons </em>的tweets。<code class="fe ne nf ng nh b">q</code>参数包含我们想要查询的术语。我们指定<code class="fe ne nf ng nh b">-filter:retweets</code>从请求中排除转发。下面的链接展示了我们如何在Twitter API中定制查询，例如，指定一个位置，或者使用布尔运算符来匹配多个术语。</p><div class="nw nx gp gr ny nz"><a href="https://developer.twitter.com/en/docs/twitter-api/tweets/search/integrate/build-a-query" rel="noopener  ugc nofollow" target="_blank"><div class="oa ab fo"><div class="ob ab oc cl cj od"><h2 class="bd ir gy z fp oe fr fs of fu fw ip bi translated">搜索Tweets -如何建立一个查询</h2><div class="og l"><h3 class="bd b gy z fp oe fr fs of fu fw dk translated">搜索端点接受带有GET请求的单个查询，并返回一组匹配…</h3></div><div class="oh l"><p class="bd b dl z fp oe fr fs of fu fw dk translated">developer.twitter.com</p></div></div><div class="oi l"><div class="oj l ok ol om oi on jw nz"/></div></div></a></div><p id="b875" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">此外，由于我们只分析英语推文，我们将参数<code class="fe ne nf ng nh b">lang</code>设置为等于<code class="fe ne nf ng nh b">'en'</code>。我们指定<code class="fe ne nf ng nh b">tweet_mode=’extended'</code>来获取tweet的整个文本，因为默认情况下，<code class="fe ne nf ng nh b">tweepy.API</code>返回的<code class="fe ne nf ng nh b">text</code>属性被截断为140个字符。查询完tweets后，我们将全文存储在一个列表中，以供进一步处理。</p><figure class="mu mv mw mx gt jr"><div class="bz fp l di"><div class="ni nj l"/></div></figure><p id="f05c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们不会对搜索设置任何时间或空间限制；然而，重要的是要记住<strong class="kf ir">使用标准API将不会获得超过一周</strong>的tweets。如果我们想访问旧的推文，我们需要访问Twitter的高级API。<strong class="kf ir"> Tweepy </strong>还支持访问高级API来检索信息(例如通过<code class="fe ne nf ng nh b">API.search_30_day</code>或<code class="fe ne nf ng nh b">API.search_full_archive</code>函数)。</p><div class="nw nx gp gr ny nz"><a href="https://developer.twitter.com/en/support/twitter-api/premium" rel="noopener  ugc nofollow" target="_blank"><div class="oa ab fo"><div class="ob ab oc cl cj od"><h2 class="bd ir gy z fp oe fr fs of fu fw ip bi translated">高级API支持</h2><div class="og l"><h3 class="bd b gy z fp oe fr fs of fu fw dk translated">在此使用高级API获得支持。</h3></div><div class="oh l"><p class="bd b dl z fp oe fr fs of fu fw dk translated">developer.twitter.com</p></div></div><div class="oi l"><div class="oo l ok ol om oi on jw nz"/></div></div></a></div></div><div class="ab cl nk nl hu nm" role="separator"><span class="nn bw bk no np nq"/><span class="nn bw bk no np nq"/><span class="nn bw bk no np"/></div><div class="ij ik il im in"><h1 id="2b54" class="lc ld iq bd le lf nr lh li lj ns ll lm ln nt lp lq lr nu lt lu lv nv lx ly lz bi translated">数据清理</h1><p id="c6cd" class="pw-post-body-paragraph kd ke iq kf b kg ma ki kj kk mb km kn ko mc kq kr ks md ku kv kw me ky kz la ij bi translated">下一步是清理我们在上一节中获得的tweets。社交媒体数据通常包含大量噪音，因此必须执行多次清理任务，以进一步处理数据。如下所示，<strong class="kf ir">我们使用Python中的正则表达式从tweets中消除URL、标签和提及</strong>。</p><p id="abc4" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在这种情况下，我们决定删除@ signs(提及)和# signs (hashtag)，保留原始术语，不做任何修改(例如，<code class="fe ne nf ng nh b">#happy</code>转换为<code class="fe ne nf ng nh b">happy</code>)。我们决定保留标签中的术语，因为在许多情况下，这些术语会在一个句子中使用，并且对于理解其含义是必要的(例如，我对新赛季真的很满意)。此外，我们还将删除数据中的标点符号。</p><p id="2dbb" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">为了清理推文，我们定义了函数<code class="fe ne nf ng nh b">clean_tweet</code>。这个函数从文本(在这个例子中是tweet)中删除URL、标点符号、#和@。</p><figure class="mu mv mw mx gt jr"><div class="bz fp l di"><div class="ni nj l"/></div></figure><p id="5f06" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在对每条推文应用该函数后，我们将结果可视化。</p><figure class="mu mv mw mx gt jr"><div class="bz fp l di"><div class="ni nj l"/></div></figure><figure class="mu mv mw mx gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi op"><img src="../Images/43440deb2f6db56c4487ef36e7780b03.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*AQMzI0Rf4ivk_q2Vi0Byww.png"/></div></div><p class="jy jz gj gh gi ka kb bd b be z dk translated">干净的推文(图片由作者创建)</p></figure></div><div class="ab cl nk nl hu nm" role="separator"><span class="nn bw bk no np nq"/><span class="nn bw bk no np nq"/><span class="nn bw bk no np"/></div><div class="ij ik il im in"><h1 id="96c1" class="lc ld iq bd le lf nr lh li lj ns ll lm ln nt lp lq lr nu lt lu lv nv lx ly lz bi translated"><strong class="ak">情绪分析</strong></h1><p id="cfca" class="pw-post-body-paragraph kd ke iq kf b kg ma ki kj kk mb km kn ko mc kq kr ks md ku kv kw me ky kz la ij bi translated"><strong class="kf ir">情感分析</strong>是计算语言最有前途的领域之一，它基于<strong class="kf ir">确定文本的正面、负面或中性情感</strong>。这是一个不断发展的领域，尽管它远未达到人类文本分析的能力，但许多工具允许我们以超过可接受的质量快速分析文本的极性。</p><p id="da14" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kf ir">意见词</strong>是用来表达意见的词。有一些形容词，如<em class="lb">漂亮的</em>、<em class="lb">令人惊奇的</em>或<em class="lb">好的</em>，我们用来表达积极的感觉。我们也可以认为像<em class="lb">废话</em>这样的名词或者像<em class="lb">无聊</em>这样的形容词都有负面的内涵，因此会被观点持有人用来表示不适或者拒绝。</p><p id="01b6" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kf ir">表情符号</strong>在社交媒体交流中发挥着重要作用，尤其是在推特上。作为观点词，一些表情符号表达积极的情感(例如😃)，而其他的表示负极性(例如😢).为了尽可能准确地确定推文的情绪和观点，不仅需要分析文本中出现的词语的极性，还需要分析表情符号的极性。</p></div><div class="ab cl nk nl hu nm" role="separator"><span class="nn bw bk no np nq"/><span class="nn bw bk no np nq"/><span class="nn bw bk no np"/></div><div class="ij ik il im in"><h1 id="e890" class="lc ld iq bd le lf nr lh li lj ns ll lm ln nt lp lq lr nu lt lu lv nv lx ly lz bi translated">阿芬词典和表情词典</h1><p id="64c2" class="pw-post-body-paragraph kd ke iq kf b kg ma ki kj kk mb km kn ko mc kq kr ks md ku kv kw me ky kz la ij bi translated">情感词典的出现让研究人员能够快速而容易地分析文本的极性。在这个项目中，我们将计算整个文本(tweet)的极性，作为其单个单词和表情符号极性的总和。</p><p id="9632" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kf ir"> AFINN字典</strong>由<strong class="kf ir"> 2500个英语单词组成，根据它们的意思(例如，有一个和的比率)从-5(负面)到+5(正面)</strong>。分数越低，这个词越负面。这本字典是为了分析你能在社交媒体平台上找到的文本类型而创建的。</p><p id="376f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">不是所有能表达观点的形容词或名词都包含在<strong class="kf ir">阿芬词典</strong>里。这是因为有些词的极性完全取决于它们出现的语境。在某些情况下，形容词可以表达否定的观点，而在其他情况下，它表达肯定的感觉。</p><p id="807c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">AFINN字典可以在很多网站上找到，例如，你可以通过下面的链接轻松下载一个. txt文件。</p><div class="nw nx gp gr ny nz"><a href="https://github.com/abromberg/sentiment_analysis/blob/master/AFINN/AFINN-111.txt" rel="noopener  ugc nofollow" target="_blank"><div class="oa ab fo"><div class="ob ab oc cl cj od"><h2 class="bd ir gy z fp oe fr fs of fu fw ip bi translated">情感分析/AFINN-111.txt在国外硕士</h2><div class="og l"><h3 class="bd b gy z fp oe fr fs of fu fw dk translated">此文件包含双向Unicode文本，其解释或编译可能与下面显示的不同…</h3></div><div class="oh l"><p class="bd b dl z fp oe fr fs of fu fw dk translated">github.com</p></div></div><div class="oi l"><div class="oq l ok ol om oi on jw nz"/></div></div></a></div><p id="9f75" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">将<strong class="kf ir"> AFINN字典</strong>下载为. txt文件后，我们必须将其转换为<strong class="kf ir"> Python字典</strong>，以便在我们的分析中使用。</p><figure class="mu mv mw mx gt jr"><div class="bz fp l di"><div class="ni nj l"/></div></figure><p id="b8cd" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们应用<code class="fe ne nf ng nh b">opinion_words_txt2dict</code>将<strong class="kf ir"> AFINN-111.txt </strong>文件转换成<strong class="kf ir"> Python字典</strong>。</p><figure class="mu mv mw mx gt jr"><div class="bz fp l di"><div class="ni nj l"/></div></figure><figure class="mu mv mw mx gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi or"><img src="../Images/244d489e467a9bf37fdd8c1c289f8b51.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zFLag9RiBqDsNKrPMdRNpw.png"/></div></div><p class="jy jz gj gh gi ka kb bd b be z dk translated">观点词词典(图片由作者创作)</p></figure><p id="adc8" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如上所述，一条推文的<strong class="kf ir">极性不仅通过分析其<strong class="kf ir">观点词</strong>来计算，我们还会考虑<strong class="kf ir">表情符号</strong>。文件<strong class="kf ir"> emoji-polarity.txt </strong>包含JSON格式的表情符号的极性，可以使用下面链接中说明的<code class="fe ne nf ng nh b">emoji-emotion</code>模块获得。极性是由一个人根据这些表情符号的名称和它们的<a class="ae kc" href="https://github.com/words/afinn-165" rel="noopener ugc nofollow" target="_blank"> AFINN-165 </a>值手工分类的。</strong></p><div class="nw nx gp gr ny nz"><a href="https://github.com/words/emoji-emotion" rel="noopener  ugc nofollow" target="_blank"><div class="oa ab fo"><div class="ob ab oc cl cj od"><h2 class="bd ir gy z fp oe fr fs of fu fw ip bi translated">GitHub-words/e moji-emotion:JSON中被评价为有价的表情列表</h2><div class="og l"><h3 class="bd b gy z fp oe fr fs of fu fw dk translated">一系列表情符号，其价数介于负五(负)和正五(正)之间。这个包裹是…</h3></div><div class="oh l"><p class="bd b dl z fp oe fr fs of fu fw dk translated">github.com</p></div></div><div class="oi l"><div class="os l ok ol om oi on jw nz"/></div></div></a></div><p id="5af0" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们将<strong class="kf ir"> emoji-polarity.txt </strong>文件读取为<strong class="kf ir"> JSON对象</strong>。</p><figure class="mu mv mw mx gt jr"><div class="bz fp l di"><div class="ni nj l"/></div></figure><figure class="mu mv mw mx gt jr gh gi paragraph-image"><div class="gh gi ot"><img src="../Images/f36eafab53607df19917364497e081e0.png" data-original-src="https://miro.medium.com/v2/resize:fit:762/format:webp/1*C_onxeIE8O7uFUXztUfKaA.png"/></div><p class="jy jz gj gh gi ka kb bd b be z dk translated">表情符号-极性字典(图片由作者创建)</p></figure><p id="b573" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在读取文件后，其内容必须转换成与<code class="fe ne nf ng nh b">opinion_words_dictionary</code>的格式等效的格式，其中键包含表情符号，值是极性。</p><figure class="mu mv mw mx gt jr"><div class="bz fp l di"><div class="ni nj l"/></div></figure><figure class="mu mv mw mx gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi ou"><img src="../Images/0da57d93b0feac3ec64af427f2a8c013.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*84ZUlM2xISsv-FC5rnbfjw.png"/></div></div><p class="jy jz gj gh gi ka kb bd b be z dk translated">表情符号词典(图片由作者创建)</p></figure><p id="af51" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">现在，这两本词典都可以用来计算一条推文的极性。在这个项目中，我们使用<strong class="kf ir"> AFINN字典</strong> ( <code class="fe ne nf ng nh b">opinion_words_dictionary</code>)和<strong class="kf ir">表情符号极性字典(</strong> <code class="fe ne nf ng nh b">emojis_dictionary</code> <strong class="kf ir"> ) </strong>到<strong class="kf ir">计算一个代表一条推文极性的分数</strong>。极性计算为推文中每个单词和表情符号极性的<strong class="kf ir">总和，不包括不包含任何极性的单词和表情符号，即AFINN字典中没有的单词和表情符号。</strong></p></div><div class="ab cl nk nl hu nm" role="separator"><span class="nn bw bk no np nq"/><span class="nn bw bk no np nq"/><span class="nn bw bk no np"/></div><div class="ij ik il im in"><h1 id="2be4" class="lc ld iq bd le lf nr lh li lj ns ll lm ln nt lp lq lr nu lt lu lv nv lx ly lz bi translated"><strong class="ak">在表情符号前后添加空格</strong></h1><p id="e174" class="pw-post-body-paragraph kd ke iq kf b kg ma ki kj kk mb km kn ko mc kq kr ks md ku kv kw me ky kz la ij bi translated">为了单独分析tweet的每个元素，我们将检测tweet中的元素<strong class="kf ir">根据空格分割文本</strong>。在社交媒体中，将文字和表情符号放在一起很常见(例如，我喜欢😍)或者连续写几个表情符号(😍😍😍).出于这个原因，为了正确地获得tweet的单个元素(表情符号和观点词)，我们必须事先在每个表情符号的前后插入一个空格，如下所示。</p><p id="b1b1" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">功能<code class="fe ne nf ng nh b">is_emoji</code>使用<code class="fe ne nf ng nh b">emoji</code>库中可用的词典<code class="fe ne nf ng nh b">UNICODE_EMOJI</code>检测一个字符是否是表情符号。如果角色是表情符号，<code class="fe ne nf ng nh b">add_space</code>功能将<strong class="kf ir">在表情符号</strong>前后添加一个空格。</p><figure class="mu mv mw mx gt jr"><div class="bz fp l di"><div class="ni nj l"/></div></figure><p id="0c36" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们将<code class="fe ne nf ng nh b">add_space</code>函数应用于列表<code class="fe ne nf ng nh b">tweet_list_clean</code>中的每条tweet。如下图所示，我们现在观察到每个表情符号前后都有一个空格。</p><figure class="mu mv mw mx gt jr"><div class="bz fp l di"><div class="ni nj l"/></div></figure><figure class="mu mv mw mx gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi ov"><img src="../Images/fe35eb953ff3dc822ca974ef25550832.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6v0KC7Rn1gpFylpaI1_EIQ.png"/></div></div><p class="jy jz gj gh gi ka kb bd b be z dk translated">每个表情符号前后都有空格的推文(图片由作者创建)</p></figure></div><div class="ab cl nk nl hu nm" role="separator"><span class="nn bw bk no np nq"/><span class="nn bw bk no np nq"/><span class="nn bw bk no np"/></div><div class="ij ik il im in"><h1 id="c7a6" class="lc ld iq bd le lf nr lh li lj ns ll lm ln nt lp lq lr nu lt lu lv nv lx ly lz bi translated">计算推文的极性</h1><p id="81c1" class="pw-post-body-paragraph kd ke iq kf b kg ma ki kj kk mb km kn ko mc kq kr ks md ku kv kw me ky kz la ij bi translated">现在，是时候使用AFINN字典和表情符号极性字典<strong class="kf ir">计算推文的极性</strong>了。第一步是将两个字典合并成一个名为<code class="fe ne nf ng nh b">polarity_dictionary</code>的唯一字典。这个字典在<code class="fe ne nf ng nh b">tweet_polarity</code>函数中用于计算tweet的极性。</p><figure class="mu mv mw mx gt jr"><div class="bz fp l di"><div class="ni nj l"/></div></figure><p id="d432" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如下所示，我们使用<code class="fe ne nf ng nh b">tweet_polarity</code>函数来计算所有推文的极性。如果推文没有极性，这个函数返回None，这意味着推文中没有携带积极或消极情绪的单词或表情符号。</p><figure class="mu mv mw mx gt jr"><div class="bz fp l di"><div class="ni nj l"/></div></figure><figure class="mu mv mw mx gt jr gh gi paragraph-image"><div class="gh gi ow"><img src="../Images/e164c99a3794fd8ea4227d10fd408fd2.png" data-original-src="https://miro.medium.com/v2/resize:fit:608/format:webp/1*A29YmjLzzgFWtqNIjW5Gwg.png"/></div></figure><p id="a7aa" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在列表中的前10条推文中，有5条没有极性，即它们不包含任何在字典<code class="fe ne nf ng nh b">tweet_polarity</code>中找到的单词或表情符号。剩下的五条推文中，四条是正极，只有一条是负极。</p></div><div class="ab cl nk nl hu nm" role="separator"><span class="nn bw bk no np nq"/><span class="nn bw bk no np nq"/><span class="nn bw bk no np"/></div><div class="ij ik il im in"><h1 id="2896" class="lc ld iq bd le lf nr lh li lj ns ll lm ln nt lp lq lr nu lt lu lv nv lx ly lz bi translated">分析推文的极性</h1><p id="c2ec" class="pw-post-body-paragraph kd ke iq kf b kg ma ki kj kk mb km kn ko mc kq kr ks md ku kv kw me ky kz la ij bi translated">我们将推文及其极性存储在一个数据框架中，以供进一步分析。</p><figure class="mu mv mw mx gt jr"><div class="bz fp l di"><div class="ni nj l"/></div></figure><figure class="mu mv mw mx gt jr gh gi paragraph-image"><div class="gh gi ox"><img src="../Images/08e58f642f9b017076d939b7ced1575a.png" data-original-src="https://miro.medium.com/v2/resize:fit:576/format:webp/1*fH2ykiH8KH-GLTgvxqIggg.png"/></div></figure><p id="da1e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们可以很容易地计算所有推文的平均极性，如下所示:</p><figure class="mu mv mw mx gt jr"><div class="bz fp l di"><div class="ni nj l"/></div></figure><figure class="mu mv mw mx gt jr gh gi paragraph-image"><div class="gh gi oy"><img src="../Images/392fb27eb1a7143248e6a818a65e8fd0.png" data-original-src="https://miro.medium.com/v2/resize:fit:272/format:webp/1*6VIP--YPXMjPJ-cY1hLz_A.png"/></div></figure><p id="f544" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如上图所示，<strong class="kf ir">表示极性为正</strong>，意味着第二季发布后公众的反应是正面的。然而，比简单地知道极性的平均值更有趣的是知道概率的分布，例如，通过使用直方图。</p><figure class="mu mv mw mx gt jr"><div class="bz fp l di"><div class="ni nj l"/></div></figure><figure class="mu mv mw mx gt jr gh gi paragraph-image"><div class="gh gi oz"><img src="../Images/305572dcaabce9fecb1ca55720e0add2.png" data-original-src="https://miro.medium.com/v2/resize:fit:906/format:webp/1*g-ig4h-BlyDFDn950_sE4g.png"/></div><p class="jy jz gj gh gi ka kb bd b be z dk translated">极性分布(作者创建的图像)</p></figure><p id="0056" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">极性的<strong class="kf ir">分布近似遵循以2为中心的正态分布</strong>。有些推文具有非常高的正极性(在这种情况下高于15)。相反，也有极负极性的推文，比如小于-10。</p><p id="cd6f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如下图，正极性高的推文确实传达了积极的反应。</p><figure class="mu mv mw mx gt jr"><div class="bz fp l di"><div class="ni nj l"/></div></figure><figure class="mu mv mw mx gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi pa"><img src="../Images/79104de8a752795020fb6ec764de4826.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*UBYUoKer-ryw19VLMqw6-A.png"/></div></div><p class="jy jz gj gh gi ka kb bd b be z dk translated">具有高正极性的推文(图片由作者创建)</p></figure><p id="d1a0" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">负极性高的推文有时传达负面反应；然而，其他时候，他们表达对男演员或女演员的钦佩或吸引，我会说这不是特别负面的反应😉。</p><figure class="mu mv mw mx gt jr"><div class="bz fp l di"><div class="ni nj l"/></div></figure><figure class="mu mv mw mx gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi pb"><img src="../Images/6cd60706fdaefe4aeb41e17f26067f6d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*uhAuNlbOG4gM4152UNH04Q.png"/></div></div><p class="jy jz gj gh gi ka kb bd b be z dk translated">负极性高的推文(图片由作者创建)</p></figure></div><div class="ab cl nk nl hu nm" role="separator"><span class="nn bw bk no np nq"/><span class="nn bw bk no np nq"/><span class="nn bw bk no np"/></div><div class="ij ik il im in"><h1 id="a52b" class="lc ld iq bd le lf nr lh li lj ns ll lm ln nt lp lq lr nu lt lu lv nv lx ly lz bi translated">未来的改进和需要克服的主要挑战</h1><h2 id="2b48" class="pc ld iq bd le pd pe dn li pf pg dp lm ko ph pi lq ks pj pk lu kw pl pm ly pn bi translated">数据清理</h2><p id="6ce2" class="pw-post-body-paragraph kd ke iq kf b kg ma ki kj kk mb km kn ko mc kq kr ks md ku kv kw me ky kz la ij bi translated">在这个项目中，<strong class="kf ir">数据清理</strong>仅限于<strong class="kf ir">移除URL、标签、提及和标点符号</strong>。此外，我们还在每个表情符号前后添加了一个空格。</p><p id="7593" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">Twitter数据通常包含大量噪音；因此，为了获得更准确的结果，应该执行进一步的清洁步骤。在Twitter上，<strong class="kf ir">将几个词连接在一起</strong>很常见，尤其是在标签中(例如#BeautifulDay)。在分析推文之前，这些术语应该被拆分成单独的单词。此外，<strong class="kf ir">拉长的单词</strong>(例如happyyyy)和<strong class="kf ir">拼写错误</strong>(例如Ukranie)在Twitter数据上也很常见。所有这些问题都可以通过<strong class="kf ir">使用正则表达式</strong>或者用专门的<strong class="kf ir">库检测拼写错误</strong>来解决，比如<strong class="kf ir">自动更正</strong>库。</p><h2 id="6f7d" class="pc ld iq bd le pd pe dn li pf pg dp lm ko ph pi lq ks pj pk lu kw pl pm ly pn bi translated">极性计算</h2><p id="f78d" class="pw-post-body-paragraph kd ke iq kf b kg ma ki kj kk mb km kn ko mc kq kr ks md ku kv kw me ky kz la ij bi translated">基于<strong class="kf ir">字典的方法</strong>是计算文本的<strong class="kf ir">极性的简单方法；然而，这种方法存在多重挑战。正如我们之前提到的，<strong class="kf ir">意见词可以高度依赖于上下文</strong>。因此，建议使用特定领域的字典来最大限度地提高准确性。</strong></p><p id="2530" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">另一个重大挑战是<strong class="kf ir">否定</strong>的使用。例如，短语<em class="lb">‘电影不好’</em>具有负面含义，即使形容词<em class="lb">好</em>包含正极性。像<em class="lb">否</em>、<em class="lb">非</em>、<em class="lb">从不</em>或<em class="lb">无</em>这样的否定词语，由于颠倒了文中观点词所表示的情感，所以被称为<strong class="kf ir">情感移位器</strong>。一个解决办法是在否定的情况下相应地改变极性。</p><p id="7083" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在本项目中，我们只考虑了对<strong class="kf ir">意见词</strong>的分析。重要的是要记住，观点也可以用观点短语来表达。观点短语是可以用来表达观点的习语或短语。例如,<em class="lb">看着油漆变干</em>是一个英语习语，意思是某事非常无聊。更详尽的分析还会考虑到<strong class="kf ir">观点短语</strong>来检测推文的极性。</p></div><div class="ab cl nk nl hu nm" role="separator"><span class="nn bw bk no np nq"/><span class="nn bw bk no np nq"/><span class="nn bw bk no np"/></div><div class="ij ik il im in"><h1 id="1e6b" class="lc ld iq bd le lf nr lh li lj ns ll lm ln nt lp lq lr nu lt lu lv nv lx ly lz bi translated">分析极性随时间的演变</h1><p id="9972" class="pw-post-body-paragraph kd ke iq kf b kg ma ki kj kk mb km kn ko mc kq kr ks md ku kv kw me ky kz la ij bi translated">分析极性时，<strong class="kf ir">时间成分</strong>起着基础作用。正如我前面提到的，标准API最多只能访问一周前的推文。要访问旧的推文，必须有高级API。如果我们有它，我们就可以访问《布里奇顿夫妇》第一季首播前(2020年12月25日)和第二季首播前(2022年3月25日)的推文，然后比较两种极性。</p><p id="d048" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我特别喜欢第二季。这可能是因为我是一个爱恨交加的故事的粉丝，或者是因为我太喜欢安东尼和凯特之间的化学反应了💜。然而，所有我谈论过这个系列的朋友都告诉我，他们更喜欢第一季。看看Twitter用户在第一季首播后或第二季首播后是否有更积极的反应，看看谁赢了这个赌注，我还是我的朋友，这将是一件有趣的事情。</p></div><div class="ab cl nk nl hu nm" role="separator"><span class="nn bw bk no np nq"/><span class="nn bw bk no np nq"/><span class="nn bw bk no np"/></div><div class="ij ik il im in"><h1 id="b9cc" class="lc ld iq bd le lf nr lh li lj ns ll lm ln nt lp lq lr nu lt lu lv nv lx ly lz bi translated">项目概述</h1><p id="1b31" class="pw-post-body-paragraph kd ke iq kf b kg ma ki kj kk mb km kn ko mc kq kr ks md ku kv kw me ky kz la ij bi translated">在这个项目中，我们使用一个关于观点词汇和表情符号的<strong class="kf ir">字典，分析了标签为#bridgerton的推文</strong>的<strong class="kf ir">极性。这些推文是使用<strong class="kf ir">标准Twitter API </strong>获得的，因此，只分析了不到一周的推文。极性分析显示，公众对该系列节目的情绪大多是积极的。如上所述，随着时间的推移进行极性分析来比较第一季和第二季的接受度将会很有趣。</strong></p><p id="217b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">#感谢阅读</p><p id="26a8" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">阿曼达·伊格莱西亚斯</p></div></div>    
</body>
</html>