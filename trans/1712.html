<html>
<head>
<title>Plotly with Streamlit, Dash or Flask</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Plotly带有Streamlit、Dash或Flask</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/plotly-with-streamlit-dash-or-flask-4d78fa025ea2#2022-04-22">https://towardsdatascience.com/plotly-with-streamlit-dash-or-flask-4d78fa025ea2#2022-04-22</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><h2 id="310a" class="ir is it bd b dl iu iv iw ix iy iz dk ja translated" aria-label="kicker paragraph">数据可视化</h2><div class=""/><div class=""><h2 id="4c1c" class="pw-subtitle-paragraph jz jc it bd b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq dk translated">哪种框架最适合您的数据科学应用</h2></div><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi kr"><img src="../Images/53b38b064618b4cbdb9a6c77a29b78ea.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*XcKexqL2GS69ygA48oQXeg.png"/></div></div><p class="ld le gj gh gi lf lg bd b be z dk translated">作者图片</p></figure><p id="31b0" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">如果我说你可以简单地通过交换你使用的框架来减少一半的应用程序，你会怎么说？</p><p id="bb5b" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">我通过在Dash、Flask和Streamlit中编写相同的简单应用程序进行了一个快速实验，结果很有启发性。</p><h2 id="352f" class="md me it bd mf mg mh dn mi mj mk dp ml lq mm mn mo lu mp mq mr ly ms mt mu iz bi translated">破折号</h2><p id="6853" class="pw-post-body-paragraph lh li it lj b lk mv kd lm ln mw kg lp lq mx ls lt lu my lw lx ly mz ma mb mc im bi translated">该应用程序复制自Dash文档，代码如下:</p><pre class="ks kt ku kv gt na nb nc nd aw ne bi"><span id="7355" class="md me it nb b gy nf ng l nh ni">import dash<br/>import dash_core_components as dcc<br/>import dash_html_components as html<br/>import plotly.express as px<br/>import pandas as pd</span><span id="feeb" class="md me it nb b gy nj ng l nh ni">app = dash.Dash(__name__)</span><span id="9b52" class="md me it nb b gy nj ng l nh ni">df = pd.DataFrame({<br/>   'Fruit': ['Apples', 'Oranges', 'Bananas', 'Apples', 'Oranges', 'Bananas'],<br/>   'Amount': [4, 1, 2, 2, 4, 5],<br/>   'City': ['SF', 'SF', 'SF', 'Montreal', 'Montreal', 'Montreal']<br/>})</span><span id="d4b8" class="md me it nb b gy nj ng l nh ni">fig = px.bar(df, x='Fruit', y='Amount', color='City',  <br/>   barmode='group')</span><span id="6130" class="md me it nb b gy nj ng l nh ni">app.layout = html.Div(children=[<br/>   html.H1(children='Hello Dash'),<br/>   html.Div(children='''<br/>   Dash: A web application framework for Python.<br/>   '''),<br/>   dcc.Graph(<br/>      id='example-graph',<br/>      figure=fig<br/>   )<br/>])</span><span id="590f" class="md me it nb b gy nj ng l nh ni">if __name__ == '__main__':<br/>   app.run_server(debug=True)</span></pre><p id="fb4e" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated"><em class="nk">代码转载由Plotly提供—版权所有2019 Plotly，</em> <a class="ae nl" href="https://github.com/plotly/dash-docs/blob/master/LICENSE" rel="noopener ugc nofollow" target="_blank"> <em class="nk">麻省理工学院许可</em> </a></p><p id="8b2a" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">这并不难做到:首先我们导入库，然后设置Flask应用程序，接下来我们定义dataframe，接下来是实际绘制图形的线条。<code class="fe nm nn no nb b">app.layout</code>部分本质上是Dash内部编写的HTML，最后一行运行应用程序。</p><p id="4098" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">它会生成一个如下所示的网页:</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi np"><img src="../Images/0872a0c4caf8889e3a716e3d80a2208f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*llW7nREeI4hwZF6WasFbGg.png"/></div></div><p class="ld le gj gh gi lf lg bd b be z dk translated">作者图片</p></figure><p id="e7e3" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">由于Dash基本上是一个使用Plotly的Flask app，所以我编写了一个用Flask和Plotly构造的等价app(参见我的文章<a class="ae nl" rel="noopener" target="_blank" href="/web-visualization-with-plotly-and-flask-3660abf9c946"><em class="nk">Web Visualization with Plotly和Flask </em> </a> <em class="nk"> ) </em>，并将其与Dash版本进行了比较。</p><p id="e012" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">我个人的观点是我的Flask/Plotly应用程序更容易编写，也更灵活(你的观点可能不同)。</p><h2 id="2b8e" class="md me it bd mf mg mh dn mi mj mk dp ml lq mm mn mo lu mp mq mr ly ms mt mu iz bi translated">一个简单的烧瓶+ Plotly应用程序</h2><p id="2c74" class="pw-post-body-paragraph lh li it lj b lk mv kd lm ln mw kg lp lq mx ls lt lu my lw lx ly mz ma mb mc im bi translated">这个应用程序有两部分:Flask应用程序本身和一个HTML模板。Flask应用程序的工作类似于Dash应用程序，但不构建实际的网页。网页是一个HTML模板，我们将Plotly数据从Flask应用程序传递给它，这样它就可以显示图表。</p><p id="b736" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">烧瓶部分具有与Dash相似的结构:</p><pre class="ks kt ku kv gt na nb nc nd aw ne bi"><span id="f78b" class="md me it nb b gy nf ng l nh ni">from flask import Flask, render_template<br/>import pandas as pd<br/>import json<br/>import plotly<br/>import plotly.express as px</span><span id="d261" class="md me it nb b gy nj ng l nh ni">app = Flask(__name__)</span><span id="2613" class="md me it nb b gy nj ng l nh ni"><strong class="nb jd">@</strong>app.route('/')<br/>def notdash():<br/>   df = pd.DataFrame({<br/>      'Fruit': ['Apples', 'Oranges', 'Bananas', 'Apples', 'Oranges', <br/>      'Bananas'],<br/>      'Amount': [4, 1, 2, 2, 4, 5],<br/>      'City': ['SF', 'SF', 'SF', 'Montreal', 'Montreal', 'Montreal']<br/>   })</span><span id="ff98" class="md me it nb b gy nj ng l nh ni">fig = px.bar(df, x='Fruit', y='Amount', color='City', <br/>      barmode='group')</span><span id="9aaa" class="md me it nb b gy nj ng l nh ni">graphJSON = json.dumps(fig, cls=plotly.utils.PlotlyJSONEncoder)</span><span id="ece5" class="md me it nb b gy nj ng l nh ni">return render_template('notdash.html', graphJSON=graphJSON)</span></pre><p id="d10c" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">模板是将要显示的网页。它相当于Dash应用程序的布局，但我们将它写在一个HTML文件中。</p><pre class="ks kt ku kv gt na nb nc nd aw ne bi"><span id="17b9" class="md me it nb b gy nf ng l nh ni">&lt;!doctype <em class="nk">html</em>&gt;<br/>&lt;html&gt;<br/> &lt;body&gt;<br/>  &lt;h1&gt;Hello Plotly (but not Dash)&lt;/h1&gt;<br/>  &lt;div <em class="nk">id</em>='chart' <em class="nk">class</em>='chart'”&gt;&lt;/div&gt;<br/>&lt;/body&gt;</span><span id="9e95" class="md me it nb b gy nj ng l nh ni">&lt;script <em class="nk">src</em>='https://cdn.plot.ly/plotly-latest.min.js'&gt;&lt;/script&gt;<br/>&lt;script <em class="nk">type</em>='text/javascript'&gt;<br/>  var graphs = {{graphJSON | safe}};<br/>  Plotly.plot('chart',graphs,{});<br/>&lt;/script&gt;</span><span id="bbeb" class="md me it nb b gy nj ng l nh ni">&lt;/html&gt;</span></pre><p id="f941" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">你可以在原<a class="ae nl" rel="noopener" target="_blank" href="/web-visualization-with-plotly-and-flask-3660abf9c946">文章</a>中找到app的描述。</p><p id="3a19" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">它看起来是这样的:</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi nq"><img src="../Images/2edf45daee2f421aeea7c1bf917f0ae3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*T798lQYA448J4zVLi45Zhg.png"/></div></div><p class="ld le gj gh gi lf lg bd b be z dk translated">作者图片</p></figure><p id="6f26" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">和原版非常相似。</p><h2 id="5d7a" class="md me it bd mf mg mh dn mi mj mk dp ml lq mm mn mo lu mp mq mr ly ms mt mu iz bi translated">流线型+plottly</h2><p id="6dda" class="pw-post-body-paragraph lh li it lj b lk mv kd lm ln mw kg lp lq mx ls lt lu my lw lx ly mz ma mb mc im bi translated">自从我写了那篇文章之后，我发现了Streamlit。Streamlit是一个非常易于使用的框架，允许您编写包含图表、数据框架和一些非常易于使用的UI元素(如选择框、按钮、文本字段等)的数据科学应用程序。</p><p id="2a58" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">而且是100% Python。</p><p id="c319" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">以下是用Streamlit编写的等效应用程序:</p><pre class="ks kt ku kv gt na nb nc nd aw ne bi"><span id="f95f" class="md me it nb b gy nf ng l nh ni">import pandas as pd<br/>import streamlit as st<br/>import plotly.express as px</span><span id="ade3" class="md me it nb b gy nj ng l nh ni">df = pd.DataFrame({<br/>    "Fruit": ["Apples", "Oranges", "Bananas", "Apples", "Oranges",   <br/>    "Bananas"],<br/>    "Amount": [4, 1, 2, 2, 4, 5],<br/>    "City": ["SF", "SF", "SF", "Montreal", "Montreal", "Montreal"]<br/>    })</span><span id="5519" class="md me it nb b gy nj ng l nh ni">fig = px.bar(df, x="Fruit", y="Amount", color="City",<br/>                 barmode="group")</span><span id="d09b" class="md me it nb b gy nj ng l nh ni">st.title('Hello Streamlit')<br/>st.write('''<br/>    Streamlit: A web application framework for Python.<br/>''')<br/>st.plotly_chart(fig)</span></pre><p id="3716" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">你应该注意到的是绝对的简单。除了最后三行之外，代码与其他应用程序非常相似——它必须是用于声明熊猫数据帧和绘制Plotly图形的Python代码。</p><p id="c774" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">但是应用程序的其余部分，渲染网页的部分只有三行代码！</p><p id="82d5" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">它看起来确实与其他应用程序略有不同，这是因为Streamlit在默认情况下会给你的应用程序添加一个视图。</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi nr"><img src="../Images/7b1c1c73c1457ded5be5bbef30ddc900.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*L26fe6duDesgOlJy1G6aNw.png"/></div></div><p class="ld le gj gh gi lf lg bd b be z dk translated">作者图片</p></figure><p id="b858" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">不得不说，Streamlit在网页设计方面更具限制性，因为它不允许你像Dash或Flask应用程序那样拥有HTML的全部功能。但是有一些用Streamlit制作的非常好看的应用程序，这个非常简单的应用程序的代码是其他版本的一半大小。这可能不是所有情况下的解决方案，但肯定值得考虑。</p></div><div class="ab cl ns nt hx nu" role="separator"><span class="nv bw bk nw nx ny"/><span class="nv bw bk nw nx ny"/><span class="nv bw bk nw nx"/></div><div class="im in io ip iq"><p id="25a9" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">一如既往，感谢阅读。这是对Streamlit在创建数据科学应用程序方面的优势的简单介绍，您可以在我的<a class="ae nl" href="https://github.com/alanjones2/Alan-Jones-article-code/tree/master/streamlitdashflask" rel="noopener ugc nofollow" target="_blank"> Github repo </a>中找到代码。</p><p id="33c6" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">您可以在<a class="ae nl" href="https://alanjones2.github.io/" rel="noopener ugc nofollow" target="_blank">我的网站</a>上找到关于Streamlit和其他主题的其他文章:</p><div class="nz oa gp gr ob oc"><a href="https://alanjones2.github.io/" rel="noopener  ugc nofollow" target="_blank"><div class="od ab fo"><div class="oe ab of cl cj og"><h2 class="bd jd gy z fp oh fr fs oi fu fw jc bi translated">AlanJones:编码、科学和技术</h2><div class="oj l"><h3 class="bd b gy z fp oh fr fs oi fu fw dk translated">使用Streamlit、Plotly、Python和Flask为web构建数据可视化应用程序。适用于…的文章、教程和应用程序</h3></div><div class="ok l"><p class="bd b dl z fp oh fr fs oi fu fw dk translated">alanjones2.github.io</p></div></div><div class="ol l"><div class="om l on oo op ol oq lb oc"/></div></div></a></div></div></div>    
</body>
</html>