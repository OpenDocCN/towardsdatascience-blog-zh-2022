<html>
<head>
<title>Deploying Machine Learning Models with Heroku</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Heroku部署机器学习模型</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/deploying-machine-learning-models-with-heroku-4dec1df87f71#2022-09-10">https://towardsdatascience.com/deploying-machine-learning-models-with-heroku-4dec1df87f71#2022-09-10</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="acc1" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">不要只是培训，还要部署:一步一步的指南</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/5479a863696dadeac3627db6b230f476.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*rdLXHfDU5dRruVkY"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">罗曼·辛克维奇在<a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure><p id="774b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">最近，在机器学习领域运营的组织对大规模构建和部署数据驱动的智能系统非常感兴趣。这不仅导致了高效和精确系统的快速发展，还通过使用智能嵌入式产品对改善整体终端用户体验做出了深远的贡献。</p><p id="3867" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">由于与智能嵌入式软件相关的各种好处，在部署阶段管理机器学习模型已经成为当今机器学习工程师的一项基本技能。有时，这甚至需要单独的团队在部署中发布和管理产品。</p><p id="31a3" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">因此，这篇文章将提供一个详细的概述，介绍如何将你训练好的模型应用到部署中。具体来说，我将演示如何使用<strong class="ky ir"> Flask </strong>创建一个web应用程序，然后使用<strong class="ky ir"> Heroku </strong>将机器学习模型部署到云中。</p><p id="d2a1" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">文章的亮点如下:</p><p id="1ef2" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><a class="ae kv" href="#ebc3" rel="noopener ugc nofollow"> <strong class="ky ir">什么是部署？</strong></a><strong class="ky ir"><br/></strong><a class="ae kv" href="#4450" rel="noopener ugc nofollow"><strong class="ky ir">步骤1:开发机器学习模型</strong></a><strong class="ky ir"><br/></strong><a class="ae kv" href="#63f2" rel="noopener ugc nofollow"><strong class="ky ir">步骤2:使用Flask创建Web应用程序</strong></a><strong class="ky ir"><br/></strong><a class="ae kv" href="#c254" rel="noopener ugc nofollow"><strong class="ky ir">步骤3:将应用程序部署到Heroku服务器</strong><strong class="ky ir"><br/></strong></a><a class="ae kv" href="#4522" rel="noopener ugc nofollow"><strong class="ky ir">结论</strong> </a></p><p id="9e5b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们开始吧！</p></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><h1 id="ebc3" class="lz ma iq bd mb mc md me mf mg mh mi mj jw mk jx ml jz mm ka mn kc mo kd mp mq bi translated">什么是部署？</h1><p id="5bcd" class="pw-post-body-paragraph kw kx iq ky b kz mr jr lb lc ms ju le lf mt lh li lj mu ll lm ln mv lp lq lr ij bi translated">首先，部署是将经过训练的机器学习模型集成到生产环境中的过程，通常是为了服务于最终用户。</p><p id="a1f1" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">部署通常是机器学习产品开发生命周期的最后一个阶段。下图简要概述了开发生命周期:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi mw"><img src="../Images/3dd56439289cf20a14b5c8ea08d67273.png" data-original-src="https://miro.medium.com/v2/resize:fit:964/format:webp/1*nBGzpvbeqR5fmcbTuE0Cyw.png"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">机器学习产品的开发生命周期(图片由作者提供)</p></figure><p id="ab31" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">上面的“模型部署”阶段由一系列步骤组成，如下图所示:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi mx"><img src="../Images/59ff4cf2c3ef2b96566486e6c3d67383.png" data-original-src="https://miro.medium.com/v2/resize:fit:908/format:webp/1*yTH9OfP1RyeaPYPqluPL_A.png"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">模型部署阶段(图片由作者提供)</p></figure><p id="1954" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">部署机器学习模型的三个主要步骤如下:</p><ul class=""><li id="bd62" class="my mz iq ky b kz la lc ld lf na lj nb ln nc lr nd ne nf ng bi translated">首先，我们开发机器学习模型。这包括收集相关数据并对其进行分析、生成特征、选择模型、执行超参数调整，以及最后评估模型。</li><li id="97b4" class="my mz iq ky b kz nh lc ni lf nj lj nk ln nl lr nd ne nf ng bi translated">一旦我们对预测和准确性指标有了信心，我们就将模型集成到web应用程序中，如Flask、Django等。这包括创建应用程序的前端(或用户界面)供用户交互并提供输入，然后将其与后端融合，将获得的数据馈送给机器学习模型以进行预测。</li><li id="1d0f" class="my mz iq ky b kz nh lc ni lf nj lj nk ln nl lr nd ne nf ng bi translated">最后，我们使用Heroku、Google Cloud等托管服务将应用程序部署到服务器上。</li></ul><p id="159e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">出于本教程的目的，我将使用<strong class="ky ir"> Flask </strong>来构建web应用程序。接下来，我将把应用程序部署在一台<strong class="ky ir"> Heroku </strong>服务器上。</p><h1 id="4450" class="lz ma iq bd mb mc nm me mf mg nn mi mj jw no jx ml jz np ka mn kc nq kd mp mq bi translated">步骤1:开发机器学习模型</h1><p id="e33b" class="pw-post-body-paragraph kw kx iq ky b kz mr jr lb lc ms ju le lf mt lh li lj mu ll lm ln mv lp lq lr ij bi translated">在本节中，让我们训练我们打算部署的机器学习模型。为了简单起见，也为了不偏离本文的主要目标，我将部署一个线性回归模型。</p><h2 id="59cd" class="nr ma iq bd mb ns nt dn mf nu nv dp mj lf nw nx ml lj ny nz mn ln oa ob mp oc bi translated">#1生成虚拟数据点</h2><p id="3132" class="pw-post-body-paragraph kw kx iq ky b kz mr jr lb lc ms ju le lf mt lh li lj mu ll lm ln mv lp lq lr ij bi translated">我将对下面散点图中描述的一组虚拟数据点训练一个线性回归模型:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi od"><img src="../Images/a98d8e992b0162ea83a63ff1cf840f36.png" data-original-src="https://miro.medium.com/v2/resize:fit:1240/format:webp/1*r5aUjcZ-jHhjC6Q39PgEag.png"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">虚拟数据点的散点图(图片由作者提供)</p></figure><p id="5796" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">从自变量到<code class="fe oe of og oh b">x</code>到因变量<code class="fe oe of og oh b">y</code>的映射实现如下:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="oi oj l"/></div></figure><h2 id="311e" class="nr ma iq bd mb ns nt dn mf nu nv dp mj lf nw nx ml lj ny nz mn ln oa ob mp oc bi translated">#2培训模型</h2><p id="7e83" class="pw-post-body-paragraph kw kx iq ky b kz mr jr lb lc ms ju le lf mt lh li lj mu ll lm ln mv lp lq lr ij bi translated">接下来，我将使用<a class="ae kv" href="https://scikit-learn.org/stable/index.html" rel="noopener ugc nofollow" target="_blank"> scikit-learn </a>来训练一个线性回归模型。下面演示了这一点:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ok oj l"/></div></figure><p id="e84c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">模型学习的回归线如下所示:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi ol"><img src="../Images/a1487e1f4a22d3932983521d46301ecc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1214/format:webp/1*4V3e5Cth228_0b62vqOjow.png"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">带有回归线的虚拟数据点散点图(图片由作者提供)</p></figure><h2 id="813a" class="nr ma iq bd mb ns nt dn mf nu nv dp mj lf nw nx ml lj ny nz mn ln oa ob mp oc bi translated">#3将模型保存到Pickle文件</h2><p id="3251" class="pw-post-body-paragraph kw kx iq ky b kz mr jr lb lc ms ju le lf mt lh li lj mu ll lm ln mv lp lq lr ij bi translated">要在Heroku服务器上部署训练好的模型，您应该将它保存为pickle文件，如下面的代码块所示:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="om oj l"/></div></figure><h1 id="63f2" class="lz ma iq bd mb mc nm me mf mg nn mi mj jw no jx ml jz np ka mn kc nq kd mp mq bi translated">步骤2:使用Flask创建Web应用程序</h1><p id="4e11" class="pw-post-body-paragraph kw kx iq ky b kz mr jr lb lc ms ju le lf mt lh li lj mu ll lm ln mv lp lq lr ij bi translated">Flask是一个流行的web框架，用于在python中构建轻量级web应用程序。如上所述，在这个项目中使用Flask的目的是构建一个最终用户可以与之交互的web应用程序。</p><p id="5301" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在本节中，我将使用在步骤1中创建的模型pickle文件，并将其集成到web应用程序中。web应用程序的前端将允许用户向模型提供输入。这将被获取并传递给在后端运行的模型以进行预测。最后，我们将检索模型的预测，并将其显示给用户。</p><h2 id="5f1d" class="nr ma iq bd mb ns nt dn mf nu nv dp mj lf nw nx ml lj ny nz mn ln oa ob mp oc bi translated">#1项目要求</h2><p id="682a" class="pw-post-body-paragraph kw kx iq ky b kz mr jr lb lc ms ju le lf mt lh li lj mu ll lm ln mv lp lq lr ij bi translated">要在Flask中构建web应用程序，应该在python中安装<a class="ae kv" href="https://pypi.org/project/Flask/" rel="noopener ugc nofollow" target="_blank"> Flask </a>库。打开命令行，键入以下命令来安装Flask:</p><pre class="kg kh ki kj gt on oh oo op aw oq bi"><span id="fcbf" class="nr ma iq oh b gy or os l ot ou">pip install Flask</span></pre><h2 id="1b95" class="nr ma iq bd mb ns nt dn mf nu nv dp mj lf nw nx ml lj ny nz mn ln oa ob mp oc bi translated">#2 Web应用程序工作流程</h2><p id="74fa" class="pw-post-body-paragraph kw kx iq ky b kz mr jr lb lc ms ju le lf mt lh li lj mu ll lm ln mv lp lq lr ij bi translated">暂时忽略技术实现，web应用程序的分步预期工作流应该如下(通俗地说):</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ov"><img src="../Images/53aa55a72e88a67587e4749f28e6bd52.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gEBSr5YqGQRbbcwUTLO6bQ.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">web应用程序工作流(图片由作者提供)</p></figure><ul class=""><li id="4f80" class="my mz iq ky b kz la lc ld lf na lj nb ln nc lr nd ne nf ng bi translated">首先，我们显示一个带有表单的HTML页面，供用户输入。此外，用户应该单击“预测”按钮来了解相应的输出。</li><li id="3eb3" class="my mz iq ky b kz nh lc ni lf nj lj nk ln nl lr nd ne nf ng bi translated">一旦用户点击“预测”，web应用程序应该获取输入值，并将其带到后端进行进一步处理。</li><li id="fef7" class="my mz iq ky b kz nh lc ni lf nj lj nk ln nl lr nd ne nf ng bi translated">下一步是根据获取的值计算输入特征，并将它们作为输入提供给训练好的模型以生成输出。</li><li id="d4d3" class="my mz iq ky b kz nh lc ni lf nj lj nk ln nl lr nd ne nf ng bi translated">最后，应用程序应该将预测值传送到HTML页面并显示给用户。</li></ul><h2 id="bd09" class="nr ma iq bd mb ns nt dn mf nu nv dp mj lf nw nx ml lj ny nz mn ln oa ob mp oc bi translated">#3实施</h2><p id="d531" class="pw-post-body-paragraph kw kx iq ky b kz mr jr lb lc ms ju le lf mt lh li lj mu ll lm ln mv lp lq lr ij bi translated">要在Flask中构建这个web应用程序，我们需要编写两个文件并将它们集成在一起。这些是:</p><ol class=""><li id="726d" class="my mz iq ky b kz la lc ld lf na lj nb ln nc lr ow ne nf ng bi translated"><code class="fe oe of og oh b">app.py</code>:这个文件包含了与网页交互的Flask APIs。它负责获取输入值，在加载模型后计算预测，并将其返回到HTML文件。</li><li id="5f77" class="my mz iq ky b kz nh lc ni lf nj lj nk ln nl lr ow ne nf ng bi translated"><code class="fe oe of og oh b">new.html</code>:顾名思义，这个文件包含了我们的web应用程序的前端，用户将会看到它。</li></ol><p id="ecde" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">应用程序的当前目录结构是:</p><pre class="kg kh ki kj gt on oh oo op aw oq bi"><span id="979d" class="nr ma iq oh b gy or os l ot ou">Linear_Regression_Model<br/>├── templates<br/>│   ├── new.html<br/>├── app.py<br/>└──<!-- --> model.pickle</span></pre><p id="2884" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这两个文件的实现如下所示:</p><div class="kg kh ki kj gt ab cb"><figure class="ox kk oy oz pa pb pc paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><img src="../Images/e126daedd7cc4bc2437379f9a11b4bc7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/format:webp/1*GIQ1JuhbRT9vDN0ssH5EGw.png"/></div></figure><figure class="ox kk oy oz pa pb pc paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><img src="../Images/fed6164dc9d32e32df2d0da19d1b8c20.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/format:webp/1*1z6QJJeSm8CvdgjLy2OqVg.png"/></div><p class="kr ks gj gh gi kt ku bd b be z dk pd di pe pf translated">web应用程序的实现(图片由作者提供)</p></figure></div><ul class=""><li id="cc37" class="my mz iq ky b kz la lc ld lf na lj nb ln nc lr nd ne nf ng bi translated"><code class="fe oe of og oh b">app.py</code>文件定义了两种方法，<code class="fe oe of og oh b">new()</code>和<code class="fe oe of og oh b">predict()</code>。<code class="fe oe of og oh b">new()</code>方法对应app的<code class="fe oe of og oh b">“/”</code> URL，返回<code class="fe oe of og oh b">new.html</code>网页。</li><li id="4b78" class="my mz iq ky b kz nh lc ni lf nj lj nk ln nl lr nd ne nf ng bi translated"><code class="fe oe of og oh b">predict()</code>方法用于计算模型的预测值。当用户点击网页上的“<strong class="ky ir">预测</strong>按钮时，一个POST请求被发送到<code class="fe oe of og oh b">predict()</code>方法。</li><li id="aaeb" class="my mz iq ky b kz nh lc ni lf nj lj nk ln nl lr nd ne nf ng bi translated">一旦模型给出了它的预测，我们再次呈现<code class="fe oe of og oh b">new.html</code>页面并发送一个<code class="fe oe of og oh b">prediction_statement</code>显示给用户。</li></ul><h2 id="f0cb" class="nr ma iq bd mb ns nt dn mf nu nv dp mj lf nw nx ml lj ny nz mn ln oa ob mp oc bi translated">#4应用程序演练</h2><p id="fd50" class="pw-post-body-paragraph kw kx iq ky b kz mr jr lb lc ms ju le lf mt lh li lj mu ll lm ln mv lp lq lr ij bi translated">要执行应用程序，运行项目目录中的<code class="fe oe of og oh b">python app.py</code>。一旦服务器开始运行，在任何本地浏览器中前往<code class="fe oe of og oh b"><a class="ae kv" href="http://127.0.0.1:5000/" rel="noopener ugc nofollow" target="_blank">http://127.0.0.1:5000/</a></code>打开应用程序。</p><p id="9246" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">此应用程序的演练如下所示:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi pg"><img src="../Images/aa70f80df102e69fa0c990b30df41a42.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*KourIQ1QfmB7f58KlBZd8w.gif"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">Flask web应用程序的演练(Gif由作者提供)</p></figure><p id="73ef" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如上面的gif所示，用户得到一个输入值的表单。这被带到后端进行处理。一旦模型做出预测，预测值就会显示给用户。</p><h1 id="c254" class="lz ma iq bd mb mc nm me mf mg nn mi mj jw no jx ml jz np ka mn kc nq kd mp mq bi translated">步骤3:将应用程序部署到Heroku服务器上</h1><p id="d576" class="pw-post-body-paragraph kw kx iq ky b kz mr jr lb lc ms ju le lf mt lh li lj mu ll lm ln mv lp lq lr ij bi translated">现在我们已经训练了机器学习模型，并将其集成到web应用程序中，我们的最后一步是将应用程序部署到Heroku服务器上，这是一个免费的云即服务平台，可以部署任何web应用程序。</p><p id="750d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">支持的编程语言有Java、PHP、Python、Go等。此外，大多数数据科学家使用Heroku来获得在云上部署模型的实践经验。但是，在部署应用程序之前，您应该在<a class="ae kv" href="https://signup.heroku.com/" rel="noopener ugc nofollow" target="_blank"> Heroku </a>上创建一个帐户。</p><p id="824c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">为了将代码推送到Heroku服务器并进行部署，Heroku提供了三种不同的方式:Heroku git、GitHub和容器注册表。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi ph"><img src="../Images/6f1ba186e8b04d81a111e98e9ae91ea9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1076/format:webp/1*Rk8HDJdiLAbbA8BwUH_ZXw.png"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">将代码部署到Heroku服务器的选项(图片由作者提供)</p></figure><p id="2cd5" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在本文中，我将使用Heroku Git来部署这个模型。</p><p id="b182" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在，让我们从部署流程开始。</p><h2 id="b7ec" class="nr ma iq bd mb ns nt dn mf nu nv dp mj lf nw nx ml lj ny nz mn ln oa ob mp oc bi translated">#1安装要求</h2><p id="81be" class="pw-post-body-paragraph kw kx iq ky b kz mr jr lb lc ms ju le lf mt lh li lj mu ll lm ln mv lp lq lr ij bi translated">就包需求而言，您应该用python安装<code class="fe oe of og oh b"><a class="ae kv" href="https://pypi.org/project/gunicorn/" rel="noopener ugc nofollow" target="_blank">gunicorn</a></code>包，如下所示:</p><pre class="kg kh ki kj gt on oh oo op aw oq bi"><span id="f0dd" class="nr ma iq oh b gy or os l ot ou">pip install gunicorn</span></pre><p id="a58c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">接下来，您应该安装Heroku命令行界面(Heroku-CLI)。根据您的操作系统，您可以在这里找到说明<a class="ae kv" href="https://devcenter.heroku.com/articles/heroku-cli" rel="noopener ugc nofollow" target="_blank"/>。</p><h2 id="0984" class="nr ma iq bd mb ns nt dn mf nu nv dp mj lf nw nx ml lj ny nz mn ln oa ob mp oc bi translated">#2将requirements.txt和Procfile添加到目录中</h2><p id="97c6" class="pw-post-body-paragraph kw kx iq ky b kz mr jr lb lc ms ju le lf mt lh li lj mu ll lm ln mv lp lq lr ij bi translated">在将代码推向部署之前，您应该在<code class="fe oe of og oh b">requirements.txt</code>文件中指定项目的需求。该项目的文件如下所示:</p><pre class="kg kh ki kj gt on oh oo op aw oq bi"><span id="997f" class="nr ma iq oh b gy or os l ot ou">Flask==2.1.0<br/>Werkzeug==2.0.3<br/>numpy==1.21.5<br/>gunicorn==20.1.0<br/>jinja2<br/>Werkzeug<br/>itsdangerous</span></pre><p id="4cae" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">接下来，创建一个新文件，命名为<code class="fe oe of og oh b">Procfile</code>，并添加以下命令:</p><pre class="kg kh ki kj gt on oh oo op aw oq bi"><span id="bb6f" class="nr ma iq oh b gy or os l ot ou">web: gunicorn app:new</span></pre><p id="c9f6" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">本质上，该文件让生产环境知道app文件中的哪个函数是主方法。此外，它还提供了应用程序在启动时将运行的命令。<code class="fe oe of og oh b">app:new</code>部分表示主文件是<code class="fe oe of og oh b">app.py</code>，其中<code class="fe oe of og oh b">new()</code>方法是主要函数。</p><p id="7a4d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">完成此步骤后，您的目录结构应该如下所示:</p><pre class="kg kh ki kj gt on oh oo op aw oq bi"><span id="4bb7" class="nr ma iq oh b gy or os l ot ou">Linear_Regression_Model<br/>├── templates<br/>│   ├── new.html<br/>├── app.py<br/>├──<!-- --> model.pickle<br/>├── requirements.txt<br/>└── Procfile</span></pre><h2 id="2804" class="nr ma iq bd mb ns nt dn mf nu nv dp mj lf nw nx ml lj ny nz mn ln oa ob mp oc bi translated">#3在Heroku服务器上创建应用程序</h2><p id="528a" class="pw-post-body-paragraph kw kx iq ky b kz mr jr lb lc ms ju le lf mt lh li lj mu ll lm ln mv lp lq lr ij bi translated">导航至您的账户<a class="ae kv" href="https://dashboard.heroku.com/apps" rel="noopener ugc nofollow" target="_blank">仪表盘</a>并选择<code class="fe oe of og oh b">Create new app</code>。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi ph"><img src="../Images/b5f5a49133402245c3487866fc9c4d82.png" data-original-src="https://miro.medium.com/v2/resize:fit:1076/format:webp/1*Pow2d1kV0Olv_DV3WVW2zA.png"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">在Heroku帐户仪表板上创建新应用程序的选项(图片由作者提供)</p></figure><p id="91de" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">接下来，为您的应用程序键入一个名称，并选择<code class="fe oe of og oh b">Create app</code>。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi pi"><img src="../Images/f1012a6fcba4e35d3d7c14a65fddb0e4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1300/format:webp/1*g7jcjDqYunBGgLeEsasugA.png"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">在Heroku上输入要托管的应用程序名称的字段(图片由作者提供)</p></figure><p id="4016" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">一旦创建了应用程序，就可以开始部署过程，这将在下一步中演示。</p><h2 id="56d5" class="nr ma iq bd mb ns nt dn mf nu nv dp mj lf nw nx ml lj ny nz mn ln oa ob mp oc bi translated">#4将应用程序部署到Heroku服务器</h2><p id="9fe1" class="pw-post-body-paragraph kw kx iq ky b kz mr jr lb lc ms ju le lf mt lh li lj mu ll lm ln mv lp lq lr ij bi translated">首先，选择<code class="fe oe of og oh b">Heroku Git</code>作为“部署方式”。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi ph"><img src="../Images/6f1ba186e8b04d81a111e98e9ae91ea9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1076/format:webp/1*Rk8HDJdiLAbbA8BwUH_ZXw.png"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">将代码部署到Heroku服务器的选项(图片由作者提供)</p></figure><p id="9ad5" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">打开本地计算机上的终端并登录Heroku。确保您已经安装了Heroku-CLI。</p><pre class="kg kh ki kj gt on oh oo op aw oq bi"><span id="608b" class="nr ma iq oh b gy or os l ot ou">$ heroku login</span></pre><p id="0911" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">接下来，导航到您的项目并初始化一个git存储库，如下所示:</p><pre class="kg kh ki kj gt on oh oo op aw oq bi"><span id="2bb8" class="nr ma iq oh b gy or os l ot ou">$ cd my-project/<br/>$ git init<br/>$ heroku git:remote -a linearregressiontest</span></pre><p id="1820" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在，将您的代码提交到存储库，并使用Git将其部署到Heroku。</p><pre class="kg kh ki kj gt on oh oo op aw oq bi"><span id="4a04" class="nr ma iq oh b gy or os l ot ou">$ git add .<br/>$ git commit -am "deployment step 1"<br/>$ git push heroku master</span></pre><p id="6023" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果部署成功，您应该会在命令行中看到以下日志:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi pj"><img src="../Images/fab77ee71a399cb9d7851a4af981fd57.png" data-original-src="https://miro.medium.com/v2/resize:fit:1172/format:webp/1*JTW2uaOoPaQJhIAEd5S8uA.png"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">描述成功部署的图片(图片由作者提供)。</p></figure><p id="9edf" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这样，你的机器学习模型就部署成功了！可以通过以下地址访问该应用程序:</p><pre class="kg kh ki kj gt on oh oo op aw oq bi"><span id="ea68" class="nr ma iq oh b gy or os l ot ou">https://your-app-name.herokuapp.com/</span></pre></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><h1 id="4522" class="lz ma iq bd mb mc md me mf mg mh mi mj jw mk jx ml jz mm ka mn kc mo kd mp mq bi translated">结论</h1><p id="ae9c" class="pw-post-body-paragraph kw kx iq ky b kz mr jr lb lc ms ju le lf mt lh li lj mu ll lm ln mv lp lq lr ij bi translated">总之，在这篇文章中，我详细介绍了如何从头开始部署机器学习模型。</p><p id="60bc" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">具体来说，我首先演示了简单线性回归模型的训练，然后将它集成到使用Flask开发的web应用程序中。</p><p id="30a9" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">最后，我展示了使用Heroku Git将web应用程序部署到Heroku服务器的分步过程。</p><p id="2c5e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">你可以在这里找到这篇文章的代码。</p><p id="a813" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir">感谢阅读！</strong></p></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><p id="3768" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><a class="ae kv" href="https://subscribepage.io/450q" rel="noopener ugc nofollow" target="_blank"> 🧑‍💻<strong class="ky ir">成为数据科学专家！获取包含450多个熊猫、NumPy和SQL问题的免费数据科学掌握工具包。</strong> </a></p><p id="1631" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">✉️ <a class="ae kv" href="https://medium.com/subscribe/@avi_chawla" rel="noopener"> <strong class="ky ir">注册我的电子邮件列表</strong> </a>永远不要错过关于数据科学指南、技巧和提示、机器学习、SQL、Python等的另一篇文章。Medium会将我的下一篇文章直接发送到你的收件箱。</p></div></div>    
</body>
</html>