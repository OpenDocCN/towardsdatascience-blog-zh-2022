<html>
<head>
<title>A complete guide to Queues in Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Python中队列的完整指南</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/a-complete-guide-to-queues-in-python-cd2baf310ad4#2022-05-09">https://towardsdatascience.com/a-complete-guide-to-queues-in-python-cd2baf310ad4#2022-05-09</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="764c" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">什么是队列以及如何用Python实现队列</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/949be9ddb0b18ab29154ce92d2ec6b47.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*IbLPk5XA8FeYRetk"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">Melanie Pongratz 在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</p></figure><p id="74fb" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在编程术语中，队列是一种抽象数据类型，它存储项目被添加到结构中的顺序，但它只允许添加到队列的末尾，同时只允许从队列的前面移除。这样做时，它遵循先进先出(FIFO)数据结构。本质上，这就像你所期望的队列在现实中的行为一样，例如当排队进入商店时，那些先到的人会先到。然而与现实生活不同的是，我们以一种确保没有插队的方式来构建它！</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="lv lw l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">Giphy的GIF</p></figure><p id="18bc" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">当我们希望将输出存储在一个结构中并保持其顺序，然后按照给定的顺序执行操作时，可以使用这些方法。编程中常见的例子包括为计算机的CPU调度作业、将打印机的作业排队以确保首先发送的作业被执行、为企业处理订单或处理消息。</p><p id="06e9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">记住这一点，知道我们希望数据结构做什么以及我们希望如何与它交互，我们就可以开始考虑如何在Python的实际数据结构中实现这一点。通常与此相关的主要方法包括:</p><ul class=""><li id="955c" class="lx ly it lb b lc ld lf lg li lz lm ma lq mb lu mc md me mf bi translated">enqueue(item):将项目添加到队列的末尾</li><li id="3d66" class="lx ly it lb b lc mg lf mh li mi lm mj lq mk lu mc md me mf bi translated">dequeue():移除并返回队列前面的项目</li><li id="b4a0" class="lx ly it lb b lc mg lf mh li mi lm mj lq mk lu mc md me mf bi translated">peek():返回队列前面的项目，而不删除它</li><li id="3fae" class="lx ly it lb b lc mg lf mh li mi lm mj lq mk lu mc md me mf bi translated">is_empty():如果队列为空，则返回True</li><li id="3eba" class="lx ly it lb b lc mg lf mh li mi lm mj lq mk lu mc md me mf bi translated">size():返回队列中有多少项</li></ul><p id="b738" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这意味着我们需要使用Python数据类型来构建它，这种数据类型是可变的，可以用来存储有序的项目集合。我们可以问自己的第一件事是，Python中是否已经实现了一种数据类型可以为我们做到这一点？</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ml lw l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">Giphy的GIF</p></figure><p id="503c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">一份名单！我们可以用一个列表！</strong></p><p id="c7e4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们知道列表是可变的，它可以被改变，我们可以简单地从开始和结束添加和删除项目，使用列表的内置功能来实现队列。</p><p id="7c67" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在使用列表时，我们必须定义一个使用列表的类，但它只具有允许用户以我们想要的方式与之交互的特定功能。为此，我们可以使用Python的<strong class="lb iu">类</strong>结构来定义数据结构将包含的信息以及我们想要使用的方法。</p><p id="6f7e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">接下来要做的第一件事是将<strong class="lb iu">类</strong>命名为<code class="fe mm mn mo mp b">Queue</code>，并为这个新类创建构造函数。我们想要的是，一旦创建了对象的新实例，就初始化一个空列表，可以使用<code class="fe mm mn mo mp b">.items</code>属性访问该列表。这方面的代码如下:</p><pre class="kj kk kl km gt mq mp mr ms aw mt bi"><span id="d2cf" class="mu mv it mp b gy mw mx l my mz">class Queue:</span><span id="3cf1" class="mu mv it mp b gy na mx l my mz">    #create the constructor<br/>    def __init__(self):</span><span id="5810" class="mu mv it mp b gy na mx l my mz">        #create an empty list as the items attribute<br/>        self.items = []</span></pre><p id="9e1e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这意味着当我们创建一个<code class="fe mm mn mo mp b">Queue</code>类的实例时，<code class="fe mm mn mo mp b">item</code>属性将代表一个空列表。</p><p id="89f4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然后我们可以开始向<code class="fe mm mn mo mp b">Queue</code>类添加主要功能。我们希望能够做的第一件事是向我们的<code class="fe mm mn mo mp b">Queue</code>添加一个项目。在这一点上，重要的是能够识别哪一端是我们从中获取数据的队列的前端，哪一端是我们可以向其中添加项目的队列的末端。</p><p id="398a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这暗示了每个过程将花费多长时间，因为在列表的开始处改变事物导致O(n)的时间复杂度，因为我们随后必须改变列表中后续项目的所有索引以将所有内容向右移动。然而，如果我们操作列表末尾的内容，那么时间复杂度为O(1 ),因为我们只在删除或添加项目时改变列表末尾的索引。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nb lw l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">Giphy的GIF</p></figure><p id="d1b3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然而，这并没有太大的关系，因为无论你选择从另一个函数中添加或删除哪一方，都仍然具有另一个时间复杂度。因此，记住这一点，我们可以实现<code class="fe mm mn mo mp b">enqueue(item)</code>方法来将一个项目添加到我们的队列中。</p><pre class="kj kk kl km gt mq mp mr ms aw mt bi"><span id="eecc" class="mu mv it mp b gy mw mx l my mz">    def enqueue(self, item):<br/>        """<br/>        Add item to the left of the list, returns Nothing</span><span id="c222" class="mu mv it mp b gy na mx l my mz">        Runs in linear time O(n) as we change all indices<br/>        as we add to the left of the list<br/>        """</span><span id="3bcb" class="mu mv it mp b gy na mx l my mz">        #use the insert method to insert at index 0<br/>        self.items.insert(0, item)</span></pre><p id="7db9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这只会将一个项目添加到我们队列的末尾(左侧)。在这种情况下，我们并不太关心我们在队列中添加了什么，只是我们可以添加它。当然，您可以向其中添加更多的功能，但是现在这样就可以了。</p><p id="737b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这意味着当我们想从队列类的列表右端移除项目时。在这样做的时候，我们需要注意一个相当简单的边缘情况，即我们的队列是否为空。在这种情况下，如果队列为空，我们可以简单地返回<code class="fe mm mn mo mp b">None</code>,这样我们仍然会返回一些东西，程序不会抛出错误，但是如果队列不为空，我们可以返回队列中的“第一个”项并返回它。因为我们使用Python的内置list类，所以我们可以简单地使用<code class="fe mm mn mo mp b">.pop()</code>方法，在Python 3.6+中，该方法从列表中移除ist项并返回它。这在常数时间O(1)内运行，因为我们只移除列表项，不影响任何其他索引。因此，这可以实现为:</p><pre class="kj kk kl km gt mq mp mr ms aw mt bi"><span id="56bd" class="mu mv it mp b gy mw mx l my mz">    def dequeue(self):<br/>        """<br/>        Removes the first item from the queue and removes it</span><span id="7c6b" class="mu mv it mp b gy na mx l my mz">        Runs in constant time O(1) because we are index to<br/>        the end of the list.<br/>        """</span><span id="e7cc" class="mu mv it mp b gy na mx l my mz">        #check to see whether there are any items in the queue<br/>        #if so then we can pop the final item<br/>        if self.items:<br/>            <br/>            return self.items.pop()</span><span id="440f" class="mu mv it mp b gy na mx l my mz">        #else then we return None<br/>        else:</span><span id="6fc6" class="mu mv it mp b gy na mx l my mz">            return None</span></pre><p id="ebd6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">因此，我们实现了队列的主要功能，确保我们只在队列的一端添加项目，从队列的另一端移除项目。这将保持队列中项目的顺序，并确保我们按照它们被添加到队列中的顺序来使用这些项目。</p><p id="2827" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然后，我们可以考虑在实际程序中帮助使用队列数据结构的其他补充方法。我们可以添加的第一个附加功能是允许用户查看下一个要从队列中删除的项目，而不需要实际删除它。它的实现将遵循与<code class="fe mm mn mo mp b">dequeue()</code>方法相似的结构，但是我们可以暗示用列表中的最后一项来访问该项，而不是使用<code class="fe mm mn mo mp b">.pop()</code>。这意味着当我们使用索引来访问条目时，我们的时间复杂度为O(1 ),这使得它变得简单明了。</p><pre class="kj kk kl km gt mq mp mr ms aw mt bi"><span id="e8a5" class="mu mv it mp b gy mw mx l my mz">    def peek(self):<br/>        """<br/>        Returns the final item in the Queue without removal<br/>        <br/>        Runs in constant time O(1) as we are only using the index<br/>        """</span><span id="fd64" class="mu mv it mp b gy na mx l my mz">        #if there are items in the Queue <br/>        if self.items:<br/>            #then return the first item<br/>            return self.items<br/>        <br/>        #else then return none<br/>        else:<br/>            return Non</span></pre><p id="42bb" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们还可以提供一种检查队列是否为空的方法。如果队列实际上是空的，这将简单地返回布尔值<code class="fe mm mn mo mp b">True</code>，如果不是空的，则返回<code class="fe mm mn mo mp b">False</code>。这也是在恒定时间内运行的，因为它只是检查<code class="fe mm mn mo mp b">Queue</code>中的列表是否存在</p><pre class="kj kk kl km gt mq mp mr ms aw mt bi"><span id="ff66" class="mu mv it mp b gy mw mx l my mz">    def is_empty(self):<br/>        """<br/>        Returns boolean whether Queue is empty or not</span><span id="b05e" class="mu mv it mp b gy na mx l my mz">        Runs in constant time O(1) as does not depend on size<br/>        """</span><span id="021a" class="mu mv it mp b gy na mx l my mz">        return not self.items</span></pre><p id="8f90" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们可以创建一个返回队列大小的方法。这可以告诉我们队列的大小，就像它对于列表一样，并且告诉我们已经添加了多少项或者队列中还剩下多少项。</p><pre class="kj kk kl km gt mq mp mr ms aw mt bi"><span id="bf58" class="mu mv it mp b gy mw mx l my mz">    def size(self):<br/>        """<br/>        Returns the size of the stack </span><span id="d7bd" class="mu mv it mp b gy na mx l my mz">        Runs in constant time O(1) as only checks size<br/>        """</span><span id="36c2" class="mu mv it mp b gy na mx l my mz">        #len will return 0 if empty<br/>        #so don't need to worry about empty condition<br/>        return len(self.items)</span></pre><p id="8642" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">最后，我们要确保我们试图打印出一个<code class="fe mm mn mo mp b">Queue</code>类的实例，它对于个人来说是可读的，既可以看到它是队列，也可以看到队列包含的内容。为此，我们使用该类的特殊的<code class="fe mm mn mo mp b">__str__</code> dunder方法来告诉解释器我们想要如何打印出该类的一个实例。在这种情况下，我们只想返回包含在堆栈中的整个列表，可以实现为:</p><pre class="kj kk kl km gt mq mp mr ms aw mt bi"><span id="db4f" class="mu mv it mp b gy mw mx l my mz">    def __str__(self):<br/>        """Return a string representation of the Stack""""</span><span id="aa54" class="mu mv it mp b gy na mx l my mz">        return str(self.items)</span></pre><p id="4a74" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">唷！那么把这些放在一起怎么样？最终产品看起来像这样:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nc lw l"/></div></figure><p id="533e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">此时，您可能会想为什么我需要知道这些？这种数据结构在编程中的常见应用包括:</p><ul class=""><li id="fd22" class="lx ly it lb b lc ld lf lg li lz lm ma lq mb lu mc md me mf bi translated">在CPU中调度作业</li><li id="7f04" class="lx ly it lb b lc mg lf mh li mi lm mj lq mk lu mc md me mf bi translated">图遍历算法</li><li id="fb6b" class="lx ly it lb b lc mg lf mh li mi lm mj lq mk lu mc md me mf bi translated">订单处理</li><li id="1b38" class="lx ly it lb b lc mg lf mh li mi lm mj lq mk lu mc md me mf bi translated">打印机队列</li></ul><p id="1ff7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">当你在构建这些程序时，了解这种数据结构在Python中是什么样子，并为你提供能够处理这些挑战的功能，这是很好的。</p><p id="16f8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这也可能出现在软件工程师或数据科学面试中，如要求您构建一个使用队列的打印机，或创建图形遍历算法，如深度优先搜索。</p><p id="0d5d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在，你知道了如何用Python实现队列，也知道了它的一些用途！</p></div><div class="ab cl nd ne hx nf" role="separator"><span class="ng bw bk nh ni nj"/><span class="ng bw bk nh ni nj"/><span class="ng bw bk nh ni"/></div><div class="im in io ip iq"><p id="6db1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这是探索数据结构及其在Python中的使用和实现系列的第七篇文章。如果您错过了Python中的链表、栈和字典的前三部分，您可以在以下链接中找到它们:</p><div class="nk nl gp gr nm nn"><a rel="noopener follow" target="_blank" href="/a-complete-guide-to-linked-lists-in-python-c52b6cb005"><div class="no ab fo"><div class="np ab nq cl cj nr"><h2 class="bd iu gy z fp ns fr fs nt fu fw is bi translated">Python中链表的完整指南</h2><div class="nu l"><h3 class="bd b gy z fp ns fr fs nt fu fw dk translated">什么是链表，如何在Python中实现它们</h3></div><div class="nv l"><p class="bd b dl z fp ns fr fs nt fu fw dk translated">towardsdatascience.com</p></div></div><div class="nw l"><div class="nx l ny nz oa nw ob ks nn"/></div></div></a></div><div class="nk nl gp gr nm nn"><a rel="noopener follow" target="_blank" href="/a-complete-guide-to-stacks-in-python-ee4e2045a704"><div class="no ab fo"><div class="np ab nq cl cj nr"><h2 class="bd iu gy z fp ns fr fs nt fu fw is bi translated">Python中堆栈的完整指南</h2><div class="nu l"><h3 class="bd b gy z fp ns fr fs nt fu fw dk translated">在Python中构造和使用堆栈数据结构</h3></div><div class="nv l"><p class="bd b dl z fp ns fr fs nt fu fw dk translated">towardsdatascience.com</p></div></div><div class="nw l"><div class="oc l ny nz oa nw ob ks nn"/></div></div></a></div><div class="nk nl gp gr nm nn"><a rel="noopener follow" target="_blank" href="/a-complete-guide-to-dictionaries-in-python-5c3f4c132569"><div class="no ab fo"><div class="np ab nq cl cj nr"><h2 class="bd iu gy z fp ns fr fs nt fu fw is bi translated">Python词典完全指南</h2><div class="nu l"><h3 class="bd b gy z fp ns fr fs nt fu fw dk translated">什么是词典，创建它们，访问它们，更新它们，以及特殊的方法</h3></div><div class="nv l"><p class="bd b dl z fp ns fr fs nt fu fw dk translated">towardsdatascience.com</p></div></div><div class="nw l"><div class="od l ny nz oa nw ob ks nn"/></div></div></a></div><p id="0a7e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">本系列的后续文章将涉及链表、队列和图形。为了确保您不会错过任何内容，请注册以便在发布时收到电子邮件通知:</p><div class="nk nl gp gr nm nn"><a href="https://philip-wilkinson.medium.com/subscribe" rel="noopener follow" target="_blank"><div class="no ab fo"><div class="np ab nq cl cj nr"><h2 class="bd iu gy z fp ns fr fs nt fu fw is bi translated">每当菲利普·威尔金森发表文章时，就收到一封电子邮件。</h2><div class="nu l"><h3 class="bd b gy z fp ns fr fs nt fu fw dk translated">每当菲利普·威尔金森发表文章时，就收到一封电子邮件。通过注册，您将创建一个中型帐户，如果您还没有…</h3></div><div class="nv l"><p class="bd b dl z fp ns fr fs nt fu fw dk translated">philip-wilkinson.medium.com</p></div></div><div class="nw l"><div class="oe l ny nz oa nw ob ks nn"/></div></div></a></div><p id="9e47" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果你喜欢你所读的，但还不是一个中等会员，那么考虑使用我下面的推荐代码注册，在这个平台上支持我自己和其他了不起的作者:</p><div class="nk nl gp gr nm nn"><a href="https://philip-wilkinson.medium.com/membership" rel="noopener follow" target="_blank"><div class="no ab fo"><div class="np ab nq cl cj nr"><h2 class="bd iu gy z fp ns fr fs nt fu fw is bi translated">通过我的推荐链接加入Medium—Philip Wilkinson</h2><div class="nu l"><h3 class="bd b gy z fp ns fr fs nt fu fw dk translated">作为一个媒体会员，你的会员费的一部分会给你阅读的作家，你可以完全接触到每一个故事…</h3></div><div class="nv l"><p class="bd b dl z fp ns fr fs nt fu fw dk translated">philip-wilkinson.medium.com</p></div></div><div class="nw l"><div class="of l ny nz oa nw ob ks nn"/></div></div></a></div><p id="5a60" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">感谢您的阅读！</p></div></div>    
</body>
</html>