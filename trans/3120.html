<html>
<head>
<title>Do Not Dismiss Unusual Data Points as Outliers</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">不要将不寻常的数据点视为异常值</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/do-not-dismiss-unusual-data-points-as-outliers-5132380f2e67#2022-07-08">https://towardsdatascience.com/do-not-dismiss-unusual-data-points-as-outliers-5132380f2e67#2022-07-08</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="5fb3" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">一些可疑点往往被错误地简化为异常值。其他类型及其检测工具也值得关注。</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/6f49880b72c5a9a0a7bb8a29ab66dbc4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*h2AAZXX2dpxreEjimAHVGA.jpeg"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated"><a class="ae kv" href="https://unsplash.com/@davisuko?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> davisuko </a>在<a class="ae kv" href="https://unsplash.com/s/photos/unique?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure></div><div class="ab cl kw kx hu ky" role="separator"><span class="kz bw bk la lb lc"/><span class="kz bw bk la lb lc"/><span class="kz bw bk la lb"/></div><div class="ij ik il im in"><h1 id="3a22" class="ld le iq bd lf lg lh li lj lk ll lm ln jw lo jx lp jz lq ka lr kc ls kd lt lu bi translated">定义</h1><h2 id="b9cc" class="lv le iq bd lf lw lx dn lj ly lz dp ln ma mb mc lp md me mf lr mg mh mi lt mj bi translated">语境</h2><blockquote class="mk ml mm"><p id="3757" class="mn mo mp mq b mr ms jr mt mu mv ju mw mx my mz na nb nc nd ne nf ng nh ni nj ij bi translated">垃圾进，垃圾出</p></blockquote><p id="da05" class="pw-post-body-paragraph mn mo iq mq b mr ms jr mt mu mv ju mw ma my mz na md nc nd ne mg ng nh ni nj ij bi translated">这句话概括了<strong class="mq ir">中等</strong>数据对模型结果的影响。在一个项目中，一个不可或缺的步骤是执行<strong class="mq ir"> EDA </strong>(解释性数据分析)来检查数据的“清洁度”等。如果没有这一步，有人可能会使结果无效，并要求进行稳健的<strong class="mq ir"> </strong>分析，即处理异常观察的分析。</p><p id="c1f5" class="pw-post-body-paragraph mn mo iq mq b mr ms jr mt mu mv ju mw ma my mz na md nc nd ne mg ng nh ni nj ij bi translated">通常采用的方法是通过箱线图和散点图调查每个变量的单变量分布<strong class="mq ir">。除了给出明显的结论之外，这些技术在多变量环境中可能<strong class="mq ir">没有意义</strong>，并且不能告诉我们这个异常数据子集如何影响估计模型。</strong></p><p id="44e8" class="pw-post-body-paragraph mn mo iq mq b mr ms jr mt mu mv ju mw ma my mz na md nc nd ne mg ng nh ni nj ij bi translated">此外，涵盖术语“异常值”中的所有异常点<strong class="mq ir">是不合适的。</strong>事实上，不同种类的点可能以它们自己的方式影响估计的模型。</p><p id="fd44" class="pw-post-body-paragraph mn mo iq mq b mr ms jr mt mu mv ju mw ma my mz na md nc nd ne mg ng nh ni nj ij bi translated">为此，除了“<strong class="mq ir">异常值</strong>，还将引入另外两个术语:<strong class="mq ir">高杠杆，以及影响</strong>。下一部分，每个术语都将通过例子来阐明。</p><h2 id="ac34" class="lv le iq bd lf lw lx dn lj ly lz dp ln ma mb mc lp md me mf lr mg mh mi lt mj bi translated">术语</h2><p id="0a1e" class="pw-post-body-paragraph mn mo iq mq b mr nk jr mt mu nl ju mw ma nm mz na md nn nd ne mg no nh ni nj ij bi translated">在回归分析中，这些术语是相关的，除了它们有不同的含义:</p><ul class=""><li id="f8d3" class="np nq iq mq b mr ms mu mv ma nr md ns mg nt nj nu nv nw nx bi translated"><strong class="mq ir">影响点:</strong>对估计模型有影响的数据子集。移除它似乎<strong class="mq ir">显著修改了</strong>估计系数的结果。</li><li id="febe" class="np nq iq mq b mr ny mu nz ma oa md ob mg oc nj nu nv nw nx bi translated"><strong class="mq ir">异常值:</strong>超出其余数据一般模式的观察值。在回归分析中，由于高残差，这些点保持<strong class="mq ir">在置信带</strong>之外。</li><li id="624d" class="np nq iq mq b mr ny mu nz ma oa md ob mg oc nj nu nv nw nx bi translated"><strong class="mq ir">高杠杆:</strong>具有<strong class="mq ir">潜在影响</strong>预测响应的观察结果。如果我们稍微改变观察到的反应，就可以通过∂y_hat/∂y:评估预测的反应有多大的不同。一般都是极限x值。</li></ul><p id="28b4" class="pw-post-body-paragraph mn mo iq mq b mr ms jr mt mu mv ju mw ma my mz na md nc nd ne mg ng nh ni nj ij bi translated">在深入探讨之前，我们先举一些琐碎的例子来获取要点。</p><h2 id="ed08" class="lv le iq bd lf lw lx dn lj ly lz dp ln ma mb mc lp md me mf lr mg mh mi lt mj bi translated">例子</h2><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi od"><img src="../Images/07ebc8a72e60888f446d5224e103a095.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0M7tPFU79Uoy-XwkIwp_pA.png"/></div></div></figure><p id="3e18" class="pw-post-body-paragraph mn mo iq mq b mr ms jr mt mu mv ju mw ma my mz na md nc nd ne mg ng nh ni nj ij bi translated"><strong class="mq ir"> <em class="mp">备注:</em> </strong>即使一致性分析需要统计结论(R、p值、标准差)，也将以图形方式进行证明</p><blockquote class="mk ml mm"><p id="f480" class="mn mo mp mq b mr ms jr mt mu mv ju mw mx my mz na nb nc nd ne nf ng nh ni nj ij bi translated"><strong class="mq ir"> <em class="iq">一.</em> </strong></p></blockquote><p id="e75a" class="pw-post-body-paragraph mn mo iq mq b mr ms jr mt mu mv ju mw ma my mz na md nc nd ne mg ng nh ni nj ij bi translated"><strong class="mq ir">影响</strong>:两条回归线差别不大，估计斜率相似，估计截距比较接近<strong class="mq ir"> = &gt;否</strong></p><p id="a5ee" class="pw-post-body-paragraph mn mo iq mq b mr ms jr mt mu mv ju mw ma my mz na md nc nd ne mg ng nh ni nj ij bi translated"><strong class="mq ir">异常值</strong>:红点似乎有很高的残差吗？是的，而且肯定是脱离了线性模式<strong class="mq ir"> = &gt;是的</strong></p><p id="cc0e" class="pw-post-body-paragraph mn mo iq mq b mr ms jr mt mu mv ju mw ma my mz na md nc nd ne mg ng nh ni nj ij bi translated"><strong class="mq ir">高杠杆:</strong>是极限x值吗？如果我们沿着y轴稍微移动红点，预测的响应会有很大的变化吗？该点接近平均x值，并且y变化不会严重修改预测响应<strong class="mq ir"> = &gt;否</strong></p><blockquote class="mk ml mm"><p id="58e6" class="mn mo mp mq b mr ms jr mt mu mv ju mw mx my mz na nb nc nd ne nf ng nh ni nj ij bi translated"><strong class="mq ir"> <em class="iq"> b. </em> </strong></p></blockquote><p id="9e2a" class="pw-post-body-paragraph mn mo iq mq b mr ms jr mt mu mv ju mw ma my mz na md nc nd ne mg ng nh ni nj ij bi translated"><strong class="mq ir">流入:</strong>两条回归线几乎重叠<strong class="mq ir"> = &gt;否</strong></p><p id="2a9d" class="pw-post-body-paragraph mn mo iq mq b mr ms jr mt mu mv ju mw ma my mz na md nc nd ne mg ng nh ni nj ij bi translated"><strong class="mq ir">异常值:</strong>红点服从线性模式，具有低残差<strong class="mq ir"> = &gt;否</strong></p><p id="44e7" class="pw-post-body-paragraph mn mo iq mq b mr ms jr mt mu mv ju mw ma my mz na md nc nd ne mg ng nh ni nj ij bi translated"><strong class="mq ir">高杠杆:</strong>有了这个高x值，红点可能在分布的长尾中。此外，如下图所示，当该点稍微向上移动时，预测响应完全变化<strong class="mq ir"> = &gt;是</strong></p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oe"><img src="../Images/4a1286707ab08088c161083207723c3d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*pNQ-AZYlvISnrcgY"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">情况b)在x = 5时具有相对小的观测扰动</p></figure><blockquote class="mk ml mm"><p id="9422" class="mn mo mp mq b mr ms jr mt mu mv ju mw mx my mz na nb nc nd ne nf ng nh ni nj ij bi translated"><strong class="mq ir"> <em class="iq"> c. </em> </strong></p></blockquote><p id="9670" class="pw-post-body-paragraph mn mo iq mq b mr ms jr mt mu mv ju mw ma my mz na md nc nd ne mg ng nh ni nj ij bi translated"><strong class="mq ir">影响:</strong>由于红点完全决定了回归线，所以明显有影响<strong class="mq ir"> = &gt;是</strong></p><p id="eb06" class="pw-post-body-paragraph mn mo iq mq b mr ms jr mt mu mv ju mw ma my mz na md nc nd ne mg ng nh ni nj ij bi translated"><strong class="mq ir">异常值:</strong>其余数据不遵循一般模式，因此，在这种配置下，我们无法推断出潜在的异常值<strong class="mq ir"> = &gt;？</strong></p><p id="1199" class="pw-post-body-paragraph mn mo iq mq b mr ms jr mt mu mv ju mw ma my mz na md nc nd ne mg ng nh ni nj ij bi translated"><strong class="mq ir">高杠杆:</strong>作为主要影响点，观测响应的变化极大地影响预测响应<strong class="mq ir"> = &gt;是</strong></p><p id="51e3" class="pw-post-body-paragraph mn mo iq mq b mr ms jr mt mu mv ju mw ma my mz na md nc nd ne mg ng nh ni nj ij bi translated">由于这一点是有影响的，你应该<strong class="mq ir">深深怀疑</strong>的估计。</p><blockquote class="mk ml mm"><p id="03a3" class="mn mo mp mq b mr ms jr mt mu mv ju mw mx my mz na nb nc nd ne nf ng nh ni nj ij bi translated"><strong class="mq ir"> <em class="iq"> d. </em> </strong></p></blockquote><p id="fad3" class="pw-post-body-paragraph mn mo iq mq b mr ms jr mt mu mv ju mw ma my mz na md nc nd ne mg ng nh ni nj ij bi translated">这是实例a)和b)的组合。是一个<strong class="mq ir">高杠杆的离群值</strong>。此外，与前两种情况相反，两条回归线距离更远。是一个<strong class="mq ir">影响点</strong>。</p><p id="f92e" class="pw-post-body-paragraph mn mo iq mq b mr ms jr mt mu mv ju mw ma my mz na md nc nd ne mg ng nh ni nj ij bi translated">我们能从这些例子中学到什么？</p><p id="1bf2" class="pw-post-body-paragraph mn mo iq mq b mr ms jr mt mu mv ju mw ma my mz na md nc nd ne mg ng nh ni nj ij bi translated">实际上，影响点是至关重要的，因为它们似乎对估计模型有<strong class="mq ir">不成比例的影响</strong>。一个有影响的点看起来既是一个离群点，也是一个高杠杆点。也就是说，x值(高杠杆)和y值(异常值)的子空间中的非分布样本将显著影响估计模型。</p><p id="e08e" class="pw-post-body-paragraph mn mo iq mq b mr ms jr mt mu mv ju mw ma my mz na md nc nd ne mg ng nh ni nj ij bi translated">去除这些可疑点并分析统计结果，结果发现这些有影响的点。</p><p id="44ee" class="pw-post-body-paragraph mn mo iq mq b mr ms jr mt mu mv ju mw ma my mz na md nc nd ne mg ng nh ni nj ij bi translated">然而，一切都是在只有一个变量<strong class="mq ir"> </strong>的完美世界中描述的，但实际问题包括多个变量<strong class="mq ir">。</strong>例如，高杠杆点不仅仅是极限x值，还可能是x值的<strong class="mq ir">奇异组合</strong>，使得这些点远离解释变量子空间中的其他观察值。</p><p id="792d" class="pw-post-body-paragraph mn mo iq mq b mr ms jr mt mu mv ju mw ma my mz na md nc nd ne mg ng nh ni nj ij bi translated">下一部分是上一部分的一般化，包含多个预测值。我将提供统计工具来有效地检测这些点并描述它们的特征。</p><h1 id="cad8" class="ld le iq bd lf lg of li lj lk og lm ln jw oh jx lp jz oi ka lr kc oj kd lt lu bi translated">侦查</h1><h2 id="9a58" class="lv le iq bd lf lw lx dn lj ly lz dp ln ma mb mc lp md me mf lr mg mh mi lt mj bi translated">“帽子”矩阵</h2><p id="bb1c" class="pw-post-body-paragraph mn mo iq mq b mr nk jr mt mu nl ju mw ma nm mz na md nn nd ne mg no nh ni nj ij bi translated">在多元线性回归中，该理论指出预测的响应可以与观察到的响应直接相关:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ok"><img src="../Images/e95244ea4bf33a21a01d8172ec585b10.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*w2RnTS4ATtglwXErbpPUZA.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">“帽子”矩阵如何定义的证明</p></figure><p id="3c10" class="pw-post-body-paragraph mn mo iq mq b mr ms jr mt mu mv ju mw ma my mz na md nc nd ne mg ng nh ni nj ij bi translated">矩阵h，也称为<strong class="mq ir">“帽子矩阵”(</strong>因为它将“^”赋予了<em class="mp"> y </em>)，是<strong class="mq ir"/><strong class="mq ir"/>检测可疑点的中心概念。简单地用这个矩阵乘以y，我们就可以立即得到预测的响应，而H只是x的函数。</p><p id="1390" class="pw-post-body-paragraph mn mo iq mq b mr ms jr mt mu mv ju mw ma my mz na md nc nd ne mg ng nh ni nj ij bi translated">为了更好地理解，最后的等式可以写成以下等式:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ok"><img src="../Images/19a5b27c5b1a211fa0b9e760b51b386c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4MYygApPvIZjzTe64hnhgg.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">矩阵系数的先前等式(其中<strong class="bd ol"> n =观察数量)</strong></p></figure><p id="a163" class="pw-post-body-paragraph mn mo iq mq b mr ms jr mt mu mv ju mw ma my mz na md nc nd ne mg ng nh ni nj ij bi translated">在这个阶段，我们已经勾勒出一个不可或缺的元素:<strong class="mq ir"> h_ii。</strong>后面我们会看到，这个元素存在于每一个与异常点检测相关的公式中。更准确的说，它有一个名字:<strong class="mq ir">杠杆！</strong>的确，如果你回想一下前面的定义，杠杆可以通过<strong class="mq ir"> </strong> ∂y_hat/∂y来估算，也就是h_ii。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ok"><img src="../Images/95942971d02e8ab9f826be0eda8b7cd1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*cVS6L0QlHJP5gAFVnZtMNw.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">h_ii，第I次观察的杠杆，取决于X(其中<strong class="bd ol"> p =解释变量的数量</strong></p></figure><p id="0022" class="pw-post-body-paragraph mn mo iq mq b mr ms jr mt mu mv ju mw ma my mz na md nc nd ne mg ng nh ni nj ij bi translated">现在我也来介绍一下<strong class="mq ir">残</strong>的概念。正如你所想象的，残差——预测响应和观察响应之间的差异——在检测异常值<strong class="mq ir">时起着决定性的作用。我们可以证明以下结果:</strong></p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ok"><img src="../Images/7dd5b0e75ae91441d5b74d7863270d44.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*d5R3yDC6oXZXvv4CbBdyeQ.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">残差向量是服从期望为0的正态分布的随机变量。</p></figure><p id="18f9" class="pw-post-body-paragraph mn mo iq mq b mr ms jr mt mu mv ju mw ma my mz na md nc nd ne mg ng nh ni nj ij bi translated">从这个结果中可以得出三个有用的结论:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ok"><img src="../Images/4d1ee502a35b4fe0a18f15351b6a4be1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vXnVqmCz62cSbF4H6e5bQw.png"/></div></div></figure><p id="f807" class="pw-post-body-paragraph mn mo iq mq b mr ms jr mt mu mv ju mw ma my mz na md nc nd ne mg ng nh ni nj ij bi translated"><strong class="mq ir">备注:</strong>每个残差都有一个不同的<strong class="mq ir"> </strong>方差，它们是相互关联的。</p><p id="26a5" class="pw-post-body-paragraph mn mo iq mq b mr ms jr mt mu mv ju mw ma my mz na md nc nd ne mg ng nh ni nj ij bi translated">既然我们已经为理论奠定了基础，那么让我们来介绍一下描述可疑点的工具。</p><h2 id="4acb" class="lv le iq bd lf lw lx dn lj ly lz dp ln ma mb mc lp md me mf lr mg mh mi lt mj bi translated">高杠杆</h2><p id="8ea4" class="pw-post-body-paragraph mn mo iq mq b mr nk jr mt mu nl ju mw ma nm mz na md nn nd ne mg no nh ni nj ij bi translated">正如我已经提到的，杠杆是值h _ ii<strong class="mq ir">T5，它定义了在计算第I个预测响应时乘以第I个观察响应的系数。由此可见，按理说<strong class="mq ir">高杠杆=高h_ii </strong>，<strong class="mq ir"> </strong>对吗？但是什么样的<strong class="mq ir">阈值</strong>与认为h_ii高相关呢？</strong></p><p id="d6aa" class="pw-post-body-paragraph mn mo iq mq b mr ms jr mt mu mv ju mw ma my mz na md nc nd ne mg ng nh ni nj ij bi translated">所选择的临界值基于一个<strong class="mq ir">经验法则</strong>:如果h_ii大于h_ii平均值的2倍，第I次观察被视为高杠杆。该含义可以改写如下:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi om"><img src="../Images/3404840e9a3c434ab0ee307ec0ffbc25.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*X5Lg_lEOnOxC8gTDhE65Qg.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">简化条件以检测高杠杆点(p =解释变量的数量，n =观察值的数量)</p></figure><p id="7aab" class="pw-post-body-paragraph mn mo iq mq b mr ms jr mt mu mv ju mw ma my mz na md nc nd ne mg ng nh ni nj ij bi translated">值得一提的是，这个条件是一个<strong class="mq ir">经验法则</strong>，没什么严谨的。您可能会在其他地方遇到另一个阈值(如果n相对较大，有时是平均值的3倍)</p><h2 id="6862" class="lv le iq bd lf lw lx dn lj ly lz dp ln ma mb mc lp md me mf lr mg mh mi lt mj bi translated">异常值的学生化残差</h2><p id="02e7" class="pw-post-body-paragraph mn mo iq mq b mr nk jr mt mu nl ju mw ma nm mz na md nn nd ne mg no nh ni nj ij bi translated">根据定义，异常值是<strong class="mq ir">高残差点</strong>。然而，每个残差都有不同的方差。因此，为了进行严格的分析，必须实现残差的标准化。这样，残差可以用标准单位偏差量化，然后进行比较。因此有如下关系:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi on"><img src="../Images/6703d271dd8047845a81285ddbfd26db.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qNxatZcPXEV_SqwKP4ZwQw.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated"><strong class="bd ol">标准化</strong>残差的理论定义</p></figure><p id="e90c" class="pw-post-body-paragraph mn mo iq mq b mr ms jr mt mu mv ju mw ma my mz na md nc nd ne mg ng nh ni nj ij bi translated">然而，回归分析中一个反复出现的问题是<strong class="mq ir"/><strong class="mq ir">σ</strong>的存在。这个量在模型的定义中被引入作为误差项的标准偏差。然而，由于其值很少可用，因此需要一个估计量。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ok"><img src="../Images/d129a7ca175a0649e61984ba690cfdc6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Tco7YoYFXqmtTyA0Le8W0A.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated"><strong class="bd ol">学生化</strong>残差的理论估计</p></figure><p id="d4b2" class="pw-post-body-paragraph mn mo iq mq b mr ms jr mt mu mv ju mw ma my mz na md nc nd ne mg ng nh ni nj ij bi translated">s是σ的无偏估计量。但是，借助数学工具，我们可以证明t_i确实<strong class="mq ir">不</strong>遵循t-student分布。为了获得这种分布，我们只需<strong class="mq ir">移除估计器中的第I个观察值</strong>，从而:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oo"><img src="../Images/3868139f25fee0ca377b1dc5dffe3481.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*d1noX38MN0lnMZvDeaj6XA.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">遵循T32(n-p-1)自由度的T32学生分布的学生化残差的理论估计(在正态假设下)</p></figure><p id="9580" class="pw-post-body-paragraph mn mo iq mq b mr ms jr mt mu mv ju mw ma my mz na md nc nd ne mg ng nh ni nj ij bi translated">s_i表示没有第I次观测的模型的均方误差。<strong class="mq ir"> </strong>如果我们打算为每一个I计算s_i，我们必须每次都<strong class="mq ir">改装</strong>模型。幸运的是，上面的等式解决了这个问题，因为s_i是变量的函数，不需要删除第I个观察值。</p><p id="d0dd" class="pw-post-body-paragraph mn mo iq mq b mr ms jr mt mu mv ju mw ma my mz na md nc nd ne mg ng nh ni nj ij bi translated">得到所有这些学生化残差后，我们如何评估异常值？</p><p id="59b9" class="pw-post-body-paragraph mn mo iq mq b mr ms jr mt mu mv ju mw ma my mz na md nc nd ne mg ng nh ni nj ij bi translated">绘图通常是理解和直观表示异常值的最佳方式:</p><ul class=""><li id="0b10" class="np nq iq mq b mr ms mu mv ma nr md ns mg nt nj nu nv nw nx bi translated"><strong class="mq ir">学生化残差与预测观测值</strong>，阈值为2或3(绝对值)以标记异常值(此外，我们应该看到均匀分布，因为理论上残差和预测响应向量之间的协方差为<strong class="mq ir">零)</strong></li><li id="69cc" class="np nq iq mq b mr ny mu nz ma oa md ob mg oc nj nu nv nw nx bi translated"><strong class="mq ir">学生化残差与观察Id </strong>的对比，阈值也为2或3。此图对于时间序列数据非常有用。事实上，它可以导致与时间成分相关的异常值检测。</li></ul><h2 id="6288" class="lv le iq bd lf lw lx dn lj ly lz dp ln ma mb mc lp md me mf lr mg mh mi lt mj bi translated">库克距离和影响点的定义</h2><p id="caf3" class="pw-post-body-paragraph mn mo iq mq b mr nk jr mt mu nl ju mw ma nm mz na md nn nd ne mg no nh ni nj ij bi translated">根据定义，影响点显著影响<strong class="mq ir"/>估计模型和相关结果。一个简单的想法是<strong class="mq ir">移除</strong>每个点，<strong class="mq ir">重新装配</strong>模型，并且<strong class="mq ir">分析“完整”模型和没有移除点的模型之间的</strong>差异。像往常一样，我们需要定义一个度量来告知这个点有多大的影响力。</p><p id="567e" class="pw-post-body-paragraph mn mo iq mq b mr ms jr mt mu mv ju mw ma my mz na md nc nd ne mg ng nh ni nj ij bi translated">在本文中，我将介绍两个指标:<strong class="mq ir">Cook Distance和DFFITS。</strong></p><p id="9ee0" class="pw-post-body-paragraph mn mo iq mq b mr ms jr mt mu mv ju mw ma my mz na md nc nd ne mg ng nh ni nj ij bi translated">根据定义，库克距离由第一等式定义。第二个等式源于第一个等式，通常更实用:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi op"><img src="../Images/d73f7fb214ac25ce137a156773cc3750.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0HDg1bAFwIjZ04v_w5dggg.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">(1):库克距离的理论定义/ (2):实际相等。(β(I)是没有第I个观测值时的OLS估计)</p></figure><p id="3230" class="pw-post-body-paragraph mn mo iq mq b mr ms jr mt mu mv ju mw ma my mz na md nc nd ne mg ng nh ni nj ij bi translated">等式(2)直接显示了影响点、高杠杆点和异常值之间的<strong class="mq ir">链接</strong>。</p><p id="1555" class="pw-post-body-paragraph mn mo iq mq b mr ms jr mt mu mv ju mw ma my mz na md nc nd ne mg ng nh ni nj ij bi translated">事实上，D_i是t_i和h_ii/(1-h_ii)的函数。这两个术语分别量化了异常值和高杠杆点。此外，h_ii/(1-h_ii)是h_ii的增函数。因此，<strong class="mq ir">t _ I |和/或h_ii越高，烹饪距离越高。</strong>它证实了我们之前所说的:如果一个观察是一个高杠杆的异常值，它当然也是一个有影响的点。</p><p id="c685" class="pw-post-body-paragraph mn mo iq mq b mr ms jr mt mu mv ju mw ma my mz na md nc nd ne mg ng nh ni nj ij bi translated">一个<strong class="mq ir">统计阈值</strong>用于确定该点是否有影响:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi op"><img src="../Images/b535aa596a0b758d32f91fc1bc83c5bc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ZauKcHecqnV5bmXmHXyrfQ.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">将第I次观察视为有影响的条件，其中F表示具有p和n-p自由度的F分布的1-alpha百分位。</p></figure><p id="b846" class="pw-post-body-paragraph mn mo iq mq b mr ms jr mt mu mv ju mw ma my mz na md nc nd ne mg ng nh ni nj ij bi translated">DFFITS和Cook Distance几乎相同:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ok"><img src="../Images/93ee463ebc285e0e7d3f62857d2fc95a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Yie6A3OjX2kSY2Eqn8VARA.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">确定条件以识别影响点</p></figure></div><div class="ab cl kw kx hu ky" role="separator"><span class="kz bw bk la lb lc"/><span class="kz bw bk la lb lc"/><span class="kz bw bk la lb"/></div><div class="ij ik il im in"><h1 id="37b2" class="ld le iq bd lf lg lh li lj lk ll lm ln jw lo jx lp jz lq ka lr kc ls kd lt lu bi translated">结论</h1><p id="fa4a" class="pw-post-body-paragraph mn mo iq mq b mr nk jr mt mu nl ju mw ma nm mz na md nn nd ne mg no nh ni nj ij bi translated">对于你的回归分析来说，这些棘手的数据点可能是一个噩梦。在项目中，您应该:</p><ul class=""><li id="a9c5" class="np nq iq mq b mr ms mu mv ma nr md ns mg nt nj nu nv nw nx bi translated"><strong class="mq ir">评估线性模型所做假设的准确性</strong>(独立性、标准化、同方差性、线性…)</li><li id="e5a8" class="np nq iq mq b mr ny mu nz ma oa md ob mg oc nj nu nv nw nx bi translated">执行前面的措施<strong class="mq ir">以确保数据一致性</strong></li></ul><p id="eb38" class="pw-post-body-paragraph mn mo iq mq b mr ms jr mt mu mv ju mw ma my mz na md nc nd ne mg ng nh ni nj ij bi translated">但是，可疑点是<strong class="mq ir">有价值的</strong>。你应该经常问自己这些点是如何产生的(不正确记录的数据，数据中固有的，分布不均匀…) <strong class="mq ir"> </strong>只有在你有正当理由的情况下才删除它们。</p><blockquote class="oq"><p id="9b06" class="or os iq bd ot ou ov ow ox oy oz nj dk translated">“由于数据可能是由非指定的模型生成的，诊断可能揭示暗示这些替代方案的模式”[1]</p></blockquote><p id="86d6" class="pw-post-body-paragraph mn mo iq mq b mr pa jr mt mu pb ju mw ma pc mz na md pd nd ne mg pe nh ni nj ij bi translated">在这篇文章中，我没有给出真实的例子，因为我希望<strong class="mq ir">把重点放在理论和工具的展示上。</strong>在R [5]中进行分析更容易，但是Statsmodel也提供了一些在Python中完成这项工作的方法。</p><blockquote class="mk ml mm"><p id="f559" class="mn mo mp mq b mr ms jr mt mu mv ju mw mx my mz na nb nc nd ne nf ng nh ni nj ij bi translated"><strong class="mq ir"> <em class="iq">注:</em> </strong> <em class="iq">所有人物和关系都是我做的。</em></p></blockquote><h1 id="78dd" class="ld le iq bd lf lg of li lj lk og lm ln jw oh jx lp jz oi ka lr kc oj kd lt lu bi translated">来源</h1><ul class=""><li id="ab90" class="np nq iq mq b mr nk mu nl ma pf md pg mg ph nj nu nv nw nx bi translated">地方检察官贝尔斯利。Kuh，E. e Welsch，R. E. (1980年)。回归诊断:识别有影响的数据和共线性来源。纽约:威利<strong class="mq ir">【1】</strong></li><li id="7512" class="np nq iq mq b mr ny mu nz ma oa md ob mg oc nj nu nv nw nx bi translated">蒙哥马利特区；佩克，E. A. e .维宁，G. G. (2021)。<em class="mp">线性回归分析导论，第六版</em>。霍博肯:威利<strong class="mq ir">【2】</strong></li><li id="ff0f" class="np nq iq mq b mr ny mu nz ma oa md ob mg oc nj nu nv nw nx bi translated">吉尔伯托·保拉。巴西IME-南太平洋大学统计局。<em class="mp"/><strong class="mq ir">【3】</strong></li><li id="b730" class="np nq iq mq b mr ny mu nz ma oa md ob mg oc nj nu nv nw nx bi translated"><a class="ae kv" href="https://online.stat.psu.edu/stat462/node/87/" rel="noopener ugc nofollow" target="_blank"><strong class="mq ir">https://online.stat.psu.edu/stat462/node/87/</strong></a><strong class="mq ir">【4】</strong></li><li id="ca37" class="np nq iq mq b mr ny mu nz ma oa md ob mg oc nj nu nv nw nx bi translated"><a class="ae kv" href="https://cran.r-project.org/web/packages/olsrr/vignettes/influence_measures.html" rel="noopener ugc nofollow" target="_blank"><strong class="mq ir">https://cran . r-project . org/web/packages/ol SRR/vignettes/influence _ measures . html</strong></a><strong class="mq ir">【5】</strong></li></ul></div></div>    
</body>
</html>