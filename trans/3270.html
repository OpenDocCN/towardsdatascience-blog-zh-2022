<html>
<head>
<title>Easily Animate Your Matplotlib Graphs</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">轻松制作Matplotlib图形动画</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/easily-animate-your-matplotlib-graphs-99b62db63697#2022-07-20">https://towardsdatascience.com/easily-animate-your-matplotlib-graphs-99b62db63697#2022-07-20</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="07ab" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">让Matplotlib动画更容易理解</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/f02d970e17b22b426cdca6475c5713ab.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*zSqUt4rSsMdxXG80"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">由<a class="ae ky" href="https://unsplash.com/@goumbik?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">卢卡斯·布拉塞克</a>在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</p></figure><p id="1b99" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">将数据可视化制作成动画可以增加可视化的整体深度。例如，下面的示例将时间维度添加到数据可视化中。你可以很容易地看到不同年龄组的人口随着时间的推移是如何变化的。通过动画可视化，我们可以很容易地看到趋势随时间的变化，在详细的组。</p><p id="49e5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">考虑到Matplotlib中可用选项的广度，学习如何制作图形动画似乎是一项艰巨的任务。本教程旨在解决这个问题！</p><p id="831b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">请看下图，看看我们今天要创造什么:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi lv"><img src="../Images/17ea16d59c4b5de17ef462922586f456.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*driaehIUor3TisHiAtm8pA.gif"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">你将学会创造什么(来源:Nik Piepenbreier)</p></figure><p id="814c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">激动吗？让我们开始吧！</p><p id="94d3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">你可以在这里下载数据集<a class="ae ky" href="https://raw.githubusercontent.com/datagy/mediumdata/master/populations.csv" rel="noopener ugc nofollow" target="_blank">。它基于加拿大统计局免费提供的数据，描述了加拿大人口按年份、年龄组和性别的细分。</a></p><h1 id="1183" class="lw lx it bd ly lz ma mb mc md me mf mg jz mh ka mi kc mj kd mk kf ml kg mm mn bi translated">创建基础可视化</h1><p id="66c0" class="pw-post-body-paragraph kz la it lb b lc mo ju le lf mp jx lh li mq lk ll lm mr lo lp lq ms ls lt lu im bi translated">Matplotlib动画通过不同的可视化效果循环工作。因此，我们可以设置一个基本的可视化，然后创建一个for循环，根据数据变化修改可视化。</p><p id="4712" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们先创建一个我们满意的基础可视化:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mt mu l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">创建我们的基础可视化</p></figure><p id="41f6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">代码太多了！让我们来分析一下我们在这里做了什么:</p><ol class=""><li id="416e" class="mv mw it lb b lc ld lf lg li mx lm my lq mz lu na nb nc nd bi translated">我们导入了项目所需的库</li><li id="8d1f" class="mv mw it lb b lc ne lf nf li ng lm nh lq ni lu na nb nc nd bi translated">我们使用<code class="fe nj nk nl nm b">read_csv()</code>函数读入数据</li><li id="15f5" class="mv mw it lb b lc ne lf nf li ng lm nh lq ni lu na nb nc nd bi translated">我们应用了一些数据清理来使我们的数据达到最佳状态。我们向前填充缺失的年龄类别，将我们的人口数转换为整数，并将我们的女性人口数乘以-1，这样她们就出现在我们视觉的左侧</li><li id="7987" class="mv mw it lb b lc ne lf nf li ng lm nh lq ni lu na nb nc nd bi translated">然后，我们创建了一个图形和轴对象来保存我们的可视化</li><li id="604b" class="mv mw it lb b lc ne lf nf li ng lm nh lq ni lu na nb nc nd bi translated">然后，我们过滤我们的数据，使之可视化</li><li id="b89d" class="mv mw it lb b lc ne lf nf li ng lm nh lq ni lu na nb nc nd bi translated">然后，我们使用<code class="fe nj nk nl nm b">barh()</code>函数创建两个相互叠加的可视化效果，并添加我们的值作为标签</li><li id="9b34" class="mv mw it lb b lc ne lf nf li ng lm nh lq ni lu na nb nc nd bi translated">最后，我们通过移除脊柱等来自定义我们的可视化。最后，我们设置一个标题来表示年份。</li></ol><p id="efe0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这将返回以下可视化结果:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nn"><img src="../Images/9cf9b592f0145ee0ea5c992e3dbecb4e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0GYLAUAvD1sTNJrkS750vg.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">您将创建的基本图像(来源:Nik Piepenbreier)</p></figure><p id="2fce" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在我们已经建立了基础，让我们创建我们的动画！</p><h1 id="5e52" class="lw lx it bd ly lz ma mb mc md me mf mg jz mh ka mi kc mj kd mk kf ml kg mm mn bi translated">创建可视化</h1><p id="87da" class="pw-post-body-paragraph kz la it lb b lc mo ju le lf mp jx lh li mq lk ll lm mr lo lp lq ms ls lt lu im bi translated">为了动画化我们的可视化，我们将使用<code class="fe nj nk nl nm b">FuncAnimation</code>类。顾名思义，这个类使用函数来创建动画。在我们进一步讨论之前，让我们看一下类的定义:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mt mu l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">了解FuncAnimation类</p></figure><p id="75f9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">从上面的代码块中我们可以看到，我们需要传入三个关键参数:</p><ol class=""><li id="fcdb" class="mv mw it lb b lc ld lf lg li mx lm my lq mz lu na nb nc nd bi translated">要使用的数字</li><li id="2799" class="mv mw it lb b lc ne lf nf li ng lm nh lq ni lu na nb nc nd bi translated">修改图形的功能</li><li id="b516" class="mv mw it lb b lc ne lf nf li ng lm nh lq ni lu na nb nc nd bi translated">对于每个帧，将什么数据传递到函数中</li></ol><p id="31d6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">您已经做了大量定义图形外观的艰苦工作。很容易把它转换成一个函数！让我们看看如何做到这一点:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mt mu l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">创建我们的动画功能</p></figure><p id="565f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们在上面的代码中所做的只是简单地将之前的代码转换成一个函数。该函数接受一个参数，即年份，稍后我们将使用我们的<code class="fe nj nk nl nm b">frames=</code>参数填充它。</p><p id="e43a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这里需要注意的是，我们还在函数中添加了第一行。<code class="fe nj nk nl nm b">ax.clear()</code>调用清除了我们的axes对象，并允许我们使用函数重新创建它。</p><h1 id="b1ff" class="lw lx it bd ly lz ma mb mc md me mf mg jz mh ka mi kc mj kd mk kf ml kg mm mn bi translated">把所有的放在一起</h1><p id="a287" class="pw-post-body-paragraph kz la it lb b lc mo ju le lf mp jx lh li mq lk ll lm mr lo lp lq ms ls lt lu im bi translated">让我们看看现在如何把这些放在一起。我们可以通过用我们的轴、函数和一组框架实例化它来创建一个<code class="fe nj nk nl nm b">FuncAnimation</code>对象。</p><p id="d7b4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们可以通过创建一个捕捉最小值和最大值的范围，使我们的框架对数据是动态的:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mt mu l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">加入我们的动画(终于！)</p></figure><p id="33ad" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在上面的代码中，我们首先创建我们的动画对象。然后，我们使用<code class="fe nj nk nl nm b">PillowWriter</code>类将我们的动画保存为GIF文件。这允许我们自定义动画运行的速度。在上面的代码中，我们将其设置为每秒5帧。</p><h1 id="63a3" class="lw lx it bd ly lz ma mb mc md me mf mg jz mh ka mi kc mj kd mk kf ml kg mm mn bi translated">结论</h1><p id="ac31" class="pw-post-body-paragraph kz la it lb b lc mo ju le lf mp jx lh li mq lk ll lm mr lo lp lq ms ls lt lu im bi translated">厉害！您已经创建了您的动画！创建动画数据可视化可让您以全新的方式浏览数据。在这种情况下，我们能够看到人口如何随着时间的推移而变化。添加动画并不总是一个好主意，但确实可以使数据交流更容易。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="no mu l"/></div></figure></div></div>    
</body>
</html>