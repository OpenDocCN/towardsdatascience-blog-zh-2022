<html>
<head>
<title>Common Mistakes During A/B Testing</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">A/B测试中的常见错误</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/common-mistakes-during-a-b-testing-bdb9eefdc7f0#2022-04-24">https://towardsdatascience.com/common-mistakes-during-a-b-testing-bdb9eefdc7f0#2022-04-24</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="5b89" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">我们通往卓越的道路布满了错误。让我们来做吧！</h2></div><p id="64c4" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi lb translated">在过去的几年里，我目睹了人们在A/B测试设计和后期分析中犯的许多错误。我想在这里讨论三个这样的错误以及如何克服它们。</p></div><div class="ab cl lk ll hu lm" role="separator"><span class="ln bw bk lo lp lq"/><span class="ln bw bk lo lp lq"/><span class="ln bw bk lo lp"/></div><div class="ij ik il im in"><h1 id="dad0" class="lr ls iq bd lt lu lv lw lx ly lz ma mb jw mc jx md jz me ka mf kc mg kd mh mi bi translated"><strong class="ak">使用曼-惠特尼方法比较中位数</strong></h1><p id="15ef" class="pw-post-body-paragraph kf kg iq kh b ki mj jr kk kl mk ju kn ko ml kq kr ks mm ku kv kw mn ky kz la ij bi translated">第一个错误是曼-惠特尼检验的使用不当。这种方法被大量误解和误用，因为大多数人使用这种检验，假设它是中位数的近似非参数“t检验”。实际上，我们只能使用曼-惠特尼检验来检查我们的分布是否有变化。</p><figure class="mp mq mr ms gt mt gh gi paragraph-image"><div role="button" tabindex="0" class="mu mv di mw bf mx"><div class="gh gi mo"><img src="../Images/2be46853af8d4cdd4cf0fdf128e026bb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hQGRmEfrhTIuauUUv3D5Og.png"/></div></div><p class="na nb gj gh gi nc nd bd b be z dk translated">在这个图中，我们可以看到分布X和Y有相同的分布，只是有一个位移。作者图片</p></figure><p id="e512" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">当我们应用曼-惠特尼检验时，我们设定我们的假设如下:</p><figure class="mp mq mr ms gt mt gh gi paragraph-image"><div class="gh gi ne"><img src="../Images/5750eaedcabfbddfcea4b9e3d48788bf.png" data-original-src="https://miro.medium.com/v2/resize:fit:516/format:webp/1*5_G7o5k2y7vXm_c_k3Of9Q.png"/></div><p class="na nb gj gh gi nc nd bd b be z dk translated">无效假设。作者图片</p></figure><figure class="mp mq mr ms gt mt gh gi paragraph-image"><div class="gh gi nf"><img src="../Images/e9dc27ef821d01444f4f4ba011683642.png" data-original-src="https://miro.medium.com/v2/resize:fit:608/format:webp/1*acn1vycJSmDQk3vu0Kn62g.png"/></div><p class="na nb gj gh gi nc nd bd b be z dk translated">另一个假设。作者图片</p></figure><p id="758f" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kh ir">我们应该总是考虑假设，对于这个测试只有两个:</strong></p><ol class=""><li id="2e80" class="ng nh iq kh b ki kj kl km ko ni ks nj kw nk la nl nm nn no bi translated">我们的观察是独立的</li><li id="3af0" class="ng nh iq kh b ki np kl nq ko nr ks ns kw nt la nl nm nn no bi translated">我们的分布有相同的形状</li></ol><p id="435c" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kh ir">如何计算曼-惠特尼统计:</strong></p><ol class=""><li id="4b67" class="ng nh iq kh b ki kj kl km ko ni ks nj kw nk la nl nm nn no bi translated">按数量级排列所有的观察结果</li><li id="768f" class="ng nh iq kh b ki np kl nq ko nr ks ns kw nt la nl nm nn no bi translated">为所有观察分配数字等级</li><li id="6501" class="ng nh iq kh b ki np kl nq ko nr ks ns kw nt la nl nm nn no bi translated">计算两组的U统计值</li></ol><figure class="mp mq mr ms gt mt gh gi paragraph-image"><div class="gh gi nu"><img src="../Images/69eebe75422e88d27570d0861575d227.png" data-original-src="https://miro.medium.com/v2/resize:fit:542/format:webp/1*ufFFOraXV-7qb27gTNzRHQ.png"/></div><p class="na nb gj gh gi nc nd bd b be z dk translated">R —样本1的所有等级的总和，n—1个样本的观察次数。作者图片</p></figure><figure class="mp mq mr ms gt mt gh gi paragraph-image"><div class="gh gi nv"><img src="../Images/70431e4183b29c581f488bf39967e48c.png" data-original-src="https://miro.medium.com/v2/resize:fit:618/format:webp/1*CPCf9PSXhofDNpNiI_9w3Q.png"/></div><p class="na nb gj gh gi nc nd bd b be z dk translated">R —样本2的所有等级的总和，n —样本2的观察次数。作者图片</p></figure><p id="ffd1" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">4.从这两个值中选择最小值</p><p id="8b8e" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">5.使用曼-惠特尼U检验的统计表，找出观察到U值或更低值的概率。</p><h2 id="33ee" class="nw ls iq bd lt nx ny dn lx nz oa dp mb ko ob oc md ks od oe mf kw of og mh oh bi translated">所以我们发现不能用它来比较中位数，我们应该用什么来代替呢？</h2><p id="76e5" class="pw-post-body-paragraph kf kg iq kh b ki mj jr kk kl mk ju kn ko ml kq kr ks mm ku kv kw mn ky kz la ij bi translated">幸运的是，统计学家弗兰克·威尔科克森在1945年发明了有符号秩检验。现在它的正式名称是“威尔科克森符号秩检验”。</p><p id="4c62" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们对测试的假设与开始时的预期一样:</p><figure class="mp mq mr ms gt mt gh gi paragraph-image"><div class="gh gi oi"><img src="../Images/d16e24d299832d18d14f7b140808f364.png" data-original-src="https://miro.medium.com/v2/resize:fit:444/format:webp/1*Nr25NQ40AFaXZNFeIZvQQw.png"/></div><p class="na nb gj gh gi nc nd bd b be z dk translated">零假设，m-中位数。作者图片</p></figure><figure class="mp mq mr ms gt mt gh gi paragraph-image"><div role="button" tabindex="0" class="mu mv di mw bf mx"><div class="gh gi oj"><img src="../Images/8dbf64e5770db461133e5ff127a2a564.png" data-original-src="https://miro.medium.com/v2/resize:fit:450/format:webp/1*wKVktwNii9-FDYW0ayZWDg.png"/></div></div><p class="na nb gj gh gi nc nd bd b be z dk translated">另一个假设，m-中位数。作者图片</p></figure><p id="fad9" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kh ir">如何计算Wilcoxon符号秩检验统计量:</strong></p><ol class=""><li id="5936" class="ng nh iq kh b ki kj kl km ko ni ks nj kw nk la nl nm nn no bi translated">对于每一对观测值，计算差值，并保留其绝对值和符号</li><li id="6186" class="ng nh iq kh b ki np kl nq ko nr ks ns kw nt la nl nm nn no bi translated">将绝对值从最小到最大排序，并按顺序排列。</li><li id="e95e" class="ng nh iq kh b ki np kl nq ko nr ks ns kw nt la nl nm nn no bi translated">最后，计算测试统计数据:</li></ol><figure class="mp mq mr ms gt mt gh gi paragraph-image"><div class="gh gi ok"><img src="../Images/d60e0ea2afd2273d3496aa01f512f960.png" data-original-src="https://miro.medium.com/v2/resize:fit:632/0*ZT7e82zhH-S1egPV"/></div><p class="na nb gj gh gi nc nd bd b be z dk translated">作者图片</p></figure><p id="f598" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">4.w具有已知的分布。如果n大于20，那么它就是近似正态分布的。因此，我们可以测量在零假设下观察到它的概率，从而获得显著性水平。</p><blockquote class="ol om on"><p id="61d5" class="kf kg oo kh b ki kj jr kk kl km ju kn op kp kq kr oq kt ku kv or kx ky kz la ij bi translated">公式背后的一点直觉:</p><p id="8f9d" class="kf kg oo kh b ki kj jr kk kl km ju kn op kp kq kr oq kt ku kv or kx ky kz la ij bi translated">如果中值差是0，那么一半符号应该是正的，一半应该是负的，并且符号不应该与等级相关。如果中值差不为零，那么W会很大。</p></blockquote><h1 id="3d72" class="lr ls iq bd lt lu os lw lx ly ot ma mb jw ou jx md jz ov ka mf kc ow kd mh mi bi translated">对所有案例和每个数据集使用引导。</h1><p id="438e" class="pw-post-body-paragraph kf kg iq kh b ki mj jr kk kl mk ju kn ko ml kq kr ks mm ku kv kw mn ky kz la ij bi translated">第二个错误是一直使用自举。我见过很多次，为了确保我们可以在这种情况下使用自举，人们甚至不需要一些初步的操作就可以将自举应用于每个数据集。</p><p id="07b3" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">应用引导的主要假设是:</p><blockquote class="ol om on"><p id="da6c" class="kf kg oo kh b ki kj jr kk kl km ju kn op kp kq kr oq kt ku kv or kx ky kz la ij bi translated"><strong class="kh ir">样本应代表从中抽取样本的人群</strong></p></blockquote><p id="1516" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果我们的数据样本有偏差，不能很好地代表我们的总体，我们的自举统计也会受到影响，也会有偏差。这就是为什么我们应该衡量不同人群和细分市场的比例。</p><p id="8bb9" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果在我们的数据样本中只有女性，但是在我们的整个客户数据库中，性别是平均分布的，我们不能在这里应用bootstrapping。</p><blockquote class="ol om on"><p id="b379" class="kf kg oo kh b ki kj jr kk kl km ju kn op kp kq kr oq kt ku kv or kx ky kz la ij bi translated"><strong class="kh ir"> <em class="iq">好的做法是比较我们整个人群和数据集之间的所有主要细分市场。</em> </strong></p></blockquote><h1 id="1e09" class="lr ls iq bd lt lu os lw lx ly ot ma mb jw ou jx md jz ov ka mf kc ow kd mh mi bi translated">对于I类和II类错误，请始终使用默认值。</h1><p id="bebb" class="pw-post-body-paragraph kf kg iq kh b ki mj jr kk kl mk ju kn ko ml kq kr ks mm ku kv kw mn ky kz la ij bi translated">最后，但并非最不重要的是为实验选择正确的参数。在95%的情况下，95%的数据分析师/科学家，95%的公司使用默认值=&gt; 5 %的I型错误率和20%的II型错误率(或80%的检验功效)。</p><p id="622f" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">为什么我们不能选择0%的I类错误率和0%的II类错误率呢？</p><blockquote class="ol om on"><p id="d838" class="kf kg oo kh b ki kj jr kk kl km ju kn op kp kq kr oq kt ku kv or kx ky kz la ij bi translated">这不可避免地导致我们必须收集无限量的样本，我们的实验将永远持续下去。</p></blockquote><p id="8572" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这肯定不是我们要找的。这就是为什么我们必须在我们需要获得的样本数量和我们的错误率之间进行妥协。</p><p id="855c" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我鼓励人们考虑你的产品的所有可能的规格。最方便的方法是创建下表，并与产品经理和产品负责人讨论。</p><figure class="mp mq mr ms gt mt gh gi paragraph-image"><div role="button" tabindex="0" class="mu mv di mw bf mx"><div class="gh gi ox"><img src="../Images/92dacb56323c09aa62b2371a48e99929.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*k_RK7jTbZYixP5beuG3HEQ.png"/></div></div><p class="na nb gj gh gi nc nd bd b be z dk translated">典型的决策表。MDE——最小可检测效应。作者图片</p></figure><p id="d1c2" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">对于网飞来说，即使1%的MDE也能带来可观的利润，但对于小型创业公司来说，情况并非如此。对于谷歌来说，涉及数千万人的实验活动绝对是轻而易举的事情，因此最好将你的打字错误率设置为0.1 %，并对你的结果更有信心。</p></div><div class="ab cl lk ll hu lm" role="separator"><span class="ln bw bk lo lp lq"/><span class="ln bw bk lo lp lq"/><span class="ln bw bk lo lp"/></div><div class="ij ik il im in"><h1 id="9b17" class="lr ls iq bd lt lu lv lw lx ly lz ma mb jw mc jx md jz me ka mf kc mg kd mh mi bi translated">感谢你的阅读，不要害怕犯错和学习。这是进步的必由之路！</h1></div></div>    
</body>
</html>