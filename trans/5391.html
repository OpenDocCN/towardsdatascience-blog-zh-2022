<html>
<head>
<title>Start Using Python to Automate PLAXIS</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">开始使用 Python 来自动化 PLAXIS</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/start-using-python-to-automate-plaxis-35a5297321e7#2022-12-03">https://towardsdatascience.com/start-using-python-to-automate-plaxis-35a5297321e7#2022-12-03</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><h2 id="9dc4" class="io ip iq bd b dl ir is it iu iv iw dk ix translated" aria-label="kicker paragraph">PLAXIS 自动化系列</h2><div class=""/><div class=""><h2 id="c606" class="pw-subtitle-paragraph jw iz iq bd b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn dk translated">逐步走向自动化的指南</h2></div><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi ko"><img src="../Images/20771f9efb56427358c4958d17697a78.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*caTlEJc6bbFvbbs6MPvShg.jpeg"/></div></div><p class="la lb gj gh gi lc ld bd b be z dk translated">在<a class="ae le" href="https://unsplash.com/s/photos/python-programming?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上由<a class="ae le" href="https://unsplash.com/@hiteshchoudhary?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Hitesh Choudhary </a>拍摄的照片</p></figure><p id="ad18" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">PLAXIS 是一款有限元建模软件，岩土工程师在职业生涯的某个阶段肯定会遇到。在 PLAXIS 中模拟复杂的岩土工程问题可能具有挑战性，并且是耗时的模拟工作，经常涉及重复的任务。</p><blockquote class="mb mc md"><p id="4434" class="lf lg me lh b li lj ka lk ll lm kd ln mf lp lq lr mg lt lu lv mh lx ly lz ma ij bi translated"><em class="iq">作为一名工程师，我们总是想让枯燥的工作自动化，让精彩的工作变得精彩。</em></p></blockquote><p id="9aad" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">在这种情况下，编程，更确切地说是 Python 是自动化重复任务的最佳工具。</p><p id="9a51" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">Python 已经存在很多年了，但是直到最近才得到更大的社区的认可，因为它易于使用，应用范围广，并且得到了大型开源社区的支持。对于数据科学、工作流自动化和 web 开发来说，它是一种非常棒的编程语言。</p><p id="6d3f" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">PLAXIS 有一个开发良好的应用编程接口(API ),允许用户通过编程来操作 PLAXIS。更多细节可以在宾利官方网站上看到。</p><div class="mi mj gp gr mk ml"><a href="https://communities.bentley.com/products/geotech-analysis/w/wiki/45393/api-python-scripting---plaxis" rel="noopener  ugc nofollow" target="_blank"><div class="mm ab fo"><div class="mn ab mo cl cj mp"><h2 class="bd ja gy z fp mq fr fs mr fu fw iz bi translated">API / Python 脚本- PLAXIS</h2><div class="ms l"><h3 class="bd b gy z fp mq fr fs mr fu fw dk translated">本节包含 PLAXIS 远程脚本服务器 API 和的使用示例和背景信息。</h3></div><div class="mt l"><p class="bd b dl z fp mq fr fs mr fu fw dk translated">communities.bentley.com</p></div></div><div class="mu l"><div class="mv l mw mx my mu mz ky ml"/></div></div></a></div><h1 id="798f" class="na nb iq bd nc nd ne nf ng nh ni nj nk kf nl kg nm ki nn kj no kl np km nq nr bi translated">目标</h1><p id="c90c" class="pw-post-body-paragraph lf lg iq lh b li ns ka lk ll nt kd ln lo nu lq lr ls nv lu lv lw nw ly lz ma ij bi translated">尽管 PLAXIS Python API 已经开发了很长时间，但是仍然缺乏向岩土工程师介绍这种技术的完整指南。</p><p id="b60e" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">本教程假设读者没有编程经验，所以我将展示如何从头开始建立编程环境。</p><p id="c3e3" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated"><em class="me">免责声明</em></p><p id="33bc" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">已经有很多付费课程教工程师使用 PLAXIS 中内置的 Python 编辑器，我认为这已经相当成熟了。但我个人更喜欢用自己的编程环境写脚本，原因有以下三点:</p><ol class=""><li id="7da9" class="nx ny iq lh b li lj ll lm lo nz ls oa lw ob ma oc od oe of bi translated">一个开发良好的集成开发环境(IDE)对于编码来说更为用户友好，因为它会挑选错误的语法并识别错误，这对于初学者来说至关重要。</li><li id="e443" class="nx ny iq lh b li og ll oh lo oi ls oj lw ok ma oc od oe of bi translated">内置的 Python 编辑器在导入用户开发的模块时灵活性较差。将来当你有更多的编程经验时，你会发现很多时候我们需要把我们写的函数分离出来作为一个模块，这样我们的脚本就不那么忙了。这在 IDE 中可以很好的管理。</li><li id="beb3" class="nx ny iq lh b li og ll oh lo oi ls oj lw ok ma oc od oe of bi translated">我们不想把剧本留给自己，而是和同事们分享。IDE 提供了与 GitHub、GitLab 等代码共享平台的完美集成。</li></ol><p id="2341" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">本教程的最终目标是向您展示如何使用 Python 脚本在 PLAXIS 2D 中创建您的第一个结构元素。这可以通过以下四个步骤来完成。</p><ol class=""><li id="1534" class="nx ny iq lh b li lj ll lm lo nz ls oa lw ob ma oc od oe of bi translated">安装集成开发环境(IDE)</li><li id="9f01" class="nx ny iq lh b li og ll oh lo oi ls oj lw ok ma oc od oe of bi translated">激活 PLAXIS 环境</li><li id="f662" class="nx ny iq lh b li og ll oh lo oi ls oj lw ok ma oc od oe of bi translated">连接到 PLAXIS API</li><li id="ca07" class="nx ny iq lh b li og ll oh lo oi ls oj lw ok ma oc od oe of bi translated">创建第一个板元素</li></ol><p id="1313" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">最后，本教程假设读者使用的是 Windows 操作系统，并且已经安装了 PLAXIS 2D V22。所以让我们开始吧！</p><h1 id="20bb" class="na nb iq bd nc nd ne nf ng nh ni nj nk kf nl kg nm ki nn kj no kl np km nq nr bi translated">步骤 1:安装集成开发环境(IDE)</h1><p id="59a5" class="pw-post-body-paragraph lf lg iq lh b li ns ka lk ll nt kd ln lo nu lq lr ls nv lu lv lw nw ly lz ma ij bi translated">IDE 是一个软件应用程序，它为编程提供了全面的工具，通常由源代码编辑器、构建自动化工具和调试器组成。</p><p id="dbf6" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">IDE 有各种各样的选项，如 Visual Studio Code (VS Code)、PyCharm、Jupyter Notebook 等，这些选项在功能上没有区别，完全取决于用户对 IDE 的选择偏好。本指令演示了 VS 代码的安装。</p><p id="3a12" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">按照以下说明安装 Visual Studio 代码(VS 代码):</p><p id="5219" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">为 Windows 下载最新的 VS 代码:<a class="ae le" href="https://code.visualstudio.com/download" rel="noopener ugc nofollow" target="_blank">https://code.visualstudio.com/download</a></p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi ol"><img src="../Images/17a615ceb995c3a78098cb706ec824fa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*RaZFJaS1jEQpV0W4aEil8w.png"/></div></div><p class="la lb gj gh gi lc ld bd b be z dk translated">作者截图</p></figure><p id="539f" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">遵循安装向导，并检查如下所示的选项。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi om"><img src="../Images/2c9ef796ffabab3a6fabc590fad7209c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*eYzytsSVXquVJ7SktJkIYg.png"/></div></div><p class="la lb gj gh gi lc ld bd b be z dk translated">作者截图</p></figure><p id="c1b4" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">安装完成后，在桌面上打开 VS 代码。您将看到以下界面。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi on"><img src="../Images/3ce535454e15b17483698b26938f03a6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2WuqlKRlU-V8L70ljt3yZw.png"/></div></div><p class="la lb gj gh gi lc ld bd b be z dk translated">作者截图自 VS 代码</p></figure><p id="b683" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">右键单击资源管理器-&gt;将文件夹添加到工作区，在资源管理器中添加您的工作文件夹…</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi oo"><img src="../Images/8691f008761e4f9d35dbb7d8076ffea4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*eMfnNLDwO2LcjgYfevWmig.png"/></div></div><p class="la lb gj gh gi lc ld bd b be z dk translated">作者截图自 VS 代码</p></figure><p id="3462" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">您现在已经完成了 VS 代码的设置，并准备开始编码了！</p><h1 id="ed24" class="na nb iq bd nc nd ne nf ng nh ni nj nk kf nl kg nm ki nn kj no kl np km nq nr bi translated">步骤 2:激活 PLAXIS 环境</h1><p id="3037" class="pw-post-body-paragraph lf lg iq lh b li ns ka lk ll nt kd ln lo nu lq lr ls nv lu lv lw nw ly lz ma ij bi translated">一旦建立了虚拟环境和 IDE，就可以开始在 IDE 中编写 Python 脚本了。</p><p id="4e83" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">要编写 Python 脚本，应遵循以下过程:</p><ul class=""><li id="bdf9" class="nx ny iq lh b li lj ll lm lo nz ls oa lw ob ma op od oe of bi translated">打开 IDE 终端</li><li id="39ec" class="nx ny iq lh b li og ll oh lo oi ls oj lw ok ma op od oe of bi translated">直接到您的首选工作文件夹(在终端中)</li><li id="92a4" class="nx ny iq lh b li og ll oh lo oi ls oj lw ok ma op od oe of bi translated">激活 PLAXIS Python 环境</li><li id="fca1" class="nx ny iq lh b li og ll oh lo oi ls oj lw ok ma op od oe of bi translated">创造。文件夹中的 py 文件</li></ul><h2 id="aca0" class="oq nb iq bd nc or os dn ng ot ou dp nk lo ov ow nm ls ox oy no lw oz pa nq iw bi translated">打开 IDE 终端</h2><p id="0d50" class="pw-post-body-paragraph lf lg iq lh b li ns ka lk ll nt kd ln lo nu lq lr ls nv lu lv lw nw ly lz ma ij bi translated">单击底部菜单栏中的“警告”图标:</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi pb"><img src="../Images/a48927fcdba27961235a69c2414b30cc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*au_sQ1KHAnLBqKGk6_Ulhw.gif"/></div></div><p class="la lb gj gh gi lc ld bd b be z dk translated">作者截图自 VS 代码</p></figure><p id="970c" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">您将看到 Shell 窗口出现:</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi pc"><img src="../Images/60e63ff073a75c28235fe9dbf1d8f931.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*E37iIekJ9f6Sy45shCp8gA.png"/></div></div><p class="la lb gj gh gi lc ld bd b be z dk translated">作者截图自 VS 代码</p></figure><p id="cc93" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">按照指示，转到顶部菜单栏中的“终端”选项卡。您应该看到您在工作文件夹中。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi pd"><img src="../Images/6930c6d7f27c69aade3b5e24974dc661.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1-_uHxyDUSpTlX-rwIXTqw.png"/></div></div><p class="la lb gj gh gi lc ld bd b be z dk translated">作者截图自 VS 代码</p></figure><h2 id="51d6" class="oq nb iq bd nc or os dn ng ot ou dp nk lo ov ow nm ls ox oy no lw oz pa nq iw bi translated">直接到您的首选工作文件夹</h2><p id="27fe" class="pw-post-body-paragraph lf lg iq lh b li ns ka lk ll nt kd ln lo nu lq lr ls nv lu lv lw nw ly lz ma ij bi translated">如果不是正确的工作文件夹。您可以键入:</p><p id="877f" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">cd <your work="" folder="" path=""/></p><p id="3ba0" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">例如，我目前在当前项目文件夹，我想定位到 00 _ 数字化-&gt;01_Python-FE。文件夹路径是:</p><p id="50cc" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">c:\ Users \ phtsang \ Desktop \ Current _ Projects \ 00 _ digital isation \ 01 _ Python-FE</p><p id="f5be" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">在 IDE 终端中:</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi pe"><img src="../Images/b935578c68a9d68053dfe825420bcf80.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*UQGGOI1Jk5Qiu-N5CQGuaQ.png"/></div></div><p class="la lb gj gh gi lc ld bd b be z dk translated">作者截图自 VS 代码</p></figure><p id="02ff" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">它应该显示正确的文件夹名称，如上所示。</p><h2 id="320f" class="oq nb iq bd nc or os dn ng ot ou dp nk lo ov ow nm ls ox oy no lw oz pa nq iw bi translated">激活 PLAXIS Python 环境</h2><p id="cf3a" class="pw-post-body-paragraph lf lg iq lh b li ns ka lk ll nt kd ln lo nu lq lr ls nv lu lv lw nw ly lz ma ij bi translated">要激活 PLAXIS Python 环境，我们需要选择 PLAXIS 内置的 Python 解释器，它包含操作 PLAXIS 所需的所有功能。安装 PLAXIS 时，python 解释器会自动安装。</p><p id="531a" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">Python 解释器的位置:</p><p id="c9c9" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">c:\ program data \ Bentley \ geography \ PLAXIS Python 发行版 V2\python\python.exe</p><p id="85e3" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">要选择特定的环境，请使用命令面板中的 Python: Select Interpreter 命令(Ctrl+Shift+P)。点击“输入解释器路径…”，然后在上述位置浏览 python.exe。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi pf"><img src="../Images/6395b79ad383a2fdcf7fc95ec5a2a4dc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*VAB38hQ2RM7R1lZcRJ9aFw.png"/></div></div><p class="la lb gj gh gi lc ld bd b be z dk translated">作者截图自 VS 代码</p></figure><p id="58e3" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">在“终端”选项卡中，从下拉列表中选择命令提示符，如下图所示。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi pg"><img src="../Images/fba8f51e766da88d2a63681a29806e20.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-Gd0umGDWTkRdrsCavTM-w.png"/></div></div><p class="la lb gj gh gi lc ld bd b be z dk translated">作者截图自 VS 代码</p></figure><p id="e84e" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">如果环境被成功激活，您应该在工作目录前面看到(PLAXIS)。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi ph"><img src="../Images/f445bdb16fffde4baca0f727c1df73e6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Kq4X7TScw77BUUJgDv6WGQ.png"/></div></div><p class="la lb gj gh gi lc ld bd b be z dk translated">作者截图自 VS 代码</p></figure><h2 id="8605" class="oq nb iq bd nc or os dn ng ot ou dp nk lo ov ow nm ls ox oy no lw oz pa nq iw bi translated">创造。文件夹中的 py 文件</h2><p id="69b4" class="pw-post-body-paragraph lf lg iq lh b li ns ka lk ll nt kd ln lo nu lq lr ls nv lu lv lw nw ly lz ma ij bi translated">单击新建文件图标:</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div class="gh gi pi"><img src="../Images/a0bf4ad8b8a700d753043abce3f434a1.png" data-original-src="https://miro.medium.com/v2/resize:fit:618/format:webp/1*MjZqNKlEwhmVjIENx24dWg.png"/></div><p class="la lb gj gh gi lc ld bd b be z dk translated">作者截图自 VS 代码</p></figure><p id="a5fc" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">创造。py 文件如下:</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div class="gh gi pj"><img src="../Images/a112bce6f46be90e2457cb668c2c1456.png" data-original-src="https://miro.medium.com/v2/resize:fit:674/format:webp/1*ng0R31NAl3dLE9APbTglWQ.png"/></div><p class="la lb gj gh gi lc ld bd b be z dk translated">作者截图自 VS 代码</p></figure><p id="1c04" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">下一节我们将开始连接 PLAXIS API。</p><h1 id="4dee" class="na nb iq bd nc nd ne nf ng nh ni nj nk kf nl kg nm ki nn kj no kl np km nq nr bi translated">步骤 3:连接 PLAXIS API</h1><p id="ea14" class="pw-post-body-paragraph lf lg iq lh b li ns ka lk ll nt kd ln lo nu lq lr ls nv lu lv lw nw ly lz ma ij bi translated">我将首先创建一个空的 python 脚本，并将其命名为“create_plate.py ”,如下所示。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi pk"><img src="../Images/ba5b1fd1d9dad6b1673bd158b37d824e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9Ve1MUdVWOu7F3zvYPVfsQ.png"/></div></div><p class="la lb gj gh gi lc ld bd b be z dk translated">作者截图自 VS 代码</p></figure><p id="af76" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">之后，我们将下面的代码写入 python 文件。这里有三件事:</p><ol class=""><li id="cfca" class="nx ny iq lh b li lj ll lm lo nz ls oa lw ob ma oc od oe of bi translated">从 PLAXIS Python 环境导入模块。为了用 Python 脚本操作 PLAXIS，我们需要使用 PLAXIS 开发的函数(在编程方面更通常称为方法)。我们导入的模块名为“plxscripting.east”</li><li id="fe9f" class="nx ny iq lh b li og ll oh lo oi ls oj lw ok ma oc od oe of bi translated">打开 2D 桌面应用程序。如果采用默认安装路径，Plaxis2DXInput.exe 的路径应该与下面列出的路径相同。如果不是这样，只需将路径更改为正确的目录。端口号和密码可以保持默认，但您可以选择任何您想要的值。</li><li id="3f8d" class="nx ny iq lh b li og ll oh lo oi ls oj lw ok ma oc od oe of bi translated">使用预定义的端口号和密码启动 PLAXIS 脚本服务器。</li></ol><pre class="kp kq kr ks gt pl pm pn bn po pp bi"><span id="b503" class="pq nb iq pm b be pr ps l pt pu">from plxscripting.easy import *<br/>import subprocess, time<br/><br/>PLAXIS_PATH = r'C:\Program Files\Bentley\Geotechnical\PLAXIS 2D CONNECT Edition V22\\Plaxis2DXInput.exe'  # Specify PLAXIS path on server.<br/><br/>PORT_i = 10000  # Define a port number.<br/>PORT_o = 10001<br/><br/>PASSWORD = 'SxDBR&lt;TYKRAX834~'  # Define a password (up to user choice).<br/><br/>subprocess.Popen([PLAXIS_PATH, f'--AppServerPassword={PASSWORD}', f'--AppServerPort={PORT_i}'], shell=False)  # Start the PLAXIS remote scripting service.<br/><br/>time.sleep(5)  # Wait for PLAXIS to boot before sending commands to the scripting service.<br/><br/><br/># Start the scripting server.<br/><br/>s_i, g_i = new_server('localhost', PORT_i, password=PASSWORD)<br/>s_o, g_o = new_server('localhost', PORT_o, password=PASSWORD)<br/><br/><br/>s_i.new()<br/><br/>g_i.gotostructures()</span></pre><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi pv"><img src="../Images/21efbf0ac61d93751e0077690f582aa7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*lYx7NQts4aGK3G05WIKDmg.png"/></div></div><p class="la lb gj gh gi lc ld bd b be z dk translated">作者截图自 VS 代码</p></figure><p id="8575" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">为了测试上面的代码是否正常工作，我们将在终端中运行“create_plate.py ”,如下所示。输入“python create_plate.py ”,然后单击输入。</p><pre class="kp kq kr ks gt pl pm pn bn po pp bi"><span id="790e" class="pq nb iq pm b be pr ps l pt pu">(PLAXIS) C:\Users\phtsang\Desktop\PLAXIS_V22\Script&gt;python create_plate.py</span></pre><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi pw"><img src="../Images/ccc1a13185ab256e2cf73df6faca5402.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*QHQJKZJ6zYWzyIWqG4Sl8w.png"/></div></div><p class="la lb gj gh gi lc ld bd b be z dk translated">作者截图自 VS 代码</p></figure><p id="83cf" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">PLAXIS 2D 应用程序应该会自动打开。如果服务器配置正确，您应该会看到如下所示的“服务器活动”。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi px"><img src="../Images/7c57e9f1d49c56c4c1b4a4685194d1f6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1X-EDQGPLlxU_dg4rQh03w.png"/></div></div><p class="la lb gj gh gi lc ld bd b be z dk translated">作者截图自 PLAXIS</p></figure><p id="3ab6" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">既然我们已经连接到 PLAXIS API 服务器，那么我们可以使用 Python 脚本在 PLAXIS 中创建一个 plate 元素。</p><h1 id="aaed" class="na nb iq bd nc nd ne nf ng nh ni nj nk kf nl kg nm ki nn kj no kl np km nq nr bi translated">步骤 4:创建第一个板元素</h1><p id="b7b0" class="pw-post-body-paragraph lf lg iq lh b li ns ka lk ll nt kd ln lo nu lq lr ls nv lu lv lw nw ly lz ma ij bi translated">在这部分教程中，我们的目标是创建一个具有正负界面的板单元。然后，我们将“混凝土”材料分配给元素。</p><p id="86ad" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">首先，我们定义材料名称和几何图形。我计划创建一条从(-10，0)到(10，0)的直线。方括号[ ]在 python 中被称为<strong class="lh ja"> list </strong>，是一种非常常见的存储值的数据类型。若要访问存储在列表中的值，请使用以下语法调用它:</p><p id="3acb" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">如果我想访问第一个点的坐标，我使用</p><p id="8171" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">x 坐标= -10 =第一个点[0]</p><p id="9a0c" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">y 坐标= 10 =第一个点[1]</p><p id="c691" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">这里的 0 和 1 称为索引，它总是从 0 开始。</p><p id="281c" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">然后，我们创建材料并将其指定给板材材料列表。使用命令“g_i.platemat()”创建板材。下面的代码是将 plate 对象分配给一个列表。</p><pre class="kp kq kr ks gt pl pm pn bn po pp bi"><span id="03ce" class="pq nb iq pm b be pr ps l pt pu">material=['Concrete']<br/>first_point=[-10,0]<br/>second_point=[10,0]<br/><br/># Create material<br/>for i in range(len(material)):<br/>    g_i.platemat('Identification',material[i])<br/><br/><br/>platematerials = [mat for mat in g_i.Materials[:] if mat.TypeName.value == 'PlateMat']</span></pre><p id="93df" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">然后，我们根据预定义的坐标用“g_i.plate()”创建板单元。</p><pre class="kp kq kr ks gt pl pm pn bn po pp bi"><span id="5dc5" class="pq nb iq pm b be pr ps l pt pu">plate=g_i.plate(<br/>    (first_point[0],first_point[1]),<br/>    (second_point[0],second_point[1]),<br/>    )<br/>plate1=plate[-1]</span></pre><p id="912f" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">然后，使用“g_i.posinterface()”和“g_i.neginterface()”创建接口。</p><pre class="kp kq kr ks gt pl pm pn bn po pp bi"><span id="f8f7" class="pq nb iq pm b be pr ps l pt pu">plate2=plate[-2]<br/>g_i.posinterface(plate2)<br/>g_i.neginterface(plate2)</span></pre><p id="1af0" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">最后，将“混凝土”设置为板元素。</p><pre class="kp kq kr ks gt pl pm pn bn po pp bi"><span id="da45" class="pq nb iq pm b be pr ps l pt pu">plate1.setmaterial(platematerials[0])</span></pre><p id="a048" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">如果您重新运行该脚本，您将看到在 PLAXIS 中创建了以下内容。如您所见，创建了“混凝土”材质，并将其分配给我们创建的板元素。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi on"><img src="../Images/3f7bd298071a8e3e8cb2c49b59a46207.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kjEg4cJruxtvhhHlxjaywA.png"/></div></div><p class="la lb gj gh gi lc ld bd b be z dk translated">作者截图自 PLAXIS</p></figure><p id="c29b" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">恭喜你！您已经使用 Python 在 PLAXIS 中创建了第一个 plate 元素！</p><h1 id="4eb2" class="na nb iq bd nc nd ne nf ng nh ni nj nk kf nl kg nm ki nn kj no kl np km nq nr bi translated">奖金</h1><p id="dbb8" class="pw-post-body-paragraph lf lg iq lh b li ns ka lk ll nt kd ln lo nu lq lr ls nv lu lv lw nw ly lz ma ij bi translated">当然，我们经常需要在 PLAXIS 中创建不止一个结构元素。在本节中，我们的目标是创建四个板元素，它们用以下坐标形成一个矩形:</p><ul class=""><li id="1ea0" class="nx ny iq lh b li lj ll lm lo nz ls oa lw ob ma op od oe of bi">(-10,0)</li><li id="d0a7" class="nx ny iq lh b li og ll oh lo oi ls oj lw ok ma op od oe of bi">(-10,10)</li><li id="c614" class="nx ny iq lh b li og ll oh lo oi ls oj lw ok ma op od oe of bi">(10,10)</li><li id="28d8" class="nx ny iq lh b li og ll oh lo oi ls oj lw ok ma op od oe of bi">(10,0)</li></ul><p id="e569" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">我们需要首先创建一个列表(称之为“df_plate”)来指定每个板元素的坐标。第一点和第二点分别存储为(x1，y1)和(x2，y2)。在这个列表中，我使用了一种新的数据类型，叫做<strong class="lh ja"> Dictionary </strong>，这在 Python 中非常常用。在下一个教程中会有更多的介绍。</p><pre class="kp kq kr ks gt pl pm pn bn po pp bi"><span id="c490" class="pq nb iq pm b be pr ps l pt pu">df_plate=[{'x1':-10,'y1':0,'x2':10,'y2':0},{'x1':-10,'y1':10,'x2':-10,'y2':0},{'x1':-10,'y1':10,'x2':10,'y2':10},{'x1':10,'y1':10,'x2':10,'y2':0}]</span></pre><p id="d51a" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">由于这次我们需要访问一个列表中的多个元素，我们将利用一个叫做<strong class="lh ja">的概念来循环</strong>。它允许我们遍历元素并相应地在 PLAXIS 中创建点。这可以通过下面的代码来完成:</p><pre class="kp kq kr ks gt pl pm pn bn po pp bi"><span id="9e1b" class="pq nb iq pm b be pr ps l pt pu">for i in range(len(df_plate)):<br/>    plate=g_i.plate(<br/>        (df_plate[i]['x1'],df_plate[i]['y1']),<br/>        (df_plate[i]['x2'],df_plate[i]['y2']),<br/>        )<br/>    plate1=plate[-1]</span></pre><p id="6c4b" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">您的最终脚本应该是这样的:</p><pre class="kp kq kr ks gt pl pm pn bn po pp bi"><span id="8c3b" class="pq nb iq pm b be pr ps l pt pu"># Plate<br/>#Material name and geometry<br/>material=['Concrete']<br/><br/>df_plate=[{'x1':-10,'y1':0,'x2':10,'y2':0},{'x1':-10,'y1':10,'x2':-10,'y2':0},{'x1':-10,'y1':10,'x2':10,'y2':10},{'x1':10,'y1':10,'x2':10,'y2':0}]<br/><br/># Create material<br/>for i in range(len(material)):<br/>    g_i.platemat('Identification',material[i])<br/><br/>platematerials = [mat for mat in g_i.Materials[:] if mat.TypeName.value == 'PlateMat']<br/><br/>#Create Plate<br/>for i in range(len(df_plate)):<br/>    plate=g_i.plate(<br/>        (df_plate[i]['x1'],df_plate[i]['y1']),<br/>        (df_plate[i]['x2'],df_plate[i]['y2']),<br/>        )<br/>    plate1=plate[-1]<br/><br/>#Create Interface<br/><br/>    plate2=plate[-2]<br/>    g_i.posinterface(plate2)<br/>    g_i.neginterface(plate2)<br/>#Set Material<br/><br/>    plate1.setmaterial(platematerials[0])</span></pre><p id="5977" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">如果您重新运行该脚本，您将看到在 PLAXIS 中创建了以下内容。现在，您可以使用 Python 脚本创建多个元素。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi on"><img src="../Images/8f3c61541b23fb40c46be16e32dbd0de.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WuEMtXvVGn59JvsDp0pNTg.png"/></div></div><p class="la lb gj gh gi lc ld bd b be z dk translated">作者截图自 PLAXIS</p></figure><h1 id="d183" class="na nb iq bd nc nd ne nf ng nh ni nj nk kf nl kg nm ki nn kj no kl np km nq nr bi translated">结论</h1><p id="994a" class="pw-post-body-paragraph lf lg iq lh b li ns ka lk ll nt kd ln lo nu lq lr ls nv lu lv lw nw ly lz ma ij bi translated">关于用 Python 自动化 PLAXIS 的第一篇教程到此结束。到目前为止，您应该能够使用 Python 脚本在 PLAXIS 中创建结构化元素。以后，我会继续发布在 PLAXIS 中使用 Python 的教程。不仅如此，我还热衷于分享如何使用 Python 来自动化工程中枯燥的工作流程的知识。</p><p id="a0e8" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">如果你有兴趣了解更多关于 Python、PLAXIS 和工作流自动化的知识，欢迎关注我的页面。</p></div><div class="ab cl py pz hu qa" role="separator"><span class="qb bw bk qc qd qe"/><span class="qb bw bk qc qd qe"/><span class="qb bw bk qc qd"/></div><div class="ij ik il im in"><p id="7d76" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">你可以在我的<a class="ae le" href="https://github.com/philiptsangeic/PLAXIS_Python_Automation/blob/master/create_plate.py" rel="noopener ugc nofollow" target="_blank"> Github </a>上找到这篇文章中演示的代码。</p></div></div>    
</body>
</html>