<html>
<head>
<title>Create a Web App from Your Jupyter Notebook with Mercury</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Mercury从您的Jupyter笔记本中创建一个Web应用程序</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/create-a-web-app-from-your-jupyter-notebook-with-mercury-21239b7abb37#2022-02-04">https://towardsdatascience.com/create-a-web-app-from-your-jupyter-notebook-with-mercury-21239b7abb37#2022-02-04</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="8b93" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">您可以将笔记本发布为交互式web应用程序，可以使用也可以不使用代码</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/e61855b1f5841c99be9f91eae09b6853.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1J-8rWmEpD6_jX7TfZ3Nag.png"/></div></div></figure><p id="9a00" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">我们都使用Jupyter笔记本来分析和创建数据的可视化，不是吗？这是一个很好的工具。</p><p id="ba5d" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">当然，您也可以通过简单地向您的同事发送一份副本来分享它们。但是对于那些不关心你的代码但对你的结果感兴趣的人来说，交互式应用可能是更好的工具。</p><p id="060d" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">这就是来自<em class="lq"> mljar </em>的水星所承诺的。只需在笔记本的开头添加一个新的单元格，你就可以让Mercury将代码转换成可以部署到AWS、Heroku或任何地方的web应用程序。</p><p id="91f2" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">它还允许你在你的笔记本中加入互动元素，比如滑块，下拉菜单。</p><p id="ca31" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">下面是我在几分钟内创建的一个简单的web应用程序的截图。正如你所见，它包括一个互动滑块。这个应用程序非常简单:它加载一组天气数据，并绘制一个特定年份的月最高气温图表——滑块允许你选择年份。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi lr"><img src="../Images/88fd71a7d8a94acb0ea705d451f530d0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*uRYZ0QDl3xbyJhMoMAr_tg.png"/></div></div><p class="ls lt gj gh gi lu lv bd b be z dk translated">作者截图</p></figure><p id="ad87" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">更复杂的应用可以在<a class="ae lw" href="https://mljar.com/mercury/" rel="noopener ugc nofollow" target="_blank"> Mercury网站</a>上找到。以下是一些例子:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi lx"><img src="../Images/6eb54f2e01165b8a6c40bb9cf451b94a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*Yvuyfq6oPxAQ4dnN.png"/></div></div><p class="ls lt gj gh gi lu lv bd b be z dk translated">图片来自Mercury Github repo —经mljar许可使用，AGPLv3许可证</p></figure><p id="f4a0" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">但是我将介绍如何创建我自己创建的简单web应用程序。它主要是一个非常简单的Jupyter笔记本，由六个电池组成。</p><h2 id="fa28" class="ly lz it bd ma mb mc dn md me mf dp mg ld mh mi mj lh mk ml mm ll mn mo mp mq bi translated">恋恋笔记本</h2><p id="6384" class="pw-post-body-paragraph ku kv it kw b kx mr ju kz la ms jx lc ld mt lf lg lh mu lj lk ll mv ln lo lp im bi translated">第一个是包含一些YAML代码的<em class="lq">原始</em>单元格，这些代码告诉Mercury要做什么以及要包含哪些交互。前三行定义了<code class="fe mw mx my mz b">title</code>、a <code class="fe mw mx my mz b">description</code>并将<code class="fe mw mx my mz b">show-code</code>设置为<code class="fe mw mx my mz b">False</code>。设置为false意味着单元格中的代码在最终的web应用程序中不可见。</p><pre class="kj kk kl km gt na mz nb nc aw nd bi"><span id="3f0a" class="ly lz it mz b gy ne nf l ng nh">---<br/>title: Exploring London Weather Data<br/>description: How to use mercury to create a web app<br/>show-code: False<br/>params:<br/>   year:<br/>      input: slider<br/>      label: Select year<br/>      value: 1952<br/>      min: 1952<br/>      max: 2018<br/>---</span></pre><p id="918f" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">最后几行定义了参数。<code class="fe mw mx my mz b">year</code>是一个将出现在笔记本中的变量，后面的几行定义了一个滑块，用于设置<code class="fe mw mx my mz b">year</code>的值。我认为它们是不言自明的。请注意，单元格以线<code class="fe mw mx my mz b">---.</code>开始和结束</p><p id="72fe" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">第二个单元格定义了变量<code class="fe mw mx my mz b">year</code>并赋予它一个值。第一个单元格中引用的任何变量都必须像这样在一个单元格中一起定义。</p><pre class="kj kk kl km gt na mz nb nc aw nd bi"><span id="23fc" class="ly lz it mz b gy ne nf l ng nh">year = 1962</span></pre><p id="e716" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">下一个单元格是标记标题。</p><pre class="kj kk kl km gt na mz nb nc aw nd bi"><span id="16ac" class="ly lz it mz b gy ne nf l ng nh"><strong class="mz iu"># Exploring London Weather Data</strong></span></pre><p id="0b0b" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">然后我们导入几个库。</p><pre class="kj kk kl km gt na mz nb nc aw nd bi"><span id="d35f" class="ly lz it mz b gy ne nf l ng nh">import numpy as np<br/>import pandas as pd</span></pre><p id="f7c0" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">和一些数据。</p><pre class="kj kk kl km gt na mz nb nc aw nd bi"><span id="e5fe" class="ly lz it mz b gy ne nf l ng nh">weather=pd.read_csv('heathrowDataFiltered.csv')</span></pre><p id="6107" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">然后我们绘制一个图表，根据<code class="fe mw mx my mz b">year</code>的值过滤数据。我们还打印了介绍图表的消息。</p><pre class="kj kk kl km gt na mz nb nc aw nd bi"><span id="0a9e" class="ly lz it mz b gy ne nf l ng nh">weather[weather['Year']==year].plot(y='Tmax', x='Month',    <br/>   legend=False)</span><span id="3485" class="ly lz it mz b gy ni nf l ng nh">print(f"Monthly maximum temperatures for {year}")</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nj"><img src="../Images/201d5717b4c729f8ae93183fbb132e10.png" data-original-src="https://miro.medium.com/v2/resize:fit:1018/format:webp/1*K6mRXrzF4IG78SbE15hOCw.png"/></div><p class="ls lt gj gh gi lu lv bd b be z dk translated">作者图片</p></figure><p id="4aa8" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">运行笔记本将得到1962年的月最高温度图，这是我们在开始时设置的值。</p><p id="ca8c" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">但是我们将创建的web应用程序将允许我们选择我们感兴趣的年份。</p><p id="37af" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">那么，我们该怎么做呢？</p><h2 id="8216" class="ly lz it bd ma mb mc dn md me mf dp mg ld mh mi mj lh mk ml mm ll mn mo mp mq bi translated">汞</h2><p id="0667" class="pw-post-body-paragraph ku kv it kw b kx mr ju kz la ms jx lc ld mt lf lg lh mu lj lk ll mv ln lo lp im bi translated">首先，您需要安装mercury:</p><pre class="kj kk kl km gt na mz nb nc aw nd bi"><span id="6e82" class="ly lz it mz b gy ne nf l ng nh">pip install mljar-mercury</span></pre><p id="0752" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">然后，您需要“添加”您的笔记本:在命令行中键入:</p><pre class="kj kk kl km gt na mz nb nc aw nd bi"><span id="e570" class="ly lz it mz b gy ne nf l ng nh">mercury add &lt;path_to_notebook&gt;</span></pre><p id="b4d3" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">最后，您运行它:</p><pre class="kj kk kl km gt na mz nb nc aw nd bi"><span id="aa5e" class="ly lz it mz b gy ne nf l ng nh">mercury runserver --runworker</span></pre><p id="cfc3" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">这将启动一个服务器，您的应用程序将在IP地址127.0.0.1:8000上运行。在网络浏览器中打开它，您会看到类似这样的内容:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nk"><img src="../Images/aa34d57f203c75d42e4bfaca51faaba6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rORiLw0rEVZHspSr7EGq0Q.png"/></div></div><p class="ls lt gj gh gi lu lv bd b be z dk translated">作者图片</p></figure><p id="c004" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">如果您添加了多个笔记本，它们都会显示在此处。单击要运行的应用程序的打开按钮，您将看到基于笔记本的应用程序。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi lr"><img src="../Images/88fd71a7d8a94acb0ea705d451f530d0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*uRYZ0QDl3xbyJhMoMAr_tg.png"/></div></div><p class="ls lt gj gh gi lu lv bd b be z dk translated">作者截图</p></figure><p id="7366" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">当应用程序运行时，它会显示图表；然后，您可以调整滑块并再次运行它，以查看所选年份的图表。</p></div><div class="ab cl nl nm hx nn" role="separator"><span class="no bw bk np nq nr"/><span class="no bw bk np nq nr"/><span class="no bw bk np nq"/></div><div class="im in io ip iq"><p id="2000" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">这是一个非常快速的水星运行，只向你展示了它的一些能力。在Mercury网站和Github repo 上有更多信息。例如，你可以包括一大堆输入控件，而不仅仅是滑块，Github README文档详细介绍了你可以使用的所有YAML命令，以及如何将你的应用程序部署到云上。这远远超出了我在这里可以涵盖的范围，所以你真的需要去看看。</p></div><div class="ab cl nl nm hx nn" role="separator"><span class="no bw bk np nq nr"/><span class="no bw bk np nq nr"/><span class="no bw bk np nq"/></div><div class="im in io ip iq"><p id="b34e" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">你可以在这里下载我的文件:<a class="ae lw" href="https://raw.githubusercontent.com/alanjones2/Alan-Jones-article-code/master/mercury/heathrowDataFiltered.csv" rel="noopener ugc nofollow" target="_blank">资料</a>，<a class="ae lw" href="https://raw.githubusercontent.com/alanjones2/Alan-Jones-article-code/master/mercury/heathrowdataMercury.ipynb" rel="noopener ugc nofollow" target="_blank">笔记本</a>。</p></div><div class="ab cl nl nm hx nn" role="separator"><span class="no bw bk np nq nr"/><span class="no bw bk np nq nr"/><span class="no bw bk np nq"/></div><div class="im in io ip iq"><p id="134f" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">一如既往地感谢阅读。如果你对围绕数据科学和可视化的编程思想感兴趣，我的<a class="ae lw" href="http://alanjones2.github.io" rel="noopener ugc nofollow" target="_blank">网页</a>上有更多的文章，或者你可以获得我偶尔的免费时事通讯，Substack上的<a class="ae lw" href="https://technofile.substack.com/" rel="noopener ugc nofollow" target="_blank"> Technofile </a>。</p></div></div>    
</body>
</html>