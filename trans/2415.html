<html>
<head>
<title>3 Rookie Mistakes to Avoid with Python Lists</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Python列表要避免的3个新手错误</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/3-rookie-mistakes-to-avoid-with-python-lists-625c0e8e57df#2022-05-26">https://towardsdatascience.com/3-rookie-mistakes-to-avoid-with-python-lists-625c0e8e57df#2022-05-26</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="6f9d" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">如何解决可能导致严重问题的小错误</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/773b8d725ad6e11679e93afda00de182.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*d2TP29cq0-PdY9nt"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">格伦·卡斯滕斯-彼得斯在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure><p id="5d32" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在所有的编码语言中，Python可能是对初学者最友好的。它直观、有据可查，并且易于学习。然而，所有的语言都有怪癖，特别是作为初学者，这一点很难发现。它们不会产生错误或终止运行。相反，它们与其他代码融合在一起。</p><p id="9e50" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">许多数据科学项目使用列表作为存储有序数据的方式。然而，未能正确使用它们可能会导致效率低下、结论不正确，甚至丢失数据。</p><p id="8b1e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">以下是使用列表时要注意的3个错误:</p><h1 id="e54f" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">1.用等于运算符创建列表的副本</h1><h2 id="1a4c" class="mn lw it bd lx mo mp dn mb mq mr dp mf li ms mt mh lm mu mv mj lq mw mx ml my bi translated">错误:</h2><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mz na l"/></div></figure><p id="1d05" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">复制列表时，不要使用<code class="fe nb nc nd ne b">=</code>。这是非常违反直觉的，因为<code class="fe nb nc nd ne b">=</code>是用来给变量赋值的。然而，<code class="fe nb nc nd ne b">=</code>操作符并不创建副本，而是创建一个<em class="nf">别名</em>。<code class="fe nb nc nd ne b">original</code>和<code class="fe nb nc nd ne b">new_copy</code>都指向相同的数据位置，如下所示。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mz na l"/></div></figure><p id="2066" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe nb nc nd ne b">new_copy</code>没有复制数据，而是创建了另一种访问<code class="fe nb nc nd ne b">original</code>的方式。</p><h2 id="c414" class="mn lw it bd lx mo mp dn mb mq mr dp mf li ms mt mh lm mu mv mj lq mw mx ml my bi translated">修复:</h2><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mz na l"/></div></figure><p id="12a3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">为了避免这个错误，使用<code class="fe nb nc nd ne b">copy</code>，一个列表的内置方法。此方法将数据存储在内存中的两个不同位置。因此，对一个列表的更改不会影响另一个列表。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mz na l"/></div></figure><h1 id="d8f1" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">2.迭代时更改列表大小</h1><h2 id="0efb" class="mn lw it bd lx mo mp dn mb mq mr dp mf li ms mt mh lm mu mv mj lq mw mx ml my bi translated">错误:</h2><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mz na l"/></div></figure><p id="b4e8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">上面的例子试图从<code class="fe nb nc nd ne b">nums</code>中删除所有以<code class="fe nb nc nd ne b">‘t’</code>开头的条目。然而，<code class="fe nb nc nd ne b">‘three’</code>依旧。这是因为<code class="fe nb nc nd ne b">nums</code>的长度在循环中发生了变化。For循环依赖于内部的零索引计数器，它会记住自己在循环中的索引。该计数器为每次迭代确定<code class="fe nb nc nd ne b">num</code>的值。</p><p id="6e60" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">例如，在循环的第一次迭代中，计数器为0，而<code class="fe nb nc nd ne b">num</code>为‘0’，因为<code class="fe nb nc nd ne b">nums[0] = ‘zero’</code>。对于第二次迭代，计数器等于1，产生<code class="fe nb nc nd ne b">num = ‘one’</code>。对于第三次迭代，<code class="fe nb nc nd ne b">num = ‘two’</code>又被从<code class="fe nb nc nd ne b">nums</code>中移除。对于第四次迭代，内部计数器等于3和<code class="fe nb nc nd ne b">nums[3] = ‘four’</code>。结果，循环跳过了<code class="fe nb nc nd ne b">‘three’</code>值。</p><p id="6b1e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">第二次迭代开始时，<code class="fe nb nc nd ne b">nums[3] = ‘three’</code>。到最后，列表的大小改变了，并且<code class="fe nb nc nd ne b">‘three’</code>值滑回到<code class="fe nb nc nd ne b">nums[2]</code>位置。<strong class="lb iu">简而言之，循环改变列表，但不更新内部计数器。</strong></p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mz na l"/></div></figure><h2 id="4ca1" class="mn lw it bd lx mo mp dn mb mq mr dp mf li ms mt mh lm mu mv mj lq mw mx ml my bi translated">修复:</h2><p id="74a5" class="pw-post-body-paragraph kz la it lb b lc ng ju le lf nh jx lh li ni lk ll lm nj lo lp lq nk ls lt lu im bi translated">为了避免这种错误，创建列表的副本，并使用该副本来定义for循环。然后，在循环体中使用原始列表(在本例中为<code class="fe nb nc nd ne b">nums</code>)。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mz na l"/></div></figure><p id="c4aa" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">因为<code class="fe nb nc nd ne b">copy_nums</code>的长度从不改变，所以循环遍历列表中的每个值。</p><h1 id="d797" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">3.不使用列表理解来创建列表</h1><h2 id="aa3b" class="mn lw it bd lx mo mp dn mb mq mr dp mf li ms mt mh lm mu mv mj lq mw mx ml my bi translated">错误:</h2><p id="04e1" class="pw-post-body-paragraph kz la it lb b lc ng ju le lf nh jx lh li ni lk ll lm nj lo lp lq nk ls lt lu im bi translated">For循环为构造列表提供了一个简单明了、文档完备的解决方案。然而，Python有一个更简洁的方法——列表理解。List comprehension采用了for循环的功能，并将其压缩到一行代码中，使其更简洁、更易于理解。</p><p id="80c3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">与其他两个错误不同，这个错误不会产生<em class="nf">不正确的</em>解决方案，只是效率较低。例如:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mz na l"/></div></figure><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mz na l"/></div></figure><h2 id="0021" class="mn lw it bd lx mo mp dn mb mq mr dp mf li ms mt mh lm mu mv mj lq mw mx ml my bi translated">修复:</h2><p id="914d" class="pw-post-body-paragraph kz la it lb b lc ng ju le lf nh jx lh li ni lk ll lm nj lo lp lq nk ls lt lu im bi translated">使用列表理解代替for循环。两者产生相同的输出，但是列表理解在大多数情况下更加清晰和快速。随着列表长度的增加，下图比较了两种方法的时间。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nl"><img src="../Images/bc82c0bf7a19d146b764b3def3229b09.png" data-original-src="https://miro.medium.com/v2/resize:fit:812/format:webp/1*QmRDJkRTViLh9akAjKl8PQ.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><h1 id="7a63" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">结论</h1><p id="455c" class="pw-post-body-paragraph kz la it lb b lc ng ju le lf nh jx lh li ni lk ll lm nj lo lp lq nk ls lt lu im bi translated">这篇文章的代码可以在这里找到<a class="ae ky" href="https://github.com/katyhagerty/common_list_mistakes" rel="noopener ugc nofollow" target="_blank">。</a></p><p id="b36e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">感谢您阅读我的文章。如果你喜欢我的内容，请考虑关注我。此外，欢迎所有反馈。我总是渴望学习新的或更好的做事方法。请随时留下您的评论或联系我katyhagerty19@gmail.com。</p><div class="nm nn gp gr no np"><a href="https://medium.com/@katyhagerty19/membership" rel="noopener follow" target="_blank"><div class="nq ab fo"><div class="nr ab ns cl cj nt"><h2 class="bd iu gy z fp nu fr fs nv fu fw is bi translated">加入我的介绍链接媒体-凯蒂哈格蒂</h2><div class="nw l"><h3 class="bd b gy z fp nu fr fs nv fu fw dk translated">作为一个媒体会员，你的会员费的一部分会给你阅读的作家，你可以完全接触到每一个故事…</h3></div><div class="nx l"><p class="bd b dl z fp nu fr fs nv fu fw dk translated">medium.com</p></div></div><div class="ny l"><div class="nz l oa ob oc ny od ks np"/></div></div></a></div></div></div>    
</body>
</html>