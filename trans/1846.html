<html>
<head>
<title>Getting Started: Graph Database | Neo4j</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">入门:图形数据库| Neo4j</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/getting-started-graph-database-neo4j-df6ebc9ccb5b#2022-04-29">https://towardsdatascience.com/getting-started-graph-database-neo4j-df6ebc9ccb5b#2022-04-29</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/94bea5e695e640adefe848329e840568.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*axJVjdeL_WTA15CS-hihEg.png"/></div></div><p class="jy jz gj gh gi ka kb bd b be z dk translated"><em class="kc">作者图片:复杂关系图可视化(neo4j Dashboard) </em></p></figure><p id="2209" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">传统上，各种基于SQL的数据库，也称为关系数据库管理系统(RDBMS ),如MySQL、SQLite、PostgreSQL等。为各种网络和移动应用提供动力。鉴于这种数据库在社区中的流行和熟悉程度，数据工程师和科学家已经将产品需求调整到关系数据库中，即使NoSQL数据库或图形数据库可能更适合这些需求。</p><p id="282a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">即使对于数据分析师/科学家来说，SQL也是最需要的数据提取和操作技能，而其他查询语言，如MongoDB查询语言(<a class="ae lb" href="https://www.mongodb.com/docs/manual/tutorial/query-documents/" rel="noopener ugc nofollow" target="_blank"> MQL </a>)或<a class="ae lb" href="https://neo4j.com/developer/cypher/" rel="noopener ugc nofollow" target="_blank"> Cypher </a>查询语言(Neo4j Graph)对社区来说大多是新的。因此，这篇博客的重点是提供一个循序渐进的入门指南，并从头开始构建一个基于图形的数据库。</p><p id="79bf" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在我们进入使用<a class="ae lb" href="https://neo4j.com/" rel="noopener ugc nofollow" target="_blank"> Neo4j </a>的细节之前，让我们也了解一下为什么以及什么时候我们应该探索图形数据库的适用性——一般来说，如果数据集中的各种实体之间存在复杂的关系、层次或连接，以图形的形式存储数据不仅是可扩展的，而且还简化了各种复杂的分析。</p><p id="7cb4" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kf ir">使用图表的其他一般好处是- </strong></p><ul class=""><li id="e46d" class="lc ld iq kf b kg kh kk kl ko le ks lf kw lg la lh li lj lk bi translated">有效利用关系</li><li id="60c2" class="lc ld iq kf b kg ll kk lm ko ln ks lo kw lp la lh li lj lk bi translated">复杂而直观的数据存储方式</li><li id="6051" class="lc ld iq kf b kg ll kk lm ko ln ks lo kw lp la lh li lj lk bi translated">可扩展性和更好的性能</li><li id="a89d" class="lc ld iq kf b kg ll kk lm ko ln ks lo kw lp la lh li lj lk bi translated">强大的分析和仪表板</li><li id="5624" class="lc ld iq kf b kg ll kk lm ko ln ks lo kw lp la lh li lj lk bi translated">根据业务需求的灵活模式</li></ul></div><div class="ab cl lq lr hu ls" role="separator"><span class="lt bw bk lu lv lw"/><span class="lt bw bk lu lv lw"/><span class="lt bw bk lu lv"/></div><div class="ij ik il im in"><p id="d542" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kf ir">让我们深入研究使用Neo4j </strong>设置图形数据库</p><p id="4724" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">虽然现在有各种图形数据库，如neo4j、Amazon Neptune、Tiger graph等，但Neo4j是该领域历史最悠久的领先提供商之一，并且还具有特定于数据科学应用的功能。有趣的是，它是高度可扩展的，并且已经为其客户管理了具有数十亿个节点的图表。而且，它是开源的，可以免费使用。</p><p id="8405" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">虽然我们可以在其云版本<a class="ae lb" href="https://neo4j.com/cloud/platform/aura-graph-database/?ref=get-started-dropdown-cta" rel="noopener ugc nofollow" target="_blank"> Neo4j AuraDB </a>上设置Neo4j，并使用python驱动程序来读/写数据，但这篇博客更侧重于在本地系统上设置数据库，使我们也能够执行批量操作。</p><p id="1be9" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kf ir">图表的关键组件:</strong></p><ul class=""><li id="8ac4" class="lc ld iq kf b kg kh kk kl ko le ks lf kw lg la lh li lj lk bi translated">节点—图表中表示各种实体的各种节点</li><li id="83a4" class="lc ld iq kf b kg ll kk lm ko ln ks lo kw lp la lh li lj lk bi translated">关系—各种节点之间的连接</li><li id="6212" class="lc ld iq kf b kg ll kk lm ko ln ks lo kw lp la lh li lj lk bi translated">属性—每个节点或关系存储的详细信息</li><li id="4d9e" class="lc ld iq kf b kg ll kk lm ko ln ks lo kw lp la lh li lj lk bi translated">标签和索引—主要是为了编写更快、更简单的查询而添加的</li></ul><p id="1b1f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kf ir">第一步:下载并设置Neo4j </strong></p><ul class=""><li id="69ba" class="lc ld iq kf b kg kh kk kl ko le ks lf kw lg la lh li lj lk bi translated">neo4j(社区版)的最新版本可以从<a class="ae lb" href="https://neo4j.com/download-center/#community" rel="noopener ugc nofollow" target="_blank">这里</a>下载。</li><li id="ba08" class="lc ld iq kf b kg ll kk lm ko ln ks lo kw lp la lh li lj lk bi translated">Neo4j大部分是用<a class="ae lb" href="https://www.java.com/en/" rel="noopener ugc nofollow" target="_blank"> Java </a>开发的，所以我们也需要安装最新版本的Java才能使用数据库</li></ul><p id="c601" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kf ir">第二步:启动Neo4j控制台</strong></p><pre class="lx ly lz ma gt mb mc md me aw mf bi"><span id="2aa3" class="mg mh iq mc b gy mi mj l mk ml">cd neo4j-community-4.4.4<br/>bin/neo4j console</span></pre><figure class="lx ly lz ma gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mm"><img src="../Images/5db632b4040150dbc774e80212f4813e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dvXFqqpx_1-jj6egzRCgwQ.png"/></div></div><p class="jy jz gj gh gi ka kb bd b be z dk translated"><em class="kc">作者图片</em></p></figure><p id="ff81" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">现在，我们可以使用<a class="ae lb" href="http://localhost:7474/browser/" rel="noopener ugc nofollow" target="_blank">http://localhost:7474/browser/</a>访问Neo4j控制台</p><figure class="lx ly lz ma gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mn"><img src="../Images/a9565eec55d8b0e94fec56cfe0ff8f93.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*RerNWevBdPRUP5nz0WNLxw.png"/></div></div><p class="jy jz gj gh gi ka kb bd b be z dk translated"><em class="kc">图片作者:neo4j dashboard </em></p></figure><p id="3bd9" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kf ir">步骤3:使用密码创建一些节点和关系</strong></p><ul class=""><li id="5dd0" class="lc ld iq kf b kg kh kk kl ko le ks lf kw lg la lh li lj lk bi translated">Neo4j支持cypher查询数据库，我们可以从控制台使用cypher创建一些节点</li></ul><pre class="lx ly lz ma gt mb mc md me aw mf bi"><span id="b036" class="mg mh iq mc b gy mi mj l mk ml">CREATE (p:PEOPLE {name: 'Person 1', location: 'Noida'}), (b:BOOK {name: 'Book 1', author: 'XYZ'})</span><span id="c7d3" class="mg mh iq mc b gy mo mj l mk ml">MATCH (p:PEOPLE), (b:BOOK)<br/>WHERE p.name = 'Person 1' AND b.name = 'Book 1'<br/>CREATE (p)-[r:READ]-&gt;(b)</span></pre><figure class="lx ly lz ma gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mp"><img src="../Images/8b58f5b950a77d48cbf384352b45293d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*PejaWecbIRQcLJuoKIvk-A.png"/></div></div><p class="jy jz gj gh gi ka kb bd b be z dk translated"><em class="kc">作者图片:使用cypher创建的简单的2个节点和1个关系图</em></p></figure><p id="9689" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kf ir">步骤4:使用</strong> <code class="fe mq mr ms mc b">neo4j-admin import</code>批量创建节点和关系</p><ul class=""><li id="516e" class="lc ld iq kf b kg kh kk kl ko le ks lf kw lg la lh li lj lk bi translated">虽然我们可以使用cypher创建节点，但对于大量节点来说，这可能非常耗时。因此，我们可以使用<code class="fe mq mr ms mc b">neo4j-admin import</code>在几秒钟内从CSV导入数百万行。但是这只能在创建数据库时从控制台执行一次。</li><li id="58e7" class="lc ld iq kf b kg ll kk lm ko ln ks lo kw lp la lh li lj lk bi translated"><a class="ae lb" href="https://drive.google.com/file/d/1z2r_8jRZA0-C4dTCIM_RbYV8RneDepPT/view?usp=sharing" rel="noopener ugc nofollow" target="_blank">这里的</a>是一个示例python代码，可以用来生成示例数据。大型CSV文件可以按照<a class="ae lb" href="https://neo4j.com/docs/operations-manual/current/tutorial/neo4j-admin-import/" rel="noopener ugc nofollow" target="_blank">此处</a>指定的格式创建/重构。</li><li id="2e20" class="lc ld iq kf b kg ll kk lm ko ln ks lo kw lp la lh li lj lk bi translated">Neo4j支持节点/关系属性的<code class="fe mq mr ms mc b">int</code>、<code class="fe mq mr ms mc b">long</code>、<code class="fe mq mr ms mc b">float</code>、<code class="fe mq mr ms mc b">double</code>、<code class="fe mq mr ms mc b">byte</code>、<code class="fe mq mr ms mc b">short</code>、<code class="fe mq mr ms mc b">char</code>、<code class="fe mq mr ms mc b">string</code>、<code class="fe mq mr ms mc b">point</code>、<code class="fe mq mr ms mc b">date</code>、<code class="fe mq mr ms mc b">localtime</code>、<code class="fe mq mr ms mc b">time</code>、<code class="fe mq mr ms mc b">localdatetime</code>、<code class="fe mq mr ms mc b">datetime</code>、<code class="fe mq mr ms mc b">duration</code>数据类型。默认值是<code class="fe mq mr ms mc b">string</code>，数组类型可以通过在类型后追加<code class="fe mq mr ms mc b">[]</code>来指定。此外，我们可以有效地向图中添加标签和索引，以便更快地进行扩展查询。</li></ul><pre class="lx ly lz ma gt mb mc md me aw mf bi"><span id="26ef" class="mg mh iq mc b gy mi mj l mk ml"># To import csvs generated from the code above</span><span id="9603" class="mg mh iq mc b gy mo mj l mk ml">bin/neo4j-admin import --nodes=import/nodes_roots.csv --nodes=import/nodes_people.csv --nodes=import/nodes_books.csv --relationships=import/relations_roots.csv --relationships=import/relations_read.csv --relationships=import/relations_favourite.csv --force</span></pre><p id="fa9d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">最后，我们的样本图形数据库看起来像这样—</p><figure class="lx ly lz ma gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mp"><img src="../Images/1e4ef599fcf6d38710ba9c0aec350361.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-aQnxFRpsFK8GEajdBnYwA.png"/></div></div><p class="jy jz gj gh gi ka kb bd b be z dk translated"><em class="kc">作者图片:使用neo4j-admin导入的示例图</em></p></figure><p id="7676" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kf ir">步骤4:使用Cypher运行分析</strong></p><p id="524e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例1:通过<code class="fe mq mr ms mc b">Person 1</code>得到<code class="fe mq mr ms mc b">Books</code>即<code class="fe mq mr ms mc b">READ</code>和<code class="fe mq mr ms mc b">FAVOURITE</code>。</p><pre class="lx ly lz ma gt mb mc md me aw mf bi"><span id="9a2b" class="mg mh iq mc b gy mi mj l mk ml">MATCH (p:PEOPLE), (b:BOOKS) <br/>WHERE p.name='Person 1' and (p)-[]-&gt;(b) <br/>RETURN p, b</span></pre><p id="ab20" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例2:得到被<code class="fe mq mr ms mc b">People</code>评为5的<code class="fe mq mr ms mc b">Books</code></p><pre class="lx ly lz ma gt mb mc md me aw mf bi"><span id="bc00" class="mg mh iq mc b gy mi mj l mk ml">MATCH (p:PEOPLE)-[k:READ]-&gt;(b:BOOKS) <br/>WHERE k.rating=5 <br/>RETURN p, b</span></pre><p id="1370" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><a class="ae lb" href="https://neo4j.com/docs/cypher-manual/current/" rel="noopener ugc nofollow" target="_blank">这里的</a>是学习编写高级查询的Cypher文档。</p><p id="b6d6" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kf ir">第五步:部署</strong></p><p id="7197" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">Neo4j数据库可以从<a class="ae lb" href="https://aws.amazon.com/marketplace/pp/prodview-k4c7xihxgbafk" rel="noopener ugc nofollow" target="_blank"> AWS市场</a>部署。Neo4j甚至提供了一个Django框架<code class="fe mq mr ms mc b"><a class="ae lb" href="https://neomodel.readthedocs.io/en/latest/" rel="noopener ugc nofollow" target="_blank">neomodel</a></code>用于在数据库顶部编写API服务。</p><p id="96a9" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果你有兴趣了解更多，请在评论中告诉我:)</p></div><div class="ab cl lq lr hu ls" role="separator"><span class="lt bw bk lu lv lw"/><span class="lt bw bk lu lv lw"/><span class="lt bw bk lu lv"/></div><div class="ij ik il im in"><p id="7cbb" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这只是“开始”,但图可以是巨大的，有数十亿个节点和关系，甚至在这种规模下表现良好。想象脸书网络图，数十亿人作为节点，相互连接。甚至像谷歌、LinkedIn和PayPal这样的科技巨头也利用图形数据库的力量创造了蓬勃发展的业务。他们的秘密？他们每个人都使用图形数据库技术来利用数据连接的力量。</p><p id="eb4b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">只要有关系，图数据库就可以成为更有效的数据库选择！</p></div></div>    
</body>
</html>