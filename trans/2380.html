<html>
<head>
<title>A Simple Guide to String Formatting in Python Using f-strings</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用f字符串在Python中格式化字符串的简单指南</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/a-simple-guide-to-string-formatting-in-python-using-f-strings-39e5c39589c3#2022-05-25">https://towardsdatascience.com/a-simple-guide-to-string-formatting-in-python-using-f-strings-39e5c39589c3#2022-05-25</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="f7eb" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">使用f-strings将字符串格式提高到一个新的水平</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/9715740a8f4cd1ebd71a8a0dc7292ec2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ySuQPAZywXWAINeipi4w4g.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><p id="0c9a" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">如果你已经学习Python有一段时间了，可能你会使用<code class="fe lu lv lw lx b">" "</code>在Python中创建字符串。</p><p id="a46c" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">这没什么不好。毕竟，我们的第一行Python代码是一个简单的<code class="fe lu lv lw lx b">print(“Hello World”)</code>。也就是说，如果你想让你的Python字符串更上一层楼，你应该使用f字符串。</p><p id="57dc" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">f-strings是在Python 3.6中引入的，它提供了一种更好的格式化字符串的方法。在本指南中，我们将了解如何使用f字符串在Python中格式化字符串。我们将学习如何添加变量、逗号分隔符、左/右零填充、日期等等。</p><h1 id="70cc" class="ly lz it bd ma mb mc md me mf mg mh mi jz mj ka mk kc ml kd mm kf mn kg mo mp bi translated">格式化</h1><p id="a11f" class="pw-post-body-paragraph ky kz it la b lb mq ju ld le mr jx lg lh ms lj lk ll mt ln lo lp mu lr ls lt im bi translated">按照这个教程，确保你有Pytho 3.6或更高版本，否则f-string将无法工作。</p><h2 id="251e" class="mv lz it bd ma mw mx dn me my mz dp mi lh na nb mk ll nc nd mm lp ne nf mo ng bi translated">简单格式化</h2><p id="7af8" class="pw-post-body-paragraph ky kz it la b lb mq ju ld le mr jx lg lh ms lj lk ll mt ln lo lp mu lr ls lt im bi translated">f-string为向字符串添加变量提供了更好的语法。</p><p id="f3f0" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">让我们用Python中的f-string打印两条消息。为此，我们必须在用于创建常规字符串的<code class="fe lu lv lw lx b">‘’</code>前面添加<code class="fe lu lv lw lx b">f</code>。我们还必须添加<code class="fe lu lv lw lx b">{}</code>来在我们的字符串中插入一个变量。</p><pre class="kj kk kl km gt nh lx ni nj aw nk bi"><span id="38b7" class="mv lz it lx b gy nl nm l nn no"><strong class="lx iu">age</strong> = 20<br/><strong class="lx iu">python_version</strong> = 3.8<br/><br/>&gt;&gt;&gt; <strong class="lx iu">print</strong>(f'Your age is {age}')<br/>Your age is 20</span><span id="0501" class="mv lz it lx b gy np nm l nn no">&gt;&gt;&gt; <strong class="lx iu">print</strong>(f'python_version={python_version}')<br/>python_version=3.8</span></pre><p id="70ab" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">如你所见，使用f-string添加变量比使用常规字符串和<code class="fe lu lv lw lx b">+</code>操作符更简单。</p><p id="efe0" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">f-string也使得调试更加容易。我们不需要像上面对<code class="fe lu lv lw lx b">python_version</code>那样打印变量名和它的值，使用f-string我们只需要在f-string中写这个:<code class="fe lu lv lw lx b">{variable_name=}</code></p><pre class="kj kk kl km gt nh lx ni nj aw nk bi"><span id="13d4" class="mv lz it lx b gy nl nm l nn no"><strong class="lx iu">age</strong> = 20<br/><strong class="lx iu">python_version</strong> = 3.8</span><span id="4365" class="mv lz it lx b gy np nm l nn no">&gt;&gt;&gt; <strong class="lx iu">print</strong>(f'{<strong class="lx iu">age=</strong>}')<br/>age=20</span><span id="dc20" class="mv lz it lx b gy np nm l nn no">&gt;&gt;&gt; <strong class="lx iu">print</strong>(f'{<strong class="lx iu">python_version=</strong>}')<br/>python_version=3.8</span></pre><p id="f942" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">太好了！现在让我们看看更多高级格式。对于下面的部分，我们将使用下面的语法。</p><pre class="kj kk kl km gt nh lx ni nj aw nk bi"><span id="7f67" class="mv lz it lx b gy nl nm l nn no"><strong class="lx iu">Syntax</strong>: <strong class="lx iu">{:[width][.precision][type]}</strong></span><span id="30b8" class="mv lz it lx b gy np nm l nn no">Type:<br/><strong class="lx iu">d</strong>: integers<br/><strong class="lx iu">f</strong>: floating point numbers<br/><em class="nq">*You need to specify precision only in case of floating point numbers</em></span></pre><h1 id="5a04" class="ly lz it bd ma mb mc md me mf mg mh mi jz mj ka mk kc ml kd mm kf mn kg mo mp bi translated">排列</h1><p id="62a2" class="pw-post-body-paragraph ky kz it la b lb mq ju ld le mr jx lg lh ms lj lk ll mt ln lo lp mu lr ls lt im bi translated">在极少数情况下，您需要将单词/文本向右或向左对齐，但这是完全理解如何向数字的左/右添加零的基础，这在格式化数字时非常有用。</p><h2 id="95df" class="mv lz it bd ma mw mx dn me my mz dp mi lh na nb mk ll nc nd mm lp ne nf mo ng bi translated">向右对齐</h2><p id="2352" class="pw-post-body-paragraph ky kz it la b lb mq ju ld le mr jx lg lh ms lj lk ll mt ln lo lp mu lr ls lt im bi translated">假设我们有一个数字，我们想把它向右对齐。我们可以使用上面的语法做到这一点。在这种情况下，我们只需要添加<code class="fe lu lv lw lx b">width</code>元素。</p><p id="d721" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">如果我们想要添加6个空格并将文本右对齐，我们只需要添加8的宽度(默认行为是将文本右对齐)</p><pre class="kj kk kl km gt nh lx ni nj aw nk bi"><span id="5a81" class="mv lz it lx b gy nl nm l nn no">number = 20</span><span id="0c20" class="mv lz it lx b gy np nm l nn no">&gt;&gt;&gt; <strong class="lx iu">print</strong>(f'{number}')<br/>20</span><span id="3187" class="mv lz it lx b gy np nm l nn no">&gt;&gt;&gt; <strong class="lx iu">print</strong>(f'{number<strong class="lx iu">:8</strong>}')<br/>      20</span><span id="0aaa" class="mv lz it lx b gy np nm l nn no">&gt;&gt;&gt; <strong class="lx iu">print</strong>(f'{number:<strong class="lx iu">&gt;8</strong>}')<br/>      20</span></pre><p id="bcad" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">如果我们想更具体一些，我们添加了<code class="fe lu lv lw lx b">&gt;</code>来表示文本应该向右对齐。</p><h2 id="eb66" class="mv lz it bd ma mw mx dn me my mz dp mi lh na nb mk ll nc nd mm lp ne nf mo ng bi translated">向左对齐</h2><p id="bc0f" class="pw-post-body-paragraph ky kz it la b lb mq ju ld le mr jx lg lh ms lj lk ll mt ln lo lp mu lr ls lt im bi translated">现在让我们将文本向左对齐，但现在让我们使用<code class="fe lu lv lw lx b">_</code>作为填充字符。</p><pre class="kj kk kl km gt nh lx ni nj aw nk bi"><span id="5538" class="mv lz it lx b gy nl nm l nn no">number = 20</span><span id="08d3" class="mv lz it lx b gy np nm l nn no">&gt;&gt;&gt;<strong class="lx iu"> print</strong>(f'{number:<strong class="lx iu">&lt;8</strong>}')<br/>20      </span><span id="9b17" class="mv lz it lx b gy np nm l nn no">&gt;&gt;&gt;<strong class="lx iu"> print</strong>(f'{number:<strong class="lx iu">_&lt;8</strong>}')<br/>20______</span></pre><p id="a229" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">为了完成8的宽度，我们使用上面的代码添加了6个“_”。</p><h1 id="ddbb" class="ly lz it bd ma mb mc md me mf mg mh mi jz mj ka mk kc ml kd mm kf mn kg mo mp bi translated">用零填充</h1><p id="126c" class="pw-post-body-paragraph ky kz it la b lb mq ju ld le mr jx lg lh ms lj lk ll mt ln lo lp mu lr ls lt im bi translated">现在是时候使用我们在上一节中学到的知识来设置数字的格式了，在左边/右边加零。</p><h2 id="b39a" class="mv lz it bd ma mw mx dn me my mz dp mi lh na nb mk ll nc nd mm lp ne nf mo ng bi translated">右填充零</h2><p id="dc30" class="pw-post-body-paragraph ky kz it la b lb mq ju ld le mr jx lg lh ms lj lk ll mt ln lo lp mu lr ls lt im bi translated">正如我们之前看到的，我们可以选择填充字符。在这种情况下，我们将选择<code class="fe lu lv lw lx b">0</code>作为填充字符，在下面的浮动中有5位小数。</p><pre class="kj kk kl km gt nh lx ni nj aw nk bi"><span id="0bd9" class="mv lz it lx b gy nl nm l nn no">x = 20.123</span><span id="df82" class="mv lz it lx b gy np nm l nn no">&gt;&gt;&gt; <strong class="lx iu">print</strong>(f'{x:<strong class="lx iu">0&lt;8</strong>}')<br/>20.12300</span></pre><p id="d76b" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">这很酷，但有时使用<code class="fe lu lv lw lx b">width</code>会使事情变得复杂，因为我们必须在添加0之后计算数字的最终宽度。</p><p id="fa95" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">相反，更简单的方法是考虑我们想要的小数位数。</p><p id="c1c5" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我们可以使用前面显示的语法中的<code class="fe lu lv lw lx b">.precision</code>得到这个。让我们添加0，直到我们有5个小数。</p><pre class="kj kk kl km gt nh lx ni nj aw nk bi"><span id="cad7" class="mv lz it lx b gy nl nm l nn no">&gt;&gt;&gt; <strong class="lx iu">print</strong>(f'{x:<strong class="lx iu">.5f</strong>}')<br/>20.12300</span></pre><p id="8a99" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">在上面的代码中，<code class="fe lu lv lw lx b">5</code>代表精度，<code class="fe lu lv lw lx b">f</code>代表浮点数。</p><h2 id="5c40" class="mv lz it bd ma mw mx dn me my mz dp mi lh na nb mk ll nc nd mm lp ne nf mo ng bi translated">用零填充左侧</h2><p id="bb94" class="pw-post-body-paragraph ky kz it la b lb mq ju ld le mr jx lg lh ms lj lk ll mt ln lo lp mu lr ls lt im bi translated">现在让我们在左边加上0。当我们需要使用numbers创建自定义格式时，这非常有用。</p><p id="92bc" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">假设我们想要获得以下格式:<code class="fe lu lv lw lx b"><em class="nq">YYYYMMDD</em></code> <em class="nq"> </em>并且我们有从1到9的常规数字。在这种情况下，我们需要在月和日的左边加上0。</p><p id="98e3" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">以下是用f弦做这件事的两种方法。</p><pre class="kj kk kl km gt nh lx ni nj aw nk bi"><span id="d461" class="mv lz it lx b gy nl nm l nn no">year = 2022<br/>month = 1<br/>day = 5<br/><br/><em class="nq"># YYYYMMDD</em><br/>&gt;&gt;&gt; <strong class="lx iu">print</strong>(f'{year}{month:<strong class="lx iu">0&gt;2</strong>}{day:<strong class="lx iu">0&gt;2</strong>}')<br/>20220105</span><span id="24ac" class="mv lz it lx b gy np nm l nn no">&gt;&gt;&gt; <strong class="lx iu">print</strong>(f'{year}{month:<strong class="lx iu">02d</strong>}{day:<strong class="lx iu">02d</strong>}')<br/>20220105</span></pre><h1 id="e79e" class="ly lz it bd ma mb mc md me mf mg mh mi jz mj ka mk kc ml kd mm kf mn kg mo mp bi translated">圆形浮子</h1><h2 id="1d34" class="mv lz it bd ma mw mx dn me my mz dp mi lh na nb mk ll nc nd mm lp ne nf mo ng bi translated">四舍五入到“n”位小数</h2><p id="2c68" class="pw-post-body-paragraph ky kz it la b lb mq ju ld le mr jx lg lh ms lj lk ll mt ln lo lp mu lr ls lt im bi translated">当涉及到将浮点数舍入到“n”位小数时，使用<code class="fe lu lv lw lx b">.precision</code>和<code class="fe lu lv lw lx b">f</code>类型更实用。</p><p id="faed" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">让我们把下面的数字四舍五入到小数点后一位数。</p><pre class="kj kk kl km gt nh lx ni nj aw nk bi"><span id="e4d3" class="mv lz it lx b gy nl nm l nn no">x = 20.123</span><span id="66ba" class="mv lz it lx b gy np nm l nn no">&gt;&gt;&gt; <strong class="lx iu">print</strong>(f'{x:<strong class="lx iu">.1f</strong>}')<br/>20.1</span></pre><h2 id="d9c7" class="mv lz it bd ma mw mx dn me my mz dp mi lh na nb mk ll nc nd mm lp ne nf mo ng bi translated">将浮点格式设置为百分比</h2><p id="e967" class="pw-post-body-paragraph ky kz it la b lb mq ju ld le mr jx lg lh ms lj lk ll mt ln lo lp mu lr ls lt im bi translated">现在我们把数字四舍五入，加上<code class="fe lu lv lw lx b">%</code>符号。</p><pre class="kj kk kl km gt nh lx ni nj aw nk bi"><span id="fa05" class="mv lz it lx b gy nl nm l nn no">x = 20.123</span><span id="f9a2" class="mv lz it lx b gy np nm l nn no">&gt;&gt;&gt; <strong class="lx iu">print</strong>(f'{x:<strong class="lx iu">.1f</strong>}%')<br/>20.1%</span></pre><h2 id="6b8b" class="mv lz it bd ma mw mx dn me my mz dp mi lh na nb mk ll nc nd mm lp ne nf mo ng bi translated">使用逗号作为千位分隔符</h2><p id="ec51" class="pw-post-body-paragraph ky kz it la b lb mq ju ld le mr jx lg lh ms lj lk ll mt ln lo lp mu lr ls lt im bi translated">我们也可以添加一个逗号作为千位分隔符。我们只需要加上<code class="fe lu lv lw lx b">,</code></p><pre class="kj kk kl km gt nh lx ni nj aw nk bi"><span id="c268" class="mv lz it lx b gy nl nm l nn no">x = 1000000</span><span id="5ced" class="mv lz it lx b gy np nm l nn no">&gt;&gt;&gt; <strong class="lx iu">print</strong>(f'{x:<strong class="lx iu">,</strong>}')<br/>1,000,000</span></pre><h1 id="0ba4" class="ly lz it bd ma mb mc md me mf mg mh mi jz mj ka mk kc ml kd mm kf mn kg mo mp bi translated">日期格式</h1><p id="5bad" class="pw-post-body-paragraph ky kz it la b lb mq ju ld le mr jx lg lh ms lj lk ll mt ln lo lp mu lr ls lt im bi translated">最后但同样重要的是，我们可以导入<code class="fe lu lv lw lx b">datetime</code>并使用f字符串中的特殊字符来获得正确的数据格式。</p><pre class="kj kk kl km gt nh lx ni nj aw nk bi"><span id="d6bd" class="mv lz it lx b gy nl nm l nn no"><strong class="lx iu">import</strong> datetime</span><span id="23ea" class="mv lz it lx b gy np nm l nn no">now = datetime.datetime.now()<br/><br/>&gt;&gt;&gt; <strong class="lx iu">print</strong>(f'Today is {now:<strong class="lx iu">%B</strong>} {now:<strong class="lx iu">%-d</strong>}, {now:<strong class="lx iu">%Y</strong>}')<br/>Today is May 20, 2022</span><span id="3c0f" class="mv lz it lx b gy np nm l nn no">&gt;&gt;&gt; <strong class="lx iu">print</strong>(f'{now=:<strong class="lx iu">%m-%d-%Y</strong>}')<br/>now=05-20-2022</span></pre><p id="9595" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated"><a class="ae nr" href="https://strftime.org/" rel="noopener ugc nofollow" target="_blank">这里有一个包含更多字符的cheasheet，您可以用它来格式化Python中的日期变量。</a></p></div><div class="ab cl ns nt hx nu" role="separator"><span class="nv bw bk nw nx ny"/><span class="nv bw bk nw nx ny"/><span class="nv bw bk nw nx"/></div><div class="im in io ip iq"><p id="0538" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">用Python学习数据科学？<a class="ae nr" href="https://frankandrade.ck.page/26b76e9130" rel="noopener ugc nofollow" target="_blank"> <strong class="la iu">通过加入我的10k+人电子邮件列表，获取我的免费Python for Data Science备忘单。</strong> </a></p><p id="a5f0" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">如果你喜欢阅读这样的故事，并想支持我成为一名作家，可以考虑报名成为一名媒体成员。每月5美元，让您可以无限制地访问数以千计的Python指南和数据科学文章。如果你使用<a class="ae nr" href="https://frank-andrade.medium.com/membership" rel="noopener">我的链接</a>注册，我会赚一小笔佣金，不需要你额外付费。</p><div class="nz oa gp gr ob oc"><a href="https://frank-andrade.medium.com/membership" rel="noopener follow" target="_blank"><div class="od ab fo"><div class="oe ab of cl cj og"><h2 class="bd iu gy z fp oh fr fs oi fu fw is bi translated">通过我的推荐链接加入媒体——弗兰克·安德拉德</h2><div class="oj l"><h3 class="bd b gy z fp oh fr fs oi fu fw dk translated">作为一个媒体会员，你的会员费的一部分会给你阅读的作家，你可以完全接触到每一个故事…</h3></div><div class="ok l"><p class="bd b dl z fp oh fr fs oi fu fw dk translated">frank-andrade.medium.com</p></div></div><div class="ol l"><div class="om l on oo op ol oq ks oc"/></div></div></a></div></div></div>    
</body>
</html>