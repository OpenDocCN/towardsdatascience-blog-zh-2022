<html>
<head>
<title>Hands-On Exploratory Data Analysis on Honey Consumption in the USA, Using Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用 Python 对美国蜂蜜消费进行实践探索性数据分析</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/hands-on-exploratory-data-analysis-on-honey-consumption-in-the-usa-using-python-ddfb8be519d7#2022-11-29">https://towardsdatascience.com/hands-on-exploratory-data-analysis-on-honey-consumption-in-the-usa-using-python-ddfb8be519d7#2022-11-29</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="9d16" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">这是我对美国蜂蜜的探索性数据分析，用了几行代码</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/7e81711a4148fa9dfa991b8036edb811.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_QcWkODPY8VoimSotLZyNQ.jpeg"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">照片由<a class="ae kv" href="https://unsplash.com/@aaronburden?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Aaron Burden </a>在<a class="ae kv" href="https://unsplash.com/s/photos/Bee?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a></p></figure><blockquote class="kw kx ky"><p id="7edd" class="kz la lb lc b ld le jr lf lg lh ju li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated"><strong class="lc ir">免责声明</strong>:这篇文章可能会冒犯那些关注我并阅读这些故事的素食主义者。虽然我对此提前表示歉意，但请注意，这个练习并不是为了促进蜂蜜的使用、消费或销售。</p></blockquote><p id="4f72" class="pw-post-body-paragraph kz la iq lc b ld le jr lf lg lh ju li lw lk ll lm lx lo lp lq ly ls lt lu lv ij bi translated">在下面的文章中，我们将对美国蜂蜜的生产和消费进行探索性的数据分析。</p><p id="83f6" class="pw-post-body-paragraph kz la iq lc b ld le jr lf lg lh ju li lw lk ll lm lx lo lp lq ly ls lt lu lv ij bi translated">特别是:</p><ol class=""><li id="0cf3" class="lz ma iq lc b ld le lg lh lw mb lx mc ly md lv me mf mg mh bi translated">我们将从查看数据集开始</li><li id="f901" class="lz ma iq lc b ld mi lg mj lw mk lx ml ly mm lv me mf mg mh bi translated">我们将定义我们将在分析过程中使用的<strong class="lc ir"> Python 环境</strong>。</li><li id="bfbb" class="lz ma iq lc b ld mi lg mj lw mk lx ml ly mm lv me mf mg mh bi translated">我们将<strong class="lc ir">清理</strong>我们的数据</li><li id="a6a3" class="lz ma iq lc b ld mi lg mj lw mk lx ml ly mm lv me mf mg mh bi translated">我们将执行<strong class="lc ir">时间独立</strong>和<strong class="lc ir">时间独立</strong>分析</li><li id="7b80" class="lz ma iq lc b ld mi lg mj lw mk lx ml ly mm lv me mf mg mh bi translated">我们将查看<strong class="lc ir">相关值</strong></li><li id="9964" class="lz ma iq lc b ld mi lg mj lw mk lx ml ly mm lv me mf mg mh bi translated">我们会玩得很开心。:)</li></ol><p id="a5d4" class="pw-post-body-paragraph kz la iq lc b ld le jr lf lg lh ju li lw lk ll lm lx lo lp lq ly ls lt lu lv ij bi translated">那我们开始吧！</p><h1 id="063a" class="mn mo iq bd mp mq mr ms mt mu mv mw mx jw my jx mz jz na ka nb kc nc kd nd ne bi translated">0.关于数据集</h1><p id="5f3f" class="pw-post-body-paragraph kz la iq lc b ld nf jr lf lg ng ju li lw nh ll lm lx ni lp lq ly nj lt lu lv ij bi translated">EDA 的第一步根本不涉及任何代码，只是基于对数据的定性描述。<br/>首先，数据集来自<a class="ae kv" href="https://www.nass.usda.gov/" rel="noopener ugc nofollow" target="_blank">美国国家农业统计局，USDA </a>，许可为<a class="ae kv" href="https://creativecommons.org/publicdomain/zero/1.0/" rel="noopener ugc nofollow" target="_blank"> CC0:公共领域</a>(开源)。描述说:</p><blockquote class="kw kx ky"><p id="c227" class="kz la lb lc b ld le jr lf lg lh ju li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">“这个数据集提供了对蜂蜜不同状态<strong class="lc ir">的<strong class="lc ir">生产</strong>、<strong class="lc ir">需求</strong>和<strong class="lc ir">供应</strong>的洞察。蜂蜜是蜜蜂制造的天然产品。”</strong></p></blockquote><p id="cfdc" class="pw-post-body-paragraph kz la iq lc b ld le jr lf lg lh ju li lw lk ll lm lx lo lp lq ly ls lt lu lv ij bi translated">这正是我们要做的:对不同州的蜂蜜产量和价格进行探索性的数据分析。</p><p id="db67" class="pw-post-body-paragraph kz la iq lc b ld le jr lf lg lh ju li lw lk ll lm lx lo lp lq ly ls lt lu lv ij bi translated">数据集的另一个重要特性是名为“year”的列<br/>这意味着对于给定的州，我们有给定年份的平均产量和平均价格<strong class="lc ir">。正如我们将看到的，这将使我们能够比较各州的产量和价格，并了解它如何随着时间的推移而变化。</strong></p><p id="c6ce" class="pw-post-body-paragraph kz la iq lc b ld le jr lf lg lh ju li lw lk ll lm lx lo lp lq ly ls lt lu lv ij bi translated">听起来很刺激，对吧？🙃</p><p id="91af" class="pw-post-body-paragraph kz la iq lc b ld le jr lf lg lh ju li lw lk ll lm lx lo lp lq ly ls lt lu lv ij bi translated">让我们从代码开始。</p><h1 id="c80f" class="mn mo iq bd mp mq mr ms mt mu mv mw mx jw my jx mz jz na ka nb kc nc kd nd ne bi translated">1.导入库</h1><p id="3498" class="pw-post-body-paragraph kz la iq lc b ld nf jr lf lg ng ju li lw nh ll lm lx ni lp lq ly nj lt lu lv ij bi translated">在开始分析之前，我们必须导入我们将要使用的库。很多分析会用到一些绘图，所以我也附上了我对绘图部分的偏好。如果你不喜欢美丽的情节，请随意摆脱它😏</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nk nl l"/></div></figure><h1 id="b862" class="mn mo iq bd mp mq mr ms mt mu mv mw mx jw my jx mz jz na ka nb kc nc kd nd ne bi translated">2.导入数据集</h1><p id="ce2a" class="pw-post-body-paragraph kz la iq lc b ld nf jr lf lg ng ju li lw nh ll lm lx ni lp lq ly nj lt lu lv ij bi translated">让我们导入并显示第一个条目:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nk nl l"/></div></figure><p id="7bfa" class="pw-post-body-paragraph kz la iq lc b ld le jr lf lg lh ju li lw lk ll lm lx lo lp lq ly ls lt lu lv ij bi translated">很好，让我用魔法数据。数据信息<strong class="lc ir"> <em class="lb"> () </em> : </strong></p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nk nl l"/></div></figure><p id="e9ff" class="pw-post-body-paragraph kz la iq lc b ld le jr lf lg lh ju li lw lk ll lm lx lo lp lq ly ls lt lu lv ij bi translated">我们可以看到，除了<strong class="lc ir">状态</strong>列之外，所有列都是<strong class="lc ir">数字</strong>。这很好😮‍💨</p><p id="15ee" class="pw-post-body-paragraph kz la iq lc b ld le jr lf lg lh ju li lw lk ll lm lx lo lp lq ly ls lt lu lv ij bi translated">正如我们所看到的，“state”列是告诉我们实例所在的美国州(阿拉巴马、亚利桑那、阿肯色州等)的列。).</p><p id="2e58" class="pw-post-body-paragraph kz la iq lc b ld le jr lf lg lh ju li lw lk ll lm lx lo lp lq ly ls lt lu lv ij bi translated"><strong class="lc ir">产量</strong>列、<strong class="lc ir">平均价格</strong>和<strong class="lc ir">年份</strong>列是我们在这个具体示例中最常使用的<strong class="lc ir"><em class="lb"/></strong></p><p id="b68f" class="pw-post-body-paragraph kz la iq lc b ld le jr lf lg lh ju li lw lk ll lm lx lo lp lq ly ls lt lu lv ij bi translated">1.Kaggle 用户告诉我们<strong class="lc ir">产量</strong>是菌落数量和每个菌落产量的乘积。从广义上讲，考虑到我们正在使用的空间和我们有多少蜂群，我们生产了多少蜂蜜。所以我想说这个名字很简单，但是很明确。这是蜂蜜产量的一个恰当的概括。</p><p id="bf86" class="pw-post-body-paragraph kz la iq lc b ld le jr lf lg lh ju li lw lk ll lm lx lo lp lq ly ls lt lu lv ij bi translated">2.<strong class="lc ir">平均价格</strong>是指基于扩大销售的每磅平均价格。</p><blockquote class="kw kx ky"><p id="a14d" class="kz la lb lc b ld le jr lf lg lh ju li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">*请记住，这种方法很容易推广，只需更改列字符串，正如我们将看到的那样。</p></blockquote><p id="cb7b" class="pw-post-body-paragraph kz la iq lc b ld le jr lf lg lh ju li lw lk ll lm lx lo lp lq ly ls lt lu lv ij bi translated">3.数据集中的所有实例都与数据集的<strong class="lc ir">年列</strong>中指示的特定<strong class="lc ir">年</strong>相关。</p><h1 id="46f5" class="mn mo iq bd mp mq mr ms mt mu mv mw mx jw my jx mz jz na ka nb kc nc kd nd ne bi translated">3.动手探索性数据分析</h1><h2 id="b6aa" class="nm mo iq bd mp nn no dn mt np nq dp mx lw nr ns mz lx nt nu nb ly nv nw nd nx bi translated">3.1 关于美国</h2><p id="352c" class="pw-post-body-paragraph kz la iq lc b ld nf jr lf lg ng ju li lw nh ll lm lx ni lp lq ly nj lt lu lv ij bi translated">第一个问题</p><blockquote class="ny"><p id="2782" class="nz oa iq bd ob oc od oe of og oh lv dk translated">我们有数据集中的所有州吗？</p></blockquote><p id="9abc" class="pw-post-body-paragraph kz la iq lc b ld oi jr lf lg oj ju li lw ok ll lm lx ol lp lq ly om lt lu lv ij bi translated">为了回答这个问题，我已经从<a class="ae kv" href="https://gist.github.com/JeffPaine/3083347" rel="noopener ugc nofollow" target="_blank">这个 GitHub 文件夹</a>下载了数据集列表(多懒啊，对吧？)，将其命名为<strong class="lc ir"> <em class="lb">状态</em> </strong>，并将其与我们数据集中的状态列表进行比较:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nk nl l"/></div></figure><p id="9c38" class="pw-post-body-paragraph kz la iq lc b ld le jr lf lg lh ju li lw lk ll lm lx lo lp lq ly ls lt lu lv ij bi translated">所以看起来我们遗漏了很多州，但事实并非如此。我给你看下面这个情节:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nk nl l"/></div></figure><p id="e45c" class="pw-post-body-paragraph kz la iq lc b ld le jr lf lg lh ju li lw lk ll lm lx lo lp lq ly ls lt lu lv ij bi translated">我们真正缺失的状态是:</p><ol class=""><li id="bafc" class="lz ma iq lc b ld le lg lh lw mb lx mc ly md lv me mf mg mh bi translated"><strong class="lc ir">阿拉斯加</strong></li><li id="32a2" class="lz ma iq lc b ld mi lg mj lw mk lx ml ly mm lv me mf mg mh bi translated"><strong class="lc ir">康涅狄格州</strong></li><li id="5f55" class="lz ma iq lc b ld mi lg mj lw mk lx ml ly mm lv me mf mg mh bi translated"><strong class="lc ir">哥伦比亚特区</strong></li><li id="6927" class="lz ma iq lc b ld mi lg mj lw mk lx ml ly mm lv me mf mg mh bi translated"><strong class="lc ir">特拉华州</strong></li><li id="0b40" class="lz ma iq lc b ld mi lg mj lw mk lx ml ly mm lv me mf mg mh bi translated"><strong class="lc ir">马萨诸塞州</strong></li><li id="7b76" class="lz ma iq lc b ld mi lg mj lw mk lx ml ly mm lv me mf mg mh bi translated"><strong class="lc ir">罗德岛</strong></li></ol><p id="aa8b" class="pw-post-body-paragraph kz la iq lc b ld le jr lf lg lh ju li lw lk ll lm lx lo lp lq ly ls lt lu lv ij bi translated">所有其他状态实际上都在数据集中。唯一的问题是，在原始列表中我们有“NewYork”(空格)，而在我们的数据集中，它变成了“New York”(非空格)。*</p><blockquote class="kw kx ky"><p id="f860" class="kz la lb lc b ld le jr lf lg lh ju li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">*要查看这种效果，请查看上面图中的 xticks。</p></blockquote><p id="540f" class="pw-post-body-paragraph kz la iq lc b ld le jr lf lg lh ju li lw lk ll lm lx lo lp lq ly ls lt lu lv ij bi translated"><strong class="lc ir">现在，为什么我们没有这些状态？</strong>真正的答案当然是不知道。</p><p id="9381" class="pw-post-body-paragraph kz la iq lc b ld le jr lf lg lh ju li lw lk ll lm lx lo lp lq ly ls lt lu lv ij bi translated">我推测在那些州我们没有足够的蜂蜜产量。这一假设被<strong class="lc ir">证实</strong>，因为如果我们看一下<a class="ae kv" href="https://downloads.usda.library.cornell.edu/usda-esmis/files/hd76s004z/7m01cp956/df65wc389/hony0322.pdf" rel="noopener ugc nofollow" target="_blank">美国农业部的报告</a>，这 6 个州都在“其他州”之内，并且加起来的产量比数据集中的其他单个州要小。</p><h2 id="4500" class="nm mo iq bd mp nn no dn mt np nq dp mx lw nr ns mz lx nt nu nb ly nv nw nd nx bi translated">3.2 时间独立分析</h2><p id="799d" class="pw-post-body-paragraph kz la iq lc b ld nf jr lf lg ng ju li lw nh ll lm lx ni lp lq ly nj lt lu lv ij bi translated">好吧，让我们暂时忘记时间栏。我们想要得到所有值的汇总。为此，我们可以使用以下函数:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nk nl l"/></div></figure><p id="46ec" class="pw-post-body-paragraph kz la iq lc b ld le jr lf lg lh ju li lw lk ll lm lx lo lp lq ly ls lt lu lv ij bi translated">让我给你看一些例子:</p><ol class=""><li id="f3e8" class="lz ma iq lc b ld le lg lh lw mb lx mc ly md lv me mf mg mh bi translated">俄亥俄州(我的家乡❤)</li></ol><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nk nl l"/></div></figure><p id="476a" class="pw-post-body-paragraph kz la iq lc b ld le jr lf lg lh ju li lw lk ll lm lx lo lp lq ly ls lt lu lv ij bi translated">2.<strong class="lc ir">加州</strong></p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nk nl l"/></div></figure><p id="ee20" class="pw-post-body-paragraph kz la iq lc b ld le jr lf lg lh ju li lw lk ll lm lx lo lp lq ly ls lt lu lv ij bi translated">好，举个例子，我们可以画出每个州的平均产量和平均价格。如果我们这样做，我们可以获得哪个州的<strong class="lc ir">产量最大</strong>(或最小)<strong class="lc ir"/>以及哪个州的<strong class="lc ir">平均价格最大</strong>(或最小)<strong class="lc ir"/>的信息。为此，我们必须使用我们定义的 summary_state 函数和以下代码块:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nk nl l"/></div></figure><ol class=""><li id="6e27" class="lz ma iq lc b ld le lg lh lw mb lx mc ly md lv me mf mg mh bi translated"><strong class="lc ir">十大生产州</strong>:</li></ol><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nk nl l"/></div></figure><p id="2a14" class="pw-post-body-paragraph kz la iq lc b ld le jr lf lg lh ju li lw lk ll lm lx lo lp lq ly ls lt lu lv ij bi translated">2.<strong class="lc ir">平均价格前 10 名的州</strong>(最贵):</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nk nl l"/></div></figure><p id="e1e5" class="pw-post-body-paragraph kz la iq lc b ld le jr lf lg lh ju li lw lk ll lm lx lo lp lq ly ls lt lu lv ij bi translated">3.<strong class="lc ir">概要图:</strong></p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nk nl l"/></div></figure><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nk nl l"/></div></figure><p id="c94e" class="pw-post-body-paragraph kz la iq lc b ld le jr lf lg lh ju li lw lk ll lm lx lo lp lq ly ls lt lu lv ij bi translated">我们可以看到的是，平均数的(相对)价格范围小于生产的价格范围。那大概是因为产量和你所在的地方有严格的关系(你不能强迫蜂蜜生长在阿拉斯加)。另一方面，价格与很多商业因素有关，是由男人而不是自然选择的。</p><p id="6bdd" class="pw-post-body-paragraph kz la iq lc b ld le jr lf lg lh ju li lw lk ll lm lx lo lp lq ly ls lt lu lv ij bi translated">现在，我会立即停止做这个分析，因为我感觉它会把我们引向错误的结论。事实上，正如我们将看到的，我们拥有的数据集确实是极其依赖于时间的。这种按时间平均的研究可能会让我们丢失很多重要的分析信息。</p><h2 id="7554" class="nm mo iq bd mp nn no dn mt np nq dp mx lw nr ns mz lx nt nu nb ly nv nw nd nx bi translated">3.2 时间相关分析</h2><p id="ea18" class="pw-post-body-paragraph kz la iq lc b ld nf jr lf lg ng ju li lw nh ll lm lx ni lp lq ly nj lt lu lv ij bi translated">让我们随机选取三个州，比如俄亥俄州、加利福尼亚州和纽约州，绘制出年与生产线图。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nk nl l"/></div></figure><p id="c44a" class="pw-post-body-paragraph kz la iq lc b ld le jr lf lg lh ju li lw lk ll lm lx lo lp lq ly ls lt lu lv ij bi translated">Mh。<strong class="lc ir">幅度上的巨大</strong>差异。有意思。</p><p id="84a0" class="pw-post-body-paragraph kz la iq lc b ld le jr lf lg lh ju li lw lk ll lm lx lo lp lq ly ls lt lu lv ij bi translated">让我们对平均价格做同样的事情。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nk nl l"/></div></figure><p id="5eb0" class="pw-post-body-paragraph kz la iq lc b ld le jr lf lg lh ju li lw lk ll lm lx lo lp lq ly ls lt lu lv ij bi translated">现在<strong class="lc ir">那个</strong>就有意思了。就我们数据集的平均价格而言，我们有一个巨大的下降。有两种可能的解释。</p><p id="11f7" class="pw-post-body-paragraph kz la iq lc b ld le jr lf lg lh ju li lw lk ll lm lx lo lp lq ly ls lt lu lv ij bi translated">A.我们在数据采集阶段遇到了问题。例如，在第一个年份范围(1995 年至 2018 年)，我们正在以美元为单位考虑事情，而从 2018 年至 2021 年，我们正在将单位改为“数百美元”或类似的东西。</p><p id="3305" class="pw-post-body-paragraph kz la iq lc b ld le jr lf lg lh ju li lw lk ll lm lx lo lp lq ly ls lt lu lv ij bi translated">B.导致平均价格下降是有实际原因的。这也是可能的。这项研究解决了这个问题，并给出了蜂蜜价格下降的统计推理。</p><p id="d7bc" class="pw-post-body-paragraph kz la iq lc b ld le jr lf lg lh ju li lw lk ll lm lx lo lp lq ly ls lt lu lv ij bi translated">我会说选项 A 是最合理的。我努力想出每磅 350 多美元的价格。😅<br/>我非常确信这是一个 bug，规模不是以美元(如 Kaggle 用户所说)计算，而是以<strong class="lc ir">美分计算。</strong>无论如何，为了这个分析的目的，我们将在我们的分析中去掉那部分数据，这样我们就不会犯任何错误。</p><p id="7dfd" class="pw-post-body-paragraph kz la iq lc b ld le jr lf lg lh ju li lw lk ll lm lx lo lp lq ly ls lt lu lv ij bi translated">现在，我们要做的是:</p><p id="902c" class="pw-post-body-paragraph kz la iq lc b ld le jr lf lg lh ju li lw lk ll lm lx lo lp lq ly ls lt lu lv ij bi translated">A.<strong class="lc ir">从我们的数据集<br/> B 中提取</strong>与<strong class="lc ir">时间</strong>和<strong class="lc ir">状态</strong>相关的数据。对产量和平均价格进行<strong class="lc ir">回归分析研究</strong><br/>比较不同状态的值，查看产量和平均价格的变化。</p><p id="7134" class="pw-post-body-paragraph kz la iq lc b ld le jr lf lg lh ju li lw lk ll lm lx lo lp lq ly ls lt lu lv ij bi translated">比如说。让我拿俄亥俄州来说。我们将执行以下操作:</p><ol class=""><li id="7843" class="lz ma iq lc b ld le lg lh lw mb lx mc ly md lv me mf mg mh bi translated">数据集上的训练验证测试拆分</li><li id="f5e6" class="lz ma iq lc b ld mi lg mj lw mk lx ml ly mm lv me mf mg mh bi translated">使用验证集*构建最佳(最小均方误差)多项式回归模型</li><li id="3dcf" class="lz ma iq lc b ld mi lg mj lw mk lx ml ly mm lv me mf mg mh bi translated">提取我们的最优多项式模型，并应用它来拟合生产曲线</li></ol><blockquote class="kw kx ky"><p id="1c5a" class="kz la lb lc b ld le jr lf lg lh ju li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">*多项式的次数是我们正在调整的超参数。</p></blockquote><p id="4cb0" class="pw-post-body-paragraph kz la iq lc b ld le jr lf lg lh ju li lw lk ll lm lx lo lp lq ly ls lt lu lv ij bi translated">为此，您需要:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nk nl l"/></div></figure><p id="c023" class="pw-post-body-paragraph kz la iq lc b ld le jr lf lg lh ju li lw lk ll lm lx lo lp lq ly ls lt lu lv ij bi translated">这就是我们从中得到的:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nk nl l"/></div></figure><p id="e7a8" class="pw-post-body-paragraph kz la iq lc b ld le jr lf lg lh ju li lw lk ll lm lx lo lp lq ly ls lt lu lv ij bi translated">现在我们要做的是一个州一个州地做。</p><ol class=""><li id="87c9" class="lz ma iq lc b ld le lg lh lw mb lx mc ly md lv me mf mg mh bi translated">回归函数:</li></ol><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nk nl l"/></div></figure><p id="dc16" class="pw-post-body-paragraph kz la iq lc b ld le jr lf lg lh ju li lw lk ll lm lx lo lp lq ly ls lt lu lv ij bi translated">2.绘图功能:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nk nl l"/></div></figure><p id="51c4" class="pw-post-body-paragraph kz la iq lc b ld le jr lf lg lh ju li lw lk ll lm lx lo lp lq ly ls lt lu lv ij bi translated">3.一些例子:</p><div class="kg kh ki kj gt ab cb"><figure class="on kk oo op oq or os paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><img src="../Images/affa6d2204f676e2122e993403c00358.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*p9Ux-Wyad1fn15WxEEJtww.png"/></div></figure><figure class="on kk oo op oq or os paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><img src="../Images/bca9915cf7407f86ba989338d528ea07.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*4_ox_rPKZ4gWtC2Ns-e0vQ.png"/></div></figure><figure class="on kk oo op oq or os paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><img src="../Images/75601693a5021d96ed1468e3850efeba.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*IylvIMOqaOJbIStNmsDUpA.png"/></div><p class="kr ks gj gh gi kt ku bd b be z dk ot di ou ov translated">作者提供的图片</p></figure></div><p id="cddf" class="pw-post-body-paragraph kz la iq lc b ld le jr lf lg lh ju li lw lk ll lm lx lo lp lq ly ls lt lu lv ij bi translated">但是我们为什么要这么做呢？</p><p id="73de" class="pw-post-body-paragraph kz la iq lc b ld le jr lf lg lh ju li lw lk ll lm lx lo lp lq ly ls lt lu lv ij bi translated">因为我们现在有了模型，所以我们可以对更多的数据点进行采样(比如说 1000 个而不是 20 个)。我们将使用这个<strong class="lc ir">代理模型</strong>来比较两个不同的州。</p><p id="7e49" class="pw-post-body-paragraph kz la iq lc b ld le jr lf lg lh ju li lw lk ll lm lx lo lp lq ly ls lt lu lv ij bi translated">我们将使用以下函数来实现这一点:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nk nl l"/></div></figure><p id="c4a5" class="pw-post-body-paragraph kz la iq lc b ld le jr lf lg lh ju li lw lk ll lm lx lo lp lq ly ls lt lu lv ij bi translated">让我给你看一些例子:</p><div class="kg kh ki kj gt ab cb"><figure class="on kk ow op oq or os paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><img src="../Images/0325e3cac41a8bbdf9c08b827fb7f17e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1030/format:webp/1*7nUJYBr2PKJdsTt0K4ZvGw.png"/></div></figure><figure class="on kk ox op oq or os paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><img src="../Images/9b70b3cfaa3fb49daf2ad314d1d205e8.png" data-original-src="https://miro.medium.com/v2/resize:fit:972/format:webp/1*-8512vBlDkWnHfgiTl-qfQ.png"/></div></figure></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oy"><img src="../Images/751801e7d170a4bc88bf7e3aad69e127.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mvPzA3ePiT8gx5h_k08bjA.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">作者提供的图片</p></figure><p id="d586" class="pw-post-body-paragraph kz la iq lc b ld le jr lf lg lh ju li lw lk ll lm lx lo lp lq ly ls lt lu lv ij bi translated">这个代理模型让我们看到两个函数的交集在哪里。</p><p id="52b5" class="pw-post-body-paragraph kz la iq lc b ld le jr lf lg lh ju li lw lk ll lm lx lo lp lq ly ls lt lu lv ij bi translated">换句话说，它告诉我们加州(州 1)何时比俄亥俄州(州 2)生产得多，以及俄亥俄州(州 2)何时比加州(州 1)生产得多。</p><p id="e991" class="pw-post-body-paragraph kz la iq lc b ld le jr lf lg lh ju li lw lk ll lm lx lo lp lq ly ls lt lu lv ij bi translated">从我所举的例子中，我们可以得出一些非常有趣的观点。</p><ol class=""><li id="2d92" class="lz ma iq lc b ld le lg lh lw mb lx mc ly md lv me mf mg mh bi translated">从 1995 年到 2012 年，阿拉巴马州的产量远远低于印第安纳州，但在过去 10 年里，它的产量超过了印第安纳州(2015 年有什么变化吗？)</li><li id="bedc" class="lz ma iq lc b ld mi lg mj lw mk lx ml ly mm lv me mf mg mh bi translated">同样，在过去的 5-6 年里，除了 T5 之外，北达科他州 T1 的产量似乎已经超过了 T2、南达科他州 T3 和 T4，但是现在他们开始越来越接近了，这看起来趋势又要逆转了。</li><li id="7da2" class="lz ma iq lc b ld mi lg mj lw mk lx ml ly mm lv me mf mg mh bi translated"><strong class="lc ir">加州</strong>在整个范围内产生了比<strong class="lc ir">俄亥俄州</strong>更多的产量(我不会那么信任那一小块正区域)，但是随着时间的推移，它们会越来越接近。在过去的两年里，这一差距似乎又要加大了。</li></ol><p id="9bbc" class="pw-post-body-paragraph kz la iq lc b ld le jr lf lg lh ju li lw lk ll lm lx lo lp lq ly ls lt lu lv ij bi translated">我认为这可能非常有用。例如，我们可以使用一个州作为基线(我不知道…弗吉尼亚州)，并将其与所有其他州进行比较。作为工程师，我们经常使用“<strong class="lc ir">基线</strong>的概念和“<strong class="lc ir">基线减法”</strong>的概念。</p><p id="4109" class="pw-post-body-paragraph kz la iq lc b ld le jr lf lg lh ju li lw lk ll lm lx lo lp lq ly ls lt lu lv ij bi translated">如前所述，如果我们想对价格做同样的事情，我们只需小心地将其调整到正确的点，以避免下跌。<br/>我太爱你了，不想让你知道这个繁琐的数据清理步骤的细节，但是请相信我<strong class="lc ir">或者</strong>看看这个威风凛凛的笔记本<a class="ae kv" href="https://jovian.ai/piero-paialunga/honeystudyusa" rel="noopener ugc nofollow" target="_blank"/>。</p><p id="a5a7" class="pw-post-body-paragraph kz la iq lc b ld le jr lf lg lh ju li lw lk ll lm lx lo lp lq ly ls lt lu lv ij bi translated">因此，如果您想做同样的分析，但是使用的是<strong class="lc ir">平均价格</strong>而不是<strong class="lc ir">产量</strong>列，您可以运行以下代码:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nk nl l"/></div></figure><p id="95a1" class="pw-post-body-paragraph kz la iq lc b ld le jr lf lg lh ju li lw lk ll lm lx lo lp lq ly ls lt lu lv ij bi translated">这是一个可爱的例子:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oz"><img src="../Images/fe174880a26c272455e9d1d7a580661d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*OnqzK5cyFTMxkPLN9FX8yA.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">作者图片</p></figure><h2 id="b08b" class="nm mo iq bd mp nn no dn mt np nq dp mx lw nr ns mz lx nt nu nb ly nv nw nd nx bi translated">3.3 相关性研究</h2><p id="363c" class="pw-post-body-paragraph kz la iq lc b ld nf jr lf lg ng ju li lw nh ll lm lx ni lp lq ly nj lt lu lv ij bi translated">让我以一个关于相关性的非常小的研究来结束这篇文章。假设我们想知道哪些参数对平均价格的影响最大。我们可以使用两种方法:</p><ol class=""><li id="fd89" class="lz ma iq lc b ld le lg lh lw mb lx mc ly md lv me mf mg mh bi translated"><strong class="lc ir">相互信息</strong></li><li id="916c" class="lz ma iq lc b ld mi lg mj lw mk lx ml ly mm lv me mf mg mh bi translated"><strong class="lc ir">皮尔森相关性</strong></li></ol><p id="8ba2" class="pw-post-body-paragraph kz la iq lc b ld le jr lf lg lh ju li lw lk ll lm lx lo lp lq ly ls lt lu lv ij bi translated">Pearson 相关性是用 pd.corr()实现的，它只不过是一个指标，表明特性之间有多少线性相关性。正如我们已经看到的，即使在第一个数据中，年份和平均价格之间的相关性看起来根本不是线性的。出于这个原因，我还使用了<strong class="lc ir">互信息</strong>得分，它让您了解两个特征之间的<strong class="lc ir">统计相关性</strong>，这是我们真正想要的。</p><ol class=""><li id="dbc2" class="lz ma iq lc b ld le lg lh lw mb lx mc ly md lv me mf mg mh bi translated"><strong class="lc ir">互信息代码和结果:</strong></li></ol><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nk nl l"/></div></figure><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nk nl l"/></div></figure><p id="26d4" class="pw-post-body-paragraph kz la iq lc b ld le jr lf lg lh ju li lw lk ll lm lx lo lp lq ly ls lt lu lv ij bi translated">除了年份列的之外，没有太多的相关性<strong class="lc ir">。这可能是因为数据看起来相当分散(看一些平均价格图)。<strong class="lc ir">年</strong>和均价高度相关，这和我们在价格图中看到的巨幅下跌是百分之百相关的。如果我们对干净的数据进行分析，我相信这个值会降低。</strong></p><p id="a961" class="pw-post-body-paragraph kz la iq lc b ld le jr lf lg lh ju li lw lk ll lm lx lo lp lq ly ls lt lu lv ij bi translated">2.<strong class="lc ir">线性相关码和结果:</strong></p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nk nl l"/></div></figure><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nk nl l"/></div></figure><p id="f4b6" class="pw-post-body-paragraph kz la iq lc b ld le jr lf lg lh ju li lw lk ll lm lx lo lp lq ly ls lt lu lv ij bi translated">这很有趣。你拥有的越多，花费越少。这是商业 101，反映在产量和价格之间的负相关性上。线性相关对我们看到的平均价格的下降也是有意义的。我相信，通过使用过滤后的数据，这种相关性将会增加。</p><h1 id="5784" class="mn mo iq bd mp mq mr ms mt mu mv mw mx jw my jx mz jz na ka nb kc nc kd nd ne bi translated">4.考虑</h1><p id="4b9b" class="pw-post-body-paragraph kz la iq lc b ld nf jr lf lg ng ju li lw nh ll lm lx ni lp lq ly nj lt lu lv ij bi translated">在这项关于美国蜂蜜消费和价格的探索性数据分析中，我们做了以下工作:</p><ol class=""><li id="8a3c" class="lz ma iq lc b ld le lg lh lw mb lx mc ly md lv me mf mg mh bi translated">我们数据集中<strong class="lc ir">缺失状态</strong>的<strong class="lc ir">探索</strong>。</li><li id="1e6c" class="lz ma iq lc b ld mi lg mj lw mk lx ml ly mm lv me mf mg mh bi translated">对美国最大产量和最贵蜂蜜的<strong class="lc ir">非时变</strong>分析。</li><li id="664c" class="lz ma iq lc b ld mi lg mj lw mk lx ml ly mm lv me mf mg mh bi translated">一个<strong class="lc ir">回归</strong>，时间相关，蜂蜜产量和平均价格的分析。这允许我们为美国的每个州建立一个代理模型。</li><li id="bafb" class="lz ma iq lc b ld mi lg mj lw mk lx ml ly mm lv me mf mg mh bi translated">使用替代模型产生的两个输入状态之间的<strong class="lc ir">时间相关比较</strong>。通过比较，我们得出了一些非常有趣的观点和观察结果。</li><li id="0f85" class="lz ma iq lc b ld mi lg mj lw mk lx ml ly mm lv me mf mg mh bi translated">与最后一点相同的研究为<strong class="lc ir">平均价格</strong></li><li id="b3cf" class="lz ma iq lc b ld mi lg mj lw mk lx ml ly mm lv me mf mg mh bi translated">对我们的数据集和<strong class="lc ir"> average_price </strong>数据集的特征之间的相关性进行微观研究。</li></ol><h1 id="3f3b" class="mn mo iq bd mp mq mr ms mt mu mv mw mx jw my jx mz jz na ka nb kc nc kd nd ne bi translated">5.结论</h1><p id="b42f" class="pw-post-body-paragraph kz la iq lc b ld nf jr lf lg ng ju li lw nh ll lm lx ni lp lq ly nj lt lu lv ij bi translated">如果你喜欢这篇文章，你想了解更多关于机器学习的知识，或者你只是想问我一些问题，你可以:</p><p id="3d92" class="pw-post-body-paragraph kz la iq lc b ld le jr lf lg lh ju li lw lk ll lm lx lo lp lq ly ls lt lu lv ij bi translated">A.在<a class="ae kv" href="https://www.linkedin.com/in/pieropaialunga/" rel="noopener ugc nofollow" target="_blank"> <strong class="lc ir"> Linkedin </strong> </a>上关注我，在那里我发布我所有的故事<br/> B .订阅我的<a class="ae kv" href="https://piero-paialunga.medium.com/subscribe" rel="noopener"> <strong class="lc ir">简讯</strong> </a>。这会让你了解新的故事，并给你机会发短信给我，让我收到你所有的更正或疑问。<br/> C .成为<a class="ae kv" href="https://piero-paialunga.medium.com/membership" rel="noopener"> <strong class="lc ir">推荐会员</strong> </a>，这样你就不会有任何“本月最大数量的故事”，你可以阅读我(以及数千名其他机器学习和数据科学顶级作家)写的任何关于最新可用技术的文章。</p></div></div>    
</body>
</html>