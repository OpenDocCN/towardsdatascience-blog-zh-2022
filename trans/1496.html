<html>
<head>
<title>Visualizing Audio Data and Performing Feature Extraction</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">可视化音频数据并执行特征提取</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/visualizing-audio-data-and-performing-feature-extraction-e1a489046000#2022-04-12">https://towardsdatascience.com/visualizing-audio-data-and-performing-feature-extraction-e1a489046000#2022-04-12</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/58b5470e19eb5fe1cb03a4c74da11371.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*541t2qmakKA0F7Atxudv-A.jpeg"/></div></div><p class="jy jz gj gh gi ka kb bd b be z dk translated">丹尼尔·施鲁迪在<a class="ae kc" href="https://unsplash.com/s/photos/audio?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure><h1 id="6e60" class="kd ke iq bd kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la bi translated">介绍</h1><p id="7725" class="pw-post-body-paragraph lb lc iq ld b le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">音频只是简单的声音，我们在日常生活中听到的声音。例如，通过经验，人类大脑可以很好地区分救护车的声音和出租车的声音。但是我们能创建机器学习模型来进行这样的分类吗？</p><p id="c9d0" class="pw-post-body-paragraph lb lc iq ld b le lz lg lh li ma lk ll lm mb lo lp lq mc ls lt lu md lw lx ly ij bi translated">处理音频数据变得有点势不可挡，因为我们无法像处理一组表格或图像那样将其可视化。在本文中，我们将可视化音频数据，然后从音频中提取有用的特征。</p><h1 id="1323" class="kd ke iq bd kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la bi translated">数据</h1><p id="014c" class="pw-post-body-paragraph lb lc iq ld b le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">数据收集自<a class="ae kc" href="https://www.kaggle.com/competitions/kaggle-pog-series-s01e02/overview" rel="noopener ugc nofollow" target="_blank"> Kaggle </a>。它包括19种不同风格音乐的音频数据。音频文件每个30秒。</p><p id="ea1a" class="pw-post-body-paragraph lb lc iq ld b le lz lg lh li ma lk ll lm mb lo lp lq mc ls lt lu md lw lx ly ij bi translated">我们有一个流派文件，具有以下特点:</p><ul class=""><li id="9233" class="me mf iq ld b le lz li ma lm mg lq mh lu mi ly mj mk ml mm bi translated">流派:流派的名称</li><li id="9a38" class="me mf iq ld b le mn li mo lm mp lq mq lu mr ly mj mk ml mm bi translated">流派id:流派的唯一id</li></ul><figure class="ms mt mu mv gt jr"><div class="bz fp l di"><div class="mw mx l"/></div></figure><figure class="ms mt mu mv gt jr gh gi paragraph-image"><div class="gh gi my"><img src="../Images/12691e1627b66d74c81c395ad88696b5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1002/0*PonIJuQDTDWg2GOe.PNG"/></div><p class="jy jz gj gh gi ka kb bd b be z dk translated">作者图片</p></figure><figure class="ms mt mu mv gt jr"><div class="bz fp l di"><div class="mw mx l"/></div></figure><figure class="ms mt mu mv gt jr gh gi paragraph-image"><div class="gh gi mz"><img src="../Images/8cf4c742bb84fdfbd702996b9c01d45e.png" data-original-src="https://miro.medium.com/v2/resize:fit:646/0*cgKw7Bi1gm_t649e.PNG"/></div><p class="jy jz gj gh gi ka kb bd b be z dk translated">作者图片</p></figure><p id="b19f" class="pw-post-body-paragraph lb lc iq ld b le lz lg lh li ma lk ll lm mb lo lp lq mc ls lt lu md lw lx ly ij bi translated">训练数据帧包括:</p><ul class=""><li id="4847" class="me mf iq ld b le lz li ma lm mg lq mh lu mi ly mj mk ml mm bi translated">歌曲id:音频文件的唯一id</li><li id="98e2" class="me mf iq ld b le mn li mo lm mp lq mq lu mr ly mj mk ml mm bi translated">文件名:文件的名称</li><li id="a1ac" class="me mf iq ld b le mn li mo lm mp lq mq lu mr ly mj mk ml mm bi translated">文件路径:音频文件可用的路径</li><li id="92f2" class="me mf iq ld b le mn li mo lm mp lq mq lu mr ly mj mk ml mm bi translated">流派:流派的名称</li><li id="2429" class="me mf iq ld b le mn li mo lm mp lq mq lu mr ly mj mk ml mm bi translated">流派id:流派的唯一id</li></ul><figure class="ms mt mu mv gt jr"><div class="bz fp l di"><div class="mw mx l"/></div></figure><figure class="ms mt mu mv gt jr gh gi paragraph-image"><div class="gh gi na"><img src="../Images/869696574d1789e00af597d148fd82fa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1098/0*PDgZFi7DE2xs3vGU.PNG"/></div><p class="jy jz gj gh gi ka kb bd b be z dk translated">作者图片</p></figure><figure class="ms mt mu mv gt jr"><div class="bz fp l di"><div class="mw mx l"/></div></figure><figure class="ms mt mu mv gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi nb"><img src="../Images/bb17a0b2aea5a5b598cfa8856f524ee7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*x6SInT0xXBTP2jZ9.PNG"/></div></div><p class="jy jz gj gh gi ka kb bd b be z dk translated">作者图片</p></figure><p id="043b" class="pw-post-body-paragraph lb lc iq ld b le lz lg lh li ma lk ll lm mb lo lp lq mc ls lt lu md lw lx ly ij bi translated">除了列流派和流派id之外，测试数据具有与列车相同的列数</p><p id="7ba7" class="pw-post-body-paragraph lb lc iq ld b le lz lg lh li ma lk ll lm mb lo lp lq mc ls lt lu md lw lx ly ij bi translated">快速浏览数据中可用的不同类型。</p><p id="89c5" class="pw-post-body-paragraph lb lc iq ld b le lz lg lh li ma lk ll lm mb lo lp lq mc ls lt lu md lw lx ly ij bi translated">genre _ group = train . group by([' genre '])。计数()</p><figure class="ms mt mu mv gt jr"><div class="bz fp l di"><div class="mw mx l"/></div></figure><figure class="ms mt mu mv gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi nc"><img src="../Images/9b93288801965c7da5d499cc5aae2413.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*KKYBDrlBUC0K1ILp.PNG"/></div></div><p class="jy jz gj gh gi ka kb bd b be z dk translated">作者图片</p></figure><p id="fe52" class="pw-post-body-paragraph lb lc iq ld b le lz lg lh li ma lk ll lm mb lo lp lq mc ls lt lu md lw lx ly ij bi translated">我们在类型变量上有一个不平衡；像电子和摇滚这样的流派有近3000个样本，而像布鲁斯和轻松听这样的流派甚至没有100个样本。</p><p id="ed35" class="pw-post-body-paragraph lb lc iq ld b le lz lg lh li ma lk ll lm mb lo lp lq mc ls lt lu md lw lx ly ij bi translated">在将其传递给模型时，需要考虑到这一点。</p><h1 id="2ba4" class="kd ke iq bd kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la bi translated">重要的图书馆</h1><p id="f90f" class="pw-post-body-paragraph lb lc iq ld b le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">这个库使得返回所有匹配特定模式的路径变得更加容易。因为我们将音频数据文件存储在基于流派的不同文件路径中，所以我们将使用这个库。</p><p id="bcd6" class="pw-post-body-paragraph lb lc iq ld b le lz lg lh li ma lk ll lm mb lo lp lq mc ls lt lu md lw lx ly ij bi translated">librosa :这个库是一个用于音乐和音频分析的构建模块。</p><p id="0500" class="pw-post-body-paragraph lb lc iq ld b le lz lg lh li ma lk ll lm mb lo lp lq mc ls lt lu md lw lx ly ij bi translated"><strong class="ld ir"> IPython.display: </strong>听我们笔记本里的音频。</p><p id="41d5" class="pw-post-body-paragraph lb lc iq ld b le lz lg lh li ma lk ll lm mb lo lp lq mc ls lt lu md lw lx ly ij bi translated">让我们导入这些库:</p><figure class="ms mt mu mv gt jr"><div class="bz fp l di"><div class="mw mx l"/></div></figure><p id="e03f" class="pw-post-body-paragraph lb lc iq ld b le lz lg lh li ma lk ll lm mb lo lp lq mc ls lt lu md lw lx ly ij bi translated">音频文件格式</p><p id="af90" class="pw-post-body-paragraph lb lc iq ld b le lz lg lh li ma lk ll lm mb lo lp lq mc ls lt lu md lw lx ly ij bi translated">音频数据可以以不同的格式编码，如wav，它代表波形音频文件格式。WAV没有压缩，只有一些转换来存储声音，这将导致巨大的音频文件大小。</p><p id="ec22" class="pw-post-body-paragraph lb lc iq ld b le lz lg lh li ma lk ll lm mb lo lp lq mc ls lt lu md lw lx ly ij bi translated">MP3问世了，它通过压缩使音频文件变得更小。</p><p id="02d0" class="pw-post-body-paragraph lb lc iq ld b le lz lg lh li ma lk ll lm mb lo lp lq mc ls lt lu md lw lx ly ij bi translated">我们的数据中有Ogg格式的音频文件。OGG是一种开放的容器格式，将艺术家的元数据与音频文件一起存储。</p><h1 id="a354" class="kd ke iq bd kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la bi translated">可视化数据</h1><p id="8ee8" class="pw-post-body-paragraph lb lc iq ld b le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">我们使用librosa load加载不同流派的音频数据，并使用matplotlib绘制它们。</p><p id="59e6" class="pw-post-body-paragraph lb lc iq ld b le lz lg lh li ma lk ll lm mb lo lp lq mc ls lt lu md lw lx ly ij bi translated">天秤座。load返回一个音频时间序列，描述音频在不同时间步长的幅度。</p><p id="fcfb" class="pw-post-body-paragraph lb lc iq ld b le lz lg lh li ma lk ll lm mb lo lp lq mc ls lt lu md lw lx ly ij bi translated">振幅是麦克风或录音设备附近的压力变化。</p><p id="f76d" class="pw-post-body-paragraph lb lc iq ld b le lz lg lh li ma lk ll lm mb lo lp lq mc ls lt lu md lw lx ly ij bi translated">正如你可以从下面的视频中看到的，不同类型的不同时间步长的幅度是非常不同的。</p><p id="8c2d" class="pw-post-body-paragraph lb lc iq ld b le lz lg lh li ma lk ll lm mb lo lp lq mc ls lt lu md lw lx ly ij bi translated">在对不同的音频进行分类时，我们必须使用相同的方法。接下来，我们转向特征工程。</p><figure class="ms mt mu mv gt jr"><div class="bz fp l di"><div class="mw mx l"/></div></figure><h1 id="de06" class="kd ke iq bd kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la bi translated">特征工程</h1><p id="68fa" class="pw-post-body-paragraph lb lc iq ld b le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">我们不能将原始音频文件原样传递给我们的机器学习模型，我们需要从音频数据中提取一些特征。在文章的这一部分，我们也在做同样的工作。</p><p id="d424" class="pw-post-body-paragraph lb lc iq ld b le lz lg lh li ma lk ll lm mb lo lp lq mc ls lt lu md lw lx ly ij bi translated"><strong class="ld ir"> 1)过零率</strong></p><p id="c201" class="pw-post-body-paragraph lb lc iq ld b le lz lg lh li ma lk ll lm mb lo lp lq mc ls lt lu md lw lx ly ij bi translated">过零率描述信号从正到零再到负或从负到零再到正的速率。该特征在音乐检索系统中用于识别噪声信号。</p><p id="2cf3" class="pw-post-body-paragraph lb lc iq ld b le lz lg lh li ma lk ll lm mb lo lp lq mc ls lt lu md lw lx ly ij bi translated">噪声越大，过零率越高。我们使用librosa的函数zero_crossing进行计算。</p><figure class="ms mt mu mv gt jr"><div class="bz fp l di"><div class="mw mx l"/></div></figure><figure class="ms mt mu mv gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi nd"><img src="../Images/3326f0257652b45e5c2cecc78f6871b9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*keK3y2KkLmdkiVTQ.PNG"/></div></div><p class="jy jz gj gh gi ka kb bd b be z dk translated">作者图片</p></figure><p id="261b" class="pw-post-body-paragraph lb lc iq ld b le lz lg lh li ma lk ll lm mb lo lp lq mc ls lt lu md lw lx ly ij bi translated">接下来，我们还可以看到过零率。</p><figure class="ms mt mu mv gt jr"><div class="bz fp l di"><div class="mw mx l"/></div></figure><figure class="ms mt mu mv gt jr"><div class="bz fp l di"><div class="ne mx l"/></div></figure><p id="f49d" class="pw-post-body-paragraph lb lc iq ld b le lz lg lh li ma lk ll lm mb lo lp lq mc ls lt lu md lw lx ly ij bi translated"><strong class="ld ir">观察:</strong></p><ul class=""><li id="1662" class="me mf iq ld b le lz li ma lm mg lq mh lu mi ly mj mk ml mm bi translated">pop的过零率最低(22405)，电子的过零率最高(151029)</li><li id="524b" class="me mf iq ld b le mn li mo lm mp lq mq lu mr ly mj mk ml mm bi translated">对于易听、乡村、蓝调和古典等流派，过零率远低于摇滚、嘻哈和爵士等流派。</li></ul><p id="0de8" class="pw-post-body-paragraph lb lc iq ld b le lz lg lh li ma lk ll lm mb lo lp lq mc ls lt lu md lw lx ly ij bi translated"><strong class="ld ir"> 2)速度/每分钟节拍数</strong></p><p id="6227" class="pw-post-body-paragraph lb lc iq ld b le lz lg lh li ma lk ll lm mb lo lp lq mc ls lt lu md lw lx ly ij bi translated">每分钟节拍数指定每分钟的节拍数。很简单的定义，不是吗？</p><p id="bdd1" class="pw-post-body-paragraph lb lc iq ld b le lz lg lh li ma lk ll lm mb lo lp lq mc ls lt lu md lw lx ly ij bi translated">每分钟节拍是一种表示音频速度的数字方式。</p><figure class="ms mt mu mv gt jr"><div class="bz fp l di"><div class="mw mx l"/></div></figure><figure class="ms mt mu mv gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi nf"><img src="../Images/22916f03eca625df1240ba74bd54b929.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*Q8rWjbvj20EiJuqT.PNG"/></div></div><p class="jy jz gj gh gi ka kb bd b be z dk translated">作者图片</p></figure><p id="ad69" class="pw-post-body-paragraph lb lc iq ld b le lz lg lh li ma lk ll lm mb lo lp lq mc ls lt lu md lw lx ly ij bi translated">国际和实验有大约160 bpm，而易听有80。</p><p id="28b9" class="pw-post-body-paragraph lb lc iq ld b le lz lg lh li ma lk ll lm mb lo lp lq mc ls lt lu md lw lx ly ij bi translated">可以探索的一些其他特性的列表。</p><p id="d664" class="pw-post-body-paragraph lb lc iq ld b le lz lg lh li ma lk ll lm mb lo lp lq mc ls lt lu md lw lx ly ij bi translated">和声:这些是使我们能够听到旋律的音高声音。</p><p id="eca8" class="pw-post-body-paragraph lb lc iq ld b le lz lg lh li ma lk ll lm mb lo lp lq mc ls lt lu md lw lx ly ij bi translated"><strong class="ld ir">敲击声:</strong>这更像是源自乐器的声音，就像鼓上的拍子。</p><figure class="ms mt mu mv gt jr"><div class="bz fp l di"><div class="mw mx l"/></div></figure><figure class="ms mt mu mv gt jr"><div class="bz fp l di"><div class="mw mx l"/></div></figure><figure class="ms mt mu mv gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi ng"><img src="../Images/6fcc8535171bfb0133156c4e21f136b0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*WYxtUc_PdC_f3THc.PNG"/></div></div><p class="jy jz gj gh gi ka kb bd b be z dk translated">作者图片</p></figure><p id="365c" class="pw-post-body-paragraph lb lc iq ld b le lz lg lh li ma lk ll lm mb lo lp lq mc ls lt lu md lw lx ly ij bi translated">光谱质心</p><p id="9767" class="pw-post-body-paragraph lb lc iq ld b le lz lg lh li ma lk ll lm mb lo lp lq mc ls lt lu md lw lx ly ij bi translated">计算为音频文件中频率的加权平均值。</p><figure class="ms mt mu mv gt jr"><div class="bz fp l di"><div class="mw mx l"/></div></figure><figure class="ms mt mu mv gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi nh"><img src="../Images/6d2f78db3dfa5de27226e541bd24feec.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*5HLhjjapgmcmFY19.PNG"/></div></div><p class="jy jz gj gh gi ka kb bd b be z dk translated">作者图片</p></figure><h1 id="b15e" class="kd ke iq bd kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la bi translated">结论:</h1><p id="5961" class="pw-post-body-paragraph lb lc iq ld b le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">我们在文章中使用了音频数据，使用Ipython显示库，我们听到了数据集的一些样本。</p><p id="2527" class="pw-post-body-paragraph lb lc iq ld b le lz lg lh li ma lk ll lm mb lo lp lq mc ls lt lu md lw lx ly ij bi translated">我们发现，数据集是不平衡的。我们探索了音频数据的重要库以及音频数据可用的各种格式。我们已经将过零率、节奏和频谱质心用于特征工程。您可以使用librosa中的各种功能来生成音频数据的特征。然后，这些特征可以作为输入提供给机器学习模型，或者用于更好地理解数据。您可以探索的其他功能有<a class="ae kc" href="https://librosa.org/doc/main/feature.html" rel="noopener ugc nofollow" target="_blank">这里</a>。</p></div></div>    
</body>
</html>