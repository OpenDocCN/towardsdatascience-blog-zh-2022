<html>
<head>
<title>Find the order of ARIMA models</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">查找ARIMA模型的顺序</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/find-the-order-of-arima-models-b4d99d474e7a#2022-05-26">https://towardsdatascience.com/find-the-order-of-arima-models-b4d99d474e7a#2022-05-26</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="f249" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">了解并找到时间序列基本建模的最佳参数</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/fa009ff8b7335765c2ae6865354fec48.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*HhtiUeviMGW2t9J5"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">图片由<a class="ae ky" href="https://unsplash.com/@m_____me" rel="noopener ugc nofollow" target="_blank"> @m_____me </a></p></figure><p id="bf84" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">ARIMA是开始单变量时间序列实验的最佳模型之一。它提供了最先进的性能，特别是在小数据集的情况下，深度学习模型尚未处于最佳状态。</p><p id="72b7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这是一个简单的，可解释的模型，但ARIMA是一个参数模型。这意味着在拟合模型之前需要设置特定的参数。事实上，模型的自回归、移动平均和平稳部分分别需要参数<strong class="lb iu"> p、q和d</strong></p><p id="316e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在本文中，您将了解这些参数是什么，以及如何使用<strong class="lb iu"> ACF </strong>、<strong class="lb iu"> PACF图</strong>和<strong class="lb iu"> BIC/AIC </strong>信息标准找到最佳参数</p><h1 id="b175" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated"><strong class="ak">了解ARIMA车型</strong></h1><p id="9fce" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">首先，我们需要对这些模型有个基本的了解。</p><p id="92f0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">时间序列中“线性回归”或“经典模型”的等价物是ar和MA。这些基本模型通常表现良好。它们是可解释的、轻量级的，是开始任何数据科学项目的良好基础。</p><p id="5013" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">ARMA模型有一个严重的限制。它假设输入数据是稳定的(时间序列的均值和方差不依赖于时间序列被观察的时间)。如果您的数据是非平稳的，您可以使用AR <strong class="lb iu"> I </strong> MA模型，其中<strong class="lb iu"> I </strong>代表“集成的”。积分部分说明了“微分”，这是一种去除趋势并使时间序列平稳的方法。</p><h1 id="7cd3" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">1)自回归模型</h1><p id="92d6" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">订单<strong class="lb iu"> p </strong>的<strong class="lb iu"> AR </strong>是一个回归自身<strong class="lb iu"> p过去值</strong>的模型。换句话说，系列Vt的当前值可以解释为p个过去值与随机误差的线性组合。我们假设下一个值与前p个值相关。用于预测下一个值的先前输入的数量被称为“顺序”。我们通常称之为“p”。这些用来计算下一个值的先验值被称为“滞后变量”。</p><p id="f06f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">作为滞后变量线性组合的Vt方程为:</p><p id="c2e8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">AR(p):Vt = ao+a1V { t-1 }+…+apV { t-p }+Nt。</p><p id="45ea" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">当我们拟合AR模型时，我们在[0，p]中估计I的{ai}。<em class="ms"> Nt </em>是一个白噪声过程(我们称之为“白噪声过程”是一系列均值为0、方差恒定且误差不相关的随机值)和<em class="ms"> ao </em>均值。</p><p id="41be" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">比如，当p=3时，为了预测下一个时间戳(和时间序列均值a0)，我们代入最后三个值，分别乘以系数a1，a2，a3。</p><p id="5f3d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">您可以看到如何使用下面的代码片段模拟订单p的AR模型:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mt mu l"/></div></figure><p id="c0c1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">该模型将以下内容作为输入:</p><ul class=""><li id="d800" class="mv mw it lb b lc ld lf lg li mx lm my lq mz lu na nb nc nd bi translated">随机变量的实现列表V</li></ul><pre class="kj kk kl km gt ne nf ng nh aw ni bi"><span id="05c4" class="nj lw it nf b gy nk nl l nm nn">rand_v_list = np.random.normal(size=N)</span></pre><ul class=""><li id="6a97" class="mv mw it lb b lc ld lf lg li mx lm my lq mz lu na nb nc nd bi translated">p系数列表{ao，…，ap}。</li></ul><p id="7afc" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">模拟的AR模型是将V的p个连续值乘以其p个系数来创建一个时间序列。</p><p id="20e2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们的目标是:给定一个模拟的AR时间序列，如何找到p，用来生成它的参数？</p><h1 id="d410" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">2)移动平均模型</h1><p id="a0e5" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated"><strong class="lb iu">移动平均</strong>模型利用观测值和应用于滞后观测值的移动平均的残差之间的相关性。换句话说，<strong class="lb iu">马</strong>将预测值建模为到<strong class="lb iu"> q </strong>步的过去误差项的线性组合。误差或残差定义为<em class="ms"> res =预测值-真值。</em></p><p id="f941" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">它利用回归方法中以前的预测误差来预测未来的观测值。在这种情况下，每个未来观测值都是以前预测误差的加权平均值。</p><p id="3f26" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">MA(q):Et = B0+B1 * Et-1+…+BP * Et-q+Nt</p><p id="9020" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们估计{bi}在[0，q]中，Nt是白噪声(均值为0且方差有限的不相关随机变量的集合)。</p><p id="1bd5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果残差和预测值之间仍然存在相关性，这意味着我们仍然可以从误差中获得信息。实际上，我们可以认为误差是随机的。MA过程只是来自白噪声过程的值E的加权组合。</p><p id="cd91" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">您可以通过下面的代码片段看到该模型是如何工作的:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mt mu l"/></div></figure><p id="f957" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">该模型采用与ar流程相似的输入。</p><h1 id="3f73" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">3) ARMA</h1><p id="de1c" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated"><strong class="lb iu">自回归移动平均ARMA </strong> (p，q)结合了<strong class="lb iu"> AR </strong> (p)和<strong class="lb iu"> MA </strong> (q)过程，考虑了时间序列的滞后或过去值以及误差项。它是平稳时间序列最有效的线性模型[1]。</p><h1 id="a5b7" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">4) ARIMA</h1><p id="8fce" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">当输入数据不稳定时，用一个<strong class="lb iu">自回归综合移动平均</strong>代替ARMA模型。</p><p id="e1ab" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在ARIMA，积分部分将时间序列“固定化”[2]。当积分的阶数为<em class="ms"> d=0 </em>时，ARIMA的行为类似于ARMA模型。当<em class="ms"> d=1 </em>时，模型将从t处观察到的值中减去t-1值。当数据中存在长期趋势时，您可以添加微分。术语综合指的是建模的时间序列必须不同多少次才能产生平稳性。</p><p id="856d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">当你使用ARIMA模型时，不要手动进行微分，你可以直接在非平稳时间序列上拟合ARIMA模型。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/30b4f34e4363bc572bd3ed52792fd969.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*m1uue47WidWCvxqg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">图片由<a class="ae ky" href="https://unsplash.com/@tezos" rel="noopener ugc nofollow" target="_blank"> @tezos </a></p></figure><h1 id="1e7e" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">分析</h1><p id="6d92" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">现在我们了解了这些过程是如何工作的，以及它们的顺序意味着什么，让我们看看如何在实践中找到参数。为了分别找到模型的AR、integrated和MA部分的参数p、d和q，我们可以使用:</p><ul class=""><li id="4a6f" class="mv mw it lb b lc ld lf lg li mx lm my lq mz lu na nb nc nd bi translated"><strong class="lb iu"> ACF </strong>和<strong class="lb iu"> PACF </strong>剧情。</li><li id="33e2" class="mv mw it lb b lc no lf np li nq lm nr lq ns lu na nb nc nd bi translated">领域知识</li><li id="8587" class="mv mw it lb b lc no lf np li nq lm nr lq ns lu na nb nc nd bi translated">各种适合的度量标准<strong class="lb iu"> (BIC，AIC) </strong></li></ul><p id="1eff" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们提醒p是模型中滞后观测值的数量(也称为滞后阶数)，d是原始观测值的差分次数，q是移动平均窗口的大小。</p><p id="6b9e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们将在下一节介绍如何使用ACF、PACF图、BIC和AIC标准。</p><h1 id="75d2" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">自相关函数</h1><p id="3bca" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">时间序列过程的一个重要方面是<strong class="lb iu">自相关</strong>。自相关是一种统计属性，当一个时间序列与其自身的先前版本或滞后版本线性相关时，就会出现自相关。它还用于检测时间序列中可能的季节性。</p><p id="ce4b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们使用自相关函数来评估时间序列中的依赖程度，并选择适当的模型(MA、AR或ARIMA)。</p><p id="7b54" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">自相关函数(</strong> ACF)和<strong class="lb iu">偏自相关函数</strong> (PACF)可以针对任何时间序列(不仅仅是平稳的)进行计算。</p><p id="8be8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在实践中，我们使用这两个图的组合来确定ARMA过程的顺序。</p><h2 id="9ef7" class="nj lw it bd lx nt nu dn mb nv nw dp mf li nx ny mh lm nz oa mj lq ob oc ml od bi translated">我如何知道我的时间序列遵循哪个过程？</h2><p id="ce0d" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">通用流程:</p><ul class=""><li id="029b" class="mv mw it lb b lc ld lf lg li mx lm my lq mz lu na nb nc nd bi translated">ARIMA(0，0，0)是一个白噪声模型。(Vt=Nt)</li><li id="eea0" class="mv mw it lb b lc no lf np li nq lm nr lq ns lu na nb nc nd bi translated">ARIMA(0，1，0)是随机游走(Vt-V{t-1}=c+Nt，c是均值)</li><li id="414f" class="mv mw it lb b lc no lf np li nq lm nr lq ns lu na nb nc nd bi translated">ARIMA(0，1，1)指数平滑法</li></ul><p id="e349" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">但是除了常见的模式之外，我们使用PACF和ACF图来可视化要识别的模式:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oe"><img src="../Images/3b9ecee73b886a20d292c113c6e8f2a6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qdVp7PiUAc_m_hTEp_aFig.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">过程识别表。作者图片</p></figure><p id="bb26" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在下图中，我们展示了阶为1的AR、MA或ARMA过程中ACF和PACF的行为。如果你的时间序列是AR或MA或ARMA，你可以很容易地使用这个表来识别任何订单。在AR或MA过程的情况下，您可以计算图表中突然下降的峰值数量。在ACF和PACF中，0阶滞后总是等于1(该值与其自身完全相关)，因此我们在第一个峰值后开始计数。</p><h1 id="5e1e" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">1) ACF</h1><p id="c5db" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated"><strong class="lb iu">我们使用自相关函数ACF来了解时间序列与其滞后值的相关程度。</strong></p><p id="eea5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们使用<strong class="lb iu"> ACF </strong>来标识ARMA模型的<strong class="lb iu"> MA(q) </strong>部分。</p><p id="9b04" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">事实上，我们确定哪个滞后变量与产出有很强的相关性。这些滞后变量对时间序列的下一个值有很强的预测能力，应该用于预测。</p><p id="26e4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在实践中，我们计算与输出值有显著自相关的滞后数，以找到MA模型的q值。</p><p id="4bbe" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们针对500个模拟随机观察值，模拟顺序为q=1、q=3、q=5和q=7的四个MA过程。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mt mu l"/></div></figure><p id="6499" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">绘制这四个不同的模拟数据:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mt mu l"/></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi of"><img src="../Images/5b2b3a70f534e45f33fe4b0740b141a1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*QxCCoeLvGKFXU4HurIHyyg.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">顺序递增的不同MA过程。作者图片</p></figure><p id="3320" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在，让我们用ACF和PACF图绘制MA(q=5)模拟数据。</p><p id="5660" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在右图中，我们可以看到PACF图上的阻尼下降(正的和负的)。即使在滞后10年之后，滞后仍然很明显。而在左侧的ACF图上，在1+5个显著滞后之后，所有随后的滞后都不显著。我们可以看到一个并购过程。</p><p id="5b45" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">为了找到q，我们可以计算ACF图上显著滞后的数量(蓝带之外)。除了第一个滞后对应于值与其自身的相关性之外，我们可以看到与序列的接下来5个滞后的相关性。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi og"><img src="../Images/3d60dfd7a7ef338a891f6b9b83216a32.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*QPYb_vRyyP3W745Q1uaI9A.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">ACF和PACF用于MA(q=5)。我们可以在ACF中读取5个显著或“高”峰，左图。作者图片</p></figure><h1 id="3d2c" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">2) PACF</h1><h2 id="d633" class="nj lw it bd lx nt nu dn mb nv nw dp mf li nx ny mh lm nz oa mj lq ob oc ml od bi translated">直觉</h2><p id="c92f" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated"><strong class="lb iu">偏自相关函数(PACF) </strong>表示在我们考虑一些其他变量集合的值的假设下，两个变量之间的相关性。在回归中，这种部分相关性可以通过关联两个不同回归的残差来找到。</p><p id="073a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们使用PACF来寻找残差与下一个滞后的相关性。如果我们发现残差和下一个滞后中隐藏的信息具有合理的相关性，我们将使用下一个滞后作为建模的特征。</p><p id="b568" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">换句话说，目标时间戳和先前时间戳之间的自相关值由两个值之间的直接相关性加上间接相关性组成。我们认为这些间接相关性是观察值相关性的线性函数。</p><p id="1f6a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们可以使用PACF来计算AR流程中显著滞后的数量。</p><h2 id="f1d0" class="nj lw it bd lx nt nu dn mb nv nw dp mf li nx ny mh lm nz oa mj lq ob oc ml od bi translated">实验</h2><p id="2071" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">首先让我们模拟p=1，p=3，p=5，p=7的移动平均AR。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mt mu l"/></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi of"><img src="../Images/2db76054a2375870874c4227d5865214.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xcZIfHwsTMIyCZZxeQkz_A.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">订单可变的不同AR流程。作者图片</p></figure><p id="7f91" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们可以在上面的图中看到，随着p的增加，我们也增加了时间序列的振荡性质。当时间序列增长过快时，自回归分量会产生一种自然趋势，使其回到平均值。现在它在平均值0附近振荡，但也可能是任何值。因为时间序列既取负值也取正值，所以ACF和PACF图也取正值和负值。</p><p id="18c5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在我们可以画出这些AR过程的ACF和PACF函数，并读出显著滞后的数目作为p的值</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mt mu l"/></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi og"><img src="../Images/85b344ce8eb16a501e8a6cb1437cd81b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Yu42OyYaDkm4i3K_8t7vgg.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">ACF和PACF用于AR(p=7)。我们可以在右边的PACF图上看到七个重要的峰值。图片由作者提供。</p></figure><h1 id="eb67" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">3) AIC/BIC标准</h1><p id="abee" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">绘制ACF/PACF对于识别AR和MA过程是有效的。但是对于ARIMA进程，更常见的是使用<em class="ms"> auto_arima </em>函数。Auto arima是一种强力方法，它尝试不同的p和q值，同时最小化两个标准:AIC和BIC。</p><p id="0c90" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">评估正则化拟合优度的最常见度量是:</p><ul class=""><li id="3dcb" class="mv mw it lb b lc ld lf lg li mx lm my lq mz lu na nb nc nd bi translated">贝叶斯信息准则(BIC)</li><li id="7600" class="mv mw it lb b lc no lf np li nq lm nr lq ns lu na nb nc nd bi translated">赤池信息标准(AIC)。</li></ul><p id="ed49" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这些度量提供了考虑模型复杂性的模型性能的度量。AIC和BIC将一个反映模型与数据拟合程度的术语与一个根据参数数量按比例惩罚模型的术语结合起来[3]。</p><p id="0a5f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">作为一种正则化技术，我们希望根据模型中参数的数量进行惩罚。事实上，p和q越大，你用来预测下一个值的延迟就越多，你就越有可能过度拟合你的数据。</p><blockquote class="oh oi oj"><p id="0bd3" class="kz la ms lb b lc ld ju le lf lg jx lh ok lj lk ll ol ln lo lp om lr ls lt lu im bi translated">自动ARIMA过程旨在确定一个<code class="fe on oo op nf b"><strong class="lb iu">ARIMA</strong></code>模型的最佳参数，确定一个单一的拟合ARIMA模型。[…]</p><p id="cdf9" class="kz la ms lb b lc ld ju le lf lg jx lh ok lj lk ll ol ln lo lp om lr ls lt lu im bi translated">为了找到最佳模型，自动ARIMA为给定的<code class="fe on oo op nf b"><strong class="lb iu">information_criterion</strong></code>(分别为‘AIC’，‘aicc’，‘BIC’，‘hqic’，‘OOB’)(Akaike信息标准、修正的aka ike信息标准、贝叶斯信息标准、Hannan-Quinn信息标准或“出袋”–用于验证评分)之一进行优化，并返回使值最小化的ARIMA。</p></blockquote><p id="9fc9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在实践中，我们使用现成的工具<a class="ae ky" href="https://www.google.com/search?q=auto_arima+pdarima&amp;oq=auto_arima+pdarima&amp;aqs=chrome..69i57j33i160l2.4073j0j1&amp;sourceid=chrome&amp;ie=UTF-8" rel="noopener ugc nofollow" target="_blank"> auto_arima </a>从包<em class="ms"> pmdarima中自动找到时间序列的顺序。</em></p><p id="abe0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们尝试auto_arima来找出我们模拟的几个ma过程的顺序:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mt mu l"/></div></figure><pre class="kj kk kl km gt ne nf ng nh aw ni bi"><span id="dd9b" class="nj lw it nf b gy nk nl l nm nn">q=1<br/>Performing stepwise search to minimize aic<br/> ARIMA(0,0,0)(0,0,0)[0] intercept   : AIC=1605.796, Time=0.01 sec<br/> ARIMA(1,0,0)(0,0,0)[0] intercept   : AIC=1493.552, Time=0.03 sec<br/> ARIMA(0,0,1)(0,0,0)[0] intercept   : AIC=1461.981, Time=0.03 sec<br/> ARIMA(0,0,0)(0,0,0)[0]             : AIC=1604.553, Time=0.01 sec<br/> ARIMA(1,0,1)(0,0,0)[0] intercept   : AIC=1463.723, Time=0.05 sec<br/> ARIMA(0,0,2)(0,0,0)[0] intercept   : AIC=1463.755, Time=0.05 sec<br/> ARIMA(1,0,2)(0,0,0)[0] intercept   : AIC=1465.600, Time=0.13 sec<br/> ARIMA(0,0,1)(0,0,0)[0]             : AIC=1460.398, Time=0.02 sec<br/> ARIMA(1,0,1)(0,0,0)[0]             : AIC=1462.121, Time=0.03 sec<br/> ARIMA(0,0,2)(0,0,0)[0]             : AIC=1462.155, Time=0.02 sec<br/> ARIMA(1,0,0)(0,0,0)[0]             : AIC=1491.861, Time=0.01 sec<br/> ARIMA(1,0,2)(0,0,0)[0]             : AIC=1463.988, Time=0.06 sec<br/><br/>Best model:  ARIMA(0,0,1)(0,0,0)[0]          <br/>Total fit time: 0.468 seconds<br/>Optimal order for is: (0, 0, 1) <br/><br/>q=3<br/>Performing stepwise search to minimize aic<br/> ARIMA(0,0,0)(0,0,0)[0] intercept   : AIC=1702.731, Time=0.01 sec<br/> ARIMA(1,0,0)(0,0,0)[0] intercept   : AIC=1570.816, Time=0.03 sec<br/> ARIMA(0,0,1)(0,0,0)[0] intercept   : AIC=1628.147, Time=0.04 sec<br/> ARIMA(0,0,0)(0,0,0)[0]             : AIC=1701.862, Time=0.01 sec<br/> ARIMA(2,0,0)(0,0,0)[0] intercept   : AIC=1528.848, Time=0.04 sec<br/> ARIMA(3,0,0)(0,0,0)[0] intercept   : AIC=1519.618, Time=0.06 sec<br/> ARIMA(4,0,0)(0,0,0)[0] intercept   : AIC=1485.096, Time=0.06 sec<br/> ARIMA(4,0,1)(0,0,0)[0] intercept   : AIC=1484.876, Time=0.11 sec<br/> ARIMA(3,0,1)(0,0,0)[0] intercept   : AIC=1509.277, Time=0.13 sec<br/> ARIMA(4,0,2)(0,0,0)[0] intercept   : AIC=1464.510, Time=0.17 sec<br/> ARIMA(3,0,2)(0,0,0)[0] intercept   : AIC=1465.074, Time=0.15 sec<br/> ARIMA(4,0,3)(0,0,0)[0] intercept   : AIC=1465.187, Time=0.28 sec<br/> ARIMA(3,0,3)(0,0,0)[0] intercept   : AIC=1464.135, Time=0.20 sec<br/> ARIMA(2,0,3)(0,0,0)[0] intercept   : AIC=1462.726, Time=0.23 sec<br/> ARIMA(1,0,3)(0,0,0)[0] intercept   : AIC=1462.045, Time=0.17 sec<br/> ARIMA(0,0,3)(0,0,0)[0] intercept   : AIC=1460.299, Time=0.09 sec<br/> ARIMA(0,0,2)(0,0,0)[0] intercept   : AIC=1507.915, Time=0.06 sec<br/> ARIMA(0,0,4)(0,0,0)[0] intercept   : AIC=1462.121, Time=0.09 sec<br/> ARIMA(1,0,2)(0,0,0)[0] intercept   : AIC=1467.963, Time=0.08 sec<br/> ARIMA(1,0,4)(0,0,0)[0] intercept   : AIC=1463.941, Time=0.23 sec<br/> ARIMA(0,0,3)(0,0,0)[0]             : AIC=1458.689, Time=0.12 sec<br/> ARIMA(0,0,2)(0,0,0)[0]             : AIC=1506.487, Time=0.03 sec<br/> ARIMA(1,0,3)(0,0,0)[0]             : AIC=1460.415, Time=0.11 sec<br/> ARIMA(0,0,4)(0,0,0)[0]             : AIC=1460.498, Time=0.04 sec<br/> ARIMA(1,0,2)(0,0,0)[0]             : AIC=1466.278, Time=0.07 sec<br/> ARIMA(1,0,4)(0,0,0)[0]             : AIC=1462.305, Time=0.11 sec<br/><br/>Best model:  ARIMA(0,0,3)(0,0,0)[0]          <br/>Total fit time: 2.717 seconds<br/>Optimal order for is: (0, 0, 3) <br/><br/>q=5<br/>Performing stepwise search to minimize aic<br/> ARIMA(0,0,0)(0,0,0)[0] intercept   : AIC=1659.497, Time=0.01 sec<br/> ARIMA(1,0,0)(0,0,0)[0] intercept   : AIC=1570.804, Time=0.03 sec<br/> ARIMA(0,0,1)(0,0,0)[0] intercept   : AIC=1613.884, Time=0.03 sec<br/> ARIMA(0,0,0)(0,0,0)[0]             : AIC=1658.949, Time=0.01 sec<br/> ARIMA(2,0,0)(0,0,0)[0] intercept   : AIC=1495.855, Time=0.04 sec<br/> ARIMA(3,0,0)(0,0,0)[0] intercept   : AIC=1482.804, Time=0.05 sec<br/> ARIMA(4,0,0)(0,0,0)[0] intercept   : AIC=1484.509, Time=0.07 sec<br/> ARIMA(3,0,1)(0,0,0)[0] intercept   : AIC=1484.564, Time=0.11 sec<br/> ARIMA(2,0,1)(0,0,0)[0] intercept   : AIC=1484.926, Time=0.07 sec<br/> ARIMA(4,0,1)(0,0,0)[0] intercept   : AIC=1486.509, Time=0.15 sec<br/> ARIMA(3,0,0)(0,0,0)[0]             : AIC=1481.204, Time=0.03 sec<br/> ARIMA(2,0,0)(0,0,0)[0]             : AIC=1494.160, Time=0.02 sec<br/> ARIMA(4,0,0)(0,0,0)[0]             : AIC=1482.892, Time=0.03 sec<br/> ARIMA(3,0,1)(0,0,0)[0]             : AIC=1482.953, Time=0.05 sec<br/> ARIMA(2,0,1)(0,0,0)[0]             : AIC=1483.270, Time=0.03 sec<br/> ARIMA(4,0,1)(0,0,0)[0]             : AIC=1484.892, Time=0.08 sec<br/><br/>Best model:  ARIMA(3,0,0)(0,0,0)[0]          <br/>Total fit time: 0.824 seconds<br/>Optimal order for is: (3, 0, 0) <br/><br/>q=7<br/>Performing stepwise search to minimize aic<br/> ARIMA(0,0,0)(0,0,0)[0] intercept   : AIC=2171.867, Time=0.01 sec<br/> ARIMA(1,0,0)(0,0,0)[0] intercept   : AIC=1789.289, Time=0.03 sec<br/> ARIMA(0,0,1)(0,0,0)[0] intercept   : AIC=1931.174, Time=0.04 sec<br/> ARIMA(0,0,0)(0,0,0)[0]             : AIC=2172.420, Time=0.01 sec<br/> ARIMA(2,0,0)(0,0,0)[0] intercept   : AIC=1788.083, Time=0.04 sec<br/> ARIMA(3,0,0)(0,0,0)[0] intercept   : AIC=1779.499, Time=0.07 sec<br/> ARIMA(4,0,0)(0,0,0)[0] intercept   : AIC=1778.438, Time=0.07 sec<br/> ARIMA(4,0,1)(0,0,0)[0] intercept   : AIC=1773.792, Time=0.26 sec<br/> ARIMA(3,0,1)(0,0,0)[0] intercept   : AIC=1780.497, Time=0.10 sec<br/> ARIMA(4,0,2)(0,0,0)[0] intercept   : AIC=1695.057, Time=0.32 sec<br/> ARIMA(3,0,2)(0,0,0)[0] intercept   : AIC=1738.073, Time=0.35 sec<br/> ARIMA(4,0,3)(0,0,0)[0] intercept   : AIC=1691.378, Time=0.51 sec<br/> ARIMA(3,0,3)(0,0,0)[0] intercept   : AIC=1711.992, Time=0.25 sec<br/> ARIMA(4,0,4)(0,0,0)[0] intercept   : AIC=1694.119, Time=0.72 sec<br/> ARIMA(3,0,4)(0,0,0)[0] intercept   : AIC=1701.593, Time=0.27 sec<br/> ARIMA(4,0,3)(0,0,0)[0]             : AIC=1689.749, Time=0.27 sec<br/> ARIMA(3,0,3)(0,0,0)[0]             : AIC=1710.347, Time=0.19 sec<br/> ARIMA(4,0,2)(0,0,0)[0]             : AIC=1693.396, Time=0.15 sec<br/> ARIMA(4,0,4)(0,0,0)[0]             : AIC=1692.698, Time=0.49 sec<br/> ARIMA(3,0,2)(0,0,0)[0]             : AIC=1736.557, Time=0.16 sec<br/> ARIMA(3,0,4)(0,0,0)[0]             : AIC=1699.989, Time=0.16 sec<br/><br/>Best model:  ARIMA(4,0,3)(0,0,0)[0]          <br/>Total fit time: 4.481 seconds<br/>Optimal order for is: (4, 0, 3)</span></pre><p id="d12b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们对订单1、3、5和7的ma过程使用auto arima。对于小订单q=1和q=3，Auto_arima准确地识别ma过程及其订单，但是对于订单q=5和q=7，它混合了AR和MA。</p><h1 id="de4c" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">结论</h1><p id="4e4c" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">当您开始时间序列分析时，从可能满足用例需求的简单模型开始是一个好的实践。ARIMA模型简单而透明，你可以推导出严格的统计特性。它们在小数据集上表现良好，构建和重新训练都很便宜。</p><p id="d646" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果您需要使用它们，您需要了解它们是如何工作的，并明确地设置它们的参数。本文为您提供了充分自信地调整模型顺序的技术。</p><p id="3409" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">本文笔记本可用</strong> <a class="ae ky" href="https://github.com/bledem/time_series_utils/tree/master/notebooks" rel="noopener ugc nofollow" target="_blank"> <strong class="lb iu">此处</strong> </a> <strong class="lb iu">。</strong></p><h1 id="087a" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">参考资料:</h1><p id="0fce" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">[1]使用Python进行时间序列分析:从基础到前沿技术<a class="ae ky" href="https://www.amazon.com/Hands-Time-Analysis-Python-Techniques/dp/1484259912" rel="noopener ugc nofollow" target="_blank">https://www . Amazon . com/Hands-Time-Analysis-Python-Techniques/DP/1484259912</a>(非附属)</p><p id="62f3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">[2]<a class="ae ky" href="https://people.cs.pitt.edu/~milos/courses/cs3750/lectures/class16.pdf" rel="noopener ugc nofollow" target="_blank">https://people . cs . Pitt . edu/~ Milos/courses/cs 3750/lectures/class 16 . pdf</a></p><p id="fdef" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">[3]<a class="ae ky" href="https://www.sciencedirect.com/topics/psychology/bayesian-information-criterion#:~:text=The%20Akaike%20information%20criterion%20(AIC,to%20its%20number%20of%20parameters." rel="noopener ugc nofollow" target="_blank">https://www . science direct . com/topics/psychology/Bayesian-information-criterion #:~:text = The % 20 a kaike % 20 information % 20 criterion % 20(AIC，to % 20 its % 20 number % 20 of % 20 parameters。</a></p></div></div>    
</body>
</html>