<html>
<head>
<title>6 Visualization Tricks with Python to Handle Ultra-Long Time-Series Data</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用Python处理超长时间序列数据的6个可视化技巧</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/6-visualization-tricks-to-handle-ultra-long-time-series-data-57dad97e0fc2#2022-10-03">https://towardsdatascience.com/6-visualization-tricks-to-handle-ultra-long-time-series-data-57dad97e0fc2#2022-10-03</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="32ec" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">使用几行Python代码处理长时间序列图的简单想法</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/7d29023d858117a6d5414eacaf4151cd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*nH1KRV5CCR9suo39"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上由<a class="ae ky" href="https://unsplash.com/@waldemarbrandt67w?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Waldemar Brandt </a>拍照</p></figure><p id="6668" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">通常，时间序列图由代表时间轴的X轴和显示数据值的Y轴组成。这种可视化在显示数据随时间的进展方面很常见。它在提取洞察信息方面有一些好处，如<a class="ae ky" href="https://otexts.com/fpp2/tspatterns.html" rel="noopener ugc nofollow" target="_blank">趋势和季节效应</a>。</p><p id="2155" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在处理超长时间线时有一个问题。尽管使用数据可视化工具可以很容易地将长时间序列数据放入绘图区域，但结果可能会很混乱。下面我们来对比两个样本。</p><div class="kj kk kl km gt ab cb"><figure class="lv kn lw lx ly lz ma paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><img src="../Images/9d8dc183c23aba36f49043ae67474af5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1002/format:webp/1*4NxAkjXWf0tmBpdrfDIXXw.png"/></div></figure><figure class="lv kn lw lx ly lz ma paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><img src="../Images/769e38dbb50b4c0e43e7427b8adbbaa9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1002/format:webp/1*K2xyTbB1bPCtSN9aSWFnYQ.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk mb di mc md translated">第一张图显示了2021年的每日气温数据。第二张图显示了1990年至2021年的每日气温数据。<a class="ae ky" href="https://data.gov.ie/dataset/dublin-airport-daily-data?package_type=dataset" rel="noopener ugc nofollow" target="_blank">都柏林机场每日数据</a>来自<a class="ae ky" href="https://www.met.ie/climate/available-data/historical-data" rel="noopener ugc nofollow" target="_blank">气象局</a>。作者图片。</p></figure></div><p id="25d6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">虽然我们可以在第一个图表上看到细节，但可以注意到，第二个图表由于包含较长的时间序列数据而过于密集，难以阅读。这有一个主要的缺点，即一些有趣的数据点可能会被隐藏。</p><p id="8e11" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">为了解决这个问题，本文将介绍六种简单的技术，帮助更有效地呈现长时间序列数据。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi me"><img src="../Images/efb092f7924545fc8327495680914738.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*aa5dPK0oeOGQ9eQd6r0Ljg.gif"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">处理长时间序列数据的方法示例。图片由作者提供。</p></figure></div><div class="ab cl mf mg hx mh" role="separator"><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk"/></div><div class="im in io ip iq"><h2 id="24e4" class="mm mn it bd mo mp mq dn mr ms mt dp mu li mv mw mx lm my mz na lq nb nc nd ne bi translated">检索数据</h2><p id="25fa" class="pw-post-body-paragraph kz la it lb b lc nf ju le lf ng jx lh li nh lk ll lm ni lo lp lq nj ls lt lu im bi translated">例如，本文将使用<a class="ae ky" href="https://data.gov.ie/dataset/dublin-airport-daily-data?package_type=dataset" rel="noopener ugc nofollow" target="_blank">都柏林机场每日数据</a>，其中包含自1942年以来在<a class="ae ky" href="https://en.wikipedia.org/wiki/Dublin_Airport" rel="noopener ugc nofollow" target="_blank">都柏林机场</a>测得的气象数据。数据集由每日天气信息组成，如温度、风速、气压等。</p><p id="024d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">有关都柏林机场每日数据的更多信息，请参见下面关于数据集的<em class="nk">部分。</em></p><p id="ff8d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">从导入库开始</p><pre class="kj kk kl km gt nl nm nn no aw np bi"><span id="031a" class="mm mn it nm b gy nq nr l ns nt">import numpy as np<br/>import pandas as pd<br/>import matplotlib.pyplot as plt<br/>import seaborn as sns</span><span id="3e86" class="mm mn it nm b gy nu nr l ns nt">import plotly.express as px<br/>import plotly.graph_objects as go<br/>%matplotlib inline</span></pre><p id="fc78" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">阅读CSV文件</p><pre class="kj kk kl km gt nl nm nn no aw np bi"><span id="3693" class="mm mn it nm b gy nq nr l ns nt">df = pd.read_csv('location/file name.csv')<br/>df['date'] = pd.to_datetime(df['date'])<br/>df.tail()</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nv"><img src="../Images/d0f1531835d3f87c3f1732d8ac8015b9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7eJ41cIIc38JomXjPsYUVA.png"/></div></div></figure><h2 id="20df" class="mm mn it bd mo mp mq dn mr ms mt dp mu li mv mw mx lm my mz na lq nb nc nd ne bi translated"><strong class="ak">探索数据</strong></h2><pre class="kj kk kl km gt nl nm nn no aw np bi"><span id="5623" class="mm mn it nm b gy nq nr l ns nt">df.info()</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nw"><img src="../Images/2e1b4998b5b9cf0de1e5f2a0790b6e8e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*UCUcA_ZJoyF_zHgrmoyocQ.png"/></div></div></figure><p id="76cc" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">幸运的是，快速查看一下，数据集没有丢失值。</p><h2 id="5c65" class="mm mn it bd mo mp mq dn mr ms mt dp mu li mv mw mx lm my mz na lq nb nc nd ne bi translated">准备数据</h2><p id="e9fc" class="pw-post-body-paragraph kz la it lb b lc nf ju le lf ng jx lh li nh lk ll lm ni lo lp lq nj ls lt lu im bi translated">我们将使用最高和最低温度数据。使用的时间段是从1990年到2021年，一共32年。如果您想选择其他变量或范围，请随意修改下面的代码。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nx ny l"/></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nz"><img src="../Images/fd1efc0be1c9f7c44660cc12d6286538.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*GdUA3_AkOaiCX0tCKiunEA.png"/></div></div></figure><p id="55dc" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">创建月、年和月-年列供以后使用。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nx ny l"/></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oa"><img src="../Images/9829641323b8ae8d07c099b825ca2963.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ZQO-lx6ydvMSq1kid1W8gQ.png"/></div></div></figure><h2 id="d991" class="mm mn it bd mo mp mq dn mr ms mt dp mu li mv mw mx lm my mz na lq nb nc nd ne bi translated">绘制时间序列图</h2><p id="488e" class="pw-post-body-paragraph kz la it lb b lc nf ju le lf ng jx lh li nh lk ll lm ni lo lp lq nj ls lt lu im bi translated">从数据框中，下面的代码显示了如何绘制一个基本的时间序列图。稍后可以将结果与本文中的其他可视化结果进行比较。</p><pre class="kj kk kl km gt nl nm nn no aw np bi"><span id="9dec" class="mm mn it nm b gy nq nr l ns nt">plt.figure(figsize=(16,9))<br/>sns.set_style('darkgrid')<br/>sns.lineplot(data=df_temp, y='meantp', x ='date')<br/>plt.show()</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ob"><img src="../Images/a10d13ab6076f85cfa6e3808b7df69ed.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*K2xyTbB1bPCtSN9aSWFnYQ.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">显示32年日平均气温的时间序列图。图片由作者提供。</p></figure><p id="bd83" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如前所述，获得的图表过于密集。在下一节中，让我们看看如何处理这个问题。</p></div><div class="ab cl mf mg hx mh" role="separator"><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk"/></div><div class="im in io ip iq"><h1 id="077c" class="oc mn it bd mo od oe of mr og oh oi mu jz oj ka mx kc ok kd na kf ol kg nd om bi translated">处理超长时间序列数据的可视化</h1><p id="5255" class="pw-post-body-paragraph kz la it lb b lc nf ju le lf ng jx lh li nh lk ll lm ni lo lp lq nj ls lt lu im bi translated">6个简单的技巧可用于呈现长时间序列图:</p><ul class=""><li id="2cb5" class="on oo it lb b lc ld lf lg li op lm oq lq or lu os ot ou ov bi translated"><strong class="lb iu"> #1放大和缩小</strong></li><li id="1fbc" class="on oo it lb b lc ow lf ox li oy lm oz lq pa lu os ot ou ov bi translated"><strong class="lb iu"> #2关注重要的事情</strong></li><li id="99fc" class="on oo it lb b lc ow lf ox li oy lm oz lq pa lu os ot ou ov bi translated"><strong class="lb iu"> #3画线</strong></li><li id="746d" class="on oo it lb b lc ow lf ox li oy lm oz lq pa lu os ot ou ov bi translated"><strong class="lb iu"> #4使用分配</strong></li><li id="17b6" class="on oo it lb b lc ow lf ox li oy lm oz lq pa lu os ot ou ov bi translated"><strong class="lb iu"> #5分组并应用色标</strong></li><li id="9ec5" class="on oo it lb b lc ow lf ox li oy lm oz lq pa lu os ot ou ov bi translated"><strong class="lb iu"> #6圈出线</strong></li></ul><h2 id="6470" class="mm mn it bd mo mp mq dn mr ms mt dp mu li mv mw mx lm my mz na lq nb nc nd ne bi translated">技巧1:放大和缩小</h2><p id="5577" class="pw-post-body-paragraph kz la it lb b lc nf ju le lf ng jx lh li nh lk ll lm ni lo lp lq nj ls lt lu im bi translated">我们可以创建一个交互式图表，其中的结果可以放大或缩小，以查看更多的细节。这是扩展图表上密集区域的好主意。<a class="ae ky" href="https://plotly.com/python/line-charts/" rel="noopener ugc nofollow" target="_blank"> Plotly </a>是一个有用的库，它将帮助我们创建一个交互式图表。</p><p id="1433" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">从我们拥有的数据框架中，我们可以直接用一行代码绘制一个简单的交互式时间序列图。</p><pre class="kj kk kl km gt nl nm nn no aw np bi"><span id="7027" class="mm mn it nm b gy nq nr l ns nt">px.line(df_temp, x='date', y='meantp')</span></pre><p id="8e72" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">瞧啊。！</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi me"><img src="../Images/ba07f554db1b6e8c488034f2026e8844.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*SgSDhXug1Ezo-gyWGZ4aIQ.gif"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">使用Plotly的带有放大功能的时间序列图。图片由作者提供。</p></figure><p id="c4ff" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">从结果中，我们可以看到整体数据，同时能够放大我们想要扩展的区域。</p></div><div class="ab cl mf mg hx mh" role="separator"><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk"/></div><div class="im in io ip iq"><h2 id="d36f" class="mm mn it bd mo mp mq dn mr ms mt dp mu li mv mw mx lm my mz na lq nb nc nd ne bi translated">诀窍2:关注重要的事情</h2><p id="0ad2" class="pw-post-body-paragraph kz la it lb b lc nf ju le lf ng jx lh li nh lk ll lm ni lo lp lq nj ls lt lu im bi translated">如果需要注意一些值，用标记突出显示数据点可能是一个很好的解决方案。向交互式绘图添加散点有利于标记有趣或关键的数据点，并放大以查看更多细节。</p><p id="14d8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在让我们在之前的互动情节中加入散点。例如，我们将分别关注高于和低于20.5°C和-5°C的平均温度。</p><pre class="kj kk kl km gt nl nm nn no aw np bi"><span id="537c" class="mm mn it nm b gy nq nr l ns nt">df_dot = df_temp[(df_temp['meantp']&gt;=20.5)|(df_temp['meantp']&lt;=-5)]</span><span id="8d70" class="mm mn it nm b gy nu nr l ns nt">fig = px.line(df_temp, x='date', y='meantp')<br/>fig.add_trace(go.Scatter(x =df_dot.date, y=df_dot.meantp,<br/>                         mode='markers',<br/>                         marker=dict(color='red', size=6)))<br/>fig.update_layout(showlegend=False)</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi me"><img src="../Images/9a4684f95ca75fb07dca1819c869fa4a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*a2p1Cd7E06nuXIA6S7_-oQ.gif"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">使用Plotly的带有标记和放大功能的时间序列图。图片由作者提供。</p></figure></div><div class="ab cl mf mg hx mh" role="separator"><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk"/></div><div class="im in io ip iq"><h2 id="6455" class="mm mn it bd mo mp mq dn mr ms mt dp mu li mv mw mx lm my mz na lq nb nc nd ne bi translated">诀窍3:画线</h2><p id="c5f2" class="pw-post-body-paragraph kz la it lb b lc nf ju le lf ng jx lh li nh lk ll lm ni lo lp lq nj ls lt lu im bi translated">与前面的技术一样，如果需要关注某些区域，画线可以分隔特定的数据值。例如，我将添加两条线来分隔平均温度高于和低于20.5°C和-5°C的一天。</p><pre class="kj kk kl km gt nl nm nn no aw np bi"><span id="9b68" class="mm mn it nm b gy nq nr l ns nt">fig = px.line(df_temp, x='date', y='meantp')</span><span id="8412" class="mm mn it nm b gy nu nr l ns nt">fig.add_hline(y=20, line_width=1.5,<br/>              line_dash='dash', line_color='red')<br/>fig.add_hline(y=-5, line_width=1.5,<br/>              line_dash='dash', line_color='red')<br/>fig.update_layout(showlegend=False)</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi me"><img src="../Images/e965f6346f296fed09c8b4b1129da422.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*SwYENBvy70RZBhUV13XIPw.gif"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">使用Plotly的带线条和放大功能的时间序列图。图片由作者提供。</p></figure><p id="6643" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">从结果来看，我们可以把注意力集中在线上或线下的数据点上。</p></div><div class="ab cl mf mg hx mh" role="separator"><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk"/></div><div class="im in io ip iq"><h2 id="763e" class="mm mn it bd mo mp mq dn mr ms mt dp mu li mv mw mx lm my mz na lq nb nc nd ne bi translated">诀窍4:使用分销</h2><p id="50ae" class="pw-post-body-paragraph kz la it lb b lc nf ju le lf ng jx lh li nh lk ll lm ni lo lp lq nj ls lt lu im bi translated">箱线图是一种展示数据通过其四分位数分布的方法。箱线图上的信息显示了局部性、分布和偏斜度。该图也有助于区分<a class="ae ky" href="https://en.wikipedia.org/wiki/Outlier" rel="noopener ugc nofollow" target="_blank">异常值</a>，即从其他观察中显著突出的数据点。</p><p id="0584" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">因为数据框架已经准备好了，我们可以只用一行代码直接绘制盒状图。</p><pre class="kj kk kl km gt nl nm nn no aw np bi"><span id="9327" class="mm mn it nm b gy nq nr l ns nt">px.box(df_temp, x='month_year', y='meantp')</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi me"><img src="../Images/efb092f7924545fc8327495680914738.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*aa5dPK0oeOGQ9eQd6r0Ljg.gif"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">使用Plotly显示带有放大功能的数据分布的箱线图。图片由作者提供。</p></figure></div><div class="ab cl mf mg hx mh" role="separator"><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk"/></div><div class="im in io ip iq"><h2 id="fa0b" class="mm mn it bd mo mp mq dn mr ms mt dp mu li mv mw mx lm my mz na lq nb nc nd ne bi translated">诀窍5:分组并应用色阶</h2><p id="b31a" class="pw-post-body-paragraph kz la it lb b lc nf ju le lf ng jx lh li nh lk ll lm ni lo lp lq nj ls lt lu im bi translated">基本上，这种方法将时间序列图转换成<a class="ae ky" href="https://en.wikipedia.org/wiki/Heat_map" rel="noopener ugc nofollow" target="_blank">热图</a>。结果将显示月平均气温，我们可以使用色标来比较数据的大小。</p><p id="39ed" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">为了方便绘图，需要将数据帧转换成二维。首先，让我们按年份和月份对数据框进行分组。</p><pre class="kj kk kl km gt nl nm nn no aw np bi"><span id="de57" class="mm mn it nm b gy nq nr l ns nt">df_mean = df_temp.groupby(['year','month']).mean().reset_index()<br/>df_mean.head()</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pb"><img src="../Images/f96c3fda66a39bfabda3e1a2292dd3de.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5MOjmB_0jFoZCoMzSuLbbQ.png"/></div></div></figure><p id="1147" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">解散堆叠数据框</p><pre class="kj kk kl km gt nl nm nn no aw np bi"><span id="e1c2" class="mm mn it nm b gy nq nr l ns nt">df_cross = df_mean.set_index(['year','month'])['meantp'].unstack()<br/>df_cross</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pc"><img src="../Images/4ce8300ebbd83924e82e08c484343397.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*UzerGIvb7MXIjoH5hkSxQA.png"/></div></div></figure><p id="67b8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">使用Plotly只需一行代码即可绘制热图。</p><pre class="kj kk kl km gt nl nm nn no aw np bi"><span id="59c6" class="mm mn it nm b gy nq nr l ns nt">px.imshow(df_cross, height=700, aspect='auto',<br/>          color_continuous_scale='viridis')</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi me"><img src="../Images/277225265718e55b73f1bd84f3ecbde0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*QIZ_HZa6npmBp_NZA4lWow.gif"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">交互式热图显示了月平均气温。图片由作者提供。</p></figure></div><div class="ab cl mf mg hx mh" role="separator"><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk"/></div><div class="im in io ip iq"><h2 id="6616" class="mm mn it bd mo mp mq dn mr ms mt dp mu li mv mw mx lm my mz na lq nb nc nd ne bi translated">诀窍6:圈出这条线</h2><p id="fb43" class="pw-post-body-paragraph kz la it lb b lc nf ju le lf ng jx lh li nh lk ll lm ni lo lp lq nj ls lt lu im bi translated">当可视化时间序列数据时，通常会想到随着时间推移而移动的连续线条。对了，我们可以换个角度。这些线可以绘制成圆形图形，就像在时钟上移动它们一样。在这种情况下，<a class="ae ky" href="https://en.wikipedia.org/wiki/Radar_chart" rel="noopener ugc nofollow" target="_blank">雷达图</a>可能是一个不错的选择。</p><p id="1c4c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">理论上，雷达图是一种用于比较相同类别数据的可视化工具。我们可以应用这个概念，在圆圈周围绘制月份，以比较一年中同一时间的数据值。</p><p id="20d4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">准备一份月份、年份和颜色的列表，用于下一步。</p><pre class="kj kk kl km gt nl nm nn no aw np bi"><span id="740b" class="mm mn it nm b gy nq nr l ns nt">months = [str(i) for i in list(set(df_mean.month))] + ['1']<br/>years = list(set(df_mean.year))</span><span id="f15e" class="mm mn it nm b gy nu nr l ns nt">pal = list(sns.color_palette(palette='viridis',<br/>                             n_colors=len(years)).as_hex())</span></pre><p id="753a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">使用for循环函数在雷达图上绘制线条。</p><pre class="kj kk kl km gt nl nm nn no aw np bi"><span id="5b9c" class="mm mn it nm b gy nq nr l ns nt">fig = go.Figure()<br/>for i,c in zip(years,pal):<br/>    df = df_mean[df_mean['year']==i]<br/>    val = list(df.meantp)*2<br/>    fig.add_trace(go.Scatterpolar(r=val, theta=months,<br/>                                  name=i, marker=dict(color=c)))<br/>fig.update_layout(height=800)</span></pre><p id="e7e0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">创建交互式雷达图可以过滤结果，将光标悬停在数据点上可以显示信息。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi me"><img src="../Images/5697bc331ed037ea194a2638b34646c9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*up2n5hr0GtMgF4FlJartJQ.gif"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">交互式雷达图显示了月平均气温。图片由作者提供。</p></figure></div><div class="ab cl mf mg hx mh" role="separator"><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk"/></div><div class="im in io ip iq"><h2 id="20c3" class="mm mn it bd mo mp mq dn mr ms mt dp mu li mv mw mx lm my mz na lq nb nc nd ne bi translated">摘要</h2><p id="bde6" class="pw-post-body-paragraph kz la it lb b lc nf ju le lf ng jx lh li nh lk ll lm ni lo lp lq nj ls lt lu im bi translated">时间序列图是一个有用的图表，可以提取有见地的信息，如趋势或季节影响。但是，用简单的时间序列图显示超长时间序列数据会由于重叠区域而导致图表混乱。</p><p id="d796" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">本文展示了绘制长时间序列数据的6种可视化思想。我们可以通过使用交互功能和改变视角来使结果对读者友好。此外，一些方法也有助于关注重要的数据点。</p><p id="2c6e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">最后，这些方法只是一些想法。我确信还有其他的可视化方法可以用来解决这个问题。如果有什么建议，欢迎随时留下评论。</p><p id="4ec4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">感谢阅读。</p></div><div class="ab cl mf mg hx mh" role="separator"><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk"/></div><div class="im in io ip iq"><p id="bdbd" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">以下是您可能会感兴趣的其他数据可视化文章:</p><ul class=""><li id="426b" class="on oo it lb b lc ld lf lg li op lm oq lq or lu os ot ou ov bi translated">8用Python处理多个时序数据的可视化(<a class="ae ky" rel="noopener" target="_blank" href="/8-visualizations-with-python-to-handle-multiple-time-series-data-19b5b2e66dd0">链接</a>)</li><li id="03a8" class="on oo it lb b lc ow lf ox li oy lm oz lq pa lu os ot ou ov bi translated">用Python实现的9种可视化比条形图更引人注目(<a class="ae ky" rel="noopener" target="_blank" href="/9-visualizations-that-catch-more-attention-than-a-bar-chart-72d3aeb2e091">链接</a></li><li id="2c7a" class="on oo it lb b lc ow lf ox li oy lm oz lq pa lu os ot ou ov bi translated">9用Python可视化显示比例，而不是饼状图(<a class="ae ky" href="https://medium.com/p/4e8d81617451/" rel="noopener">链接</a>)</li><li id="4edd" class="on oo it lb b lc ow lf ox li oy lm oz lq pa lu os ot ou ov bi translated">用Python ( <a class="ae ky" rel="noopener" target="_blank" href="/19-examples-of-merging-plots-to-maximize-your-clustering-scatter-plot-87e8f1bb5fd2">链接</a>)最大化聚类散点图</li></ul></div><div class="ab cl mf mg hx mh" role="separator"><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk"/></div><div class="im in io ip iq"><h2 id="1e16" class="mm mn it bd mo mp mq dn mr ms mt dp mu li mv mw mx lm my mz na lq nb nc nd ne bi translated"><strong class="ak">关于数据集</strong></h2><p id="a595" class="pw-post-body-paragraph kz la it lb b lc nf ju le lf ng jx lh li nh lk ll lm ni lo lp lq nj ls lt lu im bi translated"><a class="ae ky" href="https://data.gov.ie/dataset/dublin-airport-daily-data?package_type=dataset" rel="noopener ugc nofollow" target="_blank">都柏林机场每日数据</a>检索自<a class="ae ky" href="http://www.met.ie" rel="noopener ugc nofollow" target="_blank"> www.met.ie </a>，版权<a class="ae ky" href="https://www.met.ie/climate/available-data/historical-data" rel="noopener ugc nofollow" target="_blank">Metéireann</a>。该数据集在知识共享署名4.0国际版下发布(<a class="ae ky" href="https://creativecommons.org/licenses/by/4.0/" rel="noopener ugc nofollow" target="_blank"> CC BY 4.0 </a>)。来源声明:Metéire ann对数据中的任何错误或遗漏、其可用性或因其使用而产生的任何损失或损害不承担任何责任。</p></div><div class="ab cl mf mg hx mh" role="separator"><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk"/></div><div class="im in io ip iq"><h2 id="7620" class="mm mn it bd mo mp mq dn mr ms mt dp mu li mv mw mx lm my mz na lq nb nc nd ne bi translated">参考</h2><p id="46b4" class="pw-post-body-paragraph kz la it lb b lc nf ju le lf ng jx lh li nh lk ll lm ni lo lp lq nj ls lt lu im bi translated">维基媒体基金会。(2022年9月23日)。<em class="nk">时间序列</em>。维基百科。于2022年9月29日从https://en.wikipedia.org/wiki/Time_series检索</p><p id="b0fa" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><em class="nk">都柏林机场每日数据</em>。Data.Gov.IE。(未注明)。于2022年9月29日从https://data.gov.ie/dataset/dublin-airport-daily-data?检索到package_type=dataset </p></div></div>    
</body>
</html>