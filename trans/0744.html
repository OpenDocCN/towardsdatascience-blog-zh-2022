<html>
<head>
<title>Performance Curve: More Intuitive than ROC/PRC and Less Assumptive than Threshold Metrics</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">性能曲线:比ROC/PRC更直观，比阈值指标更少假设</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/performance-curve-more-intuitive-than-roc-prc-and-less-assumptive-than-threshold-metrics-391e777da566#2022-03-02">https://towardsdatascience.com/performance-curve-more-intuitive-than-roc-prc-and-less-assumptive-than-threshold-metrics-391e777da566#2022-03-02</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="3edb" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">一种结合两者优点的二元分类器评价方法</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/82c1cfa5458c4381e45a32604a2d6e5f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*-rhAAHNXZWhS9VcI"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">杰森·古德曼在<a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</p></figure><p id="1b81" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在二元分类的上下文中，有两个最常见的评估度量族:</p><ul class=""><li id="1449" class="ls lt iq ky b kz la lc ld lf lu lj lv ln lw lr lx ly lz ma bi translated">阈值指标(例如:准确度、精确度、召回率、F值)</li><li id="5fea" class="ls lt iq ky b kz mb lc mc lf md lj me ln mf lr lx ly lz ma bi translated">排名指标(例如，接收机工作特性(ROC)曲线、精确度-召回率(PR)曲线)</li></ul><h1 id="54a9" class="mg mh iq bd mi mj mk ml mm mn mo mp mq jw mr jx ms jz mt ka mu kc mv kd mw mx bi translated">阈值指标的问题</h1><p id="ee60" class="pw-post-body-paragraph kw kx iq ky b kz my jr lb lc mz ju le lf na lh li lj nb ll lm ln nc lp lq lr ij bi translated">尽管阈值度量很直观，并且易于向非技术受众解释，但它们需要特定的阈值界限来区分积极类和消极类。为了确定这个截止值，我们需要知道:</p><p id="fada" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">(1)结果的等级分布(又称患病率):</p><p id="e0a5" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">很多时候，0.5被用作默认的截止值，但是在结果发生率不正好为50%的情况下，这是不合理的。</p><p id="e834" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">(2)两种错误分类的相对成本(也称为第一类和第二类错误)</p><ul class=""><li id="4f31" class="ls lt iq ky b kz la lc ld lf lu lj lv ln lw lr lx ly lz ma bi translated">第一类错误，即假阳性，发生在模型预测结果为阳性而实际结果为阴性的时候。例如:一名患者被诊断患有癌症，但他们并没有患病。</li><li id="c710" class="ls lt iq ky b kz mb lc mc lf md lj me ln mf lr lx ly lz ma bi translated">第二类错误，或假阴性，发生在模型预测结果为阴性而实际上为阳性的时候。银行交易被认为是正常的，但实际上是欺诈性的。</li></ul><p id="6a52" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在这两种类型的误差之间总是有一个折衷。当第一类错误的危害大于第二类错误的危害时(例如，从招聘雇主的角度来看，一个糟糕的招聘的成本比没有招聘到合适的员工的成本更高)，我们希望提高截止阈值，以便在正面结果预测中非常精确。另一方面，当第二类错误的危害大于第一类错误时(例如，错过欺诈性交易的成本比审查虚假警报的额外时间更昂贵)，我们希望降低截止阈值，以扩大正面案例的范围。</p><p id="89b7" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">为了选择正确的阈值，我们需要能够量化这两种类型的风险。</p><blockquote class="nd"><p id="eace" class="ne nf iq bd ng nh ni nj nk nl nm lr dk translated">尽管我们可能对在特定用例中哪种错误类型比另一种更昂贵有一个大致的概念，但是这些危害在实践中很少是可以量化的。依靠单一的临界值，我们错误地传达了这两种风险可以并且已经被量化的信息。</p></blockquote><h1 id="1be9" class="mg mh iq bd mi mj mk ml mm mn mo mp mq jw nn jx ms jz no ka mu kc np kd mw mx bi translated">排名指标的问题</h1><p id="bdcc" class="pw-post-body-paragraph kw kx iq ky b kz my jr lb lc mz ju le lf na lh li lj nb ll lm ln nc lp lq lr ij bi translated">与阈值度量不同，现有的排序度量(如ROC和PR曲线)没有对错误分类错误之间的相对成本做出任何假设。它们在可变阈值上评估分类器。但是，对于非技术受众来说，它们不够直观，并且不能提供任何可操作的见解。达到90% AUROC的预测模型的预期效用是什么？不清楚。</p><p id="5e6b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">尽管阈值和排名指标各有利弊，但它们都有一个吸引人的特性:它们提供了简单的方法来比较多个模型，以及随机和完美的分类器。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nq"><img src="../Images/3ddac017959f0dddeaa2a404c870a0f7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*SLwa_-Y_Y5_RY2tHwG01Xg.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">图片作者。阈值和排名指标的利弊。</p></figure><h1 id="770b" class="mg mh iq bd mi mj mk ml mm mn mo mp mq jw mr jx ms jz mt ka mu kc mv kd mw mx bi translated">一种改进的二元分类器性能比较方法</h1><p id="9822" class="pw-post-body-paragraph kw kx iq ky b kz my jr lb lc mz ju le lf na lh li lj nb ll lm ln nc lp lq lr ij bi translated">有没有一种评估方法代表了两个世界的最佳，即不假设错误分类成本的知识，并提供可操作的见解？答案是肯定的！</p><blockquote class="nd"><p id="2bcc" class="ne nf iq bd ng nh ni nj nk nl nm lr dk translated">主要思想是为预测为阳性的所有案例的不同百分比绘制感兴趣的任何阈值度量的值。</p></blockquote><p id="41f7" class="pw-post-body-paragraph kw kx iq ky b kz nr jr lb lc ns ju le lf nt lh li lj nu ll lm ln nv lp lq lr ij bi translated">从本文开始，我们将把这种图表称为<strong class="ky ir">性能曲线</strong>。</p><h2 id="b5ca" class="nw mh iq bd mi nx ny dn mm nz oa dp mq lf ob oc ms lj od oe mu ln of og mw oh bi translated">如何阅读/绘制性能曲线？</h2><p id="59c7" class="pw-post-body-paragraph kw kx iq ky b kz my jr lb lc mz ju le lf na lh li lj nb ll lm ln nc lp lq lr ij bi translated">对于每条性能曲线，X轴在每个点显示预测为阳性的案例总数的百分比，假设所有案例都按照我们的模型预测得分的降序排序。这个百分比与区分阳性和阴性类别的截止阈值直接相关。具体来说，较低的阈值意味着预测为阳性的百分比较大，而较高的阈值意味着预测为阳性的百分比较小。虽然得出一个准确和适当的阈值是一项具有挑战性和非直观性的任务，但预测为阳性(即X轴上的一个点)的病例的最佳百分比应该被选择来比较模型，这可以由模型用户的操作能力来确定。这个想法在业务用例部分有进一步的解释。</p><p id="e285" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">另一方面，Y轴代表您感兴趣的任何阈值度量。它可以是精确度、召回率、准确度、F1分数或用户自定义的指标，取决于案例的排序，而不是实际的预测值(因此不需要阈值截止)。在本文中，我们使用精度和召回来演示这个概念，因为这是两个最常用的阈值指标。</p><h2 id="c595" class="nw mh iq bd mi nx ny dn mm nz oa dp mq lf ob oc ms lj od oe mu ln of og mw oh bi translated">随机模型和完美模型的性能曲线是什么样的？</h2><p id="a229" class="pw-post-body-paragraph kw kx iq ky b kz my jr lb lc mz ju le lf na lh li lj nb ll lm ln nc lp lq lr ij bi translated">召回:</p><ul class=""><li id="069a" class="ls lt iq ky b kz la lc ld lf lu lj lv ln lw lr lx ly lz ma bi translated">一个完美的模型会给所有的真阳性案例分配最高分。因此，当模型评估前x%的病例时，它找到所有阳性病例的100%(即，达到回忆点= 1 ),其中x%是阳性类别的发生率。</li><li id="aae0" class="ls lt iq ky b kz mb lc mc lf md lj me ln mf lr lx ly lz ma bi translated">当随机模型完成对所有案例的评估时，它会达到100%的标记(即recall = 1)。</li></ul><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oi"><img src="../Images/157753b5fdf02c261b3ee6cd45d0d3c4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bUNXP7jYeTprtpPaI9IsMw.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">图片作者。回忆不同流行情况下的绩效曲线。</p></figure><p id="9173" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">为了精确:</p><ul class=""><li id="4297" class="ls lt iq ky b kz la lc ld lf lu lj lv ln lw lr lx ly lz ma bi translated">一个完美的模型将所有的真阳性放在排序列表的顶部，给我们1的精度，直到我们用完所有的阳性案例。</li><li id="6ce3" class="ls lt iq ky b kz mb lc mc lf md lj me ln mf lr lx ly lz ma bi translated">随机模型的精度保持在与样本人群中阳性类的流行率相似的水平。</li></ul><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oj"><img src="../Images/442650021432bce80fcf5bd0bcb6d722.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*PmxhD7tFMTSmqlaoAsTqWA.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">图片作者。不同流行情况下的精确性能曲线。</p></figure><h2 id="9b1b" class="nw mh iq bd mi nx ny dn mm nz oa dp mq lf ob oc ms lj od oe mu ln of og mw oh bi translated">让我们看一个业务用例！</h2><p id="8cb1" class="pw-post-body-paragraph kw kx iq ky b kz my jr lb lc mz ju le lf na lh li lj nb ll lm ln nc lp lq lr ij bi translated">一家保险公司一直在定期开展调查工作，以发现欺诈性保单。到目前为止，他们观察到的欺诈率大约为0.1%。他们的调查员每周从25个新案例中随机抽取10个案例进行审计。然而，该公司很快意识到这种做法是次优的，没有效率。他们要求您建立一个ML模型来协助他们的调查团队。</p><p id="a3cb" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir"> <em class="ok">问题1: </em> </strong>假设调查员因工作能力所限，每周最多只能审核10个案件。之前，他们随机挑选了10个案例。现在，他们根据你的模型选出排名前10的案例。您如何确定您的模型是否比他们以前的实践表现得更好，如果更好，又好了多少？</p><p id="a75f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir"> <em class="ok">问题2: </em> </strong>假设公司更关心的是尽快抓住所有的欺诈案件。您如何证明您的模型能够以比以前的实践更有效的方式实现这一点，并量化改进？</p><p id="cb26" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这两个问题都非常实用，很容易被许多ML模型用户问到。然而，它们不能由ROC图或PRC图或者甚至任何单独的阈值度量来回答。但是:可以用性能曲线来回答！我们以下面两个情节为例。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi ol"><img src="../Images/cc170579b4e37643c5a4114b8acc25df.png" data-original-src="https://miro.medium.com/v2/resize:fit:1178/format:webp/1*Jhef-pnCCykms2n5j2CijA.png"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">图片作者。回忆代表示例用例的性能曲线。</p></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi om"><img src="../Images/b3a8bfe3b88936eb4770112a28436c08.png" data-original-src="https://miro.medium.com/v2/resize:fit:1196/format:webp/1*UQRujB4Z8zvBJbLxB2AiWQ.png"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">图片作者。代表示例用例的精确性能曲线。</p></figure><p id="063a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir">对Q1的回答:</strong>给定每周40% (=10/25)的当前容量，在您的模型的帮助下，调查团队可以捕获约95%的真实阳性病例(即召回率)，而之前为约41%。此外，您的模型能够在不牺牲太多精度的情况下实现这一点。事实上，在工作容量为40%的情况下，您的模型实现了约12%的准确率，而随机实践产生的准确率为10%。</p><p id="5efa" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir">对Q2的回答:</strong>为了每周捕获100%的真阳性病例，调查团队只需审核70%按我们的模型排名的顶级病例。按照以前的做法，他们必须对100%的案件进行审计，才能达到同样的比率。这意味着你的模型为他们节省了30%的工作。</p><p id="43ba" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">假设前面的实践没有随机分类器那么幼稚，只要您可以构建一个模型来反映所说的实践，您应该能够进行与上面相同的分析，其中您使用性能曲线将您的模型与基准实践进行比较。</p><h2 id="718e" class="nw mh iq bd mi nx ny dn mm nz oa dp mq lf ob oc ms lj od oe mu ln of og mw oh bi translated">摘要</h2><p id="3107" class="pw-post-body-paragraph kw kx iq ky b kz my jr lb lc mz ju le lf na lh li lj nb ll lm ln nc lp lq lr ij bi translated">到目前为止，我们已经展示了性能曲线可以满足的以下关键特性:</p><ul class=""><li id="5c96" class="ls lt iq ky b kz la lc ld lf lu lj lv ln lw lr lx ly lz ma bi translated">是一种直观的辅助工具，它概述了模型在考虑不同预测百分比的情况下可以实现的一系列性能。模型性能可以用传统的阈值度量(如精度、召回率、F-1分数等)来衡量，也可以用任何取决于案例排序的用户自定义度量来衡量。</li><li id="8168" class="ls lt iq ky b kz mb lc mc lf md lj me ln mf lr lx ly lz ma bi translated">提供了在单个数据集上在一系列操作条件下对模型进行相互比较以及与随机和完美分类器进行比较的方法</li><li id="2546" class="ls lt iq ky b kz mb lc mc lf md lj me ln mf lr lx ly lz ma bi translated">为业务利益相关者提供可行的见解</li></ul><p id="f49b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">性能曲线还提供了其他一些好处:</p><ul class=""><li id="bae2" class="ls lt iq ky b kz la lc ld lf lu lj lv ln lw lr lx ly lz ma bi translated">当精度和召回性能曲线与传统的精度-召回(PR)曲线一起被检查时，我们可以确定预测性能的增加(或减少)是由精度、召回还是两者共同贡献的。</li></ul><p id="3b1a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">例如，在多次尝试改进我们的模型之后，我们注意到最近的迭代增加了模型的AUPRC。然后，我们检查所有迭代的召回和精确性能曲线。尽管在迭代过程中召回性能曲线看起来相对相似，但是最近一次运行的精度性能曲线看起来明显比以前好(即，更接近完美曲线，而更远离随机曲线)。因此，我们知道AUPRC的增加主要是由精度造成的。</p></div><div class="ab cl on oo hu op" role="separator"><span class="oq bw bk or os ot"/><span class="oq bw bk or os ot"/><span class="oq bw bk or os"/></div><div class="ij ik il im in"><p id="05ba" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir">如果您喜欢这篇文章，您可能也会喜欢:</strong></p><div class="ou ov gp gr ow ox"><a rel="noopener follow" target="_blank" href="/precision-recall-curve-is-more-informative-than-roc-in-imbalanced-data-4c95250242f6"><div class="oy ab fo"><div class="oz ab pa cl cj pb"><h2 class="bd ir gy z fp pc fr fs pd fu fw ip bi translated">在不平衡数据中，精确召回曲线比ROC更能提供信息</h2><div class="pe l"><h3 class="bd b gy z fp pc fr fs pd fu fw dk translated">当负类更普遍，真-负预测值低时，精确-回忆曲线…</h3></div><div class="pf l"><p class="bd b dl z fp pc fr fs pd fu fw dk translated">towardsdatascience.com</p></div></div><div class="pg l"><div class="ph l pi pj pk pg pl kp ox"/></div></div></a></div><div class="ou ov gp gr ow ox"><a rel="noopener follow" target="_blank" href="/the-wrong-and-right-way-to-approximate-area-under-precision-recall-curve-auprc-8fd9ca409064"><div class="oy ab fo"><div class="oz ab pa cl cj pb"><h2 class="bd ir gy z fp pc fr fs pd fu fw ip bi translated">精确召回曲线下面积的正确与错误</h2><div class="pe l"><h3 class="bd b gy z fp pc fr fs pd fu fw dk translated">总结AUPRC的方法有很多，但并不是所有的方法都有相同的优点</h3></div><div class="pf l"><p class="bd b dl z fp pc fr fs pd fu fw dk translated">towardsdatascience.com</p></div></div><div class="pg l"><div class="pm l pi pj pk pg pl kp ox"/></div></div></a></div></div></div>    
</body>
</html>