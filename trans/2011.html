<html>
<head>
<title>Top 3 Ways Your Anomaly Detection Models Can Earn Your Trust</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">异常检测模型赢得您信任的三大方法</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/top-3-ways-your-anomaly-detection-models-can-earn-your-trust-f59072a6199c#2022-05-06">https://towardsdatascience.com/top-3-ways-your-anomaly-detection-models-can-earn-your-trust-f59072a6199c#2022-05-06</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="053d" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">将异常检测模型结果连接回原始信号</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/d7e1f69c503c6dff9d93f2d58055cd85.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*61eacZdcCP-K8QFT"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上由<a class="ae ky" href="https://unsplash.com/es/@zmachacek?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">zdenk macha ek</a>拍摄的照片</p></figure><p id="6e58" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在上一篇文章中，我介绍了一些通过对原始结果进行后处理来从异常检测模型中提取更丰富信息的方法:</p><div class="lv lw gp gr lx ly"><a rel="noopener follow" target="_blank" href="/your-anomaly-detection-model-is-smarter-than-you-think-c1cade5fcabe"><div class="lz ab fo"><div class="ma ab mb cl cj mc"><h2 class="bd iu gy z fp md fr fs me fu fw is bi translated">你的异常检测模型比你想象的要聪明</h2><div class="mf l"><h3 class="bd b gy z fp md fr fs me fu fw dk translated">多变量时间序列异常检测模型可以提供丰富的见解，如果你投资一些时间在后处理…</h3></div><div class="mg l"><p class="bd b dl z fp md fr fs me fu fw dk translated">towardsdatascience.com</p></div></div><div class="mh l"><div class="mi l mj mk ml mh mm ks ly"/></div></div></a></div><p id="ab67" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">通读本文并付诸实践后，您可能会对这些见解的可信度有所反馈:</p><blockquote class="mn mo mp"><p id="0593" class="kz la mq lb b lc ld ju le lf lg jx lh mr lj lk ll ms ln lo lp mt lr ls lt lu im bi translated">“我不知道我是否能相信这些见解。为什么这个模型会这么说？给我看看数据！”</p></blockquote><p id="30a4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在某些情况下，证据就在布丁中:您必须在实时数据上部署模型，并对标记的异常进行几周的调查。这将使您能够进行定期的现实检查，并将模型标记的事件与您的用户在该领域中的知识进行比较。这种合作将逐渐建立和加强对你的模型的信任。</p><p id="b535" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">不久前，我在LinkedIn上发布了一个简短的演示(如果你想了解这篇文章，请查看<a class="ae ky" href="https://www.linkedin.com/posts/michaelhoarau_connecting-anomaly-detection-models-to-original-activity-6915209751555420161-2tWe?utm_source=linkedin_share&amp;utm_medium=member_desktop_web" rel="noopener ugc nofollow" target="_blank"> <strong class="lb iu">这篇文章</strong> </a>)，其中我解释了当我试图将异常检测模型结果与输入时间序列联系起来时所遵循的过程。</p><p id="9816" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我鼓励你跟随这篇博文，浏览GitHub，获取<a class="ae ky" href="https://github.com/michaelhoarau/smarter-anomaly-detection" rel="noopener ugc nofollow" target="_blank"> <strong class="lb iu">这一系列的Jupyter笔记本</strong> </a>。你可以使用你常用的Jupyter环境，或者用Amazon SageMaker创建一个。在您克隆了repo并运行前四个笔记本(从<a class="ae ky" href="https://github.com/michaelhoarau/smarter-anomaly-detection/blob/main/notebooks/synthetic_0_data_generation.ipynb" rel="noopener ugc nofollow" target="_blank"> <strong class="lb iu">数据生成部分</strong> </a> <strong class="lb iu"> </strong>到<a class="ae ky" href="https://github.com/michaelhoarau/smarter-anomaly-detection/blob/main/notebooks/synthetic_3_model_evaluation.ipynb" rel="noopener ugc nofollow" target="_blank"> <strong class="lb iu">模型评估部分</strong> </a>)后，您可以打开最后一个笔记本(<code class="fe mu mv mw mx b">synthetic_4_results_deep_dive.ipynb</code>)并遵循本文。</p><h1 id="54cb" class="my mz it bd na nb nc nd ne nf ng nh ni jz nj ka nk kc nl kd nm kf nn kg no np bi translated">数据集概述</h1><p id="739d" class="pw-post-body-paragraph kz la it lb b lc nq ju le lf nr jx lh li ns lk ll lm nt lo lp lq nu ls lt lu im bi translated">在本文中，我仍然使用我用一些合成异常生成的人工数据集。如果您想了解更多关于这个数据集的信息，请前往我的<a class="ae ky" rel="noopener" target="_blank" href="/your-anomaly-detection-model-is-smarter-than-you-think-c1cade5fcabe"> <strong class="lb iu">上一篇文章</strong> </a>的数据集概述部分。简而言之，这是一个1年长的数据集，有20个时间序列信号和10分钟的常规采样率。当可视化这些数据时，您会发现一些故障时间(下面的红点)和一些恢复期(下面的黄色部分):</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nv"><img src="../Images/db4109c4ce692ca1f640fd4304e830ef.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*xYgsHUBp1BckTA5s.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">综合数据时间序列概览(图片由作者提供)</p></figure><p id="55a4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在上一篇文章中，我们还使用<a class="ae ky" href="https://aws.amazon.com/lookout-for-equipment/" rel="noopener ugc nofollow" target="_blank"><strong class="lb iu">Amazon Lookout for Equipment</strong></a>(运行在AWS云中的托管服务)训练和异常检测模型。如果您想更深入地了解这项服务(即使您不是开发人员)，我在AWS书籍的时间系列中专门为这项服务写了6章:</p><div class="lv lw gp gr lx ly"><a href="https://www.amazon.com/Time-Analysis-AWS-forecasting-anomalies-ebook/dp/B09MMLLWDY" rel="noopener  ugc nofollow" target="_blank"><div class="lz ab fo"><div class="ma ab mb cl cj mc"><h2 class="bd iu gy z fp md fr fs me fu fw is bi translated">AWS上的时间序列分析:学习如何建立预测模型和检测你的…</h2><div class="mf l"><h3 class="bd b gy z fp md fr fs me fu fw dk translated">AWS上的时间序列分析:了解如何建立预测模型和检测时间序列数据中的异常…</h3></div><div class="mg l"><p class="bd b dl z fp md fr fs me fu fw dk translated">www.amazon.com</p></div></div><div class="mh l"><div class="nw l mj mk ml mh mm ks ly"/></div></div></a></div><h1 id="7d77" class="my mz it bd na nb nc nd ne nf ng nh ni jz nj ka nk kc nl kd nm kf nn kg no np bi translated">回到时间序列</h1><p id="b8ad" class="pw-post-body-paragraph kz la it lb b lc nq ju le lf nr jx lh li ns lk ll lm nt lo lp lq nu ls lt lu im bi translated">我将假设你已经运行了前4个笔记本到最后，你有一个训练有素的模型和你的第一次可视化来理解它的结果。为了更好地理解正在发生的事情，你可能想回到最初的时间序列。即使在已经部署了这种模型的生产环境中，执行常规的错误分析也可能是您需要与您最喜欢的主题专家一起进行的活动。毕竟，这些人工智能模型不会取代你的专家和操作员:它们只是通过提供更快的洞察力来增强他们。</p><h2 id="613b" class="nx mz it bd na ny nz dn ne oa ob dp ni li oc od nk lm oe of nm lq og oh no oi bi translated">时间序列可视化</h2><p id="c0be" class="pw-post-body-paragraph kz la it lb b lc nq ju le lf nr jx lh li ns lk ll lm nt lo lp lq nu ls lt lu im bi translated">可视化你所有的时间序列(即使只有20个)可能已经很有挑战性了。这是我最近遇到的一个数据集示例，您可以看到近100个时间序列在一起:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oj"><img src="../Images/4c5c29c1cc4a264ac051166ba4053344.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*PQ2iEsl5Gp0rv5dGNSKHyA.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">多元数据集:时间序列概述(图片由作者提供)</p></figure><p id="43a7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">真是大海捞针，不是吗？如果我们为20个传感器的更简单的合成数据集组合相同的图，则更容易看到发生了什么:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ok"><img src="../Images/c8e2d80c52fec9ddfe9d11ef65ed50e9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*n2aIXIa5S4HQ-Nysguk7OA.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">合成多元数据集概述(图片由作者提供)</p></figure><p id="3eb9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然而，在现实生活中依靠这种简单性可能是不够的…您可以做的第一件事是突出显示您的模型检测到一些事件的时间范围:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ok"><img src="../Images/29477c734938b9af82aca317ab725ce1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*UeBFdciFhvngGQpjwkfPiw.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">突出显示检测到的异常范围(图片由作者提供)</p></figure><p id="2407" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这稍微好一点，特别是如果你有很少的时间序列，并且异常很容易发现。然而，如果你读了我以前的文章，你会记得我们的异常检测模型实际上挑出几个传感器。让我们绘制第一个，而不是在一个单一的窗格中显示所有这些:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ol"><img src="../Images/30e57901ade6335c04b4d914985eeb72.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Y2CVMmkPnJPpsoEUuDobQA.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">现在这看起来更明显了(图片由作者提供)</p></figure><p id="c270" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe mu mv mw mx b">signal_07</code>输入是我们的异常检测模型挑选出来的时间序列之一，是这些检测到的事件的主要贡献者。在上面的图中，我用红色突出显示了异常的时间范围:现在更清楚为什么第一个事件被检测到了。第二个事件更有趣:实际的失败是清晰可见的，但是模型实际上在这种情况发生前2周就检测到了错误。</p><blockquote class="mn mo mp"><p id="6aae" class="kz la mq lb b lc ld ju le lf lg jx lh mr lj lk ll ms ln lo lp mt lr ls lt lu im bi translated">“如果不太明显，我也没发现我的信号有什么问题，会发生什么？”</p></blockquote><p id="c631" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这是你可能会关心的问题之一，尤其是当你看到前一个图中突出显示的失败之前的两周时间时。看起来信号在故障前略有增加，但没有这么明显。这就是使用直方图来可视化时间序列信号所取值的分布可能会派上用场的地方。让我们看看这个…</p><h2 id="8a9e" class="nx mz it bd na ny nz dn ne oa ob dp ni li oc od nk lm oe of nm lq og oh no oi bi translated">可视化时间序列值分布</h2><p id="5f61" class="pw-post-body-paragraph kz la it lb b lc nq ju le lf nr jx lh li ns lk ll lm nt lo lp lq nu ls lt lu im bi translated">让我们关注上面第一个检测到的事件。我在笔记本上添加了一些实用函数来绘制两个叠加的直方图:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi om"><img src="../Images/1e6364dff0e4d7ba8d8c043bc33116a2.png" data-original-src="https://miro.medium.com/v2/resize:fit:804/format:webp/1*Nz8Quacw4WcUbKshrIUYGA.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">第一个异常点周围<strong class="bd on">信号_07 </strong>的值分布(图片由作者提供)</p></figure><p id="02c5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><em class="mq">蓝色直方图</em>是<code class="fe mu mv mw mx b">signal_07</code>在训练范围内所取值的分布，而红色直方图突出显示了异常期间同一信号所取的值。行为的变化甚至更加明显，您甚至可以用您的领域专业知识来丰富这些直方图。例如，您可能知道在正常操作条件下，<code class="fe mu mv mw mx b">signal_07</code>的范围在1320和1450之间。在这种情况下，您可能希望通过在直方图中添加以下信息来帮助您的用户:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi om"><img src="../Images/e4486a9d99205ae1ecf88a550c52af6b.png" data-original-src="https://miro.medium.com/v2/resize:fit:804/format:webp/1*6INv_Isjt75JFB9n-wmsbQ.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">突出显示正常操作条件(图片由作者提供)</p></figure><p id="196c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们看看第二个异常的直方图:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi oo"><img src="../Images/6ae443afefa5579786573b30abf700eb.png" data-original-src="https://miro.medium.com/v2/resize:fit:800/format:webp/1*je9jurhq2JgWO3VPxQaZEg.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">第二异常周围<strong class="bd on">信号_07 </strong>的值分布(图片由作者提供)</p></figure><p id="ba9f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这里可以看到失败发生的部分(0左右的横条)。让我们放大第二部分，看看在失败之前<strong class="lb iu">发生了什么:</strong></p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi op"><img src="../Images/34e89fc46eafe4c3166c3faa8c078bd0.png" data-original-src="https://miro.medium.com/v2/resize:fit:796/format:webp/1*PPN8AI4u55hOLUgxVhbjKQ.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">故障前<strong class="bd on">信号_07 </strong>的值分布(图片由作者提供)</p></figure><p id="0a63" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在这里，尽管在时间序列上差别很小，但分布的变化却非常明显。</p><h1 id="2650" class="my mz it bd na nb nc nd ne nf ng nh ni jz nj ka nk kc nl kd nm kf nn kg no np bi translated">结论</h1><p id="fca6" class="pw-post-body-paragraph kz la it lb b lc nq ju le lf nr jx lh li ns lk ll lm nt lo lp lq nu ls lt lu im bi translated">在本文中，您了解了如何将异常检测模型结果与原始时间序列联系起来。这对于在您的机器学习系统中建立信任非常有价值，也是与领域专家合作并进一步改善您的异常管理流程的一个很好的工具。基本上，异常检测模型输出可以帮助您集中调查，而适当的可视化或原始数据可以帮助您查明原因！</p><p id="90e7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在以后的文章中，我将深入研究如何计算直方图之间的距离，并使用它作为异常检测模型中衡量特征重要性的代理。</p><p id="65c0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我希望你觉得这篇文章很有见地:如果你不想错过我即将发布的帖子，请随时在这里给我留下评论，并不要犹豫订阅我的<a class="ae ky" href="https://michoara.medium.com/subscribe" rel="noopener"> <strong class="lb iu">中型电子邮件订阅源</strong> </a>！想支持我和以后的工作？<strong class="lb iu">通过我的推荐链接加入Medium </strong>:</p><div class="lv lw gp gr lx ly"><a href="https://michoara.medium.com/membership" rel="noopener follow" target="_blank"><div class="lz ab fo"><div class="ma ab mb cl cj mc"><h2 class="bd iu gy z fp md fr fs me fu fw is bi translated">通过我的推荐链接加入Medium-Michal Hoa RAU</h2><div class="mf l"><h3 class="bd b gy z fp md fr fs me fu fw dk translated">作为一个媒体会员，你的会员费的一部分会给你阅读的作家，你可以完全接触到每一个故事…</h3></div><div class="mg l"><p class="bd b dl z fp md fr fs me fu fw dk translated">michoara.medium.com</p></div></div><div class="mh l"><div class="oq l mj mk ml mh mm ks ly"/></div></div></a></div></div></div>    
</body>
</html>