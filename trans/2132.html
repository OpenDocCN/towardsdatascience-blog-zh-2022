<html>
<head>
<title>Control Who Could Access Your Streamlit Dashboards</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">控制谁可以访问您的Streamlit仪表盘</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/streamlit-access-control-dae3ab8b7888#2022-05-12">https://towardsdatascience.com/streamlit-access-control-dae3ab8b7888#2022-05-12</a></blockquote><div><div class="fc ii ij ik il im"/><div class="in io ip iq ir"><div class=""/><div class=""><h2 id="d670" class="pw-subtitle-paragraph jr it iu bd b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki dk translated">让Django的许可系统负责授权控制</h2></div><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj kj"><img src="../Images/4eff785fc59bf6112a612fc5377a8b52.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*n5FwPF5iCLEVajVar88F4A.jpeg"/></div></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">来自<a class="ae kz" href="https://www.pexels.com/" rel="noopener ugc nofollow" target="_blank">佩克斯</a>的蒂姆<a class="ae kz" href="https://www.pexels.com/photo/sorry-we-re-closed-but-still-awesome-tag-1101720/" rel="noopener ugc nofollow" target="_blank">莫斯霍尔德</a>的照片</p></figure><p id="aa1e" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">身份验证可能会阻止外来者，但是我们需要一个授权流来控制谁可以看到什么。</p><p id="5a35" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated"><a class="ae kz" href="https://streamlit.io/" rel="noopener ugc nofollow" target="_blank"> Steramlit </a>简化了数据科学家最大的困难之一——构建一个与他们的机器学习模型互动的应用程序。它提供了一组创建web组件的声明性方法。</p><p id="943d" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">但当你与他人分享Streamlit应用时，安全性是一个问题。Streamlit有一个内置的解决方案来限制用户的访问。但它远非完美。</p><p id="361a" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">在之前的帖子中，我分享了我们如何使用<a class="ae kz" href="https://docs.djangoproject.com/en/dev/topics/auth/default/" rel="noopener ugc nofollow" target="_blank"> Django的认证框架</a>来提高Streamlit应用的安全性。</p><div class="lw lx gq gs ly lz"><a rel="noopener follow" target="_blank" href="/secure-your-streamlit-app-with-django-bb0bee2a6519"><div class="ma ab fp"><div class="mb ab mc cl cj md"><h2 class="bd iv gz z fq me fs ft mf fv fx it bi translated">使用Django保护您的Streamlit应用</h2><div class="mg l"><h3 class="bd b gz z fq me fs ft mf fv fx dk translated">围绕你的机器学习web应用建立一个灵活的认证系统</h3></div><div class="mh l"><p class="bd b dl z fq me fs ft mf fv fx dk translated">towardsdatascience.com</p></div></div><div class="mi l"><div class="mj l mk ml mm mi mn kt lz"/></div></div></a></div><p id="5acb" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">这篇文章延续了上一篇文章，涵盖了针对您的Streamlit应用程序的更细粒度的访问控制策略。我建议你在深入研究之前先读第一本书。</p><p id="3aea" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated"><a class="ae kz" href="#44c2" rel="noopener ugc nofollow">为什么我们需要授权控制？</a> <br/> <a class="ae kz" href="#0981" rel="noopener ugc nofollow">用Django控制仪表板权限。</a> <br/> ∘ <a class="ae kz" href="#3e9c" rel="noopener ugc nofollow">在Django管理控制台中创建用户组。</a> <br/> ∘ <a class="ae kz" href="#8fdc" rel="noopener ugc nofollow">在Django管理控制台中创建用户。</a> <br/> ∘ <a class="ae kz" href="#d007" rel="noopener ugc nofollow">查看细流应用</a>中的权限</p><div class="lw lx gq gs ly lz"><a rel="noopener follow" target="_blank" href="/how-to-create-stunning-web-apps-for-your-data-science-projects-c7791102134e"><div class="ma ab fp"><div class="mb ab mc cl cj md"><h2 class="bd iv gz z fq me fs ft mf fv fx it bi translated">如何为您的数据科学项目创建出色的Web应用程序</h2><div class="mg l"><h3 class="bd b gz z fq me fs ft mf fv fx dk translated">数据科学家不必学习HTML、CSS和JavaScript来构建网页。</h3></div><div class="mh l"><p class="bd b dl z fq me fs ft mf fv fx dk translated">towardsdatascience.com</p></div></div><div class="mi l"><div class="mo l mk ml mm mi mn kt lz"/></div></div></a></div><h1 id="44c2" class="mp mq iu bd mr ms mt mu mv mw mx my mz ka na kb nb kd nc ke nd kg ne kh nf ng bi translated">为什么我们需要授权控制？</h1><p id="780c" class="pw-post-body-paragraph la lb iu lc b ld nh jv lf lg ni jy li lj nj ll lm ln nk lp lq lr nl lt lu lv in bi translated">登录屏幕防止身份不明的人访问系统。我们称之为用户认证。</p><p id="60b5" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">然而，身份验证只是其中之一，但却是安全清单上的一项重要内容。有几种方法可以改善这一点。</p><p id="c152" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">例如，你可以在你的防火墙上设置一个IP限制。但是这样做是阻止大量用户的高级规则。</p><p id="d05e" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">如果您想要粒度控制，该怎么办？</p><blockquote class="nm"><p id="c763" class="nn no iu bd np nq nr ns nt nu nv lv dk translated">假设您只需要向员工展示仪表板的特定部分。但是您可以决定提供一个团队级别的仪表板，并为团队领导提供单独的仪表板。</p></blockquote><p id="1847" class="pw-post-body-paragraph la lb iu lc b ld nw jv lf lg nx jy li lj ny ll lm ln nz lp lq lr oa lt lu lv in bi translated">做到这一点的能力就是访问控制。</p><p id="1181" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">我们已经讨论了为什么Stramlit建议的用户认证流程对于生产级应用来说不够好。我们用姜戈来弥补差距。</p><p id="c10e" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">Streamlit也没有授权选项。让我们继续扩展Django认证来处理权限。</p><div class="lw lx gq gs ly lz"><a rel="noopener follow" target="_blank" href="/github-automated-testing-python-fdfe5aec9446"><div class="ma ab fp"><div class="mb ab mc cl cj md"><h2 class="bd iv gz z fq me fs ft mf fv fx it bi translated">如何使用GitHub动作在每次提交时运行Python测试？</h2><div class="mg l"><h3 class="bd b gz z fq me fs ft mf fv fx dk translated">自动化枯燥的工作，并通过CI管道确保代码质量。</h3></div><div class="mh l"><p class="bd b dl z fq me fs ft mf fv fx dk translated">towardsdatascience.com</p></div></div><div class="mi l"><div class="ob l mk ml mm mi mn kt lz"/></div></div></a></div><h1 id="0981" class="mp mq iu bd mr ms mt mu mv mw mx my mz ka na kb nb kd nc ke nd kg ne kh nf ng bi translated">用Django控制仪表板权限。</h1><p id="2a30" class="pw-post-body-paragraph la lb iu lc b ld nh jv lf lg ni jy li lj nj ll lm ln nk lp lq lr nl lt lu lv in bi translated">计划很简单。</p><p id="7684" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">将用户分配到特定的组。一个用户也可以在多个组中。我们可以在管理界面中这样做。</p><p id="30ca" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">然后，在Streamlit应用程序中，我们检查登录用户的组成员资格。</p><p id="fe13" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">如果这项检查通过，我们将呈现仪表板。否则，我们将显示一条消息，说明“您无法查看此仪表板。”</p><p id="fe0e" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">但是我们首先不需要群体吗？让我们从那里开始。</p><div class="lw lx gq gs ly lz"><a rel="noopener follow" target="_blank" href="/python-project-structure-best-practices-d9d0b174ad5d"><div class="ma ab fp"><div class="mb ab mc cl cj md"><h2 class="bd iv gz z fq me fs ft mf fv fx it bi translated">让您的Python项目结构更优雅的7种方法</h2><div class="mg l"><h3 class="bd b gz z fq me fs ft mf fv fx dk translated">以下是易于管理、可伸缩且易于理解的python项目结构的最佳实践。</h3></div><div class="mh l"><p class="bd b dl z fq me fs ft mf fv fx dk translated">towardsdatascience.com</p></div></div><div class="mi l"><div class="oc l mk ml mm mi mn kt lz"/></div></div></a></div><h2 id="3e9c" class="od mq iu bd mr oe of dn mv og oh dp mz lj oi oj nb ln ok ol nd lr om on nf oo bi translated">在Django管理控制台中创建用户组。</h2><p id="eaf6" class="pw-post-body-paragraph la lb iu lc b ld nh jv lf lg ni jy li lj nj ll lm ln nk lp lq lr nl lt lu lv in bi translated">如果您正在阅读上一篇文章，那么您现在已经有了一个正在运行的Django应用程序，并且可以访问管理门户。</p><p id="0fe3" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">我们也创造了用户。同样，让我们单击“组”旁边的“添加”按钮，添加以下组。</p><ul class=""><li id="6ae3" class="op oq iu lc b ld le lg lh lj or ln os lr ot lv ou ov ow ox bi translated">经理</li><li id="3eed" class="op oq iu lc b ld oy lg oz lj pa ln pb lr pc lv ou ov ow ox bi translated">数据科学团队</li><li id="af1f" class="op oq iu lc b ld oy lg oz lj pa ln pb lr pc lv ou ov ow ox bi translated">财务团队</li></ul><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj pd"><img src="../Images/ff374f0524cba67b6275898965d957ea.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zLkMpWqg-F9hFyUbd7kkMQ.png"/></div></div><p class="kv kw gk gi gj kx ky bd b be z dk translated"><a class="ae kz" href="https://thuwarakesh.medium.com" rel="noopener">作者截图。</a></p></figure><h2 id="8fdc" class="od mq iu bd mr oe of dn mv og oh dp mz lj oi oj nb ln ok ol nd lr om on nf oo bi translated">在Django管理控制台中创建用户。</h2><p id="f7bc" class="pw-post-body-paragraph la lb iu lc b ld nh jv lf lg ni jy li lj nj ll lm ln nk lp lq lr nl lt lu lv in bi translated">在上一篇文章中，我们已经看到了如何从管理控制台添加新用户。让我们添加一些具有以下组成员身份的用户。</p><ul class=""><li id="c4a9" class="op oq iu lc b ld le lg lh lj or ln os lr ot lv ou ov ow ox bi translated">经理</li><li id="7292" class="op oq iu lc b ld oy lg oz lj pa ln pb lr pc lv ou ov ow ox bi translated">B —数据科学团队的成员</li><li id="eac2" class="op oq iu lc b ld oy lg oz lj pa ln pb lr pc lv ou ov ow ox bi translated">C —财务团队成员</li><li id="b75b" class="op oq iu lc b ld oy lg oz lj pa ln pb lr pc lv ou ov ow ox bi translated">d-没有团队成员。</li></ul><p id="5e73" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">您可以通过将组从“可用”部分移动到“已选择”部分来分配它们。只要您单击“保存”，就可以在用户创建页面上找到此部分</p><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj pd"><img src="../Images/c9dc64079bfd6c3ef1b59257cd65d718.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Qqx29vR43CzQOaet2HnJJw.png"/></div></div><p class="kv kw gk gi gj kx ky bd b be z dk translated"><a class="ae kz" href="https://thuwarakesh.medium.com" rel="noopener">作者截图。</a></p></figure><h2 id="d007" class="od mq iu bd mr oe of dn mv og oh dp mz lj oi oj nb ln ok ol nd lr om on nf oo bi translated">检查Streamlit应用程序中的权限</h2><p id="ed1d" class="pw-post-body-paragraph la lb iu lc b ld nh jv lf lg ni jy li lj nj ll lm ln nk lp lq lr nl lt lu lv in bi translated">最后，我们调整streamlit应用程序代码来检查组成员。</p><p id="6e71" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">如果用户(A)是经理组的成员，他们可以访问所有仪表板。该应用程序不需要更多权限。</p><p id="a8e4" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">如果用户(B &amp; C)只有团队成员资格，他们可以访问其团队的仪表板。但不包括其他仪表板。</p><p id="ea96" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">最后，不属于任何组的用户(D)可以登录。然而，他们无法访问任何仪表板。</p><p id="32e9" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">调整后的streamlit应用程序代码将如下所示:</p><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="pe pf l"/></div></figure><p id="355e" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">在上面的代码中，最关键的是，</p><ul class=""><li id="42be" class="op oq iu lc b ld le lg lh lj or ln os lr ot lv ou ov ow ox bi translated">第30行:在会话中存储Django用户对象</li><li id="a6f0" class="op oq iu lc b ld oy lg oz lj pa ln pb lr pc lv ou ov ow ox bi translated">第65行:检查经理或数据科学团队成员资格的条件</li><li id="7a2b" class="op oq iu lc b ld oy lg oz lj pa ln pb lr pc lv ou ov ow ox bi translated">第74行:匹配经理或财务团队成员的条件</li></ul><p id="b82b" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">让我们运行我们的应用程序，看看权限是否正常工作。要启动服务器，让我们运行:</p><pre class="kk kl km kn gu pg ph pi pj aw pk bi"><span id="eed3" class="od mq iu ph b gz pl pm l pn po">streamlit run quickstart.py</span></pre><p id="5e77" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">如果我们在浏览器上检查应用程序，这是它对我们所有四个用户的工作方式。</p><figure class="kk kl km kn gu ko gi gj paragraph-image"><div class="gi gj pp"><img src="../Images/dbe918361e2ddcb4558b1ec3ec686f8f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1280/1*TPxiha8kKPtg94qmQ8Ss4g.gif"/></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">由<a class="ae kz" href="https://thuwarakesh.medium.com" rel="noopener">作者截屏。</a></p></figure><h1 id="878f" class="mp mq iu bd mr ms mt mu mv mw mx my mz ka na kb nb kd nc ke nd kg ne kh nf ng bi translated">最后的想法</h1><p id="4c91" class="pw-post-body-paragraph la lb iu lc b ld nh jv lf lg ni jy li lj nj ll lm ln nk lp lq lr nl lt lu lv in bi translated">我们进一步扩展了我们的Streamlit应用程序，以处理本帖中的权限。</p><p id="277b" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">通过使用Django内置的许可系统，我们受益于它的管理界面。我们可以使用这个界面来创建新的用户和用户组，并管理组成员。</p><p id="70f7" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">正如我们在之前的帖子中看到的，Streamlit仍然年轻。开发其认证和授权系统需要时间。在此之前，我们可以使用Django更安全地构建生产级应用。</p><div class="lw lx gq gs ly lz"><a rel="noopener follow" target="_blank" href="/plotly-dashboards-in-python-28a3bb83702c"><div class="ma ab fp"><div class="mb ab mc cl cj md"><h2 class="bd iv gz z fq me fs ft mf fv fx it bi translated">这就是我如何纯粹用Python创建令人眼花缭乱的仪表盘。</h2><div class="mg l"><h3 class="bd b gz z fq me fs ft mf fv fx dk translated">Plotly dash应用程序是用python构建生产级仪表板的最快方式。</h3></div><div class="mh l"><p class="bd b dl z fq me fs ft mf fv fx dk translated">towardsdatascience.com</p></div></div><div class="mi l"><div class="pq l mk ml mm mi mn kt lz"/></div></div></a></div></div><div class="ab cl pr ps hy pt" role="separator"><span class="pu bw bk pv pw px"/><span class="pu bw bk pv pw px"/><span class="pu bw bk pv pw"/></div><div class="in io ip iq ir"><blockquote class="py pz qa"><p id="6b19" class="la lb qb lc b ld le jv lf lg lh jy li qc lk ll lm qd lo lp lq qe ls lt lu lv in bi translated">感谢阅读，朋友！在<a class="ae kz" href="https://www.linkedin.com/in/thuwarakesh/" rel="noopener ugc nofollow" target="_blank"><strong class="lc iv">LinkedIn</strong></a><a class="ae kz" href="https://twitter.com/Thuwarakesh" rel="noopener ugc nofollow" target="_blank"><strong class="lc iv">Twitter</strong></a><a class="ae kz" href="https://thuwarakesh.medium.com/" rel="noopener"><strong class="lc iv">Medium</strong></a>上跟我打招呼。</p><p id="c4e9" class="la lb qb lc b ld le jv lf lg lh jy li qc lk ll lm qd lo lp lq qe ls lt lu lv in bi translated">还不是中等会员？请使用此链接<a class="ae kz" href="https://thuwarakesh.medium.com/membership" rel="noopener"> <strong class="lc iv">成为会员</strong> </a>因为，不需要你额外付费，我为你引荐赚取一小笔佣金。</p></blockquote></div></div>    
</body>
</html>