<html>
<head>
<title>How to extract more information from categorical plots</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何从分类图中提取更多信息</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/how-to-extract-more-information-from-categorical-plots-8ffac1133eb0#2022-10-31">https://towardsdatascience.com/how-to-extract-more-information-from-categorical-plots-8ffac1133eb0#2022-10-31</a></blockquote><div><div class="fc ii ij ik il im"/><div class="in io ip iq ir"><div class=""/><div class=""><h2 id="c2b7" class="pw-subtitle-paragraph jr it iu bd b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki dk translated">通过使用这两种方法，可以轻松地深入了解分类数据</h2></div><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj kj"><img src="../Images/e9f903ee4d49c4d68538b5a259ff17ed.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*T4qAWrVdXsMTuTCI"/></div></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">约翰·施诺布里奇在Unsplash<a class="ae kz" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">上的照片</a></p></figure><p id="bab9" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">当将分类数据的分布与数字目标变量进行比较时，三种最常用的图通常是箱线图、紫线图和条带图。让我们看看这些使用Python的<a class="ae kz" href="https://seaborn.pydata.org/" rel="noopener ugc nofollow" target="_blank"> seaborn </a>库绘制的图表，并分析我们如何从这些图表中提取更多信息。我们将使用一个关于大型猫科动物及其体重的假想数据集<a class="ae kz" href="https://gist.github.com/sTomerG/8afadb83269a147189a9ebea615e7b50" rel="noopener ugc nofollow" target="_blank">，这是我从维基百科</a>中使用它们的体重统计数据生成的。</p><pre class="kk kl km kn gu lw lx ly lz aw ma bi"><span id="a16b" class="mb mc iu lx b gz md me l mf mg">import seaborn a sns<br/>import pandas as pd</span><span id="d5b0" class="mb mc iu lx b gz mh me l mf mg">df = pd.read_csv('big_cats.csv')</span><span id="e6fb" class="mb mc iu lx b gz mh me l mf mg">sns.boxplot(df, x='cat', y='weight (kg)')</span></pre><figure class="kk kl km kn gu ko gi gj paragraph-image"><div class="gi gj mi"><img src="../Images/c5ec51b12025e98edfb77d5fe973099a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1142/format:webp/1*qZ3fRXa75PDNKeYe8RfoVw.png"/></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">箱线图(作者提供的图表)</p></figure><p id="5dc3" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">从这些箱线图中，我们可以提取以下信息:</p><ul class=""><li id="5b24" class="mj mk iu lc b ld le lg lh lj ml ln mm lr mn lv mo mp mq mr bi translated">每种大型猫科动物数据点的50%的重量(彩色方框)。这也被称为四分位距(IQR)。</li><li id="a730" class="mj mk iu lc b ld ms lg mt lj mu ln mv lr mw lv mo mp mq mr bi translated">每种大型猫科动物的平均体重，看IQR中间的水平线。</li><li id="c5cc" class="mj mk iu lc b ld ms lg mt lj mu ln mv lr mw lv mo mp mq mr bi translated">第25和第75百分位分别称为Q1和Q3。大型猫科动物中最轻的25%在彩色盒子的前面，最重的25%在彩色盒子的上面。</li><li id="8954" class="mj mk iu lc b ld ms lg mt lj mu ln mv lr mw lv mo mp mq mr bi translated">任何异常值，即重量分别小于或大于Q1和Q3的1.5倍IQR的物种中的个别大型猫科动物。</li></ul><p id="798d" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">正如大多数人可能知道的那样，老虎是大型猫科动物中最大的(也是最重的)，这一点在剧情中得到了清晰的体现。然而，老虎和狮子的体重差异似乎太大了:在这个数据集中，超过75%的老虎比任何狮子都重。这里发生了一些奇怪的事情，但是箱线图并没有给我们更多的信息。让我们用<code class="fe mx my mz lx b">sns.violinplot</code>试试小提琴</p><figure class="kk kl km kn gu ko gi gj paragraph-image"><div class="gi gj mi"><img src="../Images/e96be10d366f08308bd91033c2db99f5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1142/format:webp/1*mCHIGBXx8hWVnfKiprFWHg.png"/></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">Violinplot(作者提供的图表)</p></figure><p id="3b3f" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">violinplot在boxplot的顶部添加了一个层，其中violin的厚度意味着数据的密度。尽管如此，这并没有回答我们的问题，为什么这个数据集中的狮子是如此之轻。我们可以尝试使用另一个图:stripplot，它绘制单个数据点:</p><figure class="kk kl km kn gu ko gi gj paragraph-image"><div class="gi gj mi"><img src="../Images/d7c01d55db2ab0122ac34dc40a13d4d6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1142/format:webp/1*RIdRzklKqsB2DBsDhrRePg.png"/></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">剥离图(作者提供的图表)</p></figure><p id="d7f0" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">最后，我们似乎可以假设为什么狮子的体重出乎意料:只有几个数据点。也许数据集中所有的狮子都是母狮子，它们通常比公狮子轻，或者也许数据集中的几只狮子都是幼狮，还没有发育完全。</p><p id="8637" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">现在，当然，我们可以对每个分类变量应用箱线图和剥离图，但这不是一个非常有效的解决方案。</p><p id="e231" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">这个问题的一个简单解决方案是使用e <a class="ae kz" href="https://extra-datascience-tools.readthedocs.io/en/latest/" rel="noopener ugc nofollow" target="_blank"> xtra-datascience-tools </a>包中的<code class="fe mx my mz lx b">add_count_info_to_xticks</code>，并将其应用于我们的第一个箱线图:</p><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="na nb l"/></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">(作者要点)</p></figure><figure class="kk kl km kn gu ko gi gj paragraph-image"><div class="gi gj mi"><img src="../Images/7656bed301b1e74247a2d0ae86378776.png" data-original-src="https://miro.medium.com/v2/resize:fit:1142/format:webp/1*jML0U009aGdAiqkuhPVPzw.png"/></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">带计数信息的箱线图(按作者分类的图表)</p></figure><p id="9b8f" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">通过添加计数信息，我们可以很容易地发现lion数据中出现了一些奇怪的情况。70个观察中，60个是<em class="nc">南</em>，占85.7%。这意味着lion的箱线图仅基于10个数据点，考虑这一点很重要，这也是我们需要在前面绘制剥离图的原因。我们还可以提取其他信息，如有多少数据点是lions (19.3%)，所有<em class="nc"> nan </em>值中有多少来自lions (69.8%)，以及总数据集有多少<em class="nc"> nan </em>值:86，即23.8%(见y轴标签)。</p><p id="fa50" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">使用<code class="fe mx my mz lx b">add_count_info_to_xticks</code>和它的兄弟<code class="fe mx my mz lx b">add_count_info_to_yticks</code>,我们可以从单个图中提取更多的信息，同时仍然选择我们喜欢的图。</p><p id="c90f" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">因为可视化仍然很好，也许更漂亮一点，我们也可以使用extra-datascience-tool的<code class="fe mx my mz lx b">stripboxplot</code>来创建下面的情节:</p><figure class="kk kl km kn gu ko gi gj paragraph-image"><div class="gi gj mi"><img src="../Images/ef1e19f2fd40e7a46ec27010f956b46d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1142/format:webp/1*ZGToDCOkTsCt84Erb9Ae8A.png"/></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">条形箱线图(作者提供的图表)</p></figure><p id="fb0b" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">使用这个带状盒状图，我们既可以提取盒状图可以给我们的所有信息，也可以提取关于每个类别的单个数据点和数量的信息。使用<code class="fe mx my mz lx b">stripboxplot</code>的<code class="fe mx my mz lx b">count_info</code>参数，我们可以更容易地将计数统计数据添加到图表中:</p><pre class="kk kl km kn gu lw lx nd bn ne nf bi"><span id="6f6a" class="ng mc iu lx b be nh ni l nj mg">import pandas as pd<br/>from extra_ds_tools.plots import stripboxplot<br/><br/>df = pd.read_csv('big_cats.csv')<br/>stripboxplot(df, x_col='cat', y_col='weight (kg)', count_info=True)</span></pre><figure class="kk kl km kn gu ko gi gj paragraph-image"><div class="gi gj mi"><img src="../Images/8f58aadb5b736ee04798ab9798395248.png" data-original-src="https://miro.medium.com/v2/resize:fit:1142/format:webp/1*xoIz7lb27RVpDiFdfSlkPw.png"/></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">带计数信息的条形盒图(按作者分类的图表)</p></figure><h2 id="4552" class="mb mc iu bd nk nl nm dn nn no np dp nq lj nr ns nt ln nu nv nw lr nx ny nz oa bi translated">结论</h2><p id="22ce" class="pw-post-body-paragraph la lb iu lc b ld ob jv lf lg oc jy li lj od ll lm ln oe lp lq lr of lt lu lv in bi translated">箱线图、紫线图和带状图对于比较分类分布非常有用。尽管如此，每个都有自己的优势和劣势。使用轴上的<a class="ae kz" href="https://extra-datascience-tools.readthedocs.io/en/latest/notebooks/tutorial.html#stripboxplot" rel="noopener ugc nofollow" target="_blank">条形盒图</a>和/或<a class="ae kz" href="https://extra-datascience-tools.readthedocs.io/en/latest/notebooks/tutorial.html#add_counts_to_xticks" rel="noopener ugc nofollow" target="_blank">额外计数信息有助于从单个图中提取比使用标准图更多的相关信息！</a></p><p id="5d3b" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">如果你仍然对如何在分类变量上应用新的探索性数据分析方法感兴趣，请务必阅读我的另一篇文章:</p><div class="og oh gq gs oi oj"><a href="https://medium.com/@tomergabay/advancedvaluecounts-for-eda-2f80e2c74ce1" rel="noopener follow" target="_blank"><div class="ok ab fp"><div class="ol ab om cl cj on"><h2 class="bd iv gz z fq oo fs ft op fv fx it bi translated">高级值计数:探索分类变量的新方法</h2><div class="oq l"><h3 class="bd b gz z fq oo fs ft op fv fx dk translated">一个基于熊猫的Python包。值计数()</h3></div><div class="or l"><p class="bd b dl z fq oo fs ft op fv fx dk translated">medium.com</p></div></div><div class="os l"><div class="ot l ou ov ow os ox kt oj"/></div></div></a></div></div></div>    
</body>
</html>