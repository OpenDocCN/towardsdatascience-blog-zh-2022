<html>
<head>
<title>3 Tricks to Prettify Matplotlib Plots</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">美化Matplotlib情节的3个技巧</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/3-tricks-to-prettify-matplotlib-plots-d0a73b861c09#2022-09-14">https://towardsdatascience.com/3-tricks-to-prettify-matplotlib-plots-d0a73b861c09#2022-09-14</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="e0f0" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">你如何显示信息是至关重要的</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/c4ce5022ffcda075da4b4022b7b06f80.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*veFdP1pJPQRICuCnEWjqrA.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">图为<a class="ae ky" href="https://unsplash.com/s/photos/pretty?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的<a class="ae ky" href="https://unsplash.com/@dulceylima?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">杜尔西·利马</a></p></figure><p id="87a2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Matplotlib是Python的数据可视化库之母。它是其他一些用于可视化数据的工具的基础，如Seaborn和Pandas。</p><p id="17ce" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Matplotlib提供了很大的灵活性，因此您可以定制或调整图上的几乎任何内容。如果您想完全控制可视化效果，这是一个优势，但是这需要您编写更多的代码。</p><p id="1c1a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在本文中，我们将介绍3个可用于定制Matplotlib图的技巧，它们是:</p><ul class=""><li id="8f6f" class="lv lw it lb b lc ld lf lg li lx lm ly lq lz lu ma mb mc md bi translated">减少x轴或y轴上的刻度数</li><li id="b4fa" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated">添加辅助y轴</li><li id="4279" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated">共享x轴和紧凑布局的人物与支线剧情</li></ul><p id="1b08" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们将创建线形图，但是这些技巧也可以应用于其他类型的图。当然，我们需要一些数据来处理。我创建了一个包含模拟价格和销售数据的数据集。你可以从我的GitHub页面上的<a class="ae ky" href="https://github.com/SonerYldrm/datasets" rel="noopener ugc nofollow" target="_blank">数据集</a>库中下载数据集。让我们从从这个数据集创建一个熊猫数据帧开始。</p><pre class="kj kk kl km gt mj mk ml mm aw mn bi"><span id="e533" class="mo mp it mk b gy mq mr l ms mt">import pandas as pd<br/>import numpy as np</span><span id="0b21" class="mo mp it mk b gy mu mr l ms mt">df = pd.read_csv("mock_sales_data.csv", nrows=100)</span><span id="4acd" class="mo mp it mk b gy mu mr l ms mt">df.head()</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mv"><img src="../Images/8713263263833ea6e3922ada944d0bba.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*22ak7j6zCYz-Ypq6Sv6Q_g.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">(图片由作者提供)</p></figure><p id="7b2b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">数据集包含日期、价格和销售量列。出于演示目的，我只读了数据集的前100行。</p></div><div class="ab cl mw mx hx my" role="separator"><span class="mz bw bk na nb nc"/><span class="mz bw bk na nb nc"/><span class="mz bw bk na nb"/></div><div class="im in io ip iq"><h1 id="a011" class="nd mp it bd ne nf ng nh ni nj nk nl nm jz nn ka no kc np kd nq kf nr kg ns nt bi translated">减少刻度数</h1><p id="e3c5" class="pw-post-body-paragraph kz la it lb b lc nu ju le lf nv jx lh li nw lk ll lm nx lo lp lq ny ls lt lu im bi translated">如果绘制在轴上的数据点数很多，刻度可能看起来太紧，甚至在某些情况下重叠。处理时间序列数据时，x轴通常包含占用大量空间的日期，因此最好减少轴上的刻度数。</p><p id="0776" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们先做一个例子，不限制x轴上的刻度数。</p><pre class="kj kk kl km gt mj mk ml mm aw mn bi"><span id="4a5e" class="mo mp it mk b gy mq mr l ms mt">import matplotlib.pyplot as plt<br/>plt.style.use("seaborn-darkgrid")</span><span id="7098" class="mo mp it mk b gy mu mr l ms mt"># create a Figure object<br/>plt.figure(figsize=(12, 6))</span><span id="ef74" class="mo mp it mk b gy mu mr l ms mt"># create the line plot<br/>plt.plot(df["Date"], df["Price"])<br/>plt.show()</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nz"><img src="../Images/182afa0b17d60728388070e8951dfe90.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*SpKA2aWTRi7iMmAWapIoeQ.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">(图片由作者提供)</p></figure><p id="a48e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">刻度重叠，我们无法读取它们。让我们创建一个相同的图，但是使用更少的刻度。</p><pre class="kj kk kl km gt mj mk ml mm aw mn bi"><span id="994c" class="mo mp it mk b gy mq mr l ms mt"># create a Figure object<br/>plt.figure(figsize=(12, 6))</span><span id="0418" class="mo mp it mk b gy mu mr l ms mt"># create the line plot<br/>plt.plot(df["Date"], df["Price"])</span><span id="9218" class="mo mp it mk b gy mu mr l ms mt"># show one tick for every 15 value and change the fontsize of ticks<br/>plt.xticks(np.arange(0, len(df), 15), fontsize=12)<br/>plt.yticks(fontsize=12)</span><span id="e0e0" class="mo mp it mk b gy mu mr l ms mt">plt.show()</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oa"><img src="../Images/f40d103552d88086e5f3ff9c65242af8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*k3PRFpqCvgyIx1pVqlM4jQ.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">(图片由作者提供)</p></figure><p id="e72f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在看起来好多了。我们使用NumPy的arrange函数指定了记号的位置。</p></div><div class="ab cl mw mx hx my" role="separator"><span class="mz bw bk na nb nc"/><span class="mz bw bk na nb nc"/><span class="mz bw bk na nb"/></div><div class="im in io ip iq"><h1 id="e5b5" class="nd mp it bd ne nf ng nh ni nj nk nl nm jz nn ka no kc np kd nq kf nr kg ns nt bi translated">第二y轴</h1><p id="8603" class="pw-post-body-paragraph kz la it lb b lc nu ju le lf nv jx lh li nw lk ll lm nx lo lp lq ny ls lt lu im bi translated">我们有时想在同一个图上显示两个变量。例如，可以将一种产品的价格和它的销售数量绘制在一起，以查看价格对销售数量的影响。</p><p id="a206" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果价格和销售量具有非常不同的值范围，则需要一个辅助y轴。否则，情节将不会好看，甚至可能无法阅读。</p><p id="c3c8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">下面是演示这种情况的一个示例。我们的数据框架中的销售数量和价格列显示在同一个线图上，只有一个y轴。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ob"><img src="../Images/9361798dfd72b512c367692d5660e7dc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2A7JjELZA2fJEfw7mLSXxQ.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">(图片由作者提供)</p></figure><p id="5f56" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">因为与销售量相比，价格值非常低，所以我们把它们看作一条直线，它不能告诉我们价格和销售量之间的任何关系。</p><p id="e691" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们用第二个y轴生成同样的图。</p><pre class="kj kk kl km gt mj mk ml mm aw mn bi"><span id="9663" class="mo mp it mk b gy mq mr l ms mt"># create a Figure and an Axes object<br/>fig, ax1 = plt.subplots(figsize=(12,6))</span><span id="3aa7" class="mo mp it mk b gy mu mr l ms mt"># create the second Axes object with same x-axis<br/>ax2 = ax1.twinx()</span><span id="71dd" class="mo mp it mk b gy mu mr l ms mt"># create the line plots<br/>ax1.plot(df["Date"], df["Price"])<br/>ax2.plot(df["Date"], df["SalesQty"], color="orange")</span><span id="892c" class="mo mp it mk b gy mu mr l ms mt"># create axis labels and title<br/>ax1.set_ylabel("Price", fontsize=15)<br/>ax2.set_ylabel("SalesQty", fontsize=15)</span><span id="1783" class="mo mp it mk b gy mu mr l ms mt"># customize x-ticks and y-ticks<br/>ax1.tick_params(axis='both', which='major', labelsize=12)<br/>ax2.tick_params(axis='both', which='major', labelsize=12)</span><span id="16e9" class="mo mp it mk b gy mu mr l ms mt"># reduce the number of x-ticks<br/>plt.xticks(np.arange(0, len(df), 15))</span><span id="9dda" class="mo mp it mk b gy mu mr l ms mt"># remove the grid lines<br/>ax1.grid(False)<br/>ax2.grid(False)</span><span id="247e" class="mo mp it mk b gy mu mr l ms mt">plt.show()</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oc"><img src="../Images/d96cce6c3140b288b06f786a86ca36bf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_DtGLw7RuEy9zQjx6Owyiw.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">(图片由作者提供)</p></figure><p id="55b4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">看起来好多了。我们可以观察到价格和销售量之间的反比关系。</p></div><div class="ab cl mw mx hx my" role="separator"><span class="mz bw bk na nb nc"/><span class="mz bw bk na nb nc"/><span class="mz bw bk na nb"/></div><div class="im in io ip iq"><h1 id="5d8c" class="nd mp it bd ne nf ng nh ni nj nk nl nm jz nn ka no kc np kd nq kf nr kg ns nt bi translated">共享x轴和紧凑布局的人物与支线剧情</h1><p id="5e74" class="pw-post-body-paragraph kz la it lb b lc nu ju le lf nv jx lh li nw lk ll lm nx lo lp lq ny ls lt lu im bi translated">我们可以在一个人物对象上创建多个支线剧情。Matplotlib允许使用subplots函数创建一个subplots网格。例如，下面的代码行创建了一个2x2网格的图形，其中有4个支线剧情。</p><pre class="kj kk kl km gt mj mk ml mm aw mn bi"><span id="7911" class="mo mp it mk b gy mq mr l ms mt">fig, (ax1, ax2, ax3, ax4) = plt.subplots(nrows=2, ncols=2)</span></pre><p id="5b54" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们使用nrows和ncols参数定制网格的结构。</p><p id="761b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">当创建一个有支线剧情的网格时，有一些事情要记住。第一个是sharex参数。如果我们把支线剧情一个接一个的放在一起，那么最好在底部的剧情上只有x轴。这可以通过使用sharex参数来实现。</p><p id="e571" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">另一个提高可读性的技巧是tight_layout函数。它可以用来调整支线剧情之间的填充。在某些情况下，支线剧情过于紧凑，甚至重叠。我们可以使用tight_layout函数来防止这种情况。</p><p id="c403" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们用这些技巧做一个例子。</p><pre class="kj kk kl km gt mj mk ml mm aw mn bi"><span id="2a96" class="mo mp it mk b gy mq mr l ms mt"># create a grid of subplots with 2 rows<br/>fig, (ax1, ax2) = plt.subplots(<br/>    nrows=2, ncols=1, <br/>    sharex=True,<br/>    figsize=(12, 8)<br/>)</span><span id="1e00" class="mo mp it mk b gy mu mr l ms mt"># adjust the space between the subplots<br/>fig.tight_layout(pad=2)</span><span id="9288" class="mo mp it mk b gy mu mr l ms mt"># create the first subplot<br/>ax1.plot(df["Date"], df["Price"])<br/>ax1.set_title("Price", fontsize=15)</span><span id="4ba8" class="mo mp it mk b gy mu mr l ms mt"># create the second subplot<br/>ax2.plot(df["Date"], df["SalesQty"])<br/>ax2.set_title("SalesQty", fontsize=15)</span><span id="42c1" class="mo mp it mk b gy mu mr l ms mt"># customize x-ticks and y-ticks<br/>ax1.tick_params(axis='both', which='major', labelsize=12)<br/>ax2.tick_params(axis='both', which='major', labelsize=12)</span><span id="2f61" class="mo mp it mk b gy mu mr l ms mt"># reduce the number of x-ticks<br/>plt.xticks(np.arange(0, len(df), 15), fontsize=12)</span><span id="e5e3" class="mo mp it mk b gy mu mr l ms mt">plt.show()</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi od"><img src="../Images/56e11f87eb7b64d39895a3f7d5ca9b72.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*K5x29yLjhUbugTf76DLZBA.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">(图片由作者提供)</p></figure><p id="4a72" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">随意更改凸台参数的值，并查看其对图形的影响。</p></div><div class="ab cl mw mx hx my" role="separator"><span class="mz bw bk na nb nc"/><span class="mz bw bk na nb nc"/><span class="mz bw bk na nb"/></div><div class="im in io ip iq"><p id="7afb" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们已经学习了3个自定义Matplotlib可视化的技巧。可视化显示的内容是关键部分，但如何显示也很重要。因此，这些技巧肯定会帮助您创建更多信息和功能的数据可视化。</p></div><div class="ab cl mw mx hx my" role="separator"><span class="mz bw bk na nb nc"/><span class="mz bw bk na nb nc"/><span class="mz bw bk na nb"/></div><div class="im in io ip iq"><p id="a03f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><em class="oe">你可以成为</em> <a class="ae ky" href="https://sonery.medium.com/membership" rel="noopener"> <em class="oe">媒介会员</em> </a> <em class="oe">解锁我的全部写作权限，外加其余媒介。如果你已经是了，别忘了订阅</em><a class="ae ky" href="https://sonery.medium.com/subscribe" rel="noopener"><em class="oe"/></a><em class="oe">如果你想在我发表新文章时收到电子邮件。</em></p><p id="5fb8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">感谢您的阅读。如果您有任何反馈，请告诉我。</p></div></div>    
</body>
</html>