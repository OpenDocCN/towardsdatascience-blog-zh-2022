<html>
<head>
<title>Easily Automate Your Documentation and Never Touch It Again</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">轻松自动化您的文档，再也不用碰它了</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/easily-automate-and-never-touch-your-documentation-again-a98c91ce1b95#2022-04-12">https://towardsdatascience.com/easily-automate-and-never-touch-your-documentation-again-a98c91ce1b95#2022-04-12</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="455d" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">使用MkDocs的完全自动化的Python文档过程</h2></div><p id="e599" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">作为开发人员，每个人最喜欢的方面是:维护文档化的代码，并在GitHub上为他们的开发伙伴托管文档。</p><p id="466e" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">当然，我是在开玩笑。文档常常是一项被忽视的任务，这使得新成员接管过时的代码库成为一项浪费且痛苦的任务。我们都经历过——在我之前的开发者在这里做什么？还有……这到底是怎么回事？</p><p id="7697" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">不会了。在<a class="ae le" href="https://www.mkdocs.org/" rel="noopener ugc nofollow" target="_blank"> Mkdocs </a>、<a class="ae le" href="https://github.com/davidenunes/mkgendocs" rel="noopener ugc nofollow" target="_blank"> Mkgendocs </a>、<a class="ae le" href="https://github.com/jeremydiba/automatic-mkgendocs" rel="noopener ugc nofollow" target="_blank">我写的一个自定义脚本</a>和GitHub动作的帮助下，我们可以自动维护像这样的华丽文档<a class="ae le" href="https://tensorx.org/" rel="noopener ugc nofollow" target="_blank"/>！</p><figure class="lg lh li lj gt lk gh gi paragraph-image"><div role="button" tabindex="0" class="ll lm di ln bf lo"><div class="gh gi lf"><img src="../Images/e21682991dcc14996e803025be508c7c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*6z4ObquslvzxxwNS"/></div></div><p class="lr ls gj gh gi lt lu bd b be z dk translated">照片由<a class="ae le" href="https://unsplash.com/@sigmund?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">西格蒙德</a>在<a class="ae le" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</p></figure><h2 id="c43c" class="lv lw it bd lx ly lz dn ma mb mc dp md kr me mf mg kv mh mi mj kz mk ml mm mn bi translated">第一步——确保你的代码库有谷歌风格的python文档串</h2><p id="5222" class="pw-post-body-paragraph ki kj it kk b kl mo ju kn ko mp jx kq kr mq kt ku kv mr kx ky kz ms lb lc ld im bi translated">自动化的第一步只是将<a class="ae le" href="https://sphinxcontrib-napoleon.readthedocs.io/en/latest/example_google.html" rel="noopener ugc nofollow" target="_blank"> google风格的文档字符串</a>添加到python文件中。对于atom文本编辑器用户，我推荐使用<a class="ae le" href="https://atom.io/packages/docblock-python" rel="noopener ugc nofollow" target="_blank"> docblock atom扩展</a>来自动完成这项工作！</p><p id="aa89" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这一步并不是绝对必要的，但是以这种方式添加的任何文档字符串都将在接下来的步骤中被删除并添加到我们的站点中！这一步也可以在闲暇时逐步完成。您添加的文档越多，您的自动文档就越有成效！</p><h2 id="f142" class="lv lw it bd lx ly lz dn ma mb mc dp md kr me mf mg kv mh mi mj kz mk ml mm mn bi translated">步骤2—安装必要的软件包</h2><p id="6397" class="pw-post-body-paragraph ki kj it kk b kl mo ju kn ko mp jx kq kr mq kt ku kv mr kx ky kz ms lb lc ld im bi translated">安装这两个包就这么简单！</p><pre class="lg lh li lj gt mt mu mv mw aw mx bi"><span id="8d13" class="lv lw it mu b gy my mz l na nb">mkgendocs==0.9.0<br/>mkdocs==1.2.3</span></pre><h2 id="6ac5" class="lv lw it bd lx ly lz dn ma mb mc dp md kr me mf mg kv mh mi mj kz mk ml mm mn bi translated">步骤3——下载启动代码并将其添加到您的项目根目录中</h2><p id="fc07" class="pw-post-body-paragraph ki kj it kk b kl mo ju kn ko mp jx kq kr mq kt ku kv mr kx ky kz ms lb lc ld im bi translated">点击下载启动代码<a class="ae le" href="https://github.com/jeremydiba/automatic-mkgendocs/tree/main" rel="noopener ugc nofollow" target="_blank">。这提供了三个有助于自动化的文件！</a></p><p id="26e2" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">mkgendocs.yaml该文件是python文件(例如main.py)到其关联的文档文件输出(例如docs/modules/main.md)。它还包含了我们希望包含在文档中的所有类和文件的列表。我们将自动创建这个映射，以及降价文件本身。</p><p id="33be" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这个文件获取我们的文档文件(例如docs/modules/main.md)，并将它们组织到站点文件夹中，以便创建站点地图。这也将由我们的脚本自动完成。</p><p id="8599" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">automate _ mkdocs . py——这个脚本受Louis de Brujin 的<a class="ae le" rel="noopener" target="_blank" href="/five-tips-for-automatic-python-documentation-7513825b760e">工作的启发，但我自己针对更多情况进行了进一步的扩展和优化，填充了mkgendocs.yaml和mkdocs.yaml文件。将包括所有存在且不包含语法错误的文件。目录结构的样式将反映您的软件包文件夹的设置方式。</a></p><p id="77b2" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">花点时间填写mkgendocs.yaml和mkdocs.yaml的顶部，让它们成为您的项目所独有的！</p><div class="nc nd gp gr ne nf"><a rel="noopener follow" target="_blank" href="/why-is-thunderbolt-3-such-a-huge-deal-and-why-apple-loves-them-614542d32dc2"><div class="ng ab fo"><div class="nh ab ni cl cj nj"><h2 class="bd iu gy z fp nk fr fs nl fu fw is bi translated">为什么雷电3如此重要？(以及苹果为什么喜欢它们)</h2><div class="nm l"><h3 class="bd b gy z fp nk fr fs nl fu fw dk translated">无论您是将它用于eGPU和机器学习、游戏，还是用于外部显示器…没有它的生活可能…</h3></div><div class="nn l"><p class="bd b dl z fp nk fr fs nl fu fw dk translated">towardsdatascience.com</p></div></div><div class="no l"><div class="np l nq nr ns no nt lp nf"/></div></div></a></div><h2 id="b05d" class="lv lw it bd lx ly lz dn ma mb mc dp md kr me mf mg kv mh mi mj kz mk ml mm mn bi translated">第4步—立即创建文档！</h2><p id="e500" class="pw-post-body-paragraph ki kj it kk b kl mo ju kn ko mp jx kq kr mq kt ku kv mr kx ky kz ms lb lc ld im bi translated">运行以下命令:</p><pre class="lg lh li lj gt mt mu mv mw aw mx bi"><span id="fcdd" class="lv lw it mu b gy my mz l na nb">python automate_mkdocs.py<br/></span></pre><p id="2023" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这将自动填充mkdocs.yaml和mkgendocs.yaml文件。</p><pre class="lg lh li lj gt mt mu mv mw aw mx bi"><span id="845e" class="lv lw it mu b gy my mz l na nb">gendocs --config mkgendocs.yml</span></pre><p id="2c14" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这个命令获取我们的mkgendocs文件，并生成我们的markdown文件！注意:您可能需要在根目录下创建docs文件夹。</p><p id="1839" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们现在可以使用以下工具测试和查看我们的文档:</p><pre class="lg lh li lj gt mt mu mv mw aw mx bi"><span id="edb6" class="lv lw it mu b gy my mz l na nb">mkdocs serve</span></pre><p id="0485" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">当您对它在本地的外观感到满意时，我们可以用</p><pre class="lg lh li lj gt mt mu mv mw aw mx bi"><span id="2b6f" class="lv lw it mu b gy my mz l na nb">mkdocs gh-deploy</span></pre><p id="8c54" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">就是这么简单！刚刚创建了一个新的分支来保存您的文档和自动生成的站点地图！如果您喜欢在每次更改文档时都运行这些命令，那么到此结束就好了，但是，我们还可以做一个进一步的优化，那就是设置Github操作，以便在每次我们推送到我们的主(或任何)分支时更新和部署我们的文档！</p><h2 id="83d8" class="lv lw it bd lx ly lz dn ma mb mc dp md kr me mf mg kv mh mi mj kz mk ml mm mn bi translated">步骤5——使用GitHub动作自动部署文档</h2><p id="47d3" class="pw-post-body-paragraph ki kj it kk b kl mo ju kn ko mp jx kq kr mq kt ku kv mr kx ky kz ms lb lc ld im bi translated">如果你以前从未使用过GitHub actions，我推荐你先熟悉一下这里的<a class="ae le" href="https://docs.github.com/en/actions/quickstart" rel="noopener ugc nofollow" target="_blank"/>！并创建基本yaml文件。从那里，我们将添加命令到:</p><ol class=""><li id="be78" class="nu nv it kk b kl km ko kp kr nw kv nx kz ny ld nz oa ob oc bi translated">设置我们的python版本并检查我们的代码</li><li id="b7d3" class="nu nv it kk b kl od ko oe kr of kv og kz oh ld nz oa ob oc bi translated">安装需求并更新mkdocs和mkgendocs</li><li id="4925" class="nu nv it kk b kl od ko oe kr of kv og kz oh ld nz oa ob oc bi translated">建立或更新我们的降价文件</li><li id="c901" class="nu nv it kk b kl od ko oe kr of kv og kz oh ld nz oa ob oc bi translated">部署我们的网站</li><li id="ad26" class="nu nv it kk b kl od ko oe kr of kv og kz oh ld nz oa ob oc bi translated">提交可能已经发生的任何更改</li><li id="bde6" class="nu nv it kk b kl od ko oe kr of kv og kz oh ld nz oa ob oc bi translated">将这些更改推送到关联的分支</li></ol><p id="87f6" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这可能看起来很多，但一旦做到了，它会让生活变得容易得多！</p><p id="e348" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">注意:你的GitHub actions文件很可能是相似的，但是会根据你使用的python版本，选择的主题，以及你是否有额外的需求比如自定义站点或者GitHub推送限制而有所不同！</p><p id="2508" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">设置我们的Python版本并检查我们的代码。这相当简单！</p><pre class="lg lh li lj gt mt mu mv mw aw mx bi"><span id="77ae" class="lv lw it mu b gy my mz l na nb">- name: Checkout<br/>        uses: actions/checkout@v1</span><span id="eecf" class="lv lw it mu b gy oi mz l na nb">- name: Set up Python python-version<br/>        uses: actions/setup-python@v1<br/>        with:<br/>          python-version: 3.7</span></pre><p id="b09e" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">安装需求并更新mkdocs和mkgendocs——requirements . txt文件应该包含项目的所有文件，包括在步骤2中安装的文件。</p><pre class="lg lh li lj gt mt mu mv mw aw mx bi"><span id="2db2" class="lv lw it mu b gy my mz l na nb">- name: Autogenerate new documentation<br/>        continue-on-error: true<br/>        run: |<br/>          pip install -r requirements.txt<br/>          python automate_mkdocs.py<br/>          git add .</span></pre><p id="e181" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">构建或更新降价文件——我为安装添加了一些额外的pip文件，尽管这些文件可能会被排除！我个人对jinja2包有问题。</p><pre class="lg lh li lj gt mt mu mv mw aw mx bi"><span id="f165" class="lv lw it mu b gy my mz l na nb">- name: Update and Build GH Pages<br/>        run: |<br/>          python -m pip install --upgrade pip<br/>          pip install mkdocs==1.2.3<br/>          pip install mkgendocs==0.9.0<br/>          pip install jinja2==2.11<br/>          gendocs --config mkgendocs.yml</span></pre><p id="5cc7" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">部署我们的站点——它使用了一个非常酷的自定义GitHub动作,并且有大量可选参数，包括设置自定义域！</p><pre class="lg lh li lj gt mt mu mv mw aw mx bi"><span id="5a9a" class="lv lw it mu b gy my mz l na nb">- name: deploy docs<br/>        uses: mhausenblas/mkdocs-deploy-gh-pages@master<br/>        env:<br/>          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}<br/>          #CUSTOM_DOMAIN: optionaldomain.com<br/>          CONFIG_FILE: mkdocs.yml<br/>          EXTRA_PACKAGES: build-base<br/>          # GITHUB_DOMAIN: github.myenterprise.com<br/>          # REQUIREMENTS: docs/docs_requirements.txt, separate requirements file to install any themes you may want on your site<br/></span></pre><p id="f941" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">提交任何更改—我们使用“出错时继续”,因此如果没有更改，它不会失败！</p><pre class="lg lh li lj gt mt mu mv mw aw mx bi"><span id="725a" class="lv lw it mu b gy my mz l na nb">- name: Commit any changes to docs<br/>        continue-on-error: true<br/>        run: |<br/>          git config --local user.name "github-actions[bot]"<br/>          git add ./docs<br/>          git commit -m "Auto-updating the docs"</span></pre><p id="14dd" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">推送我们的更改—注意:您可以选择将这些更改推送至哪个分支</p><pre class="lg lh li lj gt mt mu mv mw aw mx bi"><span id="43ab" class="lv lw it mu b gy my mz l na nb">- name: Push the changes to master<br/>        continue-on-error: true<br/>        uses: ad-m/github-push-action@master<br/>        with:<br/>          github_token: ${{ secrets.GITHUB_TOKEN }}<br/>          branch: master<br/>          force: true</span></pre></div><div class="ab cl oj ok hx ol" role="separator"><span class="om bw bk on oo op"/><span class="om bw bk on oo op"/><span class="om bw bk on oo"/></div><div class="im in io ip iq"><p id="e186" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">仅此而已！一旦您解决了任何部署难题，您现在就有了一个完全自动化的文档工作流！如果这真的对你有帮助，<a class="ae le" href="https://ko-fi.com/davidenunes" rel="noopener ugc nofollow" target="_blank">这里有一个链接</a>指向mkgendocs捐赠页面的创建者。我给他寄了一笔小小的捐款，以表达我对制作这个包裹的感激之情！</p><p id="a34f" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我希望这篇文章对您的文档之旅有所帮助！这篇文章是我最喜欢写的文章之一。如果您认为需要回来参考，请务必保存/标记该故事！如果你喜欢这篇文章，请随意<a class="ae le" href="https://jerdibattista.medium.com/" rel="noopener">关注我</a>，阅读我写的更多内容，或者将我<a class="ae le" href="https://jerdibattista.medium.com/membership" rel="noopener">作为推荐人</a>，这样我就可以继续制作我喜欢的内容。</p><div class="nc nd gp gr ne nf"><a rel="noopener follow" target="_blank" href="/the-best-python-sentiment-analysis-package-1-huge-common-mistake-d6da9ad6cdeb"><div class="ng ab fo"><div class="nh ab ni cl cj nj"><h2 class="bd iu gy z fp nk fr fs nl fu fw is bi translated">最好的Python情绪分析包(+1个巨大的常见错误)</h2><div class="nm l"><h3 class="bd b gy z fp nk fr fs nl fu fw dk translated">如何在不训练自己模型的情况下获得近乎完美的性能</h3></div><div class="nn l"><p class="bd b dl z fp nk fr fs nl fu fw dk translated">towardsdatascience.com</p></div></div><div class="no l"><div class="oq l nq nr ns no nt lp nf"/></div></div></a></div></div></div>    
</body>
</html>