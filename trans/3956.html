<html>
<head>
<title>Installing TensorFlow and Jupyter Notebook on Apple Silicon Macs</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在Apple Silicon Macs上安装TensorFlow和Jupyter笔记本</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/installing-tensorflow-and-jupyter-notebook-on-apple-silicon-macs-d30b14c74a08#2022-09-02">https://towardsdatascience.com/installing-tensorflow-and-jupyter-notebook-on-apple-silicon-macs-d30b14c74a08#2022-09-02</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="75e4" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">了解如何安装configure tensor flow with Jupyter Notebook，以便在您的M1/M2 MAC上使用</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/3edec8a7b2fe2c483741bedb776f1866.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*y0TGruM_KqC3X2_4"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">由<a class="ae ky" href="https://unsplash.com/@ar7work?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">弗拉德·耶拉</a>在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure><p id="6edc" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果你对机器学习或深度学习感兴趣，你肯定会对Anaconda包和Jupyter笔记本很熟悉。对于那些刚刚拥有崭新闪亮的运行苹果芯片的MacBook Air或Mac Studio的人来说，当你试图在Anaconda中安装TensorFlow包时，你可能会有点失望。</p><p id="7a43" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">去年，我写过一篇关于如何在你的Apple Silicon Mac上安装TensorFlow的文章:</p><div class="lv lw gp gr lx ly"><a rel="noopener follow" target="_blank" href="/installing-tensorflow-on-the-m1-mac-410bb36b776"><div class="lz ab fo"><div class="ma ab mb cl cj mc"><h2 class="bd iu gy z fp md fr fs me fu fw is bi translated">在M1 Mac上安装TensorFlow</h2><div class="mf l"><p class="bd b dl z fp md fr fs me fu fw dk translated">towardsdatascience.com</p></div></div><div class="mg l"><div class="mh l mi mj mk mg ml ks ly"/></div></div></a></div><p id="93eb" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">今年我给自己弄了一个Mac工作室，所以我想看看有什么变化。因此，在本文中，我将带您了解在Apple Silicon Mac上安装TensorFlow的最新步骤。好消息是程序现在更加简单了。所以让我们直接开始吧！</p><h1 id="b795" class="mm mn it bd mo mp mq mr ms mt mu mv mw jz mx ka my kc mz kd na kf nb kg nc nd bi translated">苹果硅上的张量流</h1><p id="b2fd" class="pw-post-body-paragraph kz la it lb b lc ne ju le lf nf jx lh li ng lk ll lm nh lo lp lq ni ls lt lu im bi translated">不幸的是，在苹果芯片上安装TensorFlow并不像在Windows上安装Anaconda然后使用<code class="fe nj nk nl nm b">pip install tensorflow</code>命令那样简单。原因如下。</p><p id="3751" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">TensorFlow不正式支持Apple Silicon——这意味着TensorFlow没有针对Apple Silicon架构(arm64)预编译的包。</p><blockquote class="nn no np"><p id="ab48" class="kz la nq lb b lc ld ju le lf lg jx lh nr lj lk ll ns ln lo lp nt lr ls lt lu im bi translated">TensorFlow只为x86架构(Linux、Windows、Mac(在Intel芯片上))和Raspberry PI (arm64)分发官方轮子。</p></blockquote><p id="731d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">为了克服这一限制，苹果保留了自己的<code class="fe nj nk nl nm b">tensorflow-macos</code>包:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nu"><img src="../Images/fb13baea91d925ce9b7f1eb92a119496.png" data-original-src="https://miro.medium.com/v2/resize:fit:1146/format:webp/1*99dmD7R384vlr0PsS99MPg.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><p id="8d44" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">使用Tensorflow的<strong class="lb iu"> PluggableDevice API </strong>，苹果能够将TensorFlow操作翻译成苹果芯片(M1和M2)的GPU可以理解的代码。</p><blockquote class="nn no np"><p id="acb6" class="kz la nq lb b lc ld ju le lf lg jx lh nr lj lk ll ns ln lo lp nt lr ls lt lu im bi translated">你可以从<a class="ae ky" href="https://blog.tensorflow.org/2021/06/pluggabledevice-device-plugins-for-TensorFlow.html" rel="noopener ugc nofollow" target="_blank">https://blog . TensorFlow . org/2021/06/PluggableDevice-device-plugins-for-tensor flow . html</a>了解更多关于tensor flow的PluggableDevice API</p></blockquote><p id="a0a8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe nj nk nl nm b">tensorflow-macos</code>包依赖于另外两个包:</p><ul class=""><li id="e523" class="nv nw it lb b lc ld lf lg li nx lm ny lq nz lu oa ob oc od bi translated"><code class="fe nj nk nl nm b">tensorflow-deps</code> —在arm64上运行Tensorflow的依赖关系，例如<code class="fe nj nk nl nm b">python</code>、<code class="fe nj nk nl nm b">numpy</code>、<code class="fe nj nk nl nm b">grpcio</code>和<code class="fe nj nk nl nm b">h5py</code>。</li><li id="8d4e" class="nv nw it lb b lc oe lf of li og lm oh lq oi lu oa ob oc od bi translated"><code class="fe nj nk nl nm b">tensorflow-metal</code> —确保TensorFlow能够在<strong class="lb iu">金属</strong>上运行的插件</li></ul><p id="2f10" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu"> Metal </strong>框架让你的应用直接访问设备的图形处理单元(GPU)。本质上，这意味着您的TensorFlow代码现在能够利用新Apple Silicon中可用的强大GPU。</p><blockquote class="nn no np"><p id="e304" class="kz la nq lb b lc ld ju le lf lg jx lh nr lj lk ll ns ln lo lp nt lr ls lt lu im bi translated">注意，如果没有<code class="fe nj nk nl nm b">tensorflow-metal</code>包，你的TensorFlow代码仍然可以在你的Apple Silicon Mac上运行，只是TensorFlow将无法利用M1或M2的GPU(它只能使用CPU)。</p></blockquote><h1 id="1c2c" class="mm mn it bd mo mp mq mr ms mt mu mv mw jz mx ka my kc mz kd na kf nb kg nc nd bi translated">在Apple Silicon Mac上安装TensorFlow的步骤</h1><p id="527a" class="pw-post-body-paragraph kz la it lb b lc ne ju le lf nf jx lh li ng lk ll lm nh lo lp lq ni ls lt lu im bi translated">在Apple Silicon Mac上安装TensorFlow非常简单。我在下面几节中列出了这些步骤。</p><h2 id="cbc6" class="oj mn it bd mo ok ol dn ms om on dp mw li oo op my lm oq or na lq os ot nc ou bi translated">下载Conda</h2><p id="d242" class="pw-post-body-paragraph kz la it lb b lc ne ju le lf nf jx lh li ng lk ll lm nh lo lp lq ni ls lt lu im bi translated">不使用<strong class="lb iu"> Anaconda </strong>，而是使用<strong class="lb iu"> MiniForge </strong>，一个轻量级Python解释器，可以完全访问conda生态系统。</p><blockquote class="nn no np"><p id="a060" class="kz la nq lb b lc ld ju le lf lg jx lh nr lj lk ll ns ln lo lp nt lr ls lt lu im bi translated"><strong class="lb iu"> Conda </strong>是一个运行在Windows、Mac OS和Linux上的开源包和环境管理系统。</p></blockquote><p id="03cc" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">对于苹果硅机，可以直接从<a class="ae ky" href="https://github.com/conda-forge/miniforge/releases/latest/download/Miniforge3-MacOSX-arm64.sh" rel="noopener ugc nofollow" target="_blank">https://github . com/conda-forge/miniforge/releases/latest/download/miniforge 3-ma cosx-arm 64 . sh</a>下载<strong class="lb iu"> MinForge安装程序</strong></p><p id="59a5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">下载完<a class="ae ky" href="https://github.com/conda-forge/miniforge/releases/latest/download/Miniforge3-MacOSX-arm64.sh" rel="noopener ugc nofollow" target="_blank"><strong class="lb iu">miniforge 3-ma cosx-arm 64 . sh</strong></a>文件后，打开<strong class="lb iu">终端</strong>，输入以下命令:</p><pre class="kj kk kl km gt ov nm ow ox aw oy bi"><span id="04f5" class="oj mn it nm b gy oz pa l pb pc">$ <strong class="nm iu">chmod +x ~/Downloads/Miniforge3-MacOSX-arm64.sh</strong><br/>$ <strong class="nm iu">sh ~/Downloads/Miniforge3-MacOSX-arm64.sh</strong> </span></pre><p id="5e73" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">遵循屏幕上的安装说明。安装完成后，将为您创建一个基本的Python环境。您可以使用以下命令来验证这一点:</p><pre class="kj kk kl km gt ov nm ow ox aw oy bi"><span id="cd56" class="oj mn it nm b gy oz pa l pb pc">$ <strong class="nm iu">conda info --envs</strong><br/># conda environments:<br/>#<br/>base                  *  /Users/weimenglee/miniforge3</span></pre><h2 id="29c1" class="oj mn it bd mo ok ol dn ms om on dp mw li oo op my lm oq or na lq os ot nc ou bi translated">激活环境</h2><p id="7ff6" class="pw-post-body-paragraph kz la it lb b lc ne ju le lf nf jx lh li ng lk ll lm nh lo lp lq ni ls lt lu im bi translated">使用以下命令激活基本环境:</p><pre class="kj kk kl km gt ov nm ow ox aw oy bi"><span id="e191" class="oj mn it nm b gy oz pa l pb pc">$ <strong class="nm iu">source ~/miniforge3/bin/activate</strong></span></pre><blockquote class="nn no np"><p id="bbb0" class="kz la nq lb b lc ld ju le lf lg jx lh nr lj lk ll ns ln lo lp nt lr ls lt lu im bi translated">如果您的机器只有一个环境，这一步是可选的。</p></blockquote><h2 id="d1fb" class="oj mn it bd mo ok ol dn ms om on dp mw li oo op my lm oq or na lq os ot nc ou bi translated">安装TensorFlow依赖项</h2><p id="1625" class="pw-post-body-paragraph kz la it lb b lc ne ju le lf nf jx lh li ng lk ll lm nh lo lp lq ni ls lt lu im bi translated">键入以下命令安装TensorFlow所需的依赖项(<code class="fe nj nk nl nm b">tensorflow-deps</code>包):</p><pre class="kj kk kl km gt ov nm ow ox aw oy bi"><span id="0eba" class="oj mn it nm b gy oz pa l pb pc">$ <strong class="nm iu">conda install -c apple tensorflow-deps</strong></span></pre><h2 id="2ec3" class="oj mn it bd mo ok ol dn ms om on dp mw li oo op my lm oq or na lq os ot nc ou bi translated">安装TensorFlow</h2><p id="7a0b" class="pw-post-body-paragraph kz la it lb b lc ne ju le lf nf jx lh li ng lk ll lm nh lo lp lq ni ls lt lu im bi translated">键入以下命令安装适用于Mac OS的TensorFlow:</p><pre class="kj kk kl km gt ov nm ow ox aw oy bi"><span id="0662" class="oj mn it nm b gy oz pa l pb pc">$ <strong class="nm iu">python -m pip install tensorflow-macos</strong></span></pre><h1 id="4ad5" class="mm mn it bd mo mp mq mr ms mt mu mv mw jz mx ka my kc mz kd na kf nb kg nc nd bi translated">安装tensor flow-金属插件</h1><p id="517b" class="pw-post-body-paragraph kz la it lb b lc ne ju le lf nf jx lh li ng lk ll lm nh lo lp lq ni ls lt lu im bi translated">键入以下命令安装<code class="fe nj nk nl nm b">tensorflow-metal</code>软件包:</p><pre class="kj kk kl km gt ov nm ow ox aw oy bi"><span id="b1f1" class="oj mn it nm b gy oz pa l pb pc">$ <strong class="nm iu">python -m pip install tensorflow-metal</strong></span></pre><h1 id="f51c" class="mm mn it bd mo mp mq mr ms mt mu mv mw jz mx ka my kc mz kd na kf nb kg nc nd bi translated">安装其他基本库</h1><p id="de81" class="pw-post-body-paragraph kz la it lb b lc ne ju le lf nf jx lh li ng lk ll lm nh lo lp lq ni ls lt lu im bi translated">除了安装TensorFlow库，您还很可能需要为您的机器学习和深度学习项目安装其他包，如<strong class="lb iu"> matplotlib </strong>、<strong class="lb iu"> sklearn </strong>、<strong class="lb iu"> OpenCV </strong>、<strong class="lb iu"> Pandas </strong>等。因此，请继续安装它们，如下所示:</p><pre class="kj kk kl km gt ov nm ow ox aw oy bi"><span id="465f" class="oj mn it nm b gy oz pa l pb pc">$ <strong class="nm iu">conda install -c conda-forge matplotlib -y</strong><br/>$ <strong class="nm iu">conda install -c conda-forge scikit-learn -y</strong><br/>$ <strong class="nm iu">conda install -c conda-forge opencv -y</strong><br/>$ <strong class="nm iu">conda install -c conda-forge pandas -y</strong></span></pre><blockquote class="nn no np"><p id="f375" class="kz la nq lb b lc ld ju le lf lg jx lh nr lj lk ll ns ln lo lp nt lr ls lt lu im bi translated"><code class="fe nj nk nl nm b"><strong class="lb iu">-y</strong></code>选项为您省去安装库时回答确认的麻烦。</p></blockquote><h2 id="88c0" class="oj mn it bd mo ok ol dn ms om on dp mw li oo op my lm oq or na lq os ot nc ou bi translated">安装Jupyter笔记本电脑</h2><p id="fe5c" class="pw-post-body-paragraph kz la it lb b lc ne ju le lf nf jx lh li ng lk ll lm nh lo lp lq ni ls lt lu im bi translated">最后，您可能希望安装Jupyter笔记本:</p><pre class="kj kk kl km gt ov nm ow ox aw oy bi"><span id="b4e3" class="oj mn it nm b gy oz pa l pb pc">$ <strong class="nm iu">conda install notebook -y</strong></span></pre><p id="fd26" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">就是这样！要测试Jupyter笔记本安装是否正确，请启动它:</p><pre class="kj kk kl km gt ov nm ow ox aw oy bi"><span id="4413" class="oj mn it nm b gy oz pa l pb pc">$ <strong class="nm iu">jupyter notebook</strong></span></pre><p id="50e8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果你能看到以下内容，你就万事俱备了！</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pd"><img src="../Images/f098cb4bd65e5faa1f07642f95e5564e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*89CD8ROFTq2obDDllAAXoA.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><p id="7848" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">创建一个新的Jupyter笔记本，并键入以下代码:</p><pre class="kj kk kl km gt ov nm ow ox aw oy bi"><span id="7709" class="oj mn it nm b gy oz pa l pb pc">import tensorflow as tf<br/>print(tf.__version__)<br/>print(tf.keras.__version__)</span></pre><p id="30b4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果您没有看到任何报告的错误，您应该会看到类似如下的输出:</p><pre class="kj kk kl km gt ov nm ow ox aw oy bi"><span id="af0c" class="oj mn it nm b gy oz pa l pb pc">2.9.2<br/>2.9.0</span></pre><p id="0a4a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">既然这样，恭喜你！您已成功安装TensorFlow！</p><h1 id="70b6" class="mm mn it bd mo mp mq mr ms mt mu mv mw jz mx ka my kc mz kd na kf nb kg nc nd bi translated">升级TensorFlow</h1><p id="2ae8" class="pw-post-body-paragraph kz la it lb b lc ne ju le lf nf jx lh li ng lk ll lm nh lo lp lq ni ls lt lu im bi translated">如果您要升级到TensorFlow的新版本，可以遵循以下步骤:</p><ul class=""><li id="2f85" class="nv nw it lb b lc ld lf lg li nx lm ny lq nz lu oa ob oc od bi translated">卸载<code class="fe nj nk nl nm b">tensorflow-macos</code>和<code class="fe nj nk nl nm b">tensorflow-metal</code>包:</li></ul><pre class="kj kk kl km gt ov nm ow ox aw oy bi"><span id="07f3" class="oj mn it nm b gy oz pa l pb pc">$ <strong class="nm iu">python -m pip uninstall tensorflow-macos</strong><br/>$ <strong class="nm iu">python -m pip uninstall tensorflow-metal</strong></span></pre><ul class=""><li id="bd78" class="nv nw it lb b lc ld lf lg li nx lm ny lq nz lu oa ob oc od bi translated">重新安装<code class="fe nj nk nl nm b">tensorflow-deps</code>包:</li></ul><pre class="kj kk kl km gt ov nm ow ox aw oy bi"><span id="090c" class="oj mn it nm b gy oz pa l pb pc">$ <strong class="nm iu">conda install -c apple tensorflow-deps --force-reinstall</strong></span></pre><blockquote class="nn no np"><p id="4882" class="kz la nq lb b lc ld ju le lf lg jx lh nr lj lk ll ns ln lo lp nt lr ls lt lu im bi translated">如果你的TensorFlow安装在一个特定的环境中，那么在上面的命令中添加<code class="fe nj nk nl nm b"><strong class="lb iu">-n <em class="it">&lt;environment_name&gt;</em></strong></code>选项。</p></blockquote><ul class=""><li id="77db" class="nv nw it lb b lc ld lf lg li nx lm ny lq nz lu oa ob oc od bi translated">重新安装<code class="fe nj nk nl nm b">tensorflow-macos</code>包:</li></ul><pre class="kj kk kl km gt ov nm ow ox aw oy bi"><span id="0c5c" class="oj mn it nm b gy oz pa l pb pc">$ <strong class="nm iu">python -m pip install tensorflow-macos</strong></span></pre><div class="lv lw gp gr lx ly"><a href="https://weimenglee.medium.com/membership" rel="noopener follow" target="_blank"><div class="lz ab fo"><div class="ma ab mb cl cj mc"><h2 class="bd iu gy z fp md fr fs me fu fw is bi translated">加入媒介与我的介绍链接-李伟孟</h2><div class="pe l"><h3 class="bd b gy z fp md fr fs me fu fw dk translated">阅读李维孟(以及媒体上成千上万的其他作家)的每一个故事。您的会员费直接支持…</h3></div><div class="mf l"><p class="bd b dl z fp md fr fs me fu fw dk translated">weimenglee.medium.com</p></div></div><div class="mg l"><div class="pf l mi mj mk mg ml ks ly"/></div></div></a></div><h1 id="ee18" class="mm mn it bd mo mp mq mr ms mt mu mv mw jz mx ka my kc mz kd na kf nb kg nc nd bi translated">摘要</h1><p id="2cb2" class="pw-post-body-paragraph kz la it lb b lc ne ju le lf nf jx lh li ng lk ll lm nh lo lp lq ni ls lt lu im bi translated">希望这篇短文能让你在苹果Silicon Mac上轻松安装TensorFlow。对于长期使用Anaconda的用户，请注意，在本文中您现在使用的是MiniForge，我只安装了一些常用的包，如matplotlib、sklearn、OpenCV和Pandas。当您处理项目时，很可能需要使用<code class="fe nj nk nl nm b">pip</code>命令手动安装所需的包(而如果您使用Anaconda，那么已经预安装了很多包)。尽管如此，这只是一点点不便，而不是一个交易破坏者。跟TensorFlow玩得开心！</p></div></div>    
</body>
</html>