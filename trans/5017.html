<html>
<head>
<title>SQL: Trailing or Leading Commas?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">SQL:尾随逗号还是前导逗号？</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/sql-trailing-or-leading-commas-d28ea102200f#2022-11-08">https://towardsdatascience.com/sql-trailing-or-leading-commas-d28ea102200f#2022-11-08</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="67d0" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">，我们一直都错了吗？</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/77a798beb3b77c12ed17f5c8aaffba9d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*4uQbjUOVMpsS38iR"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">由<a class="ae ky" href="https://unsplash.com/@euwars?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">法尔扎德</a>在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure><p id="a4e8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">虽然SQL代码编写风格可以说是一种因人而异的艺术，但有一些准则通常是大多数SQL从业者所遵循的。这样的指导方针将使脚本更具可读性，更容易理解，并帮助我们更好地调试或发现错误。这包括适当的缩进、间距、字母大写、别名和常用表格表达的使用(CTE)。然而，到目前为止，关于逗号的位置还没有一个明确的、普遍接受的标准。</p><p id="6aee" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">逗号应该放在每行之后(结尾)还是之前(开头)？一种风格实际上比另一种好吗？通过查阅SQL从业者的许多意见、研究和网上可用的风格指南，我发现选择任何一种风格总是有强有力的令人信服的理由。</p><p id="22e8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">作为我目前工作的一部分，我每天都写SQL代码。看我自己的团队和公司的其他团队，我见过有人用尾随逗号或前导逗号来写。幸运的是，我还没有看到任何人混合这两种风格。如果你正在混合这两种风格，我建议你选择一种，忠于你的阵营！</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi lv"><img src="../Images/f211632ece691c8bbf4e07c750f7c3e3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*BmYrCfMbXn6y83bjxecL_A.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">尾随逗号与前导逗号|作者图片</p></figure><h1 id="0e39" class="lw lx it bd ly lz ma mb mc md me mf mg jz mh ka mi kc mj kd mk kf ml kg mm mn bi translated">尾随逗号的大小写</h1><p id="3ae6" class="pw-post-body-paragraph kz la it lb b lc mo ju le lf mp jx lh li mq lk ll lm mr lo lp lq ms ls lt lu im bi translated">使用尾随逗号(逗号放在一行的末尾)的最强情况肯定是为了自然的人类可读性。据我所知，所有人类语言都会在一个句子或一个单词后面加上逗号，而不是在前面。这当然是最直观的。</p><p id="0e1a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">例如:</p><pre class="kj kk kl km gt mt mu mv mw aw mx bi"><span id="fd99" class="my lx it mu b gy mz na l nb nc">I would like to learn three things:</span><span id="76f0" class="my lx it mu b gy nd na l nb nc">   play the guitar,</span><span id="0a85" class="my lx it mu b gy nd na l nb nc">   play the piano,</span><span id="abf4" class="my lx it mu b gy nd na l nb nc">   and go for a vacation.</span></pre><p id="48ff" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">以上比:</p><pre class="kj kk kl km gt mt mu mv mw aw mx bi"><span id="d61d" class="my lx it mu b gy mz na l nb nc">I would like to learn three things:</span><span id="af69" class="my lx it mu b gy nd na l nb nc">   play the guitar</span><span id="69a7" class="my lx it mu b gy nd na l nb nc">   , play the piano</span><span id="a6f8" class="my lx it mu b gy nd na l nb nc">   , and go for a vacation.</span></pre><p id="b2a3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">当我们在一个句子或一个单词后面加一个逗号时，我们本能地知道这个句子或这个列表还没有结束。我们的大脑自然会认为逗号后面会有其他单词和句子。</p><p id="48bd" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">尾随逗号样式是使用最广泛的样式。从我谈论和查看各种人写的代码的经验，以及从网上找到的研究和文章来看，这是真的。绝大多数SQL从业者在行后写逗号，就像我们在人类语言中一样。</p><p id="01fd" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">代码编写风格不仅仅是为了方便作者，还包括是否容易被其他人理解，例如代码评审者、其他团队成员甚至未来的团队成员。</p><h1 id="33c5" class="lw lx it bd ly lz ma mb mc md me mf mg jz mh ka mi kc mj kd mk kf ml kg mm mn bi translated">，前导逗号的大小写</h1><p id="5ebc" class="pw-post-body-paragraph kz la it lb b lc mo ju le lf mp jx lh li mq lk ll lm mr lo lp lq ms ls lt lu im bi translated">上面的标题你觉得不自然吗？这不是印刷错误。欢迎来到逗号营。</p><h2 id="fa71" class="my lx it bd ly ne nf dn mc ng nh dp mg li ni nj mi lm nk nl mk lq nm nn mm no bi translated">，更安全也更容易注释掉最后一项</h2><p id="f6e9" class="pw-post-body-paragraph kz la it lb b lc mo ju le lf mp jx lh li mq lk ll lm mr lo lp lq ms ls lt lu im bi translated">人们选择前导逗号的最大原因之一是因为这样更容易注释掉最后一行，而不会留下不必要的尾随逗号，这可能导致语法错误。</p><p id="cfbe" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果我们在末尾添加逗号，当我们注释掉最后一个选中的列时，会导致末尾出现不必要的逗号。在下面的例子中，如果我们注释掉<em class="np">性别</em>列，我们将在<em class="np">身体质量g </em>列后留下不必要的逗号。这将给我们带来一个语法错误，或者让我们不得不做一个额外的步骤来删除逗号。</p><pre class="kj kk kl km gt mt mu mv mw aw mx bi"><span id="ffa8" class="my lx it mu b gy mz na l nb nc">SELECT</span><span id="ceb1" class="my lx it mu b gy nd na l nb nc">   species,</span><span id="72d5" class="my lx it mu b gy nd na l nb nc">   island,</span><span id="6d85" class="my lx it mu b gy nd na l nb nc">   body_mass_g,</span><span id="d3a0" class="my lx it mu b gy nd na l nb nc">   --sex</span><span id="0d6b" class="my lx it mu b gy nd na l nb nc">FROM `bigquery-public-data.ml_datasets.penguins`</span></pre><p id="46e1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果我们遵循前导逗号样式，就不会发生这种情况。在我们注释掉<em class="np">性别</em>列之后，我们就不会在后面留下一个不必要的逗号了。没有语法错误，也不需要额外的步骤来删除逗号。</p><pre class="kj kk kl km gt mt mu mv mw aw mx bi"><span id="c88e" class="my lx it mu b gy mz na l nb nc">SELECT</span><span id="d031" class="my lx it mu b gy nd na l nb nc">   species</span><span id="90a3" class="my lx it mu b gy nd na l nb nc">   , island</span><span id="8cf2" class="my lx it mu b gy nd na l nb nc">   , body_mass_g</span><span id="74be" class="my lx it mu b gy nd na l nb nc">   --sex</span><span id="05b2" class="my lx it mu b gy nd na l nb nc">FROM `bigquery-public-data.ml_datasets.penguins`</span></pre><p id="77f9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">尽管在所选列的末尾留下逗号在一些SQL语言中是一个语法错误，但这对于Google BigQuery标准SQL来说不是问题。事实上，它的<a class="ae ky" href="https://cloud.google.com/bigquery/docs/reference/standard-sql/lexical#trailing_commas" rel="noopener ugc nofollow" target="_blank">文档</a>专门解决了这个问题。给出的原因是为了帮助我们以编程方式创建列列表。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nq"><img src="../Images/569da0b5e722b4bd0f703d5b6db9ad02.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*exUsKQUV6xQmn0fyxlMJTg.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">Google BigQuery |图片中的尾随逗号来自<a class="ae ky" href="https://cloud.google.com/bigquery/docs/reference/standard-sql/lexical#trailing_commas" rel="noopener ugc nofollow" target="_blank"> Google BigQuery文档</a></p></figure><h2 id="f480" class="my lx it bd ly ne nf dn mc ng nh dp mg li ni nj mi lm nk nl mk lq nm nn mm no bi translated">，更容易发现遗漏的逗号</h2><p id="fcb7" class="pw-post-body-paragraph kz la it lb b lc mo ju le lf mp jx lh li mq lk ll lm mr lo lp lq ms ls lt lu im bi translated">当我们使用前导逗号时，项目/列是垂直排列的，都以逗号开始。很容易发现我们漏掉逗号的情况。另一方面，如果我们使用尾随逗号，我们的眼睛需要在屏幕上移动(因为列名的长度不同)，这很容易出错。</p><h1 id="1617" class="lw lx it bd ly lz ma mb mc md me mf mg jz mh ka mi kc mj kd mk kf ml kg mm mn bi translated">额外:Google BigQuery文档怎么说？</h1><p id="d227" class="pw-post-body-paragraph kz la it lb b lc mo ju le lf mp jx lh li mq lk ll lm mr lo lp lq ms ls lt lu im bi translated">尽管我在BigQuery文档中找不到提倡这两种风格的风格指南，但我可以根据他们在文档中使用的风格做出合理的推断。</p><p id="eca9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">例如，在解释除了之外的<em class="np"> SELECT *的用法时，下面是Google BigQuery文档中的例子</em></p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nr"><img src="../Images/3e227dbc61f2496d0b8b4900469619c7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ol4rWvaHqIyytn-x-G68Zw.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">Google BigQuery使用来自<a class="ae ky" href="https://cloud.google.com/bigquery/docs/reference/standard-sql/query-syntax#select_except" rel="noopener ugc nofollow" target="_blank"> Google BigQuery文档</a>的尾随逗号|图像</p></figure><p id="33ea" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">是的，我们可以看到这里使用了尾随逗号。但是，这绝不是告诉我们使用尾随逗号和前导逗号是更好的样式。</p><h1 id="4b96" class="lw lx it bd ly lz ma mb mc md me mf mg jz mh ka mi kc mj kd mk kf ml kg mm mn bi translated">结论</h1><p id="c7eb" class="pw-post-body-paragraph kz la it lb b lc mo ju le lf mp jx lh li mq lk ll lm mr lo lp lq ms ls lt lu im bi translated">风格是一门艺术，情人眼里出西施。使用前导逗号可能会提高生产率，但是尾随逗号使用得更广泛，越来越多的人习惯了它。你有没有发现前导逗号更有效率，但却有很大的惯性去摆脱尾随逗号的阵营？或者您是否发现结尾的逗号更直观，但却经常出现与逗号相关的语法错误？</p><p id="4a19" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">所以，我再一次给你两个选择:</p><p id="5404" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">尾随逗号？</p><p id="5f78" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">或者</p><p id="177a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">，前导逗号？</p></div><div class="ab cl ns nt hx nu" role="separator"><span class="nv bw bk nw nx ny"/><span class="nv bw bk nw nx ny"/><span class="nv bw bk nw nx"/></div><div class="im in io ip iq"><p id="dee7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">一定要看看我的其他文章:</p><div class="nz oa gp gr ob oc"><a href="https://medium.com/learning-sql/reproducible-random-split-in-bigquery-sql-for-beginners-f36a5825528" rel="noopener follow" target="_blank"><div class="od ab fo"><div class="oe ab of cl cj og"><h2 class="bd iu gy z fp oh fr fs oi fu fw is bi translated">BigQuery SQL中可再现的随机分割(适用于初学者)</h2><div class="oj l"><h3 class="bd b gy z fp oh fr fs oi fu fw dk translated">将数据集随机分成多个组的完整教程</h3></div><div class="ok l"><p class="bd b dl z fp oh fr fs oi fu fw dk translated">medium.com</p></div></div><div class="ol l"><div class="om l on oo op ol oq ks oc"/></div></div></a></div><div class="nz oa gp gr ob oc"><a rel="noopener follow" target="_blank" href="/7-data-visualization-best-practices-everyone-must-know-b68ebe329b1e"><div class="od ab fo"><div class="oe ab of cl cj og"><h2 class="bd iu gy z fp oh fr fs oi fu fw is bi translated">每个人都必须知道的7个数据可视化最佳实践</h2><div class="oj l"><h3 class="bd b gy z fp oh fr fs oi fu fw dk translated">以更有效的方式传达你的故事</h3></div><div class="ok l"><p class="bd b dl z fp oh fr fs oi fu fw dk translated">towardsdatascience.com</p></div></div><div class="ol l"><div class="or l on oo op ol oq ks oc"/></div></div></a></div><div class="nz oa gp gr ob oc"><a rel="noopener follow" target="_blank" href="/data-science-career-switch-is-masters-degree-worth-it-part-2-1110c3440e4b"><div class="od ab fo"><div class="oe ab of cl cj og"><h2 class="bd iu gy z fp oh fr fs oi fu fw is bi translated">数据科学职业转换:硕士值得吗？(第二部分)</h2><div class="oj l"><h3 class="bd b gy z fp oh fr fs oi fu fw dk translated">在计划职业转换之前要学习的编程语言和要问的三个问题</h3></div><div class="ok l"><p class="bd b dl z fp oh fr fs oi fu fw dk translated">towardsdatascience.com</p></div></div><div class="ol l"><div class="os l on oo op ol oq ks oc"/></div></div></a></div><p id="2d53" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在LinkedIn上关注我:<a class="ae ky" href="https://www.linkedin.com/in/nathanthandoko/" rel="noopener ugc nofollow" target="_blank">https://www.linkedin.com/in/nathanthandoko/</a></p></div></div>    
</body>
</html>