<html>
<head>
<title>The Streamlit Colour Picker: An Easy Way to Change Chart Colours on Your Streamlit Dashboard</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Streamlit 颜色选择器:在 Streamlit 仪表板上更改图表颜色的简单方法</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/streamlit-color-picker-widget-an-easy-way-to-change-chart-colours-7929973393ea#2022-12-20">https://towardsdatascience.com/streamlit-color-picker-widget-an-easy-way-to-change-chart-colours-7929973393ea#2022-12-20</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="82a1" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">为仪表板用户提供更大的灵活性</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/b10b49b0f3d8e813b426f2dd59cd6f9d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fittSjUEJ0EbMK1Kz_whHg.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">https://www.pexels.com/photo/person-s-index-finger-977246/斯蒂夫·约翰森摄影:<a class="ae ky" href="https://www.pexels.com/photo/person-s-index-finger-977246/" rel="noopener ugc nofollow" target="_blank"/></p></figure><p id="75a5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><a class="ae ky" href="https://streamlit.io/" rel="noopener ugc nofollow" target="_blank"> Streamlit </a>是一个流行且功能强大的基于 Python 的开源框架，让您可以快速轻松地创建交互式数据科学仪表盘并部署机器学习模型。</p><p id="bed3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Streamlit 的一个有用功能是拾色器工具。这允许您通过让用户选择他们想要的任何颜色而不是使用默认的硬编码颜色来增加您的仪表板的灵活性。</p><p id="4641" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这个简短的教程将向您展示在仪表板中实现<a class="ae ky" href="https://docs.streamlit.io/library/api-reference/widgets/st.color_picker" rel="noopener ugc nofollow" target="_blank"> Streamlit 颜色选择器小部件</a>有多简单。</p><p id="9fa8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果您是 Streamlit 的新手，那么您可能想看看我以前的 Streamlit 教程，让您有一个良好的开端:</p><ul class=""><li id="ba78" class="lv lw it lb b lc ld lf lg li lx lm ly lq lz lu ma mb mc md bi translated"><a class="ae ky" rel="noopener" target="_blank" href="/getting-started-with-streamlit-web-based-applications-626095135cb8">开始使用基于 Streamlit Web 的应用</a></li><li id="f3d8" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated"><a class="ae ky" rel="noopener" target="_blank" href="/creating-true-multi-page-streamlit-apps-the-new-way-2022-b859b3ea2a15">创建真正的多页面简化应用——新方式(2022 </a></li><li id="db5b" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated"><a class="ae ky" rel="noopener" target="_blank" href="/getting-started-with-streamlit-5-functions-you-need-to-know-when-starting-out-b35ed7d872b9">开始使用 Streamlit:开始使用时需要知道的 5 个功能</a></li></ul><h1 id="cc1e" class="mj mk it bd ml mm mn mo mp mq mr ms mt jz mu ka mv kc mw kd mx kf my kg mz na bi translated">安装 Streamlit</h1><p id="f282" class="pw-post-body-paragraph kz la it lb b lc nb ju le lf nc jx lh li nd lk ll lm ne lo lp lq nf ls lt lu im bi translated">如果您尚未安装 Streamlit 库，可以在终端或命令提示符下使用以下命令。</p><pre class="kj kk kl km gt ng nh ni bn nj nk bi"><span id="da86" class="nl mk it nh b be nm nn l no np">pip install streamlit</span></pre><p id="b532" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">安装好 Streamlit 之后，我们可以创建一个名为<code class="fe nq nr ns nh b">app.py</code>的新文件。这是我们添加代码的地方。</p><h1 id="83b2" class="mj mk it bd ml mm mn mo mp mq mr ms mt jz mu ka mv kc mw kd mx kf my kg mz na bi translated">导入库</h1><p id="672f" class="pw-post-body-paragraph kz la it lb b lc nb ju le lf nc jx lh li nd lk ll lm ne lo lp lq nf ls lt lu im bi translated">第一步是导入多个库:<a class="ae ky" href="https://streamlit.io" rel="noopener ugc nofollow" target="_blank"> Streamlit </a>，<a class="ae ky" href="https://numpy.org" rel="noopener ugc nofollow" target="_blank"> numpy </a>，pandas 和 matplotlib。</p><p id="a9f6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们将使用<a class="ae ky" href="https://numpy.org" rel="noopener ugc nofollow" target="_blank"> numpy </a>和<a class="ae ky" href="https://pandas.pydata.org" rel="noopener ugc nofollow" target="_blank"> pandas </a>来创建一些示例数据，并使用<a class="ae ky" href="https://matplotlib.org" rel="noopener ugc nofollow" target="_blank"> matplotlib </a>来生成这些数据的散点图。</p><pre class="kj kk kl km gt ng nh ni bn nj nk bi"><span id="d0c7" class="nl mk it nh b be nm nn l no np">import streamlit as st<br/>import matplotlib.pyplot as plt<br/>import pandas as pd<br/>import numpy as np</span></pre><h1 id="baab" class="mj mk it bd ml mm mn mo mp mq mr ms mt jz mu ka mv kc mw kd mx kf my kg mz na bi translated">创建数据</h1><p id="f85c" class="pw-post-body-paragraph kz la it lb b lc nb ju le lf nc jx lh li nd lk ll lm ne lo lp lq nf ls lt lu im bi translated">接下来，我们需要以 dataframe 的形式创建一些虚拟数据。</p><p id="1fcd" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">为此，我们首先创建一个由 0 到 100 之间的随机整数组成的 numpy 数组，该数组跨越 100 行和 3 列。这将为我们提供足够的数据来显示在图上。此外，请注意，每次我们使用此功能重新运行应用程序时，数据都会发生变化。如果我们不希望这种情况发生，我们需要添加一行来设置种子。</p><pre class="kj kk kl km gt ng nh ni bn nj nk bi"><span id="1493" class="nl mk it nh b be nm nn l no np">np.random.seed(42)</span></pre><p id="7ccb" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然后，我们将这个数组传递给<code class="fe nq nr ns nh b">pd.DataFrame</code>，并将字母 A、B 和 C 指定为列名。这使得以后引用这些列变得更加容易。</p><pre class="kj kk kl km gt ng nh ni bn nj nk bi"><span id="f8c7" class="nl mk it nh b be nm nn l no np">arr_random = np.random.randint(low=0, high=100, size=(100,3)) <br/><br/>data_to_plot = pd.DataFrame(arr_random, columns=["A","B","C"])</span></pre><h1 id="a6db" class="mj mk it bd ml mm mn mo mp mq mr ms mt jz mu ka mv kc mw kd mx kf my kg mz na bi translated">设置简化页面</h1><p id="5d9a" class="pw-post-body-paragraph kz la it lb b lc nb ju le lf nc jx lh li nd lk ll lm ne lo lp lq nf ls lt lu im bi translated">下一步是设置我们的 Streamlit 应用程序。对于这个例子，我们将保持它非常基本。</p><p id="7890" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">首先，我们将创建一个标题<code class="fe nq nr ns nh b">st.header()</code>和一个新的变量来存储用户的颜色选择。这个分配给<code class="fe nq nr ns nh b"><a class="ae ky" href="https://docs.streamlit.io/library/api-reference/widgets/st.color_picker" rel="noopener ugc nofollow" target="_blank">st.color_picker()</a></code>。我们需要做的就是传入一个标签名。</p><pre class="kj kk kl km gt ng nh ni bn nj nk bi"><span id="aae6" class="nl mk it nh b be nm nn l no np">st.header('Streamlit Colour Picker for Charts')<br/><br/>user_colour = st.color_picker(label='Choose a colour for your plot')</span></pre><p id="0890" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">要了解更多关于颜色选择器部件的信息，请查看下面的文档页面。</p><div class="nt nu gp gr nv nw"><a href="https://docs.streamlit.io/library/api-reference/widgets/st.color_picker" rel="noopener  ugc nofollow" target="_blank"><div class="nx ab fo"><div class="ny ab nz cl cj oa"><h2 class="bd iu gy z fp ob fr fs oc fu fw is bi translated">st.color_picker -简化文档</h2><div class="od l"><h3 class="bd b gy z fp ob fr fs oc fu fw dk translated">函数签名 st.color_picker(label，value=None，key=None，help=None，on_change=None，args=None，kwargs=None，*…</h3></div><div class="oe l"><p class="bd b dl z fp ob fr fs oc fu fw dk translated">docs.streamlit.io</p></div></div><div class="of l"><div class="og l oh oi oj of ok ks nw"/></div></div></a></div><h1 id="e571" class="mj mk it bd ml mm mn mo mp mq mr ms mt jz mu ka mv kc mw kd mx kf my kg mz na bi translated">设置 Matplotlib 图形</h1><p id="7332" class="pw-post-body-paragraph kz la it lb b lc nb ju le lf nc jx lh li nd lk ll lm ne lo lp lq nf ls lt lu im bi translated">我们现在需要使用 matplotlib 创建我们的图形。这是通过设置<code class="fe nq nr ns nh b">fig</code>和<code class="fe nq nr ns nh b">ax</code>变量并将其分配给<code class="fe nq nr ns nh b">plt.subplots()</code>来实现的。在这个函数中，我们只需要传递 1，1 来表示我们正在创建一个 1 行 1 列的图形。</p><p id="8570" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">接下来，我们将调用<code class="fe nq nr ns nh b">ax.scatter</code>，并将上面创建的<code class="fe nq nr ns nh b">user_colour</code>变量传递给 c(颜色)参数。</p><p id="4d20" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">最后，为了让 Streamlit 显示 matplotlib 散点图，我们需要调用<code class="fe nq nr ns nh b">st.pyplot()</code>并传入<code class="fe nq nr ns nh b">fig</code>变量。</p><pre class="kj kk kl km gt ng nh ni bn nj nk bi"><span id="26a2" class="nl mk it nh b be nm nn l no np">fig, ax = plt.subplots(1,1)<br/>ax.scatter(x=data_to_plot['A'], y=data_to_plot['B'], c=user_colour)<br/><br/>st.pyplot(fig)</span></pre><h1 id="7fb9" class="mj mk it bd ml mm mn mo mp mq mr ms mt jz mu ka mv kc mw kd mx kf my kg mz na bi translated">运行 Streamlit 应用</h1><p id="bba2" class="pw-post-body-paragraph kz la it lb b lc nb ju le lf nc jx lh li nd lk ll lm ne lo lp lq nf ls lt lu im bi translated">现在基本代码已经写好了，我们可以运行 Streamlit 应用程序了。为此，我们需要在终端中输入以下内容:</p><pre class="kj kk kl km gt ng nh ni bn nj nk bi"><span id="76fd" class="nl mk it nh b be nm nn l no np">streamlit run app.py</span></pre><p id="e694" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这将在您的默认浏览器中启动 Streamlit。</p><p id="7851" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">一旦它启动了，我们将看到我们的颜色选择器工具和 matplotlib 图的基本应用程序。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ol"><img src="../Images/99270d51d89c86024e7dc84bdfc113d1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*neET7iHl6UxuLC0YwxSaQQ.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">使用基本的 matplotlib 图形和颜色选择器简化应用程序。图片由作者提供。</p></figure><p id="9c21" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">要改变颜色，我们需要点击颜色框并选择一种新的颜色。单击颜色选择器框后，图表将会以新的颜色更新。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi om"><img src="../Images/9ced2e7945f30503d4b5536e60dcfc98.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*5dqzcfEOm0Da4UEMgQNmDw.gif"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">使用 Streamlit color_picker 更改 matplotlib 点颜色。图片由作者提供。</p></figure><h1 id="a29b" class="mj mk it bd ml mm mn mo mp mq mr ms mt jz mu ka mv kc mw kd mx kf my kg mz na bi translated">设置默认值以简化拾色器</h1><p id="3ccc" class="pw-post-body-paragraph kz la it lb b lc nb ju le lf nc jx lh li nd lk ll lm ne lo lp lq nf ls lt lu im bi translated">默认情况下，拾色器将设置为黑色(#000000)。我们可以将自己的十六进制代码传递给<code class="fe nq nr ns nh b">st.color_picker()</code>函数的值参数。</p><pre class="kj kk kl km gt ng nh ni bn nj nk bi"><span id="0c91" class="nl mk it nh b be nm nn l no np">user_colour = st.color_picker(label='Choose a colour for your plot', <br/>                              value='#1F9A2E')</span></pre><p id="5772" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">下次启动应用程序时，拾音器的颜色将默认为设置的值。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi on"><img src="../Images/95a4766d82c4ded6cb590d2d3980c51a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*AOyzQdkJxXWP2Nz6ytZi7g.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">设置默认颜色后 streamlit 中的 Matplotlib 图形。图片由作者提供。</p></figure><h1 id="e02f" class="mj mk it bd ml mm mn mo mp mq mr ms mt jz mu ka mv kc mw kd mx kf my kg mz na bi translated">摘要</h1><p id="459f" class="pw-post-body-paragraph kz la it lb b lc nb ju le lf nc jx lh li nd lk ll lm ne lo lp lq nf ls lt lu im bi translated">在这个简短的教程中，我们看到了如何添加一个交互式颜色选择器到我们的 Streamlit 仪表板。这省去了硬编码颜色的麻烦，并允许您为仪表板用户提供更多的灵活性。它实现起来非常简单，可以为你的 Streamlit 作品增加更多的实用性。</p></div><div class="ab cl oo op hx oq" role="separator"><span class="or bw bk os ot ou"/><span class="or bw bk os ot ou"/><span class="or bw bk os ot"/></div><div class="im in io ip iq"><p id="6646" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><em class="ov">感谢阅读。在你走之前，你一定要订阅我的内容，把我的文章放到你的收件箱里。</em> <a class="ae ky" href="https://andymcdonaldgeo.medium.com/subscribe" rel="noopener"> <strong class="lb iu"> <em class="ov">你可以在这里做！</em></strong></a><strong class="lb iu"><em class="ov"/></strong><em class="ov">或者，您也可以</em> <a class="ae ky" href="https://fabulous-founder-2965.ck.page/2ca286e572" rel="noopener ugc nofollow" target="_blank"> <strong class="lb iu"> <em class="ov">注册我的简讯</em> </strong> </a> <em class="ov">免费将更多内容直接发送到您的收件箱。</em></p><p id="3dec" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">其次，通过注册会员，你可以获得完整的媒介体验，并支持我和其他成千上万的作家。每月只需花费你 5 美元，你就可以接触到所有精彩的媒体文章，也有机会通过写作赚钱。</p><p id="1978" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><em class="ov">如果你用</em> <a class="ae ky" href="https://andymcdonaldgeo.medium.com/membership" rel="noopener"> <strong class="lb iu"> <em class="ov">我的链接</em></strong></a><strong class="lb iu"><em class="ov"/></strong><em class="ov">报名，你直接用你的一部分费用支持我，不会多花你多少钱。如果你这样做了，非常感谢你的支持</em></p></div></div>    
</body>
</html>