<html>
<head>
<title>All You Need to Know about Publishing Software on Bioconda</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">关于在 Bioconda 上发布软件，您需要知道的是</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/all-you-need-to-know-about-publishing-software-on-bioconda-680d48e52868#2022-12-08">https://towardsdatascience.com/all-you-need-to-know-about-publishing-software-on-bioconda-680d48e52868#2022-12-08</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="0f5d" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">在 Bioconda 上发布与生物信息学相关的 Python 包</h2></div><p id="9bb3" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">你在安装包和运行大量命令来安装依赖项时遇到过困难吗？如果您幸运的话(大多数情况下您不会幸运)，您将在没有任何依赖问题或版本冲突的情况下完成软件包的安装。在跨学科领域的工作让我意识到让这些工具运行起来有多难，除非你知道从编程的角度来看实际上发生了什么。您希望这些工具与所有依赖项捆绑在一起，并且可以在不与您已经安装的工具冲突的情况下安装/运行。</p><p id="e3cd" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">不要害怕——我亲爱的读者们！包装经理将前来救援！这些是软件工具，像<a class="ae le" href="https://docs.conda.io/en/latest/" rel="noopener ugc nofollow" target="_blank"> <strong class="kk iu">【康达】</strong> </a>和<a class="ae le" href="https://pypi.org/project/pip/" rel="noopener ugc nofollow" target="_blank"> <strong class="kk iu"> pip </strong> </a>，它们以一致的方式自动化安装、维护和删除程序的过程。将您的软件包放在这样的存储库中有助于您的用户轻松安装它。它也增加了你的包裹的可见性和可及性。在本文中，我将通过示例代码片段、模板和最佳实践向您介绍如何在<strong class="kk iu"> bioconda </strong>上发布与生物信息学相关的 Python 包。</p><figure class="lg lh li lj gt lk gh gi paragraph-image"><div role="button" tabindex="0" class="ll lm di ln bf lo"><div class="gh gi lf"><img src="../Images/3ee7c1b7062192842bfe733de381eb9a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7COLvhI5pKeJ_UiaPGHS1Q.png"/></div></div><p class="lr ls gj gh gi lt lu bd b be z dk translated">bioconda-recipes GitHub 知识库(作者截图)</p></figure><h1 id="dc50" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">Bioconda 和配方</h1><p id="5254" class="pw-post-body-paragraph ki kj it kk b kl mn ju kn ko mo jx kq kr mp kt ku kv mq kx ky kz mr lb lc ld im bi translated">我的社区(包括我自己😃)爱<a class="ae le" href="https://bioconda.github.io/" rel="noopener ugc nofollow" target="_blank"> bioconda </a>！Bioconda 允许您使用<a class="ae le" href="https://docs.conda.io/en/latest/" rel="noopener ugc nofollow" target="_blank"> conda </a>软件包管理器安装与生物医学研究相关的软件包。Bioconda 基本上是一个<a class="ae le" href="https://docs.conda.io/projects/conda/en/latest/user-guide/concepts/channels.html" rel="noopener ugc nofollow" target="_blank"> <em class="ms">通道</em> </a>(它是存储软件包的位置)，其中有<a class="ae le" href="https://docs.conda.io/projects/conda-build/en/stable/concepts/recipe.html" rel="noopener ugc nofollow" target="_blank"> <em class="ms">配方</em> </a>，这些配方包含已发布软件包的元数据。我们必须创建一个类似的配方，并将其添加到 bioconda 频道。假设你有一个 GitHub 账号，并且已经安装了<a class="ae le" href="https://docs.anaconda.com/anaconda/install/" rel="noopener ugc nofollow" target="_blank"> Miniconda 或者 Anaconda </a>，那就让我们开始吧。</p><h1 id="838f" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">步骤 1:设置 bioconda 配方库</h1><p id="d850" class="pw-post-body-paragraph ki kj it kk b kl mn ju kn ko mo jx kq kr mp kt ku kv mq kx ky kz mr lb lc ld im bi translated">如果这是你第一次在 bioconda 上发布，你必须建立你的<a class="ae le" href="https://github.com/bioconda/bioconda-recipes" rel="noopener ugc nofollow" target="_blank"><strong class="kk iu">bio conda-recipes</strong></a>库。</p><div class="mt mu gp gr mv mw"><a href="https://github.com/bioconda/bioconda-recipes" rel="noopener  ugc nofollow" target="_blank"><div class="mx ab fo"><div class="my ab mz cl cj na"><h2 class="bd iu gy z fp nb fr fs nc fu fw is bi translated">GitHub-bio conda/bio Conda-recipes:bio Conda 频道的 Conda 食谱。</h2><div class="nd l"><h3 class="bd b gy z fp nb fr fs nc fu fw dk translated">此时您不能执行该操作。您已使用另一个标签页或窗口登录。您已在另一个选项卡中注销，或者…</h3></div><div class="ne l"><p class="bd b dl z fp nb fr fs nc fu fw dk translated">github.com</p></div></div><div class="nf l"><div class="ng l nh ni nj nf nk lp mw"/></div></div></a></div><p id="192c" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">点击<a class="ae le" href="https://github.com/bioconda/bioconda-recipes/fork" rel="noopener ugc nofollow" target="_blank"> <strong class="kk iu">此处</strong> </a>创建 bioconda-recipes 库的分支。</p><p id="9dd7" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">现在使用以下命令创建存储库的本地克隆。确保用你的 GitHub 用户名替换<code class="fe nl nm nn no b">&lt;USERNAME&gt;</code>。</p><pre class="lg lh li lj gt np no nq bn nr ns bi"><span id="3680" class="nt lw it no b be nu nv l nw nx">git clone https://github.com/&lt;USERNAME&gt;/bioconda-recipes.git</span></pre><p id="c903" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">然后添加主 bioconda-recipes repo 作为上游遥控器，这样就可以很容易地更新所做的更改。</p><pre class="lg lh li lj gt np no nq bn nr ns bi"><span id="5c74" class="nt lw it no b be nu nv l nw nx">cd bioconda-recipes<br/>git remote add upstream https://github.com/bioconda/bioconda-recipes.git</span></pre><p id="d756" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">如果在制作副本后对原始存储库进行了更改，您可以使用以下命令更新您的本地副本。</p><pre class="lg lh li lj gt np no nq bn nr ns bi"><span id="f202" class="nt lw it no b be nu nv l nw nx">git checkout master<br/>git pull upstream master<br/>git push origin master</span></pre><p id="d887" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">您可以访问 GitHub 存储库，检查您的 fork 是否与原始存储库保持一致。</p><figure class="lg lh li lj gt lk gh gi paragraph-image"><div role="button" tabindex="0" class="ll lm di ln bf lo"><div class="gh gi ny"><img src="../Images/06abe2d2e602c38e26552f3e69b298ba.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*56ovX8FX9639-StKRYiEfw.png"/></div></div><p class="lr ls gj gh gi lt lu bd b be z dk translated">检查你的叉子是否是最新的(作者截图)</p></figure><h1 id="b28a" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">步骤 2:创建一个分支</h1><p id="dc56" class="pw-post-body-paragraph ki kj it kk b kl mn ju kn ko mo jx kq kr mp kt ku kv mq kx ky kz mr lb lc ld im bi translated">建议您创建自己的分支进行工作。假设您的工具名称是<code class="fe nl nm nn no b">mytool</code>，让我们使用下面的命令创建一个分支。随意用你的工具名替换<code class="fe nl nm nn no b">mytool</code>。</p><pre class="lg lh li lj gt np no nq bn nr ns bi"><span id="a6a5" class="nt lw it no b be nu nv l nw nx">git checkout -b mytool</span></pre><h1 id="4e36" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">第三步:制作你的食谱</h1><p id="93ba" class="pw-post-body-paragraph ki kj it kk b kl mn ju kn ko mo jx kq kr mp kt ku kv mq kx ky kz mr lb lc ld im bi translated">配方将包含一个包含配方中所有元数据的<code class="fe nl nm nn no b">meta.yaml</code>文件。通常，对于一个纯 Python 包来说，拥有这个文件就足够了。如果您需要编译更多的包(例如 C/C++包)或导出路径，这些应该添加到 macOS 和 Linux 的<code class="fe nl nm nn no b">build.sh</code>文件或 Windows 的<code class="fe nl nm nn no b">bld.bat</code>文件中。</p><p id="1b30" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">让我们从食谱目录开始。</p><pre class="lg lh li lj gt np no nq bn nr ns bi"><span id="0448" class="nt lw it no b be nu nv l nw nx">cd recipes</span></pre><h2 id="1ad8" class="nz lw it bd lx oa ob dn mb oc od dp mf kr oe of mh kv og oh mj kz oi oj ml ok bi translated">使用<code class="fe nl nm nn no b">conda skeleton</code>创建配方</h2><p id="b532" class="pw-post-body-paragraph ki kj it kk b kl mn ju kn ko mo jx kq kr mp kt ku kv mq kx ky kz mr lb lc ld im bi translated">如果您已经在<a class="ae le" href="https://pypi.org/" rel="noopener ugc nofollow" target="_blank"> Python 包索引(PyPI) </a>中有了您的包，您可以使用如下的<code class="fe nl nm nn no b">conda skeleton</code>命令自动创建一个模板。以下命令将创建一个名为<code class="fe nl nm nn no b">mytool</code>的文件夹，其中包含一个<code class="fe nl nm nn no b">meta.yaml</code>文件。</p><pre class="lg lh li lj gt np no nq bn nr ns bi"><span id="cd73" class="nt lw it no b be nu nv l nw nx">conda skeleton pypi mytool</span></pre><h2 id="28c7" class="nz lw it bd lx oa ob dn mb oc od dp mf kr oe of mh kv og oh mj kz oi oj ml ok bi translated">创造你自己的食谱</h2><p id="fa8c" class="pw-post-body-paragraph ki kj it kk b kl mn ju kn ko mo jx kq kr mp kt ku kv mq kx ky kz mr lb lc ld im bi translated">如果您的代码应该从 GitHub 库中下载并编译，那么您应该在 GitHub 上发布一个版本。这里有一个模板，假设你的包遵循<a class="ae le" href="https://packaging.python.org/en/latest/guides/distributing-packages-using-setuptools/" rel="noopener ugc nofollow" target="_blank">基本 Python 包结构</a>。请确保更改<code class="fe nl nm nn no b">&lt;USERNAME&gt;</code>、<code class="fe nl nm nn no b">mytool</code>和版本号，以匹配您的 GitHub 帐户和软件包详细信息。</p><pre class="lg lh li lj gt np no nq bn nr ns bi"><span id="65c3" class="nt lw it no b be nu nv l nw nx">{% set name = "mytool" %}<br/>{% set version = "0.1.0" %}<br/><br/>package:<br/>  name: "{{ name|lower }}"<br/>  version: "{{ version }}"<br/><br/>source:<br/>  url: "https://github.com/&lt;USERNAME&gt;/{{ name }}/archive/v{{ version }}.tar.gz"<br/>  sha256: 8e87ae23bd81b842b95d778291d9379b2d89936c14dbb8216ac9cb2d7104c87a<br/><br/>build:<br/>  number: 0<br/>  noarch: python<br/>  entry_points:<br/>    - myutil=mytool_utils.myutil:main<br/>  script:<br/>    - {{ PYTHON }} -m pip install . --no-deps -vv<br/><br/>requirements:<br/>  build:<br/>    - {{ compiler('cxx') }}<br/>  host:<br/>    - pip<br/>    - python &gt;=3.8<br/>  run:<br/>    - python &gt;=3.8<br/>    - biopython<br/>    - pysam<br/>    - networkx<br/>    - scipy<br/>    - numpy<br/>    - tqdm<br/><br/>test:<br/>  commands:<br/>    - mytool --help<br/><br/>about:<br/>  home: "https://github.com/&lt;USERNAME&gt;/mytool"<br/>  license: MIT<br/>  license_file: LICENSE<br/>  summary: "mytool: This is a test"<br/>  doc_url: "https://mytool.readthedocs.io/"<br/>  dev_url: "https://github.com/&lt;USERNAME&gt;/mytool"<br/><br/>extra:<br/>  recipe-maintainers:<br/>    - &lt;USERNAME&gt;<br/>  identifiers:<br/>    - doi:10.10943/myjournal</span></pre><p id="a31c" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">从<code class="fe nl nm nn no b">package</code>下的包的名称和版本开始。</p><p id="34ba" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">然后你要指向<code class="fe nl nm nn no b">source</code>下的发布。确保添加具有正确 SHA256 校验和的正确 URL。您可以使用以下命令获得源代码的 SHA256 校验和。</p><pre class="lg lh li lj gt np no nq bn nr ns bi"><span id="af40" class="nt lw it no b be nu nv l nw nx">name=&lt;your_repo_name&gt;<br/>version=&lt;release_version&gt;<br/>url=https://github.com/&lt;USERNAME&gt;/$name/archive/v$version.tar.gz<br/>wget -O- $url | shasum -a 256</span></pre><p id="95aa" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在<code class="fe nl nm nn no b">build</code>下，您必须提供构建号(从 0 开始)、平台和构建命令(这里我为<code class="fe nl nm nn no b">setup.py</code>添加了构建命令)。这里我定义了<code class="fe nl nm nn no b">noarch: python</code>，意思是这是一个纯 python <a class="ae le" href="https://www.anaconda.com/blog/condas-new-noarch-packages" rel="noopener ugc nofollow" target="_blank"> <strong class="kk iu"> noarch </strong>包</a>，它不包含<strong class="kk iu">任何操作系统特定的文件</strong>。如果您想从命令行调用定制脚本，您可以将它们添加到<code class="fe nl nm nn no b">entry-points</code>下，这将通过识别要运行的 Python 函数来定义 shell 命令(在我们的示例中是<code class="fe nl nm nn no b">main</code>)。</p><p id="f83e" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">然后，您必须在<code class="fe nl nm nn no b">requirements</code>下指定编译器、预处理器、Python 版本和依赖项(如果需要，可以固定特定的版本)。固定包版本时，包及其版本约束必须用空格分隔(例如，<code class="fe nl nm nn no b">python &gt;=3.8</code>)。</p><p id="08b4" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">接下来，您可以在<code class="fe nl nm nn no b">tests</code>中的<code class="fe nl nm nn no b">commands</code>下指定一个命令来测试安装。我通常调用我的工具的帮助命令。确保这些测试命令快速而简单。</p><p id="2a91" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">然后，您可以在<code class="fe nl nm nn no b">about</code>下添加关于软件包的详细信息，如主页 URL、文档 URL、许可类型、许可文件和工具摘要。</p><p id="759d" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">最后，您可以在<code class="fe nl nm nn no b">recipe-maintainers</code>中添加您的 GitHub 用户名，在<code class="fe nl nm nn no b">extra</code>下的<code class="fe nl nm nn no b">identifiers</code>中添加出版物的 DOI。</p><p id="27d2" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">如果你想阅读更多关于<code class="fe nl nm nn no b">meta.yaml</code>文件的细节，请查看<a class="ae le" href="https://bioconda.github.io/tutorials/gcb2020.html#meta-yaml-sections" rel="noopener ugc nofollow" target="_blank">官方 bioconda 文档</a>。</p><div class="mt mu gp gr mv mw"><a href="https://bioconda.github.io/tutorials/gcb2020.html#meta-yaml-sections" rel="noopener  ugc nofollow" target="_blank"><div class="mx ab fo"><div class="my ab mz cl cj na"><h2 class="bd iu gy z fp nb fr fs nc fu fw is bi translated">GCB 2020 教程- Bioconda 文档</h2><div class="nd l"><h3 class="bd b gy z fp nb fr fs nc fu fw dk translated">软件包和环境管理器用户贡献的软件包配方预构建的二进制文件</h3></div><div class="ne l"><p class="bd b dl z fp nb fr fs nc fu fw dk translated">生物大百科</p></div></div><div class="nf l"><div class="ol l nh ni nj nf nk lp mw"/></div></div></a></div><h2 id="cb77" class="nz lw it bd lx oa ob dn mb oc od dp mf kr oe of mh kv og oh mj kz oi oj ml ok bi translated">建议:看看别人的食谱</h2><p id="eca7" class="pw-post-body-paragraph ki kj it kk b kl mn ju kn ko mo jx kq kr mp kt ku kv mq kx ky kz mr lb lc ld im bi translated">如果你不知道如何制作食谱，可以看看其他的食谱，比如你可以使用的代码，然后复制到你自己的食谱目录中。这里有一些很棒的食谱示例。</p><ul class=""><li id="2fd8" class="om on it kk b kl km ko kp kr oo kv op kz oq ld or os ot ou bi translated"><a class="ae le" href="https://github.com/bioconda/bioconda-recipes/tree/master/recipes/phanotate" rel="noopener ugc nofollow" target="_blank"> Phanotate </a> —从 PyPI 下载</li><li id="5120" class="om on it kk b kl ov ko ow kr ox kv oy kz oz ld or os ot ou bi translated"><a class="ae le" href="https://github.com/bioconda/bioconda-recipes/tree/master/recipes/phispy" rel="noopener ugc nofollow" target="_blank"> Physpy </a> —从 PyPI 下载</li><li id="eea7" class="om on it kk b kl ov ko ow kr ox kv oy kz oz ld or os ot ou bi translated"><a class="ae le" href="https://github.com/bioconda/bioconda-recipes/tree/master/recipes/samtools" rel="noopener ugc nofollow" target="_blank"> Samtools </a> —从 GitHub 下载</li><li id="430b" class="om on it kk b kl ov ko ow kr ox kv oy kz oz ld or os ot ou bi translated"><a class="ae le" href="https://github.com/bioconda/bioconda-recipes/tree/master/recipes/hecatomb" rel="noopener ugc nofollow" target="_blank"> Hecatomb </a> —从 GitHub 下载</li></ul><p id="0e6b" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">您可以使用以下命令检查您的更改。</p><pre class="lg lh li lj gt np no nq bn nr ns bi"><span id="3cce" class="nt lw it no b be nu nv l nw nx">git status</span></pre><h1 id="2736" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">步骤 4:提交和推送更改</h1><p id="4c74" class="pw-post-body-paragraph ki kj it kk b kl mn ju kn ko mo jx kq kr mp kt ku kv mq kx ky kz mr lb lc ld im bi translated">您可以提交您的更改，并将它们从您的<code class="fe nl nm nn no b">mytool</code>分支推送到您分叉的 GitHub 存储库。</p><pre class="lg lh li lj gt np no nq bn nr ns bi"><span id="8e4d" class="nt lw it no b be nu nv l nw nx">git add mytool<br/>git commit -m 'Add mytool v0.1.0'<br/>git push --set-upstream origin mytool</span></pre><h1 id="a943" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">步骤 5:创建一个拉取请求</h1><p id="ace0" class="pw-post-body-paragraph ki kj it kk b kl mn ju kn ko mo jx kq kr mp kt ku kv mq kx ky kz mr lb lc ld im bi translated">现在转到你分叉的 GitHub 库，你会看到一条消息说<code class="fe nl nm nn no b">This branch is 1 commit ahead [...] bioconda:master</code>。您将看到一个名为<strong class="kk iu">拉动请求</strong>的按钮，点击它并按照说明操作。您应该添加描述您的拉动式请求。这是我为了添加我的一个工具而创建的一个<a class="ae le" href="https://github.com/bioconda/bioconda-recipes/pull/36256" rel="noopener ugc nofollow" target="_blank">拉请求。如果您的包有出版物，请确保也添加这些详细信息。</a></p><figure class="lg lh li lj gt lk gh gi paragraph-image"><div role="button" tabindex="0" class="ll lm di ln bf lo"><div class="gh gi pa"><img src="../Images/f0dbea7eb071c4ae7f8949b11b967880.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rxVRqVCO59lb8m6caAF-nw.png"/></div></div><p class="lr ls gj gh gi lt lu bd b be z dk translated">创建信息性拉取请求(作者截图)</p></figure><p id="3ca7" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">一旦您创建了拉取请求，bioconda 构建系统将开始测试您的更改。如果你非常幸运，你不会有任何问题，你的构建会通过。如果没有，请编辑您的配方来解决问题，并将更改再次推送到您的分支(一次又一次)。</p><p id="df97" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">当您的构建“变绿”并且所有检查都通过时，您可以发出<code class="fe nl nm nn no b">@BiocondaBot please add label</code>命令。</p><h1 id="d6df" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">步骤 6:测试构建</h1><p id="bb25" class="pw-post-body-paragraph ki kj it kk b kl mn ju kn ko mo jx kq kr mp kt ku kv mq kx ky kz mr lb lc ld im bi translated">同时，您可以发出命令<code class="fe nl nm nn no b">@BiocondaBot please fetch artifacts</code>来获取到 CI 构建的包/容器的链接。您可以下载这些构建，并使用它们在本地测试包。下载完构建之后，创建一个新的 conda 环境(不要安装在您的<code class="fe nl nm nn no b">base</code>环境中),只需运行下面的命令来安装您的包。确保将<code class="fe nl nm nn no b">&lt;build_file_name&gt;</code>替换为您下载的<code class="fe nl nm nn no b">.tar.bz2</code>文件的名称。</p><pre class="lg lh li lj gt np no nq bn nr ns bi"><span id="30e8" class="nt lw it no b be nu nv l nw nx">conda install -c packages &lt;build_file_name&gt;</span></pre><p id="6fc1" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">现在，您可以使用以下命令测试您的安装。</p><pre class="lg lh li lj gt np no nq bn nr ns bi"><span id="cada" class="nt lw it no b be nu nv l nw nx"># show the location of the executable<br/>which mytool<br/><br/># print the version<br/>mytool --version<br/><br/># print the help message<br/>mytool --help</span></pre><p id="6a79" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">如果您已经设置了测试用例，您可以运行它们来确保您的包端到端地正确工作。我通常做这个测试，并在 pull 请求上发布输出，以显示一切正常。这是我在一个拉请求中发布的一个<a class="ae le" href="https://github.com/bioconda/bioconda-recipes/pull/36256#issuecomment-1206012532" rel="noopener ugc nofollow" target="_blank">测试运行</a>。</p><p id="bae9" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">如果一切顺利，来自 bioconda 团队的某人将批准您的拉取请求，并且更改将被合并到主存储库中。</p><h1 id="55b7" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">最后的想法</h1><p id="dbe5" class="pw-post-body-paragraph ki kj it kk b kl mn ju kn ko mo jx kq kr mp kt ku kv mq kx ky kz mr lb lc ld im bi translated">Bioconda 仅支持来自<code class="fe nl nm nn no b">defaults</code>、<code class="fe nl nm nn no b">conda-forge</code>和<code class="fe nl nm nn no b">bioconda</code>渠道的依赖。因此，如果您有来自任何其他通道的依赖项，就没有办法在<code class="fe nl nm nn no b">meta.yaml</code>文件中指定它们，并且您的配方将无法通过构建(仍然有<a class="ae le" href="https://github.com/conda/conda-build/issues/532" rel="noopener ugc nofollow" target="_blank">未解决的问题</a>)。在这种情况下，您将不得不在您自己的频道上发布您的包，我们将在以后的文章中讨论这一点。</p><p id="22de" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">希望这篇文章对你在 bioconda 上发布自己的生物信息学软件有用。请随意浏览<a class="ae le" href="https://bioconda.github.io/tutorials/index.html" rel="noopener ugc nofollow" target="_blank"> bioconda 教程</a>了解更多详情。</p><p id="6c0a" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">快乐包装-出版！</p><p id="cbf4" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">干杯！</p><h1 id="7b50" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">参考</h1><p id="7665" class="pw-post-body-paragraph ki kj it kk b kl mn ju kn ko mo jx kq kr mp kt ku kv mq kx ky kz mr lb lc ld im bi translated">[1] <strong class="kk iu">初始设置— Bioconda 文件</strong>可在<a class="ae le" href="https://bioconda.github.io/contributor/setup.html" rel="noopener ugc nofollow" target="_blank">https://bioconda.github.io/contributor/setup.html</a>获得</p><p id="13af" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">[2] <strong class="kk iu">投稿工作流程— Bioconda 文档</strong>可在<a class="ae le" href="https://bioconda.github.io/contributor/workflow.html" rel="noopener ugc nofollow" target="_blank">https://bioconda.github.io/contributor/workflow.html</a>获得</p><p id="7bff" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">[3] <strong class="kk iu">教程— Bioconda 文档</strong>可在 https://bioconda.github.io/tutorials/index.html<a class="ae le" href="https://bioconda.github.io/tutorials/index.html" rel="noopener ugc nofollow" target="_blank">获得</a></p><p id="5f88" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">[4]我在发布包时遇到的个人问题😁</p></div></div>    
</body>
</html>