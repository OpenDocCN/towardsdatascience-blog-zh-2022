<html>
<head>
<title>Intro to Neo4j: A Graph Database</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Neo4j简介:图形数据库</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/intro-to-neo4j-a-graph-database-19958be6c52f#2022-08-16">https://towardsdatascience.com/intro-to-neo4j-a-graph-database-19958be6c52f#2022-08-16</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="28e6" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">了解图形数据库Neo4j并编写练习查询</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/446b27365bcf10dc876bba35e418f4cc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*D4ZRtctQTvoNedQY"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">作者图片</p></figure><p id="4691" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><strong class="kx ir">Neo4j是什么？</strong></p><p id="485d" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">Neo4j是一个图形数据库，以节点和关系的形式存储数据。这不同于更传统的关系数据库，后者将数据存储为表格。</p><p id="0516" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">使用Neo4j的好处是，它使用本机图形存储、针对速度优化的可扩展架构，并且它是ACID兼容的，这有助于保持基于关系的查询的可预测性。与MySQL相比，Neo4j在图形遍历方面要快得多。</p><p id="0f52" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><strong class="kx ir">设置</strong></p><p id="4dbd" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">要下载Neo4j，请点击<a class="ae lr" href="https://neo4j.com/download-center/#community" rel="noopener ugc nofollow" target="_blank">此处</a>，并按照下载说明进行操作。请务必下载社区版。</p><p id="e91f" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">下载后，打开应用程序，它将看起来像下面的图片。电影数据库是预加载的，可以用来练习查询。对于本教程，单击旁边的添加数据库按钮，然后按创建本地数据库。然后，将数据库的名称改为Practice，设置任意密码，并按create。最后，按start启动数据库，然后按open。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ls"><img src="../Images/435c143bc4e7398e1940289fcca54796.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*yrWWInMTnmueD_KWB8EtYQ.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">作者图片</p></figure><p id="9395" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><strong class="kx ir">什么是节点？</strong></p><p id="027b" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">节点是Neo4j中表示实体的结构类型。Neo4j中的每个节点都有一个惟一的ID。节点也有标签和属性图。Neo4j中的节点用括号()表示。下面的例子将讨论各种类型的节点以及如何创建它们。</p><p id="7790" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">空括号用于创建空节点。运行下面的语句在Neo4j中创建一个空节点。</p><pre class="kg kh ki kj gt lt lu lv lw aw lx bi"><span id="f714" class="ly lz iq lu b gy ma mb l mc md">CREATE ()</span></pre><p id="05c2" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">为了确保已经创建了节点，将弹出如下所示的消息。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/dfc8c4eed1203eb7616f83366ec9c8d8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*2k2PFti7RYSB6HHY"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">作者图片</p></figure><p id="3dcf" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">带有任何字母数字值的括号也表示一个空节点。字母数字值用作空节点的变量。变量只能在一条语句中使用，在其他语句中没有意义。</p><pre class="kg kh ki kj gt lt lu lv lw aw lx bi"><span id="e7e4" class="ly lz iq lu b gy ma mb l mc md">CREATE (a)</span></pre><p id="803d" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">在变量后添加冒号允许添加节点标签。这可以被认为是节点的类型。与SQL相比，具有相同标签的所有节点可以被认为是同一个表的一部分。此外，在图形中，具有相同标签的所有节点将具有相同的颜色。</p><pre class="kg kh ki kj gt lt lu lv lw aw lx bi"><span id="05d8" class="ly lz iq lu b gy ma mb l mc md">CREATE(a:Person)</span></pre><p id="610b" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">该命令运行后将能够看到当前的可视化图形。单击左侧边栏的顶部图标(在下图中以绿色显示)。然后点击*(3)按钮，下面用红色标出，显示整个图表。点击旁边的PEOPLE按钮将显示所有带有PEOPLE标签的节点。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi me"><img src="../Images/cbb16dba5ebf132b3b5680fc1f73fe34.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*IGF-zEXOi3RUpq9mV-F-iw.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">作者图片</p></figure><p id="e6f8" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">定义节点后，可以以键-值对的形式添加属性。在此示例中，节点的属性是name，对于此节点，名称是John，Doe。</p><pre class="kg kh ki kj gt lt lu lv lw aw lx bi"><span id="9556" class="ly lz iq lu b gy ma mb l mc md">CREATE (a:PEOPLE{name:”John, Doe”})</span></pre><p id="4247" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">可以在每个节点的花括号内添加多个属性。要查看每个节点的属性，将鼠标悬停在它上面，右侧会弹出一个侧边栏，如下图所示。</p><pre class="kg kh ki kj gt lt lu lv lw aw lx bi"><span id="199b" class="ly lz iq lu b gy ma mb l mc md">CREATE (a:PEOPLE{name:”John, Doe”, age:21})</span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi mf"><img src="../Images/cd08ba770997c42b4306f7825a0fba5d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*DdACKZPTQpfV37Wd4HaVAg.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">作者图片</p></figure><p id="ab9b" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><strong class="kx ir">什么是关系？</strong></p><p id="77ce" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">关系用于连接成对的节点。有两种关系，直接的和直接的。无向关系用2条虚线表示。有向节点用箭头→或←表示。</p><p id="fc95" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">无向关系用于匹配查询，不能用于create语句。当关系的方向不重要时，它们用于查找节点之间的关系。</p><p id="b5ad" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">对于有向关系，它们可以简单到只使用箭头来连接节点。</p><pre class="kg kh ki kj gt lt lu lv lw aw lx bi"><span id="aec6" class="ly lz iq lu b gy ma mb l mc md">CREATE (a:PEOPLE{name:”John, Doe”}) →(b:PEOPLE{name:”Sally, Mae”})</span></pre><p id="f987" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">或者</p><pre class="kg kh ki kj gt lt lu lv lw aw lx bi"><span id="012b" class="ly lz iq lu b gy ma mb l mc md">CREATE (a:PEOPLE{name:”John, Doe”})←(b:PEOPLE{name:”Sally, Mae”})</span></pre><p id="5bff" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">可以将括号添加到关系中以包括细节。在下面的例子中，变量[p]的用法与节点中的变量相同。</p><pre class="kg kh ki kj gt lt lu lv lw aw lx bi"><span id="8a7c" class="ly lz iq lu b gy ma mb l mc md">CREATE (a:PEOPLE{name:”John, Doe”})-[p]-&gt;(b:PEOPLE{name:”Sally, Mae”})</span></pre><p id="87ec" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">可以将标签添加到与节点标签相似的关系中。下面的关系显示了通过父关系相关的节点“人员”。无名氏是莎莉·梅的父母。</p><pre class="kg kh ki kj gt lt lu lv lw aw lx bi"><span id="0d0d" class="ly lz iq lu b gy ma mb l mc md">CREATE (a:PEOPLE{name:”John, Doe”})-[p:PARENT]-&gt;(b:PEOPLE{name:”Sally, Mae”})</span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi mg"><img src="../Images/ce7bd4a36d6223ca96b7b0d01f573817.png" data-original-src="https://miro.medium.com/v2/resize:fit:884/format:webp/1*l0JW_vTKMFJb1WcjY_StWQ.png"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">以上查询的输出(图片由作者提供)</p></figure><p id="a983" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">属性可以添加到关系中。这些等同于节点中的属性。在本例中，它显示John Doe是Sally Mae的父亲。要查看某个关系的属性，请单击该关系并查看右侧的侧边栏。</p><pre class="kg kh ki kj gt lt lu lv lw aw lx bi"><span id="d1f5" class="ly lz iq lu b gy ma mb l mc md">CREATE (a:PEOPLE{name:'John, Doe'})-[p:PARENT{type:'Father'}]-&gt;(b:PEOPLE{name:'Sally, Mae'})</span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi mf"><img src="../Images/50e1d391e562bebce5c447526d8db8e6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*pNQRtaZm9GjKSnPoZagxyA.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">作者图片</p></figure><p id="ed5d" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">一条语句可以创建多个关系。</p><pre class="kg kh ki kj gt lt lu lv lw aw lx bi"><span id="e720" class="ly lz iq lu b gy ma mb l mc md">CREATE (a:PEOPLE{name:'Jane, Doe'})-[p:PARENT{type:'Mother'}]-&gt;(b:PEOPLE{name:'Freddy, Mae'})-[g:PARENT{type:'Father'}]-&gt; (c:PEOPLE{name: 'Jill, Smith'})</span></pre><p id="28f6" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">上面的关系是用CREATE语句创建的，因为节点还不存在，所以需要同时创建节点和关系。如果节点已经存在，那么需要使用匹配语句。</p><p id="46d7" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><strong class="kx ir">比赛声明</strong></p><p id="b0d5" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">匹配语句用于搜索模式。第一个用途是在现有节点之间创建关系。在这种情况下，它需要与WHERE子句成对出现。首先要匹配的节点需要定义它们的类型。在这个例子中，第一个节点需要是作者，第二个节点需要是书。然后，从每个节点获取特定属性必须在WHERE子句中。在作者下面的例子中，node的名字必须是“Feser，Edward ”, node的书名必须是“亚里士多德论方法和形而上学”。当选择属性来定义特定节点时，请确保它对于您想要的节点是唯一的。</p><pre class="kg kh ki kj gt lt lu lv lw aw lx bi"><span id="1eb1" class="ly lz iq lu b gy ma mb l mc md">CREATE (a:Author{name:'Feser, Edward'}), (b:Book{title:'Aristotle on Method and Metaphysics');</span><span id="2c60" class="ly lz iq lu b gy mh mb l mc md">MATCH (a:Author),(b:Book) WHERE a.name = 'Feser, Edward' and b.title='Aristotle on Method and Metaphysics' CREATE (a)-[:EDITS]-&gt;(b);</span></pre><p id="70dc" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">最简单形式的匹配语句可用于检索特定节点。</p><pre class="kg kh ki kj gt lt lu lv lw aw lx bi"><span id="9908" class="ly lz iq lu b gy ma mb l mc md">MATCH (n:Book) WHERE n.title='Aristotle on Method and Metaphysics' and n.year=2013 RETURN n;</span></pre><p id="0307" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">Match语句也可以用来返回具有相同标签的所有节点。</p><pre class="kg kh ki kj gt lt lu lv lw aw lx bi"><span id="4bff" class="ly lz iq lu b gy ma mb l mc md">MATCH (a:Author) RETURN a;</span></pre><p id="ad85" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">为了构建上面的查询，还可以使用match语句找到一组具有特定关系的节点。基本上，图中的任何模式都可以用match语句找到。</p><p id="dcc5" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><strong class="kx ir">练习查询</strong></p><p id="7c46" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">为了练习上面讨论的内容，创建一个新的数据库，并在Neo4j中运行链接到此处的语句来创建数据库。预期的输出显示在每个提示符下。</p><ol class=""><li id="d5df" class="mi mj iq kx b ky kz lb lc le mk li ml lm mm lq mn mo mp mq bi translated">对于每个作者，列出他们的名字和文章标题(不包括章节或书籍)。</li></ol><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi mr"><img src="../Images/883d3f7a600c58a0a9f2c5bc1a26e193.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*CU1Zlxz2N6OhSCgiDXvGYA.png"/></div></div></figure><p id="1eb7" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">2.列出作者的姓名和各自发表的文章(文章、章节和书籍)数量。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ms"><img src="../Images/1743fed9efed6af5be9b5881f5cf39b3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*eETVj4UjLdatCK8f4oQEhA.png"/></div></div></figure><p id="778c" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">3.列出10页或更少的文章的标题和页数。注意:pp属性是一个列表。您可以使用括号来访问列表元素(例如pp[0])</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi mt"><img src="../Images/0bdc85a51ec1abc05c25bdf6f05705e0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mf-ETLBnIjROocHY-7D1-w.png"/></div></div></figure><p id="4e6f" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">4.列出文章标题、发表文章的期刊标题，以及被引用两次或更多次的文章的作者姓名</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi mu"><img src="../Images/a383c024a880550f5929398a3ddf1034.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_gZzD9rpdu17_OzLm-8JTg.png"/></div></div></figure><p id="5219" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><strong class="kx ir">答案</strong></p><pre class="kg kh ki kj gt lt lu lv lw aw lx bi"><span id="5687" class="ly lz iq lu b gy ma mb l mc md">MATCH (n:Author)-[r:WRITES]-&gt;(x:Article) RETURN n.name,x.title;</span></pre><p id="4866" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi">2.</p><pre class="kg kh ki kj gt lt lu lv lw aw lx bi"><span id="fc54" class="ly lz iq lu b gy ma mb l mc md">MATCH (n:Author)-[:WRITES]-&gt;(r) RETURN n.name, count(*) UNION MATCH (n:Author)-[:EDITS]-&gt;(r) RETURN n.name, count(*);</span></pre><p id="b691" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi">3.</p><pre class="kg kh ki kj gt lt lu lv lw aw lx bi"><span id="900e" class="ly lz iq lu b gy ma mb l mc md">MATCH (n:Article)-[a:IN]-&gt;(i:Issue) WHERE (a.pp[1] - a.pp[0]+1 ) &lt;= 10 RETURN n.title, a.pp[1] - a.pp[0] +1;</span></pre><p id="d246" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi">4.</p><pre class="kg kh ki kj gt lt lu lv lw aw lx bi"><span id="4d22" class="ly lz iq lu b gy ma mb l mc md">MATCH (a)-[:CITES]-&gt;(b) With b, count(b.title) as publication_count WHERE publication_count&gt;=2 With b.title as bt  , publication_count MATCH (au:Author)-[:WRITES]-&gt; (a:Article)-[:IN]-&gt;(:Issue)-[:OF]-&gt;(j:Journal) WHERE bt = a.title Return j.title, a.title, au.name,publication_count;</span></pre><p id="33c3" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">图形数据库正被广泛用于社交网络的欺诈检测。Neo4j在图形数据库中越来越受欢迎。由于其高性能、最大和最活跃的图形社区以及生产应用程序，它从其他图形数据库中脱颖而出。</p><p id="edc9" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">有关Neo4j的任何其他问题或附加练习查询，请联系。此外，查看<a class="ae lr" href="https://neo4j.com/" rel="noopener ugc nofollow" target="_blank"> Neo4j网站</a>获取更多资源。</p></div></div>    
</body>
</html>