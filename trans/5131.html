<html>
<head>
<title>Understanding Boxplot: Infinity Gauntlet of the Dataverse</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">理解箱线图:数据世界的无限挑战</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/understanding-boxplot-infinity-gauntlet-of-the-dataverse-cd57cd067711#2022-11-16">https://towardsdatascience.com/understanding-boxplot-infinity-gauntlet-of-the-dataverse-cd57cd067711#2022-11-16</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="2f01" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">使用 boxplots 和 Tukey 的方法消除手指(或代码)瞬间的异常值</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/f043a7d01ee57ac86053e052207d9be0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Bja5J83H4VUCIagLMVZD0g.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">来自<a class="ae ky" href="https://www.flickr.com/photos/anazasicustom/45484665074/" rel="noopener ugc nofollow" target="_blank"> Flickr </a>的抄送图片</p></figure><p id="24ef" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">箱线图可能会让许多初学者望而生畏。</p><p id="0ba1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu"> <em class="lv">那是因为他们塞满了统计见解！</em> </strong></p><p id="6989" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">但是，如果你愿意挖掘得更深一点，它们可以揭示一个信息宝库。箱线图是统计学和数据科学中的强大工具。</p><p id="0fb3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><em class="lv">有多强大？</em></p><p id="0ccb" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这么说吧:</p><blockquote class="lw"><p id="27f2" class="lx ly it bd lz ma mb mc md me mf lu dk translated"><em class="mg">如果灭霸是一名数据科学家，那么 boxplot 将是他的</em> <strong class="ak"> <em class="mg">无限挑战</em></strong>——他有能力将数据汇总成拳头，并且用手指轻轻一弹就能消除异常值！</p></blockquote><p id="dfc6" class="pw-post-body-paragraph kz la it lb b lc mh ju le lf mi jx lh li mj lk ll lm mk lo lp lq ml ls lt lu im bi translated">而就像《复仇者联盟》中，无限的宇宙力量集中在 6 个无限的石头上——<strong class="lb iu"><em class="lv">将海量数据汇总的力量，浓缩成仅仅 6 个数值。</em> </strong></p><p id="921b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">箱线图直观地表示了这 6 个值。</strong></p><p id="d1ba" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">使用它们，您可以:</p><ul class=""><li id="8e6c" class="mm mn it lb b lc ld lf lg li mo lm mp lq mq lu mr ms mt mu bi translated">获得对数字数据的深刻理解</li><li id="c55d" class="mm mn it lb b lc mv lf mw li mx lm my lq mz lu mr ms mt mu bi translated">做一个快速的图形检查</li><li id="c35d" class="mm mn it lb b lc mv lf mw li mx lm my lq mz lu mr ms mt mu bi translated">比较数据中的不同组</li><li id="ca97" class="mm mn it lb b lc mv lf mw li mx lm my lq mz lu mr ms mt mu bi translated">使用它们来了解并消除数据中的异常值</li></ul><p id="d5f3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu"> <em class="lv">这就是你所谓的数据超级大国！</em> </strong></p><p id="5ca6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们看看如何理解箱线图，它用来总结数据的 6 个值，以及如何使用它们通过<strong class="lb iu">快照消除异常值！</strong></p></div><div class="ab cl na nb hx nc" role="separator"><span class="nd bw bk ne nf ng"/><span class="nd bw bk ne nf ng"/><span class="nd bw bk ne nf"/></div><div class="im in io ip iq"><h1 id="3bd4" class="nh ni it bd nj nk nl nm nn no np nq nr jz ns ka nt kc nu kd nv kf nw kg nx ny bi translated">理解箱线图</h1><p id="7bda" class="pw-post-body-paragraph kz la it lb b lc nz ju le lf oa jx lh li ob lk ll lm oc lo lp lq od ls lt lu im bi translated">既然我们如此彻底地建立了挑战类比，让我们充分利用它来理解无限宝石——呃，对不起，我指的是 6 个重要的价值。</p><p id="d0c4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这张图片会让它更清晰！</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oe"><img src="../Images/24a5e144523a2ff405006b8aaba171b6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*D1y1D5DMj9G4wYoxUgJFYg.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><p id="d0fe" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如图所示，取 21 个数字的升序排序列表<strong class="lb iu">。</strong></p><ul class=""><li id="3be7" class="mm mn it lb b lc ld lf lg li mo lm mp lq mq lu mr ms mt mu bi translated">小指上的石头代表的最小值是列表中的最小值，在本例中为 1。</li><li id="cc1e" class="mm mn it lb b lc mv lf mw li mx lm my lq mz lu mr ms mt mu bi translated"><strong class="lb iu">最大值</strong>是最大值，即 100。</li><li id="a464" class="mm mn it lb b lc mv lf mw li mx lm my lq mz lu mr ms mt mu bi translated"><strong class="lb iu">中值</strong>是列表正中央的<strong class="lb iu"> </strong>号。50%的数据位于中间值的两边。40 在上面的列表中间。</li><li id="0939" class="mm mn it lb b lc mv lf mw li mx lm my lq mz lu mr ms mt mu bi translated">还有<strong class="lb iu">的意思，</strong>也在中间。但不是列表的中间，而是在列表中值的<strong class="lb iu"> <em class="lv">算术中间</em></strong>—它是所有值的总和除以列表中值的计数，在本例中是 40.8。</li></ul><p id="7f5f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">你们中的大多数人已经知道上面的值，因为它们是非常常用的。但是剩下的两个呢？</p><ul class=""><li id="7873" class="mm mn it lb b lc ld lf lg li mo lm mp lq mq lu mr ms mt mu bi translated"><strong class="lb iu">第一个四分位数</strong>(或 Q1) <strong class="lb iu"> </strong>是 25%的数据点所在的值。从某种意义上说，它是前半部分数据的中位数。</li><li id="caa3" class="mm mn it lb b lc mv lf mw li mx lm my lq mz lu mr ms mt mu bi translated"><strong class="lb iu">第三个四分位数</strong>(或 Q3)是 75%的数据点所在的值。是后半部分数据的中位数。</li></ul><p id="4515" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">(注意:<em class="lv">中位数本身也被称为第二个四分位数或 Q2 </em>)</p><p id="8376" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">就是这样！</p><p id="2284" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">握紧你的拳头，你已经把 21 个数字压缩成 6 个数值。T11】</p><p id="90bb" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">而且不管是 21 个还是 10 亿，这 6 个数值足以给你很多感悟。</p><p id="cfc2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在让我向您展示这些值是如何可视化表示的。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi of"><img src="../Images/bfb4828d3637eb3b7466c11f8727db37.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2BIHJUyOTMU2S_YwqkkEUQ.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><p id="f3de" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">你看这里，我们可以从这个图中得到更多有趣的信息。</p><ul class=""><li id="50af" class="mm mn it lb b lc ld lf lg li mo lm mp lq mq lu mr ms mt mu bi translated"><strong class="lb iu">四分位数间距(IQR) </strong>是第三个四分位数与第一个四分位数的差值:(Q3 — Q1)。它给出了中间一半数据的范围。</li></ul><p id="3981" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">盒子两边的 T 型突起是什么？</strong></p><p id="28af" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">它们被称为胡须或栅栏。他们将相关数据与离群值隔离开来。</p><ul class=""><li id="2aef" class="mm mn it lb b lc ld lf lg li mo lm mp lq mq lu mr ms mt mu bi translated"><strong class="lb iu">下围栏</strong>计算为 Q1 — (1.5 * IQR)</li><li id="e66d" class="mm mn it lb b lc mv lf mw li mx lm my lq mz lu mr ms mt mu bi translated"><strong class="lb iu">上围栏</strong>按 Q3 + (1.5 * IQR)计算</li></ul><p id="4f72" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">任何超出这些限制的都是数据中的异常值。</p><p id="828b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu"> <em class="lv">唷！</em> </strong></p><p id="60dc" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这是一个图表中的大量信息！</p><p id="dd2c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在，让我们使用 python 获取列表并自动生成图表。使用 Plotly 和 chart-studio 真的很简单。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="og oh l"/></div></figure><p id="1693" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我已经将该图导出到 chart studio，因此您可以看到下面的交互式版本。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oi oh l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者在 Plotly Chart Studio 中创建的图表</p></figure><p id="9d1c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这就对了，太简单了！</p><ul class=""><li id="df93" class="mm mn it lb b lc ld lf lg li mo lm mp lq mq lu mr ms mt mu bi translated">一眼就能看出数据的中值、平均值、范围和异常值</li><li id="e928" class="mm mn it lb b lc mv lf mw li mx lm my lq mz lu mr ms mt mu bi translated">您可以看到 50%的数据位于值 35 和 43 之间</li><li id="076f" class="mm mn it lb b lc mv lf mw li mx lm my lq mz lu mr ms mt mu bi translated">你还可以推断出数据的更多特征。中间线在中线的右边，因此是一个<strong class="lb iu"> <em class="lv">右偏分布</em> </strong></li></ul><p id="d346" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我希望你现在理解了箱线图及其威力。</p><p id="4693" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">但是，等一下，这只是故事的一半。</p><p id="39b5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在你有了比喻护手的力量，你也需要打响指了！</p><p id="720c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们通过一个真实的例子来看看如何使用它来消除数据中的异常值。</p></div><div class="ab cl na nb hx nc" role="separator"><span class="nd bw bk ne nf ng"/><span class="nd bw bk ne nf ng"/><span class="nd bw bk ne nf"/></div><div class="im in io ip iq"><h1 id="c45a" class="nh ni it bd nj nk nl nm nn no np nq nr jz ns ka nt kc nu kd nv kf nw kg nx ny bi translated">啪！消除异常值</h1><p id="9b87" class="pw-post-body-paragraph kz la it lb b lc nz ju le lf oa jx lh li ob lk ll lm oc lo lp lq od ls lt lu im bi translated">现在您知道了，使用四分位范围计算的上下围栏可以方便地用于从数据中分离异常值。</p><p id="046f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">但是你有没有想过为什么两边的间距是 IQR 的 1.5 倍？</p><p id="d948" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">答案在于统计。</strong></p><p id="456c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">根据<a class="ae ky" href="https://en.wikipedia.org/wiki/68%E2%80%9395%E2%80%9399.7_rule#:~:text=In%20statistics%2C%20the%2068%E2%80%9395,deviations%20of%20the%20mean%2C%20respectively." rel="noopener ugc nofollow" target="_blank">68–95–99.7 规则</a>，大部分数据(99.7%)位于标准分布两侧平均值的 3 个标准差(&lt; 3σ)以内。它之外的一切都是离群值。</p><p id="0cdc" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在，第一个四分位数和第三个四分位数位于均值两侧的 0.675 σ处。</p><p id="9837" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们做一些快速的数学运算。</p><pre class="kj kk kl km gt oj ok ol bn om on bi"><span id="2a8f" class="oo ni it ok b be op oq l or os">Let X be the multiplying factor we need to calculate<br/><br/>Lower Fence = Q1 - X * IQR<br/>            = Q1 - X * (Q3 - Q1)<br/><br/># The lower fence should be at -3σ<br/># Q3 is 0.675σ and Q1 is -0.675σ<br/><br/>-3σ = -0.675σ - X * (0.675σ + 0.675σ)<br/>-3σ = -0.675σ -1.35σX<br/><br/>X = 2.325 / 1.35<br/>  ~ 1.7<br/><br/># Similarly, it can be calculated for upper fence too!</span></pre><p id="9e44" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们得到的值大约是 1.7，但是我们用的是 1.5。</p><p id="2e45" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">用这种方法剔除异常值被称为图基方法。</strong></p><p id="5fa6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><em class="lv">(这种方法以约翰·图基命名，据说他说选择 1.5 是因为 1 太小，2 太大！)</em></p><p id="be89" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这是统计学中最简单的方法之一，但是效果出奇的好。</p><p id="5c16" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">让我们看一个现实生活中的例子，并用 python 构建一个形象化的快照。</strong></p><p id="eca4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我使用了英国 2022 年的公共住房价格数据。</p><pre class="kj kk kl km gt oj ok ol bn om on bi"><span id="5e87" class="oo ni it ok b be op oq l or os"># imports<br/>import chart_studio<br/>import plotly.express as px<br/>import pandas as pd<br/><br/># Housing price data<br/>col_names =    ["transaction_unique_identifier",<br/>                "price",<br/>                "date_of_transfer",<br/>                "postcode",<br/>                "property_type",<br/>                "old/new",<br/>                "duration",<br/>                "PAON", <br/>                "SAON",<br/>                "street", <br/>                "locality", <br/>                "town/city", <br/>                "district", <br/>                "county", <br/>                "PPD_category_type", <br/>                "record_status_monthly_file_only"]<br/><br/># Read data<br/>df = pd.read_csv('http://prod.publicdata.landregistry.gov.uk.s3-website-eu-west-1.amazonaws.com/pp-2022.txt',<br/>                  header = None, <br/>                  names=col_names)</span></pre><p id="4de9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">前几列如下所示:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ot"><img src="../Images/eeb0e2d0b44bb9d245ffd8144d083e36.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*INS-PJN8Mygq-YCxmNEA4Q.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者截屏</p></figure><p id="cdae" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在，让我们使用箱线图快速查看大伦敦地区的房产类型及其价格。</p><pre class="kj kk kl km gt oj ok ol bn om on bi"><span id="0292" class="oo ni it ok b be op oq l or os"># Filter data for the county Greater London<br/>df= df[df["county"] == "GREATER LONDON"]<br/><br/># Boxplot of the fractional data<br/>sns.boxplot(x = df['price'], <br/>            y = df['property_type'], <br/>            orient = "h").set(title='Housing Price Distribution')</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ou"><img src="../Images/05184db9ef73d58a83e15365bdd9ed4f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Jt9AMf6NdTOsTwY5guMuKA.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者截屏</p></figure><p id="c54c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">那看起来很糟糕，不是吗？</p><p id="82cb" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">有巨大的异常值，以至于我们甚至看不到盒子图中的<em class="lv">盒子</em>！</p><p id="f2cf" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这甚至不足以创建一个交互式图表。</p><p id="1bd7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">让我们利用你对 IQR 的了解创建一个简洁的小脚本。</strong></p><p id="04e1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Python 有<em class="lv">分位数函数</em>，获取定义分位数内的数据部分。</p><pre class="kj kk kl km gt oj ok ol bn om on bi"><span id="b81e" class="oo ni it ok b be op oq l or os"># Create a function to get the outliers<br/><br/>def get_outliers_IQR(df):<br/><br/>   q1=df.quantile(0.25)<br/>   q3=df.quantile(0.75)<br/>   <br/>   IQR=q3-q1<br/><br/>   lower_fence = q1-1.5*IQR<br/>   upper_fence = q3+1.5*IQR<br/><br/>   outliers = list(df[((df &lt; lower_fence) | (df &gt; upper_fence))])<br/><br/>   return outliers</span></pre><p id="29b5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们将它与我们的数据框一起使用来移除异常值。</p><p id="64f6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">(<strong class="lb iu">请注意:</strong></p><pre class="kj kk kl km gt oj ok ol bn om on bi"><span id="4165" class="oo ni it ok b be op oq l or os"># Get outliers from the prices<br/>outliers =  get_outliers_IQR(df['price'])<br/><br/># Remove outliers that we got in the outlier list - aka the Snap!<br/>df_snap_outliers = df[~df['price'].isin(outliers)]</span></pre><p id="28ff" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">等着吧…</p><p id="7f09" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">猛咬！</strong></p><p id="0221" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这一次，我们来看看交互式箱线图。</p><pre class="kj kk kl km gt oj ok ol bn om on bi"><span id="a668" class="oo ni it ok b be op oq l or os"># Create boxplot from the list<br/>fig = px.box(data_snap_outliers, <br/>             x="price", <br/>             y="property_type", <br/>             color="property_type",<br/>             orientation='h', <br/>             template = "plotly_white",<br/>             color_discrete_sequence= px.colors.qualitative.G10,<br/>             title="House prices of different types of house in London - Sept 2022"<br/>             )<br/><br/># There are many quartile calculation methods. <br/># The one we discussed is calculated in plotly with quartilemethod = "inclusive"<br/>fig.update_traces(quartilemethod="inclusive", boxmean = True)<br/><br/># Set margins, font and hoverinfo<br/>fig.update_layout(margin=dict(l=1, r=1, t=30, b=1), <br/>                  font_family="Open Sans", <br/>                  font_size=14,<br/>                  hovermode= "y"<br/>                  )<br/># Show plot<br/>fig.show()</span></pre><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oi oh l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">由作者使用 Plotly Chart Studio 创建</p></figure><p id="7ea5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">看来这一扣成功了！</p><p id="7506" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">即使只看一眼，你也能从图表中推断出很多:</p><ul class=""><li id="b3bf" class="mm mn it lb b lc ld lf lg li mo lm mp lq mq lu mr ms mt mu bi translated">每个类别的分布都是右偏的，这意味着更多的房子有更高的价格</li><li id="2b7f" class="mm mn it lb b lc mv lf mw li mx lm my lq mz lu mr ms mt mu bi translated">与其他组相比，O 类房屋具有更高的可变性和范围</li><li id="24af" class="mm mn it lb b lc mv lf mw li mx lm my lq mz lu mr ms mt mu bi translated">D 类房屋通常更贵</li></ul><p id="a229" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">牛逼吧？</strong></p><p id="2db9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">您应用箱线图来可视化真实世界的住房数据，并使用它们来消除异常值！</p></div><div class="ab cl na nb hx nc" role="separator"><span class="nd bw bk ne nf ng"/><span class="nd bw bk ne nf ng"/><span class="nd bw bk ne nf"/></div><div class="im in io ip iq"><h1 id="8162" class="nh ni it bd nj nk nl nm nn no np nq nr jz ns ka nt kc nu kd nv kf nw kg nx ny bi translated">改进和总结想法</h1><p id="ca0a" class="pw-post-body-paragraph kz la it lb b lc nz ju le lf oa jx lh li ob lk ll lm oc lo lp lq od ls lt lu im bi translated">在这篇文章中，你学习了箱线图和使用无限长手套的类比剔除异常值(我希望你是漫威的粉丝😉).</p><p id="03fb" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我已经给了初学者一个简单的解释，但是你可以更进一步，使用这些图做一个深入的分析。</p><p id="920b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然而，要记住的一件事是<strong class="lb iu">箱线图</strong>和<strong class="lb iu"> Tukey 方法</strong>只是统计学中许多工具和方法中的一部分。</p><p id="bc70" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">你需要了解它们什么时候最适合使用。</p><p id="e9df" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">例如，异常值有时可能是有用的，甚至不需要严格消除。</p><p id="68ed" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">同样，箱线图也不能总是使用。它们有一个缺点，那就是我们无法看到组内有多少个数据点。</p><p id="aff9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这可以通过使用 Plotly 的 boxplot 函数中的“所有点”参数来解决，在这里我们可以看到数据点和盒子在一起，或者通过一种完全不同的图来解决——一个<strong class="lb iu">小提琴图</strong>。</p><p id="9ac9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">小提琴图给出了数据密度以及箱线图，小提琴的宽度表示数据的频率。</p><p id="9f48" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">在某种意义上，它是箱线图和直方图的结合。</strong></p><p id="1a76" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">查看带有小提琴图的房屋类别示例:</p><pre class="kj kk kl km gt oj ok ol bn om on bi"><span id="6333" class="oo ni it ok b be op oq l or os"># Create boxplot from the list<br/>fig = px.violin(data_snap_outliers, <br/>             x="price", <br/>             y="property_type", <br/>             color="property_type",<br/>             orientation='h', <br/>             template = "plotly_white",<br/>             color_discrete_sequence= px.colors.qualitative.G10,<br/>             box = True,<br/>             title="House prices of different types of house in London - Sept 2022"<br/>             )<br/><br/># Set margins, font and hoverinfo<br/>fig.update_layout(margin=dict(l=1, r=1, t=30, b=1), <br/>                  font_family="Open Sans", <br/>                  font_size=14,<br/>                  hovermode= "y"<br/>                  )<br/># Show plot<br/>fig.show()</span></pre><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oi oh l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">由作者使用 Plotly Chart Studio 创建</p></figure><p id="293c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们在这里可以推断出的一件事是，尽管 O 类的价格范围更大，但与数据密度更高的 F 类相比，该类别的房屋销量更少。</p><p id="65c0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">很酷不是吗？</p><p id="6a09" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">那么，为什么我们从盒子图而不是小提琴图开始呢？</p><p id="61a3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">因为首先从盒子情节中获得基础是必要的，因为小提琴情节只是它的一个更好的变体。</p><p id="d29b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu"> <em class="lv">不过别担心，我会在另一篇帖子里详细介绍小提琴的剧情！</em>T13】</strong></p></div><div class="ab cl na nb hx nc" role="separator"><span class="nd bw bk ne nf ng"/><span class="nd bw bk ne nf ng"/><span class="nd bw bk ne nf"/></div><div class="im in io ip iq"><p id="af95" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我希望你喜欢阅读并学到很多东西！写这篇文章让我很开心，如果你有任何反馈，我很乐意收到你的来信。</p><p id="f072" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在那之前，</p><p id="e6ad" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><em class="lv">快乐学习！</em></p></div><div class="ab cl na nb hx nc" role="separator"><span class="nd bw bk ne nf ng"/><span class="nd bw bk ne nf ng"/><span class="nd bw bk ne nf"/></div><div class="im in io ip iq"><p id="42de" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><em class="lv">鳍。</em></p></div><div class="ab cl na nb hx nc" role="separator"><span class="nd bw bk ne nf ng"/><span class="nd bw bk ne nf ng"/><span class="nd bw bk ne nf"/></div><div class="im in io ip iq"><p id="f94f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">来源:</strong></p><p id="b62e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><a class="ae ky" href="http://d-scholarship.pitt.edu/7948/1/Seo.pdf" rel="noopener ugc nofollow" target="_blank">http://d-scholarship.pitt.edu/7948/1/Seo.pdf</a></p><p id="3636" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">包含英国皇家土地注册局数据，皇家版权和数据库权利 2021。该数据根据<a class="ae ky" href="http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/" rel="noopener ugc nofollow" target="_blank">开放政府许可</a> v3.0 获得许可。根据 OGL，HM 土地注册处允许您将<a class="ae ky" href="https://www.gov.uk/government/statistical-data-sets/price-paid-data-downloads" rel="noopener ugc nofollow" target="_blank">价格支付数据</a>用于商业或非商业目的。此处数据链接:<a class="ae ky" href="https://www.gov.uk/government/statistical-data-sets/price-paid-data-downloads#single-file" rel="noopener ugc nofollow" target="_blank">https://www . gov . uk/government/statistical-data-sets/price-payed-data-downloads #单文件</a></p></div></div>    
</body>
</html>