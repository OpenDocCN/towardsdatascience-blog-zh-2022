<html>
<head>
<title>Contour Plots and Word Embedding Visualisation in Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Python 中的等高线图和单词嵌入可视化</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/contour-plots-and-word-embedding-visualisation-in-python-9dd2dacff6ac#2022-11-15">https://towardsdatascience.com/contour-plots-and-word-embedding-visualisation-in-python-9dd2dacff6ac#2022-11-15</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="7d64" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">等高线图对于单词嵌入可视化来说是简单且非常有用的图形。这个端到端教程使用 IMDb 数据来说明 Python 中的编码。</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/d3d8fb3e37ed576e6b01de356c337883.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*D7ji7e5bPXEt3zQg55ABVg.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">图一。等高线图示例。来源:<a class="ae ky" href="https://commons.wikimedia.org/wiki/File:Plot_contour.png" rel="noopener ugc nofollow" target="_blank">commons.wikimedia.org。</a></p></figure><h1 id="d83a" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">介绍</h1><p id="145d" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">文本数据矢量化是现代自然语言处理中必不可少的一步。Mikolov 等人(2013a)和 Mikolov 等人(2013b)开发的两个 Word2Vec 模型普及了单词嵌入的基本概念。在高维空间中对文本数据进行矢量化，我们可以针对机器翻译和情感分类等任务调整 ML 模型。</p><p id="7f79" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">单词嵌入通常被绘制成三维图形，这给在论文和演示中容易地呈现它们带来了一些困难。在这里，<strong class="lt iu">等高线图</strong>是如何处理三维数据可视化的简化，不仅在 NLP 中，而且最初在许多其他学科中。等高线图可用于在二维图形中呈现<strong class="lt iu">单词嵌入</strong>(即，单词的矢量表示)<strong class="lt iu">。</strong>本文提供了在二维空间中可视化单词嵌入的分步指南，并开发了可以使用等高线图的用例。</p><h1 id="be38" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">什么是等高线图？</h1><p id="a0c8" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">等高线图可以在二维图中显示三维数据。它是一个二维图表，使用圆形(通常是彩色的)来表示第三个轴。圆上的任何一点在第三轴上都有相同的值。以下是等值线图中同一三维数据集的图形表示:</p><div class="kj kk kl km gt ab cb"><figure class="ms kn mt mu mv mw mx paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><img src="../Images/3e04ca70403e65e72d06f6411270a944.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/format:webp/1*aZrnxnpPizcC50qYfw-RXw.png"/></div></figure><figure class="ms kn mt mu mv mw mx paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><img src="../Images/4f39a80080f61a3e3f65687dd4dfdb7b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/format:webp/1*s8W2PkcsbXO-1Dx2v7JTxg.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk my di mz na translated">图二。显示 3D 数据的等高线图，来源:代码可从<a class="ae ky" href="https://glowingpython.blogspot.com/2012/01/how-to-plot-two-variable-functions-with.html" rel="noopener ugc nofollow" target="_blank">此处</a>获得。</p></figure></div><p id="30c7" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">这种类型的图形广泛用于制图，其中拓扑地图上的等高线指示相同的高程。许多师兄弟使用等高线图，包括<strong class="lt iu">占星术、气象学和物理学。</strong>等高线通常显示海拔高度(如地理特征的高度)，但它们也可用于显示密度、亮度或电势(Glen，2022)。</p><h1 id="c7e9" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">分步指南</h1><p id="b018" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">回到 Python 中的 NLP，我们将在经典的<a class="ae ky" href="https://medium.com/r?url=https%3A%2F%2Fwww.tensorflow.org%2Fdatasets%2Fcatalog%2Fimdb_reviews" rel="noopener"> IMDb 电影评论数据集</a>上展示等高线图，该数据集与<a class="ae ky" href="https://creativecommons.org/licenses/by/4.0/" rel="noopener ugc nofollow" target="_blank">属性 4.0 国际许可共享。</a>除了最后一个可视化步骤，实证应用程序遵循我在文章<a class="ae ky" href="https://medium.com/python-in-plain-english/clustering-textual-data-with-word2vec-866dafbd213f" rel="noopener"> <strong class="lt iu">中开发的策略，用 word 2 vec</strong></a>(kolab，2021)对文本数据进行聚类。有完整 python 代码的 Jupyter 笔记本<a class="ae ky" href="https://github.com/PetrKorab/Contour-Plots-and-Word-Embedding-Visualisation-in-Python/blob/main/contour.ipynb" rel="noopener ugc nofollow" target="_blank">这里</a>。</p><h2 id="9c86" class="nb la it bd lb nc nd dn lf ne nf dp lj ma ng nh ll me ni nj ln mi nk nl lp nm bi translated"><strong class="ak">语料准备和</strong> Word2Vec 模型训练</h2><p id="a539" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">首先，我们将进行精确的数据预处理操作，如(<a class="ae ky" href="https://medium.com/python-in-plain-english/clustering-textual-data-with-word2vec-866dafbd213f" rel="noopener"> Korab，2021) </a>。接下来，来自<a class="ae ky" href="https://radimrehurek.com/gensim/models/word2vec.html" rel="noopener ugc nofollow" target="_blank"><em class="nn">Gensim</em></a><em class="nn"/>库中的 Word2Vec 模型对文本语料库进行矢量化，并提供单词嵌入。这段代码训练了一个 Word2Vec 模型，其中<em class="nn"> Gensim == 4.2.0 </em>用于 200 个维度，只考虑出现次数大于 10 的单词:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="no np l"/></div></figure><h2 id="c8c9" class="nb la it bd lb nc nd dn lf ne nf dp lj ma ng nh ll me ni nj ln mi nk nl lp nm bi translated">主成分分析降维</h2><p id="d8df" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">下一步，我们需要将数据的维度从 200 维减少到可以在笛卡尔三维空间中可视化的 3 维。这里，<a class="ae ky" href="https://www.javatpoint.com/principal-component-analysis" rel="noopener ugc nofollow" target="_blank">主成分分析</a> (PCA)是一个标准解:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="no np l"/></div></figure><p id="38a1" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">以下是矢量化数据的外观:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nq"><img src="../Images/2aca08aec064d0e0c8ea65b53fe52568.png" data-original-src="https://miro.medium.com/v2/resize:fit:778/format:webp/1*mMVLpxPlNursNbtO9cDsog.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">图 3。IMDb 数据用 Word2Vec 矢量化，用 PCA 降维</p></figure></div><div class="ab cl nr ns hx nt" role="separator"><span class="nu bw bk nv nw nx"/><span class="nu bw bk nv nw nx"/><span class="nu bw bk nv nw"/></div><div class="im in io ip iq"><h2 id="7c83" class="nb la it bd lb nc nd dn lf ne nf dp lj ma ng nh ll me ni nj ln mi nk nl lp nm bi translated">等高线图可视化</h2><p id="bdc1" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">最后，我们将在等高线图中显示数据。</p><blockquote class="ny nz oa"><p id="6655" class="lr ls nn lt b lu mn ju lw lx mo jx lz ob mp mc md oc mq mg mh od mr mk ml mm im bi translated">使用 Word2vec 获得的向量捕获了单词的语义和语法质量，模型将语义相似的单词分组为彼此接近的单词。等值线图有助于在简单易懂的图中清晰地显示复杂的数据集。</p></blockquote><p id="c578" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">可视化部分包括(1)使用<a class="ae ky" href="https://alex.miller.im/posts/contour-plots-in-python-matplotlib-x-y-z/" rel="noopener ugc nofollow" target="_blank">米勒(2020) </a>提供的代码将<strong class="lt iu">坐标旋转成矩阵结构</strong>,( 2)<strong class="lt iu">生成等高线</strong>图，(3) <strong class="lt iu">在图中标注文字</strong>。所有这些步骤的 python 代码:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="no np l"/></div></figure><p id="4c1e" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">这是前 60 次嵌入的等高线图:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oe"><img src="../Images/fd72e1de3fa74a6b5c4124d6e6174146.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4i9nqrCkJnkBR1PX5i7UNA.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">图 4。词嵌入的二维等高线图。</p></figure><p id="1b40" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">我们可以看到，Word2Vec 模型将单词<em class="nn">“film”、“films”、“T9”<em class="nn">“movie”、“T11”和<em class="nn">“movies”</em>在所有 3 个维度中彼此靠近地分组。同样，<em class="nn">“人物”【导演】</em><em class="nn">“演员”</em>也是彼此接近。对于出版质量数字，检查<a class="ae ky" href="https://matplotlib.org/stable/api/_as_gen/matplotlib.pyplot.annotate.html" rel="noopener ugc nofollow" target="_blank"> Matplotlib 文档</a>以格式化一些重叠单词的注释。</em></em></p><p id="0b78" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">为了比较，让我们看一下显示相同数据的三维等值线图:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi of"><img src="../Images/22ca872fada5cfc4c085977d9a826df0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qfgD7EjCDLtvwlrrw6PDPQ.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">图 5。单词嵌入的三维等高线图。</p></figure></div><div class="ab cl nr ns hx nt" role="separator"><span class="nu bw bk nv nw nx"/><span class="nu bw bk nv nw nx"/><span class="nu bw bk nv nw"/></div><div class="im in io ip iq"><h1 id="545a" class="kz la it bd lb lc og le lf lg oh li lj jz oi ka ll kc oj kd ln kf ok kg lp lq bi translated">结论</h1><p id="7533" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">等高线图是很少使用，但非常有用的文字嵌入可视化图形。好的例子包括各种<strong class="lt iu">演示</strong>中的数据故事和<strong class="lt iu">研究论文中的格式图表。</strong>在某个阈值内，论文和演示文稿中的 3d 嵌入可视化可能会变得不清楚和混乱。另一方面，等高线图提高了图形的解释能力，同时保持了它们的信息价值。它们的好处随着三维数据的复杂性而增加，有助于更多地了解数据集的结构。</p><p id="c3b2" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">完整的代码，包括所有的例子，都在我的 GitHub 上。</p><p id="eb79" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated"><em class="nn"> PS:你可以订阅我的</em> <a class="ae ky" href="https://medium.com/subscribe/@petrkorab" rel="noopener"> <em class="nn">邮箱列表</em> </a> <em class="nn">在我每次写新文章的时候得到通知。如果你还不是中等会员，你可以在这里加入</em><a class="ae ky" href="https://medium.com/@petrkorab/membership" rel="noopener"><em class="nn"/></a><em class="nn">。</em></p><h1 id="450e" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">参考</h1><p id="ae7c" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">[1]格伦，S. 2022。<em class="nn">等高线图:定义、示例。</em><a class="ae ky" href="https://www.statisticshowto.com/contour-plots/" rel="noopener ugc nofollow" target="_blank">Statistics show to . com:我们其他人的基本统计数据！</a></p><p id="4a24" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">[2] Korab，2021 年。<a class="ae ky" href="https://medium.com/python-in-plain-english/clustering-textual-data-with-word2vec-866dafbd213f" rel="noopener">用 Word2Vec </a>对文本数据进行聚类。<em class="nn"> Python 直白的英语。</em></p><p id="da53" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">[3]t . miko lov，Sutskever，I .，Chen，k .，Corrado，G. S .，Dean，J. 2013a。<a class="ae ky" href="https://proceedings.neurips.cc/paper/2013/hash/9aa42b31882ec039965f3c4923ce901b-Abstract.html" rel="noopener ugc nofollow" target="_blank">词和短语的分布式表征及其组合性。</a> <em class="nn">神经信息处理系统进展 26 </em> (NIPS 2013)。</p><p id="0695" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">[4]t .米科洛夫，陈，k .，科拉多，G. S .，迪安，J. 2013b。<a class="ae ky" href="https://scholar.google.com/scholar?oi=bibs&amp;cluster=7447715766504981253&amp;btnI=1&amp;hl=en" rel="noopener ugc nofollow" target="_blank">向量空间中单词表示的有效估计</a>。<em class="nn">计算与语言。</em></p><p id="482a" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">[5]米勒著，第 2020 页。使用 matplotlib 在 Python 中绘制等高线:像 X-Y-Z 一样简单<a class="ae ky" href="https://alex.miller.im/posts/contour-plots-in-python-matplotlib-x-y-z/" rel="noopener ugc nofollow" target="_blank"> <em class="nn"> Alex P. Miller 博客</em> </a>，2020 年 2 月 24 日。</p></div></div>    
</body>
</html>