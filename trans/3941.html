<html>
<head>
<title>Coupling GPT-3 with speech recognition and synthesis to achieve a fully talking chatbot that runs in web browsers</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">将GPT-3与语音识别和合成结合起来，实现一个可以在网络浏览器中运行的完全会说话的聊天机器人</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/coupling-gpt-3-with-speech-recognition-and-synthesis-to-achieve-a-fully-talking-chatbot-that-runs-abfcb7bf580#2022-09-01">https://towardsdatascience.com/coupling-gpt-3-with-speech-recognition-and-synthesis-to-achieve-a-fully-talking-chatbot-that-runs-abfcb7bf580#2022-09-01</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="9970" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">我是如何创建这个网络应用程序的，通过它你可以和GPT 3号自然地谈论任何你想谈论的话题，所有这些都是基于你的笔记本电脑、智能手机或平板电脑的。</h2></div><p id="993f" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我刚刚创建了一个基于网页的聊天机器人，它可以理解你说的话，然后非常智能地回复。我有几篇文章展示了它的作用，这里你有一个49秒的预览(查看我最近的文章获得更多的例子)。</p><figure class="lf lg lh li gt lj"><div class="bz fp l di"><div class="lk ll l"/></div></figure><p id="1418" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">您可以在以下位置尝试使用该聊天机器人(即自然交谈):</p><p id="26ab" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><a class="ae le" href="https://lucianoabriata.altervista.org/tests/gpt-3/TDSgpt3-speechrec-speechsynth.html" rel="noopener ugc nofollow" target="_blank"><strong class="kk iu">https://lucianoabriata . alter vista . org/tests/GPT-3/tdsgpt 3-speech rec-speech synth . html</strong></a></p><blockquote class="lm ln lo"><p id="096a" class="ki kj lp kk b kl km ju kn ko kp jx kq lq ks kt ku lr kw kx ky ls la lb lc ld im bi translated">但本文的重点是理解这个应用程序是如何工作的——这是一个很好的例子，说明不同的库、浏览器API和通过API调用可访问的外部服务如何协同工作来实现很酷的应用程序。</p></blockquote></div><div class="ab cl lt lu hx lv" role="separator"><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly"/></div><div class="im in io ip iq"><h1 id="ec00" class="ma mb it bd mc md me mf mg mh mi mj mk jz ml ka mm kc mn kd mo kf mp kg mq mr bi translated">这个“自然对话聊天机器人”的组成部分</h1><p id="999f" class="pw-post-body-paragraph ki kj it kk b kl ms ju kn ko mt jx kq kr mu kt ku kv mv kx ky kz mw lb lc ld im bi translated">我在以前的文章中肤浅地说过，这个网络聊天机器人建立在三个适用于网络浏览器的伟大工具之上。让我们在这里更详细地看看这些组件。</p><h2 id="8eee" class="mx mb it bd mc my mz dn mg na nb dp mk kr nc nd mm kv ne nf mo kz ng nh mq ni bi translated"><strong class="ak"> 1。语音识别的ann yang</strong></h2><p id="eaea" class="pw-post-body-paragraph ki kj it kk b kl ms ju kn ko mt jx kq kr mu kt ku kv mv kx ky kz mw lb lc ld im bi translated">(或者你可以直接使用Web Speech API的SpeechRecognition服务)</p><div class="nj nk gp gr nl nm"><a href="https://www.talater.com/annyang/" rel="noopener  ugc nofollow" target="_blank"><div class="nn ab fo"><div class="no ab np cl cj nq"><h2 class="bd iu gy z fp nr fr fs ns fu fw is bi translated">安扬！轻松地将语音识别添加到您的站点</h2><div class="nt l"><h3 class="bd b gy z fp nr fr fs ns fu fw dk translated">说“给我看看可爱的小猫！”说“给我看看拱门国家公园！”现在尽情狂欢吧。说“给我看看…”并提出你的要求…</h3></div><div class="nu l"><p class="bd b dl z fp nr fr fs ns fu fw dk translated">www.talater.com</p></div></div><div class="nv l"><div class="nw l nx ny nz nv oa ob nm"/></div></div></a></div><p id="e526" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">Annyang是一个小型的语音识别JavaScript库，它允许程序员轻松地将语音命令和语音听写集成到他们的web应用程序中。它没有依赖性，非常轻，在MIT许可下可以自由使用和修改。</p><p id="e1f6" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">为了实现语音识别，Annyang使用了<a class="ae le" href="https://developer.mozilla.org/en-US/docs/Web/API/Web_Speech_API" rel="noopener ugc nofollow" target="_blank"> Web Speech API </a>的<a class="ae le" href="https://developer.mozilla.org/en-US/docs/Web/API/SpeechRecognition" rel="noopener ugc nofollow" target="_blank"> SpeechRecognition服务</a>——它还包括下面第3点中描述的<a class="ae le" href="https://developer.mozilla.org/en-US/docs/Web/API/SpeechSynthesis" rel="noopener ugc nofollow" target="_blank"> SpeechSynthesis服务</a>，以允许聊天机器人说话。</p><p id="9a1f" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">Annyang library在Chrome中在电脑、笔记本电脑、平板电脑和智能手机上运行得非常好，只需要web应用程序托管在<em class="lp"> https </em>下，并且用户接受麦克风的使用(默认情况下，只有在给定域下第一次加载库时才会请求)。在我的测试中，Annyang在装有Windows操作系统的电脑上也能很好地运行Firefox。</p><p id="78d3" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">Annyang非常容易使用，作为一名程序员，您只需输入以下几行代码就可以插入口头命令:</p><pre class="lf lg lh li gt oc od oe of aw og bi"><span id="952c" class="mx mb it od b gy oh oi l oj ok">&lt;script src="//cdnjs.cloudflare.com/ajax/libs/annyang/2.6.1/annyang.min.js"&gt;&lt;/script&gt;</span><span id="0ea7" class="mx mb it od b gy ol oi l oj ok">&lt;script&gt;<br/>if (annyang) {<br/>  const commands = {<br/>    'hello': () =&gt; { alert('Hello world!'); }<br/>  };<br/><br/>  // Add our commands to annyang<br/>  annyang.addCommands(commands);<br/><br/>  // Start listening.<br/>  annyang.start();<br/>}<br/>&lt;/script&gt;</span></pre><h2 id="e472" class="mx mb it bd mc my mz dn mg na nb dp mk kr nc nd mm kv ne nf mo kz ng nh mq ni bi translated"><strong class="ak"> 2。GPT-3作为大脑“理解”你说的话，并产生一个可能的答复</strong></h2><p id="e858" class="pw-post-body-paragraph ki kj it kk b kl ms ju kn ko mt jx kq kr mu kt ku kv mv kx ky kz mw lb lc ld im bi translated">GPT-3是一个最先进的语言处理模型，这是一个深度神经网络，可以读入一些文本，并从生成统计模型中产生新的文本。输出可以是对输入中提出的问题的回答，或者是输入文本的摘要，或者是它的扩展；也可以是表格的文本形式，或者是输入中几个指示后写的一段代码等。</p><p id="475a" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">对于真正的应用程序，你可能不会完全按照原样使用GPT-3，而是根据你的需要进行调整。特别是，您可以使用特定的输入/输出对来微调模型，还可以以提示的形式提供少量的学习，该提示包含您期望的文本输入和输出类型的基本布局。</p><p id="b996" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我已经写了几篇关于GPT-3的文章来说明上述特征。以下是最重要的几个:</p><div class="nj nk gp gr nl nm"><a rel="noopener follow" target="_blank" href="/custom-informed-gpt-3-models-for-your-website-with-very-simple-code-47134b25620b"><div class="nn ab fo"><div class="no ab np cl cj nq"><h2 class="bd iu gy z fp nr fr fs ns fu fw is bi translated">用非常简单的代码为你的网站构建定制的基于GPT 3的聊天机器人</h2><div class="nt l"><h3 class="bd b gy z fp nr fr fs ns fu fw dk translated">了解GPT-3，PHP和JavaScript，因为你建立了一个在线GPT-3为基础的聊天机器人专门在一个给定的主题，你…</h3></div><div class="nu l"><p class="bd b dl z fp nr fr fs ns fu fw dk translated">towardsdatascience.com</p></div></div><div class="nv l"><div class="om l nx ny nz nv oa ob nm"/></div></div></a></div><div class="nj nk gp gr nl nm"><a rel="noopener follow" target="_blank" href="/web-based-chatbot-project-module-2-gpt-3-generated-responses-assisted-with-a-database-for-1ee2a0f4aad4"><div class="nn ab fo"><div class="no ab np cl cj nq"><h2 class="bd iu gy z fp nr fr fs ns fu fw is bi translated">基于网络的聊天机器人项目，模块2:GPT-3-生成的答复与数据库辅助…</h2><div class="nt l"><h3 class="bd b gy z fp nr fr fs ns fu fw dk translated">这个项目的第二部分跨越网络编程，数学，人工智能，等等</h3></div><div class="nu l"><p class="bd b dl z fp nr fr fs ns fu fw dk translated">towardsdatascience.com</p></div></div><div class="nv l"><div class="on l nx ny nz nv oa ob nm"/></div></div></a></div><div class="nj nk gp gr nl nm"><a rel="noopener follow" target="_blank" href="/gpt-3-like-models-with-extended-training-could-be-the-future-24-7-tutors-for-biology-students-904d2ae7986a"><div class="nn ab fo"><div class="no ab np cl cj nq"><h2 class="bd iu gy z fp nr fr fs ns fu fw is bi translated">经过长期训练的类似GPT 3的模特可能成为未来生物学生的全天候导师</h2><div class="nt l"><h3 class="bd b gy z fp nr fr fs ns fu fw dk translated">尽管其他科目的成绩相当令人沮丧，但GPT-3在生物方面表现相当好，如果它…</h3></div><div class="nu l"><p class="bd b dl z fp nr fr fs ns fu fw dk translated">towardsdatascience.com</p></div></div><div class="nv l"><div class="oo l nx ny nz nv oa ob nm"/></div></div></a></div><p id="23bb" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">与本文最相关的是，注意我使用了对OpenAI的API的基于PHP的调用。我在上面列出的三篇文章的第一篇中解释了如何实现这一点。</p><p id="9e13" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">此外，我在调用GPT-3时使用了一些少量的学习，让它“理解”它必须处理模拟两个人对话的信息交换(我稍后会向您展示更多)。</p><h2 id="de3c" class="mx mb it bd mc my mz dn mg na nb dp mk kr nc nd mm kv ne nf mo kz ng nh mq ni bi translated"><strong class="ak"> 3。语音合成API大声朗读GPT-3 </strong>制作的文本</h2><p id="5b1d" class="pw-post-body-paragraph ki kj it kk b kl ms ju kn ko mt jx kq kr mu kt ku kv mv kx ky kz mw lb lc ld im bi translated">Web Speech API的<a class="ae le" href="https://developer.mozilla.org/en-US/docs/Web/API/SpeechSynthesis" rel="noopener ugc nofollow" target="_blank"> SpeechSynthesis service </a>(为了使用更简单，它还包括由Annyang包装的<a class="ae le" href="https://developer.mozilla.org/en-US/docs/Web/API/SpeechRecognition" rel="noopener ugc nofollow" target="_blank"> SpeechRecognition service </a>)允许您相当容易地从文本提示合成音频。</p><p id="1891" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我没有使用包装器(比如语音识别的Annyang ),而是马上使用了语音合成服务，“香草模式”。</p><p id="65c7" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">例如，我可以制作一个网页，上面写着“你好，世界，在这里说话！”用这段简单的代码:</p><pre class="lf lg lh li gt oc od oe of aw og bi"><span id="2ff7" class="mx mb it od b gy oh oi l oj ok">var to_speak = new SpeechSynthesisUtterance("Hello world, speaking up here!");</span><span id="3bb7" class="mx mb it od b gy ol oi l oj ok">to_speak.lang = ‘en-US’;</span><span id="44d0" class="mx mb it od b gy ol oi l oj ok">window.speechSynthesis.speak(to_speak);</span></pre><h2 id="19d6" class="mx mb it bd mc my mz dn mg na nb dp mk kr nc nd mm kv ne nf mo kz ng nh mq ni bi translated">完成组件后，</h2><blockquote class="op"><p id="4922" class="oq or it bd os ot ou ov ow ox oy ld dk translated">现在是时候看看这一切是如何真正一起工作来创建一个自然的语音聊天机器人了。</p></blockquote></div><div class="ab cl lt lu hx lv" role="separator"><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly"/></div><div class="im in io ip iq"><h1 id="ca38" class="ma mb it bd mc md me mf mg mh mi mj mk jz ml ka mm kc mn kd mo kf mp kg mq mr bi translated">聊天机器人实际上是如何工作的</h1><p id="d1fa" class="pw-post-body-paragraph ki kj it kk b kl ms ju kn ko mt jx kq kr mu kt ku kv mv kx ky kz mw lb lc ld im bi translated">将上述元素放在一起会产生一个聊天机器人，就像你在我的视频中看到的那样，这听起来可能很琐碎。然而，当你简单地把三个部分放在一起时，你就开始有问题了。</p><h2 id="75d0" class="mx mb it bd mc my mz dn mg na nb dp mk kr nc nd mm kv ne nf mo kz ng nh mq ni bi translated">避免聊天机器人最终“自言自语”</h2><p id="6b36" class="pw-post-body-paragraph ki kj it kk b kl ms ju kn ko mt jx kq kr mu kt ku kv mv kx ky kz mw lb lc ld im bi translated">在我的第一次尝试中，最重要的问题是Annyang在speech API说话时一直在听，因此创建了一个无限循环，机器人只是在与自己说话。并不是以一种有趣的方式，而是一遍又一遍地重复“是的，我说过了”这样的短语。起初很有趣，但最终解决了一个痛苦。</p><p id="d0d9" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">幸运的是，事实证明你可以打开和关闭Annyang。虽然命令应该是<em class="lp">暂停</em>和<em class="lp">恢复</em>，但它们并没有真正起作用——而且不是我，因为我确实<a class="ae le" href="https://github.com/TalAter/annyang/issues/193" rel="noopener ugc nofollow" target="_blank">在网上找到了一些关于这个问题的笔记</a>。</p><p id="98b5" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">所以，我不得不使用另一种方法:不是<em class="lp">暂停</em>，而是实际上<em class="lp">在一个短语被发送到GPT-3进行分析时立即中止</em>；然后当GPT-3产生的输出准备好被读取时<em class="lp">开始</em>而不是<em class="lp">恢复</em>。</p><p id="b962" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">但即使这样也不是完美的:有时Annyang在speech API的讲话结束之前开始再次收听，所以它抓住了最后的话，并再次试图回复这些最后的话。我可以非常简单地解决这个问题，只需加入一个超时功能，在通话结束后等待1秒钟，然后激活Annyang:</p><pre class="lf lg lh li gt oc od oe of aw og bi"><span id="afd4" class="mx mb it od b gy oh oi l oj ok">var to_speak = new SpeechSynthesisUtterance(textupdate.replace(“&lt;p&gt;”,””)); to_speak.addEventListener(‘end’, (event) =&gt; { setTimeout(annyang.start(),1000); console.log(“End event done”) }) to_speak.lang = ‘en-US’; window.speechSynthesis.speak(to_speak);</span></pre><h2 id="5879" class="mx mb it bd mc my mz dn mg na nb dp mk kr nc nd mm kv ne nf mo kz ng nh mq ni bi translated">“解释”GPT-3，它必须跟随对话，提供问题的答案或合理延续人类所说的话，并记住上下文</h2><p id="6bdf" class="pw-post-body-paragraph ki kj it kk b kl ms ju kn ko mt jx kq kr mu kt ku kv mv kx ky kz mw lb lc ld im bi translated">关键在于GPT-3的少量学习能力。这实质上是在塑造发送给GPT 3号的提示，指示它跟随对话。</p><p id="9252" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">当我的程序开始时，提示只是下面的问题，其中包含一些聊天机器人应该知道但不知道的背景信息，如其本身的性质，其本身如何工作，我作为开发人员的姓名等。开始提示也遵循输入和回答应该如何相互跟随的模型，这里用字母Q和A标记，因为它们类似于问题和回答(尽管它们不一定必须是问题和回答，例如当你问“你好，早上好”时)机器人会回复类似“你好”的话</p><p id="5a29" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">以下是我的应用程序使用的确切提示:</p><pre class="lf lg lh li gt oc od oe of aw og bi"><span id="1655" class="mx mb it od b gy oh oi l oj ok">var prompt = “I am a highly intelligent bot with whom you can talk. I try to reply saying the truth, but sometimes I might make up some stuff. I work by integrating GPT-3 as a brain with web APIs for speech recognition and speech synthesis.;Q: What is human life expectancy in the United States?;A: Human life expectancy in the United States is 78 years.;Q: Who was president of the United States in 1955?;A: Dwight D. Eisenhower was president of the United States in 1955.;Q: Which party did he belong to?;A: He belonged to the Republican Party.;Q: How does a telescope work?;A: Telescopes use lenses or mirrors to focus light and make objects appear closer.;Q: Where were the 1992 Olympics held?;A: The 1992 Olympics were held in Barcelona, Spain.;Q: Who developed you?;A: I was developed by Luciano Abriata.”</span></pre><p id="1ad8" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">现在，当Annyang第一次理解对它说的一些文本时，应用程序会将这些文本附加到提示中，并将整个新的提示发送到GPT 3号。举个例子，如果安扬听到的第一句话是“你好，你好吗？”那么发送给GPT-3的提示将类似于:</p><pre class="lf lg lh li gt oc od oe of aw og bi"><span id="8ecb" class="mx mb it od b gy oh oi l oj ok">I am a highly intelligent bot with whom you can talk. I try to reply saying the truth, but sometimes I might make up some stuff. I work by integrating GPT-3 as a brain with web APIs for speech recognition and speech synthesis.;Q: What is human life expectancy in the United States?;A: Human life expectancy in the United States is 78 years.;Q: Who was president of the United States in 1955?;A: Dwight D. Eisenhower was president of the United States in 1955.;Q: Which party did he belong to?;A: He belonged to the Republican Party.;Q: How does a telescope work?;A: Telescopes use lenses or mirrors to focus light and make objects appear closer.;Q: Where were the 1992 Olympics held?;A: The 1992 Olympics were held in Barcelona, Spain.;Q: Who developed you?;A: I was developed by Luciano Abriata.<strong class="od iu">;Q: Hello, how are you doing?"</strong></span></pre><p id="97df" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">(我用粗体显示了添加到启动提示中的内容)</p><p id="7f12" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">GPT-3的输出将由这个相同的提示加上它的附加内容组成。例如:</p><pre class="lf lg lh li gt oc od oe of aw og bi"><span id="6d8b" class="mx mb it od b gy oh oi l oj ok">I am a highly intelligent bot with whom you can talk. I try to reply saying the truth, but sometimes I might make up some stuff. I work by integrating GPT-3 as a brain with web APIs for speech recognition and speech synthesis.;Q: What is human life expectancy in the United States?;A: Human life expectancy in the United States is 78 years.;Q: Who was president of the United States in 1955?;A: Dwight D. Eisenhower was president of the United States in 1955.;Q: Which party did he belong to?;A: He belonged to the Republican Party.;Q: How does a telescope work?;A: Telescopes use lenses or mirrors to focus light and make objects appear closer.;Q: Where were the 1992 Olympics held?;A: The 1992 Olympics were held in Barcelona, Spain.;Q: Who developed you?;A: I was developed by Luciano Abriata.<strong class="od iu">;Q: Hello, how are you doing?; A: I am doing fine, thanks."</strong></span></pre><p id="6c92" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">当听到下一个语音文本时，它被附加到最后一个提示，并再次发送到GPT-3。然后，提示符会返回并添加新的响应。诸如此类。</p><p id="9760" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这不仅有助于提供聊天机器人不知道的信息(在提示的第一部分)，而且有助于聊天的连续性，因为之前的交流仍然存在。这就是为什么GPT-3的少击学习能力如此强大。不幸的是，它有一个限制，最多2048个令牌，所以在某些时候，API会因为提示太长而抛出一个错误。可能有一些方法可以改善这一点，也许你可以尝试一下。</p><h2 id="42a0" class="mx mb it bd mc my mz dn mg na nb dp mk kr nc nd mm kv ne nf mo kz ng nh mq ni bi translated">清理短语中的字符以输入GPT-3并从中获取</h2><p id="2111" class="pw-post-body-paragraph ki kj it kk b kl ms ju kn ko mt jx kq kr mu kt ku kv mv kx ky kz mw lb lc ld im bi translated">正如您在上面展示语音合成如何工作的代码片段中看到的，需要对字符串进行一些清理。例如，我们不希望机器人说出整个提示，所以我们必须删除输入。我们还想删除那些q和以及任何HTML标签，奇怪的问号等。为此，我在字符串中使用了许多replace()函数(当我使用replace(//g)时，这意味着JavaScript中的“替换所有实例”。</p><pre class="lf lg lh li gt oc od oe of aw og bi"><span id="7a9f" class="mx mb it od b gy oh oi l oj ok">$.ajax({ url: “TDSgpt3withyourapikey.php?prompt=” + theprompt + “&amp;apikey=” + apikey }).done(function(data) { var textupdate = data.replace(theprompt,””).replace(“https://api.openai.com/v1/engines/text-davinci-002/completions","").trim() if (textupdate.substring(0,1) == “?”) { textupdate = textupdate.substring(1); } textupdate = textupdate.replace(/;Q:/g,””).replace(/;A:/g,””).replace(/Q:/g,””).replace(/A:/g,””) textupdate = textupdate.trim() console.log(textupdate)</span></pre><h2 id="277f" class="mx mb it bd mc my mz dn mg na nb dp mk kr nc nd mm kv ne nf mo kz ng nh mq ni bi translated">对整个代码的全局观察</h2><p id="14b1" class="pw-post-body-paragraph ki kj it kk b kl ms ju kn ko mt jx kq kr mu kt ku kv mv kx ky kz mw lb lc ld im bi translated">下面是所有代码，注释简要描述了正在做的事情(上面给出的所有细节的总结)</p><figure class="lf lg lh li gt lj gh gi paragraph-image"><div role="button" tabindex="0" class="pa pb di pc bf pd"><div class="gh gi oz"><img src="../Images/3d2c96368ceff9505623232498643474.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xSsRVbYX3PKEHOPACYfT9Q.png"/></div></div><p class="pf pg gj gh gi ph pi bd b be z dk translated">作者截图，他自己的代码。</p></figure><figure class="lf lg lh li gt lj gh gi paragraph-image"><div role="button" tabindex="0" class="pa pb di pc bf pd"><div class="gh gi pj"><img src="../Images/186df55dc540a482627896b7f16be68a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_iqu4fRScKeH1w3PcQ6yZA.png"/></div></div><p class="pf pg gj gh gi ph pi bd b be z dk translated">作者创作的人物。</p></figure></div><div class="ab cl lt lu hx lv" role="separator"><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly"/></div><div class="im in io ip iq"><h1 id="e939" class="ma mb it bd mc md me mf mg mh mi mj mk jz ml ka mm kc mn kd mo kf mp kg mq mr bi translated">如果你觉得这很有趣或者喜欢为网络编程很酷的东西</h1><div class="nj nk gp gr nl nm"><a rel="noopener follow" target="_blank" href="/the-definitive-guide-to-principal-components-analysis-84cd73640302"><div class="nn ab fo"><div class="no ab np cl cj nq"><h2 class="bd iu gy z fp nr fr fs ns fu fw is bi translated">主成分分析权威指南</h2><div class="nt l"><h3 class="bd b gy z fp nr fr fs ns fu fw dk translated">一个教程剥离低层次的代码，您可以编辑和运行在您的浏览器，以了解PCA一劳永逸…</h3></div><div class="nu l"><p class="bd b dl z fp nr fr fs ns fu fw dk translated">towardsdatascience.com</p></div></div></div></a></div><div class="nj nk gp gr nl nm"><a href="https://medium.com/technology-hits/a-web-tool-to-view-and-analyze-cryptocurrency-data-in-full-detail-free-access-in-this-article-73e4c1dea911" rel="noopener follow" target="_blank"><div class="nn ab fo"><div class="no ab np cl cj nq"><h2 class="bd iu gy z fp nr fr fs ns fu fw is bi translated">一个查看和分析加密货币数据全部细节的web应用程序——在本文中免费访问！</h2><div class="nt l"><h3 class="bd b gy z fp nr fr fs ns fu fw dk translated">历史价格、线性或对数标度的数据、各种标准化、随时间平滑以及您的准确时间…</h3></div><div class="nu l"><p class="bd b dl z fp nr fr fs ns fu fw dk translated">medium.com</p></div></div><div class="nv l"><div class="pk l nx ny nz nv oa ob nm"/></div></div></a></div><div class="nj nk gp gr nl nm"><a href="https://medium.com/age-of-awareness/metaverse-not-sure-but-webxr-hell-yes-12af5b302e08" rel="noopener follow" target="_blank"><div class="nn ab fo"><div class="no ab np cl cj nq"><h2 class="bd iu gy z fp nr fr fs ns fu fw is bi translated">元宇宙？不确定，但是WebXR？太好了。</h2><div class="nt l"><h3 class="bd b gy z fp nr fr fs ns fu fw dk translated">未来互联网的核心技术之一，我们已经将其应用于娱乐之外的领域。</h3></div><div class="nu l"><p class="bd b dl z fp nr fr fs ns fu fw dk translated">medium.com</p></div></div><div class="nv l"><div class="pl l nx ny nz nv oa ob nm"/></div></div></a></div><div class="nj nk gp gr nl nm"><a rel="noopener follow" target="_blank" href="/exquisite-hand-and-finger-tracking-in-web-browsers-with-mediapipes-machine-learning-models-2c4c2beee5df"><div class="nn ab fo"><div class="no ab np cl cj nq"><h2 class="bd iu gy z fp nr fr fs ns fu fw is bi translated">借助MediaPipe的机器学习模型，在网络浏览器中实现精致的手和手指跟踪</h2><div class="nt l"><h3 class="bd b gy z fp nr fr fs ns fu fw dk translated">了解这个精通JavaScript风格的计算机视觉库，这里重点介绍它的手部跟踪工具…</h3></div><div class="nu l"><p class="bd b dl z fp nr fr fs ns fu fw dk translated">towardsdatascience.com</p></div></div><div class="nv l"><div class="pm l nx ny nz nv oa ob nm"/></div></div></a></div></div><div class="ab cl lt lu hx lv" role="separator"><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly"/></div><div class="im in io ip iq"><p id="bf3b" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">www.lucianoabriata.com<em class="lp">我写作并拍摄我广泛兴趣范围内的一切事物:自然、科学、技术、编程等等。</em> <a class="ae le" href="https://lucianosphere.medium.com/membership" rel="noopener"> <strong class="kk iu"> <em class="lp">成为媒介会员</em> </strong> </a> <em class="lp">访问其所有故事(我免费获得小额收入的平台的附属链接)和</em> <a class="ae le" href="https://lucianosphere.medium.com/subscribe" rel="noopener"> <strong class="kk iu"> <em class="lp">订阅获取我的新故事</em> </strong> </a> <strong class="kk iu"> <em class="lp">通过电子邮件</em> </strong> <em class="lp">。到</em> <strong class="kk iu"> <em class="lp">咨询关于小职位</em> </strong> <em class="lp">查看我的</em> <a class="ae le" href="https://lucianoabriata.altervista.org/services/index.html" rel="noopener ugc nofollow" target="_blank"> <strong class="kk iu"> <em class="lp">服务页面这里</em> </strong> </a> <em class="lp">。你可以</em> <a class="ae le" href="https://lucianoabriata.altervista.org/office/contact.html" rel="noopener ugc nofollow" target="_blank"> <strong class="kk iu"> <em class="lp">这里联系我</em> </strong> </a> <strong class="kk iu"> <em class="lp">。</em>T51】</strong></p></div></div>    
</body>
</html>