<html>
<head>
<title>FIFA World Cup 2022: A Data-Driven Approach to Ideal Team Line-Ups</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">2022 年世界杯:数据驱动的理想球队阵容</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/fifa-world-cup-2022-a-data-driven-approach-to-ideal-team-line-ups-f4c555dcd7a3#2022-11-24">https://towardsdatascience.com/fifa-world-cup-2022-a-data-driven-approach-to-ideal-team-line-ups-f4c555dcd7a3#2022-11-24</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="ab89" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">使用 Python 为 2022 年世界杯的每个国家队找到梦之队、最佳阵型和理想的首发 XI</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/36327b830f29339618a503a9a548c744.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wbXDmT0MrxyGmrmQSiQrow.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">图片来自 Shutterstock，授权给 Frank Andrade</p></figure><p id="fc18" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">2022 年世界杯已经开始，我们可以从这场比赛的数据中获得许多见解。</p><p id="f98c" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">像 2022 年世界杯梦之队，每个国家队的最佳 26 人阵容，以及他们理想的首发 XI 都可以使用 Python 获得。</p><p id="2053" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">但我们不仅会这么做！我们还将添加一些数据可视化，使这种分析更容易理解，甚至使用 Python 绘制一个具有理想阵容的足球场的图形。</p><pre class="kj kk kl km gt lu lv lw bn lx ly bi"><span id="b775" class="lz ma it lv b be mb mc l md me"><strong class="lv iu">Table of Contents</strong><br/>1. <a class="ae mf" href="#8ac5" rel="noopener ugc nofollow">Dataset Overview</a><br/>2. <a class="ae mf" href="#a57d" rel="noopener ugc nofollow">Adjusting the Dataset FIFA 22 to the World Cup 2022</a><br/>3. <a class="ae mf" href="#409f" rel="noopener ugc nofollow">The Metric To Use for This Analysis</a><br/>4. <a class="ae mf" href="#92e8" rel="noopener ugc nofollow">Dream Team World Cup 2022</a><br/>5. <a class="ae mf" href="#0017" rel="noopener ugc nofollow">The Players with The Highest Rating on each National Team</a><br/>6. <a class="ae mf" href="#4e34" rel="noopener ugc nofollow">The Best 26-Man Squad for each National Team</a><br/>7. <a class="ae mf" href="#0c8f" rel="noopener ugc nofollow">Best Starting XI and Formation</a><br/> - <a class="ae mf" href="#0690" rel="noopener ugc nofollow">Spain: Best Starting XI (4–2–3–1)</a><br/> - <a class="ae mf" href="#12f5" rel="noopener ugc nofollow">Portugal: Best Starting XI (4–2–3–1)</a><br/> - <a class="ae mf" href="#7575" rel="noopener ugc nofollow">England: Best Starting XI (4–4–2)</a><br/> - <a class="ae mf" href="#d734" rel="noopener ugc nofollow">Brazil: Best Starting XI (4–3–3)</a><br/> - <a class="ae mf" href="#c481" rel="noopener ugc nofollow">France: Best Starting XI (4–2–3–1)</a><br/> - <a class="ae mf" href="#90d6" rel="noopener ugc nofollow">Argentina: Best Starting XI (4–3–3)</a><br/> - <a class="ae mf" href="#9c3c" rel="noopener ugc nofollow">Germany: Best Starting XI (4–2–3–1)</a></span></pre><h1 id="8ac5" class="mg ma it bd mh mi mj mk ml mm mn mo mp jz mq ka mr kc ms kd mt kf mu kg mv mw bi translated">数据集概述</h1><p id="48d8" class="pw-post-body-paragraph ky kz it la b lb mx ju ld le my jx lg lh mz lj lk ll na ln lo lp nb lr ls lt im bi translated">我们将用于此分析的数据来自游戏 FIFA 22，其中包含了世界上大多数足球运动员的信息。你可以点击下载这个数据集<a class="ae mf" href="https://drive.google.com/drive/folders/15BeVs7h0zDFHNSmZ0Zwyb92uL5L6woXL?usp=sharing" rel="noopener ugc nofollow" target="_blank">。</a></p><pre class="kj kk kl km gt lu lv lw bn lx ly bi"><span id="b529" class="lz ma it lv b be mb mc l nc me">import pandas as pd<br/>import seaborn as sns<br/>import matplotlib.pyplot as plt<br/>sns.set_style('darkgrid')<br/><br/>df = pd.read_csv('players_22.csv', low_memory=False)</span></pre><p id="90b7" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">这个数据集包含 100 多列，但是对于这个分析，我们只使用其中的几列。</p><pre class="kj kk kl km gt lu lv lw bn lx ly bi"><span id="54f7" class="lz ma it lv b be mb mc l nc me">df = df[['short_name', 'age', 'nationality_name', 'overall', 'potential',<br/>         'club_name', 'value_eur', 'wage_eur', 'player_positions']]</span></pre><p id="82fd" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">需要记住的是,<code class="fe nd ne nf lv b">player_positions</code>列有多个位置，因此我们应该只选择一个位置进行分析。此外，我们必须丢弃 NaN 数据。</p><pre class="kj kk kl km gt lu lv lw bn lx ly bi"><span id="0039" class="lz ma it lv b be mb mc l nc me"># selecting only one position<br/>df['player_positions'] = df['player_positions'].str.split(',', expand=True)[0]<br/><br/># dropping nan<br/>df.dropna(inplace=True)</span></pre><p id="dbe6" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">这里是<code class="fe nd ne nf lv b">df</code>数据帧此时的样子。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ng"><img src="../Images/81b1678aa6772085b462efb6647dcfe7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*MFWtYw5_d_7pMgCT__WAwA.png"/></div></div></figure><h1 id="a57d" class="mg ma it bd mh mi mj mk ml mm mn mo mp jz mq ka mr kc ms kd mt kf mu kg mv mw bi translated">根据 2022 年世界杯调整数据集 FIFA 22</h1><p id="3866" class="pw-post-body-paragraph ky kz it la b lb mx ju ld le my jx lg lh mz lj lk ll na ln lo lp nb lr ls lt im bi translated">现在，我们将调整数据集 FIFA 22 以适应 2022 年世界杯。这意味着我们将只考虑那些有资格参赛的国家，以及那些被召入国家队的球员。</p><pre class="kj kk kl km gt lu lv lw bn lx ly bi"><span id="16df" class="lz ma it lv b be mb mc l nc me"># dropping injured players<br/>players_missing_worldcup = ['K. Benzema', 'S. Mané', 'S. Agüero', 'Sergio Ramos', 'P. Pogba',<br/>                            'M. Reus', 'Diogo Jota', 'A. Harit', 'N. Kanté', 'G. Lo Celso', 'Piqué']<br/><br/>drop_index = df[df['short_name'].isin(players_missing_worldcup)].index<br/>df.drop(drop_index, axis=0, inplace=True)<br/><br/># filtering only national teams in the world cup<br/>teams_worldcup = [<br/>    'Qatar', 'Brazil', 'Belgium', 'France', 'Argentina', 'England', 'Spain', 'Portugal',<br/>    'Mexico', 'Netherlands', 'Denmark', 'Germany', 'Uruguay', 'Switzerland', 'United States', 'Croatia',<br/>    'Senegal', 'Iran', 'Japan', 'Morocco', 'Serbia', 'Poland', 'South Korea', 'Tunisia',<br/>    'Cameroon', 'Canada', 'Ecuador', 'Saudi Arabia', 'Ghana', 'Wales', 'Costa Rica', 'Australia'<br/>]<br/><br/>df = df[df['nationality_name'].isin(teams_worldcup)]</span></pre><h1 id="409f" class="mg ma it bd mh mi mj mk ml mm mn mo mp jz mq ka mr kc ms kd mt kf mu kg mv mw bi translated">用于此分析的指标</h1><p id="1038" class="pw-post-body-paragraph ky kz it la b lb mx ju ld le my jx lg lh mz lj lk ll na ln lo lp nb lr ls lt im bi translated">在这个分析中，我们将使用国际足联对每个球员的评分。评级由<code class="fe nd ne nf lv b">overall</code>列表示。</p><p id="9f8e" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">让我们按<code class="fe nd ne nf lv b">overall</code>对数据帧进行排序(如果多个玩家评分相同，我们也将按<code class="fe nd ne nf lv b">potential</code>和<code class="fe nd ne nf lv b">value_eur</code>列进行排序)</p><pre class="kj kk kl km gt lu lv lw bn lx ly bi"><span id="f790" class="lz ma it lv b be mb mc l nc me">df.sort_values(by=['overall', 'potential', 'value_eur'], ascending=False, inplace=True)</span></pre><p id="2f22" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">这是数据帧现在的样子。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nh"><img src="../Images/5e43e6ddbb266da9ffd1c76958ea8f7c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*LXBFXAeXg0N5bNg3cvIi8A.png"/></div></div></figure><p id="7dea" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">现在，让我们来看看 2022 年世界杯所有球员之间的收视率(又名整体)是如何分布的。</p><pre class="kj kk kl km gt lu lv lw bn lx ly bi"><span id="3202" class="lz ma it lv b be mb mc l nc me">import numpy as np<br/>fig, ax = plt.subplots(figsize=(12, 5), tight_layout=True)<br/><br/>sns.histplot(df, x='overall', binwidth=1)<br/><br/>bins = np.arange(df['overall'].min(), df['overall'].max(), 1)<br/>plt.xticks(bins)<br/>plt.show()</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ni"><img src="../Images/e01d5f762c7e3fc1956ed8ddba74b1d1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_X4iYPC9_KM_yd4Xm9CZsw.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><p id="917c" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">似乎大多数玩家都有 65 和 67 的评分。对于我们的梦之队，我们将只考虑每个位置得分最高的球员。</p><h1 id="92e8" class="mg ma it bd mh mi mj mk ml mm mn mo mp jz mq ka mr kc ms kd mt kf mu kg mv mw bi translated">2022 年世界杯梦之队</h1><p id="fcb3" class="pw-post-body-paragraph ky kz it la b lb mx ju ld le my jx lg lh mz lj lk ll na ln lo lp nb lr ls lt im bi translated">获得梦之队的一个简单方法是删除<code class="fe nd ne nf lv b">player_positions</code>栏中的所有重复项(T7 是按整体排序的，因此“非重复项”将是那些评分最高的玩家)</p><pre class="kj kk kl km gt lu lv lw bn lx ly bi"><span id="a8ac" class="lz ma it lv b be mb mc l nc me">df.drop_duplicates('player_positions')</span></pre><p id="0db3" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">如果我们只选择列<code class="fe nd ne nf lv b">short_name</code>、<code class="fe nd ne nf lv b">overall</code>、<code class="fe nd ne nf lv b">club_name</code>和<code class="fe nd ne nf lv b">player_positions</code>，我们会得到下面的数据帧，它代表我们的梦之队。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nj"><img src="../Images/ef68e58c47548f57992779f06b0f26c9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1318/format:webp/1*sseQF-6fEqOE5KGW7_ZNYQ.png"/></div></figure><p id="0e62" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">现在我们有了每个位置的最佳球员，我们可以使用<a class="ae mf" href="https://trinket.io/python/0813ea96f6" rel="noopener ugc nofollow" target="_blank">这个 Python 工具</a>来制作足球场的图形，并选择我们想要的任何球员(您只需要编辑脚本底部的球员姓名)</p><p id="9a92" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">这是我的梦之队。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nk"><img src="../Images/acba2bd99c7520e08b9fe8f71d05d8dd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ARQvDWKUR8dtrp4RBydaKg.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">来源:小饰品</p></figure><h1 id="0017" class="mg ma it bd mh mi mj mk ml mm mn mo mp jz mq ka mr kc ms kd mt kf mu kg mv mw bi translated">每个国家队中得分最高的运动员</h1><p id="d879" class="pw-post-body-paragraph ky kz it la b lb mx ju ld le my jx lg lh mz lj lk ll na ln lo lp nb lr ls lt im bi translated">现在让我们创建一个数据框架<code class="fe nd ne nf lv b">df_best_players</code>，展示每个国家队的最佳球员。我们将提取<code class="fe nd ne nf lv b">nationality_name</code>列的前 3 个字母，以了解每个玩家来自哪里。</p><pre class="kj kk kl km gt lu lv lw bn lx ly bi"><span id="e665" class="lz ma it lv b be mb mc l nc me">df_best_players = df.copy()<br/>df_best_players = df_best_players.drop_duplicates('nationality_name').reset_index(drop=True)<br/>country_short =  df_best_players['nationality_name'].str.extract('(^\w{3})', expand=False).str.upper()<br/>df_best_players['name_nationality'] = df_best_players['short_name'] +' (' + country_short + ')'</span></pre><p id="a6cc" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">让我们制作一个柱状图来可视化<code class="fe nd ne nf lv b">df_best_players</code>数据框架。</p><pre class="kj kk kl km gt lu lv lw bn lx ly bi"><span id="3f6c" class="lz ma it lv b be mb mc l nc me">fig, ax = plt.subplots(figsize=(10, 6), tight_layout=True)<br/><br/>sns.barplot(df_best_players, x='overall', y='name_nationality',<br/>            palette=sns.color_palette('pastel'), width=0.5)<br/>plt.show()</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nl"><img src="../Images/797d6a90dea8b939ba653a10b7acc240.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*uwRnk8QSlCaL8oDrtmsPkA.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><h1 id="4e34" class="mg ma it bd mh mi mj mk ml mm mn mo mp jz mq ka mr kc ms kd mt kf mu kg mv mw bi translated">每个国家队的最佳 26 人阵容</h1><p id="cb79" class="pw-post-body-paragraph ky kz it la b lb mx ju ld le my jx lg lh mz lj lk ll na ln lo lp nb lr ls lt im bi translated">让我们创建一个函数，返回每个国家队的最佳阵容。为此，我们将为每个国家队的每个位置挑选最好的 2 名球员。一旦我们有了最佳阵容，我们将按<code class="fe nd ne nf lv b">player_positions</code>、<code class="fe nd ne nf lv b">overall</code>和<code class="fe nd ne nf lv b">potential</code>排序。</p><pre class="kj kk kl km gt lu lv lw bn lx ly bi"><span id="c249" class="lz ma it lv b be mb mc l nc me">def best_squad(nationality):<br/>    df_best_squad = df.copy()<br/>    df_best_squad = df_best_squad.groupby(['nationality_name', 'player_positions']).head(2)<br/>    df_best_squad = df_best_squad[df_best_squad['nationality_name']==nationality].sort_values(['player_positions', 'overall', 'potential'], ascending=False)<br/>    return df_best_squad</span></pre><p id="192d" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">让我们来看看什么是最适合巴西的球队</p><pre class="kj kk kl km gt lu lv lw bn lx ly bi"><span id="d4a7" class="lz ma it lv b be mb mc l nc me">best_squad('Brazil')</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nm"><img src="../Images/3edc782a6cdbb32e15f7397413e4e9d8.png" data-original-src="https://miro.medium.com/v2/resize:fit:984/format:webp/1*3NbzImPuyRokyusLpd0qpg.png"/></div></figure><p id="af82" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">正如你所看到的，我们得到了超过 26 名球员，因为我们每个位置选择 2 名球员，大约有 15 个位置。你可以做一些调整，从这个数据框中只选择 26 名球员。</p><p id="7514" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">现在让我们看看每个国家队的平均得分是多少。然后我们按<code class="fe nd ne nf lv b">average_overall</code>降序排序。</p><pre class="kj kk kl km gt lu lv lw bn lx ly bi"><span id="9bb1" class="lz ma it lv b be mb mc l nc me">average_overall = [best_squad(team)['overall'].mean() for team in teams_worldcup]<br/><br/>df_average_overall = pd.DataFrame({'Teams': teams_worldcup, 'AVG_Overall': average_overall})<br/>df_average_overall = df_average_overall.dropna()<br/>df_average_overall = df_average_overall.sort_values('AVG_Overall', ascending=False)<br/>df_average_overall</span></pre><p id="bf35" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">以下是总体平均得分最高的 10 支国家队。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nn"><img src="../Images/f0762e729ea03d3e317a3892b6e1c314.png" data-original-src="https://miro.medium.com/v2/resize:fit:654/format:webp/1*mITdCEe8Z9ipwgOf2D0zqw.png"/></div></figure><p id="ccfd" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">让我们用柱状图来想象一下。</p><pre class="kj kk kl km gt lu lv lw bn lx ly bi"><span id="d4ba" class="lz ma it lv b be mb mc l nc me">fig, ax = plt.subplots(figsize=(12, 5), tight_layout=True)<br/><br/>sns.barplot(df_average_overall[:10], x='Teams', y='AVG_Overall',<br/>            palette=sns.color_palette('pastel'))<br/>plt.show()</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ni"><img src="../Images/644c439b8dfee52c10e7937de00b9ca3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vB4XeigPwnb0cRJPeIWXkQ.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><h1 id="0c8f" class="mg ma it bd mh mi mj mk ml mm mn mo mp jz mq ka mr kc ms kd mt kf mu kg mv mw bi translated">最佳首发 XI 和阵型</h1><p id="b5c1" class="pw-post-body-paragraph ky kz it la b lb mx ju ld le my jx lg lh mz lj lk ll na ln lo lp nb lr ls lt im bi translated">现在我们有了每个国家队最好的 26 人阵容，我们可以看看什么是最好的首发 XI 和阵型。</p><p id="2836" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">这是我想出来的所有形式(如果你愿意，你可以添加更多)</p><pre class="kj kk kl km gt lu lv lw bn lx ly bi"><span id="cf79" class="lz ma it lv b be mb mc l nc me">dict_formation = {<br/>    '4-3-3': ['GK', 'RB', 'CB', 'CB', 'LB', 'CDM', 'CM', 'CAM', 'RW', 'ST', 'LW'],<br/>    '4-4-2': ['GK', 'RB', 'CB', 'CB', 'LB', 'RM', 'CM', 'CM', 'LM', 'ST', 'ST'],<br/>    '4-2-3-1': ['GK', 'RB', 'CB', 'CB', 'LB', 'CDM', 'CDM', 'CAM', 'CAM', 'CAM', 'ST'],<br/>}</span></pre><p id="7ad5" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">现在我们创建一个<code class="fe nd ne nf lv b">best_lineup</code>函数，根据我们想要的阵型返回最佳起始 XI。</p><pre class="kj kk kl km gt lu lv lw bn lx ly bi"><span id="3fb0" class="lz ma it lv b be mb mc l nc me">def best_lineup(nationality, lineup):<br/>    lineup_count = [lineup.count(i) for i in lineup]<br/><br/>    df_lineup = pd.DataFrame({'position': lineup, 'count': lineup_count})<br/>    positions_non_repeated = df_lineup[df_lineup['count'] &lt;= 1]['position'].values<br/>    positions_repeated = df_lineup[df_lineup['count'] &gt; 1]['position'].values<br/><br/>    df_squad = best_squad(nationality)<br/><br/>    df_lineup = pd.concat([<br/>        df_squad[df_squad['player_positions'].isin(positions_non_repeated)].drop_duplicates('player_positions', keep='first'),<br/>        df_squad[df_squad['player_positions'].isin(positions_repeated)]]<br/>    )<br/>    return df_lineup[['short_name', 'overall', 'club_name', 'player_positions']]</span></pre><p id="89d9" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">最后，让我们循环遍历世界杯前 7 名球队，返回平均得分最高的阵型。</p><pre class="kj kk kl km gt lu lv lw bn lx ly bi"><span id="56b7" class="lz ma it lv b be mb mc l nc me">for index, row in df_average_overall[:7].iterrows():<br/>    max_average = None<br/>    for key, values in dict_formation.items():<br/>        average = best_lineup(row['Teams'], values)['overall'].mean()<br/>        if max_average is None or average&gt;max_average:<br/>            max_average = average<br/>            formation = key<br/>    print(row['Teams'], formation, max_average)</span></pre><p id="3628" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">太好了！现在我们有了每个国家队的最佳阵型。</p><pre class="kj kk kl km gt lu lv lw bn lx ly bi"><span id="7b91" class="lz ma it lv b be mb mc l md me">Spain 4-2-3-1 85.1<br/>Portugal 4-2-3-1 84.9<br/>England 4-4-2 84.45454545454545<br/>Brazil 4-3-3 84.81818181818181<br/>France 4-2-3-1 83.9<br/>Argentina 4-3-3 83.54545454545455<br/>Germany 4-2-3-1 84.1</span></pre><p id="8958" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">让我们来看看什么是最适合西班牙、葡萄牙、英国、巴西、法国、阿根廷和德国的 XI。</p><h2 id="0690" class="no ma it bd mh np nq dn ml nr ns dp mp lh nt nu mr ll nv nw mt lp nx ny mv nz bi translated">1.西班牙:最佳开局 Xi(4-2-3-1)</h2><pre class="kj kk kl km gt lu lv lw bn lx ly bi"><span id="b9f8" class="lz ma it lv b be mb mc l nc me">best_lineup('Spain', dict_formation['4-2-3-1'])</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi oa"><img src="../Images/d7e3183fcf05678de9b73da6a2d84d96.png" data-original-src="https://miro.medium.com/v2/resize:fit:1064/format:webp/1*u4uSA6kTH3CaJmvpXQ_iOg.png"/></div></figure><h2 id="12f5" class="no ma it bd mh np nq dn ml nr ns dp mp lh nt nu mr ll nv nw mt lp nx ny mv nz bi translated">2.葡萄牙:最佳开局 Xi(4-2-3-1)</h2><pre class="kj kk kl km gt lu lv lw bn lx ly bi"><span id="f5d9" class="lz ma it lv b be mb mc l nc me">best_lineup('Portugal', dict_formation['4-2-3-1'])</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ob"><img src="../Images/bb751fcfcc91cdb164b5c8188e4cb258.png" data-original-src="https://miro.medium.com/v2/resize:fit:1118/format:webp/1*SrVcj7G5JMUpIQ2qRIB4pQ.png"/></div></figure><h2 id="7575" class="no ma it bd mh np nq dn ml nr ns dp mp lh nt nu mr ll nv nw mt lp nx ny mv nz bi translated">3.英国:最佳首发 Xi(4-4-2)</h2><pre class="kj kk kl km gt lu lv lw bn lx ly bi"><span id="14d0" class="lz ma it lv b be mb mc l nc me">best_lineup('England', dict_formation['4-4-2'])</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi oc"><img src="../Images/185208e76246980965d4f15205b13928.png" data-original-src="https://miro.medium.com/v2/resize:fit:1110/format:webp/1*3CwtsGKpvWXDDxgFnIwCAg.png"/></div></figure><h2 id="d734" class="no ma it bd mh np nq dn ml nr ns dp mp lh nt nu mr ll nv nw mt lp nx ny mv nz bi translated">4.巴西:最佳开局 Xi(4-3-3)</h2><pre class="kj kk kl km gt lu lv lw bn lx ly bi"><span id="1683" class="lz ma it lv b be mb mc l nc me">best_lineup('Brazil', dict_formation['4-3-3'])</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi od"><img src="../Images/8aa3e1b5d3d54c45c2aafa94467a9fdc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1104/format:webp/1*fE6BpHSFd5qF-0-qlqKzOA.png"/></div></figure><h2 id="c481" class="no ma it bd mh np nq dn ml nr ns dp mp lh nt nu mr ll nv nw mt lp nx ny mv nz bi translated">5.法国:最佳开局 Xi(4-2-3-1)</h2><pre class="kj kk kl km gt lu lv lw bn lx ly bi"><span id="0134" class="lz ma it lv b be mb mc l nc me">best_lineup('France', dict_formation['4-2-3-1'])</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi oe"><img src="../Images/ae37bde732d5431955324ffdc0c08156.png" data-original-src="https://miro.medium.com/v2/resize:fit:1046/format:webp/1*ObfNnskBCBVeAIqXLMpO0w.png"/></div></figure><h2 id="90d6" class="no ma it bd mh np nq dn ml nr ns dp mp lh nt nu mr ll nv nw mt lp nx ny mv nz bi translated">6.阿根廷:最佳开局 Xi(4-3-3)</h2><pre class="kj kk kl km gt lu lv lw bn lx ly bi"><span id="18de" class="lz ma it lv b be mb mc l nc me">best_lineup('Argentina', dict_formation['4-3-3'])</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi of"><img src="../Images/3c07c13c9e5f52b2b1dcad248d30785a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1022/format:webp/1*wUZi3h1OylaXp3b-Xk1ghg.png"/></div></figure><h2 id="9c3c" class="no ma it bd mh np nq dn ml nr ns dp mp lh nt nu mr ll nv nw mt lp nx ny mv nz bi translated">7.德国:最佳开局 Xi(4-2-3-1)</h2><pre class="kj kk kl km gt lu lv lw bn lx ly bi"><span id="328b" class="lz ma it lv b be mb mc l nc me">best_lineup('Germany', dict_formation['4-2-3-1'])</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi og"><img src="../Images/46f2e5860d7bcfa2febc3cc2a2450ec5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1164/format:webp/1*YEfnVZ8d4WBSRkvJsZVb2A.png"/></div></figure><p id="1eef" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">就是这样！你可以在我的<a class="ae mf" href="https://github.com/ifrankandrade/fifa-world-cup-2022-prediction" rel="noopener ugc nofollow" target="_blank"> GitHub </a>上找到完整的代码。</p></div><div class="ab cl oh oi hx oj" role="separator"><span class="ok bw bk ol om on"/><span class="ok bw bk ol om on"/><span class="ok bw bk ol om"/></div><div class="im in io ip iq"><p id="6003" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">用 Python 学习数据科学？<a class="ae mf" href="https://frankandrade.ck.page/26b76e9130" rel="noopener ugc nofollow" target="_blank"> <strong class="la iu">加入我的 20k+人电子邮件列表，获取我的免费 Python for Data Science 备忘单。</strong> </a></p><p id="618f" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">如果你喜欢阅读这样的故事，并想支持我成为一名作家，可以考虑报名成为一名媒体成员。每月 5 美元，让您可以无限制地访问数以千计的 Python 指南和数据科学文章。如果你使用<a class="ae mf" href="https://frank-andrade.medium.com/membership" rel="noopener">我的链接</a>注册，我会赚一小笔佣金，不需要你额外付费。</p><div class="oo op gp gr oq or"><a href="https://frank-andrade.medium.com/membership" rel="noopener follow" target="_blank"><div class="os ab fo"><div class="ot ab ou cl cj ov"><h2 class="bd iu gy z fp ow fr fs ox fu fw is bi translated">通过我的推荐链接加入媒体——弗兰克·安德拉德</h2><div class="oy l"><h3 class="bd b gy z fp ow fr fs ox fu fw dk translated">作为一个媒体会员，你的会员费的一部分会给你阅读的作家，你可以完全接触到每一个故事…</h3></div><div class="oz l"><p class="bd b dl z fp ow fr fs ox fu fw dk translated">frank-andrade.medium.com</p></div></div><div class="pa l"><div class="pb l pc pd pe pa pf ks or"/></div></div></a></div></div></div>    
</body>
</html>