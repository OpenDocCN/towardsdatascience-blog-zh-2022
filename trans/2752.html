<html>
<head>
<title>A GitHub Repository for Publishing Your Python Package</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用于发布Python包的GitHub库</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/an-end-to-end-guide-to-publish-your-python-package-bdb56639662c#2022-06-14">https://towardsdatascience.com/an-end-to-end-guide-to-publish-your-python-package-bdb56639662c#2022-06-14</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="5680" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">这是一个端到端的演示，旨在促进共享开源软件或内部工作的过程</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/15886c44d3e8f9c0e096196873a584aa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*pRW8vDVeVurwIk-bT2sTOw.jpeg"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">照片由<a class="ae kv" href="https://unsplash.com/@sigmund?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">西格蒙德</a>在<a class="ae kv" href="https://unsplash.com/s/photos/upload?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>拍摄</p></figure><p id="8a67" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这是一个共享代码的端到端演示。该项目旨在帮助您理解如何在PyPI上正确地对外发布您的python模块/包，并在内部与您的同事分享您的工作。我还为你准备了GitHub回购，让你的生活更轻松。</p><p id="a3a5" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">更多详情可以直接去这个回购:<a class="ae kv" href="https://github.com/jinhangjiang/Your-First-Python-Package-on-PyPI" rel="noopener ugc nofollow" target="_blank"> GitHub回购</a></p><h1 id="f2c0" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">第一步</h1><p id="d3f0" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">分别去下面两个网站注册自己的账号。</p><ul class=""><li id="42ad" class="mp mq iq ky b kz la lc ld lf mr lj ms ln mt lr mu mv mw mx bi translated">PyPI测试:<a class="ae kv" href="https://test.pypi.org/" rel="noopener ugc nofollow" target="_blank">https://test.pypi.org/</a></li><li id="2f7f" class="mp mq iq ky b kz my lc mz lf na lj nb ln nc lr mu mv mw mx bi translated">PyPI:<a class="ae kv" href="https://pypi.org/" rel="noopener ugc nofollow" target="_blank">https://pypi.org/</a></li></ul><p id="39d6" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">注意:如果您不想公开发布您的软件包，可以跳过这一部分。此外，我强烈建议首先在测试网站上尝试您的包，以避免上传过程中的错误。因为你在PyPI上对你的包所做的任何改变都是不可恢复的，上传错误可能会导致你的包补丁出现故障。你要避免这种情况！！</p><h1 id="329a" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">第二步</h1><p id="78c5" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">选项1:将这个库<a class="ae kv" href="https://github.com/jinhangjiang/Your-First-Python-Package-on-PyPI" rel="noopener ugc nofollow" target="_blank">分支到您自己的GitHub帐户，并在您的本地。您可以在GitHub上进行大部分的修改，但是您需要通过cmd发布您的包，并且这些文件在本地可用。</a></p><p id="eefb" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">选项2:手动创建必要的文件。这里是您需要的核心文件列表:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nd"><img src="../Images/d3437ebf62656801abf94d285e066ab0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*U7Yv-bbjveHeYp0QgPfPdw.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">作者图片</p></figure><p id="8e15" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我知道这很难接受。但是请原谅我。您只需要对其中一些进行必要的修改，其余的将保持默认设置。</p><h1 id="24d1" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">可选—多个模块</h1><p id="d1fe" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">假设您有多个类，它们的函数在不同的文件中创建。您希望使文件夹(或子文件夹)遵循以下约定:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi ne"><img src="../Images/2230dac43d0f699534e25d26c807965f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1290/format:webp/1*gps5AnG1v-a8OTwUt7fNBg.png"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">作者图片</p></figure><p id="ee33" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在每个文件夹中，更新“__init__”。py”通过这样做:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nf ng l"/></div></figure><p id="1418" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在主文件夹中，更新“__init__”。py”通过这样做:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nf ng l"/></div></figure><p id="8e5c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">然后，用户将能够像这样正确地导入您的库:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nf ng l"/></div></figure><p id="7310" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果你想从主(前一个)文件夹中导入一些东西，你应该这样做:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nf ng l"/></div></figure><p id="ae14" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">请考虑在您的“__init__”中添加一个列表。py ”,以便用户可以检查哪些功能可用:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nf ng l"/></div></figure><h1 id="27fc" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">第三步</h1><p id="e8f8" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">在cmd中安装以下python包:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nf ng l"/></div></figure><h1 id="ad10" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">第四步</h1><p id="c445" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">按照您想要的任何顺序进行以下更改:</p><ol class=""><li id="ca91" class="mp mq iq ky b kz la lc ld lf mr lj ms ln mt lr nh mv mw mx bi translated">用自己的python包替换src文件夹中的your_main_code.py，并保留“__init__”。如果你只是发布一个模块。</li><li id="14a6" class="mp mq iq ky b kz my lc mz lf na lj nb ln nc lr nh mv mw mx bi translated">对setup.py进行更改，说明包含在该文件中。</li><li id="f730" class="mp mq iq ky b kz my lc mz lf na lj nb ln nc lr nh mv mw mx bi translated">挑选你自己的执照。打开许可证文件，单击“编辑”，单击“选择许可证模板”，然后选择满足您需求的许可证。如果你不知道哪个许可证适合你，你可以使用麻省理工学院的许可证，这是最常见的选择之一。或者，你可以用这个链接来挑选一个:<a class="ae kv" href="https://choosealicense.com/" rel="noopener ugc nofollow" target="_blank">https://choosealicense.com/</a></li><li id="2e1f" class="mp mq iq ky b kz my lc mz lf na lj nb ln nc lr nh mv mw mx bi translated">更新CHANGELOG.md以反映版本信息</li><li id="f710" class="mp mq iq ky b kz my lc mz lf na lj nb ln nc lr nh mv mw mx bi translated">可选:创建一个“test.py”并将该文件放在tests文件夹中。或者，如果您确信您的模块一切正常，您可以删除整个文件夹。</li><li id="ed62" class="mp mq iq ky b kz my lc mz lf na lj nb ln nc lr nh mv mw mx bi translated">删除这个“README.md”文件中的所有内容，并用您的软件包的详细描述更新该文件。</li></ol><h1 id="c33a" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">第五步</h1><p id="faa6" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">对于步骤5，您有多种选择来执行其余步骤。这里有两个例子:</p><ol class=""><li id="9529" class="mp mq iq ky b kz la lc ld lf mr lj ms ln mt lr nh mv mw mx bi translated">在cmd -命令提示符下执行此操作</li></ol><ul class=""><li id="40f0" class="mp mq iq ky b kz la lc ld lf mr lj ms ln mt lr mu mv mw mx bi translated">在您的本地中，打开cmd，导航到您的软件包所在的目录，然后键入以下内容:</li></ul><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nf ng l"/></div></figure><p id="0918" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">2.在Jupyter笔记本终端中完成:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nf ng l"/></div></figure><h1 id="249c" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">第六步</h1><p id="0e80" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">在这一步中，我们将使用cmd/terminal中的以下代码来构建您的包:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nf ng l"/></div></figure><p id="b3d0" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">运行代码后，您将在当前目录中看到以下两个文件夹:</p><ul class=""><li id="2b4f" class="mp mq iq ky b kz la lc ld lf mr lj ms ln mt lr mu mv mw mx bi translated">建设</li><li id="5658" class="mp mq iq ky b kz my lc mz lf na lj nb ln nc lr mu mv mw mx bi translated">距离</li></ul><p id="6167" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在dist文件夹下，你会看到一个名为“TheNameofYourPackage-the versionofyourpackage . tar . gz”的‘tar’文件。到目前为止，如果您不需要公开发布您的代码；相反，如果您只是想与您的朋友或同事共享您的代码，您可以只与他们共享这个文件。他们只需执行“pip安装”即可使用您的代码:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nf ng l"/></div></figure><h1 id="b11a" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">可选—在PyPI上测试您的包</h1><p id="a2be" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">现在，您将要向PyPI发布您的包。在你公开它之前，你可能想做的另外一件事是测试一旦人们下载了它们，你的包是否会像预期的那样工作。您可以做的是创建一个名为“test”的文件夹，并创建一个test.py，其中包含您的包的一些示例实现。然后，<strong class="ky ir">在你的cmd/终端中输入“pytest”。如果一切正常，它将自动运行test.py并通过测试。</strong>否则，它会引发错误，您应该在进入下一步之前相应地修复错误。</p><p id="9a36" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">还有一件事你可能想试着测试一下你的包的架构是否适合。在cmd/terminal中，键入以下代码:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nf ng l"/></div></figure><p id="972c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">您应该会看到类似这样的内容:</p><pre class="kg kh ki kj gt ni nj nk nl aw nm bi"><span id="36e6" class="nn lt iq nj b gy no np l nq nr">Checking distribution dist/TheNameofYourPackage-TheVersionofYourPackage-1.0.0-py3-none-any.whl: Passed</span><span id="75f0" class="nn lt iq nj b gy ns np l nq nr">Checking distribution dist/TheNameofYourPackage-TheVersionofYourPackage.tar.gz: Passed</span></pre><h1 id="8207" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">第七步</h1><p id="baf0" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">将您的包上传到TestPyPI:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nf ng l"/></div></figure><p id="428b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">然后，您会在TestPyPI上看到一个指向您的包的测试版本的链接。看看吧！如果有任何打字错误或不兼容的错误，在把你的包上传到真正的PyPI之前修复它们。</p><p id="084c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在，这是最激动人心的时刻，将您的包上传到PyPI，帮助我们社区中成千上万的人:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nf ng l"/></div></figure><p id="fc06" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">至此，您的软件包应该已经正式上线，可以由任何人在任何时间、任何地点进行“pip安装”。重大时刻！我仍然记得当我看到我的第一个包裹时的感觉。我告诉自己，这就是我编码的原因！</p><p id="74a7" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir"> <em class="nt">恭喜恭喜！！！</em>T3】</strong></p><h1 id="6fef" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">一些提示</h1><ul class=""><li id="14c4" class="mp mq iq ky b kz mk lc ml lf nu lj nv ln nw lr mu mv mw mx bi translated">每当你想更新你的软件包时，你应该删除“build”和“dist”文件夹，修改你的代码，编辑“CHANGLOG.txt”文件，并修改“setup.py”中的版本号。并重复步骤5–7。</li><li id="ee0a" class="mp mq iq ky b kz my lc mz lf na lj nb ln nc lr mu mv mw mx bi translated">您可以在更新后通过以下方式升级您的软件包:<em class="nt"> pip安装您的软件包名称—升级</em></li><li id="dac0" class="mp mq iq ky b kz my lc mz lf na lj nb ln nc lr mu mv mw mx bi translated">你总能在PyPi上找到你的包裹:<a class="ae kv" href="http://pypi.org/project/YOURPACKAGENAME/" rel="noopener ugc nofollow" target="_blank"><em class="nt">http://pypi.org/project/YOURPACKAGENAME/</em></a></li><li id="aa61" class="mp mq iq ky b kz my lc mz lf na lj nb ln nc lr mu mv mw mx bi translated">不要随意发布包。尽管对你能发表什么或不能发表什么没有硬性限制，但要确保你上传的东西实际上是有意义的，并且有人会从你的工作中受益。</li></ul></div></div>    
</body>
</html>