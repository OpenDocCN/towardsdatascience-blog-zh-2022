<html>
<head>
<title>CO2 Emissions Infographics in Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Python中的二氧化碳排放信息图</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/co2-emissions-infographics-in-python-369dd968eb84#2022-11-01">https://towardsdatascience.com/co2-emissions-infographics-in-python-369dd968eb84#2022-11-01</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="e4fc" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">如何用Python和Matplotlib构建数据信息图</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/4cb3f40b92ae0857881a8e7313042787.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*_NivKuUCXfdySRbm.jpg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">从国际空间站看到的地球NASA提供的公开图片<a class="ae ky" href="https://www.nasa.gov/mission_pages/station/images/index.html" rel="noopener ugc nofollow" target="_blank">https://www . NASA . gov/mission _ pages/station/images/index . html</a></p></figure><p id="eaf1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">信息图这个词被用来描述各种可爱的图片，这些图片上有卡通人物和指向各处的箭头。</p><p id="4bd4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">但是这里我们谈论的是传达数据信息的图形，这些数据可能会在报告或报纸文章中使用。从本质上来说，它们是一种有吸引力的数据呈现方式，带有支持性的图表和文本。</p><p id="eec9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">所以，让我们想象一下，我们要写一篇关于我们的大气状况和导致气候变化的二氧化碳水平的报告或文章。</p><p id="e03c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们将通过创建两个信息图表来告诉我们的读者大气中二氧化碳的水平，在过去和现在。</p><p id="0e46" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">第一个将从NASA的这张图片中获得灵感:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi lv"><img src="../Images/92f38ff8ae7cc62ce1540ad316569e5d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*704kTwNIRap7OFNq.jpg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">大气中二氧化碳的历史水平——公共领域图片由美国宇航局提供<a class="ae ky" href="https://climate.nasa.gov/climate_resources/24/graphic-the-relentless-rise-of-carbon-dioxide/" rel="noopener ugc nofollow" target="_blank">https://climate . NASA . gov/climate _ resources/24/graphic-the-renely-rise-of-carbon-CO2/</a></p></figure><p id="7158" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这张图表记录了几十万年来大气中的二氧化碳水平。它本质上是一个带注释的图，我们将使用Pandas和Matplotlib从原始数据构建我们的版本。</p><p id="eb0a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">第二张图将包含两个图表，一个在上面，另一个显示各大洲的二氧化碳排放量。我们将把这些和一些支持文字一起放在一个背景图片上。</p><p id="3e1d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我会给你看我们进行的代码，但整个代码，数据和图像将可从我的网页。</p><p id="a2ad" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们将使用的数据全部由优秀的<a class="ae ky" href="https://ourworldindata.org/" rel="noopener ugc nofollow" target="_blank">我们的数据世界</a> (OWID)网站和Github页面提供。在CC-BY许可下，他们所有的可视化、数据和文章都是免费和开源的。</p><h1 id="3ff6" class="lw lx it bd ly lz ma mb mc md me mf mg jz mh ka mi kc mj kd mk kf ml kg mm mn bi translated">我们的方法</h1><p id="1de9" class="pw-post-body-paragraph kz la it lb b lc mo ju le lf mp jx lh li mq lk ll lm mr lo lp lq ms ls lt lu im bi translated">我们将使用Matplotlib的功能，它允许我们注释图表并在图表中定位图像。</p><p id="daea" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">首先，我们将数据读入Pandas dataframes，然后我们将根据这些数据创建一个基本图表。一旦我们有了这个，我们就像你在上面的NASA例子中看到的那样注释图表，并把它保存为图像。</p><p id="b15c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">为了构建信息图，我们创建了一个新的Matplotlib图，并将我们保存的图表图像与背景图像(您在本文顶部看到的图像)一起放入其中。</p><p id="2faf" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然后，我们重复这个过程来创建另一个信息图，但这次我们有两个图表和一些说明性文本。</p><p id="04b0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">结果将是这样的:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mt"><img src="../Images/e666268d27269af7ab90041686e1131c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*cd24M9P4-gvVuzXNxKwgQA.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">我们将创建的两个信息图——作者图片</p></figure><h1 id="9ff2" class="lw lx it bd ly lz ma mb mc md me mf mg jz mh ka mi kc mj kd mk kf ml kg mm mn bi translated">代码</h1><p id="75db" class="pw-post-body-paragraph kz la it lb b lc mo ju le lf mp jx lh li mq lk ll lm mr lo lp lq ms ls lt lu im bi translated">我将一步一步地浏览代码，并在每一节的末尾包含该部分完整代码的要点。所有的代码也可以通过我的<a class="ae ky" href="http://alanjones2.github.io" rel="noopener ugc nofollow" target="_blank">网站</a>上的链接获得。</p><p id="44ff" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们需要做的第一件事是导入我们将使用的Python库。</p><pre class="kj kk kl km gt mu mv mw mx aw my bi"><span id="944d" class="mz lx it mv b gy na nb l nc nd"><strong class="mv iu">import</strong> pandas <strong class="mv iu">as</strong> pd<br/><strong class="mv iu">import</strong> matplotlib.pyplot <strong class="mv iu">as</strong> plt</span></pre><p id="b410" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们将从OWID数据创建Pandas数据帧，并使用Pandas和Matplotlib创建图表和其他视觉效果。</p><h2 id="95ed" class="mz lx it bd ly ne nf dn mc ng nh dp mg li ni nj mi lm nk nl mk lq nm nn mm no bi translated">获取数据</h2><p id="656a" class="pw-post-body-paragraph kz la it lb b lc mo ju le lf mp jx lh li mq lk ll lm mr lo lp lq ms ls lt lu im bi translated">我们将使用的第一个数据集包括许多国家和地区(实体)的各种气候指标。我们将使用全球的<em class="np">二氧化碳浓度</em>数据，因此我们将相应地过滤数据。</p><p id="9d63" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">首先，我们将数据读入数据帧<code class="fe nq nr ns mv b">co2</code>，当然，这将包含所有的数据。</p><p id="f589" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">接下来，我们过滤数据，只考虑其中的<em class="np">实体</em>名称为“World ”,并将其存储在数据帧<code class="fe nq nr ns mv b">co2world.</code>中</p><pre class="kj kk kl km gt mu mv mw mx aw my bi"><span id="bebb" class="mz lx it mv b gy na nb l nc nd"><em class="np"># original source: <br/></em># <a class="ae ky" href="https://ourworldindata.org/co2-and-other-greenhouse-gas-emissions" rel="noopener ugc nofollow" target="_blank"><em class="np">https://ourworldindata.org/co2-and-other-greenhouse-gas-emissions</em></a></span><span id="e5d7" class="mz lx it mv b gy nt nb l nc nd">co2 <strong class="mv iu">=</strong> pd<strong class="mv iu">.</strong>read_csv('data/climate-change.csv')</span><span id="b83b" class="mz lx it mv b gy nt nb l nc nd">co2world <strong class="mv iu">=</strong> co2[co2['Entity']<strong class="mv iu">==</strong>'World']<br/>co2world</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nu"><img src="../Images/f98919d6c70e46a7a6fcffc480498b37.png" data-original-src="https://miro.medium.com/v2/resize:fit:568/format:webp/1*UK1bPh-YvXeiOhPtr9D9hw.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">历史二氧化碳浓度—作者图片</p></figure><p id="5318" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">数据中还有其他几列，但我们只对<em class="np"> CO2浓度</em>数据感兴趣。</p><h2 id="60a8" class="mz lx it bd ly ne nf dn mc ng nh dp mg li ni nj mi lm nk nl mk lq nm nn mm no bi translated">绘制基本图表</h2><p id="fccb" class="pw-post-body-paragraph kz la it lb b lc mo ju le lf mp jx lh li mq lk ll lm mr lo lp lq ms ls lt lu im bi translated">我们可以这样绘制这些数据:</p><pre class="kj kk kl km gt mu mv mw mx aw my bi"><span id="b360" class="mz lx it mv b gy na nb l nc nd">co2world<strong class="mv iu">.</strong>plot(y <strong class="mv iu">= </strong>"CO2 concentrations", <br/>              x <strong class="mv iu">= </strong>'Year', <br/>              grid <strong class="mv iu">=</strong> <strong class="mv iu">True</strong>, <br/>              figsize <strong class="mv iu">= </strong>(20,10))</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nv"><img src="../Images/3f41de96fe88c0f26dfbdbc731ef7280.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*eOOMQ6jIJ7APIxAn0VepKA.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">历史二氧化碳浓度—作者图片</p></figure><p id="4718" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">结果是一个相当令人震惊的图表，它显示，在过去的80万年里，地球大气中的二氧化碳浓度低于300 ppm(百万分之一)，但在过去的几十年里，它飙升至400 ppm以上。</p><p id="4fce" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然而，除非你熟悉数据，否则解读图表并不容易。所以，让我们帮读者一个忙，让我们看到的东西更明显一点。</p><p id="1060" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">x轴代表时间，但大多数年份是负值。这些值是相对于共同时代的开始，因此，例如，-800，000意味着800，000 BCE(在共同时代之前)，0是我们在当前系统中开始计算世纪的位置，最后一年是2022年，即今年。</p><p id="6aa1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们将设置记号和标签，使其更具可读性，因为标签很长，我们将旋转它们，使它们不会重叠。</p><pre class="kj kk kl km gt mu mv mw mx aw my bi"><span id="3b9b" class="mz lx it mv b gy na nb l nc nd">plt<strong class="mv iu">.</strong>xticks([<strong class="mv iu">-</strong>800000, <strong class="mv iu">-</strong>600000, <strong class="mv iu">-</strong>400000, <strong class="mv iu">-</strong>200000, 0], <br/>           ['800,000 BCE', '600,000 BCE', '400,000 BCE',<br/>            '200,000 BCE','0'],<br/>             rotation<strong class="mv iu">=</strong>20)</span></pre><p id="bf56" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们还定义了x轴和y轴标签，移除图例(这是多余的)并添加标题。</p><pre class="kj kk kl km gt mu mv mw mx aw my bi"><span id="6bd7" class="mz lx it mv b gy na nb l nc nd">plt<strong class="mv iu">.</strong>ylabel("carbon dioxide level (parts per million)")</span><span id="ef80" class="mz lx it mv b gy nt nb l nc nd">plt<strong class="mv iu">.</strong>xlabel("years before today (0 = 1950)")</span><span id="b44d" class="mz lx it mv b gy nt nb l nc nd">plt<strong class="mv iu">.</strong>legend("")</span><span id="dbe2" class="mz lx it mv b gy nt nb l nc nd">plt<strong class="mv iu">.</strong>title("CO2 Concentrations")</span></pre><p id="ed88" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然后，我们将生成的图形保存为图像。</p><pre class="kj kk kl km gt mu mv mw mx aw my bi"><span id="3388" class="mz lx it mv b gy na nb l nc nd">plt<strong class="mv iu">.</strong>savefig('images/co2world.png')</span></pre><p id="1e51" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">以下是完整的代码:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nw nx l"/></div></figure><p id="8ffb" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这是结果图。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ny"><img src="../Images/fc64065a79f1c07c8b4cc07cc5ae8600.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qC58dgciemYXusU60wClzA.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">历史二氧化碳浓度，可读性更强的版本——图片由作者提供</p></figure><p id="fc69" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们这里有一个可读的图表，但它并不包含上面NASA图表中的所有信息。</p><h2 id="ef31" class="mz lx it bd ly ne nf dn mc ng nh dp mg li ni nj mi lm nk nl mk lq nm nn mm no bi translated">给图表加注释</h2><p id="b366" class="pw-post-body-paragraph kz la it lb b lc mo ju le lf mp jx lh li mq lk ll lm mr lo lp lq ms ls lt lu im bi translated">我们需要添加标题“几千年来，大气中的碳从未超过这条线”，并绘制标题所指的线。</p><pre class="kj kk kl km gt mu mv mw mx aw my bi"><span id="ca6e" class="mz lx it mv b gy na nb l nc nd">caption = "For millennia, atmospheric carbon has never been above this line"</span><span id="80ac" class="mz lx it mv b gy nt nb l nc nd">plt<strong class="mv iu">.</strong>text(<strong class="mv iu">-</strong>790000,320, caption,<br/>        verticalalignment<strong class="mv iu">=</strong>'top', horizontalalignment<strong class="mv iu">=</strong>'left',<br/>        fontsize<strong class="mv iu">=</strong>fontsize, color <strong class="mv iu">=</strong> color)<br/><br/>plt<strong class="mv iu">.</strong>plot([<strong class="mv iu">-</strong>800000,0],[305,305], linestyle <strong class="mv iu">=</strong> 'dashed', <br/>          color<strong class="mv iu">=</strong>'red', linewidth <strong class="mv iu">=</strong> 2)</span></pre><p id="6704" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在上面的代码中，我们将标题定义为一个字符串，然后将其添加到图表中的x/y位置-790000，320，然后在CO2浓度水平为305ppm时从-800000，0绘制一条水平虚线。</p><p id="4d71" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">接下来，我们添加注释——指向1950年和2022年的标签和箭头。</p><pre class="kj kk kl km gt mu mv mw mx aw my bi"><span id="52a0" class="mz lx it mv b gy na nb l nc nd">plt<strong class="mv iu">.</strong>annotate("1950",xy <strong class="mv iu">=</strong> (0,312), xytext <strong class="mv iu">=</strong> (70000,306),<br/>              arrowprops<strong class="mv iu">=</strong>dict(facecolor<strong class="mv iu">=</strong> color, shrink<strong class="mv iu">=</strong>0.1), <br/>              fontsize<strong class="mv iu">=</strong>fontsize, color <strong class="mv iu">=</strong> color)<br/>plt<strong class="mv iu">.</strong>annotate("2022",xy <strong class="mv iu">=</strong> (0,417), xytext <strong class="mv iu">=</strong> (70000,411),<br/>              arrowprops<strong class="mv iu">=</strong>dict(facecolor<strong class="mv iu">=</strong> color, shrink<strong class="mv iu">=</strong>0.1),<br/>              fontsize <strong class="mv iu">= </strong>fontsize, color <strong class="mv iu">=</strong> color)</span></pre><p id="42c7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">最后要做的事情是去掉脊骨:</p><pre class="kj kk kl km gt mu mv mw mx aw my bi"><span id="e796" class="mz lx it mv b gy na nb l nc nd">ax<strong class="mv iu">.</strong>spines['top']<strong class="mv iu">.</strong>set_visible(<strong class="mv iu">False</strong>)<br/>ax<strong class="mv iu">.</strong>spines['right']<strong class="mv iu">.</strong>set_visible(<strong class="mv iu">False</strong>)<br/>ax<strong class="mv iu">.</strong>spines['bottom']<strong class="mv iu">.</strong>set_visible(<strong class="mv iu">False</strong>)<br/>ax<strong class="mv iu">.</strong>spines['left']<strong class="mv iu">.</strong>set_visible(<strong class="mv iu">False</strong>)</span></pre><p id="66e0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然后将结果保存为图像文件。</p><pre class="kj kk kl km gt mu mv mw mx aw my bi"><span id="d408" class="mz lx it mv b gy na nb l nc nd">plt<strong class="mv iu">.</strong>savefig('images/'co2.png', transparent <strong class="mv iu">=</strong> <strong class="mv iu">True</strong>)</span></pre><p id="00d2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">结果如下:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ca"><img src="../Images/d72d8df32164ad16a18958d52a373ffb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*XhTL1QUNrhv9SWKopkSsRQ.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">完整的二氧化碳浓度图表—图片由作者提供</p></figure><p id="388b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这是这个阶段的完整代码。你会注意到我已经改变了默认的颜色和字体大小，并在开始时将它们声明为变量，这样我们就可以很容易地改变它们。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nw nx l"/></div></figure><h2 id="f345" class="mz lx it bd ly ne nf dn mc ng nh dp mg li ni nj mi lm nk nl mk lq nm nn mm no bi translated">创建信息图</h2><p id="5a25" class="pw-post-body-paragraph kz la it lb b lc mo ju le lf mp jx lh li mq lk ll lm mr lo lp lq ms ls lt lu im bi translated">该图现在看起来像美国宇航局的图像，但我们想把它放在一个背景图像。这不仅仅是向当前图表添加图像的问题。如果我们这样做，轴标签将在图像之外，我们希望将整个图表放置在背景图像内。</p><p id="4f12" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">解决方案是创建一个新的Matplotlib图形，如下所示:</p><pre class="kj kk kl km gt mu mv mw mx aw my bi"><span id="d17d" class="mz lx it mv b gy na nb l nc nd">ax<strong class="mv iu">.</strong>plot([0,100],[0,100], alpha <strong class="mv iu">=</strong> 0)</span></pre><p id="747c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这给了我们一个100乘100的图表，我们可以使用它作为画布来放置我们的图表图像。请注意，我已经将alpha值设置为零，这意味着图表将不可见。</p><p id="7eb6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们现在可以将图表图像添加到这个新图形中:</p><pre class="kj kk kl km gt mu mv mw mx aw my bi"><span id="9a1b" class="mz lx it mv b gy na nb l nc nd">img1 <strong class="mv iu">=</strong> plt<strong class="mv iu">.</strong>imread('images/co2.png')<br/>ax<strong class="mv iu">.</strong>imshow(img1, aspect<strong class="mv iu">=</strong>'auto', alpha<strong class="mv iu">=</strong>1, extent<strong class="mv iu">=</strong>(1,99,1,99))</span></pre><p id="3215" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">请注意，通过使用<em class="np">范围</em>参数，我使图像比图形稍微小一点，但是在它的中心。</p><p id="4b03" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">背景图像以类似的方式添加:</p><pre class="kj kk kl km gt mu mv mw mx aw my bi"><span id="050f" class="mz lx it mv b gy na nb l nc nd">bground<strong class="mv iu">=</strong>plt<strong class="mv iu">.</strong>imread('images/ISS_earth.en.jpg')<br/>ax<strong class="mv iu">.</strong>imshow(bground, aspect<strong class="mv iu">=</strong>'auto', alpha<strong class="mv iu">=</strong>0.3, extent<strong class="mv iu">=</strong>(0,100,0,100))</span></pre><p id="89fc" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">但是这一次，图像的范围是图形的全部。</p><p id="1130" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我已经将两张图像的alpha值设置为图表图像为1(这是默认值)，背景为0.3。这意味着图表将完全不透明，但背景图像将部分透明。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nz"><img src="../Images/209d87e231c3b7491d668803d9618d22.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1Z-6Keebn77sp0zJGdWwGw.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">完整的信息图-作者提供的图片</p></figure><p id="3fd3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这是第一个信息图的代码。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nw nx l"/></div></figure><h2 id="121c" class="mz lx it bd ly ne nf dn mc ng nh dp mg li ni nj mi lm nk nl mk lq nm nn mm no bi translated">更复杂的信息图</h2><p id="a59c" class="pw-post-body-paragraph kz la it lb b lc mo ju le lf mp jx lh li mq lk ll lm mr lo lp lq ms ls lt lu im bi translated">信息图通常包含不止一个图表和一些说明性文字，所以这是我们接下来要尝试的。</p><p id="f2d0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们将使用相同的技术创建一个空白图形，并在该图形上放置图像和(这次)文本。我们将使用已经为其中一个图表和背景创建的图像，并添加另一个图表和一些文本。</p><p id="1781" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">从另一个OWID数据集，我们可以创建一个图表，表示世界各地二氧化碳排放量的增加。这是:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi oa"><img src="../Images/d23c6b44030b170247f96f31bde3372e.png" data-original-src="https://miro.medium.com/v2/resize:fit:774/format:webp/1*P6LBpiXmiUum8_aYXtERwA.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">各大洲二氧化碳排放量—数据来源，<a class="ae ky" href="https://github.com/owid/co2-data" rel="noopener ugc nofollow" target="_blank">数据中的我们的世界</a>，图片由作者提供</p></figure><p id="037b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">创建它的代码如下。首先，我们读取数据，然后根据我们指定的大洲列表过滤结果表。然后直接遍历这些大陆的名称，并在图表中添加一个新的绘图。</p><p id="b009" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们将结果保存为图像。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nw nx l"/></div></figure><p id="9e36" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在我们有了我们需要的图像，但是我们需要指定三个字符串中的文本。</p><pre class="kj kk kl km gt mu mv mw mx aw my bi"><span id="4c0a" class="mz lx it mv b gy na nb l nc nd">title <strong class="mv iu">=</strong> """<br/>CO2 Emissions<br/>"""</span><span id="26d8" class="mz lx it mv b gy nt nb l nc nd">text1 <strong class="mv iu">=</strong> """<br/>CO2 emissions have risen <br/>significantly in all parts <br/>of the World in modern times,<br/>particularly in Asia.<br/>"""</span><span id="6035" class="mz lx it mv b gy nt nb l nc nd">text2 <strong class="mv iu">=</strong> """<br/>For hundreds of millennia,<br/>CO2 levels never rose above <br/>around 300ppm. In 1950 it <br/>was just over 300 and now it <br/>is over 400ppm<br/>"""</span></pre><p id="ed79" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我不会重复放置图像，因为这几乎是我们之前所做的重复，但是使用<em class="np">范围</em>参数来将图像放置在图的右上角和左下角。</p><p id="9de4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然而，文本的定位略有不同。这里有一个例子。</p><pre class="kj kk kl km gt mu mv mw mx aw my bi"><span id="d381" class="mz lx it mv b gy na nb l nc nd">ax<strong class="mv iu">.</strong>text(5,80, text1,<br/>        verticalalignment<strong class="mv iu">=</strong>'top', horizontalalignment<strong class="mv iu">=</strong>'left',<br/>        color<strong class="mv iu">=</strong>'black', fontsize<strong class="mv iu">=</strong>18)</span></pre><p id="4af8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在这个对<em class="np"> ax.text </em>的函数调用中，前两个参数是文本的位置，第三个是文本本身，其他的不言自明。</p><p id="9b9d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们现在拥有了完成信息图的所有组件和技术。这是结果，代码如下。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ob"><img src="../Images/7148784a239b6139d4cf0785667a077a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3xM5AXmCXozlpDyFQZXUwQ.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">完整的信息图-作者提供的图片</p></figure><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nw nx l"/></div></figure></div><div class="ab cl oc od hx oe" role="separator"><span class="of bw bk og oh oi"/><span class="of bw bk og oh oi"/><span class="of bw bk og oh"/></div><div class="im in io ip iq"><p id="8d58" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">大概就是这样。感谢阅读，我希望这是有用的，并会启发你产生自己的惊人的图形。</p><p id="9c99" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">像往常一样，在这篇文章发表后不久，完整的代码将通过我的<a class="ae ky" href="http://alanjones2.github.io" rel="noopener ugc nofollow" target="_blank">网站</a>上的链接提供——你也可以在那里看到我的其他作品。</p><p id="0c6e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果你想看更多的文章，请在媒体上关注我或者订阅我偶尔发的<a class="ae ky" href="http://technofile.substack.com" rel="noopener ugc nofollow" target="_blank">子栈简讯</a>。</p><div class="oj ok gp gr ol om"><a href="https://medium.com/membership/@alan-jones" rel="noopener follow" target="_blank"><div class="on ab fo"><div class="oo ab op cl cj oq"><h2 class="bd iu gy z fp or fr fs os fu fw is bi translated">通过我的推荐链接-阿兰·琼斯加入媒体</h2><div class="ot l"><h3 class="bd b gy z fp or fr fs os fu fw dk translated">阅读阿兰·琼斯的每一个故事(以及媒体上成千上万的其他作家)。你的会员费直接支持艾伦…</h3></div><div class="ou l"><p class="bd b dl z fp or fr fs os fu fw dk translated">medium.com</p></div></div><div class="ov l"><div class="ow l ox oy oz ov pa ks om"/></div></div></a></div><h2 id="a9af" class="mz lx it bd ly ne nf dn mc ng nh dp mg li ni nj mi lm nk nl mk lq nm nn mm no bi translated">笔记</h2><p id="f41d" class="pw-post-body-paragraph kz la it lb b lc mo ju le lf mp jx lh li mq lk ll lm mr lo lp lq ms ls lt lu im bi translated">通过下面的链接，你可以在“数据世界”和美国宇航局的图片中找到原始数据。</p><div class="oj ok gp gr ol om"><a href="https://ourworldindata.org/co2-and-other-greenhouse-gas-emissions" rel="noopener  ugc nofollow" target="_blank"><div class="on ab fo"><div class="oo ab op cl cj oq"><h2 class="bd iu gy z fp or fr fs os fu fw is bi translated">CO₂和温室气体排放</h2><div class="ot l"><h3 class="bd b gy z fp or fr fs os fu fw dk translated">你可以下载我们完整的二氧化碳和温室气体排放数据库。排放是如何变化的…</h3></div><div class="ou l"><p class="bd b dl z fp or fr fs os fu fw dk translated">ourworldindata.org</p></div></div><div class="ov l"><div class="pb l ox oy oz ov pa ks om"/></div></div></a></div><div class="oj ok gp gr ol om"><a href="https://github.com/owid/co2-data" rel="noopener  ugc nofollow" target="_blank"><div class="on ab fo"><div class="oo ab op cl cj oq"><h2 class="bd iu gy z fp or fr fs os fu fw is bi translated">GitHub - owid/co2-data: Data中关于我们世界的co2和温室气体排放的数据</h2><div class="ot l"><h3 class="bd b gy z fp or fr fs os fu fw dk translated">我们完整的二氧化碳和温室气体排放数据集是我们的世界在数据中维护的关键指标的集合…</h3></div><div class="ou l"><p class="bd b dl z fp or fr fs os fu fw dk translated">github.com</p></div></div><div class="ov l"><div class="pc l ox oy oz ov pa ks om"/></div></div></a></div><div class="oj ok gp gr ol om"><a href="https://climate.nasa.gov/climate_resources/24/graphic-the-relentless-rise-of-carbon-dioxide/" rel="noopener  ugc nofollow" target="_blank"><div class="on ab fo"><div class="oo ab op cl cj oq"><h2 class="bd iu gy z fp or fr fs os fu fw is bi translated">图表:二氧化碳的无情增加-气候变化:地球的生命迹象</h2><div class="ot l"><h3 class="bd b gy z fp or fr fs os fu fw dk translated">被困在冰中的古老气泡让我们能够回到过去，看看地球的大气和气候是怎样的…</h3></div><div class="ou l"><p class="bd b dl z fp or fr fs os fu fw dk translated">climate.nasa.gov</p></div></div><div class="ov l"><div class="pd l ox oy oz ov pa ks om"/></div></div></a></div><div class="oj ok gp gr ol om"><a href="https://www.nasa.gov/mission_pages/station/images/index.html" rel="noopener  ugc nofollow" target="_blank"><div class="on ab fo"><div class="oo ab op cl cj oq"><h2 class="bd iu gy z fp or fr fs os fu fw is bi translated">空间站图像</h2><div class="ot l"><h3 class="bd b gy z fp or fr fs os fu fw dk translated">NASA.gov为您带来来自美国航天局的最新图像、视频和新闻。获取NASA的最新动态…</h3></div><div class="ou l"><p class="bd b dl z fp or fr fs os fu fw dk translated">www.nasa.gov</p></div></div><div class="ov l"><div class="pe l ox oy oz ov pa ks om"/></div></div></a></div></div></div>    
</body>
</html>