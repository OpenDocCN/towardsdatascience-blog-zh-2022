<html>
<head>
<title>Introducing Reloading: Never Re-Run Your Python Code Again To Print More Details</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">重载介绍:永远不要再次运行 Python 代码来打印更多的细节</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/introducing-reloading-never-re-run-your-python-code-again-to-print-more-details-374bee33473d#2022-11-21">https://towardsdatascience.com/introducing-reloading-never-re-run-your-python-code-again-to-print-more-details-374bee33473d#2022-11-21</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="280f" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">在运行时修改代码，节省工作时间</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/00eaf7d88415ab6dac38899832fb22c5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*av688TzclOpCl2oV"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">照片由<a class="ae kv" href="https://unsplash.com/@bradneathery?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">布拉德在<a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上整理</a></p></figure><h1 id="3533" class="kw kx iq bd ky kz la lb lc ld le lf lg jw lh jx li jz lj ka lk kc ll kd lm ln bi translated">动机</h1><p id="b500" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">在运行 Python 脚本时，我经常发现自己忘记打印所有必要的细节来跟踪管道的进度。</p><p id="a409" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">这通常在训练机器学习模型中观察到。大多数情况下，人们(包括我)经常忘记:</p><ol class=""><li id="fce8" class="mp mq iq lq b lr mk lu ml lx mr mb ms mf mt mj mu mv mw mx bi translated">添加必要的日志详细信息。</li><li id="c54d" class="mp mq iq lq b lr my lu mz lx na mb nb mf nc mj mu mv mw mx bi translated">打印基本的培训细节/指标，如准确度、误差、精确度等。</li><li id="608d" class="mp mq iq lq b lr my lu mz lx na mb nb mf nc mj mu mv mw mx bi translated">在每个<code class="fe nd ne nf ng b">k</code>时期后保存模型，等等。</li></ol><p id="f36c" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">我相信你也去过那里。</p><p id="1167" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">当然，问题不仅仅局限于机器学习。许多人在其他领域也面临着同样的问题，比如<strong class="lq ir"> Web 报废</strong>，人们在运行他们的代码后意识到他们应该丢弃更多的细节，等等。</p><p id="8c07" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">别无选择，人们必须不情愿地停止代码，添加必要的细节并再次重新运行代码。如果您的管道已经运行了几个小时，这可能会令人非常沮丧。</p><p id="98a0" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">但是如果我告诉你有一个巧妙的技巧呢？换句话说，在不丢失当前进度的情况下，对已经运行的代码进行更改实际上是可能的。</p><p id="09e7" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">这就是我将在这篇博客中探讨的内容。</p><p id="085c" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">我们开始吧🚀！</p></div><div class="ab cl nh ni hu nj" role="separator"><span class="nk bw bk nl nm nn"/><span class="nk bw bk nl nm nn"/><span class="nk bw bk nl nm"/></div><div class="ij ik il im in"><h1 id="bd30" class="kw kx iq bd ky kz no lb lc ld np lf lg jw nq jx li jz nr ka lk kc ns kd lm ln bi translated">再装</h1><p id="575b" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated"><a class="ae kv" href="https://github.com/julvo/reloading" rel="noopener ugc nofollow" target="_blank">重载</a>顾名思义，是一个 Python 库，允许你在每次迭代之前从源码中重载一个循环(或者函数)。</p><p id="4c5f" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">因此，您可以修改已经运行的代码并向其添加更多细节，而不会丢失任何当前进度。是不是很酷？</p><p id="67fb" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">要安装它，请使用以下命令:</p><pre class="kg kh ki kj gt nt ng nu bn nv nw bi"><span id="aae9" class="nx kx iq ng b be ny nz l oa ob">pip install reloading</span></pre><h2 id="bbef" class="oc kx iq bd ky od oe dn lc of og dp lg lx oh oi li mb oj ok lk mf ol om lm on bi translated">重新加载循环</h2><p id="f1a3" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">假设您有一个循环，它取一个初始值，并在每次迭代后减半。</p><p id="8e1c" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">但是，我们错误地忘记了在这个循环中打印迭代号，现在想修改它。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="oo op l"/></div></figure><p id="3fb7" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">当然，没有重装，你别无选择，只能重新运行。</p><p id="47eb" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">但是，如果您想在每次迭代之前重新加载<code class="fe nd ne nf ng b">for</code>循环的主体，请用<code class="fe nd ne nf ng b">reloading</code>包装迭代器，如下所示:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="oq op l"/></div></figure><p id="f6c0" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">现在，您可以在运行时修改代码。下面显示了一个演示:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi or"><img src="../Images/9ca76a21cb551e00c0d23ee122d77693.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*z9dSrRDygJu765OgM2Z4bw.gif"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">重装演示(作者 Gif)</p></figure><p id="2dc1" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">如上所述，我们修改了<code class="fe nd ne nf ng b">for</code>循环的主体。因此，我们可以在输出面板中看到新的细节，同时保持当前的进度。</p><h2 id="ee2d" class="oc kx iq bd ky od oe dn lc of og dp lg lx oh oi li mb oj ok lk mf ol om lm on bi translated">重新加载函数</h2><p id="7937" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">与重新加载循环类似，您也可以在每次迭代后重新加载函数体。考虑下面的函数<code class="fe nd ne nf ng b">half_value</code>:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="os op l"/></div></figure><p id="0569" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">要重新加载函数体，用<code class="fe nd ne nf ng b">reloading</code>装饰器装饰它。如下所示:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ot op l"/></div></figure><p id="0d69" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">现在，您可以在运行时修改函数。下面显示了一个演示:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ou"><img src="../Images/dc1949377d5cb8724d36f7707644944d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*KyEpssbT_CznOPDDvVTQ2g.gif"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">重装演示(作者 Gif)</p></figure><p id="1021" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">完美！</p></div><div class="ab cl nh ni hu nj" role="separator"><span class="nk bw bk nl nm nn"/><span class="nk bw bk nl nm nn"/><span class="nk bw bk nl nm"/></div><div class="ij ik il im in"><h1 id="f61c" class="kw kx iq bd ky kz no lb lc ld np lf lg jw nq jx li jz nr ka lk kc ns kd lm ln bi translated">结论</h1><p id="6dbe" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">说到这里，我们就到此为止了。我希望你学到了新东西。</p><p id="a118" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">我相信这个技巧会在运行一些高运行时间代码时为你节省大量时间，比如训练机器学习模型。</p><p id="ab3d" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated"><strong class="lq ir">觉得这个提示有趣吗？</strong></p><p id="1589" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">如果你想了解更多关于数据科学和 Python 的优雅技巧和诀窍，我每天都会在 LinkedIn 上发布一个信息丰富的提示。</p><p id="d89a" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">你可以在<a class="ae kv" href="https://www.linkedin.com/in/avi-chawla/recent-activity/shares/" rel="noopener ugc nofollow" target="_blank"> <strong class="lq ir">我的 LinkedIn 帖子存档</strong> </a>中找到我发布的所有提示。你可以在<a class="ae kv" href="https://www.linkedin.com/in/avi-chawla/" rel="noopener ugc nofollow" target="_blank"> LinkedIn </a>上关注我，看看以后所有的帖子。</p><p id="e1da" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">或者，您也可以通过电子邮件接收:</p><p id="a91b" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated"><a class="ae kv" href="https://avichawla.substack.com/" rel="noopener ugc nofollow" target="_blank">🚀<strong class="lq ir">订阅数据科学每日一剂。在这里，我分享关于数据科学的优雅技巧和诀窍，一天一个技巧。每天在你的收件箱里收到这些提示。</strong>T13】</a></p><p id="d178" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated"><a class="ae kv" href="https://subscribepage.io/450q" rel="noopener ugc nofollow" target="_blank"> 🧑‍💻<strong class="lq ir">成为数据科学专家！获取包含 450 多个熊猫、NumPy 和 SQL 问题的免费数据科学掌握工具包。</strong> </a></p><p id="7ea9" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated"><a class="ae kv" href="https://alphasignal.ai/?referrer=Chawla" rel="noopener ugc nofollow" target="_blank"> <strong class="lq ir">获取机器学习领域排名前 1%的研究论文、新闻、报道、推文的每周汇总。</strong> </a></p><p id="a8fa" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">我喜欢探索、实验和撰写关于数据科学概念和工具的文章。你可以在 LinkedIn 上和我联系。</p><p id="5e7d" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">感谢阅读！</p></div></div>    
</body>
</html>