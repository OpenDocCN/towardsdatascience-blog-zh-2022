<html>
<head>
<title>What is __pycache__ in Python?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Python 中 __pycache__ 是什么？</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/pycache-python-991424aabad8#2022-02-16">https://towardsdatascience.com/pycache-python-991424aabad8#2022-02-16</a></blockquote><div><div class="fc ii ij ik il im"/><div class="in io ip iq ir"><div class=""/><div class=""><h2 id="1f77" class="pw-subtitle-paragraph jr it iu bd b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki dk translated">了解运行 Python 代码时创建的 __pycache__ 文件夹</h2></div><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj kj"><img src="../Images/0e84f4327dbdd65b31245359fa25f9a4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ESFNmYC39S1RlZKcOrS9Dw.jpeg"/></div></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">照片由<a class="ae kz" href="https://unsplash.com/@dimasadityawicaksana?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> dimas aditya </a>在<a class="ae kz" href="https://unsplash.com/s/photos/box?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</p></figure><h2 id="85e3" class="la lb iu bd lc ld le dn lf lg lh dp li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">介绍</h2><p id="bdef" class="pw-post-body-paragraph lw lx iu ly b lz ma jv mb mc md jy me lj mf mg mh ln mi mj mk lr ml mm mn mo in bi translated">您可能已经注意到，在执行 Python 代码时，会(有时)创建一个名为<code class="fe mp mq mr ms b">__pycache__</code>的目录，其中包含许多扩展名为<code class="fe mp mq mr ms b">.pyc</code>的文件。</p><p id="03c6" class="pw-post-body-paragraph lw lx iu ly b lz mt jv mb mc mu jy me lj mv mg mh ln mw mj mk lr mx mm mn mo in bi translated">在今天的简短教程中，我们将讨论由 Python 解释器创建的这些文件的用途。我们将首先讨论为什么生成它们，如何抑制它们的创建，以及如何确保它们不会被提交给任何远程存储库。</p></div><div class="ab cl my mz hy na" role="separator"><span class="nb bw bk nc nd ne"/><span class="nb bw bk nc nd ne"/><span class="nb bw bk nc nd"/></div><div class="in io ip iq ir"><h2 id="2148" class="la lb iu bd lc ld le dn lf lg lh dp li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">。pyc 文件和 __pycache__ 文件夹</h2><p id="f73d" class="pw-post-body-paragraph lw lx iu ly b lz ma jv mb mc md jy me lj mf mg mh ln mi mj mk lr ml mm mn mo in bi translated">Python 是一种解释型语言，这意味着你的源代码在运行时被翻译成一组能够被 CPU 理解的指令。当运行你的 Python 程序时，源代码被编译成<strong class="ly iv">字节码</strong>其中<strong class="ly iv"> </strong>是 CPython 的一个实现细节(Python 的原始实现)。字节码也缓存并存储在<code class="fe mp mq mr ms b">.pyc</code>文件中，这样下次重新运行代码时，同一个文件的执行速度会更快。</p></div><div class="ab cl my mz hy na" role="separator"><span class="nb bw bk nc nd ne"/><span class="nb bw bk nc nd ne"/><span class="nb bw bk nc nd"/></div><div class="in io ip iq ir"><p id="77ad" class="pw-post-body-paragraph lw lx iu ly b lz mt jv mb mc mu jy me lj mv mg mh ln mw mj mk lr mx mm mn mo in bi translated"><em class="nf">请注意，本节中围绕解释器和字节码讨论的几个概念过于简单，仅部分正确，但它们足以帮助您理解</em> <code class="fe mp mq mr ms b"><em class="nf">pyc</em></code> <em class="nf">文件和</em> <code class="fe mp mq mr ms b"><em class="nf">__pycache__</em></code> <em class="nf">文件夹。我计划在以后的文章中更详细地介绍这些概念。</em></p></div><div class="ab cl my mz hy na" role="separator"><span class="nb bw bk nc nd ne"/><span class="nb bw bk nc nd ne"/><span class="nb bw bk nc nd"/></div><div class="in io ip iq ir"><p id="824c" class="pw-post-body-paragraph lw lx iu ly b lz mt jv mb mc mu jy me lj mv mg mh ln mw mj mk lr mx mm mn mo in bi translated">因此，在第一次执行您的源代码之后，将会创建一个<code class="fe mp mq mr ms b">__pycache__</code>文件夹，其中包含几个与您的<code class="fe mp mq mr ms b">.py</code>文件同名的<code class="fe mp mq mr ms b">.pyc</code>字节码文件。如上所述，这些将在后续执行中使用，以便您的程序启动得更快一些。</p><p id="d93b" class="pw-post-body-paragraph lw lx iu ly b lz mt jv mb mc mu jy me lj mv mg mh ln mw mj mk lr mx mm mn mo in bi translated">每次修改源代码时，都会重新编译，并再次创建新的字节码文件。请注意，在某些情况下，这可能不是真的，Python 将使用缓存文件执行代码，这给你带来了一些麻烦。例如，您可能已经修复了一个 bug，但是 Python 可能运行在一个有 bug 的缓存版本上。在这种情况下，您可能必须删除<code class="fe mp mq mr ms b">__pycache__</code>文件夹，或者甚至禁止创建这些文件，如下节所示。</p></div><div class="ab cl my mz hy na" role="separator"><span class="nb bw bk nc nd ne"/><span class="nb bw bk nc nd ne"/><span class="nb bw bk nc nd"/></div><div class="in io ip iq ir"><h2 id="cb6f" class="la lb iu bd lc ld le dn lf lg lh dp li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">禁止创建 __pycache__</h2><p id="d8d1" class="pw-post-body-paragraph lw lx iu ly b lz ma jv mb mc md jy me lj mf mg mh ln mi mj mk lr ml mm mn mo in bi translated">当使用 CPython 解释器(不管怎样，它是 Python 的原始实现)时，您可以通过两种方式禁止创建该文件夹。</p><p id="b14c" class="pw-post-body-paragraph lw lx iu ly b lz mt jv mb mc mu jy me lj mv mg mh ln mw mj mk lr mx mm mn mo in bi translated">第一个选项是在运行 Python 文件时传递<code class="fe mp mq mr ms b">-B</code>标志。当提供该标志时，Python 不会试图在导入源模块时写入<code class="fe mp mq mr ms b">.pyc</code>文件:</p><pre class="kk kl km kn gu ng ms nh ni aw nj bi"><span id="5888" class="la lb iu ms b gz nk nl l nm nn"><strong class="ms iv">python3 -B my_python_app.py</strong></span></pre><p id="ee2a" class="pw-post-body-paragraph lw lx iu ly b lz mt jv mb mc mu jy me lj mv mg mh ln mw mj mk lr mx mm mn mo in bi translated">或者，您可以将<code class="fe mp mq mr ms b">PYTHONDONTWRITEBYTECODE</code>环境变量设置为任何非空字符串。同样，这将阻止 Python 试图写<code class="fe mp mq mr ms b">.pyc</code>文件。</p><pre class="kk kl km kn gu ng ms nh ni aw nj bi"><span id="6d92" class="la lb iu ms b gz nk nl l nm nn"><strong class="ms iv">export PYTHONDONTWRITEBYTECODE=abc</strong></span></pre><p id="4dde" class="pw-post-body-paragraph lw lx iu ly b lz mt jv mb mc mu jy me lj mv mg mh ln mw mj mk lr mx mm mn mo in bi translated">请注意，这两种方法是等效的。</p></div><div class="ab cl my mz hy na" role="separator"><span class="nb bw bk nc nd ne"/><span class="nb bw bk nc nd ne"/><span class="nb bw bk nc nd"/></div><div class="in io ip iq ir"><h2 id="5d0f" class="la lb iu bd lc ld le dn lf lg lh dp li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">正在将 __pycache__ 添加到。gitignore 文件</h2><p id="dc76" class="pw-post-body-paragraph lw lx iu ly b lz ma jv mb mc md jy me lj mf mg mh ln mi mj mk lr ml mm mn mo in bi translated">当在本地存储库中工作时，Git 将跟踪 Git repo 下的每个文件。每个文件都可以被<strong class="ly iv">跟踪</strong>(即已经暂存并提交)<strong class="ly iv">未跟踪</strong>(未暂存或提交)或<strong class="ly iv">忽略</strong>。</p><p id="35b0" class="pw-post-body-paragraph lw lx iu ly b lz mt jv mb mc mu jy me lj mv mg mh ln mw mj mk lr mx mm mn mo in bi translated">在大多数情况下，您应该忽略特定的文件，例如包含敏感数据的文件、特定于系统的文件或由 IDE 或特定工作区创建的自动生成的文件。</p><p id="bcb1" class="pw-post-body-paragraph lw lx iu ly b lz mt jv mb mc mu jy me lj mv mg mh ln mw mj mk lr mx mm mn mo in bi translated">最优雅的方式是通过位于远程 Git 存储库顶层目录中的<code class="fe mp mq mr ms b">.gitignore</code>文件，在该文件中，您可以显式指定 Git 将忽略并且不再跟踪的文件或目录(也可以应用正则表达式)。</p><p id="d815" class="pw-post-body-paragraph lw lx iu ly b lz mt jv mb mc mu jy me lj mv mg mh ln mw mj mk lr mx mm mn mo in bi translated"><code class="fe mp mq mr ms b">__pycache__</code>是不应该推送到远程存储库的目录之一。因此，您需要做的就是在<code class="fe mp mq mr ms b">.gitignore</code>文件中指定目录。</p><pre class="kk kl km kn gu ng ms nh ni aw nj bi"><span id="c7f6" class="la lb iu ms b gz nk nl l nm nn"># .gitignore</span><span id="0383" class="la lb iu ms b gz no nl l nm nn">__pycache__/</span></pre><p id="d22e" class="pw-post-body-paragraph lw lx iu ly b lz mt jv mb mc mu jy me lj mv mg mh ln mw mj mk lr mx mm mn mo in bi translated">注意，对于一般的 Python 项目，有更多的文件需要放入<code class="fe mp mq mr ms b">.gitignore</code>。更全面的列表，请参考本文件。</p></div><div class="ab cl my mz hy na" role="separator"><span class="nb bw bk nc nd ne"/><span class="nb bw bk nc nd ne"/><span class="nb bw bk nc nd"/></div><div class="in io ip iq ir"><h2 id="78f3" class="la lb iu bd lc ld le dn lf lg lh dp li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">最后的想法</h2><p id="f311" class="pw-post-body-paragraph lw lx iu ly b lz ma jv mb mc md jy me lj mf mg mh ln mi mj mk lr ml mm mn mo in bi translated">在今天的文章中，我们讨论了在<code class="fe mp mq mr ms b">.pyc</code>文件中缓存的字节码，以及它们和<code class="fe mp mq mr ms b">__pycache__</code>目录的用途。此外，我们探讨了如何抑制这个目录的创建，以及如何避免将它们包含在 Git 提交中(从而意外地将它们推送到远程存储库)。</p><p id="39e5" class="pw-post-body-paragraph lw lx iu ly b lz mt jv mb mc mu jy me lj mv mg mh ln mw mj mk lr mx mm mn mo in bi translated"><em class="nf">关于字节码的一个重要警告是，</em> <code class="fe mp mq mr ms b"><em class="nf">.pyc</em></code> <em class="nf">文件将在对等的</em> <code class="fe mp mq mr ms b"><em class="nf">.py</em></code> <em class="nf">文件不再存在的情况下使用。例如，如果您删除或重命名了一个</em> <code class="fe mp mq mr ms b"><em class="nf">.py</em></code> <em class="nf">文件，但出于某种原因，您仍然可以看到它们以任何可能的方式被执行，那么这可能是实际原因。</em></p></div><div class="ab cl my mz hy na" role="separator"><span class="nb bw bk nc nd ne"/><span class="nb bw bk nc nd ne"/><span class="nb bw bk nc nd"/></div><div class="in io ip iq ir"><p id="1b77" class="pw-post-body-paragraph lw lx iu ly b lz mt jv mb mc mu jy me lj mv mg mh ln mw mj mk lr mx mm mn mo in bi translated"><a class="ae kz" href="https://gmyrianthous.medium.com/membership" rel="noopener"> <strong class="ly iv">成为会员</strong> </a> <strong class="ly iv">阅读介质上的每一个故事。你的会员费直接支持我和你看的其他作家。你也可以在媒体上看到所有的故事。</strong></p><div class="np nq gq gs nr ns"><a href="https://gmyrianthous.medium.com/membership" rel="noopener follow" target="_blank"><div class="nt ab fp"><div class="nu ab nv cl cj nw"><h2 class="bd iv gz z fq nx fs ft ny fv fx it bi translated">通过我的推荐链接加入 Medium-Giorgos Myrianthous</h2><div class="nz l"><h3 class="bd b gz z fq nx fs ft ny fv fx dk translated">作为一个媒体会员，你的会员费的一部分会给你阅读的作家，你可以完全接触到每一个故事…</h3></div><div class="oa l"><p class="bd b dl z fq nx fs ft ny fv fx dk translated">gmyrianthous.medium.com</p></div></div><div class="ob l"><div class="oc l od oe of ob og kt ns"/></div></div></a></div></div><div class="ab cl my mz hy na" role="separator"><span class="nb bw bk nc nd ne"/><span class="nb bw bk nc nd ne"/><span class="nb bw bk nc nd"/></div><div class="in io ip iq ir"><p id="676e" class="pw-post-body-paragraph lw lx iu ly b lz mt jv mb mc mu jy me lj mv mg mh ln mw mj mk lr mx mm mn mo in bi translated"><strong class="ly iv">你可能也会喜欢</strong></p><div class="np nq gq gs nr ns"><a rel="noopener follow" target="_blank" href="/python-linked-lists-c3622205da81"><div class="nt ab fp"><div class="nu ab nv cl cj nw"><h2 class="bd iv gz z fq nx fs ft ny fv fx it bi translated">如何在 Python 中实现链表</h2><div class="nz l"><h3 class="bd b gz z fq nx fs ft ny fv fx dk translated">探索如何使用 Python 从头开始编写链表和节点对象</h3></div><div class="oa l"><p class="bd b dl z fq nx fs ft ny fv fx dk translated">towardsdatascience.com</p></div></div><div class="ob l"><div class="oh l od oe of ob og kt ns"/></div></div></a></div></div><div class="ab cl my mz hy na" role="separator"><span class="nb bw bk nc nd ne"/><span class="nb bw bk nc nd ne"/><span class="nb bw bk nc nd"/></div><div class="in io ip iq ir"><div class="kk kl km kn gu ns"><a rel="noopener follow" target="_blank" href="/python-iterables-vs-iterators-688907fd755f"><div class="nt ab fp"><div class="nu ab nv cl cj nw"><h2 class="bd iv gz z fq nx fs ft ny fv fx it bi translated">Python 中的 Iterables vs 迭代器</h2><div class="nz l"><h3 class="bd b gz z fq nx fs ft ny fv fx dk translated">理解 Python 中 Iterables 和迭代器的区别</h3></div><div class="oa l"><p class="bd b dl z fq nx fs ft ny fv fx dk translated">towardsdatascience.com</p></div></div><div class="ob l"><div class="oi l od oe of ob og kt ns"/></div></div></a></div></div><div class="ab cl my mz hy na" role="separator"><span class="nb bw bk nc nd ne"/><span class="nb bw bk nc nd ne"/><span class="nb bw bk nc nd"/></div><div class="in io ip iq ir"><div class="kk kl km kn gu ns"><a rel="noopener follow" target="_blank" href="/duck-typing-python-7aeac97e11f8"><div class="nt ab fp"><div class="nu ab nv cl cj nw"><h2 class="bd iv gz z fq nx fs ft ny fv fx it bi translated">Python 中的鸭式打字是什么？</h2><div class="nz l"><h3 class="bd b gz z fq nx fs ft ny fv fx dk translated">理解动态类型编程语言(如 Python)中鸭类型的概念</h3></div><div class="oa l"><p class="bd b dl z fq nx fs ft ny fv fx dk translated">towardsdatascience.com</p></div></div><div class="ob l"><div class="oj l od oe of ob og kt ns"/></div></div></a></div></div></div>    
</body>
</html>