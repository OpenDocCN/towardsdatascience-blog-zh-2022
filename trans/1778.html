<html>
<head>
<title>7 Ways to Improve Performance of Your Data Warehouse</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">提高数据仓库性能的7种方法</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/7-ways-to-improve-performance-of-your-data-warehouse-4544456bcc3#2022-04-26">https://towardsdatascience.com/7-ways-to-improve-performance-of-your-data-warehouse-4544456bcc3#2022-04-26</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="fb52" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">通过应用以下步骤来改善数据仓库的低性能</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/fdc516314284eb539c3461df5d2c377a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*Th0kSqxgWXhWvIdT"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">哈雷戴维森在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</p></figure><p id="02c4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi lv translated"><span class="l lw lx ly bm lz ma mb mc md di"> P </span> oor性能是数据仓库(DWH)名声不佳的主要原因之一。无论何时交付DWH，都应该有一个性能改进策略。这确保了DWH保持相关性，并按时满足业务最终用户的要求。</p><p id="9b71" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">通常，缓慢的DWH会产生多种下游影响，例如不完整的批处理作业导致缺少报告，或者仪表板加载缓慢导致用户沮丧。最糟糕的是，当这种情况持续几周甚至几个月，而没有采取任何措施来改善这种情况时，随着时间的推移，最终用户的信心会受到侵蚀。</p><p id="d6f3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们确保我们不会成为DWH死亡的原因。今天，我们将学习提高DWH表现的七种方法。</p></div><div class="ab cl me mf hx mg" role="separator"><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj"/></div><div class="im in io ip iq"><h2 id="22f4" class="ml mm it bd mn mo mp dn mq mr ms dp mt li mu mv mw lm mx my mz lq na nb nc nd bi translated">1.索引</h2><p id="9cb0" class="pw-post-body-paragraph kz la it lb b lc ne ju le lf nf jx lh li ng lk ll lm nh lo lp lq ni ls lt lu im bi translated">想象一下，走进一家超市买糖；你会看到10个不同的过道，没有标签或指示。你必须扫描整个超市才能找到商品。你可能会幸运地在第一个过道找到它，或者非常不幸地在第十个过道的最后一个架子上找到它。</p><p id="f301" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">添加一些搜索功能或索引可以大大提高您更快找到您的项目的机会。索引将给定列中的值存储在可搜索的结构中，这允许查询读取更少的数据来查找信息。</p><p id="1203" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">例如，一个包含1000行人名的表，主键为，没有索引，每次在WHERE子句中搜索名字时，都需要对整个表进行扫描。然而，如果索引被添加到主键列<em class="nj">和名字列</em>中，那么搜索标准是严格的。这减少了查询所需的读取次数，从而减少了获取信息的时间。</p><p id="a1a1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然而，并不是所有的阳光和彩虹都有索引。它们有开销，索引太多会降低DWH的插入和更新操作的速度。同样，给超市里的所有东西贴上标签会减缓货架的堆叠过程。</p></div><div class="ab cl me mf hx mg" role="separator"><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj"/></div><div class="im in io ip iq"><h2 id="525b" class="ml mm it bd mn mo mp dn mq mr ms dp mt li mu mv mw lm mx my mz lq na nb nc nd bi translated">2.压缩</h2><p id="7795" class="pw-post-body-paragraph kz la it lb b lc ne ju le lf nf jx lh li ng lk ll lm nh lo lp lq ni ls lt lu im bi translated">现代云DWH像红移使用自动编码/压缩，所以你可能必须配置它。传统上，压缩通过减少冗余/重复数据值来帮助节省大量磁盘空间。</p><p id="f1ed" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">例如，假设您已在DWH上设置了变更数据捕获，并对未结记录使用高端日期，如“31/12/9999”。您可以将该日期值压缩为一条记录。其余的记录可以用价值2位的非常经济的替代值来引用。这使您不必在磁盘上重复存储上述日期。</p><p id="07b2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果您不知道变更数据捕获的各种方法，请查看下面的文章:</p><div class="nk nl gp gr nm nn"><a href="https://medium.com/geekculture/6-different-types-of-slowly-changing-dimensions-and-how-to-apply-them-b152ef908d4e" rel="noopener follow" target="_blank"><div class="no ab fo"><div class="np ab nq cl cj nr"><h2 class="bd iu gy z fp ns fr fs nt fu fw is bi translated">6种不同类型的缓变维度以及如何应用？</h2><div class="nu l"><h3 class="bd b gy z fp ns fr fs nt fu fw dk translated">在此了解如何最好地应用这些历史维护方法</h3></div><div class="nv l"><p class="bd b dl z fp ns fr fs nt fu fw dk translated">medium.com</p></div></div><div class="nw l"><div class="nx l ny nz oa nw ob ks nn"/></div></div></a></div><p id="b360" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">除了多值压缩，最好还进行行值压缩。如果有一行只是“Y”和“N”的值，并且数据类型是Char(1000)，那么所有这些字节都没有用。压缩它可以节省大量的磁盘空间，而不会影响查询的输出。</p><p id="6f24" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">请注意，并非所有的行和列都可以或应该被压缩，因为它们可能会对正常功能产生意外影响。建议不要压缩使用行级安全性的主键列或行。</p></div><div class="ab cl me mf hx mg" role="separator"><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj"/></div><div class="im in io ip iq"><h2 id="2c12" class="ml mm it bd mn mo mp dn mq mr ms dp mt li mu mv mw lm mx my mz lq na nb nc nd bi translated">3.收集统计数据</h2><p id="8867" class="pw-post-body-paragraph kz la it lb b lc ne ju le lf nf jx lh li ng lk ll lm nh lo lp lq ni ls lt lu im bi translated">收集统计信息是一种帮助DWH以最佳方式形成执行计划的方法，有助于提高查询的性能。收集统计数据的最常见过程是在ETL作业完成后立即进行。随着新数据进入DWH，拥有特定表的最新统计信息有助于所有后续查询及其执行计划。</p><p id="bfe0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">收集经常用于下游连接、聚合或排序的列的统计数据是非常重要的。此外，有时，拥有陈旧的统计数据比没有统计数据更糟糕。这意味着不准确的表统计可能会导致较差的查询执行计划。所以要保持这些数据的更新。</p><p id="caef" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">像索引和其他性能技术这样的统计数据收集也有全表扫描的开销；有一些创建样本统计数据的方法可以减轻这种负担，帮助保持统计数据的新鲜。</p></div><div class="ab cl me mf hx mg" role="separator"><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj"/></div><div class="im in io ip iq"><h2 id="17c2" class="ml mm it bd mn mo mp dn mq mr ms dp mt li mu mv mw lm mx my mz lq na nb nc nd bi translated">4.创建构建基块和视图</h2><p id="73be" class="pw-post-body-paragraph kz la it lb b lc ne ju le lf nf jx lh li ng lk ll lm nh lo lp lq ni ls lt lu im bi translated">建议不要直接转到底层数据表，而是在构建块或视图中对最常用的查询执行一些预聚合。这有助于快速获得信息，而不必反复查询同一个表。</p><p id="2f92" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">即使如此，视图仍然会查询基础表；聚集索引视图将临时存储所需的信息，从而加快查询响应速度。取决于DWH的设置(高度标准化等。)，可能需要构建模块来帮助获得最终答案。</p><p id="4ed0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">占据磁盘空间的物化视图可以作为普通聚合的替代方案。它将减少所需的数据量，并允许快速检索相同的常见聚合查询。</p><blockquote class="oc"><p id="b87b" class="od oe it bd of og oh oi oj ok ol lu dk translated">有101种错误编写查询的方式，只有少数几种可以优化</p></blockquote></div><div class="ab cl me mf hx mg" role="separator"><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj"/></div><div class="im in io ip iq"><h2 id="cefe" class="ml mm it bd mn mo mp dn mq mr ms dp mt li mu mv mw lm mx my mz lq na nb nc nd bi translated">5.分区和分片</h2><p id="7e7a" class="pw-post-body-paragraph kz la it lb b lc ne ju le lf nf jx lh li ng lk ll lm nh lo lp lq ni ls lt lu im bi translated">分区是在逻辑上将大表分成更小的、可管理的块。因为表现在是更小的块，所以整个查询运行得更快，因为它需要扫描的数据更少。</p><p id="8ebb" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">分区，也称为“垂直分区”，或可归类为数据的规范化，是一种垂直划分数据表的方法，如下所示:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi om"><img src="../Images/e947520824b123e6cc14c87208d7638b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1064/format:webp/1*vVRMlhnLVVDvJxWUeCdY4g.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片:垂直分割</p></figure><p id="992e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">水平分区，也称为“分片”，将数据水平划分，通常位于不同的数据库实例上，这降低了单台服务器的性能压力。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi on"><img src="../Images/ea0a827b456602b0da981404d0a48c33.png" data-original-src="https://miro.medium.com/v2/resize:fit:1242/format:webp/1*UQi2bsYKzzuKHv4WWkEW1A.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片:水平分割</p></figure><p id="9ecc" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">记得索引吗？分区有助于减小表的大小，进而减小索引的大小，这进一步加快了DWH操作的速度。但是，分区也增加了查询的复杂性，并增加了管理更多数据表的开销，尤其是备份。因此，在开始分片之前，尝试一些其他的性能技术。</p></div><div class="ab cl me mf hx mg" role="separator"><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj"/></div><div class="im in io ip iq"><h2 id="73c6" class="ml mm it bd mn mo mp dn mq mr ms dp mt li mu mv mw lm mx my mz lq na nb nc nd bi translated">6.查询优化</h2><p id="bbf1" class="pw-post-body-paragraph kz la it lb b lc ne ju le lf nf jx lh li ng lk ll lm nh lo lp lq ni ls lt lu im bi translated">坦率地说，没有什么性能改进可以替代写得很差的查询。有101种错误编写查询的方式，只有少数几种可以优化。</p><p id="0bb2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">学习查询构建和执行计划的基础知识是编写最佳查询的一种极好的方式。如今，有了更复杂的ETL工具，查询直接由工具本身编写。然而，在我看来，查询优化的强大知识是无可替代的。</p><p id="36ca" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">例如，不使用SELECT *，避免复杂的连接，使用LIMIT返回有限数量的行，在WHERE子句中使用索引列等。，是一些优化查询的方法。</p><p id="5384" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">您选择的DWH技术中的执行计划也将为提高查询性能提供有价值的见解。</p></div><div class="ab cl me mf hx mg" role="separator"><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj"/></div><div class="im in io ip iq"><h2 id="fffa" class="ml mm it bd mn mo mp dn mq mr ms dp mt li mu mv mw lm mx my mz lq na nb nc nd bi translated">7.数据最小化</h2><p id="d064" class="pw-post-body-paragraph kz la it lb b lc ne ju le lf nf jx lh li ng lk ll lm nh lo lp lq ni ls lt lu im bi translated">这是一个不寻常的问题，但在今天这个数据伦理和隐私的时代却很重要。问问你自己，你是否需要所有这些数据来回答你的关键业务问题。由于数据湖的廉价存储和使用，该行业正处于数据昏迷状态。</p><p id="4ea6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">消费者的每一个举动都会被跟踪、记录和存储。除了不道德之外，这也是一项巨大的责任，因为这些信息需要根据您所在地区的相关法规进行处理。那么，你能在不存储每一位数据的情况下生存吗？如果可以，你能清除这些数据或者不收集这些数据吗？</p><p id="7961" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这将减少你拥有的数据量，降低存储数据的开销，使这个行业更具可持续性。</p></div><div class="ab cl me mf hx mg" role="separator"><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj"/></div><div class="im in io ip iq"><h2 id="1b2b" class="ml mm it bd mn mo mp dn mq mr ms dp mt li mu mv mw lm mx my mz lq na nb nc nd bi translated">结论</h2><p id="b6c7" class="pw-post-body-paragraph kz la it lb b lc ne ju le lf nf jx lh li ng lk ll lm nh lo lp lq ni ls lt lu im bi translated">这些是帮助你加快DWH的一些关键技术。尝试一次实施一种方法，定期微调你的DWH绩效策略。</p><p id="da7a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果你觉得这篇文章有帮助，请在下面留言告诉我。查看我在Medium上的其他帖子:</p><div class="nk nl gp gr nm nn"><a rel="noopener follow" target="_blank" href="/how-to-create-a-data-warehouse-in-5-important-steps-95a8f893a3fd"><div class="no ab fo"><div class="np ab nq cl cj nr"><h2 class="bd iu gy z fp ns fr fs nt fu fw is bi translated">如何通过5个重要步骤创建数据仓库</h2><div class="nu l"><h3 class="bd b gy z fp ns fr fs nt fu fw dk translated">任何数据仓库项目中需要的5个重要步骤</h3></div><div class="nv l"><p class="bd b dl z fp ns fr fs nt fu fw dk translated">towardsdatascience.com</p></div></div><div class="nw l"><div class="oo l ny nz oa nw ob ks nn"/></div></div></a></div><p id="28c3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果您没有订阅Medium，请考虑使用我的推荐链接订阅<a class="ae ky" href="https://hanzalaqureshi.medium.com/membership" rel="noopener">。它比网飞便宜，而且客观上能更好地利用你的时间。</a>如果你使用我的链接，我会获得一小笔佣金，而你可以在Medium上获得无限的故事。</p><p id="c670" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我也定期在推特上写东西；跟着<a class="ae ky" href="https://twitter.com/hanzalaqureshi_" rel="noopener ugc nofollow" target="_blank">我这里</a>。</p></div></div>    
</body>
</html>