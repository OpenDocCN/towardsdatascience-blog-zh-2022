<html>
<head>
<title>Building a Dataset of Tweets Where You’re Mentioned Using Tweepy</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用Tweepy建立一个你被提到的推特数据集</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/building-a-dataset-of-tweets-where-youre-mentioned-using-tweepy-182106d5dcef#2022-10-31">https://towardsdatascience.com/building-a-dataset-of-tweets-where-youre-mentioned-using-tweepy-182106d5dcef#2022-10-31</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="2d39" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">使用Twitter API构建数据集的简单方法</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/ad9d5d5eba70e6d3bbce2e4ce2db1b2c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0kCz7DqulWNSqHF8jIFoWQ.jpeg"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">克劳迪奥·施瓦兹在<a class="ae kv" href="https://unsplash.com/s/photos/twitter?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</p></figure><p id="9f97" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">对于许多公司来说，分析人们提到你公司手柄的推文是很有趣的。这些数据可用于识别客户经常向公司询问的反馈主题和问题。当我们理解了关键主题，我们就可以制定行动计划，从一开始就防止问题的发生。</p><p id="7cc5" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">Tweepy是一个允许更容易与Twitter API交互的包。在这篇文章中，我将介绍如何在Twitter开发者平台上设置自己，并使用Tweepy来抓取任何提到你的句柄的推文。</p><p id="3716" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">首先，Twitter发布了不同术语的定义，理解这一点很重要，因为它规定了我们如何调用API。</p><h2 id="d1c3" class="ls lt iq bd lu lv lw dn lx ly lz dp ma lf mb mc md lj me mf mg ln mh mi mj mk bi translated">定义(推特，2022年)</h2><p id="963b" class="pw-post-body-paragraph kw kx iq ky b kz ml jr lb lc mm ju le lf mn lh li lj mo ll lm ln mp lp lq lr ij bi translated"><strong class="ky ir"> Tweets: </strong>发布到Twitter上的消息，包含文本、照片、GIF和/或视频。</p><p id="db9b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir">提及:</strong>包含另一个账户的Twitter用户名的推文，前面有“@”符号。比如:“Hello @TwitterSupport！”</p><p id="3fa9" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">回复:回复是指你回复另一个人的推文。</p><p id="69cf" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们希望被提及，因为我们希望了解客户对我们的评价。</p><h1 id="51ee" class="mq lt iq bd lu mr ms mt lx mu mv mw ma jw mx jx md jz my ka mg kc mz kd mj na bi translated">在Twitter developer上设置</h1><p id="3824" class="pw-post-body-paragraph kw kx iq ky b kz ml jr lb lc mm ju le lf mn lh li lj mo ll lm ln mp lp lq lr ij bi translated">最大的挑战是在Twitter开发者平台上建立和验证你自己。在这之后——非常简单。</p><p id="a35e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">去twitter开发者门户:<a class="ae kv" href="https://developer.twitter.com/en" rel="noopener ugc nofollow" target="_blank">https://developer.twitter.com/en</a>注册。</p><p id="e038" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">你需要填写一些基本的细节，并验证你的电子邮件。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nb"><img src="../Images/c2bd12a13795a292012c0edb2ae5838a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8fYKZUnyLxcoaN0SWHMrPw.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">作者图片</p></figure><p id="beab" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">然后你将建立一个项目</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nc"><img src="../Images/ae1216659b0fcbf5a1095e29d1328222.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9KKIuH7i1YO4bRCtfspsWA.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">作者图片</p></figure><p id="0135" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">你有了项目之后，Twitter会给你提供API_key和API_key_secret。这两个都很重要，所以一定要保存好。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nd"><img src="../Images/cc00351ac75cea3eab1ebc7585fa0229.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WrHkfzKhZynJkmHoQWx-6w.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">作者图片</p></figure><p id="01ef" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">接下来，您需要设置高架通道。这在你的项目页面上。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ne"><img src="../Images/ef9d70746712427d31023025ba1aca8c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*nVoJvfE8oHmqeOOJP5UeDw.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">作者图片</p></figure><p id="f00d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">他们会要求您确认一些基本的个人信息，然后您必须回答为什么要增强访问权限。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nf"><img src="../Images/49feeebd45ea65f43bf3eb55d90e75a6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*eKtqCzCtoUS5upTVSI9v1Q.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">作者图片</p></figure><p id="8957" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">最后，你必须同意条款和条件，然后你的申请将被审查。我的是即时的，但我听说可能需要几天。</p><p id="40b1" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在您已获得提升的访问权限，您需要对您的应用程序启用身份验证。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ng"><img src="../Images/91ca8cf56cbd88f085bdad47ba3ff3f6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*iqhku-txJXmIfq5BvUrs1g.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">作者图片</p></figure><p id="92c9" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">你的app需要有读写权限，我选了native app。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nh"><img src="../Images/9215621af74e54f2baf6bf0544654b47.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bJS6KNjHd_s6_zNp742XfA.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">作者图片</p></figure><p id="29d9" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">Twitter请求一个回拨URI和一个网站URL——这些对于您在本地运行的分析来说似乎是有问题的。对于回拨URI，您可以使用:<a class="ae kv" href="http://127.0.0.1/return" rel="noopener ugc nofollow" target="_blank"> http://127.0.0.1/return </a>并使用任何网站作为网站URL。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ni"><img src="../Images/07902572943fb9506a17cbe39a899579.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-txS3J36q86M6bmY7HXP_A.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">作者图片</p></figure><p id="dde3" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">然后我们需要得到我们需要的最后两组凭证；访问令牌和访问令牌密码。</p><p id="89b6" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">转到应用程序中的密钥和令牌，生成访问令牌并将其保存在本地。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nj"><img src="../Images/ee74c5644235c11aa80a044521bce936.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*L0uMzhdl4Erm1qmPCDIfWg.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">作者图片</p></figure><p id="e317" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们需要用四样东西来证明自己:</p><ol class=""><li id="d2cd" class="nk nl iq ky b kz la lc ld lf nm lj nn ln no lr np nq nr ns bi translated">api_key</li><li id="54df" class="nk nl iq ky b kz nt lc nu lf nv lj nw ln nx lr np nq nr ns bi translated">api _密钥_机密</li><li id="9ebc" class="nk nl iq ky b kz nt lc nu lf nv lj nw ln nx lr np nq nr ns bi translated">访问令牌</li><li id="748f" class="nk nl iq ky b kz nt lc nu lf nv lj nw ln nx lr np nq nr ns bi translated">访问令牌密码</li></ol><p id="467b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们现在有了所有四个项目，所以我们可以开始使用Tweepy来收集我们的提及。</p><h1 id="38d7" class="mq lt iq bd lu mr ms mt lx mu mv mw ma jw mx jx md jz my ka mg kc mz kd mj na bi translated">使用Tweepy连接到Twitter API</h1><p id="56f1" class="pw-post-body-paragraph kw kx iq ky b kz ml jr lb lc mm ju le lf mn lh li lj mo ll lm ln mp lp lq lr ij bi translated">首先，确保安装了tweepy包。</p><p id="36b4" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">然后导入包:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ny nz l"/></div></figure><p id="17f7" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">接下来，我们需要使用我们之前生成的令牌来验证我们自己。我制作了虚拟密钥，以避免让你们访问我的twitter账户。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ny nz l"/></div></figure><p id="f119" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们使用以下代码初始化身份验证对象，然后设置访问令牌。最后，我们使用认证对象初始化API。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ny nz l"/></div></figure><p id="e8c2" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">要获得提到我们句柄的tweets，我们需要使用API中的‘mentions _ timeline’。“count”参数决定返回多少条推文。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ny nz l"/></div></figure><p id="2b3e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">它的输出是一个JSON文件。我们只对tweet的文本感兴趣，所以我们遍历包含数据的JSON对象，只打印出文本元素。</p><p id="b002" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">完整的代码在我的<a class="ae kv" href="https://github.com/charlotteamy/nlp/tree/main" rel="noopener ugc nofollow" target="_blank"> github </a>里。</p><h1 id="de69" class="mq lt iq bd lu mr ms mt lx mu mv mw ma jw mx jx md jz my ka mg kc mz kd mj na bi translated">结论</h1><p id="f5e7" class="pw-post-body-paragraph kw kx iq ky b kz ml jr lb lc mm ju le lf mn lh li lj mo ll lm ln mp lp lq lr ij bi translated">Twitter API是自然语言处理(NLP)数据集的优秀资源，然而直接调用它可能具有挑战性。Tweepy提供了一个软件包，可以更容易地获取您需要的数据，因此您可以继续为业务提供见解。在这个例子中，我想获得提及，但Tweepy允许您获得自己的推文，特定用户的推文，甚至通过关注/阻止用户来控制您的帐户。功能的完整列表可以在<a class="ae kv" href="https://docs.tweepy.org/en/stable/index.html" rel="noopener ugc nofollow" target="_blank">文档</a>中找到。</p><p id="6c17" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">作为替代，如果您的公司拥有Sprinklr(这是一个众所周知的社交媒体管理平台)的许可证，这提供了一个很好的前端来访问Twitter API，而不需要任何代码。</p><h1 id="3741" class="mq lt iq bd lu mr ms mt lx mu mv mw ma jw mx jx md jz my ka mg kc mz kd mj na bi translated">参考</h1><p id="bf08" class="pw-post-body-paragraph kw kx iq ky b kz ml jr lb lc mm ju le lf mn lh li lj mo ll lm ln mp lp lq lr ij bi translated">Twitter (2022) <em class="oa">关于不同类型的推文</em>。可在:<a class="ae kv" href="https://help.twitter.com/en/using-twitter/types-of-tweets" rel="noopener ugc nofollow" target="_blank">https://help.twitter.com/en/using-twitter/types-of-tweets</a>(访问时间:2022年10月26日)。</p><p id="cbff" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi">_________</p><p id="588f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我喜欢为商业用户写关于数据科学的文章，我热衷于使用数据来提供切实的商业利益。</p><p id="0c70" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">您可以通过LinkedIn 与我联系，并通过Medium关注我，了解我的最新文章。</p></div></div>    
</body>
</html>