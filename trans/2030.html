<html>
<head>
<title>How to install Miniconda x86_64 &amp; Apple M1 side by side on Mac Book M1</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在Mac Book M1上并排安装Miniconda x86_64和苹果M1</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/how-to-install-miniconda-x86-64-apple-m1-side-by-side-on-mac-book-m1-a476936bfaf0#2022-05-09">https://towardsdatascience.com/how-to-install-miniconda-x86-64-apple-m1-side-by-side-on-mac-book-m1-a476936bfaf0#2022-05-09</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="84bd" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">迷你康达x86_64 &amp;迷你康达苹果M1并排在Mac图书M1</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/8f07e31a8896a03e03336597d1983517.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vOTj6o5Ga270m_LzLO2XxA.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">PC:作者</p></figure><p id="d23c" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">如果你是一名使用苹果Mac M1的<em class="lu"> Python开发人员/ ML工程师/数据科学家</em>，你可能知道没有<em class="lu"> arm64 </em>项目依赖分布的痛苦🥲。一种解决方法是通过启用了<em class="lu"> rosetta2 </em>的终端使用包管理器，比如Anaconda3/Miniconda3。</p><p id="273d" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">但幸运的是，现在苹果M1得到了Anaconda的官方支持，你可以<a class="ae lv" href="https://docs.conda.io/en/latest/miniconda.html" rel="noopener ugc nofollow" target="_blank">下载</a>并用苹果的硅片为你的Mac安装Anaconda3/Miniconda3。但是作为一名ML工程师，我想保留Miniconda3的两种风格(x86_64 &amp;苹果M1 ),因为我正在为这两种架构进行产品开发。</p><h2 id="2fa9" class="lw lx it bd ly lz ma dn mb mc md dp me lh mf mg mh ll mi mj mk lp ml mm mn mo bi translated">如何让Miniconda3 x86_64 &amp; Miniconda3苹果M1并排，甚至有可能吗？</h2><p id="73c6" class="pw-post-body-paragraph ky kz it la b lb mp ju ld le mq jx lg lh mr lj lk ll ms ln lo lp mt lr ls lt im bi translated">答案是<strong class="la iu">“是的”</strong>，这花了我一些时间⏰想出一种便捷的方法。所以我决定把它写在这里，这样对很多像我一样的人会有用。</p><p id="9682" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated"><strong class="la iu">先决条件:</strong> Rosetta2使能端子。</p></div><div class="ab cl mu mv hx mw" role="separator"><span class="mx bw bk my mz na"/><span class="mx bw bk my mz na"/><span class="mx bw bk my mz"/></div><div class="im in io ip iq"><h2 id="a150" class="lw lx it bd ly lz ma dn mb mc md dp me lh mf mg mh ll mi mj mk lp ml mm mn mo bi translated"><strong class="ak">安装Miniconda3 x86_64 </strong></h2><p id="fc78" class="pw-post-body-paragraph ky kz it la b lb mp ju ld le mq jx lg lh mr lj lk ll ms ln lo lp mt lr ls lt im bi translated">打开启用rosetta2的终端，</p><ol class=""><li id="3b92" class="nb nc it la b lb lc le lf lh nd ll ne lp nf lt ng nh ni nj bi translated">检查您的终端是否支持rosetta2</li></ol><pre class="kj kk kl km gt nk nl nm nn aw no bi"><span id="0e24" class="lw lx it nl b gy np nq l nr ns">$ uname -m<br/>x86_64</span></pre><p id="c8c6" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">如果你得到<code class="fe nt nu nv nl b">x86_64</code>，那么你在一个rosetta2使能的终端上</p><p id="72ec" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">2.下载Miniconda3 x86_64 bash安装程序</p><pre class="kj kk kl km gt nk nl nm nn aw no bi"><span id="4ddc" class="lw lx it nl b gy np nq l nr ns">$ wget <a class="ae lv" href="https://repo.anaconda.com/miniconda/Miniconda3-latest-MacOSX-x86_64.sh" rel="noopener ugc nofollow" target="_blank">https://repo.anaconda.com/miniconda/Miniconda3-latest-MacOSX-x86_64.sh</a></span></pre><p id="ca13" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">3.运行安装程序</p><pre class="kj kk kl km gt nk nl nm nn aw no bi"><span id="e219" class="lw lx it nl b gy np nq l nr ns">$ sh ./Miniconda3-latest-MacOSX-x86_64.sh</span></pre><p id="c143" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">4.它会提示一个审查许可协议，按<strong class="la iu">键<em class="lu">输入</em>键</strong>继续</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nw"><img src="../Images/0ddf7a6cf0ddcd3e9281cff533ce67e0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1138/format:webp/1*iEgjcDeXCpK668FT9C6o2Q.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">PC:作者</p></figure><p id="575a" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">5.然后继续按回车键，直到你得到下面的提示。一旦你得到它，输入<strong class="la iu"> <em class="lu"> yes </em> </strong>并按<strong class="la iu"> <em class="lu">回车</em> </strong>继续</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nw"><img src="../Images/9d502d5ecacd0929a9be92a0d91a948f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1138/format:webp/1*99gPtoNVWdHzTY8jSgRAhg.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">PC:作者</p></figure><p id="99df" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">6.接下来，它会提示您安装路径</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nw"><img src="../Images/54f86643fb1bbc06f54a8d5ef7be15e4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1138/format:webp/1*DCZ-Q-i_ye1M6Br85cY1Hg.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">PC:作者</p></figure><p id="b5a7" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">在这里键入<code class="fe nt nu nv nl b">/Users/[your user name]/miniconda3-intel</code>`(让我们把这个路径称为<strong class="la iu"> Miniconda x86_64路径</strong>)或者您喜欢的任何路径，主要思想是您应该保留Miniconda Apple M1的默认安装路径(只是为了区分两个安装)</p><p id="9764" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">7.它将下载基本包并在指定路径安装Miniconda x86_64。一旦完成，就会提示是否运行<code class="fe nt nu nv nl b">conda init.</code></p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nw"><img src="../Images/1a28af74429f1bd6e00128a14a0c525a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1138/format:webp/1*zccK-7Uyld2pvsZ8zxbGbw.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">PC:作者</p></figure><p id="65fe" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">当你得到这个提示时，输入<strong class="la iu"> <em class="lu"> no </em> </strong>并按下<strong class="la iu"> <em class="lu">进入</em>。我们不想给你的终端启动脚本添加conda初始化器(例如<code class="fe nt nu nv nl b">.bashrc</code>或<code class="fe nt nu nv nl b">.zshrc</code>或其他)</strong></p><p id="167c" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">现在我们已经成功安装了Miniconda3 x86_64。接下来，我们需要以同样的方式安装迷你康达苹果M1，除了一些变化。</p></div><div class="ab cl mu mv hx mw" role="separator"><span class="mx bw bk my mz na"/><span class="mx bw bk my mz na"/><span class="mx bw bk my mz"/></div><div class="im in io ip iq"><h2 id="60b9" class="lw lx it bd ly lz ma dn mb mc md dp me lh mf mg mh ll mi mj mk lp ml mm mn mo bi translated"><strong class="ak">安装Miniconda3苹果M1 </strong></h2><p id="3316" class="pw-post-body-paragraph ky kz it la b lb mp ju ld le mq jx lg lh mr lj lk ll ms ln lo lp mt lr ls lt im bi translated">打开一个终端(没有rosetta2的终端)</p><ol class=""><li id="338a" class="nb nc it la b lb lc le lf lh nd ll ne lp nf lt ng nh ni nj bi translated">检查您的终端是否未启用rosetta2(默认M1终端)</li></ol><pre class="kj kk kl km gt nk nl nm nn aw no bi"><span id="1ba3" class="lw lx it nl b gy np nq l nr ns">$ uname -m<br/>arm64</span></pre><p id="f20d" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">如果你得到<code class="fe nt nu nv nl b">arm64</code>，那么你在一个默认的终端上</p><p id="d2cc" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">2.下载Miniconda3 x86_64 bash安装程序</p><pre class="kj kk kl km gt nk nl nm nn aw no bi"><span id="7c66" class="lw lx it nl b gy np nq l nr ns">$ wget <a class="ae lv" href="https://repo.anaconda.com/miniconda/Miniconda3-latest-MacOSX-arm64.sh" rel="noopener ugc nofollow" target="_blank">https://repo.anaconda.com/miniconda/Miniconda3-latest-MacOSX-arm64.sh</a></span></pre><p id="448f" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">3.然后进行类似于前面的安装过程(从<a class="ae lv" href="https://medium.com/p/a476936bfaf0#ca13" rel="noopener">步骤3 </a>到<a class="ae lv" href="https://medium.com/p/a476936bfaf0#575a" rel="noopener">步骤5 </a>)。</p><p id="b090" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">4.当它提示安装路径时，我会推荐安装在默认路径<code class="fe nt nu nv nl b">Users/[your user name]/miniconda3/</code>。如果没有，请使用不同的路径。(让我们把这条路径称为<strong class="la iu">迷你康达苹果M1路径</strong>)。</p><p id="59b9" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">5.安装完成后，会提示是否运行conda init，键入<strong class="la iu"> <em class="lu"> no </em> </strong>并按<strong class="la iu"> <em class="lu">进入</em>。</strong></p></div><div class="ab cl mu mv hx mw" role="separator"><span class="mx bw bk my mz na"/><span class="mx bw bk my mz na"/><span class="mx bw bk my mz"/></div><div class="im in io ip iq"><h2 id="4088" class="lw lx it bd ly lz ma dn mb mc md dp me lh mf mg mh ll mi mj mk lp ml mm mn mo bi translated"><strong class="ak">为两个安装配置conda init</strong></h2><p id="f58b" class="pw-post-body-paragraph ky kz it la b lb mp ju ld le mq jx lg lh mr lj lk ll ms ln lo lp mt lr ls lt im bi translated">通常当我们运行<code class="fe nt nu nv nl b">conda init</code>时，它会根据我们使用的shell类型在终端启动文件中添加一些shell命令。</p><p id="58f3" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">但是这里我们不能简单地在同一个文件中添加x86_64和苹果M1的init。<strong class="la iu">基于终端会话的架构激活正确的</strong> <code class="fe nt nu nv nl b"><strong class="la iu">conda installtion</strong></code> <strong class="la iu">需要更智能一点。</strong></p><p id="ab53" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">您可以简单地在<code class="fe nt nu nv nl b">.zshrc</code>或您正在使用的任何shell启动脚本上做任何事情。但是让我告诉你我是如何干净利落地做到的。</p><ol class=""><li id="d245" class="nb nc it la b lb lc le lf lh nd ll ne lp nf lt ng nh ni nj bi translated">为conda init创建自定义启动脚本</li></ol><pre class="kj kk kl km gt nk nl nm nn aw no bi"><span id="e65b" class="lw lx it nl b gy np nq l nr ns">$ mkdir ~/.custrc/ &amp;&amp; touch ~/.custrc/.condarc</span></pre><p id="0719" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">2.打开并在脚本中添加conda init函数</p><pre class="kj kk kl km gt nk nl nm nn aw no bi"><span id="0b80" class="lw lx it nl b gy np nq l nr ns">init_conda() {<br/>   # &gt;&gt;&gt; conda initialize &gt;&gt;&gt;</span><span id="d82d" class="lw lx it nl b gy nx nq l nr ns">   conda_path_m1="/Users/mathanraj/miniconda3"<br/>   __conda_setup="$('${conda_path_m1}/bin/conda' 'shell.zsh' 'hook' 2&gt; /dev/null)"<br/>   if [ $? -eq 0 ]; then<br/>      eval "$__conda_setup"<br/>   else<br/>      if [ -f "${conda_path_m1}/etc/profile.d/conda.sh" ]; then<br/>          . "${conda_path_m1}/etc/profile.d/conda.sh"<br/>      else<br/>          export PATH="${conda_path_m1}/bin:$PATH"<br/>      fi<br/>   fi<br/>   unset __conda_setup</span><span id="ebf4" class="lw lx it nl b gy nx nq l nr ns"># &lt;&lt;&lt; conda initialize &lt;&lt;&lt;<br/>}</span><span id="017b" class="lw lx it nl b gy nx nq l nr ns">init_conda_intel() {<br/>   # &gt;&gt;&gt; conda initialize &gt;&gt;&gt;</span><span id="2475" class="lw lx it nl b gy nx nq l nr ns">   conda_path_intel="/Users/mathanraj/miniconda3-intel"<br/>   __conda_setup="$('${conda_path_intel}/bin/conda' 'shell.zsh' 'hook' 2&gt; /dev/null)"<br/>   if [ $? -eq 0 ]; then<br/>      eval "$__conda_setup"<br/>   else<br/>      if [ -f "${conda_path_intel}/etc/profile.d/conda.sh" ]; then<br/>          . "${conda_path_intel}/etc/profile.d/conda.sh"<br/>      else<br/>          export PATH="${conda_path_intel}/bin:$PATH"<br/>      fi<br/>   fi<br/>   unset __conda_setup<br/>   # &lt;&lt;&lt; conda initialize &lt;&lt;&lt;<br/>}</span></pre><p id="2e65" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">这里，</p><ul class=""><li id="9cd6" class="nb nc it la b lb lc le lf lh nd ll ne lp nf lt ny nh ni nj bi translated"><code class="fe nt nu nv nl b">conda_path_m1</code>是我为苹果M1公司安装Miniconda的地方</li><li id="8501" class="nb nc it la b lb nz le oa lh ob ll oc lp od lt ny nh ni nj bi translated"><code class="fe nt nu nv nl b">conda_path_intel</code>是我为x86_64安装Miniconda的地方</li></ul><p id="3c39" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">根据您安装Miniconda Apple M1和x86_64的位置，相应地替换路径。</p><p id="4380" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">3.打开并添加下面几行到你的shell启动脚本中，在我的例子中是<code class="fe nt nu nv nl b">.zshrc</code></p><pre class="kj kk kl km gt nk nl nm nn aw no bi"><span id="2f5c" class="lw lx it nl b gy np nq l nr ns">$ open ~/.zshrc</span></pre><p id="73e6" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">增加</p><pre class="kj kk kl km gt nk nl nm nn aw no bi"><span id="91a5" class="lw lx it nl b gy np nq l nr ns"># init conda based on arch<br/>source ~/.custrc/.condarc<br/>if [[ $(uname -m) == 'x86_64' ]]; then<br/>    init_conda_intel<br/>    echo "conda x86_64 is activated"<br/>else<br/>    init_conda<br/>    echo "conda m1 is activated"<br/>fi</span></pre><p id="bef4" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">这会给你的终端行为增加小智能。基本上，它只是根据终端会话的架构配置合适的conda安装。</p></div><div class="ab cl mu mv hx mw" role="separator"><span class="mx bw bk my mz na"/><span class="mx bw bk my mz na"/><span class="mx bw bk my mz"/></div><div class="im in io ip iq"><p id="6122" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">就这样，现在关闭所有正在运行的终端会话并尝试</p><ul class=""><li id="fc44" class="nb nc it la b lb lc le lf lh nd ll ne lp nf lt ny nh ni nj bi translated">打开rosetta2 enabled终端，会得到<strong class="la iu">“康达x86_64已激活”。</strong>如果打印<code class="fe nt nu nv nl b">conda env list</code></li></ul><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nw"><img src="../Images/28eb56acd6fee06d617d9f41b3739e31.png" data-original-src="https://miro.medium.com/v2/resize:fit:1138/format:webp/1*PrV9iddy2AHMSWc2KEBJeA.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">PC:作者</p></figure><ul class=""><li id="f367" class="nb nc it la b lb lc le lf lh nd ll ne lp nf lt ny nh ni nj bi translated">打开默认终端(不带rosetta2)，会得到<strong class="la iu">“康达m1已激活”。</strong>如果你打印<code class="fe nt nu nv nl b">conda env list</code></li></ul><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nw"><img src="../Images/8ccee87a6a6d84ccc5b91a044d53b7d8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1138/format:webp/1*y_25KL4BwgT09vdcNmiohQ.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">PC:作者</p></figure><p id="90e7" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated"><strong class="la iu">注意:</strong>如果仔细观察，它会打印两种情况下所有可用的conda环境。但是，当它来自支持rosetta2的终端时，请注意，仅打印miniconda3-intel环境下的名称，miniconda3-intel下的基本路径将带有<strong class="la iu"> (*) </strong>符号。miniconda3-m1也是如此。</p><p id="d2a2" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">希望你觉得超级有帮助。</p><p id="0d4b" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">没有什么是不可能的，让我们做吧…🎉</p></div></div>    
</body>
</html>