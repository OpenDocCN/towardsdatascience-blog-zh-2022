<html>
<head>
<title>Use Seaborn FacetGrid to Quickly Create Figures With Subplots</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Seaborn FacetGrid快速创建带有支线剧情的人物</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/use-seaborn-facetgrid-to-quickly-create-figures-with-subplots-6fd72dc90b5d#2022-07-20">https://towardsdatascience.com/use-seaborn-facetgrid-to-quickly-create-figures-with-subplots-6fd72dc90b5d#2022-07-20</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="f1f6" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">通过使用Seaborn的FacetGrid(一个使用地震数据的例子)增强您的探索性数据分析过程</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/8d2644f42e5859554a64535e69e25a50.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*CMHiXKs0GmcHP9Ux"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">丹尼尔·塞勒在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure><p id="4415" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">数据可视化是任何数据分析或机器学习工作流的重要组成部分。它让我们对数据有了更深入的了解，正如那句名言所说，“一张图片胜过千言万语”。</p><p id="9ec8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">当在<a class="ae ky" href="https://www.python.org" rel="noopener ugc nofollow" target="_blank"> Python </a>中处理数据可视化时，我们可能希望按照类别或不同的组来分割数据。这是通过使用Seaborn的FacetGrid 函数实现的。这允许我们创建一个网格，在网格上我们可以用最少的代码绘制许多其他类型的图，特别是与使用matplotlib相比。</p><h2 id="8e0a" class="lv lw it bd lx ly lz dn ma mb mc dp md li me mf mg lm mh mi mj lq mk ml mm mn bi translated">教程的数据源</h2><p id="2ed2" class="pw-post-body-paragraph kz la it lb b lc mo ju le lf mp jx lh li mq lk ll lm mr lo lp lq ms ls lt lu im bi translated">本教程使用的数据可以在CC0: Public Domain下使用，并且来自Kaggle。这是一个数据集，包含1965年至2016年期间世界上震级为5.5或更高的最重大地震的数据。</p><p id="e199" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">您可以通过以下链接查看原始数据。</p><p id="5ec0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><a class="ae ky" href="https://www.kaggle.com/datasets/usgs/earthquake-database?select=database.csv" rel="noopener ugc nofollow" target="_blank">https://www.kaggle.com/datasets/usgs/earthquake-database?select=database.csv </a></p><h2 id="2024" class="lv lw it bd lx ly lz dn ma mb mc dp md li me mf mg lm mh mi mj lq mk ml mm mn bi translated">视频教程</h2><p id="99b1" class="pw-post-body-paragraph kz la it lb b lc mo ju le lf mp jx lh li mq lk ll lm mr lo lp lq ms ls lt lu im bi translated">我还制作了这个教程的以下视频，你可能会感兴趣。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mt mu l"/></div></figure><h1 id="d52a" class="mv lw it bd lx mw mx my ma mz na nb md jz nc ka mg kc nd kd mj kf ne kg mm nf bi translated">加载和导入库</h1><p id="4bff" class="pw-post-body-paragraph kz la it lb b lc mo ju le lf mp jx lh li mq lk ll lm mr lo lp lq ms ls lt lu im bi translated">我们教程的第一步是导入必要的库，它们是<a class="ae ky" href="https://pandas.pydata.org" rel="noopener ugc nofollow" target="_blank"> Pandas </a>和<a class="ae ky" href="https://seaborn.pydata.org/index.html" rel="noopener ugc nofollow" target="_blank"> Seaborn </a>。</p><p id="57d1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><a class="ae ky" href="https://pandas.pydata.org" rel="noopener ugc nofollow" target="_blank"> Pandas </a>是一个<a class="ae ky" href="https://www.python.org" rel="noopener ugc nofollow" target="_blank"> Python </a>库，用于数据分析、操作，并允许我们从各种数据源加载数据，包括。csv，。xlsx等。</p><p id="d24e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Seaborn 是一个数据可视化库，它建立在matplotlib 之上，允许它用几行代码创建非常强大和有洞察力的图形。它为创建更高级的绘图提供了更容易使用的语法。与<a class="ae ky" href="https://matplotlib.org/" rel="noopener ugc nofollow" target="_blank"> matplotib </a>相比，默认数字也更具视觉吸引力</p><pre class="kj kk kl km gt ng nh ni nj aw nk bi"><span id="e8df" class="lv lw it nh b gy nl nm l nn no">import seaborn as sns<br/>import pandas as pd</span></pre><h1 id="f3aa" class="mv lw it bd lx mw mx my ma mz na nb md jz nc ka mg kc nd kd mj kf ne kg mm nf bi translated">加载数据</h1><p id="bf8d" class="pw-post-body-paragraph kz la it lb b lc mo ju le lf mp jx lh li mq lk ll lm mr lo lp lq ms ls lt lu im bi translated">一旦库被导入，我们现在可以开始从Kaggle导入地震数据集。这是通过调用<code class="fe np nq nr nh b">pd.read_csv()</code>并将文件名传递给括号来完成的。</p><pre class="kj kk kl km gt ng nh ni nj aw nk bi"><span id="4805" class="lv lw it nh b gy nl nm l nn no">#Significant (Magnitude &gt; 5.5) Earthquake data from 1965 to 2015.<br/>#Licence: CC0 - Public Domain<br/>#<a class="ae ky" href="https://www.kaggle.com/datasets/usgs/earthquake-database" rel="noopener ugc nofollow" target="_blank">https://www.kaggle.com/datasets/usgs/earthquake-database</a></span><span id="d5df" class="lv lw it nh b gy ns nm l nn no">earthquakes = pd.read_csv('data/kaggle_significant_earthquakes_database.csv')</span></pre><p id="96f7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们可以通过拨打以下电话确认我们的数据已成功加载:</p><pre class="kj kk kl km gt ng nh ni nj aw nk bi"><span id="71df" class="lv lw it nh b gy nl nm l nn no">earthquakes.info()</span></pre><p id="8097" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">它返回数据帧的摘要，包括列名、非空计数和数据类型(Dtype)。</p><pre class="kj kk kl km gt ng nh ni nj aw nk bi"><span id="5f9b" class="lv lw it nh b gy nl nm l nn no">&lt;class 'pandas.core.frame.DataFrame'&gt;<br/>RangeIndex: 23412 entries, 0 to 23411<br/>Data columns (total 24 columns):<br/> #   Column                      Non-Null Count  Dtype  <br/>---  ------                      --------------  -----  <br/> 0   Date                        23412 non-null  object <br/> 1   Time                        23412 non-null  object <br/> 2   Latitude                    23412 non-null  float64<br/> 3   Longitude                   23412 non-null  float64<br/> 4   Type                        23412 non-null  object <br/> 5   Depth                       23412 non-null  float64<br/> 6   Depth Error                 4461 non-null   float64<br/> 7   Depth Seismic Stations      7097 non-null   float64<br/> 8   Magnitude                   23412 non-null  float64<br/> 9   Magnitude Type              23409 non-null  object <br/> 10  Magnitude Error             327 non-null    float64<br/> 11  Magnitude Seismic Stations  2564 non-null   float64<br/> 12  Azimuthal Gap               7299 non-null   float64<br/> 13  Horizontal Distance         1604 non-null   float64<br/> 14  Horizontal Error            1156 non-null   float64<br/> 15  Root Mean Square            17352 non-null  float64<br/> 16  ID                          23412 non-null  object <br/> 17  Source                      23412 non-null  object <br/> 18  Location Source             23412 non-null  object <br/> 19  Magnitude Source            23412 non-null  object <br/> 20  Status                      23412 non-null  object <br/> 21  date_parsed                 23412 non-null  object <br/> 22  year                        23412 non-null  int64  <br/> 23  month                       23412 non-null  int64  <br/>dtypes: float64(12), int64(2), object(10)<br/>memory usage: 4.3+ MB</span></pre><h1 id="3f2f" class="mv lw it bd lx mw mx my ma mz na nb md jz nc ka mg kc nd kd mj kf ne kg mm nf bi translated">数据准备</h1><p id="3d76" class="pw-post-body-paragraph kz la it lb b lc mo ju le lf mp jx lh li mq lk ll lm mr lo lp lq ms ls lt lu im bi translated">在继续显示我们的数据之前，我们需要在地震数据集中创建一个额外的列，这将允许我们稍后分割我们的数据。</p><p id="5bb7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">下面的函数根据震级将地震分为中等(5.0-5.9)、强烈(6.0-6.9)、大(7.0-7.9)和大(&gt; 8.0)。</p><pre class="kj kk kl km gt ng nh ni nj aw nk bi"><span id="f9dc" class="lv lw it nh b gy nl nm l nn no">def magnitude_classification(dataframe: pd.DataFrame):<br/>    """<br/>    Classify earthquakes based on magnitude.</span><span id="626f" class="lv lw it nh b gy ns nm l nn no">Parameters<br/>    ----------<br/>    dataframe : pd.DataFrame<br/>        Dataframe containing earthquake data</span><span id="edd1" class="lv lw it nh b gy ns nm l nn no">Returns<br/>    -------<br/>    str<br/>        Returns the classification of the earthquake as a string.<br/>    """<br/>    if dataframe['Magnitude'] &gt;= 5.0 and dataframe['Magnitude'] &lt;= 5.9:<br/>        return 'Moderate (5.0-5.9)'<br/>    elif dataframe['Magnitude'] &gt;= 6.0 and dataframe['Magnitude'] &lt;= 6.9:<br/>        return 'Strong (6.0-6.9)'<br/>    elif dataframe['Magnitude'] &gt;= 7.0 and dataframe['Magnitude'] &lt;= 7.9:<br/>        return 'Major (7.0-7.9)'<br/>    elif dataframe['Magnitude'] &gt;= 8.0:<br/>        return 'Great (&gt;8.0)'</span></pre><p id="9082" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">创建函数后，我们现在可以使用<a class="ae ky" href="https://pandas.pydata.org/docs/reference/api/pandas.DataFrame.apply.html" rel="noopener ugc nofollow" target="_blank"> pandas apply </a>方法在dataframe中创建新列，如下所示:</p><pre class="kj kk kl km gt ng nh ni nj aw nk bi"><span id="65fc" class="lv lw it nh b gy nl nm l nn no">earthquakes['Class'] = earthquakes.apply(magnitude_classification, axis=1)</span></pre><p id="5da5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">当我们查看数据集时，我们现在可以看到Class列已经成功添加。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nt"><img src="../Images/e26e9ba622dd3990c279867c31204834.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*PMBAqognXxpM8Xl7INUZWA.png"/></div></div></figure><h1 id="94c3" class="mv lw it bd lx mw mx my ma mz na nb md jz nc ka mg kc nd kd mj kf ne kg mm nf bi translated">使用Seaborn创建面网格</h1><p id="c1f3" class="pw-post-body-paragraph kz la it lb b lc mo ju le lf mp jx lh li mq lk ll lm mr lo lp lq ms ls lt lu im bi translated">创建绘图过程的第一步是创建一个新变量——在本例中是<code class="fe np nq nr nh b">g</code>,然后将它赋给<code class="fe np nq nr nh b">sns.FacetGrid()</code>。然后我们可以传入地震数据帧并运行代码。</p><pre class="kj kk kl km gt ng nh ni nj aw nk bi"><span id="c6ad" class="lv lw it nh b gy nl nm l nn no">g = sns.FacetGrid(earthquakes)</span></pre><p id="c888" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这将返回一组没有数据的轴。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nu"><img src="../Images/7dca36e878abb87105a62315ebc1dd92.png" data-original-src="https://miro.medium.com/v2/resize:fit:530/format:webp/1*OYa3GJbIlERhJKCriDYeow.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">从Seaborn FacetGrid返回的一组轴没有数据。图片由作者提供。</p></figure><p id="95b7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在我们有了轴，我们可以开始向它添加数据，方法是使用<code class="fe np nq nr nh b">.map()</code>函数将我们选择的图应用到轴上。</p><pre class="kj kk kl km gt ng nh ni nj aw nk bi"><span id="2e82" class="lv lw it nh b gy nl nm l nn no">g = sns.FacetGrid(earthquakes)<br/>g.map(sns.scatterplot, 'year', 'Magnitude', alpha=0.5);</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nv"><img src="../Images/931395552f18d37a65aa74e7c2b3efa5.png" data-original-src="https://miro.medium.com/v2/resize:fit:492/format:webp/1*YLwbYM4hDXNs-pXRo4gZLA.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">映射数据后的Seaborn FactGrid轴。图片由作者提供。</p></figure><h2 id="8445" class="lv lw it bd lx ly lz dn ma mb mc dp md li me mf mg lm mh mi mj lq mk ml mm mn bi translated">使用列在FacetGrid中创建子情节</h2><p id="1ae7" class="pw-post-body-paragraph kz la it lb b lc mo ju le lf mp jx lh li mq lk ll lm mr lo lp lq ms ls lt lu im bi translated">我们现在可以开始使用数据集中的一个分类变量创建子图(面)。在这种情况下，我们将使用地震类型(原因),并将y轴更改为深度。</p><p id="d7e7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">为了将剧情分成多个支线剧情(层面),我们在<code class="fe np nq nr nh b">FacetGrid()</code>中添加了一个<code class="fe np nq nr nh b">col</code>参数，并传入我们想要使用的列的名称。</p><p id="422c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">此外，我们还可以通过调用<code class="fe np nq nr nh b">g.set()</code>并传入我们想要更改的参数来控制绘图限制。在这个例子中，我们将设置<code class="fe np nq nr nh b">ylim</code> (ylimit)从750到-10。像这样把数字反过来，可以让我们反转y轴。</p><pre class="kj kk kl km gt ng nh ni nj aw nk bi"><span id="8cd0" class="lv lw it nh b gy nl nm l nn no">g = sns.FacetGrid(earthquakes, col='Type')<br/>g.map(sns.scatterplot, 'year', 'Depth', alpha=0.5)<br/>g.set(ylim=(750, -10));</span></pre><p id="ef60" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">当我们运行这段代码时，我们得到了四个子情节(方面)。每种地震类型一个:地震、核爆炸和岩爆。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nw"><img src="../Images/da24473a685e91f281160ce2971c2452.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*yJP_5o26FGGNWXn02K1l4Q.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">按地震类型划分的海鸟。图片由作者提供。</p></figure><p id="222d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">从返回的图中可以看出，地震的深度值范围很广，核爆炸、爆炸、岩爆都是比较浅的到达事件。</p><h2 id="4521" class="lv lw it bd lx ly lz dn ma mb mc dp md li me mf mg lm mh mi mj lq mk ml mm mn bi translated">使用列和行在FacetGrid中创建子情节</h2><p id="d089" class="pw-post-body-paragraph kz la it lb b lc mo ju le lf mp jx lh li mq lk ll lm mr lo lp lq ms ls lt lu im bi translated">除了能够将我们的可视化拆分成列，我们还可以应用第二个分类变量来进一步将可视化拆分成行。</p><p id="af08" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">为了实现这一点，我们添加了一个<code class="fe np nq nr nh b">row</code>参数，在本例中，我们将把它分配给我们之前创建的Class列。</p><pre class="kj kk kl km gt ng nh ni nj aw nk bi"><span id="124c" class="lv lw it nh b gy nl nm l nn no">g = sns.FacetGrid(earthquakes, col='Type', row='Class')<br/>g.map(sns.scatterplot, 'year', 'Depth', alpha=0.5)<br/>g.set(ylim=(750, -10));</span></pre><p id="eeb8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">当我们运行这段代码时，我们得到了一个由子plots(facet)组成的网格。我们有显示地震类型(原因)的列，和显示分类(中等、强烈、主要和大)的行。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nx"><img src="../Images/d9fcd921be17846062f8286fbbe1b2b4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*JFbDmyhtbuT1BVw7SwYWtg.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">Seaborn FacetGrid在按照地震类型和级别分割数据后。图片由作者提供。</p></figure><p id="ea71" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然而，我们可以立即看到，每个情节(方面)的标题是非常混乱，难以阅读。</p><h2 id="1bc9" class="lv lw it bd lx ly lz dn ma mb mc dp md li me mf mg lm mh mi mj lq mk ml mm mn bi translated">修改FacetGrid标题</h2><p id="7a08" class="pw-post-body-paragraph kz la it lb b lc mo ju le lf mp jx lh li mq lk ll lm mr lo lp lq ms ls lt lu im bi translated">为了整理每个情节(层面)的标题，我们可以调用<code class="fe np nq nr nh b">g.set_titles()</code>，在这个函数中，我们需要调用<code class="fe np nq nr nh b">col_template</code>和<code class="fe np nq nr nh b">row_template</code>。这两个参数允许我们控制标题。</p><p id="f65e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在本例中，我们将替换:</p><pre class="kj kk kl km gt ng nh ni nj aw nk bi"><span id="aebd" class="lv lw it nh b gy nl nm l nn no">Class = Major(7.0-7.9)|Type = Earthquake</span></pre><p id="3a21" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">随着</p><pre class="kj kk kl km gt ng nh ni nj aw nk bi"><span id="d198" class="lv lw it nh b gy nl nm l nn no">Major(7.0-7.9)|Earthquake</span></pre><p id="7e3d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这是通过指定格式化的字符串作为参数来实现的，然而，我们不需要以<code class="fe np nq nr nh b">f</code>或者使用<code class="fe np nq nr nh b">.format</code>来开始它们，我们只需在{ }括号中传递变量。</p><p id="0042" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在这种情况下，我们将只传入col_name和row_name。</p><pre class="kj kk kl km gt ng nh ni nj aw nk bi"><span id="677c" class="lv lw it nh b gy nl nm l nn no">g = sns.FacetGrid(earthquakes, col='Type', row='Class')<br/>g.map(sns.scatterplot, 'year', 'Depth', alpha=0.5)<br/>g.set_titles(col_template = '{col_name}', row_template='{row_name}')<br/>g.set(ylim=(750, -10));</span></pre><p id="6c03" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这将返回下面的图，标题更容易阅读。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ny"><img src="../Images/98e51c63277da411f3d1c0de20353360.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*XiLws2ed_JJw9zrbFzzz1w.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">使用set_titles整理facet标题后的Seaborn FacetGrid。图片由作者提供。</p></figure><h2 id="c80f" class="lv lw it bd lx ly lz dn ma mb mc dp md li me mf mg lm mh mi mj lq mk ml mm mn bi translated">更改FacetGrid中行的顺序</h2><p id="5235" class="pw-post-body-paragraph kz la it lb b lc mo ju le lf mp jx lh li mq lk ll lm mr lo lp lq ms ls lt lu im bi translated">从图中我们可以看到，第一行显示的是震级范围6.0-6.9的数据，下一行是5.0-5.9的数据。将这些行按升序排列更有意义，这样第一行是5.0–5.9，第二行是6.0–6.9，依此类推。</p><p id="8d87" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们可以通过使用<code class="fe np nq nr nh b">row_order</code>参数并按照我们希望的顺序传入分类变量(Class)的值列表来实现这一点。</p><pre class="kj kk kl km gt ng nh ni nj aw nk bi"><span id="0f92" class="lv lw it nh b gy nl nm l nn no">g = sns.FacetGrid(earthquakes, col='Type', row='Class', <br/>                  row_order=['Moderate (5.0-5.9)',<br/>                             'Strong (6.0-6.9)',  <br/>                             'Major (7.0-7.9)', <br/>                             'Great (&gt;8.0)'])</span><span id="32c6" class="lv lw it nh b gy ns nm l nn no">g.map(sns.scatterplot, 'year', 'Depth', alpha=0.5)<br/>g.set_titles(col_template = '{col_name}', row_template='{row_name}')<br/>g.set(ylim=(750, -10));</span></pre><p id="2bb4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们的FacetGrid现在看起来更像样了。我们将行按升序排序，标题也清晰易读。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ny"><img src="../Images/c22a524e79ab9255b65a228668670b11.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Fhetpp_5suoMv3k_4VQCqQ.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">使用row_order对行进行排序后，Seaborn FacetGrid。图片由作者提供。</p></figure><h1 id="622a" class="mv lw it bd lx mw mx my ma mz na nb md jz nc ka mg kc nd kd mj kf ne kg mm nf bi translated">在Seaborn FacetGrid上显示其他类型的绘图</h1><h2 id="c904" class="lv lw it bd lx ly lz dn ma mb mc dp md li me mf mg lm mh mi mj lq mk ml mm mn bi translated">使用histplot在FacetGrid上显示直方图</h2><p id="2e1d" class="pw-post-body-paragraph kz la it lb b lc mo ju le lf mp jx lh li mq lk ll lm mr lo lp lq ms ls lt lu im bi translated">在前面的例子中，我们使用了散点图，但是这可以很容易地改变为Seaborn提供的任何其他类型的图。</p><p id="31e9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">为了调用<code class="fe np nq nr nh b">sns.histplot</code>，我们简单地将它传递给<code class="fe np nq nr nh b">g.map()</code>函数。</p><pre class="kj kk kl km gt ng nh ni nj aw nk bi"><span id="8773" class="lv lw it nh b gy nl nm l nn no">g = sns.FacetGrid(earthquakes, col='Type')<br/>g.map(sns.histplot, 'year');</span></pre><p id="8f03" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这给出了下面的图。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ny"><img src="../Images/fbf442b03923d664dc1f8bb8da094c6d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*aCfzMf6kMmIFvSat9pHldQ.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">Histplots映射到Seaborn FacetGrid。图片由作者提供。</p></figure><p id="cb41" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">从回报图中，我们可以看到地震计数覆盖了所有年份，这里和那里略有下降。从1965年到1995年左右发生了5.5级以上的核爆炸。</p><p id="c0ec" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果我们想改变直方图上显示的条块，我们只需向<code class="fe np nq nr nh b">bins</code>参数传递一个值。如果我们有一个较小的数量，那么数据将被分成较小数量的箱。</p><pre class="kj kk kl km gt ng nh ni nj aw nk bi"><span id="ef50" class="lv lw it nh b gy nl nm l nn no">g = sns.FacetGrid(earthquakes, col='Type')<br/>g.map(sns.histplot, 'year', bins=5);</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nz"><img src="../Images/a001b7df01b972e6671f91a64ce0ef02.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*szMS0W-aqJINnjElQJ2O3A.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">在应用较少数量的面元后，Histplots映射到Seaborn FacetGrid。图片由作者提供。</p></figure><h2 id="39b5" class="lv lw it bd lx ly lz dn ma mb mc dp md li me mf mg lm mh mi mj lq mk ml mm mn bi translated">在面网格上显示箱线图</h2><p id="09e5" class="pw-post-body-paragraph kz la it lb b lc mo ju le lf mp jx lh li mq lk ll lm mr lo lp lq ms ls lt lu im bi translated">我们也可以以非常相似的方式显示箱线图，只需像这样将<code class="fe np nq nr nh b">sns.boxplot</code>传递给<code class="fe np nq nr nh b">.map()</code>函数。</p><pre class="kj kk kl km gt ng nh ni nj aw nk bi"><span id="857f" class="lv lw it nh b gy nl nm l nn no">g = sns.FacetGrid(earthquakes, col='Type')<br/>g.map(sns.boxplot, 'year');</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nz"><img src="../Images/5f34596330df6600451632141182a385.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rxgVhqYol8gO_NtxcJp52A.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">在Seaborn FacetGrid上显示的箱线图。图片由作者提供。</p></figure><p id="5762" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在本文中，您可以找到更多关于Seaborn中的箱线图的信息:</p><div class="oa ob gp gr oc od"><a rel="noopener follow" target="_blank" href="/creating-boxplots-with-the-seaborn-python-library-f0c20f09bd57"><div class="oe ab fo"><div class="of ab og cl cj oh"><h2 class="bd iu gy z fp oi fr fs oj fu fw is bi translated">使用Seaborn Python库创建箱线图</h2><div class="ok l"><h3 class="bd b gy z fp oi fr fs oj fu fw dk translated">Seaborn箱线图快速入门指南</h3></div><div class="ol l"><p class="bd b dl z fp oi fr fs oj fu fw dk translated">towardsdatascience.com</p></div></div><div class="om l"><div class="on l oo op oq om or ks od"/></div></div></a></div><h1 id="eded" class="mv lw it bd lx mw mx my ma mz na nb md jz nc ka mg kc nd kd mj kf ne kg mm nf bi translated">摘要</h1><p id="e5ac" class="pw-post-body-paragraph kz la it lb b lc mo ju le lf mp jx lh li mq lk ll lm mr lo lp lq ms ls lt lu im bi translated">与matplotlib相比，Seaborn中的FacetGrid函数提供了一种非常有用、快速和方便的方法来创建具有多个子情节的图形。通过内置的功能，这些图可以以多种方式进行定制，并制作非常漂亮的图表，以包含在您的演示或报告中。</p></div><div class="ab cl os ot hx ou" role="separator"><span class="ov bw bk ow ox oy"/><span class="ov bw bk ow ox oy"/><span class="ov bw bk ow ox"/></div><div class="im in io ip iq"><p id="153a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><em class="oz">感谢阅读。在你走之前，你一定要订阅我的内容，把我的文章放到你的收件箱里。</em> <a class="ae ky" href="https://andymcdonaldgeo.medium.com/subscribe" rel="noopener"> <strong class="lb iu"> <em class="oz">你可以在这里做！</em> </strong> </a></p><p id="c38e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">其次，通过注册会员，你可以获得完整的媒介体验，并支持我自己和成千上万的其他作家。它每个月只花你5美元，你可以完全接触到所有令人惊叹的媒体文章，也有机会用你的写作赚钱。如果你用 <a class="ae ky" href="https://andymcdonaldgeo.medium.com/membership" rel="noopener"> <strong class="lb iu"> <em class="oz">我的链接</em></strong></a><strong class="lb iu"><em class="oz"/></strong><em class="oz">报名，你会直接用你的一部分费用支持我，不会多花你多少钱。如果你这样做了，非常感谢你的支持！</em></p></div></div>    
</body>
</html>