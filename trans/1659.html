<html>
<head>
<title>Automate WhatsApp Messages with Python in 3 Steps</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用Python三步实现WhatsApp消息自动化</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/automate-whatsapp-messages-with-python-in-3-steps-d64cf0de4539#2022-04-20">https://towardsdatascience.com/automate-whatsapp-messages-with-python-in-3-steps-d64cf0de4539#2022-04-20</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="1092" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">使用Python向联系人和群组发送WhatsApp消息</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/f2019d0c2d1d2c14819b652684f9a911.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*bsS0xbIcmVU7xSC4"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated"><a class="ae ky" href="https://unsplash.com/@eyestetix?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Eyestetix工作室</a>在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>拍摄的照片</p></figure><p id="adda" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">用Python可以做的最酷的事情之一就是自动化日常任务。大概我们每天最常见的任务就是在WhatsApp上发消息。</p><p id="c43e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">尽管这项任务简单得就像拿起电话、打字、点击“发送”按钮一样，但我们有时会忘记在特殊场合(生日、周年纪念日等)发送信息。</p><p id="f617" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们可以用Python安排WhatsApp消息吗？</p><p id="674e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">当然可以！我们只需要安装一个名为pywhatkit的库。然后，我们可以安排将消息发送给我们的任何联系人，甚至发送给一个群组。</p><p id="abd2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">以下是使用Python向联系人和群组发送WhatsApp消息需要遵循的3个步骤。</p><p id="ca96" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">免责声明:本指南仅用于教育目的。在学习Python时，您可能会使用这个库来安排生日/周年纪念消息，但我不建议您在需要发送需要保持私密的消息时使用它。</p><h1 id="3fba" class="lw lx it bd ly lz ma mb mc md me mf mg jz mh ka mi kc mj kd mk kf ml kg mm mn bi translated">使用pywhatkit向WhatsApp发送消息</h1><p id="330c" class="pw-post-body-paragraph kz la it lb b lc mo ju le lf mp jx lh li mq lk ll lm mr lo lp lq ms ls lt lu im bi translated">Pywhatkit是一个用于不同目的的Python库，其中之一就是发送WhatsApp消息。</p><p id="7e88" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这是一个易于使用的库，不需要任何额外的设置。也就是说，它有很多依赖项，所以我强烈建议您将它安装在一个新的虚拟环境中(在这里了解如何设置虚拟环境<a class="ae ky" rel="noopener" target="_blank" href="/why-you-need-a-python-virtual-environment-and-how-to-set-it-up-35019841697d">)。</a></p><p id="c561" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><em class="lv">如果你不想看，可以看我的视频！</em></p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mt mu l"/></div></figure><blockquote class="mv mw mx"><p id="dc23" class="kz la lv lb b lc ld ju le lf lg jx lh my lj lk ll mz ln lo lp na lr ls lt lu im bi translated">请务必在此<a class="ae ky" href="https://frankandrade.ck.page/44559e1ae7" rel="noopener ugc nofollow" target="_blank">订阅</a>以获取我的<strong class="lb iu">自动化备忘单</strong>(免费PDF)</p></blockquote><h2 id="c310" class="nb lx it bd ly nc nd dn mc ne nf dp mg li ng nh mi lm ni nj mk lq nk nl mm nm bi translated">步骤1:安装pywhatkit</h2><p id="ab0f" class="pw-post-body-paragraph kz la it lb b lc mo ju le lf mp jx lh li mq lk ll lm mr lo lp lq ms ls lt lu im bi translated">要安装pywhatkit的最新版本，打开终端并运行以下命令。</p><pre class="kj kk kl km gt nn no np nq aw nr bi"><span id="1f5e" class="nb lx it no b gy ns nt l nu nv">pip install pywhatkit</span></pre><p id="99d5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">安装可能需要几秒钟甚至一分钟，所以请耐心等待。一旦安装了这个库，就可以用命令<code class="fe nw nx ny no b">pip list</code>检查这个库安装的所有依赖项。</p><h2 id="0e7a" class="nb lx it bd ly nc nd dn mc ne nf dp mg li ng nh mi lm ni nj mk lq nk nl mm nm bi translated">第二步:向WhatsApp上的联系人发送消息</h2><p id="67db" class="pw-post-body-paragraph kz la it lb b lc mo ju le lf mp jx lh li mq lk ll lm mr lo lp lq ms ls lt lu im bi translated">在我们开始发送消息之前，您必须通过WhatsApp Web登录您的WhatsApp帐户。如果你没有登录，手机和电脑不在同一个WiFi上，或者手机离电脑很远，这个方法就不管用了。</p><p id="c8bf" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">要使用Python和pywhatkit向WhatsApp联系人发送消息，我们使用下面代码所示的<code class="fe nw nx ny no b">.sendwhatmsg</code>方法(改为插入您的联系号码)。</p><pre class="kj kk kl km gt nn no np nq aw nr bi"><span id="10f0" class="nb lx it no b gy ns nt l nu nv"><strong class="no iu">import</strong> pywhatkit</span><span id="f0ae" class="nb lx it no b gy nz nt l nu nv"><em class="lv"># syntax: phone number with country code, message, hour and minutes</em><br/>pywhatkit.sendwhatmsg('+1xxxxxxxx', 'Message 1', 18, 52)</span></pre><p id="d2ab" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这个代码的意思是“键入‘消息1’并在18:52将其发送给联系人X”</p><p id="a238" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">运行上面的代码后，您会得到类似这样的消息:</p><blockquote class="mv mw mx"><p id="cf69" class="kz la lv lb b lc ld ju le lf lg jx lh my lj lk ll mz ln lo lp na lr ls lt lu im bi translated">10秒后，web.WhatsApp.com将打开，15秒后，Whatsapp将发送一条消息。</p></blockquote><p id="7f91" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">就是这样！几秒钟后，您的浏览器将会打开，消息将会发送给您的联系人。</p><p id="6c01" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">重要提示</strong>:当您的浏览器打开时，会弹出一条授予访问权限的消息。您必须接受此消息(如果您不授予权限，库将无法控制您的浏览器)。</p><p id="e6ac" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">您也可以手动执行此操作。在macOS上，你必须进入“系统偏好设置”，点击“安全与隐私”，选择“可访问”，然后勾选“终端”框。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi oa"><img src="../Images/f9835de0359f410fa93e90dbdf29425d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1310/format:webp/1*A_OX3f1lv9xHML5RJrNoMA.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><p id="6195" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">太好了！现在，我们还可以在浏览器中自定义其他操作。</p><p id="05aa" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">假设我们想在发送消息2秒后关闭标签页。我们这样做，运行下面的代码。</p><pre class="kj kk kl km gt nn no np nq aw nr bi"><span id="bb2b" class="nb lx it no b gy ns nt l nu nv"><strong class="no iu">import</strong> pywhatkit</span><span id="8317" class="nb lx it no b gy nz nt l nu nv">pywhatkit.sendwhatmsg(“+1xxxxxxx”, “Message 2”, 18, 55, 15, <strong class="no iu">True</strong>, <strong class="no iu">2</strong>)</span></pre><p id="9daf" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这里的“真”表示我们希望在消息发送后的“X”秒后关闭标签。最后一个参数“2”表示这个“X”秒。</p><h2 id="52d1" class="nb lx it bd ly nc nd dn mc ne nf dp mg li ng nh mi lm ni nj mk lq nk nl mm nm bi translated">第三步:向WhatsApp上的一个群发送消息</h2><p id="8e2f" class="pw-post-body-paragraph kz la it lb b lc mo ju le lf mp jx lh li mq lk ll lm mr lo lp lq ms ls lt lu im bi translated">我们还可以向WhatsApp上的特定群组发送消息，但首先，我们必须获得群组id。</p><p id="0a06" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">要查找id，请按照下列步骤操作:</p><ol class=""><li id="f2f9" class="ob oc it lb b lc ld lf lg li od lm oe lq of lu og oh oi oj bi translated">打开任何你想要的群组，点击“群组信息”部分</li><li id="75b7" class="ob oc it lb b lc ok lf ol li om lm on lq oo lu og oh oi oj bi translated">向下滚动，找到“通过链接邀请”选项。点击该选项</li><li id="2cd4" class="ob oc it lb b lc ok lf ol li om lm on lq oo lu og oh oi oj bi translated">你会看到一个链接。复制链接。链接的后缀部分是组的id。</li></ol><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi op"><img src="../Images/7cf4652fbdac3af00bab9c44e4a8b0ef.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Po9LJPmb4lpAkKGOlXmDdg.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><p id="1825" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">一旦您有了将用于这个测试的组的id，我们就必须使用<code class="fe nw nx ny no b">.sendwhatmsg_to_group</code>方法。这个方法类似于我们在步骤2中使用的方法，但是现在我们插入一个组id。</p><pre class="kj kk kl km gt nn no np nq aw nr bi"><span id="006b" class="nb lx it no b gy ns nt l nu nv"><strong class="no iu">import</strong> pywhatkit</span><span id="db04" class="nb lx it no b gy nz nt l nu nv"><em class="lv"># syntax: group id, message, hour and minutes</em><br/>pywhatkit.sendwhatmsg_to_group("write-id-here", "Message 3", 19, 2)</span></pre><p id="c29b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">就是这样！注意pywhatki还有其他方法。你也可以使用<code class="fe nw nx ny no b">.sendwhatmsg_instantly</code>和<code class="fe nw nx ny no b">.sendwhatmsg_to_group_instantly</code>即时发送信息，但它们对我不起作用。</p><p id="c1c4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">以防万一，下面是我们在本教程中使用的<code class="fe nw nx ny no b">.sendwhatmsg</code>和<code class="fe nw nx ny no b">.sendwhatmsg_to_group</code>的参数。</p><ul class=""><li id="6695" class="ob oc it lb b lc ld lf lg li od lm oe lq of lu oq oh oi oj bi translated"><strong class="lb iu"> phone_no </strong> (str):接收方的手机号码</li><li id="308a" class="ob oc it lb b lc ok lf ol li om lm on lq oo lu oq oh oi oj bi translated"><strong class="lb iu"> group_id </strong> (str):组的id</li><li id="1f8d" class="ob oc it lb b lc ok lf ol li om lm on lq oo lu oq oh oi oj bi translated"><strong class="lb iu">消息</strong> (str):待发送的消息</li><li id="c3ee" class="ob oc it lb b lc ok lf ol li om lm on lq oo lu oq oh oi oj bi translated"><strong class="lb iu"> time_hour </strong> (int，0–24)，<strong class="lb iu"> time_min </strong> (int):预定时间的小时和分钟</li><li id="5706" class="ob oc it lb b lc ok lf ol li om lm on lq oo lu oq oh oi oj bi translated"><strong class="lb iu"> wait_time </strong> (int = 15):等待消息送达的时间(默认设置为15秒)</li><li id="f5a9" class="ob oc it lb b lc ok lf ol li om lm on lq oo lu oq oh oi oj bi translated"><strong class="lb iu"> tab_close </strong> (bool = False):如果您将此项设置为True，那么当消息发送后，标签将在X秒后关闭</li><li id="e178" class="ob oc it lb b lc ok lf ol li om lm on lq oo lu oq oh oi oj bi translated"><strong class="lb iu"> close_time </strong> (int = 3):表示消息发送后标签页关闭的秒数</li></ul></div><div class="ab cl or os hx ot" role="separator"><span class="ou bw bk ov ow ox"/><span class="ou bw bk ov ow ox"/><span class="ou bw bk ov ow"/></div><div class="im in io ip iq"><p id="449e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><a class="ae ky" href="https://frankandrade.ck.page/44559e1ae7" rel="noopener ugc nofollow" target="_blank"><strong class="lb iu"/></a></p><p id="a5f0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果你喜欢阅读这样的故事，并想支持我成为一名作家，可以考虑报名成为一名媒体成员。每月5美元，让您可以无限制地访问数以千计的Python指南和数据科学文章。如果你用<a class="ae ky" href="https://frank-andrade.medium.com/membership" rel="noopener">我的链接</a>注册，我会赚一小笔佣金，不需要你额外付费。</p><div class="oy oz gp gr pa pb"><a href="https://frank-andrade.medium.com/membership" rel="noopener follow" target="_blank"><div class="pc ab fo"><div class="pd ab pe cl cj pf"><h2 class="bd iu gy z fp pg fr fs ph fu fw is bi translated">通过我的推荐链接加入媒体——弗兰克·安德拉德</h2><div class="pi l"><h3 class="bd b gy z fp pg fr fs ph fu fw dk translated">作为一个媒体会员，你的会员费的一部分会给你阅读的作家，你可以完全接触到每一个故事…</h3></div><div class="pj l"><p class="bd b dl z fp pg fr fs ph fu fw dk translated">frank-andrade.medium.com</p></div></div><div class="pk l"><div class="pl l pm pn po pk pp ks pb"/></div></div></a></div></div></div>    
</body>
</html>