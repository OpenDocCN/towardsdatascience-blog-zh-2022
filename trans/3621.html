<html>
<head>
<title>Automate Time Series Feature Engineering in a few lines of Python Code</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用几行Python代码实现时间序列特征工程的自动化</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/automate-time-series-feature-engineering-in-a-few-lines-of-python-code-f28fe52e4704#2022-08-11">https://towardsdatascience.com/automate-time-series-feature-engineering-in-a-few-lines-of-python-code-f28fe52e4704#2022-08-11</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="46a4" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">为您的时间序列用例提取数百个相关特征</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/fa306f20d4434decd1f19fcb0069a322.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*OoG2k4zha5Ri9lfVAqmT6A.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">图片来自<a class="ae ky" href="https://pixabay.com//?utm_source=link-attribution&amp;amp;utm_medium=referral&amp;amp;utm_campaign=image&amp;amp;utm_content=2980690" rel="noopener ugc nofollow" target="_blank">皮克斯拜</a>的<a class="ae ky" href="https://pixabay.com/users/jeshoots-com-264599/?utm_source=link-attribution&amp;amp;utm_medium=referral&amp;amp;utm_campaign=image&amp;amp;utm_content=2980690" rel="noopener ugc nofollow" target="_blank">扬·瓦塞克</a></p></figure><p id="9bbe" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">时间序列数据随着时间的推移重复捕获变量的值，从而产生一系列按时间顺序索引的数据点。在时间序列中，数据具有自然的时间顺序，即特定时间的变量值取决于过去的值。</p><p id="d5af" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">传统的机器学习算法不是为了捕捉时间序列数据的时间顺序而设计的。数据科学家需要执行功能工程，将数据的重要特征捕获到一些指标中。生成大量的时间序列特征并从中提取相关特征是一项耗时且乏味的任务。</p><p id="75f8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在这里<strong class="lb iu"> tsfresh </strong>包发挥了作用，它可以为您的时间序列数据生成标准的数百个通用特征。在本文中，我们将深入讨论tsfresh包的用法和实现。</p><h1 id="43cf" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">tsfresh:</h1><p id="cc62" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated"><strong class="lb iu"> tsfresh </strong>是一个开源包，可以生成数百个相关的时间序列特征，适合训练机器学习模型。从tsfresh生成的特征可用于解决分类、预测和异常值检测用例。</p><h2 id="70b6" class="ms lw it bd lx mt mu dn mb mv mw dp mf li mx my mh lm mz na mj lq nb nc ml nd bi translated">开始使用:</h2><p id="e7d1" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">tsfresh包提供了对时间序列数据执行特征工程的各种功能，包括:</p><ul class=""><li id="b8b1" class="ne nf it lb b lc ld lf lg li ng lm nh lq ni lu nj nk nl nm bi translated">特征生成</li><li id="c06d" class="ne nf it lb b lc nn lf no li np lm nq lq nr lu nj nk nl nm bi translated">特征选择</li><li id="0d48" class="ne nf it lb b lc nn lf no li np lm nq lq nr lu nj nk nl nm bi translated">与大数据的兼容性</li></ul><h2 id="fa2e" class="ms lw it bd lx mt mu dn mb mv mw dp mf li mx my mh lm mz na mj lq nb nc ml nd bi translated">安装和使用:</h2><p id="7e46" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">tsfresh是一个开源Python包，可以通过以下方式安装:</p><pre class="kj kk kl km gt ns nt nu nv aw nw bi"><span id="c90a" class="ms lw it nt b gy nx ny l nz oa"><strong class="nt iu">pip install -U tsfresh</strong><br/># or<br/><strong class="nt iu">conda install -c conda-forge tsfresh</strong></span></pre><h2 id="bfcc" class="ms lw it bd lx mt mu dn mb mv mw dp mf li mx my mh lm mz na mj lq nb nc ml nd bi translated">1)特征生成:</h2><p id="7b1a" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">tsfresh包提供了一个自动特性生成API，可以从1个时间序列变量生成750多个相关特性。生成的特征包括宽范围的光谱，包括:</p><ul class=""><li id="5fd6" class="ne nf it lb b lc ld lf lg li ng lm nh lq ni lu nj nk nl nm bi translated">描述性统计(平均值、最大值、相关性等)</li><li id="efe7" class="ne nf it lb b lc nn lf no li np lm nq lq nr lu nj nk nl nm bi translated">基于物理学的非线性和复杂性指标</li><li id="0f61" class="ne nf it lb b lc nn lf no li np lm nq lq nr lu nj nk nl nm bi translated">数字信号处理相关特性</li><li id="4a98" class="ne nf it lb b lc nn lf no li np lm nq lq nr lu nj nk nl nm bi translated">历史压缩特征</li></ul><p id="46cd" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">用法:</strong></p><p id="291b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">一个数据科学家不需要在特征工程上浪费时间。<code class="fe ob oc od nt b"><strong class="lb iu">tsfresh.extract_features()</strong></code> <strong class="lb iu"> </strong>函数为1个时序变量从多个域生成了789个特征。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oe of l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">(作者代码)</p></figure><blockquote class="og oh oi"><p id="f713" class="kz la oj lb b lc ld ju le lf lg jx lh ok lj lk ll ol ln lo lp om lr ls lt lu im bi translated">人们可以浏览<a class="ae ky" href="https://tsfresh.readthedocs.io/en/latest/text/list_of_features.html" rel="noopener ugc nofollow" target="_blank"> tsfresh文档</a>来获得提取特征的<a class="ae ky" href="https://tsfresh.readthedocs.io/en/latest/text/list_of_features.html" rel="noopener ugc nofollow" target="_blank">概述。</a></p></blockquote><h2 id="7fce" class="ms lw it bd lx mt mu dn mb mv mw dp mf li mx my mh lm mz na mj lq nb nc ml nd bi translated">2)特征选择:</h2><p id="f61e" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">tsfresh包还提供了基于假设检验的特征选择实现，可以识别目标变量的相关特征。为了限制不相关特征的数量，tsfresh部署了fresh算法(fresh代表基于可伸缩假设测试的特征提取)。</p><p id="076c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe ob oc od nt b"><strong class="lb iu">tsfresh.select_features()</strong></code> <strong class="lb iu"> </strong>功能用户可以实现特征选择。</p><h2 id="914d" class="ms lw it bd lx mt mu dn mb mv mw dp mf li mx my mh lm mz na mj lq nb nc ml nd bi translated">3)与大数据的兼容性:</h2><p id="e885" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">当我们有大量的多时间序列数据时。tsfresh还提供API来扩展大量数据的特征生成/提取和特征选择实施:</p><ul class=""><li id="de93" class="ne nf it lb b lc ld lf lg li ng lm nh lq ni lu nj nk nl nm bi translated"><strong class="lb iu">多处理</strong>:默认情况下，tsfresh包可以在多个内核上并行执行特征生成/提取和特征选择实现。</li><li id="8890" class="ne nf it lb b lc nn lf no li np lm nq lq nr lu nj nk nl nm bi translated"><strong class="lb iu"> <em class="oj"> tsfresh自己的分布式框架</em> </strong>用于扩展适合单台机器的数据的实施，并将特性计算分布在多台机器上以加快计算速度。</li><li id="909b" class="ne nf it lb b lc nn lf no li np lm nq lq nr lu nj nk nl nm bi translated"><strong class="lb iu"> <em class="oj"> Apache spark或Dask </em> </strong>对于不适合单机的数据。</li></ul><blockquote class="og oh oi"><p id="e340" class="kz la oj lb b lc ld ju le lf lg jx lh ok lj lk ll ol ln lo lp om lr ls lt lu im bi translated">这里有一篇Nils Braun的精彩文章，解释了使用Dask实现ts fresh(<a class="ae ky" href="https://nils-braun.github.io/tsfresh-on-cluster-1/" rel="noopener ugc nofollow" target="_blank">文章第1部分</a>，<a class="ae ky" href="https://nils-braun.github.io/tsfresh-on-cluster-2/" rel="noopener ugc nofollow" target="_blank">文章第2部分</a>)。</p></blockquote><div class="on oo gp gr op oq"><a href="https://nils-braun.github.io/tsfresh-on-cluster-1/" rel="noopener  ugc nofollow" target="_blank"><div class="or ab fo"><div class="os ab ot cl cj ou"><h2 class="bd iu gy z fp ov fr fs ow fu fw is bi translated">(真正)大数据样本上的时间序列特征提取</h2><div class="ox l"><h3 class="bd b gy z fp ov fr fs ow fu fw dk translated">如今时间序列数据无处不在。从股市趋势到脑电图测量，从工业4.0生产线…</h3></div><div class="oy l"><p class="bd b dl z fp ov fr fs ow fu fw dk translated">尼尔斯-布劳恩</p></div></div><div class="oz l"><div class="pa l pb pc pd oz pe ks oq"/></div></div></a></div></div><div class="ab cl pf pg hx ph" role="separator"><span class="pi bw bk pj pk pl"/><span class="pi bw bk pj pk pl"/><span class="pi bw bk pj pk"/></div><div class="im in io ip iq"><h1 id="9089" class="lv lw it bd lx ly pm ma mb mc pn me mf jz po ka mh kc pp kd mj kf pq kg ml mm bi translated">结论:</h1><p id="c0b7" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">tsfresh是一个方便的包，可以在几行Python代码中为时间序列特性生成和选择相关特性。它自动从基于时间的数据样本的多个域中提取和选择750多个经过实地测试的要素。它减少了数据科学家浪费在特性工程上的大量工作时间。</p><p id="7212" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">通常，时间序列数据是相当大的，tsfresh包也可以解决同样的问题。tsfresh APIs可以应用于使用多处理、dask或spark的大型数据样本。</p><h1 id="9f3e" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">参考资料:</h1><p id="0af8" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">[1]t新鲜文档:【https://tsfresh.readthedocs.io/en/latest/ T21】</p><p id="9925" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">[2]尼尔斯·博朗GitHub文章:<a class="ae ky" href="https://nils-braun.github.io/tsfresh-on-cluster-1/" rel="noopener ugc nofollow" target="_blank">https://nils-braun.github.io/tsfresh-on-cluster-1/</a></p><blockquote class="pr"><p id="b7e4" class="ps pt it bd pu pv pw px py pz qa lu dk translated">感谢您的阅读</p></blockquote></div></div>    
</body>
</html>