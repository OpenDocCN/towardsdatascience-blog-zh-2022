<html>
<head>
<title>4 Simple Tips From Python’s Inventor to Improve Your Code</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">来自Python的Inventor的4个改进代码的简单技巧</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/4-simple-tips-from-pythons-inventor-to-improve-your-code-5429297505a9#2022-08-30">https://towardsdatascience.com/4-simple-tips-from-pythons-inventor-to-improve-your-code-5429297505a9#2022-08-30</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="8c90" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">利用该语言最博学的专家之一提供的易于实施的课程</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/bd4146afe375d5b5983585d62a664ecc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*bcOkjXBum1Y_CsMP"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated"><a class="ae ky" href="https://unsplash.com/@campaign_creators?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">活动发起人</a>在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</p></figure><p id="ea36" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">您可能不知道，Python安装附带了一首美妙而有用的诗，而且是免费的。要访问它，你需要做的就是在终端中键入<code class="fe lv lw lx ly b">import this</code>。然后，您会看到以下内容:</p><blockquote class="lz ma mb"><p id="399d" class="kz la mc lb b lc ld ju le lf lg jx lh md lj lk ll me ln lo lp mf lr ls lt lu im bi translated">“Python的禅”，作者蒂姆·彼得斯</p><p id="19e4" class="kz la mc lb b lc ld ju le lf lg jx lh md lj lk ll me ln lo lp mf lr ls lt lu im bi translated">漂亮总比难看好。<br/>显性比隐性好。简单比复杂好。<br/>复杂总比复杂好。<br/>扁平比嵌套好。<br/>稀不如密。<br/>可读性很重要。特例不足以特殊到违反规则。<br/>虽然实用性胜过纯粹性。错误永远不会悄无声息地过去。<br/>除非明确消音。<br/>面对暧昧，拒绝猜测的诱惑。应该有一种——最好只有一种——显而易见的方法来做这件事。除非你是荷兰人，否则这种方式一开始可能并不明显。<br/>现在总比没有好。<br/>虽然永远也不会比现在*好。如果实现很难解释，这是个坏主意。<br/>如果实现起来容易解释，这也许是个好主意。名称空间是一个非常棒的想法——让我们多做一些吧！"</p></blockquote><p id="9f52" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这首诗的作者是Tim Peters，他是一位著名的软件工程师，也是Python编程语言发展的主要贡献者之一。尽管这是一种既有趣又幽默的语言怪癖，但这首诗也有一些很好的建议。</p><p id="a1b0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们来看看能学到什么。</p><h2 id="0ac6" class="mg mh it bd mi mj mk dn ml mm mn dp mo li mp mq mr lm ms mt mu lq mv mw mx my bi translated"><strong class="ak">请让你的代码易于阅读</strong></h2><blockquote class="lz ma mb"><p id="4044" class="kz la mc lb b lc ld ju le lf lg jx lh md lj lk ll me ln lo lp mf lr ls lt lu im bi translated">可读性很重要。</p></blockquote><p id="c340" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">以下是Python中完全有效的代码块；它实现了它的目标，运行时没有任何错误:</p><pre class="kj kk kl km gt mz ly na nb aw nc bi"><span id="48fa" class="mg mh it ly b gy nd ne l nf ng">x =   'All Too Well'<br/>if x == 'All Too Well': print("Taylor Swift rocks")<br/>else:<br/>               print("You need to re-evaluate your life choices.")</span></pre><p id="11bb" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">事实证明，只要您与空格和制表符保持一致，Python的解释器并不真正关心您将代码间隔开多宽或多均匀。</p><p id="9b2f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">但你知道谁在乎吗？三个非常重要的人，如果你选择编写风格不正确的代码，他们都会讨厌你:</p><ol class=""><li id="8c83" class="nh ni it lb b lc ld lf lg li nj lm nk lq nl lu nm nn no np bi translated">你的老师/导师:这些人必须要么给你的代码打分，要么审查你的代码，他们不会因为不得不多盯着看几分钟来找出从哪里开始而感到兴奋。</li><li id="0598" class="nh ni it lb b lc nq lf nr li ns lm nt lq nu lu nm nn no np bi translated">你的同事:他们需要构建你的代码。如果你不必要地让他们的生活变得更加艰难，他们不会喜欢你。</li><li id="da1e" class="nh ni it lb b lc nq lf nr li ns lm nt lq nu lu nm nn no np bi translated"><strong class="lb iu">你未来的自己</strong>:你很可能会发现自己在未来几天拿出自己的代码，重新开始工作。在那一点上，你真的会痛恨过去的自己写了一堆乱七八糟的东西，而不是清晰、干净和可维护的代码。</li></ol><p id="f89e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这么多人讨厌你的生活不是一种有趣的生活，所以编写符合<a class="ae ky" href="https://peps.python.org/pep-0008/" rel="noopener ugc nofollow" target="_blank"> Python详细且写得很好的风格指南</a>【1】的代码确实对你更有利。确保你的缩进匹配，你的变量名合理，并添加一些适当的注释来引导读者:</p><pre class="kj kk kl km gt mz ly na nb aw nc bi"><span id="0d4f" class="mg mh it ly b gy nd ne l nf ng">my_favorite_song =   'All Too Well'</span><span id="8721" class="mg mh it ly b gy nv ne l nf ng"># This block of code ensures the my_favorite_song variable has<br/># the correct value.<br/>if my_favorite_song == 'All Too Well':<br/>    print("Taylor Swift rocks")<br/>else:<br/>    print("You need to re-evaluate your life choices.")</span></pre><p id="94eb" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">你的导师、同事和未来的自己都会感谢你。</p><h2 id="bfdf" class="mg mh it bd mi mj mk dn ml mm mn dp mo li mp mq mr lm ms mt mu lq mv mw mx my bi translated">当你这么做的时候，把它变漂亮</h2><blockquote class="lz ma mb"><p id="25fb" class="kz la mc lb b lc ld ju le lf lg jx lh md lj lk ll me ln lo lp mf lr ls lt lu im bi translated">漂亮总比难看好。</p></blockquote><p id="2f5b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这里有一个重要的问题需要回答:什么是美丽的代码？</p><p id="444e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这要看上下文。Python是一种为可读性和简单性而设计的语言，因此最简单的代码(仍然容易理解)也是最漂亮和优雅的，这是显而易见的。</p><p id="494c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">有许多相关的例子，但我最喜欢的一个是新程序员中常见的冗余构造。它包括返回<code class="fe lv lw lx ly b">True</code>或<code class="fe lv lw lx ly b">False</code>,这取决于我们感兴趣的变量的值。请考虑以下情况:</p><pre class="kj kk kl km gt mz ly na nb aw nc bi"><span id="ee10" class="mg mh it ly b gy nd ne l nf ng"># This code returns whether or not my code is beautiful</span><span id="c074" class="mg mh it ly b gy nv ne l nf ng">def my_function(is_code_beautiful):<br/>    if is_code_beautiful == True:<br/>        return True<br/>    else:<br/>        return False</span></pre><p id="6261" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">原则上，这段代码没有任何问题。事实上，对于新的程序员来说，它可以说是一个有效的教学工具，因为它提供了思考条件语句实际上要做什么的方法。</p><p id="ddd4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然而，它可以用一种更简单(也更漂亮)的方式来写。由于变量本身已经是一个布尔值(真或假)，我们可以用下面的代码达到同样的效果:</p><pre class="kj kk kl km gt mz ly na nb aw nc bi"><span id="ca0b" class="mg mh it ly b gy nd ne l nf ng"># This code returns whether or not my code is beautiful</span><span id="02d1" class="mg mh it ly b gy nv ne l nf ng">def my_function(is_code_beautiful):<br/>    return is_code_beautiful</span></pre><p id="2e77" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">简单。优雅。蟒蛇皮。</p><p id="b6d4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">太美了。</p><h2 id="2db5" class="mg mh it bd mi mj mk dn ml mm mn dp mo li mp mq mr lm ms mt mu lq mv mw mx my bi translated">复杂不就是复杂吗？</h2><p id="e7ca" class="pw-post-body-paragraph kz la it lb b lc nw ju le lf nx jx lh li ny lk ll lm nz lo lp lq oa ls lt lu im bi translated">号码</p><blockquote class="lz ma mb"><p id="4399" class="kz la mc lb b lc ld ju le lf lg jx lh md lj lk ll me ln lo lp mf lr ls lt lu im bi translated">复杂总比复杂好。</p></blockquote><p id="3ebe" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">很多人把<em class="mc">复杂</em>和<em class="mc">复杂</em>这两个词互换使用，那么我们就从两者的区别说起吧。它们在口语中可能有相似的含义，但在编程上下文中却不相同。</p><p id="4106" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><em class="mc">复杂的</em>代码可能很难理解，但通常是出于必要，因为底层算法本身很复杂(没有人编写过比从头开始编写算法更简单的代码)。<em class="mc">复杂的</em>代码是不必要的复杂，特别是因为有一种更简单的方法来实现相同的解决方案。</p><p id="b441" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们看一个例子。假设我们有以下深度嵌套的列表:</p><pre class="kj kk kl km gt mz ly na nb aw nc bi"><span id="a831" class="mg mh it ly b gy nd ne l nf ng">data = [[[0, 255, 255], [45, 0, 0]], [[0, 0, 0], [100, 100, 100]]]</span></pre><p id="7eb6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">顺便提一句，您可能认为嵌套如此之深的列表没有实际用途，但事实上这就是图像在Python中的存储方式——作为像素行，其中每个像素是由红、绿、蓝(RGB)值组成的3元素列表。</p><p id="a70f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在我目前担任助教的课程中的一个项目中，学生们必须编写一个操作程序，通过颠倒所有行中像素的顺序来水平翻转照片。</p><p id="117e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">当我为这个项目做准备时，这是我最初想到的解决方案:</p><pre class="kj kk kl km gt mz ly na nb aw nc bi"><span id="7113" class="mg mh it ly b gy nd ne l nf ng">for row in data:<br/>    for i in range(len(row) // 2):<br/>        temp = row[i]<br/>        row[i] = row[len(row) - 1 - i]<br/>        row[len(row) - 1 - i] = temp</span></pre><p id="fea8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">起初，我认为这是一个非常漂亮的反转列表的解决方案。也就是说，直到我的教授指出我可以这样做:</p><pre class="kj kk kl km gt mz ly na nb aw nc bi"><span id="e955" class="mg mh it ly b gy nd ne l nf ng">for row in new_pixel_data:<br/>    row.reverse()</span></pre><p id="0b46" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这种差异令人震惊。</p><p id="fa61" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">有人可能会说第二种解决方案在原理上仍然很复杂，因为反转列表是一项相当复杂的任务。然而，非常明显的是，与我的第一个手动解决方案相比，它要简单得多，因此也更容易理解。</p><p id="4423" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">请注意，您的代码是否复杂很大程度上取决于上下文。在上面的例子中，我的初始代码很复杂，因为有更干净的代码可以达到同样的目的。如果没有反转Python列表的简单方法，那么我的代码会很好(如果仍然复杂的话),仅仅是因为它是最好的选择。</p><p id="7521" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">一个很好的经验法则是:在你编写超级复杂的代码之前，检查一下是否有人已经做了一些工作来使你的生活变得更容易。</p><h2 id="27f8" class="mg mh it bd mi mj mk dn ml mm mn dp mo li mp mq mr lm ms mt mu lq mv mw mx my bi translated">检查错误！</h2><blockquote class="lz ma mb"><p id="f3b7" class="kz la mc lb b lc ld ju le lf lg jx lh md lj lk ll me ln lo lp mf lr ls lt lu im bi translated">错误永远不会无声无息地过去。<br/>除非明确消音。</p></blockquote><p id="23a3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">有趣的是，这是一个在编程入门课上经常被忽略的话题。我自己的第一门编程课程只是简单地提到了捕捉错误，从未明确地教授如何去做。这是一项重要的技能，主要是因为它能让你的程序在出错时给用户更多的细节(或者甚至保持程序平稳运行)。</p><p id="78d0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在Python中处理错误最简单的方法是通过<em class="mc"> try-except </em>块。您像平常一样在<code class="fe lv lw lx ly b">try</code>中编写代码，如果有错误，代码开始运行<code class="fe lv lw lx ly b">except</code>块:</p><pre class="kj kk kl km gt mz ly na nb aw nc bi"><span id="e5b5" class="mg mh it ly b gy nd ne l nf ng">&gt;&gt;&gt; try:<br/>...     print(x)<br/>... except:<br/>...     print("You never defined your variable.")<br/>...<br/>You never defined your variable.</span></pre><p id="3cd6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">您还可以捕捉特定的错误:</p><pre class="kj kk kl km gt mz ly na nb aw nc bi"><span id="c247" class="mg mh it ly b gy nd ne l nf ng">&gt;&gt;&gt; try:<br/>...     1/0<br/>... except ZeroDivisionError:<br/>...     print("Can't divide by 0; sorry m8")<br/>...<br/>Can't divide by 0; sorry m8</span></pre><p id="a305" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">捕捉错误使您能够在程序中断时继续运行。例如，下面的代码因<code class="fe lv lw lx ly b">ZeroDivisionError</code>而失败，因此我们也不会计算循环中后面的表达式:</p><pre class="kj kk kl km gt mz ly na nb aw nc bi"><span id="9a4f" class="mg mh it ly b gy nd ne l nf ng">&gt;&gt;&gt; for i in range(3):<br/>...     print(1/i)<br/>...<br/>Traceback (most recent call last):<br/>  File "&lt;stdin&gt;", line 2, in &lt;module&gt;<br/>ZeroDivisionError: division by zero</span></pre><p id="710c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">但是如果您添加一个<em class="mc"> try-except </em>块，您会得到更好的结果:</p><pre class="kj kk kl km gt mz ly na nb aw nc bi"><span id="3694" class="mg mh it ly b gy nd ne l nf ng">&gt;&gt;&gt; for i in range(3):<br/>...     try:<br/>...             print(1/i)<br/>...     except ZeroDivisionError:<br/>...             print("Can't divide by 0; sorry m8")<br/>...<br/>Can't divide by 0; sorry m8<br/>1.0<br/>0.5</span></pre><p id="8b82" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">感觉很好，不是吗？</p><h2 id="a462" class="mg mh it bd mi mj mk dn ml mm mn dp mo li mp mq mr lm ms mt mu lq mv mw mx my bi translated">总结和最终想法</h2><p id="0bb5" class="pw-post-body-paragraph kz la it lb b lc nw ju le lf nx jx lh li ny lk ll lm nz lo lp lq oa ls lt lu im bi translated">这是给你的Pythonic提示表:</p><ol class=""><li id="cd92" class="nh ni it lb b lc ld lf lg li nj lm nk lq nl lu nm nn no np bi translated"><strong class="lb iu">可读性计数</strong>。清晰地格式化和组织你的代码。</li><li id="3552" class="nh ni it lb b lc nq lf nr li ns lm nt lq nu lu nm nn no np bi translated"><strong class="lb iu">漂亮总比难看好</strong>。避免多余的解决方案。</li><li id="4c00" class="nh ni it lb b lc nq lf nr li ns lm nt lq nu lu nm nn no np bi translated"><strong class="lb iu">复杂比复杂好</strong>。如果你的代码必须是复杂的，那没问题，但是如果它是不必要的复杂，那就不好了。</li><li id="2e4c" class="nh ni it lb b lc nq lf nr li ns lm nt lq nu lu nm nn no np bi translated"><strong class="lb iu">错误永远不会悄无声息地过去</strong>。学会处理错误——这值得你花时间！</li></ol><p id="fd39" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">就这样，我祝你在Pythonic的冒险中好运。</p></div><div class="ab cl ob oc hx od" role="separator"><span class="oe bw bk of og oh"/><span class="oe bw bk of og oh"/><span class="oe bw bk of og"/></div><div class="im in io ip iq"><p id="d981" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">想擅长Python？</strong> <a class="ae ky" href="https://witty-speaker-6901.ck.page/0977670a91" rel="noopener ugc nofollow" target="_blank"> <strong class="lb iu">获取独家，免费获取我简单易懂的攻略</strong> </a> <strong class="lb iu">。想在介质上无限阅读故事？用我下面的推荐链接注册！</strong></p><div class="oi oj gp gr ok ol"><a href="https://murtaza5152-ali.medium.com/?source=entity_driven_subscription-607fa603b7ce---------------------------------------" rel="noopener follow" target="_blank"><div class="om ab fo"><div class="on ab oo cl cj op"><h2 class="bd iu gy z fp oq fr fs or fu fw is bi translated">穆尔塔扎阿里培养基</h2><div class="os l"><h3 class="bd b gy z fp oq fr fs or fu fw dk translated">阅读媒介上穆尔塔扎·阿里的作品。华盛顿大学的博士生。对人机感兴趣…</h3></div><div class="ot l"><p class="bd b dl z fp oq fr fs or fu fw dk translated">murtaza5152-ali.medium.com</p></div></div><div class="ou l"><div class="ov l ow ox oy ou oz ks ol"/></div></div></a></div><p id="80d8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><em class="mc">我叫穆尔塔扎·阿里，是华盛顿大学研究人机交互的博士生。我喜欢写关于教育、编程、生活以及偶尔的随想。</em></p><h2 id="2e6d" class="mg mh it bd mi mj mk dn ml mm mn dp mo li mp mq mr lm ms mt mu lq mv mw mx my bi translated">参考</h2><p id="0c2f" class="pw-post-body-paragraph kz la it lb b lc nw ju le lf nx jx lh li ny lk ll lm nz lo lp lq oa ls lt lu im bi translated">[1]<a class="ae ky" href="https://peps.python.org/pep-0008/" rel="noopener ugc nofollow" target="_blank">https://peps.python.org/pep-0008/</a></p></div></div>    
</body>
</html>