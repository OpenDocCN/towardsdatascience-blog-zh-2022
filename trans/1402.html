<html>
<head>
<title>When SQL warehouse meets exploratory analysis</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">当SQL仓库遇到探索性分析</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/when-sql-warehouse-meets-exploratory-analysis-dd74c7812225#2022-04-06">https://towardsdatascience.com/when-sql-warehouse-meets-exploratory-analysis-dd74c7812225#2022-04-06</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="ed16" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">探索更快的选项</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/469eb52f2350c853ff49662fc7f21706.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*3QjKd7wWGvF_AjxV"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">由<a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的<a class="ae kv" href="https://unsplash.com/@ventiviews?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Venti Views </a>拍摄的照片</p></figure><p id="4cde" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi ls translated"><span class="l lt lu lv bm lw lx ly lz ma di">在</span>现代数据栈时代，云SQL仓库对于数据从业者来说并不陌生。Snowflake、BigQuery和Redshift等主要公司已经帮助数千家企业简化了他们的数据基础架构。人们用它们来</p><ol class=""><li id="46e5" class="mb mc iq ky b kz la lc ld lf md lj me ln mf lr mg mh mi mj bi translated">在表中接收和存储数据。</li><li id="4716" class="mb mc iq ky b kz mk lc ml lf mm lj mn ln mo lr mg mh mi mj bi translated">运行查询和作业来转换数据。</li><li id="6877" class="mb mc iq ky b kz mk lc ml lf mm lj mn ln mo lr mg mh mi mj bi translated">通过消费数据构建应用或获得洞察力。</li></ol><p id="2f0f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">总的来说，所有流行的SQL仓库在成本效益方面都做得很好，适用于任何规模的企业，它们都设计有云原生功能，包括但不限于:</p><ul class=""><li id="0d3a" class="mb mc iq ky b kz la lc ld lf md lj me ln mf lr mp mh mi mj bi translated"><strong class="ky ir">连接</strong> — it可以连接数千个云服务，为客户构建端到端的解决方案，包括ETL/ELT、云功能和数据分析/BI工具。</li><li id="550e" class="mb mc iq ky b kz mk lc ml lf mm lj mn ln mo lr mp mh mi mj bi translated"><strong class="ky ir">弹性</strong> —它可以根据实际需要独立、动态地扩展存储和计算。</li><li id="6e59" class="mb mc iq ky b kz mk lc ml lf mm lj mn ln mo lr mp mh mi mj bi translated"><strong class="ky ir">可用性</strong> —它构建强大可靠的软件，并为不想接受不必要挑战的所有客户重复使用，客户以超低成本享受高可用性。</li></ul><h1 id="2465" class="mq mr iq bd ms mt mu mv mw mx my mz na jw nb jx nc jz nd ka ne kc nf kd ng nh bi translated">使用SQL仓库的最终目的</h1><p id="b672" class="pw-post-body-paragraph kw kx iq ky b kz ni jr lb lc nj ju le lf nk lh li lj nl ll lm ln nm lp lq lr ij bi translated">信不信由你，无论基础设施构建得多么复杂，人们使用SQL warehouse的最终目的都很简单— <strong class="ky ir">获得洞见</strong>！</p><ul class=""><li id="4b83" class="mb mc iq ky b kz la lc ld lf md lj me ln mf lr mp mh mi mj bi translated">对人而言:对你的业务建立更好的理解。</li><li id="3315" class="mb mc iq ky b kz mk lc ml lf mm lj mn ln mo lr mp mh mi mj bi translated">对于产品/服务:建立更好的API或AI模型！</li></ul><p id="89d2" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">获得洞察力也经常被称为最后一英里价值，人们使用它来进行沟通，以做出更好的数据驱动的决策。为了向你的听众传达一种“洞察力”，你需要经历这些步骤，并且做得很好:</p><ol class=""><li id="6d41" class="mb mc iq ky b kz la lc ld lf md lj me ln mf lr mg mh mi mj bi translated">洞察力的发现:这通常也被称为探索性分析。这就像金矿开采，如果配备了智能和快速的工具，你应该可以轻松获得它们。</li><li id="e36a" class="mb mc iq ky b kz mk lc ml lf mm lj mn ln mo lr mg mh mi mj bi translated"><strong class="ky ir">洞见的讲故事</strong>在短时间内将你从专家角度的理解简洁地传递给你的听众的理解。</li><li id="1b7d" class="mb mc iq ky b kz mk lc ml lf mm lj mn ln mo lr mg mh mi mj bi translated"><strong class="ky ir">洞察力的沟通</strong>:以故事的形式向你的听众分享和展示“洞察力”,可以是会议中的PPT，也可以是聊天应用中分享的卡片。</li></ol><p id="c9b8" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如你所见，更好的沟通是我们为人们所做的所有数据工作的核心价值。</p><h1 id="9b2f" class="mq mr iq bd ms mt mu mv mw mx my mz na jw nb jx nc jz nd ka ne kc nf kd ng nh bi translated">SQL仓库遇到探索性分析时的问题</h1><p id="a54a" class="pw-post-body-paragraph kw kx iq ky b kz ni jr lb lc nj ju le lf nk lh li lj nl ll lm ln nm lp lq lr ij bi translated">正如我们前面所讨论的，现代SQL仓库总体来说很棒，但是在最后一英里中不如“获得洞察力”部分好，为什么呢？</p><p id="51b0" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">以下是一些观察结果:</p><ul class=""><li id="bf90" class="mb mc iq ky b kz la lc ld lf md lj me ln mf lr mp mh mi mj bi translated"><strong class="ky ir">接口:</strong>为了简单起见，通常SQL是与一个仓库进行交互的标准接口，当然这也是为什么叫SQL仓库的原因。然而，探索性分析喜欢直观的UI，支持切片和切块的快速交互迭代。</li><li id="150d" class="mb mc iq ky b kz mk lc ml lf mm lj mn ln mo lr mp mh mi mj bi translated"><strong class="ky ir">速度:</strong>他们的基础架构针对“大规模”进行了优化，处理的数据量越多(例如大型连接)，节省的成本就越多。类似地，它服务的客户端越多，它提供的效率就越高，因此这些查询通常很慢。然而，探索性分析喜欢挖掘同一个数据集，用户不应该等待任何改变。</li><li id="1371" class="mb mc iq ky b kz mk lc ml lf mm lj mn ln mo lr mp mh mi mj bi translated"><strong class="ky ir">成本:</strong>迭代大型慢速查询不仅耗时，而且费用昂贵，你的账单通常是按“时间*资源”计算的，重复同样的昂贵查询，只有微小的变化，会很快堆积你的账单。</li></ul><p id="9608" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">随着时间的推移，我希望SQL warehouse在探索性分析方面会有所改进，但目前还不是很好。</p><h1 id="8b5d" class="mq mr iq bd ms mt mu mv mw mx my mz na jw nb jx nc jz nd ka ne kc nf kd ng nh bi translated">改进的选项</h1><p id="178a" class="pw-post-body-paragraph kw kx iq ky b kz ni jr lb lc nj ju le lf nk lh li lj nl ll lm ln nm lp lq lr ij bi translated">差距现在很明显:SQL warehouse擅长大数据处理，比如大连接，这是一个高资源消耗的操作，从调度，以及资源分配到作业执行。然而，探索性分析大部分时间集中在单个立方体上，它需要具有亚秒周转的交互式用户体验。</p><p id="791d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">那么我们如何解决这个问题呢？</p><p id="e047" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">关键是避免昂贵的部分被重复执行。根据关键点，根据哪一方付出努力，至少有3个分类选项:</p><ol class=""><li id="b9d2" class="mb mc iq ky b kz la lc ld lf md lj me ln mf lr mg mh mi mj bi translated"><strong class="ky ir">用户</strong>:创建一个中间表，用于探索性分析的钻取。</li><li id="8e71" class="mb mc iq ky b kz mk lc ml lf mm lj mn ln mo lr mg mh mi mj bi translated"><strong class="ky ir">仓库</strong>:透明缓存每一步的结果，尽可能重用缓存。</li><li id="4031" class="mb mc iq ky b kz mk lc ml lf mm lj mn ln mo lr mg mh mi mj bi translated"><strong class="ky ir">第三方</strong>:将探索性分析功能与数据建模功能分开，让各方负责一件事。事实上，一些现有的BI工具提供了这种类型的功能，例如PowerBI服务。</li></ol><p id="1a5e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">利弊很容易辨别:</p><p id="52cd" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">选项1要求用户成为专家，因此维护负担落在用户身上，如果他们已经为服务付费，谁还想要更多的工作呢？</p><p id="b8c4" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">选项2的实现和运行成本都很高，尤其是当用户行为不可预测时，虽然我相信仓库供应商有动机，但它可能永远不会成为他们路线图中的优先事项。</p><p id="0e96" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">选项3似乎是解决这个问题的最有希望的方法，责任分离很好，钻井体验也很棒。</p><h1 id="343a" class="mq mr iq bd ms mt mu mv mw mx my mz na jw nb jx nc jz nd ka ne kc nf kd ng nh bi translated">案例研究:SQL数据仓库的瞬间探索</h1><p id="d791" class="pw-post-body-paragraph kw kx iq ky b kz ni jr lb lc nj ju le lf nk lh li lj nl ll lm ln nm lp lq lr ij bi translated">让我们以<a class="ae kv" href="https://columns.ai" rel="noopener ugc nofollow" target="_blank">列</a>为例来展示分布式中间层是如何帮助我们的。</p><p id="246e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在这种情况下，我们在任何数据上构建一个统一的分析API，它包括一个与主要SQL仓库(如雪花)一起工作的数据模型。它的分布式查询引擎使得探索性分析总是在不到一秒的时间内得到回答，即使有数十亿行。</p><p id="fc9c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这个<a class="ae kv" href="https://www.loom.com/share/dd9ea4cc0f9c4bc7ba11bf628b4d17aa" rel="noopener ugc nofollow" target="_blank">视频</a>展示了一个演示，展示了当我们将探索性分析从SQL数据模型中分离出来时的体验。</p><p id="ba18" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我希望这篇文章有助于带来新的想法。感谢阅读！</p></div></div>    
</body>
</html>