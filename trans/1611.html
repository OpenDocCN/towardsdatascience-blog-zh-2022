<html>
<head>
<title>Build an Anomaly Detection Pipeline with Isolation Forest and Kedro</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用隔离林和Kedro构建异常检测管道</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/build-an-anomaly-detection-pipeline-with-isolation-forest-and-kedro-db5f4437bfab#2022-04-18">https://towardsdatascience.com/build-an-anomaly-detection-pipeline-with-isolation-forest-and-kedro-db5f4437bfab#2022-04-18</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="0096" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">开发和管理用于检测欺诈性信用卡交易的数据科学管道</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/facf73b4a386ba4e865187ed88b51f25.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*SNf7hKsNyuR-hEZn"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">照片由<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的<a class="ae ky" href="https://unsplash.com/@tinusphtography?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> timea dombi </a>拍摄</p></figure><p id="3704" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">通过机器学习的强大功能，数据科学有望在所有行业产生巨大的商业价值。</p><p id="e0d2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然而，<a class="ae ky" href="https://www.gartner.com/en/newsroom/press-releases/2021-11-22-gartner-forecasts-worldwide-artificial-intelligence-software-market-to-reach-62-billion-in-2022" rel="noopener ugc nofollow" target="_blank"> Gartner </a>最近的一份报告显示，尽管有足够的数据和意图，大多数数据科学项目仍无法超越实验。</p><p id="a222" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">为了释放数据科学的全部潜力，机器学习模型需要作为可扩展的端到端系统部署在现实世界中，并自动管理。</p><p id="3270" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">本文探讨了数据科学管道背后的概念，以及如何利用Kedro创建金融数据异常检测管道。</p><blockquote class="lv lw lx"><p id="3c20" class="kz la ly lb b lc ld ju le lf lg jx lh lz lj lk ll ma ln lo lp mb lr ls lt lu im bi translated"><strong class="lb iu">本文首发于</strong> <a class="ae ky" href="https://neptune.ai/blog/data-science-pipelines-with-kedro" rel="noopener ugc nofollow" target="_blank"> <strong class="lb iu">海王。艾</strong> </a></p></blockquote><h1 id="acd5" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">内容</h1><blockquote class="lv lw lx"><p id="b409" class="kz la ly lb b lc ld ju le lf lg jx lh lz lj lk ll ma ln lo lp mb lr ls lt lu im bi translated"><strong class="lb iu"><em class="it">(1)</em></strong><em class="it"/><a class="ae ky" href="#0eae" rel="noopener ugc nofollow"><em class="it">什么是数据科学管道？</em></a><em class="it"><br/></em><strong class="lb iu"><em class="it">(2)</em></strong><a class="ae ky" href="#8f75" rel="noopener ugc nofollow"><em class="it">什么是Kedro？</em></a><em class="it"><br/></em><strong class="lb iu"><em class="it">(3)</em></strong><em class="it"/><a class="ae ky" href="#14ab" rel="noopener ugc nofollow"><em class="it">为什么要Kedro？</em></a><em class="it"><br/></em><strong class="lb iu"><em class="it">(4)</em></strong><a class="ae ky" href="#64a6" rel="noopener ugc nofollow"><em class="it">分步指南—异常检测的数据科学管道</em> </a></p></blockquote></div><div class="ab cl mu mv hx mw" role="separator"><span class="mx bw bk my mz na"/><span class="mx bw bk my mz na"/><span class="mx bw bk my mz"/></div><div class="im in io ip iq"><h1 id="0eae" class="mc md it bd me mf nb mh mi mj nc ml mm jz nd ka mo kc ne kd mq kf nf kg ms mt bi translated">(1)什么是数据科学管道？</h1><p id="eb89" class="pw-post-body-paragraph kz la it lb b lc ng ju le lf nh jx lh li ni lk ll lm nj lo lp lq nk ls lt lu im bi translated">顾名思义，数据科学管道包括各种组件的无缝链接，以促进数据按预期顺利移动。</p><p id="6953" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果我们在网上搜索数据科学管道，我们会看到令人眼花缭乱的管道设计。好消息是，我们可以将这些管道归结为六个核心要素:</p><ol class=""><li id="246e" class="nl nm it lb b lc ld lf lg li nn lm no lq np lu nq nr ns nt bi translated"><strong class="lb iu">数据检索和摄取</strong></li><li id="fa38" class="nl nm it lb b lc nu lf nv li nw lm nx lq ny lu nq nr ns nt bi translated"><strong class="lb iu">数据准备</strong></li><li id="9747" class="nl nm it lb b lc nu lf nv li nw lm nx lq ny lu nq nr ns nt bi translated"><strong class="lb iu">模特培训</strong></li><li id="81da" class="nl nm it lb b lc nu lf nv li nw lm nx lq ny lu nq nr ns nt bi translated"><strong class="lb iu">模型评估和调整</strong></li><li id="2eef" class="nl nm it lb b lc nu lf nv li nw lm nx lq ny lu nq nr ns nt bi translated"><strong class="lb iu">模型部署</strong></li><li id="a75d" class="nl nm it lb b lc nu lf nv li nw lm nx lq ny lu nq nr ns nt bi translated"><strong class="lb iu">监控</strong></li></ol><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nz"><img src="../Images/c1e869a2cf2ac6d4fbd7f3d76a3000c4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*oM2EvAyrLlXO4L1GusD6vQ.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><p id="13aa" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">上图说明了这六个组件是如何连接起来形成一个管道的，在这个管道中，机器学习模型可以在生产环境中提供最佳结果。</p><h2 id="ef13" class="oa md it bd me ob oc dn mi od oe dp mm li of og mo lm oh oi mq lq oj ok ms ol bi translated">(1)数据检索和摄取</h2><p id="933f" class="pw-post-body-paragraph kz la it lb b lc ng ju le lf nh jx lh li ni lk ll lm nj lo lp lq nk ls lt lu im bi translated">数据是所有数据科学项目的生命线，因此第一步是从各种数据源中识别相关的原始数据。</p><p id="99b6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这一步比听起来更具挑战性，因为数据通常以不同的格式存储在不同的孤岛中(例如，第三方来源、内部数据库)。</p><p id="d824" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">一旦所需的数据集被正确识别，它们就被提取和整合以用于下游处理。</p></div><div class="ab cl mu mv hx mw" role="separator"><span class="mx bw bk my mz na"/><span class="mx bw bk my mz na"/><span class="mx bw bk my mz"/></div><div class="im in io ip iq"><h2 id="b244" class="oa md it bd me ob oc dn mi od oe dp mm li of og mo lm oh oi mq lq oj ok ms ol bi translated">(2)数据准备</h2><p id="731a" class="pw-post-body-paragraph kz la it lb b lc ng ju le lf nh jx lh li ni lk ll lm nj lo lp lq nk ls lt lu im bi translated">数据洞察的质量取决于数据质量。因此，数据准备花费最多的时间和精力也就不足为奇了。</p><p id="7f5d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">用于数据准备的技术基于手边的任务(例如，分类、回归等)。)并包括<strong class="lb iu">数据</strong>清理、<strong class="lb iu">数据</strong>变换、<strong class="lb iu">特征</strong>选择、<strong class="lb iu">特征</strong>工程等类别。</p></div><div class="ab cl mu mv hx mw" role="separator"><span class="mx bw bk my mz na"/><span class="mx bw bk my mz na"/><span class="mx bw bk my mz"/></div><div class="im in io ip iq"><h2 id="dadf" class="oa md it bd me ob oc dn mi od oe dp mm li of og mo lm oh oi mq lq oj ok ms ol bi translated">(3)模型训练</h2><p id="70f4" class="pw-post-body-paragraph kz la it lb b lc ng ju le lf nh jx lh li ni lk ll lm nj lo lp lq nk ls lt lu im bi translated">模型训练是模型在数据中潜行，学习潜在的模式。经过训练的模型将被表示为从数据中捕获模式信息的统计函数。</p><p id="4811" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">要实现的机器学习模型的选择取决于实际任务、数据的性质和业务需求。</p></div><div class="ab cl mu mv hx mw" role="separator"><span class="mx bw bk my mz na"/><span class="mx bw bk my mz na"/><span class="mx bw bk my mz"/></div><div class="im in io ip iq"><h2 id="26bb" class="oa md it bd me ob oc dn mi od oe dp mm li of og mo lm oh oi mq lq oj ok ms ol bi translated">(4)模型评估和调整</h2><p id="4809" class="pw-post-body-paragraph kz la it lb b lc ng ju le lf nh jx lh li ni lk ll lm nj lo lp lq nk ls lt lu im bi translated">一旦模型训练完成，评估其表现是至关重要的。评估是通过让模型对以前没有见过的数据进行预测来完成的。它代表了它在现实世界中的表现。</p><p id="ac90" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">评估指标有助于指导优化模型性能所需的更改(例如，选择不同的模型、调整超参数配置等)。).</p><p id="09bd" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">机器学习开发周期是高度迭代的，因为有许多方法可以基于度量和错误分析来调整模型。</p></div><div class="ab cl mu mv hx mw" role="separator"><span class="mx bw bk my mz na"/><span class="mx bw bk my mz na"/><span class="mx bw bk my mz"/></div><div class="im in io ip iq"><h2 id="5bb2" class="oa md it bd me ob oc dn mi od oe dp mm li of og mo lm oh oi mq lq oj ok ms ol bi translated">(5)部署</h2><p id="b099" class="pw-post-body-paragraph kz la it lb b lc ng ju le lf nh jx lh li ni lk ll lm nj lo lp lq nk ls lt lu im bi translated">一旦我们确信我们的模型可以提供出色的预测，我们就通过将它部署到生产环境中来将模型暴露给实际的操作。</p><p id="e976" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">模型部署是将模型集成到生产环境中的关键步骤，在生产环境中，模型接收实际数据并为数据驱动的业务决策生成输出。</p></div><div class="ab cl mu mv hx mw" role="separator"><span class="mx bw bk my mz na"/><span class="mx bw bk my mz na"/><span class="mx bw bk my mz"/></div><div class="im in io ip iq"><h2 id="b52c" class="oa md it bd me ob oc dn mi od oe dp mm li of og mo lm oh oi mq lq oj ok ms ol bi translated">(6)监测</h2><p id="1ae9" class="pw-post-body-paragraph kz la it lb b lc ng ju le lf nh jx lh li ni lk ll lm nj lo lp lq nk ls lt lu im bi translated">为了保持强大且持续运行的数据科学管道，我们必须监控其在部署后的表现。</p><p id="ca2a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">除了模型性能和数据质量，监控指标还可以包括操作方面，如资源利用率和模型延迟。</p><p id="a9e1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在成熟的MLOps设置中，我们可以根据预测性能或新数据的可用性触发新的模型训练迭代。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi om"><img src="../Images/5fe605e8ecb69c0fba993426e819d3b4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*J3iuhnXZc8Hf-HVi.gif"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">模型监控仪表板示例| <a class="ae ky" href="https://neptune.ai/blog/ml-model-monitoring-best-tools" rel="noopener ugc nofollow" target="_blank">来源</a>(经许可使用)</p></figure></div><div class="ab cl mu mv hx mw" role="separator"><span class="mx bw bk my mz na"/><span class="mx bw bk my mz na"/><span class="mx bw bk my mz"/></div><div class="im in io ip iq"><h1 id="8f75" class="mc md it bd me mf nb mh mi mj nc ml mm jz nd ka mo kc ne kd mq kf nf kg ms mt bi translated">(2)什么是Kedro？</h1><p id="15e7" class="pw-post-body-paragraph kz la it lb b lc ng ju le lf nh jx lh li ni lk ll lm nj lo lp lq nk ls lt lu im bi translated">数据科学管道的重要性刺激了许多有效构建和管理它们的框架的开发。一个这样的框架是<strong class="lb iu"> Kedro </strong>，这是本文的重点。</p><p id="6ddc" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu"> Kedro </strong>是一个开源的Python框架，用于创建可复制的、可维护的、模块化的<strong class="lb iu"> </strong>数据科学代码。它有助于加速数据管道，增强数据科学原型，并促进管道的再现性。</p><p id="4ead" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Kedro将软件工程概念应用于开发生产就绪的机器学习代码，以减少成功部署模型所需的时间和精力。</p><p id="beba" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">它的影响是通过消除低质量代码的重新设计工作和无缝协作的项目模板的标准化来实现的。</p><p id="d29e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们看看Kedro中的应用概念:</p><ul class=""><li id="7d6a" class="nl nm it lb b lc ld lf lg li nn lm no lq np lu on nr ns nt bi translated"><strong class="lb iu">再现性</strong>:准确一致地跨不同管道运行和环境重新创建工作流程步骤的能力。</li><li id="ce2c" class="nl nm it lb b lc nu lf nv li nw lm nx lq ny lu on nr ns nt bi translated"><strong class="lb iu">模块化</strong>:将大的代码块分解成更小的、独立的、易于理解的单元，这些单元易于测试和修改。</li><li id="5149" class="nl nm it lb b lc nu lf nv li nw lm nx lq ny lu on nr ns nt bi translated"><strong class="lb iu">可维护性</strong>:使用标准代码模板，允许团队成员容易地理解和维护任何项目的设置，从而促进协作开发的标准化方法</li><li id="086b" class="nl nm it lb b lc nu lf nv li nw lm nx lq ny lu on nr ns nt bi translated"><strong class="lb iu">版本控制</strong>:精确跟踪每个管道运行中使用的数据、配置和机器学习模型。</li><li id="6269" class="nl nm it lb b lc nu lf nv li nw lm nx lq ny lu on nr ns nt bi translated"><strong class="lb iu">文档</strong>:清晰的结构化信息，便于理解</li><li id="1569" class="nl nm it lb b lc nu lf nv li nw lm nx lq ny lu on nr ns nt bi translated"><strong class="lb iu">无缝打包</strong>:允许数据科学项目被记录并有效地运送到生产中(使用像Airflow或Docker这样的工具)。</li></ul></div><div class="ab cl mu mv hx mw" role="separator"><span class="mx bw bk my mz na"/><span class="mx bw bk my mz na"/><span class="mx bw bk my mz"/></div><div class="im in io ip iq"><h1 id="14ab" class="mc md it bd me mf nb mh mi mj nc ml mm jz nd ka mo kc ne kd mq kf nf kg ms mt bi translated">(3)为什么是Kedro？</h1><p id="1968" class="pw-post-body-paragraph kz la it lb b lc ng ju le lf nh jx lh li ni lk ll lm nj lo lp lq nk ls lt lu im bi translated">将数据科学项目从试点开发带入生产的过程充满了挑战。一些重大困难包括:</p><ul class=""><li id="8444" class="nl nm it lb b lc ld lf lg li nn lm no lq np lu on nr ns nt bi translated">需要为生产环境重写代码，导致项目严重延迟</li><li id="04ba" class="nl nm it lb b lc nu lf nv li nw lm nx lq ny lu on nr ns nt bi translated">混乱的项目结构使得协作充满挑战</li><li id="784f" class="nl nm it lb b lc nu lf nv li nw lm nx lq ny lu on nr ns nt bi translated">难以追踪的数据流</li><li id="fed4" class="nl nm it lb b lc nu lf nv li nw lm nx lq ny lu on nr ns nt bi translated">过于冗长且难以测试或重用的功能</li><li id="f744" class="nl nm it lb b lc nu lf nv li nw lm nx lq ny lu on nr ns nt bi translated">难以理解的函数之间的关系</li></ul><p id="03e2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">QuantumBlack团队开发了Kedro来应对上述挑战。它诞生于这样一种信念，即数据科学代码应该从一开始就为生产做好准备。</p></div><div class="ab cl mu mv hx mw" role="separator"><span class="mx bw bk my mz na"/><span class="mx bw bk my mz na"/><span class="mx bw bk my mz"/></div><div class="im in io ip iq"><h1 id="64a6" class="mc md it bd me mf nb mh mi mj nc ml mm jz nd ka mo kc ne kd mq kf nf kg ms mt bi translated">(4)分步指南:构建用于异常检测的数据科学管道</h1><p id="4971" class="pw-post-body-paragraph kz la it lb b lc ng ju le lf nh jx lh li ni lk ll lm nj lo lp lq nk ls lt lu im bi translated">让我们进入激动人心的部分，通过一个实际动手的项目来学习。</p><p id="69f5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">项目用例围绕着金融<strong class="lb iu">欺诈检测</strong>。<strong class="lb iu"> </strong>我们将使用<strong class="lb iu">隔离森林</strong>作为主要的机器学习模型，构建一个<strong class="lb iu">异常检测管道</strong>来识别信用卡交易中的异常。</p><p id="9485" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><a class="ae ky" href="https://github.com/Fraud-Detection-Handbook" rel="noopener ugc nofollow" target="_blank">信用卡交易数据</a>由Worldline和<a class="ae ky" href="http://mlg.ulb.ac.be/" rel="noopener ugc nofollow" target="_blank">机器学习小组</a>合作获得。这是对真实世界信用卡交易的真实模拟，旨在包括复杂的欺诈检测问题。</p><p id="f22d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">以下可视化显示了我们最终的异常检测管道，并作为我们将在以下部分构建的<strong class="lb iu">蓝图</strong>。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oo"><img src="../Images/278af09fe7b5463f052a3c6b1f6d9b2b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FXJCYCoXDvX5ivlkv2AEyA.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">项目结构|作者图片</p></figure><p id="c819" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">您可以随时查看这个项目的<a class="ae ky" href="https://github.com/kennethleungty/Anomaly-Detection-Pipeline-Kedro" rel="noopener ugc nofollow" target="_blank"> <strong class="lb iu"> GitHub repo </strong> </a>。</p></div><div class="ab cl mu mv hx mw" role="separator"><span class="mx bw bk my mz na"/><span class="mx bw bk my mz na"/><span class="mx bw bk my mz"/></div><div class="im in io ip iq"><h2 id="87d2" class="oa md it bd me ob oc dn mi od oe dp mm li of og mo lm oh oi mq lq oj ok ms ol bi translated">步骤1 —安装Kedro和Kedro-Viz</h2><p id="09f8" class="pw-post-body-paragraph kz la it lb b lc ng ju le lf nh jx lh li ni lk ll lm nj lo lp lq nk ls lt lu im bi translated">建议创建一个虚拟环境，以便每个项目都有其独立的环境和相关的依赖项。要使用Kedro，官方文档建议用户<a class="ae ky" href="https://www.anaconda.com/products/individual#Downloads" rel="noopener ugc nofollow" target="_blank">安装Anaconda </a>。</p><p id="1221" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">因为我的Python版本是3.10以上，Anaconda使得在兼容Kedro需求的<strong class="lb iu">版本上创建环境(使用<strong class="lb iu"> conda </strong>而不是<strong class="lb iu"> venv </strong>)变得很容易(也就是说，在撰写本文时，Python是3.6-3.8)。</strong></p><p id="9f0e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">特别是，这是生成我们的Kedro环境的命令(在Anaconda Powershell提示符中):</p><pre class="kj kk kl km gt op oq or os aw ot bi"><span id="a236" class="oa md it oq b gy ou ov l ow ox">conda create --name kedro-env python=3.7 -y</span></pre><p id="c49d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">一旦用<code class="fe oy oz pa oq b">conda activate kedro-env</code>设置并激活了虚拟环境，我们就可以使用<em class="ly"> pip </em>来安装Kedro和Kedro-Viz插件:</p><pre class="kj kk kl km gt op oq or os aw ot bi"><span id="8899" class="oa md it oq b gy ou ov l ow ox">pip install kedro kedro-viz </span></pre><p id="49da" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们可以通过将目录切换到我们的项目文件夹并输入<code class="fe oy oz pa oq b"><strong class="lb iu">kedro info</strong></code>来检查Kedro是否正确安装。如果安装正确，我们应该看到以下内容:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pb"><img src="../Images/ef0c320f3ce739491bce2292a6f753b3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*uBBHD8gN_JGJikGoiH23mg.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><p id="d0b4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">此时，我们可以安装项目所需的其他包了。</p><pre class="kj kk kl km gt op oq or os aw ot bi"><span id="9f01" class="oa md it oq b gy ou ov l ow ox">pip install scikit-learn matplotlib</span></pre><p id="cb41" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果我们希望将这个项目初始化为Git存储库，我们可以使用:</p><pre class="kj kk kl km gt op oq or os aw ot bi"><span id="0cee" class="oa md it oq b gy ou ov l ow ox">git init</span></pre></div><div class="ab cl mu mv hx mw" role="separator"><span class="mx bw bk my mz na"/><span class="mx bw bk my mz na"/><span class="mx bw bk my mz"/></div><div class="im in io ip iq"><h2 id="ad43" class="oa md it bd me ob oc dn mi od oe dp mm li of og mo lm oh oi mq lq oj ok ms ol bi translated">步骤2 —项目设置</h2><p id="c656" class="pw-post-body-paragraph kz la it lb b lc ng ju le lf nh jx lh li ni lk ll lm nj lo lp lq nk ls lt lu im bi translated">Kedro的一个关键特性是创建标准的、可修改的和易于使用的项目模板。我们可以用以下代码初始化一个新的Kedro项目:</p><pre class="kj kk kl km gt op oq or os aw ot bi"><span id="3daa" class="oa md it oq b gy ou ov l ow ox">kedro new</span></pre><p id="21ee" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在为一系列提示提供相关名称之后，我们将得到一个高度组织化的项目目录，我们可以在这个目录上进行构建:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pc"><img src="../Images/2f9c5ce088b72b15a87f9e562c428f2a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*c9rONeUryPgYJh6chq4vhQ.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><p id="054b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">项目结构可以分为<strong class="lb iu">六个</strong>主文件夹:</p><blockquote class="lv lw lx"><p id="0ed4" class="kz la ly lb b lc ld ju le lf lg jx lh lz lj lk ll ma ln lo lp mb lr ls lt lu im bi translated"><strong class="lb iu"> /conf: </strong> <em class="it">包含指定数据源(即数据目录)、模型参数、凭证和日志信息等细节的配置文件。</em></p><p id="5c80" class="kz la ly lb b lc ld ju le lf lg jx lh lz lj lk ll ma ln lo lp mb lr ls lt lu im bi translated"><strong class="lb iu">/数据:</strong> <em class="it">包含输入、中间和输出数据。它被组织成一个八层的</em><strong class="lb iu"><em class="it"/></strong><em class="it">数据工程约定，以清晰地分类和构建数据的处理方式。</em></p><p id="cf31" class="kz la ly lb b lc ld ju le lf lg jx lh lz lj lk ll ma ln lo lp mb lr ls lt lu im bi translated"><strong class="lb iu"> /docs: </strong> <em class="it">包含与项目文档相关的文件。</em></p><p id="c860" class="kz la ly lb b lc ld ju le lf lg jx lh lz lj lk ll ma ln lo lp mb lr ls lt lu im bi translated"><strong class="lb iu"> /logs: </strong> <em class="it">包含管道运行时生成的日志文件。</em></p><p id="7e2b" class="kz la ly lb b lc ld ju le lf lg jx lh lz lj lk ll ma ln lo lp mb lr ls lt lu im bi translated"><strong class="lb iu">/笔记本:<em class="it"> </em> </strong> <em class="it">包含项目中使用的Jupyter笔记本，例如用于实验或初步探索性数据分析。</em></p><p id="5723" class="kz la ly lb b lc ld ju le lf lg jx lh lz lj lk ll ma ln lo lp mb lr ls lt lu im bi translated"><strong class="lb iu"> /src: </strong> <em class="it">包含项目的源代码，如流水线步骤、数据处理、模型训练的Python脚本。</em></p></blockquote></div><div class="ab cl mu mv hx mw" role="separator"><span class="mx bw bk my mz na"/><span class="mx bw bk my mz na"/><span class="mx bw bk my mz"/></div><div class="im in io ip iq"><h2 id="7fb4" class="oa md it bd me ob oc dn mi od oe dp mm li of og mo lm oh oi mq lq oj ok ms ol bi translated">步骤3 —数据设置</h2><p id="24cb" class="pw-post-body-paragraph kz la it lb b lc ng ju le lf nh jx lh li ni lk ll lm nj lo lp lq nk ls lt lu im bi translated">数据先于科学，所以让我们从数据设置开始。原始数据(每日交易的70个CSV文件)首先放在<strong class="lb iu"> <em class="ly"> data/01_raw </em> </strong>中。</p><p id="857b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">根据我们之前的项目蓝图，我们知道在整个过程中将会生成和利用哪些数据。因此，我们可以将这些信息翻译成<a class="ae ky" href="https://kedro.readthedocs.io/en/stable/05_data/01_data_catalog.html" rel="noopener ugc nofollow" target="_blank"> <strong class="lb iu">数据目录</strong> </a>，这是一个项目可用的数据源注册表。</p><p id="d502" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">数据目录提供了一种定义如何存储和解析数据的一致方式，使得从管道中的任何位置加载和保存数据集变得容易。</p><p id="fb7c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们可以在<em class="ly">中找到数据目录。yml </em>文件—<strong class="lb iu">conf/base/catalog . yml</strong>。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pd"><img src="../Images/ef7cb27adcfbdc571ef8f6e37be0501e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*atJVU1I34KmdxbXYiu-wBw.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><p id="4723" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">上图是数据目录中定义的数据源的一个片段。例如，我们首先期望我们的原始CSV文件被读取并合并到一个名为<code class="fe oy oz pa oq b">merged_data.csv</code>的中间CSV数据集。</p><p id="4aeb" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Kedro有<a class="ae ky" href="https://kedro.readthedocs.io/en/stable/kedro.extras.datasets.html" rel="noopener ugc nofollow" target="_blank">内置数据连接器</a>(比如熊猫。CSVDataSet，matplotlib。MatplotlibWriter)来适应不同的数据类型。</p></div><div class="ab cl mu mv hx mw" role="separator"><span class="mx bw bk my mz na"/><span class="mx bw bk my mz na"/><span class="mx bw bk my mz"/></div><div class="im in io ip iq"><h2 id="cb6e" class="oa md it bd me ob oc dn mi od oe dp mm li of og mo lm oh oi mq lq oj ok ms ol bi translated">步骤4-创建管道</h2><p id="6c79" class="pw-post-body-paragraph kz la it lb b lc ng ju le lf nh jx lh li ni lk ll lm nj lo lp lq nk ls lt lu im bi translated">一旦定义了我们的数据目录，我们就可以构建我们的管道。首先要理解两个关键概念:<a class="ae ky" href="https://kedro.readthedocs.io/en/stable/06_nodes_and_pipelines/01_nodes.html" rel="noopener ugc nofollow" target="_blank"> <strong class="lb iu">节点</strong> </a> <strong class="lb iu"> </strong>和<a class="ae ky" href="https://kedro.readthedocs.io/en/stable/06_nodes_and_pipelines/02_pipeline_introduction.html" rel="noopener ugc nofollow" target="_blank"> <strong class="lb iu">管道</strong> </a>。</p><ul class=""><li id="f877" class="nl nm it lb b lc ld lf lg li nn lm no lq np lu on nr ns nt bi translated"><strong class="lb iu">节点</strong>是管道的构建块。它们是代表数据转换的Python函数，例如数据预处理、建模。</li><li id="5e1a" class="nl nm it lb b lc nu lf nv li nw lm nx lq ny lu on nr ns nt bi translated"><strong class="lb iu">管道</strong>是连接在一起交付工作流的节点序列。它组织节点的依赖关系和执行顺序，连接输入和输出，同时保持代码模块化。</li></ul><p id="1069" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">用于异常检测的完整管线可分为<strong class="lb iu">三个较小的模块化管线，</strong>我们将最终连接这些管线:</p><ol class=""><li id="e1fe" class="nl nm it lb b lc ld lf lg li nn lm no lq np lu nq nr ns nt bi translated"><strong class="lb iu">数据工程管道</strong></li><li id="003c" class="nl nm it lb b lc nu lf nv li nw lm nx lq ny lu nq nr ns nt bi translated"><strong class="lb iu">数据科学管道</strong></li><li id="aa00" class="nl nm it lb b lc nu lf nv li nw lm nx lq ny lu nq nr ns nt bi translated"><strong class="lb iu">车型评估管道</strong></li></ol><p id="584a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们可以根据指定的名称，使用以下命令实例化这些模块化管道:</p><pre class="kj kk kl km gt op oq or os aw ot bi"><span id="9e3a" class="oa md it oq b gy ou ov l ow ox">kedro pipeline create data_engineering<br/>kedro pipeline create data_science<br/>kedro pipeline create model_evaluation</span></pre><p id="530f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">虽然管道在这个阶段是空的，但是它们的结构已经在<strong class="lb iu"> <em class="ly"> /src </em> </strong>文件夹中很好地生成了。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pe"><img src="../Images/4f20e2f747310fa892f7a9edad484db5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*EdyCk5cSoXcKlV3nWD4mBA.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><p id="0d29" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">每个管道文件夹都有相同的文件，包括<strong class="lb iu"> nodes.py </strong>(节点代码)<strong class="lb iu"> </strong>和<strong class="lb iu"> pipeline.py </strong>(管道代码)。</p></div><div class="ab cl mu mv hx mw" role="separator"><span class="mx bw bk my mz na"/><span class="mx bw bk my mz na"/><span class="mx bw bk my mz"/></div><div class="im in io ip iq"><h2 id="7a97" class="oa md it bd me ob oc dn mi od oe dp mm li of og mo lm oh oi mq lq oj ok ms ol bi translated">步骤5 —构建数据工程管道</h2><p id="407b" class="pw-post-body-paragraph kz la it lb b lc ng ju le lf nh jx lh li ni lk ll lm nj lo lp lq nk ls lt lu im bi translated">让我们先来看看数据工程管道，我们在这里处理数据，用于下游的机器学习。更具体地说，有三个预处理任务要执行:</p><ol class=""><li id="27d3" class="nl nm it lb b lc ld lf lg li nn lm no lq np lu nq nr ns nt bi translated">将原始数据集合并到中间合并数据集中</li><li id="b89b" class="nl nm it lb b lc nu lf nv li nw lm nx lq ny lu nq nr ns nt bi translated">通过仅保留预测值列并为后续训练测试拆分创建新的日期列来处理合并的数据集</li><li id="ec25" class="nl nm it lb b lc nu lf nv li nw lm nx lq ny lu nq nr ns nt bi translated">按时间顺序执行80:20列车测试，拆分并删除不必要的列</li></ol><p id="54d2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们首先将任务脚本化为<strong class="lb iu">三个独立的</strong> <strong class="lb iu">节点函数</strong>在<strong class="lb iu"> nodes.py </strong>中:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="pf pg l"/></div></figure><p id="afbf" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然后，我们将这些节点函数导入到<strong class="lb iu"> pipeline.py </strong>中，以正确的顺序链接它们。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="pf pg l"/></div></figure><p id="e20a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">注意在每个节点的包装器<strong class="lb iu">中<em class="ly">节点(..)</em> </strong>，我们指定一个名称，函数(从<strong class="lb iu"> <em class="ly"> node.py </em> </strong>导入)，以及数据目录中定义的<strong class="lb iu">输入</strong>和<strong class="lb iu">输出</strong>数据集(参见<a class="ae ky" href="#7fb4" rel="noopener ugc nofollow"> <strong class="lb iu">步骤3 </strong> </a>)。</p><p id="9a4d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">节点包装器中的参数应该与数据目录中的数据集名称和节点函数的参数相匹配。</p><p id="f0d6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">对于节点<code class="fe oy oz pa oq b">node_process_data</code>，预测列的列表存储在<strong class="lb iu"> conf/base/parameters.yml </strong>中的参数文件中。</p><p id="343a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们的数据工程管道设置已经完成，但是还没有<strong class="lb iu">准备好</strong>，因为它还没有<strong class="lb iu">注册</strong>。我们将在稍后的<strong class="lb iu">步骤8 </strong>中探讨这一点，所以让我们继续构建剩下的两条管道。</p></div><div class="ab cl mu mv hx mw" role="separator"><span class="mx bw bk my mz na"/><span class="mx bw bk my mz na"/><span class="mx bw bk my mz"/></div><div class="im in io ip iq"><h2 id="cb7d" class="oa md it bd me ob oc dn mi od oe dp mm li of og mo lm oh oi mq lq oj ok ms ol bi translated">步骤6 —构建数据科学管道</h2><p id="8cc2" class="pw-post-body-paragraph kz la it lb b lc ng ju le lf nh jx lh li ni lk ll lm nj lo lp lq nk ls lt lu im bi translated">我们管道的异常检测模型是<a class="ae ky" href="https://en.wikipedia.org/wiki/Isolation_forest" rel="noopener ugc nofollow" target="_blank">隔离林</a>。<strong class="lb iu">隔离森林</strong>是一个<strong class="lb iu">无监督算法</strong>，使用决策树构建。</p><p id="5a91" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">它通过随机选择一个特征，然后在最大值和最小值之间选择一个分割值来“隔离”观察值。由于异常现象很少且不同，因此预计它们比正常观察更容易分离。</p><p id="bf46" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们将使用scikit-learn <a class="ae ky" href="https://scikit-learn.org/stable/modules/generated/sklearn.ensemble.IsolationForest.html" rel="noopener ugc nofollow" target="_blank">实现</a>进行隔离林建模。有两个任务(和节点)要创建— <strong class="lb iu"> (i) </strong>模型训练和<strong class="lb iu"> (ii) </strong>模型预测(也称为推理)。</p><p id="4f61" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">模型的<strong class="lb iu">污染值</strong>设置为<strong class="lb iu"> 0.009 </strong>，与原始数据集中观察到的欺诈案例比例(即0.9%)相匹配。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="pf pg l"/></div></figure><p id="dfe3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">像以前一样，我们在<strong class="lb iu"> pipeline.py </strong>中的管道函数中将节点链接在一起。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="pf pg l"/></div></figure><p id="f681" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">正如在数据目录中看到的，我们将把我们训练过的隔离森林模型作为<strong class="lb iu"> pickle </strong>文件保存在<strong class="lb iu"><em class="ly">Data/06 _ models</em></strong>中。</p></div><div class="ab cl mu mv hx mw" role="separator"><span class="mx bw bk my mz na"/><span class="mx bw bk my mz na"/><span class="mx bw bk my mz"/></div><div class="im in io ip iq"><h2 id="7c7b" class="oa md it bd me ob oc dn mi od oe dp mm li of og mo lm oh oi mq lq oj ok ms ol bi translated"><strong class="ak">第7步—构建模型评估管道</strong></h2><p id="6ec4" class="pw-post-body-paragraph kz la it lb b lc ng ju le lf nh jx lh li ni lk ll lm nj lo lp lq nk ls lt lu im bi translated">虽然隔离森林是一个无监督的模型，但如果我们有地面真实标签，我们仍然可以评估它的性能。</p><p id="b38b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在原始数据集中，有一个<strong class="lb iu"> TX_FRAUD </strong>变量作为欺诈交易的指示器。</p><p id="a637" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">有了基础事实标签和预测的异常分数，我们可以获得评估指标并将其表示为<a class="ae ky" href="https://en.wikipedia.org/wiki/Receiver_operating_characteristic" rel="noopener ugc nofollow" target="_blank"> AUC和AUCPR </a>图。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="pf pg l"/></div></figure><p id="c6fc" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">下面是运行模型评估节点的<strong class="lb iu"> pipeline.py </strong>脚本。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="pf pg l"/></div></figure><p id="6c1a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这个模型评估步骤与步骤6中的数据科学管道是分开的。这种分离是因为我们使用的是<strong class="lb iu">无监督</strong>异常检测算法，我们并不期望总是获得真实数据。</p></div><div class="ab cl mu mv hx mw" role="separator"><span class="mx bw bk my mz na"/><span class="mx bw bk my mz na"/><span class="mx bw bk my mz"/></div><div class="im in io ip iq"><h2 id="a9e8" class="oa md it bd me ob oc dn mi od oe dp mm li of og mo lm oh oi mq lq oj ok ms ol bi translated"><strong class="ak">步骤8 —在管道注册表中注册所有管道</strong></h2><p id="ebc4" class="pw-post-body-paragraph kz la it lb b lc ng ju le lf nh jx lh li ni lk ll lm nj lo lp lq nk ls lt lu im bi translated">至此，创建管道的所有艰苦工作都已完成。我们现在需要通过在<strong class="lb iu">管道注册表</strong>中导入和注册所有三个模块化管道来结束。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="pf pg l"/></div></figure><p id="a9aa" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">return语句中的<code class="fe oy oz pa oq b">__default__</code>行表示模块化管道的默认运行顺序，在我们的例子中是所有三个模块化管道— <code class="fe oy oz pa oq b">data_engineering</code>、<code class="fe oy oz pa oq b">data_science</code>和<code class="fe oy oz pa oq b">model_evaluation</code>。</p><p id="f034" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Kedro的美妙之处在于，它的模块化结构让我们能够灵活地构建我们的管道。例如，如果我们没有基本事实标签，我们可以从默认管线运行中排除<code class="fe oy oz pa oq b">model_evaluation</code>。</p></div><div class="ab cl mu mv hx mw" role="separator"><span class="mx bw bk my mz na"/><span class="mx bw bk my mz na"/><span class="mx bw bk my mz"/></div><div class="im in io ip iq"><h2 id="ed9a" class="oa md it bd me ob oc dn mi od oe dp mm li of og mo lm oh oi mq lq oj ok ms ol bi translated">步骤9 —可视化管道</h2><p id="ce7d" class="pw-post-body-paragraph kz la it lb b lc ng ju le lf nh jx lh li ni lk ll lm nj lo lp lq nk ls lt lu im bi translated">在运行管道之前，最好检查一下我们到目前为止已经构建了什么。奇妙的<strong class="lb iu"> Kedro-Viz </strong>插件让我们可以很容易地可视化整个管道结构和依赖关系。</p><p id="7bb4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">鉴于其易用性、清晰度和美观的显示，许多QuantumBlack客户<a class="ae ky" href="https://www.mckinsey.com/about-us/new-at-mckinsey-blog/meet-kedro-mckinseys-first-open-source-software-tool" rel="noopener ugc nofollow" target="_blank">对这一功能表达了他们的喜悦</a>也就不足为奇了。</p><p id="d6a0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们可以使用以下命令轻松生成可视化效果:</p><pre class="kj kk kl km gt op oq or os aw ot bi"><span id="514f" class="oa md it oq b gy ou ov l ow ox">kedro viz</span></pre><p id="7b5c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们的浏览器中将会打开一个新的选项卡，我们将会看到一个漂亮的可视化工具来探索我们的管道结构。这种可视化也可以很容易地导出为一个.<strong class="lb iu"> png </strong>图像文件。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ph"><img src="../Images/141979968b0458c5b3d691c70583fcd9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*2fLwutlGrYLK1isOhKk6bw.gif"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure></div><div class="ab cl mu mv hx mw" role="separator"><span class="mx bw bk my mz na"/><span class="mx bw bk my mz na"/><span class="mx bw bk my mz"/></div><div class="im in io ip iq"><h2 id="a3ad" class="oa md it bd me ob oc dn mi od oe dp mm li of og mo lm oh oi mq lq oj ok ms ol bi translated">步骤10 —运行管道</h2><p id="d151" class="pw-post-body-paragraph kz la it lb b lc ng ju le lf nh jx lh li ni lk ll lm nj lo lp lq nk ls lt lu im bi translated">我们终于准备好运行我们的管道。下面的命令将执行我们之前注册的默认管道。</p><pre class="kj kk kl km gt op oq or os aw ot bi"><span id="38f5" class="oa md it oq b gy ou ov l ow ox">kedro run</span></pre><p id="7713" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">运行时，管道将使用生成的数据填充各自的目录，包括异常预测和模型评估图。</p><p id="caa4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们还可以运行在管道注册表中注册的特定管道。例如，如果我们只想运行数据工程模块化管道(<code class="fe oy oz pa oq b">de</code>)，我们可以在命令中添加<code class="fe oy oz pa oq b">--pipeline=&lt;NAME&gt;</code>:</p><pre class="kj kk kl km gt op oq or os aw ot bi"><span id="78f0" class="oa md it oq b gy ou ov l ow ox">kedro run --pipeline de</span></pre></div><div class="ab cl mu mv hx mw" role="separator"><span class="mx bw bk my mz na"/><span class="mx bw bk my mz na"/><span class="mx bw bk my mz"/></div><div class="im in io ip iq"><h2 id="5c43" class="oa md it bd me ob oc dn mi od oe dp mm li of og mo lm oh oi mq lq oj ok ms ol bi translated">步骤11 —评估管道输出</h2><p id="96e2" class="pw-post-body-paragraph kz la it lb b lc ng ju le lf nh jx lh li ni lk ll lm nj lo lp lq nk ls lt lu im bi translated">最后，是时候评估我们异常检测管道的输出了。特别是，让我们回顾一下评估图(保存在<strong class="lb iu"> <em class="ly">数据/08 _报告</em> </strong>)来看看模型的性能如何。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pi"><img src="../Images/930f8243a04600e4e4d05d25c2d85482.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*cRMvAURoqdSnPgw__pJBdQ.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><p id="2ce2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这些图表明隔离森林模型AUC是<strong class="lb iu"> 0.8486 </strong>，这是一个相当好的基线机器学习模型性能。</p></div><div class="ab cl mu mv hx mw" role="separator"><span class="mx bw bk my mz na"/><span class="mx bw bk my mz na"/><span class="mx bw bk my mz"/></div><div class="im in io ip iq"><h1 id="a006" class="mc md it bd me mf nb mh mi mj nc ml mm jz nd ka mo kc ne kd mq kf nf kg ms mt bi translated">附加功能</h1><p id="676c" class="pw-post-body-paragraph kz la it lb b lc ng ju le lf nh jx lh li ni lk ll lm nj lo lp lq nk ls lt lu im bi translated">恭喜你走到这一步，并成功地用Kedro创建了一个异常检测管道！</p><p id="4ca6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">除了基本的功能之外，Kedro还有其他用于管理数据科学项目的有用特性。这里有几个值得一提的功能:</p><h2 id="90b0" class="oa md it bd me ob oc dn mi od oe dp mm li of og mo lm oh oi mq lq oj ok ms ol bi translated">(1)实验跟踪</h2><p id="8dc0" class="pw-post-body-paragraph kz la it lb b lc ng ju le lf nh jx lh li ni lk ll lm nj lo lp lq nk ls lt lu im bi translated">Kedro使设置实验跟踪和访问每个管道运行的记录指标变得容易。除了它的<a class="ae ky" href="https://kedro.readthedocs.io/en/stable/03_tutorial/07_set_up_experiment_tracking.html" rel="noopener ugc nofollow" target="_blank">内部实验跟踪能力</a>，Kedro与其他MLOps服务整合得很好。</p><p id="741c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">例如，<a class="ae ky" href="https://docs.neptune.ai/integrations-and-supported-tools/automation-pipelines/kedro" rel="noopener ugc nofollow" target="_blank"> <strong class="lb iu"> Kedro-Neptune插件</strong> </a>让用户享受组织良好的管道和强大的Neptune元数据管理用户界面的好处。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pj"><img src="../Images/69106ad7e5ffa8e2772aaae8039a866b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*CMIZhAtOoEHMhNO7rBd_7w.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">Neptune UI仪表板示例|作者图片</p></figure></div><div class="ab cl mu mv hx mw" role="separator"><span class="mx bw bk my mz na"/><span class="mx bw bk my mz na"/><span class="mx bw bk my mz"/></div><div class="im in io ip iq"><h2 id="a6c5" class="oa md it bd me ob oc dn mi od oe dp mm li of og mo lm oh oi mq lq oj ok ms ol bi translated">(2)管道切片</h2><p id="baae" class="pw-post-body-paragraph kz la it lb b lc ng ju le lf nh jx lh li ni lk ll lm nj lo lp lq nk ls lt lu im bi translated">Kedro的<a class="ae ky" href="https://kedro.readthedocs.io/en/stable/06_nodes_and_pipelines/06_slice_a_pipeline.html" rel="noopener ugc nofollow" target="_blank">管道切片功能</a>允许我们根据需要执行管道的特定部分。例如，我们可以在希望运行的管道切片中定义开始和结束节点:</p><pre class="kj kk kl km gt op oq or os aw ot bi"><span id="8ddf" class="oa md it oq b gy ou ov l ow ox">kedro run --from-nodes train-test-split --to-nodes train_model</span></pre></div><div class="ab cl mu mv hx mw" role="separator"><span class="mx bw bk my mz na"/><span class="mx bw bk my mz na"/><span class="mx bw bk my mz"/></div><div class="im in io ip iq"><h2 id="25cb" class="oa md it bd me ob oc dn mi od oe dp mm li of og mo lm oh oi mq lq oj ok ms ol bi translated">(3)项目文档、打包和部署</h2><p id="6a39" class="pw-post-body-paragraph kz la it lb b lc ng ju le lf nh jx lh li ni lk ll lm nj lo lp lq nk ls lt lu im bi translated">我们可以通过在项目的根目录下运行这个命令来生成特定于项目的文档(构建在Sphinx框架上)。</p><pre class="kj kk kl km gt op oq or os aw ot bi"><span id="38e8" class="oa md it oq b gy ou ov l ow ox">kedro build-docs</span></pre><p id="c9b7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">接下来，为了将项目的<a class="ae ky" href="https://kedro.readthedocs.io/en/stable/03_tutorial/08_package_a_project.html" rel="noopener ugc nofollow" target="_blank">打包</a>为Python库，我们运行以下命令:</p><pre class="kj kk kl km gt op oq or os aw ot bi"><span id="367f" class="oa md it oq b gy ou ov l ow ox">kedro package</span></pre><p id="9988" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">最后，我们可以通过第三方插件<a class="ae ky" href="https://github.com/kedro-org/kedro-plugins/tree/main/kedro-docker" rel="noopener ugc nofollow" target="_blank"> Docker </a>和<a class="ae ky" href="https://github.com/kedro-org/kedro-plugins/tree/main/kedro-airflow" rel="noopener ugc nofollow" target="_blank"> Airflow </a>来<a class="ae ky" href="https://kedro.readthedocs.io/en/latest/10_deployment/01_deployment_guide.html" rel="noopener ugc nofollow" target="_blank">部署</a>这些打包的数据科学管道。</p></div><div class="ab cl mu mv hx mw" role="separator"><span class="mx bw bk my mz na"/><span class="mx bw bk my mz na"/><span class="mx bw bk my mz"/></div><div class="im in io ip iq"><h1 id="f0b8" class="mc md it bd me mf nb mh mi mj nc ml mm jz nd ka mo kc ne kd mq kf nf kg ms mt bi translated">结论</h1><p id="fccc" class="pw-post-body-paragraph kz la it lb b lc ng ju le lf nh jx lh li ni lk ll lm nj lo lp lq nk ls lt lu im bi translated">还有其他有趣的Kedro特性和教程可用，所以请查看官方文档进行进一步的探索。另外，继续前进，看看包含这个项目所有代码的<a class="ae ky" href="https://github.com/kennethleungty/Anomaly-Detection-Pipeline-Kedro" rel="noopener ugc nofollow" target="_blank"> <strong class="lb iu"> GitHub repo </strong> </a>。</p><p id="270e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果您想了解Kedro与市场上其他流水线工具的比较，请查看下面这篇全面的NeptuneAI文章:</p><div class="pk pl gp gr pm pn"><a href="https://neptune.ai/blog/kedro-vs-zenml-vs-metaflow" rel="noopener  ugc nofollow" target="_blank"><div class="po ab fo"><div class="pp ab pq cl cj pr"><h2 class="bd iu gy z fp ps fr fs pt fu fw is bi translated">Kedro vs ZenML vs Metaflow:应该选择哪个管道编排工具？- neptune.ai</h2><div class="pu l"><p class="bd b dl z fp ps fr fs pt fu fw dk translated">海王星. ai</p></div></div><div class="pv l"><div class="pw l px py pz pv qa ks pn"/></div></div></a></div></div><div class="ab cl mu mv hx mw" role="separator"><span class="mx bw bk my mz na"/><span class="mx bw bk my mz na"/><span class="mx bw bk my mz"/></div><div class="im in io ip iq"><h1 id="ff91" class="mc md it bd me mf nb mh mi mj nc ml mm jz nd ka mo kc ne kd mq kf nf kg ms mt bi translated">在你走之前</h1><p id="e3e8" class="pw-post-body-paragraph kz la it lb b lc ng ju le lf nh jx lh li ni lk ll lm nj lo lp lq nk ls lt lu im bi translated">我欢迎您<strong class="lb iu">加入我的数据科学学习之旅</strong>。跟随此<a class="ae ky" href="https://kennethleungty.medium.com/" rel="noopener">媒体</a>页面并查看我的<a class="ae ky" href="https://github.com/kennethleungty" rel="noopener ugc nofollow" target="_blank"> GitHub </a>以了解实用和教育数据科学内容。同时，与Kedro一起享受构建数据科学管道的乐趣！</p><div class="pk pl gp gr pm pn"><a rel="noopener follow" target="_blank" href="/end-to-end-automl-train-and-serve-with-h2o-mlflow-fastapi-and-streamlit-5d36eedfe606"><div class="po ab fo"><div class="pp ab pq cl cj pr"><h2 class="bd iu gy z fp ps fr fs pt fu fw is bi translated">H2O AutoML、MLflow、FastAPI和Streamlit的端到端AutoML管道</h2><div class="qb l"><h3 class="bd b gy z fp ps fr fs pt fu fw dk translated">关于使用一系列功能强大的工具来培训和服务AutoML管道的简单易懂的综合指南</h3></div><div class="pu l"><p class="bd b dl z fp ps fr fs pt fu fw dk translated">towardsdatascience.com</p></div></div><div class="pv l"><div class="qc l px py pz pv qa ks pn"/></div></div></a></div><div class="pk pl gp gr pm pn"><a rel="noopener follow" target="_blank" href="/autoxgb-for-financial-fraud-detection-f88f30d4734a"><div class="po ab fo"><div class="pp ab pq cl cj pr"><h2 class="bd iu gy z fp ps fr fs pt fu fw is bi translated">利用AutoXGB进行金融欺诈检测</h2><div class="qb l"><h3 class="bd b gy z fp ps fr fs pt fu fw dk translated">AutoXGB与标准XGBoost在检测欺诈性信用卡交易方面的对比</h3></div><div class="pu l"><p class="bd b dl z fp ps fr fs pt fu fw dk translated">towardsdatascience.com</p></div></div><div class="pv l"><div class="qd l px py pz pv qa ks pn"/></div></div></a></div><div class="pk pl gp gr pm pn"><a rel="noopener follow" target="_blank" href="/key-learning-points-from-mlops-specialization-course-deeplearning-ai-andrew-ng-5d0746605752"><div class="po ab fo"><div class="pp ab pq cl cj pr"><h2 class="bd iu gy z fp ps fr fs pt fu fw is bi translated">MLOps专业化认证的关键学习点—课程1</h2><div class="qb l"><h3 class="bd b gy z fp ps fr fs pt fu fw dk translated">面向生产的机器学习工程课程1的主要课程(包括课堂讲稿)</h3></div><div class="pu l"><p class="bd b dl z fp ps fr fs pt fu fw dk translated">towardsdatascience.com</p></div></div><div class="pv l"><div class="qe l px py pz pv qa ks pn"/></div></div></a></div><div class="pk pl gp gr pm pn"><a href="https://kennethleungty.medium.com/membership" rel="noopener follow" target="_blank"><div class="po ab fo"><div class="pp ab pq cl cj pr"><h2 class="bd iu gy z fp ps fr fs pt fu fw is bi translated">通过我的推荐链接加入媒体-梁建华</h2><div class="qb l"><h3 class="bd b gy z fp ps fr fs pt fu fw dk translated">作为一个媒体会员，你的会员费的一部分会给你阅读的作家，你可以完全接触到每一个故事…</h3></div></div><div class="pv l"><div class="qf l px py pz pv qa ks pn"/></div></div></a></div></div></div>    
</body>
</html>