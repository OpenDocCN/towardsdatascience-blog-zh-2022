<html>
<head>
<title>NLP MLops Project With DagsHub — Multi-Language Sentiment Classification Using Transformers — Part 1</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用 DagsHub 的 NLP MLops 项目—使用转换器的多语言情感分类—第 1 部分</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/nlp-mlops-project-with-dagshub-multi-language-sentiment-classification-using-transformers-fcbe6164b171#2022-03-11">https://towardsdatascience.com/nlp-mlops-project-with-dagshub-multi-language-sentiment-classification-using-transformers-fcbe6164b171#2022-03-11</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="a3e2" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">DagsHub 是一个成功而高效的机器学习项目的平台</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/699b43b291bf85e5e49a281b20532fed.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*ez9Eerg6dgr5YM3T"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">由<a class="ae ky" href="https://unsplash.com/@unarchive" rel="noopener ugc nofollow" target="_blank">杰里米·贝赞格</a>在<a class="ae ky" href="https://unsplash.com/photos/CEFVJ7zqoLs" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure><h1 id="b4af" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">介绍</h1><p id="dee7" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">一个成功的机器学习项目可能涉及不同的工具，每个工具都有特定的角色，从源代码和数据版本到模型性能跟踪。这些工具大部分时间是由不同的社区构建的，因此，它们的更好集成对于充分利用它们是至关重要的，否则，不幸的是，可能会导致更多的失望而不是满意。</p><p id="be63" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">接下来是一个平台，它可以托管源代码、版本数据集和模型，跟踪你的实验，标记你的数据，还可以提供你的结果的可视化。最后一款<strong class="lt iu"> GitHub </strong> <strong class="lt iu">面向数据专业人士！</strong></p><h1 id="b0a2" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">开始</h1><p id="222a" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">本文将通过一个真实世界的机器学习项目来说明<code class="fe ms mt mu mv b">DagsHub</code>的使用，该项目旨在执行多语言情感分类，从数据处理到模型监控。</p><h2 id="5629" class="mw la it bd lb mx my dn lf mz na dp lj ma nb nc ll me nd ne ln mi nf ng lp nh bi translated">NLP 问题和动机</h2><p id="cd6a" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">全球各地的人们越来越多地在多个平台(社交媒体、评论网站等)上分享自己的观点。)关于组织，行业，用不同的语言。对这些情绪的有效分析可以帮助许多组织和行业做出正确的决策。</p><h2 id="5b63" class="mw la it bd lb mx my dn lf mz na dp lj ma nb nc ll me nd ne ln mi nf ng lp nh bi translated">解决问题的方法</h2><p id="7c58" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">该问题将通过以下步骤解决</p><ul class=""><li id="bdbc" class="ni nj it lt b lu mn lx mo ma nk me nl mi nm mm nn no np nq bi translated"><strong class="lt iu">数据采集&amp;处理</strong>:我们将从不同的文件中采集数据并进行处理。该步骤将涉及<a class="ae ky" href="https://dvc.org/" rel="noopener ugc nofollow" target="_blank">数据版本控制(DVC) </a>工具，用于跟踪数据中的变更。</li><li id="923a" class="ni nj it lt b lu nr lx ns ma nt me nu mi nv mm nn no np nq bi translated"><strong class="lt iu">数据探索</strong>:为了更好的理解我们正在处理的数据。<strong class="lt iu"> <em class="nw">这将是我们使用笔记本的唯一一步</em> </strong>！</li><li id="392f" class="ni nj it lt b lu nr lx ns ma nt me nu mi nv mm nn no np nq bi translated"><strong class="lt iu">模型评估&amp;跟踪</strong>:没有特定的模型训练，因为我们将利用<a class="ae ky" href="https://huggingface.co/joeddav/xlm-roberta-large-xnli" rel="noopener ugc nofollow" target="_blank">一个来自拥抱脸的预训练零镜头模型</a>来执行情感分析。最后，我们将能够评估它在每种语言数据上的性能(准确性和 f1 分数)，并使用<a class="ae ky" href="https://mlflow.org/" rel="noopener ugc nofollow" target="_blank"> MLFlow </a>跟踪这些指标。</li></ul><h2 id="1259" class="mw la it bd lb mx my dn lf mz na dp lj ma nb nc ll me nd ne ln mi nf ng lp nh bi translated">关于数据</h2><p id="6b3c" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">在<a class="ae ky" href="http://sentiment.nlproc.org/" rel="noopener ugc nofollow" target="_blank">情感 NLPRoc </a>上提供的 10 个多语言基准数据集<strong class="lt iu"><em class="nw"/></strong>中，我们将使用以下五个我们将使用的多语言模型当前支持的数据集。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nx"><img src="../Images/e13e534b9e2fae2253260fefd4965938.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*KKhJL0drLvnBOZof.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">项目范围的数据集描述(图片由作者提供)</p></figure><h2 id="4907" class="mw la it bd lb mx my dn lf mz na dp lj ma nb nc ll me nd ne ln mi nf ng lp nh bi translated">履行</h2><p id="6ec3" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">这一部分将包含重要的代码片段，但是整个项目和源代码可以在这里找到。请随意下载并跟随。</p><p id="690c" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated"><strong class="lt iu">创建您的项目存储库</strong></p><p id="64cf" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">在开始这个过程之前，您需要在<a class="ae ky" href="https://dagshub.com/" rel="noopener ugc nofollow" target="_blank"> DagsHub </a>上创建一个免费帐户，它会自动为您提供 10GB 的免费 DVC 存储空间！</p><p id="5014" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">只有在注册完成后，您才能创建您的第一个存储库，如下所示。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ny"><img src="../Images/7b83607e01f9a7295d678a93fe441be0.png" data-original-src="https://miro.medium.com/v2/resize:fit:758/format:webp/1*cp70bkVv7bvnKTiSO3Cg3g.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">DagsHub 存储库创建(图片由作者提供)</p></figure><p id="8c52" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">一旦你的库被创建，你将得到一个类似于下面的快速指南。您可以简单地选择👁图标来可视化您的密码。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nz"><img src="../Images/8af432ec0738b95288523f46a155a0c6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wCHuLFg5e2CGmPBSeAoPQw.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">小节:克隆项目，用 DVC 提取项目数据，连接到 MLFlow 跟踪服务器(图片由作者提供)</p></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oa"><img src="../Images/68b6be43a3bd6d435e324adebb86d24e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Mi54Nb4vC1z2Sj_iZLq4Hg.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk">…..</p></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ob"><img src="../Images/2cf4bf1759470ff092a59a19d7e34279.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hhoYli2PRqAoXsc7xddchg.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">Sections truncated:在命令行上创建一个新的 repo 并推送一个现有的 repo(图片由作者提供)</p></figure><p id="d266" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated"><strong class="lt iu">数据收集</strong></p><p id="d766" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">我在数据文件夹中创建了一个 zip 文件，其中包含五个不同的文件，格式为 a . <strong class="lt iu"> tsv </strong>，对应于<strong class="lt iu">关于数据</strong>部分中所述的五种语言。本节需要以下步骤:</p><ul class=""><li id="81d6" class="ni nj it lt b lu mn lx mo ma nk me nl mi nm mm nn no np nq bi translated">下载中的数据。zip 格式。</li><li id="7a10" class="ni nj it lt b lu nr lx ns ma nt me nu mi nv mm nn no np nq bi translated">创建两个文件夹数据文件夹:<strong class="lt iu"> data/raw </strong>将包含解压缩文件的结果，以及<strong class="lt iu"> data/process </strong>将包含数据的处理格式(稍后讨论)。</li></ul><p id="f09c" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">可以运行以下脚本来同时执行所有这些任务</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oc od l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">准备 _ 环境. sh</p></figure><p id="cba8" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">一旦这个阶段完成，您可以简单地从项目的根目录，从您的终端运行脚本，如下所示。别忘了<strong class="lt iu">。/ </strong>在开始运行脚本时。</p><pre class="kj kk kl km gt oe mv of og aw oh bi"><span id="3e9b" class="mw la it mv b gy oi oj l ok ol"># Grant execution right for the script<br/>chmod +x prepare_environment.sh</span><span id="3db4" class="mw la it mv b gy om oj l ok ol"># Run the script <br/><strong class="mv iu">./</strong>prepare_environment.sh</span></pre><p id="3c3a" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">成功执行会产生以下结果。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi on"><img src="../Images/a63cf8111ebd93a2c3ea9e804c456197.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ashA5cf1UogG8qTvVHTxqw.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">处理前数据文件夹的结构(图片由作者提供)</p></figure><p id="59f5" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated"><strong class="lt iu">数据处理</strong></p><p id="f4df" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">需要注意的是，所有的 python 源代码都是在<strong class="lt iu"> <em class="nw"> src </em> </strong>文件夹中创建的，所以你需要从项目的根目录创建一个。</p><p id="9912" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">每个文件最初有两列，但是它们没有名字。我们的目标是:</p><ul class=""><li id="5e04" class="ni nj it lt b lu mn lx mo ma nk me nl mi nm mm nn no np nq bi translated"><strong class="lt iu">分别给两列</strong>命名。第一个对应标签，每个值都会映射到它的字符串格式(负:0，正:1)。第二列对应于文本。</li><li id="75a5" class="ni nj it lt b lu nr lx ns ma nt me nu mi nv mm nn no np nq bi translated"><strong class="lt iu">增加一个新的语言栏</strong>对应文字的语言。</li><li id="e7b5" class="ni nj it lt b lu nr lx ns ma nt me nu mi nv mm nn no np nq bi translated">将所有的结合起来。tsv 文件成单个。csv 文件，它将对应于最终处理的文件。</li></ul><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oc od l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">预处理程序. py</p></figure><p id="fcf0" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated"><strong class="lt iu">在第 2 行</strong>中，我从我实现的包中导入了<code class="fe ms mt mu mv b">data_preprocessor()</code>函数，以使代码可维护。该函数有 3 个参数，t <em class="nw">数据/原始文件的路径</em>，<em class="nw">数据/已处理文件的路径</em>，以及最终处理文件的名称<em class="nw">。</em></p><p id="3325" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated"><strong class="lt iu">在第 5 行</strong>，我加载了<strong class="lt iu">。包含所有参数值的 yaml </strong>文件。以下是摘录。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oc od l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">params.yaml</p></figure><p id="24c6" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">在成功执行前面的 preprocess.py 文件后，我们会得到以下结果。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi oo"><img src="../Images/4eb5fcc32f3df63c39997bbf4014125e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1046/format:webp/1*d5tdKyt4xnB7zdkV4R7Avw.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">处理后的数据文件夹结构(图片由作者提供)</p></figure><p id="6277" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">我们终于可以运行以下命令来开始跟踪<strong class="lt iu">数据</strong>文件夹了。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oc od l"/></div></figure><p id="1d88" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated"><strong class="lt iu">第 1 行</strong>激活数据文件夹的跟踪。该指令创建一个<strong class="lt iu"> data.dvc </strong>文件，其中包含关于原始数据存储位置的信息。然后，我们使用简单的<code class="fe ms mt mu mv b">git commit </code>命令添加文件并提交。完成所有这些后，原始数据文件夹被自动添加到<strong class="lt iu">中。gitigore </strong>文件，因为它没有被推送到存储库。我们现在已经准备好使用以下命令来推送所有新的更改。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oc od l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">add_othefiles.py</p></figure><p id="e51a" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">确保真正考虑数据跟踪的是我们可以在数据文件夹上看到的 DVC 标志。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi op"><img src="../Images/0e978fc89bbcec3daa420167f1f36657.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hcmkEbznkgdlMJzZTBHPYA.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">显示数据跟踪激活的 DVC 标志(图片由作者提供)</p></figure><p id="d93e" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated"><strong class="lt iu">数据分析</strong></p><p id="c3e3" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">这里的重点是可视化语言分布，显示每种语言的一些随机文本及其情感。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oc od l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">数据 _ 探索. py</p></figure><ul class=""><li id="d959" class="ni nj it lt b lu mn lx mo ma nk me nl mi nm mm nn no np nq bi translated"><strong class="lt iu"> <em class="nw">语言分布</em> </strong></li></ul><p id="0a53" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">下图显示了每种语言的情感数据数量。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oc od l"/></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oq"><img src="../Images/bb140e2ff4f431e6a20ec2e902c623c0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wwvVlkAIpq4fLI0jnsrGzw.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">数据集中的语言表示(作者提供的图片)</p></figure><p id="3800" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">从前面的图像中，我们观察到英语是最具代表性的语言，而德语是最不具代表性的语言。</p><ul class=""><li id="8e81" class="ni nj it lt b lu mn lx mo ma nk me nl mi nm mm nn no np nq bi translated"><strong class="lt iu"> <em class="nw">每种语言的情绪分布</em> </strong></li></ul><p id="b109" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">对于每一种语言，我们显示了积极的，消极的极性的数量。从一种语言到另一种语言，生成图形的过程是相同的。例如，英语的说明如下。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oc od l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">英语 _ 情绪 _ 分布. py</p></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi or"><img src="../Images/1f4037221e0fcc54b167a5459cf7c024.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dMAOSc6mQXGLrjY6jFG1vw.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">英语和法语的情感分布(图片由作者提供)</p></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi os"><img src="../Images/29ac83c75ca34acba92e5861fe69c3f0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*MMqKC8HclsVwbI3NrYQZ6w.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">俄语和西班牙语的情感分布(图片由作者提供)</p></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ot"><img src="../Images/5e73de7e27dfcd38fd759499a87e50f4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*r3o3W86NQnRBYXWngwmy3A.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">德国人的情感分布(图片由作者提供)</p></figure><p id="6c48" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">对于所有 5 种语言，情绪分布图显示积极情绪多于消极情绪。</p><ul class=""><li id="3b7c" class="ni nj it lt b lu mn lx mo ma nk me nl mi nm mm nn no np nq bi translated"><strong class="lt iu"> <em class="nw">每种语言两个随机文本</em> </strong></li></ul><p id="6bce" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">该部分使用<code class="fe ms mt mu mv b">show_random_text()</code>功能执行。采用的主要参数是特定语言的熊猫数据帧。</p><pre class="kj kk kl km gt oe mv of og aw oh bi"><span id="068c" class="mw la it mv b gy oi oj l ok ol"># Example of English data<br/>show_random_text(en_df)</span></pre><p id="8e48" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated"><strong class="lt iu">为英文</strong></p><pre class="kj kk kl km gt oe mv of og aw oh bi"><span id="3548" class="mw la it mv b gy oi oj l ok ol"><strong class="mv iu">Textual data</strong>: grandpa po &amp;apos;s originals are crunchy nuggets made from organic popcorn and organic soybeans. the healthy snack offers the benefits of soy without genetically modified organisms , cholesterol , peanuts or preservatives. in addition , the snack is low in saturated fat and it tastes great.  Underlying </span><span id="74a0" class="mw la it mv b gy om oj l ok ol"><strong class="mv iu">Underlying gSentiment</strong>: positive</span></pre><p id="2aaf" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated"><strong class="lt iu">为法语</strong></p><pre class="kj kk kl km gt oe mv of og aw oh bi"><span id="f369" class="mw la it mv b gy oi oj l ok ol"><strong class="mv iu">Textual data</strong>: quand le voisin fox essaie de copier sur son voisin abc , voilà le piètre résultat que ça donne ... quintuplés n'est qu'une copie des sauvages , et une copie bâclée en plus ...</span><span id="ec3b" class="mw la it mv b gy om oj l ok ol"><strong class="mv iu">Underlying Sentiment</strong>: negative</span></pre><p id="6c00" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated"><strong class="lt iu">对于俄语</strong></p><pre class="kj kk kl km gt oe mv of og aw oh bi"><span id="bcf7" class="mw la it mv b gy oi oj l ok ol"><strong class="mv iu">Textual data</strong>: я не думаю , что в москве можно найти отель такого же уровня за эти деньги . если у вас бизнес поездка в столицу и ограничен бюджет , то этот отель для вас . очень удачное месторасположение , близкая транспортная развязка позволяет добраться в любой район города в кратчайшие сроки . номер был без излишеств , минимализм чувствуется во всем . отдельное спасибо персоналу отеля : доброжелательность сглаживает те незначительные недостатки , какие замечаешь за несколько дней пребывания в отеле </span><span id="2dd5" class="mw la it mv b gy om oj l ok ol"><strong class="mv iu">Underlying Sentiment</strong>: positive</span></pre><p id="54f8" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated"><strong class="lt iu">西班牙语</strong></p><pre class="kj kk kl km gt oe mv of og aw oh bi"><span id="1915" class="mw la it mv b gy oi oj l ok ol"><strong class="mv iu">Textual data</strong>: comida abundante , buena relacin calidad-precio si pides entrante + segundo se puede cenar por unos 12 euros</span><span id="70eb" class="mw la it mv b gy om oj l ok ol"><strong class="mv iu">Underlying Sentiment</strong>: positive</span></pre><p id="52fb" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated"><strong class="lt iu">对于德语</strong></p><pre class="kj kk kl km gt oe mv of og aw oh bi"><span id="f9a8" class="mw la it mv b gy oi oj l ok ol"><strong class="mv iu">Textual data:</strong> ambiente eines billigen strandclubs in der türkei , der nachbar sitzt fast auf dem schoss weil es eng ist , die musik laut und unpassend ( fetenhits 80er ) , gedränge und warme getränke die man gewöhnlich kalt trinkt . der eingang wird von 2 arroganten kleinen mädchen bedient , die sich auf irgendetwas was einbilden , unklar auf was . dazu gehen im laden afrikanische prostituierte auf männerfang . achja das essen : zu teuer , aber gut . für 1/3 des preises in anderen lokalen anzurufen . fazit : viel lärm um nichts</span><span id="f928" class="mw la it mv b gy om oj l ok ol"><strong class="mv iu">Underlying Sentiment</strong>: negative</span></pre><p id="bdac" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated"><strong class="lt iu">模型评估和性能跟踪</strong></p><p id="be4d" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">现在，是时候检查预训练模型在预测这 5 种语言的正确情绪方面的表现了。我们将比较模型的预测和真实的情绪值。</p><p id="1a3f" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">首先要做的是如下配置 MLFlow 跟踪。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oc od l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">mlflow_config.py</p></figure><p id="e679" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated"><strong class="lt iu">第 2 行</strong>获取包含我的 mlflow <strong class="lt iu"> URI </strong>、<strong class="lt iu">用户名</strong>和<strong class="lt iu">密码的凭证文件。下面是如何获得这些证书的说明。</strong></p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ou"><img src="../Images/23dcdbeecf525e475681bb359a23b1ef.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9pmlF7hU_Sb5NtlAW70qXQ.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">DagsHub 中凭据和信息的映射(图片由作者提供)</p></figure><p id="b40e" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">配置完<strong class="lt iu"> mlflow </strong>之后，我们可以运行指标日志记录流程。我决定对每种语言的 100 个例子进行评估，这样这个过程就不会花太多时间。毕竟，主要目标是理解过程。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oc od l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">evaluate_tracking_section.py</p></figure><p id="f093" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">我首先在<strong class="lt iu">线 2 </strong>定义我的预训练模型。然后在<strong class="lt iu">第 7 行</strong>中，我给我的实验命名，在这种情况下，它被称为<strong class="lt iu">多语言分类</strong>。</p><p id="e7cb" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">测井过程从第 9 行的<strong class="lt iu">中的<code class="fe ms mt mu mv b">mlflow.start_run()</code>开始。最后，我对每种语言运行一个循环，记录模型的准确性和 f1 分数。</strong></p><p id="2f0c" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">成功运行评估后，您可以在<strong class="lt iu">实验</strong>选项卡上看到您已经执行的实验数量(包括失败和成功)，在我的例子中是 10。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ov"><img src="../Images/00a214c9e7cf11f9d962946113daad0d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8sZrshUaU3EgqTQxNPQr8w.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">上一次 mlflow 模型追踪实验截图(图片由作者提供)</p></figure><p id="f503" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">当您选择<strong class="lt iu">名称</strong>部分时，您可以找到如下所示的详细信息。我没有记录任何参数，这就是为什么左边的<strong class="lt iu">参数表</strong>是空的。然而，我们可以在右侧看到所有的准确度和 f1 分数值。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ow"><img src="../Images/7596134f259ab6418a702bb43f9eca36.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bSXSDi1Aa-j4d2NEwvmEYA.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">Mlflow 模型实验表格格式(图片由作者提供)</p></figure><p id="2e06" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">如果您想要不同的可视化效果，可以在图表模式下看到相同的结果，如下所示。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ox"><img src="../Images/2c441f907a18e89b5e7cdec87c4a5bb1.png" data-original-src="https://miro.medium.com/v2/resize:fit:746/format:webp/1*fClpKeIkXeun-HfyoZFzrw.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">Mlflow 模型实验图表格式(图片由作者提供)</p></figure><h1 id="e856" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">结论</h1><p id="5a9f" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">恭喜你！🎉 🍾您刚刚从<code class="fe ms mt mu mv b">DagsHub</code> <strong class="lt iu"> </strong>学会了如何使用 DVC 和 MLFlow 成功运行您的机器学习项目！如果你仍然不愿意使用<code class="fe ms mt mu mv b">DagsHub</code>，试一试，因为我相信它可以帮助你和你的队友节省时间，创造更多价值。</p><p id="815a" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">找到下面的附加资源来进一步学习。</p><p id="a3ed" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">如果你喜欢这篇文章，<strong class="lt iu">关注我的文章更新</strong></p><p id="42a8" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">欢迎在<a class="ae ky" href="https://www.linkedin.com/in/zoumana-keita/" rel="noopener ugc nofollow" target="_blank"> LinkedIn </a>和<a class="ae ky" href="https://www.youtube.com/channel/UC9xKdy8cz6ZuJU5FTNtM_pQ" rel="noopener ugc nofollow" target="_blank"> YouTube </a>上加我，也可以在<a class="ae ky" href="https://twitter.com/zoumana_keita_" rel="noopener ugc nofollow" target="_blank"> Twitter </a>上关注我。讨论人工智能，人工智能，数据科学，自然语言处理的东西总是令人愉快的！</p><p id="c0a0" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated"><strong class="lt iu">源代码和 DagsHub </strong></p><ul class=""><li id="8ed9" class="ni nj it lt b lu mn lx mo ma nk me nl mi nm mm nn no np nq bi translated"><a class="ae ky" href="https://dagshub.com/zoumana.keita/Multi_language_Sentiment_Classification" rel="noopener ugc nofollow" target="_blank">该项目的源代码可以在我的 DagsHub 存储库中找到</a></li><li id="025a" class="ni nj it lt b lu nr lx ns ma nt me nu mi nv mm nn no np nq bi translated"><a class="ae ky" href="https://colab.research.google.com/drive/1iKHMtG-UfdSB1OJXCO2ZTOaySIU58o2Y?usp=sharing" rel="noopener ugc nofollow" target="_blank">谷歌 Colab 源代码</a></li><li id="57f4" class="ni nj it lt b lu nr lx ns ma nt me nu mi nv mm nn no np nq bi translated"><a class="ae ky" href="https://dagshub.com/" rel="noopener ugc nofollow" target="_blank"> DagsHub 网站</a></li></ul><p id="33de" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated"><strong class="lt iu">数据集鸣谢</strong></p><ul class=""><li id="3ef7" class="ni nj it lt b lu mn lx mo ma nk me nl mi nm mm nn no np nq bi translated"><a class="ae ky" href="http://gerard.demelo.org/papers/sentiment-propagation.pdf" rel="noopener ugc nofollow" target="_blank">用于深度情感分析的跨语言传播</a></li><li id="fde4" class="ni nj it lt b lu nr lx ns ma nt me nu mi nv mm nn no np nq bi translated"><a class="ae ky" href="http://gerard.demelo.org/papers/sentiment-helping-hand.pdf" rel="noopener ugc nofollow" target="_blank">援手:用于深度情感分析的迁移学习</a></li></ul><p id="00bc" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">再见🏃🏾</p></div></div>    
</body>
</html>