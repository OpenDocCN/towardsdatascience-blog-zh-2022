<html>
<head>
<title>Detecting defects in PCBs with YOLOX using OpenMMLab</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">利用OpenMMLab用YOLOX检测PCB中的缺陷</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/detecting-defects-in-pcbs-with-yolox-using-openmmlab-91c1775ac884#2022-04-04">https://towardsdatascience.com/detecting-defects-in-pcbs-with-yolox-using-openmmlab-91c1775ac884#2022-04-04</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="7138" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">使用OpenMMLab和著名的YOLO系列中的新架构YOLOX进行对象检测。我们将尝试检测印刷电路板中的不同缺陷。</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/e6508dbc6d1c3db81119851d63532749.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*k11fksv1lVRYFfFG"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">Alexandre Debiève 在<a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</p></figure><h1 id="7eeb" class="kw kx iq bd ky kz la lb lc ld le lf lg jw lh jx li jz lj ka lk kc ll kd lm ln bi translated">印刷电路板</h1><p id="572d" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">我知道我知道，你一定会问，什么是PCB？你不是吗？嗯，对于不知道PCB是什么的人来说，这里有一个来自<a class="ae kv" href="https://en.wikipedia.org/wiki/Printed_circuit_board" rel="noopener ugc nofollow" target="_blank"> <em class="mk">维基百科</em> </a>的定义:</p><blockquote class="ml mm mn"><p id="4041" class="lo lp mk lq b lr mo jr lt lu mp ju lw mq mr lz ma ms mt md me mu mv mh mi mj ij bi translated">一个<strong class="lq ir">印刷电路板</strong> ( <strong class="lq ir"> PCB </strong>)是导电层和绝缘层的叠层夹层结构。PCB有两个互补的功能。第一种是通过焊接将<a class="ae kv" href="https://en.wikipedia.org/wiki/Electronic_component" rel="noopener ugc nofollow" target="_blank">电子元件</a>固定在外层的指定位置。第二是以受控的方式在元件的端子之间提供可靠的电连接(以及可靠的开路),这通常被称为PCB设计。</p></blockquote><p id="4d24" class="pw-post-body-paragraph lo lp iq lq b lr mo jr lt lu mp ju lw lx mr lz ma mb mt md me mf mv mh mi mj ij bi translated">我敢打赌，你一生中肯定至少见过一次PCB，但可能懒得知道它是什么。你看过DVD阅读器的背面吗？这里有一张DVD阅读器上PCB的图片，来自<a class="ae kv" href="https://en.wikipedia.org/wiki/File:SEG_DVD_430_-_Printed_circuit_board-4276.jpg" rel="noopener ugc nofollow" target="_blank"> <em class="mk">维基百科</em> </a> <em class="mk"> : </em></p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi mw"><img src="../Images/04cf29d39967c44537a0224ea24667a1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*x_EuouDgbal7hnPudxAYPQ.jpeg"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">来自<a class="ae kv" href="https://upload.wikimedia.org/wikipedia/commons/a/a4/SEG_DVD_430_-_Printed_circuit_board-4276.jpg" rel="noopener ugc nofollow" target="_blank">维基百科</a>的PCB示例</p></figure><p id="e3cc" class="pw-post-body-paragraph lo lp iq lq b lr mo jr lt lu mp ju lw lx mr lz ma mb mt md me mf mv mh mi mj ij bi translated">多氯联苯随处可见。几乎所有的电子设备都有一块PCB隐藏在其中。在许多情况下，这些多氯联苯在设计时或使用后都有缺陷。这里列出了一些常见的PCB缺陷，如互联网上所列的，还有一张来自⁴.的免费数据集的图片</p><ol class=""><li id="add2" class="mx my iq lq b lr mo lu mp lx mz mb na mf nb mj nc nd ne nf bi translated">打开</li><li id="dbe9" class="mx my iq lq b lr ng lu nh lx ni mb nj mf nk mj nc nd ne nf bi translated">过量焊料</li><li id="cbdc" class="mx my iq lq b lr ng lu nh lx ni mb nj mf nk mj nc nd ne nf bi translated">组件移位</li><li id="daf4" class="mx my iq lq b lr ng lu nh lx ni mb nj mf nk mj nc nd ne nf bi translated">冷接缝</li><li id="7154" class="mx my iq lq b lr ng lu nh lx ni mb nj mf nk mj nc nd ne nf bi translated">焊料桥</li><li id="3930" class="mx my iq lq b lr ng lu nh lx ni mb nj mf nk mj nc nd ne nf bi translated">网状和飞溅</li><li id="cba9" class="mx my iq lq b lr ng lu nh lx ni mb nj mf nk mj nc nd ne nf bi translated">抬起的垫子</li></ol><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nl"><img src="../Images/5947049a0ce5a21ab3800304b18b6f52.png" data-original-src="https://miro.medium.com/v2/resize:fit:1280/format:webp/1*JACb9mXwl52ZibP_BSDHpQ.jpeg"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">图1:来自⁵<a class="ae kv" href="https://github.com/tangsanli5201/DeepPCB" rel="noopener ugc nofollow" target="_blank">PCB数据集Github知识库</a>的示例图像</p></figure><p id="0c91" class="pw-post-body-paragraph lo lp iq lq b lr mo jr lt lu mp ju lw lx mr lz ma mb mt md me mf mv mh mi mj ij bi translated">我们不会深究它们的确切含义，因为这不是这篇博客的内容。但是，从了解一点计算机视觉和深度学习的计算机工程师的角度来看，在PCB的数字图像中检测缺陷似乎是一个可以解决的问题。</p><p id="1073" class="pw-post-body-paragraph lo lp iq lq b lr mo jr lt lu mp ju lw lx mr lz ma mb mt md me mf mv mh mi mj ij bi translated">我们将使用来自⁸的<a class="ae kv" href="https://openmmlab.com/" rel="noopener ugc nofollow" target="_blank"> OpenMMLab </a>的<a class="ae kv" href="https://github.com/open-mmlab/mmdetection" rel="noopener ugc nofollow" target="_blank"> mmdetection </a> ⁶来检测PCB图像中的缺陷。OpenMMLab⁸是一个深度学习库，拥有计算机视觉领域大多数最新实现的预训练模型。它实现了几乎所有众所周知的视觉问题，如分类、对象检测&amp;分割、姿态估计、图像生成、对象跟踪等等。</p><h1 id="d646" class="kw kx iq bd ky kz la lb lc ld le lf lg jw lh jx li jz lj ka lk kc ll kd lm ln bi translated">YOLOX:超越2021⁷yolo系列</h1><p id="8cad" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">在这篇博客中，我们将使用<a class="ae kv" href="https://arxiv.org/abs/2107.08430" rel="noopener ugc nofollow" target="_blank"> YOLOX </a> ⁷，我们将用<a class="ae kv" href="https://github.com/open-mmlab/mmdetection" rel="noopener ugc nofollow" target="_blank"> mmdetection </a> ⁶.进行微调<a class="ae kv" href="https://arxiv.org/abs/2107.08430" rel="noopener ugc nofollow" target="_blank"> YOLOX </a> ⁷是2021年发布的最先进的车型，是YOLO系列的改进。作者做了一些重要的改进，列举如下。</p><ol class=""><li id="7eb7" class="mx my iq lq b lr mo lu mp lx mz mb na mf nb mj nc nd ne nf bi translated">用于标签分配的SimOTA简介</li><li id="c75a" class="mx my iq lq b lr ng lu nh lx ni mb nj mf nk mj nc nd ne nf bi translated">移除锚箱</li><li id="0eb9" class="mx my iq lq b lr ng lu nh lx ni mb nj mf nk mj nc nd ne nf bi translated">特别注意数据增强，如抖动混淆</li><li id="390c" class="mx my iq lq b lr ng lu nh lx ni mb nj mf nk mj nc nd ne nf bi translated">用于检测和分类的分离头</li></ol><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nm"><img src="../Images/ef57262a94ca6e55faea72dbb78af3ab.png" data-original-src="https://miro.medium.com/v2/resize:fit:1172/format:webp/1*l9TTvSKm1czAN6tKfJx6kw.png"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">图二:从<a class="ae kv" href="https://arxiv.org/pdf/2107.08430.pdf" rel="noopener ugc nofollow" target="_blank"> YOLOX截取的建筑图:超越202 </a> ⁷的YOLO系列</p></figure><p id="e55b" class="pw-post-body-paragraph lo lp iq lq b lr mo jr lt lu mp ju lw lx mr lz ma mb mt md me mf mv mh mi mj ij bi translated">之前从v3到v5的YOLO系列都有一个单一的预测头，包括边界框预测、分类得分预测以及客观得分预测，如上图上半部分所示。</p><p id="4fdb" class="pw-post-body-paragraph lo lp iq lq b lr mo jr lt lu mp ju lw lx mr lz ma mb mt md me mf mv mh mi mj ij bi translated">这在YOLOX⁷系列中有所改变，作者选择使用一个分离的头，所有预测都使用单独的头。如上面图2的下半部分所示，检测头和分类头位于不同的头中。这有助于改善训练过程中的收敛时间(如图3所示),并略微提高模型精度。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nn"><img src="../Images/b30776746782611ae081e6775a4e9b7d.png" data-original-src="https://miro.medium.com/v2/resize:fit:640/format:webp/1*KsXoT7rPIP3jDk_1XOUviA.png"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">图3:从<a class="ae kv" href="https://arxiv.org/abs/2107.08430" rel="noopener ugc nofollow" target="_blank"> YOLOX截取的训练指标图:超越202 ⁷的YOLO系列</a></p></figure><p id="9b89" class="pw-post-body-paragraph lo lp iq lq b lr mo jr lt lu mp ju lw lx mr lz ma mb mt md me mf mv mh mi mj ij bi translated">由于这一点，模型的速度受到影响，因为参数的数量随着分成两个头而显著增加。正如我们在图4中看到的，YOLOX-L比YOLOv5-L慢一点。它还有专门为参数低得多的边缘设备构建的纳米和微型版本。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi no"><img src="../Images/d1625970a011beed8f61a5893e7079e6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1396/format:webp/1*pF2yu_XSVWxnYPGxksVYlQ.png"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">图4:从<a class="ae kv" href="https://arxiv.org/abs/2107.08430" rel="noopener ugc nofollow" target="_blank"> YOLOX截取的速度和尺寸与精度的关系图:超越202 ⁷的YOLO系列</a></p></figure><p id="ed54" class="pw-post-body-paragraph lo lp iq lq b lr mo jr lt lu mp ju lw lx mr lz ma mb mt md me mf mv mh mi mj ij bi translated">与之前最先进的对象检测模型相比，它们在平均精度方面有所提高，FPS略有下降。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi np"><img src="../Images/0825c6cdd16bf82e7f0a1a8e45e66b6f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1382/format:webp/1*YuYLhCbU_2jpY7aT71aqDg.png"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">图5:从<a class="ae kv" href="https://arxiv.org/abs/2107.08430" rel="noopener ugc nofollow" target="_blank"> YOLOX截取的物体检测模型对比表:超越202 ⁷的YOLO系列</a></p></figure><p id="d869" class="pw-post-body-paragraph lo lp iq lq b lr mo jr lt lu mp ju lw lx mr lz ma mb mt md me mf mv mh mi mj ij bi translated">最后，正如伟大的<a class="ae kv" href="https://en.wikipedia.org/wiki/Linus_Torvalds" rel="noopener ugc nofollow" target="_blank">莱纳斯·托沃兹</a>曾经说过的，</p><blockquote class="ml mm mn"><p id="1626" class="lo lp mk lq b lr mo jr lt lu mp ju lw mq mr lz ma ms mt md me mu mv mh mi mj ij bi translated">空谈不值钱。给我看看代码。</p></blockquote><p id="1bab" class="pw-post-body-paragraph lo lp iq lq b lr mo jr lt lu mp ju lw lx mr lz ma mb mt md me mf mv mh mi mj ij bi translated">让我们直接跳进来吧！</p><h1 id="eeed" class="kw kx iq bd ky kz la lb lc ld le lf lg jw lh jx li jz lj ka lk kc ll kd lm ln bi translated">使用mmdetection微调YOLOX</h1><p id="200b" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">我们有一个开源的PCB缺陷数据集，称为<a class="ae kv" href="https://github.com/tangsanli5201/DeepPCB" rel="noopener ugc nofollow" target="_blank"> DeepPCB⁵ </a>。该数据集由1500个图像对组成，每个图像对具有无缺陷的模板图像和具有缺陷的图像，该图像具有6种常见缺陷类型的边界框注释，即。开路、鼠咬、短路、杂散、假铜和针孔。如果你需要的话，你可以从<a class="ae kv" href="https://github.com/tangsanli5201/DeepPCB" rel="noopener ugc nofollow" target="_blank">数据集链接</a> ⁵中获得更多关于它的信息。</p><p id="e6e1" class="pw-post-body-paragraph lo lp iq lq b lr mo jr lt lu mp ju lw lx mr lz ma mb mt md me mf mv mh mi mj ij bi translated">这些图像的尺寸为640×640，在我们的例子中是完美的，因为YOLOX⁷是在相同的尺寸上训练的。</p><h1 id="1088" class="kw kx iq bd ky kz la lb lc ld le lf lg jw lh jx li jz lj ka lk kc ll kd lm ln bi translated">OpenMMLab⁸</h1><p id="b6d8" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">OpenMMLab使得微调最先进的模型变得非常容易，只需很少的代码更改。它有一个针对特定用例的综合API。我们将使用<a class="ae kv" href="https://github.com/open-mmlab/mmdetection" rel="noopener ugc nofollow" target="_blank"> mmdetection⁶ </a>对DeepPCB⁵数据集上的YOLOX⁷进行微调。</p><h2 id="bac1" class="nq kx iq bd ky nr ns dn lc nt nu dp lg lx nv nw li mb nx ny lk mf nz oa lm ob bi translated">数据集格式</h2><blockquote class="ml mm mn"><p id="1744" class="lo lp mk lq b lr mo jr lt lu mp ju lw mq mr lz ma ms mt md me mu mv mh mi mj ij bi translated">注意:PCB缺陷数据集是从<a class="ae kv" href="https://github.com/tangsanli5201/DeepPCB" rel="noopener ugc nofollow" target="_blank"> DeepPCB Github repo </a>中获取的开源数据集，带有MIT许可证，可在此处参考<a class="ae kv" href="https://github.com/tangsanli5201/DeepPCB/blob/master/LICENSE" rel="noopener ugc nofollow" target="_blank">。</a></p></blockquote><p id="d563" class="pw-post-body-paragraph lo lp iq lq b lr mo jr lt lu mp ju lw lx mr lz ma mb mt md me mf mv mh mi mj ij bi translated">我们需要将数据集修改为COCO格式或Pascal VOC格式来重新训练模型。这是mmdetection⁶加载我们的自定义数据集进行训练所必需的。出于培训目的，我们将采用COCO格式。你不需要麻烦地将数据集转换成COCO格式，因为它已经为你完成了。您可以从<a class="ae kv" href="https://drive.google.com/file/d/1-VZgKcMrJ3BUtoKvCM3F5VC0udTX9E1Y/view?usp=sharing" rel="noopener ugc nofollow" target="_blank">这里</a>直接下载转换后的数据集。整个数据集与DeepPCB⁵的相同，只是增加了带有用于训练的COCO格式注释的训练和测试JSON文件。</p><p id="bf66" class="pw-post-body-paragraph lo lp iq lq b lr mo jr lt lu mp ju lw lx mr lz ma mb mt md me mf mv mh mi mj ij bi translated">我不会经历到COCO格式的转换，因为你可以找到许多文档经历这个过程，就像在<a class="ae kv" href="https://mmdetection.readthedocs.io/en/latest/2_new_data_model.html" rel="noopener ugc nofollow" target="_blank"> mmdetection文档</a>中提到的一样。请随意浏览脚本，如果您需要任何帮助，不要介意留下评论。把这个数据集转换成COCO格式的脚本在这里<a class="ae kv" href="https://gist.github.com/Praneet9/5c182383466308b5bbb8cceac7b3b95c#file-convert_to_coco-py" rel="noopener ugc nofollow" target="_blank">分享</a>。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="oc od l"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">将DeepPCB数据集注释转换为COCO格式的脚本</p></figure><h2 id="0b12" class="nq kx iq bd ky nr ns dn lc nt nu dp lg lx nv nw li mb nx ny lk mf nz oa lm ob bi translated">数据集配置</h2><p id="ad06" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">下一步是修改数据集配置，以使用我们的自定义数据集。我们将需要添加/修改特定的东西，如<code class="fe oe of og oh b">number of classes</code>、<code class="fe oe of og oh b">annotation paths</code>、<code class="fe oe of og oh b">dataset path</code>、<code class="fe oe of og oh b">number of epochs</code>、<code class="fe oe of og oh b">base config path</code>，以及一些数据加载器参数。</p><p id="5cc3" class="pw-post-body-paragraph lo lp iq lq b lr mo jr lt lu mp ju lw lx mr lz ma mb mt md me mf mv mh mi mj ij bi translated">我们将复制预先编写的YOLOX-s配置，并针对我们的数据集对其进行修改。配置的其余部分，如增强、优化器和其他超参数将是相同的。</p><p id="188c" class="pw-post-body-paragraph lo lp iq lq b lr mo jr lt lu mp ju lw lx mr lz ma mb mt md me mf mv mh mi mj ij bi translated">我们不会做太多改变，因为这篇博客的主要目的是熟悉手头的问题，尝试最先进的YOLOX架构，并试验mmdetection库。我们将把这个文件命名为<code class="fe oe of og oh b">yolox_s_config.py</code>，并用于训练。</p><p id="830f" class="pw-post-body-paragraph lo lp iq lq b lr mo jr lt lu mp ju lw lx mr lz ma mb mt md me mf mv mh mi mj ij bi translated">我们将为我们的预测头添加<code class="fe oe of og oh b">class names</code>并改变<code class="fe oe of og oh b">number of classes</code>。需要更改<code class="fe oe of og oh b">base path</code>，因为配置将从根目录而不是<code class="fe oe of og oh b">configs</code>目录加载。</p><pre class="kg kh ki kj gt oi oh oj ok aw ol bi"><span id="d82a" class="nq kx iq oh b gy om on l oo op">_base_ = ['configs/_base_/schedules/schedule_1x.py', 'configs/_base_/default_runtime.py']</span><span id="0777" class="nq kx iq oh b gy oq on l oo op">classes = ('open', 'short', 'mousebite', 'spur', 'copper', 'pin-hole')</span><span id="e1f3" class="nq kx iq oh b gy oq on l oo op">bbox_head = dict(type='YOLOXHead', num_classes=6, in_channels=128, feat_channels=128)</span></pre><p id="248e" class="pw-post-body-paragraph lo lp iq lq b lr mo jr lt lu mp ju lw lx mr lz ma mb mt md me mf mv mh mi mj ij bi translated">我们需要稍微修改一下训练数据集加载器，以使用我们的<code class="fe oe of og oh b">classes</code>和<code class="fe oe of og oh b">annotations</code>路径。</p><pre class="kg kh ki kj gt oi oh oj ok aw ol bi"><span id="f7ea" class="nq kx iq oh b gy om on l oo op">train_dataset = dict(<br/>    type='MultiImageMixDataset',<br/>    dataset=dict(<br/>        type=dataset_type,<br/>        classes=classes,<br/>        ann_file='train.json',<br/>        img_prefix='',<br/>        pipeline=[<br/>            dict(type='LoadImageFromFile'),<br/>            dict(type='LoadAnnotations', with_bbox=True)<br/>        ],<br/>        filter_empty_gt=False,<br/>    ),<br/>    pipeline=train_pipeline)</span></pre><p id="20f8" class="pw-post-body-paragraph lo lp iq lq b lr mo jr lt lu mp ju lw lx mr lz ma mb mt md me mf mv mh mi mj ij bi translated">我们需要对这里的验证和测试集做同样的事情。我们不打算在这里使用一个单独的测试集，相反，我们将使用同一个测试集进行验证和测试。</p><pre class="kg kh ki kj gt oi oh oj ok aw ol bi"><span id="f067" class="nq kx iq oh b gy om on l oo op">data = dict(<br/>    samples_per_gpu=8,<br/>    workers_per_gpu=4,<br/>    persistent_workers=True,<br/>    train=train_dataset,<br/>    val=dict(<br/>        type=dataset_type,<br/>        classes=classes,<br/>        ann_file='test.json',<br/>        img_prefix='',<br/>        pipeline=test_pipeline),<br/>    test=dict(<br/>        type=dataset_type,<br/>        classes=classes,<br/>        ann_file='test.json',<br/>        img_prefix='',<br/>        pipeline=test_pipeline))</span></pre><p id="0b3d" class="pw-post-body-paragraph lo lp iq lq b lr mo jr lt lu mp ju lw lx mr lz ma mb mt md me mf mv mh mi mj ij bi translated">我们将只训练20个时期的模型，并且每5个时期得到验证结果。我们不需要再训练它了，因为我们在仅仅20个纪元内就获得了不错的结果。虽然这不是最好的模式，但为了博客，这是不错的。</p><pre class="kg kh ki kj gt oi oh oj ok aw ol bi"><span id="89b0" class="nq kx iq oh b gy om on l oo op">max_epochs = 20<br/>interval = 5</span></pre><p id="b16e" class="pw-post-body-paragraph lo lp iq lq b lr mo jr lt lu mp ju lw lx mr lz ma mb mt md me mf mv mh mi mj ij bi translated">你也可以从要点<a class="ae kv" href="https://gist.github.com/Praneet9/75f8bd9536455b99b942740b83423d24" rel="noopener ugc nofollow" target="_blank">这里</a>复制整个编辑过的配置，并用它来训练模型。你可以以后再谢我！😉</p><h2 id="147a" class="nq kx iq bd ky nr ns dn lc nt nu dp lg lx nv nw li mb nx ny lk mf nz oa lm ob bi translated">培养</h2><p id="16e4" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">我们可以很好地处理数据集部分。接下来我们需要做的是训练模型。mmdetection⁶图书馆最好的一点是，所有与培训相关的事情都已经为你做好了。您需要做的就是从<code class="fe oe of og oh b">tools</code>目录运行训练脚本，并将路径传递给我们上面创建的数据集配置。</p><pre class="kg kh ki kj gt oi oh oj ok aw ol bi"><span id="b5ea" class="nq kx iq oh b gy om on l oo op">python3 tools/train.py yolox_s_config.py</span></pre><p id="7b9d" class="pw-post-body-paragraph lo lp iq lq b lr mo jr lt lu mp ju lw lx mr lz ma mb mt md me mf mv mh mi mj ij bi translated">瞧啊！🔥</p><p id="5100" class="pw-post-body-paragraph lo lp iq lq b lr mo jr lt lu mp ju lw lx mr lz ma mb mt md me mf mv mh mi mj ij bi translated">在mmdetection⁶.的帮助下，您已经使用DeepPCB⁵数据集成功训练了YOLOX⁷模型来检测PCB缺陷</p><h2 id="5167" class="nq kx iq bd ky nr ns dn lc nt nu dp lg lx nv nw li mb nx ny lk mf nz oa lm ob bi translated">推理</h2><p id="5b8b" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">让我们看看我们的模型在一些例子上的表现。你一定想知道，看着训练模型是多么容易，一定有一个命令来对图像进行推理？有！但是，不要让训练模型的简单过程宠坏了你。让我们写一些用于推理的代码，但是让你高兴的是，它不到10行代码。</p><pre class="kg kh ki kj gt oi oh oj ok aw ol bi"><span id="cc46" class="nq kx iq oh b gy om on l oo op">from mmdet.apis import init_detector, inference_detector, show_result_pyplot</span><span id="c774" class="nq kx iq oh b gy oq on l oo op">config_file = 'yolox_s_config.py'</span><span id="bf71" class="nq kx iq oh b gy oq on l oo op">checkpoint_file = 'best_bbox_mAP_epoch_20.pth'<br/>device = 'cuda:0'</span><span id="2fda" class="nq kx iq oh b gy oq on l oo op"># init a detector<br/>model = init_detector(config_file, checkpoint_file, device=device)</span><span id="83b0" class="nq kx iq oh b gy oq on l oo op"># inference the demo image<br/>image_path = 'demo.jpg'</span><span id="c73a" class="nq kx iq oh b gy oq on l oo op">op = inference_detector(model, image_path)<br/>show_result_pyplot(model, image_path, op, score_thr=0.6)</span></pre><p id="574c" class="pw-post-body-paragraph lo lp iq lq b lr mo jr lt lu mp ju lw lx mr lz ma mb mt md me mf mv mh mi mj ij bi translated">这将显示一个图像，其上绘制了带有预测类名的边界框。这是一个包含模型预测的数据集的示例图像。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nl"><img src="../Images/4d0d7c017cc36d5204868c90ddf2a676.png" data-original-src="https://miro.medium.com/v2/resize:fit:1280/format:webp/1*zvFetQgCQW2RKbkTXKEMbA.jpeg"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">来自DeepPCB数据集的预测示例</p></figure><p id="a26c" class="pw-post-body-paragraph lo lp iq lq b lr mo jr lt lu mp ju lw lx mr lz ma mb mt md me mf mv mh mi mj ij bi translated">我们做到了！🎊</p><p id="b3a3" class="pw-post-body-paragraph lo lp iq lq b lr mo jr lt lu mp ju lw lx mr lz ma mb mt md me mf mv mh mi mj ij bi translated">你可以在谷歌实验室<a class="ae kv" href="https://colab.research.google.com/drive/1cbXvQm29koR6MnX_f130NIapGhtw4wYR?usp=sharing" rel="noopener ugc nofollow" target="_blank">这里</a>找到训练和推理的代码。你也可以尝试我们预先训练好的模型，并用它进行推理。预先训练好的模型可以在<a class="ae kv" href="https://drive.google.com/file/d/19dTqDVHyoRmC3LJdJUypy-zcXb1BhqN0/view?usp=sharing" rel="noopener ugc nofollow" target="_blank">这里</a>下载。请随意使用它，如果你遇到任何问题，请在评论中告诉我。乐意帮忙！😉</p><h1 id="356e" class="kw kx iq bd ky kz la lb lc ld le lf lg jw lh jx li jz lj ka lk kc ll kd lm ln bi translated">结论</h1><p id="204b" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">今天，我们了解了现实世界中普遍存在的一个新问题，并尝试用像YOLOX⁷.这样的艺术模型来解决这个问题</p><p id="57b1" class="pw-post-body-paragraph lo lp iq lq b lr mo jr lt lu mp ju lw lx mr lz ma mb mt md me mf mv mh mi mj ij bi translated">我们还使用深度学习社区中领先的开源库之一mmdetection⁶来训练对象检测模型。如果我不提mmdetection⁶是如何宠坏了我们，让我们几乎不用任何定制脚本就能如此快速轻松地解决问题，那将是不公平的。</p><p id="ee03" class="pw-post-body-paragraph lo lp iq lq b lr mo jr lt lu mp ju lw lx mr lz ma mb mt md me mf mv mh mi mj ij bi translated">我希望你今天学到了新东西！请随意运行代码。</p><p id="8a91" class="pw-post-body-paragraph lo lp iq lq b lr mo jr lt lu mp ju lw lx mr lz ma mb mt md me mf mv mh mi mj ij bi translated">在<a class="ae kv" href="https://deeplearninganalytics.org/" rel="noopener ugc nofollow" target="_blank">深度学习分析</a>，我们非常热衷于使用机器学习来解决现实世界的问题。我们已经帮助许多企业部署了创新的基于人工智能的解决方案。如果你看到合作的机会，请通过我们的网站<a class="ae kv" href="https://deeplearninganalytics.org/contact-us/" rel="noopener ugc nofollow" target="_blank">这里</a>联系我们。</p><h2 id="66db" class="nq kx iq bd ky nr ns dn lc nt nu dp lg lx nv nw li mb nx ny lk mf nz oa lm ob bi translated">参考</h2><ol class=""><li id="d5d9" class="mx my iq lq b lr ls lu lv lx or mb os mf ot mj nc nd ne nf bi translated">PCB定义:【https://en.wikipedia.org/wiki/Printed_circuit_board T4】</li><li id="fee4" class="mx my iq lq b lr ng lu nh lx ni mb nj mf nk mj nc nd ne nf bi translated">PCB图:<a class="ae kv" href="https://en.wikipedia.org/wiki/File:SEG_DVD_430_-_Printed_circuit_board-4276.jpg" rel="noopener ugc nofollow" target="_blank">https://en . Wikipedia . org/wiki/File:SEG _ DVD _ 430 _-_ Printed _ circuit _ board-4276 . jpg</a></li><li id="e2b0" class="mx my iq lq b lr ng lu nh lx ni mb nj mf nk mj nc nd ne nf bi translated">常见PCB缺陷:<a class="ae kv" href="https://blog.matric.com/7-types-of-pcb-soldering-defects-to-watch-out-for" rel="noopener ugc nofollow" target="_blank">https://blog . matric . com/7-PCB类型-焊接-缺陷-注意-for </a></li><li id="e219" class="mx my iq lq b lr ng lu nh lx ni mb nj mf nk mj nc nd ne nf bi translated">PCB缺陷数据集论文:<a class="ae kv" href="https://arxiv.org/abs/1902.06197" rel="noopener ugc nofollow" target="_blank">https://arxiv.org/abs/1902.06197</a></li><li id="0938" class="mx my iq lq b lr ng lu nh lx ni mb nj mf nk mj nc nd ne nf bi translated">PCB缺陷数据集:<a class="ae kv" href="https://github.com/tangsanli5201/DeepPCB" rel="noopener ugc nofollow" target="_blank">https://github.com/tangsanli5201/DeepPCB</a></li><li id="241e" class="mx my iq lq b lr ng lu nh lx ni mb nj mf nk mj nc nd ne nf bi translated">mm detection:<a class="ae kv" href="https://github.com/open-mmlab/mmdetection" rel="noopener ugc nofollow" target="_blank">https://github.com/open-mmlab/mmdetection</a></li><li id="12b5" class="mx my iq lq b lr ng lu nh lx ni mb nj mf nk mj nc nd ne nf bi translated">YOLOX Paper:<a class="ae kv" href="https://arxiv.org/abs/2107.08430" rel="noopener ugc nofollow" target="_blank">https://arxiv.org/abs/2107.08430</a></li><li id="1673" class="mx my iq lq b lr ng lu nh lx ni mb nj mf nk mj nc nd ne nf bi translated">OpenMMLab:<a class="ae kv" href="https://openmmlab.com/" rel="noopener ugc nofollow" target="_blank">https://openmmlab.com/</a></li></ol></div></div>    
</body>
</html>