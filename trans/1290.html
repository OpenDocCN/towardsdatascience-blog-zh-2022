<html>
<head>
<title>No GPUs Available, What Now?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">没有可用的 GPU，现在怎么办？</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/no-gpus-available-what-now-b9c01108ca58#2022-03-31">https://towardsdatascience.com/no-gpus-available-what-now-b9c01108ca58#2022-03-31</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><figure class="ip iq gp gr ir is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi io"><img src="../Images/d1f65539c2273f3dd74d55f3e9b612c1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*7CR_6y_QQryTvvrA"/></div></div><p class="iz ja gj gh gi jb jc bd b be z dk translated">约瑟夫·格雷夫在<a class="ae jd" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</p></figure><div class=""/><div class=""><h2 id="86fb" class="pw-subtitle-paragraph kd jf jg bd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku dk translated">如何解决 GPU 短缺的问题</h2></div><p id="f926" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">图形处理单元(GPU)已经成为当今 MLOps 生态系统不可或缺的一部分，<a class="ae jd" href="https://info.kpmg.us/news-perspectives/technology-innovation/thriving-in-an-ai-world.html" rel="noopener ugc nofollow" target="_blank">随着越来越多的公司在生产中运行人工智能模型</a>，对 GPU 的需求也大幅上升。在毕马威 2021 年的研究中，<a class="ae jd" href="https://info.kpmg.us/news-perspectives/technology-innovation/thriving-in-an-ai-world.html" rel="noopener ugc nofollow" target="_blank">在人工智能世界中茁壮成长</a>，来自许多行业的商业领袖指出，人工智能在他们的组织中至少具有适度的功能，包括:工业制造(93%)、金融服务(84%)、科技(83%)、零售(81%)和生命科学(77%)。</p><p id="736f" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">然而，在过去的几年里，GPU 的供应已经跟不上需求的增长。物理 GPU 几乎经常售罄，大型云提供商似乎也无法满足需求，导致 GPU 等待时间过长。<strong class="kx jh">但是为什么对 GPU 的需求那么高？如果你需要，你能做些什么呢？</strong></p><h1 id="8a1c" class="lr ls jg bd lt lu lv lw lx ly lz ma mb km mc kn md kp me kq mf ks mg kt mh mi bi translated">为什么 GPU 如此重要？</h1><p id="a432" class="pw-post-body-paragraph kv kw jg kx b ky mj kh la lb mk kk ld le ml lg lh li mm lk ll lm mn lo lp lq ij bi translated">要理解为什么 GPU 对操作机器学习模型如此重要，最好看看 GPU 是为什么类型的应用而制造的。Owens <em class="mo">等人</em>在他的论文<a class="ae jd" href="https://escholarship.org/content/qt0cv1p1nc/qt0cv1p1nc.pdf" rel="noopener ugc nofollow" target="_blank">“GPU 计算”</a>中列出了 GPU 应用的以下特征:</p><ul class=""><li id="b9a4" class="mp mq jg kx b ky kz lb lc le mr li ms lm mt lq mu mv mw mx bi translated"><strong class="kx jh">计算量大</strong></li><li id="bb83" class="mp mq jg kx b ky my lb mz le na li nb lm nc lq mu mv mw mx bi translated"><strong class="kx jh">高并行度</strong></li><li id="7a1f" class="mp mq jg kx b ky my lb mz le na li nb lm nc lq mu mv mw mx bi translated">吞吐量比延迟更重要</li></ul><p id="2f5d" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">换句话说，GPU 非常擅长执行成千上万的并行线程，以快速解决具有大量内在并行性的大型问题。每个单独的计算可能比在 CPU 上慢一点，但因为一个<strong class="kx jh"> GPU 可以并行处理这么多，所以整个问题解决得更快。</strong></p><p id="cf01" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">由于大多数机器学习算法基本上是一堆线性代数运算的串联，所以它们非常适合并行化。典型的神经网络由互连层的长链组成(见下图)。虽然在一个完整的网络中有大量的计算，但它可以被分解成更小的、顺序相关的工作块层。正因为如此，神经网络可以真正利用 GPU 的能力来达到比 CPU 更高的速度。</p><figure class="ne nf ng nh gt is gh gi paragraph-image"><div class="gh gi nd"><img src="../Images/d0c07da127d4e23188bd445b7fa122e2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1156/format:webp/1*4epcjqb5oRMxCp232a5pgw.png"/></div><p class="iz ja gj gh gi jb jc bd b be z dk translated">图片由作者提供，灵感来源:Choquette 等人(2021)<em class="ni"/><a class="ae jd" href="https://ieeexplore.ieee.org/document/9361255" rel="noopener ugc nofollow" target="_blank"><em class="ni">《NVIDIA A100 张量核心 GPU:性能与创新》</em> </a> <em class="ni">。此图概述了深度学习网络映射到 GPU。</em></p></figure><p id="90a4" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><a class="ae jd" href="https://arxiv.org/abs/1608.07249" rel="noopener ugc nofollow" target="_blank">石<em class="mo">等人</em> </a>实际上是在 CPU 和 GPU 之间进行了一次彻底的深度学习的基准测试。即使他们的论文来自 2017 年，他们的结论仍然成立。在深度学习方面，GPU 的表现优于 CPU。你可以在下图中看到他们的结果表。每个类别中最快的时间用粗体标出。</p><figure class="ne nf ng nh gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi nj"><img src="../Images/10e07a0af151b85b6424235a78164d60.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*RGJSdIvEhftZlN7o"/></div></div><p class="iz ja gj gh gi jb jc bd b be z dk translated"><em class="ni">图片由石等人提供。al (2017) </em> <a class="ae jd" href="https://arxiv.org/abs/1608.07249" rel="noopener ugc nofollow" target="_blank"> <em class="ni">【标杆最先进的深度学习软件工具】</em> </a> <em class="ni">。以粗体显示，您可以在每个类别(台式机 CPU、服务器 CPU、单个 GPU)中找到最快的时间。GPU 胜过 CPU。</em></p></figure><h1 id="8fae" class="lr ls jg bd lt lu lv lw lx ly lz ma mb km mc kn md kp me kq mf ks mg kt mh mi bi translated">当你需要一个 GPU 时，获得它的困难</h1><p id="94f8" class="pw-post-body-paragraph kv kw jg kx b ky mj kh la lb mk kk ld le ml lg lh li mm lk ll lm mn lo lp lq ij bi translated">随着 GPU 对于 ML 工作负载如此完美，以及越来越多的公司使用 AI，需求大幅上升。这种需求的增长使得现在很难获得 GPU。当您想要在 GPU 上运行工作负载时，大致有两种选择:</p><ol class=""><li id="5472" class="mp mq jg kx b ky kz lb lc le mr li ms lm mt lq nk mv mw mx bi translated">买个<strong class="kx jh">物理 GPU </strong></li><li id="2124" class="mp mq jg kx b ky my lb mz le na li nb lm nc lq nk mv mw mx bi translated">使用<strong class="kx jh">云 GPU </strong>(例如在 AWS 或谷歌，或通过特定的机器学习(ML)平台，如<a class="ae jd" href="https://ubiops.com/docs/ubiops_tutorials/ready-deployments/gpu-tutorial/gpu-model/" rel="noopener ugc nofollow" target="_blank"> UbiOps) </a></li></ol><p id="1d70" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">物理图形处理器非常昂贵，而且也经常售罄。这是由所谓的<a class="ae jd" href="https://medium.com/we-are-the-gamerhash/gpu-shortage-and-how-to-deal-with-it-gamerhash-we-have-a-problem-18e4b2b9a2de" rel="noopener"> <em class="mo">黄牛</em>造成的，他们一旦在网站上提供，就会用机器人买下所有可用的 GPU</a>。正因为如此，你只能从这些黄牛手里买 GPU，除非你比机器人还快。黄牛以比原价高出 200% 的<a class="ae jd" href="https://computerinfobits.com/what-is-gpu-scalping/" rel="noopener ugc nofollow" target="_blank">价格转售产品，价格高得离谱。</a></p><p id="3381" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">随着物理 GPU 的天文价格，云 GPU 成为一个更有趣的选择。你通常只需为使用 GPU 的时间付费，所以如果你的工作负载不运行太长时间，这通常比你自己购买 GPU 便宜得多。云 GPU 是高度可扩展的，它们最小化成本，并且它们还清理本地资源。当你的模型在一个云数据中心的 GPU 上运行时，你可以继续使用你的笔记本电脑。</p><p id="d936" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">然而，云一直难以跟上 GPU 需求的增长。随着需求的增加，但供应的增加太少，用户最终需要等待 GPU 变得可用。Gigaom 的人工智能分析师 Anand Joshi 研究了这个问题，并注意到许多用户正在经历比几年前更长的等待时间。如果您在生产中有一个需要在几秒钟内做出响应的机器学习(ML)模型，如果您甚至不能在一分钟内获得可用的 GPU，这可能会成为一个大问题。在这种情况下，您可能需要从云中购买 24/7 可用的专用 GPU，但也因此贵了很多。</p><h1 id="d10f" class="lr ls jg bd lt lu lv lw lx ly lz ma mb km mc kn md kp me kq mf ks mg kt mh mi bi translated">如何解决 GPU 短缺的问题？</h1><p id="aefa" class="pw-post-body-paragraph kv kw jg kx b ky mj kh la lb mk kk ld le ml lg lh li mm lk ll lm mn lo lp lq ij bi translated">假设您的模型需要一个 GPU，但您无法获得物理 GPU，并且您在云中的排队等待时间太长，您有什么选择？</p><p id="0cbd" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">正如我之前提到的，您可以从任何云提供商那里购买专用 GPU(您可以按月获得 GPU，而不是按小时)，但这对您的组织来说可能太贵了。<strong class="kx jh">您还可以尝试在不同的云中轮询可用的 GPU，并选择提供 GPU 最快的一个。</strong>但是，您必须处理多种云，并使您的基础架构与云无关。这太麻烦了。</p><p id="06a6" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><strong class="kx jh">另一种选择是采用专注于 GPU 的云环境，如</strong> <a class="ae jd" href="https://www.eschercloud.com/" rel="noopener ugc nofollow" target="_blank"> <strong class="kx jh">埃舍尔云</strong> </a> <strong class="kx jh">(由 NVIDIA 支持的欧洲云)，或</strong><a class="ae jd" href="https://www.paperspace.com/core" rel="noopener ugc nofollow" target="_blank"><strong class="kx jh">Paperspace Core</strong></a>。但是，这对您的组织来说可能是多余的，尤其是如果您还需要常规的 CPU 或其他与 MLOps 相关的特性。然而，如果你专注于图像或视频处理，它可能是一个很好的选择！</p><p id="9848" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">我想强调的最后一个选项是使用支持 GPU 的机器学习操作(MLOps)平台，如<a class="ae jd" href="https://ubiops.com/product/" rel="noopener ugc nofollow" target="_blank"> UbiOps </a>。它们为 MLOps 提供了额外的功能，并且通过服务级别协议(SLA ),您可以对 GPU 的可用速度有一定的发言权。UbiOps 是一个运行在云中的 MLOps 平台。它将大部分后台 It 基础设施抽象化，因此您无需担心。UbiOps 还提供可扩展的 GPU 支持，它可以在任何云上运行。他们还与 Escher Cloud 和其他欧洲云建立了合作伙伴关系，如果你是一家处理敏感数据的欧盟公司，这将非常方便。当然，我在 UbiOps 工作，所以我有一点偏见，所以请随意测试一下，亲自看看！</p><h1 id="6a77" class="lr ls jg bd lt lu lv lw lx ly lz ma mb km mc kn md kp me kq mf ks mg kt mh mi bi translated">结论</h1><p id="82f1" class="pw-post-body-paragraph kv kw jg kx b ky mj kh la lb mk kk ld le ml lg lh li mm lk ll lm mn lo lp lq ij bi translated">鉴于目前的需求和公司计划将越来越多的人工智能融入他们的业务，我认为可以肯定地说，GPU 在一段时间内仍将稀缺。尽管如此，还是有办法得到 GPU 的。</p><p id="9e87" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">无论您是购买自己的产品，使用云产品，还是通过 MLOps 平台使用，都有多种选择！哪种选择最适合取决于您的用例以及您愿意等待 GPU 可用多长时间。</p></div></div>    
</body>
</html>