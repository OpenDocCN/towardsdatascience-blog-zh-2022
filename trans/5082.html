<html>
<head>
<title>Getting Started with Astronomer Airflow: The Data Engineering Workhorse</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">天文学家气流入门:数据工程的主力</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/getting-started-with-astronomer-airflow-the-data-engineering-workhorse-d5a5cf543c2c#2022-11-13">https://towardsdatascience.com/getting-started-with-astronomer-airflow-the-data-engineering-workhorse-d5a5cf543c2c#2022-11-13</a></blockquote><div><div class="fc ii ij ik il im"/><div class="in io ip iq ir"><div class=""/><div class=""><h2 id="c4af" class="pw-subtitle-paragraph jr it iu bd b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki dk translated">借助由 Python 支持的托管气流服务天文学家构建强大且可扩展的数据管道</h2></div><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj kj"><img src="../Images/0ea4144c05f4fc8197655b5d4fca0fd6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*jJyxJekhbvN8xonn"/></div></div><p class="kv kw gk gi gj kx ky bd b be z dk translated"><a class="ae kz" href="https://unsplash.com/@nathananderson?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">内森·安德森</a>在<a class="ae kz" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍照</p></figure><h1 id="49e4" class="la lb iu bd lc ld le lf lg lh li lj lk ka ll kb lm kd ln ke lo kg lp kh lq lr bi translated"><strong class="ak">什么是天体气流？</strong></h1><p id="010b" class="pw-post-body-paragraph ls lt iu lu b lv lw jv lx ly lz jy ma mb mc md me mf mg mh mi mj mk ml mm mn in bi translated">我们将从<strong class="lu iv">气流</strong>开始。<a class="ae kz" href="https://en.wikipedia.org/wiki/Apache_Airflow" rel="noopener ugc nofollow" target="_blank"> Apache Airflow </a>是一个开源的工作流管理平台，帮助您构建<strong class="lu iv">数据工程管道</strong>。Airflow 的最大优势之一，也是它如此受欢迎的原因，是你可以用 Python 以 DAG ( <a class="ae kz" href="https://en.wikipedia.org/wiki/Directed_acyclic_graph" rel="noopener ugc nofollow" target="_blank">有向无环图</a>)的形式编写你的配置。使用 Python 编写 DAG 的强大功能意味着您可以利用强大的 Python 库套件来做几乎任何您想做的事情。</p><p id="8600" class="pw-post-body-paragraph ls lt iu lu b lv mo jv lx ly mp jy ma mb mq md me mf mr mh mi mj ms ml mm mn in bi translated">接下来是天文学家。<a class="ae kz" href="https://www.astronomer.io" rel="noopener ugc nofollow" target="_blank">天文学家</a>是一个受管理的气流服务，允许你在云环境中编排工作流程。Airflow 的一个常见用例是从一个数据源获取数据，通过几个步骤对其进行转换，然后将其加载到数据仓库中。您甚至可以利用气流进行<a class="ae kz" href="https://medium.com/towards-data-science/6-tips-to-power-feature-engineering-in-your-next-machine-learning-project-d61530eee11b" rel="noopener">特性工程</a>，在这里您可以在数据仓库中应用数据转换，创建新的数据视图。在这篇文章中，我将介绍气流的基础知识以及如何开始使用天文学家。</p><p id="4c2a" class="pw-post-body-paragraph ls lt iu lu b lv mo jv lx ly mp jy ma mb mq md me mf mr mh mi mj ms ml mm mn in bi translated">我们开始吧！</p><h1 id="f537" class="la lb iu bd lc ld le lf lg lh li lj lk ka ll kb lm kd ln ke lo kg lp kh lq lr bi translated">安装自制软件</h1><p id="8279" class="pw-post-body-paragraph ls lt iu lu b lv lw jv lx ly lz jy ma mb mc md me mf mg mh mi mj mk ml mm mn in bi translated">自制软件将是安装天文学家 CLI 最简单的方法。如果你没有安装家酿软件，你可以通过访问<a class="ae kz" href="https://brew.sh/" rel="noopener ugc nofollow" target="_blank">家酿网站</a>并运行他们提供的命令来安装。</p><h1 id="8f23" class="la lb iu bd lc ld le lf lg lh li lj lk ka ll kb lm kd ln ke lo kg lp kh lq lr bi translated">安装 Docker</h1><p id="dc76" class="pw-post-body-paragraph ls lt iu lu b lv lw jv lx ly lz jy ma mb mc md me mf mg mh mi mj mk ml mm mn in bi translated">接下来，我们需要安装<strong class="lu iv"> Docker </strong>。Docker 是一个<strong class="lu iv">容器</strong>管理系统，允许你在本地计算机和云中运行虚拟环境。Docker 是极其轻量级和强大的。Airflow 运行在 docker 容器中，并安装所需的一切，如 web 服务器和本地数据库。前往 Docker 网站，为你的操作系统安装<a class="ae kz" href="https://docs.docker.com/get-docker/" rel="noopener ugc nofollow" target="_blank"> Docker 桌面</a>。</p><p id="6777" class="pw-post-body-paragraph ls lt iu lu b lv mo jv lx ly mp jy ma mb mq md me mf mr mh mi mj ms ml mm mn in bi translated"><em class="mt">注意:在大型企业(超过 250 名员工或年收入超过 1000 万美元)和政府机构中商业使用 Docker Desktop 需要付费订阅。</em></p><h1 id="28fe" class="la lb iu bd lc ld le lf lg lh li lj lk ka ll kb lm kd ln ke lo kg lp kh lq lr bi translated">天文学家 CLI</h1><p id="1968" class="pw-post-body-paragraph ls lt iu lu b lv lw jv lx ly lz jy ma mb mc md me mf mg mh mi mj mk ml mm mn in bi translated">最后，让我们安装<a class="ae kz" href="https://docs.astronomer.io/astro/cli/install-cli" rel="noopener ugc nofollow" target="_blank">天文学家 CLI </a>(命令行界面)。CLI 是一个命令行工具，允许您与天文学家服务进行交互。您可以使用 CLI 创建新项目、部署代码和管理用户。</p><pre class="kk kl km kn gu mu mv mw bn mx my bi"><span id="5f1f" class="mz lb iu mv b be na nb l nc nd">brew install astro</span></pre><p id="7139" class="pw-post-body-paragraph ls lt iu lu b lv mo jv lx ly mp jy ma mb mq md me mf mr mh mi mj ms ml mm mn in bi translated"><strong class="lu iv">注意:</strong>对于这个例子，我们不打算将我们的任何 Dag 发布到云中；我们将在本地运行它们，感受一下天文学家是如何工作的。</p><h1 id="fc7d" class="la lb iu bd lc ld le lf lg lh li lj lk ka ll kb lm kd ln ke lo kg lp kh lq lr bi translated">创建一个 Python 虚拟环境</h1><p id="cfd4" class="pw-post-body-paragraph ls lt iu lu b lv lw jv lx ly lz jy ma mb mc md me mf mg mh mi mj mk ml mm mn in bi translated">虚拟环境是隔离您将用于运行 Airflow 的包的一种很好的方式，允许您拥有多个具有不同依赖关系的 Airflow 项目。您可以通过运行以下命令来创建虚拟环境:</p><pre class="kk kl km kn gu mu mv mw bn mx my bi"><span id="e539" class="mz lb iu mv b be na nb l nc nd">python3 -m venv venv</span></pre><p id="e6d5" class="pw-post-body-paragraph ls lt iu lu b lv mo jv lx ly mp jy ma mb mq md me mf mr mh mi mj ms ml mm mn in bi translated">然后在必要时激活环境。如果您使用的是 Visual Studio 代码，可以使用命令面板来激活环境，或者它应该在您打开项目时激活。</p><pre class="kk kl km kn gu mu mv mw bn mx my bi"><span id="e2c5" class="mz lb iu mv b be na nb l nc nd">source venv/bin/activate</span></pre><h1 id="e748" class="la lb iu bd lc ld le lf lg lh li lj lk ka ll kb lm kd ln ke lo kg lp kh lq lr bi translated">初始化项目</h1><p id="17e6" class="pw-post-body-paragraph ls lt iu lu b lv lw jv lx ly lz jy ma mb mc md me mf mg mh mi mj mk ml mm mn in bi translated">为您的项目创建一个新文件夹，并启动您选择的 IDE 我的工具是 Visual Studio 代码。在这个例子中，我将我的作业命名为<code class="fe ne nf ng mv b">Astro</code>,但是用一个更具描述性的名称来描述您正在运行的作业会更合适。</p><p id="807e" class="pw-post-body-paragraph ls lt iu lu b lv mo jv lx ly mp jy ma mb mq md me mf mr mh mi mj ms ml mm mn in bi translated">运行命令<code class="fe ne nf ng mv b">astro dev init</code>，用几个文件和文件夹创建一个新项目。最重要的文件是<strong class="lu iv">docker 文件</strong>。该文件用于构建 docker 映像，您将使用该映像来运行 Airflow 实例。Dockerfile 是一个文本文件，包含用户可以在命令行上调用的所有命令，以组合一个图像。使用 docker build，用户可以创建一个连续执行几个命令行指令的自动化构建。</p><p id="5338" class="pw-post-body-paragraph ls lt iu lu b lv mo jv lx ly mp jy ma mb mq md me mf mr mh mi mj ms ml mm mn in bi translated">您还会在文件夹中找到一个<strong class="lu iv"> requirements.txt </strong>文件，其中包含运行 Dag 所需的所有 python 包。您可以根据需要向该文件添加其他包。当我们到达这里，我们将没有任何额外的依赖；唯一出席的将是<code class="fe ne nf ng mv b">apache-airflow</code>。</p><figure class="kk kl km kn gu ko gi gj paragraph-image"><div class="gi gj nh"><img src="../Images/219d9806c94f5458bebaaaec8a74fc6a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1212/format:webp/1*YJaTPDo-gWfKYamsrxEX1w.png"/></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">作者图片</p></figure><h1 id="cf27" class="la lb iu bd lc ld le lf lg lh li lj lk ka ll kb lm kd ln ke lo kg lp kh lq lr bi translated">狗的解剖</h1><p id="1739" class="pw-post-body-paragraph ls lt iu lu b lv lw jv lx ly lz jy ma mb mc md me mf mg mh mi mj mk ml mm mn in bi translated">放置在<code class="fe ne nf ng mv b">/dags</code>目录中的 Dag 会自动出现在气流 UI 中。重要的是，包含 DAG 逻辑的<code class="fe ne nf ng mv b">.py</code>文件具有 DAG 上下文管理器定义；你可以看到下面这条线<code class="fe ne nf ng mv b">with DAG('example_dag'</code>。新版本的 Airflow 使用 decorator(<code class="fe ne nf ng mv b">@dag(</code>)来完成同样的事情。</p><p id="94d4" class="pw-post-body-paragraph ls lt iu lu b lv mo jv lx ly mp jy ma mb mq md me mf mr mh mi mj ms ml mm mn in bi translated">让我们看一个 DAG 示例，并讨论各种组件。</p><pre class="kk kl km kn gu mu mv mw bn mx my bi"><span id="5aaa" class="mz lb iu mv b be na nb l nc nd">from airflow import DAG<br/>from airflow.operators.dummy_operator import DummyOperator<br/>from airflow.operators.bash_operator import BashOperator<br/>from airflow.operators.python_operator import PythonOperator<br/>from airflow.version import version<br/>from datetime import datetime, timedelta<br/><br/><br/>def my_custom_function(ts,**kwargs):<br/>    """<br/>    This can be any python code you want and is called from the python <br/>    operator. The code is not executed until the task is run by the <br/>    airflow scheduler.<br/>    """<br/>    print(f"Task number: {kwargs['task_number']}.")<br/>    print(f"DAG Run execution date: {ts}.")<br/>    print(f"Current time: {datetime.now()}")<br/>    print("Full DAG Run context.")<br/>    print(kwargs)<br/><br/><br/># Default settings applied to all tasks<br/>default_args = {<br/>    'owner': 'airflow',<br/>    'depends_on_past': False,<br/>    'email_on_failure': False,<br/>    'email_on_retry': False,<br/>    'retries': 1,<br/>    'retry_delay': timedelta(minutes=5)<br/>}<br/><br/># Using a DAG context manager, you don't have to <br/># specify the dag property of each task<br/>with DAG('example_dag',<br/>         start_date=datetime(2019, 1, 1),<br/>         max_active_runs=3,<br/>         schedule_interval=timedelta(minutes=30), <br/>         default_args=default_args,<br/>         # catchup=False<br/>         ) as dag:<br/><br/>    t0 = DummyOperator(<br/>        task_id='start'<br/>    )<br/><br/>    t1 = DummyOperator(<br/>        task_id='group_bash_tasks'<br/>    )<br/>    t2 = BashOperator(<br/>        task_id='bash_print_date1',<br/>        bash_command='sleep $[ ( $RANDOM % 30 )  + 1 ]s &amp;&amp; date')<br/>    t3 = BashOperator(<br/>        task_id='bash_print_date2',<br/>        bash_command='sleep $[ ( $RANDOM % 30 )  + 1 ]s &amp;&amp; date')<br/><br/>    # generate tasks with a loop. task_id must be unique<br/>    for task in range(5):<br/>        tn = PythonOperator(<br/>            task_id=f'python_print_date_{task}',<br/>            python_callable=my_custom_function,<br/>            op_kwargs={'task_number': task},<br/>        )<br/><br/>        t0 &gt;&gt; tn # inside loop so each task is added downstream of t0<br/><br/>    t0 &gt;&gt; t1<br/>    t1 &gt;&gt; [t2, t3] # lists can be used to specify multiple tasks</span></pre><h1 id="540c" class="la lb iu bd lc ld le lf lg lh li lj lk ka ll kb lm kd ln ke lo kg lp kh lq lr bi translated">积木</h1><ul class=""><li id="c660" class="ni nj iu lu b lv lw ly lz mb nk mf nl mj nm mn nn no np nq bi translated"><strong class="lu iv"> Imports </strong>:这只是您希望在项目中使用的 python 库的列表。像使用任何 python 项目一样使用它们。</li><li id="8f3b" class="ni nj iu lu b lv nr ly ns mb nt mf nu mj nv mn nn no np nq bi translated"><strong class="lu iv">自定义函数</strong>:自定义函数位于上下文管理器之外，由 Python 操作符调用。该函数可以是您想要的任何 python 代码，并从 python 操作符中调用。一旦气流调度程序运行任务，就会执行该代码。</li><li id="63c3" class="ni nj iu lu b lv nr ly ns mb nt mf nu mj nv mn nn no np nq bi translated"><strong class="lu iv">默认参数</strong>:适用于所有任务的默认设置字典。这些可以在任务级别覆盖。</li><li id="7305" class="ni nj iu lu b lv nr ly ns mb nt mf nu mj nv mn nn no np nq bi translated"><strong class="lu iv"> DAG 上下文管理器</strong>:更多关于下一个！</li><li id="856c" class="ni nj iu lu b lv nr ly ns mb nt mf nu mj nv mn nn no np nq bi translated"><strong class="lu iv">任务</strong>:工作流程中的各个步骤</li><li id="1709" class="ni nj iu lu b lv nr ly ns mb nt mf nu mj nv mn nn no np nq bi translated"><strong class="lu iv">执行顺序</strong>:气流运行各任务的顺序</li></ul><h1 id="1704" class="la lb iu bd lc ld le lf lg lh li lj lk ka ll kb lm kd ln ke lo kg lp kh lq lr bi translated">DAG 上下文管理器</h1><p id="587a" class="pw-post-body-paragraph ls lt iu lu b lv lw jv lx ly lz jy ma mb mc md me mf mg mh mi mj mk ml mm mn in bi translated">DAG 上下文管理器是构建图形的逻辑所在。让我们浏览一下上面的 DAG 示例，并讨论各个组件。还有其他方法来构建 DAG，包括新的<a class="ae kz" href="https://airflow.apache.org/docs/apache-airflow/2.0.0/concepts.html#taskflow-api" rel="noopener ugc nofollow" target="_blank">任务流 API </a>。但是，DAG 上下文管理器是构建 DAG 的常用方法。上下文管理器允许轻松地将任务分配给 DAG，并能够添加任务之间的依赖关系。</p><p id="b844" class="pw-post-body-paragraph ls lt iu lu b lv mo jv lx ly mp jy ma mb mq md me mf mr mh mi mj ms ml mm mn in bi translated">首先是 dag ( <code class="fe ne nf ng mv b">example_dag</code>)的<strong class="lu iv">名称</strong>，稍后你会在 Astro UI 中看到。然后是一些<strong class="lu iv">全局设置</strong>，包括之前定义的<code class="fe ne nf ng mv b">default_args</code>。</p><h1 id="bcd5" class="la lb iu bd lc ld le lf lg lh li lj lk ka ll kb lm kd ln ke lo kg lp kh lq lr bi translated">任务</h1><p id="36b4" class="pw-post-body-paragraph ls lt iu lu b lv lw jv lx ly lz jy ma mb mc md me mf mg mh mi mj mk ml mm mn in bi translated">接下来是我们的第一个任务，<code class="fe ne nf ng mv b">t0 = DummyOperator</code>。<strong class="lu iv">虚拟操作符</strong>什么也不做，只是允许您对任务进行分组，以设置图中将要执行的顺序。接下来，我们有另一个虚拟操作符，后面是下一个任务<code class="fe ne nf ng mv b">t2 = BashOperator</code>。Bash 操作符允许您执行 Bash 脚本。</p><p id="2c70" class="pw-post-body-paragraph ls lt iu lu b lv mo jv lx ly mp jy ma mb mq md me mf mr mh mi mj ms ml mm mn in bi translated">最后，我们看到了循环中的下一组任务，<code class="fe ne nf ng mv b">tn = PythonOperator</code>利用了<strong class="lu iv"> Python 操作符</strong>，它可以执行 Python 代码，甚至像在本例中一样，调用我们在文件开头定义的<strong class="lu iv">函数</strong>。</p><p id="7956" class="pw-post-body-paragraph ls lt iu lu b lv mo jv lx ly mp jy ma mb mq md me mf mr mh mi mj ms ml mm mn in bi translated"><code class="fe ne nf ng mv b">op_kwargs</code>参数用于将<code class="fe ne nf ng mv b">task_number</code>变量传递给函数。在上面的函数中，除了“ts”变量之外，还传递了<code class="fe ne nf ng mv b">**kwargs</code>变量。此变量允许函数访问 DAG 运行的完整上下文。</p><p id="62e9" class="pw-post-body-paragraph ls lt iu lu b lv mo jv lx ly mp jy ma mb mq md me mf mr mh mi mj ms ml mm mn in bi translated">我们的函数用<code class="fe ne nf ng mv b">print(kwargs)</code>打印完整的上下文变量。我们可以查看日志，看看我们的<code class="fe ne nf ng mv b">kwargs</code>。</p><h1 id="f655" class="la lb iu bd lc ld le lf lg lh li lj lk ka ll kb lm kd ln ke lo kg lp kh lq lr bi translated">执行次序</h1><p id="c8e1" class="pw-post-body-paragraph ls lt iu lu b lv lw jv lx ly lz jy ma mb mc md me mf mg mh mi mj mk ml mm mn in bi translated">现在，把所有这些都带回家，我们设置任务执行的顺序。三行代码告诉 DAG 如何执行。首先是循环内部的<code class="fe ne nf ng mv b">t0 &gt;&gt; tn</code>。这个位置告诉 DAG<code class="fe ne nf ng mv b">tn</code>在循环的每次迭代中运行，从上面我们知道生成了五个任务。</p><p id="7d44" class="pw-post-body-paragraph ls lt iu lu b lv mo jv lx ly mp jy ma mb mq md me mf mr mh mi mj ms ml mm mn in bi translated">接下来是<code class="fe ne nf ng mv b">t0 &gt;&gt; t1</code>。虚拟操作符允许下一行<code class="fe ne nf ng mv b">t1 &gt;&gt; [t2, t3]</code>执行并行任务。这里的逻辑是，我们有一个起始虚拟操作符，下一步有六个任务，最后一步有两个并行任务。</p><h1 id="3c72" class="la lb iu bd lc ld le lf lg lh li lj lk ka ll kb lm kd ln ke lo kg lp kh lq lr bi translated">开始项目</h1><p id="8b9d" class="pw-post-body-paragraph ls lt iu lu b lv lw jv lx ly lz jy ma mb mc md me mf mg mh mi mj mk ml mm mn in bi translated">运行<code class="fe ne nf ng mv b">astro dev start</code>来启动项目和 docker 容器。</p><pre class="kk kl km kn gu mu mv mw bn mx my bi"><span id="aa86" class="mz lb iu mv b be na nb l nc nd">[+] Running 4/4<br/> ⠿ Container astro_cf4ada-postgres-1   Started    0.7s<br/> ⠿ Container astro_cf4ada-scheduler-1  Started    1.5s<br/> ⠿ Container astro_cf4ada-triggerer-1  Started    1.5s<br/> ⠿ Container astro_cf4ada-webserver-1  Started     2.2s<br/><br/>Airflow is starting up! This might take a few minutes…<br/></span></pre><p id="c8d9" class="pw-post-body-paragraph ls lt iu lu b lv mo jv lx ly mp jy ma mb mq md me mf mr mh mi mj ms ml mm mn in bi translated">打开 Docker 仪表板，查看不同的容器运行情况。像上面的控制台输出一样，我们可以看到四个容器正在运行。</p><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj nw"><img src="../Images/b5edfe5f1260bd2240fe733e892f1751.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*Z7V82KDPvwEuZmKO.png"/></div></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">作者图片</p></figure><p id="79f4" class="pw-post-body-paragraph ls lt iu lu b lv mo jv lx ly mp jy ma mb mq md me mf mr mh mi mj ms ml mm mn in bi translated">在它完成启动过程之后，您将在您的 shell 中看到以下内容。请注意 URL 和凭据。当它准备好的时候，你的浏览器应该自动启动 Astro UI，但是你可以随时使用 URL 来访问它。</p><pre class="kk kl km kn gu mu mv mw bn mx my bi"><span id="6368" class="mz lb iu mv b be na nb l nc nd">Airflow Webserver: http://localhost:8080<br/>Postgres Database: localhost:5432/postgres<br/>The default Airflow UI credentials are: admin:admin<br/>The default Postgres DB credentials are: postgres:postgres</span></pre><h1 id="e093" class="la lb iu bd lc ld le lf lg lh li lj lk ka ll kb lm kd ln ke lo kg lp kh lq lr bi translated">打开并浏览气流用户界面</h1><p id="8a60" class="pw-post-body-paragraph ls lt iu lu b lv lw jv lx ly lz jy ma mb mc md me mf mg mh mi mj mk ml mm mn in bi translated">看一下气流 UI。<strong class="lu iv">Dag</strong>页面将向您显示您的<strong class="lu iv"> Astro 项目</strong>中所有可用 Dag 的列表。您可以使用最左侧的滑块控制来启动 DAG。这样做之后，您将立即开始看到 DAG 运行！</p><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj nw"><img src="../Images/d0ca2ac00f66b3dd83ac52fb61d9ba63.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*ypjBHf-iuPGTvqV6.png"/></div></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">作者图片</p></figure><p id="8322" class="pw-post-body-paragraph ls lt iu lu b lv mo jv lx ly mp jy ma mb mq md me mf mr mh mi mj ms ml mm mn in bi translated">当您点击 DAG 的<strong class="lu iv">名称</strong>时，您将被带到<strong class="lu iv">网格视图</strong>。该页面显示了一个非常酷的彩色编码图，显示了每个任务运行的状态。您可以点击每一个来获得更多的细节，包括该任务的<strong class="lu iv">日志</strong>。如果出现故障，您可以点击<strong class="lu iv">失败的</strong>任务来查看日志。</p><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj nw"><img src="../Images/9318e1a086f4b7a67293bd717046913b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*wOXElZmW2GCPEO31.png"/></div></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">作者图片</p></figure><p id="cc26" class="pw-post-body-paragraph ls lt iu lu b lv mo jv lx ly mp jy ma mb mq md me mf mr mh mi mj ms ml mm mn in bi translated">接下来是<strong class="lu iv">图形视图</strong>。图形视图向您显示了执行 DAG 的<strong class="lu iv">顺序</strong>。请查看我们任务执行的输出，并将其映射回我们上面写的代码。您可以看到执行的顺序和任务之间的依赖关系。</p><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj nw"><img src="../Images/96919b4829b0bb85abd086c614b0e363.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*Ww4Di1Q8amWkwQOl.png"/></div></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">作者图片</p></figure><h1 id="7744" class="la lb iu bd lc ld le lf lg lh li lj lk ka ll kb lm kd ln ke lo kg lp kh lq lr bi translated">停止项目</h1><p id="a908" class="pw-post-body-paragraph ls lt iu lu b lv lw jv lx ly lz jy ma mb mc md me mf mg mh mi mj mk ml mm mn in bi translated">最后，当你完成了一天的开发，你可以用<code class="fe ne nf ng mv b">astro dev stop</code>停止一切运行。</p><pre class="kk kl km kn gu mu mv mw bn mx my bi"><span id="e1a0" class="mz lb iu mv b be na nb l nc nd">❯ astro dev stop<br/>[+] Running 4/4<br/> ⠿ Container astro_cf4ada-triggerer-1  Stopped<br/> ⠿ Container astro_cf4ada-webserver-1  Stopped<br/> ⠿ Container astro_cf4ada-scheduler-1  Stopped<br/> ⠿ Container astro_cf4ada-postgres-1   Stopped</span></pre><h1 id="34f7" class="la lb iu bd lc ld le lf lg lh li lj lk ka ll kb lm kd ln ke lo kg lp kh lq lr bi translated">结论</h1><p id="a251" class="pw-post-body-paragraph ls lt iu lu b lv lw jv lx ly lz jy ma mb mc md me mf mg mh mi mj mk ml mm mn in bi translated">天文学家是开源的阿帕奇气流服务的商业产品。它提供了高度可靠的托管服务，允许您为数据工程和数据科学构建强大的工作流编排。我们今天介绍了入门的基础知识，从安装到创建项目、运行 DAG 和停止项目。我们还讲述了 DAG 上下文管理器的基础知识以及如何构建 DAG。从这里，您可以开始尝试自己的 Dag 和工作流，并实现数据工程和数据科学工作流的现代化。编码快乐！</p><p id="2a29" class="pw-post-body-paragraph ls lt iu lu b lv mo jv lx ly mp jy ma mb mq md me mf mr mh mi mj ms ml mm mn in bi translated">一如既往，本文的代码可以在<a class="ae kz" href="https://github.com/broepke/Astro" rel="noopener ugc nofollow" target="_blank"> GitHub </a>上找到</p><p id="bbd1" class="pw-post-body-paragraph ls lt iu lu b lv mo jv lx ly mp jy ma mb mq md me mf mr mh mi mj ms ml mm mn in bi translated">如果你喜欢阅读这样的故事，并想支持我成为一名作家，考虑注册成为一名媒体成员。一个月 5 美元，无限量访问数千篇文章。如果你使用 <a class="ae kz" href="https://medium.com/@broepke/membership" rel="noopener"> <em class="mt">【我的链接】</em> </a> <em class="mt">注册，我将免费获得一小笔佣金。</em></p></div></div>    
</body>
</html>