<html>
<head>
<title>Hands On Signal Processing with Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用Python实践信号处理</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/hands-on-signal-processing-with-python-9bda8aad39de#2022-04-07">https://towardsdatascience.com/hands-on-signal-processing-with-python-9bda8aad39de#2022-04-07</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><figure class="ip iq gp gr ir is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi io"><img src="../Images/98a47f42790d955da8633beb1cd54a35.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*C_wI3TlIZ6SMrA7vS1eYmA.jpeg"/></div></div><p class="iz ja gj gh gi jb jc bd b be z dk translated">在<a class="ae jd" href="https://unsplash.com/s/photos/digital-signal?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上由<a class="ae jd" href="https://unsplash.com/@sasotusar?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Sao tusar</a>拍摄的照片</p></figure><div class=""/><div class=""><h2 id="dbe2" class="pw-subtitle-paragraph kd jf jg bd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku dk translated">从理论到实践:下面是如何使用Python执行频率分析、噪声过滤和振幅谱提取</h2></div><p id="8865" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">如果你想和数据打交道，有一件事是肯定的:<strong class="kx jh">要么专攻，要么去死。这种认为数据科学家可以处理文本数据、信号、图像、表格数据和乐高积木的想法是看待这个职业的一种过时的方式。</strong></p><p id="5263" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">如今，随着机器学习的出现以及数据分析和计算机硬件方面的巨大进步，深入了解如何处理特定类别的数据至关重要。这是因为在进入另一个数据科学分支之前，关于这个分支有太多的知识需要了解。</p><p id="bf92" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">就我而言，我每天都用<strong class="kx jh">信号工作。我了解他们，因为我有物理学硕士学位，我可以从他们那里获得有用的信息，因为我是一名数据科学家。</strong></p><p id="be67" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">在这篇博文中，我将向你展示信号处理的基本操作，即<strong class="kx jh">频率分析</strong>、<strong class="kx jh">噪声过滤</strong>和<strong class="kx jh">振幅谱提取</strong>技术。</p><p id="0833" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">我们将从这些技术的简单理论背景开始，我们将展示它们在应用于一个非常简单(且公开)的数据集时是如何工作的，我们将使用该数据集作为我们的“信号”。</p><h1 id="8850" class="lr ls jg bd lt lu lv lw lx ly lz ma mb km mc kn md kp me kq mf ks mg kt mh mi bi translated">1.理论背景</h1><h2 id="46f3" class="mj ls jg bd lt mk ml dn lx mm mn dp mb le mo mp md li mq mr mf lm ms mt mh mu bi translated">1.1傅立叶变换</h2><p id="5def" class="pw-post-body-paragraph kv kw jg kx b ky mv kh la lb mw kk ld le mx lg lh li my lk ll lm mz lo lp lq ij bi translated">在我们看来,( 1D)信号只不过是一个时间序列。这意味着我们有一个x轴，即时间，和一个y轴，即我们考虑的量(如电压)。</p><p id="77d2" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">从直观的角度来看，对信号进行傅立叶变换意味着在另一个域中看到这个信号。</p><p id="e002" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">让我们把它变得更简单。假设你是<strong class="kx jh">超人</strong>。你所有的朋友都知道你叫克拉克·肯特。然后有一些犯罪，你做你的转变，你成为超人！<strong class="kx jh">你永远是你</strong>(尽管他们不知道)，但他们看到你在另一个领域，穿着另一套服装，做着另一种事情。</p><figure class="nb nc nd ne gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi na"><img src="../Images/bf06bedd2536ecb19e5c2b829a5387f0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*tV-QBuWtin1EDYYoJJ-pcw.png"/></div></div><p class="iz ja gj gh gi jb jc bd b be z dk translated">作者图片</p></figure><p id="18e1" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">现在我们可以对信号和它们的<strong class="kx jh">正弦</strong>分量做同样的事情。</p><p id="8ca7" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">想法是将信号从<strong class="kx jh">时域</strong>看向<strong class="kx jh">频域</strong>。</p><figure class="nb nc nd ne gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi nf"><img src="../Images/9d20ae4259e9fe7e417c687227f08195.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*UF_SK6mwWeaDq2n_abTJlA.png"/></div></div><p class="iz ja gj gh gi jb jc bd b be z dk translated">作者图片</p></figure><p id="dbbe" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">在该图的左侧，我们看到一个频率为1的正弦信号。事实上，在右边，你只看到频率=1时的一个峰值，其他地方都是0。</p><p id="716b" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">假设您有多个正弦和余弦相互作用:您将看到多个幅度和多个非零频率，因为信号中存在多个模式。</p><p id="1125" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><strong class="kx jh">这为什么有用？</strong>好吧，多种原因，但让我们选择两个:</p><ol class=""><li id="d9b8" class="ng nh jg kx b ky kz lb lc le ni li nj lm nk lq nl nm nn no bi translated"><strong class="kx jh">你可以过滤你的信号</strong>。你知道，一般来说，你的信号会有一个有限的频带。如果你看到该波段之外的东西，你可以假设它是白噪声(存在于所有频率的噪声)，你可以将其过滤掉。(<strong class="kx jh">噪声过滤</strong>)</li><li id="3420" class="ng nh jg kx b ky np lb nq le nr li ns lm nt lq nl nm nn no bi translated">你可以分析你的信号的周期模式，并发现对你的系统的季节性部分非常有用的洞察力。(<strong class="kx jh">频率分析</strong>)</li></ol><h2 id="6d76" class="mj ls jg bd lt mk ml dn lx mm mn dp mb le mo mp md li mq mr mf lm ms mt mh mu bi translated">1.2小波变换</h2><p id="9299" class="pw-post-body-paragraph kv kw jg kx b ky mv kh la lb mw kk ld le mx lg lh li my lk ll lm mz lo lp lq ij bi translated">让我们回到傅立叶变换。进行变换意味着<strong class="kx jh">将傅里叶频谱的所有成分(所有频率的所有正弦)投射到信号中</strong>。在我们的例子中，通过做这种投影，除了频率1，你在任何地方都得到0，当你得到一个不同于0的值时。</p><p id="2fcb" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">现在，让我们用一个比正弦函数更复杂的函数，比如下面的dyb2。</p><figure class="nb nc nd ne gt is gh gi paragraph-image"><div class="gh gi nu"><img src="../Images/d37d479cc212c47f82fad64824c94813.png" data-original-src="https://miro.medium.com/v2/resize:fit:760/format:webp/1*EDh5Cnh3NJYQsVeqhP81ZA.png"/></div><p class="iz ja gj gh gi jb jc bd b be z dk translated">作者图片</p></figure><p id="0cec" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">我们可以玩这个小东西，收缩和扩张它，分析完整信号的投影。</p><p id="b15b" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">投影会给我们一个“过滤”的信号，残差是这个投影和原始投影之间的差。</p><p id="4926" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">这是一种更多样、更通用的从噪声中过滤信号的方法，它有很大的优势，我们将在后面的动手实践部分看到。</p><h2 id="51ad" class="mj ls jg bd lt mk ml dn lx mm mn dp mb le mo mp md li mq mr mf lm ms mt mh mu bi translated">1.3希尔伯特变换</h2><p id="adee" class="pw-post-body-paragraph kv kw jg kx b ky mv kh la lb mw kk ld le mx lg lh li my lk ll lm mz lo lp lq ij bi translated">有时候你看到你的信号充满了起伏，但你并不是真的想要它。你只想拿到信封。从数学上讲，这个操作是通过使用<strong class="kx jh">卷积</strong>来完成的。特别的，核是1/(pi*t)。在这个阶段，这里没有什么可谈的，但我们将在一分钟后的实践部分看到这种算法的威力！</p><h1 id="f8e1" class="lr ls jg bd lt lu lv lw lx ly lz ma mb km mc kn md kp me kq mf ks mg kt mh mi bi translated">2.动手举例</h1><p id="8202" class="pw-post-body-paragraph kv kw jg kx b ky mv kh la lb mw kk ld le mx lg lh li my lk ll lm mz lo lp lq ij bi translated">我们将要使用的数据集是一个公共数据集，可以在<a class="ae jd" href="https://www.kaggle.com/datasets/robikscube/hourly-energy-consumption" rel="noopener ugc nofollow" target="_blank">这里</a>找到。<br/>这基本上是一个能源消耗的时间序列，它非常适合我们的研究，因为无论如何它都可以被视为一个信号。数据集为公共领域数据集(<a class="ae jd" href="https://creativecommons.org/publicdomain/zero/1.0/" rel="noopener ugc nofollow" target="_blank"> CC0: Public Domain </a>)，无需事先授权即可免费下载使用。</p><p id="3ff0" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">让我们从编码开始。</p><h2 id="b86c" class="mj ls jg bd lt mk ml dn lx mm mn dp mb le mo mp md li mq mr mf lm ms mt mh mu bi translated">2.1导入库</h2><p id="3bec" class="pw-post-body-paragraph kv kw jg kx b ky mv kh la lb mw kk ld le mx lg lh li my lk ll lm mz lo lp lq ij bi translated">这是我们需要的:</p><figure class="nb nc nd ne gt is"><div class="bz fp l di"><div class="nv nw l"/></div></figure><h2 id="5542" class="mj ls jg bd lt mk ml dn lx mm mn dp mb le mo mp md li mq mr mf lm ms mt mh mu bi translated">2.2数据预处理</h2><p id="a487" class="pw-post-body-paragraph kv kw jg kx b ky mv kh la lb mw kk ld le mx lg lh li my lk ll lm mz lo lp lq ij bi translated">让我们绘制数据集</p><figure class="nb nc nd ne gt is"><div class="bz fp l di"><div class="nv nw l"/></div></figure><p id="654e" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">我们可以看到，它有一种趋势，它没有零均值。这两个特征会干扰我们的分析。让我们使用scipy的<strong class="kx jh">去趋势</strong>选项来纠正它。</p><figure class="nb nc nd ne gt is"><div class="bz fp l di"><div class="nv nw l"/></div></figure><h2 id="980c" class="mj ls jg bd lt mk ml dn lx mm mn dp mb le mo mp md li mq mr mf lm ms mt mh mu bi translated">2.3频率分析</h2><p id="4d38" class="pw-post-body-paragraph kv kw jg kx b ky mv kh la lb mw kk ld le mx lg lh li my lk ll lm mz lo lp lq ij bi translated">现在是时候使用傅立叶变换对信号进行频率分析了。让我们绘制傅立叶频谱:</p><figure class="nb nc nd ne gt is"><div class="bz fp l di"><div class="nv nw l"/></div></figure><p id="6044" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">我们可以在这里看到非常有趣的山峰。例如，存在大约24小时(1天)或12小时(0.5天)或大约80小时(3天)的周期。</p><p id="131c" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">特别是，我们可以对峰进行排序并打印相应的指数:</p><figure class="nb nc nd ne gt is"><div class="bz fp l di"><div class="nv nw l"/></div></figure><p id="bdd9" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">现在这些索引是粗体的。</p><p id="1a40" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">我们也可以用“天数”单位打印这些指数:</p><figure class="nb nc nd ne gt is"><div class="bz fp l di"><div class="nv nw l"/></div></figure><h2 id="a58a" class="mj ls jg bd lt mk ml dn lx mm mn dp mb le mo mp md li mq mr mf lm ms mt mh mu bi translated">2.4噪声过滤(傅立叶变换)</h2><p id="0e56" class="pw-post-body-paragraph kv kw jg kx b ky mv kh la lb mw kk ld le mx lg lh li my lk ll lm mz lo lp lq ij bi translated">现在我们可以以最高峰为参考，开始筛选比这个最高峰低0.1，0.2，…0.9的。例如，我们可以将低于最高峰值振幅0.5倍的所有值设置为零。</p><p id="2508" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">我们需要小心。如果我们将阈值设置得太高，我们不仅会滤除噪声，还会滤除信号的重要特征。如果阈值太低，我们基本上不过滤任何东西，仍然保留所有的噪声。</p><p id="c776" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">让我们做一些尝试:</p><figure class="nb nc nd ne gt is"><div class="bz fp l di"><div class="nv nw l"/></div></figure><p id="fd9e" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">以下是一些结果:</p><figure class="nb nc nd ne gt is"><div class="bz fp l di"><div class="nv nw l"/></div></figure><p id="61e2" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">在这种情况下，0.30似乎是一个很好的替代值。:)</p><blockquote class="nx ny nz"><p id="b5fd" class="kv kw oa kx b ky kz kh la lb lc kk ld ob lf lg lh oc lj lk ll od ln lo lp lq ij bi translated">附注:关于这一特定应用的更多信息，请参阅这篇<a class="ae jd" rel="noopener" target="_blank" href="/noise-cancellation-with-python-and-fourier-transform-97303314aa71">文章</a>。</p></blockquote><h2 id="b7d7" class="mj ls jg bd lt mk ml dn lx mm mn dp mb le mo mp md li mq mr mf lm ms mt mh mu bi translated">2.5噪声过滤(小波变换)</h2><p id="e18d" class="pw-post-body-paragraph kv kw jg kx b ky mv kh la lb mw kk ld le mx lg lh li my lk ll lm mz lo lp lq ij bi translated">我们也可以使用小波变换进行噪声滤波。在这种情况下，我们有多级过滤。第一级将仅过滤纯噪声，但它们将是保守的。越深入，噪声越少，但也会丢失信号的特征(残差将与原始信号相似)。</p><figure class="nb nc nd ne gt is"><div class="bz fp l di"><div class="nv nw l"/></div></figure><blockquote class="nx ny nz"><p id="26ac" class="kv kw oa kx b ky kz kh la lb lc kk ld ob lf lg lh oc lj lk ll od ln lo lp lq ij bi translated">附注:关于这一具体应用的更多信息，请参阅这篇<a class="ae jd" rel="noopener" target="_blank" href="/hey-wavelet-turn-that-noise-down-80a30796dfcf">文章</a>。</p></blockquote><h2 id="3597" class="mj ls jg bd lt mk ml dn lx mm mn dp mb le mo mp md li mq mr mf lm ms mt mh mu bi translated">2.6振幅提取</h2><p id="bb98" class="pw-post-body-paragraph kv kw jg kx b ky mv kh la lb mw kk ld le mx lg lh li my lk ll lm mz lo lp lq ij bi translated">对于这一部分，我只是做了一个向上和柔和的信号。假设我们只想提取它的包络(即所谓的振幅)。您只需要应用scipy Hilbert变换并计算绝对值:</p><figure class="nb nc nd ne gt is"><div class="bz fp l di"><div class="nv nw l"/></div></figure><p id="1f13" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">超级简单，但在处理信号的数据科学家的日常生活中非常有用。</p><h1 id="024b" class="lr ls jg bd lt lu lv lw lx ly lz ma mb km mc kn md kp me kq mf ks mg kt mh mi bi translated">3.结论</h1><p id="bb6f" class="pw-post-body-paragraph kv kw jg kx b ky mv kh la lb mw kk ld le mx lg lh li my lk ll lm mz lo lp lq ij bi translated">如果你喜欢这篇文章，你想知道更多关于机器学习的知识，或者你只是想问我一些你可以问的问题:</p><p id="b7d0" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">A.在<a class="ae jd" href="https://www.linkedin.com/in/pieropaialunga/" rel="noopener ugc nofollow" target="_blank"> <strong class="kx jh"> Linkedin </strong> </a>上关注我，在那里我发布我所有的故事<br/> B .订阅我的<a class="ae jd" href="https://piero-paialunga.medium.com/subscribe" rel="noopener"> <strong class="kx jh">简讯</strong> </a>。这会让你了解新的故事，并给你机会发短信给我，让我收到你所有的更正或疑问。<br/> C .成为<a class="ae jd" href="https://piero-paialunga.medium.com/membership" rel="noopener"> <strong class="kx jh">推荐会员</strong> </a>，这样你就不会有任何“本月最大数量的故事”，你可以阅读我(以及成千上万其他机器学习和数据科学顶级作家)写的任何关于最新可用技术的文章。</p></div></div>    
</body>
</html>