<html>
<head>
<title>Time Series Forecast in R</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">R 中的时间序列预测</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/time-series-forecast-in-r-70d51a21d6c8#2022-02-28">https://towardsdatascience.com/time-series-forecast-in-r-70d51a21d6c8#2022-02-28</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="0dc7" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">如何在 R 中执行时间序列预测的分步指南</h2></div><p id="edfc" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi le translated">您已经获得了大量的时间序列数据，您想知道如何使用这些数据来预测未来？</p><p id="6d40" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">如果你的答案是肯定的，那么你来对地方了…</p><figure class="lo lp lq lr gt ls gh gi paragraph-image"><div role="button" tabindex="0" class="lt lu di lv bf lw"><div class="gh gi ln"><img src="../Images/92801613a39771c131cf360df1915772.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Nu_DrSKvJQcssg83Yd1kaQ.jpeg"/></div></div><p class="lz ma gj gh gi mb mc bd b be z dk translated">由<a class="ae md" href="https://unsplash.com/@hharritt?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">亨特·哈里特</a>在<a class="ae md" href="https://unsplash.com/s/photos/data?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure><p id="446e" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在这个故事中，让我向您介绍一种易于实现的方法，使用季节性 ARIMA 模型对时间序列数据集进行预测。出于演示的目的，我们将使用麻省理工学院许可下的一个<a class="ae md" href="https://github.com/quaesito/time-series-forecast-R/blob/main/Fish%20dataset.csv" rel="noopener ugc nofollow" target="_blank">鱼类销售数据集</a>和一个雅虎财经股票价格数据集(直接在 R 中下载)…</p><h1 id="1433" class="me mf it bd mg mh mi mj mk ml mm mn mo jz mp ka mq kc mr kd ms kf mt kg mu mv bi translated">探索性数据分析</h1><p id="7f6a" class="pw-post-body-paragraph ki kj it kk b kl mw ju kn ko mx jx kq kr my kt ku kv mz kx ky kz na lb lc ld im bi translated">在开始任何数据科学或人工智能相关的任务之前，执行探索性数据分析(EDA)是一个好的做法。在整个 EDA 过程中，你将获得有价值的见解，这些见解可能会极大地影响你即将到来的建模策略。如果你不熟悉 EDA，我推荐你看一看我的另一个故事，我在其中执行了一个示例 EDA。</p><div class="nb nc gp gr nd ne"><a rel="noopener follow" target="_blank" href="/exploratory-data-analysis-eda-in-python-using-sql-and-seaborn-sns-d1f3bfcc78af"><div class="nf ab fo"><div class="ng ab nh cl cj ni"><h2 class="bd iu gy z fp nj fr fs nk fu fw is bi translated">使用 SQL 和 Seaborn (SNS)在 Python 中进行探索性数据分析(EDA)</h2><div class="nl l"><h3 class="bd b gy z fp nj fr fs nk fu fw dk translated">探索性数据分析(EDA)是一种分析数据集以总结其主要特征的方法，通常…</h3></div><div class="nm l"><p class="bd b dl z fp nj fr fs nk fu fw dk translated">towardsdatascience.com</p></div></div><div class="nn l"><div class="no l np nq nr nn ns lx ne"/></div></div></a></div></div><div class="ab cl nt nu hx nv" role="separator"><span class="nw bw bk nx ny nz"/><span class="nw bw bk nx ny nz"/><span class="nw bw bk nx ny"/></div><div class="im in io ip iq"><h1 id="e429" class="me mf it bd mg mh oa mj mk ml ob mn mo jz oc ka mq kc od kd ms kf oe kg mu mv bi translated">让我们开始吧…</h1><p id="928a" class="pw-post-body-paragraph ki kj it kk b kl mw ju kn ko mx jx kq kr my kt ku kv mz kx ky kz na lb lc ld im bi translated">作为第一步，我们导入时间序列预测所需的库并读取数据…</p><figure class="lo lp lq lr gt ls"><div class="bz fp l di"><div class="of og l"/></div></figure><p id="c4a4" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">下面是我们的鱼销售数据集的<em class="oh">‘头’</em>和<em class="oh">‘尾’</em>的样子…</p><figure class="lo lp lq lr gt ls gh gi paragraph-image"><div class="gh gi oi"><img src="../Images/0be76087198cc8098bba11697f1eff07.png" data-original-src="https://miro.medium.com/v2/resize:fit:1362/format:webp/1*lSAQTzFPFwsJ8qz6jZY43Q.png"/></div><p class="lz ma gj gh gi mb mc bd b be z dk translated">作者图片</p></figure><p id="6382" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">从上面的片段中，可以注意到数据比需要的多很多。我们将为<em class="oh">“销售”</em>值创建时间序列预测。相应地，我们开始处理数据，去掉所有变量，除了'<em class="oh"> start </em>和<em class="oh"> 'sales' </em> …</p><figure class="lo lp lq lr gt ls"><div class="bz fp l di"><div class="of og l"/></div></figure><p id="8514" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">测井回报在变量'<em class="oh"> logr '下计算。它们被添加到一个单独的列中，现在数据头看起来像…</em></p><figure class="lo lp lq lr gt ls gh gi paragraph-image"><div class="gh gi oj"><img src="../Images/dd12aba21cbb78c8a831004cbd4efdd3.png" data-original-src="https://miro.medium.com/v2/resize:fit:608/format:webp/1*OPLH4uz0Ixv_bUAzR3SzfA.png"/></div><p class="lz ma gj gh gi mb mc bd b be z dk translated">作者图片</p></figure><p id="fc4b" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">然后数据被格式化成变量' test_ts '下的'<em class="oh"> ts </em>'变量。</p><figure class="lo lp lq lr gt ls"><div class="bz fp l di"><div class="of og l"/></div></figure><p id="2424" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">让我们在时间域中绘制数据，以便对我们正在处理的内容有一个大致的了解…</p><figure class="lo lp lq lr gt ls gh gi paragraph-image"><div role="button" tabindex="0" class="lt lu di lv bf lw"><div class="gh gi ok"><img src="../Images/87e3ee12f146eb9ac2fce855b97da173.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2VCQ2Zqd_d_SrFm8egkGhw.png"/></div></div><p class="lz ma gj gh gi mb mc bd b be z dk translated">作者图片</p></figure><p id="9f89" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">然后将数据分解为“<em class="oh">原始数据</em>”、“<em class="oh">季节性</em>”、“<em class="oh">趋势</em>”和“<em class="oh">残差</em>”，在下一张图中从上到下绘制</p><figure class="lo lp lq lr gt ls gh gi paragraph-image"><div class="gh gi ol"><img src="../Images/17a508b7ae04dfa3fe48412fc969c0eb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1398/format:webp/1*Lczwv0jWi4cH6lcUVLIQtw.png"/></div><p class="lz ma gj gh gi mb mc bd b be z dk translated">作者图片</p></figure><p id="efea" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">然后对<a class="ae md" href="https://en.wikipedia.org/wiki/Autocorrelation#:~:text=Autocorrelation%2C%20sometimes%20known%20as%20serial,the%20time%20lag%20between%20them." rel="noopener ugc nofollow" target="_blank">自相关</a>和<a class="ae md" href="https://en.wikipedia.org/wiki/Partial_autocorrelation_function" rel="noopener ugc nofollow" target="_blank">部分自相关</a>函数进行评估…</p><div class="lo lp lq lr gt ab cb"><figure class="om ls on oo op oq or paragraph-image"><div role="button" tabindex="0" class="lt lu di lv bf lw"><img src="../Images/7b3ff2babf79e40bfb57185472281792.png" data-original-src="https://miro.medium.com/v2/resize:fit:998/format:webp/1*Zl5RKqLBt4_AcjuW7kfbWw.png"/></div></figure><figure class="om ls os oo op oq or paragraph-image"><div role="button" tabindex="0" class="lt lu di lv bf lw"><img src="../Images/c4006eb0884bcf946935e3d3d0043990.png" data-original-src="https://miro.medium.com/v2/resize:fit:1004/format:webp/1*MSM7K88uC6QdYKx2JYHhhw.png"/></div><p class="lz ma gj gh gi mb mc bd b be z dk ot di ou ov translated">作者图片</p></figure></div><p id="f31e" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">通过上面的图表，可以区分良好的季节性以及数据中合理的相关性，但是<a class="ae md" href="https://en.wikipedia.org/wiki/Augmented_Dickey%E2%80%93Fuller_test" rel="noopener ugc nofollow" target="_blank">增强的 Dickey-Fuller </a>测试可以证实这一假设。获得的 p 值&lt;为 0.05，因此可以安全地假设<strong class="kk iu">数据集是静态的</strong>。</p><figure class="lo lp lq lr gt ls gh gi paragraph-image"><div class="gh gi ow"><img src="../Images/f7ca13cb8ae614a249b8fa6d03e9af4b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1066/format:webp/1*YoApZndAyzWJhjiR0eCUaw.png"/></div><p class="lz ma gj gh gi mb mc bd b be z dk translated">作者图片</p></figure><p id="9843" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">基于这一发现，选择季节性 ARIMA 模型来创建预测。季节性 ARIMA 的系数是基于数据集显示出很强的季节性这一事实进行估计的(<em class="oh">季节性=真</em> )…</p><figure class="lo lp lq lr gt ls"><div class="bz fp l di"><div class="of og l"/></div></figure><p id="421e" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">…并获得结果摘要</p><figure class="lo lp lq lr gt ls gh gi paragraph-image"><div role="button" tabindex="0" class="lt lu di lv bf lw"><div class="gh gi ox"><img src="../Images/dff5d5113c81a78685aed8c3bc01d7ca.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_CyoDkiJzfoiAVEwwfJljQ.png"/></div></div><p class="lz ma gj gh gi mb mc bd b be z dk translated">作者图片</p></figure><figure class="lo lp lq lr gt ls gh gi paragraph-image"><div role="button" tabindex="0" class="lt lu di lv bf lw"><div class="gh gi oy"><img src="../Images/cf7cc54fedea414f85de061a18878771.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*nOQ671rsxRM3y99Y3Q5bRA.png"/></div></div><p class="lz ma gj gh gi mb mc bd b be z dk translated">作者图片</p></figure><p id="3c63" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">基于平稳性假设，该模型表现相当好。让我们看看另一个数据集上的示例…</p></div><div class="ab cl nt nu hx nv" role="separator"><span class="nw bw bk nx ny nz"/><span class="nw bw bk nx ny nz"/><span class="nw bw bk nx ny"/></div><div class="im in io ip iq"><h1 id="b1e3" class="me mf it bd mg mh oa mj mk ml ob mn mo jz oc ka mq kc od kd ms kf oe kg mu mv bi translated">雅虎财务数据的时间序列预测</h1><p id="b772" class="pw-post-body-paragraph ki kj it kk b kl mw ju kn ko mx jx kq kr my kt ku kv mz kx ky kz na lb lc ld im bi translated">在第二个示例中，再次验证了数据的平稳性，数据看起来足够平稳，可以使用季节性 ARIMA 进行时间序列预测。执行与上述相同的过程…</p><p id="8c34" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">输入数据是…</p><figure class="lo lp lq lr gt ls gh gi paragraph-image"><div role="button" tabindex="0" class="lt lu di lv bf lw"><div class="gh gi oz"><img src="../Images/5133c87aac2887c56cdabe42d67e9c91.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5eHar1P4bWK4aHNExqSfjA.png"/></div></div><p class="lz ma gj gh gi mb mc bd b be z dk translated">作者图片</p></figure><p id="0ae8" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">…以及下面提供的输出和摘要。</p><figure class="lo lp lq lr gt ls gh gi paragraph-image"><div role="button" tabindex="0" class="lt lu di lv bf lw"><div class="gh gi pa"><img src="../Images/1a5ea2b5105057b25f2413dd9a94ae61.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Hm5UuEmO955Jmyqp_wOa_g.png"/></div></div><p class="lz ma gj gh gi mb mc bd b be z dk translated">作者图片</p></figure><figure class="lo lp lq lr gt ls gh gi paragraph-image"><div role="button" tabindex="0" class="lt lu di lv bf lw"><div class="gh gi pb"><img src="../Images/9cefd0685ebc477795ab8b8da7c65d84.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*T-CczZtxwI0y9ECW1iw1Bg.png"/></div></div><p class="lz ma gj gh gi mb mc bd b be z dk translated">作者图片</p></figure></div><div class="ab cl nt nu hx nv" role="separator"><span class="nw bw bk nx ny nz"/><span class="nw bw bk nx ny nz"/><span class="nw bw bk nx ny"/></div><div class="im in io ip iq"><h1 id="25c2" class="me mf it bd mg mh oa mj mk ml ob mn mo jz oc ka mq kc od kd ms kf oe kg mu mv bi translated">讨论</h1><p id="eaf4" class="pw-post-body-paragraph ki kj it kk b kl mw ju kn ko mx jx kq kr my kt ku kv mz kx ky kz na lb lc ld im bi translated">总的来说，我们使用了一个 ARIMA 模型来拟合两个不同的(稳定的)时间序列数据集进行预测。然而，通过查看结果，您可以注意到第二个示例(在 Yahoo Financial 数据集上)比第一个示例(在 Fish Sales 数据集上)有更大的错误。</p><p id="3d20" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">你认为为什么会这样？你有什么看法？</p><p id="b997" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">为了回答这个问题，您可能需要自己运行 Yahoo Financial Dataset 的代码(两个示例的完整代码都在我的<a class="ae md" href="https://github.com/quaesito/time-series-forecast-R" rel="noopener ugc nofollow" target="_blank"> repo </a>中提供)。</p><p id="4b51" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">如果你愿意进一步尝试时间序列预测，并探索 Python 中的 SARIMAX 和 Prophet 等其他算法，那么你可以看看下面的故事。</p><div class="nb nc gp gr nd ne"><a rel="noopener follow" target="_blank" href="/time-series-forecast-in-python-using-sarimax-and-prophet-c970e6056b5b"><div class="nf ab fo"><div class="ng ab nh cl cj ni"><h2 class="bd iu gy z fp nj fr fs nk fu fw is bi translated">Python 中使用 SARIMAX 和 PROPHET 进行时间序列预测</h2><div class="nl l"><h3 class="bd b gy z fp nj fr fs nk fu fw dk translated">如何在 Python 中执行时间序列预测的分步指南</h3></div><div class="nm l"><p class="bd b dl z fp nj fr fs nk fu fw dk translated">towardsdatascience.com</p></div></div><div class="nn l"><div class="pc l np nq nr nn ns lx ne"/></div></div></a></div></div><div class="ab cl nt nu hx nv" role="separator"><span class="nw bw bk nx ny nz"/><span class="nw bw bk nx ny nz"/><span class="nw bw bk nx ny"/></div><div class="im in io ip iq"><p id="ee4c" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">如果你喜欢我的故事，并想跳到代码和完整的数据集，我已经在我个人的 git 上的 repo 中发布了它。</p><p id="9d28" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">给<a class="ae md" href="https://github.com/quaesito/time-series-forecast-R" rel="noopener ugc nofollow" target="_blank">回购</a>一颗星，在<a class="ae md" href="https://www.linkedin.com/in/micheledefilippo/" rel="noopener ugc nofollow" target="_blank"> linkedin </a>上联系我！<br/>干杯:)</p></div></div>    
</body>
</html>