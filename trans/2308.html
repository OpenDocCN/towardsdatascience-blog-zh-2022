<html>
<head>
<title>3 + 1 ways of running R on Amazon SageMaker</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在亚马逊SageMaker上运行R的3 + 1方式</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/3-1-ways-of-running-r-on-amazon-sagemaker-13034a8f3686#2022-05-20">https://towardsdatascience.com/3-1-ways-of-running-r-on-amazon-sagemaker-13034a8f3686#2022-05-20</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="fc39" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">借助云的力量点燃您的R工作负载；如何使用SageMaker笔记本、Studio、Jobs和RStudio</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/bccaba0e8fb79e2b367d1df97334c5cd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jtBsNDC7rTtwgjiSifjJ8w.jpeg"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">图片来源于unsplash.com</p></figure><p id="d0c7" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">R编程语言是科学领域中最常用的语言之一，是机器学习中最常用的语言之一(可能仅次于python ),也可以说是数学家和统计学家中最流行的语言。它易于上手，免费使用，支持许多科学和可视化库。</p><p id="7c12" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">虽然R可以帮助您分析数据，但您拥有的数据越多，您需要的计算能力就越强，您的分析就越有效，就越需要可重复性和再现性。分析师和数据科学家需要找到满足这些要求的方法。进入云端。</p><p id="ea39" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">在这篇文章中，我们简要描述了在云上运行R工作负载的主要方式，利用Amazon SageMaker，这是AWS的端到端机器学习云产品。众所周知，AWS为开发人员和科学家如何使用他们的产品提供了选择和灵活性，所以对于SageMaker来说这也是事实，不要感到惊讶。让我们看看怎么做。</p><h1 id="1033" class="lr ls iq bd lt lu lv lw lx ly lz ma mb jw mc jx md jz me ka mf kc mg kd mh mi bi translated">SageMaker经典笔记本</h1><p id="7120" class="pw-post-body-paragraph kv kw iq kx b ky mj jr la lb mk ju ld le ml lg lh li mm lk ll lm mn lo lp lq ij bi translated">通过提供笔记本实例，SageMaker在云上提供了完全托管的Jupyter笔记本体验。作为一项服务，与它的年轻兄弟SageMaker Studio相比，它的功能范围可能更小，但笔记本实例仍然是在AWS云上开始使用jupyter笔记本的最简单方式。</p><p id="135c" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">除了非常容易上手之外，您还获得了对R内核的开箱即用支持。</p><p id="a4f4" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">要尝试这一点，您可以打开一个笔记本实例，方法是转到SageMaker控制台&gt;笔记本实例，然后创建笔记本实例(如果您还没有)，保持默认设置。然后点击打开Jupyter或打开JupyterLab</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi mo"><img src="../Images/20192b318782517f9327f7efbfe3103e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*247HNsS_Qzu_q9GxKuT7Rw.png"/></div></div></figure><p id="612f" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">进入后，单击新建并选择r。</p><div class="kg kh ki kj gt ab cb"><figure class="mp kk mq mr ms mt mu paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><img src="../Images/b3eb141e2952d81a0a2d6557e1d8916f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1328/format:webp/1*bZ6PEIChxICG6Fa7_x7mUw.png"/></div></figure><figure class="mp kk mv mr ms mt mu paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><img src="../Images/5dd8ec5a247fb4b342a306771512eea0.png" data-original-src="https://miro.medium.com/v2/resize:fit:674/format:webp/1*TM3oAhT-7KVbLb6R1AbgqA.png"/></div></figure></div><p id="0090" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><em class="mw">在Jupyter启动R动力笔记本—左|在Jupyterlab启动R动力笔记本—右</em></p><p id="f3dc" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">就是这样！开始写你的R代码吧！</p><h1 id="4a85" class="lr ls iq bd lt lu lv lw lx ly lz ma mb jw mc jx md jz me ka mf kc mg kd mh mi bi translated">SageMaker工作室笔记本</h1><p id="7a29" class="pw-post-body-paragraph kv kw iq kx b ky mj jr la lb mk ju ld le ml lg lh li mm lk ll lm mn lo lp lq ij bi translated"><a class="ae mx" href="https://aws.amazon.com/sagemaker/studio/" rel="noopener ugc nofollow" target="_blank">亚马逊SageMaker Studio </a>是一个完整的云端机器学习IDE。它是一个托管的JupyterLab环境，具有许多专门为允许您与SageMaker服务的其余部分进行交互而开发的附加特性。在Studio中，您可以快速启动Jupyter笔记本，只需几次点击，您就可以选择底层计算、关闭或共享笔记本。它附带了许多预制的内核，但它们都是python特有的。</p><p id="e040" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">幸运的是，就像几乎所有其他SageMaker服务一样，我们可以通过自带容器来定制它。</p><p id="98d0" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">你猜对了——我们可以带来自己的支持R的容器，并定制Studio来满足我们的R需求。</p><p id="dfbd" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">要做到这一点，你可以按照下面的<a class="ae mx" href="https://github.com/aws-samples/sagemaker-studio-custom-image-samples/tree/main/examples/r-image" rel="noopener ugc nofollow" target="_blank"> GitHub库</a>上的说明，或者按照下面你自己的账户上的简单步骤:<br/>在Jupyter笔记本上(是的，它可以是使用python的Sagemaker Studio笔记本)或者你的本地终端上设置了AWS凭证，</p><ol class=""><li id="5ce4" class="my mz iq kx b ky kz lb lc le na li nb lm nc lq nd ne nf ng bi translated">从上面的链接下载DockerFile文件，并运行以下几个命令:</li></ol><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nh ni l"/></div></figure><p id="5cd4" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">2.等待上述命令运行完毕，这可能需要几分钟时间。</p><p id="5175" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">3.在SageMaker控制台中，点击“<em class="mw">图像</em>，然后点击“<em class="mw">创建图像</em>”。键入您在步骤1中创建的图像的URI(如果步骤1成功运行，将在最底部打印图像uri)。一旦你点击<em class="mw">下一个</em>，输入一个容易记忆的图像名称，比如<strong class="kx ir"><em class="mw">studio-custom-r-image</em></strong>然后点击创建。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nj"><img src="../Images/d4b8df78fafcece385150d4c9113ae6a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WaS0_cSmkp9igtU4MdUWDA.png"/></div></div></figure><p id="3344" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">4.将映像附加到域。点击SageMaker域&gt;向下滚动一点&gt;附加图像。根据下面的截图，选择图像源作为您刚刚创建的图像。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nk"><img src="../Images/480bcaec11a5b0990a970014cebc2205.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*MeajfrSmTk4oJ5Nn8XMv8g.png"/></div></div></figure><p id="5fbe" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">单击下一步和下一步，然后在提交之前，为内核名称和内核显示名称键入一个容易记住的名称。然后点击提交。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nl"><img src="../Images/75b3a74648ff401d3d90152d23092d8d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*AX_YTpb0_zoY5jQZJMHzUg.png"/></div></div></figure><p id="aa55" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">5.打开SageMaker Studio，使用新创建的内核创建一个笔记本。R-coding快乐！</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nm"><img src="../Images/102555c1bd813321c080ab6bc4378fa6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*K_gmfhSK6FKfomcYofKFsA.png"/></div></div></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nn"><img src="../Images/71d533ebd41af07bdc9e7a4830f01d03.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*DH8OMOMPrCjGE8w_y_Sm0Q.png"/></div></div></figure><p id="7940" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><em class="mw">*注意:如果您不能立即看到可用的自定义图像，您可能需要重新启动您的工作室(数据不会丢失)</em></p><h1 id="d027" class="lr ls iq bd lt lu lv lw lx ly lz ma mb jw mc jx md jz me ka mf kc mg kd mh mi bi translated">SageMaker工作APIs处理、培训和部署</h1><p id="27fd" class="pw-post-body-paragraph kv kw iq kx b ky mj jr la lb mk ju ld le ml lg lh li mm lk ll lm mn lo lp lq ij bi translated">使用SageMaker APIs，您可以加速处理和训练作业在临时集群上运行，为您提供可能需要的所有计算资源，而您只需为作业运行的秒数付费。为实时消费、批量推理、异步或无服务器推理部署您的模型也变得很容易。</p><p id="13c2" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">对于您需要的计算运行时，您可以从支持的列表中选择，或者以docker容器的形式自带。</p><p id="3e27" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">带上你自己的R容器，可以让你的R代码无缝地运行在SageMaker上。您可以按照这个<a class="ae mx" href="https://github.com/aws-samples/rstudio-on-sagemaker-workshop/tree/main/03_SageMakerPipelinesAndDeploy" rel="noopener ugc nofollow" target="_blank"> GitHub </a>示例来看看端到端会是什么样子。阅读我的中型博客<a class="ae mx" rel="noopener" target="_blank" href="/how-to-create-reusable-r-containers-for-sagemaker-jobs-a3d481daf5cd">如何为SageMaker作业创建可重用的R容器</a>以详细了解如何在AWS帐户中创建这些容器，并重用它们来满足所有R需求。</p><h1 id="7255" class="lr ls iq bd lt lu lv lw lx ly lz ma mb jw mc jx md jz me ka mf kc mg kd mh mi bi translated">SageMaker上的RStudio</h1><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi no"><img src="../Images/99b432df7b1c19b161eb539fafb31ed3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*vPg7VOVeh0-QVkqa"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated"><a class="ae mx" href="https://unsplash.com/@jingdachen?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">陈京达</a>在<a class="ae mx" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</p></figure><p id="9448" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">正如所承诺的，在SageMaker上有一个运行R的<strong class="kx ir">奖励</strong>方式，这是通过在SageMaker 上使用<em class="mw"> RStudio实现的。SageMaker上的RStudio是SageMaker服务家族中相对较新的产品，本质上是将您熟悉的RStudio Workbench IDE带到了云上。<br/>如果您已经拥有RStudio Workbench的许可，您可以使用相同的许可在SageMaker上启用RStudio。<br/>关于如何开始的更多细节，你可以阅读亚马逊SageMaker上的博客【RStudio入门。</em></p><p id="ca2f" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">这个工具允许你结合两个世界的优点。作为一名R开发人员，所有您喜欢的工具，以及您梦想中的云的所有处理云。</p><p id="3e86" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">如果你对这个工具感兴趣，我强烈推荐你观看Rstudio.com网站上的一个很棒的视频。</p><h1 id="4ef3" class="lr ls iq bd lt lu lv lw lx ly lz ma mb jw mc jx md jz me ka mf kc mg kd mh mi bi translated">结论</h1><p id="21dc" class="pw-post-body-paragraph kv kw iq kx b ky mj jr la lb mk ju ld le ml lg lh li mm lk ll lm mn lo lp lq ij bi translated">在这篇博客中，我们探索了几种在Amazon SageMaker的云上运行R代码的可能方式。<br/>你更喜欢哪一个？<br/>如果您想讨论您的使用案例以及如何在云上部署您自己的R工作负载，请联系我！</p></div></div>    
</body>
</html>