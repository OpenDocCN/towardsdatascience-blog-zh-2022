<html>
<head>
<title>Fully Mastering Fisher’s Exact Test for A/B Testing</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">完全掌握费希尔的A/B检验的精确检验</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/fishers-exact-fb49432e55b5#2022-07-29">https://towardsdatascience.com/fishers-exact-fb49432e55b5#2022-07-29</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="90f8" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">虽然费希尔精确测试是A/B测试的一个方便工具，但测试的思想和结果往往难以理解和解释。不管是纠结于超几何分布还是优势比，本指南为你提供了理解和应用费雪精确检验所需的所有背景知识。</h2></div><p id="3c8b" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我经常在网上寻找A/B测试的好资源。虽然对连续数据的解释很多，但我不认为对离散数据是这样——Fisher的精确检验就是其中一个例子，我很少能找到对单尾假设检验的好的证明。为了填补这一空白，我将为费希尔的精确测试提供一个可理解和充分的指导，并进行一个<strong class="kk iu">左</strong>和<strong class="kk iu">右尾</strong>测试，以及一个<strong class="kk iu">双边测试。</strong></p><p id="fb0c" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">让我大胆地说，这是费希尔精确测试所需的唯一指南。</p></div><div class="ab cl le lf hx lg" role="separator"><span class="lh bw bk li lj lk"/><span class="lh bw bk li lj lk"/><span class="lh bw bk li lj"/></div><div class="im in io ip iq"><h2 id="50a3" class="ll lm it bd ln lo lp dn lq lr ls dp lt kr lu lv lw kv lx ly lz kz ma mb mc md bi translated">结构</h2><ol class=""><li id="b2b9" class="me mf it kk b kl mg ko mh kr mi kv mj kz mk ld ml mm mn mo bi translated"><a class="ae mp" href="#da06" rel="noopener ugc nofollow">基线(对比)模型</a></li><li id="a0f5" class="me mf it kk b kl mq ko mr kr ms kv mt kz mu ld ml mm mn mo bi translated"><a class="ae mp" href="#9a77" rel="noopener ugc nofollow">费希尔精确分布和超几何分布简介</a></li><li id="0283" class="me mf it kk b kl mq ko mr kr ms kv mt kz mu ld ml mm mn mo bi translated"><a class="ae mp" href="#e1b3" rel="noopener ugc nofollow">手动计算费希尔P值</a></li><li id="05b1" class="me mf it kk b kl mq ko mr kr ms kv mt kz mu ld ml mm mn mo bi translated"><a class="ae mp" href="#4923" rel="noopener ugc nofollow">假设</a></li><li id="0497" class="me mf it kk b kl mq ko mr kr ms kv mt kz mu ld ml mm mn mo bi translated"><a class="ae mp" href="#241d" rel="noopener ugc nofollow">进行测试(代码示例)</a></li><li id="6cf1" class="me mf it kk b kl mq ko mr kr ms kv mt kz mu ld ml mm mn mo bi translated"><a class="ae mp" href="#8b1d" rel="noopener ugc nofollow">了解优势比</a></li><li id="cbf4" class="me mf it kk b kl mq ko mr kr ms kv mt kz mu ld ml mm mn mo bi translated"><a class="ae mp" href="#926e" rel="noopener ugc nofollow">重述</a></li></ol></div><div class="ab cl le lf hx lg" role="separator"><span class="lh bw bk li lj lk"/><span class="lh bw bk li lj lk"/><span class="lh bw bk li lj"/></div><div class="im in io ip iq"><h2 id="da06" class="ll lm it bd ln lo lp dn lq lr ls dp lt kr lu lv lw kv lx ly lz kz ma mb mc md bi translated">基线(比较)模型</h2><p id="9b7d" class="pw-post-body-paragraph ki kj it kk b kl mg ju kn ko mh jx kq kr mv kt ku kv mw kx ky kz mx lb lc ld im bi translated">首先，我们假设在以下结构中收集了捕获大西洋和印度洋中鲨鱼和鲸鱼出现的数据(原始示例来自<a class="ae mp" href="https://docs.scipy.org/doc/scipy/reference/generated/scipy.stats.fisher_exact.html" rel="noopener ugc nofollow" target="_blank"> Scipy </a>):</p><figure class="mz na nb nc gt nd gh gi paragraph-image"><div class="gh gi my"><img src="../Images/13ebe33ffde0369609ff0a9c9d26c854.png" data-original-src="https://miro.medium.com/v2/resize:fit:368/format:webp/1*q2fXoFefOREJJyUgE1ar3A.png"/></div><p class="ng nh gj gh gi ni nj bd b be z dk translated">大西洋和印度洋中鲨鱼和鲸鱼出现的2x2矩阵</p></figure><p id="b1e9" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">为了获得数据的第一印象，并有一个<strong class="kk iu">“基线参考”</strong>我将对独立性进行卡方检验。我总是这样做，看看是否已经有强烈的迹象表明这两个变量是(不)独立的。</p><pre class="mz na nb nc gt nk nl nm nn aw no bi"><span id="b938" class="ll lm it nl b gy np nq l nr ns">h0: Independence of the variables (animals and ocean)<br/>hA: Variables are not independent (i.e. there is a "pattern")</span></pre><figure class="mz na nb nc gt nd"><div class="bz fp l di"><div class="nt nu l"/></div></figure><p id="f8c2" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">如图所示，p值0.41太大，无法拒绝零假设，留给我们的假设是<strong class="kk iu">变量是独立的</strong>——如零假设下所述。</p><p id="ef54" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">为了说明卡方检验有意义的原因:如果我们谈论的不是海里的鱼，而是网页上的点击量，我们可以说，两个网页的效率是一样的，因为没有迹象表明一个页面比另一个页面的点击量多/少。独立性实际上可以与没有网页比另一个更好的想法联系在一起——因此你最近的A/B测试变化并没有带来用户点击行为的显著变化。</p><figure class="mz na nb nc gt nd gh gi paragraph-image"><div class="gh gi nv"><img src="../Images/c087e8e9e1b0091cb3a4659a6662a92d.png" data-original-src="https://miro.medium.com/v2/resize:fit:478/format:webp/1*BnXfPXQD0LbuotFxeWLNQA.png"/></div><p class="ng nh gj gh gi ni nj bd b be z dk translated">相同的列联表，相同的测试，不同的上下文</p></figure><h2 id="9a77" class="ll lm it bd ln lo lp dn lq lr ls dp lt kr lu lv lw kv lx ly lz kz ma mb mc md bi translated">费雪精确分布和超几何分布简介</h2><p id="fbb0" class="pw-post-body-paragraph ki kj it kk b kl mg ju kn ko mh jx kq kr mv kt ku kv mw kx ky kz mx lb lc ld im bi nw translated"><span class="l nx ny nz bm oa ob oc od oe di">现在让我们来看看为什么我们都在这里，<strong class="kk iu">费雪的精确测试。</strong> Fisher的<strong class="kk iu"> </strong>精确检验假设输入表来自具有参数<em class="of"> a，b，c </em>和<em class="of"> d </em>(每个像元值)的超几何分布。</span></p><figure class="mz na nb nc gt nd gh gi paragraph-image"><div role="button" tabindex="0" class="oh oi di oj bf ok"><div class="gh gi og"><img src="../Images/3404f7d26518c590c5fd812f4c7e122d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*frkAvty7Fh9QZYbK"/></div></div><p class="ng nh gj gh gi ni nj bd b be z dk translated">与罗纳德·艾尔默·费希尔毫无相似之处——韦小宝拍摄的照片</p></figure><p id="54ae" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">如果超几何分布现在还没有引起注意，让我来给你举个例子:</p><p id="6354" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">抽屉里有20只黑袜子，10只红袜子。你随机挑8只袜子，挑6只黑袜子和2只红袜子的概率是多少？像这样的问题是典型的超几何问题:</p><figure class="mz na nb nc gt nd gh gi paragraph-image"><div class="gh gi ol"><img src="../Images/3920338a24e7db1792a1aa92a88e3cfa.png" data-original-src="https://miro.medium.com/v2/resize:fit:526/format:webp/1*7tRfCpsnIxkupCin8G7v4A.png"/></div><p class="ng nh gj gh gi ni nj bd b be z dk translated">超几何分布下的概率</p></figure><p id="9ca0" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">超几何分布下计算概率的公式可以用不同的方式来表达:</p><figure class="mz na nb nc gt nd gh gi paragraph-image"><div class="gh gi om"><img src="../Images/77144bb1f83c8904c4aa7f71ddd0ed56.png" data-original-src="https://miro.medium.com/v2/resize:fit:1208/format:webp/1*qlGhY4YwOhdN4DnOAfe0Iw.png"/></div><p class="ng nh gj gh gi ni nj bd b be z dk translated">超几何分布下的概率</p></figure><p id="c6fe" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">让我们将超几何分布与我们感兴趣的测试联系起来。Fisher精确测试的核心思想是，我们使用我们的输入表并计算与问题“<em class="of">相关的概率，我们看到随机抽取的表的概率小于或等于我们的输入表的概率(在超几何分布的假设下)</em>的可能性有多大。为了引用我们的数据表，我们使用以下列值:</p><figure class="mz na nb nc gt nd gh gi paragraph-image"><div class="gh gi on"><img src="../Images/a7757e91b8133074de289975f6c93d83.png" data-original-src="https://miro.medium.com/v2/resize:fit:276/format:webp/1*kl7U9-yaG7eee3rsgHKpkA.png"/></div><p class="ng nh gj gh gi ni nj bd b be z dk translated">p的超几何方程中填充的表的结构</p></figure><blockquote class="oo op oq"><p id="c29a" class="ki kj of kk b kl km ju kn ko kp jx kq or ks kt ku os kw kx ky ot la lb lc ld im bi translated">双侧p值是在零假设下，随机表的概率等于或小于输入表的概率的概率(<a class="ae mp" href="https://docs.scipy.org/doc/scipy/reference/generated/scipy.stats.fisher_exact.html" rel="noopener ugc nofollow" target="_blank">链接</a>)。</p></blockquote><h2 id="e1b3" class="ll lm it bd ln lo lp dn lq lr ls dp lt kr lu lv lw kv lx ly lz kz ma mb mc md bi translated">“手动”计算费雪的P值</h2><p id="46f4" class="pw-post-body-paragraph ki kj it kk b kl mg ju kn ko mh jx kq kr mv kt ku kv mw kx ky kz mx lb lc ld im bi translated">虽然，<strong class="kk iu">你可能对Fisher的精确测试更感兴趣，因为编码相关的任务</strong>，我将快速详细说明测试的一般工作方式——相信我，它对理解测试结果有很大帮助。</p><p id="b53c" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">正如我在开始时所说的，文献和例子主要集中在双边场景，因为它更常见(在实践中，你通常需要一个好的理由来进行单边测试)，也因为它似乎更容易理解。我将解决所有三种情况，单尾(左和右)和双尾。</p><p id="add5" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">基本上，Fisher的精确测试是通过从左到右或从右到左(1)移动值来尝试数据单元格的不同配置— <strong class="kk iu">注意，当第一行向右移动时，底部一行向左移动，因此边际分布保持不变</strong>(理解这一点非常重要)。</p><p id="5923" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">对于每一种配置，我们可以计算看到那个表的概率。对于我们的初始表，变化如下所示:</p><figure class="mz na nb nc gt nd gh gi paragraph-image"><div role="button" tabindex="0" class="oh oi di oj bf ok"><div class="gh gi ou"><img src="../Images/ed2a9ccd4e1afcefcfbcc2a1b6d2723e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Lry1rmjYMDcAZr6kWhDV7A.png"/></div></div><p class="ng nh gj gh gi ni nj bd b be z dk translated">移位—所有可能的表格组合</p></figure><p id="4547" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">可以重复上述步骤，直到我们在Atlantic/shark单元格中看到0值，因为我们不能减少超过该点—您不能观察到负数。如上所述，有5个可能的移位，因此对于这个例子有6个结果。使用X(从Python索引的角度来看，单元格[1，1]或单元格[0，0])范围从0到5的那些表给出以下概率质量函数:</p><figure class="mz na nb nc gt nd gh gi paragraph-image"><div class="gh gi ov"><img src="../Images/1b33e523203bae84e96e074b9b222d90.png" data-original-src="https://miro.medium.com/v2/resize:fit:246/format:webp/1*Qs93MxM8-LM1y60F5l_ltA.png"/></div><p class="ng nh gj gh gi ni nj bd b be z dk translated">PMF为1.0(计算<strong class="bd ow"> p </strong>的代码如下)</p></figure><p id="092a" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在超几何分布下计算和聚集这些表中的概率允许我们计算p值，用于确定是拒绝还是保留零假设。</p><blockquote class="oo op oq"><p id="85ec" class="ki kj of kk b kl km ju kn ko kp jx kq or ks kt ku os kw kx ky ot la lb lc ld im bi translated">为了使这一点更加具体，在我们的例子中，我们对P(X=5)感兴趣。在费希尔的精确检验下，这被翻译为:“对所有P(X=x)求和，其中P(X=x) ≤ P(X=5) = 0.2166。</p></blockquote><figure class="mz na nb nc gt nd gh gi paragraph-image"><div class="gh gi ox"><img src="../Images/d671545cd80c138c1b484950345d96d9.png" data-original-src="https://miro.medium.com/v2/resize:fit:202/format:webp/1*2VAiuwJjaRuq0KrO628kqg.png"/></div><p class="ng nh gj gh gi ni nj bd b be z dk translated">P(X) ≤ 0.217的X</p></figure><p id="c362" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">“解码”这个:对于P(X=5 ),我们看到概率约为0.2166，因此表中低于该值的所有概率都是我们感兴趣的。很明显，对于[0，1，2]中的X值，情况就是这样，因此我们将[0，1，2]和[5]的所有概率相加，结果得到<strong class="kk iu"> 0.30586，这是我们在双边情况下的p值。</strong>也可以将分数计算为1-sum(0.277，0.42)对应X={3，4}(取整值)。</p><p id="7dc2" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><strong class="kk iu">单尾测试</strong>将参考假设X是&lt;或&gt;而不是值“a”(在我们的例子中，a = 5)。</p><p id="3325" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">如果我们选择选项“更大”(右尾)，则概率计算为所有P(X=x)的总和，其中x&gt;5，而对于“更小”选项，我们则相反(x&lt;5)。</p><blockquote class="oo op oq"><p id="e224" class="ki kj of kk b kl km ju kn ko kp jx kq or ks kt ku os kw kx ky ot la lb lc ld im bi translated">请记住这个值，我们希望在稍后的费希尔精确测试中也能得到这个结果。</p></blockquote><p id="549e" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">要计算上述概率，您可以使用以下代码片段:</p><figure class="mz na nb nc gt nd"><div class="bz fp l di"><div class="nt nu l"/></div></figure><p id="5a16" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">如果你觉得很难理解移动X值(单元格[1，1])的想法，我可以推荐下面的视频，它从一个更直观的角度解释了移动X值的想法<strong class="kk iu">以及与<strong class="kk iu">超几何分布</strong>的联系<strong class="kk iu"> : </strong></strong></p><figure class="mz na nb nc gt nd"><div class="bz fp l di"><div class="oy nu l"/></div><p class="ng nh gj gh gi ni nj bd b be z dk translated">超几何分布下的概率</p></figure><h2 id="4923" class="ll lm it bd ln lo lp dn lq lr ls dp lt kr lu lv lw kv lx ly lz kz ma mb mc md bi translated">假设</h2><p id="2537" class="pw-post-body-paragraph ki kj it kk b kl mg ju kn ko mh jx kq kr mv kt ku kv mw kx ky kz mx lb lc ld im bi translated">由于我们已经在p值的计算中达到顶峰，让我们<strong class="kk iu">后退一步，想想潜在的假设。</strong></p><p id="e6d7" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">该测试基于直接计算获得输入表显示的结果的概率，给出零假设。回想一下，我们可以将独立性解释为:变量之间没有关联(动物对海洋)，这在零假设下是正确的(类似于独立性的卡方检验)。</p><p id="d2a4" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在你通读假设之前，有一点需要注意:“比例”指的是优势比，我将在后面描述。我觉得在这里引入比值比会使事情变得不必要的混乱，所以我们现在跳过它，用更简单的X (shark)的“比例”来代替:</p><pre class="mz na nb nc gt nk nl nm nn aw no bi"><span id="22fa" class="ll lm it nl b gy np nq l nr ns"><strong class="nl iu">Two-sided:</strong><br/>h0: Sharks are equally likely in both oceans (independence)<br/>OR: There is no difference in the proportion of sharks in both oceans<br/><strong class="nl iu">*</strong>OR:<em class="of"> A random table would have the probability of equal or less than the input table (look below for a detailed explanation of this)</em></span><span id="4a27" class="ll lm it nl b gy oz nq l nr ns">hA: The variables are not independent (one proportion is different to the other)<br/>OR:<br/>The the proportions of sharks are not equivalent in both oceans.</span><span id="9bdc" class="ll lm it nl b gy oz nq l nr ns"><strong class="nl iu">Left sided (less):<br/></strong>h0: The proportion of sharks in the Atlantic is <strong class="nl iu">greater or equal </strong>to the Indian Ocean<br/>hA: The proportion of sharks in the Atlantic is <strong class="nl iu">less </strong>than in the Indian Ocean<br/></span><span id="d04e" class="ll lm it nl b gy oz nq l nr ns"><strong class="nl iu">Right sided (greater):<br/></strong>h0: The proportion of sharks in the Atlantic is <strong class="nl iu">less or equal </strong>to the Indian Ocean<br/>hA: The proportion of sharks in the Atlantic is <strong class="nl iu">greater </strong>than in the Indian Ocean</span></pre><p id="ceb3" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><strong class="kk iu"> * </strong>零假设的另一种表述特别有趣，因为它<strong class="kk iu">确切地指的是前面提到的潜在超几何分布</strong>。考虑表格单元格[1，1]，随机表格等于或小于我们用作假设检验输入的表格的概率是多少—在我们的示例中x = 5(大西洋中的鲨鱼)？</p><p id="3ce8" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在零假设下，对于x=5的情况，我们期望概率为0.22。我们现在只查看小于或等于P(X=5)的概率，这是X = {0，1，2，5}导致P值为<strong class="kk iu"> 0.30586 </strong>(所有符合条件的概率之和)的情况。</p><h2 id="241d" class="ll lm it bd ln lo lp dn lq lr ls dp lt kr lu lv lw kv lx ly lz kz ma mb mc md bi translated">进行测试</h2><p id="b0b4" class="pw-post-body-paragraph ki kj it kk b kl mg ju kn ko mh jx kq kr mv kt ku kv mw kx ky kz mx lb lc ld im bi translated">让我们从与代码更相关的角度来看这个测试——我使用了Scipy的<em class="of"> fisher_exact </em>测试的实现:</p><pre class="mz na nb nc gt nk nl nm nn aw no bi"><span id="7162" class="ll lm it nl b gy np nq l nr ns">from scipy.stats import fisher_exact as f</span></pre><p id="9363" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">让我们从“更容易”的双面案例开始。如前面“手动”所示，测试的p值约为0.31。鉴于这个相对较高的值，我们不能拒绝零假设，因此假设:</p><ul class=""><li id="e8cc" class="me mf it kk b kl km ko kp kr pa kv pb kz pc ld pd mm mn mo bi translated">独立性<strong class="kk iu">或</strong></li><li id="60c4" class="me mf it kk b kl mq ko mr kr ms kv mt kz mu ld pd mm mn mo bi translated">动物与海洋的比例没有差别<strong class="kk iu">或</strong></li><li id="86af" class="me mf it kk b kl mq ko mr kr ms kv mt kz mu ld pd mm mn mo bi translated">观察到概率等于或小于观察到的X=5的随机表的概率约为31%。</li></ul><figure class="mz na nb nc gt nd gh gi paragraph-image"><div class="gh gi pe"><img src="../Images/c87c6322b8ec9353721434e6a684471b.png" data-original-src="https://miro.medium.com/v2/resize:fit:538/format:webp/1*IY5kXBGabhyNeDUXkU4QOA.png"/></div></figure><p id="19a9" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">让我们继续选择“更大”，分布的右尾。最初，我们假设大西洋和印度洋的鲨鱼比例相等(或更少)。如果我们即将拒绝h0，我们将假定X的值&gt; 5或在大西洋中更大的一个比率。</p><figure class="mz na nb nc gt nd gh gi paragraph-image"><div class="gh gi pf"><img src="../Images/7d4851314e2288e43346e78bbe0ba4bd.png" data-original-src="https://miro.medium.com/v2/resize:fit:524/format:webp/1*mu5WtG9Bwz5JJdvo3BtWlg.png"/></div><p class="ng nh gj gh gi ni nj bd b be z dk translated">p值为0.2166</p></figure><p id="fcb1" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">根据p值，我们不能拒绝零假设。我们假设X ≤ 5。回想一下，在Python中计算索引时，我们从输入表的单元格[1，1]或单元格[0，0]中获得5。</p><p id="a4cb" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">另一个“较少”意味着大西洋中鲨鱼的比例比在印度洋中观察到的要少。即使不进行测试，简单地观察表格也表明这似乎不太可能。因此毫不奇怪，我们<strong class="kk iu">不会拒绝零假设</strong>(替代方案似乎是错误的)。</p><figure class="mz na nb nc gt nd gh gi paragraph-image"><div class="gh gi pg"><img src="../Images/9ed1b7b2246c4456f92dda8c815bbc86.png" data-original-src="https://miro.medium.com/v2/resize:fit:472/format:webp/1*SEyFviaJrKu0FbCqssesGQ.png"/></div><p class="ng nh gj gh gi ni nj bd b be z dk translated">p值为1.0</p></figure><p id="5fb0" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们最初的假设不能被拒绝，大西洋中鲨鱼的比例大于或等于印度洋。</p><p id="7008" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">当进行这样的测试时，产生一个参考例子总是一个好主意，这个例子看起来如此极端，以至于你会期望测试的结果相对清晰。</p><p id="f7d1" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">考虑以下高度不平衡的表:</p><figure class="mz na nb nc gt nd gh gi paragraph-image"><div role="button" tabindex="0" class="oh oi di oj bf ok"><div class="gh gi ph"><img src="../Images/6aec31bc0efb41eb4aae1d28e181937e.png" data-original-src="https://miro.medium.com/v2/resize:fit:382/format:webp/1*en6ZqZ53_mC_fcYl5Xwjqw.png"/></div></div><p class="ng nh gj gh gi ni nj bd b be z dk translated">显然，大西洋中鲨鱼的比例似乎要高得多，而鲸鱼的比例则低得多</p></figure><ul class=""><li id="800f" class="me mf it kk b kl km ko kp kr pa kv pb kz pc ld pd mm mn mo bi translated">鉴于这种高度不平衡的比例，我会假设双边测试非常重要，因为我构建了一个表，让大西洋中有更多的鲨鱼，印度洋中有更多的鲸鱼。</li><li id="fe74" class="me mf it kk b kl mq ko mr kr ms kv mt kz mu ld pd mm mn mo bi translated">至于“更大”的选择，我假设我们再次看到了一个重要的结果，因为大西洋中鲨鱼的数量不是少于或等于(h0)，而是多得多——再次，是故意的！</li><li id="20d6" class="me mf it kk b kl mq ko mr kr ms kv mt kz mu ld pd mm mn mo bi translated">至于“更少”的选择，我预计值(接近)1.0，因为我们已经知道鲨鱼在大西洋更频繁。在这种情况下，我们非常自信地坚持h0，这意味着鲨鱼的数量大于或等于在印度洋观察到的数量。</li></ul><figure class="mz na nb nc gt nd gh gi paragraph-image"><div role="button" tabindex="0" class="oh oi di oj bf ok"><div class="gh gi pi"><img src="../Images/82eb982914e8d2a65ed16de9a0319662.png" data-original-src="https://miro.medium.com/v2/resize:fit:700/format:webp/1*j0AqgObxHC1Z0chL_oB2-g.png"/></div></div><p class="ng nh gj gh gi ni nj bd b be z dk translated">所有三个不同尾部的测试</p></figure><h2 id="8b1d" class="ll lm it bd ln lo lp dn lq lr ls dp lt kr lu lv lw kv lx ly lz kz ma mb mc md bi translated">了解优势比</h2><p id="a879" class="pw-post-body-paragraph ki kj it kk b kl mg ju kn ko mh jx kq kr mv kt ku kv mw kx ky kz mx lb lc ld im bi translated">细心的读者可能已经意识到，在第一个示例中，p值输出之前总是有一个值inf，在后一个示例中是66.667。</p><p id="9618" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">比值比直接从下表中计算得出:</p><figure class="mz na nb nc gt nd gh gi paragraph-image"><div class="gh gi pj"><img src="../Images/ea54b2cad4fdc4b61ed66dfdf4b85b62.png" data-original-src="https://miro.medium.com/v2/resize:fit:352/format:webp/1*uYSjlYHRxaHXOOHCh_Wm3g.png"/></div></figure><p id="f24a" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">记住观察表，我们计算两个大洋中鲨鱼与鲸鱼的比例。这就缩小了我们之前分析的假设的差距，我有时会使用“<strong class="kk iu">比例</strong>”。奇数比，简单地比较了我们已经用于原始假设的两个比例。但是，如何解释这些比率呢？</p><p id="b979" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">如果奇数比是1，我们会看到两个海洋中鲨鱼的比例是相同的。给定这个等式，我们也可以解释为什么在某些情况下(第一个例子)，当其中一个字母为0时，我们会看到<strong class="kk iu"> inf </strong>！</p><p id="459c" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">至于第二个例子，我们看到一个66.67的高比值比，这意味着这两个比值是非常不平衡的——这是我们通过设计从表格中预期的！</p><p id="7149" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们现在可以推导出关于比值比的附加/相关假设:</p><pre class="mz na nb nc gt nk nl nm nn aw no bi"><span id="8f81" class="ll lm it nl b gy np nq l nr ns">Two-sided Fisher’s Exact Test:<br/>ho: The odds ratio is equal to 1<br/>ha: The odds ratio is not equal to 1</span><span id="f684" class="ll lm it nl b gy oz nq l nr ns">“Less” Fisher’s Exact Test:<br/>ho: The odds ratio ≥ 1<br/>ha: The odds ratio is &lt;1</span><span id="7638" class="ll lm it nl b gy oz nq l nr ns">“Greater” Fisher’s Exact Test:<br/>ho: The odds ratio is ≤1<br/>ha: The odds ratio is &gt; 1</span></pre><h2 id="926e" class="ll lm it bd ln lo lp dn lq lr ls dp lt kr lu lv lw kv lx ly lz kz ma mb mc md bi translated">概述</h2><p id="a569" class="pw-post-body-paragraph ki kj it kk b kl mg ju kn ko mh jx kq kr mv kt ku kv mw kx ky kz mx lb lc ld im bi translated">当涉及列联表上的假设检验时，Fisher精确检验是最受欢迎的选择之一，这是一个典型的A/B检验场景。要完全理解这个测试，基本的超几何分布，比例或优势比的概念是必不可少的。</p><p id="8a20" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">虽然Fisher精确检验的应用很简单，但是通过对各个超几何概率的结果求和，也很容易获得精确的结果。如果比值比感觉很难解释(特别是当在假设中直接考虑它们时)，简单比例的想法使比较列联表中的事件变得更实际。</p></div><div class="ab cl le lf hx lg" role="separator"><span class="lh bw bk li lj lk"/><span class="lh bw bk li lj lk"/><span class="lh bw bk li lj"/></div><div class="im in io ip iq"><p id="7ff0" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">如果你觉得这篇文章有帮助，我会很感激“关注”🫀，直到那时:</p><p id="e014" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">{照顾好自己，如果可以的话，也照顾好别人} </p><p id="647f" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><em class="of"> —借自史蒂芬·都伯纳</em></p></div></div>    
</body>
</html>