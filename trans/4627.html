<html>
<head>
<title>How to Visualize Football Data Using R</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何使用R可视化足球数据</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/how-to-visualize-football-data-using-r-ee963b3a0ba4#2022-10-14">https://towardsdatascience.com/how-to-visualize-football-data-using-r-ee963b3a0ba4#2022-10-14</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="f72c" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">关于创建快照、过程和热点图的教程</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/95bee86c5a18d8306339159a1e1dd687.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jQTok-CIl6HRSNCJa6Cy3Q.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">照片由<a class="ae ky" href="https://unsplash.com/@janoschphotos?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">雅诺什·迪格尔曼</a>在<a class="ae ky" href="https://unsplash.com/s/photos/uefa?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</p></figure><h1 id="adf2" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">介绍</h1><p id="c7b8" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">近年来，足球分析发展迅速。有了数据，我们可以从不同的角度去理解游戏。</p><p id="496b" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">在本文中，我将向您展示如何使用r可视化足球数据。在本文结束时，您将能够创建如下可视化:</p><div class="kj kk kl km gt ab cb"><figure class="ms kn mt mu mv mw mx paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><img src="../Images/f587986bbd39a6b7a7c05cfe70320b29.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*u5HzqaubEXlG9ill_Q6NHw.jpeg"/></div></figure><figure class="ms kn mt mu mv mw mx paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><img src="../Images/048313e753746d003b388e321a2df1e4.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*pR1A8FQ1RIEn9cyfwparVg.jpeg"/></div></figure><figure class="ms kn mt mu mv mw mx paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><img src="../Images/b9183a74c7e184309e11276361dbda6d.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*SUgPd1TCRQpSRQ4Hdf_krg.jpeg"/></div><p class="ku kv gj gh gi kw kx bd b be z dk my di mz na translated">所有图片均由作者创作。</p></figure></div><p id="17c4" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated"><strong class="lt iu">事不宜迟，让我们开始吧！</strong></p></div><div class="ab cl nb nc hx nd" role="separator"><span class="ne bw bk nf ng nh"/><span class="ne bw bk nf ng nh"/><span class="ne bw bk nf ng"/></div><div class="im in io ip iq"><h1 id="b6f1" class="kz la it bd lb lc ni le lf lg nj li lj jz nk ka ll kc nl kd ln kf nm kg lp lq bi translated">履行</h1><h2 id="b87f" class="nn la it bd lb no np dn lf nq nr dp lj ma ns nt ll me nu nv ln mi nw nx lp ny bi translated">数据源</h2><p id="ccd1" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">我们将使用来自StatsBomb的<a class="ae ky" href="https://github.com/statsbomb/open-data" rel="noopener ugc nofollow" target="_blank"> <strong class="lt iu">开放数据</strong> </a>，我已经得到许可使用这些数据作为例子。StatsBomb是一家足球分析公司，为足球俱乐部提供赛事数据和分析服务。</p><p id="e3c4" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">由于事件数据不同于常规的表格数据，StatsBomb提供免费数据来帮助我们了解如何使用数据分析足球。</p><p id="1f56" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">我们可以从公开数据中选择的联赛有欧冠、世界杯、印超等等。</p><p id="6c4f" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">对于这篇文章，我们将基于2012/13赛季拜仁慕尼黑和多特蒙德之间的冠军联赛决赛来创建可视化效果。</p><p id="b25d" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">StatsBomb数据格式类似于JSON文件，因此使用它来分析数据将是一个挑战。但值得庆幸的是，我们可以通过使用一个名为<a class="ae ky" href="https://github.com/statsbomb/StatsBombR" rel="noopener ugc nofollow" target="_blank"> <strong class="lt iu"> StatsBombR </strong> </a>的函数轻松检索数据。</p><h2 id="7873" class="nn la it bd lb no np dn lf nq nr dp lj ma ns nt ll me nu nv ln mi nw nx lp ny bi translated">安装并加载库</h2><p id="2375" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">我们需要几个库来帮助我们创建可视化。这些库是:</p><ul class=""><li id="c708" class="nz oa it lt b lu mn lx mo ma ob me oc mi od mm oe of og oh bi translated">StatsBombR = &gt;检索StatsBomb数据</li><li id="b5d1" class="nz oa it lt b lu oi lx oj ma ok me ol mi om mm oe of og oh bi translated">Tiduverse = &gt;一个库，它编译用于预处理和可视化数据的库</li><li id="c382" class="nz oa it lt b lu oi lx oj ma ok me ol mi om mm oe of og oh bi translated">Ggsoccer = &gt;一个在可视化界面上生成足球场的库</li></ul><p id="9c88" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">让我们安装库。下面是实现这一点的代码:</p><pre class="kj kk kl km gt on oo op oq aw or bi"><span id="e2a8" class="nn la it oo b gy os ot l ou ov"><strong class="oo iu"># Install the necessary libraries</strong><br/>install.packages('devtools')<br/>devtools::install_github("statsbomb/SDMTools")<br/>devtools::install_github("statsbomb/StatsBombR")<br/>install.packages('tidyverse')<br/>install.packages('ggsoccer')</span></pre><p id="4124" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">之后，您可以通过运行以下代码行来加载库:</p><pre class="kj kk kl km gt on oo op oq aw or bi"><span id="4214" class="nn la it oo b gy os ot l ou ov"><strong class="oo iu"># Load the libraries</strong><br/>library(tidyverse)<br/>library(StatsBombR)<br/>library(ggsoccer)</span></pre><p id="3048" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">现在我们准备好动手了。</p><h2 id="f3aa" class="nn la it bd lb no np dn lf nq nr dp lj ma ns nt ll me nu nv ln mi nw nx lp ny bi translated">预处理数据</h2><p id="f1b1" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">由于StatsBomb提供了不同联赛的公开数据，我们需要指定比赛ID和要分析的赛季。</p><p id="09a7" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">首先，我们需要查看StatsBomb提供的所有比赛。下面是实现这一点的代码:</p><pre class="kj kk kl km gt on oo op oq aw or bi"><span id="4a68" class="nn la it oo b gy os ot l ou ov"><strong class="oo iu"># Retrieve all available competitions</strong><br/>Comp &lt;- FreeCompetitions()</span></pre><p id="1189" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">从这段代码中，你会看到一个包含所有联赛的数据框。</p><p id="b923" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">正如我之前提到的，我们将分析欧冠决赛拜仁和多特蒙德的比赛。对应的比赛ID和赛季分别是16和2012/2013。</p><p id="41f4" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">让我们通过运行下面的代码来过滤数据:</p><pre class="kj kk kl km gt on oo op oq aw or bi"><span id="37c2" class="nn la it oo b gy os ot l ou ov"><strong class="oo iu"># Filter the competition</strong><br/>ucl_german &lt;- Comp %&gt;%<br/>  filter(competition_id==16 &amp; season_name=="2012/2013")</span></pre><p id="6b95" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">接下来，我们检索对应于该联赛和赛季的所有比赛。下面是实现这一点的代码:</p><pre class="kj kk kl km gt on oo op oq aw or bi"><span id="1ebc" class="nn la it oo b gy os ot l ou ov"><strong class="oo iu"># Retrieve all available matches</strong><br/>matches &lt;- FreeMatches(ucl_german)</span></pre><p id="b4b2" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">获得所有匹配后，我们可以通过运行这行代码来检索事件数据:</p><pre class="kj kk kl km gt on oo op oq aw or bi"><span id="4b43" class="nn la it oo b gy os ot l ou ov"><strong class="oo iu"># Retrieve the event data</strong><br/>events_df &lt;- get.matchFree(matches)</span></pre><p id="c1f4" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">最后，我们清理数据。下面是实现这一点的代码:</p><pre class="kj kk kl km gt on oo op oq aw or bi"><span id="cbcc" class="nn la it oo b gy os ot l ou ov"><strong class="oo iu"># Preprocess the data</strong><br/>clean_df &lt;- allclean(events_df)</span></pre><p id="557e" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">现在我们有了数据。让我们创建可视化！</p><h2 id="a213" class="nn la it bd lb no np dn lf nq nr dp lj ma ns nt ll me nu nv ln mi nw nx lp ny bi translated">通行证地图</h2><p id="446a" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">第一个是通行地图。传球地图显示了一个球员或一个球队创造的所有传球。在本例中，我们将创建Thomas Muller的通行证地图。</p><p id="1733" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">让我们通过穆勒的所有传球来过滤数据。下面是实现这一点的代码:</p><pre class="kj kk kl km gt on oo op oq aw or bi"><span id="03e0" class="nn la it oo b gy os ot l ou ov"><strong class="oo iu"># Passing Map</strong><br/>muller_pass &lt;- clean_df %&gt;%<br/>  filter(player.name == 'Thomas Müller') %&gt;%<br/>  filter(type.name == 'Pass')</span></pre><p id="ea6a" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">现在有趣的部分来了。为了创建viz，我们将使用一个名为ggplot和ggsoccer的库。下面是创建基本viz的代码:</p><pre class="kj kk kl km gt on oo op oq aw or bi"><span id="dbe0" class="nn la it oo b gy os ot l ou ov">ggplot(muller_pass) +<br/>  annotate_pitch(dimensions = pitch_statsbomb) +<br/>  geom_segment(aes(x=location.x, y=location.y, xend=pass.end_location.x, yend=pass.end_location.y),<br/>               colour = "coral",<br/>               arrow = arrow(length = unit(0.15, "cm"),<br/>                             type = "closed")) +<br/>  labs(title="Thomas Muller's Passing Map",<br/>       subtitle="UEFA Champions League Final 12/13",<br/>       caption="Data Source: StatsBomb")</span></pre><p id="ed07" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">如果你是R用户，相信你对ggplot已经很熟悉了。</p><p id="d1b5" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">ggsoccer扩展了ggplot库，因此我们可以在包含开始和结束坐标的事件数据上构建可视化。</p><p id="53a2" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">这个库提供了annotate_pitch来创建足球场，提供了geom_segment来创建传球路线，这可以从上面的代码中看到。剩下的就是你在ggplot上看到的那个了。</p><p id="a469" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">这是结果:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ow"><img src="../Images/986ccd026877887132851c0bbfd9e6fb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1146/format:webp/1*vRsy2o3yBQHwEUQnEtcvZw.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">这个形象是作者创造的。</p></figure><p id="68c7" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">嗯，好像视觉上不美观。让我们添加主题功能来定制viz的外观。下面是完整的代码，以及主题函数:</p><pre class="kj kk kl km gt on oo op oq aw or bi"><span id="ede4" class="nn la it oo b gy os ot l ou ov">ggplot(muller_pass) +<br/>  annotate_pitch(dimensions = pitch_statsbomb, fill='#021e3f', colour='#DDDDDD') +<br/>  geom_segment(aes(x=location.x, y=location.y, xend=pass.end_location.x, yend=pass.end_location.y),<br/>               colour = "coral",<br/>               arrow = arrow(length = unit(0.15, "cm"),<br/>                             type = "closed")) + <br/>  labs(title="Thomas Muller's Passing Map",<br/>       subtitle="UEFA Champions League Final 12/13",<br/>       caption="Data Source: StatsBomb") + <br/>  theme(<br/>    plot.background = element_rect(fill='#021e3f', color='#021e3f'),<br/>    panel.background = element_rect(fill='#021e3f', color='#021e3f'),<br/>    plot.title = element_text(hjust=0.5, vjust=0, size=14),<br/>    plot.subtitle = element_text(hjust=0.5, vjust=0, size=8),<br/>    plot.caption = element_text(hjust=0.5),<br/>    text = element_text(family="Geneva", color='white'),<br/>    panel.grid = element_blank(),<br/>    axis.title = element_blank(),<br/>    axis.text = element_blank()<br/>  )</span></pre><p id="7896" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">这是结果:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ox"><img src="../Images/a695ae942d932a350ba4184f2281e7fe.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*pR1A8FQ1RIEn9cyfwparVg.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">这个形象是作者创造的。</p></figure><p id="4618" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">现在看起来棒极了！</p><h2 id="23e4" class="nn la it bd lb no np dn lf nq nr dp lj ma ns nt ll me nu nv ln mi nw nx lp ny bi translated">镜头地图</h2><p id="9799" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">在这一部分，我们将为两个团队创建拍摄地图。但是我们会在不同的坐标上绘制每个俱乐部产生的镜头。</p><p id="d925" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">因此，我们将创建拜仁和多特蒙德射门数据的两个数据框。让我们运行这几行代码:</p><pre class="kj kk kl km gt on oo op oq aw or bi"><span id="928f" class="nn la it oo b gy os ot l ou ov">dortmund_shot &lt;- clean_df %&gt;%<br/>  filter(type.name == 'Shot') %&gt;%<br/>  filter(team.name == 'Borussia Dortmund') %&gt;%<br/>  select(player.name, location.x, location.y, shot.end_location.x, shot.end_location.y, shot.statsbomb_xg)</span><span id="e38c" class="nn la it oo b gy oy ot l ou ov">bayern_shot &lt;- clean_df %&gt;%<br/>  filter(type.name == 'Shot') %&gt;%<br/>  filter(team.name == 'Bayern Munich') %&gt;%<br/>  select(player.name, location.x, location.y, shot.end_location.x, shot.end_location.y, shot.statsbomb_xg)</span></pre><p id="04a9" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">创建射击贴图也类似于创建过程贴图。我们用geom_point函数改变geom_segment函数。如果你知道，那就是绘制散点图的函数。</p><p id="47d7" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">我们将该函数应用于每个数据帧。而对于多特蒙德的投篮数据，我们通过将数值减去120来反映x坐标。</p><p id="b904" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">看看这段代码:</p><pre class="kj kk kl km gt on oo op oq aw or bi"><span id="ca15" class="nn la it oo b gy os ot l ou ov">ggplot() +<br/>  annotate_pitch(dimensions = pitch_statsbomb, colour='white', fill='#021e3f') +<br/>  geom_point(data=dortmund_shot, aes(x=location.x, y=location.y, size=shot.statsbomb_xg), color="red") +<br/>  geom_point(data=bayern_shot, aes(x=120-location.x, y=location.y, size=shot.statsbomb_xg), color="yellow") +<br/>  labs(<br/>    title="Borussia Dortmund vs Bayern Munich",<br/>    subtitle = "Shots Map | UEFA Champions League Final 2012/2013",<br/>    caption="Data Source: StatsBomb"<br/>  ) + <br/>  theme(<br/>    plot.background = element_rect(fill='#021e3f', color='#021e3f'),<br/>    panel.background = element_rect(fill='#021e3f', color='#021e3f'),<br/>    axis.title.x = element_blank(),<br/>    axis.title.y = element_blank(),<br/>    axis.text.x = element_blank(),<br/>    axis.text.y = element_blank(),<br/>    panel.grid.major = element_blank(),<br/>    panel.grid.minor = element_blank(),<br/>    text = element_text(family="Geneva", color='white'),<br/>    plot.title = element_text(hjust=0.5, vjust=0, size=14),<br/>    plot.subtitle = element_text(hjust=0.5, vjust=0, size=8),<br/>    plot.caption = element_text(hjust=0.5),<br/>    plot.margin = margin(2, 2, 2, 2),<br/>    legend.position = "none"<br/>  )</span></pre><p id="8f7b" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">让我们看看代码的结果:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ox"><img src="../Images/75269550fb57d65b1714fe34ce61fae4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*SUgPd1TCRQpSRQ4Hdf_krg.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">这个形象是作者创造的。</p></figure><h2 id="4320" class="nn la it bd lb no np dn lf nq nr dp lj ma ns nt ll me nu nv ln mi nw nx lp ny bi translated">压力热图</h2><p id="104a" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">最后，我们将创建拜仁慕尼黑进行的压力热图。让我们使用下面几行代码来过滤数据:</p><pre class="kj kk kl km gt on oo op oq aw or bi"><span id="b155" class="nn la it oo b gy os ot l ou ov"># Pressure Heat Map<br/>bayern_pressure &lt;- clean_df %&gt;%<br/>  filter(team.name == 'Bayern Munich') %&gt;%<br/>  filter(type.name == 'Pressure')</span></pre><p id="3bb3" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">为了生成viz，它与前一个类似。请看看这段代码:</p><pre class="kj kk kl km gt on oo op oq aw or bi"><span id="8c8d" class="nn la it oo b gy os ot l ou ov">ggplot(bayern_pressure) +<br/>  annotate_pitch(dimensions = pitch_statsbomb, fill='#021e3f', colour='#DDDDDD') +<br/>  geom_density2d_filled(aes(location.x, location.y, fill=..level..), alpha=0.4, contour_var='ndensity') +<br/>  scale_x_continuous(c(0, 120)) +<br/>  scale_y_continuous(c(0, 80)) +<br/>  labs(title="Bayern Munich's Pressure Heat Map",<br/>       subtitle="UEFA Champions League Final 12/13",<br/>       caption="Data Source: StatsBomb") + <br/>  theme_minimal() +<br/>  theme(<br/>    plot.background = element_rect(fill='#021e3f', color='#021e3f'),<br/>    panel.background = element_rect(fill='#021e3f', color='#021e3f'),<br/>    plot.title = element_text(hjust=0.5, vjust=0, size=14),<br/>    plot.subtitle = element_text(hjust=0.5, vjust=0, size=8),<br/>    plot.caption = element_text(hjust=0.5),<br/>    text = element_text(family="Geneva", color='white'),<br/>    panel.grid = element_blank(),<br/>    axis.title = element_blank(),<br/>    axis.text = element_blank(),<br/>    legend.position = "none"<br/>  )</span></pre><p id="d91e" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">我们使用geom_density2d_filled更改geom_point函数以生成热图。此外，我们添加了scale函数来指定热图范围。</p><p id="b67b" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">下面是代码的结果:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ox"><img src="../Images/eb5773c27aebfe43e2c31ed78ca73ede.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*u5HzqaubEXlG9ill_Q6NHw.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">这个形象是作者创造的。</p></figure></div><div class="ab cl nb nc hx nd" role="separator"><span class="ne bw bk nf ng nh"/><span class="ne bw bk nf ng nh"/><span class="ne bw bk nf ng"/></div><div class="im in io ip iq"><h1 id="1dc8" class="kz la it bd lb lc ni le lf lg nj li lj jz nk ka ll kc nl kd ln kf nm kg lp lq bi translated">结束语</h1><p id="fa20" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">干得好！你已经学习了如何使用r可视化足球数据。我们已经创建了传球，射门和压力热图。</p><p id="707b" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">我希望你能在这里学到很多东西。此外，请将这些知识应用到您最喜欢的团队中。</p><p id="ae5a" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">如果你对这篇文章感兴趣，请查看我的<a class="ae ky" href="https://medium.com/@irfanalghani11" rel="noopener"> <strong class="lt iu">中</strong> </a>简介，获取更多足球分析学和数据科学相关教程。</p><p id="7217" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">谢谢你看我的文章！</p></div></div>    
</body>
</html>