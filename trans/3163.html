<html>
<head>
<title>How to Simplify Hypothesis Testing for Linear Regression in Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在Python中简化线性回归的假设检验</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/how-to-simplify-hypothesis-testing-for-linear-regression-in-python-8b43f6917c86#2022-07-12">https://towardsdatascience.com/how-to-simplify-hypothesis-testing-for-linear-regression-in-python-8b43f6917c86#2022-07-12</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><h2 id="a10d" class="ir is it bd b dl iu iv iw ix iy iz dk ja translated" aria-label="kicker paragraph">统计数字</h2><div class=""/><div class=""><h2 id="bdab" class="pw-subtitle-paragraph jz jc it bd b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq dk translated">什么是同性恋？</h2></div><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi kr"><img src="../Images/15d06daf976cc0c1e846e02630b882b2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*nhewRU3QgoEkKjbZOoJmDw.jpeg"/></div></div><p class="ld le gj gh gi lf lg bd b be z dk translated">爱德华·豪厄尔在<a class="ae lh" href="https://unsplash.com/s/photos/graph?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure><p id="f7fb" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">我发现自己一遍又一遍地回到基础知识来更新我的统计知识。大多数人对统计学的第一次介绍是从学习假设检验开始的，紧接着是t检验和线性回归。本文回顾了如何使用线性回归进行假设检验，以及为了信任线性回归统计检验的结果而必须满足的假设。我还想分享一个我制作的Python函数，它可以快速检查使用线性回归进行假设检验时需要满足的5个统计假设。</p><h2 id="5036" class="me mf it bd mg mh mi dn mj mk ml dp mm lr mn mo mp lv mq mr ms lz mt mu mv iz bi translated">关于线性回归的快速提醒</h2><p id="eac1" class="pw-post-body-paragraph li lj it lk b ll mw kd ln lo mx kg lq lr my lt lu lv mz lx ly lz na mb mc md im bi translated">在我分享进行线性回归假设检验应该满足的4个假设之前，关于线性回归，有一点需要记住。线性回归可以被认为是一种双重用途的工具:</p><ol class=""><li id="14e5" class="nb nc it lk b ll lm lo lp lr nd lv ne lz nf md ng nh ni nj bi translated">预测y变量的未来值</li><li id="636d" class="nb nc it lk b ll nk lo nl lr nm lv nn lz no md ng nh ni nj bi translated">推断趋势是否具有统计显著性</li></ol><p id="288b" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">记住这一点很重要，因为这意味着如果使用回归来预测未来值，您的数据不必满足线性回归假设检验的要求。如果您试图确定是否存在实际趋势(也就是趋势具有统计学意义)，您需要满足假设检验假设。</p><h2 id="892b" class="me mf it bd mg mh mi dn mj mk ml dp mm lr mn mo mp lv mq mr ms lz mt mu mv iz bi translated">线性回归和机器学习</h2><p id="1740" class="pw-post-body-paragraph li lj it lk b ll mw kd ln lo mx kg lq lr my lt lu lv mz lx ly lz na mb mc md im bi translated">与机器学习相比，传统统计学更多地与数据中信号的推断相关联；而机器学习更侧重于预测。在可供机器学习选择的所有模型中，线性回归是您可以使用的最简单的模型之一，通常在基于连续数据构建新的机器学习模型时用作基准(如果您正在处理分类数据，则逻辑回归将是等效的)。你可以看到为什么统计学和机器学习都是作为数据专业人员的必要工具。需要记住的一个很好的提醒是，统计学更倾向于推理，而机器学习更倾向于预测。也就是说，同样值得注意的是，统计学首先为机器学习提供了基础。</p><h2 id="2535" class="me mf it bd mg mh mi dn mj mk ml dp mm lr mn mo mp lv mq mr ms lz mt mu mv iz bi translated">为什么线性回归假设检验很重要</h2><p id="3606" class="pw-post-body-paragraph li lj it lk b ll mw kd ln lo mx kg lq lr my lt lu lv mz lx ly lz na mb mc md im bi translated">假设检验帮助我们确定我们的数据中是否有足够的信号来确信我们可以拒绝零假设。本质上，它回答了这样一个问题，“我能对我在数据中看到的模式有信心吗，或者我看到的只是噪音？”我们使用统计学来推断数据中存在的关系和意义。</p><p id="a0dc" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">现在，为了使用线性回归假设检验从我们的数据中做出推论，我们需要确定我们在检验什么。为了解释这一点，我需要分享这个简单的公式:</p><pre class="ks kt ku kv gt np nq nr ns aw nt bi"><span id="3eda" class="me mf it nq b gy nu nv l nw nx">y = mx + b</span></pre><p id="94ce" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">我想大多数学过高中数学的人都会记得，这是一条直线斜率的方程。</p><p id="2021" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">就线性回归而言，该公式的更正式表示为:</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div class="gh gi ny"><img src="../Images/a2e2c2225e5c4bd4098d34026b5db8d5.png" data-original-src="https://miro.medium.com/v2/resize:fit:758/format:webp/1*Jm512ZO6O3dbmX9785GwQg.png"/></div><p class="ld le gj gh gi lf lg bd b be z dk translated">作者图片</p></figure><p id="47d8" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">其中B0是截距，B1是斜率。x和Y分别代表自变量和因变量，ε是误差项。</p><p id="ebad" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">直线斜率(B1)的线性回归假设检验如下所示:</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div class="gh gi nz"><img src="../Images/0122207bb8793d7461d76106964d0250.png" data-original-src="https://miro.medium.com/v2/resize:fit:548/format:webp/1*yhN0LhjbwUO0Oj72l9Ns6A.png"/></div><p class="ld le gj gh gi lf lg bd b be z dk translated">作者图片</p></figure><p id="1a9a" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">这些数学符号表示零假设(Ho)是斜率(B1)等于0(即斜率是平坦的)。另一个假设(Ha)是斜率不等于0。</p><p id="99b6" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">补充说明:还有一种假设检验很少用于线性回归，这是一种关于截距的假设。因为我们通常关心直线的斜率，所以用得较少。</p><h2 id="0f3a" class="me mf it bd mg mh mi dn mj mk ml dp mm lr mn mo mp lv mq mr ms lz mt mu mv iz bi translated">线性回归假设检验的4个假设</h2><ol class=""><li id="2273" class="nb nc it lk b ll mw lo mx lr ob lv oc lz od md ng nh ni nj bi translated">Y和X之间存在线性回归关系</li><li id="fcc1" class="nb nc it lk b ll nk lo nl lr nm lv nn lz no md ng nh ni nj bi translated">误差项(残差)呈正态分布</li><li id="cfd7" class="nb nc it lk b ll nk lo nl lr nm lv nn lz no md ng nh ni nj bi translated">误差项的方差在所有X值上都是恒定的(同方差)</li><li id="bed3" class="nb nc it lk b ll nk lo nl lr nm lv nn lz no md ng nh ni nj bi translated">误差项是独立的</li></ol><p id="d98d" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">为了演示测试这些线性回归的统计假设，我们需要一个数据集。我将使用R标准库中的cars数据集。数据集非常简单，如下所示:</p><pre class="ks kt ku kv gt np nq nr ns aw nt bi"><span id="2a59" class="me mf it nq b gy nu nv l nw nx">pip install rdatasets<br/>from rdatasets import data as rdata</span><span id="1f26" class="me mf it nq b gy oe nv l nw nx">dat = rdata("cars")<br/>dat</span></pre><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div class="gh gi of"><img src="../Images/d28db8786c048dbd0c7e808a45d9d3fe.png" data-original-src="https://miro.medium.com/v2/resize:fit:244/format:webp/1*g8xWohRBbJ2CZGV8RTzDuQ.png"/></div><p class="ld le gj gh gi lf lg bd b be z dk translated">汽车数据集-按作者分类的图像</p></figure><p id="dbfb" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">我们将预测一辆1920年的汽车在给定的速度下停下来之前的行驶距离。</p><p id="cf8e" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">让我们首先创建线性回归模型，然后执行检查假设的步骤。</p><p id="2a89" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated"><em class="oa">边注:技术上有第五个假设，X值是固定的，测量没有误差。然而，这种假设并不是你要创建的诊断图，所以被忽略了。</em></p><h2 id="8ff0" class="me mf it bd mg mh mi dn mj mk ml dp mm lr mn mo mp lv mq mr ms lz mt mu mv iz bi translated">在R和Python中创建线性回归诊断图</h2><p id="a2ca" class="pw-post-body-paragraph li lj it lk b ll mw kd ln lo mx kg lq lr my lt lu lv mz lx ly lz na mb mc md im bi translated">我通常用Python编写代码，但是我想展示如何用R和Python创建线性回归模型，以展示在R中检查统计假设是多么容易。</p><p id="dfcb" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated"><strong class="lk jd">R中的线性回归</strong></p><pre class="ks kt ku kv gt np nq nr ns aw nt bi"><span id="0f5c" class="me mf it nq b gy nu nv l nw nx">cars.lm &lt;- lm(dist ~ speed, data=cars)</span></pre><p id="70bf" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">然后，为了检查假设，您需要做的就是调用绘图函数并选择前两个绘图</p><pre class="ks kt ku kv gt np nq nr ns aw nt bi"><span id="258f" class="me mf it nq b gy nu nv l nw nx">plot(cars.lm, which=1:2)</span></pre><p id="f85b" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">这将为您提供以下图表:</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div class="gh gi og"><img src="../Images/50c66b58bf05715840509c5f15f47184.png" data-original-src="https://miro.medium.com/v2/resize:fit:924/format:webp/1*VZ1Q9eEhZyThRcQsM79GyA.png"/></div><p class="ld le gj gh gi lf lg bd b be z dk translated">作者图片</p></figure><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div class="gh gi oh"><img src="../Images/65c104e98efe6eee48901128dd6c26e1.png" data-original-src="https://miro.medium.com/v2/resize:fit:838/format:webp/1*DYBPMwwQPve7nfylwP5sVw.png"/></div><p class="ld le gj gh gi lf lg bd b be z dk translated">作者图片</p></figure><p id="c848" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">第一个是残差与拟合图，第二个是QQ图。我将在下面更详细地解释这两个情节。</p><p id="5a4a" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">这两个图几乎是你测试上述4个假设所需要的全部。在Python中似乎没有像在R中那样快速简单的方法来检查线性回归假设，所以我做了一个快速函数来做同样的事情。</p><p id="022f" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated"><strong class="lk jd">Python中的线性回归</strong></p><p id="15a1" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">这就是在Python中对相同的cars数据集运行线性回归的方式:</p><pre class="ks kt ku kv gt np nq nr ns aw nt bi"><span id="09bd" class="me mf it nq b gy nu nv l nw nx">from statsmodels.formula.api import ols<br/>from rdatasets import data as rdata</span><span id="c495" class="me mf it nq b gy oe nv l nw nx">cars = rdata("cars")<br/>cars_lm = ols("dist ~ speed", data=cars).fit()</span></pre><p id="50b1" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated"><em class="oa">补充说明:R中的线性回归是内置函数的一部分，而在Python中，我使用的是statsmodels包。</em></p><p id="c465" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">然而，要获得上述两个相同的诊断图，您必须分别运行以下命令。</p><p id="4c05" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated"><em class="oa">Python中的QQ剧情</em></p><pre class="ks kt ku kv gt np nq nr ns aw nt bi"><span id="aaae" class="me mf it nq b gy nu nv l nw nx">import statsmodels.api as sm<br/>import matplotlib.pyplot as plt</span><span id="4992" class="me mf it nq b gy oe nv l nw nx">residuals = cars['dist'] - cars_lm.predict()<br/>sm.qqplot(residuals, line='45', fit=True) <br/>plt.title('QQ Plot')<br/>plt.show()</span></pre><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div class="gh gi oi"><img src="../Images/2b3759909da83d7444336a216c673285.png" data-original-src="https://miro.medium.com/v2/resize:fit:832/format:webp/1*OI5miATHyqE8fo0bKyyq4g.png"/></div><p class="ld le gj gh gi lf lg bd b be z dk translated">作者图片</p></figure><p id="2c40" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated"><em class="oa">残差vs拟合Python </em></p><pre class="ks kt ku kv gt np nq nr ns aw nt bi"><span id="718c" class="me mf it nq b gy nu nv l nw nx">from statsmodels.formula.api import ols<br/>import statsmodels.api as sm<br/>from rdatasets import data as rdata<br/>import matplotlib.pyplot as plt</span><span id="a149" class="me mf it nq b gy oe nv l nw nx"># Import Data<br/>cars = rdata("cars")</span><span id="9421" class="me mf it nq b gy oe nv l nw nx"># Fit the model<br/>cars_lm = ols("dist ~ speed", data=cars).fit()</span><span id="b7be" class="me mf it nq b gy oe nv l nw nx"># Find the residuals<br/>residuals = cars['dist'] - cars_lm.predict()</span><span id="2680" class="me mf it nq b gy oe nv l nw nx"># Get the smoothed lowess line<br/>lowess = sm.nonparametric.lowess<br/>lowess_values = pd.Series(lowess(residuals, cars['speed'])[:,1])</span><span id="6adb" class="me mf it nq b gy oe nv l nw nx"># Plot the fitted v residuals graph<br/>plt.scatter(cars['speed'], residuals)<br/>plt.plot(cars['speed'], lowess_values, c='r')<br/>plt.axhline(y=0, c='black', alpha=.75)<br/>plt.title('Fitted vs. Residuals')<br/>plt.show()</span></pre><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div class="gh gi oj"><img src="../Images/398feed30dd3b8ac250d07779077af16.png" data-original-src="https://miro.medium.com/v2/resize:fit:788/format:webp/1*BLIh8vX6x1rDj5bvEb8QVQ.png"/></div><p class="ld le gj gh gi lf lg bd b be z dk translated">作者图片</p></figure><h2 id="9ea8" class="me mf it bd mg mh mi dn mj mk ml dp mm lr mn mo mp lv mq mr ms lz mt mu mv iz bi translated">用于线性回归诊断图的简化Python函数</h2><p id="40d9" class="pw-post-body-paragraph li lj it lk b ll mw kd ln lo mx kg lq lr my lt lu lv mz lx ly lz na mb mc md im bi translated">创建上面的图所需的努力并不太可怕，但仍然比我每次检查线性回归假设时需要输入的要多。除了QQ图之外，我还想有更多的诊断图，例如用于检查正态分布的直方图。我还想用另一个图来检验假设4，即误差项是独立的。</p><p id="8e38" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">所以我做了一个Python函数来快速检查OLS假设。我将在以后引用这个函数，希望你也会觉得它有用。我在下面加入了要点，但是函数保存在git repo <a class="ae lh" href="https://github.com/amartinson193/Statistics-Book/blob/main/my_functions/check_ols_assumptions.py" rel="noopener ugc nofollow" target="_blank">这里</a>。欢迎提出改进建议。</p><p id="c6f8" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated"><em class="oa">作为旁注，我在这里</em> 找到了另一篇关于用Python  <a class="ae lh" href="https://robert-alvarez.github.io/2018-06-04-diagnostic_plots/" rel="noopener ugc nofollow" target="_blank"> <em class="oa">创建R诊断图的博文</em></a></p><figure class="ks kt ku kv gt kw"><div class="bz fp l di"><div class="ok ol l"/></div></figure><p id="812d" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">如果我将cars数据集传递到check_ols_assumption函数中，我将得到以下诊断图输出:</p><pre class="ks kt ku kv gt np nq nr ns aw nt bi"><span id="b3a3" class="me mf it nq b gy nu nv l nw nx">cars = rdata("cars")<br/>cars_lm = ols("dist ~ speed", data=dat).fit()</span><span id="30d2" class="me mf it nq b gy oe nv l nw nx">check_ols_assumptions(cars['speed'], cars['dist'], cars_lm.predict())</span></pre><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div class="gh gi om"><img src="../Images/3df69d7eab315d60929935779dc3700d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1062/format:webp/1*PjvaJAUcam-Fg9b08wQDLw.png"/></div><p class="ld le gj gh gi lf lg bd b be z dk translated">作者图片</p></figure><h2 id="5904" class="me mf it bd mg mh mi dn mj mk ml dp mm lr mn mo mp lv mq mr ms lz mt mu mv iz bi translated">线性回归假设检验假设解释</h2><p id="2a6b" class="pw-post-body-paragraph li lj it lk b ll mw kd ln lo mx kg lq lr my lt lu lv mz lx ly lz na mb mc md im bi translated">既然我已经分享了我在Python中为快速线性回归假设测试创建的函数，我想快速回顾一下如何解释诊断图，以及诊断图如何帮助确定是否满足线性回归假设。</p><ol class=""><li id="93b2" class="nb nc it lk b ll lm lo lp lr nd lv ne lz nf md ng nh ni nj bi translated"><strong class="lk jd">线性关系</strong></li></ol><p id="b47d" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">确定线性度的诊断图是拟合残差图:</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div class="gh gi on"><img src="../Images/b34c0e15aad6414e39e82e9317bdc03b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1126/format:webp/1*LbN6KeNwL2ls5mOWCmwKew.png"/></div><p class="ld le gj gh gi lf lg bd b be z dk translated">作者图片</p></figure><p id="bde8" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">X轴上的拟合值是从线性回归预测的值。Y轴上是残差，即预测值(拟合值)和实际Y值之间的差值。</p><p id="0975" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">如果图中没有明显的趋势，则假定满足线性关系。上面的图满足了这个假设。以下是一个不符合这一假设的诊断图示例:</p><pre class="ks kt ku kv gt np nq nr ns aw nt bi"><span id="5a7c" class="me mf it nq b gy nu nv l nw nx"># Create a synthetic dataset<br/>np.random.seed(42)<br/>x_var = np.arange(0,10,.1)<br/>y_var = np.sin(x_var)</span><span id="d483" class="me mf it nq b gy oe nv l nw nx">data = pd.DataFrame({'x_var':x_var, 'y_var':y_var})</span><span id="bb93" class="me mf it nq b gy oe nv l nw nx">ols_result = ols("y_var ~ x_var", data=data).fit()<br/>check_ols_assumptions(data['x_var'], data['y_var'], ols_result.predict())</span></pre><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div class="gh gi oo"><img src="../Images/88ce68734008377937d05bce532041e9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1132/format:webp/1*eDEbmKkppx82bLEvJFL2Rw.png"/></div><p class="ld le gj gh gi lf lg bd b be z dk translated">作者图片</p></figure><p id="1f02" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">此图显示了正弦函数的线性回归模型的残差。因为有一个明显的趋势(散点图值和lowess回归的红线所示)，所以不符合X和Y之间的关系是线性的假设。</p><p id="465e" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated"><em class="oa">边注:想了解更多关于洛维斯回归的信息，请点击这里</em><a class="ae lh" rel="noopener" target="_blank" href="/lowess-regression-in-python-how-to-discover-clear-patterns-in-your-data-f26e523d7a35"><em class="oa"/></a></p><p id="6b13" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated"><strong class="lk jd"> 2。误差项呈正态分布</strong></p><p id="1725" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">记住这一假设的关键点是，X或Y变量不必呈正态分布，需要呈正态分布的是误差项或残差。另一个需要记住的要点是，仅仅因为图是线性的，并不意味着分布可以被认为是正态的。</p><p id="f6d9" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">以下是用于检查误差项(残差)是否正态分布的诊断图:</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div class="gh gi op"><img src="../Images/999a699a1b376278c46805cd42e9d74e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1004/format:webp/1*fE-iC2wR5XVyO1P-ix3nwQ.png"/></div><p class="ld le gj gh gi lf lg bd b be z dk translated">作者图片</p></figure><p id="61a7" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">我使用QQ图和直方图来检查正态性。如果QQ图点大致与45度线对齐，则满足此假设。另一种检查方法是直方图，如果分布遵循正态(高斯)钟形曲线，残差可以视为正态。要了解更多关于QQ情节的信息，请参考本文<a class="ae lh" rel="noopener" target="_blank" href="/q-q-plots-explained-5aa8495426c0">这里</a>。</p><p id="4f47" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated"><strong class="lk jd"> 3。误差项的方差在所有X值上保持不变</strong></p><p id="9ef0" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">拟合的vs残差图再次用于确定方差是否恒定。以下是再次供参考的情节:</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div class="gh gi on"><img src="../Images/b34c0e15aad6414e39e82e9317bdc03b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1126/format:webp/1*LbN6KeNwL2ls5mOWCmwKew.png"/></div><p class="ld le gj gh gi lf lg bd b be z dk translated">作者图片</p></figure><p id="c64d" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">如果残差的垂直分布在所有拟合值中保持大致一致，则假设满足恒定方差假设。cars数据集看起来可能不太符合这个假设。下面是一个更清晰的数据集示例，它不符合这一假设:</p><pre class="ks kt ku kv gt np nq nr ns aw nt bi"><span id="a25b" class="me mf it nq b gy nu nv l nw nx"># Create a synthetic dataset<br/>np.random.seed(42)<br/>x_var = np.arange(0,10,.1)<br/>y_var = np.random.normal(0,.1,100) * x_var</span><span id="6a83" class="me mf it nq b gy oe nv l nw nx">data = pd.DataFrame({'x_var':x_var, 'y_var':y_var})</span><span id="ba67" class="me mf it nq b gy oe nv l nw nx">ols_result = ols("y_var ~ x_var", data=data).fit()<br/>check_ols_assumptions(data['x_var'], data['y_var'], ols_result.predict())</span></pre><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div class="gh gi oq"><img src="../Images/157ff4bdfd1eefb7ff681c1e06eee6ee.png" data-original-src="https://miro.medium.com/v2/resize:fit:1136/format:webp/1*4q01T99poqpy9S4Q_-7NBg.png"/></div><p class="ld le gj gh gi lf lg bd b be z dk translated">作者图片</p></figure><p id="da36" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">本例显示了随着X值的增加，数据如何开始进一步扩散。这违反了这一假设，因为随着X值的增加，数据扩散得越来越远。</p><p id="0e50" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated"><strong class="lk jd"> 4。误差项是独立的</strong></p><p id="f59c" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">只有当您知道数据收集的顺序时，才能验证这一假设。最常见的情况是，当数据集中存在时间组件时，可以检查这一点(但是通过使用时间列，您可以假设数据收集的时间与该列的时间相同)。如果在一段时间内残值有一个趋势，那么这个假设就违背了。</p><p id="2683" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">如果值已经处于正确的顺序，它看起来将与拟合与残差图相同。上面的check_ols_assumptions中有一个默认参数，如果时间变量存在于数据集中，则可以传递该参数。</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div class="gh gi or"><img src="../Images/5e7d419dd26ead0cd3fbbc36938a1be7.png" data-original-src="https://miro.medium.com/v2/resize:fit:980/format:webp/1*_iphSVjICHS6REyDRjkYwg.png"/></div><p class="ld le gj gh gi lf lg bd b be z dk translated">作者图片</p></figure><h2 id="b26a" class="me mf it bd mg mh mi dn mj mk ml dp mm lr mn mo mp lv mq mr ms lz mt mu mv iz bi translated">结论</h2><p id="f8d2" class="pw-post-body-paragraph li lj it lk b ll mw kd ln lo mx kg lq lr my lt lu lv mz lx ly lz na mb mc md im bi translated">现在你有了，一个关于使用线性回归进行统计分析的快速复习。我希望你会发现check_ols_assumptions函数很有用，如果你有任何反馈，请告诉我😄</p></div><div class="ab cl os ot hx ou" role="separator"><span class="ov bw bk ow ox oy"/><span class="ov bw bk ow ox oy"/><span class="ov bw bk ow ox"/></div><div class="im in io ip iq"><p id="b821" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">感谢阅读！如果你喜欢读这篇文章，请在LinkedIn 上与我联系，并查看我的其他文章。</p><p id="8733" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">如果你是中级新手，可以考虑使用下面的我的推荐链接订阅👇</p><div class="oz pa gp gr pb pc"><a href="https://medium.com/@andreasmartinson/membership" rel="noopener follow" target="_blank"><div class="pd ab fo"><div class="pe ab pf cl cj pg"><h2 class="bd jd gy z fp ph fr fs pi fu fw jc bi translated">加入Medium并通过我的推荐链接支持我</h2><div class="pj l"><h3 class="bd b gy z fp ph fr fs pi fu fw dk translated">作为一个媒体会员，你的会员费的一部分会给你阅读的作家，你可以完全接触到每一个故事…</h3></div><div class="pk l"><p class="bd b dl z fp ph fr fs pi fu fw dk translated">medium.com</p></div></div><div class="pl l"><div class="pm l pn po pp pl pq lb pc"/></div></div></a></div><h2 id="a773" class="me mf it bd mg mh mi dn mj mk ml dp mm lr mn mo mp lv mq mr ms lz mt mu mv iz bi translated">参考</h2><ol class=""><li id="38d5" class="nb nc it lk b ll mw lo mx lr ob lv oc lz od md ng nh ni nj bi translated">J.戴维森，<a class="ae lh" rel="noopener" target="_blank" href="/no-machine-learning-is-not-just-glorified-statistics-26d3952234e3">不，机器学习不仅仅是美化统计学</a> (2018)，走向数据科学</li><li id="fcad" class="nb nc it lk b ll nk lo nl lr nm lv nn lz no md ng nh ni nj bi translated">R.阿尔瓦雷斯，<a class="ae lh" href="https://robert-alvarez.github.io/2018-06-04-diagnostic_plots/" rel="noopener ugc nofollow" target="_blank">用Python创建诊断图以及如何解释它们</a> (2018)，罗伯特。Alvarez.github.io</li><li id="4555" class="nb nc it lk b ll nk lo nl lr nm lv nn lz no md ng nh ni nj bi translated">页（page的缩写）Varshney，<a class="ae lh" rel="noopener" target="_blank" href="/q-q-plots-explained-5aa8495426c0"> Q-Q图解释</a> (2020)，走向数据科学</li><li id="a609" class="nb nc it lk b ll nk lo nl lr nm lv nn lz no md ng nh ni nj bi translated">南Dobilas，<a class="ae lh" rel="noopener" target="_blank" href="/lowess-regression-in-python-how-to-discover-clear-patterns-in-your-data-f26e523d7a35">Python中的LOWESS回归:如何在你的数据中发现清晰的模式？</a> (2020)，走向数据科学</li></ol></div></div>    
</body>
</html>