<html>
<head>
<title>How To Manipulate and Analyze Data in Python Without Using Pandas</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在不使用熊猫的情况下在Python中操作和分析数据</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/how-to-manipulate-and-analyze-data-in-python-without-using-pandas-f22e0788c471#2022-02-23">https://towardsdatascience.com/how-to-manipulate-and-analyze-data-in-python-without-using-pandas-f22e0788c471#2022-02-23</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="295f" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">使用基本的内置Python函数分析未来人口增长</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/59d72018e790e0a481bd4f7170013ace.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*O_Rv6pPF23dMIW6w"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">照片由<a class="ae ky" href="https://unsplash.com/@giacomocarra?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">贾科莫·卡拉</a>在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>拍摄</p></figure><p id="e2bc" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果你正在使用Python并且想要做数据分析，你可能会使用Pandas库。这是有原因的，因为Pandas是一个快速灵活的数据处理和分析工具。然而，对于刚接触python的人来说，我发现回到Python的基本构建块进行数据分析是有用的，可以帮助我更好地学习Python进行基本的数据讨论。所以作为一个Python练习，我将在不使用Pandas库的情况下用Python做数据分析。我们将根据联合国提供的数据分析未来的人口增长。</p><p id="aa2b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们将分析表格数据，这意味着我们将处理存储在二维列表中的数据。为了操作2D列表，我们将大量使用简单的嵌套for循环、索引和内置python函数，如min()、max()、sort()和append()。您将在使用Pandas或其他库的工作流程中使用的工具。</p><p id="05f2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">数据*是从<a class="ae ky" href="https://www.gapminder.org/data/documentation/gd003/" rel="noopener ugc nofollow" target="_blank"> Gapminder </a>下载的。完整的数据集包含了197个国家从1800年到2100年的年度预测。我使用了从2020年到2100年所有197个国家的数据子集，时间间隔为5年。</p><p id="3521" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">数据集和代码可以在这个<a class="ae ky" href="https://github.com/TalkingDataScience/analyze_data_without_pandas" rel="noopener ugc nofollow" target="_blank"> Github repo </a>中找到。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="a9a6" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">导入数据</h1><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mu mv l"/></div></figure><p id="ccfd" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">正如您在结果中看到的，数据存储在一个二维列表中，其中每一行都是列表中的一个元素。该表采用宽格式，其中每一“行”是一个国家，每一年是一“列”。这意味着列表中的每个列表都包含每个国家的所有人口信息。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="d72b" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">创建汇总表</h1><p id="1562" class="pw-post-body-paragraph kz la it lb b lc mw ju le lf mx jx lh li my lk ll lm mz lo lp lq na ls lt lu im bi translated">我们将通过创建一个汇总表来开始分析人口数据集，该表包含每个国家的最高和最低预期人口信息，以及从现在到2100年的相对人口变化。我们将创建一个名为<code class="fe nb nc nd ne b">pop_exp_dev</code>的表，其中包含以下各列:</p><ul class=""><li id="e0c5" class="nf ng it lb b lc ld lf lg li nh lm ni lq nj lu nk nl nm nn bi translated">国家</li><li id="7084" class="nf ng it lb b lc no lf np li nq lm nr lq ns lu nk nl nm nn bi translated">最低预测人口</li><li id="b335" class="nf ng it lb b lc no lf np li nq lm nr lq ns lu nk nl nm nn bi translated">最低预测人口年份</li><li id="fe36" class="nf ng it lb b lc no lf np li nq lm nr lq ns lu nk nl nm nn bi translated">最高预测人口</li><li id="79c4" class="nf ng it lb b lc no lf np li nq lm nr lq ns lu nk nl nm nn bi translated">最高预测人口年份</li><li id="9575" class="nf ng it lb b lc no lf np li nq lm nr lq ns lu nk nl nm nn bi translated">2020年至2100年人口的相对变化</li></ul><p id="d13c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们通过几个步骤创建这个表。</p><ul class=""><li id="4a03" class="nf ng it lb b lc ld lf lg li nh lm ni lq nj lu nk nl nm nn bi translated">首先，我们需要将人口数据转换为整数值。我们通过使用嵌套的for循环来实现这一点。外部循环遍历每一行，内部循环遍历行中的每一项，并将每一项从字符串转换为整数。我们从索引1开始外部循环，因为我们不需要转换包含列名的第一行。我们还从索引1开始内部循环，因为每行的第一个值包含国家名称。</li><li id="74e8" class="nf ng it lb b lc no lf np li nq lm nr lq ns lu nk nl nm nn bi translated">我们创建一个空列表<code class="fe nb nc nd ne b">pop_exp_dev</code>，在其中存储新的值。</li><li id="a945" class="nf ng it lb b lc no lf np li nq lm nr lq ns lu nk nl nm nn bi translated">为了找到新值，我们使用for-loops来遍历行，以找到最高和最低值，并将它们追加到新表中。我们还找到了它们的索引值，这样我们就可以识别和附加这些值的年份。</li><li id="fd87" class="nf ng it lb b lc no lf np li nq lm nr lq ns lu nk nl nm nn bi translated">最后，我们希望找到2020-2100年期间以百分比表示的预期人口变化。我们用公式<em class="nt">pop _ 2100-pop _ 2020/pop _ 2020 * 100</em>来计算</li></ul><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mu mv l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><p id="b189" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们现在有一个表格，其中有一些人口数据的摘要。在2D列表中查看数据看起来不是很舒服，所以为了便于说明，我展示了如果您以表格形式查看我们创建的表时的样子。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nu"><img src="../Images/2d8a8960a4d630a3406c34c203b33d43.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*XvMWGhENK7sjSsgCciMKRw.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="2d73" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">可视化子集列表</h1><p id="47a5" class="pw-post-body-paragraph kz la it lb b lc mw ju le lf mx jx lh li my lk ll lm mz lo lp lq na ls lt lu im bi translated">从这张表中，我们可以画出几幅图来显示预期的人口数量。把197个国家都标在一个情节里很快会让情节太长，很难读懂。相反，我们可以将表格的一部分分成子集，绘制更小的图。在这里，我们将把人口增长最快和人口下降最快的国家划分为一个图，将所有欧洲国家划分为另一个图。</p><h2 id="97f2" class="nv md it bd me nw nx dn mi ny nz dp mm li oa ob mo lm oc od mq lq oe of ms og bi translated">最大人口增长和最大人口下降子集</h2><p id="4dae" class="pw-post-body-paragraph kz la it lb b lc mw ju le lf mx jx lh li my lk ll lm mz lo lp lq na ls lt lu im bi translated">对于第一个图，我们简单地按照相对变化的值对2D列表进行排序，该值存储在列6(索引5)中。我们使用sorted()来做到这一点，并将一个lambda函数传递给key参数。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mu mv l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><p id="3feb" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">该图显示，我们可以预期看到非洲国家人口增长最多，欧洲国家人口下降最多，但牙买加除外，它将是所有国家中人口下降最多的国家。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi oh"><img src="../Images/4b75f4104209b98475b0adcd56b51d31.png" data-original-src="https://miro.medium.com/v2/resize:fit:1280/format:webp/1*9-Wx11u9vF9M34xCAD2qzA.jpeg"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><h2 id="c4d3" class="nv md it bd me nw nx dn mi ny nz dp mm li oa ob mo lm oc od mq lq oe of ms og bi translated">欧洲的子集国家</h2><p id="b8f0" class="pw-post-body-paragraph kz la it lb b lc mw ju le lf mx jx lh li my lk ll lm mz lo lp lq na ls lt lu im bi translated">为了创建欧洲国家的子集，我们手动创建一个包含欧洲所有国家的列表，并循环遍历<code class="fe nb nc nd ne b">pop_exp_dev</code>列表，以查找与Europ列表中的国家相匹配的任何元素。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mu mv l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><p id="6b36" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">创建一个水平柱状图，我们可以看到大多数欧洲国家预计到2100年人口会下降。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi oi"><img src="../Images/c1128b10a7a7b59d7fd50c8af6e0037a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1302/format:webp/1*cGUUZiWQzf_whbRwG0U31g.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="7d87" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">将表格标准化，以比较国家之间的人口发展</h1><p id="1097" class="pw-post-body-paragraph kz la it lb b lc mw ju le lf mx jx lh li my lk ll lm mz lo lp lq na ls lt lu im bi translated">由于一些国家人口多，一些国家人口少，很难比较它们的人口发展情况。我们可以通过归一化人口值来解决这个问题。为此，我们将2020年设定为一个指数年，所有其他年份都将与该指数年相关联。每一年的人口数除以指数年的人口数，再乘以100。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mu mv l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><p id="5427" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">正如您在结果中看到的，2020年被设置为索引年，值为100。其他年份的人口以相对于2020年人口的百分比变化表示。</p><p id="5d12" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">人口数据标准化后，我们可以通过对列表进行子集化来选择要绘制的国家，如前所示。这里，我们绘制了澳大利亚、日本、摩尔多瓦、瑞典、英国和美国的人口发展图。在这些国家中，澳大利亚预计将出现最大的人口增长，其次是美国、瑞典和英国。日本和摩尔多瓦的人口预计都将下降。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oj"><img src="../Images/82ead293ebfcf67321a864ac030042b7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jX4_opD0VB_aqCDm4pSLzA.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="735a" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">结论</h1><p id="e77d" class="pw-post-body-paragraph kz la it lb b lc mw ju le lf mx jx lh li my lk ll lm mz lo lp lq na ls lt lu im bi translated">对于处理杂乱的数据或进行更高级的分析，我无疑会使用熊猫。事实上，我不建议任何人在实际工作流程中采用这种变通方法，因为这远不是分析数据的最佳方式。例如，为了编写高效的代码，最好是<a class="ae ky" rel="noopener" target="_blank" href="/why-you-should-vectorize-your-code-in-r-d7df86ebc9b7">避免For循环并对</a>操作进行矢量化。尽管如此，我发现对人口数据进行这种简单的分析有助于我更好地掌握python的基本功能，比如如何通过使用简单的或嵌套的for循环来访问二维列表中的某些项目和元素。以及如何使用for-loops创建项目并将其追加到新的二维列表。我希望这些例子对你有用！</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><p id="4d08" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><em class="nt">*本文使用的数据基于联合国通过</em><a class="ae ky" href="https://www.gapminder.org/" rel="noopener ugc nofollow" target="_blank"><em class="nt">【GAPMINDER.ORG</em></a><em class="nt">、CC-BY LICENSE </em>提供的免费资料</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><div class="kj kk kl km gt ok"><a rel="noopener follow" target="_blank" href="/why-you-should-vectorize-your-code-in-r-d7df86ebc9b7"><div class="ol ab fo"><div class="om ab on cl cj oo"><h2 class="bd iu gy z fp op fr fs oq fu fw is bi translated">为什么应该用R向量化你的代码</h2><div class="or l"><h3 class="bd b gy z fp op fr fs oq fu fw dk translated">使用R中的微基准测试包比较向量化操作和for循环的效率</h3></div><div class="os l"><p class="bd b dl z fp op fr fs oq fu fw dk translated">towardsdatascience.com</p></div></div><div class="ot l"><div class="ou l ov ow ox ot oy ks ok"/></div></div></a></div><div class="oz pa gp gr pb ok"><a rel="noopener follow" target="_blank" href="/how-to-easily-access-and-download-public-data-from-national-statistical-institutions-dab9f2e6a18f"><div class="ol ab fo"><div class="om ab on cl cj oo"><h2 class="bd iu gy z fp op fr fs oq fu fw is bi translated">如何方便地从国家统计机构获取和下载公共数据</h2><div class="or l"><h3 class="bd b gy z fp op fr fs oq fu fw dk translated">R中PxWeb API接口指南，使用PxWeb包。</h3></div><div class="os l"><p class="bd b dl z fp op fr fs oq fu fw dk translated">towardsdatascience.com</p></div></div><div class="ot l"><div class="pc l ov ow ox ot oy ks ok"/></div></div></a></div><div class="oz pa gp gr pb ok"><a rel="noopener follow" target="_blank" href="/5-common-misinterpretations-of-the-p-value-aacaa6dcfddd"><div class="ol ab fo"><div class="om ab on cl cj oo"><h2 class="bd iu gy z fp op fr fs oq fu fw is bi translated">对P值的5种常见误解</h2><div class="or l"><h3 class="bd b gy z fp op fr fs oq fu fw dk translated">在解释和报告您的结果时避免这些</h3></div><div class="os l"><p class="bd b dl z fp op fr fs oq fu fw dk translated">towardsdatascience.com</p></div></div><div class="ot l"><div class="pd l ov ow ox ot oy ks ok"/></div></div></a></div></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><p id="b098" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果你喜欢阅读这样的故事，并想支持我成为一名作家，可以考虑报名成为一名媒体成员。每月5美元，你可以无限制地阅读媒体上的故事。如果你注册使用我的链接，我会赚一小笔佣金。</p><div class="oz pa gp gr pb ok"><a href="https://medium.com/@andreagustafsen/membership" rel="noopener follow" target="_blank"><div class="ol ab fo"><div class="om ab on cl cj oo"><h2 class="bd iu gy z fp op fr fs oq fu fw is bi translated">通过我的推荐链接加入Medium-Andrea gustaf sen</h2><div class="or l"><h3 class="bd b gy z fp op fr fs oq fu fw dk translated">作为一个媒体会员，你的会员费的一部分会给你阅读的作家，你可以完全接触到每一个故事…</h3></div><div class="os l"><p class="bd b dl z fp op fr fs oq fu fw dk translated">medium.com</p></div></div><div class="ot l"><div class="pe l ov ow ox ot oy ks ok"/></div></div></a></div></div></div>    
</body>
</html>