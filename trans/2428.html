<html>
<head>
<title>StrangeR things: Visualizing Soccer Data with R on a Soccer Pitch</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">奇怪的事情:用足球场上的R可视化足球数据</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/stranger-things-visualizing-soccer-data-with-r-on-a-soccer-pitch-8fe1f6b521fe#2022-05-26">https://towardsdatascience.com/stranger-things-visualizing-soccer-data-with-r-on-a-soccer-pitch-8fe1f6b521fe#2022-05-26</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="bdd4" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">如何使用“ggsoccer”软件包分析、可视化和报告足球场上的足球数据和策略</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/91cfb7582eb79121b3396c6f34d0d3aa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*uD6FFgMYe0XdSPgj"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated"><a class="ae ky" href="https://unsplash.com/@picsbyjameslee?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">李中清</a>在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍照</p></figure><p id="b6e0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">足球是世界上最受欢迎的运动之一。地球上三分之一的人至少踢过一次足球。如果你属于一个像我这样的拉丁美洲国家(墨西哥)，你可能是在和你的邻居、朋友和家人一起玩耍中长大的，你在童年时拥有超过四个足球。</p><p id="503a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">不久前，我遇到了一个儿时的朋友，他对足球的热爱让他走上了职业生涯。我无法想象，那个我们喜欢在附近和其他孩子一起踢足球的男孩，有一天会成为一名职业教练。</p><p id="b80f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">和他聊了一会儿他的职业，我想到了一个包裹。我发现自己正在开发一个应用程序，可以为他节省分析和战略规划的时间。这个包就是<strong class="lb iu">“gg soccer”</strong>也是本文的主题。“ggsoccer”提供了一些功能，使得在<strong class="lb iu">“gg plot 2”</strong>中绘制足球事件数据变得容易。因为“gg足球”是作为ggplot层实现的，所以定制一个情节很容易。</p><h2 id="8dd7" class="lv lw it bd lx ly lz dn ma mb mc dp md li me mf mg lm mh mi mj lq mk ml mm mn bi translated">软件包安装</h2><p id="ffbd" class="pw-post-body-paragraph kz la it lb b lc mo ju le lf mp jx lh li mq lk ll lm mr lo lp lq ms ls lt lu im bi translated">在一个新的R脚本中，首先必须安装软件包并加载库。</p><pre class="kj kk kl km gt mt mu mv mw aw mx bi"><span id="a985" class="lv lw it mu b gy my mz l na nb"># INSTALL AND LOAD LIBRARY</span><span id="1b09" class="lv lw it mu b gy nc mz l na nb">install.packages("ggsoccer")<br/>library(ggsoccer)</span></pre><h2 id="8f56" class="lv lw it bd lx ly lz dn ma mb mc dp md li me mf mg lm mh mi mj lq mk ml mm mn bi translated">足球场</h2><p id="db79" class="pw-post-body-paragraph kz la it lb b lc mo ju le lf mp jx lh li mq lk ll lm mr lo lp lq ms ls lt lu im bi translated">用“ggsoccer”创建足球场非常简单。加载该库，并将“<strong class="lb iu">annotate _ pitch”</strong>图层添加到ggplot函数中。此外，如果您想要一个空白主题，您可以使用“<strong class="lb iu">theme _ pitch”</strong>主题。</p><pre class="kj kk kl km gt mt mu mv mw aw mx bi"><span id="21a8" class="lv lw it mu b gy my mz l na nb"># BLANK SOCCER PITCH</span><span id="dccb" class="lv lw it mu b gy nc mz l na nb">ggplot() +<br/>  annotate_pitch() +<br/>  theme_pitch()</span></pre><p id="cfcb" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然后你会得到如下图。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nd"><img src="../Images/0602c80d4e85b3047363bdc9db02bb9e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1228/format:webp/1*LI8q_B9BO4RhslkYDaixjg.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">奇怪的事情:在足球场上用R…可视化足球数据？—绘制足球场，空白主题(图片由作者提供)</p></figure><h2 id="cc67" class="lv lw it bd lx ly lz dn ma mb mc dp md li me mf mg lm mh mi mj lq mk ml mm mn bi translated">足球场颜色</h2><p id="7caf" class="pw-post-body-paragraph kz la it lb b lc mo ju le lf mp jx lh li mq lk ll lm mr lo lp lq ms ls lt lu im bi translated">默认情况下，沥青颜色是带有灰色线条的白色，但是您可以自定所有颜色。“<strong class="lb iu"> colour </strong>”参数允许修改线条的颜色，而“<strong class="lb iu"> fill </strong>”参数修改足球场的颜色。如果您想更改图表其余部分的颜色，请用“<strong class="lb iu"> element_rect </strong>”修改“<strong class="lb iu"> theme </strong>”函数的“<strong class="lb iu">panel . background”</strong>组件。</p><pre class="kj kk kl km gt mt mu mv mw aw mx bi"><span id="ad73" class="lv lw it mu b gy my mz l na nb"># SOCCER PITCH COLOR</span><span id="0a16" class="lv lw it mu b gy nc mz l na nb">ggplot() +<br/>  annotate_pitch(fill = "#1b893e", colour = "white") +<br/>  theme_pitch() +<br/>  theme(panel.background = element_rect(fill = "#186d33"))</span></pre><p id="5a5b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">因此，您现在将得到一个带有您定义的颜色的图。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nd"><img src="../Images/99aea7509f877aae93e40a98ec3f6b8a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1228/format:webp/1*PMB47Ml7uPflU-RWmzfo9Q.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">奇怪的事情:在足球场上用R…可视化足球数据？—绘制足球场，自定义颜色(图片由作者提供)</p></figure><h2 id="3f33" class="lv lw it bd lx ly lz dn ma mb mc dp md li me mf mg lm mh mi mj lq mk ml mm mn bi translated">拍摄地图</h2><p id="e13a" class="pw-post-body-paragraph kz la it lb b lc mo ju le lf mp jx lh li mq lk ll lm mr lo lp lq ms ls lt lu im bi translated">您可以传递数据框来创建球门上的射门地图。请注意，足球场在两个轴上都从0到100。您也可以像使用ggplot2绘制任何其他绘图一样，通过设置轴限制来裁剪足球场。</p><pre class="kj kk kl km gt mt mu mv mw aw mx bi"><span id="c2cb" class="lv lw it mu b gy my mz l na nb"># SHOT MAP</span><span id="4d64" class="lv lw it mu b gy nc mz l na nb">set.seed(1)<br/>dataFrame &lt;- data.frame(x = rnorm(10, 85, 10), <br/>                 y = rnorm(10, 55, 20),<br/>                 Shots = sample(c("IN", "OUT"),<br/>                               40, replace = TRUE))</span><span id="6e6d" class="lv lw it mu b gy nc mz l na nb">ggplot(dataFrame) +<br/>  annotate_pitch(fill = "#1b893e", colour = "white") +<br/>  geom_point(aes(x = x, y = y, fill = Shots), shape = 21, size = 7) +<br/>  coord_cartesian(xlim = c(40, 100))+ <br/>  theme_pitch() +<br/>  theme(panel.background = element_rect(fill = "#3ab54a"))</span></pre><p id="185f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在你会得到如下结果。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nd"><img src="../Images/09ca0715285d1d01e60dcb034f66e925.png" data-original-src="https://miro.medium.com/v2/resize:fit:1228/format:webp/1*suckxx56DfEA0iXyArTggQ.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">奇怪的事情:在足球场上用R…可视化足球数据？— Plot shot地图(图片由作者提供)</p></figure><h2 id="39f2" class="lv lw it bd lx ly lz dn ma mb mc dp md li me mf mg lm mh mi mj lq mk ml mm mn bi translated">通行证地图</h2><p id="8976" class="pw-post-body-paragraph kz la it lb b lc mo ju le lf mp jx lh li mq lk ll lm mr lo lp lq ms ls lt lu im bi translated">与创建拍摄地图类似，您也可以通过指定数据框中箭头的所有坐标并使用"<strong class="lb iu"> geom_segment" </strong>创建箭头来创建通过地图。</p><pre class="kj kk kl km gt mt mu mv mw aw mx bi"><span id="8b9e" class="lv lw it mu b gy my mz l na nb"># PASSING MAP</span><span id="09ba" class="lv lw it mu b gy nc mz l na nb">passing &lt;- data.frame(x1 = c(0, 18, 50, 63, 66),<br/>                   x2 = c(13, 47, 55, 68, 78),<br/>                   y1 = c(39, 62, 37, 18, 70),<br/>                   y2 = c(63, 37, 20, 68, 90))</span><span id="57f4" class="lv lw it mu b gy nc mz l na nb">ggplot(passing) +<br/>  annotate_pitch(fill = "#1b893e", colour = "white") +<br/>  geom_segment(aes(x = x1, y = y1, xend = x2, yend = y2),<br/>               arrow = arrow(length = unit(0.3, "cm"), type = "closed")) +<br/>  theme_pitch() +<br/>  theme(panel.background = element_rect(fill = "#186d33"))</span></pre><p id="cffc" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">正如你将会看到的，你将会得到一个类似如下的通行证地图。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nd"><img src="../Images/ca662cf0f16f555e6fa3f971dbafbe08.png" data-original-src="https://miro.medium.com/v2/resize:fit:1228/format:webp/1*CxZAWNQ2fexTcrDOK0IDaw.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">奇怪的事情:在足球场上用R…可视化足球数据？—绘制路径图(图片由作者提供)</p></figure><h2 id="561b" class="lv lw it bd lx ly lz dn ma mb mc dp md li me mf mg lm mh mi mj lq mk ml mm mn bi translated">足球场尺寸</h2><p id="3194" class="pw-post-body-paragraph kz la it lb b lc mo ju le lf mp jx lh li mq lk ll lm mr lo lp lq ms ls lt lu im bi translated">足球场的尺寸可以根据你的需要而改变。您可以为每个元素创建一个具有相应尺寸的列表，并将它们传递给“<strong class="lb iu"> annotate_pitch函数”</strong>。</p><pre class="kj kk kl km gt mt mu mv mw aw mx bi"><span id="0dfc" class="lv lw it mu b gy my mz l na nb"># SOCCER PITCH DIMENSIONS</span><span id="7840" class="lv lw it mu b gy nc mz l na nb">dimension &lt;- list(length = 150, width = 60, penalty_box_length = 20,<br/>  penalty_box_width = 40, six_yard_box_length = 3, six_yard_box_width = 12,<br/>  penalty_spot_distance = 6, goal_width = 8, origin_x = 0, origin_y = 0)</span><span id="e95e" class="lv lw it mu b gy nc mz l na nb">ggplot() +<br/>  annotate_pitch(dimension = dimension, fill = "#13576c", colour = "white") +<br/>  theme_pitch() +<br/>  theme(panel.background = element_rect(fill = "#1f86a5"))</span></pre><p id="58c2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在你可以看到足球场已经有效地改变了它的尺寸。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nd"><img src="../Images/17bc8249cda06b509016b5b29234cd4d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1228/format:webp/1*E7HC9iXODVtDuCkLr95Vgg.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">奇怪的事情:在足球场上用R…可视化足球数据？—绘制足球场，自定义尺寸(图片由作者提供)</p></figure><p id="f2a5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">你将能够探索组成这个有趣的包的其他功能，并尝试你的创造性和你对足球的热爱。</p><p id="4197" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">也许我会多写几篇关于你可能不知道你可以用r做的不寻常的事情的文章。非常感谢你的阅读。正如在我的大多数文章中一样，你可以在这里找到完整的代码:【https://github.com/cosmoduende/r-ggsoccer】T4</p><p id="d388" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我感谢你到达终点，我祝你有一个非常快乐的分析和快乐的编码，你可以将一切付诸实践，你会感到惊讶，并像我一样对结果感到高兴！</p></div></div>    
</body>
</html>