<html>
<head>
<title>Doing Explanatory Data Analysis</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">进行解释性数据分析</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/doing-explanatory-data-analysis-f184c01557e7#2022-10-26">https://towardsdatascience.com/doing-explanatory-data-analysis-f184c01557e7#2022-10-26</a></blockquote><div><div class="fc ii ij ik il im"/><div class="in io ip iq ir"><div class=""/><div class=""><h2 id="0612" class="pw-subtitle-paragraph jr it iu bd b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki dk translated">有没有可能完全在GPU上完成？</h2></div><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj kj"><img src="../Images/8c226a12c68fadb44f375fe2013aee99.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*SPI6NWNexFoDLQEi"/></div></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">约书亚·索蒂诺在<a class="ae kz" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure><p id="db6a" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">当我们对训练<strong class="lc iv">深度学习模型不感兴趣时，我总是在黑暗中感觉这些GPU设备有多有用。</strong>不过，最近看了一些关于熊猫以及如何加快处理速度的文章。这些文章让我有点好奇，所以我决定启动我的<strong class="lc iv">数据科学机器，在<strong class="lc iv"> GPU、</strong>上抓取</strong>一个大文件，看看我是否能在GPU上完成整个EDA练习。我在黑暗中有一种阳光的感觉，有点像照片里的人。</p><p id="ad58" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">那么EDA可以完全在GPU上完成吗？让我们来了解一下！</p></div><div class="ab cl lw lx hy ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="in io ip iq ir"><h1 id="8973" class="md me iu bd mf mg mh mi mj mk ml mm mn ka mo kb mp kd mq ke mr kg ms kh mt mu bi translated">我的数据科学机器</h1><p id="2c22" class="pw-post-body-paragraph la lb iu lc b ld mv jv lf lg mw jy li lj mx ll lm ln my lp lq lr mz lt lu lv in bi translated">让我们从了解主机开始。</p><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj na"><img src="../Images/459a0af369f838d5bf7c04ea771c86e8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*E9f3SXIKHTN8X3WAq00PVg.png"/></div></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">来自about系统的截图——在Ubuntu设置中——作者在写作当天的图片</p></figure><p id="ea63" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">系统的主要<strong class="lc iv">亮点是:-</strong></p><ul class=""><li id="b75c" class="nb nc iu lc b ld le lg lh lj nd ln ne lr nf lv ng nh ni nj bi translated"><strong class="lc iv">主板</strong> : <a class="ae kz" href="https://www.gigabyte.com/Motherboard/GA-Z270N-WIFI-rev-10#kf" rel="noopener ugc nofollow" target="_blank"> Z270N-WIFI </a></li><li id="4cb6" class="nb nc iu lc b ld nk lg nl lj nm ln nn lr no lv ng nh ni nj bi translated"><strong class="lc iv">处理器</strong> : <a class="ae kz" href="https://www.intel.com/content/www/us/en/products/sku/97144/intel-core-i57600k-processor-6m-cache-up-to-4-20-ghz/specifications.html" rel="noopener ugc nofollow" target="_blank">英特尔4核i5–7600k</a>第七代Kaby Lake</li><li id="f2dd" class="nb nc iu lc b ld nk lg nl lj nm ln nn lr no lv ng nh ni nj bi translated"><strong class="lc iv">GPU</strong>:<a class="ae kz" href="https://www.nvidia.com/content/dam/en-zz/Solutions/design-visualization/productspage/quadro/quadro-desktop/quadro-pascal-p2000-data-sheet-us-nvidia-704443-r2-web.pdf" rel="noopener ugc nofollow" target="_blank">Quadro p 2000</a>5 GB gddr 5，1024个Cuda核心</li><li id="a75b" class="nb nc iu lc b ld nk lg nl lj nm ln nn lr no lv ng nh ni nj bi translated"><strong class="lc iv">内存</strong> : 32.0 Gig — <a class="ae kz" href="https://www.corsair.com/eu/en/Categories/Products/Memory/VENGEANCE%C2%AE-LPX-16GB-%282-x-8GB%29-DDR4-DRAM-3200MHz-C16-Memory-Kit---Red/p/CMK16GX4M2B3200C16R" rel="noopener ugc nofollow" target="_blank">海盗船复仇红</a></li><li id="4560" class="nb nc iu lc b ld nk lg nl lj nm ln nn lr no lv ng nh ni nj bi translated"><strong class="lc iv">电源:</strong>海盗船积分仪500w</li><li id="9fd4" class="nb nc iu lc b ld nk lg nl lj nm ln nn lr no lv ng nh ni nj bi translated"><strong class="lc iv">存储</strong> : 895.2 GB，支持SDD、FDD和mSata硬盘</li><li id="2340" class="nb nc iu lc b ld nk lg nl lj nm ln nn lr no lv ng nh ni nj bi translated"><strong class="lc iv">操作系统</strong>:LTS Ubuntu 22 . 04 . 1</li></ul><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj np"><img src="../Images/2889134f00ab6c3c8f14798398029237.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7oNrvf6Zggx70vQDvFLssA.png"/></div></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">该系统有三种板载存储类型——作者在写作当天截图。</p></figure><p id="fd2c" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">我自己组装了系统，并按照主板和GPU卡上允许的价格升级了组件。这个系统可以处理大多数任务，应该足以应对我们的挑战！我希望你同意，它是安全的说，没有硬件障碍！</p></div><div class="ab cl lw lx hy ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="in io ip iq ir"><h2 id="856d" class="nq me iu bd mf nr ns dn mj nt nu dp mn lj nv nw mp ln nx ny mr lr nz oa mt ob bi translated">用于实验的数据集</h2><p id="91f7" class="pw-post-body-paragraph la lb iu lc b ld mv jv lf lg mw jy li lj mx ll lm ln my lp lq lr mz lt lu lv in bi translated">我为GPU实验选择了一个有<a class="ae kz" href="https://www.kaggle.com/peopledatalabssf/free-7-million-company-dataset" rel="noopener ugc nofollow" target="_blank"> 7M记录</a>的数据文件。在Kaggle  [1]上描述了<a class="ae kz" href="https://www.kaggle.com/datasets/peopledatalabssf/free-7-million-company-dataset" rel="noopener ugc nofollow" target="_blank">700多万家公司的数据集，并在其他文章中使用，如</a><a class="ae kz" href="https://medium.com/jovianml/exploratory-data-analysis-on-company-datasets-c331beaa28d0" rel="noopener">“使用Python对700万家公司进行探索性数据分析”</a></p><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj oc"><img src="../Images/ae49520b5f38cbfc1cea5cd265d3d1ac.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jVTXL_NnlUbrz9PObZXVMA.png"/></div></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">本地驱动器上数据文件的屏幕截图。图片由作者提供。</p></figure><p id="2e64" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">该文件大小为1.1 GB，有700多万行和11列。由于700多万行，它扼杀了Excel。<a class="ae kz" href="https://www.alteryx.com/" rel="noopener ugc nofollow" target="_blank"> Alteryx </a>整个吞下。<a class="ae kz" href="https://support.microsoft.com/en-us/office/about-power-query-in-excel-7104fbee-9e62-4cb9-a02e-5bfb1a6c536a" rel="noopener ugc nofollow" target="_blank"> PowerBi和PowerQuery </a>可以处理这个文件，但是我必须做摘要视图来将它们加载到Excel中。</p><p id="b570" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">在下载和使用数据集之前，最好检查许可，并确定所有权和权限。根据<a class="ae kz" href="https://pdl.ai/3PhCOLo" rel="noopener ugc nofollow" target="_blank">知识共享CC0.01 </a>获得许可的700多万公司数据集。<strong class="lc iv"> <em class="od">“你可以复制、修改、分发和执行作品，即使是出于商业目的，都无需征得许可。”</em>T15】</strong></p><p id="6af9" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">也有特定于发布者的规则，例如关于数据科学的<a class="ae kz" rel="noopener" target="_blank" href="/questions-96667b06af5#de82">。因此，请小心选择数据集和来源，将许可证与出版商条款&amp;条件相匹配。</a></p></div><div class="ab cl lw lx hy ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="in io ip iq ir"><h2 id="3bcb" class="nq me iu bd mf nr ns dn mj nt nu dp mn lj nv nw mp ln nx ny mr lr nz oa mt ob bi translated">GPU设置</h2><p id="0616" class="pw-post-body-paragraph la lb iu lc b ld mv jv lf lg mw jy li lj mx ll lm ln my lp lq lr mz lt lu lv in bi translated">通常，调用Nvidia-smi是我检查和确定GPU是否可用的第一件事。我们看到，CUDA 11.4可与Nvidia驱动程序470.141.03一起使用。所有这些都与我今年早些时候安装Quadro时所做的设置一致。</p><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj oe"><img src="../Images/0124c1031bfc4a53e405678019af73f4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*yIDsGiY-bWNbk9YiFIVn6Q.png"/></div></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">作者展示Nvidia-smi命令输出的图片。</p></figure><p id="1ee2" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">您可能会注意到，GPU上已经有一些工作负载，这只会导致问题。几乎1GB的卡RAM <strong class="lc iv"> <em class="od">已经被分配。</em> </strong>因此，我们必须将视觉显示工作负载转移到英特尔板载GPU上。重新配置Xorg屏幕设置使得NVIDIA GPU可以自由地专用于数据工作！我很喜欢在4K看网飞！T25】</p><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj of"><img src="../Images/caad0c6cdb3f49413facba2faa027d59.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-r-lN2kgpCb29sS_Bz0tmw.png"/></div></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">将视觉显示移到英特尔CPU/GPU后，NVIDIA卡的可用性更高。作者图片</p></figure><p id="5f6c" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">接下来，我们需要安装<a class="ae kz" href="https://rapids.ai/" rel="noopener ugc nofollow" target="_blank">急流</a></p><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj og"><img src="../Images/bb2ba18d93738e677eff06224394396f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*NEs1Ni98uS-YBYER_oRYhg.png"/></div></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">从<a class="ae kz" href="https://rapids.ai/start.html" rel="noopener ugc nofollow" target="_blank">https://rapids.ai/start.html</a></p></figure><p id="351a" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">复制命令并粘贴到终端。让conda负责一切，但只是根据您的系统做出正确的选择，以避免冲突和问题。最后，激活环境(rapids-22.08)，启动jupyter并做一个快速测试。</p><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj oh"><img src="../Images/ebf66152e463d0c964fd9b0f843126c0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*HLMNcNxkPTcW5GGmaPNnvg.png"/></div></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">Jupyter笔记本加载cudf成功的截图。作者图片</p></figure><p id="c1b5" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">好了，我们了解了我们的硬件，并配置了我们的软件；现在是时候来点EDA了。<strong class="lc iv">感谢</strong>感谢<strong class="lc iv">激流队，</strong>我没有复杂的依赖挑战。</p></div><div class="ab cl lw lx hy ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="in io ip iq ir"><h1 id="3d23" class="md me iu bd mf mg mh mi mj mk ml mm mn ka mo kb mp kd mq ke mr kg ms kh mt mu bi translated">我们就偷懒吧，把文件扔在卡上。</h1><p id="c038" class="pw-post-body-paragraph la lb iu lc b ld mv jv lf lg mw jy li lj mx ll lm ln my lp lq lr mz lt lu lv in bi translated">因为Rapids安装在一个环境中，所以您必须首先激活该环境。我使用了Anaconda Navigator，只是从可用的环境中进行选择。我使用的是<strong class="lc iv"> rapids-22.08 </strong>，这个环境是由RAPIDS conda install命令创建的——见前面。</p><p id="7e2e" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">我对这种快速而肮脏的方法感到惊讶。<strong class="lc iv">成功了！</strong></p><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj oi"><img src="../Images/d49c95c5e9434a11b7d6ffacb3855f6e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*Hv_QNXcRPbQZK0Av"/></div></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">照片由<a class="ae kz" href="https://unsplash.com/@pattib?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">帕蒂·布莱克</a>在<a class="ae kz" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</p></figure><p id="3441" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">让我们分几个块来看一下代码</p><h2 id="1d16" class="nq me iu bd mf nr ns dn mj nt nu dp mn lj nv nw mp ln nx ny mr lr nz oa mt ob bi translated">加载模块</h2><p id="d595" class="pw-post-body-paragraph la lb iu lc b ld mv jv lf lg mw jy li lj mx ll lm ln my lp lq lr mz lt lu lv in bi translated">导入常规嫌疑人和CUDF。因为我不确定我能走多远，所以我同时使用cudf(cu)和pandas(pd)。</p><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj oj"><img src="../Images/eb2b048d94fa894ce6afc30c8bd233ee.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*R_8z_J4TVVKQPZQZsI4t-g.png"/></div></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">朱庇特笔记本——作者截图</p></figure><h2 id="9e1f" class="nq me iu bd mf nr ns dn mj nt nu dp mn lj nv nw mp ln nx ny mr lr nz oa mt ob bi translated">构建基于GPU的数据框</h2><p id="5a54" class="pw-post-body-paragraph la lb iu lc b ld mv jv lf lg mw jy li lj mx ll lm ln my lp lq lr mz lt lu lv in bi translated">请注意。read_csv()方法，它看起来类似于pandas方法，但是我们需要深入了解不同之处。现在，我只想感受一下它的表现，如果有的话！</p><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj ok"><img src="../Images/ad12f99cee3210a9005e43a51b131918.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Tia9KVnv3oOQVdkI3dQWYw.png"/></div></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">作者截图</p></figure><h2 id="5e59" class="nq me iu bd mf nr ns dn mj nt nu dp mn lj nv nw mp ln nx ny mr lr nz oa mt ob bi translated">使用传统的RAM和CPU计算方法</h2><p id="6ee2" class="pw-post-body-paragraph la lb iu lc b ld mv jv lf lg mw jy li lj mx ll lm ln my lp lq lr mz lt lu lv in bi translated">可能还要做一个cudf。DataFrame.from_pandas！</p><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj ol"><img src="../Images/7b0b381fa3eac58ae61b62155e3e8e88.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_Oep_PUZkcSKnlYrlmwPOg.png"/></div></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">作者截图</p></figure><h1 id="2b79" class="md me iu bd mf mg om mi mj mk on mm mn ka oo kb mp kd op ke mr kg oq kh mt mu bi translated">结果</h1><p id="8f14" class="pw-post-body-paragraph la lb iu lc b ld mv jv lf lg mw jy li lj mx ll lm ln my lp lq lr mz lt lu lv in bi translated">令人惊讶的是，这种方法开箱即用。之前我做了很多'<strong class="lc iv"> SUDOing </strong>'和其他<strong class="lc iv">痛苦的依赖</strong>问题的解决。</p><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj or"><img src="../Images/8a1e2d5fb0804e56d967e740f3f308cd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*W-E9h-cG7wGqv_bGfT_lHw.png"/></div></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">作者截图</p></figure><p id="50ef" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">我仍然很惊讶这样一种懒惰的方法起作用了——只需要大约2秒钟就可以读取那个大文本文件并将其传输到GPU。印象深刻！该文件在磁盘上有1.1GB。注意内存的使用——它是1.3+ GB，嗯！Alteryx在Mac Mini M1的Windows 11上通过Parallels报告了6.4秒。几分钟后，Power Query仍在后台运行查询。</p><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj os"><img src="../Images/cba86468bb60401932eabec4e6779ecd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FKLLduvzQPe3fhpCLwVuOQ.png"/></div></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">作者截图。</p></figure><p id="ad39" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">不出所料，装载熊猫总是开箱即用。读取、创建数据结构和将数据帧加载到RAM中需要16秒。几乎慢了8倍。但是看看内存占用大小-&gt; 602.0+ MB对1.3+ GB。从视觉上看，两个设备上的数据帧具有相同的列和数据类型。</p><p id="1892" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">再次使用NVIDIA-smi</p><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj ot"><img src="../Images/b2a44b5ecc77b878f381a3953ff5c255.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*slFZP9q6LbRuDZRoRhqeeQ.png"/></div></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">作者使用Nvidia-smi命令输出的截图</p></figure><p id="fc79" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">事实上，GPU将python报告为分配了1605兆字节存储的用户。这令人印象深刻。</p></div><div class="ab cl lw lx hy ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="in io ip iq ir"><h2 id="7db6" class="nq me iu bd mf nr ns dn mj nt nu dp mn lj nv nw mp ln nx ny mr lr nz oa mt ob bi translated">清洁</h2><p id="b4d7" class="pw-post-body-paragraph la lb iu lc b ld mv jv lf lg mw jy li lj mx ll lm ln my lp lq lr mz lt lu lv in bi translated">所以我们知道可以把大文件加载到GPU，但是清理呢？尤其是丢失的值，计算代价会很高。</p><pre class="kk kl km kn gu ou ov ow ox aw oy bi"><span id="f436" class="nq me iu ov b gz oz pa l pb pc">if(df.isnull().values.any()):<br/>    missing = df.isnull().sum()<br/>    print(missing)<br/>    print(" ")<br/>    for col in df.columns:<br/>        print (col, "-\t", df[col].nunique())</span><span id="adde" class="nq me iu ov b gz pd pa l pb pc">df.dropna(axis=0,inplace=True)</span><span id="9f47" class="nq me iu ov b gz pd pa l pb pc">df.notnull().sum()</span></pre><p id="0840" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">打印缺失值汇总的基本代码，显示每列中唯一条目的数量，删除列中缺失值的所有行，然后转储所有非缺失值的汇总。</p><p id="6032" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">这种代码在GPU上速度快如闪电，但在传统的CPU/RAM方法上速度很慢。</p><pre class="kk kl km kn gu ou ov ow ox aw oy bi"><span id="d97c" class="nq me iu ov b gz oz pa l pb pc">Summarize missing: CPU/RAM: That took : <strong class="ov iv">0:00:30.536083</strong> <br/>with GPU taking <strong class="ov iv">0:00:01.035225</strong></span></pre><p id="1a6d" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">在传统配置上需要30秒，而在GPU上几乎不需要。Aggregation和groupby也极快，语法和熊猫一样。</p><pre class="kk kl km kn gu ou ov ow ox aw oy bi"><span id="84c6" class="nq me iu ov b gz oz pa l pb pc">df.groupby('size range').agg({'year founded': ['min', 'max', 'count'], 'country': lambda x: x.nunique(), 'current employee estimate': 'median'})</span></pre><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj pe"><img src="../Images/0cd659e13a2679c9d959d55854690410.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*u6jOGrWq87uNFdjoVVk4rw.png"/></div></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">图片由作者在练习中从Jupyter笔记本中获得</p></figure><pre class="kk kl km kn gu ou ov ow ox aw oy bi"><span id="d2c3" class="nq me iu ov b gz oz pa l pb pc">df = df[df['year founded'] &lt; 2023].copy()<br/>pddf = pddf[pddf['year founded'] &lt; 2023].copy()</span></pre><p id="a6bc" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">子设置和复制数据帧在这两种方法中的行为也是相同的。酷！</p><h2 id="e253" class="nq me iu bd mf nr ns dn mj nt nu dp mn lj nv nw mp ln nx ny mr lr nz oa mt ob bi translated">形象化</h2><p id="0305" class="pw-post-body-paragraph la lb iu lc b ld mv jv lf lg mw jy li lj mx ll lm ln my lp lq lr mz lt lu lv in bi translated">好吧，清理一个数据帧在GPU上效果更好，但是一些图形呢？</p><p id="3696" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">好吧，这就是你可能已经在等待的东西！消息是CUDF不像Pandas那样包装matplotlib。因此，我们不能直接在GPU数据框架外绘图。相反，我们必须将数据从GPU卡复制到主板RAM中。</p><pre class="kk kl km kn gu ou ov ow ox aw oy bi"><span id="45f6" class="nq me iu ov b gz oz pa l pb pc">df.to_pandas().plot()</span></pre><p id="1867" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">自然，这就是我们停下来的地方。毕竟，我无法在GPU上完成整个EDA练习。我可以很快地准备一个数据框架，而且几乎没有痛苦，速度也很快！</p><h1 id="6fb6" class="md me iu bd mf mg om mi mj mk on mm mn ka oo kb mp kd op ke mr kg oq kh mt mu bi translated">警告</h1><p id="4d20" class="pw-post-body-paragraph la lb iu lc b ld mv jv lf lg mw jy li lj mx ll lm ln my lp lq lr mz lt lu lv in bi translated">GPU设备的行为不同于传统方法。像%%timeit%%这样的项目会导致GPU出现内存错误。</p><pre class="kk kl km kn gu ou ov ow ox aw oy bi"><span id="6043" class="nq me iu ov b gz oz pa l pb pc">del pddf<br/>del df</span></pre><p id="7bdc" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">从GPU中删除数据帧会释放设备上的分配，并允许加载更多数据帧。您必须注意释放分配，否则设备会抱怨。</p><h2 id="6083" class="nq me iu bd mf nr ns dn mj nt nu dp mn lj nv nw mp ln nx ny mr lr nz oa mt ob bi translated">贮藏室ˌ仓库</h2><p id="3041" class="pw-post-body-paragraph la lb iu lc b ld mv jv lf lg mw jy li lj mx ll lm ln my lp lq lr mz lt lu lv in bi translated">我把我的代码加载到GitHub，你可以在下面的链接找到这个笔记本。</p><div class="pf pg gq gs ph pi"><a href="https://github.com/CognitiveDave/ReadingList/blob/main/cudf.ipynb" rel="noopener  ugc nofollow" target="_blank"><div class="pj ab fp"><div class="pk ab pl cl cj pm"><h2 class="bd iv gz z fq pn fs ft po fv fx it bi translated">主认知区的reading list/cudf . ipynb Dave/reading list</h2><div class="pp l"><h3 class="bd b gz z fq pn fs ft po fv fx dk translated">如何自动清理阅读列表？通过创建一个……</h3></div><div class="pq l"><p class="bd b dl z fq pn fs ft po fv fx dk translated">github.com</p></div></div><div class="pr l"><div class="ps l pt pu pv pr pw kt pi"/></div></div></a></div><p id="ddc1" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">为什么不加入medium？50美元的投资在12个月内是不错的回报</p><div class="pf pg gq gs ph pi"><a href="https://cognitivedave.medium.com/membership" rel="noopener follow" target="_blank"><div class="pj ab fp"><div class="pk ab pl cl cj pm"><h2 class="bd iv gz z fq pn fs ft po fv fx it bi translated">通过我的推荐链接-大卫·摩尔加入媒体</h2><div class="pp l"><h3 class="bd b gz z fq pn fs ft po fv fx dk translated">阅读大卫·摩尔的每一个故事(以及媒体上成千上万的其他作家)。您的会员费直接支持…</h3></div><div class="pq l"><p class="bd b dl z fq pn fs ft po fv fx dk translated">cognitivedave.medium.com</p></div></div><div class="pr l"><div class="px l pt pu pv pr pw kt pi"/></div></div></a></div><h1 id="b781" class="md me iu bd mf mg om mi mj mk on mm mn ka oo kb mp kd op ke mr kg oq kh mt mu bi translated">参考文献/引文</h1><p id="9c84" class="pw-post-body-paragraph la lb iu lc b ld mv jv lf lg mw jy li lj mx ll lm ln my lp lq lr mz lt lu lv in bi translated">[1]700多万公司数据集根据<a class="ae kz" href="https://pdl.ai/3PhCOLo" rel="noopener ugc nofollow" target="_blank">知识共享CC0.01 </a>获得许可。你可以直接从人民数据实验室索取一份<a class="ae kz" href="https://www.peopledatalabs.com/company-dataset?utm_campaign=Company%20Dataset&amp;utm_source=Medium%20&amp;utm_medium=Social%20&amp;utm_term=company-dataset" rel="noopener ugc nofollow" target="_blank">的拷贝，并在这里阅读更多关于他们</a><a class="ae kz" href="https://medium.com/@peopledatalabs/2019-global-company-dataset-8acca1f1caf0" rel="noopener">的内容。</a>这里的数据用于加载到GPU上，并用于创建战术总结。</p></div></div>    
</body>
</html>