<html>
<head>
<title>Speech-to-Text with OpenAI’s Whisper</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用OpenAI的耳语进行语音转文本</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/speech-to-text-with-openais-whisper-53d5cea9005e#2022-10-01">https://towardsdatascience.com/speech-to-text-with-openais-whisper-53d5cea9005e#2022-10-01</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="0804" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">轻松语音转文本</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ki"><img src="../Images/8c073ef697479fa658a33f4b4b4468b0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1280/format:webp/1*-vUP_CG3MR61OsrrSl-4LA.png"/></div><p class="kq kr gj gh gi ks kt bd b be z dk translated">纪尧姆·德·日耳曼在<a class="ae ku" href="https://unsplash.com/s/photos/speech-recognition?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</p></figure><p id="160b" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">OpenAI最近发布了一个新的语音识别模型，名为Whisper。与DALLE-2和GPT-3不同，Whisper是一个免费的开源模型。</p><p id="bb38" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">Whisper是一个自动语音识别模型，根据从网络上收集的680，000小时多语言数据进行训练。按照OpenAI的说法，这种模型对口音、背景噪音和技术语言具有鲁棒性。此外，它支持99种不同语言的转录和翻译。</p><p id="0a15" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">本文解释了如何使用Whisper模型和Python将语音转换成文本。并且，它不会涵盖模型如何工作或者模型架构。你可以在这里查看更多关于密语<a class="ae ku" href="https://openai.com/blog/whisper/" rel="noopener ugc nofollow" target="_blank">的信息。</a></p><p id="d65d" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">Whisper有五款(参考下表)。下面是OpenAI的GitHub页面上的表格。根据OpenAI的说法，纯英文应用程序有四种模式，表示为<code class="fe lr ls lt lu b">.en</code>。<code class="fe lr ls lt lu b">tiny.en</code>和<code class="fe lr ls lt lu b">base.en</code>车型表现更好，但是<code class="fe lr ls lt lu b">small.en</code>和<code class="fe lr ls lt lu b">medium.en</code>车型的差异会变得不那么显著。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="lw lx di ly bf lz"><div class="gh gi lv"><img src="../Images/4fd2e0d1185d4f7e58cf344a5f2ca1e7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_xEqgvZDExxNMaeojLQlDg.png"/></div></div><p class="kq kr gj gh gi ks kt bd b be z dk translated">Ref: <a class="ae ku" href="https://github.com/openai/whisper" rel="noopener ugc nofollow" target="_blank"> OpenAI的GitHHub页面</a></p></figure></div><div class="ab cl ma mb hx mc" role="separator"><span class="md bw bk me mf mg"/><span class="md bw bk me mf mg"/><span class="md bw bk me mf"/></div><div class="im in io ip iq"><p id="b3f5" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">对于本文，我将Youtube视频转换为音频，并将音频传递到whisper模型，以将其转换为文本。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="lw lx di ly bf lz"><div class="gh gi mh"><img src="../Images/79a415358b757a03c0334ffd7f5d07f3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Ca7yMhk4qGopKBspxUahEA.png"/></div></div><p class="kq kr gj gh gi ks kt bd b be z dk translated">作者图片</p></figure><p id="1bd4" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">我用Google Colab和GPU来执行下面的代码。</p><h2 id="a204" class="mi mj it bd mk ml mm dn mn mo mp dp mq le mr ms mt li mu mv mw lm mx my mz na bi translated">导入Pytube库</h2><pre class="kj kk kl km gt nb lu nc nd aw ne bi"><span id="701a" class="mi mj it lu b gy nf ng l nh ni">!pip install -— upgrade pytube</span></pre><p id="fbe7" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">阅读YouTube视频并下载为MP4文件进行转录<br/>在第一个例子中，我正在按照下面的Youtube视频阅读著名的拍摄电影对话</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nj nk l"/></div></figure><pre class="kj kk kl km gt nb lu nc nd aw ne bi"><span id="fa94" class="mi mj it lu b gy nf ng l nh ni"><strong class="lu iu">#Importing Pytube library</strong></span><span id="3f44" class="mi mj it lu b gy nl ng l nh ni">import pytube</span><span id="f3da" class="mi mj it lu b gy nl ng l nh ni"><strong class="lu iu"># Reading the above Taken movie Youtube link</strong></span><span id="6d11" class="mi mj it lu b gy nl ng l nh ni">video = ‘https://www.youtube.com/watch?v=-LIIf7E-qFI'</span><span id="eed8" class="mi mj it lu b gy nl ng l nh ni">data = pytube.YouTube(video)</span><span id="41b9" class="mi mj it lu b gy nl ng l nh ni"><strong class="lu iu"># Converting and downloading as 'MP4' file</strong></span><span id="2355" class="mi mj it lu b gy nl ng l nh ni">audio = data.streams.get_audio_only()</span><span id="e616" class="mi mj it lu b gy nl ng l nh ni">audio.download()</span></pre><h2 id="809d" class="mi mj it bd mk ml mm dn mn mo mp dp mq le mr ms mt li mu mv mw lm mx my mz na bi translated">输出</h2><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="lw lx di ly bf lz"><div class="gh gi nm"><img src="../Images/a59c78d7c241d613ca37f5f038b7bc73.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1Rpz4qBe9zIc6ReLOXPl1w.png"/></div></div></figure><p id="41ab" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">上面的YouTube链接已经下载为“MP4”文件，并存储在content下。现在，下一步是将音频转换成文本。我们可以使用whisper用三行代码来实现。</p></div><div class="ab cl ma mb hx mc" role="separator"><span class="md bw bk me mf mg"/><span class="md bw bk me mf mg"/><span class="md bw bk me mf"/></div><div class="im in io ip iq"><h2 id="d20d" class="mi mj it bd mk ml mm dn mn mo mp dp mq le mr ms mt li mu mv mw lm mx my mz na bi translated">导入Whisper库</h2><pre class="kj kk kl km gt nb lu nc nd aw ne bi"><span id="cbe9" class="mi mj it lu b gy nf ng l nh ni"># Installing Whisper libary</span><span id="6868" class="mi mj it lu b gy nl ng l nh ni">!pip install git+https://github.com/openai/whisper.git -q</span><span id="5f32" class="mi mj it lu b gy nl ng l nh ni">import whisper</span></pre><h2 id="cfcc" class="mi mj it bd mk ml mm dn mn mo mp dp mq le mr ms mt li mu mv mw lm mx my mz na bi translated">装载模型</h2><p id="e542" class="pw-post-body-paragraph kv kw it kx b ky nn ju la lb no jx ld le np lg lh li nq lk ll lm nr lo lp lq im bi translated">我在这里使用了<code class="fe lr ls lt lu b">medium</code>多语言模型，并传递了上面的音频文件<code class="fe lr ls lt lu b">I will find YouI will Kill You Taken Movie best scene ever liam neeson.mp4</code>并存储为一个文本对象</p><pre class="kj kk kl km gt nb lu nc nd aw ne bi"><span id="7ba4" class="mi mj it lu b gy nf ng l nh ni">model = whisper.load_model(“large”)</span><span id="8cad" class="mi mj it lu b gy nl ng l nh ni">text = model1.transcribe(“I will find YouI will Kill You Taken Movie best scene ever liam neeson.mp4”)</span><span id="f9a0" class="mi mj it lu b gy nl ng l nh ni"><strong class="lu iu">#printing the transcribe</strong></span><span id="3a69" class="mi mj it lu b gy nl ng l nh ni">text['text']</span></pre><h2 id="f628" class="mi mj it bd mk ml mm dn mn mo mp dp mq le mr ms mt li mu mv mw lm mx my mz na bi translated">输出</h2><p id="779b" class="pw-post-body-paragraph kv kw it kx b ky nn ju la lb no jx ld le np lg lh li nq lk ll lm nr lo lp lq im bi translated">以下是音频中的文字。和音频完全吻合。</p><pre class="kj kk kl km gt nb lu nc nd aw ne bi"><span id="e537" class="mi mj it lu b gy nf ng l nh ni">I don’t know who you are. I don’t know what you want. If you are looking for ransom, I can tell you I don’t have money. But what I do have are a very particular set of skills. Skills I have acquired over a very long career. Skills that make me a nightmare for people like you. If you let my daughter go now, that will be the end of it. I will not look for you. I will not pursue you. But if you don’t, I will look for you. I will find you. And I will kill you. Good luck.</span></pre></div><div class="ab cl ma mb hx mc" role="separator"><span class="md bw bk me mf mg"/><span class="md bw bk me mf mg"/><span class="md bw bk me mf"/></div><div class="im in io ip iq"><h1 id="010b" class="ns mj it bd mk nt nu nv mn nw nx ny mq jz nz ka mt kc oa kd mw kf ob kg mz oc bi translated">如何转换不同的音频语言？</h1><p id="6938" class="pw-post-body-paragraph kv kw it kx b ky nn ju la lb no jx ld le np lg lh li nq lk ll lm nr lo lp lq im bi translated">我们知道，Whisper支持99种语言；我正在尝试使用印度语言，并把下面的电影剪辑视频转换成文本。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nj nk l"/></div></figure><p id="8629" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">在这个例子中，我使用了<code class="fe lr ls lt lu b">large</code>模型</p><pre class="kj kk kl km gt nb lu nc nd aw ne bi"><span id="f51a" class="mi mj it lu b gy nf ng l nh ni">#Importing Pytube library</span><span id="d8df" class="mi mj it lu b gy nl ng l nh ni">import pytube</span><span id="9245" class="mi mj it lu b gy nl ng l nh ni"># Reading the above tamil movie clip from Youtube link</span><span id="5b38" class="mi mj it lu b gy nl ng l nh ni">video = ‘https://www.youtube.com/watch?v=H1HPYH2uMfQ'</span><span id="eeaf" class="mi mj it lu b gy nl ng l nh ni">data = pytube.YouTube(video)</span><span id="47a8" class="mi mj it lu b gy nl ng l nh ni"># Converting and downloading as ‘MP4’ file</span><span id="91f3" class="mi mj it lu b gy nl ng l nh ni">audio = data.streams.get_audio_only()</span><span id="fec7" class="mi mj it lu b gy nl ng l nh ni">audio.download()</span></pre><h2 id="c76c" class="mi mj it bd mk ml mm dn mn mo mp dp mq le mr ms mt li mu mv mw lm mx my mz na bi translated"><strong class="ak">输出</strong></h2><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="lw lx di ly bf lz"><div class="gh gi od"><img src="../Images/b32f9615739f7f607dddcbba7600e03a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*BLxIV3WG9O27w5VnYvTFIA.png"/></div></div></figure></div><div class="ab cl ma mb hx mc" role="separator"><span class="md bw bk me mf mg"/><span class="md bw bk me mf mg"/><span class="md bw bk me mf"/></div><div class="im in io ip iq"><h2 id="2c06" class="mi mj it bd mk ml mm dn mn mo mp dp mq le mr ms mt li mu mv mw lm mx my mz na bi translated">加载大型模型</h2><pre class="kj kk kl km gt nb lu nc nd aw ne bi"><span id="9ae0" class="mi mj it lu b gy nf ng l nh ni"><strong class="lu iu">#Loading large model</strong><br/>model = whisper.load_model(“large”)</span><span id="0212" class="mi mj it lu b gy nl ng l nh ni">text = model1.transcribe(“Petta mass dialogue with WhatsApp status 30 Seconds.mp4”)</span><span id="87e2" class="mi mj it lu b gy nl ng l nh ni"><strong class="lu iu">#printing the transcribe</strong></span><span id="65cc" class="mi mj it lu b gy nl ng l nh ni">text['text']</span></pre><h2 id="7014" class="mi mj it bd mk ml mm dn mn mo mp dp mq le mr ms mt li mu mv mw lm mx my mz na bi translated">输出</h2><p id="2c03" class="pw-post-body-paragraph kv kw it kx b ky nn ju la lb no jx ld le np lg lh li nq lk ll lm nr lo lp lq im bi translated">模型转换成文本以上泰米尔语音频剪辑。模型很好地转录了音频；然而，我可以看到语言中的一些小变化。</p><pre class="kj kk kl km gt nb lu nc nd aw ne bi"><span id="beac" class="mi mj it lu b gy nf ng l nh ni">சிறப்பான தரமான சம்பவங்களை இனிமேல் தான் பார்க்கப் போகிறேன். ஏய்.. ஏய்.. ஏய்.. சத்தியமா சொல்கிறேன். அடிச்சி அண்டு வேண்டும் என்று ஓழ்வு விட்டுடுவேன். மானம் போலம் திருப்பி வராது பார்த்துவிடு. ஏய்.. யாருக்காவது பொண்டாட்டி குழந்தைக் குட்டியன் சென்றும் குட்டும் என்று செய்துவிட்டு இருந்தால் அப்டியே ஓடி போய்டு.</span></pre><p id="ea72" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">主要试了中大型。它是稳健的，并准确转录音频。还有，我用带GPU的Azure Synapse笔记本转录了一段最长10分钟的音频，效果非常好。</p><p id="b911" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">这是完全开源和免费的；我们可以在您的项目中直接使用它进行语音识别应用。我们也可以把其他语言翻译成英语。我将在我的下一篇文章中用长音频和不同语言的英语来介绍它。</p><p id="d089" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">可以多查一下Whisper的型号；请访问Whisper的G <a class="ae ku" href="https://github.com/openai/whisper" rel="noopener ugc nofollow" target="_blank"> ithub页面</a>。</p><p id="2fc1" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">感谢阅读。继续学习，并期待更多！</p></div><div class="ab cl ma mb hx mc" role="separator"><span class="md bw bk me mf mg"/><span class="md bw bk me mf mg"/><span class="md bw bk me mf"/></div><div class="im in io ip iq"><h2 id="9906" class="mi mj it bd mk ml mm dn mn mo mp dp mq le mr ms mt li mu mv mw lm mx my mz na bi translated">参考</h2><ol class=""><li id="d5b1" class="oe of it kx b ky nn lb no le og li oh lm oi lq oj ok ol om bi translated"><a class="ae ku" href="https://github.com/openai/whisper" rel="noopener ugc nofollow" target="_blank">https://github.com/openai/whisper</a></li><li id="7caa" class="oe of it kx b ky on lb oo le op li oq lm or lq oj ok ol om bi translated"><a class="ae ku" href="https://openai.com/blog/whisper/" rel="noopener ugc nofollow" target="_blank">https://openai.com/blog/whisper/</a></li></ol></div></div>    
</body>
</html>