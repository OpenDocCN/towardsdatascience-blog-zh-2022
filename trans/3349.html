<html>
<head>
<title>Customer Segmentation with Python (Implementing STP framework - part 1/5)</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用Python进行客户细分(实现STP框架——第1/5部分)</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/customer-segmentation-with-python-implementing-stp-framework-part-1-5c2d93066f82#2022-07-26">https://towardsdatascience.com/customer-segmentation-with-python-implementing-stp-framework-part-1-5c2d93066f82#2022-07-26</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="3d56" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">使用Python实现层次聚类的分步指南</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/be15a892823bf3dac557a5bc445ae95f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*6vTy_f_VkE2u9GJw"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">艾萨克·史密斯在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure><p id="28da" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我正在开始一个新的博客文章系列，在那里我将向你展示如何用Python一步一步地应用流行的STP营销框架。STP(细分、目标、定位)是现代营销中一种众所周知的战略方法，可以帮助您了解您的客户群(细分)，并更有效地将您的产品投放到目标受众中。这是一种从以产品为中心过渡到以客户为中心的方法。STP框架允许品牌制定更有效的营销策略，高度关注目标受众的需求。</p><p id="3664" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在这个博客系列中，我将描述如何通过细分更好地了解你的客户，我们将看到不同的方法，然后我们将看到如何定位自己，以便更好地为客户服务。</p><p id="c143" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这第一篇文章将着重于理解和预处理数据集，并以一种简单的方式对我们的客户进行细分。<br/>在接下来的帖子中，我们将应用一种更复杂的分割方式。</p><p id="9bc9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">整个笔记本和参考数据都可以在<a class="ae ky" href="https://deepnote.com/workspace/asish-biswas-a599-b6cca607-3c12-4ae6-b54d-32861e7e9438/project/Analytic-School-8e6c85bd-e8c9-4387-ba40-0b94fb791066/%2Fnotebooks%2Fcustomer_segmentation.ipynb" rel="noopener ugc nofollow" target="_blank"> Deepnote笔记本</a>中找到。</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="6436" class="ma mb it lw b gy mc md l me mf"><strong class="lw iu">Table of contents</strong></span><span id="0f8f" class="ma mb it lw b gy mg md l me mf">  ∘ <a class="ae ky" href="#ebab" rel="noopener ugc nofollow">STP Framework</a><br/>  ∘ <a class="ae ky" href="#43f8" rel="noopener ugc nofollow">Environment Setup</a><br/>  ∘ <a class="ae ky" href="#c243" rel="noopener ugc nofollow">Data Exploration</a><br/>  ∘ <a class="ae ky" href="#c124" rel="noopener ugc nofollow">Data Preprocessing</a><br/>  ∘ <a class="ae ky" href="#7b10" rel="noopener ugc nofollow">Hierarchical Clustering</a><br/>  ∘ <a class="ae ky" href="#a70d" rel="noopener ugc nofollow">Conclusion</a></span></pre><h2 id="ebab" class="ma mb it bd mh mi mj dn mk ml mm dp mn li mo mp mq lm mr ms mt lq mu mv mw mx bi translated">STP(细分、目标、定位)框架</h2><p id="b861" class="pw-post-body-paragraph kz la it lb b lc my ju le lf mz jx lh li na lk ll lm nb lo lp lq nc ls lt lu im bi translated"><strong class="lb iu"> <em class="nd">细分</em> </strong>帮助您根据潜在或现有客户的人口统计、地理、心理和行为特征，将他们划分为不同的群体。每个群体的顾客都有相似的购买行为，并可能在不同的营销活动中采取相似的行动。像“一刀切”的一般营销活动并不是最好的营销策略。</p><p id="99a1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu"><em class="nd"/></strong>:一旦你了解了你的客户群，下一步就是选择一部分要关注的客户群。很难制造出让每个人都满意的产品。这就是为什么最好专注于最重要的客户群，让他们开心。以后你总是可以扩大你的关注范围，瞄准更多的顾客。</p><p id="845e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">选择目标市场时，最重要的考虑因素是:</p><ul class=""><li id="ace2" class="ne nf it lb b lc ld lf lg li ng lm nh lq ni lu nj nk nl nm bi translated">分段的大小</li><li id="ea54" class="ne nf it lb b lc nn lf no li np lm nq lq nr lu nj nk nl nm bi translated">增长潜力</li><li id="d3bf" class="ne nf it lb b lc nn lf no li np lm nq lq nr lu nj nk nl nm bi translated">竞争对手的目标市场和产品</li></ul><p id="78cf" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">目标活动利用定性检查，属于广告领域。这就是为什么我们不会在这个博客系列中关注目标阶段。</p><p id="b73a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu"> <em class="nd">定位</em> </strong>:在这一步，你把前两步考虑到的不同属性绘制出来，然后定位你的产品。这有助于您确定您想要提供的产品和服务最能满足客户的需求。定位还指导您如何以及通过什么渠道向客户展示这些产品。在这个过程中还使用了另一个框架，叫做<strong class="lb iu">营销组合</strong>。当我们到达那个模块时，我将简要描述营销组合。</p><h2 id="43f8" class="ma mb it bd mh mi mj dn mk ml mm dp mn li mo mp mq lm mr ms mt lq mu mv mw mx bi translated">环境设置</h2><p id="e62c" class="pw-post-body-paragraph kz la it lb b lc my ju le lf mz jx lh li na lk ll lm nb lo lp lq nc ls lt lu im bi translated">在这整个系列教程中，我将使用<a class="ae ky" href="https://deepnote.com/" rel="noopener ugc nofollow" target="_blank"> Deepnote </a>作为唯一的开发工具。Deepnote是一个令人敬畏的基于web的类似Jupiter的笔记本环境，它支持多用户开发生态系统。默认情况下，Deepnote安装了最新的Python和著名的数据科学库。如果需要，通过“requirements.txt”或常规的bash命令安装其他库也非常容易。</p><p id="d639" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">以后我会单独写一篇关于如何更有效地使用<a class="ae ky" href="https://deepnote.com/" rel="noopener ugc nofollow" target="_blank"> Deepnote </a>的帖子。</p><h2 id="c243" class="ma mb it bd mh mi mj dn mk ml mm dp mn li mo mp mq lm mr ms mt lq mu mv mw mx bi translated">数据探索:了解数据集</h2><p id="61f2" class="pw-post-body-paragraph kz la it lb b lc my ju le lf mz jx lh li na lk ll lm nb lo lp lq nc ls lt lu im bi translated">我们将使用一个预处理过的快速消费品(FMCG)数据集，它包含2000个人的客户详细信息以及他们的购买活动。</p><p id="64eb" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">用Excel查看数据集是一个很好的做法，因为在Excel中滚动和浏览数据集更容易(只要数据集不是超级大)。谢天谢地，Deepnote为CSV数据集提供了更好的浏览体验。它每列显示一个分布图，让你对每个变量一目了然。</p><p id="d2ad" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们使用Pandas库将客户数据集加载到笔记本中。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ns nt l"/></div></figure><p id="2a3c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们可以看到，对于每个客户，我们有一个ID列和七个其他人口统计和地理变量。<br/>以下是每个变量的简短描述:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nu"><img src="../Images/7040f9dfb40edf6d0a6149a4bad41497.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kU1GhMIjmek5tq1Uu61Wcw.png"/></div></div></figure><p id="f1ec" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">将数据集加载到pandas数据框后，我们可以应用“描述”方法来获得数据集的摘要。这显示了我们数据集的一些描述性统计数据。</p><p id="c661" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">对于数值变量，输出包括计数、平均值、标准差、最小值、最大值以及25、50和75个百分点。对于分类变量，输出将包括计数、唯一、顶部和频率。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nv nt l"/></div></figure><p id="40d3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们继续我们的数据探索，看看变量的成对相关性。相关性描述变量之间的线性相关性，其范围从-1到+1。其中+1表示非常强的正相关，而-1表示强的负相关。相关性为0意味着这两个变量不是线性相关的。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nw nt l"/></div></figure><p id="5fd4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">相关矩阵中的对角线值总是1，因为它表示变量与其自身的相关性。不幸的是，仅仅看数字很难对变量之间的关系有一个大致的了解。让我们用Seaborn的热图来绘制这些数字。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nx nt l"/></div></figure><p id="8681" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">从这张热图中，我们可以看到年龄与受教育程度或职业与收入之间有很强的正相关关系。这些变量间的相关性在分割过程的特征选择中将是重要的。</p><p id="d1ce" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">为了理解变量之间的成对关系，我们可以使用散点图。在Deepnote笔记本里，你会找到散点图的例子。</p><h2 id="c124" class="ma mb it bd mh mi mj dn mk ml mm dp mn li mo mp mq lm mr ms mt lq mu mv mw mx bi translated">数据预处理</h2><p id="0671" class="pw-post-body-paragraph kz la it lb b lc my ju le lf mz jx lh li na lk ll lm nb lo lp lq nc ls lt lu im bi translated">即使我们正在处理的客户数据是干净的，我们也没有对数据进行任何统计处理。</p><p id="3478" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在计算单个记录之间的距离时，大多数机器学习算法使用两个数据点之间的欧几里德距离。<br/>当我们的数据集中的要素比例不同时，此计算的执行效果不佳。例如，尽管5千克和5000克的含义相同，但在距离计算中，算法会对高量值特征(5000克)施加很大的权重。<br/>这就是为什么在将数据输入任何机器学习或统计模型之前，我们必须首先将数据标准化，并将所有特征置于相同的数量级。</p><div class="ny nz gp gr oa ob"><a href="https://medium.com/greyatom/why-how-and-when-to-scale-your-features-4b30ab09db5e" rel="noopener follow" target="_blank"><div class="oc ab fo"><div class="od ab oe cl cj of"><h2 class="bd iu gy z fp og fr fs oh fu fw is bi translated">缩放要素的原因、方式和时间</h2><div class="oi l"><h3 class="bd b gy z fp og fr fs oh fu fw dk translated">大多数情况下，您的数据集将包含在量级、单位和范围方面差异很大的要素。学习如何…</h3></div><div class="oj l"><p class="bd b dl z fp og fr fs oh fu fw dk translated">medium.com</p></div></div><div class="ok l"><div class="ol l om on oo ok op ks ob"/></div></div></a></div><p id="6c9c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Scikit-learn在预处理模块下提供了这个方便的类“StandardScaler ”,这使得标准化我们的数据框架变得非常容易。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oq nt l"/></div></figure><h2 id="7b10" class="ma mb it bd mh mi mj dn mk ml mm dp mn li mo mp mq lm mr ms mt lq mu mv mw mx bi translated">分层聚类</h2><p id="4dd3" class="pw-post-body-paragraph kz la it lb b lc my ju le lf mz jx lh li na lk ll lm nb lo lp lq nc ls lt lu im bi translated">我们将使用Scipy的层次模块中的树状图和链接对数据集进行聚类。<br/>树状图是数据点的树状层次表示。它最常用于表示层次聚类。另一方面，链接是帮助我们实现聚类的功能。这里我们需要指定计算两个集群之间距离的方法，完成后，链接函数返回链接矩阵中的分层集群。</p><p id="d2d9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在x轴的底部，我们有观察结果。这些是2000个人客户数据点。在y轴上，我们看到由垂直线表示的点或簇之间的距离。点之间的距离越小，它们在树中的分组位置就越靠下。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="or nt l"/></div></figure><h2 id="e31d" class="ma mb it bd mh mi mj dn mk ml mm dp mn li mo mp mq lm mr ms mt lq mu mv mw mx bi translated">手动确定集群的数量</h2><p id="171d" class="pw-post-body-paragraph kz la it lb b lc my ju le lf mz jx lh li na lk ll lm nb lo lp lq nc ls lt lu im bi translated">链接对象可以为我们计算出最佳的聚类数，并且树状图可以用不同的颜色表示这些聚类，这很棒。但是，如果我们必须从树状图中识别这些集群呢？该过程是穿过没有被任何延伸的水平线截取的最大的垂直线。切片后，切片线下的聚类数将是最佳聚类数。在下图中，我们看到两条候选人垂直线，在它们之间，“候选人2”较高。因此，我们将穿过这条线，这将在下面产生4个集群。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi os"><img src="../Images/b39dcd79a4d6abb819d0f0f3e23958cd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*A46z4RznGauxx5MOve9dTA.png"/></div></div></figure><h2 id="a70d" class="ma mb it bd mh mi mj dn mk ml mm dp mn li mo mp mq lm mr ms mt lq mu mv mw mx bi translated">结论</h2><p id="28c8" class="pw-post-body-paragraph kz la it lb b lc my ju le lf mz jx lh li na lk ll lm nb lo lp lq nc ls lt lu im bi translated">分层聚类实现起来非常简单，它可以返回数据中的最佳聚类数，但不幸的是，由于它的速度很慢，所以在现实生活中并不使用。相反，我们经常使用K-means聚类。在我们的下一篇文章中，我们将看到如何实现K-means聚类，我们将尝试用PCA来优化它。</p></div><div class="ab cl ot ou hx ov" role="separator"><span class="ow bw bk ox oy oz"/><span class="ow bw bk ox oy oz"/><span class="ow bw bk ox oy"/></div><div class="im in io ip iq"><p id="311c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><em class="nd">感谢阅读！如果你喜欢这篇文章一定要给</em> <strong class="lb iu"> <em class="nd">鼓掌(最多50！)</em> </strong> <em class="nd">让我们</em> <strong class="lb iu"> <em class="nd">连接上</em></strong><em class="nd"/><a class="ae ky" href="https://www.linkedin.com/in/asish-biswas/" rel="noopener ugc nofollow" target="_blank"><strong class="lb iu"><em class="nd">LinkedIn</em></strong></a><em class="nd">和</em> <strong class="lb iu"> <em class="nd">在Medium上关注我</em> </strong> <em class="nd">保持更新我的新文章</em></p><p id="1b1c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><em class="nd">通过此</em> <a class="ae ky" href="https://analyticsoul.medium.com/membership" rel="noopener"> <em class="nd">推荐链接</em> </a> <em class="nd">加入Medium，免费支持我。</em></p><div class="ny nz gp gr oa ob"><a href="https://analyticsoul.medium.com/membership" rel="noopener follow" target="_blank"><div class="oc ab fo"><div class="od ab oe cl cj of"><h2 class="bd iu gy z fp og fr fs oh fu fw is bi translated">通过我的推荐链接加入媒体</h2><div class="oi l"><h3 class="bd b gy z fp og fr fs oh fu fw dk translated">阅读阿西什·比斯瓦斯(以及媒体上成千上万的其他作家)的每一个故事。您的会员费直接支持…</h3></div><div class="oj l"><p class="bd b dl z fp og fr fs oh fu fw dk translated">analyticsoul.medium.com</p></div></div><div class="ok l"><div class="pa l om on oo ok op ks ob"/></div></div></a></div></div></div>    
</body>
</html>