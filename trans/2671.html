<html>
<head>
<title>Simulate a Tiny Solar System with Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用Python模拟一个微小的太阳系</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/simulate-a-tiny-solar-system-with-python-fbbb68d8207b#2022-06-09">https://towardsdatascience.com/simulate-a-tiny-solar-system-with-python-fbbb68d8207b#2022-06-09</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="9ead" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">使用Matplotlib中的真实质量、距离和速度数据，模拟一个包含太阳、地球、火星和一颗未知彗星的微型太阳系</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/c879f6219363f580e6c0ef0b9d34e309.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*tW_Gf36DRkR7cDiLnD1oYw.gif"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">有太阳、地球、火星和彗星的太阳系。Andrew Zhu的GIF</p></figure><p id="8ec4" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我对PCA(主成分分析)感到惊讶，并想到用动画来展示机器学习过程。当我设法制作一个图表动画时，我很想制作一些很酷的东西。我想到的第一个很酷的东西是太阳系。这篇文章也是我回忆牛顿物理学、向量空间、matplotlib等知识的一次旅程。</p></div><div class="ab cl lu lv hx lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="im in io ip iq"><p id="e063" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">为了模拟行星的轨道并制作动画，我需要解决两个关键问题:</p><ol class=""><li id="2ebf" class="mb mc it la b lb lc le lf lh md ll me lp mf lt mg mh mi mj bi translated">生成轨道数据。</li><li id="3fa9" class="mb mc it la b lb mk le ml lh mm ll mn lp mo lt mg mh mi mj bi translated">用Matplotlib制作数据动画。</li></ol><p id="b606" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">在这篇文章中，我将涉及上述两个问题。如果你赶时间，不想看我啰嗦的八卦，可以在Github 上查看<a class="ae mp" href="https://github.com/xhinker/orbit" rel="noopener ugc nofollow" target="_blank">代码主机。</a></p><p id="7439" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">作者所有图片和gif。</p><h1 id="5744" class="mq mr it bd ms mt mu mv mw mx my mz na jz nb ka nc kc nd kd ne kf nf kg ng nh bi translated">牛顿引力定律</h1><p id="f114" class="pw-post-body-paragraph ky kz it la b lb ni ju ld le nj jx lg lh nk lj lk ll nl ln lo lp nm lr ls lt im bi translated">根据牛顿万有引力定律，我们可以计算出两个物体之间的力。只考虑地球和太阳。太阳对地球的引力影响可以用下面的等式来表示:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nn"><img src="../Images/758e97500ac259539040780b2c663849.png" data-original-src="https://miro.medium.com/v2/resize:fit:420/format:webp/1*41oTQf-kyuT5FJS6kHeoow.png"/></div></figure><p id="1290" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated"><code class="fe no np nq nr b">M</code>表示太阳的质量，<code class="fe no np nq nr b">m</code>表示地球的质量，<code class="fe no np nq nr b">r</code>表示两个物体中心之间的距离。<code class="fe no np nq nr b">G</code>是一个常量值。</p><p id="908a" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">根据牛顿第二定律:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ns"><img src="../Images/cf8a8a6e95d59a09d94310b046873110.png" data-original-src="https://miro.medium.com/v2/resize:fit:288/format:webp/1*WuCqIe5HKuVuon56hZtTcA.png"/></div></figure><p id="9cec" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我们可以得到加速度<code class="fe no np nq nr b">a</code>:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nt"><img src="../Images/6b70deaf241b657a4d4db78c5c698f01.png" data-original-src="https://miro.medium.com/v2/resize:fit:368/format:webp/1*F-MsLeUCpb67ugsjNv1w-g.png"/></div></figure><p id="2f81" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">嗯，加速度<code class="fe no np nq nr b">a</code>只与太阳质量和日地距离<code class="fe no np nq nr b">r</code>有关。现在有了已知的<code class="fe no np nq nr b">a</code>。我们可以计算δ时间后地球的速度- <code class="fe no np nq nr b">dt</code>。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nu"><img src="../Images/7e4d2826a59901dfa0c928c2951c7460.png" data-original-src="https://miro.medium.com/v2/resize:fit:422/format:webp/1*TAER8_EuexnofdmlQv1cJw.png"/></div></figure><p id="49ad" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">最后，得到位移的变化— <code class="fe no np nq nr b">dd</code>:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nv"><img src="../Images/b4ea77c54f3deb1775b15bb3b6f9ac6f.png" data-original-src="https://miro.medium.com/v2/resize:fit:626/format:webp/1*U52LVFgWzHf3B6aQESirYQ.png"/></div></figure><p id="5378" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">(我知道在一篇文章中使用/阅读如此多的方程令人讨厌，但这可能是解释引力轨道模拟基础的最简单、最简洁的方式)</p><h1 id="ffa0" class="mq mr it bd ms mt mu mv mw mx my mz na jz nb ka nc kc nd kd ne kf nf kg ng nh bi translated">向量空间中的引力定律</h1><p id="b052" class="pw-post-body-paragraph ky kz it la b lb ni ju ld le nj jx lg lh nk lj lk ll nl ln lo lp nm lr ls lt im bi translated">由于我要用matplotlib绘制地球轨道，所以需要计算<code class="fe no np nq nr b">x</code>、<code class="fe no np nq nr b">y</code>的值。为了简单起见，我将使用2D坐标轴，而不是三维。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nw"><img src="../Images/261b9d703cf8465542e10f874623c5d3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*sP7uO7aUuPjtnekqoqfhfw.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">地球引力分析。附录中的图表代码</p></figure><p id="5afc" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我在上图中画出了方程的矢量版本。如果你是第一次读这个方程，你可能会有几个问题。</p><ol class=""><li id="d49a" class="mb mc it la b lb lc le lf lh md ll me lp mf lt mg mh mi mj bi translated"><strong class="la iu">为什么引力方程中有一个负号(-)？</strong>因为力的方向与距离矢量<code class="fe no np nq nr b">r</code>相反。当你计算地球对太阳的作用力时，你需要去掉负号(-)。在矢量坐标中，我们需要非常小心方向。</li><li id="18a1" class="mb mc it la b lb mk le ml lh mm ll mn lp mo lt mg mh mi mj bi translated"><strong class="la iu">离心力呢，为什么不处理离心力？</strong>因为离心力其实是万有引力的结果。如果我们在地球上进行受力分析。只有一个引力作用在它上面。当地球绕着太阳旋转时，地球正在向太阳下落。然而，地球垂直于G力的初速度将它拉离太阳，这就是为什么地球可以绕太阳运行。</li></ol><p id="7683" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">在Python代码中，假设太阳在位置(0，0)，地球在位置(6，6):</p><pre class="kj kk kl km gt nx nr ny nz aw oa bi"><span id="5821" class="ob mr it nr b gy oc od l oe of">sx,sy = 0,0<br/>ex,ey = 6,6</span></pre><p id="729b" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">距离r将是:</p><pre class="kj kk kl km gt nx nr ny nz aw oa bi"><span id="d735" class="ob mr it nr b gy oc od l oe of">rx = ex - sx<br/>ry = ey - sy</span></pre><p id="118b" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">定义日地引力常数<code class="fe no np nq nr b">GMm</code>为<code class="fe no np nq nr b">gravconst_e</code>:</p><pre class="kj kk kl km gt nx nr ny nz aw oa bi"><span id="7391" class="ob mr it nr b gy oc od l oe of">Ms          = 2.0e30                    <em class="og"># mass of sun in kg unit</em><br/>Me          = 5.972e24                  <em class="og"># mass of earth in kg unit        </em><br/>G           = 6.67e-11<br/>gravconst   = G*Ms*Me</span></pre><p id="51a3" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">模拟器将每隔<code class="fe no np nq nr b">dt</code>时间计算一个数据点。我们可以把<code class="fe no np nq nr b">dt</code>设定为某一天:</p><pre class="kj kk kl km gt nx nr ny nz aw oa bi"><span id="31c5" class="ob mr it nr b gy oc od l oe of">daysec = 24.0*60*60<br/>dt     = 1*daysec</span></pre><p id="661e" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">r (|r|)的立方是:</p><pre class="kj kk kl km gt nx nr ny nz aw oa bi"><span id="428b" class="ob mr it nr b gy oc od l oe of">modr3_e = (rx**2 + ry**2)**1.5</span></pre><p id="9b28" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">要计算施加在地球方向上的力:</p><pre class="kj kk kl km gt nx nr ny nz aw oa bi"><span id="6c11" class="ob mr it nr b gy oc od l oe of"><em class="og"># get g force in x and y direction</em><br/>fx_e = gravconst_e*rx/modr3_e<br/>fy_e = gravconst_e*ry/modr3_e</span></pre><p id="aaba" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">基于矢量形式的牛顿第二定律:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi oh"><img src="../Images/ba8337d98ecbaf3f870250f6180fec59.png" data-original-src="https://miro.medium.com/v2/resize:fit:454/format:webp/1*wHep06S_tU36aNQNC-pyAg.png"/></div></figure><p id="795a" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">结合上述等式:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi oi"><img src="../Images/2730e6a726156b756700241664e7ae81.png" data-original-src="https://miro.medium.com/v2/resize:fit:450/format:webp/1*2HuRBs2ruRKREsMWSTOavA.png"/></div></figure><p id="b359" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">因为我已经计算了力的矢量，所以我可以在<code class="fe no np nq nr b">dt</code>时间后得到新的速度矢量:</p><pre class="kj kk kl km gt nx nr ny nz aw oa bi"><span id="49e0" class="ob mr it nr b gy oc od l oe of">xve += fx_e*dt/Me<br/>yve += fy_e*dt/Me</span></pre><p id="20bb" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">最后得到地球新的位移(速度乘以时间就是距离:d=v*t):</p><pre class="kj kk kl km gt nx nr ny nz aw oa bi"><span id="28f6" class="ob mr it nr b gy oc od l oe of">xe += xve*dt<br/>ye += yve*dt</span></pre><p id="d9c2" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">下面是模拟地球轨道运行一年的完整代码。</p><pre class="kj kk kl km gt nx nr ny nz aw oa bi"><span id="6171" class="ob mr it nr b gy oc od l oe of">G           = 6.67e-11                  <em class="og"># constant G</em><br/>Ms          = 2.0e30                    <em class="og"># sun</em><br/>Me          = 5.972e24                  <em class="og"># earth        </em><br/>AU          = 1.5e11                    <em class="og"># earth sun distance</em><br/>daysec      = 24.0*60*60                <em class="og"># seconds of a day</em><br/>e_ap_v      = 29290                     <em class="og"># earth velocity at aphelion</em></span><span id="6c6a" class="ob mr it nr b gy oj od l oe of">gravconst_e = G*Me*Ms<br/><em class="og"># setup the starting conditions</em><br/><em class="og"># earth</em><br/>xe,ye,ze    = 1.0167*AU,0,0<br/>xve,yve,zve = 0,e_ap_v,0</span><span id="f2a4" class="ob mr it nr b gy oj od l oe of"><em class="og"># sun</em><br/>xs,ys,zs    = 0,0,0<br/>xvs,yvs,zvs = 0,0,0</span><span id="04a2" class="ob mr it nr b gy oj od l oe of">t           = 0.0<br/>dt          = 1*daysec <em class="og"># every frame move this time</em></span><span id="bf53" class="ob mr it nr b gy oj od l oe of">xelist,yelist,zelist = [],[],[]<br/>xslist,yslist,zslist = [],[],[]</span><span id="04cd" class="ob mr it nr b gy oj od l oe of"><em class="og"># start simulation</em><br/><strong class="nr iu">while</strong> t&lt;1*365*daysec:<br/>    <em class="og">################ earth #############</em><br/>    <em class="og"># compute G force on earth</em><br/>    rx,ry,rz = xe - xs, ye - ys, ze - zs<br/>    modr3_e = (rx**2+ry**2+rz**2)**1.5<br/>    fx_e = -gravconst_e*rx/modr3_e<br/>    fy_e = -gravconst_e*ry/modr3_e<br/>    fz_e = -gravconst_e*rz/modr3_e<br/>    <br/>    <em class="og"># update quantities how is this calculated?  F = ma -&gt; a = F/m</em><br/>    xve += fx_e*dt/Me<br/>    yve += fy_e*dt/Me<br/>    zve += fz_e*dt/Me<br/>    <br/>    <em class="og"># update position</em><br/>    xe += xve*dt<br/>    ye += yve*dt <br/>    ze += zve*dt<br/>    <br/>    <em class="og"># save the position in list</em><br/>    xelist.append(xe)<br/>    yelist.append(ye)<br/>    zelist.append(ze)<br/>    <br/>    <em class="og">################ the sun ###########</em><br/>    <em class="og"># update quantities how is this calculated?  F = ma -&gt; a = F/m</em><br/>    xvs += -fx_e*dt/Ms<br/>    yvs += -fy_e*dt/Ms<br/>    zvs += -fz_e*dt/Ms<br/>    <br/>    <em class="og"># update position</em><br/>    xs += xvs*dt<br/>    ys += yvs*dt <br/>    zs += zvs*dt<br/>    xslist.append(xs)<br/>    yslist.append(ys)<br/>    zslist.append(zs)<br/>    <br/>    <em class="og"># update dt</em><br/>    t +=dt</span></pre><p id="2df9" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">看看轨道是什么样子:</p><pre class="kj kk kl km gt nx nr ny nz aw oa bi"><span id="3d40" class="ob mr it nr b gy oc od l oe of"><strong class="nr iu">import</strong> matplotlib.pyplot <strong class="nr iu">as</strong> plt<br/>plt.plot(xelist,yelist,'-g',lw=2)<br/>plt.axis('equal')<br/>plt.show()</span></pre><h1 id="31cc" class="mq mr it bd ms mt mu mv mw mx my mz na jz nb ka nc kc nd kd ne kf nf kg ng nh bi translated">用matplotlib制作动态观察动画</h1><p id="0e7e" class="pw-post-body-paragraph ky kz it la b lb ni ju ld le nj jx lg lh nk lj lk ll nl ln lo lp nm lr ls lt im bi translated">现在，我要把静止的地球轨迹变成一个移动的物体，并在平面上保留一个轨迹。以下是我在制作动画时解决的一些问题:</p><ol class=""><li id="a777" class="mb mc it la b lb lc le lf lh md ll me lp mf lt mg mh mi mj bi translated">所有的魔法都发生在<code class="fe no np nq nr b">update </code>函数内部。基本上每一帧都会被<code class="fe no np nq nr b">FuncAnimation </code>调用函数。您可以调用<code class="fe no np nq nr b">ax.plot(…)</code>在平面中绘制新像素(所有像素将保留在下一帧中)或调用<code class="fe no np nq nr b">set_data </code>或<code class="fe no np nq nr b">set_position</code>更新可视对象的数据(matplotlib将根据当前帧的数据重新绘制所有内容)。</li><li id="50b8" class="mb mc it la b lb mk le ml lh mm ll mn lp mo lt mg mh mi mj bi translated">表达式“<code class="fe no np nq nr b">line_e, = ax.plot(…)</code>”中的逗号一开始看起来很怪异。但是请注意，是逗号构成了元组。"<code class="fe no np nq nr b">ax.plot(…)</code>"返回一个元组对象。这就是为什么您需要在变量名后添加一个逗号。</li><li id="b311" class="mb mc it la b lb mk le ml lh mm ll mn lp mo lt mg mh mi mj bi translated">在地球后面画出轨迹。我初始化空列表(<code class="fe no np nq nr b">exdata,eydata = [],[]</code>)来保存所有先前的轨迹点。每次调用<code class="fe no np nq nr b">update </code>函数时，将轨迹点追加到列表中。</li></ol><p id="d6c9" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我不打算把这部分变成动画教程。如果你以前从未尝试过matplotlib动画。杰克·范德普拉斯的Matplotlib动画教程非常值得一读。</p><p id="4b9e" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">以下是制作动态观察动画的代码:</p><pre class="kj kk kl km gt nx nr ny nz aw oa bi"><span id="c46c" class="ob mr it nr b gy oc od l oe of"><strong class="nr iu">import</strong> matplotlib.pyplot <strong class="nr iu">as</strong> plt<br/><strong class="nr iu">from</strong> matplotlib <strong class="nr iu">import</strong> animation<br/><br/>fig, ax = plt.subplots(figsize=(10,10))<br/>ax.set_aspect('equal')<br/>ax.grid()<br/><br/>line_e,     = ax.plot([],[],'-g',lw=1,c='blue')<br/>point_e,    = ax.plot([AU], [0], marker="o"<br/>                      , markersize=4<br/>                      , markeredgecolor="blue"<br/>                      , markerfacecolor="blue")<br/>text_e      = ax.text(AU,0,'Earth')<br/><br/>point_s,    = ax.plot([0], [0], marker="o"<br/>                      , markersize=7<br/>                      , markeredgecolor="yellow"<br/>                      , markerfacecolor="yellow")<br/>text_s      = ax.text(0,0,'Sun')<br/><br/>exdata,eydata = [],[]                   <em class="og"># earth track</em><br/>sxdata,sydata = [],[]                   <em class="og"># sun track</em><br/><br/><strong class="nr iu">print</strong>(len(xelist))<br/><br/><strong class="nr iu">def</strong> update(i):<br/>    exdata.append(xelist[i])<br/>    eydata.append(yelist[i])<br/>    <br/>    line_e.set_data(exdata,eydata)<br/>    point_e.set_data(xelist[i],yelist[i])<br/>    text_e.set_position((xelist[i],yelist[i]))<br/><br/>    point_s.set_data(xslist[i],yslist[i])<br/>    text_s.set_position((xslist[i],yslist[i]))<br/>       ax.axis('equal')<br/>    ax.set_xlim(-3*AU,3*AU)<br/>    ax.set_ylim(-3*AU,3*AU)<br/><br/>    <strong class="nr iu">return</strong> line_e,point_s,point_e,text_e,text_s<br/><br/>anim = animation.FuncAnimation(fig<br/>                                ,func=update<br/>                                ,frames=len(xelist)<br/>                                ,interval=1<br/>                                ,blit=True)<br/>plt.show()</span></pre><p id="0d9f" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">结果:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ok"><img src="../Images/dabde9ddff59489a00263bf22c7eb9ec.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*ATI6rE_u2-ccXhTQsZeMBA.gif"/></div></div></figure><p id="2458" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">点击查看完整代码<a class="ae mp" href="https://github.com/xhinker/orbit/blob/main/simulate_earth_orbit.py" rel="noopener ugc nofollow" target="_blank">。</a></p><h1 id="f6c9" class="mq mr it bd ms mt mu mv mw mx my mz na jz nb ka nc kc nd kd ne kf nf kg ng nh bi translated">如果…会怎样</h1><p id="c1ff" class="pw-post-body-paragraph ky kz it la b lb ni ju ld le nj jx lg lh nk lj lk ll nl ln lo lp nm lr ls lt im bi translated">改变地球的初始速度，比如将地球速度降低到<strong class="la iu">19290米/秒(从29290米/秒)</strong>:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ol"><img src="../Images/33a3fa18262366f78cf8a7c9e5084ff2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*GWDv0ZPLy-Fs68fAtXZMLw.gif"/></div></div></figure><p id="2fab" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">改变地球质量，增加到<strong class="la iu"> 5.972e29 kg(从5.972e24 kg) </strong>。太阳在移动！</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ol"><img src="../Images/51c8faa0a20551856b1d61798a8fe7f5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*lhTDIyuEke2ORYroetipgQ.gif"/></div></div></figure><h1 id="387e" class="mq mr it bd ms mt mu mv mw mx my mz na jz nb ka nc kc nd kd ne kf nf kg ng nh bi translated">将火星和一颗未知彗星加入轨道系统</h1><p id="3017" class="pw-post-body-paragraph ky kz it la b lb ni ju ld le nj jx lg lh nk lj lk ll nl ln lo lp nm lr ls lt im bi translated">因为我已经成功模拟了地球和太阳的轨道。向系统中添加更多的对象并不困难。比如火星和一颗未知的彗星。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/c879f6219363f580e6c0ef0b9d34e309.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*tW_Gf36DRkR7cDiLnD1oYw.gif"/></div></div></figure><p id="3077" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">点击查看其代码<a class="ae mp" href="https://github.com/xhinker/orbit/blob/main/solar_orbit_2d.py" rel="noopener ugc nofollow" target="_blank">。</a></p><h1 id="a1e8" class="mq mr it bd ms mt mu mv mw mx my mz na jz nb ka nc kc nd kd ne kf nf kg ng nh bi translated">在Matplotlib3D中制作动画</h1><p id="4774" class="pw-post-body-paragraph ky kz it la b lb ni ju ld le nj jx lg lh nk lj lk ll nl ln lo lp nm lr ls lt im bi translated">通过对绘图代码进行一些调整，我甚至可以制作3D轨道动画！在上面的模拟代码中，我已经计算了<code class="fe no np nq nr b">z</code>轴的数据。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi om"><img src="../Images/bb3853f4160246175414d24ac1f9b503.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*OMrfL2Nlk97jkf0AaYDA3g.gif"/></div></div></figure><p id="1c97" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">点击查看代码<a class="ae mp" href="https://github.com/xhinker/orbit/blob/main/solar_orbit_3d_plt.py" rel="noopener ugc nofollow" target="_blank">。</a></p><h1 id="2c5e" class="mq mr it bd ms mt mu mv mw mx my mz na jz nb ka nc kc nd kd ne kf nf kg ng nh bi translated">摘要</h1><p id="ca92" class="pw-post-body-paragraph ky kz it la b lb ni ju ld le nj jx lg lh nk lj lk ll nl ln lo lp nm lr ls lt im bi translated">在这篇文章里，我把牛顿万有引力定律的基础，如何把方程组转换到向量空间，一步一步的计算仿真数据。有了模拟数据在手，我也解释了动画路上的三个关键问题。</p><p id="7a5b" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">感谢您阅读到这里。彻底了解模拟过程，你甚至可以搭建著名的<a class="ae mp" href="https://en.wikipedia.org/wiki/Three-body_problem" rel="noopener ugc nofollow" target="_blank">三体问题</a>模拟器。(是的，我也是同名小说的粉丝)</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi on"><img src="../Images/b88fd8802c9dc489034483f04a7835a9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*XnsWuo-k6PDm7GKVHt8DOw.gif"/></div></div></figure><p id="3696" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">如果你有任何问题，请告诉我，我会尽力回答。并且不要犹豫指出我在文章中犯的任何错误。期待与您的进一步联系。</p><p id="917a" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我就讲到这里，祝你喜欢它，编程愉快。</p><h1 id="5850" class="mq mr it bd ms mt mu mv mw mx my mz na jz nb ka nc kc nd kd ne kf nf kg ng nh bi translated">参考链接</h1><ul class=""><li id="99ee" class="mb mc it la b lb ni le nj lh oo ll op lp oq lt or mh mi mj bi translated"><a class="ae mp" href="https://en.wikipedia.org/wiki/Newton%27s_law_of_universal_gravitation" rel="noopener ugc nofollow" target="_blank">牛顿万有引力定律</a></li><li id="7a8d" class="mb mc it la b lb mk le ml lh mm ll mn lp mo lt or mh mi mj bi translated"><a class="ae mp" href="https://en.wikipedia.org/wiki/Earth%27s_orbit" rel="noopener ugc nofollow" target="_blank">地球轨道</a></li><li id="7bde" class="mb mc it la b lb mk le ml lh mm ll mn lp mo lt or mh mi mj bi translated"><a class="ae mp" href="https://matplotlib.org/stable/gallery/text_labels_and_annotations/tex_demo.html" rel="noopener ugc nofollow" target="_blank">使用Tex渲染数学方程</a></li><li id="d9d4" class="mb mc it la b lb mk le ml lh mm ll mn lp mo lt or mh mi mj bi translated"><a class="ae mp" href="https://www.youtube.com/watch?v=ZPP9czMqrBk&amp;ab_channel=PaulFrancis" rel="noopener ugc nofollow" target="_blank"> MV3.03二体问题</a></li><li id="cf84" class="mb mc it la b lb mk le ml lh mm ll mn lp mo lt or mh mi mj bi translated"><a class="ae mp" href="https://www.youtube.com/watch?v=yzZeSEKx2O4&amp;ab_channel=PaulFrancis" rel="noopener ugc nofollow" target="_blank"> MV3.04二体人:Python </a></li></ul><h1 id="3f34" class="mq mr it bd ms mt mu mv mw mx my mz na jz nb ka nc kc nd kd ne kf nf kg ng nh bi translated">附录—代码生成矢量坐标图</h1><p id="ce97" class="pw-post-body-paragraph ky kz it la b lb ni ju ld le nj jx lg lh nk lj lk ll nl ln lo lp nm lr ls lt im bi translated">在运行代码之前，您需要在您的机器上安装LaTex。</p><pre class="kj kk kl km gt nx nr ny nz aw oa bi"><span id="61aa" class="ob mr it nr b gy oc od l oe of"><strong class="nr iu">import</strong> numpy <strong class="nr iu">as</strong> np<br/><strong class="nr iu">import</strong> matplotlib.pyplot <strong class="nr iu">as</strong> plt<br/>plt.rcParams['text.usetex'] = True<br/>font = {'family' : 'normal',<br/>        'weight' : 'bold',<br/>        'size'   : 18}<br/>plt.rc('font',**font)<br/><br/><em class="og"># initialize the stage</em><br/>fig,ax = plt.subplots(figsize=(8,8))<br/><br/><em class="og"># set x, and y axis,and remove top and right</em><br/>ax.spines[['top','right']].set_visible(False)<br/>ax.spines[['bottom','left']].set_position(('data',0.0))<br/>ax.axis('equal')<br/>ax.axes.xaxis.set_visible(False)<br/>ax.axes.yaxis.set_visible(False)<br/>ax.set_xlim(-3,10)<br/>ax.set_ylim(-3,10)<br/><br/><em class="og"># draw arrows</em><br/>ax.plot(1, 0, "&gt;k", transform=ax.get_yaxis_transform(), clip_on=False)<br/>ax.plot(0, 1, "^k", transform=ax.get_xaxis_transform(), clip_on=False)<br/><br/><em class="og"># sun</em><br/>a = np.linspace(0,2*np.pi,360)<br/>xs = np.sin(a)<br/>ys = np.cos(a)<br/>ax.plot(xs,ys,c='r')<br/>ax.text(-1,1,'sun')<br/><br/><em class="og"># earth</em><br/>xec,yec = 6,6<br/>xe = xec+ 0.5*xs<br/>ye = yec+ 0.5*ys<br/>ax.plot(xe,ye,c='b')<br/>ax.text(xec+0.5,yec+0.5,'earth')<br/>ax.text(xec-1,yec+1.1,r"$\vec{v}$")<br/><br/><em class="og"># r vector</em><br/>ax.quiver([0,xec,xec-0.3],[0,yec,yec+0.1]<br/>         ,[xec,-2,-3],[yec,2,-3]<br/>         ,units='xy',scale=1,width=0.07)<br/>ax.text(3,2,r"$\vec{r} = \vec{earth}-\vec{sun}$")<br/>f_eq = (r"$\vec{F}=-G\frac{Mm}{|r|^2}\frac{\vec{r}}{|r|}\\$"<br/>        r"$=-G\frac{Mm}{|r|^3}\vec{r}$")<br/>ax.text(0.5,5.5,f_eq)<br/><br/><em class="og"># plot data</em><br/>plt.show()</span></pre><p id="ed3d" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">结果:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nw"><img src="../Images/261b9d703cf8465542e10f874623c5d3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*sP7uO7aUuPjtnekqoqfhfw.png"/></div></div></figure></div></div>    
</body>
</html>