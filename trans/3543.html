<html>
<head>
<title>Solar panel power generation analysis</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">太阳能电池板发电分析</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/solar-panel-power-generation-analysis-7011cc078900#2022-08-06">https://towardsdatascience.com/solar-panel-power-generation-analysis-7011cc078900#2022-08-06</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="18f2" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">你的太阳能电池板能产生多少能量？做出你自己的计算来保持控制</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/dc25f7a5dc8534136a4b78c1e2ef7368.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*tJnsU4ZdEUSUJxul"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">玛丽安娜·普罗恩萨在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</p></figure><p id="d988" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在过去的几个月里，我一直在选择一家供应商为我的房子安装太阳能电池板。我注意到的是，所有供应商都使用他们自己的计算方法，而我的房子没有默认朝向，这让他们很难接受。我的处境很不幸，大部分太阳能电池板需要安装在垂直的墙上，而不是屋顶上。</p><p id="d5cf" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">因此，为了比较不同供应商的发电量，并对倾斜90度的电池板进行良好的计算，我开始自己进行计算。为此，我创建了一个计算方法，您可以为几个具有各自特征的配线架位置输入自己的配置。这些位置的结果将被合并。例如，不同的位置可以是你房子的前后屋顶。</p><h2 id="798b" class="lv lw it bd lx ly lz dn ma mb mc dp md li me mf mg lm mh mi mj lq mk ml mm mn bi translated">获取太阳辐射信息</h2><p id="3d2a" class="pw-post-body-paragraph kz la it lb b lc mo ju le lf mp jx lh li mq lk ll lm mr lo lp lq ms ls lt lu im bi translated">我开始做自己的太阳路径计算，但在<a class="ae ky" href="https://github.com/pvlib/pvlib-python" rel="noopener ugc nofollow" target="_blank"> github </a>找到了优秀的pvlib包。它帮我解决了大部分问题，拯救了我的一天。</p><p id="13c0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">pvlib包用于确定太阳辐射量和太阳能电池板的发电量。在我的案例中，它使用了欧洲委员会提供的2005年到2020年的太阳辐射数据。使用真实生活数据，而不是一直有阳光照射的一些最佳情况。</p><p id="184c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">以下代码获取一组面板的数据:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mt mu l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">获取太阳能电池板电网的太阳辐射和发电</p></figure><p id="b3ce" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这种方法采用位置(纬度、经度)和面板配置来获取辐射和功率数据。面板配置包括面板数量、方位角、倾斜角和峰值功率。else语句和以下代码需要能够指定零个面板。当未指定面板时，库无法处理“0”的峰值功率。对于不同布局选项的比较，指定零可能是有用的。所使用的数据源包含2005年至2020年的数据。</p><p id="a332" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">一个请求产生一个数据帧:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mv"><img src="../Images/59f9a0f22736f1f3ace053204e9131aa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1KCP--vcBb2ECopAPW8T_Q.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">获取_面板_功率_数据的结果(图片由作者提供)</p></figure><p id="10be" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">该数据框包含2005年1月1日到2020年12月31日之间每天每小时的太阳辐射和发电量。</p><p id="9c3d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">请注意，方位角“0”是指南方，而不是北方。正方位是东方，负方位是西方。</p><h2 id="58c3" class="lv lw it bd lx ly lz dn ma mb mc dp md li me mf mg lm mh mi mj lq mk ml mm mn bi translated">面板位置</h2><p id="61e7" class="pw-post-body-paragraph kz la it lb b lc mo ju le lf mp jx lh li mq lk ll lm mr lo lp lq ms ls lt lu im bi translated">并非所有面板都可以放置在同一个屋顶上，因此我们希望能够指定几个位置的配置(例如，屋顶、棚子上、地面上、墙上等)。这种配置如下:</p><pre class="kj kk kl km gt mw mx my mz aw na bi"><span id="27cc" class="lv lw it mx b gy nb nc l nd ne">[{'name': 'front', 'tilt': 35, 'azimuth': 30, 'nopanels': 2, 'power': 0.385},<br/> {'name': 'back', 'tilt': 35, 'azimuth': 150, 'nopanels': 8, 'power': 0.385}]</span></pre><p id="2d5c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">可以指定每个部分的方位角(南= 0°)、倾斜度、面板数量和每个面板的峰值功率。如果使用不同的面板，则需要最后一个。</p><p id="bd61" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">围绕<code class="fe nf ng nh mx b">obtain_power_panel_data</code>方法构建了一个包装器，它接受配置并获取每个屋顶/部分的数据。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mt mu l"/></div></figure><p id="c7e1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">此方法接受包含面板位置的字典，并返回包含所有面板的太阳能数据的数据框。它还获得太阳位置(第27-30行)并将其添加到太阳辐射信息中。为了方便起见，增加了月份和季节栏。</p><p id="19a2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">一个示例用法是:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mt mu l"/></div></figure><p id="96d6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这指定了位置名称“front ”,两个面板在屋顶上以35度角向西南方向看。第二个位置朝向西北方向，包含8个相同角度为35度的面板。使用相同的太阳能电池板，峰值性能为0.385 kW。</p><p id="d6c9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">可以用一行代码创建字典，但是数组是为了可读性。生成的数据帧为:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ni"><img src="../Images/0b41e977c456d8c4e3fe78759381b64a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vPqaNhA2eLVjJDXy7er94g.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">综合太阳数据(作者截图)</p></figure><p id="3660" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这是我们评估所需的完整数据集；对于每组太阳能电池板，每天的每个小时都有太阳辐射和产生的电力可用。每个记录还包含太阳在天空中的位置。我们现在准备评估太阳能电池板的性能。</p><h2 id="d1fb" class="lv lw it bd lx ly lz dn ma mb mc dp md li me mf mg lm mh mi mj lq mk ml mm mn bi translated">一天中的表现</h2><p id="a58e" class="pw-post-body-paragraph kz la it lb b lc mo ju le lf mp jx lh li mq lk ll lm mr lo lp lq ms ls lt lu im bi translated">首先，我们将评估一天的表现。为此，我们首先在数据集中搜索辐射最高的一天。然后我们画出这一天的发电量。每个屋顶和总发电量。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mt mu l"/></div></figure><p id="0004" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">首先，我们搜索产量最高的一天。在这种情况下是2020年(第35行)。过滤今年的数据集(第2行)，然后计算每天的发电量总和(列“P”)(第3行)，返回一个数据框，其中日期为索引，发电量为列。用<code class="fe nf ng nh mx b">idxmax </code>(第4行)找到最大值后，相应的日期以字符串形式返回，格式为2020–05–28第5行)。</p><p id="7e80" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这个日期和完整的数据帧被提供给<code class="fe nf ng nh mx b">plot_a_day</code>方法，该方法产生:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nj"><img src="../Images/348c590ead7952c075a785eb718a8444.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1ba4CPn6Jr4OvCwdFIujtA.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">一天的发电量(图片由作者提供)</p></figure><p id="7be5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在过滤给定日期的数据(第7行)后，生成了两个图。左图显示了一天内每单位时间的发电量，右图显示了一天内的累计发电量。单独的面板位置用虚线标出，所有面板的总数用实线标出。</p><p id="fc28" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">第9行为图形创建了两个轴。第10行遍历所有面板位置。第11行过滤当前位置的数据，并在左图中用虚线绘制每小时的数据(<code class="fe nf ng nh mx b">day_data[day_data.location == name][‘P’]</code>)。第12行绘制了右侧图中的累积数据(<code class="fe nf ng nh mx b">…[‘P’].cumsum()</code>)。第13行和第14行将每日总数添加到图表的右侧。第16行到第19行做了同样的事情，但是是针对所有位置的合计。最后，第21到31行格式化轴、图表并添加适当的标签。</p><h2 id="2dd8" class="lv lw it bd lx ly lz dn ma mb mc dp md li me mf mg lm mh mi mj lq mk ml mm mn bi translated">过去几个月的业绩</h2><p id="d67a" class="pw-post-body-paragraph kz la it lb b lc mo ju le lf mp jx lh li mq lk ll lm mr lo lp lq ms ls lt lu im bi translated">下一步是查看一年中几个月的表现:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mt mu l"/></div></figure><p id="7ed7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这将生成每月发电量和全年累计发电量的概览:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nk"><img src="../Images/0a027ac153703efde7793e24022aa12c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*cRGAgmtxS-UgdBUUzeuKKQ.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">一年的发电量(图片由作者提供)</p></figure><p id="6e9f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">代码遵循的结构与一天的图表大致相同，但过滤是在一年的水平上完成的，而汇总是在几个月内完成的。</p><p id="fe9f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">此外，第8行计算每月的平均值，第9行将该值绘制为水平虚线，第10行在该行旁边绘制平均值。</p><h2 id="1f26" class="lv lw it bd lx ly lz dn ma mb mc dp md li me mf mg lm mh mi mj lq mk ml mm mn bi translated">多年来的业绩</h2><p id="7541" class="pw-post-body-paragraph kz la it lb b lc mo ju le lf mp jx lh li mq lk ll lm mr lo lp lq ms ls lt lu im bi translated">数据框包含2005年至2020年的数据。这意味着我们可以计算多年来的性能(不考虑性能下降)。这模拟了太阳能电池板在此期间已经就位的情况:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mt mu l"/></div></figure><p id="336c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">导致:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nl"><img src="../Images/10fbd159fae5c207b0cd4bce6423611f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kxaTKvqpGCUa7Qa5S3kKFA.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">历年表现(图片由作者提供)</p></figure><p id="d96e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">同样，该方法从汇总数据开始，但现在是每年一次。然后(第5-7行)画出每月发电量和累计总和。添加每月的平均值(第13-14行),最后格式化图表。</p><p id="b598" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">正如我们在这张图表中看到的，每年的业绩远非稳定。在本例中，每年的发电量在2800千瓦时和3200千瓦时之间波动，具体取决于每年的天气情况。</p><h2 id="b906" class="lv lw it bd lx ly lz dn ma mb mc dp md li me mf mg lm mh mi mj lq mk ml mm mn bi translated">奖励:季节性表现</h2><p id="8cd5" class="pw-post-body-paragraph kz la it lb b lc mo ju le lf mp jx lh li mq lk ll lm mr lo lp lq ms ls lt lu im bi translated">有了太阳能电池板，你一年的总发电量就差不多了。但是在这一年中，会有一些惊人的结果，这取决于你的地理位置。太阳的路径在一年中是不同的，这会影响太阳能电池板的效率。当我们选取本文中的面板位置并绘制每个季节中的一天(发电量最高的一天)时，可以看到一些显著的结果:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nm"><img src="../Images/e3e1af705844903487e93801d8510a21.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*YNRhi0BefzRsnOSGkXwzYw.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">季节性表演(图片由作者提供)</p></figure><p id="26f6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">该图显示了一天中的太阳位置、太阳的高度以及每个电池板位置的发电量。在秋季和夏季，面板“背面”比面板“正面”表现更好(3倍)。但在冬季和秋季，差异很小(约1.2倍)。“前”面板的性能在一年中相对稳定，除了秋季。</p><p id="43eb" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">绘制这些图表有点复杂:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mt mu l"/></div></figure><p id="8460" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe nf ng nh mx b">plot_seasons </code>方法过滤请求年份的数据(第22行)并确定最大发电功率(第23-24行)，四舍五入到十位，这将用于为所有图表提供相同的y轴限值。接下来，为这四个图创建一个网格(第26–27行)。</p><p id="7f9c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">对于每个季节，发电量最高的一天由<code class="fe nf ng nh mx b">get_best_day_of_season </code>确定，这一天绘制在四个网格区域之一。</p><p id="a2f9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe nf ng nh mx b">plot_day_extended</code>方法将轴分为左轴和右轴，并在左轴(第9-10行)绘制太阳高度和天顶，在右轴(第11-12行)绘制面板性能。第13–19行完成了图形的格式化。</p><h2 id="0d48" class="lv lw it bd lx ly lz dn ma mb mc dp md li me mf mg lm mh mi mj lq mk ml mm mn bi translated">结论</h2><p id="4e47" class="pw-post-body-paragraph kz la it lb b lc mo ju le lf mp jx lh li mq lk ll lm mr lo lp lq ms ls lt lu im bi translated">pvlib库简化了太阳能电池板性能的计算。这使得比较不同承包商的报价更加容易。他们的报价都使用不同的方法来计算有效性，与上述代码，他们可以比较等效。</p><p id="12d1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">财务影响的计算不在此比较范围内，因为这高度依赖于经济环境和低点。比较产生的功率更透明。</p><p id="c60b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">完整的笔记本可以在<a class="ae ky" href="https://github.com/lmeulen/SolarPower" rel="noopener ugc nofollow" target="_blank"> github </a>上找到。作为额外的奖励，它包含将地址地理编码为经度坐标的代码，以简化使用。可以在倒数第三个单元格中指定地址和面板位置。尽情享受吧！</p><p id="720d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">遗言</strong></p><p id="825f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我希望你喜欢这篇文章。要获得更多灵感，请查看我的其他文章:</p><ul class=""><li id="11b0" class="nn no it lb b lc ld lf lg li np lm nq lq nr lu ns nt nu nv bi translated"><a class="ae ky" href="https://towardsdev.com/perform-a-function-on-columns-in-a-csv-file-a889ef02ca03" rel="noopener ugc nofollow" target="_blank">对CSV文件中的列执行功能</a></li><li id="15dc" class="nn no it lb b lc nw lf nx li ny lm nz lq oa lu ns nt nu nv bi translated"><a class="ae ky" rel="noopener" target="_blank" href="/create-a-heatmap-from-the-logs-of-your-activity-tracker-c9fc7ace1657">根据你的活动跟踪器的日志创建热图</a></li><li id="25d8" class="nn no it lb b lc nw lf nx li ny lm nz lq oa lu ns nt nu nv bi translated"><a class="ae ky" rel="noopener" target="_blank" href="/remove-personal-information-from-text-with-python-232cb69cf074">用Python删除文本中的个人信息</a></li><li id="3eb1" class="nn no it lb b lc nw lf nx li ny lm nz lq oa lu ns nt nu nv bi translated"><a class="ae ky" rel="noopener" target="_blank" href="/parallel-web-requests-in-python-4d30cc7b8989">使用Python的并行web请求</a></li><li id="c58c" class="nn no it lb b lc nw lf nx li ny lm nz lq oa lu ns nt nu nv bi translated"><a class="ae ky" rel="noopener" target="_blank" href="/all-public-transport-leads-to-utrecht-not-rome-bb9674600e81">所有公共交通工具都通向乌得勒支，而不是罗马</a></li></ul><p id="8195" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果你喜欢这个故事，请点击关注按钮！</p><p id="496d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><em class="ob">免责声明:本文包含的观点和看法仅归作者所有。</em></p></div></div>    
</body>
</html>