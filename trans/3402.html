<html>
<head>
<title>Managing Python Dependencies with Poetry</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用诗歌管理Python依赖关系</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/python-poetry-83f184ac9ed1#2022-07-28">https://towardsdatascience.com/python-poetry-83f184ac9ed1#2022-07-28</a></blockquote><div><div class="fc ii ij ik il im"/><div class="in io ip iq ir"><div class=""/><div class=""><h2 id="3e1e" class="pw-subtitle-paragraph jr it iu bd b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki dk translated">依赖性管理和用诗歌打包</h2></div><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj kj"><img src="../Images/2e9d07596c569118537205d65bee3dce.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_pofbwbh63xGO9VFmiFa0A.jpeg"/></div></div><p class="kv kw gk gi gj kx ky bd b be z dk translated"><a class="ae kz" href="https://unsplash.com/@danielkcheung?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">张彦宏</a>在<a class="ae kz" href="https://unsplash.com/s/photos/lego?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</p></figure><p id="a987" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">依赖性管理是Python项目最基本的方面之一。这很快就会变成一场噩梦，尤其是当一个包由许多开发者维护的时候。因此，使用正确的工具非常重要，这些工具最终可以帮助项目的维护者以正确的方式处理依赖关系。</p><p id="2aba" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">依赖性管理的概念也涉及到包升级——仅仅因为您指定了一个pin并不意味着您将忽略更新。</p><p id="1829" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">在今天的文章中，我们将讨论诗歌——一种可以帮助你处理依赖性的依赖性管理工具。此外，我们还将讨论诸如<em class="lw">dependent bot</em>之类的工具，这些工具用于自动化依赖性更新。</p></div><div class="ab cl lx ly hy lz" role="separator"><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc"/></div><div class="in io ip iq ir"><h2 id="a208" class="me mf iu bd mg mh mi dn mj mk ml dp mm lj mn mo mp ln mq mr ms lr mt mu mv mw bi translated">为什么固定依赖关系很重要</h2><p id="7865" class="pw-post-body-paragraph la lb iu lc b ld mx jv lf lg my jy li lj mz ll lm ln na lp lq lr nb lt lu lv in bi translated">首先，让我强调一个事实，即<strong class="lc iv">依赖项必须被钉住</strong>。一直都是。是的，甚至致力于概念验证。是的，即使只有你一个人在做一个项目。</p><p id="8fa8" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">钉住的依赖项将允许维护者(或者甚至其他可能使用你的包作为依赖项的包)复制一个环境，该环境具有应该被安装的包依赖项的精确版本，以使你的包完全起作用。</p><p id="07c7" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">有了固定的依赖项，并不意味着您不应该关心PyPI上发布的更新版本。确保固定的软件包是最新的非常重要，因为更新的版本通常会修复错误并减少安全漏洞。</p><p id="7f07" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">这敲响了良好和可靠的单元测试的警钟。如果您未能创建一个可靠的测试套件，最终覆盖您源代码的大部分方面，那么您将无法判断依赖升级是否会破坏您的代码。</p></div><div class="ab cl lx ly hy lz" role="separator"><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc"/></div><div class="in io ip iq ir"><h2 id="5774" class="me mf iu bd mg mh mi dn mj mk ml dp mm lj mn mo mp ln mq mr ms lr mt mu mv mw bi translated">什么是诗歌</h2><p id="1cba" class="pw-post-body-paragraph la lb iu lc b ld mx jv lf lg my jy li lj mz ll lm ln na lp lq lr nb lt lu lv in bi translated">诗歌，是Python项目的依赖管理和打包工具。换句话说，诗歌将处理您在<code class="fe nc nd ne nf b">pyproject.toml</code>文件中定义的依赖关系。</p><p id="aaf4" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">如果您的机器上尚未安装诗歌，您可以按照官方文档<a class="ae kz" href="https://python-poetry.org/docs/#installation" rel="noopener ugc nofollow" target="_blank">中提供的指南进行安装。</a></p><p id="336a" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">现在让我们假设你即将开始一个全新的项目。在这种情况下，您可以通过运行<code class="fe nc nd ne nf b">poetry new</code>命令来创建一个:</p><pre class="kk kl km kn gu ng nf nh ni aw nj bi"><span id="ff47" class="me mf iu nf b gz nk nl l nm nn">$ poetry new myproject</span></pre><p id="7cbe" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">该命令将在名为<code class="fe nc nd ne nf b">myproject</code>的目录下创建一个新项目，包含以下结构:</p><pre class="kk kl km kn gu ng nf nh ni aw nj bi"><span id="fccc" class="me mf iu nf b gz nk nl l nm nn">poetry-demo<br/>├── pyproject.toml<br/>├── README.md<br/>├── myproject<br/>│   └── __init__.py<br/>└── tests<br/>    └── __init__.py</span></pre></div><div class="ab cl lx ly hy lz" role="separator"><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc"/></div><div class="in io ip iq ir"><h2 id="d2ed" class="me mf iu bd mg mh mi dn mj mk ml dp mm lj mn mo mp ln mq mr ms lr mt mu mv mw bi translated">pyproject.toml文件</h2><p id="ae44" class="pw-post-body-paragraph la lb iu lc b ld mx jv lf lg my jy li lj mz ll lm ln na lp lq lr nb lt lu lv in bi translated">很长一段时间以来，<code class="fe nc nd ne nf b">setuptools</code>是用于管理Python项目中依赖关系的“事实上的”工具。然而，自从<a class="ae kz" href="https://peps.python.org/pep-0518/" rel="noopener ugc nofollow" target="_blank"> PEP-518 </a>提出后，这种情况发生了变化。这个Python增强提案引入了一个名为<code class="fe nc nd ne nf b">pyproject.toml</code>的TOML文件，它基本上包含了每个项目的所有构建系统依赖项。</p><p id="526c" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">现在让我们快速浏览一下默认的由诗歌创造的<code class="fe nc nd ne nf b">pyproject.toml</code>:</p><pre class="kk kl km kn gu ng nf nh ni aw nj bi"><span id="4cb0" class="me mf iu nf b gz nk nl l nm nn"><strong class="nf iv">[tool.poetry]</strong><br/>name = "myproject"<br/>version = "0.1.0"<br/>description = ""<br/>readme = "README.md"<br/>packages = [{include = "myproject"}]<br/><br/><strong class="nf iv">[tool.poetry.dependencies]</strong><br/>python = "^3.7"<br/><br/><strong class="nf iv">[build-system]</strong><br/>requires = ["poetry-core"]<br/>build-backend = "poetry.core.masonry.api"</span></pre><p id="e7a2" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">第一部分(<code class="fe nc nd ne nf b">[tool.poetry]</code>)包含一些关于你的项目的一般信息(如果<code class="fe nc nd ne nf b">poetry</code>被用来在PyPI上发布你的包，这些细节也会被用到。</p><p id="7346" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">第二部分<code class="fe nc nd ne nf b">[tool.poetry.dependencies]</code>用于指定Python版本以及包的依赖关系，无论是强制的还是可选的依赖关系。举个例子，</p><pre class="kk kl km kn gu ng nf nh ni aw nj bi"><span id="0740" class="me mf iu nf b gz nk nl l nm nn"><strong class="nf iv">[tool.poetry.dependencies]</strong><br/>python = "^3.7"<br/>pandas = "==1.1.1"</span><span id="c15b" class="me mf iu nf b gz no nl l nm nn"># Optional dependencies<br/>dbt-core = { version = "==1.1.1", optional = true }</span><span id="d4ab" class="me mf iu nf b gz no nl l nm nn"><strong class="nf iv">[tool.poetry.extras]<br/></strong>dbt_core = ["dbt-core"]</span></pre><p id="369e" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">最后，<code class="fe nc nd ne nf b">poetry</code>生成的<code class="fe nc nd ne nf b">pyproject.toml</code>文件的最后一段叫做<code class="fe nc nd ne nf b">[build-system]</code>。PEP与PEP-517兼容，PEP-517引入了一种新的标准方法，用于在维护项目时指定构建系统。因此，本节用于指定具体的构建系统(例如，这可能是<code class="fe nc nd ne nf b">setuptools</code>或<code class="fe nc nd ne nf b">poetry</code>):</p><pre class="kk kl km kn gu ng nf nh ni aw nj bi"><span id="785d" class="me mf iu nf b gz nk nl l nm nn"><strong class="nf iv">[build-system]</strong><br/>requires = ["poetry-core"]<br/>build-backend = "poetry.core.masonry.api"</span></pre><p id="6d79" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">有关部分和有效字段的完整列表，请随意参考官方<a class="ae kz" href="https://python-poetry.org/docs/pyproject/" rel="noopener ugc nofollow" target="_blank">文档</a>。在下面的一节中，我们还将讨论一些常用于操作<code class="fe nc nd ne nf b">pyproject.toml</code>文件的诗歌命令。</p></div><div class="ab cl lx ly hy lz" role="separator"><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc"/></div><div class="in io ip iq ir"><h2 id="c7b3" class="me mf iu bd mg mh mi dn mj mk ml dp mm lj mn mo mp ln mq mr ms lr mt mu mv mw bi translated">用诗歌安装依赖项</h2><p id="8434" class="pw-post-body-paragraph la lb iu lc b ld mx jv lf lg my jy li lj mz ll lm ln na lp lq lr nb lt lu lv in bi translated">现在我们已经在<code class="fe nc nd ne nf b">pyproject.toml</code>中定义了依赖项，我们可以继续安装它们了。为此，只需运行<code class="fe nc nd ne nf b">install</code>命令:</p><pre class="kk kl km kn gu ng nf nh ni aw nj bi"><span id="be0a" class="me mf iu nf b gz nk nl l nm nn">$ poetry install</span></pre><p id="8e12" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">该命令将读取TOML文件，解析所有的依赖项，并最终将它们安装在一个虚拟环境中，默认情况下，poems将在<code class="fe nc nd ne nf b">{cache-dir}/virtualenvs/</code>下创建这个虚拟环境。注意<code class="fe nc nd ne nf b">cache-dir</code>目录可以作为<a class="ae kz" href="https://python-poetry.org/docs/configuration/#cache-dir" rel="noopener ugc nofollow" target="_blank">诗歌配置</a>的一部分进行修改。</p><p id="df8b" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">如果出于某种原因想要激活环境，只需运行以下命令创建一个新的shell</p><pre class="kk kl km kn gu ng nf nh ni aw nj bi"><span id="17e5" class="me mf iu nf b gz nk nl l nm nn">$ poetry shell</span></pre><p id="1525" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">现在，如果您想停用虚拟环境，同时退出shell，运行<code class="fe nc nd ne nf b">exit</code>。或者，要停用虚拟环境但保持shell活动，运行<code class="fe nc nd ne nf b">deactivate</code>。</p></div><div class="ab cl lx ly hy lz" role="separator"><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc"/></div><div class="in io ip iq ir"><h2 id="4659" class="me mf iu bd mg mh mi dn mj mk ml dp mm lj mn mo mp ln mq mr ms lr mt mu mv mw bi translated">锁定文件</h2><p id="fead" class="pw-post-body-paragraph la lb iu lc b ld mx jv lf lg my jy li lj mz ll lm ln na lp lq lr nb lt lu lv in bi translated">一旦你运行<code class="fe nc nd ne nf b">poetry install</code>命令，两件事之一就会发生。如果这是你第一次运行<code class="fe nc nd ne nf b">poetry install</code>，那么一个名为<code class="fe nc nd ne nf b">poetry.lock</code>的文件将不会出现。因此，诗歌将读取依赖项，并下载您的<code class="fe nc nd ne nf b">pyproject.toml</code>文件中指定的所有最新版本。一旦安装了这些依赖项，这些包及其特定版本将被写入一个名为<code class="fe nc nd ne nf b">poetry.lock</code>的文件中。</p><p id="fce4" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">现在，如果<code class="fe nc nd ne nf b">poetry.lock</code>文件已经存在，那么这是因为你之前已经运行过<code class="fe nc nd ne nf b">poetry install</code>，或者<code class="fe nc nd ne nf b">poetry.lock</code>已经被维护代码库的其他人推送了。不管是哪种情况，只要存在一个<code class="fe nc nd ne nf b">poetry.lock</code>文件并且执行了<code class="fe nc nd ne nf b">poetry install</code>，那么依赖项将直接从锁文件中安装。</p><p id="b458" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">每当您手动将依赖项添加到<code class="fe nc nd ne nf b">pyproject.toml</code>文件中时，您可能还希望<code class="fe nc nd ne nf b">poetry.lock</code>文件反映这些更改。为此，你必须跑步</p><pre class="kk kl km kn gu ng nf nh ni aw nj bi"><span id="dfe2" class="me mf iu nf b gz nk nl l nm nn">$ poetry lock --no-update</span></pre><p id="6310" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">即使您的锁文件由于任何原因已经过期，也可以使用相同的命令。</p><p id="624a" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">请注意，您应该始终对<code class="fe nc nd ne nf b">poetry.lock</code>文件进行版本控制，因为确保所有贡献者使用相同版本的依赖项非常重要。每当用户添加或删除一个依赖项时，他们必须确保他们也更新了<code class="fe nc nd ne nf b">poetry.lock</code>并将其包含在提交中。</p></div><div class="ab cl lx ly hy lz" role="separator"><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc"/></div><div class="in io ip iq ir"><h2 id="e3d8" class="me mf iu bd mg mh mi dn mj mk ml dp mm lj mn mo mp ln mq mr ms lr mt mu mv mw bi translated">为开发指定和安装依赖项</h2><p id="80d9" class="pw-post-body-paragraph la lb iu lc b ld mx jv lf lg my jy li lj mz ll lm ln na lp lq lr nb lt lu lv in bi translated">现在，除了项目运行所需的标准依赖项之外，您可能还需要定义额外的依赖项，作为测试的一部分。此类依赖关系可在<code class="fe nc nd ne nf b">[tool.poetry.dev-dependencies]</code>一节中定义:</p><pre class="kk kl km kn gu ng nf nh ni aw nj bi"><span id="e2a3" class="me mf iu nf b gz nk nl l nm nn"><strong class="nf iv">[tool.poetry.dev-dependencies]<br/></strong>pytest = "==3.4"</span></pre><p id="900d" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">现在每次运行<code class="fe nc nd ne nf b">poetry install</code>时，开发依赖项也会被安装。如果不希望在环境中安装<code class="fe nc nd ne nf b">dev-dependencies</code>部分列出的包，那么您可以提供<code class="fe nc nd ne nf b">--no-dev</code>标志:</p><pre class="kk kl km kn gu ng nf nh ni aw nj bi"><span id="8c88" class="me mf iu nf b gz nk nl l nm nn">$ poetry install --no-dev</span></pre><p id="1409" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">请注意，在较新的版本中，上述符号已被否决。您可以改为使用<code class="fe nc nd ne nf b">--without</code>选项:</p><pre class="kk kl km kn gu ng nf nh ni aw nj bi"><span id="1429" class="me mf iu nf b gz nk nl l nm nn">$ poetry install --without dev</span></pre></div><div class="ab cl lx ly hy lz" role="separator"><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc"/></div><div class="in io ip iq ir"><h2 id="466e" class="me mf iu bd mg mh mi dn mj mk ml dp mm lj mn mo mp ln mq mr ms lr mt mu mv mw bi translated">有用的诗歌命令</h2><p id="5a6a" class="pw-post-body-paragraph la lb iu lc b ld mx jv lf lg my jy li lj mz ll lm ln na lp lq lr nb lt lu lv in bi translated">您甚至可以使用<code class="fe nc nd ne nf b">poetry add</code>命令在<code class="fe nc nd ne nf b">pyproject.toml</code>中插入额外的依赖项，而不是在<code class="fe nc nd ne nf b">pyproject.toml</code>文件中指定依赖项:</p><pre class="kk kl km kn gu ng nf nh ni aw nj bi"><span id="3f2a" class="me mf iu nf b gz nk nl l nm nn">$ poetry add pytest</span></pre><p id="59a6" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">上面的命令将执行两个动作——它将把<code class="fe nc nd ne nf b">pytest</code>包添加到<code class="fe nc nd ne nf b">pyproject.toml</code>的dependencies部分，并安装它(及其子依赖项)。</p><p id="d9be" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">同样，您甚至可以从依赖关系中删除一个包:</p><pre class="kk kl km kn gu ng nf nh ni aw nj bi"><span id="1aa9" class="me mf iu nf b gz nk nl l nm nn">$ poetry remove pytest</span></pre><p id="3f7d" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">注意，您甚至可以通过传递<code class="fe nc nd ne nf b">--dev|-D</code>标志来添加或删除开发依赖关系:</p><pre class="kk kl km kn gu ng nf nh ni aw nj bi"><span id="70e1" class="me mf iu nf b gz nk nl l nm nn">$ poetry add <!-- -->pytest<!-- --> -D</span></pre><p id="23ab" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">现在让我们假设您想要使用<code class="fe nc nd ne nf b">pytest</code>来运行项目的单元测试。因为您的测试套件需要已经安装在诗歌环境中的依赖项，所以您可以使用<code class="fe nc nd ne nf b">poetry run</code>命令在该环境中运行<code class="fe nc nd ne nf b">pytest</code>:</p><pre class="kk kl km kn gu ng nf nh ni aw nj bi"><span id="58ce" class="me mf iu nf b gz nk nl l nm nn">$ poetry run pytest</span></pre><p id="709e" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">事实上，您可以运行任何您喜欢的Python脚本</p><pre class="kk kl km kn gu ng nf nh ni aw nj bi"><span id="3f86" class="me mf iu nf b gz nk nl l nm nn">$ poetry run python my_script.py</span></pre><p id="b560" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">诗歌还支持<code class="fe nc nd ne nf b">extras</code>，它本质上对应于我们之前讨论过的可选依赖项。</p><pre class="kk kl km kn gu ng nf nh ni aw nj bi"><span id="fd84" class="me mf iu nf b gz nk nl l nm nn">[tool.poetry.extras]<br/>dbt_core = ["dbt-core"]<br/>pandas = ["pandas"]</span></pre><p id="3667" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">如果你想安装<code class="fe nc nd ne nf b">extras</code>，你只需要使用<code class="fe nc nd ne nf b">-E|--extras</code>选项:</p><pre class="kk kl km kn gu ng nf nh ni aw nj bi"><span id="5d87" class="me mf iu nf b gz nk nl l nm nn">poetry install --extras "dbt_core pandas"<br/>poetry install -E dbt_core -E pandas</span></pre></div><div class="ab cl lx ly hy lz" role="separator"><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc"/></div><div class="in io ip iq ir"><h2 id="cbae" class="me mf iu bd mg mh mi dn mj mk ml dp mm lj mn mo mp ln mq mr ms lr mt mu mv mw bi translated">保持依赖关系最新</h2><p id="56cc" class="pw-post-body-paragraph la lb iu lc b ld mx jv lf lg my jy li lj mz ll lm ln na lp lq lr nb lt lu lv in bi translated">既然我们已经学习了诗歌，以及如何利用诗歌来有效地管理包的依赖关系，那么强调你应该确保这些依赖关系不时地被更新是很重要的。</p><p id="bf65" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">这将确保您的源代码是安全的(因为许多包升级将减少安全漏洞)，具有尽可能少的错误，并且它还可以访问包的最新特性。</p><p id="3561" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">由于维护这样的过程相当困难——尤其是如果您的Python包有大量的依赖项——您可能不得不依赖能够自动更新依赖项的外部工具。</p><p id="aac5" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">如果您在GitHub上托管您的存储库，一个选择是<a class="ae kz" href="https://github.com/dependabot" rel="noopener ugc nofollow" target="_blank">dependent bot</a>，它可以自动搜索依赖项的最新更新并创建Pull请求。你所需要做的就是准备好良好的单元测试，以便能够捕获软件包更新可能引入的任何bug。</p></div><div class="ab cl lx ly hy lz" role="separator"><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc"/></div><div class="in io ip iq ir"><h2 id="b82e" class="me mf iu bd mg mh mi dn mj mk ml dp mm lj mn mo mp ln mq mr ms lr mt mu mv mw bi translated">最后的想法</h2><p id="f311" class="pw-post-body-paragraph la lb iu lc b ld mx jv lf lg my jy li lj mz ll lm ln na lp lq lr nb lt lu lv in bi translated">无论如何，您都必须为依赖项(也称为pin)指定特定的包版本。鉴于您的Python项目将有一组特定的需求，需要在运行它之前安装这些需求，因此使用能够简化依赖关系管理的工具非常重要。</p><p id="aca6" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">其中一个工具是poem——您可以使用它来安装、添加和删除依赖项，以及打包您的Python项目，以便它可以在PyPI上发布和分发，从而可以被更广泛的社区访问。</p></div><div class="ab cl lx ly hy lz" role="separator"><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc"/></div><div class="in io ip iq ir"><p id="1b77" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated"><a class="ae kz" href="https://gmyrianthous.medium.com/membership" rel="noopener"> <strong class="lc iv">成为会员</strong> </a> <strong class="lc iv">阅读介质上的每一个故事。你的会员费直接支持我和你看的其他作家。你也可以在媒体上看到所有的故事。</strong></p><div class="np nq gq gs nr ns"><a href="https://gmyrianthous.medium.com/membership" rel="noopener follow" target="_blank"><div class="nt ab fp"><div class="nu ab nv cl cj nw"><h2 class="bd iv gz z fq nx fs ft ny fv fx it bi translated">通过我的推荐链接加入Medium-Giorgos Myrianthous</h2><div class="nz l"><h3 class="bd b gz z fq nx fs ft ny fv fx dk translated">作为一个媒体会员，你的会员费的一部分会给你阅读的作家，你可以完全接触到每一个故事…</h3></div><div class="oa l"><p class="bd b dl z fq nx fs ft ny fv fx dk translated">gmyrianthous.medium.com</p></div></div><div class="ob l"><div class="oc l od oe of ob og kt ns"/></div></div></a></div></div><div class="ab cl lx ly hy lz" role="separator"><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc"/></div><div class="in io ip iq ir"><p id="676e" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated"><strong class="lc iv">相关文章你可能也喜欢</strong></p><div class="np nq gq gs nr ns"><a rel="noopener follow" target="_blank" href="/requirements-vs-setuptools-python-ae3ee66e28af"><div class="nt ab fp"><div class="nu ab nv cl cj nw"><h2 class="bd iv gz z fq nx fs ft ny fv fx it bi translated">Python中的requirements.txt与setup.py</h2><div class="nz l"><h3 class="bd b gz z fq nx fs ft ny fv fx dk translated">了解Python中requirements.txt、setup.py和setup.cfg在开发和分发时的用途…</h3></div><div class="oa l"><p class="bd b dl z fq nx fs ft ny fv fx dk translated">towardsdatascience.com</p></div></div><div class="ob l"><div class="oh l od oe of ob og kt ns"/></div></div></a></div></div><div class="ab cl lx ly hy lz" role="separator"><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc"/></div><div class="in io ip iq ir"><div class="kk kl km kn gu ns"><a rel="noopener follow" target="_blank" href="/setuptools-python-571e7d5500f2"><div class="nt ab fp"><div class="nu ab nv cl cj nw"><h2 class="bd iv gz z fq nx fs ft ny fv fx it bi translated">Python中的setup.py与setup.cfg</h2><div class="nz l"><h3 class="bd b gz z fq nx fs ft ny fv fx dk translated">使用setuptools管理依赖项和分发Python包</h3></div><div class="oa l"><p class="bd b dl z fq nx fs ft ny fv fx dk translated">towardsdatascience.com</p></div></div><div class="ob l"><div class="oi l od oe of ob og kt ns"/></div></div></a></div></div><div class="ab cl lx ly hy lz" role="separator"><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc"/></div><div class="in io ip iq ir"><div class="kk kl km kn gu ns"><a rel="noopener follow" target="_blank" href="/how-to-upload-your-python-package-to-pypi-de1b363a1b3"><div class="nt ab fp"><div class="nu ab nv cl cj nw"><h2 class="bd iv gz z fq nx fs ft ny fv fx it bi translated">如何将Python包上传到PyPI</h2><div class="oa l"><p class="bd b dl z fq nx fs ft ny fv fx dk translated">towardsdatascience.com</p></div></div><div class="ob l"><div class="oj l od oe of ob og kt ns"/></div></div></a></div></div></div>    
</body>
</html>