<html>
<head>
<title>What does if __name__ == ”__main__” do in Python?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Python 中 if __name__ == "__main__ "是做什么的？</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/python-main-b729fab7a8c3#2022-12-05">https://towardsdatascience.com/python-main-b729fab7a8c3#2022-12-05</a></blockquote><div><div class="fc ii ij ik il im"/><div class="in io ip iq ir"><div class=""/><div class=""><h2 id="b419" class="pw-subtitle-paragraph jr it iu bd b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki dk translated">Python 中主方法的执行时间和方式</h2></div><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj kj"><img src="../Images/e14e1431fbe3f189674f6411991043b0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*hPcAB-QbFcBhaK8G"/></div></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">由<a class="ae kz" href="https://unsplash.com/@blakeconnally" rel="noopener ugc nofollow" target="_blank">布莱克·康纳利</a>在<a class="ae kz" href="https://unsplash.com/photos/B3l0g6HLxr8" rel="noopener ugc nofollow" target="_blank">unsplash.com</a>拍摄的照片</p></figure><p id="8d64" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">如果您是 Python 的新手，您可能已经注意到，可以使用或不使用 main 方法来运行 Python 脚本。Python 中定义 one 的符号(即<code class="fe lw lx ly lz b">if __name__ == ‘__main__'</code>)显然不是一目了然的，尤其是对于新手来说。</p><p id="5d8f" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">在今天的教程中，我们将探索和讨论 main 方法的用途，以及在 Python 应用程序中定义一个 main 方法时会遇到什么情况。</p><h2 id="0fc6" class="ma mb iu bd mc md me dn mf mg mh dp mi lj mj mk ml ln mm mn mo lr mp mq mr ms bi translated"><code class="fe lw lx ly lz b">__name__</code>的目的是什么？</h2><p id="a21a" class="pw-post-body-paragraph la lb iu lc b ld mt jv lf lg mu jy li lj mv ll lm ln mw lp lq lr mx lt lu lv in bi translated">在执行程序之前，python 解释器将 Python 模块的名称赋给一个名为<code class="fe lw lx ly lz b">__name__</code>的特殊变量。根据您是通过命令行执行程序还是将模块导入另一个模块，<code class="fe lw lx ly lz b">__name__</code>的分配会有所不同。</p><p id="8702" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">例如，如果您将模块作为脚本调用</p><pre class="kk kl km kn gu my lz mz bn na nb bi"><span id="a750" class="nc mb iu lz b be nd ne l nf ng">python my_module.py</span></pre><p id="93b3" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">然后 Python 解释器会自动将字符串<code class="fe lw lx ly lz b">'__main__'</code>赋给特殊变量<code class="fe lw lx ly lz b">__name__</code>。另一方面，如果您的模块被导入到另一个模块中</p><pre class="kk kl km kn gu my lz mz bn na nb bi"><span id="3321" class="nc mb iu lz b be nd ne l nf ng"># Assume that this is another_module.py<br/>import my_module</span></pre><p id="78b7" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">那么字符串<code class="fe lw lx ly lz b">'my_module'</code>将被分配给<code class="fe lw lx ly lz b">__name__</code>。</p><h2 id="e5a9" class="ma mb iu bd mc md me dn mf mg mh dp mi lj mj mk ml ln mm mn mo lr mp mq mr ms bi translated">main 方法是如何工作的？</h2><p id="1a15" class="pw-post-body-paragraph la lb iu lc b ld mt jv lf lg mu jy li lj mv ll lm ln mw lp lq lr mx lt lu lv in bi translated">现在让我们假设我们有以下模块，它包含以下代码行:</p><pre class="kk kl km kn gu my lz mz bn na nb bi"><span id="c52e" class="nc mb iu lz b be nd ne l nf ng"># first_module.py<br/>print('Hello from first_module.py')<br/><br/>if __name__ == '__main__':<br/>    print('Hello from main method of first_module.py')</span></pre><p id="6e7b" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">所以在上面的模块中，我们有一个 print 语句在 main 方法之外，还有一个 print 语句在 main 方法之内。main 方法下的代码只有在模块作为脚本从命令行调用时才会被执行，如下所示:</p><pre class="kk kl km kn gu my lz mz bn na nb bi"><span id="ace7" class="nc mb iu lz b be nd ne l nf ng">python first_module.py<br/>Hello from first_module.py<br/>Hello from main method of first_module.py</span></pre><p id="1f87" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">现在，假设我们不是将模块<code class="fe lw lx ly lz b">first_module</code>作为脚本调用，而是想将其导入另一个模块:</p><pre class="kk kl km kn gu my lz mz bn na nb bi"><span id="93ca" class="nc mb iu lz b be nd ne l nf ng"># second_module.py<br/>import first_module<br/><br/>print('Hello from second_module.py')<br/><br/>if __name__ == '__main__':<br/>    print('Hello from main method of second_module.py')</span></pre><p id="2e8e" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">最后，我们调用<code class="fe lw lx ly lz b">second_module</code>作为脚本:</p><pre class="kk kl km kn gu my lz mz bn na nb bi"><span id="2c9c" class="nc mb iu lz b be nd ne l nf ng">python second_module.py<br/>Hello from first_module.py<br/>Hello from second_module.py<br/>Hello from main method of second_module.py</span></pre><p id="7908" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">注意，第一个输出来自模块<code class="fe lw lx ly lz b">first_module</code>，特别是来自 main 方法之外的 print 语句。因为我们没有将<code class="fe lw lx ly lz b">first_module</code>作为脚本调用，而是将其导入到了<code class="fe lw lx ly lz b">second_module</code>中，first_module 中的 main 方法将被忽略，因为<code class="fe lw lx ly lz b">if __name__ == ‘__main__'</code>的计算结果是<code class="fe lw lx ly lz b">False</code>。回想一下，在上面的调用中，<code class="fe lw lx ly lz b">second_module</code>的<code class="fe lw lx ly lz b">__name__</code>变量被赋予了字符串<code class="fe lw lx ly lz b">'__main__'</code>，而<code class="fe lw lx ly lz b">first_module</code>的<code class="fe lw lx ly lz b">__name__</code>变量被赋予了模块名，即<code class="fe lw lx ly lz b">’first_module’</code>。</p><p id="8250" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">虽然<code class="fe lw lx ly lz b">if __name__ == ‘__main__'</code>下的所有东西都被认为是我们所说的“main 方法”，但是定义一个适当的 main 方法是一个好的实践，如果条件评估为 True，就调用这个方法。举个例子，</p><pre class="kk kl km kn gu my lz mz bn na nb bi"><span id="36df" class="nc mb iu lz b be nd ne l nf ng"># my_module.py<br/>def main():<br/>    """The main function of my Python Application"""<br/>    print('Hello World')<br/><br/>if __name__ == '__main__': <br/>    main()</span></pre><p id="0e5a" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated"><em class="nh">注意:我通常不鼓励你在一个 Python 应用程序中使用多个主函数。为了举例，我使用了两种不同的主要方法。</em></p><h2 id="1231" class="ma mb iu bd mc md me dn mf mg mh dp mi lj mj mk ml ln mm mn mo lr mp mq mr ms bi translated">最后的想法</h2><p id="b274" class="pw-post-body-paragraph la lb iu lc b ld mt jv lf lg mu jy li lj mv ll lm ln mw lp lq lr mx lt lu lv in bi translated">在本文中，我描述了如何在 Python 中执行 main 方法，以及在什么条件下执行。当一个模块作为一个字符串被调用时，Python 解释器会将字符串<code class="fe lw lx ly lz b">'__main__'</code>赋给一个名为<code class="fe lw lx ly lz b">__name__</code>的特殊变量，然后在条件<code class="fe lw lx ly lz b">if __name__ == ‘__main__'</code>下定义的代码会被执行。另一方面，当一个模块被导入到另一个模块中时，Python 解释器会将带有该模块名称的字符串赋给特殊变量<code class="fe lw lx ly lz b">__name__</code>。这意味着在这种情况下,<code class="fe lw lx ly lz b">if __name__ == ‘__main__'</code>将评估为<code class="fe lw lx ly lz b">False</code>,这意味着一旦导入，只有该条件之外的代码才会被执行。</p></div><div class="ab cl ni nj hy nk" role="separator"><span class="nl bw bk nm nn no"/><span class="nl bw bk nm nn no"/><span class="nl bw bk nm nn"/></div><div class="in io ip iq ir"><p id="1b77" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated"><a class="ae kz" href="https://gmyrianthous.medium.com/membership" rel="noopener"> <strong class="lc iv">成为</strong> </a> <strong class="lc iv">会员，阅读媒体上的每一个故事。你的会员费直接支持我和你看的其他作家。你也可以在媒体上看到所有的故事。</strong></p><div class="np nq gq gs nr ns"><a href="https://gmyrianthous.medium.com/membership" rel="noopener follow" target="_blank"><div class="nt ab fp"><div class="nu ab nv cl cj nw"><h2 class="bd iv gz z fq nx fs ft ny fv fx it bi translated">通过我的推荐链接加入 Medium-Giorgos Myrianthous</h2><div class="nz l"><h3 class="bd b gz z fq nx fs ft ny fv fx dk translated">作为一个媒体会员，你的会员费的一部分会给你阅读的作家，你可以完全接触到每一个故事…</h3></div><div class="oa l"><p class="bd b dl z fq nx fs ft ny fv fx dk translated">gmyrianthous.medium.com</p></div></div><div class="ob l"><div class="oc l od oe of ob og kt ns"/></div></div></a></div></div><div class="ab cl ni nj hy nk" role="separator"><span class="nl bw bk nm nn no"/><span class="nl bw bk nm nn no"/><span class="nl bw bk nm nn"/></div><div class="in io ip iq ir"><p id="676e" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated"><strong class="lc iv">相关文章你可能也喜欢</strong></p><div class="np nq gq gs nr ns"><a rel="noopener follow" target="_blank" href="/args-kwargs-python-d9c71b220970"><div class="nt ab fp"><div class="nu ab nv cl cj nw"><h2 class="bd iv gz z fq nx fs ft ny fv fx it bi translated">* Python 中的 args 和**kwargs</h2><div class="nz l"><h3 class="bd b gz z fq nx fs ft ny fv fx dk translated">讨论位置参数和关键字参数之间的区别，以及如何在 Python 中使用*args 和**kwargs</h3></div><div class="oa l"><p class="bd b dl z fq nx fs ft ny fv fx dk translated">towardsdatascience.com</p></div></div><div class="ob l"><div class="oh l od oe of ob og kt ns"/></div></div></a></div></div><div class="ab cl ni nj hy nk" role="separator"><span class="nl bw bk nm nn no"/><span class="nl bw bk nm nn no"/><span class="nl bw bk nm nn"/></div><div class="in io ip iq ir"><div class="kk kl km kn gu ns"><a rel="noopener follow" target="_blank" href="/python-poetry-83f184ac9ed1"><div class="nt ab fp"><div class="nu ab nv cl cj nw"><h2 class="bd iv gz z fq nx fs ft ny fv fx it bi translated">用诗歌管理 Python 依赖关系</h2><div class="nz l"><h3 class="bd b gz z fq nx fs ft ny fv fx dk translated">依赖性管理和用诗歌打包</h3></div><div class="oa l"><p class="bd b dl z fq nx fs ft ny fv fx dk translated">towardsdatascience.com</p></div></div><div class="ob l"><div class="oi l od oe of ob og kt ns"/></div></div></a></div></div><div class="ab cl ni nj hy nk" role="separator"><span class="nl bw bk nm nn no"/><span class="nl bw bk nm nn no"/><span class="nl bw bk nm nn"/></div><div class="in io ip iq ir"><div class="kk kl km kn gu ns"><a rel="noopener follow" target="_blank" href="/pycache-python-991424aabad8"><div class="nt ab fp"><div class="nu ab nv cl cj nw"><h2 class="bd iv gz z fq nx fs ft ny fv fx it bi translated">Python 中 __pycache__ 是什么？</h2><div class="nz l"><h3 class="bd b gz z fq nx fs ft ny fv fx dk translated">了解运行 Python 代码时创建的 __pycache__ 文件夹</h3></div><div class="oa l"><p class="bd b dl z fq nx fs ft ny fv fx dk translated">towardsdatascience.com</p></div></div><div class="ob l"><div class="oj l od oe of ob og kt ns"/></div></div></a></div></div></div>    
</body>
</html>