<html>
<head>
<title>Understanding the native R pipe |&gt;</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">了解原生R管道| &gt;</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/understanding-the-native-r-pipe-98dea6d8b61b#2022-02-05">https://towardsdatascience.com/understanding-the-native-r-pipe-98dea6d8b61b#2022-02-05</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="588d" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">或者，为什么mtcars |&gt; plot(hp，mpg)不行，你能做些什么。</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/788371f1be6a4127c06ce7cceda8bbf7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*pnjfZFqrY1opjEVNOSjcSg.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">如何用新的原生R管出图(自制图)</p></figure><h2 id="3853" class="kv kw iq bd kx ky kz dn la lb lc dp ld le lf lg lh li lj lk ll lm ln lo lp lq bi translated">带原生R管的功能组合</h2><p id="b45a" class="pw-post-body-paragraph lr ls iq lt b lu lv jr lw lx ly ju lz le ma mb mc li md me mf lm mg mh mi mj ij bi translated">不久前，我写了<a class="ae mk" href="https://mobile.twitter.com/ivelasq3/status/1404947187155574787" rel="noopener ugc nofollow" target="_blank">这篇推文</a>展示了许多(不是全部！)使用R在数据框中搜索一组特定列的方法。这些方法中有几种使用了{magrittr}管道(<code class="fe ml mm mn mo b">%&gt;%</code>)和本机R管道(<code class="fe ml mm mn mo b">|&gt;</code>)，后者从R版本4.1.0开始就可用。{ magrittr }和native R管道以不同的方式工作，每个人的心理模型都需要一些维护。这是我如何学会理解原生R管的故事。</p><h2 id="3056" class="kv kw iq bd kx ky kz dn la lb lc dp ld le lf lg lh li lj lk ll lm ln lo lp lq bi translated">懒惰是如何引发这篇文章的</h2><p id="bbbf" class="pw-post-body-paragraph lr ls iq lt b lu lv jr lw lx ly ju lz le ma mb mc li md me mf lm mg mh mi mj ij bi translated">当我感到懒惰的时候，我用基数R进行快速绘图:</p><pre class="kg kh ki kj gt mp mo mq mr aw ms bi"><span id="4e9e" class="kv kw iq mo b gy mt mu l mv mw">plot(mtcars$hp, mtcars$mpg)</span></pre><p id="1201" class="pw-post-body-paragraph lr ls iq lt b lu mx jr lw lx my ju lz le mz mb mc li na me mf lm nb mh mi mj ij bi translated">因为与{ggplot2}方案相比，这显然节省了大量时间🤣：</p><pre class="kg kh ki kj gt mp mo mq mr aw ms bi"><span id="7d1a" class="kv kw iq mo b gy mt mu l mv mw">library(ggplot2)<br/>library(magrittr)<br/><br/>mtcars %&gt;%<br/>  ggplot(aes(x = hp, y = mpg)) +<br/>  geom_point()</span></pre><p id="f528" class="pw-post-body-paragraph lr ls iq lt b lu mx jr lw lx my ju lz le mz mb mc li na me mf lm nb mh mi mj ij bi translated">有一天，我觉得特别懒，所以我试着用新的原生R管<code class="fe ml mm mn mo b">|&gt;</code>:</p><pre class="kg kh ki kj gt mp mo mq mr aw ms bi"><span id="7b6c" class="kv kw iq mo b gy mt mu l mv mw">mtcars |&gt; plot(hp, mpg)<br/>#&gt; Error in get(as.character(FUN), mode = "function", envir = envir) :<br/>#&gt; object 'mpg' of mode 'function' was not found</span></pre><p id="4389" class="pw-post-body-paragraph lr ls iq lt b lu mx jr lw lx my ju lz le mz mb mc li na me mf lm nb mh mi mj ij bi translated">哦不！为什么是错误？</p><p id="bdea" class="pw-post-body-paragraph lr ls iq lt b lu mx jr lw lx my ju lz le mz mb mc li na me mf lm nb mh mi mj ij bi translated">完全是对原生R管的误解。我认为用原生R管道传输数据将取代对<code class="fe ml mm mn mo b">data$column</code>符号的需求。原来，这根本不是原生R管道所做的。所以，这种偷懒的尝试最终导致了一次冒险，那就是找出为什么这不起作用，以及什么可以替代。</p><h2 id="4975" class="kv kw iq bd kx ky kz dn la lb lc dp ld le lf lg lh li lj lk ll lm ln lo lp lq bi translated">{马格里特}烟斗<code class="fe ml mm mn mo b">%&gt;%</code>的工作原理</h2><p id="da16" class="pw-post-body-paragraph lr ls iq lt b lu lv jr lw lx ly ju lz le ma mb mc li md me mf lm mg mh mi mj ij bi translated">首先，让我们检查一下您可能更熟悉的管道(如果您使用{tidyverse}方言):来自{ magrittr }包的<code class="fe ml mm mn mo b">%&gt;%</code>转发管道。</p><p id="3014" class="pw-post-body-paragraph lr ls iq lt b lu mx jr lw lx my ju lz le mz mb mc li na me mf lm nb mh mi mj ij bi translated">在没有任何点语法(<code class="fe ml mm mn mo b">.</code>)的情况下，{ magrittr }管道<code class="fe ml mm mn mo b">%&gt;%</code>是一个<a class="ae mk" href="https://en.wikipedia.org/wiki/Infix_notation" rel="noopener ugc nofollow" target="_blank">中缀运算符</a>，它将管道左侧(LHS)的内容输送(移动)到管道右侧(RHS)的函数的第一个参数中。由于R易于使用带有许多嵌套括号的表达式，管道允许人们从左到右推理代码(如用英语编写时)，而不是从右到左推理带有许多嵌套括号的代码(见下面的例子)。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nd ne l"/></div></figure><p id="25e8" class="pw-post-body-paragraph lr ls iq lt b lu mx jr lw lx my ju lz le mz mb mc li na me mf lm nb mh mi mj ij bi translated">根据{ magrittr }文档，管道的用法如下:<code class="fe ml mm mn mo b">LHS %&gt;% RHS</code>。可能更容易将“管道”视为超级马里奥兄弟中著名的“扭曲管道”之一——它将LHS中的马里奥扭曲到RHS函数的第一个参数中！</p><p id="fe47" class="pw-post-body-paragraph lr ls iq lt b lu mx jr lw lx my ju lz le mz mb mc li na me mf lm nb mh mi mj ij bi translated">所以:</p><pre class="kg kh ki kj gt mp mo mq mr aw ms bi"><span id="74ac" class="kv kw iq mo b gy mt mu l mv mw">mtcars2 &lt;-<br/>  mtcars %&gt;%<br/>  dplyr::mutate(hi_mpg = dplyr::if_else(mpg &gt; 25, "high", "low"))</span></pre><p id="203e" class="pw-post-body-paragraph lr ls iq lt b lu mx jr lw lx my ju lz le mz mb mc li na me mf lm nb mh mi mj ij bi translated">相当于:</p><pre class="kg kh ki kj gt mp mo mq mr aw ms bi"><span id="6de9" class="kv kw iq mo b gy mt mu l mv mw">mtcars2 &lt;-<br/>  dplyr::mutate(mtcars, hi_mpg = dplyr::if_else(mpg &gt; 25, "high", "low"))</span></pre><p id="e7e0" class="pw-post-body-paragraph lr ls iq lt b lu mx jr lw lx my ju lz le mz mb mc li na me mf lm nb mh mi mj ij bi translated">而且，</p><pre class="kg kh ki kj gt mp mo mq mr aw ms bi"><span id="52f6" class="kv kw iq mo b gy mt mu l mv mw">mtcars %&gt;% plot(hp, mpg)</span></pre><p id="5d7c" class="pw-post-body-paragraph lr ls iq lt b lu mx jr lw lx my ju lz le mz mb mc li na me mf lm nb mh mi mj ij bi translated">相当于:</p><pre class="kg kh ki kj gt mp mo mq mr aw ms bi"><span id="4326" class="kv kw iq mo b gy mt mu l mv mw">plot(mtcars, hp, mpg)<br/><br/># or, more explicitly<br/>plot(x = mtcars, y = hp, type = mpg)</span></pre><p id="274a" class="pw-post-body-paragraph lr ls iq lt b lu mx jr lw lx my ju lz le mz mb mc li na me mf lm nb mh mi mj ij bi translated">这不起作用，并给我们一个错误消息，因为<code class="fe ml mm mn mo b">plot()</code>的前两个参数应该是x轴和y轴的对象(<code class="fe ml mm mn mo b">mtcars</code>是一个奇数x轴，但在技术上是可行的)，第三个参数是绘图的类型(<code class="fe ml mm mn mo b">mpg</code>肯定在那里不起作用)。</p><p id="d2bc" class="pw-post-body-paragraph lr ls iq lt b lu mx jr lw lx my ju lz le mz mb mc li na me mf lm nb mh mi mj ij bi translated">如果您希望将LHS传递到{ magrittr }管道的第一个参数以外的地方，您可以使用它的点语法(<code class="fe ml mm mn mo b">.</code> ): <code class="fe ml mm mn mo b">y %&gt;% f(x, .)</code>相当于<code class="fe ml mm mn mo b">f(x, y)</code>。</p><pre class="kg kh ki kj gt mp mo mq mr aw ms bi"><span id="243b" class="kv kw iq mo b gy mt mu l mv mw">mtcars %&gt;%<br/>  lm(mpg ~ hp, data = .)</span></pre><p id="ad36" class="pw-post-body-paragraph lr ls iq lt b lu mx jr lw lx my ju lz le mz mb mc li na me mf lm nb mh mi mj ij bi translated">相当于:</p><pre class="kg kh ki kj gt mp mo mq mr aw ms bi"><span id="b5f0" class="kv kw iq mo b gy mt mu l mv mw">lm(mpg ~ hp, data = mtcars)</span></pre><p id="6540" class="pw-post-body-paragraph lr ls iq lt b lu mx jr lw lx my ju lz le mz mb mc li na me mf lm nb mh mi mj ij bi translated">那么，我们如何让{ magrittr }管道与<code class="fe ml mm mn mo b">plot()</code>一起工作呢？我们可以使用点语法作为数据框的占位符。然而，这也不起作用:</p><pre class="kg kh ki kj gt mp mo mq mr aw ms bi"><span id="f5e4" class="kv kw iq mo b gy mt mu l mv mw">mtcars %&gt;% plot(.$hp, .$mpg)<br/>#&gt; Error in match.fun(panel) :<br/>#&gt; '.$mpg' is not a function, character or symbol</span></pre><p id="f8eb" class="pw-post-body-paragraph lr ls iq lt b lu mx jr lw lx my ju lz le mz mb mc li na me mf lm nb mh mi mj ij bi translated">为什么？该错误提示<code class="fe ml mm mn mo b">.$mpg</code>步骤有问题。[1]默认情况下，{ magrittr }管道将LHS传递给RHS的第一个参数，因此给出上述错误的调用相当于编写:</p><pre class="kg kh ki kj gt mp mo mq mr aw ms bi"><span id="82de" class="kv kw iq mo b gy mt mu l mv mw">plot(mtcars, mtcars$hp, mtcars$mpg)<br/><br/># or, more explicitly<br/>plot(x = mtcars, y = mtcars$hp, type = mtcars$mpg)</span></pre><p id="0d91" class="pw-post-body-paragraph lr ls iq lt b lu mx jr lw lx my ju lz le mz mb mc li na me mf lm nb mh mi mj ij bi translated">这不工作，也不是我们想要的(我们想让<code class="fe ml mm mn mo b">mtcars$hp</code>在x轴上，而<code class="fe ml mm mn mo b">mtcars$mpg</code>在y轴上)。让{ magrittr }管道做我们想要的<code class="fe ml mm mn mo b">plot()</code>的方法是使用它的花括号<code class="fe ml mm mn mo b">{}</code>语法。通过用花括号将RHS括起来，我们可以覆盖将LHS传递给第一个参数的规则:</p><pre class="kg kh ki kj gt mp mo mq mr aw ms bi"><span id="38da" class="kv kw iq mo b gy mt mu l mv mw">mtcars %&gt;% {plot(.$hp, .$mpg)}</span></pre><p id="c94b" class="pw-post-body-paragraph lr ls iq lt b lu mx jr lw lx my ju lz le mz mb mc li na me mf lm nb mh mi mj ij bi translated">这个管用！这相当于写了:</p><pre class="kg kh ki kj gt mp mo mq mr aw ms bi"><span id="a840" class="kv kw iq mo b gy mt mu l mv mw">plot(mtcars$hp, mtcars$mpg)</span></pre><p id="5091" class="pw-post-body-paragraph lr ls iq lt b lu mx jr lw lx my ju lz le mz mb mc li na me mf lm nb mh mi mj ij bi translated">好吧！现在，我们可以将我们所学的应用到原生R管道。对吗？…对吗？</p><h2 id="a3a0" class="kv kw iq bd kx ky kz dn la lb lc dp ld le lf lg lh li lj lk ll lm ln lo lp lq bi translated">实际上，我认为在解释<code class="fe ml mm mn mo b">|&gt;</code>如何工作之前，我们需要绕道来解释匿名(LAMBDA)函数</h2><p id="c17e" class="pw-post-body-paragraph lr ls iq lt b lu lv jr lw lx ly ju lz le ma mb mc li md me mf lm mg mh mi mj ij bi translated">为什么匿名？因为它们不是包中的命名函数，也不是您编写并存储在函数对象中的函数。匿名函数是动态创建的，可以立即应用，并且在使用后不会持久:<code class="fe ml mm mn mo b">function(x) {}</code>。</p><pre class="kg kh ki kj gt mp mo mq mr aw ms bi"><span id="eaa6" class="kv kw iq mo b gy mt mu l mv mw">function(x) {<br/>  x[which.max(x$mpg), ]<br/>}</span></pre><p id="afbf" class="pw-post-body-paragraph lr ls iq lt b lu mx jr lw lx my ju lz le mz mb mc li na me mf lm nb mh mi mj ij bi translated">这是做什么的？如果没有保存到对象中，它会创建一个匿名函数(也称为lambda函数)。</p><p id="0541" class="pw-post-body-paragraph lr ls iq lt b lu mx jr lw lx my ju lz le mz mb mc li na me mf lm nb mh mi mj ij bi translated">在R 4.1中引入的匿名函数的快捷方式<code class="fe ml mm mn mo b">\(x) {}</code>与<code class="fe ml mm mn mo b">function(x) {}</code>相同:</p><pre class="kg kh ki kj gt mp mo mq mr aw ms bi"><span id="08b0" class="kv kw iq mo b gy mt mu l mv mw"># equivalent to the above<br/>\(x) {<br/>  x[which.max(x$mpg), ]<br/>}</span></pre><p id="c4cd" class="pw-post-body-paragraph lr ls iq lt b lu mx jr lw lx my ju lz le mz mb mc li na me mf lm nb mh mi mj ij bi translated">你从编写匿名函数中得到的好处是，你可以通过显式地声明输入以及如何在函数中使用它们来引导流量。回到我们对管道的讨论，你可以准确地指出管道的LHS在RHS中的位置。</p><h2 id="742c" class="kv kw iq bd kx ky kz dn la lb lc dp ld le lf lg lh li lj lk ll lm ln lo lp lq bi translated">原生R管如何工作</h2><p id="67ba" class="pw-post-body-paragraph lr ls iq lt b lu lv jr lw lx ly ju lz le ma mb mc li md me mf lm mg mh mi mj ij bi translated">像{ magrittr }管道<code class="fe ml mm mn mo b">%&gt;%</code>一样，本机R管道<code class="fe ml mm mn mo b">|&gt;</code>将LHS管道到RHS上函数的第一个参数:<code class="fe ml mm mn mo b">LHS |&gt; RHS</code>。</p><p id="bb74" class="pw-post-body-paragraph lr ls iq lt b lu mx jr lw lx my ju lz le mz mb mc li na me mf lm nb mh mi mj ij bi translated">你可以写:</p><pre class="kg kh ki kj gt mp mo mq mr aw ms bi"><span id="42d3" class="kv kw iq mo b gy mt mu l mv mw">mtcars |&gt; sqrt() |&gt; head()</span></pre><p id="b67c" class="pw-post-body-paragraph lr ls iq lt b lu mx jr lw lx my ju lz le mz mb mc li na me mf lm nb mh mi mj ij bi translated">这相当于:</p><pre class="kg kh ki kj gt mp mo mq mr aw ms bi"><span id="f929" class="kv kw iq mo b gy mt mu l mv mw">head(sqrt(mtcars))</span></pre><p id="a0d1" class="pw-post-body-paragraph lr ls iq lt b lu mx jr lw lx my ju lz le mz mb mc li na me mf lm nb mh mi mj ij bi translated">一个重要的注意事项:在<code class="fe ml mm mn mo b">|&gt;</code>的RHS上，您需要将函数作为函数调用包含进来，这意味着在函数名的末尾附加一个<code class="fe ml mm mn mo b">()</code>，而不仅仅是它的名字。例如，通过编写<code class="fe ml mm mn mo b">sqrt()</code>来调用平方根函数。如果你试图运行<code class="fe ml mm mn mo b">mtcars |&gt; sqrt</code>而不运行最后的<code class="fe ml mm mn mo b">()</code>，你将得到一个错误:<code class="fe ml mm mn mo b">Error: The pipe operator requires a function call as RHS</code>。</p><p id="edde" class="pw-post-body-paragraph lr ls iq lt b lu mx jr lw lx my ju lz le mz mb mc li na me mf lm nb mh mi mj ij bi translated">因此，本机R管道将LHS通过管道传递到RHS上函数的第一个参数中(额外要求需要RHS上的函数调用)。<strong class="lt ir">但仅此而已！</strong>如果你想做任何事情<em class="nc">而不是</em>将LHS引入RHS函数的第一个参数，那么你需要上面介绍的特殊匿名函数语法。</p><p id="257c" class="pw-post-body-paragraph lr ls iq lt b lu mx jr lw lx my ju lz le mz mb mc li na me mf lm nb mh mi mj ij bi translated">这里的一个问题是，我们还需要在匿名函数周围写括号，这样上面的伪代码版本就是<code class="fe ml mm mn mo b">mtcars |&gt; (anonymous-function-definition)()</code>。这样做的原因是第二组<code class="fe ml mm mn mo b">()</code>正确地指向第一组<code class="fe ml mm mn mo b">()</code>内部的复杂表达式作为被调用的函数。[2] [3]</p><pre class="kg kh ki kj gt mp mo mq mr aw ms bi"><span id="7e8c" class="kv kw iq mo b gy mt mu l mv mw">mtcars |&gt; (\(x) {<br/>   x[which.max(x$mpg), ]<br/>})()</span></pre><p id="d609" class="pw-post-body-paragraph lr ls iq lt b lu mx jr lw lx my ju lz le mz mb mc li na me mf lm nb mh mi mj ij bi translated">回想我们对{ magrittr }管道<code class="fe ml mm mn mo b">%&gt;%</code>的了解，您可能会尝试使用点语法(<code class="fe ml mm mn mo b">.</code>)。最后一个重要注意事项是，点语法不适用于原生R管道<code class="fe ml mm mn mo b">|&gt;</code>,因为点语法是{magrittr}的特性，而不是base R的特性。例如:</p><pre class="kg kh ki kj gt mp mo mq mr aw ms bi"><span id="1841" class="kv kw iq mo b gy mt mu l mv mw">mtcars %&gt;% plot(.$hp)</span></pre><p id="2d6d" class="pw-post-body-paragraph lr ls iq lt b lu mx jr lw lx my ju lz le mz mb mc li na me mf lm nb mh mi mj ij bi translated">但是这并没有，因为本地R管道不支持点语法:</p><pre class="kg kh ki kj gt mp mo mq mr aw ms bi"><span id="46af" class="kv kw iq mo b gy mt mu l mv mw">mtcars |&gt; plot(.$hp)<br/>#&gt; Error in pairs.default(data.matrix(x), ...) : object '.' not found</span></pre><p id="8eb5" class="pw-post-body-paragraph lr ls iq lt b lu mx jr lw lx my ju lz le mz mb mc li na me mf lm nb mh mi mj ij bi translated">但是，如果你创建了一个匿名函数，你可以决定输入参数的名字是什么，是<code class="fe ml mm mn mo b">.</code>、<code class="fe ml mm mn mo b">x</code>、<code class="fe ml mm mn mo b">data</code>，任何东西！因此，如果您受限于{ magrittr }中的点语法，您可以使用<code class="fe ml mm mn mo b">\(.) {}</code>来“引导”您自己的点语法。</p><p id="d326" class="pw-post-body-paragraph lr ls iq lt b lu mx jr lw lx my ju lz le mz mb mc li na me mf lm nb mh mi mj ij bi translated">总之，本机R管道不支持点语法，除非您明确定义了自己的语法。</p><h2 id="3fac" class="kv kw iq bd kx ky kz dn la lb lc dp ld le lf lg lh li lj lk ll lm ln lo lp lq bi translated">找到解决方案</h2><p id="f6f0" class="pw-post-body-paragraph lr ls iq lt b lu lv jr lw lx ly ju lz le ma mb mc li md me mf lm mg mh mi mj ij bi translated">最后，我们得到了解决方案:要让原生R管道做我们想用<code class="fe ml mm mn mo b">plot()</code>做的事情，我们需要使用一个匿名函数，并为我们自己引导点语法(或任何其他参数名):</p><pre class="kg kh ki kj gt mp mo mq mr aw ms bi"><span id="6a6c" class="kv kw iq mo b gy mt mu l mv mw"># verbosely<br/>mtcars |&gt; (function(.) plot(.$hp, .$mpg))()<br/><br/># using the anonymous function shortcut, emulating the dot syntax<br/>mtcars |&gt; (\(.) plot(.$hp, .$mpg))()<br/><br/># or if you prefer x to .<br/>mtcars |&gt; (\(x) plot(x$hp, x$mpg))()<br/><br/># or if you prefer to be explicit with argument names<br/>mtcars |&gt; (\(data) plot(data$hp, data$mpg))()</span></pre><p id="5109" class="pw-post-body-paragraph lr ls iq lt b lu mx jr lw lx my ju lz le mz mb mc li na me mf lm nb mh mi mj ij bi translated">就是这样！🎉这是可以做到的，但是最初偷懒的尝试最终花费的时间比最初预计的要多得多。俗话说，“一管及时省九”。</p><h2 id="7a65" class="kv kw iq bd kx ky kz dn la lb lc dp ld le lf lg lh li lj lk ll lm ln lo lp lq bi translated">真正的懒惰方式</h2><p id="69cb" class="pw-post-body-paragraph lr ls iq lt b lu lv jr lw lx ly ju lz le ma mb mc li md me mf lm mg mh mi mj ij bi translated">这是对<code class="fe ml mm mn mo b">%&gt;%</code>和<code class="fe ml mm mn mo b">|&gt;</code>管道如何工作的探索，但是我们还有另一个选择！{ magritter }<strong class="lt ir">exposition pipe</strong><code class="fe ml mm mn mo b">%$%</code>将LHS中的名字“暴露”给RHS表达式。</p><p id="c316" class="pw-post-body-paragraph lr ls iq lt b lu mx jr lw lx my ju lz le mz mb mc li na me mf lm nb mh mi mj ij bi translated">所以，像我这样懒惰的{ magrittr }用户的赢家是:</p><pre class="kg kh ki kj gt mp mo mq mr aw ms bi"><span id="1893" class="kv kw iq mo b gy mt mu l mv mw">mtcars %$% plot(hp, mpg)</span></pre><p id="b521" class="pw-post-body-paragraph lr ls iq lt b lu mx jr lw lx my ju lz le mz mb mc li na me mf lm nb mh mi mj ij bi translated">没有点语法，没有花括号，没有匿名函数，没有终端函数调用，只有管道和列名！它有效地模拟了如果<code class="fe ml mm mn mo b">plot()</code>是一个{tidyverse}函数，它将如何工作。</p><p id="eff4" class="pw-post-body-paragraph lr ls iq lt b lu mx jr lw lx my ju lz le mz mb mc li na me mf lm nb mh mi mj ij bi translated">说真的，所有pipe用户都是赢家！正如排列图tweet中所示，我们有许多选择来做我们想用r做的事情。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nd ne l"/></div></figure><h2 id="860a" class="kv kw iq bd kx ky kz dn la lb lc dp ld le lf lg lh li lj lk ll lm ln lo lp lq bi translated">更多资源</h2><ul class=""><li id="12fc" class="nf ng iq lt b lu lv lx ly le nh li ni lm nj mj nk nl nm nn bi translated"><a class="ae mk" href="https://magrittr.tidyverse.org/reference/pipe.html" rel="noopener ugc nofollow" target="_blank">{马格里特}前钻杆操作员帮助文档</a>(或R控制台中的<code class="fe ml mm mn mo b">?"%&gt;%"</code>)</li><li id="c611" class="nf ng iq lt b lu no lx np le nq li nr lm ns mj nk nl nm nn bi translated"><a class="ae mk" href="https://stat.ethz.ch/R-manual/R-devel/library/base/html/pipeOp.html" rel="noopener ugc nofollow" target="_blank">前钻杆操作员帮助文件</a>(或R控制台中的<code class="fe ml mm mn mo b">?pipeOp</code></li><li id="f0fc" class="nf ng iq lt b lu no lx np le nq li nr lm ns mj nk nl nm nn bi translated"><a class="ae mk" href="https://adv-r.hadley.nz/functions.html" rel="noopener ugc nofollow" target="_blank">高级R中的功能章节</a></li></ul><h2 id="86e4" class="kv kw iq bd kx ky kz dn la lb lc dp ld le lf lg lh li lj lk ll lm ln lo lp lq bi translated">那些走到这一步的人会得到额外的奖励</h2><p id="15db" class="pw-post-body-paragraph lr ls iq lt b lu lv jr lw lx ly ju lz le ma mb mc li md me mf lm mg mh mi mj ij bi translated">如何用提议的原生R管道绑定<code class="fe ml mm mn mo b">=&gt;</code>语法做到这一点？一旦你有了答案，请回复我关于这篇博文的推文。</p><p id="810a" class="pw-post-body-paragraph lr ls iq lt b lu mx jr lw lx my ju lz le mz mb mc li na me mf lm nb mh mi mj ij bi translated">[1]在没有参数<code class="fe ml mm mn mo b">mtcars %&gt;% plot(.$hp)</code>的情况下运行同一行，确实没有错误(但是这不是我们想要的图，因为它使用<code class="fe ml mm mn mo b">mtcars</code>作为第一个参数，如上所述)。</p><p id="8239" class="pw-post-body-paragraph lr ls iq lt b lu mx jr lw lx my ju lz le mz mb mc li na me mf lm nb mh mi mj ij bi translated">【2】第一个表达式的花括号，<code class="fe ml mm mn mo b">{}()</code>，工作太:<code class="fe ml mm mn mo b">mtcars |&gt; {\(x) {x[which.max(x$mpg),]}}()</code>。参见Ronak Shah在这个<a class="ae mk" href="https://stackoverflow.com/questions/67633022/what-are-the-differences-between-rs-new-native-pipe-and-the-magrittr-pipe/67638063#67638063" rel="noopener ugc nofollow" target="_blank"> StackOverflow线程</a>中的回复。</p><p id="4271" class="pw-post-body-paragraph lr ls iq lt b lu mx jr lw lx my ju lz le mz mb mc li na me mf lm nb mh mi mj ij bi translated">[3]或者更多关于这方面的信息，请参见Q2及其在<a class="ae mk" href="https://advanced-r-solutions.rbind.io/functions.html" rel="noopener ugc nofollow" target="_blank">高级研发解决方案</a>的“功能”一章中的回答。</p><p id="e6a3" class="pw-post-body-paragraph lr ls iq lt b lu mx jr lw lx my ju lz le mz mb mc li na me mf lm nb mh mi mj ij bi translated">本文原载于2021年1月18日<a class="ae mk" href="https://ivelasq.rbind.io/blog/understanding-the-r-pipe/" rel="noopener ugc nofollow" target="_blank"> % &gt; % dreams </a>。</p></div></div>    
</body>
</html>