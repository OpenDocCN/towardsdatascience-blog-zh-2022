<html>
<head>
<title>How to test ML models in the real world</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在现实世界中测试ML模型</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/how-to-test-ml-models-in-the-real-world-e83bf223d340#2022-06-03">https://towardsdatascience.com/how-to-test-ml-models-in-the-real-world-e83bf223d340#2022-06-03</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="7b15" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">从标准ML度量到生产</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/9d6e22001728d9d8c223015b0c8bf40b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9TlD7Tj5NRoxatazkZiHfA.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">墨西哥城圣Á天使(图片作者)</p></figure><p id="f55d" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">你多久在Jupyter笔记本上测试一次ML模型，得到好的结果，但是仍然不能说服你的老板立即使用这个模型？</p><p id="8b45" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">或者，也许你设法说服了她，并把模型投入生产，但你没有看到对业务指标的任何影响？</p><p id="011e" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">幸运的是，有更好的方法在现实世界中测试ML模型，并让每个人(包括你)相信它们为企业增加了价值。</p><p id="c1eb" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">在本文中，您将了解这些评估方法是什么，如何实现它们，以及何时应该使用每种方法。</p><h1 id="91b6" class="lu lv it bd lw lx ly lz ma mb mc md me jz mf ka mg kc mh kd mi kf mj kg mk ml bi translated">标准ML评估指标的问题</h1><p id="a954" class="pw-post-body-paragraph ky kz it la b lb mm ju ld le mn jx lg lh mo lj lk ll mp ln lo lp mq lr ls lt im bi translated">我们，数据科学家和ML工程师，在我们的本地开发环境中开发和测试ML模型，例如，Jupyter笔记本。</p><p id="c561" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">根据我们试图解决的问题类型，我们使用标准的ML评估指标:</p><ul class=""><li id="a584" class="mr ms it la b lb lc le lf lh mt ll mu lp mv lt mw mx my mz bi translated">如果这是一个回归问题，我们打印的东西，如均方差，胡伯损失等。</li><li id="1548" class="mr ms it la b lb na le nb lh nc ll nd lp ne lt mw mx my mz bi translated">如果是分类问题，我们打印混淆矩阵、准确度、精确度、召回率等。</li></ul><p id="865d" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我们将数据拆分为一个训练集和一个测试集，其中前者用于训练模型(即找到模型参数)，后者用于评估其性能。训练集和测试集是不相交的，以保证我们的评估指标不会有偏差和过于乐观。</p><p id="5170" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">问题是，这些数字对我们周围的非ML人员几乎没有意义，包括那些最终发号施令并优先考虑哪些软件进入生产的人，包括我们的ML模型。</p><p id="e753" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">换句话说，这不是测试ML模型并让其他人相信它们有效的最佳方式。</p><h2 id="cc7c" class="nf lv it bd lw ng nh dn ma ni nj dp me lh nk nl mg ll nm nn mi lp no np mk nq bi translated">为什么会这样呢？</h2><p id="5cfe" class="pw-post-body-paragraph ky kz it la b lb mm ju ld le mn jx lg lh mo lj lk ll mp ln lo lp mq lr ls lt im bi translated">因为两个原因:</p><ol class=""><li id="74ad" class="mr ms it la b lb lc le lf lh mt ll mu lp mv lt nr mx my mz bi translated">这些指标不是业务指标，而是抽象的。</li><li id="f174" class="mr ms it la b lb na le nb lh nc ll nd lp ne lt nr mx my mz bi translated">不能保证一旦部署，您的ML将根据您的标准度量按预期工作，因为在生产中许多事情可能出错。</li></ol><p id="cd4e" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">最终，为了测试ML模型，您需要在生产中运行它们并监控它们的性能。然而，遵循将模型直接从Jupyter笔记本转移到生产的策略远非最佳。</p><p id="e9f1" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">这个原则适用于任何软件，但是对于ML模型尤其重要，因为它们非常脆弱。</p><p id="ea0c" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">接下来的问题是，我们如何安全地走从本地标准度量到生产的道路？</p><p id="d033" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">在直接投入生产之前，你至少可以做三件事:</p><ul class=""><li id="8793" class="mr ms it la b lb lc le lf lh mt ll mu lp mv lt mw mx my mz bi translated">回溯测试您的模型</li><li id="0da3" class="mr ms it la b lb na le nb lh nc ll nd lp ne lt mw mx my mz bi translated">影子部署您的模型</li><li id="db48" class="mr ms it la b lb na le nb lh nc ll nd lp ne lt mw mx my mz bi translated">A/B测试您的模型</li></ul><p id="19af" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">它们代表了对模型进行正确评估的渐进步骤，可以帮助您和团队安全地部署ML模型，并为业务增加增值。</p><p id="639a" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">让我们用一个例子来看看这些评估方法是如何工作的。</p><h1 id="d010" class="lu lv it bd lw lx ly lz ma mb mc md me jz mf ka mg kc mh kd mi kf mj kg mk ml bi translated">方法1:回溯测试您的ML模型</h1><p id="81be" class="pw-post-body-paragraph ky kz it la b lb mm ju ld le mn jx lg lh mo lj lk ll mp ln lo lp mq lr ls lt im bi translated">回溯测试是一种评估ML模型的廉价方法，可以在开发环境中实现。</p><p id="2c14" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">为什么便宜？</p><p id="258f" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">因为</p><ul class=""><li id="1060" class="mr ms it la b lb lc le lf lh mt ll mu lp mv lt mw mx my mz bi translated">您只使用历史数据，因此您不需要比现有数据更多的数据。</li><li id="a3d8" class="mr ms it la b lb na le nb lh nc ll nd lp ne lt mw mx my mz bi translated">您不需要经历一个部署过程，这可能需要时间和多次迭代才能正确完成。</li></ul><p id="db9e" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">回溯测试背后的想法非常简单:</p><p id="aa0d" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">你选择一个过去的日期<strong class="la iu"> D </strong>,作为你用来训练/测试你的ML模型的数据和你用来估计假设模型如果被用来采取行动会对业务指标产生的影响的数据之间的截止日期。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ns"><img src="../Images/747ac31ffb44ec57d72fcdcbd0a5d76c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1234/format:webp/0*cEc5tzCZiX4QAXeG.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">回测你的ML模型(图片由作者提供)</p></figure><p id="c2dc" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">例如，假设您在一家金融贸易公司担任ML开发人员。</p><p id="65e4" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">该公司管理不同资产(股票、债券、密码、商品……)的投资组合。给定所有这些资产的大量价格数据，你认为你可以建立一个ML模型，该模型可以很好地预测价格变化，即每种资产的价格在第二天是上涨还是下跌。</p><p id="ce14" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">使用这种预测ML模型，公司可以调整其投资组合头寸，并最终提高其盈利能力。</p><p id="a9b5" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">你想要建立的模型本质上是一个三类分类器，其中</p><ul class=""><li id="bc09" class="mr ms it la b lb lc le lf lh mt ll mu lp mv lt mw mx my mz bi translated">如果第二天的价格高于今天，目标是<code class="fe nt nu nv nw b"><strong class="la iu"><em class="nx">up</em></strong></code>，如果价格保持不变(或非常接近)，目标是<code class="fe nt nu nv nw b"><strong class="la iu"><em class="nx">same</em></strong> </code>，如果价格下跌，目标是<code class="fe nt nu nv nw b"><strong class="la iu"><em class="nx">down</em></strong></code>。</li><li id="2070" class="mr ms it la b lb na le nb lh nc ll nd lp ne lt mw mx my mz bi translated">这些特征是静态变量，如资产类型，以及行为变量，如过去N天的历史波动性、价格趋势和相关性。</li></ul><p id="9ae4" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">您在本地环境中开发模型，并打印标准分类指标，例如准确性。</p><p id="59d9" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">为了简单起见，让我们假设这3个类在您的测试集中完全平衡，这意味着每个类<code class="fe nt nu nv nw b">up</code>、<code class="fe nt nu nv nw b">same</code>、<code class="fe nt nu nv nw b">down</code>都占33.333%。</p><p id="66ff" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">而你的测试精度是<code class="fe nt nu nv nw b">34%</code>。</p><p id="deaa" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">预测金融市场的变动是极其困难的，如果你总是预测相同的类别，我们的模型精度高于你得到的基准精度。</p><p id="4f0c" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">事情看起来很有希望，我们告诉我们的经理，我们应该马上开始使用这个模型。</p><p id="9a78" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我们经理，一个非ML的人，在这个行业已经有一段时间了，看着数字问:</p><p id="77e3" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated"><em class="nx">“你确定模型管用吗？它会比目前的策略赚更多的钱吗？”</em></p><p id="4692" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">这可能不是你所期望的答案，但对你来说很遗憾，这是最常见的答案之一。当你向公司里发号施令的非ML人员展示这些指标时，你通常会得到一个否定的答案。因此，你需要更进一步，证明你的模型会产生更多利润。</p><p id="d65e" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">你可以通过回溯测试做到这一点。</p><p id="1fb7" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">您选择截止日期<em class="nx"> D，</em>例如，两周前，并且</p><ul class=""><li id="ddff" class="mr ms it la b lb lc le lf lh mt ll mu lp mv lt mw mx my mz bi translated">使用到第d天的数据训练您的ML分类器。</li><li id="9cfe" class="mr ms it la b lb na le nb lh nc ll nd lp ne lt mw mx my mz bi translated">如果我们使用模型预测来决定是否买入、持有或卖出我们的每一个头寸，计算从D日到今天投资组合的每日损益。</li></ul><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ns"><img src="../Images/4df55a493cee4f68e3b95ad5851a4af6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1234/format:webp/0*cQEtZsmPhm5c5U0g.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">回溯测试你基于ML的交易策略(图片由作者提供)</p></figure><p id="f8c6" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">如果你的回溯测试显示负的结果，意味着你的投资组合会产生亏损，你回到起点。相反，如果投资组合在回溯测试期间的利润是正的，你回到你的经理那里:</p><p id="c8fb" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated"><em class="nx">“回溯测试显示结果为正，让我们开始使用模型”</em></p><p id="366d" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">她回答道</p><p id="8502" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated"><em class="nx">“我们一步一步来。让我们首先部署它，并确保它在我们的生产环境中实际工作。”</em></p><p id="8b2b" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">这就引出了我们的下一步评估。</p><h1 id="4e03" class="lu lv it bd lw lx ly lz ma mb mc md me jz mf ka mg kc mh kd mi kf mj kg mk ml bi translated">方法2:生产中的影子部署</h1><p id="926c" class="pw-post-body-paragraph ky kz it la b lb mm ju ld le mn jx lg lh mo lj lk ll mp ln lo lp mq lr ls lt im bi translated">对于用于训练ML模型的数据和在推理时发送给模型的数据之间的微小差异，ML模型非常脆弱。</p><p id="198b" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">例如，如果模型中有一个特征:</p><ul class=""><li id="17ab" class="mr ms it la b lb lc le lf lh mt ll mu lp mv lt mw mx my mz bi translated">在你的训练数据中几乎没有缺失值，但是</li><li id="48eb" class="mr ms it la b lb na le nb lh nc ll nd lp ne lt mw mx my mz bi translated">在推理时几乎总是不可用的(因此会丢失)</li></ul><p id="1891" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">您的模型在推理时的性能将会下降，并且比您预期的更差。换句话说，标准评估指标和回溯测试结果几乎总是模型真实性能的上限。</p><p id="1b3a" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">因此，您需要更进一步，在模型实际用于生产时对其进行测试。</p><p id="b2dc" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">一种安全的方法是使用<strong class="la iu">影子部署，</strong>部署模型并用于预测(在这种情况下是资产价格变化)，但其输出不用于采取行动(即重新平衡投资组合)。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ny"><img src="../Images/c6066b642a75a93fdc2ce2378943ff0a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1258/format:webp/0*al4skSCRZ4-KarkO.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">模型的影子部署</p></figure><p id="0c95" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">N天后，我们查看模型预测，以及如果我们使用模型采取行动，投资组合的利润会如何。</p><p id="b740" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">如果假设的业绩是负面的(即亏损)，我们需要回到我们的模型，并试图了解哪里出了问题，例如</p><ul class=""><li id="b156" class="mr ms it la b lb lc le lf lh mt ll mu lp mv lt mw mx my mz bi translated">发送给模型的数据与训练数据中的数据有很大不同吗？比如缺少参数？还是不同的范畴特征？</li><li id="9fc5" class="mr ms it la b lb na le nb lh nc ll nd lp ne lt mw mx my mz bi translated">回溯测试时期是一个非常平静和可预测的时期吗，而今天的市场条件非常不同？</li><li id="c54f" class="mr ms it la b lb na le nb lh nc ll nd lp ne lt mw mx my mz bi translated">我们之前运行的回溯测试中有错误吗？</li><li id="dc95" class="mr ms it la b lb na le nb lh nc ll nd lp ne lt mw mx my mz bi">…</li></ul><p id="4329" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">如果假设利润为正，我们得到另一个信号，表明我们的模型在起作用。所以你周五回去对你的老板说:</p><p id="e6a0" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated"><em class="nx">“如果我们一直在使用这个模型的话，这个星期就会产生利润。让我们开始使用它，来吧”。</em></p><p id="e628" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">她回答说，</p><p id="5da9" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated"><em class="nx">“你没看到我们投资组合本周的表现吗？非常好。你的模型更好还是更差？”</em></p><p id="817c" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">你花了整整一周的时间专注于现场测试，甚至忘记了检查实际表现。</p><p id="c979" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">现在，你看这两个数字:</p><ul class=""><li id="396b" class="mr ms it la b lb lc le lf lh mt ll mu lp mv lt mw mx my mz bi translated">本周的实际投资组合表现</li><li id="32c8" class="mr ms it la b lb na le nb lh nc ll nd lp ne lt mw mx my mz bi translated">你的模型的假设性能</li></ul><p id="da5a" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">而你的结论是你的数字略高于实际表现。这对你来说是个好消息！所以你跑回去告诉你的经理这个好消息。</p><p id="f964" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">她是这样回答的:</p><p id="5748" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated"><em class="nx">“让我们下周进行一次A/B测试，以确保这个ML模型比我们现在拥有的更好”</em></p><p id="5737" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">你现在处于爆发的边缘。所以你会问:</p><p id="ee02" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated"><em class="nx">“您还需要看到什么才能相信这个ML模型更好？”</em></p><p id="9938" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">她说:</p><p id="8460" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated"><em class="nx">【实际货币】</em></p><p id="20fc" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">你休假一周，休息两天，这是你应得的。</p><h1 id="9d5c" class="lu lv it bd lw lx ly lz ma mb mc md me jz mf ka mg kc mh kd mi kf mj kg mk ml bi translated">方法3: A/B测试您的模型</h1><p id="be33" class="pw-post-body-paragraph ky kz it la b lb mm ju ld le mn jx lg lh mo lj lk ll mp ln lo lp mq lr ls lt im bi translated">到目前为止，我们所有的评估要么</p><ul class=""><li id="e946" class="mr ms it la b lb lc le lf lh mt ll mu lp mv lt mw mx my mz bi translated">太抽象了，就像<code class="fe nt nu nv nw b">34%</code>一样精确</li><li id="5205" class="mr ms it la b lb na le nb lh nc ll nd lp ne lt mw mx my mz bi translated">或者假设。回溯测试和影子部署都没有产生实际的金钱。我们估算了利润。</li></ul><p id="216d" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我们需要比较实际成本和实际成本，以决定我们是否应该使用我们新的基于ML的策略。这是测试ML模型的最终方法，没有人可以反驳。</p><p id="eb2a" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">为此，我们决定从周一到周五进行一次<strong class="la iu"> A/B测试</strong>。</p><p id="1b79" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">下周一，我们将资产组合随机分为:</p><ul class=""><li id="4f89" class="mr ms it la b lb lc le lf lh mt ll mu lp mv lt mw mx my mz bi translated">一个对照组(A ),例如90%的市场价值</li><li id="bd28" class="mr ms it la b lb na le nb lh nc ll nd lp ne lt mw mx my mz bi translated">测试组(B)，例如剩余10%的市场价值</li></ul><p id="eef8" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">控制组A将根据公司当前使用的策略进行再平衡。测试组B将使用我们基于ML的策略重新平衡。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ns"><img src="../Images/1ed27229d4cbc87fa0a0777e33d7c59d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1234/format:webp/0*PGclA13VrlhD7FHa.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">测试我们的ML模型(图片由作者提供)</p></figure><p id="f77f" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">每天我们监控2个子投资组合的实际利润，周五我们停止测试。</p><p id="1bad" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">当我们将基于ML的系统的总利润与现状进行比较时，可能会发生3种情况。也</p><ul class=""><li id="859b" class="mr ms it la b lb lc le lf lh mt ll mu lp mv lt mw mx my mz bi translated">现状比你的ML系统表现好太多了。在这种情况下，你将很难说服你的经理，你的战略应该保持活力。</li><li id="51db" class="mr ms it la b lb na le nb lh nc ll nd lp ne lt mw mx my mz bi translated">两个子投资组合的表现非常相似，这可能会让你的经理将测试延长一周，看看是否有任何显著差异。</li><li id="d480" class="mr ms it la b lb na le nb lh nc ll nd lp ne lt mw mx my mz bi translated">或者，你的ML系统明显超出了现状。在这种情况下，你有一切优势来说服公司的每个人，你的模式比现状更好，至少应该用于总资产的10%，如果不是更多的话。在这种情况下，谨慎的做法是逐步增加这种基于ML的策略下管理的资产的百分比，每周监控业绩。</li></ul><p id="ee52" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">经过3周漫长的起伏，你终于得到了一个评估指标，可以让每个人(包括你)相信你的模型为企业增加了价值。</p><h1 id="d153" class="lu lv it bd lw lx ly lz ma mb mc md me jz mf ka mg kc mh kd mi kf mj kg mk ml bi translated">包装它</h1><p id="d827" class="pw-post-body-paragraph ky kz it la b lb mm ju ld le mn jx lg lh mo lj lk ll mp ln lo lp mq lr ls lt im bi translated">下次你发现很难让你周围的人相信你的ML模型是有效的，记住你可以用来测试ML模型的3个策略，从不太有说服力到更有说服力，</p><ul class=""><li id="0494" class="mr ms it la b lb lc le lf lh mt ll mu lp mv lt mw mx my mz bi translated">回溯测试</li><li id="0d20" class="mr ms it la b lb na le nb lh nc ll nd lp ne lt mw mx my mz bi translated">生产中的影子部署</li><li id="e171" class="mr ms it la b lb na le nb lh nc ll nd lp ne lt mw mx my mz bi translated">A/B测试</li></ul><p id="204c" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">从ML开发到生产的道路可能是艰难和令人沮丧的，尤其是在没有可靠的A/B测试系统的小公司和初创公司。</p><p id="8b55" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">测试ML模型有时很繁琐，但这是值得的。</p><p id="4881" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">相信我，如果你使用真实世界的评估指标来测试ML模型，你会成功的。</p><h1 id="6b21" class="lu lv it bd lw lx ly lz ma mb mc md me jz mf ka mg kc mh kd mi kf mj kg mk ml bi translated">想支持我吗？</h1><p id="0e29" class="pw-post-body-paragraph ky kz it la b lb mm ju ld le mn jx lg lh mo lj lk ll mp ln lo lp mq lr ls lt im bi translated">你喜欢阅读和学习现实世界中的ML、数据科学和自由职业吗？</p><p id="76e6" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">无限制地访问我在Medium上发布的所有内容，并支持我的写作。</p><p id="774d" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">👉🏽今天使用我的<a class="ae nz" href="https://pau-labarta-bajo.medium.com/membership" rel="noopener"> <strong class="la iu">推荐链接</strong> </a>成为会员。</p><div class="oa ob gp gr oc od"><a href="https://pau-labarta-bajo.medium.com/membership" rel="noopener follow" target="_blank"><div class="oe ab fo"><div class="of ab og cl cj oh"><h2 class="bd iu gy z fp oi fr fs oj fu fw is bi translated">成为一个媒体成员来阅读我在媒体上分享的一切。</h2><div class="ok l"><h3 class="bd b gy z fp oi fr fs oj fu fw dk translated">你的会员费的一部分给了所有你喜欢阅读的作家。希望是我。</h3></div><div class="ol l"><p class="bd b dl z fp oi fr fs oj fu fw dk translated">pau-labarta-bajo.medium.com</p></div></div><div class="om l"><div class="on l oo op oq om or ks od"/></div></div></a></div><p id="ccdc" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">👉🏽订阅<a class="ae nz" href="https://datamachines.xyz/subscribe/" rel="noopener ugc nofollow" target="_blank"> <strong class="la iu"> <em class="nx"> datamachines </em>简讯</strong> </a> <strong class="la iu">。</strong></p><p id="cb00" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">👉🏽关注我<a class="ae nz" href="https://pau-labarta-bajo.medium.com/" rel="noopener"> <strong class="la iu">中</strong> </a>、<a class="ae nz" href="https://twitter.com/paulabartabajo_" rel="noopener ugc nofollow" target="_blank"> <strong class="la iu">推特</strong> </a>、<a class="ae nz" href="https://www.linkedin.com/in/pau-labarta-bajo-4432074b/" rel="noopener ugc nofollow" target="_blank"> <strong class="la iu"> LinkedIn </strong> </a>。</p><p id="7bce" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">祝你愉快🤗</p><p id="39b3" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">避寒胜地</p></div></div>    
</body>
</html>