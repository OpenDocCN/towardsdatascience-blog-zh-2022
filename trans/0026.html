<html>
<head>
<title>Essential Guide to R&amp;D in Machine Learning: Model Evaluation</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">机器学习中的 R&amp;D 基本指南:模型评估</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/essential-guide-to-r-d-in-machine-learning-model-evaluation-ff433543db1a#2022-02-01">https://towardsdatascience.com/essential-guide-to-r-d-in-machine-learning-model-evaluation-ff433543db1a#2022-02-01</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="3c57" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">ML 研究每一步的基本经验</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/9bce2530a0811de46801c6deb1263f56.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*OFt1fLQuwuF0S41YSIRZWw.jpeg"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">照片由<a class="ae kv" href="https://unsplash.com/@yanu" rel="noopener ugc nofollow" target="_blank">亚尼克·普尔弗</a>，【https://unsplash.com/photos/hopX_jpVtRM】T2 拍摄</p></figure><p id="a2a0" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">2021 年，Michael A. Lones 发表了一篇名为<em class="ls">“如何避免机器学习陷阱:学术研究人员指南”</em>的每一位数据科学家的必备论文，内容是关于机器学习中的常见错误和挑战，以及处理它们的最佳方法。在他的工作中，他给出了许多关于如何做适当的研究以及如何不做的宝贵建议。</p><p id="e009" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在这篇文章中，我将继续用我的第二篇也是最后一篇关于这篇论文的文章来探索这个非凡的作品。我以一种精炼的方式分享了我关于这篇论文的基调以及我的评论和结论。</p><p id="b709" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">更详细的解释，请查看 Lones 的<a class="ae kv" href="https://arxiv.org/abs/2108.02497" rel="noopener ugc nofollow" target="_blank">研究</a>。你也可以看看我的第一篇文章，它涵盖了 Lones 工作的前两部分。</p><p id="a2b5" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我用相同的章节标题，这样任何读者都可以把我的笔记和原文联系起来。</p><p id="fa6c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><a class="ae kv" href="https://tolga-ayan.medium.com/essential-guide-to-r-d-in-machine-learning-model-building-5918d57763ab" rel="noopener">上一篇文章</a>包括:</p><ul class=""><li id="79d1" class="lt lu iq ky b kz la lc ld lf lv lj lw ln lx lr ly lz ma mb bi translated">在你开始建立模型之前</li><li id="2173" class="lt lu iq ky b kz mc lc md lf me lj mf ln mg lr ly lz ma mb bi translated">如何可靠地建立模型</li></ul><p id="1227" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">本文涵盖:</p><ul class=""><li id="44fe" class="lt lu iq ky b kz la lc ld lf lv lj lw ln lx lr ly lz ma mb bi translated">如何稳健地评估模型</li><li id="fb93" class="lt lu iq ky b kz mc lc md lf me lj mf ln mg lr ly lz ma mb bi translated">如何公平地比较模型</li><li id="6b94" class="lt lu iq ky b kz mc lc md lf me lj mf ln mg lr ly lz ma mb bi translated">如何报告您的结果</li></ul></div><div class="ab cl mh mi hu mj" role="separator"><span class="mk bw bk ml mm mn"/><span class="mk bw bk ml mm mn"/><span class="mk bw bk ml mm"/></div><div class="ij ik il im in"><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi mo"><img src="../Images/667e80aa6b8b3fcd7eb585849b5b0e99.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8LaHn418_OxSyHb9LfWXpw.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">机器学习管道。作者图。</p></figure><h1 id="09ca" class="mp mq iq bd mr ms mt mu mv mw mx my mz jw na jx nb jz nc ka nd kc ne kd nf ng bi translated">如何稳健地评估模型</h1><p id="4915" class="pw-post-body-paragraph kw kx iq ky b kz nh jr lb lc ni ju le lf nj lh li lj nk ll lm ln nl lp lq lr ij bi translated">为了对你的工作做出贡献，你需要公平透明地评估你的模型并报告你的结果。任何有意或无意的不公平都可能误导其他研究者的研究，阻碍文献的迭代进展。检查你的工作两次，以确保你没有偏见。</p><h2 id="aab6" class="nm mq iq bd mr nn no dn mv np nq dp mz lf nr ns nb lj nt nu nd ln nv nw nf nx bi translated">务必使用合适的测试集</h2><p id="5e80" class="pw-post-body-paragraph kw kx iq ky b kz nh jr lb lc ni ju le lf nj lh li lj nk ll lm ln nl lp lq lr ij bi translated">总是使用测试集来测量 ML 模型的通用性。您甚至可以根据问题使用多个测试集。确保您的测试集没有与训练集重叠，并且它很好地代表了总体。</p><h2 id="ca51" class="nm mq iq bd mr nn no dn mv np nq dp mz lf nr ns nb lj nt nu nd ln nv nw nf nx bi translated">务必使用验证集</h2><p id="4fa0" class="pw-post-body-paragraph kw kx iq ky b kz nh jr lb lc ni ju le lf nj lh li lj nk ll lm ln nl lp lq lr ij bi translated">创建验证集，并将其用于超参数优化、模型比较、设置提前停止等。换句话说，用它来确保你训练出好的模型。但是不要使用验证集评估结果作为最终结果。这应该使用测试数据集来完成。</p><h2 id="913e" class="nm mq iq bd mr nn no dn mv np nq dp mz lf nr ns nb lj nt nu nd ln nv nw nf nx bi translated">多次评估一个模型</h2><p id="e624" class="pw-post-body-paragraph kw kx iq ky b kz nh jr lb lc ni ju le lf nj lh li lj nk ll lm ln nl lp lq lr ij bi translated">许多 ML 模型是不稳定的，在不同的运行中会产生不同的结果。进行多次评估，并保存每次评估的结果。交叉验证是一种流行的方法。如果数据类很小，您可以进行分层，以确保每个数据文件夹都代表总体。</p><p id="edb2" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">稍后，您可以报告结果的平均值和标准偏差。您还可以在以后使用这些结果进行统计测试来比较模型。</p><h2 id="5240" class="nm mq iq bd mr nn no dn mv np nq dp mz lf nr ns nb lj nt nu nd ln nv nw nf nx bi translated">请务必保存一些数据来评估您的最终模型实例</h2><p id="ef8e" class="pw-post-body-paragraph kw kx iq ky b kz nh jr lb lc ni ju le lf nj lh li lj nk ll lm ln nl lp lq lr ij bi translated">为测试集保留一些数据，仅在评估最终模型时使用。在其他情况下使用测试集的结果可能会促使您做出有偏见的决定。</p><p id="536d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">换句话说，不要让测试集成为训练过程的隐含部分。把它分开来评估你的最终产品。</p><h2 id="63d7" class="nm mq iq bd mr nn no dn mv np nq dp mz lf nr ns nb lj nt nu nd ln nv nw nf nx bi translated">不要对不平衡的数据集使用准确性</h2><p id="2ec2" class="pw-post-body-paragraph kw kx iq ky b kz nh jr lb lc ni ju le lf nj lh li lj nk ll lm ln nl lp lq lr ij bi translated">这个问题的一个经典例子是病人与健康人的分类任务。想象一个数据集，其中只有 0.1%的人口生病，而你正试图训练一个 ML 模型来预测一个人是否生病。如果你的模型预测所有样本都是健康的，你会得到 99.9%的准确率，但是你的模型并没有像预期的那样解决问题。因此，如果数据集不平衡，准确性就不是一个可靠的指标。在这种情况下，最好使用科恩的卡帕系数或马修斯相关系数。</p><p id="d411" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我还发现，比较精确度、召回率和 f1 分数的宏观和微观值，以了解 ML 模型如何对不平衡的数据做出反应，这很有用。</p><h1 id="1509" class="mp mq iq bd mr ms mt mu mv mw mx my mz jw na jx nb jz nc ka nd kc ne kd nf ng bi translated">如何公平地比较模型</h1><p id="e0a1" class="pw-post-body-paragraph kw kx iq ky b kz nh jr lb lc ni ju le lf nj lh li lj nk ll lm ln nl lp lq lr ij bi translated">我们多次讨论了公平模型评估，但是 Lones 创建了一个完整的独立部分。我认为这是有意表明公正的评价很重要。如前所述，不公平的评估可能会在工作中误导你的同事，并耗费金钱和时间。这是一种损害文献迭代过程的行为，任何研究者都应该关心它。</p><p id="aae7" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">因此，请确保在相同的环境中评估不同的模型，探索多个视角，并小心正确使用统计测试。</p><h2 id="8082" class="nm mq iq bd mr nn no dn mv np nq dp mz lf nr ns nb lj nt nu nd ln nv nw nf nx bi translated">不要以为数字越大就意味着型号越好</h2><p id="7320" class="pw-post-body-paragraph kw kx iq ky b kz nh jr lb lc ni ju le lf nj lh li lj nk ll lm ln nl lp lq lr ij bi translated">Lones 提到了许多论文中使用的一个常见状态:</p><blockquote class="ny nz oa"><p id="97cf" class="kw kx ls ky b kz la jr lb lc ld ju le ob lg lh li oc lk ll lm od lo lp lq lr ij bi translated">“在以前的研究中，报道的准确率高达 94%。我们的模型达到了 95%，因此更好。”</p></blockquote><p id="a0c8" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">更高的值并不总是意味着更好的模型。训练验证测试分区可能不同，它们可能用于完全不同的数据集，或者它们的超参数可能不同。这些因素可能会造成不公平的比较，研究人员必须对此保持谨慎。</p><h2 id="79b0" class="nm mq iq bd mr nn no dn mv np nq dp mz lf nr ns nb lj nt nu nd ln nv nw nf nx bi translated">在比较模型时，一定要使用统计测试</h2><p id="5fc3" class="pw-post-body-paragraph kw kx iq ky b kz nh jr lb lc ni ju le lf nj lh li lj nk ll lm ln nl lp lq lr ij bi translated">有两类测试用于比较单个 ML 模型。</p><p id="7757" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">第一种类型是比较单个模型实例，就像两个经过训练的决策树。对于这种类型的比较，麦克内马的测试是一个公平的选择。</p><p id="6934" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">第二种类型是比较一般的模型选择，比如决策树和神经网络。这种类型的比较需要多次评估。如果数据的分布是正态分布，学生的 T 检验在这种类型的比较中是有用的。如果不是正态分布，曼-惠特尼的 U 检验是更好的选择。</p><h2 id="286a" class="nm mq iq bd mr nn no dn mv np nq dp mz lf nr ns nb lj nt nu nd ln nv nw nf nx bi translated">请纠正多重比较</h2><p id="6e2a" class="pw-post-body-paragraph kw kx iq ky b kz nh jr lb lc ni ju le lf nj lh li lj nk ll lm ln nl lp lq lr ij bi translated">如果你以 95%的置信度报告统计测试结果，就意味着 20 次中有 1 次会给你一个假阳性。如果您运行多个测试，很可能其中一个实际上是不正确的。这被称为多重性效应，是数据科学中更广泛问题的一个例子，称为数据挖掘或 p-hacking。Bonferroni 校正法是处理这一问题的好方法。</p><h2 id="b9fc" class="nm mq iq bd mr nn no dn mv np nq dp mz lf nr ns nb lj nt nu nd ln nv nw nf nx bi translated">不要总是相信来自社区基准的结果</h2><p id="ba96" class="pw-post-body-paragraph kw kx iq ky b kz nh jr lb lc ni ju le lf nj lh li lj nk ll lm ln nl lp lq lr ij bi translated">像 ML 模型一样，人们也会有偏见。如果每个使用数据的人只使用测试集一次，那么总的来说，测试集被社区使用了很多次。人们可能会根据这些可能导致偏见的基准来形成他们的决策。因此，请小心这些基准报告，并谨慎您的决定。</p><h2 id="f7eb" class="nm mq iq bd mr nn no dn mv np nq dp mz lf nr ns nb lj nt nu nd ln nv nw nf nx bi translated">请考虑模型的组合</h2><p id="8007" class="pw-post-body-paragraph kw kx iq ky b kz nh jr lb lc ni ju le lf nj lh li lj nk ll lm ln nl lp lq lr ij bi translated">考虑集成学习方法总是好的。正确组合多个模型可以显著提高性能，应该由研究人员进行实验。</p><h1 id="540e" class="mp mq iq bd mr ms mt mu mv mw mx my mz jw na jx nb jz nc ka nd kc ne kd nf ng bi translated">如何报告您的结果</h1><h2 id="7146" class="nm mq iq bd mr nn no dn mv np nq dp mz lf nr ns nb lj nt nu nd ln nv nw nf nx bi translated">一定要透明</h2><p id="c8c7" class="pw-post-body-paragraph kw kx iq ky b kz nh jr lb lc ni ju le lf nj lh li lj nk ll lm ln nl lp lq lr ij bi translated">永远试着对你所做的和你所发现的保持透明，因为这将使其他人更容易在你的工作基础上更进一步。</p><p id="7a8f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果可以的话，分享你的代码和数据集。这样做也鼓励你更加小心，工作更加干净。这既有利于你，也有利于其他研究人员。</p><h2 id="1d3c" class="nm mq iq bd mr nn no dn mv np nq dp mz lf nr ns nb lj nt nu nd ln nv nw nf nx bi translated">以多种方式报告绩效</h2><p id="6bbb" class="pw-post-body-paragraph kw kx iq ky b kz nh jr lb lc ni ju le lf nj lh li lj nk ll lm ln nl lp lq lr ij bi translated">如果可能的话，用多个数据集报告你的结果。使用多个指标评估您的模型，以增加您工作的透明度。您可以使用的一些指标有精确度、召回率、灵敏度、特异性和 F 值。您还可以报告 AUC、ROC 和 PR 曲线。在报告这些指标时，确保您清楚地标记了数字和表格，以防止混淆。</p><h2 id="073d" class="nm mq iq bd mr nn no dn mv np nq dp mz lf nr ns nb lj nt nu nd ln nv nw nf nx bi translated">不要超越数据进行归纳</h2><p id="e32c" class="pw-post-body-paragraph kw kx iq ky b kz nh jr lb lc ni ju le lf nj lh li lj nk ll lm ln nl lp lq lr ij bi translated">重要的是不要给出无效的结论，因为这会把其他研究人员引入歧途。例如，您的模型在您的测试数据上的性能可能与其他一些数据集不同。不要将你的讨论概括到你没有试验过的案例。</p><h2 id="cc60" class="nm mq iq bd mr nn no dn mv np nq dp mz lf nr ns nb lj nt nu nd ln nv nw nf nx bi translated">在报告统计意义时一定要小心</h2><p id="dacc" class="pw-post-body-paragraph kw kx iq ky b kz nh jr lb lc ni ju le lf nj lh li lj nk ll lm ln nl lp lq lr ij bi translated">统计测试并不完美。例如，95%的置信度意味着 20 次测试中有 1 次产生错误的结果。一些统计学家甚至说，最好报告 p 值，让读者来解释。</p><p id="4e61" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">另一件要考虑的事情是两个模型之间的差异实际上是否重要。Cohen 的 d 统计或 Kolmogoroc-Smirnov 方法对于这种类型的比较是优选的。</p><h2 id="ed7b" class="nm mq iq bd mr nn no dn mv np nq dp mz lf nr ns nb lj nt nu nd ln nv nw nf nx bi translated">一定要看看你的模型</h2><p id="2844" class="pw-post-body-paragraph kw kx iq ky b kz nh jr lb lc ni ju le lf nj lh li lj nk ll lm ln nl lp lq lr ij bi translated">研究的目的不是比任何人做得更好，而是创造有益于学术发展迭代过程的知识。试着解释你的模特表现背后的潜在原因。查看可解释的人工智能(XAI)技术，展示可能用于进一步研究的知识。</p><h1 id="4d61" class="mp mq iq bd mr ms mt mu mv mw mx my mz jw na jx nb jz nc ka nd kc ne kd nf ng bi translated">结论</h1><p id="e911" class="pw-post-body-paragraph kw kx iq ky b kz nh jr lb lc ni ju le lf nj lh li lj nk ll lm ln nl lp lq lr ij bi translated">作为一名数据科学家，Michael A. Lones 的论文极大地促进了我的自我提升。在这篇文章中，我的目标是与其他人分享这一贡献，并从更广阔的视角展示 ML R&amp;D 的生命周期。</p><p id="432b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">任何想进一步了解的人都应该查阅一下<a class="ae kv" href="https://arxiv.org/abs/2108.02497" rel="noopener ugc nofollow" target="_blank"> Lones 的论文</a>。他还为他讨论的主题提供了大量参考资料。</p><p id="ee58" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我感谢 Lones 的论文，也感谢抽出时间阅读本文的读者。</p><p id="7ccb" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">致敬</p><p id="d3b2" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">埃姆雷·托尔加·阿扬</p></div><div class="ab cl mh mi hu mj" role="separator"><span class="mk bw bk ml mm mn"/><span class="mk bw bk ml mm mn"/><span class="mk bw bk ml mm"/></div><div class="ij ik il im in"><h2 id="b477" class="nm mq iq bd mr nn no dn mv np nq dp mz lf nr ns nb lj nt nu nd ln nv nw nf nx bi translated">参考</h2><p id="b0e9" class="pw-post-body-paragraph kw kx iq ky b kz nh jr lb lc ni ju le lf nj lh li lj nk ll lm ln nl lp lq lr ij bi translated">《如何避免机器学习陷阱:学术研究者指南》<em class="ls"> arXiv 预印本 arXiv:2108.02497 </em> (2021)。</p></div></div>    
</body>
</html>