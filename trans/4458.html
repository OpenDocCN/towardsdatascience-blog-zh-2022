<html>
<head>
<title>How to Easily Customize SHAP Plots in Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在Python中轻松定制SHAP图</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/how-to-easily-customize-shap-plots-in-python-fdff9c0483f2#2022-10-04">https://towardsdatascience.com/how-to-easily-customize-shap-plots-in-python-fdff9c0483f2#2022-10-04</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="267d" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">调整颜色和图形大小，并为SHAP图添加标题和标签</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/18376a7bdd7126e6e59c974ec012f6ee.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4ezJ-Cd17AKysnZTBOXLbA.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">(图片由作者提供)</p></figure><p id="f496" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi lu translated">HAP(SHapley Additive exPlanations)是一种流行的建模可解释性的方法。Python包使你能够快速创建各种不同的图。其独特的蓝色和品红色使该图立即识别为SHAP图。</p><p id="88cb" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">不幸的是，Python包的默认调色板既不是色盲的，也不是影印安全的。因此，您可能需要更改SHAP图的颜色。或者也许你只是想调整颜色，以符合你的企业形象。也可能你唯一想要的就是加个标题。</p><p id="870d" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">对于一些SHAP地块，定制比其他更容易。一些绘图函数已经提供了这样的参数，但是对于一些绘图类型，您必须变得更加灵活。</p><blockquote class="mh"><p id="1c5e" class="mi mj it bd mk ml mm mn mo mp mq lt dk translated">对于一些SHAP地块，定制比其他更容易。</p></blockquote><p id="6984" class="pw-post-body-paragraph ky kz it la b lb mr ju ld le ms jx lg lh mt lj lk ll mu ln lo lp mv lr ls lt im bi translated">在本文中，我们将讨论如何</p><ol class=""><li id="0d9f" class="mw mx it la b lb lc le lf lh my ll mz lp na lt nb nc nd ne bi translated"><a class="ae nf" href="#52df" rel="noopener ugc nofollow"> <strong class="la iu">自定义图形和轴对象</strong> </a>的属性，如调整图形大小、添加标题和标签、使用支线剧情等。</li><li id="9b32" class="mw mx it la b lb ng le nh lh ni ll nj lp nk lt nb nc nd ne bi translated"><a class="ae nf" href="#3237" rel="noopener ugc nofollow"> <strong class="la iu">自定义汇总图、瀑布图、条形图和压力图的颜色</strong> </a>。</li></ol></div><div class="ab cl nl nm hx nn" role="separator"><span class="no bw bk np nq nr"/><span class="no bw bk np nq nr"/><span class="no bw bk np nq"/></div><div class="im in io ip iq"><p id="6f34" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">在这篇文章中，我们将集中在定制SHAP情节。如果你需要关于如何使用SHAP软件包的介绍或复习，我推荐Conor O'Sullivan的这篇文章:</p><div class="nu nv gp gr nw nx"><a rel="noopener follow" target="_blank" href="/introduction-to-shap-with-python-d27edc23c454"><div class="ny ab fo"><div class="nz ab oa cl cj ob"><h2 class="bd iu gy z fp oc fr fs od fu fw is bi translated">Python SHAP简介</h2><div class="oe l"><h3 class="bd b gy z fp oc fr fs od fu fw dk translated">如何创造和解释SHAP情节:瀑布，力量，决定，SHAP和蜂群</h3></div><div class="of l"><p class="bd b dl z fp oc fr fs od fu fw dk translated">towardsdatascience.com</p></div></div><div class="og l"><div class="oh l oi oj ok og ol ks nx"/></div></div></a></div></div><div class="ab cl nl nm hx nn" role="separator"><span class="no bw bk np nq nr"/><span class="no bw bk np nq nr"/><span class="no bw bk np nq"/></div><div class="im in io ip iq"><p id="5697" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">确保您安装了SHAP <strong class="la iu">版本0.41.0 </strong>。否则，您会在本文的代码片段中遇到错误[1，3]。</p><pre class="kj kk kl km gt om mg on oo aw op bi"><span id="a81d" class="oq or it mg b gy os ot l ou ov">import shap<br/>print(shap.__version__)</span></pre><p id="0fa6" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">如果没有，请按如下方式升级软件包:</p><pre class="kj kk kl km gt om mg on oo aw op bi"><span id="13c5" class="oq or it mg b gy os ot l ou ov">!pip install --upgrade shap</span></pre><h1 id="52df" class="ow or it bd ox oy oz pa pb pc pd pe pf jz pg ka ph kc pi kd pj kf pk kg pl pm bi translated">自定义图形和轴对象的属性</h1><p id="1398" class="pw-post-body-paragraph ky kz it la b lb pn ju ld le po jx lg lh pp lj lk ll pq ln lo lp pr lr ls lt im bi translated">在我们开始着色之前，让我们先了解一下基础知识。在本节中，我们将讨论如何自定义图形和轴对象的属性。</p><p id="ed0e" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">为了能够修改SHAP图，您需要将<code class="fe md me mf mg b">show</code>参数设置为<code class="fe md me mf mg b">False</code>。</p><blockquote class="ps pt pu"><p id="d156" class="ky kz pv la b lb lc ju ld le lf jx lg pw li lj lk px lm ln lo py lq lr ls lt im bi translated"><code class="fe md me mf mg b"><em class="it">show</em></code>:返回前是否调用matplotlib.pyplot.show()。将此项设置为False允许在创建图后进一步自定义图。[2]</p></blockquote><h2 id="e77f" class="oq or it bd ox pz qa dn pb qb qc dp pf lh qd qe ph ll qf qg pj lp qh qi pl qj bi translated">调整图形大小</h2><p id="3982" class="pw-post-body-paragraph ky kz it la b lb pn ju ld le po jx lg lh pp lj lk ll pq ln lo lp pr lr ls lt im bi translated">不幸的是，当您想要调整SHAP图的图形大小时，调整<code class="fe md me mf mg b">figsize</code>参数没有多大帮助。相反，您需要设置<code class="fe md me mf mg b">show = False</code>，然后您可以调整图形的大小，如下所示:</p><pre class="kj kk kl km gt om mg on oo aw op bi"><span id="17e7" class="oq or it mg b gy os ot l ou ov">fig = plt.figure()</span><span id="bf9e" class="oq or it mg b gy qk ot l ou ov">shap.plots.bar(shap_values[0], <strong class="mg iu">show = False</strong>)</span><span id="009f" class="oq or it mg b gy qk ot l ou ov"><strong class="mg iu">plt.gcf().set_size_inches(20,6)</strong><br/>plt.show()</span></pre><h2 id="ce0d" class="oq or it bd ox pz qa dn pb qb qc dp pf lh qd qe ph ll qf qg pj lp qh qi pl qj bi translated">调整标题、标签和限制</h2><p id="a4c7" class="pw-post-body-paragraph ky kz it la b lb pn ju ld le po jx lg lh pp lj lk ll pq ln lo lp pr lr ls lt im bi translated">当您设置了<code class="fe md me mf mg b">show = False</code>后，您可以像往常一样自由调整人物的属性。下面你可以看到一个如何改变标题，x标签和x限制的例子。</p><pre class="kj kk kl km gt om mg on oo aw op bi"><span id="ebc5" class="oq or it mg b gy os ot l ou ov">fig = plt.figure()</span><span id="a14f" class="oq or it mg b gy qk ot l ou ov">shap.plots.bar(shap_values[0], <strong class="mg iu">show = False</strong>)</span><span id="8ab2" class="oq or it mg b gy qk ot l ou ov"><strong class="mg iu">plt.title("Custom Title") <br/>plt.xlabel("Custom X-Label")<br/>plt.xlim([-12,12])</strong></span><span id="f4e8" class="oq or it mg b gy qk ot l ou ov">plt.show()</span></pre><h2 id="27c7" class="oq or it bd ox pz qa dn pb qb qc dp pf lh qd qe ph ll qf qg pj lp qh qi pl qj bi translated">使用支线剧情</h2><p id="eeb2" class="pw-post-body-paragraph ky kz it la b lb pn ju ld le po jx lg lh pp lj lk ll pq ln lo lp pr lr ls lt im bi translated">如果你想在一个图形中显示多个支线剧情，可以使用<code class="fe md me mf mg b">.add_subplot()</code>方法。</p><pre class="kj kk kl km gt om mg on oo aw op bi"><span id="ce09" class="oq or it mg b gy os ot l ou ov">fig = plt.figure()</span><span id="a27d" class="oq or it mg b gy qk ot l ou ov"><strong class="mg iu">ax0 = fig.add_subplot(131)</strong><br/>shap.plots.bar(shap_values[0], show = False)</span><span id="63bd" class="oq or it mg b gy qk ot l ou ov"><strong class="mg iu">ax1 = fig.add_subplot(132)</strong><br/>shap.plots.bar(shap_values[1], show = False)</span><span id="8bb0" class="oq or it mg b gy qk ot l ou ov"><strong class="mg iu">ax2 = fig.add_subplot(133)</strong><br/>shap.plots.bar(shap_values[2], show = False)</span><span id="37f6" class="oq or it mg b gy qk ot l ou ov">plt.gcf().set_size_inches(20,6)<br/>plt.tight_layout() <br/>plt.show()</span></pre><h1 id="3237" class="ow or it bd ox oy oz pa pb pc pd pe pf jz pg ka ph kc pi kd pj kf pk kg pl pm bi translated">自定义颜色</h1><p id="ddae" class="pw-post-body-paragraph ky kz it la b lb pn ju ld le po jx lg lh pp lj lk ll pq ln lo lp pr lr ls lt im bi translated">在我们进入如何定制地块的颜色之前，让我们绕一点弯子，了解一下<strong class="la iu">为什么SHAP默认调色板不适合</strong>。</p><p id="58cf" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">最近，我写了一篇文章强调色盲安全数据可视化的重要性。</p><div class="nu nv gp gr nw nx"><a rel="noopener follow" target="_blank" href="/is-your-color-palette-stopping-you-from-reaching-your-goals-bf3b32d2ac49"><div class="ny ab fo"><div class="nz ab oa cl cj ob"><h2 class="bd iu gy z fp oc fr fs od fu fw is bi translated">为什么你的数据可视化应该是色盲友好的</h2><div class="oe l"><h3 class="bd b gy z fp oc fr fs od fu fw dk translated">尤其是当你试图说服男人</h3></div><div class="of l"><p class="bd b dl z fp oc fr fs od fu fw dk translated">towardsdatascience.com</p></div></div><div class="og l"><div class="ql l oi oj ok og ol ks nx"/></div></div></a></div><p id="a198" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">不幸的是，SHAP的默认调色板既不是色盲也不是影印安全的(在2022年8月写作时)，正如你在下图中看到的。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi qm"><img src="../Images/ddbab14e76b4fae035f16438ab02c4d0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ZtYFY6ftQXTm4LIzGuLkTw.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">默认SHAP调色板模拟色盲(图片由作者提供。用<a class="ae nf" href="https://www.color-blindness.com/coblis-color-blindness-simulator/" rel="noopener ugc nofollow" target="_blank">科布利斯</a>模拟色盲</p></figure><p id="517a" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">虽然边缘颜色(洋红色(#ff0051)和蓝色(#008bfb)是色盲安全的，但它们不是影印安全的，因为它们具有相似的色调。</p><p id="5583" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">此外，渐变调色板不是色盲安全的，因为对于红绿色盲的人来说，中间范围的紫色调与低范围的蓝色调是无法区分的。</p><h2 id="121b" class="oq or it bd ox pz qa dn pb qb qc dp pf lh qd qe ph ll qf qg pj lp qh qi pl qj bi translated">汇总图</h2><p id="360d" class="pw-post-body-paragraph ky kz it la b lb pn ju ld le po jx lg lh pp lj lk ll pq ln lo lp pr lr ls lt im bi translated"><em class="pv">注意:对于本节，您必须至少安装了SHAP版本0.40.0，并安装了</em>【1】<em class="pv">。</em></p><p id="1bd9" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">对于概要剧情来说，换个调色盘简直易如反掌。从版本0.40.0开始，您可以简单地使用<code class="fe md me mf mg b">cmap</code>参数[1]。</p><pre class="kj kk kl km gt om mg on oo aw op bi"><span id="b071" class="oq or it mg b gy os ot l ou ov">shap.summary_plot(shap_values, <br/>                  X_train,<br/>                  <strong class="mg iu">cmap = "plasma"</strong>)</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi qn"><img src="../Images/9f32ec6d0d50fb078ba939d365db0981.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Zp6-EY_2mBnMerxgIsHi6w.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">使用默认和修改的调色板的摘要图(图片由作者提供)</p></figure><h2 id="0c86" class="oq or it bd ox pz qa dn pb qb qc dp pf lh qd qe ph ll qf qg pj lp qh qi pl qj bi translated">瀑布图</h2><p id="945e" class="pw-post-body-paragraph ky kz it la b lb pn ju ld le po jx lg lh pp lj lk ll pq ln lo lp pr lr ls lt im bi translated"><em class="pv">注意:对于本节，您必须至少安装了SHAP版本0.41.0 [3]。</em></p><p id="5800" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">由于我们没有瀑布图可用的参数，我们需要变得狡猾一点。</p><p id="7244" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">首先，您需要将<code class="fe md me mf mg b">show</code>参数设置为<code class="fe md me mf mg b">False</code>，以便能够修改图[2]。对于瀑布图，我们需要<strong class="la iu">调整FancyArrow和文本对象的颜色。</strong></p><pre class="kj kk kl km gt om mg on oo aw op bi"><span id="de4b" class="oq or it mg b gy os ot l ou ov">import matplotlib<br/>import matplotlib.pyplot as plt<br/><br/># Default SHAP colors<br/>default_pos_color = "#ff0051"<br/>default_neg_color = "#008bfb"</span><span id="d155" class="oq or it mg b gy qk ot l ou ov"># Custom colors<br/>positive_color = "#ca0020"<br/>negative_color = "#92c5de"</span><span id="0762" class="oq or it mg b gy qk ot l ou ov"># Plot Waterfall Plot<br/>shap.plots.waterfall(shap_values[0], <strong class="mg iu">show = False</strong>)</span><span id="b5ed" class="oq or it mg b gy qk ot l ou ov"># Change the colormap of the artists<br/>for fc in plt.gcf().get_children():<br/>    for fcc in fc.get_children():<br/>        if (isinstance(fcc, <strong class="mg iu">matplotlib.patches.FancyArrow</strong>)):<br/>            if (matplotlib.colors.to_hex(fcc.get_facecolor()) == default_pos_color):<br/>                fcc.set_facecolor(positive_color)<br/>            elif (matplotlib.colors.to_hex(fcc.get_facecolor()) == default_neg_color):<br/>                fcc.set_color(negative_color)<br/>        elif (isinstance(fcc, <strong class="mg iu">plt.Text</strong>)):<br/>            if (matplotlib.colors.to_hex(fcc.get_color()) == default_pos_color):<br/>                fcc.set_color(positive_color)<br/>            elif (matplotlib.colors.to_hex(fcc.get_color()) == default_neg_color):<br/>                fcc.set_color(negative_color)</span><span id="4388" class="oq or it mg b gy qk ot l ou ov">plt.show()</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi qo"><img src="../Images/f3614ba8620be921ec70639a2a8d737d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*CTyRWpzxcMd8dcdM4fPdbw.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">使用默认和修改的调色板绘制瀑布图(图片由作者提供)</p></figure><h2 id="6407" class="oq or it bd ox pz qa dn pb qb qc dp pf lh qd qe ph ll qf qg pj lp qh qi pl qj bi translated">条形图</h2><p id="de6e" class="pw-post-body-paragraph ky kz it la b lb pn ju ld le po jx lg lh pp lj lk ll pq ln lo lp pr lr ls lt im bi translated">对于柱状图，我们需要采用与瀑布图相似的方法。</p><p id="7329" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">同样，您需要将<code class="fe md me mf mg b">show</code>参数设置为<code class="fe md me mf mg b">False</code>，以便能够修改图[2]。对于条形图，我们需要<strong class="la iu">调整矩形和文本对象的颜色。</strong></p><pre class="kj kk kl km gt om mg on oo aw op bi"><span id="ac0d" class="oq or it mg b gy os ot l ou ov"># Plot bar plot<br/>shap.plots.bar(shap_values[0], <strong class="mg iu">show = False</strong>)</span><span id="1824" class="oq or it mg b gy qk ot l ou ov"># Change the colormap of the artists<br/>for fc in plt.gcf().get_children():<br/>    # Ignore last Rectangle<br/>    for fcc in fc.get_children()[:-1]:<br/>        if (isinstance(fcc, <strong class="mg iu">matplotlib.patches.Rectangle</strong>)):<br/>            if (matplotlib.colors.to_hex(fcc.get_facecolor()) == default_pos_color):<br/>                fcc.set_facecolor(positive_color)<br/>            elif (matplotlib.colors.to_hex(fcc.get_facecolor()) == default_neg_color):<br/>                fcc.set_color(negative_color)<br/>        elif (isinstance(fcc, <strong class="mg iu">plt.Text</strong>)):<br/>            if (matplotlib.colors.to_hex(fcc.get_color()) == default_pos_color):<br/>                fcc.set_color(positive_color)<br/>            elif (matplotlib.colors.to_hex(fcc.get_color()) == default_neg_color):<br/>                fcc.set_color(negative_color)</span><span id="e4e5" class="oq or it mg b gy qk ot l ou ov">plt.show()</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi qo"><img src="../Images/164206e1bb43d176dca7e3feffd8cbd5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fRzOBrVDMW0Iaqcu8q9lVQ.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">带有默认和修改的调色板的条形图(图片由作者提供)</p></figure><h2 id="6613" class="oq or it bd ox pz qa dn pb qb qc dp pf lh qd qe ph ll qf qg pj lp qh qi pl qj bi translated">力图</h2><p id="c1de" class="pw-post-body-paragraph ky kz it la b lb pn ju ld le po jx lg lh pp lj lk ll pq ln lo lp pr lr ls lt im bi translated">幸运的是，对于力图，我们可以简单地使用<code class="fe md me mf mg b">plot_cmap</code>参数。</p><p id="41fb" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">您可以手动指定颜色:</p><pre class="kj kk kl km gt om mg on oo aw op bi"><span id="7c62" class="oq or it mg b gy os ot l ou ov"># Custom colors<br/>positive_color = "#ca0020"<br/>negative_color = "#92c5de"</span><span id="0dd5" class="oq or it mg b gy qk ot l ou ov">shap.force_plot(shap_values[0], <br/>                <strong class="mg iu">plot_cmap = [positive_color, negative_color]</strong>)</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/7cf753330071abf9304fa4438734cf99.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*NJckx7Ecc1BWQm2-_CRMow.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">通过指定颜色，使用修改的调色板强制绘图(图片由作者提供)</p></figure><p id="a292" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">或者使用预定义的调色板:</p><pre class="kj kk kl km gt om mg on oo aw op bi"><span id="ccb1" class="oq or it mg b gy os ot l ou ov">shap.force_plot(shap_values[0], <br/>                <strong class="mg iu">plot_cmap = "PkYg"</strong>)</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/312a8c9e1118c7455245370e58d5d075.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hdT7wxjY7nP4lbCSZZhspA.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">通过使用预定义的调色板，使用修改的调色板强制绘图(图片由作者提供)</p></figure><h1 id="772d" class="ow or it bd ox oy oz pa pb pc pd pe pf jz pg ka ph kc pi kd pj kf pk kg pl pm bi translated"><strong class="ak">结论</strong></h1><p id="6561" class="pw-post-body-paragraph ky kz it la b lb pn ju ld le po jx lg lh pp lj lk ll pq ln lo lp pr lr ls lt im bi translated">本文展示了如何快速定制SHAP图。虽然对某些阴谋来说很容易，但对其他阴谋来说，我们必须变得狡猾。</p><p id="a8ba" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">通常，您需要使用<code class="fe md me mf mg b">show = False</code>参数来调整SHAP图。</p><p id="ec2d" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">然后，您可以轻松地定制图形和轴对象的属性，如图形大小、标题和标签，或者您可以添加支线剧情。</p><p id="2978" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">自定义颜色</p><ul class=""><li id="3070" class="mw mx it la b lb lc le lf lh my ll mz lp na lt qp nc nd ne bi translated"><strong class="la iu">对于一些绘图类型，我们可以直接使用可用的参数。</strong>例如，对于汇总图，我们可以使用<code class="fe md me mf mg b">cmap</code>参数，对于压力图，我们可以使用<code class="fe md me mf mg b">plot_cmap</code>参数。</li><li id="b959" class="mw mx it la b lb ng le nh lh ni ll nj lp nk lt qp nc nd ne bi translated"><strong class="la iu">对于某些绘图类型，我们没有可用于改变颜色的参数</strong>。所以对于瀑布图、条形图之类的图，我们需要逐个改变美工的颜色。</li></ul><p id="ab85" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">如果您在使用本文的代码片段时遇到问题，请务必检查您是否至少安装了SHAP版本0.41.0。</p></div><div class="ab cl nl nm hx nn" role="separator"><span class="no bw bk np nq nr"/><span class="no bw bk np nq nr"/><span class="no bw bk np nq"/></div><div class="im in io ip iq"><h1 id="ed51" class="ow or it bd ox oy qq pa pb pc qr pe pf jz qs ka ph kc qt kd pj kf qu kg pl pm bi translated">喜欢这个故事吗？</h1><p id="7ad1" class="pw-post-body-paragraph ky kz it la b lb pn ju ld le po jx lg lh pp lj lk ll pq ln lo lp pr lr ls lt im bi translated"><em class="pv">如果你想把我的新故事直接发到你的收件箱，</em> <a class="ae nf" href="https://medium.com/subscribe/@iamleonie" rel="noopener"> <em class="pv">订阅</em> </a> <em class="pv">！</em></p><p id="b6ed" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">成为一名媒体成员，阅读更多其他作家和我的故事。报名时可以用我的 <a class="ae nf" href="https://medium.com/@iamleonie/membership" rel="noopener"> <em class="pv">推荐链接</em> </a> <em class="pv">支持我。我将收取佣金，不需要你额外付费。</em></p><div class="nu nv gp gr nw nx"><a href="https://medium.com/@iamleonie/membership" rel="noopener follow" target="_blank"><div class="ny ab fo"><div class="nz ab oa cl cj ob"><h2 class="bd iu gy z fp oc fr fs od fu fw is bi translated">通过我的推荐链接加入Medium—Leonie Monigatti</h2><div class="oe l"><h3 class="bd b gy z fp oc fr fs od fu fw dk translated">阅读Leonie Monigatti(以及媒体上成千上万的其他作家)的每一个故事。您的会员费直接…</h3></div><div class="of l"><p class="bd b dl z fp oc fr fs od fu fw dk translated">medium.com</p></div></div><div class="og l"><div class="qv l oi oj ok og ol ks nx"/></div></div></a></div><p id="c115" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated"><em class="pv">在</em><a class="ae nf" href="https://twitter.com/helloiamleonie" rel="noopener ugc nofollow" target="_blank"><em class="pv">Twitter</em></a><em class="pv"/><a class="ae nf" href="https://www.linkedin.com/in/804250ab/" rel="noopener ugc nofollow" target="_blank"><em class="pv">LinkedIn</em></a><em class="pv">，以及</em><a class="ae nf" href="https://www.kaggle.com/iamleonie" rel="noopener ugc nofollow" target="_blank"><em class="pv">Kaggle</em></a><em class="pv">！</em></p></div><div class="ab cl nl nm hx nn" role="separator"><span class="no bw bk np nq nr"/><span class="no bw bk np nq nr"/><span class="no bw bk np nq"/></div><div class="im in io ip iq"><h1 id="c903" class="ow or it bd ox oy qq pa pb pc qr pe pf jz qs ka ph kc qt kd pj kf qu kg pl pm bi translated">参考</h1><p id="d543" class="pw-post-body-paragraph ky kz it la b lb pn ju ld le po jx lg lh pp lj lk ll pq ln lo lp pr lr ls lt im bi translated">[1] C. S .“将` shap.summary_plot()`的渐变颜色更改为特定的2或3种RGB渐变调色板颜色”。stackoverflow.com。https://stack overflow . com/questions/60153036/changing-the-gradient-color-of-shap-summary-plot-to-specific-2-or-3-RGB-grad(2022年8月8日访问)</p><p id="21df" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">[2]《SHAP》，《欢迎来到SHAP文献》。https://shap.readthedocs.io/en/latest/index.html(2022年8月8日访问)</p><p id="0df9" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">[3] J. Stevenson，“用show=False修复瀑布中的bug”。github.com。<a class="ae nf" href="https://github.com/slundberg/shap/pull/2342" rel="noopener ugc nofollow" target="_blank">https://github.com/slundberg/shap/pull/2342</a>(2022年8月8日访问)</p></div></div>    
</body>
</html>