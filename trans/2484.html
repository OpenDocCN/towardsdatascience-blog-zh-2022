<html>
<head>
<title>How to Ace the missing value replacement problem</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何解决缺失值替换问题</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/how-to-ace-the-missing-value-replacement-problem-408bd9506b11#2022-05-30">https://towardsdatascience.com/how-to-ace-the-missing-value-replacement-problem-408bd9506b11#2022-05-30</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="5e1e" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">解决数据科学中最常见问题的5大专业技巧</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/0c068371c78d29c4289abd323aa0410e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*LyxgJyqbXsPXx65K7Kr4ww.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">照片由<a class="ae ky" href="https://unsplash.com/s/photos/tennis-serve?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的<a class="ae ky" href="https://unsplash.com/@arnok?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Moises Alex </a>拍摄</p></figure><p id="9c1d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">缺失值替换听起来可能微不足道，但它可能是机器学习过程中最重要的一步。你做的方式会对你的机器学习模型产生很大的影响。</p><p id="fde6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">此外，由于您将创建一些新数据，因此您对组织中的数据部门负有一些基本责任。数据是最重要的资产之一。因此，作为一名数据科学家，如果您使用缺失值替换来创建新数据，您必须向业务人员证明输出的合理性。</p><p id="e1a2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在本文中，我将向您展示ace缺失值替换的5大技巧，让您在如此重要的主题上看起来像个专家。我将使用K-最近邻(KNN)算法作为缺失值替换算法。但是，这些提示也适用于其他缺失值替换方法。</p><p id="f3d3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我从我将在这个故事中使用的数据集开始。我在Kaggle上发现了一个非常有趣的数据集，名为宇宙飞船泰坦尼克号(本文末尾提供了数据源引用)。这是基于一个虚构故事的数据。泰坦尼克号飞船是一艘星际客轮，被时空异常击中。虽然飞船完好无损，但几乎一半的乘客被运送到了另一个维度！</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi lv"><img src="../Images/461d61c44fb9a5122288d7779e3a79c9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*uAVph1WBNWx5DvNK8k-5GQ.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者在<a class="ae ky" href="https://unsplash.com/s/photos/space?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a> +数据表上的<a class="ae ky" href="https://unsplash.com/@gferla?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Guillermo Ferla </a>照片</p></figure><p id="2421" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">听起来很熟悉泰坦尼克号的问题，但它更具未来感！该数据包含乘客的详细信息，如母星球、目的地、年龄和各种服务。许多列缺少值。所以现在让我们来看看最重要的技巧，它将帮助你弥补缺失的价值。</p><h1 id="009c" class="lw lx it bd ly lz ma mb mc md me mf mg jz mh ka mi kc mj kd mk kf ml kg mm mn bi translated">1.确定并定义什么是缺失的价值</h1><p id="f242" class="pw-post-body-paragraph kz la it lb b lc mo ju le lf mp jx lh li mq lk ll lm mr lo lp lq ms ls lt lu im bi translated">识别和定义什么是缺失值的最好方法是进行可视化。它避免使用任何预先的概念。这是一张地球的柱状图。我们清楚地看到有什么东西不见了。这是识别和定义缺失值的好方法。我们可以说缺失值是一片空白。由于每个乘客都有一个家园星球，我们需要用一些价值来取代空白。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mt"><img src="../Images/5d57f4271ab8fea9f995e2a2bb025b6a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*yrQ-hWL_xsQGOvFwkS7z3w.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">按母星划分的乘客数量条形图(图片由作者提供)</p></figure><p id="5e85" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">一个类似的柱状图显示了客房服务和年龄。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mu"><img src="../Images/6215e3ecf853c334c9c4923b4fc9087f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*AzOcVJ0i9VYuHsclaJBNNw.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">客房服务和年龄(图片由作者提供)</p></figure><p id="4cd7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">对于客房服务，零值是很常见的。这是正常的，因为不是所有的乘客都需要客房服务。然而，对于年龄，有零值，而且它们不是最常见的。即使我们在未来，我确定未出生的人不算乘客！所以年龄的零值肯定是一个缺失值。</p><h1 id="7d0f" class="lw lx it bd ly lz ma mb mc md me mf mg jz mh ka mi kc mj kd mk kf ml kg mm mn bi translated"><strong class="ak"> 2。确定目标变量</strong>中缺失值的比例</h1><p id="24ed" class="pw-post-body-paragraph kz la it lb b lc mo ju le lf mp jx lh li mq lk ll lm mr lo lp lq ms ls lt lu im bi translated">通常，丢失值的努力是在机器学习的上下文中完成的。因此，检查与目标类相关的缺失值非常重要。如果相对于目标类的数据分布保持平衡，缺失值替换通常可以很好地工作。</p><p id="b8e0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">数据集中的目标变量是乘客是否因为被运送到另一个维度而迷路。下图显示了母星相对于目标变量的分布。我们可以观察到两个目标类的空白值的比例是相似的。此外，缺失值的比例非常小。这意味着替换丢失的值不会显著改变数据的形状。这是一个好消息，我们可以自信地将缺失的价值理念传达给数据和业务人员。不会引起公司内部数据大神的任何恐慌！</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mv"><img src="../Images/fde32618798cd9ec553e38fec9627645.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*iZ7uTgpmx5_akET3C4e9Og.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">家园星球与目标阶级(图片由作者提供)</p></figure><p id="c1ae" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们使用如下所示的箱线图分析，对数字列Age进行类似的分析。您将观察到两个目标类的盒图或多或少是相似的。此外，零值(即要替换的值)远离中值。这意味着没有很多零值。因此，我们不会彻底改变数据的形状，从而让公司中的数据之神高兴！</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mw"><img src="../Images/f8e92e743fc4a1d08737f16bb058abc6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*TPvm_NGJ1a_ksUc0sK57lA.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">年龄与目标阶层(图片由作者提供)</p></figure><h1 id="7c59" class="lw lx it bd ly lz ma mb mc md me mf mg jz mh ka mi kc mj kd mk kf ml kg mm mn bi translated">3.对替换算法进行前后检查</h1><p id="7ce9" class="pw-post-body-paragraph kz la it lb b lc mo ju le lf mp jx lh li mq lk ll lm mr lo lp lq ms ls lt lu im bi translated">现在，我们已经准备好使用“替换母星”和“年龄”字段中缺失的值。对于这项工作，最有效的算法之一是K-最近邻(KNN)算法。该算法将尝试查找具有缺失值的记录的最近邻。对于数值，它将替换为最近邻的平均值。对于分类值，它将替换为最常见的值。</p><p id="07e3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">一旦算法被执行，对有多少值被替换进行热图分析是非常有用的。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mx"><img src="../Images/80535a270d309ebe96db680f0e9ee26d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*YmQ5NlC8xnKw3fBHmN-WIQ.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">热图前后的KNN(图片由作者提供)</p></figure><p id="4fa0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们可以观察到所有缺失的年龄和母星值都被替换了。对于客房服务等字段，我们没有选择替换缺失值，所以前后保持不变。</p><h1 id="27b8" class="lw lx it bd ly lz ma mb mc md me mf mg jz mh ka mi kc mj kd mk kf ml kg mm mn bi translated">4.太好了，丢失的值被替换。但是用什么？</h1><p id="e742" class="pw-post-body-paragraph kz la it lb b lc mo ju le lf mp jx lh li mq lk ll lm mr lo lp lq ms ls lt lu im bi translated">太好了，KNN算法神奇地替换了丢失的值。但是用什么？我们只有明白置换后什么是价值，才能对置换算法有信心。</p><p id="7321" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这一步取决于你所使用的算法。在本文中，我使用了KNN，所以我将详细说明这个算法的方法。由于KNN是基于寻找最近邻的，因此了解被替换值的最近邻是什么会很有用。可以帮助可视化“接近度”的算法之一是降维算法TSNE(t-分布式随机邻居嵌入)。</p><p id="d4fb" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">此处显示的是绘制在2D散点图上的TSNE结果。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi my"><img src="../Images/ad0e22c30b93413f4845abb179e6f06b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*tgnQXsIzttuQfcDD7z51Rw.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">TSNE谈KNN结果(图片由作者提供)</p></figure><p id="4a81" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">绿点表示数据点有缺失值，已使用KNN算法替换。紫色点是没有缺失值的数据点。由于大多数绿点被紫点包围，我们可以对KNN的方法有信心。这表明KNN是一种很好的方法，因为缺失值的最近邻并不太远。</p><p id="49dc" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">有一个孤立的绿点集群，在下图中放大了。更仔细的观察表明，即使它是一个孤立的聚类，也有一些邻居帮助填充了缺失的值。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mz"><img src="../Images/cc5356094225c611d5d49f13b7c17e1c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9ugt8gWp6mWP6e6fekPU4g.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">放大到孤立的集群(图片由作者提供)</p></figure><p id="74c8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们还可以基于目标类验证比例，并将其与早期的结果进行比较。下图是对母星的分析。我们可以观察到空白值(4%)被地球(+2%)、欧罗巴(+1%)和火星(+1%)所取代。这是有道理的，因为大多数母星对应于地球，其次是欧罗巴和火星。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi na"><img src="../Images/942cc536c31ccb6db7fba45a2248f7e2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6ct97jyTDkjrVMl9zTKcMA.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">核实前后地球的比例(图片由作者提供)</p></figure><p id="9aec" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">类似地，我们可以观察到大多数零年龄值已经被12 -14岁和24-25岁所取代。整体直方图没有太大变化，这是个好消息。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi na"><img src="../Images/92a01dae8138945511e3b688b426e146.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*TANtm93Yyi85b9qGc9elFg.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">验证前后年龄比例(图片由作者提供)</p></figure><h1 id="6082" class="lw lx it bd ly lz ma mb mc md me mf mg jz mh ka mi kc mj kd mk kf ml kg mm mn bi translated">5.验证缺失值替换是否改进了模型</h1><p id="d73a" class="pw-post-body-paragraph kz la it lb b lc mo ju le lf mp jx lh li mq lk ll lm mr lo lp lq ms ls lt lu im bi translated">所以现在是我们一直在等待的时刻。我们需要证明管理缺失价值的所有努力是否值得。展示这一点的最佳方式是训练和测试机器学习模型两次——在缺失值替换之前和之后。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nb"><img src="../Images/081a3709e057717ea8bd94cd82840f60.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vdtO0NKAv5RzOMVjYdNMnw.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">替换前后的混淆矩阵(图片由作者提供)</p></figure><p id="2fb3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">ROC分上去了，说明所有缺失值替换的努力都是值得的！哪怕是1%的分数提升，也能帮助在Kaggle董事会上升，为银河系的乘客们讨回公道！</p><h1 id="876a" class="lw lx it bd ly lz ma mb mc md me mf mg jz mh ka mi kc mj kd mk kf ml kg mm mn bi translated">结论</h1><p id="30fb" class="pw-post-body-paragraph kz la it lb b lc mo ju le lf mp jx lh li mq lk ll lm mr lo lp lq ms ls lt lu im bi translated">总之，缺失值替换会更改数据。因此，重要的是要有足够的证据来证明为什么会改变以及改变了什么。这里描述的5个技巧将帮助你解决丢失值替换的问题。</p><h1 id="8943" class="lw lx it bd ly lz ma mb mc md me mf mg jz mh ka mi kc mj kd mk kf ml kg mm mn bi translated">观看演示并亲自尝试</h1><p id="6c0d" class="pw-post-body-paragraph kz la it lb b lc mo ju le lf mp jx lh li mq lk ll lm mr lo lp lq ms ls lt lu im bi translated">你可以访问我的网站做缺失值替换以及其他没有编码的分析:<a class="ae ky" href="https://experiencedatascience.com/" rel="noopener ugc nofollow" target="_blank">https://experiencedatascience.com</a></p><p id="79a1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这是我的Youtube频道上的一步一步的教程和演示。您将能够使用零编码根据您的数据定制演示。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nc nd l"/></div></figure><p id="bf85" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">请<strong class="lb iu">订阅</strong>,以便在我发布新故事时随时获得通知。</p><div class="ne nf gp gr ng nh"><a href="https://pranay-dave9.medium.com/subscribe" rel="noopener follow" target="_blank"><div class="ni ab fo"><div class="nj ab nk cl cj nl"><h2 class="bd iu gy z fp nm fr fs nn fu fw is bi translated">每当Pranay Dave发表文章时，您都会收到电子邮件。</h2><div class="no l"><h3 class="bd b gy z fp nm fr fs nn fu fw dk translated">每当Pranay Dave发表文章时，您都会收到电子邮件。通过注册，您将创建一个中型帐户，如果您还没有…</h3></div><div class="np l"><p class="bd b dl z fp nm fr fs nn fu fw dk translated">pranay-dave9.medium.com</p></div></div><div class="nq l"><div class="nr l ns nt nu nq nv ks nh"/></div></div></a></div><p id="5b7f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果你喜欢你所读的，你也可以通过我的推荐链接<strong class="lb iu">加入Medium </strong>。这是支持我的直接方式，我会非常感谢你。</p><div class="ne nf gp gr ng nh"><a href="https://pranay-dave9.medium.com/membership" rel="noopener follow" target="_blank"><div class="ni ab fo"><div class="nj ab nk cl cj nl"><h2 class="bd iu gy z fp nm fr fs nn fu fw is bi translated">加入我的介绍链接-普拉内戴夫媒体</h2><div class="no l"><h3 class="bd b gy z fp nm fr fs nn fu fw dk translated">作为一个媒体会员，你的会员费的一部分会给你阅读的作家，你可以完全接触到每一个故事…</h3></div><div class="np l"><p class="bd b dl z fp nm fr fs nn fu fw dk translated">pranay-dave9.medium.com</p></div></div><div class="nq l"><div class="nw l ns nt nu nq nv ks nh"/></div></div></a></div><h1 id="fcae" class="lw lx it bd ly lz ma mb mc md me mf mg jz mh ka mi kc mj kd mk kf ml kg mm mn bi translated"><strong class="ak">数据源引用</strong></h1><p id="d8f8" class="pw-post-body-paragraph kz la it lb b lc mo ju le lf mp jx lh li mq lk ll lm mr lo lp lq ms ls lt lu im bi translated">资料在这里:<a class="ae ky" href="https://www.kaggle.com/competitions/spaceship-titanic/overview" rel="noopener ugc nofollow" target="_blank">https://www . ka ggle . com/competitions/space ship-titanic/overview</a></p><p id="eb97" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">正如规则(<a class="ae ky" href="https://www.kaggle.com/competitions/spaceship-titanic/rules" rel="noopener ugc nofollow" target="_blank">https://www.kaggle.com/competitions/spaceship-titanic/rules</a>中所规定的，在第7 A节中，数据可以用于任何目的。</p><p id="555f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">A.数据访问和使用。您可以出于任何商业或非商业目的访问和使用竞赛数据，包括参加竞赛和Kaggle.com论坛，以及学术研究和教育。</p></div></div>    
</body>
</html>