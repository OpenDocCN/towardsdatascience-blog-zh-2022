<html>
<head>
<title>How To Write Readable, Elegant Regex Patterns In Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何用Python编写易读、优雅的正则表达式模式</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/alternative-regex-python-library-1d15daad8b13#2022-08-09">https://towardsdatascience.com/alternative-regex-python-library-1d15daad8b13#2022-08-09</a></blockquote><div><div class="fc ii ij ik il im"/><div class="in io ip iq ir"><div class=""/><div class=""><h2 id="3f2e" class="pw-subtitle-paragraph jr it iu bd b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki dk translated">用友好的声明性语法编写更容易理解的正则表达式</h2></div><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj kj"><img src="../Images/3520563cdcc4cce6110e02262ceaf3eb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*upMSCJsVzbTsZf_Lw9fHLw.jpeg"/></div></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">来自<a class="ae kz" href="https://www.pexels.com/photo/white-and-black-wooden-board-963278/" rel="noopener ugc nofollow" target="_blank">佩克斯</a>的<a class="ae kz" href="https://www.pexels.com/photo/white-and-black-wooden-board-963278/" rel="noopener ugc nofollow" target="_blank">大卫·巴图斯</a>的照片</p></figure><p id="0361" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">毫无疑问，Regex是有史以来最有用的文本处理工具。它帮助我们找到文本中的模式，而不是精确的单词或短语。正则表达式引擎也明显更快。</p><p id="3ebc" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">然而，困难的部分是定义一个模式。有经验的程序员可以随时定义它。但是大多数开发人员将不得不花时间搜索和阅读文档。</p><p id="b7b1" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">不管经验如何，每个人都发现阅读别人定义的模式很困难。</p><p id="afc1" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">这就是PRegEx解决的问题。</p><p id="e852" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">PRegEx是一个Python库，它使得正则表达式模式更加优雅和可读。现在它是我最喜欢的<a class="ae kz" href="https://www.the-analytics.club/python-project-structure-best-practices" rel="noopener ugc nofollow" target="_blank">清理器python代码</a>库之一。</p><p id="65be" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">您可以从<a class="ae kz" href="https://pypi.org/project/pregex/" rel="noopener ugc nofollow" target="_blank"> PyPI库</a>安装它。</p><pre class="kk kl km kn gu lw lx ly lz aw ma bi"><span id="57c2" class="mb mc iu lx b gz md me l mf mg">pip install pregex</span><span id="b1ae" class="mb mc iu lx b gz mh me l mf mg"># <a class="ae kz" href="https://www.the-analytics.club/virtualenv-alternative-for-python-dependency-management" rel="noopener ugc nofollow" target="_blank">Poetry</a> users can install<br/># poetry add pregex </span></pre><h1 id="dc85" class="mi mc iu bd mj mk ml mm mn mo mp mq mr ka ms kb mt kd mu ke mv kg mw kh mx my bi translated">开始编写可读性更强的正则表达式。</h1><p id="12ec" class="pw-post-body-paragraph la lb iu lc b ld mz jv lf lg na jy li lj nb ll lm ln nc lp lq lr nd lt lu lv in bi translated">这里有一个例子来说明PRegEx有多酷。</p><p id="8d9c" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">从地址中提取邮政编码的需求非常普遍。如果地址是标准化的，这并不困难。否则，我们需要使用一些巧妙的技术来提取它们。</p><p id="7b36" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">美国的邮政编码通常是五位数。此外，一些邮政编码的扩展名可能是由连字符分隔的四位数。</p><p id="640a" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">例如，88310是新墨西哥州的邮政编码。有些人更喜欢使用带有分机88310–7241的地理段。</p><p id="6236" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">下面是寻找这种模式的典型方法(使用<a class="ae kz" href="https://docs.python.org/3/library/re.html" rel="noopener ugc nofollow" target="_blank"> re模块</a>)。</p><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="ne nf l"/></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">使用正则表达式在Python中查找我们的邮政编码</p></figure><p id="62a3" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">这些步骤似乎很简单。然而，如果你要向一个编程新手解释你是如何定义这个模式的，你将不得不做一个小时的演讲。</p><p id="4ca6" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">我也不打算解释了。因为我们有PRegEx。这是它的PRegEx版本。</p><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="ne nf l"/></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">使用PRegEx模块在Python中查找我们的邮政编码。</p></figure><p id="6f57" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">如您所见，这段代码定义和理解都很简单。</p><p id="1491" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">该模式有两个部分。第一段应该正好有五个数字，第二段是可选的。此外，第二段(如果有)应该有一个连字符和四个数字。</p><h1 id="a189" class="mi mc iu bd mj mk ml mm mn mo mp mq mr ka ms kb mt kd mu ke mv kg mw kh mx my bi translated">理解子模块以创建更令人兴奋的正则表达式模式。</h1><p id="8feb" class="pw-post-body-paragraph la lb iu lc b ld mz jv lf lg na jy li lj nb ll lm ln nc lp lq lr nd lt lu lv in bi translated">这里我们使用了PRegEx库的几个子模块——类和量词。“类”子模块确定匹配什么，量词子模块帮助指定执行多少次重复。</p><p id="4f1b" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">您可以使用其他类，比如AnyButDigit来匹配非数字值，或者AnyLowercaseLetter来匹配小写字符串。要创建更复杂的正则表达式模式，您还可以使用不同的量词，比如OneOrMore、至少、AtMost或不定。</p><p id="ebb3" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">这是另一个有更多精彩比赛的例子。我们需要找出短信中的电子邮件地址。这很简单。但是除了匹配模式之外，我们还对捕获电子邮件地址的域感兴趣。</p><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="ne nf l"/></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">使用正则表达式匹配Python中的电子邮件地址，并捕获电子邮件域。</p></figure><p id="fe1b" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">在上面的例子中，我们使用了“groups”子模块中的Capture类。它允许我们在一场比赛中收集片段，这样你就不必做任何后处理来提取它们。</p><p id="853e" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">您经常需要的另一个子模块是操作符模块。它帮助您连接模式或选择一组选项中的任何一个。</p><p id="39f5" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">这是上面同一个例子的一个稍微修改的版本。</p><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="ne nf l"/></div></figure><p id="24bd" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">在上面的例子中，我们已经将顶级域名限制为。我们已经使用了operator子模块中的“要么”类来构建这个模式。如你所见，它与thanos@wierdland.err不匹配，因为它的顶级域名是。呃，“不是”。' com '或' . org '</p><h1 id="079d" class="mi mc iu bd mj mk ml mm mn mo mp mq mr ka ms kb mt kd mu ke mv kg mw kh mx my bi translated">最后的想法</h1><p id="ca60" class="pw-post-body-paragraph la lb iu lc b ld mz jv lf lg na jy li lj nb ll lm ln nc lp lq lr nd lt lu lv in bi translated">对于有经验的开发人员来说，定义正则表达式可能不是一项艰巨的任务。但即使对他们来说，阅读和理解别人创造的模式也是困难的。对于初学者来说，这两者都令人望而生畏。</p><p id="213c" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">此外，正则表达式是一个优秀的文本挖掘工具。任何开发人员或数据科学家几乎肯定会遇到正则表达式的使用。</p><p id="61cc" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">如果您是Python程序员，PRegEx涵盖了复杂的部分。</p></div><div class="ab cl ng nh hy ni" role="separator"><span class="nj bw bk nk nl nm"/><span class="nj bw bk nk nl nm"/><span class="nj bw bk nk nl"/></div><div class="in io ip iq ir"><blockquote class="nn no np"><p id="858d" class="la lb nq lc b ld le jv lf lg lh jy li nr lk ll lm ns lo lp lq nt ls lt lu lv in bi translated">感谢阅读，朋友！在<a class="ae kz" href="https://www.linkedin.com/in/thuwarakesh/" rel="noopener ugc nofollow" target="_blank"><strong class="lc iv">LinkedIn</strong></a><a class="ae kz" href="https://twitter.com/Thuwarakesh" rel="noopener ugc nofollow" target="_blank"><strong class="lc iv">Twitter</strong></a><a class="ae kz" href="https://thuwarakesh.medium.com/" rel="noopener"><strong class="lc iv">Medium</strong></a>上跟我打招呼。</p><p id="7266" class="la lb nq lc b ld le jv lf lg lh jy li nr lk ll lm ns lo lp lq nt ls lt lu lv in bi translated">还不是中等会员？请使用此链接<a class="ae kz" href="https://thuwarakesh.medium.com/membership" rel="noopener"> <strong class="lc iv">成为会员</strong> </a>因为，不需要你额外付费，我为你引荐赚取一小笔佣金。</p></blockquote></div></div>    
</body>
</html>