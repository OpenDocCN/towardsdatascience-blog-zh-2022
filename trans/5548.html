<html>
<head>
<title>The Starters Guide to Release your Python Package in PyPi</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用 PyPi 发布 Python 包的入门指南</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/the-starters-guide-to-release-your-python-package-in-pypi-efd72cbc0011#2022-12-14">https://towardsdatascience.com/the-starters-guide-to-release-your-python-package-in-pypi-efd72cbc0011#2022-12-14</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="2d18" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">一步一步的指导，有效地在 Python 包索引(PyPI)中发布您的 Python 包，以 pip 安装它</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/c453095eca57dc77b59f08a601668837.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*boADMs4ZEAam9kSmIAX9FA.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">照片由<a class="ae ky" href="https://unsplash.com/@aaronburden?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Aaron Burden </a>在<a class="ae ky" href="https://unsplash.com/s/photos/compas?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a></p></figure><p id="3d68" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在 PyPi 中发布一个包并用 pip 安装它有很大的好处，因为它会自动解决依赖性，并且它可以在任何机器上访问。然而，发布开源 Python 包需要一些准备步骤，例如目录的明确结构、版本控制、归档构建和发布包。我将逐步展示如何<em class="lv"> i) </em>用必要的文件构建目录，<em class="lv"> ii) </em>用版本控制创建发行版档案(也就是 Python 包)，以及<em class="lv"> iii) </em>在 PyPi 上发布。我还将演示如何使用<strong class="lb iu"><em class="lv">I release</em></strong><em class="lv"/>库<em class="lv">来自动化所有这些步骤。在这篇博客的最后，你可以发布并安装你自己的库。</em></p></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><p id="f367" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><em class="lv">如果你觉得这篇文章很有帮助，可以使用我的</em> <a class="ae ky" href="https://medium.com/@erdogant/membership" rel="noopener"> <em class="lv">推荐链接</em> </a> <em class="lv">继续无限制学习，并注册成为中级会员。另外，</em> <a class="ae ky" href="http://erdogant.medium.com" rel="noopener"> <em class="lv">关注我</em> </a> <em class="lv">关注我的最新内容！</em></p><h1 id="91e6" class="md me it bd mf mg mh mi mj mk ml mm mn jz mo ka mp kc mq kd mr kf ms kg mt mu bi translated">Python 包。</h1><p id="390c" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">Python 包是加载函数(集合)的基本构建块。这将防止每次启动时都要从头开始编写代码。<em class="lv">物理上的</em>，它是一个包含 Python 脚本的结构化文件夹。<em class="lv">概念上的</em>，是一个名称空间。或者换句话说，由一个包名绑定在一起的一组功能或模块。包保存在一个名为<a class="ae ky" href="https://pypi.org/" rel="noopener ugc nofollow" target="_blank"> PyPi </a>或 Python 包索引【1】的中央存储库中。可以用命令安装:<code class="fe na nb nc nd b">pip install &lt;package_name&gt;</code> <strong class="lb iu"> <em class="lv"> </em> </strong> <em class="lv">。</em> <strong class="lb iu"> <em class="lv"> </em> </strong>在后台，pip 工具会在服务器上搜索包名，然后安装到(本地)机器上。另一个优点是它自动解析依赖树。要创建 Python 包，需要遵循一些基本规则。<strong class="lb iu"> <em class="lv">第一步是创建一个结构化的文件夹。</em> </strong></p></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><h1 id="ac0d" class="md me it bd mf mg ne mi mj mk nf mm mn jz ng ka mp kc nh kd mr kf ni kg mt mu bi translated">第一步。创建结构化文件夹。</h1><p id="24da" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">构建您的目录是很重要的，即使您不想在 PyPi 上发布它。<em class="lv">这将使你的项目可维护，对你未来的自己和那些想贡献或使用它的人来说都是可理解的。在创建结构化文件夹之前，我们需要一个包名。除了少数例外，可以自由选择包的名称。最重要的是，应该是在<a class="ae ky" href="https://pypi.org/" rel="noopener ugc nofollow" target="_blank"> PyPi </a>上没有注册。通过在 pypi.org 的搜索栏中搜索包名来找到它。如果名字已经存在，你需要有创意。</em></p><p id="25b2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">出于演示的目的，我将把我的包命名为:<strong class="lb iu"> <em class="lv"> relevantpackage。</em> </strong> <em class="lv"> </em>对于<em class="lv"> Python 包文件夹</em>和<em class="lv">主 Python 脚本</em>的名称，建议并通常使用与<strong class="lb iu">完全相同的</strong> <em class="lv">名称</em>(参见下面的代码部分)。但是，命名可能取决于项目的范围。只要确保明智地选择(文件夹/文件)名称，以避免导入过程中的混淆<em class="lv">。</em>与<strong class="lb iu"> <em class="lv">相关的包</em> </strong>的目录结构如下图所示。<em class="lv">请注意，所有文件在开始时都可以是空的，因为我们将在下面的部分中填充它们。</em></p><pre class="kj kk kl km gt nj nd nk bn nl nm bi"><span id="ec49" class="nn me it nd b be no np l nq nr">relevantpackage/<br/>├── relevantpackage/        Python package folder.<br/>|    ├── __init__.py        Make the folder a package.<br/>|    └── relevantpackage.py The main Python file.<br/>|<br/>├── setup.py                Configuration file for the package and dependencies.<br/>├── LICENSE                 License file.<br/>└── README.md               Project information.</span></pre></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><h2 id="73f3" class="ns me it bd mf nt nu dn mj nv nw dp mn li nx ny mp lm nz oa mr lq ob oc mt od bi translated">相关包. py</h2><p id="76eb" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">我要创建的第一个文件是主 python 脚本。这个脚本的名字是<code class="fe na nb nc nd b">relevantpackage.py.</code>，它由一个名为<code class="fe na nb nc nd b">Relevantpackage</code>的类组成，我们可以导入并初始化这个类:<code class="fe na nb nc nd b">from filename import classname</code>或者在这个例子中:<code class="fe na nb nc nd b">from relevantpackage import Relevantpackage</code>。</p><pre class="kj kk kl km gt nj nd nk bn nl nm bi"><span id="0b5b" class="nn me it nd b be no np l oe nr">"""This is the relevantpackage.py script."""<br/><br/># Import libraries<br/>import os<br/><br/>class Relevantpackage():<br/>    """Relevant package class."""<br/><br/>    def __init__(self, message=None):<br/>        """Initialize with user-defined parameters."""<br/>        self.message=message<br/><br/>    def show(self):<br/>        """Run the show function."""<br/>        if self.message is None:<br/>            print('No message was given as input during initialization.')<br/>        else:<br/>            print(self.message)<br/><br/>        # Return<br/>        return None</span></pre></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><h2 id="1018" class="ns me it bd mf nt nu dn mj nv nw dp mn li nx ny mp lm nz oa mr lq ob oc mt od bi translated">__init__。巴拉圭</h2><p id="b691" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">package 文件夹是将要在 PyPi 上发布的文件夹，因此安装在(本地)机器上。要告诉 Python " <em class="lv">这是包目录"</em>，它需要一个名为<code class="fe na nb nc nd b">__init__.py</code> <em class="lv"> </em>的文件。在我的例子中，是目录<strong class="lb iu"> <em class="lv"> relevantpackage。</em></strong>init 文件是包初始化时第一个执行的文件。如果你喜欢，它可以是空的，但是我推荐添加下面的信息。注意，这个<em class="lv"> init </em>文件与脚本<em class="lv"> relevantpackage.py </em>中写的<code class="fe na nb nc nd b">def __init__(self, message=None)</code>无关。</p><pre class="kj kk kl km gt nj nd nk bn nl nm bi"><span id="3c39" class="nn me it nd b be no np l oe nr"># Change the content according to your package.<br/># from directory.filename.py import classname<br/>from relevantpackage.relevantpackage import Relevantpackage<br/><br/>__author__ = 'E.Taskesen'<br/>__email__ = 'name@gmail.com'<br/>__version__ = '0.1.0'<br/><br/># module level doc-string<br/>__doc__ = """<br/>relevantpackage<br/>================<br/><br/>Description<br/>-----------<br/>relevantpackage is a Python package created for demonstration purposes.<br/>This information will show up when using the help function.<br/><br/>Example<br/>-------<br/>&gt;&gt;&gt; # Import library<br/>&gt;&gt;&gt; from relevantpackage import Relevantpackage<br/>&gt;&gt;&gt; # Initialize<br/>&gt;&gt;&gt; model = Relevantpackage(message='Hello World')<br/>&gt;&gt;&gt; # Run the model<br/>&gt;&gt;&gt; model.show()<br/><br/>References<br/>----------<br/>* https://towardsdatascience.com/a-step-by-step-guide-in-detecting-causal-relationships-using-bayesian-structure-learning-in-python-c20c6b31cee5<br/><br/>"""</span></pre></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><h2 id="f384" class="ns me it bd mf nt nu dn mj nv nw dp mn li nx ny mp lm nz oa mr lq ob oc mt od bi translated">setup.py</h2><p id="df77" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated"><code class="fe na nb nc nd b">setup.py</code>是您的包的配置文件。它将包含依赖项、版本和其他相关信息(参见下面的代码部分)。对于<strong class="lb iu"> <em class="lv"> relevantpackage，</em> </strong>我们没有依赖项，但是我添加了最常用的库，比如<em class="lv"> NumPy、Pandas 和 Matplotlib </em>用于演示目的。依赖项是被使用并导入到包中的库。</p><pre class="kj kk kl km gt nj nd nk bn nl nm bi"><span id="634c" class="nn me it nd b be no np l oe nr"># Change the content according to your package.<br/>import setuptools<br/>import re<br/><br/># Extract the version from the init file.<br/>VERSIONFILE="relevantpackage/__init__.py"<br/>getversion = re.search( r"^__version__ = ['\"]([^'\"]*)['\"]", open(VERSIONFILE, "rt").read(), re.M)<br/>if getversion:<br/>    new_version = getversion.group(1)<br/>else:<br/>    raise RuntimeError("Unable to find version string in %s." % (VERSIONFILE,))<br/><br/># Configurations<br/>with open("README.md", "r") as fh:<br/>    long_description = fh.read()<br/>setuptools.setup(<br/>     install_requires=['matplotlib','numpy','pandas'],        # Dependencies<br/>     python_requires='&gt;=3',                                   # Minimum Python version<br/>     name='relevantpackage',                                  # Package name<br/>     version=new_version,                                     # Version<br/>     author="E.Taskesen",                                     # Author name<br/>     author_email="name@gmail.com",                           # Author mail<br/>     description="Python package for my relevantpackage.",    # Short package description<br/>     long_description=long_description,                       # Long package description<br/>     long_description_content_type="text/markdown",<br/>     url="https://github.com/erdogant/relevantpackage",       # Url to your Git Repo<br/>     download_url = 'https://github.com/erdogant/relevantpackage/archive/'+new_version+'.tar.gz',<br/>     packages=setuptools.find_packages(),                     # Searches throughout all dirs for files to include<br/>     include_package_data=True,                               # Must be true to include files depicted in MANIFEST.in<br/>     license_files=["LICENSE"],                               # License file<br/>     classifiers=[<br/>         "Programming Language :: Python :: 3",<br/>         "License :: OSI Approved :: MIT License",<br/>         "Operating System :: OS Independent",<br/>     ],<br/> )</span></pre></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><h2 id="08a6" class="ns me it bd mf nt nu dn mj nv nw dp mn li nx ny mp lm nz oa mr lq ob oc mt od bi translated">README.md</h2><p id="cdf7" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated"><code class="fe na nb nc nd b">README.md</code>是一个降价文件，包含关于包和/或项目的一般信息。这是 GitHub 存储库上显示的第一页。我在自述文件中加入了<strong class="lb iu"> <em class="lv">徽章</em> </strong>，提供了该项目的概述。请注意，有些徽章只有在 PyPi 上提供该包后才有效。您可以通过将<strong class="lb iu"> <em class="lv">相关包</em> </strong>名称更改为您的包名称来重复使用这些徽章。</p><pre class="kj kk kl km gt nj nd nk bn nl nm bi"><span id="a011" class="nn me it nd b be no np l oe nr"># relevantpackage<br/><br/>[![Python](https://img.shields.io/pypi/pyversions/relevantpackage)](https://img.shields.io/pypi/pyversions/relevantpackage)<br/>[![Pypi](https://img.shields.io/pypi/v/relevantpackage)](https://pypi.org/project/relevantpackage/)<br/>[![LOC](https://sloc.xyz/github/erdogant/relevantpackage/?category=code)](https://github.com/erdogant/relevantpackage/)<br/>[![Downloads](https://static.pepy.tech/personalized-badge/relevantpackage?period=month&amp;units=international_system&amp;left_color=grey&amp;right_color=brightgreen&amp;left_text=PyPI%20downloads/month)](https://pepy.tech/project/relevantpackage)<br/>[![Downloads](https://static.pepy.tech/personalized-badge/relevantpackage?period=total&amp;units=international_system&amp;left_color=grey&amp;right_color=brightgreen&amp;left_text=Downloads)](https://pepy.tech/project/relevantpackage)<br/>[![License](https://img.shields.io/badge/license-MIT-green.svg)](https://github.com/erdogant/relevantpackage/blob/master/LICENSE)<br/>[![Forks](https://img.shields.io/github/forks/erdogant/relevantpackage.svg)](https://github.com/erdogant/relevantpackage/network)<br/>[![Issues](https://img.shields.io/github/issues/erdogant/relevantpackage.svg)](https://github.com/erdogant/relevantpackage/issues)<br/>[![Project Status](http://www.repostatus.org/badges/latest/active.svg)](http://www.repostatus.org/#active)<br/><br/>---------<br/><br/>### Install relevantpackagefrom PyPi.<br/>```bash<br/>pip install relevantpackage<br/>```<br/><br/>#### Example<br/>```python<br/>  # Import library<br/>  from relevantpackage import Relevantpackage<br/>  # Initialize<br/>  model = Relevantpackage(message='Hello World')<br/>  # Run the model<br/>  model.show()<br/>```</span></pre></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><h2 id="4e36" class="ns me it bd mf nt nu dn mj nv nw dp mn li nx ny mp lm nz oa mr lq ob oc mt od bi translated">许可证</h2><p id="792f" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated"><code class="fe na nb nc nd b">LICENSE</code>是开源软件的重要组成部分。为了让你的库真正开源，你需要许可它，这样其他人就知道如何使用、改变和分发软件。因此，选择正确的许可证非常重要。在<a class="ae ky" href="https://docs.github.com/en/repositories/managing-your-repositorys-settings-and-features/customizing-your-repository/licensing-a-repository" rel="noopener ugc nofollow" target="_blank">本页</a>上阅读更多关于不同类型许可证的信息。创建新的存储库时，可以从下拉菜单中选择许可证，如图 1 所示。<strong class="lb iu"> <em class="lv">相关包</em> </strong>将在 MIT 许可下可用。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi of"><img src="../Images/6f7ca24ced3a8406fab8c71773bb7deb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mqyopgMIBDcBoLl_10x5Kw.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">图一。创建新的存储库时，可以选择许可证(图片由作者提供)。</p></figure></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><h1 id="43a5" class="md me it bd mf mg ne mi mj mk nf mm mn jz ng ka mp kc nh kd mr kf ni kg mt mu bi translated">第二步。上传到 GitHub。</h1><p id="35c6" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">在您创建了包含所需文件<em class="lv">(如步骤 1 所示)</em>的结构化目录后，您可以在<a class="ae ky" href="http://github.com/" rel="noopener ugc nofollow" target="_blank"> GitHub </a>上发布它。请注意，您需要为您的包更改<code class="fe na nb nc nd b">setup.py</code>中的变量，<em class="lv">如名称、描述、URL 等</em>。将文件推送到 GitHub 存储库之后，我们可以开始构建发行版档案，也就是 Python 包。图 2 显示了<a class="ae ky" href="https://github.com/erdogant/relevantpackage" rel="noopener ugc nofollow" target="_blank"><strong class="lb iu"><em class="lv">relevant package</em></strong></a><strong class="lb iu"><em class="lv">的<a class="ae ky" href="https://github.com/erdogant/relevantpackage" rel="noopener ugc nofollow" target="_blank"> GitHub 库</a>。</em> </strong>请注意，有些徽章在开始时可能是红色的，但在 PyPi 上发布包后会变成绿色。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi og"><img src="../Images/0b303faf7e9d54de10ab30f7078756f4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9Q-kTmRzhjPfD55Er5lHoA.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">图二。relevantpackage 的 GitHub 库截图(图片由作者提供)。</p></figure></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><h1 id="0137" class="md me it bd mf mg ne mi mj mk nf mm mn jz ng ka mp kc nh kd mr kf ni kg mt mu bi translated">第三步。安装所需的工具。</h1><p id="538b" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">为了在 PyPi 上创建发行版档案并发布包，我们需要一些库的帮助。<strong class="lb iu"> <em class="lv">这里我要介绍一下 irelease 库[2]。irelease 库自动创建发行版档案、版本检查、在 GitHub 上创建标签和发布，以及在 PyPi </em> </strong>上发布。在下一节中，我将演示如何使用<strong class="lb iu"><em class="lv"/></strong>库来释放<strong class="lb iu"> <em class="lv">相关包</em> </strong>。此外，我将描述手动创建发行版归档文件的步骤。首先，让我们安装<strong class="lb iu"> <em class="lv"> irelease </em> </strong>库:</p><pre class="kj kk kl km gt nj nd nk bn nl nm bi"><span id="647d" class="nn me it nd b be no np l oe nr">pip install irelease</span></pre><p id="f127" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu"><em class="lv">I release</em></strong><em class="lv">库</em>使用<em class="lv"> Setuptools、Wheels 和 Twine </em>，它们是众所周知的发布 Python 包的工具。简要描述如下:</p><ul class=""><li id="488c" class="oh oi it lb b lc ld lf lg li oj lm ok lq ol lu om on oo op bi translated"><a class="ae ky" href="https://pypi.org/project/setuptools/" rel="noopener ugc nofollow" target="_blank"> Setuptools </a>:用于创建和发布 Python 包。</li><li id="c1d9" class="oh oi it lb b lc oq lf or li os lm ot lq ou lu om on oo op bi translated"><a class="ae ky" href="https://pypi.org/project/wheel/" rel="noopener ugc nofollow" target="_blank">滚轮</a>:用于创建<code class="fe na nb nc nd b">.whl</code>文件，可通过<code class="fe na nb nc nd b">pip install</code>命令直接安装。该文件也被上传到<a class="ae ky" href="https://pypi.org/" rel="noopener ugc nofollow" target="_blank"> P </a> yPi。</li><li id="50d4" class="oh oi it lb b lc oq lf or li os lm ot lq ou lu om on oo op bi translated"><a class="ae ky" href="https://pypi.org/project/twine/" rel="noopener ugc nofollow" target="_blank"> Twine </a>:在您的系统和<a class="ae ky" href="https://pypi.org/" rel="noopener ugc nofollow" target="_blank"> PyPi </a>之间提供一个安全的、经过验证的连接。</li></ul></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><h1 id="d196" class="md me it bd mf mg ne mi mj mk nf mm mn jz ng ka mp kc nh kd mr kf ni kg mt mu bi translated">第四步。软件包的安装和测试。</h1><p id="3bf2" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">此时，我们创建了一个结构化的文件夹，其中包含所有必需的文件，应该可以通过 pip 安装。在 PyPi 上发布之前，建议首先检查本地机器上的工作是否正确。要创建包的安装，我们需要转到根目录(在这个例子中:<strong class="lb iu"><em class="lv">relevant package</em></strong>)并安装:</p><pre class="kj kk kl km gt nj nd nk bn nl nm bi"><span id="036c" class="nn me it nd b be no np l oe nr">pip install -U -e .</span></pre><p id="0f8d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">有三个输入参数，<code class="fe na nb nc nd b">-U</code>参数是<code class="fe na nb nc nd b">-Update</code>的缩写，它将强制安装当前版本。<code class="fe na nb nc nd b">-e</code>参数是<code class="fe na nb nc nd b">-editable</code>的缩写，它允许你进行编辑。<code class="fe na nb nc nd b">.</code>指当前工作目录。合起来就是在可编辑模式下强制安装当前目录(即<strong class="lb iu"> <em class="lv">相关包</em> </strong>)。现在，您可以导入包并测试功能，如下所示:</p><pre class="kj kk kl km gt nj nd nk bn nl nm bi"><span id="c16e" class="nn me it nd b be no np l oe nr"># Import library<br/>from relevantpackage import Relevantpackage<br/># Initialize<br/>model = Relevantpackage(message='Hello World')<br/># Run the model<br/>model.show()</span></pre></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><h1 id="f187" class="md me it bd mf mg ne mi mj mk nf mm mn jz ng ka mp kc nh kd mr kf ni kg mt mu bi translated">第五步。创建一个包并发布到 PyPI 上。</h1><p id="4ce0" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">此时，我们创建了一个包含所有必要文件的结构化文件夹，我们测试了包的正确工作，我们有一个可用于版本控制的 GitHub 存储库，安装了所有需要的库，并且在<a class="ae ky" href="https://pypi.org/account/register/" rel="noopener ugc nofollow" target="_blank"> <em class="lv"> Twine </em> </a>上创建了一个帐户，用于安全分发您的包。</p><p id="053c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">下一步是构建发行版档案。这些是您的包的压缩文件，可以跨多个平台(Windows、UNIX、macOS)部署。要创建发行版归档文件并发布包，我们必须从您要发布的包的根目录运行<strong class="lb iu"> <em class="lv"> irelease </em> </strong>。在我的例子中，它是本地磁盘上的<strong class="lb iu"><em class="lv">relevant package</em></strong>的根(图 3)。我们可以使用终端或(Anaconda)提示符，用一个命令发布这个包。您可以使用命令<code class="fe na nb nc nd b">irelease</code>或<code class="fe na nb nc nd b">pyrelease</code>。在下面的章节中，我将使用<code class="fe na nb nc nd b">irelease</code>这个名字，但是这两个命令做的完全一样。</p><pre class="kj kk kl km gt nj nd nk bn nl nm bi"><span id="50b9" class="nn me it nd b be no np l oe nr">irelease</span></pre><pre class="ov nj nd nk bn nl nm bi"><span id="67b0" class="nn me it nd b be no np l oe nr">pyrelease</span></pre><p id="07c4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe na nb nc nd b">irelease</code>的默认设置是自动从<code class="fe na nb nc nd b">.git</code>和<code class="fe na nb nc nd b">setup.py</code>中提取<em class="lv">用户名</em>、<em class="lv">包名和路径位置</em>。您不需要提供任何输入参数，但是，这可能取决于您的系统配置。您可以提供输入参数，如下面的代码部分所示。</p><pre class="kj kk kl km gt nj nd nk bn nl nm bi"><span id="c25e" class="nn me it nd b be no np l oe nr">irelease -u erdogant -p relevantpackage<br/><br/>options:<br/>  -u USERNAME, --username USERNAME # Username on Github/Gitlab.<br/>  -p PACKAGE, --package PACKAGE    # Package name to be released.<br/>  -c {0,1}, --clean {0,1}          # Remove local builds: [dist], [build] and [x.egg-info].<br/>  -i {0,1}, --install {0,1}        # Install this versions on local machine.<br/>  -t twine, --twine twine          # Path to twine in case you have a custom build.<br/>  -v {0,1,2,3,4,5}                 # Verbosity, higher number tends to more information.</span></pre><p id="ada3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在终端中运行<code class="fe na nb nc nd b">irelease</code>后，如动画图(图 3)所示，将连续执行以下步骤:</p><ol class=""><li id="a9ec" class="oh oi it lb b lc ld lf lg li oj lm ok lq ol lu ow on oo op bi translated">从 GitHub 库获取最新信息。</li><li id="f550" class="oh oi it lb b lc oq lf or li os lm ot lq ou lu ow on oo op bi translated"><code class="fe na nb nc nd b">__init__.py</code>中列出的版本与 GitHub 上发布的最新版本的比较。</li><li id="3c6e" class="oh oi it lb b lc oq lf or li os lm ot lq ou lu ow on oo op bi translated">清理以前的构建目录，如<code class="fe na nb nc nd b">dist</code>和<code class="fe na nb nc nd b">build</code>，以防止错误构建的分发。</li><li id="ebb8" class="oh oi it lb b lc oq lf or li os lm ot lq ou lu ow on oo op bi translated">使用以下命令创建新的分发归档文件:</li></ol><pre class="kj kk kl km gt nj nd nk bn nl nm bi"><span id="a868" class="nn me it nd b be no np l oe nr">python setup.py bdist_wheel</span></pre><pre class="ov nj nd nk bn nl nm bi"><span id="b98c" class="nn me it nd b be no np l oe nr">python setup.py sdist</span></pre><p id="f5b9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">5.在 Git 存储库中自动设置版本<strong class="lb iu"> <em class="lv">标签</em> </strong>。这将冻结 GitHub 库的当前状态，并允许在需要时在版本之间来回切换。在这里可以找到<strong class="lb iu"> <em class="lv">相关包</em> </strong>的标签:</p><pre class="kj kk kl km gt nj nd nk bn nl nm bi"><span id="b541" class="nn me it nd b be no np l nq nr">https://github.com/erdogant/relevantpackage/tags</span></pre><p id="c541" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">6.使用<em class="lv">绳</em>上传到 PyPi 的发行档案。请注意，您需要<a class="ae ky" href="https://pypi.org/project/twine/" rel="noopener ugc nofollow" target="_blank">绳线</a>的用户名和密码。正在使用的命令:</p><pre class="kj kk kl km gt nj nd nk bn nl nm bi"><span id="83b3" class="nn me it nd b be no np l oe nr">twine upload dist/*</span></pre><p id="6404" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">7.打开 GitHub 存储库的发布页面，添加发布描述。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ox"><img src="../Images/8ea578cdc46c9e4c5499b76b1ba4ed7c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*WJBLSknFhrjwDimiTK7u1g.gif"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">图 3。运行 irelease 创建发行版归档文件并在 PyPi 上发布包的示例(图片由作者提供)。</p></figure><p id="182b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">8.最后一步是在 GitHub 存储库上创建关于发布的描述。然后按下&lt;<em class="lv">释放按钮&gt; </em>。注意，当使用<strong class="lb iu"> <em class="lv"> irelease </em> </strong>时，浏览器会自动打开(图 4)。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oy"><img src="../Images/50875c33848420e1b8501ab332482366.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jXQY9z76O5mycHwiAOjQlg.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">图 4。最后一步是为你的发布写一个描述。<a class="ae ky" href="https://github.com/erdogant/relevantpackage/releases" rel="noopener ugc nofollow" target="_blank">https://github.com/erdogant/relevantpackage/releases</a>(图片由作者提供)。</p></figure></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><h1 id="77ab" class="md me it bd mf mg ne mi mj mk nf mm mn jz ng ka mp kc nh kd mr kf ni kg mt mu bi translated">第六步。Pip 安装您的软件包。</h1><p id="7b99" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">当你现在在 pypi.org<a class="ae ky" href="https://pypi.org/" rel="noopener ugc nofollow" target="_blank">搜索你的包裹时，你应该能找到。这意味着您可以使用 pip 安装软件包，导入并使用库。让我们试试<strong class="lb iu"> <em class="lv">相关包</em> </strong>(参见下面的代码部分和图 5) <em class="lv">。</em></a></p><pre class="kj kk kl km gt nj nd nk bn nl nm bi"><span id="d673" class="nn me it nd b be no np l oe nr">pip install relevantpackage</span></pre><pre class="ov nj nd nk bn nl nm bi"><span id="38be" class="nn me it nd b be no np l oe nr"># Import library<br/>from relevantpackage import Relevantpackage<br/># Initialize<br/>model = Relevantpackage(message='Hello World')<br/># Run the model<br/>model.show()</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ox"><img src="../Images/8c3a947f8ecb5c12e75ba3a85d1a5127.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*IGxlACFONes4jg8XZChSMA.gif"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">图 5。pip 安装相关包并运行示例代码(图片由作者提供)。</p></figure></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><h1 id="d007" class="md me it bd mf mg ne mi mj mk nf mm mn jz ng ka mp kc nh kd mr kf ni kg mt mu bi translated">最后的话。</h1><p id="ec80" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">使用<strong class="lb iu"> <em class="lv"> irelease </em> </strong>库，您可以轻松地发布您的包，因为它自动化了创建发行版档案、版本检查、创建标签和发布到 PyPi 的步骤。释放你的包的好处，不管多小，都是巨大的。您的包可以在任何机器上访问，它解决了您的包所需的依赖树。另一个优点是，您必须创建一个具有明确目录结构的存储库。这将有助于使你的项目对你未来的自己来说是可维护的和可理解的，对其他想要使用或贡献的人来说也是如此。请注意，还有一些工具，如<a class="ae ky" href="https://github.com/cookiecutter/cookiecutter" rel="noopener ugc nofollow" target="_blank">cookiecutter</a>【3】，可以帮助创建必要的目录结构。</p><p id="a517" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我没有描述的另外两个重要步骤是<em class="lv">测试和文档</em>，但是你可能想在发布你的包之前考虑一下。强烈建议在发布您的包之前编写测试。对于测试驱动开发来说，有很多很好的材料。此外，如果您发布了您的包，还建议您创建描述输入参数、输出和函数行为的文档。此外，创建许多演示用法的示例。最好的方法是在代码中创建带有描述和示例的文档字符串。然后，可以将文档字符串与诸如<a class="ae ky" href="https://docs.readthedocs.io/en/stable/intro/getting-started-with-sphinx.html" rel="noopener ugc nofollow" target="_blank">Sphinx</a>【4】这样的工具一起使用。这里显示了一个例子<a class="ae ky" href="https://d3blocks.github.io/d3blocks/pages/html/d3graph.html" rel="noopener ugc nofollow" target="_blank"/>，我在这里创建了 Sphinx 页面<em class="lv">D3 blocks</em><em class="lv"/>，它们主要依赖于代码中编写的文档字符串。<em class="lv">就是这个！我期待着听到你发表你的第一个包！</em></p><p id="7182" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">注意安全。保持冷静。</p><p id="db4d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu"> <em class="lv">欢呼，e .</em>T3】</strong></p></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><p id="942a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><em class="lv">如果你觉得这篇文章很有帮助，可以使用我的</em> <a class="ae ky" href="https://medium.com/@erdogant/membership" rel="noopener"> <em class="lv">推荐链接</em> </a> <em class="lv">继续无限制学习，并注册成为中级会员。另外，</em> <a class="ae ky" href="http://erdogant.medium.com" rel="noopener"> <em class="lv">关注我</em> </a> <em class="lv">关注我的最新内容！</em></p></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><h1 id="2af0" class="md me it bd mf mg ne mi mj mk nf mm mn jz ng ka mp kc nh kd mr kf ni kg mt mu bi translated">软件</h1><ul class=""><li id="d965" class="oh oi it lb b lc mv lf mw li oz lm pa lq pb lu om on oo op bi translated"><a class="ae ky" href="https://github.com/erdogant/irelease" rel="noopener ugc nofollow" target="_blank"> irelease GitHub </a></li></ul><h1 id="efe2" class="md me it bd mf mg mh mi mj mk ml mm mn jz mo ka mp kc mq kd mr kf ms kg mt mu bi translated">我们连线吧！</h1><ul class=""><li id="c269" class="oh oi it lb b lc mv lf mw li oz lm pa lq pb lu om on oo op bi translated">让我们在 LinkedIn 上联系一下</li><li id="f600" class="oh oi it lb b lc oq lf or li os lm ot lq ou lu om on oo op bi translated"><a class="ae ky" href="https://github.com/erdogant" rel="noopener ugc nofollow" target="_blank">在 GitHub 上关注我</a></li><li id="322d" class="oh oi it lb b lc oq lf or li os lm ot lq ou lu om on oo op bi translated">在媒体上跟随我</li></ul><h1 id="a2d5" class="md me it bd mf mg mh mi mj mk ml mm mn jz mo ka mp kc mq kd mr kf ms kg mt mu bi translated">参考</h1><ol class=""><li id="8df2" class="oh oi it lb b lc mv lf mw li oz lm pa lq pb lu ow on oo op bi translated"><em class="lv">使用 Python 包索引查找、安装和发布 Python 包。</em><a class="ae ky" href="https://pypi.org/" rel="noopener ugc nofollow" target="_blank">https://pypi.org/</a></li><li id="9df1" class="oh oi it lb b lc oq lf or li os lm ot lq ou lu ow on oo op bi translated">Taskesen，E. (2020 年)。Python 包来发布你的包。<a class="ae ky" href="https://github.com/erdogant/irelease" rel="noopener ugc nofollow" target="_blank">https://github.com/erdogant/irelease</a></li><li id="351d" class="oh oi it lb b lc oq lf or li os lm ot lq ou lu ow on oo op bi translated"><em class="lv">从 cookiecutters(项目模板)创建项目的跨平台命令行实用程序，例如 Python 包项目、C 项目。</em><a class="ae ky" href="https://github.com/cookiecutter/cookiecutter" rel="noopener ugc nofollow" target="_blank">https://github.com/cookiecutter/cookiecutter</a></li><li id="8444" class="oh oi it lb b lc oq lf or li os lm ot lq ou lu ow on oo op bi translated"><em class="lv"> Sphinx 是一个强大的文档生成器，具有许多用于编写技术文档的强大功能，包括。</em><a class="ae ky" href="https://docs.readthedocs.io/en/stable/intro/getting-started-with-sphinx.html" rel="noopener ugc nofollow" target="_blank">https://docs . readthe docs . io/en/stable/intro/getting-started-with-sphinx . html</a></li><li id="de51" class="oh oi it lb b lc oq lf or li os lm ot lq ou lu ow on oo op bi translated"><em class="lv"> Taskesen E，Verver O. D3Blocks:一个 Python 包，用于创建交互式 d3js 可视化。</em><a class="ae ky" href="https://d3blocks.github.io/d3blocks" rel="noopener ugc nofollow" target="_blank">https://d3blocks.github.io/d3blocks</a></li></ol></div></div>    
</body>
</html>