<html>
<head>
<title>Partial Autocorrelation for Time Series Analysis</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">时间序列分析的偏自相关</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/partial-autocorrelation-for-time-series-481a9cfa7526#2022-11-15">https://towardsdatascience.com/partial-autocorrelation-for-time-series-481a9cfa7526#2022-11-15</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="7401" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">描述什么是偏自相关及其在时间序列分析中的重要性</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/9b716ec01eb9998f5867d8f4b4d0f22a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*KHlwiN8DNkMfxi_T"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">马库斯·斯皮斯克在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</p></figure><h1 id="93ac" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">介绍</h1><p id="a069" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">在我之前的文章中，我们讨论了<a class="ae ky" href="https://medium.com/towards-data-science/autocorrelation-for-time-series-analysis-86e68e631f77" rel="noopener"> <strong class="lt iu">自相关</strong> </a>的概念:</p><div class="mn mo gp gr mp mq"><a rel="noopener follow" target="_blank" href="/autocorrelation-for-time-series-analysis-86e68e631f77"><div class="mr ab fo"><div class="ms ab mt cl cj mu"><h2 class="bd iu gy z fp mv fr fs mw fu fw is bi translated">时间序列分析的自相关</h2><div class="mx l"><h3 class="bd b gy z fp mv fr fs mw fu fw dk translated">描述什么是自相关，为什么它在时间序列分析中有用。</h3></div><div class="my l"><p class="bd b dl z fp mv fr fs mw fu fw dk translated">towardsdatascience.com</p></div></div><div class="mz l"><div class="na l nb nc nd mz ne ks mq"/></div></div></a></div><p id="e13e" class="pw-post-body-paragraph lr ls it lt b lu nf ju lw lx ng jx lz ma nh mc md me ni mg mh mi nj mk ml mm im bi translated">自相关是随机变量或数据在不同时间点(滞后)的相关性。自相关传递了不同滞后的数据的相似性，使我们能够推断出我们的时间序列的一些有趣的特征，如季节性和趋势。</p><blockquote class="nk nl nm"><p id="d098" class="lr ls nn lt b lu nf ju lw lx ng jx lz no nh mc md np ni mg mh nq nj mk ml mm im bi translated">如果你想了解更多关于自相关的知识，一定要看看我上面链接的帖子！</p></blockquote><p id="ed28" class="pw-post-body-paragraph lr ls it lt b lu nf ju lw lx ng jx lz ma nh mc md me ni mg mh mi nj mk ml mm im bi translated">大多数人都听说过自相关，然而你可能不知道它不太流行的表亲<a class="ae ky" href="https://online.stat.psu.edu/stat510/lesson/2/2.2" rel="noopener ugc nofollow" target="_blank"><strong class="lt iu">【PACF】</strong></a>。在这篇简短而甜蜜的文章中，我想描述什么是 PACF，为什么它有用，并通过一个简单的例子来说明在 Python 中应用 PACF。</p><h1 id="b85e" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">什么是偏自相关？</h1><p id="acf2" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">我们可以从解释<a class="ae ky" href="https://en.wikipedia.org/wiki/Partial_correlation" rel="noopener ugc nofollow" target="_blank"> <strong class="lt iu">偏相关</strong> </a>开始。这是两个随机变量之间的<a class="ae ky" href="https://en.wikipedia.org/wiki/Correlation" rel="noopener ugc nofollow" target="_blank"> <strong class="lt iu">相关性</strong> </a> <strong class="lt iu"> </strong>，同时控制另一个(orm more)随机变量的影响，该随机变量影响我们相关的原始变量。</p><p id="4fc4" class="pw-post-body-paragraph lr ls it lt b lu nf ju lw lx ng jx lz ma nh mc md me ni mg mh mi nj mk ml mm im bi translated">假设我们有三个随机变量:X<strong class="lt iu"><em class="nn"/></strong><strong class="lt iu"><em class="nn">Y</em></strong>和<strong class="lt iu"> <em class="nn"> Z </em> </strong>。<strong class="lt iu"> <em class="nn"> X </em> </strong>与<strong class="lt iu"> <em class="nn"> Y、</em> </strong>的偏相关，排除<strong class="lt iu"><em class="nn"/></strong>Z<a class="ae ky" href="https://www.geeksforgeeks.org/how-to-calculate-partial-correlation-in-excel/" rel="noopener ugc nofollow" target="_blank">的影响，数学上就是</a><a class="ae ky" href="https://www.geeksforgeeks.org/how-to-calculate-partial-correlation-in-excel/" rel="noopener ugc nofollow" target="_blank"/>:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nr"><img src="../Images/643a951be43a40c103250d234fac851a.png" data-original-src="https://miro.medium.com/v2/resize:fit:884/format:webp/1*F9ksmeMBdppg1dr0JE0Z0Q.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者在 LaTeX 中创建的方程。</p></figure><p id="0385" class="pw-post-body-paragraph lr ls it lt b lu nf ju lw lx ng jx lz ma nh mc md me ni mg mh mi nj mk ml mm im bi translated">其中<strong class="lt iu"> <em class="nn"> r </em> </strong>是范围在-1 和 1 之间的<a class="ae ky" href="https://en.wikipedia.org/wiki/Pearson_correlation_coefficient" rel="noopener ugc nofollow" target="_blank"> <strong class="lt iu">相关系数</strong> </a>。</p><p id="edeb" class="pw-post-body-paragraph lr ls it lt b lu nf ju lw lx ng jx lz ma nh mc md me ni mg mh mi nj mk ml mm im bi translated">偏自相关仅仅是时间序列在两个不同时间状态下的偏相关。更进一步，它是两个不同滞后的时间序列之间的相关性，不考虑任何中间滞后的影响。例如，滞后 2 的偏自相关只是滞后 1 没有解释的相关性。</p><h1 id="60a8" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">为什么有用？</h1><p id="7beb" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">与自相关不同，偏相关还没有被我用于时间序列分析。然而，它的主要和非常重要的影响出现在构建预测模型时。</p><p id="7415" class="pw-post-body-paragraph lr ls it lt b lu nf ju lw lx ng jx lz ma nh mc md me ni mg mh mi nj mk ml mm im bi translated">当拟合<a class="ae ky" href="https://en.wikipedia.org/wiki/Autoregressive_model" rel="noopener ugc nofollow" target="_blank"> <strong class="lt iu">自回归</strong> </a>、<a class="ae ky" href="https://en.wikipedia.org/wiki/Autoregressive%E2%80%93moving-average_model" rel="noopener ugc nofollow" target="_blank"> <strong class="lt iu"> ARMA </strong> </a>或<a class="ae ky" href="https://en.wikipedia.org/wiki/Autoregressive_integrated_moving_average" rel="noopener ugc nofollow" target="_blank"><strong class="lt iu"/></a>模型时，PACF 用于估计<a class="ae ky" href="https://online.stat.psu.edu/stat501/lesson/14/14.1" rel="noopener ugc nofollow" target="_blank"> <strong class="lt iu">自回归</strong> </a>分量的数量/阶数，如<a class="ae ky" href="https://en.wikipedia.org/wiki/Box%E2%80%93Jenkins_method" rel="noopener ugc nofollow" target="_blank"> <strong class="lt iu"> Box-Jenkins </strong> </a>程序所定义。这些模型可能是最常用的，并且在训练预测模型时通常会提供最佳结果。</p><blockquote class="nk nl nm"><p id="f72f" class="lr ls nn lt b lu nf ju lw lx ng jx lz no nh mc md np ni mg mh nq nj mk ml mm im bi translated">在以后的博客中，我计划解释自回归模型、ARMA 模型和 ARIMA 模型。在此之前，请参考上面的链接来了解这些算法。</p></blockquote><p id="ad01" class="pw-post-body-paragraph lr ls it lt b lu nf ju lw lx ng jx lz ma nh mc md me ni mg mh mi nj mk ml mm im bi translated">现在让我们看一个应用 PACF 的 Python 例子。</p><h1 id="899d" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">Python 中的示例</h1><p id="b183" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">我们将使用航空客运量数据集:</p><blockquote class="nk nl nm"><p id="a994" class="lr ls nn lt b lu nf ju lw lx ng jx lz no nh mc md np ni mg mh nq nj mk ml mm im bi translated">数据<a class="ae ky" href="https://www.kaggle.com/datasets/ashfakyeafi/air-passenger-data-for-time-series-analysis" rel="noopener ugc nofollow" target="_blank">来自拥有 CC0 许可证的 Kaggle </a>。</p></blockquote><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ns nt l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者代码要点。</p></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nu"><img src="../Images/3af53709f3c5cce46b20cce879d99ab0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1300/format:webp/1*Vr3KcsZVqZcVUVGpZBUb8g.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者用 Python 生成的图。</p></figure><p id="3a82" class="pw-post-body-paragraph lr ls it lt b lu nf ju lw lx ng jx lz ma nh mc md me ni mg mh mi nj mk ml mm im bi translated">数据有明显的趋势和明显的年度季节性。</p><p id="e0d3" class="pw-post-body-paragraph lr ls it lt b lu nf ju lw lx ng jx lz ma nh mc md me ni mg mh mi nj mk ml mm im bi translated">statsmodels Python 模块提供了一个<a class="ae ky" href="https://www.statsmodels.org/dev/generated/statsmodels.graphics.tsaplots.plot_pacf.html" rel="noopener ugc nofollow" target="_blank"> <strong class="lt iu"> plot_pacf </strong> </a>函数来绘制不同滞后的 pacf，这也被称为<em class="nn">相关图</em>:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ns nt l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者代码要点。</p></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nv"><img src="../Images/728e36c32f5f915a883d4030b5b1c2ba.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9IARcRDjNOO5nVuUzwf50w.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者用 Python 生成的图。</p></figure><p id="c0e0" class="pw-post-body-paragraph lr ls it lt b lu nf ju lw lx ng jx lz ma nh mc md me ni mg mh mi nj mk ml mm im bi translated">我们看到滞后 1 是高度相关的，在时间上还有其他高度相关的滞后，这可能是由于季节性影响。</p><p id="6153" class="pw-post-body-paragraph lr ls it lt b lu nf ju lw lx ng jx lz ma nh mc md me ni mg mh mi nj mk ml mm im bi translated">然而，从这个图来看，如果我们建立一个预测模型，我们将选择多少个自回归函数是很不清楚的。因此，通常建议使用<a class="ae ky" href="https://alkaline-ml.com/pmdarima/modules/generated/pmdarima.arima.auto_arima.html" rel="noopener ugc nofollow" target="_blank"><strong class="lt iu"><em class="nn">auto ARIMA</em></strong></a>等建模软件包对可能的参数进行网格搜索。</p><blockquote class="nk nl nm"><p id="68d5" class="lr ls nn lt b lu nf ju lw lx ng jx lz no nh mc md np ni mg mh nq nj mk ml mm im bi translated">蓝色区域是滞后不再具有统计显著性<a class="ae ky" href="https://en.wikipedia.org/wiki/Statistical_significance" rel="noopener ugc nofollow" target="_blank"><strong class="lt iu"/></a>的地方。我们通常通过查看蓝色区域上方的自回归数来选择自回归数。</p></blockquote><h1 id="ea5b" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">总结和进一步的思考</h1><p id="1cc5" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">在这篇文章中，我们已经了解了部分自相关。这是一个时间序列与其自身滞后版本的相关性，不包括任何中间滞后。它的主要用途是估计预测模型(如 ARMA 和 ARIMA)的自回归分量的数量。</p><p id="cdc2" class="pw-post-body-paragraph lr ls it lt b lu nf ju lw lx ng jx lz ma nh mc md me ni mg mh mi nj mk ml mm im bi translated">这篇文章中使用的完整代码可以在我的 GitHub 中找到:</p><div class="mn mo gp gr mp mq"><a href="https://github.com/egorhowell/Medium-Articles/blob/main/Time%20Series/Time%20Series%20Tools/partial_autocorrelation.py" rel="noopener  ugc nofollow" target="_blank"><div class="mr ab fo"><div class="ms ab mt cl cj mu"><h2 class="bd iu gy z fp mv fr fs mw fu fw is bi translated">Medium-Articles/partial _ 自相关. py at main egorhowell/Medium-Articles</h2><div class="mx l"><h3 class="bd b gy z fp mv fr fs mw fu fw dk translated">我在我的媒体博客/文章中使用的代码。通过创建一个关于…的帐户，为 egorhowell/Medium-Articles 的开发做出贡献</h3></div><div class="my l"><p class="bd b dl z fp mv fr fs mw fu fw dk translated">github.com</p></div></div><div class="mz l"><div class="nw l nb nc nd mz ne ks mq"/></div></div></a></div><h1 id="545e" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">参考资料和进一步阅读</h1><ul class=""><li id="b761" class="nx ny it lt b lu lv lx ly ma nz me oa mi ob mm oc od oe of bi translated"><em class="nn">预测:原理与实践:</em><a class="ae ky" href="https://otexts.com/fpp2/" rel="noopener ugc nofollow" target="_blank">https://otexts.com/fpp2/</a></li></ul><h1 id="acc7" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">和我联系！</h1><ul class=""><li id="ca40" class="nx ny it lt b lu lv lx ly ma nz me oa mi ob mm oc od oe of bi translated">要在媒体上阅读无限的故事，请务必在此注册！T17<em class="nn">T19】💜</em></li><li id="9786" class="nx ny it lt b lu og lx oh ma oi me oj mi ok mm oc od oe of bi translated"><a class="ae ky" href="/subscribe/@egorhowell" rel="noopener ugc nofollow" target="_blank"> <em class="nn">要想在我发帖注册时得到更新的邮件通知就在这里！</em> </a> <em class="nn"> </em>😀</li><li id="b8dc" class="nx ny it lt b lu og lx oh ma oi me oj mi ok mm oc od oe of bi translated"><a class="ae ky" href="https://www.linkedin.com/in/egor-howell-092a721b3/" rel="noopener ugc nofollow" target="_blank"><em class="nn">LinkedIn</em></a><em class="nn"/>👔</li><li id="a7a0" class="nx ny it lt b lu og lx oh ma oi me oj mi ok mm oc od oe of bi translated"><a class="ae ky" href="https://twitter.com/EgorHowell" rel="noopener ugc nofollow" target="_blank"> <em class="nn">推特</em> </a> <em class="nn"> </em> 🖊</li><li id="fb18" class="nx ny it lt b lu og lx oh ma oi me oj mi ok mm oc od oe of bi translated"><a class="ae ky" href="https://github.com/egorhowell" rel="noopener ugc nofollow" target="_blank"><em class="nn">github</em></a><em class="nn"/>🖥</li><li id="87b0" class="nx ny it lt b lu og lx oh ma oi me oj mi ok mm oc od oe of bi translated"><a class="ae ky" href="https://www.kaggle.com/egorphysics" rel="noopener ugc nofollow" target="_blank"><em class="nn"/></a><em class="nn"/>🏅</li></ul><blockquote class="nk nl nm"><p id="72f1" class="lr ls nn lt b lu nf ju lw lx ng jx lz no nh mc md np ni mg mh nq nj mk ml mm im bi translated">(所有表情符号都是由<a class="ae ky" href="https://openmoji.org/" rel="noopener ugc nofollow" target="_blank"> OpenMoji </a>设计的——开源的表情符号和图标项目。执照:<a class="ae ky" href="https://creativecommons.org/licenses/by-sa/4.0/#" rel="noopener ugc nofollow" target="_blank"> CC BY-SA 4.0 </a></p></blockquote></div></div>    
</body>
</html>