<html>
<head>
<title>Analyze Data from the World Health Organization Global Health Observatory</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">分析来自世界卫生组织全球卫生观察站的数据</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/analyze-data-from-the-world-health-organization-global-health-observatory-723418d3642b#2022-11-22">https://towardsdatascience.com/analyze-data-from-the-world-health-organization-global-health-observatory-723418d3642b#2022-11-22</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><h2 id="b219" class="ir is it bd b dl iu iv iw ix iy iz dk ja translated" aria-label="kicker paragraph">医疗保健数据分析、Python 和 Tableau</h2><div class=""/><div class=""><h2 id="99b1" class="pw-subtitle-paragraph jz jc it bd b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq dk translated">使用世卫组织的全球健康观察 oData API、Python 和 Tableau 来分析世界范围内的健康相关数据</h2></div><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi kr"><img src="../Images/61db83d11863c01e5c3e5f6a57e6551b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*UFv3gtbnXFb5qZhCHpGyMg.jpeg"/></div></div><p class="ld le gj gh gi lf lg bd b be z dk translated">小心翼翼地牵着手。<a class="ae lh" href="https://unsplash.com/@nci?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">国家癌症研究所</a>在<a class="ae lh" href="https://unsplash.com/s/photos/care?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片。</p></figure><p id="1c83" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">世界卫生组织(世卫组织)成立于 1948 年，是一个联合国机构，它将各国、合作伙伴和人民联系在一起，以促进健康，维护世界安全，并为弱势群体服务。世卫组织全球卫生观察站(GHO)是联合国为其 194 个成员国提供卫生保健统计数据的门户。本文向您展示了如何使用 GHO OData API 和 Python 检索医疗保健统计数据，并将其从 JSON 结构转换为 CSV 文件。CSV 文件将可以导入到 Tableau 等数据可视化工具中。</p><p id="ccbd" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">以下部分将描述以下主题:</p><ul class=""><li id="6313" class="me mf it lk b ll lm lo lp lr mg lv mh lz mi md mj mk ml mm bi translated">GHO OData API 和指标</li><li id="9298" class="me mf it lk b ll mn lo mo lr mp lv mq lz mr md mj mk ml mm bi translated">用于检索和转换 GHO 医疗保健统计数据的 Python 程序</li><li id="ecc7" class="me mf it lk b ll mn lo mo lr mp lv mq lz mr md mj mk ml mm bi translated">可视化医疗统计数据的 Tableau 工作簿</li></ul><h1 id="ff17" class="ms mt it bd mu mv mw mx my mz na nb nc ki nd kj ne kl nf km ng ko nh kp ni nj bi translated">GHO 奥达数据 API 指标</h1><p id="7b85" class="pw-post-body-paragraph li lj it lk b ll nk kd ln lo nl kg lq lr nm lt lu lv nn lx ly lz no mb mc md im bi translated">这里描述的 GHO OData API 是<a class="ae lh" href="https://www.who.int/data/gho/info/gho-odata-api" rel="noopener ugc nofollow" target="_blank"/>。您可以使用 API 访问的数据集被标识为指示器。</p><p id="c25a" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">指标索引中包含了按字母顺序排列的完整指标列表。请参见下面截图中的指标示例。</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi np"><img src="../Images/d07511532d01069ea248d4c088609d9a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*91Iks3P4NxqH6mFA"/></div></div><p class="ld le gj gh gi lf lg bd b be z dk translated">GHO 指标索引的第一页。Randy Runtsch 截图。</p></figure><p id="c075" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">单击任何指标的名称都会显示关于数据、元数据、相关索引的信息，有时还会显示可视化效果。例如，滚动指标索引并点击“青少年出生率(每 1000 名 15-19 岁女性)”会返回如下所示的可视化结果。</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi np"><img src="../Images/e498d240efe9beb4bc9d30df81661f27.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*7OsZJsoJg495VzK_"/></div></div><p class="ld le gj gh gi lf lg bd b be z dk translated">GHO“青少年出生率…”指标的数据可视化。Randy Runtsch 截图。</p></figure><p id="4cee" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">本文中使用的指标称为“<a class="ae lh" href="https://www.who.int/data/gho/data/indicators/indicator-details/GHO/probability-(-)-of-dying-between-age-30-and-exact-age-70-from-any-of-cardiovascular-disease-cancer-diabetes-or-chronic-respiratory-disease" rel="noopener ugc nofollow" target="_blank">30 岁至 70 岁之间死于心血管疾病、癌症、糖尿病或慢性呼吸系统疾病的概率</a>”您可以通过搜索“心血管”在<a class="ae lh" href="https://www.who.int/data/gho/data/indicators" rel="noopener ugc nofollow" target="_blank">指标页面</a>找到它，如下图所示。</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi np"><img src="../Images/6a40812204d96007125d698fa2a1333d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*dX1nBG4dd-Jgb1dN"/></div></div><p class="ld le gj gh gi lf lg bd b be z dk translated">GHO 指标网页上感兴趣的指标。Randy Runtsch 截图。</p></figure><p id="de39" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">要使用 GHO OData API 检索数据集，您需要知道其指示器代码(indicator code)值。要查找该值，请导航到 JSON 格式的指示器页面:</p><p id="a605" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">【https://ghoapi.azureedge.net/api/Indicator】T4。</p><p id="9bf0" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">在下面的第一个屏幕截图中，指示符代码“AIR_10”是“周围空气污染…”指示符的标识符。</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi nq"><img src="../Images/1d0c7a441c63dc01036df43803cf229c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*uSvHxwz49OsOohaa"/></div></div><p class="ld le gj gh gi lf lg bd b be z dk translated">JSON 格式的 GHO 指标列表。Randy Runtsch 截图。</p></figure><p id="87e4" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">通过扫描或搜索该页面，您将发现一个指标代码值“NCDMORT3070”，该指标称为“30 岁之间死亡的概率(%)”。我们将使用该指标代码值来识别要通过 GHO oData API 检索的数据集。</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi np"><img src="../Images/6ca4d397b7895dd377f2695e14920511.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*qIj1xeC4OhdLcH2c"/></div></div><p class="ld le gj gh gi lf lg bd b be z dk translated">指示器代码值为“NCDMORT3070”的指示器 Randy Runtsch 截图。</p></figure><h1 id="eca7" class="ms mt it bd mu mv mw mx my mz na nb nc ki nd kj ne kl nf km ng ko nh kp ni nj bi translated">JSON 格式的示例数据</h1><p id="8115" class="pw-post-body-paragraph li lj it lk b ll nk kd ln lo nl kg lq lr nm lt lu lv nn lx ly lz no mb mc md im bi translated">通过在 URL<a class="ae lh" href="https://ghoapi.azureedge.net/api" rel="noopener ugc nofollow" target="_blank">https://ghoapi.azureedge.net/api</a>上附加指示符代码，可以以 JSON 格式查看用 GHO OData API 检索的示例数据集。对于本文中使用的数据集，完整的 URL 是<a class="ae lh" href="https://ghoapi.azureedge.net.api/NCDMORT3070" rel="noopener ugc nofollow" target="_blank">https://ghoapi.azureedge.net.api/NCDMORT3070</a>。在 web 浏览器中导航到该地址以查看数据，如下面的屏幕截图所示。</p><p id="3b04" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">注意，您可能需要安装一个浏览器扩展来查看格式正确的 JSON 中的数据。在我的电脑上，我使用微软 Edge 浏览器的免费 JASON-Handle 扩展。可以在这里找到<a class="ae lh" href="https://microsoftedge.microsoft.com/addons/detail/jsonhandle/pogcfcgaeocmmoadpbcfnponnlidodjn" rel="noopener ugc nofollow" target="_blank">。</a></p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi nr"><img src="../Images/5b5230cd327fadd7d241ee8472ef1244.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*xx17X3gC42gl3WSy"/></div></div></figure><p id="b3e6" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">下面描述的 Python 程序将使用上面红框中显示的字段。它将检索由 IndicatorCode 值“NCDMORT3070”标识的数据集的所有记录。<strong class="lk jd"> " </strong>但是将只处理 SpatialDimType 为“国家”的记录此外，它还将检索国家代码(SpatialDim)、年份(TimeDim)、性别(Dim1)和数值(numeric value)的值。</p><h1 id="d83e" class="ms mt it bd mu mv mw mx my mz na nb nc ki nd kj ne kl nf km ng ko nh kp ni nj bi translated">用于此项目的工具</h1><p id="e3a6" class="pw-post-body-paragraph li lj it lk b ll nk kd ln lo nl kg lq lr nm lt lu lv nn lx ly lz no mb mc md im bi translated">对于这里描述的项目，我使用 Microsoft Visual Studio Community 2022 进行 Python 编程，使用 Tableau 公共桌面和 Tableau 公共网站进行数据可视化。对于 Python 编程，可以随意使用您喜欢的任何编辑器或集成开发环境(IDE)。</p><p id="446c" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">Visual Studio Community 和 Tableau Public 是免费工具，您可以从以下位置安装:</p><ul class=""><li id="1313" class="me mf it lk b ll lm lo lp lr mg lv mh lz mi md mj mk ml mm bi translated"><a class="ae lh" href="https://visualstudio.microsoft.com/vs/community/" rel="noopener ugc nofollow" target="_blank"> Visual Studio 社区</a></li><li id="8099" class="me mf it lk b ll mn lo mo lr mp lv mq lz mr md mj mk ml mm bi translated"><a class="ae lh" href="https://www.tableau.com/community/public" rel="noopener ugc nofollow" target="_blank"> Tableau Public </a></li></ul><p id="5cbb" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">请注意，虽然 Tableau 的商业版本允许您将数据可视化工作簿保存到本地驱动器或服务器，但在 Tableau Public 中，所有可视化工作簿只能保存到 Tableau Public 服务器。此外，公众也可以看到可视化效果。</p><h1 id="ccf8" class="ms mt it bd mu mv mw mx my mz na nb nc ki nd kj ne kl nf km ng ko nh kp ni nj bi translated">Python 程序</h1><h2 id="369d" class="ns mt it bd mu nt nu dn my nv nw dp nc lr nx ny ne lv nz oa ng lz ob oc ni iz bi translated">计划概述</h2><p id="7099" class="pw-post-body-paragraph li lj it lk b ll nk kd ln lo nl kg lq lr nm lt lu lv nn lx ly lz no mb mc md im bi translated">下一节中展示的 Python 程序分为这两个模块:</p><ul class=""><li id="86da" class="me mf it lk b ll lm lo lp lr mg lv mh lz mi md mj mk ml mm bi translated"><strong class="lk jd">c _ who _ mortality _ data . py 类</strong>检索 JSON 格式的指标 NCDMORT3070 的数据，将其转换为 Python 字典列表，并将死亡率记录写入 CSV 文件。</li><li id="a557" class="me mf it lk b ll mn lo mo lr mp lv mq lz mr md mj mk ml mm bi translated"><strong class="lk jd">模块 get_who_mortality_data.py </strong>是驱动程序。它只是用输出文件的名称调用 c_who_mortality_data 类，程序将以 CSV 格式写入数据记录。</li></ul><p id="4682" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">下面是程序的伪代码:</p><ul class=""><li id="3184" class="me mf it lk b ll lm lo lp lr mg lv mh lz mi md mj mk ml mm bi translated">用输出文件名调用 c_who_mortality_data。</li><li id="b694" class="me mf it lk b ll mn lo mo lr mp lv mq lz mr md mj mk ml mm bi translated">在 JSON 流中请求 NCDMORT3070 的数据。</li><li id="1464" class="me mf it lk b ll mn lo mo lr mp lv mq lz mr md mj mk ml mm bi translated">将 JSON 格式的数据转换成 Python 字典列表。</li><li id="96d8" class="me mf it lk b ll mn lo mo lr mp lv mq lz mr md mj mk ml mm bi translated">以写入模式打开输出 CSV 文件。</li><li id="85d1" class="me mf it lk b ll mn lo mo lr mp lv mq lz mr md mj mk ml mm bi translated">将列标题写入文件。</li><li id="6772" class="me mf it lk b ll mn lo mo lr mp lv mq lz mr md mj mk ml mm bi translated">遍历列表中的每条记录。对于 SpatialDimType = "COUNTRY "的每个记录，创建一个 CSV 格式的输出记录，其中包含年份、性别(从 Dim1 值转换而来)和值。将输出记录写入文件。</li></ul><p id="e7d2" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">请注意，除了“国家”之外，数据集 NCDMORT3070 还包含 SpatialDimType 值。该程序将忽略具有这些其他值的记录。</p><h2 id="b170" class="ns mt it bd mu nt nu dn my nv nw dp nc lr nx ny ne lv nz oa ng lz ob oc ni iz bi translated">代码</h2><p id="1416" class="pw-post-body-paragraph li lj it lk b ll nk kd ln lo nl kg lq lr nm lt lu lv nn lx ly lz no mb mc md im bi translated">c_who_mortality.py 和 get_who_mortality.py Python 模块如下所示。</p><figure class="ks kt ku kv gt kw"><div class="bz fp l di"><div class="od oe l"/></div><p class="ld le gj gh gi lf lg bd b be z dk translated">用于检索、重新格式化和写入 GHO 数据的 Python 程序，用指示符“NCDMORT3070”标识由 Randy Runtsch 编写的代码。</p></figure><h1 id="ff0e" class="ms mt it bd mu mv mw mx my mz na nb nc ki nd kj ne kl nf km ng ko nh kp ni nj bi translated">CSV 文件</h1><p id="9ae2" class="pw-post-body-paragraph li lj it lk b ll nk kd ln lo nl kg lq lr nm lt lu lv nn lx ly lz no mb mc md im bi translated">这里显示的 Python 程序将记录写入一个名为“c:/who_data/mortality.csv”的文件。以下是文件顶部的一些示例记录。</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div class="gh gi of"><img src="../Images/7c122e19b62153428d64fc5c7e34c1f6.png" data-original-src="https://miro.medium.com/v2/resize:fit:600/0*1HSM3BnXtCWYAmoi"/></div><p class="ld le gj gh gi lf lg bd b be z dk translated">死亡率 CSV 文件中的样本记录。Randy Runtsch 截图。</p></figure><p id="b8dd" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">第一条记录包含列名“国家代码”、“年份”、“性别”和“值”。后续记录包含数据值。</p><h1 id="fe99" class="ms mt it bd mu mv mw mx my mz na nb nc ki nd kj ne kl nf km ng ko nh kp ni nj bi translated">Tableau 公共工作簿</h1><p id="a360" class="pw-post-body-paragraph li lj it lk b ll nk kd ln lo nl kg lq lr nm lt lu lv nn lx ly lz no mb mc md im bi translated">为了创建由 Python 程序写入 CSV 文件的死亡率概率的地图和条形图，我将数据加载到 Tableau Public 中。此外，为了将 3 个字符的国家代码转换成国家名称，我将这个<a class="ae lh" href="https://github.com/lukes/ISO-3166-Countries-with-Regional-Codes/blob/master/all/all.csv" rel="noopener ugc nofollow" target="_blank">国家主文件</a>加载到 Tableau 中，并加入国家代码的数据集..</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi og"><img src="../Images/d5c451ab80c378956e029a61628d4f01.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*AjxnrX_qFg-MI9mR"/></div></div><p class="ld le gj gh gi lf lg bd b be z dk translated">使用来自 GHO 数据集的数据构建的 Tableau 仪表盘，标识为指示器“NCSMORT3070”由 Randy Runtsch 创建的仪表板。</p></figure><p id="8885" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">虽然重新创建 Tableau 公共仪表板的说明超出了本文的范围，但是您可以<a class="ae lh" href="https://public.tableau.com/views/SelectDiseaseMortalitybyCountryandSex/Dashboard1?:language=en-US&amp;publish=yes&amp;:display_count=n&amp;:origin=viz_share_link" rel="noopener ugc nofollow" target="_blank">在这里</a>查看并下载它。下载后可以在 Tableau 公共桌面或者 Tableau 桌面进行操作。</p><h1 id="3142" class="ms mt it bd mu mv mw mx my mz na nb nc ki nd kj ne kl nf km ng ko nh kp ni nj bi translated">摘要</h1><p id="3f2f" class="pw-post-body-paragraph li lj it lk b ll nk kd ln lo nl kg lq lr nm lt lu lv nn lx ly lz no mb mc md im bi translated">本文提供了编写一个 Python 程序的说明，该程序使用世卫组织的 GHO OData API 来检索与特定疾病导致的死亡率相关的全球健康相关数据。您应该能够调整该程序来检索和处理其他 GHO 数据集。</p><p id="00b2" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">我希望这篇文章对你有所帮助。如果你有任何问题，请让我知道。</p></div></div>    
</body>
</html>