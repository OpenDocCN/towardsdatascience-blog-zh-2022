<html>
<head>
<title>Implementing Hearst Patterns with SpaCy</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用SpaCy实现Hearst模式</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/implementing-hearst-patterns-with-spacy-216e585f61f8#2022-06-18">https://towardsdatascience.com/implementing-hearst-patterns-with-spacy-216e585f61f8#2022-06-18</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="ece8" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">上下位关系的自动提取</h2></div><blockquote class="kf kg kh"><p id="8292" class="ki kj kk kl b km kn jr ko kp kq ju kr ks kt ku kv kw kx ky kz la lb lc ld le ij bi translated">⚠️在这篇文章中，我将主要集中在赫斯特模式，实现和上位词提取的用法。然而，我将使用命名实体识别(NER)和专利数据集；所以我建议查看我在这个周期的前一篇帖子。</p></blockquote><div class="lf lg gp gr lh li"><a rel="noopener follow" target="_blank" href="/improving-the-ner-model-with-patent-texts-spacy-prodigy-and-a-bit-of-magic-44c86282ea99"><div class="lj ab fo"><div class="lk ab ll cl cj lm"><h2 class="bd ir gy z fp ln fr fs lo fu fw ip bi translated">用专利文本改进NER模型| SpaCy、Prodigy和一点魔法🪄</h2><div class="lp l"><h3 class="bd b gy z fp ln fr fs lo fu fw dk translated">本文提出了一种利用专利文本训练特定领域NER模型的方法。</h3></div><div class="lq l"><p class="bd b dl z fp ln fr fs lo fu fw dk translated">towardsdatascience.com</p></div></div><div class="lr l"><div class="ls l lt lu lv lr lw lx li"/></div></div></a></div><blockquote class="ly"><p id="8dcb" class="lz ma iq bd mb mc md me mf mg mh le dk translated">模式…模式无处不在…</p></blockquote><p id="99b9" class="pw-post-body-paragraph ki kj iq kl b km mi jr ko kp mj ju kr mk ml ku kv mm mn ky kz mo mp lc ld le ij bi mq translated">为什么我们在自然语言处理的上下文中关心模式？因为它们大大减少和简化了工作，基本上，它是一个简单的模型。尽管处于变形神经网络时代，模式仍然是有益的。<strong class="kl ir">近20年来，上位词自动提取一直是一个活跃的研究领域。这是一个关键的工具，当应用于下游任务，如问题回答，查询，信息。提取等。</strong></p><h1 id="df70" class="mz na iq bd nb nc nd ne nf ng nh ni nj jw nk jx nl jz nm ka nn kc no kd np nq bi translated">下义关系的有用性</h1><blockquote class="kf kg kh"><p id="20bf" class="ki kj kk kl b km kn jr ko kp kq ju kr ks kt ku kv kw kx ky kz la lb lc ld le ij bi translated"><strong class="kl ir">上位词</strong>——…一个具有广泛意义的词，构成一个有更具体意义的词所属的范畴；</p><p id="e15c" class="ki kj kk kl b km kn jr ko kp kq ju kr ks kt ku kv kw kx ky kz la lb lc ld le ij bi translated"><strong class="kl ir">下位词</strong>——…是反义词；比适用于它的一般术语有更具体含义的词。</p></blockquote><p id="ad76" class="pw-post-body-paragraph ki kj iq kl b km kn jr ko kp kq ju kr mk kt ku kv mm kx ky kz mo lb lc ld le ij bi translated">为了便于理解，我们举个例子:</p><figure class="ns nt nu nv gt nw gh gi paragraph-image"><div role="button" tabindex="0" class="nx ny di nz bf oa"><div class="gh gi nr"><img src="../Images/1b13142d91e2fc36dc71cbc862028937.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9msfQY7DrxyB9BfjgiEBTw.png"/></div></div></figure><p id="a02c" class="pw-post-body-paragraph ki kj iq kl b km kn jr ko kp kq ju kr mk kt ku kv mm kx ky kz mo lb lc ld le ij bi translated">在这里，“光盘”和“硬盘”是“存储单元”的<strong class="kl ir">的下位词</strong>。反过来，“存储单元”是“光盘”和“硬盘”的<strong class="kl ir">上位词</strong>。</p><p id="2f01" class="pw-post-body-paragraph ki kj iq kl b km kn jr ko kp kq ju kr mk kt ku kv mm kx ky kz mo lb lc ld le ij bi translated">这种词汇关系是自然语言处理任务的重要组成部分。这些任务的种类取决于目标，例如:</p><ul class=""><li id="5523" class="oc od iq kl b km kn kp kq mk oe mm of mo og le oh oi oj ok bi translated"><strong class="kl ir">分类预测</strong>:为术语识别更广泛的类别，建立分类关系(如WikiData GraphAPI)</li><li id="0721" class="oc od iq kl b km ol kp om mk on mm oo mo op le oh oi oj ok bi translated"><strong class="kl ir">信息提取(IE): </strong>从文本中自动检索特定信息对于被搜索的实体来说是高度可靠的。</li><li id="0422" class="oc od iq kl b km ol kp om mk on mm oo mo op le oh oi oj ok bi translated"><strong class="kl ir">数据集创建</strong>:高级模型需要学习实例来识别实体之间的关系。</li></ul><h1 id="03df" class="mz na iq bd nb nc nd ne nf ng nh ni nj jw nk jx nl jz nm ka nn kc no kd np nq bi translated">赫斯特图案</h1><p id="9097" class="pw-post-body-paragraph ki kj iq kl b km oq jr ko kp or ju kr mk os ku kv mm ot ky kz mo ou lc ld le ij bi translated">那么，我们如何检测和提取这样的关系呢？是时候谈谈计算语言学研究员马蒂·赫斯特的工作了。她最受欢迎的研究之一是建立一套测试模式，用于从文本中提取有意义的信息。这些图案俗称<strong class="kl ir">“赫斯特图案”。</strong></p><p id="66ea" class="pw-post-body-paragraph ki kj iq kl b km kn jr ko kp kq ju kr mk kt ku kv mm kx ky kz mo lb lc ld le ij bi translated">我们可以将这种模式形式化为<strong class="kl ir">“X是Y”</strong>，其中X是上义位，Y是下义位。这是赫斯特模型的众多模型之一。这里有一个列表，让你对这个想法有一个直觉:</p><figure class="ns nt nu nv gt nw gh gi paragraph-image"><div role="button" tabindex="0" class="nx ny di nz bf oa"><div class="gh gi ow"><img src="../Images/f2632a86a6b36920ee79f49ae5b89517.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bJ20jnP9EGnFIiJ3qt4F9Q.png"/></div></div><p class="ox oy gj gh gi oz pa bd b be z dk translated">图片作者|检测hyper的模式表。\rhyper关系</p></figure><p id="4cc7" class="pw-post-body-paragraph ki kj iq kl b km kn jr ko kp kq ju kr mk kt ku kv mm kx ky kz mo lb lc ld le ij bi translated">这些表格模式按<strong class="kl ir">超</strong>和<strong class="kl ir">押韵</strong>(反向上位词)分类。通常，顺序并不重要，但有时它对训练信息抽取系统很有帮助。</p><p id="941f" class="pw-post-body-paragraph ki kj iq kl b km kn jr ko kp kq ju kr mk kt ku kv mm kx ky kz mo lb lc ld le ij bi translated">你可能会说这种方法现在看起来过时了，过于简单了，我们可以使用ML和复杂的模型。</p><p id="ed82" class="pw-post-body-paragraph ki kj iq kl b km kn jr ko kp kq ju kr mk kt ku kv mm kx ky kz mo lb lc ld le ij bi translated"><strong class="kl ir">但是，这并不完全正确！</strong></p><p id="68bd" class="pw-post-body-paragraph ki kj iq kl b km kn jr ko kp kq ju kr mk kt ku kv mm kx ky kz mo lb lc ld le ij bi translated">在来自FB(Meta)研究小组的<a class="ae ov" href="https://arxiv.org/pdf/1806.03191.pdf" rel="noopener ugc nofollow" target="_blank"> <strong class="kl ir">这篇论文中，他们表明</strong></a></p><blockquote class="ly"><p id="f919" class="lz ma iq bd mb mc pb pc pd pe pf le dk translated"><em class="pg">“…在通用基准数据集上，简单的基于模式的方法始终优于分布式方法。”</em></p></blockquote><p id="8915" class="pw-post-body-paragraph ki kj iq kl b km mi jr ko kp mj ju kr mk ml ku kv mm mn ky kz mo mp lc ld le ij bi translated">有时候，可靠的老工具已经足够了，🛠</p><h1 id="50ec" class="mz na iq bd nb nc nd ne nf ng nh ni nj jw nk jx nl jz nm ka nn kc no kd np nq bi translated">空间实现</h1><p id="6871" class="pw-post-body-paragraph ki kj iq kl b km oq jr ko kp or ju kr mk os ku kv mm ot ky kz mo ou lc ld le ij bi translated">从理论走向实践。通常，您不想提取所有可能的下位词关系，而只想提取特定领域中的实体。对特定领域中实体的识别被称为NER。目前最简单的方法是使用<a class="ae ov" href="https://spacy.io" rel="noopener ugc nofollow" target="_blank">空间</a>。有了这个库，你可以训练一个定制的NER模型来识别比默认域更具体的域。</p><figure class="ns nt nu nv gt nw gh gi paragraph-image"><div role="button" tabindex="0" class="nx ny di nz bf oa"><div class="gh gi ph"><img src="../Images/92efbdb309d38a0f75b5056229b73715.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*yrj1TU-6YYvgZ6wlj8NCAg.png"/></div></div><p class="ox oy gj gh gi oz pa bd b be z dk translated">图片由作者提供|来自我之前帖子的自定义NER模型的结果</p></figure><h2 id="480f" class="pi na iq bd nb pj pk dn nf pl pm dp nj mk pn po nl mm pp pq nn mo pr ps np pt bi translated">数据</h2><p id="94ee" class="pw-post-body-paragraph ki kj iq kl b km oq jr ko kp or ju kr mk os ku kv mm ot ky kz mo ou lc ld le ij bi translated">例如，我将使用专利的<strong class="kl ir">G06K</strong>T16】(数据的识别/数据的呈现)小节中的专利文本。最重要的是，我训练了一个定制的NER模型来识别技术术语。我在我的<a class="ae ov" href="https://medium.com/towards-data-science/improving-the-ner-model-with-patent-texts-spacy-prodigy-and-a-bit-of-magic-44c86282ea99" rel="noopener">上一篇文章</a>中详细描述了这个数据集。</p><blockquote class="kf kg kh"><p id="f50f" class="ki kj kk kl b km kn jr ko kp kq ju kr ks kt ku kv kw kx ky kz la lb lc ld le ij bi translated">⚠️数据不受版权保护，可安全用于商业目的。<strong class="kl ir">根据</strong><a class="ae ov" href="http://www.uspto.gov/news/media/ccpubguide.jsp" rel="noopener ugc nofollow" target="_blank"><strong class="kl ir">USPTO</strong></a><strong class="kl ir">:</strong><em class="iq">除了37 CFR 1.71(d) &amp; (e)和1.84(s)</em><strong class="kl ir"><em class="iq">中反映的有限例外，专利的文本和图纸通常不受版权限制</em> </strong> <em class="iq">。”</em></p></blockquote><h2 id="bfcc" class="pi na iq bd nb pj pk dn nf pl pm dp nj mk pn po nl mm pp pq nn mo pr ps np pt bi translated">履行</h2><p id="6f2e" class="pw-post-body-paragraph ki kj iq kl b km oq jr ko kp or ju kr mk os ku kv mm ot ky kz mo ou lc ld le ij bi translated">在SpaCy内部创建模式非常简单。由于我们使用的是NER模型，我们可以依靠识别来过滤我们感兴趣的领域之外的实体。</p><p id="dcef" class="pw-post-body-paragraph ki kj iq kl b km kn jr ko kp kq ju kr mk kt ku kv mm kx ky kz mo lb lc ld le ij bi translated">可以用JSON格式创建模式。这里有一个基于空间的<a class="ae ov" href="https://spacy.io/usage/rule-based-matching" rel="noopener ugc nofollow" target="_blank">规则匹配文档的例子。</a></p><figure class="ns nt nu nv gt nw gh gi paragraph-image"><div role="button" tabindex="0" class="nx ny di nz bf oa"><div class="gh gi pu"><img src="../Images/656f3492d22ec7541e0f32a0c4c9527c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kd-vVq9MKINLFEmgI3PF9g.png"/></div></div><p class="ox oy gj gh gi oz pa bd b be z dk translated">作者图片| JSON格式的模式示例</p></figure><p id="e36f" class="pw-post-body-paragraph ki kj iq kl b km kn jr ko kp kq ju kr mk kt ku kv mm kx ky kz mo lb lc ld le ij bi translated">你可以看到，通过指定<code class="fe pv pw px py b">ENT_TYPE</code>，我们利用NER模型只匹配这个领域中的单词。</p><p id="2cc0" class="pw-post-body-paragraph ki kj iq kl b km kn jr ko kp kq ju kr mk kt ku kv mm kx ky kz mo lb lc ld le ij bi translated">Python上的实现非常简单。我们读取文本，初始化<code class="fe pv pw px py b">matcher</code>，从JSON读取模式，并将它们添加到匹配器中。</p><figure class="ns nt nu nv gt nw"><div class="bz fp l di"><div class="pz qa l"/></div><p class="ox oy gj gh gi oz pa bd b be z dk translated">将模式加载到空间匹配器的代码片段</p></figure><p id="1440" class="pw-post-body-paragraph ki kj iq kl b km kn jr ko kp kq ju kr mk kt ku kv mm kx ky kz mo lb lc ld le ij bi translated">简单地说，通过做<code class="fe pv pw px py b">matcher(doc)</code>，我们提取上位词关系的列表。连同提取的模式，我们得到了一些关于匹配的信息，比如模式的名称(在我们的例子中是hyper\rhyper)以及它是否是一个多词关系。</p><figure class="ns nt nu nv gt nw"><div class="bz fp l di"><div class="pz qa l"/></div><p class="ox oy gj gh gi oz pa bd b be z dk translated">在文本范围内使用匹配器的代码片段</p></figure><h2 id="5a8c" class="pi na iq bd nb pj pk dn nf pl pm dp nj mk pn po nl mm pp pq nn mo pr ps np pt bi translated">多词模式</h2><p id="c6f3" class="pw-post-body-paragraph ki kj iq kl b km oq jr ko kp or ju kr mk os ku kv mm ot ky kz mo ou lc ld le ij bi translated">我们面临的最常见的问题是多词上位词关系。</p><figure class="ns nt nu nv gt nw gh gi paragraph-image"><div role="button" tabindex="0" class="nx ny di nz bf oa"><div class="gh gi qb"><img src="../Images/7aa7ca01f201a43a7703ec2d92b77ba6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wT6Fr0kYK6BUclXBivf2zA.png"/></div></div><p class="ox oy gj gh gi oz pa bd b be z dk translated">图片由作者提供|可能的hyper示例。与多个实体的关系</p></figure><p id="a863" class="pw-post-body-paragraph ki kj iq kl b km kn jr ko kp kq ju kr mk kt ku kv mm kx ky kz mo lb lc ld le ij bi translated">由于匹配器不能识别一个模式下的各种实体，这里我们提出一个有用的提示；)</p><p id="79a3" class="pw-post-body-paragraph ki kj iq kl b km kn jr ko kp kq ju kr mk kt ku kv mm kx ky kz mo lb lc ld le ij bi translated">找到匹配的模式后，我们进一步检查句子中的其他实体。如果它们在我们的领域之下，并且位于连接词之间，那么这些词也是超韵关系的一部分。</p><figure class="ns nt nu nv gt nw gh gi paragraph-image"><div role="button" tabindex="0" class="nx ny di nz bf oa"><div class="gh gi qc"><img src="../Images/51c8ffaae014f0b5e2014411bcb2d89c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xQx8UmK47Y7Lz5xNSHNInA.png"/></div></div></figure><figure class="ns nt nu nv gt nw gh gi paragraph-image"><div role="button" tabindex="0" class="nx ny di nz bf oa"><div class="gh gi qd"><img src="../Images/7191ad2f51ba56c62f42aade1b5a5009.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*pVkmpOdnB0QSLmp4eDAzdw.png"/></div></div><p class="ox oy gj gh gi oz pa bd b be z dk translated">图片由作者提供|多词关系匹配的可视化说明</p></figure><p id="7249" class="pw-post-body-paragraph ki kj iq kl b km kn jr ko kp kq ju kr mk kt ku kv mm kx ky kz mo lb lc ld le ij bi translated">代码中的主要技巧是我们用'<em class="kk">连续词【T4]创建一个列表，并检查有多个实体匹配的句子。</em></p><figure class="ns nt nu nv gt nw"><div class="bz fp l di"><div class="pz qa l"/></div><p class="ox oy gj gh gi oz pa bd b be z dk translated">多实体模式提取的代码片段</p></figure><h1 id="50ce" class="mz na iq bd nb nc nd ne nf ng nh ni nj jw nk jx nl jz nm ka nn kc no kd np nq bi translated">结果和注释</h1><p id="9c76" class="pw-post-body-paragraph ki kj iq kl b km oq jr ko kp or ju kr mk os ku kv mm ot ky kz mo ou lc ld le ij bi translated"><strong class="kl ir"> <em class="kk">瞧✨ </em> </strong>！我们提取了自定义域中的上位词关系。</p><figure class="ns nt nu nv gt nw gh gi paragraph-image"><div role="button" tabindex="0" class="nx ny di nz bf oa"><div class="gh gi qe"><img src="../Images/a2b52bc11d4da3e4a852fd694e836e2a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xUMJYe86Z47sUTx08Ukalw.png"/></div></div><p class="ox oy gj gh gi oz pa bd b be z dk translated">图片作者|提取的hyper最终结果表。关系</p></figure><p id="06da" class="pw-post-body-paragraph ki kj iq kl b km kn jr ko kp kq ju kr mk kt ku kv mm kx ky kz mo lb lc ld le ij bi translated">您可以在此处找到完整的代码以及详细的笔记本和数据集:</p><div class="lf lg gp gr lh li"><a href="https://github.com/kinivi/patent_ner_linking/blob/main/project.ipynb" rel="noopener  ugc nofollow" target="_blank"><div class="lj ab fo"><div class="lk ab ll cl cj lm"><h2 class="bd ir gy z fp ln fr fs lo fu fw ip bi translated">main kini VI/patent _ ner _ linking/project . ipynb</h2><div class="lp l"><h3 class="bd b gy z fp ln fr fs lo fu fw dk translated">📰专利数据集上的命名实体识别(NER)和实体链接(EL)</h3></div><div class="lq l"><p class="bd b dl z fp ln fr fs lo fu fw dk translated">github.com\</p></div></div><div class="lr l"><div class="qf l lt lu lv lr lw lx li"/></div></div></a></div><p id="523d" class="pw-post-body-paragraph ki kj iq kl b km kn jr ko kp kq ju kr mk kt ku kv mm kx ky kz mo lb lc ld le ij bi translated">即使我们已经有了结果，验证它们也是很好的。在这个“专利”系列的下一篇也是最后一篇文章中，我将展示如何使用Wiki API在任何自定义数据集上自动验证提取的上位词关系。敬请关注😉</p><h1 id="1d48" class="mz na iq bd nb nc nd ne nf ng nh ni nj jw nk jx nl jz nm ka nn kc no kd np nq bi translated">确认</h1><p id="ceb2" class="pw-post-body-paragraph ki kj iq kl b km oq jr ko kp or ju kr mk os ku kv mm ot ky kz mo ou lc ld le ij bi translated">特别感谢我的团队:<em class="kk"> Marwan MASHRA和gatan serré。</em></p></div></div>    
</body>
</html>