<html>
<head>
<title>3 Approaches to Find Missing Values</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">寻找缺失值的3种方法</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/3-approaches-to-find-missing-values-ff656eba6902#2022-05-02">https://towardsdatascience.com/3-approaches-to-find-missing-values-ff656eba6902#2022-05-02</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="8c01" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">学习处理不同类型缺失值的好方法</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/309f6c6f39ba6bd99a1961985d3c2085.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*RzKLXDaOr5hJLFDigS1PYA.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated"><a class="ae ky" href="https://unsplash.com/@theeastlondonphotographer?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Ehimetalor Akhere Unuabona </a>在<a class="ae ky" href="https://unsplash.com/s/photos/missing?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>拍摄的照片</p></figure></div><div class="ab cl kz la hx lb" role="separator"><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le"/></div><div class="im in io ip iq"><h2 id="cb91" class="lg lh it bd li lj lk dn ll lm ln dp lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">引言</h2><p id="980b" class="pw-post-body-paragraph mc md it me b mf mg ju mh mi mj jx mk lp ml mm mn lt mo mp mq lx mr ms mt mu im bi translated">我将以一个“启示”开始这篇文章:<em class="mv">现实世界中的数据集并不总是像NaN一样缺少值。</em></p><p id="e1c5" class="pw-post-body-paragraph mc md it me b mf mw ju mh mi mx jx mk lp my mm mn lt mz mp mq lx na ms mt mu im bi translated">是的。他们可以是任何东西。在你浪费大量时间试图弄清楚该做什么之前，请继续阅读这篇短文，以获得处理这些类型数据的3种好方法。</p><p id="6544" class="pw-post-body-paragraph mc md it me b mf mw ju mh mi mx jx mk lp my mm mn lt mz mp mq lx na ms mt mu im bi translated">首先我要给大家介绍一个缺失数据或者空值。</p><blockquote class="nb"><p id="e73e" class="nc nd it bd ne nf ng nh ni nj nk mu dk translated">当列中的值未知或缺少时，使用数据集中的空值<strong class="ak">。(改编自docs.microsoft.com)</strong></p></blockquote><p id="adbe" class="pw-post-body-paragraph mc md it me b mf nl ju mh mi nm jx mk lp nn mm mn lt no mp mq lx np ms mt mu im bi translated">上面的定义意味着无论何时你看到或南？、—，等等，不代表来自该变量或列的数据的一个观察值的所有内容，即缺失值或空值。</p><h2 id="4fbf" class="lg lh it bd li lj lk dn ll lm ln dp lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">你将如何找到他们</h2><p id="b7be" class="pw-post-body-paragraph mc md it me b mf mg ju mh mi mj jx mk lp ml mm mn lt mo mp mq lx mr ms mt mu im bi translated">很多时候，是的，null值会以Python中著名的<em class="mv"> NaN </em>或者RStudio中简单的<em class="mv"> NA </em>的形式出现。在这些情况下，该值不会改变变量的数据类型。</p><p id="f64e" class="pw-post-body-paragraph mc md it me b mf mw ju mh mi mx jx mk lp my mm mn lt mz mp mq lx na ms mt mu im bi translated">其他时候，由于多种原因，数据可能会出现在由数据集创建者确定的特定文本符号下。例如，可以使用“无值”作为缺失值的代理。也可以是#或-，！或者别的什么。在这些情况下，变量的类型将被更改为字符串。</p><p id="a7f9" class="pw-post-body-paragraph mc md it me b mf mw ju mh mi mx jx mk lp my mm mn lt mz mp mq lx na ms mt mu im bi translated">因此，如果您正在处理另一种数据类型，比如数字，就更容易注意到该列中有一个错误的值。如果你正在处理文本，它会稍微复杂一点，但是我们会看到该怎么做。</p><p id="5e9b" class="pw-post-body-paragraph mc md it me b mf mw ju mh mi mx jx mk lp my mm mn lt mz mp mq lx na ms mt mu im bi translated">让我们看看如何处理每一种情况。</p><h2 id="c931" class="lg lh it bd li lj lk dn ll lm ln dp lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">常见缺失值NaN</h2><p id="5c4c" class="pw-post-body-paragraph mc md it me b mf mg ju mh mi mj jx mk lp ml mm mn lt mo mp mq lx mr ms mt mu im bi translated">首先，我将创建一个玩具数据集并导入一些库。</p><pre class="kj kk kl km gt nq nr ns nt aw nu bi"><span id="b9bc" class="lg lh it nr b gy nv nw l nx ny"># imports<br/>import pandas as pd<br/>import numpy as np</span><span id="f36d" class="lg lh it nr b gy nz nw l nx ny"># Create a dataframe<br/>df = pd.DataFrame({'ID': range(1,31),<br/>'value':[n if n % 5 != 0 else np.nan for n in range(1,31)],<br/>'numbers': [n if n % 4 != 0 else '?' for n in range(1,31)],<br/>'text': ['txt' if n % 3 != 0 else 'No Value!' for n in range(1,31)],<br/>})</span><span id="aa67" class="lg lh it nr b gy nz nw l nx ny">df.head()</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi oa"><img src="../Images/3eff5c201128b3d8dabadfea747a8c6f.png" data-original-src="https://miro.medium.com/v2/resize:fit:538/format:webp/1*pTbvc0E3AHQRChX6p9TbWQ.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">数据帧已创建。图片由作者提供。</p></figure><p id="7e3b" class="pw-post-body-paragraph mc md it me b mf mw ju mh mi mx jx mk lp my mm mn lt mz mp mq lx na ms mt mu im bi translated">检查数据类型，注意列<em class="mv">的值</em>，其中有NaN，它保持其类型为float。但是看列<em class="mv">的数字</em>，它已经被强制转换成字符串。</p><pre class="kj kk kl km gt nq nr ns nt aw nu bi"><span id="34c9" class="lg lh it nr b gy nv nw l nx ny">df.dtypes</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ob"><img src="../Images/d2dacdb999daa724095eb781a3e06be2.png" data-original-src="https://miro.medium.com/v2/resize:fit:330/format:webp/1*cRAvn-pe-q7PGXr8-ppvuw.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">如果缺少的值是字符串，数据类型可能会改变。图片由作者提供。</p></figure><p id="b891" class="pw-post-body-paragraph mc md it me b mf mw ju mh mi mx jx mk lp my mm mn lt mz mp mq lx na ms mt mu im bi translated">您可以使用方法<code class="fe oc od oe nr b">isna() or isnull()</code>来查找缺失值，但是它们都不会找到列<em class="mv">编号</em>或<em class="mv">文本、</em>的缺失值，因为这些是Pandas识别(或强制)为文本的列中的文本缺失值。</p><pre class="kj kk kl km gt nq nr ns nt aw nu bi"><span id="0bed" class="lg lh it nr b gy nv nw l nx ny"># Finding the total of null values<br/>df.isna().sum()</span><span id="8b7f" class="lg lh it nr b gy nz nw l nx ny"># Or you can also use<br/>df.isnull().sum()</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi of"><img src="../Images/c982a93773c84052985eba0a4c198849.png" data-original-src="https://miro.medium.com/v2/resize:fit:976/format:webp/1*nsuQpy6r5yqbbNo65mtwnw.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">看到没有将指向“？”或者“没有价值！”作为缺失值。图片由作者提供。</p></figure><p id="2225" class="pw-post-body-paragraph mc md it me b mf mw ju mh mi mx jx mk lp my mm mn lt mz mp mq lx na ms mt mu im bi translated">对于已知的缺失数据，只需对数据集进行切片就可以找到它们。</p><pre class="kj kk kl km gt nq nr ns nt aw nu bi"><span id="5ea8" class="lg lh it nr b gy nv nw l nx ny"># Pandas has good methods for that<br/>df[ df.value.isna() ]</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi og"><img src="../Images/258205e8ae86a8ca1a15e2ef198e5e94.png" data-original-src="https://miro.medium.com/v2/resize:fit:528/format:webp/1*QZC93dktnvR557Dn6zaA3A.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">“值”列中缺少的6个值。图片由作者提供。</p></figure><p id="982c" class="pw-post-body-paragraph mc md it me b mf mw ju mh mi mx jx mk lp my mm mn lt mz mp mq lx na ms mt mu im bi translated">从这里，你可以使用许多可用的技术来处理缺失数据:删除，插补，插值等。我在下面的文章中浏览了几个选项。</p><div class="oh oi gp gr oj ok"><a rel="noopener follow" target="_blank" href="/exploratory-data-analysis-with-python-part-1-b6248b28dc85"><div class="ol ab fo"><div class="om ab on cl cj oo"><h2 class="bd iu gy z fp op fr fs oq fu fw is bi translated">使用Python进行探索性数据分析—第1部分</h2><div class="or l"><h3 class="bd b gy z fp op fr fs oq fu fw dk translated">让您开始使用Python和Pandas分析数据的模板。</h3></div><div class="os l"><p class="bd b dl z fp op fr fs oq fu fw dk translated">towardsdatascience.com</p></div></div><div class="ot l"><div class="ou l ov ow ox ot oy ks ok"/></div></div></a></div><h2 id="4921" class="lg lh it bd li lj lk dn ll lm ln dp lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">带有文本缺失数据的数值数据</h2><p id="169c" class="pw-post-body-paragraph mc md it me b mf mg ju mh mi mj jx mk lp ml mm mn lt mo mp mq lx mr ms mt mu im bi translated">现在对于其他列，最好的方法之一是，首先检查数据类型，就像我们在<code class="fe oc od oe nr b">df.dtypes</code>之前所做的那样。</p><p id="6e43" class="pw-post-body-paragraph mc md it me b mf mw ju mh mi mx jx mk lp my mm mn lt mz mp mq lx na ms mt mu im bi translated">如果我们知道在某一列中我们应该有哪种类型——就像我们知道列<em class="mv">数字</em>应该有整数——但是我们得到了与预期不同的东西，那么我们知道我们可能有一个丢失的数据点或者我们应该在该列中仔细检查的东西。</p><p id="afb5" class="pw-post-body-paragraph mc md it me b mf mw ju mh mi mx jx mk lp my mm mn lt mz mp mq lx na ms mt mu im bi translated">所以，既然我知道我的列<em class="mv">数字</em>必须是整数，我将继续寻找非数字数据，比如不同于数字(0–9)的数据。</p><pre class="kj kk kl km gt nq nr ns nt aw nu bi"><span id="71ec" class="lg lh it nr b gy nv nw l nx ny"># Find the non-numeric with isdigit to assess if the data is number.<br/># You can also use .isnumeric()<br/>df[ df.numbers.astype(str).str.isnumeric() == False ]</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi oz"><img src="../Images/2a92a3561fca4b319b32c38ce1f0b4a1.png" data-original-src="https://miro.medium.com/v2/resize:fit:544/format:webp/1*LJGmVmmBRFe4MKibshTi3A.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">我们已经找到了丢失的数字:'？'—图片由作者提供。</p></figure><p id="6380" class="pw-post-body-paragraph mc md it me b mf mw ju mh mi mx jx mk lp my mm mn lt mz mp mq lx na ms mt mu im bi translated">当然，也有数字以文本形式出现的情况，只是因为Python无法识别正确的类型或它带有额外的空格(例如，“3”)，但在这种情况下，它要么不会作为缺失值出现，要么不会出现在您的列表中，但您知道它是正确的，您可以继续进行清理/格式化/转换以反映正确的数据类型。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi pa"><img src="../Images/eb79b967d3da3acaef430d7841fd6057.png" data-original-src="https://miro.medium.com/v2/resize:fit:492/format:webp/1*E9rMospjdOY_Vx_G3KUH_A.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">带有额外空格的数字3被识别为“非数字”。图片由作者提供。</p></figure><h2 id="7611" class="lg lh it bd li lj lk dn ll lm ln dp lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">缺少值的文本数据</h2><p id="9a52" class="pw-post-body-paragraph mc md it me b mf mg ju mh mi mj jx mk lp ml mm mn lt mo mp mq lx mr ms mt mu im bi translated">在不知道NAs在哪里的情况下，如何处理文本数据？</p><p id="6683" class="pw-post-body-paragraph mc md it me b mf mw ju mh mi mx jx mk lp my mm mn lt mz mp mq lx na ms mt mu im bi translated">很多时候，<strong class="me iu"> NaN </strong>值可以作为文本条目“NA”、“？, "—", "!"、【NULL】<em class="mv">等</em>，但它们可以是许多其他的东西。因此，我们的想法是使用正则表达式来尝试找到它们。一旦你找到了模式，识别其他的就变得容易了。</p><p id="7156" class="pw-post-body-paragraph mc md it me b mf mw ju mh mi mx jx mk lp my mm mn lt mz mp mq lx na ms mt mu im bi translated">假设我们不知道列<em class="mv">文本</em>的NA值是“无值！”。我们将使用正则表达式检查许多模式。</p><p id="e079" class="pw-post-body-paragraph mc md it me b mf mw ju mh mi mx jx mk lp my mm mn lt mz mp mq lx na ms mt mu im bi translated">在下面的代码中，我将应用一个lambda函数，在列文本的每一行中查找以下文本值:“NA”或“*”或“？”或者“！”或“#”或“-”并检查它找到的列表的长度。如果列表不为零，这意味着我找到了一些东西，所以在那一行中至少有一个模式。您可以在正则表达式中包含任何其他值。</p><pre class="kj kk kl km gt nq nr ns nt aw nu bi"><span id="2b62" class="lg lh it nr b gy nv nw l nx ny"># Import Regular Expressions lib<br/>import re</span><span id="b25e" class="lg lh it nr b gy nz nw l nx ny"># Using regex to find the NA values<br/>df[ df.text.apply(lambda x: len(re.findall('NA|[*|?|!|#|-]', x)) !=0 )]</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi pb"><img src="../Images/d9f05b91fab949b7465504f978a7ecae.png" data-original-src="https://miro.medium.com/v2/resize:fit:532/format:webp/1*MXarW56i0Qd8TPe1W5tRyQ.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">找到结果。所有的空值。图片由作者提供。</p></figure><h2 id="2cb1" class="lg lh it bd li lj lk dn ll lm ln dp lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">在你走之前</h2><p id="4a8d" class="pw-post-body-paragraph mc md it me b mf mg ju mh mi mj jx mk lp ml mm mn lt mo mp mq lx mr ms mt mu im bi translated">在开始探索性分析之前，了解您的数据始终是必须的。如果可以的话，查看数据集文档，如数据字典或研究总结。这些文档将为您带来丢失的数据案例以及它们是如何被识别的。</p><p id="0dbb" class="pw-post-body-paragraph mc md it me b mf mw ju mh mi mx jx mk lp my mm mn lt mz mp mq lx na ms mt mu im bi translated">对于您公司的业务数据，请尝试与该数据库的所有者交谈，以帮助您赢得时间并更快地找到NAs。</p><p id="33e8" class="pw-post-body-paragraph mc md it me b mf mw ju mh mi mx jx mk lp my mm mn lt mz mp mq lx na ms mt mu im bi translated">如果你缺乏这两种选择，那么就选择上面显示的三种方法。</p><p id="c33d" class="pw-post-body-paragraph mc md it me b mf mw ju mh mi mx jx mk lp my mm mn lt mz mp mq lx na ms mt mu im bi translated">丢失数据处理起来并不复杂，但是如果没有正确清理，它肯定会损害您的工作。</p><p id="d34c" class="pw-post-body-paragraph mc md it me b mf mw ju mh mi mx jx mk lp my mm mn lt mz mp mq lx na ms mt mu im bi translated">更多内容，别忘了关注我。</p><div class="oh oi gp gr oj ok"><a href="https://gustavorsantos.medium.com/" rel="noopener follow" target="_blank"><div class="ol ab fo"><div class="om ab on cl cj oo"><h2 class="bd iu gy z fp op fr fs oq fu fw is bi translated">古斯塔沃·桑托斯-中等</h2><div class="or l"><h3 class="bd b gy z fp op fr fs oq fu fw dk translated">阅读古斯塔夫·桑托斯在媒介上的作品。数据科学家。我从数据中提取见解，以帮助个人和公司…</h3></div><div class="os l"><p class="bd b dl z fp op fr fs oq fu fw dk translated">gustavorsantos.medium.com</p></div></div><div class="ot l"><div class="pc l ov ow ox ot oy ks ok"/></div></div></a></div><p id="5209" class="pw-post-body-paragraph mc md it me b mf mw ju mh mi mx jx mk lp my mm mn lt mz mp mq lx na ms mt mu im bi translated">如果你喜欢的话，可以订阅Medium。你可以在这里使用我的推荐代码。</p><p id="4274" class="pw-post-body-paragraph mc md it me b mf mw ju mh mi mx jx mk lp my mm mn lt mz mp mq lx na ms mt mu im bi translated"><a class="ae ky" href="https://pandas.pydata.org/docs/reference/api/pandas.Series.str.isdigit.html" rel="noopener ugc nofollow" target="_blank">熊猫文献。</a></p></div></div>    
</body>
</html>