<html>
<head>
<title>The Ultimate State-County-FIPS Tool</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">州-县-FIPS 的终极工具</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/the-ultimate-state-county-fips-tool-1e4c54dc9dff#2022-02-21">https://towardsdatascience.com/the-ultimate-state-county-fips-tool-1e4c54dc9dff#2022-02-21</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="2c7c" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">唯一的工具，你需要映射美国 FIPS 代码到国家，县，缩写，反之亦然</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/1d75bc19f8542d69d30fa754ce6a96ad.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*VjtR_OlIahYgeXTocrZA3w.jpeg"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated"><a class="ae kv" href="https://unsplash.com/@kobuagency?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> KOBU 机构</a>在<a class="ae kv" href="https://unsplash.com/s/photos/usa-maps?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure><h1 id="4d21" class="kw kx iq bd ky kz la lb lc ld le lf lg jw lh jx li jz lj ka lk kc ll kd lm ln bi translated">问题是</h1><p id="c67e" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">当使用地理位置进行数据科学研究时，经常会篡改美国 FIPS 代码、州名、县名、缩写等。互联网上有各种各样的信息表，但我找到的每一个都在某些方面有所欠缺。缺少州名缩写，或者县名格式不一致，或者表是可视化的，不容易下载用于编程，或者其他一些问题。</p><h1 id="4b46" class="kw kx iq bd ky kz la lb lc ld le lf lg jw lh jx li jz lj ka lk kc ll kd lm ln bi translated">解决方案</h1><p id="a7f2" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">本文用一个通用的美国 FIPS-州-县表解决了所有这些问题。您可以轻松地将其导入任何电子表格、数据准备层或编程语言。如果你想检查我工作的正确性或者添加一个特性，用于创建表格的<a class="ae kv" href="https://github.com/ChuckConnell/articles/blob/master/MakeFipsToCounty.py" rel="noopener ugc nofollow" target="_blank"> Python/pandas 代码</a>可供检查或修改。</p><p id="d326" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated"><a class="ae kv" href="https://github.com/ChuckConnell/articles/blob/master/fips2county.tsv" rel="noopener ugc nofollow" target="_blank">可下载表格</a>允许您:</p><ul class=""><li id="bcaf" class="mp mq iq lq b lr mk lu ml lx mr mb ms mf mt mj mu mv mw mx bi translated">通过 FIPS 代码查找州和县，反之亦然。</li><li id="4191" class="mp mq iq lq b lr my lu mz lx na mb nb mf nc mj mu mv mw mx bi translated">查找州名的官方缩写，反之亦然。</li><li id="6d6a" class="mp mq iq lq b lr my lu mz lx na mb nb mf nc mj mu mv mw mx bi translated">将 FIPS 代码转换成可读的州-县字符串，反之亦然。</li><li id="2501" class="mp mq iq lq b lr my lu mz lx na mb nb mf nc mj mu mv mw mx bi translated">将两位数的 FIPS 州代码转换为州名或缩写，反之亦然。</li></ul><p id="cedc" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">该表如下所示:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nd"><img src="../Images/b8a6997045168614bfc60dc16fabab49.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*QGRqruXAPygyDdi_FmcE5g.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">作者图片</p></figure><p id="47eb" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">请注意，完整的 FIPS 县代码由一个 2 位数的州代码加上一个 3 位数的州内县代码组成。</p><p id="d0a7" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">要使用该表，只需将其导入您喜欢的数据软件或编码语言。对于 Python/pandas:</p><pre class="kg kh ki kj gt ne nf ng nh aw ni bi"><span id="a252" class="nj kx iq nf b gy nk nl l nm nn">path = "~/Desktop/fips2county.tsv"</span><span id="3762" class="nj kx iq nf b gy no nl l nm nn">FipsDF = pd.read_csv(path, sep='\t', header='infer', dtype=str, encoding='latin-1')</span></pre><p id="4bf6" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">然后翻译州，县和代码的任何方式你想要的。假设您有一个名为 MyDF 的数据帧，其中包含 5 位 FIPS 县代码，如下所示:</p><pre class="kg kh ki kj gt ne nf ng nh aw ni bi"><span id="a4cf" class="nj kx iq nf b gy nk nl l nm nn">PLACE         FIPS</span><span id="1f60" class="nj kx iq nf b gy no nl l nm nn">Manhattan     36061<br/>Bedford MA    25017<br/>Yosemite      06043</span></pre><p id="61c6" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">并且您想要可读的州和县名。编写类似这样的代码:</p><pre class="kg kh ki kj gt ne nf ng nh aw ni bi"><span id="01b2" class="nj kx iq nf b gy nk nl l nm nn">StateCountyDF = FipsDF[["CountyFIPS", "CountyName", "StateName"]]</span><span id="73b8" class="nj kx iq nf b gy no nl l nm nn">MyDF = MyDF.merge(StateCountyDF, how='left', left_on="FIPS", right_on="CountyFIPS")</span><span id="8e44" class="nj kx iq nf b gy no nl l nm nn">MyDF = MyDF.drop(columns=["FIPS"])   # get rid of duplicate column</span></pre><p id="c592" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">这产生了:</p><pre class="kg kh ki kj gt ne nf ng nh aw ni bi"><span id="be17" class="nj kx iq nf b gy nk nl l nm nn">PLACE        CountyFIPS   CountyName      StateName</span><span id="ffe2" class="nj kx iq nf b gy no nl l nm nn">Manhattan    36061        New York        New York<br/>Bedford MA   25017        Middlesex       Massachusetts<br/>Yosemite     06043        Mariposa        California</span></pre><p id="607e" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">如果要添加州缩写:</p><pre class="kg kh ki kj gt ne nf ng nh aw ni bi"><span id="d5fd" class="nj kx iq nf b gy nk nl l nm nn">StateAbbrDF = FipsDF[["StateAbbr", "StateName"]].drop_duplicates()</span><span id="3f70" class="nj kx iq nf b gy no nl l nm nn">MyDF = MyDF.merge(StateAbbrDF, how='left', on="StateName")</span></pre><p id="0e86" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">这产生了:</p><pre class="kg kh ki kj gt ne nf ng nh aw ni bi"><span id="b6f8" class="nj kx iq nf b gy nk nl l nm nn">PLACE        CountyFIPS   CountyName    StateName       StateAbbr<br/>Manhattan    36061        New York      New York        NY<br/>Bedford MA   25017        Middlesex     Massachusetts   MA<br/>Yosemite     06043        Mariposa      California      CA</span></pre><h1 id="d30d" class="kw kx iq bd ky kz la lb lc ld le lf lg jw lh jx li jz lj ka lk kc ll kd lm ln bi translated">我是如何做桌子的</h1><p id="0c37" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">这个项目的真实来源来自美国人口普查。我用 MacOS 工作表手动打开了那里的 XLSX 文件，并将它们导出到 TSV 文件，做了一些小的编辑，以便更容易导入到熊猫文件中。那些 TSV 文件代表<a class="ae kv" href="https://github.com/ChuckConnell/articles/blob/master/state-geocodes-v2021.tsv" rel="noopener ugc nofollow" target="_blank">州 FIPS 代码</a>和<a class="ae kv" href="https://github.com/ChuckConnell/articles/blob/master/all-geocodes-v2021.tsv" rel="noopener ugc nofollow" target="_blank">县 FIPS 代码</a>，它们必须组合在一起才能使用。</p><p id="71c8" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">使用 Python/pandas，我将原始代码处理成最终的单个表格，其中包含了上面列出的所有特性。请随意修改或扩展此代码，遵守麻省理工学院的许可证，该许可证要求对我的作品进行署名。</p><h1 id="0c14" class="kw kx iq bd ky kz la lb lc ld le lf lg jw lh jx li jz lj ka lk kc ll kd lm ln bi translated">欲了解更多信息</h1><ul class=""><li id="576c" class="mp mq iq lq b lr ls lu lv lx np mb nq mf nr mj mu mv mw mx bi translated"><a class="ae kv" href="https://www.census.gov/programs-surveys/geography/guidance/geo-identifiers.html" rel="noopener ugc nofollow" target="_blank">https://www . census . gov/programs-surveys/geography/guidance/geo-identifiers . html</a></li><li id="c7ab" class="mp mq iq lq b lr my lu mz lx na mb nb mf nc mj mu mv mw mx bi translated"><a class="ae kv" href="https://en.wikipedia.org/wiki/FIPS_county_code" rel="noopener ugc nofollow" target="_blank">https://en.wikipedia.org/wiki/FIPS_county_code</a></li></ul></div></div>    
</body>
</html>