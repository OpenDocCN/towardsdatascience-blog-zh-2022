<html>
<head>
<title>5 Steps to Build Efficient Data Pipelines with Apache Airflow</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Apache Airflow构建高效数据管道的5个步骤</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/5-steps-to-build-efficient-data-pipelines-with-apache-airflow-d0b42576b530#2022-06-13">https://towardsdatascience.com/5-steps-to-build-efficient-data-pipelines-with-apache-airflow-d0b42576b530#2022-06-13</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="fe24" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">发现优化大数据管道的最佳实践</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/235d31a727099138a4c9b65f924dd746.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*wrN_hnyv1ucU8uZR"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">由<a class="ae kv" href="https://unsplash.com/@mero_dnt?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">陈乐德</a>在<a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure><h1 id="08f7" class="kw kx iq bd ky kz la lb lc ld le lf lg jw lh jx li jz lj ka lk kc ll kd lm ln bi translated">阿帕奇气流</h1><p id="3796" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">Airflow是一个开源的工作流程编排工具。尽管广泛用于构建数据管道，但airflow可用于管理各种工作流。</p><p id="f6d1" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">简单地说，如果我们要构建一个可伸缩的系统，以有序的方式执行一组需要与不同组件交互的任务，我们就可以用气流来管理这样的工作流。我们使用Dag(有向无环图)来执行这样的操作/任务。</p><p id="186d" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">在这篇博客中，我们将揭示一些有效构建工作流的实践。</p><h1 id="acc9" class="kw kx iq bd ky kz la lb lc ld le lf lg jw lh jx li jz lj ka lk kc ll kd lm ln bi translated"><strong class="ak">开发经济高效的数据管道</strong></h1><p id="a6fc" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">作为一名数据工程师，在处理项目时主要关心的问题之一是处理万亿字节数据所需的数据管道的效率。尽管解决方案通常很简单，但可能会出现管道架构、基础设施或底层数据模型阻碍管道高效运行的情况，从而导致解决方案过时。</p><p id="5735" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">让我们来看看一些策略，我们可以使用这些策略来处理海量数据的问题，而不会影响管道的有效性。</p><h1 id="f886" class="kw kx iq bd ky kz la lb lc ld le lf lg jw lh jx li jz lj ka lk kc ll kd lm ln bi translated">1.数据建模</h1><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi mp"><img src="../Images/09e4cbb6b63e3020381dab71a5192a56.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*Ug56UHl69FG4Ex_N"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">照片由<a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的<a class="ae kv" href="https://unsplash.com/@theshubhamdhage?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Shubham Dhage </a>拍摄</p></figure><p id="3cd6" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">构建数据湖或数据平台并不等同于将数据转储到现代堆栈中。相反，它通常要求工程师识别支持有效使用数据的模型。建模通常包括数据的标准化和规范化，以消除重复，执行数据标准，并通过根据业务领域对数据进行分组来建立新的实体。合适的数据模型有三个好处:</p><ul class=""><li id="9cf3" class="mq mr iq lq b lr mk lu ml lx ms mb mt mf mu mj mv mw mx my bi translated">它通过减少基础设施上不必要的负载来增加数据平台的能力。</li><li id="7b86" class="mq mr iq lq b lr mz lu na lx nb mb nc mf nd mj mv mw mx my bi translated">它简化了组织的数据资产管理，支持高效的数据分析和其他前端应用程序。</li><li id="04e4" class="mq mr iq lq b lr mz lu na lx nb mb nc mf nd mj mv mw mx my bi translated">数据通常基于业务领域进行分组，因此它有助于数据治理和编目。</li></ul><p id="7344" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">虽然数据建模不是Apache Airflow独有的，但它在构建有效的数据管道中起着至关重要的作用。</p><h1 id="a9dc" class="kw kx iq bd ky kz la lb lc ld le lf lg jw lh jx li jz lj ka lk kc ll kd lm ln bi translated">2.选择最佳操作员</h1><p id="120a" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">类似于许多领域，有几种方法可以解决数据工程中的任何问题。气流通过提供一系列操作员提供了类似的灵活性。选择正确的运营商可以提高管道性能，并大大减少开发时间。</p><p id="ae77" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">操作符的选择会因用例而异。</p><p id="2d1b" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">选择合适的运营商通常取决于以下因素:</p><ul class=""><li id="73ae" class="mq mr iq lq b lr mk lu ml lx ms mb mt mf mu mj mv mw mx my bi translated"><strong class="lq ir">数据源和目的地</strong></li><li id="a6e0" class="mq mr iq lq b lr mz lu na lx nb mb nc mf nd mj mv mw mx my bi translated"><strong class="lq ir">操作员灵活性</strong></li><li id="1fbc" class="mq mr iq lq b lr mz lu na lx nb mb nc mf nd mj mv mw mx my bi translated"><strong class="lq ir">操作员效率</strong></li><li id="02d7" class="mq mr iq lq b lr mz lu na lx nb mb nc mf nd mj mv mw mx my bi translated"><strong class="lq ir">成本费用</strong></li></ul><h2 id="7d08" class="ne kx iq bd ky nf ng dn lc nh ni dp lg lx nj nk li mb nl nm lk mf nn no lm np bi translated">a.数据源和目标</h2><p id="f58f" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">在开发数据管道时，数据通常要经过几个阶段。在数据湖的情况下，数据可能必须经过着陆区和转换区，然后才能进入管理区。</p><p id="ddc2" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">因此，可能会出现这样的情况:气流操作员需要将数据从SQL数据库导出到我们数据湖中的s3存储桶，或者从S3存储桶中读取文件，并将它们加载到数据库或基于我们数据平台架构的另一个S3存储桶中。</p><p id="cae4" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">每个运营商的来源和目的地可以缩小搜索空间。例如，如果操作符将数据从SQL服务器导出到S3存储桶，尽管可以使用PythonOperator或BashOperator来完成，但由于其简单性和性能，<strong class="lq ir"> SqlToS3Operator </strong>将是一个不错的选择。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nq nr l"/></div></figure><p id="0e7e" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">此外，如果Airflow集群位于AWS云上，并且源是一个RDS实例，我们可以使用上述操作符获得更好的性能，因为数据不会离开AWS环境，而是以闪电般的速度在AWS基础架构上通过服务流动。</p><h2 id="4ea7" class="ne kx iq bd ky nf ng dn lc nh ni dp lg lx nj nk li mb nl nm lk mf nn no lm np bi translated">b.操作员灵活性</h2><p id="27c0" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">尽管Airflow的优点是有几个提供商支持的钩子和操作符，但是由于任务的复杂性，使用提供商的现成操作符是不可行的。在这种情况下，我们可以使用<strong class="lq ir"> PythonOperator </strong>或<strong class="lq ir"> BashOperator </strong>，这给了我们足够的灵活性来产生想要的结果。</p><p id="eee1" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">PythonOperator和BashOperator都有各自的优点和缺点。一方面，PythonOperator易于理解和实现，使得开发过程变得简单，从而减少了开发时的开销。另一方面，尽管BashOperator因不够直观而臭名昭著，但它通过更好的性能弥补了这一点。</p><h2 id="e262" class="ne kx iq bd ky nf ng dn lc nh ni dp lg lx nj nk li mb nl nm lk mf nn no lm np bi translated"><strong class="ak"> c .操作员效率</strong></h2><p id="df00" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">尽管有几个操作员可以完成期望的ETL/ELT工作，但并不是所有的都是最佳的。一些运营商比其他运营商表现更好。为了补充上一点PythonOperator vs BashOperator，我们将在本节看到每个运算符的性能差异。<br/>我们创建以下管道来评估完成一个简单导出任务所需的时间。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ns"><img src="../Images/0f4e425b6a0e0f624ef4ee1b3c1d96b8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3CkUPhPt2Gt0Xni3XwqFkg.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">作者图片</p></figure><p id="7f5f" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">我们可以从下面的代码块中看到，上面DAG中的操作符执行相同的任务，也就是说，它们都将RDS (MS SQL Server)中超过200万条记录的表导出到CSV文件中。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nq nr l"/></div></figure><p id="394f" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">BashOperator使用的bash脚本如下:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nq nr l"/></div></figure><p id="9a05" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">运营商的评价如下:</p><ul class=""><li id="e549" class="mq mr iq lq b lr mk lu ml lx ms mb mt mf mu mj mv mw mx my bi translated">我们可以观察到，<strong class="lq ir"> BashOperator </strong>用了将近<strong class="lq ir"> 316秒</strong>来导出200万条记录。</li></ul><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nt"><img src="../Images/1e73fb257c1e126c579e137639475b1b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*m_nJWcEqeKSc23gW-xPpww.png"/></div></div></figure><ul class=""><li id="edee" class="mq mr iq lq b lr mk lu ml lx ms mb mt mf mu mj mv mw mx my bi translated">相反，<strong class="lq ir"> PythonOperator </strong>用了几乎<strong class="lq ir"> 470秒</strong>来执行同样的导出。</li></ul><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nu"><img src="../Images/fabf64508bd78b132a2fc454bba35f39.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Uyhi_7RguRybfwWkGkaPEg.png"/></div></div></figure><ul class=""><li id="8326" class="mq mr iq lq b lr mk lu ml lx ms mb mt mf mu mj mv mw mx my bi translated"><strong class="lq ir"> PythonOperator </strong>对于使用<strong class="lq ir">相同基础设施</strong>的<strong class="lq ir">相同导出</strong>，运行时几乎增加了<strong class="lq ir"> 50%。</strong></li></ul><p id="cb21" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">话虽如此，PythonOperators也有它的好处。Python易于学习和编码，并且在为机器学习用例开发管道时具有方便的大量库的优势。<br/>因此，我的原则是，如果我们必须导出/导入小块数据，或者需要支持开发和灵活性的公共可用库，PythonOperator是最佳选择。但是，如果我们需要通过综合转换进行批量装载，BashOperator可以很好地满足我们的需求，因为它的性能很快。</p><h2 id="6192" class="ne kx iq bd ky nf ng dn lc nh ni dp lg lx nj nk li mb nl nm lk mf nn no lm np bi translated"><strong class="ak"> d .成本费用</strong></h2><p id="bbdc" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">最后，我们需要考虑与使用操作符相关的额外成本(如果有的话)。例如，AWS提供其<a class="ae kv" href="https://airflow.apache.org/docs/apache-airflow-providers-amazon/stable/operators/dms.html" rel="noopener ugc nofollow" target="_blank">数据库迁移服务运营商</a>将数据从数据库或外部来源迁移到云平台。DMS提供持续复制、最少的停机时间和其他功能，使数据迁移变得容易。然而，它的便利是有代价的。因此，如果价格不是问题，并且数据平台在AWS中，那么DMS就成为运营商选择的合适候选。</p><h1 id="fbda" class="kw kx iq bd ky kz la lb lc ld le lf lg jw lh jx li jz lj ka lk kc ll kd lm ln bi translated">3.定量</h1><p id="1dc2" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">在上一节中，我们研究了用于将数据加载到我们的数据平台中的几个操作符。尽管我们设法选择了有效执行任务的操作符，但是每个操作符所能达到的性能都是有限的。<br/>在构建数据管道时，有时可以观察到，即使有最好的运营商，管道仍然相对较慢。通常情况下，管道性能不佳是因为它没有利用底层基础设施的全部潜力。此外，有时管道处理数据的时间至关重要，足以决定项目的命运。</p><p id="0914" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">在这种情况下，我们可以通过设计一个高效的管道来解决这个问题。</p><blockquote class="nv"><p id="f54e" class="nw nx iq bd ny nz oa ob oc od oe mj dk translated">分而治之！</p></blockquote><p id="752b" class="pw-post-body-paragraph lo lp iq lq b lr of jr lt lu og ju lw lx oh lz ma mb oi md me mf oj mh mi mj ij bi translated">举例来说，如果手头的任务是导出/导入一个具有万亿字节数据的巨大数据库，而不是像前面几节中描述的那样导出整个表，那么我们可以基于批处理来导出/导入数据。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ok"><img src="../Images/2adf15439306ca10b69ba3289cd6ac82.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Mm8qAhDCsBEBU546DW7vWA.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">作者图片</p></figure><p id="7b93" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">设计批处理管道时，需要注意以下几点:</p><ul class=""><li id="b716" class="mq mr iq lq b lr mk lu ml lx ms mb mt mf mu mj mv mw mx my bi translated">管道应该保持<strong class="lq ir">数据的完整性</strong>。应注意确保批处理逻辑不会造成重复或数据丢失。</li><li id="6ea2" class="mq mr iq lq b lr mz lu na lx nb mb nc mf nd mj mv mw mx my bi translated">尽管并行性是好的，但它只应在不中断共享同一基础设施的其他应用程序的情况下使用。可以根据CPU利用率、内存使用量等指标来调整并行度。</li><li id="f7c7" class="mq mr iq lq b lr mz lu na lx nb mb nc mf nd mj mv mw mx my bi translated"><strong class="lq ir">应该构建高效的查询</strong>来从源系统中检索批处理，因为它们会显著影响管道的性能。</li></ul><h1 id="ea75" class="kw kx iq bd ky kz la lb lc ld le lf lg jw lh jx li jz lj ka lk kc ll kd lm ln bi translated">4.高效的查询和脚本</h1><p id="c057" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">数据管道的性能不仅取决于架构，即选择的操作符或任务中的并行度，还取决于适当的转换逻辑。低效的查询会增加管道的处理时间，并给底层基础设施增加不必要的负载。</p><p id="920c" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">当设计具有批处理的管道时，这个问题变得特别严重。本节探讨两种批量导出数据的方法，并比较它们的性能。</p><ul class=""><li id="a2d2" class="mq mr iq lq b lr mk lu ml lx ms mb mt mf mu mj mv mw mx my bi translated">在第一种方法中，我们使用-F(第一行)和-L(最后一行)标志批量导出数据。</li></ul><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nq nr l"/></div></figure><p id="b134" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">上述脚本的性能如下:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nq nr l"/></div></figure><ul class=""><li id="a427" class="mq mr iq lq b lr mk lu ml lx ms mb mt mf mu mj mv mw mx my bi translated">其次，我们看一种使用最优SQL查询执行相同任务的<strong class="lq ir">更有效的方式</strong>。</li></ul><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nq nr l"/></div></figure><p id="4f61" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">上述脚本的性能如下:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nq nr l"/></div></figure><p id="1964" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated"><strong class="lq ir">注意:</strong>虽然我们创建了一个单独的脚本来测试批处理性能，但是每次迭代都是独立于之前的迭代的，因此如果操作是并行的，就可以给出准确的性能估计。这两个任务都使用BCP和相同的基础设施，不同之处仅在于批处理逻辑。</p><p id="a7b2" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">尽管这两种方法看起来相似，但我们可以从运行时观察到，后者比前者快得多。对于包含数亿条记录的大型数据集，随着第一种方法的导出时间呈指数级增长，更好的性能变得更加明显。<br/>首先描述的方法中时间的增加是因为如果我们有100个批次，每个批次有100万条记录，那么要通过第一种方法导出第100个批次，BCP必须读取9900万条记录，然后才能开始导出数据。这意味着随着批次数量的增加，导出数据所需的时间也会增加。<br/>但是，使用后一种方法，查询被优化以从1亿条记录中获得所需的ID，然后读取导出所需的记录，使每次导出保持一致。</p><h1 id="67b4" class="kw kx iq bd ky kz la lb lc ld le lf lg jw lh jx li jz lj ka lk kc ll kd lm ln bi translated"><strong class="ak"> 5。选择合适的基础设施</strong></h1><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ol"><img src="../Images/a8feb3860528c93d4dd2e85de0d036d2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*8yRgLY9b8ZnmOSWI"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">由<a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的<a class="ae kv" href="https://unsplash.com/@drmakete?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> drmakete实验室</a>拍摄的照片</p></figure><p id="06b6" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">数据管道的性能取决于支持它们的底层基础设施。一个设计良好的数据管道，如果基础设施不完善，结果会很糟糕，反之亦然。因此，了解并使基础设施能够构建高效的管道至关重要。</p><p id="d294" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">有许多方法可以实现足够的基础设施。例如，气流与Kubernetes等技术很好地集成在一起。由AWS、GCP或Azure等云平台支持的Kubernetes可以帮助充分发挥数据管道的潜力。云平台在与Airflow集成时变得非常强大，因为它们提供了一些功能，如根据CPU利用率、内存等指标自动扩展或缩减基础架构。</p><p id="ef5b" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">上述方法有助于创建强健的基础架构，原因如下:</p><ul class=""><li id="347d" class="mq mr iq lq b lr mk lu ml lx ms mb mt mf mu mj mv mw mx my bi translated">Kubernetes可以帮助在硬件上扩大或缩小pod(我们数据管道中的每个任务)。</li><li id="808a" class="mq mr iq lq b lr mz lu na lx nb mb nc mf nd mj mv mw mx my bi translated">此外，云平台可以通过向Kubernetes集群添加或删除硬件资源来扩大或缩小规模，这可能会随着数据管道中负载的增加而增加。</li><li id="09a5" class="mq mr iq lq b lr mz lu na lx nb mb nc mf nd mj mv mw mx my bi translated">此外，这两种技术相互作用，使基础设施更加可靠。</li></ul><h1 id="8a5a" class="kw kx iq bd ky kz la lb lc ld le lf lg jw lh jx li jz lj ka lk kc ll kd lm ln bi translated">结论</h1><p id="1473" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">构建数据管道是多个组件的混合。这篇博客探讨了设计良好的基础设施、架构和数据建模对于构建高效管道的重要性。</p><h1 id="6c6f" class="kw kx iq bd ky kz la lb lc ld le lf lg jw lh jx li jz lj ka lk kc ll kd lm ln bi translated">参考</h1><div class="om on gp gr oo op"><a href="https://airflow.apache.org/" rel="noopener  ugc nofollow" target="_blank"><div class="oq ab fo"><div class="or ab os cl cj ot"><h2 class="bd ir gy z fp ou fr fs ov fu fw ip bi translated">主页</h2><div class="ow l"><h3 class="bd b gy z fp ou fr fs ov fu fw dk translated">没有更多的命令行或XML魔术！使用标准Python功能创建工作流，包括日期时间…</h3></div><div class="ox l"><p class="bd b dl z fp ou fr fs ov fu fw dk translated">airflow.apache.org</p></div></div><div class="oy l"><div class="oz l pa pb pc oy pd kp op"/></div></div></a></div><div class="om on gp gr oo op"><a href="https://airflow.apache.org/docs/apache-airflow-providers-amazon/stable/index.html" rel="noopener  ugc nofollow" target="_blank"><div class="oq ab fo"><div class="or ab os cl cj ot"><h2 class="bd ir gy z fp ou fr fs ov fu fw ip bi translated">阿帕奇-气流-供应商-亚马逊-阿帕奇-气流-供应商-亚马逊文档</h2><div class="ow l"><h3 class="bd b gy z fp ou fr fs ov fu fw dk translated">这是提供者的提供者套件。此提供程序包的所有类都在airflow.providers.amazon python中…</h3></div><div class="ox l"><p class="bd b dl z fp ou fr fs ov fu fw dk translated">airflow.apache.org</p></div></div></div></a></div><h1 id="0ea8" class="kw kx iq bd ky kz la lb lc ld le lf lg jw lh jx li jz lj ka lk kc ll kd lm ln bi translated">阅读其他数据博客</h1><div class="om on gp gr oo op"><a href="https://vachan15.medium.com/index-link-to-all-my-blogs-98efca323fa8" rel="noopener follow" target="_blank"><div class="oq ab fo"><div class="or ab os cl cj ot"><h2 class="bd ir gy z fp ou fr fs ov fu fw ip bi translated">索引—链接到我的所有博客</h2><div class="ow l"><h3 class="bd b gy z fp ou fr fs ov fu fw dk translated">这篇文章只是为了方便访问我过去写的博客。不同领域的博客会…</h3></div><div class="ox l"><p class="bd b dl z fp ou fr fs ov fu fw dk translated">vachan15.medium.com</p></div></div></div></a></div><h1 id="ce5f" class="kw kx iq bd ky kz la lb lc ld le lf lg jw lh jx li jz lj ka lk kc ll kd lm ln bi translated">在Linkedin上连接:</h1><div class="om on gp gr oo op"><a href="https://www.linkedin.com/in/vachan-anand-26bb76b7/" rel="noopener  ugc nofollow" target="_blank"><div class="oq ab fo"><div class="or ab os cl cj ot"><h2 class="bd ir gy z fp ou fr fs ov fu fw ip bi translated">Vachan Anand -顾问- Servian | LinkedIn</h2><div class="ow l"><h3 class="bd b gy z fp ou fr fs ov fu fw dk translated">一家非盈利机构的创始人，具有金融服务行业的工作经历。熟练HTML…</h3></div><div class="ox l"><p class="bd b dl z fp ou fr fs ov fu fw dk translated">www.linkedin.com</p></div></div><div class="oy l"><div class="pe l pa pb pc oy pd kp op"/></div></div></a></div></div></div>    
</body>
</html>