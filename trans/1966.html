<html>
<head>
<title>What Is Well-Modeled Data for Analysis?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">什么是用于分析的良好建模的数据？</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/what-is-well-modeled-data-for-analysis-28f73146bf96#2022-05-04">https://towardsdatascience.com/what-is-well-modeled-data-for-analysis-28f73146bf96#2022-05-04</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><figure class="ip iq gp gr ir is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi io"><img src="../Images/837d4e2d64a04621843a9514abee62f4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*syAhROtQp8wdW3BF1anWBA.jpeg"/></div></div><p class="iz ja gj gh gi jb jc bd b be z dk translated">托拜厄斯·菲舍尔在<a class="ae jd" href="https://unsplash.com/s/photos/database?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</p></figure><div class=""/><div class=""><h2 id="443f" class="pw-subtitle-paragraph kd jf jg bd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku dk translated">建模数据是不够的——您需要做得更好</h2></div><p id="ef5e" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><em class="lr">本文将限于对</em> <strong class="kx jh"> <em class="lr">读访问</em> </strong> <em class="lr">数据建模，以便进行分析——即I/O的O部分。</em></p><p id="ff53" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><em class="lr">我也不打算讨论数据质量或预处理，但我相信你不会忘记这些事情。</em></p><h1 id="0d9c" class="ls lt jg bd lu lv lw lx ly lz ma mb mc km md kn me kp mf kq mg ks mh kt mi mj bi translated">为什么您应该关心数据建模？</h1><p id="d992" class="pw-post-body-paragraph kv kw jg kx b ky mk kh la lb ml kk ld le mm lg lh li mn lk ll lm mo lo lp lq ij bi translated">它是关于从您的数据中获取最大价值—快速、重复和稳健。</p><p id="b097" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><em class="lr">你想用你的数据，对吧？不然何苦呢？</em></p><p id="8e85" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">当您有建模不良的数据时，请考虑一下。当然，您可以不假思索地将所有东西都倒入数据湖中，从而有效地创建了一个“数据沼泽”。对于数据工程师来说，这样做很快。但是，每次数据科学家或数据产品开发人员想要使用数据时，他们都必须花费几天到几周的时间来检查模式并迭代复杂的查询，直到他们以所需的结构获得所需的确切数据。换句话说，你已经做了一次简单的事情，你正在强迫你的合作者重复做困难的事情。</p><p id="4a5f" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">现在考虑当你有了模型良好的数据时。不可否认，数据工程师需要花更多的时间与领域专家、数据科学家和数据产品开发人员合作，才能很好地完成建模。但是，如果你“一次”这样做——不要忘记随着数据类型/需求的变化而进行维护和更新——那么你会让你的合作者的生活变得更容易。他们可以更快地找到数据，更快地查询数据，而且数据以他们需要快速移动的结构交付。你做一次难的事情，然后你可以重复做容易的事情。</p><p id="6f56" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">这不是证据吗？</p><h1 id="9c44" class="ls lt jg bd lu lv lw lx ly lz ma mb mc km md kn me kp mf kq mg ks mh kt mi mj bi translated">良好建模数据的各个方面</h1><p id="e099" class="pw-post-body-paragraph kv kw jg kx b ky mk kh la lb ml kk ld le mm lg lh li mn lk ll lm mo lo lp lq ij bi translated">为了产生良好建模的数据，考虑以下七个属性:<br/> <em class="lr">我确定我遗漏了一些…但是七是个好数字… </em></p><h2 id="fc00" class="mp lt jg bd lu mq mr dn ly ms mt dp mc le mu mv me li mw mx mg lm my mz mi na bi translated">1.存储数据的模式/形状</h2><p id="4196" class="pw-post-body-paragraph kv kw jg kx b ky mk kh la lb ml kk ld le mm lg lh li mn lk ll lm mo lo lp lq ij bi translated">你可以有6桌，也可以有60桌(或更多)。您可以在不同的表中实现多对一和多对多关系，或者您可以找到将所有这些信息压缩到一个表中的方法。你可以选择实现一个<a class="ae jd" href="https://en.wikipedia.org/wiki/Star_schema" rel="noopener ugc nofollow" target="_blank">星型模式</a>，一个<a class="ae jd" href="https://en.wikipedia.org/wiki/Key%E2%80%93value_database" rel="noopener ugc nofollow" target="_blank">键-值模型</a>，或者甚至尝试一个<a class="ae jd" href="https://en.wikipedia.org/wiki/Graph_database" rel="noopener ugc nofollow" target="_blank">图模型</a>。</p><p id="64bd" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">我不打算支持或反对任何特定的模式或技术。</p><p id="f757" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">存储数据的最佳模式取决于消费者的范围/需求，您知道他们是什么吗？在你知道之前，不要选择一种技术或模式。</p><p id="0654" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">考虑到在不同的模式/技术中隔离完全不同类型的数据可能是最好的——特别是当您的消费者被隔离时。不要假设所有数据都需要在一个集中的整体中——参见:<a class="ae jd" href="https://martinfowler.com/articles/data-mesh-principles.html" rel="noopener ugc nofollow" target="_blank">数据网格</a>。</p><p id="d003" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">如果您的消费者用例足够多样化，您甚至可能希望在不同的模型中存储相同的数据。</p><p id="113d" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">根据经验，接吻——也就是说，保持简单，笨蛋。</p><h2 id="2cd3" class="mp lt jg bd lu mq mr dn ly ms mt dp mc le mu mv me li mw mx mg lm my mz mi na bi translated">2.查询的简单性</h2><p id="9cf9" class="pw-post-body-paragraph kv kw jg kx b ky mk kh la lb ml kk ld le mm lg lh li mn lk ll lm mo lo lp lq ij bi translated">如果您的数据科学家和数据产品开发人员必须进行复杂的查询来获得他们需要的数据，以他们需要的结构，那么您就犯了一个对数据建模的错误。每次他们需要进行查询时，都要花很长时间才能正确形成每个查询。当他们或其他人需要调整一个复杂的查询来做一些不同的事情时，这也将花费很长时间。</p><p id="1d5d" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">一些注意事项:</p><ul class=""><li id="ca57" class="nb nc jg kx b ky kz lb lc le nd li ne lm nf lq ng nh ni nj bi translated">需要多少个表连接或图遍历？</li><li id="6d30" class="nb nc jg kx b ky nk lb nl le nm li nn lm no lq ng nh ni nj bi translated">数据转换或计算是否发生在查询级别？</li><li id="e61d" class="nb nc jg kx b ky nk lb nl le nm li nn lm no lq ng nh ni nj bi translated">每个查询中有多少个字符/行/循环？</li><li id="6124" class="nb nc jg kx b ky nk lb nl le nm li nn lm no lq ng nh ni nj bi translated">了解并避免SQL <a class="ae jd" href="https://github.com/boralp/sql-anti-patterns" rel="noopener ugc nofollow" target="_blank">反模式</a>。</li></ul><p id="c7aa" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">高级提示——考虑免查询。在你的数据模型之上实现一个API方法/微服务的中间层，它将从一个治理良好的、可测试的代码库中完成所有复杂的查询。<em class="lr">微型插头——我的公司，</em><a class="ae jd" href="https://tag.bio" rel="noopener ugc nofollow" target="_blank"><em class="lr">tag . bio</em></a><em class="lr">，有一个平台在这方面做得非常好。</em></p><h2 id="20d5" class="mp lt jg bd lu mq mr dn ly ms mt dp mc le mu mv me li mw mx mg lm my mz mi na bi translated">3.查询速度</h2><p id="79e2" class="pw-post-body-paragraph kv kw jg kx b ky mk kh la lb ml kk ld le mm lg lh li mn lk ll lm mo lo lp lq ij bi translated">执行一个查询不应该花费几个小时。当然，这取决于数据量，但是根据经验，如果执行一个查询来获取少量的数据花费了过多的时间，即超过几秒钟，那么对于该用例来说，您就有了一个糟糕的数据模型。</p><p id="7c9f" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><em class="lr">监控性能，在</em>  <em class="lr">最终确定您的数据模型之前，让您的消费者开始查询数据</em> <strong class="kx jh"> <em class="lr">。</em></strong></p><h2 id="4d2b" class="mp lt jg bd lu mq mr dn ly ms mt dp mc le mu mv me li mw mx mg lm my mz mi na bi translated">4.查询输出的模式/可理解性</h2><p id="7580" class="pw-post-body-paragraph kv kw jg kx b ky mk kh la lb ml kk ld le mm lg lh li mn lk ll lm mo lo lp lq ij bi translated">数据科学家和数据产品开发者喜欢<a class="ae jd" href="http://uc-r.github.io/dataframes#:~:text=A%20data%20frame%20is%20the,is%20the%20number%20of%20rows." rel="noopener ugc nofollow" target="_blank">数据框架</a>。对数据模型的查询会产生有用的数据框吗？数据框应仅包含原始值，即文本、数字、布尔标志，而非复杂对象。</p><p id="a285" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><em class="lr">例如，如果一个查询在嵌套了JSON对象的行中生成值——或者上帝不允许——XML对象，您的数据科学家消费者将会讨厌您。</em></p><p id="8130" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">当然，也有可能您的消费者希望查询输出模式是另外一种模式——与他们一起工作，实现他们所需要的。</p><p id="6a46" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">最后，数据模型的消费者需要理解他们在查询中得到的数据。<a class="ae jd" href="https://en.wikipedia.org/wiki/Data_dictionary" rel="noopener ugc nofollow" target="_blank">数据字典</a>很棒——但是请考虑使用人类可读的列标题。没有人理解设计糟糕的首字母缩写词——一年后的你也不会。</p><h2 id="dd3d" class="mp lt jg bd lu mq mr dn ly ms mt dp mc le mu mv me li mw mx mg lm my mz mi na bi translated">5.查询输出的数量</h2><p id="7377" class="pw-post-body-paragraph kv kw jg kx b ky mk kh la lb ml kk ld le mm lg lh li mn lk ll lm mo lo lp lq ij bi translated">对大数据源的查询可能会产生大的结果集，这可能是也可能不是问题。显然，如果一个查询返回消费者不使用的列或行，那么就去掉它们— <em class="lr">我指的是列/行，而不是消费者。:)</em></p><p id="b4a2" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">有许多其他的设计模式和技术可以解决大型查询输出的“消防软管”问题——包括但不限于，以较小的块缓存和提供数据的中间层——但是我不能在这里一一介绍。</p><p id="bd89" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">好了，这里还有一个选项——考虑实现一种方法，允许消费者从查询中获得随机的数据子集，并带有一个可选的种子参数。</p><p id="9cac" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">不要想当然地认为“事情就是这样”。如果查询输出数量是一个问题，并且它降低了用户的速度，那么就修复它。</p><h2 id="d1fc" class="mp lt jg bd lu mq mr dn ly ms mt dp mc le mu mv me li mw mx mg lm my mz mi na bi translated">6.聚合与数据丢失</h2><p id="4d9d" class="pw-post-body-paragraph kv kw jg kx b ky mk kh la lb ml kk ld le mm lg lh li mn lk ll lm mo lo lp lq ij bi translated">当数据科学家执行查询时，他们会感到非常沮丧，因为他们看到他们关心的数据已经“方便地”进行了汇总，例如“每月总计”，而他们想要的是粒度数据，例如“每日计数”。</p><p id="e270" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">此外，在数据模型中创建总计和平均值是“有损耗的”，也就是说，您会丢失来自输入源的信息。</p><p id="78cc" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">同时，在消费者不需要时提供粒度数据会增加查询复杂性、查询计算时间和查询量。我特别想到了IOT的例子，传感器以毫秒的频率记录数据。也许你的消费者需要毫秒级的数据，或者他们只需要日平均值。</p><p id="80bc" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><em class="lr">不要假设，去问他们。</em></p><p id="2321" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">考虑在原始(无损)和聚集(有损)结构中存储和建模数据。只要模式不会变得太复杂，您的消费者就会喜欢有选择。</p><h2 id="2ace" class="mp lt jg bd lu mq mr dn ly ms mt dp mc le mu mv me li mw mx mg lm my mz mi na bi translated">7.测试、维护和新兴数据类型</h2><p id="e17e" class="pw-post-body-paragraph kv kw jg kx b ky mk kh la lb ml kk ld le mm lg lh li mn lk ll lm mo lo lp lq ij bi translated">你不能假设你的数据模型永远是完美的——需要改变，新的数据类型出现。但是你也不能随后心血来潮地改变一切，而不破坏生产中的用例。</p><p id="e806" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">为数据模型的维护和变更制定一个合理的计划。</p><p id="617c" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">特别是，当您调整数据模型以适应不断变化的需求/新出现的数据类型时，建立数据测试框架是监控生产用例中任何潜在问题的一个好方法。</p><p id="cf07" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">作为数据工程师/数据建模师——数据测试是你的责任，而不是数据科学家和数据产品开发人员的责任。</p><h1 id="eb55" class="ls lt jg bd lu lv lw lx ly lz ma mb mc km md kn me kp mf kq mg ks mh kt mi mj bi translated">结论</h1><p id="885e" class="pw-post-body-paragraph kv kw jg kx b ky mk kh la lb ml kk ld le mm lg lh li mn lk ll lm mo lo lp lq ij bi translated">感谢阅读！如果你有任何想法或问题，请告诉我。</p></div></div>    
</body>
</html>