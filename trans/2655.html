<html>
<head>
<title>Mastering Inset Axes in Matplotlib</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在Matplotlib中控制插入轴</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/mastering-inset-axes-in-matplotlib-458d2fdfd0c0#2022-06-08">https://towardsdatascience.com/mastering-inset-axes-in-matplotlib-458d2fdfd0c0#2022-06-08</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><figure class="gl gn jr js jt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi jq"><img src="../Images/3bcf4c394195013524567b354874d5f3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*HShaWn5HpIHoJs7I9z310Q.jpeg"/></div></div><p class="kb kc gj gh gi kd ke bd b be z dk translated">由<a class="ae kf" href="https://pixabay.com/users/geralt-9301/" rel="noopener ugc nofollow" target="_blank"> geralt </a>在<a class="ae kf" href="https://pixabay.com/illustrations/laptop-technology-online-monitor-6962810/" rel="noopener ugc nofollow" target="_blank"> Pixabay </a>上拍摄封面图像。</p></figure><p id="7c4a" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><a class="ae kf" href="https://matplotlib.org/stable/api/_as_gen/matplotlib.axes.Axes.inset_axes.html" rel="noopener ugc nofollow" target="_blank">嵌入轴</a>是Matplotlib中一个奇妙的(<strong class="ki iu">且经常未被充分利用的</strong>)工具。它们可用于:</p><ol class=""><li id="d724" class="le lf it ki b kj kk kn ko kr lg kv lh kz li ld lj lk ll lm bi translated">放大图的特定部分以<strong class="ki iu">更详细地显示它们</strong>。</li><li id="fbb5" class="le lf it ki b kj ln kn lo kr lp kv lq kz lr ld lj lk ll lm bi translated"><strong class="ki iu">用附加信息替换图中的空白区域</strong>。</li><li id="84da" class="le lf it ki b kj ln kn lo kr lp kv lq kz lr ld lj lk ll lm bi translated">给你的数字一点额外的活力！</li></ol><p id="89f1" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在这篇文章中，我将介绍使用嵌入轴的基本知识，然后给出如何<strong class="ki iu">定制和改进你的绘图的额外细节。本文末尾的<strong class="ki iu"> Python笔记本</strong>中包含了用于生成所有图的代码。</strong></p></div><div class="ab cl ls lt hx lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="im in io ip iq"><h2 id="3376" class="lz ma it bd mb mc md dn me mf mg dp mh kr mi mj mk kv ml mm mn kz mo mp mq mr bi translated">基础知识</h2><p id="b48a" class="pw-post-body-paragraph kg kh it ki b kj ms kl km kn mt kp kq kr mu kt ku kv mv kx ky kz mw lb lc ld im bi translated">创建嵌入轴有三个主要组成部分。首先，您需要一个现有的环绕轴来添加插入轴。然后，您需要创建插入轴，并定义它在环绕轴中的位置。最后，您需要将插入数据绘制到插入轴上。一个可选步骤是<strong class="ki iu">添加线条来指示插入缩放</strong>。这可以通过以下方式实现:</p><pre class="mx my mz na gt nb nc nd ne aw nf bi"><span id="1898" class="lz ma it nc b gy ng nh l ni nj"># Code snippet to create inset axes.<br/># axis is the surrounding axis into which the inset axis will be added</span><span id="e889" class="lz ma it nc b gy nk nh l ni nj"># Create an inset axis in the bottom right corner<br/>axin = axis.inset_axes([0.55, 0.02, 0.43, 0.43])</span><span id="fb59" class="lz ma it nc b gy nk nh l ni nj"># Plot the data on the inset axis and zoom in on the important part<br/>plot_data(axin)<br/>axin.set_xlim(-10, 12)<br/>axin.set_ylim(0.75, 1.4)</span><span id="57d8" class="lz ma it nc b gy nk nh l ni nj"># Add the lines to indicate where the inset axis is coming from<br/>axis.indicate_inset_zoom(axin)</span></pre><p id="ba74" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在上面的例子中，<code class="fe nl nm nn nc b">axis.inset_axes</code>创建了插入轴<code class="fe nl nm nn nc b">axin</code>，并定义了它在原始<code class="fe nl nm nn nc b">axis</code>中的位置(稍后将详细介绍这个定位)。插入轴中显示的区域是通过设置轴限制来控制的，即<code class="fe nl nm nn nc b">axin.set_xlim</code>和<code class="fe nl nm nn nc b">axin.set_ylim</code>——把这想象成<strong class="ki iu">裁剪原始图</strong>，这样我们可以放大重要的部分。只需使用<code class="fe nl nm nn nc b">indicate_inset_zoom</code>即可添加缩放线和边框。</p><p id="8c26" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这将产生类似如下的结果:</p><figure class="mx my mz na gt ju gh gi paragraph-image"><div class="gh gi no"><img src="../Images/97e42acc3b22090c292407be7c533873.png" data-original-src="https://miro.medium.com/v2/resize:fit:690/format:webp/1*shNtrmH3S6dyj-SyhAb3Xw.png"/></div><p class="kb kc gj gh gi kd ke bd b be z dk translated">使用单个插入轴放大部分绘图的示例。作者创造的形象。</p></figure><p id="b4df" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">嵌入轴的定位是<strong class="ki iu">轴相对于</strong>轴的定位。这意味着位置与轴限制无关。嵌入轴的坐标应在[0，0](左下角)和[1，1](右上角)之间。<code class="fe nl nm nn nc b">axis.inset_axes</code>需要四个参数来定义边界:[x0，y0，width，height]。因此，例如，[0.4，0.4，0.2，0.2]给出了一个位于图中心的插入轴，<strong class="ki iu">，而不管轴限制</strong>是什么:</p><figure class="mx my mz na gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi np"><img src="../Images/5360d6a5b8522ec28ac7199e901c1ece.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mBGmKsZO1DuhU95VeEq_6w.png"/></div></div><p class="kb kc gj gh gi kd ke bd b be z dk translated">当外部轴限制改变时，插入轴不会移动，因为(默认情况下)位置是相对于轴的。作者创造的形象。</p></figure></div><div class="ab cl ls lt hx lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="im in io ip iq"><h2 id="638e" class="lz ma it bd mb mc md dn me mf mg dp mh kr mi mj mk kv ml mm mn kz mo mp mq mr bi translated">越来越花哨</h2><p id="4ff1" class="pw-post-body-paragraph kg kh it ki b kj ms kl km kn mt kp kq kr mu kt ku kv mv kx ky kz mw lb lc ld im bi translated">我们可以通过使用嵌入轴让<strong class="ki iu">更有创意</strong>:</p><ol class=""><li id="2943" class="le lf it ki b kj kk kn ko kr lg kv lh kz li ld lj lk ll lm bi translated">没有理由为什么我们不能在我们的地块中有<strong class="ki iu">多个插入轴</strong>。也许我们想放大两个区域？</li><li id="58be" class="le lf it ki b kj ln kn lo kr lp kv lq kz lr ld lj lk ll lm bi translated">有时，嵌入轴中的内容可能实际上比整体情节更有趣。我们可以<strong class="ki iu">交换内容</strong>，以便周围的绘图包含放大的版本，并且插入轴显示更宽的视图。</li><li id="ced7" class="le lf it ki b kj ln kn lo kr lp kv lq kz lr ld lj lk ll lm bi translated">插入轴甚至不需要显示与周围绘图相同的数据。放大只是一个用例。显示<strong class="ki iu">附加信息</strong>也很好。</li></ol><p id="8383" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">下面我们用上面的图给出了这些不同用例的例子。看看<strong class="ki iu">带插入轴的图比无聊的原始图好看多了！</strong></p><figure class="mx my mz na gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi nq"><img src="../Images/5e73360b5c86470bbf3a86cb31c2da62.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dBVGSx6mtrc3lo-NrUszdw.png"/></div></div><p class="kb kc gj gh gi kd ke bd b be z dk translated">使用嵌入轴制作更有趣的图的一系列选项。作者创造的形象。</p></figure></div><div class="ab cl ls lt hx lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="im in io ip iq"><h2 id="3b02" class="lz ma it bd mb mc md dn me mf mg dp mh kr mi mj mk kv ml mm mn kz mo mp mq mr bi translated">更多提示</h2><p id="8fc6" class="pw-post-body-paragraph kg kh it ki b kj ms kl km kn mt kp kq kr mu kt ku kv mv kx ky kz mw lb lc ld im bi translated">创建插入轴时，还有一些需要注意的事项。</p><p id="a7ab" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><strong class="ki iu">纵横比</strong> —考虑插入轴的纵横比与其显示的原始区域的纵横比非常重要。这会导致插入轴中原始数据的<strong class="ki iu">拉伸或挤压</strong>，这可能会导致数据失真。例如:</p><figure class="mx my mz na gt ju gh gi paragraph-image"><div class="gh gi no"><img src="../Images/c6a84e91dc81ef00fbabcfdb2ce59d6f.png" data-original-src="https://miro.medium.com/v2/resize:fit:690/format:webp/1*tCAqgApIDoTU5MmFw-uZ7w.png"/></div><p class="kb kc gj gh gi kd ke bd b be z dk translated">使用嵌入轴时要注意不同的纵横比。作者创造的形象。</p></figure><p id="0a9f" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><strong class="ki iu">轴定位</strong> —上面，我提到了<em class="nr">轴相对于</em>坐标定位嵌入轴。或者，可以使用相对于坐标的<em class="nr">数据。创建插入轴时设置<code class="fe nl nm nn nc b">transform=axis.transData</code>。不过要小心！这使得嵌入轴的位置对轴限制敏感:</em></p><figure class="mx my mz na gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi ns"><img src="../Images/5acc1a7e203fad6a317870e8cf9c9548.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xU6W-rrh_TC29D4egdNV9A.png"/></div></div><p class="kb kc gj gh gi kd ke bd b be z dk translated">轴与数据相对定位。当轴限制改变时，使用数据相对定位时，插入轴会移动。作者创造的形象。</p></figure><p id="b8e9" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><strong class="ki iu"> Z排序— </strong>默认情况下，插入轴应该出现在您已经绘制的任何内容的顶部。然而，<strong class="ki iu">对于手动控制</strong>，您可以调节<code class="fe nl nm nn nc b">zorder</code>来控制顶部的内容:</p><figure class="mx my mz na gt ju gh gi paragraph-image"><div class="gh gi no"><img src="../Images/f1650ec0d3ef23da7228d51950230fb3.png" data-original-src="https://miro.medium.com/v2/resize:fit:690/format:webp/1*8GVRDEhaFubsCgEocz-nvQ.png"/></div><p class="kb kc gj gh gi kd ke bd b be z dk translated">更改插入轴的z顺序值允许您将它们放置在现有数据的顶部，甚至是彼此之上。作者创造的形象。</p></figure></div><div class="ab cl ls lt hx lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="im in io ip iq"><p id="cebf" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">下面是我用来生成本文中的情节的<strong class="ki iu"> Python笔记本</strong>:</p><figure class="mx my mz na gt ju"><div class="bz fp l di"><div class="nt nu l"/></div></figure><p id="bb89" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这就是我使用<strong class="ki iu"> Matplotlib嵌入轴</strong>的指南。如果您有任何问题，请发表评论或联系我。<strong class="ki iu">感谢阅读，密谋愉快！</strong></p></div></div>    
</body>
</html>