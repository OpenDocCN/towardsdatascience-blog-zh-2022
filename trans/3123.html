<html>
<head>
<title>Power BI XMLA Endpoints, Demystified</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Power BI XMLA端点，非神秘化</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/power-bi-xmla-endpoints-demystified-ebfd3c8772e6#2022-07-08">https://towardsdatascience.com/power-bi-xmla-endpoints-demystified-ebfd3c8772e6#2022-07-08</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="1b11" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">在Power BI的发展过程中有许多改变游戏规则的因素。XMLA端点可用性一直是前三名之一。</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/5072c9f7f16ab7a3a23fcc6c4141e73a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mEHUROmF2WuUTe6bcMI5eg.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">由Isaac Smith在Unsplash上拍摄的照片</p></figure><p id="ac07" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在微软Power BI作为独立产品的发展过程中(2015年)，从BI分析领域的一个害羞的挑战者到不可否认的领导者，有许多“游戏规则改变者”——这些功能带来了革命而不是发展！<a class="ae ky" href="https://data-mozart.com/mastering-dp-500-exam-design-and-build-composite-models/" rel="noopener ugc nofollow" target="_blank">复合模型</a>、数据流、人工智能视觉、<a class="ae ky" href="https://data-mozart.com/hybrid-tables-in-power-bi-the-ultimate-guide/" rel="noopener ugc nofollow" target="_blank">混合表</a>、<a class="ae ky" href="https://data-mozart.com/bookmarks-in-power-bi-what-this-data-mean/" rel="noopener ugc nofollow" target="_blank">书签</a>……应有尽有！</p><p id="f037" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然而，真正开启了一个全新的可能性世界的特性之一是——使用XMLA endpoint访问底层的Power BI数据集，但这一特性在有经验的Power BI实践者社区之外可能仍然“不为人知”!</p><p id="66e8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">虽然很多人<a class="ae ky" href="https://medium.com/p/85db9e2d745b" rel="noopener">认为Power BI是一个数据可视化工具</a>，但是我不得不承认<strong class="lb iu"> <em class="lv"> Power BI首先是一个数据建模工具</em> </strong>！这就是为什么理解什么是XMLA端点以及为什么应该关注它们是极其重要的。</p><h1 id="54e1" class="lw lx it bd ly lz ma mb mc md me mf mg jz mh ka mi kc mj kd mk kf ml kg mm mn bi translated">XMLA是什么？</h1><p id="f1af" class="pw-post-body-paragraph kz la it lb b lc mo ju le lf mp jx lh li mq lk ll lm mr lo lp lq ms ls lt lu im bi translated">让我们从基础开始。你可能听说过XML，但是现在到底什么是XMLA？！不要害怕——这只是——XML for Analysis！与其引用XMLA枯燥的定义，不如让我来说明这个“东西”是如何工作的…</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mt"><img src="../Images/e9622bd3f43beb267ac2ca457b2d327d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xr9a7uBgRIuhSm9Cj4NIIg.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><p id="2d61" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">简单地说，Analysis Services的实例“公开”了一个端点，然后可以由各种客户端工具使用，如表格编辑器、SSMS、Azure Data Studio、SQL Server数据工具等。与Analysis Services实例“对话”。如果你想知道——好的，Nikola，能够与AS实例“交谈”有什么特别之处……嗯，就像在常规的现实生活交谈中，你可以指导某人做什么，这同样适用于与Analysis Services实例的“交谈”:使用客户端工具，你可以读取AS实例的内容，但更重要的是，你还可以操作存储在Analysis Services实例中的TOM(表格对象模型),并修改其默认行为！</p><h1 id="27f2" class="lw lx it bd ly lz ma mb mc md me mf mg jz mh ka mi kc mj kd mk kf ml kg mm mn bi translated">历史课——SSAS公司</h1><p id="b655" class="pw-post-body-paragraph kz la it lb b lc mo ju le lf mp jx lh li mq lk ll lm mr lo lp lq ms ls lt lu im bi translated">如果您认为XMLA endpoint是某种全新的、强大的双独占特性，那就大错特错了！对于我们这些曾经和SSAS多维一起工作的人来说，使用XMLA是一个众所周知的概念。所以，这是分析服务和XMLA之间的长期关系…现在，你可能会问自己:为什么他坚持重复“分析服务”，“分析服务”？我是一名Power BI开发人员，我有兴趣了解这个“XMLA东西”在Power BI中是如何工作的！</p><p id="daa1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">有道理，所以我们来解释一下这个。当您打开Power BI Desktop来创建一个解决方案时(我特意使用了word solution来代替报告)，Power BI将启动一个Analysis Services的本地实例(您又开始使用Analysis Services了！)在幕后存储您在解决方案中使用的数据—当然，假设您对数据使用导入模式。一旦完成，您将部署您的解决方案到Power BI服务——您可能会注意到两个工件被一起部署——报告和数据集。</p><h2 id="3f01" class="mu lx it bd ly mv mw dn mc mx my dp mg li mz na mi lm nb nc mk lq nd ne mm nf bi translated">Power BI数据集只不过是Analysis Services实例中的一个数据库！</h2><p id="dfa9" class="pw-post-body-paragraph kz la it lb b lc mo ju le lf mp jx lh li mq lk ll lm mr lo lp lq ms ls lt lu im bi translated">类似地，Power BI workspace就是一个Analysis Services实例，负责管理所有不同的数据库(Power BI数据集)。</p><h1 id="e54b" class="lw lx it bd ly lz ma mb mc md me mf mg jz mh ka mi kc mj kd mk kf ml kg mm mn bi translated">为什么XMLA端点可用性对Power BI很重要？</h1><p id="0706" class="pw-post-body-paragraph kz la it lb b lc mo ju le lf mp jx lh li mq lk ll lm mr lo lp lq ms ls lt lu im bi translated">好了，我们已经解释了什么是XMLA以及它与Power BI的关系。现在，让我们试着理解为什么拥有这个特性真的会改变游戏规则！</p><p id="5320" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在XMLA endpoint avail ability for Power BI解决方案出现之前，通常的开发流程如下所示:</p><p id="2ff0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">您在Power BI Desktop中创建一个解决方案，一旦完成，您就可以将其部署到服务中。如果必须应用一些更改，您应该在Power BI桌面中再次获取该文件，进行所需的更改，然后再次发布它。</p><p id="130e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">而且，在XMLA端点可用之前，这是一种“全有或全无”的方法——如果不重新处理整个数据集，就不可能更改一个表！但是，我们可以以某种方式接受这一点…但是，某些数据模型属性完全无法从Power BI桌面访问，并且没有办法改变它们的默认行为。</p><p id="22df" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在，让我们想象这样一个场景:您有一个巨大的Power BI报告，有20个表，您只需要对其中一个表进行微小的更改。通过利用XMLA端点，您可以只重新处理您修改过的表，而不是重新处理整个模型！</p><p id="e338" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在我向您展示如何做到这一点之前，需要提前完成Power BI租户的一些设置。首先，在编写的时候，<strong class="lb iu"> <em class="lv"> XMLA读/写需要某种高级许可</em> </strong>，要么是按容量，要么是按用户。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ng"><img src="../Images/c63a85421924d97768b2a5d028f226a4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*honhptc418Qbm2l7Iz5u9g.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><p id="ebc4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">启用后，我将获取我的高级工作区的连接字符串:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nh"><img src="../Images/2380e90335e5810ee0d8ce85b4f38068.png" data-original-src="https://miro.medium.com/v2/resize:fit:1370/format:webp/1*93n1CTwgaiSzvAPmcDKXyg.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><p id="42ac" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我现在将打开一个客户端工具，在这个例子中，我将使用表格编辑器2(免费版)，但你也可以使用SSMS，并获得相同的结果。一旦我连接到Analysis Services实例(不要忘记，Power BI工作区就是Analysis Services的实例)，我将能够选择一个我想要连接的数据库(Power BI数据集):</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ni"><img src="../Images/9ac19ac2d7747acc53a694b3c508bd77.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*MKiAY0s08rZ8dvSasMon2g.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><p id="c75c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我选第三个，叫测试。一旦连接到数据库，我就可以访问大量的属性，不仅仅是在模型级别，还可以在单个表级别。</p><p id="b913" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">假设我想在我的FactInternetSales表中创建一个新的度量，但是我不想处理整个数据模型，而只想处理我已经更改的表:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nj"><img src="../Images/c33aebb6387f16d270af1161c01b65e9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Rm1O0WHF86BEvj7C-Yd5PA.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><p id="8980" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">您可以选择不同的刷新模式。解释刷新模式超出了本文的范围，但是我建议您查看<a class="ae ky" href="https://docs.tabulareditor.com/onboarding/refresh-preview-query.html" rel="noopener ugc nofollow" target="_blank">表格编辑器文档</a>中的详细信息。这将只触发所选表的重新处理，而不是整个数据模型！</p><p id="c19e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">显然，通过能够使用脚本来细粒度地刷新数据，您甚至可以通过利用PowerShell、Azure函数等来进一步增强整个过程。</p><p id="fc4e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">想象一下这样的场景:您有一个包含大量历史数据的表，但您不想每次都刷新整个表。您可以将表分成多个分区(再次使用XMLA endpoint)，然后为最新的分区设置增量刷新，同时不再重新加载旧的分区！</p><h1 id="f739" class="lw lx it bd ly lz ma mb mc md me mf mg jz mh ka mi kc mj kd mk kf ml kg mm mn bi translated">何时使用XMLA端点？</h1><p id="c09b" class="pw-post-body-paragraph kz la it lb b lc mo ju le lf mp jx lh li mq lk ll lm mr lo lp lq ms ls lt lu im bi translated">说实话，可能性真的是无限的！除了我之前展示的在更细粒度级别进行处理的示例之外，您还可以使用XMLA端点来查询数据、添加新列或以编程方式修改现有列:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nj"><img src="../Images/33d00d014902a8a5fca67685a0026b25.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wO1JI3zJC1hz7Q_NuLf4Sw.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><p id="6121" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">您还可以切换Power BI报告的数据源，或者添加一个明确的数据源定义，如这里的<a class="ae ky" href="https://powerbi.microsoft.com/en-my/blog/using-xmla-endpoints-to-change-data-sources-in-a-power-bi-dataset/" rel="noopener ugc nofollow" target="_blank">所述</a>。</p><p id="cdfb" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">此外，您从表格编辑器执行的所有操作，比如定义<a class="ae ky" href="https://data-mozart.com/mastering-dp-500-exam-design-row-level-and-object-level-security-in-power-bi/" rel="noopener ugc nofollow" target="_blank">对象级安全</a>、<a class="ae ky" href="https://data-mozart.com/mastering-dp-500-exam-creating-calculation-groups/" rel="noopener ugc nofollow" target="_blank">计算组</a>，创建<a class="ae ky" href="https://medium.com/p/bfe07d480275" rel="noopener">分区</a>，透视图等。都是通过XMLA端点完成的！</p><p id="04dd" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">显然，可能性是无限的，可能可以写一整本书，涵盖使用XMLA端点和Power BI时所有可用的用例…</p><p id="9587" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu"> <em class="lv">重要提示:</em> </strong>请记住，一旦您通过XMLA端点进行了更改，并将Power BI解决方案的更新“版本”部署到服务中，您<strong class="lb iu">将无法再</strong>下载pbix文件！因此，请始终保留文件的备份版本，以防您需要应用一些额外的修改。</p><h1 id="7cf0" class="lw lx it bd ly lz ma mb mc md me mf mg jz mh ka mi kc mj kd mk kf ml kg mm mn bi translated">结论</h1><p id="ade3" class="pw-post-body-paragraph kz la it lb b lc mo ju le lf mp jx lh li mq lk ll lm mr lo lp lq ms ls lt lu im bi translated">在Power BI的发展过程中有许多“游戏规则改变者”。他们中有些人没有辜负他们的高期望，有些人没有。但是，如果你问我，为Power BI数据集启用XMLA endpoint可能是迄今为止改变游戏规则的三大因素之一！即使它(仍然)只是高级功能，即使它在部署修改版本后对pbix下载有严重限制，这仍然是赋予您根据您的需求定制Power BI数据集的巨大能力的功能之一。</p><p id="e7f9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">感谢阅读！</p><p id="c821" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><a class="ae ky" href="https://data-mozart.com/shop/" rel="noopener ugc nofollow" target="_blank">预订DP-500培训！</a></p><p id="6981" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><a class="ae ky" href="https://datamozart.medium.com/membership" rel="noopener">成为会员，阅读Medium上的每一个故事！</a></p></div></div>    
</body>
</html>