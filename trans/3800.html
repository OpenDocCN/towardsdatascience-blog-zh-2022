<html>
<head>
<title>Automate the Feature Engineering Pipeline for Your Relational Dataset</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">自动化关系数据集的要素工程管道</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/automate-the-feature-engineering-pipeline-for-your-relational-dataset-1908aba5610c#2022-08-23">https://towardsdatascience.com/automate-the-feature-engineering-pipeline-for-your-relational-dataset-1908aba5610c#2022-08-23</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="f496" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">面向自动化要素工程的开源Python框架基本指南</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/a1503773c358af39284cfaef1454291e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*b_mza7bj9YL5llpbobn8nA.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">图片由<a class="ae ky" href="https://pixabay.com/users/mohamed_hassan-5229782/?utm_source=link-attribution&amp;amp;utm_medium=referral&amp;amp;utm_campaign=image&amp;amp;utm_content=3559564" rel="noopener ugc nofollow" target="_blank">穆罕默德·哈桑</a>拍摄，来自<a class="ae ky" href="https://pixabay.com//?utm_source=link-attribution&amp;amp;utm_medium=referral&amp;amp;utm_campaign=image&amp;amp;utm_content=3559564" rel="noopener ugc nofollow" target="_blank">皮克斯拜</a></p></figure><p id="4b1d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">特征工程是数据科学模型开发流程中重要且耗时的组成部分。特征工程管道决定了模型的鲁棒性和性能。</p><p id="21ce" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">有各种自动化要素工程包可为单个数据集处理和创建要素。但是这些包不适用于涉及使用多个关系数据集的用例。合并多个关系数据集并从中计算要素是一项繁琐而耗时的任务。在本文中，我们将讨论一个开源包Featuretools，它可以通过几行Python代码从时态和关系数据集自动创建要素。</p><h1 id="abc6" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">功能工具:</h1><p id="b673" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">Featuretools是一个开源的python框架，用于为时态和关系数据集的预测建模用例自动化特征工程管道。Featuretools库 的一些<strong class="lb iu"> <em class="ms">关键特性有:</em></strong></p><ul class=""><li id="9ca4" class="mt mu it lb b lc ld lf lg li mv lm mw lq mx lu my mz na nb bi translated"><strong class="lb iu">深度特征合成:</strong> Featuretools包提供了DFS来从关系数据集中自动构建有意义的特征。</li><li id="264d" class="mt mu it lb b lc nc lf nd li ne lm nf lq ng lu my mz na nb bi translated"><strong class="lb iu">精确处理时间:</strong> Featuretools提供了API来确保只有有效的数据用于计算，使您的特征向量免受常见标签泄漏问题的影响。</li><li id="c276" class="mt mu it lb b lc nc lf nd li ne lm nf lq ng lu my mz na nb bi translated"><strong class="lb iu">可重复使用的特征基元:</strong>特征工具提供低级功能，可叠加创建特征。定制原语可以在任何数据集上构建和共享。</li></ul><p id="5514" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Featuretools软件包与其他流行的软件包兼容，如Pandas、NumPy和scikit-learn，并在很短的时间内创建有意义的功能。</p><blockquote class="nh ni nj"><p id="a87f" class="kz la ms lb b lc ld ju le lf lg jx lh nk lj lk ll nl ln lo lp nm lr ls lt lu im bi translated">你可以看看我以前的一篇关于自动化特征工程的文章:</p></blockquote><ul class=""><li id="f122" class="mt mu it lb b lc ld lf lg li mv lm mw lq mx lu my mz na nb bi translated"><a class="ae ky" href="https://medium.com/swlh/8-automl-libraries-to-automate-machine-learning-pipeline-3da0af08f636" rel="noopener">自动化机器学习管道的8个AutoML库</a></li><li id="7d34" class="mt mu it lb b lc nc lf nd li ne lm nf lq ng lu my mz na nb bi translated"><a class="ae ky" rel="noopener" target="_blank" href="/automate-time-series-feature-engineering-in-a-few-lines-of-python-code-f28fe52e4704">用几行Python代码实现时间序列特征工程的自动化</a></li></ul><h1 id="5d4b" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">实施:</h1><p id="440b" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">可以使用<code class="fe nn no np nq b"><strong class="lb iu">pip install featuretools</strong></code> <strong class="lb iu"> </strong>从PyPI安装Featuretools库。</p><h2 id="d79d" class="nr lw it bd lx ns nt dn mb nu nv dp mf li nw nx mh lm ny nz mj lq oa ob ml oc bi translated">读取数据集:</h2><p id="d6e8" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">我们将使用一个模拟样本关系数据集，该数据集具有<strong class="lb iu">事务</strong>、<strong class="lb iu">会话</strong>和<strong class="lb iu">客户</strong>表。可以使用featuretools <code class="fe nn no np nq b"><strong class="lb iu">load_mock_customer()</strong></code>函数生成模拟数据集。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="od oe l"/></div></figure><p id="0fed" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">上述数据集之间的关系是:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi of"><img src="../Images/539b9745399f4ec5968f000ec5921b5b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6F48FPFml3IgKZxDC4Q5UA.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">(图片由作者提供)，关系表之间的关系</p></figure><h2 id="c4c4" class="nr lw it bd lx ns nt dn mb nu nv dp mf li nw nx mh lm ny nz mj lq oa ob ml oc bi translated">指定关系:</h2><ul class=""><li id="a63b" class="mt mu it lb b lc mn lf mo li og lm oh lq oi lu my mz na nb bi translated">首先，我们用数据集中的所有实体指定一个字典(第1-5行)。</li><li id="b5a2" class="mt mu it lb b lc nc lf nd li ne lm nf lq ng lu my mz na nb bi translated">其次，我们指定实体是如何关联的(第7-10行)。当两个实体具有一对多关系时，我们将“一”实体称为“父”实体，其余的实体称为子实体。父子关系定义为:<code class="fe nn no np nq b"><strong class="lb iu"><em class="ms">( parent_table, parent_key, child_table, link_key )</em></strong></code> <strong class="lb iu"> <em class="ms"> </em> </strong>为元组列表。</li></ul><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="od oe l"/></div></figure><h2 id="1502" class="nr lw it bd lx ns nt dn mb nu nv dp mf li nw nx mh lm ny nz mj lq oa ob ml oc bi translated">生成要素:</h2><p id="dbff" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">Featuretools包提供了<code class="fe nn no np nq b"><strong class="lb iu">dfs()</strong></code>功能，可以使用深度特征合成生成相关特征。深度特征合成(DFS)是一种对关系数据和时态数据执行特征工程的自动化方法。</p><p id="acbd" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">通常，如果没有featuretools，数据科学家将编写代码来为客户汇总数据，并应用不同的统计函数来生成量化客户行为的功能。但是DFS算法可以通过指定<code class="fe nn no np nq b">target_dataframe_name="customers"</code>来生成这些特征，其中‘客户’是集合所有数据的数据集。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="od oe l"/></div></figure><p id="9e83" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在调用<code class="fe nn no np nq b"><strong class="lb iu">dfs()</strong></code>函数时，它会在短时间内返回特征工程矩阵和特征描述。通过提供上述3个关系数据集并聚合客户数据，我们得到75个聚合特征。</p><h2 id="f973" class="nr lw it bd lx ns nt dn mb nu nv dp mf li nw nx mh lm ny nz mj lq oa ob ml oc bi translated">结果:</h2><p id="5e4d" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">75个自动生成特征的描述可以从下面的快照中观察到:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oj"><img src="../Images/f4954e8b7924cec8eebd9643b019c6cc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*791B_8jgOHKYnXvlwhN78g.gif"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">(GIF by Author)，功能工具生成的功能上的功能描述</p></figure></div><div class="ab cl ok ol hx om" role="separator"><span class="on bw bk oo op oq"/><span class="on bw bk oo op oq"/><span class="on bw bk oo op"/></div><div class="im in io ip iq"><h1 id="1a37" class="lv lw it bd lx ly or ma mb mc os me mf jz ot ka mh kc ou kd mj kf ov kg ml mm bi translated">结论:</h1><p id="97b6" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">在处理涉及关系数据集的用例时，数据科学家必须手动聚合数据，并使用不同的统计技术创建要素。Featuretools是一个方便的包，能够从多个表中优雅地提取要素，并将它们聚合到一个最终的数据集中。这为数据科学家节省了大量的时间和精力，他们可以花更多的时间来执行一些高级的功能工程。</p><h1 id="de45" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">参考资料:</h1><p id="174c" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">[1]功能工具文档:<a class="ae ky" href="https://www.featuretools.com/" rel="noopener ugc nofollow" target="_blank">https://www.featuretools.com/</a></p><blockquote class="ow"><p id="dbd5" class="ox oy it bd oz pa pb pc pd pe pf lu dk translated">感谢您的阅读</p></blockquote></div></div>    
</body>
</html>