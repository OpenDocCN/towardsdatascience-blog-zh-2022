<html>
<head>
<title>Python Project Template for A Quick Setup</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用于快速设置的Python项目模板</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/python-project-template-for-a-quick-setup-d3ba1821e853#2022-05-18">https://towardsdatascience.com/python-project-template-for-a-quick-setup-d3ba1821e853#2022-05-18</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="5e13" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">分享一个python模板，它帮助我加速了使用FastAPI和pydantic的开发设置</h2></div><p id="317c" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在过去的几个月里，我发现自己需要为面试任务建立一个快速的python环境。在工作中，我通常有可以从其他项目中导入的模板，在那里我删除了不必要的逻辑并开始工作。我发现从头开始设置环境比我预期的要花更长的时间，而寻找不是针对初学者或小项目的文档甚至要花更长的时间。</p><p id="36bb" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我创建了一个模板并上传到GitHub，你可以在这里得到它<a class="ae lb" href="https://github.com/MirYeh/PythonTemplate" rel="noopener ugc nofollow" target="_blank">。</a></p><figure class="ld le lf lg gt lh gh gi paragraph-image"><div role="button" tabindex="0" class="li lj di lk bf ll"><div class="gh gi lc"><img src="../Images/b311feaf7779847f38dfebb41c379953.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*AGtTUoEs7v1lquNIfshTnA.png"/></div></div><p class="lo lp gj gh gi lq lr bd b be z dk translated">创建于<a class="ae lb" href="http://excalidraw.com" rel="noopener ugc nofollow" target="_blank"> ExcaliDraw </a></p></figure><h1 id="74fa" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">TL；速度三角形定位法(dead reckoning)</h1><ul class=""><li id="7842" class="mk ml iq kh b ki mm kl mn ko mo ks mp kw mq la mr ms mt mu bi translated">建立一个虚拟环境。</li><li id="c4e9" class="mk ml iq kh b ki mv kl mw ko mx ks my kw mz la mr ms mt mu bi translated">定义API。</li><li id="0224" class="mk ml iq kh b ki mv kl mw ko mx ks my kw mz la mr ms mt mu bi translated">使用FastAPI公开它。</li></ul><h1 id="c997" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">虚拟环境</h1><p id="a3e9" class="pw-post-body-paragraph kf kg iq kh b ki mm jr kk kl mn ju kn ko na kq kr ks nb ku kv kw nc ky kz la ij bi translated">设置虚拟环境对于保持项目依赖关系与其他项目分离非常重要。这样，我们可以创建一个稳定、可靠且易于在团队成员之间复制的项目环境。</p><p id="89ee" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">为了设置虚拟环境，我将带你去<a class="nd ne ep" href="https://medium.com/u/faecd39bdbb4?source=post_page-----d3ba1821e853--------------------------------" rel="noopener" target="_blank"> Daniela Brailovsky </a>的<a class="ae lb" href="https://medium.com/@dbrailo/virtual-environments-in-python-2773ac8dd9ae" rel="noopener">关于Python中的虚拟环境的博客文章</a>。</p><figure class="ld le lf lg gt lh gh gi paragraph-image"><div role="button" tabindex="0" class="li lj di lk bf ll"><div class="gh gi nf"><img src="../Images/a283c7e7d20fb7873d0736737436aa25.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bQE-IzEWHrJEBmstLKmqEA.png"/></div></div><p class="lo lp gj gh gi lq lr bd b be z dk translated">Daniela Brailovsky用Python写的关于venvs的博客——3分钟阅读</p></figure><h1 id="af4c" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">模板概述</h1><p id="64de" class="pw-post-body-paragraph kf kg iq kh b ki mm jr kk kl mn ju kn ko na kq kr ks nb ku kv kw nc ky kz la ij bi translated">对于这个例子，我创建了一个名为<code class="fe ng nh ni nj b">PythonTemplate</code>的项目，它包含几个文件，比如入口点<code class="fe ng nh ni nj b">main.py</code>文件和需求文件。需要注意两个主要目录— <code class="fe ng nh ni nj b">template</code>包含代码(除了入口点之外的所有内容)和<code class="fe ng nh ni nj b">tests</code>包含测试代码的代码:</p><figure class="ld le lf lg gt lh gh gi paragraph-image"><div class="gh gi nk"><img src="../Images/babca17c35b1993b46ba30c39bfabaa5.png" data-original-src="https://miro.medium.com/v2/resize:fit:462/format:webp/1*fM60aEsPYeYGGFUtDga8Cg.png"/></div><p class="lo lp gj gh gi lq lr bd b be z dk translated">建议的项目结构</p></figure><p id="2dc9" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">为了简单起见，我创建了一个接收用户的HTTP POST请求并输出问候的项目。</p><p id="e4f7" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">输入—包含用户名的JSON结构:</p><pre class="ld le lf lg gt nl nj nm nn aw no bi"><span id="813d" class="np lt iq nj b gy nq nr l ns nt">curl -X 'POST' \<br/>  'http://127.0.0.1:8000/users/' \<br/>  -H 'accept: application/json' \<br/>  -H 'Content-Type: application/json' \<br/>  -d '{<br/>  "name": "Miri"<br/>}'</span></pre><p id="3b80" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">输出—问候:</p><pre class="ld le lf lg gt nl nj nm nn aw no bi"><span id="e516" class="np lt iq nj b gy nq nr l ns nt">"Hey Miri!"</span></pre><p id="d79a" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">正如您在FastAPI UI中看到的:</p><figure class="ld le lf lg gt lh gh gi paragraph-image"><div role="button" tabindex="0" class="li lj di lk bf ll"><div class="gh gi nu"><img src="../Images/a6cdf47c68d131e6178a591affe3dee5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*tynpMgq6K6X1Dg6eyeO5NA.png"/></div></div><p class="lo lp gj gh gi lq lr bd b be z dk translated">预期的输入和输出</p></figure><p id="5e54" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">现在您已经看到了它应该是什么样子，让我们来看一下模板！我们将从业务逻辑开始。</p><h1 id="43e7" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">Python项目模板</h1><h2 id="1e06" class="np lt iq bd lu nv nw dn ly nx ny dp mc ko nz oa me ks ob oc mg kw od oe mi of bi translated">商业逻辑</h2><ul class=""><li id="cb97" class="mk ml iq kh b ki mm kl mn ko mo ks mp kw mq la mr ms mt mu bi translated">在<code class="fe ng nh ni nj b">template.models.user</code>下创建一个用户模型类。因为我使用的是FastAPI，所以我将使用<code class="fe ng nh ni nj b"><a class="ae lb" href="https://pydantic-docs.helpmanual.io/usage/models/" rel="noopener ugc nofollow" target="_blank">pydantic.BaseModel</a></code>来表示这个类:</li></ul><figure class="ld le lf lg gt lh"><div class="bz fp l di"><div class="og oh l"/></div></figure><ul class=""><li id="e161" class="mk ml iq kh b ki kj kl km ko oi ks oj kw ok la mr ms mt mu bi translated">在<code class="fe ng nh ni nj b">template.logic.user_service</code>下创建一个服务类:</li></ul><figure class="ld le lf lg gt lh"><div class="bz fp l di"><div class="og oh l"/></div></figure><p id="5481" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">现在我们有了一些逻辑，让我们看看如何使用FastAPI来公开这个逻辑。</p><h2 id="900b" class="np lt iq bd lu nv nw dn ly nx ny dp mc ko nz oa me ks ob oc mg kw od oe mi of bi translated">暴露逻辑</h2><p id="d26a" class="pw-post-body-paragraph kf kg iq kh b ki mm jr kk kl mn ju kn ko na kq kr ks nb ku kv kw nc ky kz la ij bi translated">在<code class="fe ng nh ni nj b">template.ctrls.users</code>目录下创建一个控制器模块。<br/>在这个模块中，我们调用我们的逻辑，并使用<a class="ae lb" href="https://fastapi.tiangolo.com/tutorial/bigger-applications/" rel="noopener ugc nofollow" target="_blank"> APIRouter </a>通过FastAPI的路由公开它:</p><figure class="ld le lf lg gt lh"><div class="bz fp l di"><div class="og oh l"/></div></figure><p id="56e2" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如您所见，公开控制器逻辑需要3行代码——导入<code class="fe ng nh ni nj b">fastapi.APIRouter</code>,用路径前缀创建“用户”<code class="fe ng nh ni nj b">APIRouter</code>,并用路由器和HTTP方法注释您想要公开的函数！</p><figure class="ld le lf lg gt lh gh gi paragraph-image"><div class="gh gi ol"><img src="../Images/54852ddb1fab906b42ef6224a60fa67c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/1*1fA981E94VhYokZVYNg98Q.gif"/></div><p class="lo lp gj gh gi lq lr bd b be z dk translated">控制器逻辑&amp;通过FastAPI公开</p></figure><p id="ad11" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这是我们创建的<code class="fe ng nh ni nj b">template</code>目录结构:</p><figure class="ld le lf lg gt lh gh gi paragraph-image"><div class="gh gi om"><img src="../Images/c0877d6b47081fee72c6baa9d111927e.png" data-original-src="https://miro.medium.com/v2/resize:fit:502/format:webp/1*dhAfrX0iTpH-XgdMvi2iKA.png"/></div><p class="lo lp gj gh gi lq lr bd b be z dk translated">模板目录结构</p></figure><p id="564a" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">现在让我们转移到<code class="fe ng nh ni nj b">main.py</code>入口点。</p><h2 id="3b5b" class="np lt iq bd lu nv nw dn ly nx ny dp mc ko nz oa me ks ob oc mg kw od oe mi of bi translated">服务器端入口点</h2><p id="59d5" class="pw-post-body-paragraph kf kg iq kh b ki mm jr kk kl mn ju kn ko na kq kr ks nb ku kv kw nc ky kz la ij bi translated">在main中，我们创建我们的FastAPI应用程序，添加我们的<code class="fe ng nh ni nj b">users</code>路由，并使用<code class="fe ng nh ni nj b"><a class="ae lb" href="https://www.uvicorn.org/#:~:text=from%20your%20application...-,example.py,-%3A" rel="noopener ugc nofollow" target="_blank">uvicorn</a></code>运行它:</p><figure class="ld le lf lg gt lh"><div class="bz fp l di"><div class="og oh l"/></div></figure><p id="240e" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">通过<a class="ae lb" href="http://127.0.0.1:8000/docs" rel="noopener ugc nofollow" target="_blank">本地服务器</a>试用您的应用程序！</p><figure class="ld le lf lg gt lh gh gi paragraph-image"><div role="button" tabindex="0" class="li lj di lk bf ll"><div class="gh gi on"><img src="../Images/a9c603cfabf9215e5f433fb7b4e583fb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*KW73Bc2IoFEt6lOSuJvbNg.gif"/></div></div><p class="lo lp gj gh gi lq lr bd b be z dk translated">实际应用</p></figure><p id="25b3" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">就这样——你收到了来自你的应用程序的问候！</p><p id="fb1b" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">使用模板时不要忘记添加测试！</p></div><div class="ab cl oo op hu oq" role="separator"><span class="or bw bk os ot ou"/><span class="or bw bk os ot ou"/><span class="or bw bk os ot"/></div><div class="ij ik il im in"><p id="ee3a" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">本文中的gif是使用<a class="ae lb" href="https://www.tomshardware.com/how-to/screen-record-in-windows" rel="noopener ugc nofollow" target="_blank"> Windows屏幕捕捉功能</a>、<a class="ae lb" href="https://ezgif.com/video-to-gif" rel="noopener ugc nofollow" target="_blank"> ezgif </a>裁剪视频和<a class="ae lb" href="https://www.xconvert.com/convert-video-to-gif" rel="noopener ugc nofollow" target="_blank"> xconvert </a>将视频转换为gif创建的。</p><p id="619d" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">特别感谢<a class="nd ne ep" href="https://medium.com/u/3f4ff048c2b7?source=post_page-----d3ba1821e853--------------------------------" rel="noopener" target="_blank">埃拉·谢尔</a>、<a class="nd ne ep" href="https://medium.com/u/c9af24f665e5?source=post_page-----d3ba1821e853--------------------------------" rel="noopener" target="_blank">丽娅·科恩</a>和<a class="nd ne ep" href="https://medium.com/u/ce7969d594d?source=post_page-----d3ba1821e853--------------------------------" rel="noopener" target="_blank">娜奥米·克里格</a>，他们帮助改进了这篇文章！</p></div></div>    
</body>
</html>