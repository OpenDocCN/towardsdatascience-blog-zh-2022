<html>
<head>
<title>The Quick and Easy Guide to Create Word Clouds in Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用Python创建单词云的快速简单指南</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/the-quick-and-easy-guide-to-create-wordclouds-in-python-7a81813e4cd5#2022-05-09">https://towardsdatascience.com/the-quick-and-easy-guide-to-create-wordclouds-in-python-7a81813e4cd5#2022-05-09</a></blockquote><div><div class="fc ii ij ik il im"/><div class="in io ip iq ir"><div class=""/><div class=""><h2 id="8505" class="pw-subtitle-paragraph jr it iu bd b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki dk translated">创建不同形状的单词云以更好地传达信息</h2></div><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj kj"><img src="../Images/6738ce80c5e498a21926cacda27c7ceb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fHyvxYGTwFNaUuxB0q_8BA.jpeg"/></div></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">照片由<a class="ae kz" href="https://www.pexels.com/" rel="noopener ugc nofollow" target="_blank">像素</a>的<a class="ae kz" href="https://www.pexels.com/photo/person-in-purple-crew-neck-t-shirt-with-just-me-painting-on-hand-52986/" rel="noopener ugc nofollow" target="_blank">皮克斯拜</a>拍摄</p></figure><p id="64ee" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">文字云是一种可视化文本数据的好方法。python使创建一个变得很容易。在本帖中，我们将回顾一个使用Wordcloud库生成单词云的例子。</p><p id="91ff" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">如果你不知道它是什么，单词云可以可视化单词在给定文本中出现的频率。一个词出现的次数越多，它在词云中的比重就会越大。</p><p id="6665" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">词云对于从评论中发现客户情绪非常有用。此外，一些网站使用文字云来显示网站上最受欢迎的话题。</p><p id="de83" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">你可以使用<a class="ae kz" href="https://monkeylearn.com/word-cloud/" rel="noopener ugc nofollow" target="_blank"> Monkeylearn单词云生成器工具</a>进行离线用例。但是你经常不得不动态地或者大批量地生成单词云。</p><p id="420a" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">所以，让我们开始吧！</p><h1 id="2739" class="lw lx iu bd ly lz ma mb mc md me mf mg ka mh kb mi kd mj ke mk kg ml kh mm mn bi translated">1.安装Wordcloud库</h1><p id="99a7" class="pw-post-body-paragraph la lb iu lc b ld mo jv lf lg mp jy li lj mq ll lm ln mr lp lq lr ms lt lu lv in bi translated">Wordcloud是一个免费的开源Python库。截止到写这篇帖子，<a class="ae kz" href="https://github.com/amueller/word_cloud" rel="noopener ugc nofollow" target="_blank"> Wordcloud的GitHub repo </a>有8.7k星，2.2k叉，62人投稿。</p><p id="1908" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">你可以从PyPI安装Wordcloud库。</p><pre class="kk kl km kn gu mt mu mv mw aw mx bi"><span id="cb84" class="my lx iu mu b gz mz na l nb nc">pip install wordcloud</span></pre><p id="3242" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">如果您使用<a class="ae kz" href="https://www.the-analytics.club/virtualenv-alternative-for-python-dependency-management" rel="noopener ugc nofollow" target="_blank">poem来管理Python包</a>，您可以使用下面的命令。</p><div class="nd ne gq gs nf ng"><a rel="noopener follow" target="_blank" href="/poetry-to-complement-virtualenv-44088cc78fd1"><div class="nh ab fp"><div class="ni ab nj cl cj nk"><h2 class="bd iv gz z fq nl fs ft nm fv fx it bi translated">你不会还在用Virtualenv吧？</h2><div class="nn l"><h3 class="bd b gz z fq nl fs ft nm fv fx dk translated">有一种更好的方法来管理依赖项、打包和发布Python项目。</h3></div><div class="no l"><p class="bd b dl z fq nl fs ft nm fv fx dk translated">towardsdatascience.com</p></div></div><div class="np l"><div class="nq l nr ns nt np nu kt ng"/></div></div></a></div><pre class="kk kl km kn gu mt mu mv mw aw mx bi"><span id="49ed" class="my lx iu mu b gz mz na l nb nc">poetry add wordcloud</span></pre><h1 id="3871" class="lw lx iu bd ly lz ma mb mc md me mf mg ka mh kb mi kd mj ke mk kg ml kh mm mn bi translated">2.加载数据</h1><p id="19c5" class="pw-post-body-paragraph la lb iu lc b ld mo jv lf lg mp jy li lj mq ll lm ln mr lp lq lr ms lt lu lv in bi translated">对于本教程，我们将使用以下文本。</p><blockquote class="nv nw nx"><p id="b143" class="la lb ny lc b ld le jv lf lg lh jy li nz lk ll lm oa lo lp lq ob ls lt lu lv in bi translated"><em class="iu">“Python是一种广泛用于通用编程的高级解释语言。由吉多·范·罗苏姆创建并于1991年首次发布的Python拥有一种强调代码可读性的设计理念，特别是使用了大量的空白。它提供了能够在小规模和大规模上实现清晰编程的结构。”</em></p></blockquote><p id="8455" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">您可以在Python中将它设置为一个变量，如下所示。</p><pre class="kk kl km kn gu mt mu mv mw aw mx bi"><span id="a0db" class="my lx iu mu b gz mz na l nb nc">text = """ Python is a widely used high-level interpreted language for general-purpose programming. Created by Guido van Rossum and first released in 1991, Python has a design philosophy that emphasizes code readability, notably using significant whitespace. It provides constructs that enable clear programming on both small and large scales. """</span></pre><p id="a7d5" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">但是，您可能需要加载比这多得多的数据。例如，如果您有一个评论数据集，您必须以不同的方式加载它们。</p><div class="nd ne gq gs nf ng"><a rel="noopener follow" target="_blank" href="/summarize-pandas-data-frames-b9770567f940"><div class="nh ab fp"><div class="ni ab nj cl cj nk"><h2 class="bd iv gz z fq nl fs ft nm fv fx it bi translated">总结熊猫数据的更好方法。</h2><div class="nn l"><h3 class="bd b gz z fq nl fs ft nm fv fx dk translated">Skimpy使得在笔记本和终端上汇总数据集变得非常容易。</h3></div><div class="no l"><p class="bd b dl z fq nl fs ft nm fv fx dk translated">towardsdatascience.com</p></div></div><div class="np l"><div class="oc l nr ns nt np nu kt ng"/></div></div></a></div><p id="7707" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">你可以从<a class="ae kz" href="https://pandas.pydata.org/docs/reference/api/pandas.DataFrame.html" rel="noopener ugc nofollow" target="_blank">熊猫数据框</a>中创建单词云。以下代码通过以下方式准备一个合并的审阅文本</p><ul class=""><li id="a3ab" class="od oe iu lc b ld le lg lh lj of ln og lr oh lv oi oj ok ol bi translated">从CSV读取熊猫数据帧；</li><li id="fa68" class="od oe iu lc b ld om lg on lj oo ln op lr oq lv oi oj ok ol bi translated">加入所有用户评论；</li><li id="c6d1" class="od oe iu lc b ld om lg on lj oo ln op lr oq lv oi oj ok ol bi translated">将它赋给一个新变量“text”</li></ul><pre class="kk kl km kn gu mt mu mv mw aw mx bi"><span id="df66" class="my lx iu mu b gz mz na l nb nc">text = pd.read_csv("data.csv").Reviews.str.cat()</span></pre><p id="ef99" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">如果你没有熊猫数据框架，你也可以从文件中读取文本。</p><pre class="kk kl km kn gu mt mu mv mw aw mx bi"><span id="f418" class="my lx iu mu b gz mz na l nb nc">with open("data.txt", "r") as file: <br/>    text = file.read()</span></pre><p id="c2ef" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">无论哪种方式，你都应该得到一串文本。</p><h1 id="4061" class="lw lx iu bd ly lz ma mb mc md me mf mg ka mh kb mi kd mj ke mk kg ml kh mm mn bi translated">3.生成单词云</h1><p id="ce13" class="pw-post-body-paragraph la lb iu lc b ld mo jv lf lg mp jy li lj mq ll lm ln mr lp lq lr ms lt lu lv in bi translated">现在我们已经加载了文本数据，让我们继续创建单词云。</p><p id="ada1" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">使用单词云库创建单词云很容易。下面的代码将从我们之前加载的文本中创建一个单词云。</p><pre class="kk kl km kn gu mt mu mv mw aw mx bi"><span id="b676" class="my lx iu mu b gz mz na l nb nc">from wordcloud import WordCloud <br/>import matplotlib.pyplot as plt <br/>% matplotlib inline </span><span id="09b7" class="my lx iu mu b gz or na l nb nc">wordcloud = WordCloud().generate(text)</span><span id="aac0" class="my lx iu mu b gz or na l nb nc">plt.imshow(wordcloud, interpolation='bilinear')</span><span id="692e" class="my lx iu mu b gz or na l nb nc">plt.axis("off")</span></pre><p id="bbac" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">首先，我们从单词云库中导入<code class="fe os ot ou mu b">WordCloud</code>类。然后，我们也导入<code class="fe os ot ou mu b">matplotlib</code>。我们使用<code class="fe os ot ou mu b">%matplotlib inline</code>魔法命令，让单词cloud出现在笔记本中。</p><p id="9be3" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">然后，我们创建一个WordCloud实例，并使用文本变量生成word cloud。</p><p id="d98d" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">最后，我们使用<code class="fe os ot ou mu b">plt.imshow()</code>函数来显示单词cloud。使用默认设置显示单词cloud。</p><figure class="kk kl km kn gu ko gi gj paragraph-image"><div class="gi gj ov"><img src="../Images/19f6c8f5998a38381cd062643ca79fda.png" data-original-src="https://miro.medium.com/v2/resize:fit:698/0*rhfRqMezCFc9l2GL"/></div></figure><p id="c3d6" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">如果要更改单词云的外观，可以使用不同的设置。例如，您可以更改背景颜色、最大字数、最大字体大小等。</p><p id="4fc8" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">下面的代码演示了如何将背景色改为#e2e1eb，将max_words改为10。</p><pre class="kk kl km kn gu mt mu mv mw aw mx bi"><span id="4c0f" class="my lx iu mu b gz mz na l nb nc">wordcloud = WordCloud(<br/>    background_color="#e2e1eb", <br/>    max_words=10).generate(text) </span><span id="f3d8" class="my lx iu mu b gz or na l nb nc">plt.imshow(wordcloud, interpolation='bilinear') <br/>plt.axis("off")</span></pre><p id="3a4d" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">正如你所看到的，单词cloud在这些设置下看起来是不同的。摆弄设置来得到你想要的单词云。</p><h1 id="7bfa" class="lw lx iu bd ly lz ma mb mc md me mf mg ka mh kb mi kd mj ke mk kg ml kh mm mn bi translated">在形状中创建单词云</h1><p id="9cec" class="pw-post-body-paragraph la lb iu lc b ld mo jv lf lg mp jy li lj mq ll lm ln mr lp lq lr ms lt lu lv in bi translated">你可以通过创造单词云来发挥创造力。您可以将遮罩选项设置为图像，以获得按形状创建的单词云。蒙版图像应该在白色背景上有一个黑色对象。下面是我们如何把单词云做成心形的。</p><pre class="kk kl km kn gu mt mu mv mw aw mx bi"><span id="6654" class="my lx iu mu b gz mz na l nb nc">from PIL import Image <br/>import numpy as np </span><span id="b7c4" class="my lx iu mu b gz or na l nb nc">mask_img = np.array(Image.open("./Untitled design.png"))</span><span id="0b27" class="my lx iu mu b gz or na l nb nc">wordcloud = WordCloud(<br/>    background_color="#e2e1eb", <br/>    max_words=100, mask=mask_img<br/>).generate(text)</span></pre><p id="13cc" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">上面的代码将产生下面的图像。</p><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj ow"><img src="../Images/9a066ac9c3309ba7df765abb98a9a17d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*WZ3y88nTz8V2BEai"/></div></div></figure><h1 id="06d0" class="lw lx iu bd ly lz ma mb mc md me mf mg ka mh kb mi kd mj ke mk kg ml kh mm mn bi translated">结论</h1><p id="2101" class="pw-post-body-paragraph la lb iu lc b ld mo jv lf lg mp jy li lj mq ll lm ln mr lp lq lr ms lt lu lv in bi translated">单词云是一种很好的交流热门话题的方式。</p><p id="7815" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">我们已经简要讨论了如何使用Python创建单词云并将其导出为PNG。我们还制作了不同形状的单词云。</p><p id="a940" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">下面是完整的代码。</p><pre class="kk kl km kn gu mt mu mv mw aw mx bi"><span id="5333" class="my lx iu mu b gz mz na l nb nc">import pandas as pd<br/>from wordcloud import WordCloud<br/><br/>import matplotlib.pyplot as plt<br/>% matplotlib inline<br/><br/>text = """<br/>Python is a widely used high-level interpreted language for general-purpose programming. Created by Guido van Rossum and first released in 1991, Python has a design philosophy that emphasizes code readability, notably using significant whitespace. It provides constructs that enable clear programming on both small and large scales.<br/>"""<br/><br/># Read and convert an mask image. It should have a white (not transparent) background with a black object.<br/>mask_img = np.array(Image.open("./heart.png"))<br/><br/>#<br/>wordcloud = WordCloud(background_color="#e2e1eb", max_words=100, mask=mask_img).generate(text)<br/><br/># store to file<br/>wordcloud.to_file("wc.png")<br/><br/># Show the image<br/>plt.imshow(wordcloud, interpolation='bilinear')<br/>plt.axis("off")</span></pre></div><div class="ab cl ox oy hy oz" role="separator"><span class="pa bw bk pb pc pd"/><span class="pa bw bk pb pc pd"/><span class="pa bw bk pb pc"/></div><div class="in io ip iq ir"><blockquote class="nv nw nx"><p id="24b0" class="la lb ny lc b ld le jv lf lg lh jy li nz lk ll lm oa lo lp lq ob ls lt lu lv in bi translated">感谢阅读，朋友！看来你和我有许多共同的兴趣。我很乐意在<a class="ae kz" href="https://www.linkedin.com/in/thuwarakesh/" rel="noopener ugc nofollow" target="_blank"> <strong class="lc iv">【领英】</strong></a><a class="ae kz" href="https://twitter.com/Thuwarakesh" rel="noopener ugc nofollow" target="_blank"><strong class="lc iv">推特</strong> </a>和<a class="ae kz" href="https://thuwarakesh.medium.com" rel="noopener"> <strong class="lc iv">媒体</strong> </a>上与你联系</p><p id="dfba" class="la lb ny lc b ld le jv lf lg lh jy li nz lk ll lm oa lo lp lq ob ls lt lu lv in bi translated">还不是中等会员？请使用此链接<a class="ae kz" href="https://thuwarakesh.medium.com/membership" rel="noopener"> <strong class="lc iv">成为会员</strong> </a>因为，不需要你额外付费，我为你引荐赚取一小笔佣金。</p></blockquote></div></div>    
</body>
</html>