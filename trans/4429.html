<html>
<head>
<title>How To Get The Current Time In Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在Python中获取当前时间</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/current-time-python-4417c0f3bc4f#2022-09-30">https://towardsdatascience.com/current-time-python-4417c0f3bc4f#2022-09-30</a></blockquote><div><div class="fc ii ij ik il im"/><div class="in io ip iq ir"><div class=""/><div class=""><h2 id="ba06" class="pw-subtitle-paragraph jr it iu bd b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki dk translated">使用Python以编程方式计算当前日期和时间</h2></div><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj kj"><img src="../Images/23dac43a96b5fed6dd5a39ca747b1182.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*p-G9wxh7WNBClcTn0YTsvw.jpeg"/></div></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">照片由<a class="ae kz" href="https://unsplash.com/@loic?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Djim Loic </a>在<a class="ae kz" href="https://unsplash.com/s/photos/time?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</p></figure><p id="76ab" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">如果你已经编程了一段时间，我敢肯定你遇到过必须处理日期(时间)和时间戳的用例。</p><p id="2df2" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">当使用这样的结构时，确保使用<strong class="lc iv">时区敏感的</strong>对象是非常重要的。在生产环境中，为了完成某项任务，全球范围内许多不同的服务相互连接是很常见的。这意味着我们——作为程序员——需要确保避免时区无关的构造，这些构造可能会引入不必要的错误。</p><p id="5bb5" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">在接下来的几节中，我们将介绍几种不同的方法，您可以遵循这些方法以编程方式在Python中计算当前时间。</p><p id="7012" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">更具体地说，我们将演示如何使用<code class="fe lw lx ly lz b">datetime</code>和<code class="fe lw lx ly lz b">time</code>模块推断当前日期和/或时间以及时间戳。此外，我们将讨论如何将日期时间作为字符串处理，以及如何考虑时区。</p></div><div class="ab cl ma mb hy mc" role="separator"><span class="md bw bk me mf mg"/><span class="md bw bk me mf mg"/><span class="md bw bk me mf"/></div><div class="in io ip iq ir"><h2 id="59d2" class="mh mi iu bd mj mk ml dn mm mn mo dp mp lj mq mr ms ln mt mu mv lr mw mx my mz bi translated">如何用Python计算当前时间</h2><p id="10c6" class="pw-post-body-paragraph la lb iu lc b ld na jv lf lg nb jy li lj nc ll lm ln nd lp lq lr ne lt lu lv in bi translated">现在为了以编程方式推断Python中的当前日期时间，我们可以使用如下概述的<code class="fe lw lx ly lz b">datetime</code>模块:</p><pre class="kk kl km kn gu nf lz ng nh aw ni bi"><span id="0695" class="mh mi iu lz b gz nj nk l nl nm">&gt;&gt;&gt; from datetime import datetime<br/>&gt;&gt;&gt;<br/>&gt;&gt;&gt; now = datetime.now()<br/>&gt;&gt;&gt; now<br/>datetime.datetime(2022, 9, 30, 16, 34, 24, 88687)</span></pre><p id="dcbd" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">上面的表达式将返回一个类型为<code class="fe lw lx ly lz b">datetime.datetime</code>的对象。如果您想以更直观、更易读的格式打印日期时间，您需要做的就是将它转换为<code class="fe lw lx ly lz b">str</code>(例如<code class="fe lw lx ly lz b">str(now)</code>)或者调用<code class="fe lw lx ly lz b">strftime()</code>来指定您希望新字符串对象具有的确切字符串格式。</p><p id="9fb0" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">例如，假设我们希望只保留日期时间中的日期部分，而放弃时间信息。以下内容应该可以解决问题:</p><pre class="kk kl km kn gu nf lz ng nh aw ni bi"><span id="a615" class="mh mi iu lz b gz nj nk l nl nm">&gt;&gt;&gt; now_dt = now.strftime('%d-%m-%Y')<br/>&gt;&gt;&gt; now_dt<br/>'30-09-2022'</span></pre><p id="4390" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">类似地，如果您想只保留datetime对象的时间部分，您可以使用<code class="fe lw lx ly lz b">time()</code>方法:</p><pre class="kk kl km kn gu nf lz ng nh aw ni bi"><span id="1f74" class="mh mi iu lz b gz nj nk l nl nm">&gt;&gt;&gt; from datetime import datetime<br/>&gt;&gt;&gt; now_time = datetime.now().time()<br/>&gt;&gt;&gt; now_time<br/>datetime.time(16, 43, 12, 192517)</span></pre><p id="b5af" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">同样，我们可以将上面的datetime对象格式化为一个字符串。如果我们想要丢弃毫秒记录部分，只保留小时、分钟和秒，那么下面的表达式就可以满足我们的要求:</p><pre class="kk kl km kn gu nf lz ng nh aw ni bi"><span id="f38d" class="mh mi iu lz b gz nj nk l nl nm">&gt;&gt;&gt; now_time.strftime('%H:%M:%S')<br/>'16:43:12'</span></pre><p id="5717" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">另一个可以帮助我们处理时间的有用模块是内置的<code class="fe lw lx ly lz b">time</code>。根据操作系统和主机的日期时间配置，<code class="fe lw lx ly lz b">ctime</code>方法将返回当前时间的字符串。</p><pre class="kk kl km kn gu nf lz ng nh aw ni bi"><span id="d175" class="mh mi iu lz b gz nj nk l nl nm">&gt;&gt;&gt; import time<br/>&gt;&gt;&gt; time.ctime()<br/>'Fri Sep 30 16:48:22 2022'</span></pre></div><div class="ab cl ma mb hy mc" role="separator"><span class="md bw bk me mf mg"/><span class="md bw bk me mf mg"/><span class="md bw bk me mf"/></div><div class="in io ip iq ir"><h2 id="51d3" class="mh mi iu bd mj mk ml dn mm mn mo dp mp lj mq mr ms ln mt mu mv lr mw mx my mz bi translated">引入支持时区的日期时间对象</h2><p id="138d" class="pw-post-body-paragraph la lb iu lc b ld na jv lf lg nb jy li lj nc ll lm ln nd lp lq lr ne lt lu lv in bi translated">现在，我们在上一节中展示的问题是，我们创建的datetime对象是<strong class="lc iv">时区无关的</strong>。例如，我住在伦敦—这意味着如果我和另外一个住在美国或印度的人在同一时间点运行我们之前演示的相同命令，我们最终都会得到不同的结果，因为上面的所有表达式都将根据主机的时区来计算当前时间(这显然会因地点而异)。</p><p id="2fd5" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">通用协调时间(UTC)是一个全球标准，也被程序员群体所采用。UTC(几乎)等同于GMT，它不会因为夏令时等而改变。用UTC交流与日期时间相关的需求是很常见的，因为它是通用时区，采用UTC可以帮助人们更容易地交流日期时间和日程安排。其他常见的编程结构(如时间戳/unix纪元时间)也使用UTC进行计算。</p><p id="958e" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">回到前面的例子，让我们试着推断构造的datetime对象的时区。请再次注意，我的工作地点在伦敦，在撰写本文时，我们正处于英国夏令时(BST):</p><pre class="kk kl km kn gu nf lz ng nh aw ni bi"><span id="e07e" class="mh mi iu lz b gz nj nk l nl nm">&gt;&gt;&gt; from datetime import datetime<br/>&gt;&gt;&gt; now = datetime.now()<br/>&gt;&gt;&gt; tz = now.astimezone().tzinfo<br/>&gt;&gt;&gt; tz<br/>datetime.timezone(datetime.timedelta(seconds=3600), 'BST')</span></pre><p id="90f6" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">现在，如果你在不同的时区运行上面的命令，你会得到不同的<code class="fe lw lx ly lz b">now</code>和<code class="fe lw lx ly lz b">tz</code>的值——这正是问题所在。</p><p id="8202" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">相反，我们可以用UTC时区计算当前的日期时间，这样我们所有人都会得到相同的计算结果。假设我住在伦敦(目前是英国夏令时)，我们预计当前的UTC日期时间将比我当地的BST时区晚一个小时:</p><pre class="kk kl km kn gu nf lz ng nh aw ni bi"><span id="20f5" class="mh mi iu lz b gz nj nk l nl nm">&gt;&gt;&gt; from datetime import datetime<br/>&gt;&gt;&gt; now = datetime.utcnow()<br/>&gt;&gt;&gt; now<br/>datetime.datetime(2022, 9, 30, 16, 22, 22, 386588)</span></pre><p id="abcd" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">注意，也可以通过调用<code class="fe lw lx ly lz b">replace()</code>方法并提供<code class="fe lw lx ly lz b">datetime.timezone</code>模块中可用的时区选项之一来更改日期时间对象的时区信息。</p><p id="9812" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">例如，让我们创建一个当前日期时间的日期时间对象(BST格式):</p><pre class="kk kl km kn gu nf lz ng nh aw ni bi"><span id="316a" class="mh mi iu lz b gz nj nk l nl nm">&gt;&gt;&gt; from datetime import datetime, timezone<br/>&gt;&gt;&gt; now = datetime.now()<br/>&gt;&gt;&gt; now<br/>datetime.datetime(2022, 9, 30, 17, 26, 15, 891393)<br/>&gt;&gt;&gt; now_utc =  now.replace(tzinfo=timezone.utc)<br/>datetime.datetime(2022, 9, 30, 17, 26, 15, 891393, tzinfo=datetime.timezone.utc)</span></pre></div><div class="ab cl ma mb hy mc" role="separator"><span class="md bw bk me mf mg"/><span class="md bw bk me mf mg"/><span class="md bw bk me mf"/></div><div class="in io ip iq ir"><h2 id="78f3" class="mh mi iu bd mj mk ml dn mm mn mo dp mp lj mq mr ms ln mt mu mv lr mw mx my mz bi translated">最后的想法</h2><p id="4675" class="pw-post-body-paragraph la lb iu lc b ld na jv lf lg nb jy li lj nc ll lm ln nd lp lq lr ne lt lu lv in bi translated">在今天的文章中，我们展示了用Python计算日期时间和时间戳的几种不同方法。这可以通过使用两个内置模块中的一个来实现，即<code class="fe lw lx ly lz b">datetime</code>和<code class="fe lw lx ly lz b">time</code>。</p><p id="4e95" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">此外，我们讨论了使用<strong class="lc iv">时区感知构造</strong>的重要性。在生产环境中运行的现代系统通常涉及全球托管的许多不同的服务。</p><p id="9a77" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">这意味着托管在不同国家的服务将位于不同的时区，因此我们需要以一致和准确的方式处理这种不规则性。</p><p id="f311" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">这就是我们通常想要使用时区感知对象的原因。此外，在编程环境中，坚持UTC时区和unix时间戳是很常见的。</p><p id="b8fa" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">在我即将发表的一篇文章中，我们将讨论更多关于UTC和Unix纪元时间的内容，所以请保持关注:)</p></div><div class="ab cl ma mb hy mc" role="separator"><span class="md bw bk me mf mg"/><span class="md bw bk me mf mg"/><span class="md bw bk me mf"/></div><div class="in io ip iq ir"><p id="1b77" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated"><a class="ae kz" href="https://gmyrianthous.medium.com/membership" rel="noopener"> <strong class="lc iv">成为会员</strong> </a> <strong class="lc iv">阅读介质上的每一个故事。你的会员费直接支持我和你看的其他作家。你也可以在媒体上看到所有的故事。</strong></p><div class="nn no gq gs np nq"><a href="https://gmyrianthous.medium.com/membership" rel="noopener follow" target="_blank"><div class="nr ab fp"><div class="ns ab nt cl cj nu"><h2 class="bd iv gz z fq nv fs ft nw fv fx it bi translated">通过我的推荐链接加入Medium-Giorgos Myrianthous</h2><div class="nx l"><h3 class="bd b gz z fq nv fs ft nw fv fx dk translated">作为一个媒体会员，你的会员费的一部分会给你阅读的作家，你可以完全接触到每一个故事…</h3></div><div class="ny l"><p class="bd b dl z fq nv fs ft nw fv fx dk translated">gmyrianthous.medium.com</p></div></div><div class="nz l"><div class="oa l ob oc od nz oe kt nq"/></div></div></a></div></div><div class="ab cl ma mb hy mc" role="separator"><span class="md bw bk me mf mg"/><span class="md bw bk me mf mg"/><span class="md bw bk me mf"/></div><div class="in io ip iq ir"><p id="676e" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated"><strong class="lc iv">相关文章你可能也喜欢</strong></p><div class="nn no gq gs np nq"><a rel="noopener follow" target="_blank" href="/requirements-vs-setuptools-python-ae3ee66e28af"><div class="nr ab fp"><div class="ns ab nt cl cj nu"><h2 class="bd iv gz z fq nv fs ft nw fv fx it bi translated">Python中的requirements.txt与setup.py</h2><div class="nx l"><h3 class="bd b gz z fq nv fs ft nw fv fx dk translated">了解Python中requirements.txt、setup.py和setup.cfg在开发和分发时的用途…</h3></div><div class="ny l"><p class="bd b dl z fq nv fs ft nw fv fx dk translated">towardsdatascience.com</p></div></div><div class="nz l"><div class="of l ob oc od nz oe kt nq"/></div></div></a></div></div><div class="ab cl ma mb hy mc" role="separator"><span class="md bw bk me mf mg"/><span class="md bw bk me mf mg"/><span class="md bw bk me mf"/></div><div class="in io ip iq ir"><div class="kk kl km kn gu nq"><a rel="noopener follow" target="_blank" href="/diagrams-as-code-python-d9cbaa959ed5"><div class="nr ab fp"><div class="ns ab nt cl cj nu"><h2 class="bd iv gz z fq nv fs ft nw fv fx it bi translated">Python中作为代码的图</h2><div class="nx l"><h3 class="bd b gz z fq nv fs ft nw fv fx dk translated">用Python创建云系统架构图</h3></div><div class="ny l"><p class="bd b dl z fq nv fs ft nw fv fx dk translated">towardsdatascience.com</p></div></div><div class="nz l"><div class="og l ob oc od nz oe kt nq"/></div></div></a></div></div><div class="ab cl ma mb hy mc" role="separator"><span class="md bw bk me mf mg"/><span class="md bw bk me mf mg"/><span class="md bw bk me mf"/></div><div class="in io ip iq ir"><div class="kk kl km kn gu nq"><a rel="noopener follow" target="_blank" href="/python-poetry-83f184ac9ed1"><div class="nr ab fp"><div class="ns ab nt cl cj nu"><h2 class="bd iv gz z fq nv fs ft nw fv fx it bi translated">用诗歌管理Python依赖关系</h2><div class="nx l"><h3 class="bd b gz z fq nv fs ft nw fv fx dk translated">依赖性管理和用诗歌打包</h3></div><div class="ny l"><p class="bd b dl z fq nv fs ft nw fv fx dk translated">towardsdatascience.com</p></div></div><div class="nz l"><div class="oh l ob oc od nz oe kt nq"/></div></div></a></div></div></div>    
</body>
</html>