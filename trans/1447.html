<html>
<head>
<title>Modeling urban heat wave risk with satellite imagery and lidar data</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用卫星图像和激光雷达数据模拟城市热浪风险</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/modeling-urban-heat-wave-risk-with-satellite-imagery-and-lidar-data-3c00c63ea2db#2022-04-09">https://towardsdatascience.com/modeling-urban-heat-wave-risk-with-satellite-imagery-and-lidar-data-3c00c63ea2db#2022-04-09</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="35e8" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">利用GIS、统计技术和开放python库进行环境风险建模的方法</h2></div><p id="433d" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">最近，<a class="ae le" href="https://www.wri.org/" rel="noopener ugc nofollow" target="_blank">世界资源研究所</a>在<a class="ae le" href="https://wribrasil.org.br/" rel="noopener ugc nofollow" target="_blank">巴西</a>的办公室在<a class="ae le" href="https://cities4forests.com/" rel="noopener ugc nofollow" target="_blank">城市4森林项目</a>下给我分配了一项咨询任务，为与<strong class="kk iu">气候变化</strong>相关的几种<strong class="kk iu">灾害</strong>建立<strong class="kk iu">风险</strong>的模型，例如<a class="ae le" href="https://www.google.com/maps/place/Campinas+-+State+of+S%C3%A3o+Paulo,+Brazil/@-22.8948443,-47.1711193,11z/data=!3m1!4b1!4m5!3m4!1s0x94c8c8f6a2552649:0x7475001c58043536!8m2!3d-22.9050824!4d-47.0613327" rel="noopener ugc nofollow" target="_blank">坎皮纳斯</a>市<a class="ae le" href="https://www.google.com/maps/place/Campinas+-+State+of+S%C3%A3o+Paulo,+Brazil/@-22.8948443,-47.1711193,11z/data=!3m1!4b1!4m5!3m4!1s0x94c8c8f6a2552649:0x7475001c58043536!8m2!3d-22.9050824!4d-47.0613327" rel="noopener ugc nofollow" target="_blank">城市规模的洪水、山体滑坡和热浪，坎皮纳斯</a>是巴西大都市地区之外人口最多的城市，拥有120多万居民。</p><p id="2a51" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">风险建模是g is软件最传统的用例之一，所以我认为它不会有什么突破性的东西。然而最终，评估暴露在城市热浪中的程度被证明是值得注意的。这是一个关于我们用高空间分辨率和地面真实值来建模风险指数的快速技术说明。</p><h1 id="53c9" class="lf lg it bd lh li lj lk ll lm ln lo lp jz lq ka lr kc ls kd lt kf lu kg lv lw bi translated">风险建模复习让我们开始</h1><p id="e90a" class="pw-post-body-paragraph ki kj it kk b kl lx ju kn ko ly jx kq kr lz kt ku kv ma kx ky kz mb lb lc ld im bi translated">你可能以前读过这个，但是回忆一些关键概念也无妨。当<strong class="kk iu">危险</strong>事件(如热浪)发生，引发生命损失和基础设施损坏时，它会突出显示暴露于此类危险的<strong class="kk iu">地理区域；</strong>以及社会及其基础设施、资产和其他易受特定危害影响的过程。这就是为什么IPCC声明<strong class="kk iu">风险</strong>是<strong class="kk iu">危害</strong>面对给定<strong class="kk iu">暴露</strong>和给定<strong class="kk iu">脆弱性</strong>的产物。</p><figure class="md me mf mg gt mh gh gi paragraph-image"><div role="button" tabindex="0" class="mi mj di mk bf ml"><div class="gh gi mc"><img src="../Images/88cf45cae2b3d0f77930070a1f836336.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*iiAaaqgg5Qi_e0mM6ZhpaA.png"/></div></div><p class="mo mp gj gh gi mq mr bd b be z dk translated">风险等于危险乘以暴露加上脆弱性。图片作者。改编自2014年IPCC第五次评估报告。</p></figure><h1 id="6d70" class="lf lg it bd lh li lj lk ll lm ln lo lp jz lq ka lr kc ls kd lt kf lu kg lv lw bi translated">计算危险强度</h1><p id="ea9e" class="pw-post-body-paragraph ki kj it kk b kl lx ju kn ko ly jx kq kr lz kt ku kv ma kx ky kz mb lb lc ld im bi translated"><strong class="kk iu">危险</strong>被定义为造成损害的现象，并以其位置、强度、频率和概率为特征。在这里，我们将使用Landsat 8热波段来获取过去7年夏季的地表温度。</p><p id="2082" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">为此，我们将使用Google Earth Engine的Python API来访问集合，将值转换为摄氏度，然后计算每个像素的中值。这里我使用的是Jupyter笔记本，但是您可以在任何python IDE中这样做。</p><figure class="md me mf mg gt mh"><div class="bz fp l di"><div class="ms mt l"/></div></figure><p id="2a48" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">一旦我们定义了我们感兴趣的区域，我们继续使用它的边界框来运行对Google Earth引擎的查询。我们将主要使用波段10(用于地表温度)，但我们也加入了波段4、3和2(用于自然颜色合成，以防万一)。在地球引擎的传感器的<a class="ae le" href="https://developers.google.com/earth-engine/datasets/catalog/LANDSAT_LC08_C02_T1_L2#bands" rel="noopener ugc nofollow" target="_blank"> USGS页面上有更多的信息。</a></p><figure class="md me mf mg gt mh"><div class="bz fp l di"><div class="ms mt l"/></div></figure><p id="2e38" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">现在，我们可以开始处理我们选择的图像集合(在所选区域的时间段内共有78幅图像)。我们将获得每个像素的中值，并重新调整原始值，以获得地表温度(LST)，单位为摄氏度，遵循<a class="ae le" href="https://www.usgs.gov/faqs/how-do-i-use-scale-factor-landsat-level-2-science-products" rel="noopener ugc nofollow" target="_blank">美国地质调查局的建议</a>。</p><figure class="md me mf mg gt mh"><div class="bz fp l di"><div class="ms mt l"/></div></figure><p id="1f56" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">太棒了。现在我们可以看看最终的乐队是什么样子。我将在我的Jupyter笔记本中使用lyum，但是你可以使用任何映射库。</p><figure class="md me mf mg gt mh"><div class="bz fp l di"><div class="ms mt l"/></div></figure><figure class="md me mf mg gt mh gh gi paragraph-image"><div role="button" tabindex="0" class="mi mj di mk bf ml"><div class="gh gi mu"><img src="../Images/9bd362ad417890c1ce45c2849f3babe4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*kMmF4DZiwvYxoIwBPw0pTw.gif"/></div></div><p class="mo mp gj gh gi mq mr bd b be z dk translated">温度从8摄氏度到50摄氏度不等。图片作者。</p></figure><p id="34fa" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">由于一切看起来都很好，剩下的就是将结果导出到一个光栅文件，我们接下来可以在GIS软件中访问它。</p><figure class="md me mf mg gt mh"><div class="bz fp l di"><div class="ms mt l"/></div></figure><h1 id="b1d9" class="lf lg it bd lh li lj lk ll lm ln lo lp jz lq ka lr kc ls kd lt kf lu kg lv lw bi translated">用激光雷达数据和土地利用分类处理暴露</h1><p id="6939" class="pw-post-body-paragraph ki kj it kk b kl lx ju kn ko ly jx kq kr lz kt ku kv ma kx ky kz mb lb lc ld im bi translated">接下来我们的名单是<strong class="kk iu">曝光。</strong>暴露<strong class="kk iu"> </strong>定义为位于危险易发区域的人员、基础设施和其他有形人力资产的情况。为了得到这个，我们将计算<strong class="kk iu">潜在温度</strong>——也就是说，有多少热量表面可以潜在储存或反射——。</p><p id="baf8" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">为了做到这一点，我们将使用由法国城市规划办公室创造的方法。这个最近成为QGIS插件的工具通过模拟建筑物和树木的<strong class="kk iu">阴影</strong>以及材料的<strong class="kk iu">热属性</strong>来计算地面温度。</p><p id="e569" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">第一步是获取建筑物和树木的体积(来自坎皮纳市政厅收集的<strong class="kk iu">点云</strong> <strong class="kk iu">激光雷达数据</strong>)。这些反过来又被馈送到QGIS的<a class="ae le" href="https://github.com/UMEP-dev/UMEP" rel="noopener ugc nofollow" target="_blank"> UMEP插件</a>，该插件将为一天中的每个小时生成一个由建筑物和树木投射的<strong class="kk iu">阴影</strong>的栅格，以及一个像素范围从0到1的最终栅格，其中0是太阳根本照射不到的地方，1是一整天都被阳光照射到的地方。</p><figure class="md me mf mg gt mh gh gi paragraph-image"><div role="button" tabindex="0" class="mi mj di mk bf ml"><div class="gh gi mv"><img src="../Images/442820de0765ee9b052f90863a037549.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*b_yubN8TLWNw0TyK3mOaAA.png"/></div></div><p class="mo mp gj gh gi mq mr bd b be z dk translated">图片作者。</p></figure><p id="cfda" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">接下来，我们将获取土地覆盖数据(同样由市政厅提供，但使用<a class="ae le" href="https://dges.carleton.ca/CUOSGwiki/index.php/Supervised_classification_in_QGIS" rel="noopener ugc nofollow" target="_blank">任何卫星图像监督分类工具</a>都可以轻松完成)，并为它们分配一系列指标，如反射率和反照率。ICEtool提供了一个数据库，其中包含常见材料的值，在Campinas找到的大多数材料都完全符合该集合。</p><figure class="md me mf mg gt mh gh gi paragraph-image"><div role="button" tabindex="0" class="mi mj di mk bf ml"><div class="gh gi mv"><img src="../Images/b19f1513c153a3d0c3d8cc6d246cab4e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*d1zuF0FywDiqk67McFUbVQ.png"/></div></div><p class="mo mp gj gh gi mq mr bd b be z dk translated">图片作者。</p></figure><p id="6eed" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">有了这两个输入，ICEtool现在就能够生成一个点网格，并计算每个点的潜在温度，同时考虑到它获得了多少阳光以及它在反射或储存热量方面将如何表现。我们使用的是ICEtool的1.0版本，所以必须通过QGIS中的Python IDE来完成。事情应该更容易了，因为它已经成为一个真正的插件。</p><figure class="md me mf mg gt mh gh gi paragraph-image"><div role="button" tabindex="0" class="mi mj di mk bf ml"><div class="gh gi mw"><img src="../Images/be3a57207c8e0ecca236dcb99eba6c65.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*u2OVmH8A4QKrnjQ29BsHNQ.gif"/></div></div><p class="mo mp gj gh gi mq mr bd b be z dk translated">图片作者。</p></figure><h1 id="4d2d" class="lf lg it bd lh li lj lk ll lm ln lo lp jz lq ka lr kc ls kd lt kf lu kg lv lw bi translated">最重要的是脆弱性指标</h1><p id="67e1" class="pw-post-body-paragraph ki kj it kk b kl lx ju kn ko ly jx kq kr lz kt ku kv ma kx ky kz mb lb lc ld im bi translated">最后，我们可以处理脆弱性指标。脆弱性被定义为由物理、社会、经济和环境因素决定的条件，这些因素增加了社区对灾害影响的易感性。这里我们将使用2010年人口普查提供的社会指标。所选择的变量是老年人的比例、可获得饮用水的人口比例和家庭平均收入。</p><p id="b679" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我不会详细讨论如何获取巴西地理统计局2010年人口普查的数据，因为这在其他地方有很好的记录。相反，我将提供下面生成的三个地图。请注意，与其他两个变量不同，平均收入图的色标必须反转，因为较小的值代表较高的脆弱性。</p><figure class="md me mf mg gt mh gh gi paragraph-image"><div role="button" tabindex="0" class="mi mj di mk bf ml"><div class="gh gi mx"><img src="../Images/0dec7f20bc3f5264f1ffd7261ecc035a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*e9lC0PNJLaxFxZEKtwpU5A.png"/></div></div><p class="mo mp gj gh gi mq mr bd b be z dk translated">图片作者。</p></figure><h1 id="9e70" class="lf lg it bd lh li lj lk ll lm ln lo lp jz lq ka lr kc ls kd lt kf lu kg lv lw bi translated">用标准化的尺度把它们放在一起</h1><p id="4ba0" class="pw-post-body-paragraph ki kj it kk b kl lx ju kn ko ly jx kq kr lz kt ku kv ma kx ky kz mb lb lc ld im bi translated">你可能已经注意到，到目前为止，我们使用了几种不同的音阶。<strong class="kk iu">危险</strong>变量的像素为30x30m，范围为8到50摄氏度。<strong class="kk iu">曝光</strong>变量的像素为5x5m，范围为10到33摄氏度。而<strong class="kk iu">脆弱性</strong>变量由普查区域多边形表示，范围从0到100%和从45k到0雷亚尔。这意味着为了能够将它们混合起来，我们需要使它们在空间和数字上兼容，所以我们不是在比较苹果和橘子。</p><p id="6a2f" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">第一个很简单:我们用<a class="ae le" href="https://docs.qgis.org/2.6/en/docs/user_manual/processing_algs/qgis/vector_creation_tools/creategrid.html" rel="noopener ugc nofollow" target="_blank"> Create Grid命令</a>在QGIS中创建了一个150x150m的<strong class="kk iu">新网格</strong>，它成为我们所有图层的新公共参考。接下来，我们需要<strong class="kk iu">将数据</strong>从不同的层迁移到这些新的单元中。这可以通过一个简单的“<a class="ae le" href="https://www.qgistutorials.com/en/docs/3/performing_spatial_joins.html" rel="noopener ugc nofollow" target="_blank">按位置连接要素</a>”来完成，但它不太擅长处理原始数据中叠加了多个要素的像元。出于这个原因，我们宁愿使用<a class="ae le" href="https://www.google.com/search?q=qgis+area+weighted+average&amp;sxsrf=APq-WBsnNQLorT5N8nTwoC9cwEChKHlw5g%3A1649449998113&amp;ei=DpxQYrmqBpzd1sQP8I-3sAU&amp;ved=0ahUKEwi56diJqIX3AhWcrpUCHfDHDVYQ4dUDCA4&amp;uact=5&amp;oq=qgis+area+weighted+average&amp;gs_lcp=Cgdnd3Mtd2l6EAMyCAghEBYQHRAeOgcIABBHELADSgQIQRgASgQIRhgAUOYGWP0MYO8NaAJwAXgAgAHBAYgB0QaSAQMwLjWYAQCgAQHIAQjAAQE&amp;sclient=gws-wiz#:~:text=Area%20Weighted%20Average%20%E2%80%94%20QGIS,qgis.org%20%E2%80%BA%20plugins%20%E2%80%BA%20area_weighted_aver..." rel="noopener ugc nofollow" target="_blank"> <strong class="kk iu">面积加权平均</strong>插件</a>，它会将原始单元格中的值按相交面积按比例分配给新单元格。</p><p id="8833" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">第二次增容是常规的<a class="ae le" href="https://www.techopedia.com/definition/1221/normalization#:~:text=Normalization%20is%20the%20process%20of,stored%20in%20only%20one%20place." rel="noopener ugc nofollow" target="_blank"> <strong class="kk iu">归一化的</strong> </a>的不同系列。这基本上是一个公式，其中我们取系列的最大值和最小值(如10–33°C ),以便相应地将所有值缩放到范围从0到1的系列中。明智的做法是在这样做之前从系列中删除异常值。</p><figure class="md me mf mg gt mh gh gi paragraph-image"><div role="button" tabindex="0" class="mi mj di mk bf ml"><div class="gh gi my"><img src="../Images/e063f318299786fb2a5593a913a7afd1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-pZsxyHEMZU8KHS60A18NA.png"/></div></div><p class="mo mp gj gh gi mq mr bd b be z dk translated">图片作者。</p></figure><p id="3031" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">一旦完成，我们准备将风险公式应用到新生成网格的每个单元，即<strong class="kk iu">危险</strong>乘以<strong class="kk iu">暴露</strong>加上<strong class="kk iu">脆弱性</strong>。</p><figure class="md me mf mg gt mh gh gi paragraph-image"><div role="button" tabindex="0" class="mi mj di mk bf ml"><div class="gh gi mz"><img src="../Images/f660d0ab6045f5d88b82300ab1e492c9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*lyzRpP12GXDlmnZ_8jyEvA.png"/></div></div><p class="mo mp gj gh gi mq mr bd b be z dk translated">图片作者。</p></figure><p id="c7d9" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这将创建我们的最终风险指数。标度现在从0到2变化，因此我们可以再次归一化值，然后乘以5，得到5个等级，我们称之为低、中、高、非常高和极端。</p><figure class="md me mf mg gt mh gh gi paragraph-image"><div role="button" tabindex="0" class="mi mj di mk bf ml"><div class="gh gi na"><img src="../Images/665a1a2e994be78c5b19d59c973cffad.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ypn3SMAfb7Z7ZvbCwK9vEg.png"/></div></div><p class="mo mp gj gh gi mq mr bd b be z dk translated">图片作者。</p></figure><p id="aed4" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">有趣的是，这一结果否定了城市热岛与更高的建筑密度有关的概念。我们清楚地看到，即使内城显示出一些高风险集群，风险最大的区域是城市周边地区，那里没有植被，水资源和收入都较低。</p><h1 id="35db" class="lf lg it bd lh li lj lk ll lm ln lo lp jz lq ka lr kc ls kd lt kf lu kg lv lw bi translated">这是所有的乡亲</h1><p id="cc90" class="pw-post-body-paragraph ki kj it kk b kl lx ju kn ko ly jx kq kr lz kt ku kv ma kx ky kz mb lb lc ld im bi translated">这一块就到此为止！如果你有问题或建议，不要犹豫，随时给我写信！</p><p id="8b3c" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">如果你喜欢这篇文章，可以考虑<a class="ae le" href="https://www.buymeacoffee.com/guilhermeiablo" rel="noopener ugc nofollow" target="_blank">请我喝杯咖啡</a>，这样我就可以继续写更多的文章。</p><p id="5f61" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><strong class="kk iu"> <em class="nb">如果你还不是中会员，想支持我这样的作家，可以随时通过我的推荐链接报名:</em> </strong></p><div class="nc nd gp gr ne nf"><a href="https://guilhermeiablonovski.medium.com/membership" rel="noopener follow" target="_blank"><div class="ng ab fo"><div class="nh ab ni cl cj nj"><h2 class="bd iu gy z fp nk fr fs nl fu fw is bi translated">通过我的推荐链接加入媒体——古伊列梅·m·亚布洛诺夫斯基</h2><div class="nm l"><h3 class="bd b gy z fp nk fr fs nl fu fw dk translated">作为一个媒体会员，你的会员费的一部分会给你阅读的作家，你可以完全接触到每一个故事…</h3></div><div class="nn l"><p class="bd b dl z fp nk fr fs nl fu fw dk translated">guilhermeiablonovski.medium.com</p></div></div><div class="no l"><div class="np l nq nr ns no nt mm nf"/></div></div></a></div></div></div>    
</body>
</html>