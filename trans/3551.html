<html>
<head>
<title>Quarto: A Game Changer For Rendering Jupyter Notebooks</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">quarto:Jupyter笔记本渲染的游戏改变者</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/quarto-a-game-changer-for-rendering-jupyter-notebooks-826c885a531f#2022-08-08">https://towardsdatascience.com/quarto-a-game-changer-for-rendering-jupyter-notebooks-826c885a531f#2022-08-08</a></blockquote><div><div class="fc ij ik il im in"/><div class="io ip iq ir is"><div class=""/><div class=""><h2 id="bb2d" class="pw-subtitle-paragraph js iu iv bd b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj dk translated">借助Quarto，您的Jupyter笔记本现在可以轻松发布为各种专业格式</h2></div><figure class="kl km kn ko gt kp gh gi paragraph-image"><div role="button" tabindex="0" class="kq kr di ks bf kt"><div class="gh gi kk"><img src="../Images/9ffaffcb57f1d2e5862508ab38bb92c6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*eTt4AjMkfJhrcYjiTmHwwA.jpeg"/></div></div><p class="kw kx gj gh gi ky kz bd b be z dk translated">由<a class="ae la" href="https://unsplash.com/@goumbik?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">卢卡斯·布拉塞克</a>在<a class="ae la" href="https://unsplash.com/s/photos/data-documents?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>拍摄的照片</p></figure><p id="d510" class="pw-post-body-paragraph lb lc iv ld b le lf jw lg lh li jz lj lk ll lm ln lo lp lq lr ls lt lu lv lw io bi translated">作为一个同时使用R和Python工作的人，我一直希望有一个更好的解决方案将我的Jupyter笔记本变成专业外观的文档。R生态系统在R Markdown中有这样一个选项已经有一段时间了，我非常喜欢使用它，事实上我已经在R环境中编写了我的Python代码，这样我就可以利用R Markdown所提供的优势。</p><p id="1160" class="pw-post-body-paragraph lb lc iv ld b le lf jw lg lh li jz lj lk ll lm ln lo lp lq lr ls lt lu lv lw io bi translated">我一直对Jupyter笔记本的外观和缺乏将它变成更“完美”和更具视觉吸引力的东西的选项有疑问。当然，交互式编程是有帮助的，但是当涉及到为观众发布你的作品时，外观和感觉从来没有切过芥末。</p><p id="22ec" class="pw-post-body-paragraph lb lc iv ld b le lf jw lg lh li jz lj lk ll lm ln lo lp lq lr ls lt lu lv lw io bi translated">随着<a class="ae la" href="https://quarto.org" rel="noopener ugc nofollow" target="_blank"> Quarto </a>的发布，这一切都改变了。Quarto是R Markdown的一个发展，现在可以在Jupyter笔记本上使用。渲染过程是相同的，除了不再使用<code class="fe lx ly lz ma b">knitr</code>来生成markdown，Quarto现在可以使用<code class="fe lx ly lz ma b">knitr</code>和<code class="fe lx ly lz ma b">jupyter</code>。</p><p id="7b94" class="pw-post-body-paragraph lb lc iv ld b le lf jw lg lh li jz lj lk ll lm ln lo lp lq lr ls lt lu lv lw io bi translated">随着一些非常聪明的功能的引入，您现在可以像往常一样编写Jupyter笔记本，但添加特定的指令将允许它们以多种格式呈现(如pdf、html、docx、revealjs、Powerpoint、Wikis、网站、书籍)。特殊注释允许您对文档中的代码执行和放置进行大量的控制，还可以对代码输出的格式和放置进行更多的控制。</p><p id="6bc2" class="pw-post-body-paragraph lb lc iv ld b le lf jw lg lh li jz lj lk ll lm ln lo lp lq lr ls lt lu lv lw io bi translated">此外，您可以在不从根本上改变现有编码工作流程的情况下完成所有这些工作，因为所有Quarto参数都可以以一种在您的正常Jupyter lab会话中被忽略的方式输入。</p><p id="b7e8" class="pw-post-body-paragraph lb lc iv ld b le lf jw lg lh li jz lj lk ll lm ln lo lp lq lr ls lt lu lv lw io bi translated">在这篇文章中，我将带你通过几个基本的例子，如何把你的Jupyter笔记本和渲染成各种格式。我将举例说明一些特性，但是为了使阅读简短，我将只涉及一些简单的特性，并且将在以后的文章中返回来举例说明其他特性。</p><h2 id="79ad" class="mb mc iv bd md me mf dn mg mh mi dp mj lk mk ml mm lo mn mo mp ls mq mr ms mt bi translated">为Quarto设置现有笔记本——一个简单的例子</h2><p id="cf3c" class="pw-post-body-paragraph lb lc iv ld b le mu jw lg lh mv jz lj lk mw lm ln lo mx lq lr ls my lu lv lw io bi translated">首先你需要在你的系统上安装Quarto命令行界面——见<a class="ae la" href="https://quarto.org/docs/get-started/" rel="noopener ugc nofollow" target="_blank">这里</a>。如果您在VSCode中工作，已经有一个可以安装的Quarto附加组件。我相信我们很快也会看到皮查姆的作品。</p><p id="726e" class="pw-post-body-paragraph lb lc iv ld b le lf jw lg lh li jz lj lk ll lm ln lo lp lq lr ls lt lu lv lw io bi translated">现在让我们在适当的Python环境中获取一个现有的<code class="fe lx ly lz ma b">ipynb</code>文件——我们称之为<code class="fe lx ly lz ma b">my_notebook.ipynb</code>。这里有一个简单的例子，我生成了一个很好的相关图。</p><figure class="kl km kn ko gt kp gh gi paragraph-image"><div role="button" tabindex="0" class="kq kr di ks bf kt"><div class="gh gi mz"><img src="../Images/de09739aa7611319cd724f545361ccd0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*LfrrTZSakNh_sE0ZQtvwTw.png"/></div></div><p class="kw kx gj gh gi ky kz bd b be z dk translated">我们的Jupyter笔记本起点</p></figure><p id="7ab1" class="pw-post-body-paragraph lb lc iv ld b le lf jw lg lh li jz lj lk ll lm ln lo lp lq lr ls lt lu lv lw io bi translated">现在我们准备把它渲染成一个四开文档。我们需要的第一件事是一个YAML标头，它提供了所需输出类型的信息。<strong class="ld iw">重要的是</strong>，这个YAML标题必须作为顶部的<em class="na">原始块</em>输入笔记本。不要把它作为代码输入，否则编译器不会理解它，并且会影响Jupyter会话的运行。作为原始输入，它在你的交互式编程中被安全地忽略，但是当它被Quarto渲染时就有意义了。</p><figure class="kl km kn ko gt kp gh gi paragraph-image"><div role="button" tabindex="0" class="kq kr di ks bf kt"><div class="gh gi nb"><img src="../Images/157dd6a8c40ab9bf4598c0caf74a6a23.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*StYBPd6YwfxhJI4TYCOi8w.png"/></div></div><p class="kw kx gj gh gi ky kz bd b be z dk translated">添加原始YAML页眉</p></figure><p id="fa15" class="pw-post-body-paragraph lb lc iv ld b le lf jw lg lh li jz lj lk ll lm ln lo lp lq lr ls lt lu lv lw io bi translated">现在你已经创建了你的第一个基本的四开文档——就这么简单！让我们来看看我们放在YAML报头中的一些基本参数:</p><ul class=""><li id="2536" class="nc nd iv ld b le lf lh li lk ne lo nf ls ng lw nh ni nj nk bi translated"><code class="fe lx ly lz ma b">title</code>是你的文档标题</li><li id="5718" class="nc nd iv ld b le nl lh nm lk nn lo no ls np lw nh ni nj nk bi translated"><code class="fe lx ly lz ma b">format</code>指示输出的格式和任何特定于该格式的进一步参数。在这种情况下，我已经指定我想要一个HTML输出，其中的代码是折叠的，这样我只有在单击适当的部分时才能看到代码(当您的读者是技术人员和非技术人员时，这是一个很好的特性)</li><li id="e38d" class="nc nd iv ld b le nl lh nm lk nn lo no ls np lw nh ni nj nk bi translated"><code class="fe lx ly lz ma b">execute</code>给出了你希望代码何时在文档中执行的规范。设置<code class="fe lx ly lz ma b">enable: true</code>意味着每次渲染时都会执行代码。否则，将保存代码输出，并且不会在后续渲染中重新执行该代码。如果您的代码计算量很大或者运行时间很长，这将非常有用。</li><li id="263e" class="nc nd iv ld b le nl lh nm lk nn lo no ls np lw nh ni nj nk bi translated"><code class="fe lx ly lz ma b">jupyter</code>指示使用什么来运行代码。在这种情况下，它显然是Python 3，但也可能有其他引擎，如配置正确的Julia<a class="ae la" href="https://quarto.org/docs/computations/julia.html#overview" rel="noopener ugc nofollow" target="_blank"/>。</li></ul><p id="2bf9" class="pw-post-body-paragraph lb lc iv ld b le lf jw lg lh li jz lj lk ll lm ln lo lp lq lr ls lt lu lv lw io bi translated">现在您需要做的就是在终端中键入<code class="fe lx ly lz ma b">quarto render my_notebook.ipynb</code>，您将获得这个简单的HTML输出，其中包含折叠的代码(您只需单击代码部分将其展开并查看代码)。</p><figure class="kl km kn ko gt kp gh gi paragraph-image"><div role="button" tabindex="0" class="kq kr di ks bf kt"><div class="gh gi nq"><img src="../Images/2ae92462ac21b16cf719123c64186a2d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hE_dLnGVHiTT-xoP1eaebg.png"/></div></div><p class="kw kx gj gh gi ky kz bd b be z dk translated">带有代码折叠的基本HTML输出</p></figure><h2 id="dcd1" class="mb mc iv bd md me mf dn mg mh mi dp mj lk mk ml mm lo mn mo mp ls mq mr ms mt bi translated">可用的四开格式</h2><p id="39c3" class="pw-post-body-paragraph lb lc iv ld b le mu jw lg lh mv jz lj lk mw lm ln lo mx lq lr ls my lu lv lw io bi translated">这是一个非常简单的例子，我们马上会看到一个更有趣的例子，但是Quarto有很多格式。只要在YAML文件头中用<code class="fe lx ly lz ma b">pdf</code>替换<code class="fe lx ly lz ma b">html</code>就会生成一个整洁的PDF输出，在MS Word中用<code class="fe lx ly lz ma b">docx</code>替换就会生成。也有许多幻灯片演示输出，网站和各种其他。完整列表可在<a class="ae la" href="https://quarto.org/docs/output-formats/all-formats.html" rel="noopener ugc nofollow" target="_blank">这里</a>获得。下面是一个PDF格式的渲染示例，带有摘要和作者(输出被分解到另一个页面上)。</p><figure class="kl km kn ko gt kp gh gi paragraph-image"><div role="button" tabindex="0" class="kq kr di ks bf kt"><div class="gh gi nr"><img src="../Images/2fdf00e3d752ed445e738d5c408e9fc1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*evkd7gsDfTxDqUlMiwo1UQ.png"/></div></div><p class="kw kx gj gh gi ky kz bd b be z dk translated">带有作者和摘要的PDF输出</p></figure><h2 id="b26d" class="mb mc iv bd md me mf dn mg mh mi dp mj lk mk ml mm lo mn mo mp ls mq mr ms mt bi translated">使用代码块参数控制输出</h2><p id="87ee" class="pw-post-body-paragraph lb lc iv ld b le mu jw lg lh mv jz lj lk mw lm ln lo mx lq lr ls my lu lv lw io bi translated">Quarto最令人印象深刻的特性之一是能够使用特殊的注释语法来控制代码和输出的显示。除了在YAML头中定义全局输出选项之外，您还可以在每个代码块中放置YAML参数，以给出关于如何处理该代码块的特定指令。这些特殊的注释参数将在您的Jupyter实验会话中被忽略，因为它们以hash开头，但它们在Quarto中有特定的含义。</p><p id="70ce" class="pw-post-body-paragraph lb lc iv ld b le lf jw lg lh li jz lj lk ll lm ln lo lp lq lr ls lt lu lv lw io bi translated">在这个例子中，我将以<code class="fe lx ly lz ma b">revealjs</code>格式呈现我的文档，这是一个简洁的幻灯片演示。在主幻灯片上，我希望代码和输出以列的形式并排显示。我也想给我的剧情一个参考。为此，我使用特殊的注释向代码块添加了各种参数，然后在我的文本中引用了<code class="fe lx ly lz ma b">fig-cap</code>。</p><figure class="kl km kn ko gt kp gh gi paragraph-image"><div role="button" tabindex="0" class="kq kr di ks bf kt"><div class="gh gi ns"><img src="../Images/e5eb0bcd618aa7df6e882c02272ac0ac.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*tt3B0FWVGm8Wc58KXm6eqQ.png"/></div></div><p class="kw kx gj gh gi ky kz bd b be z dk translated">带有块参数和引用的revealjs表示</p></figure><p id="862d" class="pw-post-body-paragraph lb lc iv ld b le lf jw lg lh li jz lj lk ll lm ln lo lp lq lr ls lt lu lv lw io bi translated">请注意，在<code class="fe lx ly lz ma b">revealjs</code>中，默认情况下不回显代码，因此，如果特定代码块需要回显，则需要显式的<code class="fe lx ly lz ma b">echo: true</code>参数。其呈现的输出如下:</p><figure class="kl km kn ko gt kp gh gi paragraph-image"><div role="button" tabindex="0" class="kq kr di ks bf kt"><div class="gh gi nt"><img src="../Images/4659ec2b8a00069346cf952ffdaf6621.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dCNiJX_LOAPvN1FIOqSTtA.png"/></div></div><p class="kw kx gj gh gi ky kz bd b be z dk translated">幻灯片上基于列的输出</p></figure><p id="a958" class="pw-post-body-paragraph lb lc iv ld b le lf jw lg lh li jz lj lk ll lm ln lo lp lq lr ls lt lu lv lw io bi translated">代码框有一些简洁有用的特性，比如滚动和复制图标。</p></div><div class="ab cl nu nv hz nw" role="separator"><span class="nx bw bk ny nz oa"/><span class="nx bw bk ny nz oa"/><span class="nx bw bk ny nz"/></div><div class="io ip iq ir is"><p id="b913" class="pw-post-body-paragraph lb lc iv ld b le lf jw lg lh li jz lj lk ll lm ln lo lp lq lr ls lt lu lv lw io bi translated">在这篇文章中，我仅仅触及了如何使用Quarto的皮毛。有大量的格式和参数可以让您更好地控制数据科学文档的外观。我将在不久的将来发布一些后续文章来说明一些更高级的特性。</p></div></div>    
</body>
</html>