<html>
<head>
<title>Discovering Powerful Data: An NLP Goldmine</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">发现强大的数据:NLP 的金矿</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/discovering-powerful-data-the-guardian-news-api-into-python-for-nlp-1829b568fb0f#2022-02-17">https://towardsdatascience.com/discovering-powerful-data-the-guardian-news-api-into-python-for-nlp-1829b568fb0f#2022-02-17</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="4cce" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">使用免费的卫报新闻应用编程接口解锁过多的标记数据</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/7d2584a6b695ec794a4dfa9c867706e3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*QWb2KdgNbXafiHs7ZLbbrg.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">由 www.freepik.com 弗里皮克设计</p></figure><p id="294d" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">想想看，寻找带标签的数据令人头痛，任何曾经解决过 NLP 问题的人都知道这一点。但是哪个行业需要大量的写作，然后在他们的网站上贴上漂亮的标签呢？没错；新闻文章。所以让我们利用这一点。《卫报》(新闻机构)有一个非常强大的免费 API——每天有 5000 个电话和近 200 万条内容。他们所有的内容都有自己的标签:环境、金钱、环境/能源等。有人已经为我们做了所有的艰苦工作。</p><p id="d467" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">请求访问 API，您就有了 NLP 的大量数据。这些标签是完美的标签。这使得它非常适合 NLP 分类训练。它可能不仅仅是为了 NLP，而是任何种类的分析，比如:容量分析，一袋单词分析等等。</p><p id="e78d" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">首先，在这里请求访问:<a class="ae lu" href="https://open-platform.theguardian.com/access/" rel="noopener ugc nofollow" target="_blank">https://openplatform.theguardian.com/access/</a></p><p id="3281" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">在本文中，我们将介绍:</p><p id="5281" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated"><em class="lv"> 1)将数据拉入 Python </em></p><p id="0b9b" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated"><em class="lv"> 2)在一个函数中拉入 200 多个结果</em></p><p id="0c60" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated"><em class="lv"> 3)拉入多个标签</em></p><p id="2610" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated"><em class="lv"> 4)端到端代码。</em></p><p id="2367" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated"><em class="lv"> 5)数据的潜在用途</em></p><p id="a209" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">鉴于能源危机，我们将探索寻找与能源有关的新闻文章的用例。即能源行业标签。</p><blockquote class="lw lx ly"><p id="c5f5" class="ky kz lv la b lb lc ju ld le lf jx lg lz li lj lk ma lm ln lo mb lq lr ls lt im bi translated">如果您在获取自己的数据时遇到困难，那么整篇文章中有功能完整的代码片段，只要您用自己的 API 键替换“您的 API 键”就可以了。</p></blockquote><h1 id="1569" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">将数据拉入 Python</h1><p id="e48e" class="pw-post-body-paragraph ky kz it la b lb mu ju ld le mv jx lg lh mw lj lk ll mx ln lo lp my lr ls lt im bi translated">在拉入数据之前，请确保从<a class="ae lu" href="https://open-platform.theguardian.com/access/" rel="noopener ugc nofollow" target="_blank">https://open-platform.theguardian.com/access/</a>注册并获取您的 API 密钥。</p><p id="a000" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">正如在文档中看到的，它有我们可以用于请求包的典型 API 调用方法，在我们的例子中，我们使用 GET 方法并将变量放入 URL 的字符串中。由于我们专注于标签/标注，以利用《卫报》对每篇文章进行人工标注的工作，我们的示例将是<em class="lv">按标签查询。</em>但是，也可以通过搜索关键字进行查询。</p><p id="c6b9" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">因为我们将通过标记进行查询，所以我们需要首先找出存在哪些标记，根据 API，我们可以使用 get 方法以 JSON 文件的形式获得一个标记列表。请记住,《卫报》有数百个标签，所以最好通过搜索您想要的标签来筛选。</p><p id="b235" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">下面我们搜索与<strong class="la iu"> <em class="lv">能量有关的标签。</em>T19】</strong></p><blockquote class="lw lx ly"><p id="fd53" class="ky kz lv la b lb lc ju ld le lf jx lg lz li lj lk ma lm ln lo mb lq lr ls lt im bi translated">注意:用您的 API 密钥替换您的 API 密钥</p></blockquote><pre class="kj kk kl km gt mz na nb nc aw nd bi"><span id="f61b" class="ne md it na b gy nf ng l nh ni">tag_json = requests.get(‘https://content.guardianapis.com/tags?q=energy&amp;page-size=200&amp;api-key=YOUR API KEY).json()</span></pre><p id="add5" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">返回的是一个 JSON，其中包含所有带有关键字 energy 的标签。所以我只是从列表中选了一些我感兴趣的放入一个列表中。下面是我挑的几个。</p><pre class="kj kk kl km gt mz na nb nc aw nd bi"><span id="9caf" class="ne md it na b gy nf ng l nh ni">tag_list = ['environment/energy', 'money/energy', 'technology/energy', 'science/energy', 'environment/energy-storage',<br/>           'business/energy-industry', 'environment/energy-monitoring', 'environment/renewableenergy',<br/>           'sustainable-business/hubs-energy-efficiency']</span></pre><p id="e6c7" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">让我们看看列表中的第一个标签，我将查询文章数据中的特定标签“环境/能源”。我把最大页面大小设置为 200，这似乎是每次调用所能达到的最大值。</p><p id="7d79" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated"><em class="lv">注意:API 调用中的 Page 表示页码，例如，如果我在一个页面上放置 200，放置 1 作为页码将提取第一个 200，放置 2 将提取第二个 200 </em></p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nj nk l"/></div></figure><p id="3ad5" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">问题是，您一次只能查询大约 200 个，所以让我们讨论一下如何绕过它。</p><h1 id="f043" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">在一个函数中拉入超过 200 行(限制)</h1><p id="9db3" class="pw-post-body-paragraph ky kz it la b lb mu ju ld le mv jx lg lh mw lj lk ll mx ln lo lp my lr ls lt im bi translated">为此，我们可以简单地编写能够处理 for 循环的函数。幸运的是，我们知道有多少结果，所以我们可以计划我们需要多少数据。如果我们每页有 200 行，那么我们可以写一个 If 语句和 for 循环来说，如果有超过 200 行要获取，那么做一个 for 循环来获取每页。</p><p id="9d95" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我们可以创建 3 个函数:</p><blockquote class="lw lx ly"><p id="458c" class="ky kz lv la b lb lc ju ld le lf jx lg lz li lj lk ma lm ln lo mb lq lr ls lt im bi translated">1)查询一个响应</p><p id="9c39" class="ky kz lv la b lb lc ju ld le lf jx lg lz li lj lk ma lm ln lo mb lq lr ls lt im bi translated">2)检查存在多少数据并调用更多页面。将所有内容放在一个列表中</p><p id="e84c" class="ky kz lv la b lb lc ju ld le lf jx lg lz li lj lk ma lm ln lo mb lq lr ls lt im bi translated">3)将 json 响应列表转换为数据帧</p></blockquote><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nj nk l"/></div></figure><p id="997d" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">有了这三个功能，您现在可以根据自己的需要调用任意多的文章，只要每天调用次数不超过 5，000 次，即 1，000，000 篇文章！</p><h1 id="d8e9" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">拉入多个标签</h1><p id="ab1f" class="pw-post-body-paragraph ky kz it la b lb mu ju ld le mv jx lg lh mw lj lk ll mx ln lo lp my lr ls lt im bi translated">最后一个功能是如果我们想拉进多个标签。之前我创建了一个我感兴趣的标签列表。谜题的最后一部分是在这些标签上运行 for 循环。</p><h1 id="d726" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">端到端代码</h1><blockquote class="lw lx ly"><p id="0dd5" class="ky kz lv la b lb lc ju ld le lf jx lg lz li lj lk ma lm ln lo mb lq lr ls lt im bi translated">如果你愿意的话，下面是可以复制粘贴的端到端代码:</p></blockquote><p id="1612" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">不要忘记更改您的 API 密钥。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nj nk l"/></div></figure><p id="3286" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">样本输出:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nl"><img src="../Images/83f6002ca6c3cac8b195252fac9ca124.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*aza8hbBjICqOSjgNGdmrAA.png"/></div></div></figure><h1 id="24ca" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">潜在的未来用途</h1><h2 id="a288" class="ne md it bd me nm nn dn mi no np dp mm lh nq nr mo ll ns nt mq lp nu nv ms nw bi translated">Tableau 仪表板监控新闻</h2><p id="2393" class="pw-post-body-paragraph ky kz it la b lb mu ju ld le mv jx lg lh mw lj lk ll mx ln lo lp my lr ls lt im bi translated">为了掌握能源行业的最新消息，我创建了一个 Tableau 仪表板来查看一段时间内的新闻量，如果我点击一个条形，下面会输出一个文章列表。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nx"><img src="../Images/eaeed66139b2d1a28da7f598d265ca51.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*tmUYiRWWCi5pZTdEGkxjTw.png"/></div></div></figure><h2 id="c824" class="ne md it bd me nm nn dn mi no np dp mm lh nq nr mo ll ns nt mq lp nu nv ms nw bi translated">NLP 培训(使用 Google AutoML)</h2><p id="b6b7" class="pw-post-body-paragraph ky kz it la b lb mu ju ld le mv jx lg lh mw lj lk ll mx ln lo lp my lr ls lt im bi translated">我之前说过，这是使用这种标记来训练 NLP 模型的完美数据。您可以获得带有特定标签的数据集，并使用它们来训练您的模型。我推荐使用 Google AutoML，你可以在这里找到<a class="ae lu" href="https://medium.com/voice-tech-podcast/auto-text-classification-using-googles-automl-80f151ffa176" rel="noopener">的教程</a>。或者，继续使用 Python 和 Scikit learn。</p><p id="a275" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我希望这有所帮助——愉快的数据提取。</p><blockquote class="ny"><p id="797d" class="nz oa it bd ob oc od oe of og oh lt dk translated">如果你喜欢这篇文章，请留下掌声和关注支持！</p></blockquote><p id="5139" class="pw-post-body-paragraph ky kz it la b lb oi ju ld le oj jx lg lh ok lj lk ll ol ln lo lp om lr ls lt im bi translated">或者，如果您有兴趣加入 Medium 社区，这里有一个推荐链接:</p><div class="on oo gp gr op oq"><a href="https://medium.com/@adrian.causby15/membership" rel="noopener follow" target="_blank"><div class="or ab fo"><div class="os ab ot cl cj ou"><h2 class="bd iu gy z fp ov fr fs ow fu fw is bi translated">通过我的推荐链接加入 Medium-Adrian caus by</h2><div class="ox l"><p class="bd b dl z fp ov fr fs ow fu fw dk translated">medium.com</p></div></div><div class="oy l"><div class="oz l pa pb pc oy pd ks oq"/></div></div></a></div></div></div>    
</body>
</html>