<html>
<head>
<title>PowerBI Performance Improvement Strategies Used by Professionals</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">专业人员使用的 PowerBI 性能改进策略</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/powerbi-performance-improvement-strategies-used-by-professionals-48b1a0b504fd#2022-12-07">https://towardsdatascience.com/powerbi-performance-improvement-strategies-used-by-professionals-48b1a0b504fd#2022-12-07</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="2826" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">提高 PowerBI 性能的技巧(第 1 部分)</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/4420d1b07e90b75b298baad67f1183c8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*huo-FGyC0mwE_YlM"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated"><a class="ae ky" href="https://unsplash.com/@campaign_creators?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">活动发起人</a>在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</p></figure><p id="1102" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">创建报告很简单。谁都可以做。然而，将专业人士与其他人区分开来的是报告的表现。在提交报告时，性能至关重要。提高 Power BI 的性能有几个好处。首先，它可以使工具响应更快、更容易使用，从而提高用户满意度和生产率。其次，更快的性能可以支持更复杂和数据密集型的操作，从而实现更高级的分析和洞察。总的来说，提高 Power BI 的性能有助于确保该工具在支持用户需求及其数据分析任务方面有效且高效。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><p id="8324" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在我们开始之前，让我们回顾一下 Power BI 快速总结。Power BI 是一个数据分析和可视化平台，可以收集、分析和可视化来自各种来源的数据。它包括用于数据获取、清理和转换的工具，以及一系列可用于从数据中获得洞察力的预置可视化和仪表板。Power BI 还提供了与各种数据源的连接，包括数据库、云服务和 web APIs，这使得集成来自多个来源的数据并在单个平台上进行分析变得非常容易。借助 Power BI，用户可以收集、清理和转换数据，创建交互式可视化和仪表盘，并与组织中的其他人分享他们的见解。</p><p id="f407" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们开始吧。我将报告创建过程分为四个步骤。它们如下:</p><ul class=""><li id="7d01" class="mc md it lb b lc ld lf lg li me lm mf lq mg lu mh mi mj mk bi translated"><strong class="lb iu">数据采集:</strong>将数据导入 PowerBI</li><li id="7bb0" class="mc md it lb b lc ml lf mm li mn lm mo lq mp lu mh mi mj mk bi translated"><strong class="lb iu">数据建模:</strong>建立数据表之间的关系映射</li><li id="588e" class="mc md it lb b lc ml lf mm li mn lm mo lq mp lu mh mi mj mk bi translated"><strong class="lb iu">模型推进:</strong>如果需要，创建度量和新列</li><li id="9f47" class="mc md it lb b lc ml lf mm li mn lm mo lq mp lu mh mi mj mk bi translated"><strong class="lb iu">报告创建(添加可视化):</strong>将所有可视化内容放在一起</li></ul><p id="02b8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这篇文章将关注第一个部分，即数据采集。包括数据连接和数据加载。我们将探讨数据连接中的连接类型、直接查询和导入模式。在数据加载部分，我们将探讨完全加载和增量加载之间的区别，以及数据连接和 Dat 加载的推荐做法。</p><p id="8f16" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">* *注意:</strong>数据建模、模型改进和报告创建的性能改进将在后续文章中发布。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mq"><img src="../Images/6aa2643a93cfbe8105785412a756094d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*CH5HD8ofv_km98vv5ArLHg.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">报告生成流程</p></figure><h1 id="2328" class="mr ms it bd mt mu mv mw mx my mz na nb jz nc ka nd kc ne kd nf kf ng kg nh ni bi translated">1.数据采集</h1><p id="6a26" class="pw-post-body-paragraph kz la it lb b lc nj ju le lf nk jx lh li nl lk ll lm nm lo lp lq nn ls lt lu im bi translated">将数据导入 PowerBI 称为数据采集。我将数据采集过程分为两个逻辑分区。首先，<strong class="lb iu">创建一个与数据源的连接</strong>，然后定义 powerBI 将如何<strong class="lb iu">在刷新时将数据</strong>加载到系统中。</p><h2 id="cfd6" class="no ms it bd mt np nq dn mx nr ns dp nb li nt nu nd lm nv nw nf lq nx ny nh nz bi translated">1.1:数据连接的类型</h2><p id="3c60" class="pw-post-body-paragraph kz la it lb b lc nj ju le lf nk jx lh li nl lk ll lm nm lo lp lq nn ls lt lu im bi translated">可以通过两种方式在 powerBI 中获取数据:</p><p id="5f1e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">一、直接查询</strong></p><p id="ffd5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">直接查询是您的仪表板在运行时直接查询数据源的方法。每个过滤器和与报告的交互都会引发进一步的查询。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oa"><img src="../Images/4027c13d703687f45c8c1d3013e38bca.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xW_xx6nLbAwavalI05lskQ.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">直接查询图</p></figure><p id="da28" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">使用直接查询的好处:</strong></p><ul class=""><li id="93b6" class="mc md it lb b lc ld lf lg li me lm mf lq mg lu mh mi mj mk bi translated">它使您能够与数据实时交互，确保您始终拥有最新的信息。这在处理大量不断变化的数据集时尤其方便。</li><li id="2c7f" class="mc md it lb b lc ml lf mm li mn lm mo lq mp lu mh mi mj mk bi translated">您可以连接到广泛的数据源。这包括关系数据库、大数据源，甚至是流数据。</li></ul><p id="f0b0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">使用 DirectQuery 时要考虑的事项(性能方面):</strong></p><p id="2831" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">-后端源响应查询结果所用的时间决定了所需的视觉刷新时间，因为所有 DirectQuery 请求都被转发到源数据库。使用 DirectQuery 进行可视化时，建议的响应时间(返回请求的数据)少于 5 秒。</p><p id="00ec" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">数据源快速响应是非常重要的。如果我必须在 SQL 数据库上进行直接查询，我总是从编写 SQL 查询开始，以获得特定表的总行数。如果耗时超过五秒，我会考虑数据库性能调优。这里有两种优化性能的方法。</p><ul class=""><li id="5f81" class="mc md it lb b lc ld lf lg li me lm mf lq mg lu mh mi mj mk bi translated"><strong class="lb iu">使用索引:<br/> - </strong>索引是数据库性能调优的一个重要方面，因为它们允许数据库系统快速发现并从表中获取数据，这大大提高了查询效率。数据库可能会快速搜索索引并发现表<br/>中的相关行，而不是扫描整个表——但是，在某些情况下，索引可能不会提高数据库性能，甚至可能会对性能产生负面影响。例如，如果查询与索引列无关，则不会使用索引，查询将必须扫描整个数据库以检索必要的数据。如果一个索引包含太多的行，它可能不会提供太多的性能提升，因为数据库仍然必须扫描大量的行来识别相关数据。</li><li id="c9d2" class="mc md it lb b lc ml lf mm li mn lm mo lq mp lu mh mi mj mk bi translated"><strong class="lb iu">联接类型:<br/> - </strong>联接是数据库性能调优的重要组成部分，因为它们会极大地影响使用多个表的查询的性能。<br/> -有几种不同类型的表连接，包括内部连接、外部连接和交叉连接。内部联接是最常见的，它返回在两个表中都有匹配值的行。另一方面，外部联接返回一个表中的所有行和另一个表中的匹配行。交叉联接返回两个表中行的所有可能组合。通过优化表的连接方式，可以提高这些查询的效率和性能。</li><li id="088e" class="mc md it lb b lc ml lf mm li mn lm mo lq mp lu mh mi mj mk bi translated"><strong class="lb iu">创建查询计划:</strong><br/>——查询计划是对数据库系统执行 SQL 查询所要采取的动作的详细描述。它描述了操作的顺序、要使用的数据结构和算法，以及关于如何进行查询的其他参数。查询计划是数据库性能调优的一个重要部分，因为它们提供了有关查询将如何运行的信息，并且可以帮助发现需要改进的地方。<br/> -查询计划性能调优经常涉及改变查询、数据库设计或数据库配置，以提高查询性能。这可能包括优化索引的使用、更改模式以优化数据访问，或者使用其他方法来提高查询效率。<br/> -理解和分析查询计划是数据库性能调优的重要组成部分，因为它有助于保证高效地执行查询。</li><li id="a09e" class="mc md it lb b lc ml lf mm li mn lm mo lq mp lu mh mi mj mk bi translated"><strong class="lb iu">查询提示</strong> : <br/> -查询提示是在 SQL 查询中使用的指令，用于向数据库系统提供关于如何执行查询的附加信息或指令。查询提示可以用来影响查询策略，从而影响查询的性能。当数据库优化器无法为查询选择最佳计划，而用户希望为系统提供进一步的指导时，通常会使用查询提示。<br/> -例如，查询提示可用于识别某个用于查询的索引，或指定如何处理查询。<br/> -使用查询提示进行性能调优是提高单个查询性能的有效技术，但是必须小心处理。过度使用查询提示会导致复杂而脆弱的查询，难以维护和理解，并且在不同的情况下可能无法很好地执行。<br/> -一般来说，查询提示<strong class="lb iu"> <em class="ob">应该只作为最后的手段使用</em> </strong>，毕竟其他的性能调优策略已经探索出来了。</li></ul><p id="86e4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">二。进口</strong></p><p id="6f18" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">导入会复制数据源并创建快照。无论何时请求数据，它都直接与存储的数据一起使用，而不是连接到直接的数据源。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oc"><img src="../Images/c0ee96dfc6ca3e4f4c06ae6a03b7911b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*JF6Aa3sXC_En6TZKIs5vvg.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">导入模式图</p></figure><p id="c055" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">使用导入的好处:</strong></p><ul class=""><li id="5342" class="mc md it lb b lc ld lf lg li me lm mf lq mg lu mh mi mj mk bi translated">因为数据被缓存，所以性能比直接查询好。</li><li id="0b77" class="mc md it lb b lc ml lf mm li mn lm mo lq mp lu mh mi mj mk bi translated">完全支持所有 DAX 表达式。</li></ul><p id="06e2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">使用导入模式时的注意事项:</strong></p><ul class=""><li id="1c31" class="mc md it lb b lc ld lf lg li me lm mf lq mg lu mh mi mj mk bi translated">没有刷新，数据就不是实时的。</li><li id="02c0" class="mc md it lb b lc ml lf mm li mn lm mo lq mp lu mh mi mj mk bi translated">根据导入数据的大小，需要大量内存和磁盘空间。在您的计算机上(实施期间)，在云/本地服务器上(发布时)。</li><li id="f0ff" class="mc md it lb b lc ml lf mm li mn lm mo lq mp lu mh mi mj mk bi translated">PowerBI 文件大小限制为 1 GB 如果文件较大，请升级到高级许可证，允许 50 GB 的数据。</li></ul><p id="8c60" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">总而言之</strong>，</p><blockquote class="od oe of"><p id="2e5a" class="kz la ob lb b lc ld ju le lf lg jx lh og lj lk ll oh ln lo lp oi lr ls lt lu im bi translated">如果数据大小适中，导入模式是最好的，但是在数据刷新之前，您将无法访问最新的数据。在这种情况下，DirectQuery 是最好的选择，但是您必须确保您的数据源性能良好。</p></blockquote></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oj"><img src="../Images/bfb3988882f87c664dadd0b6a289dc95.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*EFdySMn0gYVAwxhr"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">克劳迪奥·施瓦茨在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure><h2 id="dfac" class="no ms it bd mt np nq dn mx nr ns dp nb li nt nu nd lm nv nw nf lq nx ny nh nz bi translated">1.2:数据加载</h2><p id="7242" class="pw-post-body-paragraph kz la it lb b lc nj ju le lf nk jx lh li nl lk ll lm nm lo lp lq nn ls lt lu im bi translated">对于报告来说，数据加载过程至关重要。典型的场景是从云中加载大型数据集，然后从数据源加载到报表中。</p><p id="0cac" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">powerBI 中的数据源可以是 Excel 电子表格(例如)、JSON 文件(例如)或任何类型的输入文件，如 XML、CSV 等。必须使用 Power BI“主页”选项卡中“数据源”窗格上的“加载数据源”按钮将此数据源加载到 Power BI 中；这是创建数据集的第一步。此步骤需要一些时间，如果您没有访问允许加载的数据源的权限，则可能需要额外的步骤。</p><p id="8829" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">确保使用有效的方法将数据加载到报告中。这将有助于提高整体性能。powerBI 中有两种主要的负载类型。</p><p id="ed76" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">一、满载</strong></p><p id="a6c0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这是 powerBI 中的默认负载类型。满载意味着每次检索完整的数据集并丢弃以前的数据。这可能有点麻烦，尤其是如果您想要生成一个不限于数据集的特定子集的报告。满负荷可能不适用于所有数据集，但它将适用于它们！</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ok"><img src="../Images/3af91896df7f05a7c7fe0f9968f81243.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*RAWI0ybIwEV1ioxA-_8-YQ.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">导入模式的满负荷</p></figure><p id="46c2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果数据量很小且数据变化频率很高，则首选满载，但是，如果数据量很大，则成本会很高，因为每次都会完全擦除和加载数据。这就是增量加载的用处所在。</p><p id="f713" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">二。增量负载</strong></p><p id="4691" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">假设你有五年前的数据。只有最近的数据更改，其他数据保持不变。在这种情况下，增量负载是理想的选择。它只刷新最近的数据，不刷新以前的数据。</p><p id="fadd" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">当您应用增量负载时，它会在您的数据上创建一个动态分区。由于这种分区，对数据的读取操作变得更快，从而提高了性能。该分区将需要定期刷新的数据与刷新频率较低的数据分开。</p><p id="1a8e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">因为，增量加载有助于减少刷新数据集所需的时间和资源，并且可以提高 PowerBI 报告的响应速度。下图显示了增量加载的刷新周期。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ol"><img src="../Images/d6a1eba5edd42a0b7b6cce5a97dc09fd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Cm53BFf_UZ5CsQT2PH-WfA.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">增量负载</p></figure><p id="3fd1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">若要使用增量加载，首先需要确定数据集中的哪些列包含将用于确定哪些记录是新的或更新的信息。这通常是时间戳或唯一标识符。然后，您可以配置 PowerBI，只加载这些列中的值大于上一次加载的最大值的记录。</p><p id="356b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">例如，假设您有一个包含客户订单的数据集，并且您希望使用增量加载来只加载新订单。您可以使用订单日期作为列来确定哪些记录是新的。在第一次加载时，PowerBI 将加载数据集中的所有订单。在后续装载中，PowerBI 将只装载日期晚于前一次装载的最大日期的订单。</p><p id="2e66" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">一言以蔽之</strong>，</p><blockquote class="od oe of"><p id="9945" class="kz la ob lb b lc ld ju le lf lg jx lh og lj lk ll oh ln lo lp oi lr ls lt lu im bi translated">如果数据很小并且不经常更改，请使用满载。但是，如果您有大量数据，并且大部分历史记录没有更改，增量刷新是最佳选择。增量刷新将减少加载时间，从而提高性能。</p></blockquote></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><p id="4920" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在本文中，我们探讨了提高 PowerBI 报告性能的数据获取注意事项。我们讨论了数据连接，包括导入模式和直接查询，以及数据加载，包括完全加载和增量加载。在下面的帖子中，我们将讨论在开发数据模型以获得最佳性能时需要考虑的因素。</p><p id="e4ca" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果您喜欢这篇文章，并且想阅读本系列的下一部分，请关注我，以便在文章发布时收到通知。你也可以通过<a class="ae ky" href="https://medium.com/@salehas222/subscribe" rel="noopener">点击这里</a>订阅 Medium，在你方便的时候阅读这样有趣的文章。</p><p id="41fd" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">形象学分</strong></p><p id="9dae" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">所有图片，除非特别注明，均为作者所有。</p></div></div>    
</body>
</html>