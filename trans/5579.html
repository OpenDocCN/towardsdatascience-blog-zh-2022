<html>
<head>
<title>How to Convert a Dictionary Into a Pandas DataFrame</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何将字典转换成熊猫数据框架</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/dict-to-pandas-df-29ba731fc256#2022-12-16">https://towardsdatascience.com/dict-to-pandas-df-29ba731fc256#2022-12-16</a></blockquote><div><div class="fc ii ij ik il im"/><div class="in io ip iq ir"><div class=""/><div class=""><h2 id="318f" class="pw-subtitle-paragraph jr it iu bd b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki dk translated">使用 Pandas 将 Python 字典转换为数据帧</h2></div><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj kj"><img src="../Images/304b32875e1864e756649dd6cdf26236.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*QCFmiw784Y4QrtxpnD4Lvw.jpeg"/></div></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">照片由<a class="ae kz" href="https://unsplash.com/@davidschultz?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">大卫·舒尔茨</a>在<a class="ae kz" href="https://unsplash.com/s/photos/programming?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</p></figure><p id="c56d" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated"><code class="fe lw lx ly lz b"><a class="ae kz" href="https://pandas.pydata.org/" rel="noopener ugc nofollow" target="_blank">pandas</a></code>是 Python 生态系统中最受欢迎的库之一，它通过提供直观而强大的 API 让开发人员与数据进行交互，以快速有效的方式用于数据分析和操作。</p><p id="cc32" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">使用 Python 和 pandas 时，最常见的任务之一是将字典转换为数据帧。当您想要对当前存储在字典数据结构中的数据进行快速分析甚至可视化时，这将非常有用。</p><p id="5ba3" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">在本文中，我们将探讨如何以几种不同的方式将 Python 字典转换成 pandas 数据框架，这取决于数据最初在 dict 中是如何构造和存储的。</p></div><div class="ab cl ma mb hy mc" role="separator"><span class="md bw bk me mf mg"/><span class="md bw bk me mf mg"/><span class="md bw bk me mf"/></div><div class="in io ip iq ir"><h2 id="0df1" class="mh mi iu bd mj mk ml dn mm mn mo dp mp lj mq mr ms ln mt mu mv lr mw mx my mz bi translated">从 Python 字典创建熊猫数据框架</h2><p id="7f9f" class="pw-post-body-paragraph la lb iu lc b ld na jv lf lg nb jy li lj nc ll lm ln nd lp lq lr ne lt lu lv in bi translated">现在，为了从 Python 字典中创建一个 pandas 数据帧，我们可以使用<code class="fe lw lx ly lz b">pandas.DataFrame.from_dict</code>方法，该方法用于从类似数组的 dict 或 dicts 对象中构造数据帧。</p><p id="744b" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">让我们用一些虚拟值创建一个示例 Python 字典，我们将在接下来的几节中使用这些虚拟值来演示一些将其转换成 pandas 数据帧的有趣方法。</p><pre class="kk kl km kn gu nf lz ng bn nh ni bi"><span id="9839" class="nj mi iu lz b be nk nl l nm nn">users = {<br/>  'fist_name': ['John', 'Andrew', 'Maria', 'Helen'],<br/>  'last_name': ['Brown', 'Purple', 'White', 'Blue'],<br/>  'is_enabled': [True, False, False, True],<br/>  'age': [25, 48, 76, 19]<br/>}</span></pre><p id="5fff" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">在这个示例字典中，键对应于数据帧的列，而列表中的每个元素对应于特定列的行值。因此，我们可以(可选地)指定<code class="fe lw lx ly lz b">orient</code>等于<code class="fe lw lx ly lz b">'columns'</code></p><blockquote class="no np nq"><p id="b04f" class="la lb nr lc b ld le jv lf lg lh jy li ns lk ll lm nt lo lp lq nu ls lt lu lv in bi translated">数据的“方向”。如果传递的字典的键应该是结果数据帧的列，则传递' columns '(默认)</p><p id="1671" class="la lb nr lc b ld le jv lf lg lh jy li ns lk ll lm nt lo lp lq nu ls lt lu lv in bi translated">— <a class="ae kz" href="https://pandas.pydata.org/docs/reference/api/pandas.DataFrame.from_dict.html" rel="noopener ugc nofollow" target="_blank">熊猫文档</a></p></blockquote><pre class="kk kl km kn gu nf lz ng bn nh ni bi"><span id="fa60" class="nj mi iu lz b be nk nl l nm nn">import pandas as pd <br/><br/><br/>users = {<br/>  'fist_name': ['John', 'Andrew', 'Maria', 'Helen'],<br/>  'last_name': ['Brown', 'Purple', 'White', 'Blue'],<br/>  'is_enabled': [True, False, False, True],<br/>  'age': [25, 48, 76, 19]<br/>}<br/><br/><br/>df = pd.DataFrame.from_dict(users)</span></pre><p id="124b" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">我们刚刚使用 Python 字典创建了一个熊猫数据框架！</p><pre class="kk kl km kn gu nf lz ng bn nh ni bi"><span id="1ad0" class="nj mi iu lz b be nk nl l nm nn">print(df)<br/><br/>  fist_name last_name  is_enabled  age<br/>0      John     Brown        True   25<br/>1    Andrew    Purple       False   48<br/>2     Maria     White       False   76<br/>3     Helen      Blue        True   19</span></pre><p id="b205" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">这种方法仅适用于字典中的数据是以每个键对应于 DataFrame 列的方式构造的情况。如果我们有不同的结构会怎么样？</p></div><div class="ab cl ma mb hy mc" role="separator"><span class="md bw bk me mf mg"/><span class="md bw bk me mf mg"/><span class="md bw bk me mf"/></div><div class="in io ip iq ir"><h2 id="4c30" class="mh mi iu bd mj mk ml dn mm mn mo dp mp lj mq mr ms ln mt mu mv lr mw mx my mz bi translated">将字典关键字填充为行</h2><p id="e630" class="pw-post-body-paragraph la lb iu lc b ld na jv lf lg nb jy li lj nc ll lm ln nd lp lq lr ne lt lu lv in bi translated">现在让我们假设我们有一个字典，它的键对应于我们想要创建的数据帧的行。</p><pre class="kk kl km kn gu nf lz ng bn nh ni bi"><span id="8d8e" class="nj mi iu lz b be nk nl l nm nn">users = {<br/>  'row_1': ['John', 'Brown', True, 25],<br/>  'row_2': ['Andrew', 'Purple', False, 48],<br/>  'row_3': ['Maria', 'White', False, 76],<br/>  'row_4': ['Helen', 'Blue', True, 19],<br/>}</span></pre><p id="1a81" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">在这个场景中，我们必须使用下面代码片段中展示的<code class="fe lw lx ly lz b">orient='index'</code>选项，这样字典中的每个键值对都被解析为一个 DataFrame 行。但是请注意，当使用<code class="fe lw lx ly lz b">orient='index'</code>时，我们必须在调用<code class="fe lw lx ly lz b">from_dict()</code>方法时显式指定列名:</p><pre class="kk kl km kn gu nf lz ng bn nh ni bi"><span id="dbb1" class="nj mi iu lz b be nk nl l nm nn">import pandas as pd<br/><br/>users = {<br/>  'row_1': ['John', 'Brown', True, 25],<br/>  'row_2': ['Andrew', 'Purple', False, 48],<br/>  'row_3': ['Maria', 'White', False, 76],<br/>  'row_4': ['Helen', 'Blue', True, 19],<br/>}<br/><br/>cols = ['first_name', 'last_name', 'is_enabled', 'age']<br/>df = pd.DataFrame.from_dict(users, orient='index', columns=cols)</span></pre><p id="704d" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">我们又一次设法用 Python 字典构造了一个 pandas 数据帧，这次是通过将每个键值对解析为一个数据帧行:</p><pre class="kk kl km kn gu nf lz ng bn nh ni bi"><span id="c4dc" class="nj mi iu lz b be nk nl l nm nn">print(df)<br/><br/>      first_name last_name  is_enabled  age<br/>row_1       John     Brown        True   25<br/>row_2     Andrew    Purple       False   48<br/>row_3      Maria     White       False   76<br/>row_4      Helen      Blue        True   19</span></pre><p id="9088" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">您可能已经注意到，每个键也成为新填充的数据帧的索引。如果您希望删除它，可以通过运行以下命令来实现:</p><pre class="kk kl km kn gu nf lz ng bn nh ni bi"><span id="719d" class="nj mi iu lz b be nk nl l nm nn">df.reset_index(drop=True, inplace=True)</span></pre><p id="09dc" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">现在应该重置索引:</p><pre class="kk kl km kn gu nf lz ng bn nh ni bi"><span id="2683" class="nj mi iu lz b be nk nl l nm nn">print(df)<br/><br/><br/>  first_name last_name  is_enabled  age<br/>0       John     Brown        True   25<br/>1     Andrew    Purple       False   48<br/>2      Maria     White       False   76<br/>3      Helen      Blue        True   19</span></pre></div><div class="ab cl ma mb hy mc" role="separator"><span class="md bw bk me mf mg"/><span class="md bw bk me mf mg"/><span class="md bw bk me mf"/></div><div class="in io ip iq ir"><h2 id="8a8e" class="mh mi iu bd mj mk ml dn mm mn mo dp mp lj mq mr ms ln mt mu mv lr mw mx my mz bi translated">紧密定向选项</h2><p id="304d" class="pw-post-body-paragraph la lb iu lc b ld na jv lf lg nb jy li lj nc ll lm ln nd lp lq lr ne lt lu lv in bi translated">从 pandas v1.4.0 开始，当从 Python 字典构造 pandas 数据帧时，您也可以使用<code class="fe lw lx ly lz b">orient='tight'</code>选项。该选项假设输入字典有以下按键:<code class="fe lw lx ly lz b">'index'</code>、<code class="fe lw lx ly lz b">'columns'</code>、<code class="fe lw lx ly lz b">'data'</code>、<code class="fe lw lx ly lz b">'index_names'</code>和<code class="fe lw lx ly lz b">'column_names'</code>。</p><p id="0068" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">例如，以下字典符合此要求:</p><pre class="kk kl km kn gu nf lz ng bn nh ni bi"><span id="7d6c" class="nj mi iu lz b be nk nl l nm nn">data = {<br/>  'index': [('a', 'b'), ('a', 'c')],<br/>  'columns': [('x', 1), ('y', 2)],<br/>  'data': [[1, 3], [2, 4]],<br/>  'index_names': ['n1', 'n2'],<br/>  'column_names': ['z1', 'z2']<br/>}<br/><br/>df = pd.DataFrame.from_dict(data, orient='tight')<br/><br/><br/>print(df)<br/>z1     x  y<br/>z2     1  2<br/>n1 n2      <br/>a  b   1  3<br/>   c   2  4</span></pre><p id="c91d" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">在构建多索引数据框架时，最后一种方法通常很有用。</p></div><div class="ab cl ma mb hy mc" role="separator"><span class="md bw bk me mf mg"/><span class="md bw bk me mf mg"/><span class="md bw bk me mf"/></div><div class="in io ip iq ir"><h2 id="78f3" class="mh mi iu bd mj mk ml dn mm mn mo dp mp lj mq mr ms ln mt mu mv lr mw mx my mz bi translated">最后的想法</h2><p id="f311" class="pw-post-body-paragraph la lb iu lc b ld na jv lf lg nb jy li lj nc ll lm ln nd lp lq lr ne lt lu lv in bi translated">将 Python 字典转换成 pandas 数据框架是一个简单明了的过程。通过根据原始字典的结构方式使用<code class="fe lw lx ly lz b">pd.DataFrame.from_dict</code>方法和正确的<code class="fe lw lx ly lz b">orient</code>选项，您可以很容易地将数据转换成 DataFrame，这样您现在就可以使用 pandas API 执行分析或转换。</p></div><div class="ab cl ma mb hy mc" role="separator"><span class="md bw bk me mf mg"/><span class="md bw bk me mf mg"/><span class="md bw bk me mf"/></div><div class="in io ip iq ir"><p id="f821" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated"><a class="ae kz" href="https://gmyrianthous.medium.com/membership" rel="noopener"> <strong class="lc iv">成为会员</strong> </a> <strong class="lc iv">阅读介质上的每一个故事。你的会员费直接支持我和你看的其他作家。你也可以在媒体上看到所有的故事。</strong></p><div class="nv nw gq gs nx ny"><a href="https://gmyrianthous.medium.com/membership" rel="noopener follow" target="_blank"><div class="nz ab fp"><div class="oa ab ob cl cj oc"><h2 class="bd iv gz z fq od fs ft oe fv fx it bi translated">通过我的推荐链接加入 Medium-Giorgos Myrianthous</h2><div class="of l"><h3 class="bd b gz z fq od fs ft oe fv fx dk translated">作为一个媒体会员，你的会员费的一部分会给你阅读的作家，你可以完全接触到每一个故事…</h3></div><div class="og l"><p class="bd b dl z fq od fs ft oe fv fx dk translated">gmyrianthous.medium.com</p></div></div><div class="oh l"><div class="oi l oj ok ol oh om kt ny"/></div></div></a></div></div><div class="ab cl ma mb hy mc" role="separator"><span class="md bw bk me mf mg"/><span class="md bw bk me mf mg"/><span class="md bw bk me mf"/></div><div class="in io ip iq ir"><p id="676e" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated"><strong class="lc iv">相关文章你可能也喜欢</strong></p><div class="nv nw gq gs nx ny"><a rel="noopener follow" target="_blank" href="/how-to-merge-pandas-dataframes-221e49c41bec"><div class="nz ab fp"><div class="oa ab ob cl cj oc"><h2 class="bd iv gz z fq od fs ft oe fv fx it bi translated">如何合并熊猫数据帧</h2><div class="of l"><h3 class="bd b gz z fq od fs ft oe fv fx dk translated">对熊猫数据帧执行左、右、内和反连接</h3></div><div class="og l"><p class="bd b dl z fq od fs ft oe fv fx dk translated">towardsdatascience.com</p></div></div><div class="oh l"><div class="on l oj ok ol oh om kt ny"/></div></div></a></div></div><div class="ab cl ma mb hy mc" role="separator"><span class="md bw bk me mf mg"/><span class="md bw bk me mf mg"/><span class="md bw bk me mf"/></div><div class="in io ip iq ir"><div class="kk kl km kn gu ny"><a rel="noopener follow" target="_blank" href="/make-class-iterable-python-4d9ec5db9b7a"><div class="nz ab fp"><div class="oa ab ob cl cj oc"><h2 class="bd iv gz z fq od fs ft oe fv fx it bi translated">如何在 Python 中创建用户定义的可重复项</h2><div class="of l"><h3 class="bd b gz z fq od fs ft oe fv fx dk translated">展示了如何在 Python 中创建用户定义的迭代器并使用户定义的类可迭代</h3></div><div class="og l"><p class="bd b dl z fq od fs ft oe fv fx dk translated">towardsdatascience.com</p></div></div><div class="oh l"><div class="oo l oj ok ol oh om kt ny"/></div></div></a></div></div><div class="ab cl ma mb hy mc" role="separator"><span class="md bw bk me mf mg"/><span class="md bw bk me mf mg"/><span class="md bw bk me mf"/></div><div class="in io ip iq ir"><div class="kk kl km kn gu ny"><a rel="noopener follow" target="_blank" href="/visual-sql-joins-4e3899d9d46c"><div class="nz ab fp"><div class="oa ab ob cl cj oc"><h2 class="bd iv gz z fq od fs ft oe fv fx it bi translated">SQL 连接的直观解释</h2><div class="of l"><h3 class="bd b gz z fq od fs ft oe fv fx dk translated">用维恩图和实际例子理解 SQL 连接</h3></div><div class="og l"><p class="bd b dl z fq od fs ft oe fv fx dk translated">towardsdatascience.com</p></div></div><div class="oh l"><div class="op l oj ok ol oh om kt ny"/></div></div></a></div></div></div>    
</body>
</html>