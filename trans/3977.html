<html>
<head>
<title>7 Simple Ways To Enhance Your Matplotlib Charts</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">增强Matplotlib图表的7种简单方法</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/7-simple-ways-to-enhance-your-matplotlib-charts-a232823efed9#2022-09-03">https://towardsdatascience.com/7-simple-ways-to-enhance-your-matplotlib-charts-a232823efed9#2022-09-03</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="a904" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">用这些简单的步骤改善你的matplotlib图形</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/3eab98eb7decbb3f16eaab3291280771.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ujLCPl1BttlOS4S7Jbi8lw.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">照片由Mikael Blomkvist拍摄:<a class="ae ky" href="https://www.pexels.com/photo/person-holding-white-ipad-on-brown-wooden-table-6476589/" rel="noopener ugc nofollow" target="_blank">https://www . pexels . com/photo/person-holding-white-ipad-on-brown-wood-table-6476589/</a></p></figure><p id="520b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Matplotlib 是<a class="ae ky" href="https://www.python.org" rel="noopener ugc nofollow" target="_blank"> Python </a>中最流行的数据可视化库之一。它通常是学习python时遇到的第一个数据可视化库。尽管您可以用几行代码生成图形，但创建的图通常很差，视觉上没有吸引力，没有信息。</p><p id="8c4a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">为了解决这个问题，我们可以用几行额外的代码来增强图形的交流能力。在本文中，我们将介绍如何从一个基本的<a class="ae ky" href="https://matplotlib.org/stable/api/_as_gen/matplotlib.pyplot.scatter.html" rel="noopener ugc nofollow" target="_blank"> matplotlib散点图</a>转变为一个对最终用户/读者来说更具视觉吸引力和信息量更大的散点图。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi lv"><img src="../Images/2344ed1fae7cc8f67e9d87cf5fe1ce38.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*YZumJSywAkNtleekpVJEfg.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">增强matplotlib图形之前和之后。图片由作者提供。</p></figure><h1 id="16f6" class="lw lx it bd ly lz ma mb mc md me mf mg jz mh ka mi kc mj kd mk kf ml kg mm mn bi translated">导入库和数据</h1><p id="e492" class="pw-post-body-paragraph kz la it lb b lc mo ju le lf mp jx lh li mq lk ll lm mr lo lp lq ms ls lt lu im bi translated">在以下如何在<a class="ae ky" href="https://matplotlib.org" rel="noopener ugc nofollow" target="_blank"> matplotlib </a>中增强散点图的示例中，我们将使用一个更大数据集的子集，该数据集是Xeek和FORCE 2020 <em class="mt"> (Bormann等人，2020) </em>举办的机器学习竞赛的一部分。它是在挪威政府的NOLD 2.0许可下发布的，详细信息可以在这里找到:<a class="ae ky" href="https://data.norge.no/nlod/en/2.0/" rel="noopener ugc nofollow" target="_blank">挪威开放政府数据许可(NLOD) 2.0 </a>。</p><p id="8791" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">完整的数据集可以通过以下链接获得:<a class="ae ky" href="https://doi.org/10.5281/zenodo.4351155" rel="noopener ugc nofollow" target="_blank">https://doi.org/10.5281/zenodo.4351155</a>。</p><p id="befb" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">对于本教程，我们将需要导入<a class="ae ky" href="https://matplotlib.org" rel="noopener ugc nofollow" target="_blank"> matplotlib </a>和<a class="ae ky" href="https://pandas.pydata.org" rel="noopener ugc nofollow" target="_blank"> pandas </a>。</p><p id="f267" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然后使用pandas方法<code class="fe mu mv mw mx b">read_csv()</code>将数据读入数据帧。我们还将计算一个密度孔隙度列，用于绘制中子孔隙度。</p><pre class="kj kk kl km gt my mx mz na aw nb bi"><span id="e4c7" class="nc lx it mx b gy nd ne l nf ng">import pandas as pd<br/>import matplotlib.pyplot as plt</span><span id="379a" class="nc lx it mx b gy nh ne l nf ng">df = pd.read_csv('data/Xeek_Well_15-9-15.csv')</span><span id="bdd6" class="nc lx it mx b gy nh ne l nf ng">df['DPHI'] = (2.65 - df['RHOB'])/1.65</span><span id="c131" class="nc lx it mx b gy nh ne l nf ng">df.describe()</span></pre><p id="f57c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">当我们运行上面的代码时，我们用新的DPHI列得到下面的数据摘要。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ni"><img src="../Images/f1504d5d772dd00ea2607191121199c6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*25vKDfwECZd7q8CebC0C3g.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">Xeek / Force 2020数据集中15/9–15井测井测量的统计总结。图片由作者提供。</p></figure><h1 id="5708" class="lw lx it bd ly lz ma mb mc md me mf mg jz mh ka mi kc mj kd mk kf ml kg mm mn bi translated">创造一个基本情节</h1><p id="413a" class="pw-post-body-paragraph kz la it lb b lc mo ju le lf mp jx lh li mq lk ll lm mr lo lp lq ms ls lt lu im bi translated">数据成功加载后，我们可以创建第一个散点图。为此，我们将在x轴上绘制中子孔隙度(NPHI ),在y轴上绘制密度孔隙度(DPHI)。</p><p id="fc04" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们还会将图形大小设置为10 x 8。</p><pre class="kj kk kl km gt my mx mz na aw nb bi"><span id="e090" class="nc lx it mx b gy nd ne l nf ng">plt.figure(figsize=(10,8))</span><span id="f061" class="nc lx it mx b gy nh ne l nf ng">plt.scatter(df['NPHI'], df['DPHI'])</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nj"><img src="../Images/4c080308ae61a8e28dce2f9e557ce729.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6z8cmqlMDE89srq48Zjhmg.png"/></div></div></figure><p id="da28" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">通过这两行代码，我们得到了上面的图。看起来很淡，不是吗？让我们添加一些颜色，使它在视觉上更具吸引力，并允许我们获得一些数据的洞察力。</p><h1 id="b0db" class="lw lx it bd ly lz ma mb mc md me mf mg jz mh ka mi kc mj kd mk kf ml kg mm mn bi translated">用第三个变量添加颜色</h1><p id="9a41" class="pw-post-body-paragraph kz la it lb b lc mo ju le lf mp jx lh li mq lk ll lm mr lo lp lq ms ls lt lu im bi translated">为此，我们将通过伽马射线(GR)对数据进行着色，并将颜色范围设置在0到100之间(<code class="fe mu mv mw mx b">vmin</code>和<code class="fe mu mv mw mx b">vmax</code>参数)。</p><p id="3ef2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们需要使用<code class="fe mu mv mw mx b">plt.colorbar()</code>来显示颜色条。</p><p id="e242" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">最后，我们将通过调用<code class="fe mu mv mw mx b">plt.xlim()</code>和<code class="fe mu mv mw mx b">plt.ylim()</code>将图表的x和y限制设置为从0到0.8。这将使两个轴都从0开始，并达到最大值0.8。</p><pre class="kj kk kl km gt my mx mz na aw nb bi"><span id="e12d" class="nc lx it mx b gy nd ne l nf ng">plt.figure(figsize=(10,8))</span><span id="a0d0" class="nc lx it mx b gy nh ne l nf ng">plt.scatter(df['NPHI'], df['DPHI'], c=df['GR'], vmin=0, vmax=100, cmap='viridis_r')<br/>plt.xlim(0, 0.8)<br/>plt.ylim(0, 0.8)<br/>plt.colorbar()</span></pre><p id="fc29" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们使用的彩色地图是反过来的绿色。这种颜色图在高值和低值之间提供了很好的对比，同时保持了均匀性并且是色盲友好的。</p><p id="7fbe" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">当我们运行上面的代码时，我们得到了下面的图。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nk"><img src="../Images/eccb5e6b75befc5949d8cd4119c95059.png" data-original-src="https://miro.medium.com/v2/resize:fit:1290/format:webp/1*F6S0yB7BcdSvTyOHK0Ra0g.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">matplotlib的基本散点图显示密度孔隙度与中子孔隙度。图片由作者提供。</p></figure><p id="8a76" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果你想了解更多关于选择彩色地图的信息，以及为什么有些彩色地图并不适合所有人，那么我强烈推荐你在这里观看这个视频:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nl nm l"/></div></figure><h1 id="f111" class="lw lx it bd ly lz ma mb mc md me mf mg jz mh ka mi kc mj kd mk kf ml kg mm mn bi translated">从图中删除脊线</h1><p id="daea" class="pw-post-body-paragraph kz la it lb b lc mo ju le lf mp jx lh li mq lk ll lm mr lo lp lq ms ls lt lu im bi translated">我们要做的下一个改变是去掉围绕着图的黑框。这个盒子的每一面被称为一个书脊。移除顶部和右侧有助于使我们的情节更清晰，更具视觉吸引力。</p><p id="28c8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们可以通过调用<code class="fe mu mv mw mx b">plt.gca().spines[side].set_visible(False)</code>来删除右轴和顶轴，这里边可以是顶部、右侧、左侧或底部。</p><pre class="kj kk kl km gt my mx mz na aw nb bi"><span id="f0fa" class="nc lx it mx b gy nd ne l nf ng">plt.figure(figsize=(10,8))</span><span id="c01b" class="nc lx it mx b gy nh ne l nf ng">plt.scatter(df['NPHI'], df['DPHI'], c=df['GR'], vmin=0, vmax=100, cmap='viridis_r')<br/>plt.xlim(0, 0.8)<br/>plt.ylim(0, 0.8)<br/>plt.colorbar()</span><span id="4a9d" class="nc lx it mx b gy nh ne l nf ng">plt.gca().spines['top'].set_visible(False)<br/>plt.gca().spines['right'].set_visible(False)</span></pre><p id="bad9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在去除了这些刺之后，我们的情节看起来更干净，也更少杂乱。此外，颜色条现在感觉像是情节的一部分，而不是看起来被分割开来。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nn"><img src="../Images/ecce4f3507d5f573f087219bee1cf9bd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1302/format:webp/1*Yu0rHxLVdQoBINRmuVJ9Tg.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">移除右侧和顶部脊线(边缘)后的Matplotlib散点图。图片由作者提供。</p></figure><h1 id="5a6e" class="lw lx it bd ly lz ma mb mc md me mf mg jz mh ka mi kc mj kd mk kf ml kg mm mn bi translated">添加标题和轴标签</h1><p id="b222" class="pw-post-body-paragraph kz la it lb b lc mo ju le lf mp jx lh li mq lk ll lm mr lo lp lq ms ls lt lu im bi translated">当查看上面的散点图时，我们可能知道每个轴代表什么，但其他人如何理解这个图是关于什么的，颜色代表什么，什么相对于什么绘制？</p><p id="7410" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">为我们的绘图添加标题和轴标签是创建有效可视化的重要部分。这些可以简单地通过使用:<code class="fe mu mv mw mx b">plt.xlabel</code>、<code class="fe mu mv mw mx b">plt.ylabel</code>和<code class="fe mu mv mw mx b">plt.title</code>来添加。在每个函数中，我们传递想要显示的文本和任何字体属性，比如字体大小。</p><p id="7e65" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">此外，在标签中包含测量单位也是一种很好的做法。这有助于读者更好地理解情节。</p><pre class="kj kk kl km gt my mx mz na aw nb bi"><span id="e3aa" class="nc lx it mx b gy nd ne l nf ng">plt.figure(figsize=(10,8))</span><span id="4c5a" class="nc lx it mx b gy nh ne l nf ng">plt.scatter(df['NPHI'], df['DPHI'], c=df['GR'], vmin=0, vmax=100, cmap='viridis_r')<br/>plt.xlim(0, 0.8)<br/>plt.ylim(0, 0.8)<br/>plt.colorbar(label='Gamma Ray (API)')</span><span id="aafc" class="nc lx it mx b gy nh ne l nf ng">plt.gca().spines['top'].set_visible(False)<br/>plt.gca().spines['right'].set_visible(False)</span><span id="f629" class="nc lx it mx b gy nh ne l nf ng">plt.title('Density Porosity vs Neutron Porosity Scatter Plot', fontsize=14, fontweight='bold')<br/>plt.xlabel('Neutron Porosity (dec)')<br/>plt.ylabel('Density Porosity (dec)')<br/>plt.show()</span></pre><p id="ed1f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">当我们运行上面的代码时，我们得到了下面的图。我们马上就知道轴上画的是什么，图表是关于什么的，颜色范围代表什么。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nj"><img src="../Images/fa0f6e5dec67f476a46d2333b30a12a4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*YxVSga0zP61kYmnTP-6c4g.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">向坐标轴添加标题和标签后的散点图。图片由作者提供。</p></figure><h1 id="6b05" class="lw lx it bd ly lz ma mb mc md me mf mg jz mh ka mi kc mj kd mk kf ml kg mm mn bi translated">添加模糊网格(可选)</h1><p id="3522" class="pw-post-body-paragraph kz la it lb b lc mo ju le lf mp jx lh li mq lk ll lm mr lo lp lq ms ls lt lu im bi translated">根据绘图的目的，我们可能希望向添加一个网格，以便图表的读者可以直观方便地浏览绘图。如果我们想从图中定量提取值，这一点尤其重要。然而，有些时候网格线被认为是“垃圾”,最好不要使用。例如，如果您只想显示数据集中的总体趋势，而不想让读者过多关注原始值。</p><p id="16ae" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在本例中，我们将添加一些模糊的网格线，以便它们不会过多地影响数据。为此，我们需要在代码中添加<code class="fe mu mv mw mx b">plt.grid()</code>。</p><pre class="kj kk kl km gt my mx mz na aw nb bi"><span id="9234" class="nc lx it mx b gy nd ne l nf ng">plt.figure(figsize=(10,8))</span><span id="44e3" class="nc lx it mx b gy nh ne l nf ng">plt.scatter(df['NPHI'], df['DPHI'], c=df['GR'], vmin=0, vmax=100, cmap='viridis_r')<br/>plt.xlim(0, 0.8)<br/>plt.ylim(0, 0.8)<br/>plt.colorbar(label='Gamma Ray (API)')</span><span id="9c20" class="nc lx it mx b gy nh ne l nf ng">plt.gca().spines['top'].set_visible(False)<br/>plt.gca().spines['right'].set_visible(False)</span><span id="8ea6" class="nc lx it mx b gy nh ne l nf ng">plt.title('Density Porosity vs Neutron Porosity Scatter Plot', fontsize=14, fontweight='bold')<br/>plt.xlabel('Neutron Porosity (dec)')<br/>plt.ylabel('Density Porosity (dec)')</span><span id="0a93" class="nc lx it mx b gy nh ne l nf ng">plt.grid()<br/>plt.show()</span></pre><p id="5039" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然而，当我们这样做的时候，我们会发现网格线出现在我们的图的顶部，它看起来并不吸引人。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi no"><img src="../Images/7229f4b2c43882957c8d2d81add502e9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1368/format:webp/1*ZlTcrIwVihHhLJBv1JIZyA.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">添加网格线后的散点图。图片由作者提供。</p></figure><p id="8273" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">为了在后面绘制网格线，我们需要移动<code class="fe mu mv mw mx b">plt.grid()</code>线，使其在调用<code class="fe mu mv mw mx b">plt.scatter()</code>之前，并为<code class="fe mu mv mw mx b">zorder</code>添加参数。这控制了图表组件的绘制顺序。应注意，这些值是相对于图上的其他项目而言的。</p><p id="6ab7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">对于网格，我们希望<code class="fe mu mv mw mx b">zorder</code>值小于我们用于散点图的值。在这个例子中，我将网格的<code class="fe mu mv mw mx b">zorder</code>设为1，散点图的<code class="fe mu mv mw mx b">zorder</code>设为2。</p><p id="ad6f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">此外，我们将为网格添加更多的参数，即控制网格线颜色的<code class="fe mu mv mw mx b">color</code>和控制网格线透明度的<code class="fe mu mv mw mx b">alpha</code>。</p><pre class="kj kk kl km gt my mx mz na aw nb bi"><span id="5b85" class="nc lx it mx b gy nd ne l nf ng">plt.figure(figsize=(10,8))<br/>plt.grid(color='lightgray', alpha=0.5, zorder=1)</span><span id="2134" class="nc lx it mx b gy nh ne l nf ng">plt.scatter(df['NPHI'], df['DPHI'], c=df['GR'], vmin=0, vmax=100, cmap='viridis_r', zorder=2)<br/>plt.xlim(0, 0.8)<br/>plt.ylim(0, 0.8)<br/>plt.colorbar(label='Gamma Ray (API)')</span><span id="84ff" class="nc lx it mx b gy nh ne l nf ng">plt.gca().spines['top'].set_visible(False)<br/>plt.gca().spines['right'].set_visible(False)</span><span id="1d61" class="nc lx it mx b gy nh ne l nf ng">plt.title('Density Porosity vs Neutron Porosity Scatter Plot', fontsize=14, fontweight='bold')<br/>plt.xlabel('Neutron Porosity (dec)')<br/>plt.ylabel('Density Porosity (dec)')</span><span id="a4ef" class="nc lx it mx b gy nh ne l nf ng">plt.show()</span></pre><p id="f1e8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这将返回一个更好的情节，网格线不会太分散注意力。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi np"><img src="../Images/77245146ec7c12bf2c36c597d2fd9e48.png" data-original-src="https://miro.medium.com/v2/resize:fit:1384/format:webp/1*GNpbhE4aqMv0OSx_-Z_YsQ.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">网格线移动到图的后面和数据后面后的Matplotlib散点图。图片由作者提供。</p></figure><h1 id="6f7f" class="lw lx it bd ly lz ma mb mc md me mf mg jz mh ka mi kc mj kd mk kf ml kg mm mn bi translated">更改磅值</h1><p id="be61" class="pw-post-body-paragraph kz la it lb b lc mo ju le lf mp jx lh li mq lk ll lm mr lo lp lq ms ls lt lu im bi translated">下一步是改变每个数据点的大小。目前，这些点相对较大，在我们拥有高密度数据的地方，数据点可以相互重叠。</p><p id="d737" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">解决这个问题的一个方法是减少数据点的大小。这是通过<code class="fe mu mv mw mx b">plt.scatter()</code>功能中的<code class="fe mu mv mw mx b">s</code>参数实现的。在本例中，我们将它设置为5。</p><pre class="kj kk kl km gt my mx mz na aw nb bi"><span id="3729" class="nc lx it mx b gy nd ne l nf ng">plt.figure(figsize=(10,8))<br/>plt.grid(color='lightgray', alpha=0.5, zorder=1)</span><span id="d2b3" class="nc lx it mx b gy nh ne l nf ng">plt.scatter(df['NPHI'], df['DPHI'], c=df['GR'], vmin=0, vmax=100, zorder=2, s=5, cmap='viridis_r')<br/>plt.xlim(0, 0.8)<br/>plt.ylim(0, 0.8)<br/>plt.colorbar(label='Gamma Ray (API)')</span><span id="5218" class="nc lx it mx b gy nh ne l nf ng">plt.gca().spines['top'].set_visible(False)<br/>plt.gca().spines['right'].set_visible(False)</span><span id="a656" class="nc lx it mx b gy nh ne l nf ng">plt.title('Density Porosity vs Neutron Porosity Scatter Plot', fontsize=14, fontweight='bold')<br/>plt.xlabel('Neutron Porosity (dec)')<br/>plt.ylabel('Density Porosity (dec)')<br/>plt.show()</span></pre><p id="423a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">当我们运行这段代码时，我们可以看到数据中更多的变化，并更好地了解一个点的真实位置。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nq"><img src="../Images/b6d1fb041c734581d29aab36db439bbc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1356/format:webp/1*ardhqCmmhYDqdBYIq1j0Uw.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">更改点大小后的matplotlib散点图。图片由作者提供。</p></figure><h1 id="744a" class="lw lx it bd ly lz ma mb mc md me mf mg jz mh ka mi kc mj kd mk kf ml kg mm mn bi translated">注释点</h1><p id="0c8a" class="pw-post-body-paragraph kz la it lb b lc mo ju le lf mp jx lh li mq lk ll lm mr lo lp lq ms ls lt lu im bi translated">当创建数据可视化时，我们经常想把读者的注意力吸引到特定的兴趣点上。这可能包括异常数据点或关键结果。</p><p id="605d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">要添加注释，我们可以使用下面一行:</p><pre class="kj kk kl km gt my mx mz na aw nb bi"><span id="f65f" class="nc lx it mx b gy nd ne l nf ng">plt.annotate('Text We Want to Display', xy=(x,y), xytext=(x_of_text, y_of_text)</span></pre><p id="90c3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">其中<code class="fe mu mv mw mx b">xy</code>是图表上我们想要指向的点，而<code class="fe mu mv mw mx b">xytext</code>是文本的位置。</p><p id="bb16" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果我们愿意，我们还可以包含一个从文本指向图表上的点的箭头。如果文本注释离所讨论的点较远，这很有用。</p><p id="beb1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">为了进一步突出显示一个点或者在一个点不存在的地方添加一个点，我们可以在现有的散点图之上添加另一个散点图，并传入一个x和y值，以及相应的颜色和样式。</p><pre class="kj kk kl km gt my mx mz na aw nb bi"><span id="5cdb" class="nc lx it mx b gy nd ne l nf ng">plt.figure(figsize=(10,8))</span><span id="d5ae" class="nc lx it mx b gy nh ne l nf ng">plt.grid(color='lightgray', alpha=0.5, zorder=1)</span><span id="481b" class="nc lx it mx b gy nh ne l nf ng">plt.scatter(df['NPHI'], df['DPHI'], c=df['GR'], vmin=0, vmax=100, cmap='viridis_r',<br/>            zorder=2, s=5)<br/>plt.xlim(0, 0.8)<br/>plt.ylim(0, 0.8)<br/>plt.colorbar(label='Gamma Ray (API)')</span><span id="4495" class="nc lx it mx b gy nh ne l nf ng">plt.gca().spines['top'].set_visible(False)<br/>plt.gca().spines['right'].set_visible(False)</span><span id="11ed" class="nc lx it mx b gy nh ne l nf ng">plt.title('Density Porosity vs Neutron Porosity Scatter Plot', fontsize=14, fontweight='bold')<br/>plt.xlabel('Neutron Porosity (dec)')<br/>plt.ylabel('Density Porosity (dec)')</span><span id="d52f" class="nc lx it mx b gy nh ne l nf ng">plt.scatter(0.42 ,0.17, color='red', marker='o', s=100, zorder=3)<br/>plt.annotate('Shale Point', xy=(0.42 ,0.17), xytext=(0.5, 0.05),<br/>             fontsize=12, fontweight='bold', <br/>             arrowprops=dict(arrowstyle='-&gt;',lw=3), zorder=4)</span><span id="d680" class="nc lx it mx b gy nh ne l nf ng">plt.show()</span></pre><p id="6832" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">当这段代码运行时，我们得到了下面的图。我们可以看到，一个潜在的页岩点在图上用红色圆圈突出显示，一个清晰的注释用箭头指向它。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nr"><img src="../Images/6f05b4dfc10f4f623041c7fece2d0962.png" data-original-src="https://miro.medium.com/v2/resize:fit:1338/format:webp/1*kPpwUHXtRan-s2xcA58HgQ.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">matplotlib密度孔隙度与中子孔隙度散点图，带文本注释和箭头。图片由作者提供。</p></figure><p id="079f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">请注意，所选点仅用于突出显示目的，需要更详细的解释来确定该数据中的真实页岩点。</p><h1 id="78fb" class="lw lx it bd ly lz ma mb mc md me mf mg jz mh ka mi kc mj kd mk kf ml kg mm mn bi translated">突出感兴趣的领域</h1><p id="2f24" class="pw-post-body-paragraph kz la it lb b lc mo ju le lf mp jx lh li mq lk ll lm mr lo lp lq ms ls lt lu im bi translated">如果我们想要突出显示绘图上的整个区域，我们可以添加一个简单的矩形(或另一个形状)来给该区域加阴影。</p><p id="996e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">为此，我们需要从<code class="fe mu mv mw mx b">matplotlib.patches</code>导入<code class="fe mu mv mw mx b">Rectangle</code>，然后调用下面的代码行。</p><pre class="kj kk kl km gt my mx mz na aw nb bi"><span id="ad55" class="nc lx it mx b gy nd ne l nf ng">plt.gca().add_patch(Rectangle((x_position, y_position), width, height, alpha=0.2, color='yellow'))</span></pre><p id="a437" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe mu mv mw mx b">x_position</code>和<code class="fe mu mv mw mx b">y_position</code>代表矩形的左下角。从那里开始添加宽度和高度。</p><p id="17fe" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们还可以添加一些文本来表明该区域代表什么:</p><pre class="kj kk kl km gt my mx mz na aw nb bi"><span id="fb42" class="nc lx it mx b gy nd ne l nf ng">plt.text(x_position, y_position, s='Text You Want to Display, fontsize=12, fontweight='bold', ha='center', color='grey')</span></pre><p id="587c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe mu mv mw mx b">ha</code>用于水平定位文本。如果设置为居中，则x_position和y_position代表文本字符串的中心。如果设置为left，则x_position和y_position表示该文本字符串的左侧边缘。</p><pre class="kj kk kl km gt my mx mz na aw nb bi"><span id="cf08" class="nc lx it mx b gy nd ne l nf ng">from matplotlib.patches import Rectangle</span><span id="ff16" class="nc lx it mx b gy nh ne l nf ng">plt.figure(figsize=(10,8))</span><span id="ae61" class="nc lx it mx b gy nh ne l nf ng">plt.grid(color='lightgray', alpha=0.5, zorder=1)</span><span id="77e0" class="nc lx it mx b gy nh ne l nf ng">plt.scatter(df['NPHI'], df['DPHI'], c=df['GR'], vmin=0, vmax=100, cmap='viridis_r',<br/>            zorder=2, s=5)<br/>plt.xlim(0, 0.8)<br/>plt.ylim(0, 0.8)<br/>plt.colorbar(label='Gamma Ray (API)')</span><span id="297b" class="nc lx it mx b gy nh ne l nf ng">plt.gca().spines['top'].set_visible(False)<br/>plt.gca().spines['right'].set_visible(False)</span><span id="d5b5" class="nc lx it mx b gy nh ne l nf ng">plt.title('Density Porosity vs Neutron Porosity Scatter Plot', fontsize=14, fontweight='bold')<br/>plt.xlabel('Neutron Porosity (dec)')<br/>plt.ylabel('Density Porosity (dec)')</span><span id="4145" class="nc lx it mx b gy nh ne l nf ng">plt.scatter(0.42 ,0.17, color='red', marker='o', s=100, zorder=3)<br/>plt.annotate('Shale Point', xy=(0.42 ,0.17), xytext=(0.5, 0.05),<br/>             fontsize=12, fontweight='bold', <br/>             arrowprops=dict(arrowstyle='-&gt;',lw=3), zorder=4)</span><span id="b499" class="nc lx it mx b gy nh ne l nf ng">plt.text(0.6, 0.75, s='Possible Washout Effects', fontsize=12, fontweight='bold', ha='center', color='grey')</span><span id="bcc3" class="nc lx it mx b gy nh ne l nf ng">plt.gca().add_patch(Rectangle((0.4, 0.4), 0.4, 0.4, alpha=0.2, color='yellow'))</span><span id="81ca" class="nc lx it mx b gy nh ne l nf ng">plt.show()</span></pre><p id="ee3f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这段代码返回下面的图，其中我们突出显示了我们的区域。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ns"><img src="../Images/7caf931dbb3e74353a8a66b158e217b2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1380/format:webp/1*oMM8u3a0oG5xZkXvB0qdCg.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">添加阴影区域后的matplotlib散点图，以突出冲刷造成的潜在影响。图片由作者提供。</p></figure><h1 id="6ff5" class="lw lx it bd ly lz ma mb mc md me mf mg jz mh ka mi kc mj kd mk kf ml kg mm mn bi translated">摘要</h1><p id="c848" class="pw-post-body-paragraph kz la it lb b lc mo ju le lf mp jx lh li mq lk ll lm mr lo lp lq ms ls lt lu im bi translated">在这个简短的教程中，我们看到了如何从一个由<a class="ae ky" href="https://matplotlib.org" rel="noopener ugc nofollow" target="_blank"> matplotlib </a>生成的基本散点图到一个可读性更强、视觉效果更好的散点图。这表明，通过一点点工作，我们可以得到一个更好的情节，我们可以与他人分享，并轻松地让我们的故事。</p><p id="2426" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们已经看到了如何通过去除脊柱、添加网格线以帮助定性分析、添加标题和标签以显示我们正在显示的内容，以及突出我们想要引起读者注意的关键点来消除不必要的混乱。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi lv"><img src="../Images/2344ed1fae7cc8f67e9d87cf5fe1ce38.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*YZumJSywAkNtleekpVJEfg.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">增强matplotlib图形之前和之后。图片由作者提供。</p></figure></div><div class="ab cl nt nu hx nv" role="separator"><span class="nw bw bk nx ny nz"/><span class="nw bw bk nx ny nz"/><span class="nw bw bk nx ny"/></div><div class="im in io ip iq"><p id="52aa" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><em class="mt">感谢阅读。在你走之前，你一定要订阅我的内容，把我的文章放到你的收件箱里。</em> <a class="ae ky" href="https://andymcdonaldgeo.medium.com/subscribe" rel="noopener"> <strong class="lb iu"> <em class="mt">你可以在这里做！</em></strong></a><strong class="lb iu"><em class="mt"/></strong><em class="mt">或者，您也可以</em> <a class="ae ky" href="https://fabulous-founder-2965.ck.page/2ca286e572" rel="noopener ugc nofollow" target="_blank"> <strong class="lb iu"> <em class="mt">注册我的简讯</em> </strong> </a> <em class="mt">免费将更多内容直接发送到您的收件箱。</em></p><p id="5272" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">其次，通过注册会员，你可以获得完整的媒介体验，并支持我和其他成千上万的作家。每月只需花费你5美元，你就可以接触到所有精彩的媒体文章，也有机会通过写作赚钱。如果你用 <a class="ae ky" href="https://andymcdonaldgeo.medium.com/membership" rel="noopener"> <strong class="lb iu"> <em class="mt">我的链接</em></strong></a><strong class="lb iu"><em class="mt"/></strong><em class="mt">报名，你直接用你的一部分费用支持我，不会多花你多少钱。如果你这样做了，非常感谢你的支持！</em></p><h1 id="81a3" class="lw lx it bd ly lz ma mb mc md me mf mg jz mh ka mi kc mj kd mk kf ml kg mm mn bi translated">参考</h1><p id="9b14" class="pw-post-body-paragraph kz la it lb b lc mo ju le lf mp jx lh li mq lk ll lm mr lo lp lq ms ls lt lu im bi translated">博尔曼，彼得，奥桑德，彼得，迪里布，法哈德，曼拉尔，投降，&amp;迪辛顿，彼得。(2020).机器学习竞赛FORCE 2020井测井和岩相数据集[数据集]。芝诺多。<a class="ae ky" href="http://doi.org/10.5281/zenodo.4351156" rel="noopener ugc nofollow" target="_blank">http://doi.org/10.5281/zenodo.4351156</a></p></div></div>    
</body>
</html>