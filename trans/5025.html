<html>
<head>
<title>Moving Pandas Columns Around</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">四处移动熊猫柱</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/moving-pandas-columns-around-c0fad1043d3a#2022-11-08">https://towardsdatascience.com/moving-pandas-columns-around-c0fad1043d3a#2022-11-08</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="248e" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">简化更改数据帧中列顺序的过程</h2></div><h1 id="b2e7" class="ki kj it bd kk kl km kn ko kp kq kr ks jz kt ka ku kc kv kd kw kf kx kg ky kz bi translated">概观</h1><p id="1b8c" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">有几个原因可能会让你改变你的熊猫专栏的顺序。</p><ul class=""><li id="b29b" class="lw lx it lc b ld ly lg lz lj ma ln mb lr mc lv md me mf mg bi translated">你希望目标变量在最右边。</li><li id="f77e" class="lw lx it lc b ld mh lg mi lj mj ln mk lr ml lv md me mf mg bi translated">您希望逐列跟踪数据准备的进度，在处理数据时按顺序移动它们。</li><li id="f2dd" class="lw lx it lc b ld mh lg mi lj mj ln mk lr ml lv md me mf mg bi translated">您(匆忙地)创建了一些测试列……现在是时候整理一下了。</li><li id="d834" class="lw lx it lc b ld mh lg mi lj mj ln mk lr ml lv md me mf mg bi translated">您有一个感兴趣的变量，它被埋在400列中的第332列。将它放在零位置会提高输出的可读性。</li></ul><p id="6f4c" class="pw-post-body-paragraph la lb it lc b ld ly ju lf lg lz jx li lj mm ll lm ln mn lp lq lr mo lt lu lv im bi translated">有几种方法可以完成这项任务。有些人比其他人更好。</p><p id="b06c" class="pw-post-body-paragraph la lb it lc b ld ly ju lf lg lz jx li lj mm ll lm ln mn lp lq lr mo lt lu lv im bi translated">本文展示了一些优雅地利用原生Python <code class="fe mq mr ms mt b">list.remove()</code>和<code class="fe mq mr ms mt b">list.insert()</code>方法的例子。</p><h1 id="13c1" class="ki kj it bd kk kl km kn ko kp kq kr ks jz kt ka ku kc kv kd kw kf kx kg ky kz bi translated">数据+设置</h1><p id="0f35" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">为了便于参考，本文引用了Seaborn和Stata示例数据(全部在线提供)。我们从导入Pandas、Seaborn的标准设置开始，然后加载数据(auto2.dta和tips.csv)。<em class="mu">参见本文末尾的数据许可</em>。</p><pre class="mv mw mx my gt mz mt na nb aw nc bi"><span id="420d" class="nd kj it mt b gy ne nf l ng nh">import pandas as pd<br/>import seaborn as sns</span><span id="e6bd" class="nd kj it mt b gy ni nf l ng nh">cars = pd.read_stata('http://www.stata-press.com/data/r15/' + /<br/>                      'auto2.dta')<br/>tips = sns.load_dataset('tips')</span></pre><figure class="mv mw mx my gt nk gh gi paragraph-image"><div class="gh gi nj"><img src="../Images/9b3609ca98f856ba19fd5b69b4add028.png" data-original-src="https://miro.medium.com/v2/resize:fit:1024/format:webp/1*FEluPeo9lL4QFWquCE93Gw.png"/></div><p class="nn no gj gh gi np nq bd b be z dk translated">图片鸣谢:作者使用Jasper.Ai创作。</p></figure><h1 id="f335" class="ki kj it bd kk kl km kn ko kp kq kr ks jz kt ka ku kc kv kd kw kf kx kg ky kz bi translated">汽车:将价格移到最左边</h1><p id="53da" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">当它第一次加载时，你会在汽车数据的最左边找到价格。</p><figure class="mv mw mx my gt nk gh gi paragraph-image"><div role="button" tabindex="0" class="ns nt di nu bf nv"><div class="gh gi nr"><img src="../Images/a2b1cd093d7fc8ef5a52f3ac4dd3d910.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rp8PdVOoS-zKcVgl2iB6gA.png"/></div></div><p class="nn no gj gh gi np nq bd b be z dk translated">图片鸣谢:作者插画。屏幕截图。</p></figure><p id="0daf" class="pw-post-body-paragraph la lb it lc b ld ly ju lf lg lz jx li lj mm ll lm ln mn lp lq lr mo lt lu lv im bi translated">我们的任务是将价格移动到数据集中的第一个位置。我们只需要四行代码。</p><pre class="mv mw mx my gt mz mt na nb aw nc bi"><span id="0e04" class="nd kj it mt b gy ne nf l ng nh"># Get the column names in their current order.<br/>new_order = cars.columns.to_list()</span><span id="53af" class="nd kj it mt b gy ni nf l ng nh"># Remove price from the list.<br/>new_order.remove('price')</span><span id="1192" class="nd kj it mt b gy ni nf l ng nh"># Place price at the beginning of the list.<br/>new_order.insert(0, 'price')</span><span id="9224" class="nd kj it mt b gy ni nf l ng nh"># Redefine the data frame with the new column order.<br/>cars = cars[new_order]</span></pre><p id="fc5c" class="pw-post-body-paragraph la lb it lc b ld ly ju lf lg lz jx li lj mm ll lm ln mn lp lq lr mo lt lu lv im bi translated">我们现在在最左边的列(第一列，或者零列)中找到价格。</p><figure class="mv mw mx my gt nk gh gi paragraph-image"><div role="button" tabindex="0" class="ns nt di nu bf nv"><div class="gh gi nr"><img src="../Images/8bbd8c83ef4d554a537e4e77400edf09.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*w4cRb9YMH5GHcLM5ZTkkhg.png"/></div></div><p class="nn no gj gh gi np nq bd b be z dk translated">图片鸣谢:作者插画。屏幕截图。</p></figure><h1 id="fc59" class="ki kj it bd kk kl km kn ko kp kq kr ks jz kt ka ku kc kv kd kw kf kx kg ky kz bi translated">提示:将日期+时间移到最左边</h1><p id="d83c" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">一次移动两列(如下所示)与移动一列(如上所示)大致相同。当第一次加载该数据时，我们看到日期和时间分别位于位置4和位置5。</p><figure class="mv mw mx my gt nk gh gi paragraph-image"><div role="button" tabindex="0" class="ns nt di nu bf nv"><div class="gh gi nw"><img src="../Images/5560dfdded49229e2a732ab5480db8e7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4qdZ6MyRKz3BUCN1JSlF7w.png"/></div></div><p class="nn no gj gh gi np nq bd b be z dk translated">图片鸣谢:作者插画。屏幕截图。</p></figure><p id="7404" class="pw-post-body-paragraph la lb it lc b ld ly ju lf lg lz jx li lj mm ll lm ln mn lp lq lr mo lt lu lv im bi translated">我们希望将它们移动到最左边的位置0和1。在此过程中，我们还将颠倒它们的顺序，使时间位于第一位，位置为0，而日期位于第二位，位置为1。</p><p id="965d" class="pw-post-body-paragraph la lb it lc b ld ly ju lf lg lz jx li lj mm ll lm ln mn lp lq lr mo lt lu lv im bi translated"><code class="fe mq mr ms mt b">list.remove()</code>和<code class="fe mq mr ms mt b">list.insert()</code>方法不接受列表作为参数。这意味着移动多列需要相应增加代码。</p><pre class="mv mw mx my gt mz mt na nb aw nc bi"><span id="1c79" class="nd kj it mt b gy ne nf l ng nh"># Get the column names in their current order.<br/>new_order = cars.columns.to_list()</span><span id="8463" class="nd kj it mt b gy ni nf l ng nh"># Remove the columns from their original positions.<br/>new_order.remove('day')<br/>new_order.remove('time')</span><span id="d2b0" class="nd kj it mt b gy ni nf l ng nh"># Add the columns back but in desired positions.<br/>new_order.insert(0, 'day')<br/>new_order.insert(0, 'time')</span></pre><p id="2b67" class="pw-post-body-paragraph la lb it lc b ld ly ju lf lg lz jx li lj mm ll lm ln mn lp lq lr mo lt lu lv im bi translated">这里显示的结果。</p><figure class="mv mw mx my gt nk gh gi paragraph-image"><div role="button" tabindex="0" class="ns nt di nu bf nv"><div class="gh gi nw"><img src="../Images/2e840eec782177b5f45e0bfb04f1712f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*uR6TXQwCfQcHC76TWb6HYg.png"/></div></div><p class="nn no gj gh gi np nq bd b be z dk translated">图片鸣谢:作者插画。屏幕截图。</p></figure><p id="a938" class="pw-post-body-paragraph la lb it lc b ld ly ju lf lg lz jx li lj mm ll lm ln mn lp lq lr mo lt lu lv im bi translated">请注意，要实现这些结果，您可以按任何顺序执行删除。然而，要使<code class="fe mq mr ms mt b">time</code>在列中的顺序在<code class="fe mq mr ms mt b">day</code>之前，插入方法必须按照所示顺序。</p><h1 id="8e28" class="ki kj it bd kk kl km kn ko kp kq kr ks jz kt ka ku kc kv kd kw kf kx kg ky kz bi translated">结论</h1><p id="970f" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">本文演示了两个代码示例，可以让您快速更改Pandas数据帧的顺序。其他工具提供现成的解决方案来实现这一功能。对熊猫来说，有趣的是，你必须发明自己的方式。</p><p id="db39" class="pw-post-body-paragraph la lb it lc b ld ly ju lf lg lz jx li lj mm ll lm ln mn lp lq lr mo lt lu lv im bi translated">我之前写道:</p><blockquote class="nx ny nz"><p id="ae97" class="la lb mu lc b ld ly ju lf lg lz jx li oa mm ll lm ob mn lp lq oc mo lt lu lv im bi translated">在合并多个数据源之后，拥有一个可以快速排序和重新排序列的方法是很方便的。这样做是对未来审查你的工作的科学家的一种常见的礼貌。如果我们把最重要的栏目放在左边，其他人会花更少的时间寻找必要的信息来理解我们的工作。当我们知道我们将返回到我们的工作中以供将来参考时，这个额外的步骤对我们自己也是有帮助的。(来源:<a class="ae mp" rel="noopener" target="_blank" href="/reordering-pandas-dataframe-columns-thumbs-down-on-standard-solutions-1ff0bc2941d5">重新排序熊猫数据框列:否定标准解决方案</a>)</p></blockquote><p id="2667" class="pw-post-body-paragraph la lb it lc b ld ly ju lf lg lz jx li lj mm ll lm ln mn lp lq lr mo lt lu lv im bi translated">您使用过哪些解决方案来移动列？</p><h1 id="c479" class="ki kj it bd kk kl km kn ko kp kq kr ks jz kt ka ku kc kv kd kw kf kx kg ky kz bi translated">感谢阅读</h1><p id="cf84" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">感谢阅读。把你的想法和主意发给我。你可以写信只是为了说声嗨。如果你真的需要告诉我是怎么错的，我期待着尽快和你聊天。推特:<a class="ae mp" href="https://twitter.com/adamrossnelson" rel="noopener ugc nofollow" target="_blank">@ adamrossnelson</a>| LinkedIn:<a class="ae mp" href="http://www.linkedin.com/in/arnelson" rel="noopener ugc nofollow" target="_blank">亚当·罗斯·纳尔逊</a> |脸书:<a class="ae mp" href="http://www.facebook.com/adamrossnelson" rel="noopener ugc nofollow" target="_blank">亚当·罗斯·纳尔逊</a>。</p><h1 id="3f41" class="ki kj it bd kk kl km kn ko kp kq kr ks jz kt ka ku kc kv kd kw kf kx kg ky kz bi translated">数据许可</h1><p id="a84e" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated"><a class="ae mp" href="https://github.com/mwaskom/seaborn/blob/master/LICENSE.md" rel="noopener ugc nofollow" target="_blank"> Seaborn数据许可</a>。Seaborn提供这些数据用于教学、培训、演示和测试目的。你可以在<a class="ae mp" href="https://seaborn.pydata.org/generated/seaborn.load_dataset.html" rel="noopener ugc nofollow" target="_blank">文档</a>或<a class="ae mp" href="https://github.com/mwaskom/seaborn-data/blob/master/tips.csv" rel="noopener ugc nofollow" target="_blank">相关知识库</a>中阅读更多关于这些数据的信息。</p><p id="8c87" class="pw-post-body-paragraph la lb it lc b ld ly ju lf lg lz jx li lj mm ll lm ln mn lp lq lr mo lt lu lv im bi translated"><a class="ae mp" href="https://www.stata-press.com/data/r15/u.html" rel="noopener ugc nofollow" target="_blank"> Stata数据许可</a>。Stata提供这些以及其他数据，用于教学、培训、演示和测试目的。<a class="ae mp" rel="noopener" target="_blank" href="/three-datasets-i-often-use-as-examples-c70ec5b2f793">你可以在之前的文章</a>中读到更多关于这些和其他数据的信息。</p></div></div>    
</body>
</html>