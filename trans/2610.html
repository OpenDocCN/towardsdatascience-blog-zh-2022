<html>
<head>
<title>Stop using “pip freeze” for your Python projects</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">停止对你的Python项目使用“pip冻结”</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/stop-using-pip-freeze-for-your-python-projects-9c37181730f9#2022-06-07">https://towardsdatascience.com/stop-using-pip-freeze-for-your-python-projects-9c37181730f9#2022-06-07</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><figure class="ip iq gp gr ir is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi io"><img src="../Images/8a50dff526ceba20f0e14be7d819ee59.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*SAsPCgXnPpU_uor8"/></div></div><p class="iz ja gj gh gi jb jc bd b be z dk translated">由<a class="ae jd" href="https://unsplash.com/@dev_irl?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Dev Benjamin </a>在<a class="ae jd" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure><div class=""/><div class=""><h2 id="b747" class="pw-subtitle-paragraph kd jf jg bd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku dk translated">讨论为什么“pip冻结”在管理Python依赖项时不那么酷</h2></div></div><div class="ab cl kv kw hu kx" role="separator"><span class="ky bw bk kz la lb"/><span class="ky bw bk kz la lb"/><span class="ky bw bk kz la"/></div><div class="ij ik il im in"><h1 id="65d7" class="lc ld jg bd le lf lg lh li lj lk ll lm km ln kn lo kp lp kq lq ks lr kt ls lt bi translated">介绍</h1><p id="de09" class="pw-post-body-paragraph lu lv jg lw b lx ly kh lz ma mb kk mc md me mf mg mh mi mj mk ml mm mn mo mp ij bi translated">几年前我遇到过pip freeze和virtual env，我完全被震撼了。我是一个总是害怕虚拟环境的人(别问了)，但一旦我知道管理我的依赖关系是多么容易，我就停不下来了。我感觉自己就像一个高级开发人员，为我所有的项目制作虚拟环境。从那时起，我的开发技能成倍增长，我找到了管理我的Python项目的完美方法，对吗？不对！</p><p id="3a05" class="pw-post-body-paragraph lu lv jg lw b lx mq kh lz ma mr kk mc md ms mf mg mh mt mj mk ml mu mn mo mp ij bi translated">这个童话故事发生几个月后，当我回到我的老项目时，我开始面临问题。它们会停止运行，或者可用的依赖项会抛出一些兼容性错误。我很困惑，因为我认为我做的每件事都是对的。我已经通过创建一个虚拟环境来分离项目及其依赖项，那么为什么我的旧项目没有运行呢？事实证明，让我成为更好的Python开发人员的那个东西正成为我的障碍——<strong class="lw jh"><em class="mv">pip冻结。</em> </strong>这是因为使用<em class="mv"> pip冻结处理子依赖的方式。</em></p><h1 id="4b87" class="lc ld jg bd le lf mw lh li lj mx ll lm km my kn lo kp mz kq lq ks na kt ls lt bi translated">问题是</h1><p id="679c" class="pw-post-body-paragraph lu lv jg lw b lx ly kh lz ma mb kk mc md me mf mg mh mi mj mk ml mm mn mo mp ij bi translated">早些时候，当我开始一个新项目时，只要我安装了库，我就会运行我最喜欢的命令。</p><pre class="nb nc nd ne gt nf ng nh ni aw nj bi"><span id="572a" class="nk ld jg ng b gy nl nm l nn no">pip freeze &gt; requirements.txt</span></pre><p id="2f9d" class="pw-post-body-paragraph lu lv jg lw b lx mq kh lz ma mr kk mc md ms mf mg mh mt mj mk ml mu mn mo mp ij bi translated">这就是它引起问题的原因。假设您在项目中安装了包<strong class="lw jh"> A </strong>，它可能有一个子依赖项B、C和d</p><pre class="nb nc nd ne gt nf ng nh ni aw nj bi"><span id="d073" class="nk ld jg ng b gy nl nm l nn no"><strong class="ng jh">A==1.0<br/>B==2.0<br/>C==1.4<br/>D==1.2</strong></span></pre><p id="f71f" class="pw-post-body-paragraph lu lv jg lw b lx mq kh lz ma mr kk mc md ms mf mg mh mt mj mk ml mu mn mo mp ij bi translated">现在说，库<strong class="lw jh"> A </strong>的所有者发布了一个新版本，它使用了库<strong class="lw jh"> B </strong>的不同版本，并删除了库<strong class="lw jh"> C </strong>。由于<strong class="lw jh"> B </strong>和<strong class="lw jh"> C </strong>已经安装完毕<em class="mv"> pip freeze </em>会自动将它们捡起来，并按照它们最初安装时的版本进行卸载。现在，在一个有100多个依赖项的项目中，当您更改库时，您的需求文件将会变得非常有问题。您必须识别所有的子依赖项，并相应地删除它们。在这个例子中，如果A现在从项目中删除，您仍然会被<strong class="lw jh"> B </strong>、<strong class="lw jh"> C </strong>和<strong class="lw jh"> D </strong>所困扰，即使它们只是因为<strong class="lw jh"> A </strong>而被安装。删除它们中的每一个都是一项庞大的任务，在大型项目中可能会非常烦人。</p><p id="bd62" class="pw-post-body-paragraph lu lv jg lw b lx mq kh lz ma mr kk mc md ms mf mg mh mt mj mk ml mu mn mo mp ij bi translated">这个问题还会引发其他许多问题，这些问题可能会在未来的任何一天破坏您的项目。</p><h1 id="1507" class="lc ld jg bd le lf mw lh li lj mx ll lm km my kn lo kp mz kq lq ks na kt ls lt bi translated">解决方案</h1><p id="cb2c" class="pw-post-body-paragraph lu lv jg lw b lx ly kh lz ma mb kk mc md me mf mg mh mi mj mk ml mm mn mo mp ij bi translated">然而，我在这里不仅仅是有问题，我也有一个解决方案。我找到了一个名为<a class="ae jd" href="https://pypi.org/project/pipreqs/" rel="noopener ugc nofollow" target="_blank"> <strong class="lw jh"> <em class="mv"> pipreqs </em> </strong> </a>的库，修复了以上所有问题，非常人性化。</p><h2 id="dbde" class="nk ld jg bd le np nq dn li nr ns dp lm md nt nu lo mh nv nw lq ml nx ny ls nz bi translated">为什么更好？</h2><p id="566f" class="pw-post-body-paragraph lu lv jg lw b lx ly kh lz ma mb kk mc md me mf mg mh mi mj mk ml mm mn mo mp ij bi translated">以下是为什么切换到pipreqs是比使用pip freeze更好的想法的原因。</p><ol class=""><li id="7873" class="oa ob jg lw b lx mq ma mr md oc mh od ml oe mp of og oh oi bi translated"><strong class="lw jh"> <em class="mv"> pip冻结</em>只保存在虚拟环境【1】</strong>中使用<em class="mv"> pip install </em>安装的包</li></ol><p id="cbc8" class="pw-post-body-paragraph lu lv jg lw b lx mq kh lz ma mr kk mc md ms mf mg mh mt mj mk ml mu mn mo mp ij bi translated"><em class="mv"> pip冻结</em>只安装那些使用<em class="mv"> pip安装</em>命令安装的软件包。然而，pip并不是唯一的python包管理器。我们也可以使用<em class="mv">巧克力</em>、<em class="mv">康达</em>、<em class="mv">套装工具</em>等。并且它们不受<em class="mv"> pip冻结</em>的支持，所以我们必须在<em class="mv"> requirements.txt </em>文件中手动编写它们。<em class="mv"> pipreqs，</em>则没有这样的限制。</p><p id="d751" class="pw-post-body-paragraph lu lv jg lw b lx mq kh lz ma mr kk mc md ms mf mg mh mt mj mk ml mu mn mo mp ij bi translated">2.<strong class="lw jh"> <em class="mv"> pip冻结</em>保存环境中的所有包和依赖项，包括那些您在当前项目中不使用的包[1] </strong></p><p id="fb25" class="pw-post-body-paragraph lu lv jg lw b lx mq kh lz ma mr kk mc md ms mf mg mh mt mj mk ml mu mn mo mp ij bi translated">这是<em class="mv"> pip冻结的最大弊端。</em>在一个项目中，依赖关系不断变化，必须添加、更新和删除。然而，使用pip freeze实现这一点是一项艰巨的任务，因为它会转储环境中已经安装的任何内容。<em class="mv"> pipreqs，</em>另一方面，只把那些已经通过导入在项目中使用过的库放到需求文件中。当您稍后试图更改需求文件时，这是非常强大的。</p><p id="3abf" class="pw-post-body-paragraph lu lv jg lw b lx mq kh lz ma mr kk mc md ms mf mg mh mt mj mk ml mu mn mo mp ij bi translated">3.<strong class="lw jh"> <em class="mv"> pipreqs </em>极其容易使用</strong></p><p id="0391" class="pw-post-body-paragraph lu lv jg lw b lx mq kh lz ma mr kk mc md ms mf mg mh mt mj mk ml mu mn mo mp ij bi translated">要生成一个<em class="mv"> requirements.txt </em>文件，您所要做的就是运行下面的命令。</p><pre class="nb nc nd ne gt nf ng nh ni aw nj bi"><span id="c058" class="nk ld jg ng b gy nl nm l nn no"><strong class="ng jh">$ pipreqs</strong></span></pre><p id="db91" class="pw-post-body-paragraph lu lv jg lw b lx mq kh lz ma mr kk mc md ms mf mg mh mt mj mk ml mu mn mo mp ij bi translated">如果requirements.txt文件已经存在，那么运行下面的命令。</p><pre class="nb nc nd ne gt nf ng nh ni aw nj bi"><span id="4de6" class="nk ld jg ng b gy nl nm l nn no"><strong class="ng jh">$ pipreqs --force</strong></span></pre><p id="694c" class="pw-post-body-paragraph lu lv jg lw b lx mq kh lz ma mr kk mc md ms mf mg mh mt mj mk ml mu mn mo mp ij bi translated">这将在项目的主目录中生成一个requirements.txt文件。如果要将文件保存在特定位置，也可以提供路径。</p><pre class="nb nc nd ne gt nf ng nh ni aw nj bi"><span id="ba91" class="nk ld jg ng b gy nl nm l nn no">$ pipreqs /home/project/location</span></pre><p id="d339" class="pw-post-body-paragraph lu lv jg lw b lx mq kh lz ma mr kk mc md ms mf mg mh mt mj mk ml mu mn mo mp ij bi translated">要了解更多关于图书馆的信息，<a class="ae jd" href="https://pypi.org/project/pipreqs/" rel="noopener ugc nofollow" target="_blank">点击这里</a>。你也可以看看其他的选择，比如we <a class="ae jd" href="https://github.com/jazzband/pip-tools" rel="noopener ugc nofollow" target="_blank"> pip-tools </a>和<a class="ae jd" href="https://python-poetry.org/" rel="noopener ugc nofollow" target="_blank">poems</a>。</p></div><div class="ab cl kv kw hu kx" role="separator"><span class="ky bw bk kz la lb"/><span class="ky bw bk kz la lb"/><span class="ky bw bk kz la"/></div><div class="ij ik il im in"><h1 id="812e" class="lc ld jg bd le lf lg lh li lj lk ll lm km ln kn lo kp lp kq lq ks lr kt ls lt bi translated">结论</h1><p id="fb68" class="pw-post-body-paragraph lu lv jg lw b lx ly kh lz ma mb kk mc md me mf mg mh mi mj mk ml mm mn mo mp ij bi translated"><em class="mv"> pip冻结</em>最初可能看起来非常有用，但它可能会因为以下原因搞乱您的项目:</p><ol class=""><li id="8b95" class="oa ob jg lw b lx mq ma mr md oc mh od ml oe mp of og oh oi bi translated">它转储项目中安装的所有库，包括requirements.txt文件中的依赖项和子依赖项。</li><li id="3171" class="oa ob jg lw b lx oj ma ok md ol mh om ml on mp of og oh oi bi translated">它仍然错过了没有使用pip安装的库。</li><li id="74e0" class="oa ob jg lw b lx oj ma ok md ol mh om ml on mp of og oh oi bi translated">如果项目中没有使用某个库，它不会自动移除该库。</li></ol><p id="85ba" class="pw-post-body-paragraph lu lv jg lw b lx mq kh lz ma mr kk mc md ms mf mg mh mt mj mk ml mu mn mo mp ij bi translated">出于上述原因，建议使用<em class="mv"> pipreqs，</em>一个Python库，它修复了上述所有问题，并且更易于使用。</p></div><div class="ab cl kv kw hu kx" role="separator"><span class="ky bw bk kz la lb"/><span class="ky bw bk kz la lb"/><span class="ky bw bk kz la"/></div><div class="ij ik il im in"><h1 id="4eb8" class="lc ld jg bd le lf lg lh li lj lk ll lm km ln kn lo kp lp kq lq ks lr kt ls lt bi translated">参考</h1><ol class=""><li id="4f64" class="oa ob jg lw b lx ly ma mb md oo mh op ml oq mp of og oh oi bi translated">pipreqs官方文件:【https://pypi.org/project/pipreqs/ T2】</li></ol></div><div class="ab cl kv kw hu kx" role="separator"><span class="ky bw bk kz la lb"/><span class="ky bw bk kz la lb"/><span class="ky bw bk kz la"/></div><div class="ij ik il im in"><p id="0e5a" class="pw-post-body-paragraph lu lv jg lw b lx mq kh lz ma mr kk mc md ms mf mg mh mt mj mk ml mu mn mo mp ij bi translated">我写关于Python和数据科学的文章。这是我写的其他一些标题。</p><div class="ip iq gp gr ir or"><a href="https://levelup.gitconnected.com/5-new-features-in-python-3-11-that-makes-it-the-coolest-new-release-in-2022-c9df658ef813" rel="noopener  ugc nofollow" target="_blank"><div class="os ab fo"><div class="ot ab ou cl cj ov"><h2 class="bd jh gy z fp ow fr fs ox fu fw jf bi translated">Python 3.11中的5个新特性使其成为2022年最酷的新版本</h2><div class="oy l"><h3 class="bd b gy z fp ow fr fs ox fu fw dk translated">讨论Python 3.11中的新特性和更新，以及如何安装3.11 Alpha版本</h3></div><div class="oz l"><p class="bd b dl z fp ow fr fs ox fu fw dk translated">levelup.gitconnected.com</p></div></div><div class="pa l"><div class="pb l pc pd pe pa pf ix or"/></div></div></a></div><div class="ip iq gp gr ir or"><a rel="noopener follow" target="_blank" href="/7-must-read-books-for-data-scientists-in-2022-aa87c0f9bffb"><div class="os ab fo"><div class="ot ab ou cl cj ov"><h2 class="bd jh gy z fp ow fr fs ox fu fw jf bi translated">2022年数据科学家必读的7本书</h2><div class="oy l"><h3 class="bd b gy z fp ow fr fs ox fu fw dk translated">帮助你成为更好的数据科学家的技术和非技术书籍</h3></div><div class="oz l"><p class="bd b dl z fp ow fr fs ox fu fw dk translated">towardsdatascience.com</p></div></div><div class="pa l"><div class="pg l pc pd pe pa pf ix or"/></div></div></a></div><div class="ip iq gp gr ir or"><a rel="noopener follow" target="_blank" href="/creating-multipage-applications-using-streamlit-efficiently-b58a58134030"><div class="os ab fo"><div class="ot ab ou cl cj ov"><h2 class="bd jh gy z fp ow fr fs ox fu fw jf bi translated">使用Streamlit创建多页面应用程序(高效！)</h2><div class="oz l"><p class="bd b dl z fp ow fr fs ox fu fw dk translated">towardsdatascience.com</p></div></div><div class="pa l"><div class="ph l pc pd pe pa pf ix or"/></div></div></a></div></div></div>    
</body>
</html>