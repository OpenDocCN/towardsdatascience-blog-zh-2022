<html>
<head>
<title>Jitter plots with Python's Seaborn</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Python的Seaborn抖动图</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/jitter-plots-with-pythons-seaborn-62188bf511b8#2022-08-14">https://towardsdatascience.com/jitter-plots-with-pythons-seaborn-62188bf511b8#2022-08-14</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="bd7e" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">显示分类变量分布的一种简单方法</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/0d9bf88bfbc43d90740828ca9454bc66.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*uhgEXDDwmrTGVr-c0Tgn1g.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">抖动图—图片由作者提供</p></figure><p id="761c" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">没有太多的选项来可视化数值在类别中的分布。通常，这些关系需要在展示之前进行总结。</p><p id="8697" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">箱线图和小提琴图，包括最大值和最小值、中间值和百分位数，可以帮助可视化这些分布。但是它们可能会让许多观众望而生畏，并使试图展示的内容过于复杂。</p><p id="3868" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">本文将使用Python的Seaborn探索抖动图，这是一种简单且用户友好的可视化分类字段分布的方法。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi lu"><img src="../Images/de17fc84ae7a115df1e307fcfb66e311.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qFLctdg45shI3vWr902TSg.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">抖动图—图片由作者提供</p></figure></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h2 id="8b87" class="mc md it bd me mf mg dn mh mi mj dp mk lh ml mm mn ll mo mp mq lp mr ms mt mu bi translated">带状图</h2><p id="beb3" class="pw-post-body-paragraph ky kz it la b lb mv ju ld le mw jx lg lh mx lj lk ll my ln lo lp mz lr ls lt im bi translated">让我们从导入库和加载一些虚拟数据开始。数据集包括一个类别列和一个数值列。</p><pre class="kj kk kl km gt na nb nc nd aw ne bi"><span id="9c6e" class="mc md it nb b gy nf ng l nh ni">import pandas as pd<br/>import numpy as np<br/>import matplotlib.pyplot as plt<br/>import seaborn as sns</span><span id="d6f6" class="mc md it nb b gy nj ng l nh ni"># dataurl = 'https://gist.githubusercontent.com/Thiagobc23/0bc5c5f530e8f8fd98710fe1ccb407ce/raw/4e084668a83ab9d0a0ace1425742835a0563bcef/quality.csv'</span><span id="988a" class="mc md it nb b gy nj ng l nh ni">df = pd.read_csv(url)<br/>df_unit = df.groupby('Unit').mean().reset_index()</span><span id="3bf0" class="mc md it nb b gy nj ng l nh ni"># sort prod units by avg score<br/>df_unit = df_unit.sort_values('Quality Score', ascending=False)</span><span id="dd70" class="mc md it nb b gy nj ng l nh ni"># take a look<br/>print('Dataset: \n', df.head())<br/>print('\n Averages: \n', df_unit.head())</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nk"><img src="../Images/c54f473f0d8b22b8194481eee81c8639.png" data-original-src="https://miro.medium.com/v2/resize:fit:430/format:webp/1*UmYjR2G0VKK-v7MnVYJDyg.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">样本数据—作者提供的图片</p></figure><p id="7850" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">好的，如果我们尝试用散点图来绘制这些值，我们会得到一个带状图。</p><pre class="kj kk kl km gt na nb nc nd aw ne bi"><span id="148b" class="mc md it nb b gy nf ng l nh ni">plt.scatter(df['Unit'], df['Quality Score'])</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nl"><img src="../Images/d3e1afc837fbe2feb30afb02e7140cde.png" data-original-src="https://miro.medium.com/v2/resize:fit:746/format:webp/1*FpaeHacPaJVn3CZhvX6otQ.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">带状图—作者图片</p></figure><p id="7f68" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">虽然我们可以从这个图表中获得一些信息，例如值的范围，但这里的问题是许多点重叠，我们无法获得分布的清晰图像。</p><p id="ce7e" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我们有两种主要方法来解决这个问题:<a class="ae nm" href="https://datavizproject.com/data-type/counts-plot/" rel="noopener ugc nofollow" target="_blank">计数图</a>和抖动图。</p><p id="28e2" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">第一种尝试通过编码大小来解决重叠问题。记录密度较高的点用较大的点绘制。</p><p id="fc23" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">第二种更直观，在x位置添加随机抖动，同时保持类别之间的一定距离。这使得它看起来更像一个列，而不是一条线，并允许我们看到点和它们集中的地方。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h2 id="7f40" class="mc md it bd me mf mg dn mh mi mj dp mk lh ml mm mn ll mo mp mq lp mr ms mt mu bi translated">抖动图基础</h2><p id="3d2e" class="pw-post-body-paragraph ky kz it la b lb mv ju ld le mw jx lg lh mx lj lk ll my ln lo lp mz lr ls lt im bi translated">Seaborn的带状图已经添加了这种抖动，所以我们只需要调用函数，瞧！</p><pre class="kj kk kl km gt na nb nc nd aw ne bi"><span id="21d9" class="mc md it nb b gy nf ng l nh ni">sns.stripplot(y="Quality Score", x="Unit", data=df)</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nn"><img src="../Images/ec85e4535be64cb58a65a130c33cd84b.png" data-original-src="https://miro.medium.com/v2/resize:fit:764/format:webp/1*a7S0OuT5kJdRkfgH2AgJyA.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">简单抖动图—图片由作者提供</p></figure><pre class="kj kk kl km gt na nb nc nd aw ne bi"><span id="37fb" class="mc md it nb b gy nf ng l nh ni">sns.stripplot(y="Unit", x="Quality Score", data=df)</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi no"><img src="../Images/51464d80aa0694acff103517cb0011c0.png" data-original-src="https://miro.medium.com/v2/resize:fit:800/format:webp/1*UJ0WVhKmnp93vHktkQY2wA.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">简单抖动图—图片由作者提供</p></figure><p id="3bf5" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">相当简单，现在我们可以对其进行改进，使其信息量更大，更易于阅读。我们将添加一条线来标记每组的平均值，在y轴上对类别进行排序，并在底部添加一个图例。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h2 id="ea5a" class="mc md it bd me mf mg dn mh mi mj dp mk lh ml mm mn ll mo mp mq lp mr ms mt mu bi translated">增加价值</h2><p id="0d3c" class="pw-post-body-paragraph ky kz it la b lb mv ju ld le mw jx lg lh mx lj lk ll my ln lo lp mz lr ls lt im bi translated">我们可以用另一个散点图显示每个类别的平均值。这一次，我们将使用管道符号(|)作为标记，而不是点。</p><p id="9edc" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我们还将传递参数顺序，根据组的平均值对类别进行排序。</p><pre class="kj kk kl km gt na nb nc nd aw ne bi"><span id="ecb9" class="mc md it nb b gy nf ng l nh ni"><strong class="nb iu"># list with ordered categories<br/>order = df_unit['Unit']</strong></span><span id="468e" class="mc md it nb b gy nj ng l nh ni"><strong class="nb iu">fig, ax = plt.subplots(1, figsize=(12,10))</strong></span><span id="4449" class="mc md it nb b gy nj ng l nh ni"># Plot lines for the average<br/><strong class="nb iu">sns.scatterplot(y="Unit", x="Quality Score", data=df_unit, marker='|', s=1000, color='k')</strong></span><span id="1c09" class="mc md it nb b gy nj ng l nh ni"># Jitter plot<br/>sns.stripplot(y="Unit", x="Quality Score", data=df, <strong class="nb iu">order=order</strong>, <strong class="nb iu">zorder=0</strong>)</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi np"><img src="../Images/8cfd4e85246cdb6e1ecd1eb8bf4501c6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kC6tAxKZs7LXGgCp6sw8bg.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">抖动图—图片由作者提供</p></figure><p id="1bdf" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">接下来，我们将添加图例。我们没有任何好的房地产，所以我们将这个数字一分为二，并在底部有一个传奇的支线剧情。</p><pre class="kj kk kl km gt na nb nc nd aw ne bi"><span id="0902" class="mc md it nb b gy nf ng l nh ni"><strong class="nb iu">from matplotlib.lines import Line2D</strong></span><span id="b921" class="mc md it nb b gy nj ng l nh ni">fig, (ax, ax_leg) = plt.subplots(<strong class="nb iu">2</strong>, figsize=(12,10), <strong class="nb iu">gridspec_kw={'height_ratios':[6, 1]}</strong>)</span><span id="719d" class="mc md it nb b gy nj ng l nh ni"># Plot lines for the average<br/>sns.scatterplot(y="Unit", x="Quality Score", data=df_unit, marker='|', s=1000, color='k', ax=ax)</span><span id="6d09" class="mc md it nb b gy nj ng l nh ni"># Jitter plot<br/>sns.stripplot(y="Unit", x="Quality Score", data=df, order=order, zorder=0, ax=ax)</span><span id="d113" class="mc md it nb b gy nj ng l nh ni"># Custom Legend<br/><strong class="nb iu">legend_elements = [Line2D([0], [0], marker='o', color='w', <br/>                          label='One test result', <br/>                          markerfacecolor='k', markersize=10),<br/>                   Line2D([0], [0], marker='|', color='k', <br/>                          label='Mean quality score for the unit', <br/>                          linestyle='None', markersize=25)]</strong></span><span id="9ab3" class="mc md it nb b gy nj ng l nh ni"><strong class="nb iu">legend = ax_leg.legend(handles=legend_elements, loc='upper center', <br/>                       ncol=2, frameon=False, fontsize=12)</strong></span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nq"><img src="../Images/392cb186e5959f427ad65e0b7fcd6727.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*yhPB3j5yP8KduWZZ-_3IYQ.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">抖动图—图片由作者提供</p></figure><p id="311e" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">好吧！一切似乎都已就绪。现在唯一剩下的就是清理干净。</p><pre class="kj kk kl km gt na nb nc nd aw ne bi"><span id="3065" class="mc md it nb b gy nf ng l nh ni">fig, (ax, ax_leg) = plt.subplots(2, figsize=(12,10), gridspec_kw={'height_ratios':[6, 1]})</span><span id="4272" class="mc md it nb b gy nj ng l nh ni"># Plot lines for the average<br/>sns.scatterplot(y="Unit", x="Quality Score", data=df_unit, marker='|', s=1000, color='k', ax=ax)</span><span id="e000" class="mc md it nb b gy nj ng l nh ni"># Jitter plot<br/>sns.stripplot(y="Unit", x="Quality Score", data=df, order=order, zorder=0, ax=ax)</span><span id="2b9f" class="mc md it nb b gy nj ng l nh ni"># custom Legend<br/>legend_elements = [Line2D([0], [0], marker='o', color='w', <br/>                          label='One test result', <br/>                          markerfacecolor='k', markersize=10),<br/>                   Line2D([0], [0], marker='|', color='k', <br/>                          label='Mean quality score for the unit', <br/>                          linestyle='None', markersize=25)]</span><span id="b489" class="mc md it nb b gy nj ng l nh ni">legend = ax_leg.legend(handles=legend_elements, loc='upper center', <br/>                       ncol=2, frameon=False, fontsize=12)</span><span id="89f3" class="mc md it nb b gy nj ng l nh ni"><strong class="nb iu">ax_leg.set_xticks([])<br/>ax_leg.set_yticks([])</strong></span><span id="0359" class="mc md it nb b gy nj ng l nh ni"><strong class="nb iu"># remove spines<br/>sns.despine(fig, left=True, top=True, right=True, bottom=True)</strong></span><span id="6b8b" class="mc md it nb b gy nj ng l nh ni"><strong class="nb iu"># title and labels<br/>ax.set_title('Quality score by production unit\n', loc='left', fontsize=20)<br/>ax.set_xlabel('')<br/>ax.set_ylabel('')</strong></span><span id="7ef9" class="mc md it nb b gy nj ng l nh ni"><strong class="nb iu"># make it tight (:<br/>plt.tight_layout()</strong><br/>plt.show()</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nr"><img src="../Images/b4abbd3a5755d5a61cc31238b8cebac8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jU0hgKI1iZKov7LRJHji4g.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">抖动图—图片由作者提供</p></figure><p id="9103" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">在示例中，更明显的是，Echo没有那么多数据点，Alpha、Beta、Charlie和Delta中存在异常值，总体而言，这些值集中在一个类似的范围内。我们无法通过平均值或中值看到那些有价值的见解。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h2 id="4191" class="mc md it bd me mf mg dn mh mi mj dp mk lh ml mm mn ll mo mp mq lp mr ms mt mu bi translated">结论</h2><p id="5a85" class="pw-post-body-paragraph ky kz it la b lb mv ju ld le mw jx lg lh mx lj lk ll my ln lo lp mz lr ls lt im bi translated">汇总统计对于理解大量或复杂的数据集非常有用。平均值、中间值、百分位数等通常比共享整个数据集更容易交流。这些聚合的缺点是，生成的值经常会被查看者误解，尤其是那些不熟悉数据或主题的查看者。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ns"><img src="../Images/a19c2dcf2ecd20cf8f0d74b11c2a1c61.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*MUHXk4vnSKRUzHZ_U3tbtQ.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">按类别显示平均值的条形图-作者提供的图像</p></figure><p id="98fa" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">用户可能会将上面的图表理解为“Alpha”比其他人有更好的分数。事实是，我们无法从这张图表中看出这一点。记录数、异常值和方差等变量在平均值中起作用。</p><p id="0ce4" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">因此，为了传达这些数字背后的整个故事，我们需要一个熟悉这个主题的观众，注释所有这些潜在的因素，或者显示组成这个平均值的分数的实际分布。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nt"><img src="../Images/21fd3409cb94b8384450a900d7eb7316.png" data-original-src="https://miro.medium.com/v2/resize:fit:798/format:webp/1*lGkl7RW8csMRd-YEe1Ff-w.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated"><a class="ae nm" href="https://seaborn.pydata.org/generated/seaborn.violinplot.html#seaborn.violinplot" rel="noopener ugc nofollow" target="_blank">小提琴情节</a> —作者图片</p></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nu"><img src="../Images/48df5241a13518ba4cb150cfa7a5309a.png" data-original-src="https://miro.medium.com/v2/resize:fit:784/format:webp/1*X0b0eEjUxrnOmCYGO6FcuQ.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated"><a class="ae nm" href="https://seaborn.pydata.org/generated/seaborn.boxplot.html#seaborn.boxplot" rel="noopener ugc nofollow" target="_blank">盒子剧情</a> —图片由作者提供</p></figure><p id="dbc2" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">小提琴图和箱形图是描述分布的最佳选择。但是，由于我们生活在注意力经济中，有一个友好的，更简单的替代方案，如抖动图是很好的。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi lu"><img src="../Images/515ac375bb404e72e63d8e0c92c43bd2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*O1ZCBZxRe7n9oQ-03JwLRA.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated"><a class="ae nm" href="https://gist.github.com/Thiagobc23/0bc5c5f530e8f8fd98710fe1ccb407ce" rel="noopener ugc nofollow" target="_blank">抖动图—完整代码</a></p></figure><p id="d9e1" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">抖动图可以增加价值，而不会让观众不知所措或导致他们做出错误的假设。</p><p id="1e85" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">用户可以看到每个数据点，并理解这些数据。在这种情况下，我们可以看到，即使平均值不同，也不仅仅是“阿尔法比其他人做得更好”。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><p id="be4d" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">感谢阅读我的文章！你可以在这里找到更多类似的教程:<a class="ae nm" href="https://linktr.ee/thiagobc23" rel="noopener ugc nofollow" target="_blank">https://linktr.ee/thiagobc23</a></p></div></div>    
</body>
</html>