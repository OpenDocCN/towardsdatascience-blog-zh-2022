<html>
<head>
<title>5 Essential Tips to Improve the Readability of Your Python Code</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">提高Python代码可读性的5个基本技巧</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/5-essential-tips-to-improve-the-readability-of-your-python-code-a1d5e62a4bf0#2022-07-22">https://towardsdatascience.com/5-essential-tips-to-improve-the-readability-of-your-python-code-a1d5e62a4bf0#2022-07-22</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="ae8e" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">通过文档、类型提示和正确的变量名改进您的Python代码</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/d34545fb7e9498a65ab9f0cd30916d6f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*N8XFZSa9ls_kO5El"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">照片由<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的<a class="ae ky" href="https://unsplash.com/@clemhlrdt?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Clément Hélardot </a>拍摄</p></figure><p id="90a3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">你是否经常回头看你6个月前写的一些代码，挠头想知道这些乱七八糟的东西是什么？或者你有没有被别人接过一个项目，却苦于不知道从哪里开始？如果是这样，你并不孤单。</p><p id="a800" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Python中有很多方法可以帮助你理解代码的内部工作方式，所以当你回到代码中时，从你离开的地方继续下去会容易得多。</p><p id="dfcb" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">作为一个例子，我们最终得到的代码看起来很像下图中的代码。然而，这还不是最糟糕的，还有一些事情我们需要详细说明，例如:</p><ul class=""><li id="9c1f" class="lv lw it lb b lc ld lf lg li lx lm ly lq lz lu ma mb mc md bi translated">load_las_file函数中f和d分别代表什么？</li><li id="ed77" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated">为什么我们要检查粘土函数的结果？</li><li id="e033" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated">这些函数在寻找什么类型？彩车？数据框架？</li></ul><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mj"><img src="../Images/6d43c9abd1c0bfe2b4ff843fc72e5855.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*l-JNTTCKEanvlYY9raHp7A.png"/></div></div></figure><p id="5dde" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在这篇文章中，我将介绍五个基本技巧，告诉你如何通过文档、提示输入和正确的变量名来提高应用程序/脚本的可读性。</p><h2 id="e278" class="mk ml it bd mm mn mo dn mp mq mr dp ms li mt mu mv lm mw mx my lq mz na nb nc bi translated">本教程的视频版本</h2><p id="4b27" class="pw-post-body-paragraph kz la it lb b lc nd ju le lf ne jx lh li nf lk ll lm ng lo lp lq nh ls lt lu im bi translated">我最近上传了这篇文章的视频到我的YouTube频道。下面来看看吧。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ni nj l"/></div></figure><p id="d65e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果你喜欢这些内容，请考虑点击<a class="ae ky" href="https://www.youtube.com/channel/UCn1O_4_ApzbYwrsUdRoMmOg?sub_confirmation=1" rel="noopener ugc nofollow" target="_blank">这里</a>订阅频道。</p><h1 id="e130" class="nk ml it bd mm nl nm nn mp no np nq ms jz nr ka mv kc ns kd my kf nt kg nb nu bi translated">1.评论</h1><p id="6155" class="pw-post-body-paragraph kz la it lb b lc nd ju le lf ne jx lh li nf lk ll lm ng lo lp lq nh ls lt lu im bi translated">为了让我们有一个好的开始，我们可以对代码做的第一件事是向一些行添加注释，但是，要注意避免做过头。注释应该告诉你为什么代码会工作，或者为什么某件事情会以某种方式完成，但是不能告诉你它是如何工作的。</p><p id="d88d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Python中的注释通常是通过使用hashtag符号(#)来完成的，可以跨越一行或多行。</p><pre class="kj kk kl km gt nv nw nx ny aw nz bi"><span id="2c78" class="mk ml it nw b gy oa ob l oc od"># Comment using the hashtag<br/># Another comment using the hashtag</span></pre><p id="7429" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">对于多行注释，我们也可以使用双引号。</p><pre class="kj kk kl km gt nv nw nx ny aw nz bi"><span id="2299" class="mk ml it nw b gy oa ob l oc od">"""<br/>This is an example of<br/>a multi-line comment<br/>"""</span></pre><p id="0047" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在下面的示例中，代码中添加了一些注释，以解释一些代码行背后的工作流和推理</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mj"><img src="../Images/90f664ce6f9a24d852857ca91d81b445.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bHMwvZ5b48gLIusnF8K3Ww.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">向Python代码添加注释。图片由作者提供。</p></figure><h1 id="87bc" class="nk ml it bd mm nl nm nn mp no np nq ms jz nr ka mv kc ns kd my kf nt kg nb nu bi translated">2.显式打字</h1><p id="cd5c" class="pw-post-body-paragraph kz la it lb b lc nd ju le lf ne jx lh li nf lk ll lm ng lo lp lq nh ls lt lu im bi translated">Python语言是动态类型的，这意味着只在运行时检查变量类型。此外，变量可以在代码执行期间改变类型。</p><p id="622a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">另一方面，静态类型涉及到显式声明变量是什么类型，并且在代码执行期间不能改变。</p><p id="c440" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">2014年，<a class="ae ky" href="https://peps.python.org/pep-0484/" rel="noopener ugc nofollow" target="_blank"> PEP 484 </a>引入了类型提示的思想，后来在<a class="ae ky" href="https://docs.python.org/3.5/whatsnew/3.5.html" rel="noopener ugc nofollow" target="_blank">Python 3.5版本</a>中引入。这些允许你明确地声明变量应该是什么类型。</p><p id="49b1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">通过添加类型提示，可以显著提高代码的可读性。在下面的例子中我们可以看出:</p><ul class=""><li id="0ee7" class="lv lw it lb b lc ld lf lg li lx lm ly lq lz lu ma mb mc md bi translated">需要两个参数</li><li id="a4ca" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated"><code class="fe oe of og nw b">filename</code>参数的类型应该是<a class="ae ky" href="https://docs.python.org/3/library/string.html" rel="noopener ugc nofollow" target="_blank">字符串</a></li><li id="2004" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated"><code class="fe oe of og nw b">start_depth</code>参数应该是类型<a class="ae ky" href="https://www.w3schools.com/python/ref_func_float.asp" rel="noopener ugc nofollow" target="_blank">浮点型</a>，默认值为<code class="fe oe of og nw b"><a class="ae ky" href="https://www.w3schools.com/python/ref_keyword_none.asp" rel="noopener ugc nofollow" target="_blank">None</a></code></li><li id="f50d" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated">该函数将返回一个<a class="ae ky" href="https://pandas.pydata.org/docs/reference/api/pandas.DataFrame.html" rel="noopener ugc nofollow" target="_blank"> pandas DataFrame </a>对象</li></ul><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oh"><img src="../Images/e3ce334ff3418c33942865d4d795012c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dAdIlmpqcl8sVv8kJVi2uw.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">向Python函数添加类型提示。图片由作者提供。</p></figure><p id="7b8c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们马上就可以根据类型提示准确地知道函数需要什么以及它将返回什么。</p><h1 id="5c85" class="nk ml it bd mm nl nm nn mp no np nq ms jz nr ka mv kc ns kd my kf nt kg nb nu bi translated">3.文档字符串(文档字符串)</h1><p id="f7a7" class="pw-post-body-paragraph kz la it lb b lc nd ju le lf ne jx lh li nf lk ll lm ng lo lp lq nh ls lt lu im bi translated"><a class="ae ky" href="https://peps.python.org/pep-0257/" rel="noopener ugc nofollow" target="_blank">文档字符串</a>是紧跟在函数或类定义之后的字符串。<a class="ae ky" href="https://peps.python.org/pep-0257/" rel="noopener ugc nofollow" target="_blank"> Docstrings </a>是一种很好的方式，可以详细解释你的函数做什么，它需要什么参数，它将引发的任何异常，它将返回什么，等等。</p><p id="75c1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">此外，如果您正在使用类似于<a class="ae ky" href="https://www.sphinx-doc.org/en/master/" rel="noopener ugc nofollow" target="_blank"> Sphinx </a>的东西来为您的代码创建在线文档，那么文档字符串将被自动提取并转换成适当的文档。</p><p id="e34b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">以下示例显示了名为clay_volume的函数的docstring。</p><p id="de43" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这里我们可以指定每个参数是什么。这比基本的类型提示更进了一步。你也可以包括更多关于函数背后的方法论的信息，比如学术参考或方程式。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oi"><img src="../Images/2636a2f4beee108f549c5a8d2ebb7333.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*sCooujLkZGnVaX-rp5qxlg.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">Python中的docstring示例。图片由作者提供。</p></figure><p id="d5db" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">当您从代码中的其他地方调用函数时，拥有文档字符串也很有帮助。例如，使用Visual Studio代码，您可以将鼠标悬停在函数调用上，并看到该函数的功能及其要求的弹出窗口。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oj"><img src="../Images/21471e8101033f1da06421e81d2bdf4a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6W8f16ZgJNGvD_1lpPowYQ.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">使用docstrings时的浮动提示示例可以提供关于函数的额外信息。图片由作者提供。</p></figure><p id="9672" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果您使用<a class="ae ky" href="https://code.visualstudio.com/" rel="noopener ugc nofollow" target="_blank"> Visual Studio Code (VSCode) </a>来编辑您的Python代码，那么您可以使用像<a class="ae ky" href="https://marketplace.visualstudio.com/items?itemName=njpwerner.autodocstring" rel="noopener ugc nofollow" target="_blank"> autoDocstring </a>这样的扩展来使创建Docstring的过程变得更加容易。这允许您键入三个双引号，并自动为您填充模板的其余部分。你只需要填写细节。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ok"><img src="../Images/6ac669f9a90a5e38627a3e1c83018bec.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*4J7xs5kxA3_qSuFZEsvmaA.gif"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">在VSCode中使用自动文档字符串的动画gif。图片由作者提供。</p></figure><p id="39c2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><em class="ol">提示:如果您已经在参数中声明了类型，那么它们将被自动选取。</em></p><h1 id="bf65" class="nk ml it bd mm nl nm nn mp no np nq ms jz nr ka mv kc ns kd my kf nt kg nb nu bi translated">4.可读的变量名</h1><p id="50b7" class="pw-post-body-paragraph kz la it lb b lc nd ju le lf ne jx lh li nf lk ll lm ng lo lp lq nh ls lt lu im bi translated">有时候当你写代码的时候，你不会太在意一个变量的名字，尤其是当你决定让代码运行起来而时间又不多的时候。然而，如果你回到代码中，发现一系列名为<code class="fe oe of og nw b">x1</code>或<code class="fe oe of og nw b">var123</code>的变量，乍一看你可能无法理解它们代表什么。</p><p id="8275" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">使用下面的例子，我们有两个变量<code class="fe oe of og nw b">f</code>和<code class="fe oe of og nw b">d</code>。我们可以通过查看代码的其他部分来猜测它们的意思，但是这需要时间，尤其是如果代码很长的话。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi om"><img src="../Images/f9f42afd8d947c9a3b0e30e08bf0aea0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*pBHr6UAY9jxssA3Tr1zS2Q.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">命名不当的Python变量示例。图片由作者提供。</p></figure><p id="ced7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果我们给这些变量赋予适当的名称，我们将能够知道其中一个是由<code class="fe oe of og nw b">lasio.read()</code>调用读取的<code class="fe oe of og nw b">data_file</code>，并且很可能是原始数据。<code class="fe oe of og nw b">data</code>变量告诉我们这是我们正在处理的实际数据。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi om"><img src="../Images/e430ee73fbfcbb598585867c16f71573.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*GSrYAKGW5qS-NFV7wLBd1A.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">Python中正确变量名的例子。图片由作者提供。</p></figure><h1 id="e4e0" class="nk ml it bd mm nl nm nn mp no np nq ms jz nr ka mv kc ns kd my kf nt kg nb nu bi translated">5.避免幻数</h1><p id="846b" class="pw-post-body-paragraph kz la it lb b lc nd ju le lf ne jx lh li nf lk ll lm ng lo lp lq nh ls lt lu im bi translated">幻数是代码中的值，其背后有无法解释的含义，可以代表常数。在代码中使用这些可能会导致歧义，特别是对于那些不熟悉使用该数字的任何计算的人。</p><p id="35c6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">此外，如果我们在多个地方有相同的幻数，我们需要更新它，我们将不得不更新它的每个实例。然而，如果这个数字被分配给一个正确命名的变量，这个过程就会容易得多。</p><p id="856b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><a class="ae ky" href="https://en.wikipedia.org/wiki/Magic_number_(programming)" rel="noopener ugc nofollow" target="_blank">它还打破了最古老的编程规则数据之一，可追溯到20世纪60年代。</a></p><p id="c4fd" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在下面的例子中，我们有一个函数，它计算一个名为result的值，并将其乘以0.6。这是什么意思？是换算系数吗？标量？</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi on"><img src="../Images/901d4570a557a78d300fe020ad387370.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bf8QGDk44Tz_X9D3ewwPPg.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">行result = gr_index * 0.6中的幻数示例。图片由作者提供。</p></figure><p id="f1c6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果我们声明一个变量并给它赋值，那么我们就有更好的机会知道它是什么。在这种情况下，粘土与页岩的比率用于将伽马射线指数转换为粘土体积。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi on"><img src="../Images/14d691fc581dad0536878f984f80b4f9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WPVfDiaeCfu34k1iLNYa3w.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">在为幻数clay_shale_ratio声明一个变量后，我们可以更容易地阅读代码，并在将来更新它。图片由作者提供。</p></figure><h1 id="c4b5" class="nk ml it bd mm nl nm nn mp no np nq ms jz nr ka mv kc ns kd my kf nt kg nb nu bi translated">最终代码</h1><p id="4ddf" class="pw-post-body-paragraph kz la it lb b lc nd ju le lf ne jx lh li nf lk ll lm ng lo lp lq nh ls lt lu im bi translated">应用上面的技巧后，我们的最终代码现在看起来更好，也更容易理解。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi on"><img src="../Images/06d405894b4ba30ca63c75aa6432f7cd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wGAHcIgM7kf8Fip2hZmzRQ.png"/></div></div></figure><h1 id="dc5f" class="nk ml it bd mm nl nm nn mp no np nq ms jz nr ka mv kc ns kd my kf nt kg nb nu bi translated">摘要</h1><p id="3622" class="pw-post-body-paragraph kz la it lb b lc nd ju le lf ne jx lh li nf lk ll lm ng lo lp lq nh ls lt lu im bi translated">通过注释和docstrings向代码中添加文档可以帮助您和其他人理解您的代码在做什么。开始时，这可能感觉像是一件苦差事，但是随着工具的使用和经常的练习，它会变成你的第二天性。</p></div><div class="ab cl oo op hx oq" role="separator"><span class="or bw bk os ot ou"/><span class="or bw bk os ot ou"/><span class="or bw bk os ot"/></div><div class="im in io ip iq"><p id="1d5b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><em class="ol">感谢阅读。在你走之前，你一定要订阅我的内容，把我的文章放到你的收件箱里。</em> <a class="ae ky" href="https://andymcdonaldgeo.medium.com/subscribe" rel="noopener"> <strong class="lb iu"> <em class="ol">你可以在这里做！</em> </strong> </a></p><p id="e5b5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">其次，通过注册会员，你可以获得完整的媒介体验，并支持我自己和成千上万的其他作家。它每个月只花你5美元，你可以完全接触到所有令人惊叹的媒体文章，也有机会用你的写作赚钱。如果你用 <a class="ae ky" href="https://andymcdonaldgeo.medium.com/membership" rel="noopener"> <strong class="lb iu"> <em class="ol">我的链接</em> </strong> </a> <strong class="lb iu"> <em class="ol">，</em> </strong> <em class="ol">报名，你直接用你的一部分费用支持我，不会多花你多少钱。如果你这样做了，非常感谢你的支持！</em></p></div></div>    
</body>
</html>