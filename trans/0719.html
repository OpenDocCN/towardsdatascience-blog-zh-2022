<html>
<head>
<title>Social Media Sentiment Analysis In Python With VADER — No Training Required!</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Python和VADER进行社交媒体情感分析——无需培训！</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/social-media-sentiment-analysis-in-python-with-vader-no-training-required-4bc6a21e87b8#2022-03-01">https://towardsdatascience.com/social-media-sentiment-analysis-in-python-with-vader-no-training-required-4bc6a21e87b8#2022-03-01</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="d3ed" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">词典和基于规则的情感分析库。</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/9df61dfaa087959dffc3eb4bc15b51d1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*8SMG05gPbH8UzWy_"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">照片由<a class="ae ky" href="https://unsplash.com/@helloimnik" rel="noopener ugc nofollow" target="_blank">你好我是尼克</a>在<a class="ae ky" href="https://unsplash.com/photos/LUYD2b7MNrg" rel="noopener ugc nofollow" target="_blank"> Unsplash </a></p></figure><h1 id="96ec" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">介绍</h1><p id="c899" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">建立一个模型可能比你想象的要容易得多。不是每个分类任务都需要机器学习模型。即使非常简单的方法也能给你带来好的表现。本文涵盖了<code class="fe mn mo mp mq b"><strong class="lt iu">VADER</strong></code>，这是一个基于词典和规则的情感分析模型。我们将首先了解什么是VADER，最后评估它在分类任务中的性能。</p><h1 id="9597" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">什么是VADER？</h1><p id="0381" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">价感知词典和情感推理机或简称VADER是一个词典和简单的基于规则的情感分析模型。</p><p id="f573" class="pw-post-body-paragraph lr ls it lt b lu mr ju lw lx ms jx lz ma mt mc md me mu mg mh mi mv mk ml mm im bi translated">它可以有效地处理词汇、缩写、大写、重复标点符号、表情符号(😢,😃,😭等。)，等等。通常在社交媒体平台上采用来表达个人情感，这使得它非常适合社交媒体情感文本分析。</p><p id="b4a9" class="pw-post-body-paragraph lr ls it lt b lu mr ju lw lx ms jx lz ma mt mc md me mu mg mh mi mv mk ml mm im bi translated">VADER的优势在于评估任何给定文本的情感，而不需要之前的训练，因为我们可能需要机器学习模型。</p><p id="2771" class="pw-post-body-paragraph lr ls it lt b lu mr ju lw lx ms jx lz ma mt mc md me mu mg mh mi mv mk ml mm im bi translated">VADER生成的结果是一个由4个关键字<strong class="lt iu"> neg </strong>、<strong class="lt iu"> neu </strong>、<strong class="lt iu"> pos </strong>和<strong class="lt iu"> compound </strong>组成的字典:</p><p id="9acb" class="pw-post-body-paragraph lr ls it lt b lu mr ju lw lx ms jx lz ma mt mc md me mu mg mh mi mv mk ml mm im bi translated"><strong class="lt iu"> neg </strong>、<strong class="lt iu"> neu、</strong>和<strong class="lt iu"> pos </strong>分别表示阴性、中性和阳性。它们的和应该等于1，或者用浮点运算接近1。</p><p id="8e11" class="pw-post-body-paragraph lr ls it lt b lu mr ju lw lx ms jx lz ma mt mc md me mu mg mh mi mv mk ml mm im bi translated"><strong class="lt iu">复合词</strong>对应于词典中每个单词的价分值之和，并且确定情感的程度，而不是与之前的值相反的实际值。其值介于-1(最极端的负面情绪)和+1(最极端的正面情绪)之间。使用复合分数足以确定文本的潜在情感，因为:</p><ul class=""><li id="7a39" class="mw mx it lt b lu mr lx ms ma my me mz mi na mm nb nc nd ne bi translated">一个<strong class="lt iu">正向</strong>情绪，<strong class="lt iu">复合≥ 0.05 </strong></li><li id="ea04" class="mw mx it lt b lu nf lx ng ma nh me ni mi nj mm nb nc nd ne bi translated">一个<strong class="lt iu">负</strong>情绪，<strong class="lt iu">复合≤ -0.05 </strong></li><li id="17bc" class="mw mx it lt b lu nf lx ng ma nh me ni mi nj mm nb nc nd ne bi translated">一个<strong class="lt iu">中性</strong>情绪，<strong class="lt iu">复合在-0.05，0.05[ </strong>之间</li></ul><p id="5d01" class="pw-post-body-paragraph lr ls it lt b lu mr ju lw lx ms jx lz ma mt mc md me mu mg mh mi mv mk ml mm im bi translated">现在我们已经理解了主要概念，让我们深入到实现中。</p><h1 id="d747" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">如何使用VADER？</h1><p id="1382" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">本节的目标是为您提供所有的先决条件，如依赖性、数据集和VADER的实际实现。</p><p id="1b7b" class="pw-post-body-paragraph lr ls it lt b lu mr ju lw lx ms jx lz ma mt mc md me mu mg mh mi mv mk ml mm im bi translated">如果您喜欢视频，可以观看本文的视频演示:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nk nl l"/></div></figure><h2 id="166f" class="nm la it bd lb nn no dn lf np nq dp lj ma nr ns ll me nt nu ln mi nv nw lp nx bi translated">先决条件和基础知识</h2><p id="2cc8" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">正如标题中提到的，我们将使用VADER库，为此我们需要安装<code class="fe mn mo mp mq b"><a class="ae ky" href="https://www.nltk.org/_modules/nltk/sentiment/vader.html" rel="noopener ugc nofollow" target="_blank">nltk</a></code> <strong class="lt iu">，</strong>下载，并按照以下说明导入词典。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ny nl l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">vader_basics.py</p></figure><p id="9e20" class="pw-post-body-paragraph lr ls it lt b lu mr ju lw lx ms jx lz ma mt mc md me mu mg mh mi mv mk ml mm im bi translated"><code class="fe mn mo mp mq b">SentimentIntensityAnalyzer.polarity_score()</code>功能提供文本的极性，呈现之前解释的字典格式。为了能够执行预测，我们需要预先创建一个<code class="fe mn mo mp mq b">SentimentIntensityAnalyzer</code><strong class="lt iu"/>(<strong class="lt iu">行</strong> <strong class="lt iu"> 12 </strong>)的实例。</p><p id="b404" class="pw-post-body-paragraph lr ls it lt b lu mr ju lw lx ms jx lz ma mt mc md me mu mg mh mi mv mk ml mm im bi translated">让我们通过预测以下例子的潜在情绪来热身。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ny nl l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">示例1.py</p></figure><pre class="kj kk kl km gt nz mq oa ob aw oc bi"><span id="073e" class="nm la it mq b gy od oe l of og"># Output of example1<br/>{'neg': 0.0, 'neu': 0.585, 'pos': 0.415, 'compound': 0.75}</span></pre><p id="4868" class="pw-post-body-paragraph lr ls it lt b lu mr ju lw lx ms jx lz ma mt mc md me mu mg mh mi mv mk ml mm im bi translated"><strong class="lt iu">观察例1 </strong>:上一个结果显示该句没有任何负面信息(neg=0)。它有一些中性和积极的音调(neu=0.585和pos=0.415)。不过，总体情绪是积极的，因为复利&gt; 0.05</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ny nl l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">示例2.py</p></figure><pre class="kj kk kl km gt nz mq oa ob aw oc bi"><span id="fe9c" class="nm la it mq b gy od oe l of og"># Output of example2<br/>{'neg': 0.0, 'neu': 0.373, 'pos': 0.627, 'compound': 0.8284}</span></pre><p id="e109" class="pw-post-body-paragraph lr ls it lt b lu mr ju lw lx ms jx lz ma mt mc md me mu mg mh mi mv mk ml mm im bi translated"><strong class="lt iu">观察例2: </strong>从这个例子可以看出，复合词跳到了0.82，这使得句子比第一个例子的句子更加肯定。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ny nl l"/></div></figure><pre class="kj kk kl km gt nz mq oa ob aw oc bi"><span id="6f5b" class="nm la it mq b gy od oe l of og"># Output of example3<br/>{'neg': 0.619, 'neu': 0.381, 'pos': 0.0, 'compound': -0.8449}</span></pre><p id="d793" class="pw-post-body-paragraph lr ls it lt b lu mr ju lw lx ms jx lz ma mt mc md me mu mg mh mi mv mk ml mm im bi translated"><strong class="lt iu">观察例3: </strong>从这最后一句话，我们可以看出，该句没有任何正面信息(pos=0)。它有一些中性和消极的音调(neu=0.424和neg=0.576)。总的来说，由于复合得分接近-1，它具有最极端的负面情绪。我的猜测是，去掉感叹词会让情绪不那么消极。为什么不试试呢:)</p><h1 id="3d57" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">大型数据集上的性能</h1><p id="5791" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">既然我们了解了基础知识，让我们尝试评估VADER在大数据上的性能。在此之前，我们将需要执行一些预处理。</p><h2 id="d258" class="nm la it bd lb nn no dn lf np nq dp lj ma nr ns ll me nt nu ln mi nv nw lp nx bi translated">加载数据进行预处理</h2><p id="2457" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">我们将使用<a class="ae ky" href="http://help.sentiment140.com/for-students" rel="noopener ugc nofollow" target="_blank">感知140 </a>网站上的这个<strong class="lt iu"> <em class="oh">免许可</em> </strong>推特数据集，以便了解VADER做得有多好。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ny nl l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">vader_read_data.py</p></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oi"><img src="../Images/0cd89e1867aaee104e67c67264caba08.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*iMOYL5cFK9VPCyELLj3OxA.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">数据集的前3行(图片由作者提供)</p></figure><p id="8c36" class="pw-post-body-paragraph lr ls it lt b lu mr ju lw lx ms jx lz ma mt mc md me mu mg mh mi mv mk ml mm im bi translated">我们只对两个主要栏目感兴趣。</p><ul class=""><li id="135c" class="mw mx it lt b lu mr lx ms ma my me mz mi na mm nb nc nd ne bi translated"><strong class="lt iu">‘4’</strong>，对应推文极性(0:负极，2:中性，4:正极)。</li><li id="716f" class="mw mx it lt b lu nf lx ng ma nh me ni mi nj mm nb nc nd ne bi translated">“@stellargi”..右'，对应实际推文。</li></ul><p id="09ba" class="pw-post-body-paragraph lr ls it lt b lu mr ju lw lx ms jx lz ma mt mc md me mu mg mh mi mv mk ml mm im bi translated">下面的函数将这些列重命名为更容易理解的格式，然后在数字和极性的字符串格式之间建立对应关系，最后返回格式化的数据。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ny nl l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">格式_数据. py</p></figure><p id="bc27" class="pw-post-body-paragraph lr ls it lt b lu mr ju lw lx ms jx lz ma mt mc md me mu mg mh mi mv mk ml mm im bi translated">下图对应于对原始数据集应用<code class="fe mn mo mp mq b">format_data()</code>函数后的前3行(<strong class="lt iu">行</strong> <strong class="lt iu"> 16 </strong>和<strong class="lt iu"> 17 </strong>)。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi oj"><img src="../Images/5bb636b7b5a4c9f49547dc2fc4e463b0.png" data-original-src="https://miro.medium.com/v2/resize:fit:848/format:webp/1*NJQozd0paRYzIqheWqJobg.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">对原始数据应用format_data函数后的前3行(图片由作者提供)</p></figure><h2 id="eb9e" class="nm la it bd lb nn no dn lf np nq dp lj ma nr ns ll me nt nu ln mi nv nw lp nx bi translated">VADER的数据有多好？</h2><p id="c9d8" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">在此之前，我们将使用以下助手函数，这些函数将立即返回极性(<strong class="lt iu"> pos </strong>、<strong class="lt iu"> neg </strong>或<strong class="lt iu"> neu </strong>)，而不是字典输出。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ny nl l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">维德_预测_助手. py</p></figure><p id="f9c9" class="pw-post-body-paragraph lr ls it lt b lu mr ju lw lx ms jx lz ma mt mc md me mu mg mh mi mv mk ml mm im bi translated">在<strong class="lt iu">行</strong> <strong class="lt iu"> 19 </strong>上，我们创建一个新列<code class="fe mn mo mp mq b">vader_prediction()</code>对应VADER的预测。然后，在<strong class="lt iu">第22行</strong>我们显示了5行随机数据</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ok"><img src="../Images/e0e519d30b66c5fd92a80646033c2976.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*NdaXoreMoupiqEzgA0zrMQ.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">包含原始标签和VADER预测的5行随机数据(图片由作者提供)</p></figure><p id="0632" class="pw-post-body-paragraph lr ls it lt b lu mr ju lw lx ms jx lz ma mt mc md me mu mg mh mi mv mk ml mm im bi translated">从最初的<strong class="lt iu">极性</strong>栏和VADER的预测，我们可以最终生成运行这几条指令的性能(精度、召回和f1分数)。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ny nl l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">维德_performance.py</p></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ol"><img src="../Images/2e88d22569c334dc5deb87418d9ca1c9.png" data-original-src="https://miro.medium.com/v2/resize:fit:938/format:webp/1*hGf-0bRX0oiskQpirNm9-w.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">VADER对数据的准确性和分类报告(图片由作者提供)</p></figure><p id="2165" class="pw-post-body-paragraph lr ls it lt b lu mr ju lw lx ms jx lz ma mt mc md me mu mg mh mi mv mk ml mm im bi translated">该模型似乎做得很好，因为它比随机猜测(精确度= 0.5)好得多！从每个极性的<strong class="lt iu">f1-分数</strong>中可以得出相同的观察结果。</p><h1 id="c2c8" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">结论</h1><p id="bd9e" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">恭喜你！🎉 🍾您刚刚学习了如何使用VADER进行社交媒体情感分类。在进一步构建机器学习模型之前，VADER可以成为一个很好的起点，并可以用作此类任务的基线模型。我希望您喜欢阅读这篇文章，并且它给了您执行分析所需的技能。请在下面找到更多资源来帮助您进一步学习。</p><p id="025a" class="pw-post-body-paragraph lr ls it lt b lu mr ju lw lx ms jx lz ma mt mc md me mu mg mh mi mv mk ml mm im bi translated">欢迎在LinkedIn上添加我，或者在Twitter上关注我。讨论人工智能，人工智能，数据科学，自然语言处理的东西总是令人愉快的！</p><p id="178d" class="pw-post-body-paragraph lr ls it lt b lu mr ju lw lx ms jx lz ma mt mc md me mu mg mh mi mv mk ml mm im bi translated"><a class="ae ky" href="https://colab.research.google.com/drive/1_Y7LhR6t0Czsk3UOS3BC7quKDFnULlZG?usp=sharing" rel="noopener ugc nofollow" target="_blank">Google Colab上的源代码</a></p><p id="a867" class="pw-post-body-paragraph lr ls it lt b lu mr ju lw lx ms jx lz ma mt mc md me mu mg mh mi mv mk ml mm im bi translated"><a class="ae ky" href="https://github.com/cjhutto/vaderSentiment" rel="noopener ugc nofollow" target="_blank">Github上的VADER文档</a></p><p id="d5a6" class="pw-post-body-paragraph lr ls it lt b lu mr ju lw lx ms jx lz ma mt mc md me mu mg mh mi mv mk ml mm im bi translated"><a class="ae ky" href="https://www.nltk.org/_modules/nltk/sentiment/vader.html" rel="noopener ugc nofollow" target="_blank"> NLTK文档</a></p><p id="3b94" class="pw-post-body-paragraph lr ls it lt b lu mr ju lw lx ms jx lz ma mt mc md me mu mg mh mi mv mk ml mm im bi translated">再见🏃🏾</p></div></div>    
</body>
</html>