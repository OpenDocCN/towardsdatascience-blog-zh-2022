<html>
<head>
<title>Git Partial Commits</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Git部分提交</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/git-partial-commits-888b94d97f01#2022-10-21">https://towardsdatascience.com/git-partial-commits-888b94d97f01#2022-10-21</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="e10f" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">如何只提交文件的一部分</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/cdb578245b65890bd18ad696c256caa4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*P6HO9yNgjVWNKoQx"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">照片由<a class="ae ky" href="https://unsplash.com/@praveentcom?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Praveen Thirumurugan </a>在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>拍摄</p></figure><p id="2c91" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Git是所有数据科学家和软件工程师都应该知道如何使用的工具。无论您是独自从事一个项目，还是作为一个大型分布式团队的一部分，了解如何使用Git从长远来看都可以为您节省大量时间。git中一个很棒的功能是能够进行部分提交，这意味着您可以从一个文件而不是整个文件提交单独的更改。当您对同一个文件进行增量更改，但这些更改彼此之间没有直接关系，并且在不同的文件中提交更改时，这就变得很容易了。如果没有这一点，您可能会提交应该单独提交的代码片段，如果代码中有bug、错误或失误，就很难撤销！</p><h2 id="bbb0" class="lv lw it bd lx ly lz dn ma mb mc dp md li me mf mg lm mh mi mj lq mk ml mm mn bi translated">进行部分提交</h2><p id="4f57" class="pw-post-body-paragraph kz la it lb b lc mo ju le lf mp jx lh li mq lk ll lm mr lo lp lq ms ls lt lu im bi translated">部分提交的主要目的是确保您只一起提交相关的更改。这可能是在代码中，也可能是补充文件的一部分，比如在同一个文件中处理多个组件，或者在csv文件中添加不同的行。那么我们该怎么做呢？</p><p id="6f37" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">进行部分提交相对简单，只需要对单个文件的暂存进行少量修改。当您只想从单个文件中添加一小部分更改时，您可以简单地在代码中使用<code class="fe mt mu mv mw b">--patch</code>或<code class="fe mt mu mv mw b">-p</code>标志，如下所示:</p><pre class="kj kk kl km gt mx mw my mz aw na bi"><span id="5c49" class="lv lw it mw b gy nb nc l nd ne">git add --patch &lt;filename&gt;</span></pre><p id="b70f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">或者</p><pre class="kj kk kl km gt mx mw my mz aw na bi"><span id="f387" class="lv lw it mw b gy nb nc l nd ne">git add -p filename</span></pre><p id="01bf" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">运行这些命令之一将打开一个逐步提示，它将迭代指定文件中的“大块”代码。在这个一步一步的提示中，您将被询问是否要存放显示的代码块，有几个选项可供选择。这些将是:</p><pre class="kj kk kl km gt mx mw my mz aw na bi"><span id="4ac1" class="lv lw it mw b gy nb nc l nd ne">y - stage this hunk<br/>n - do not stage this hunk<br/>q - quit; do not stage this hunk or any of the remaining ones<br/>a - stage this hunk and all later hunks in the file<br/>d - do not stage this hunk or any of the later hunks in this file<br/>g - select a hunk to go to<br/>/ - search for hunk matching the given regex<br/>j - leave this hunk undecided, see next undecided hunk<br/>k - leave this hunk undecided, see previous undecided hunk<br/>s - split the current hunk into smaller hunks<br/>e - manually edit the current hunk<br/>? - print help</span></pre><p id="0e1d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">你对此的反应将决定接下来会发生什么。最重要的是，<code class="fe mt mu mv mw b">y</code>将暂存当前的“大块”代码并转移到下一个(如果有的话)，<code class="fe mt mu mv mw b">n</code>不会保存当前的“大块”并转移到下一个，<code class="fe mt mu mv mw b">s</code>会将“大块”代码分割成更小的部分，如果你想进一步分解的话。该提示将继续处理文件中的所有块，直到没有剩余块，或者您指定已经使用<code class="fe mt mu mv mw b">d</code>或<code class="fe mt mu mv mw b">a</code>完成。</p><p id="99ea" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">需要注意的一件事是，当你想用<code class="fe mt mu mv mw b">s</code>或<code class="fe mt mu mv mw b">e</code>打破一个大块头时，交互会变得相当复杂。虽然<code class="fe mt mu mv mw b">s</code>会为你打破盘踞，<code class="fe mt mu mv mw b">e</code>会让你选择你感兴趣的相关线路。对于后者，您可以将<code class="fe mt mu mv mw b">+</code>或<code class="fe mt mu mv mw b">-</code>替换为<code class="fe mt mu mv mw b">#</code>，以表明您希望给定的行包含在较小的代码“块”中。</p><p id="cdb1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">为了确保您已经暂存了相关的代码行，您可以使用以下命令:</p><ul class=""><li id="357b" class="nf ng it lb b lc ld lf lg li nh lm ni lq nj lu nk nl nm nn bi translated"><code class="fe mt mu mv mw b">git status </code>或<code class="fe mt mu mv mw b">git diff -staged</code>检查您是否已经进行了正确的更改。</li><li id="5ddc" class="nf ng it lb b lc no lf np li nq lm nr lq ns lu nk nl nm nn bi translated"><code class="fe mt mu mv mw b">git reset -p</code>取消登台错误添加的大块并重放登台。</li><li id="4517" class="nf ng it lb b lc no lf np li nq lm nr lq ns lu nk nl nm nn bi translated"><code class="fe mt mu mv mw b">git commit -v</code>编辑提交消息时查看提交。</li></ul><p id="d51e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果您不想在命令行中完成所有这些，我当然可以理解为什么，您也可以使用git GUI来存放文件中的特定行。在GUI中，您在相关文件中找到想要暂存的行，右键单击它，您应该会看到一条消息“暂存该行以提交”。这样做的结果将与命令行交互的方式相同，并确保只提交相关的代码行！</p><h2 id="945a" class="lv lw it bd lx ly lz dn ma mb mc dp md li me mf mg lm mh mi mj lq mk ml mm mn bi translated">结论</h2><p id="564e" class="pw-post-body-paragraph kz la it lb b lc mo ju le lf mp jx lh li mq lk ll lm mr lo lp lq ms ls lt lu im bi translated">虽然在git中暂存不同文件中的更改非常简单，但是当同一个文件中有多个更改时，这可能会非常复杂。为此，您可以利用git中的部分提交，它允许您迭代文件中的每一行，以选择是否要暂存这些更改。当添加新文件时，这可以通过使用<code class="fe mt mu mv mw b">-p</code>或<code class="fe mt mu mv mw b">--patch</code>标志简单地触发，这将打开一个迭代编辑器来选择相关的行。但是要小心，要确保你一起提交所有相关的变更，否则你就有引入错误或错误的风险，并且以后很难撤销那些变更！</p></div><div class="ab cl nt nu hx nv" role="separator"><span class="nw bw bk nx ny nz"/><span class="nw bw bk nx ny nz"/><span class="nw bw bk nx ny"/></div><div class="im in io ip iq"><p id="b893" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果你喜欢你所读的，并且还不是medium会员，请使用下面我的推荐链接注册Medium，来支持我和这个平台上其他了不起的作家！提前感谢。</p><div class="oa ob gp gr oc od"><a href="https://philip-wilkinson.medium.com/membership" rel="noopener follow" target="_blank"><div class="oe ab fo"><div class="of ab og cl cj oh"><h2 class="bd iu gy z fp oi fr fs oj fu fw is bi translated">通过我的推荐链接加入Medium—Philip Wilkinson</h2><div class="ok l"><h3 class="bd b gy z fp oi fr fs oj fu fw dk translated">作为一个媒体会员，你的会员费的一部分会给你阅读的作家，你可以完全接触到每一个故事…</h3></div><div class="ol l"><p class="bd b dl z fp oi fr fs oj fu fw dk translated">philip-wilkinson.medium.com</p></div></div><div class="om l"><div class="on l oo op oq om or ks od"/></div></div></a></div><p id="a3c1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">或者随意查看我在Medium上的其他文章:</p><div class="oa ob gp gr oc od"><a rel="noopener follow" target="_blank" href="/eight-data-structures-every-data-scientist-should-know-d178159df252"><div class="oe ab fo"><div class="of ab og cl cj oh"><h2 class="bd iu gy z fp oi fr fs oj fu fw is bi translated">每个数据科学家都应该知道的八种数据结构</h2><div class="ok l"><h3 class="bd b gy z fp oi fr fs oj fu fw dk translated">从Python中的基本数据结构到抽象数据类型</h3></div><div class="ol l"><p class="bd b dl z fp oi fr fs oj fu fw dk translated">towardsdatascience.com</p></div></div><div class="om l"><div class="os l oo op oq om or ks od"/></div></div></a></div><div class="oa ob gp gr oc od"><a rel="noopener follow" target="_blank" href="/a-complete-data-science-curriculum-for-beginners-825a39915b54"><div class="oe ab fo"><div class="of ab og cl cj oh"><h2 class="bd iu gy z fp oi fr fs oj fu fw is bi translated">面向初学者的完整数据科学课程</h2><div class="ok l"><h3 class="bd b gy z fp oi fr fs oj fu fw dk translated">UCL数据科学协会:Python介绍，数据科学家工具包，使用Python的数据科学</h3></div><div class="ol l"><p class="bd b dl z fp oi fr fs oj fu fw dk translated">towardsdatascience.com</p></div></div><div class="om l"><div class="ot l oo op oq om or ks od"/></div></div></a></div><div class="oa ob gp gr oc od"><a href="https://python.plainenglish.io/a-practical-introduction-to-random-forest-classifiers-from-scikit-learn-536e305d8d87" rel="noopener  ugc nofollow" target="_blank"><div class="oe ab fo"><div class="of ab og cl cj oh"><h2 class="bd iu gy z fp oi fr fs oj fu fw is bi translated">scikit-learn中随机森林分类器的实用介绍</h2><div class="ok l"><h3 class="bd b gy z fp oi fr fs oj fu fw dk translated">UCL数据科学学会研讨会14:什么是随机森林分类器、实现、评估和改进</h3></div><div class="ol l"><p class="bd b dl z fp oi fr fs oj fu fw dk translated">python .平原英语. io</p></div></div><div class="om l"><div class="ou l oo op oq om or ks od"/></div></div></a></div></div></div>    
</body>
</html>