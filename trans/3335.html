<html>
<head>
<title>Tips on Pandas, RegEx &amp; Collections</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">关于熊猫、正则表达式和集合的提示</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/tips-on-pandas-regex-collections-f2e8096d12d2#2022-07-25">https://towardsdatascience.com/tips-on-pandas-regex-collections-f2e8096d12d2#2022-07-25</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="49fb" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">附有示例的实用指南</h2></div><p id="0c2e" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在之前关于<a class="ae lb" rel="noopener" target="_blank" href="/overview-on-apply-map-applymap-iterrows-itertuples-df752a11f451?sk=f093bcdd435ff3f3bef0b31a95d3e3a6">数据清理和特征工程</a>的文章中，我们经历了一些操作(应用、映射等)。)示例及其模拟运行时。</p><figure class="ld le lf lg gt lh gh gi paragraph-image"><div role="button" tabindex="0" class="li lj di lk bf ll"><div class="gh gi lc"><img src="../Images/5637d555f9ae7a901aa7e6918afa7085.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*reruFO9QkeL81mi7"/></div></div><p class="lo lp gj gh gi lq lr bd b be z dk translated">图片由<a class="ae lb" href="https://unsplash.com/@bugsster?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Taras Shypka </a>在<a class="ae lb" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</p></figure><p id="6ca3" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在本文中，我将分享对我的工作有帮助的其他例子，希望也能对你的工作有帮助。我们将会看一些例子…</p><ul class=""><li id="7d3d" class="ls lt iq kh b ki kj kl km ko lu ks lv kw lw la lx ly lz ma bi translated">熊猫显示设置</li><li id="95a4" class="ls lt iq kh b ki mb kl mc ko md ks me kw mf la lx ly lz ma bi translated">功能模式</li><li id="83fa" class="ls lt iq kh b ki mb kl mc ko md ks me kw mf la lx ly lz ma bi translated">编译正则表达式</li><li id="8ec8" class="ls lt iq kh b ki mb kl mc ko md ks me kw mf la lx ly lz ma bi translated">词典理解</li><li id="9286" class="ls lt iq kh b ki mb kl mc ko md ks me kw mf la lx ly lz ma bi translated">默认字典</li></ul><p id="19ba" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">…使用相同的iaito数据集。这些例子并不全面，但是它们应该有助于您开始探索它们的应用。</p></div><div class="ab cl mg mh hu mi" role="separator"><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml"/></div><div class="ij ik il im in"><p id="163e" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">关于数据集的简短概述；该数据集始于2012年，当时帮助iaidoka成员翻译iaito订单细节。每个记录包含每个所有者的iaito零件规格。出于隐私考虑，诸如所有者的全名和地址等敏感信息永远不会在数据集中捕获。数据集可以从我的<a class="ae lb" href="https://github.com/AngShengJun/petProj/blob/master/proj_nanato/project_nanato2022_Part1.xlsx" rel="noopener ugc nofollow" target="_blank"> GitHub repo </a>中访问。</p></div><div class="ab cl mg mh hu mi" role="separator"><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml"/></div><div class="ij ik il im in"><h2 id="c513" class="mn mo iq bd mp mq mr dn ms mt mu dp mv ko mw mx my ks mz na nb kw nc nd ne nf bi translated">熊猫显示设置</h2><p id="fd59" class="pw-post-body-paragraph kf kg iq kh b ki ng jr kk kl nh ju kn ko ni kq kr ks nj ku kv kw nk ky kz la ij bi translated">熊猫有很多选择。我们可能遇到和使用的比较常见的应该是<code class="fe nl nm nn no b">max_rows</code>或者<code class="fe nl nm nn no b">max_columns</code>。当读取可能很长的表时，某些列可能会被截断为“…”。为了减轻这种情况，我们可以设置它显示所有的列(即<code class="fe nl nm nn no b">pd.set_option('display.max_columns', None)</code>)。</p><pre class="ld le lf lg gt np no nq nr aw ns bi"><span id="ca2f" class="mn mo iq no b gy nt nu l nv nw">import pandas as pd<br/>pd.set_option('display.max_columns', None)<br/><br/>df = pd.read_excel('project_nanato2022_Part1.xlsx',)</span></pre><p id="1a5c" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">要查看数据帧的前n行或后n行，可以使用<code class="fe nl nm nn no b">head</code>或<code class="fe nl nm nn no b">tail</code>。</p><pre class="ld le lf lg gt np no nq nr aw ns bi"><span id="d7a0" class="mn mo iq no b gy nt nu l nv nw">display(df.head()) # take a look at first default = 5 rows<br/>df.tail() # take a look at last 5 rows</span></pre><figure class="ld le lf lg gt lh gh gi paragraph-image"><div role="button" tabindex="0" class="li lj di lk bf ll"><div class="gh gi nx"><img src="../Images/a90d93667c65b4c452380bffee599e06.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*NjIYlh16YLUb1JYsnlMybw.png"/></div></div><p class="lo lp gj gh gi lq lr bd b be z dk translated">作者图片</p></figure><p id="3523" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">不要误解我的意思，我完全支持使用<code class="fe nl nm nn no b">head()</code>和<code class="fe nl nm nn no b">tail()</code>，并且我仍然使用它们作为检查导出的数据帧副本是否正确的首选方法。但是通过上面的设置，我们压缩了数据框显示以显示第一行和最后“n”行——用更少的代码实现了相同的结果。</p><pre class="ld le lf lg gt np no nq nr aw ns bi"><span id="befe" class="mn mo iq no b gy nt nu l nv nw">pd.set_option('display.max_rows', 10) # set display to 10 rows</span><span id="2681" class="mn mo iq no b gy ny nu l nv nw">df = pd.read_excel('project_nanato2022_Part1.xlsx')<br/>df</span></pre><figure class="ld le lf lg gt lh gh gi paragraph-image"><div role="button" tabindex="0" class="li lj di lk bf ll"><div class="gh gi nz"><img src="../Images/64ff310f01e908f04145730c8a1493a0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*DdQKQcW0xdll3koz5wl1fg.png"/></div></div><p class="lo lp gj gh gi lq lr bd b be z dk translated">作者图片</p></figure><p id="e526" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">当<a class="ae lb" href="https://medium.com/data-arena/automate-data-cleaning-combining-of-files-a0fbdf853524?sk=e8ebe815c7b84cf982cd44dad908c224" rel="noopener">处理多个文件</a>时，另一个值得考虑的方面是检查这些文件的过程，以及潜在的文件大小。如果数据是干净的，但我们希望更好地感知数据特征，那么限制行数(即记录数)对于管理大文件更好。</p><pre class="ld le lf lg gt np no nq nr aw ns bi"><span id="e219" class="mn mo iq no b gy nt nu l nv nw"># limit to 5 rows<br/>df_limited = pd.read_excel('project_nanato2022_Part1.xlsx',nrows=5) <br/>df_limited</span></pre><figure class="ld le lf lg gt lh gh gi paragraph-image"><div role="button" tabindex="0" class="li lj di lk bf ll"><div class="gh gi nx"><img src="../Images/e9b5f15856c344ce9121606b43ad07bb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*q6N1DtaxsJ8jUy_ivP6s8A.png"/></div></div><p class="lo lp gj gh gi lq lr bd b be z dk translated">作者图片</p></figure></div><div class="ab cl mg mh hu mi" role="separator"><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml"/></div><div class="ij ik il im in"><ul class=""><li id="78a5" class="ls lt iq kh b ki kj kl km ko lu ks lv kw lw la lx ly lz ma bi translated">另一个容易被忽略的小问题是为了方便而重复调用函数。我知道——我倾向于随意使用这个。一个例子是<code class="fe nl nm nn no b">df.shape</code>。摆脱这种情况的第一步是记住输出的特征(在本例中是行和列计数的元组)。我们可以调用它一次，并在将结果赋给变量后访问它们。</li></ul><pre class="ld le lf lg gt np no nq nr aw ns bi"><span id="cbce" class="mn mo iq no b gy nt nu l nv nw">print(f'df rows: {df.shape[0]}, df columns: {df.shape[1]}')<br/>print('.shape returns a tuple of rows and cols as a result, \nconsider using as assigned to a variable.')<br/>res_shape = df.shape<br/>print(f'df rows: {res_shape[0]}, df columns: {res_shape[1]}')</span></pre><figure class="ld le lf lg gt lh gh gi paragraph-image"><div class="gh gi oa"><img src="../Images/68913c7b2562b8a0f002d997180caaf6.png" data-original-src="https://miro.medium.com/v2/resize:fit:950/format:webp/1*l38lTkeuIqnf4TyU50LFqw.png"/></div><p class="lo lp gj gh gi lq lr bd b be z dk translated">作者图片</p></figure></div><div class="ab cl mg mh hu mi" role="separator"><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml"/></div><div class="ij ik il im in"><h2 id="35e5" class="mn mo iq bd mp mq mr dn ms mt mu dp mv ko mw mx my ks mz na nb kw nc nd ne nf bi translated">功能模式</h2><p id="7ef5" class="pw-post-body-paragraph kf kg iq kh b ki ng jr kk kl nh ju kn ko ni kq kr ks nj ku kv kw nk ky kz la ij bi translated">在函数模式中安排代码增强了灵活性和易用性，我们可以用它来修改代码以进行下游的数据清理或转换。考虑到数据清理中有时存在的不确定性，我最初并不总是这样做，而是尝试在重构时实现它们以增强可重用性。我们将以清理列名为例。</p><pre class="ld le lf lg gt np no nq nr aw ns bi"><span id="f6b3" class="mn mo iq no b gy nt nu l nv nw"># initial column names<br/>ini_cols = df.columns<br/>ini_cols</span></pre><figure class="ld le lf lg gt lh gh gi paragraph-image"><div role="button" tabindex="0" class="li lj di lk bf ll"><div class="gh gi ob"><img src="../Images/e4de27dc9f0b9edce2087c8787e021cd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*K2IszNtvBym2vESSiAnTgQ.png"/></div></div><p class="lo lp gj gh gi lq lr bd b be z dk translated">作者图片</p></figure><p id="464b" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">关于这些列标题，我们需要</p><ul class=""><li id="02c3" class="ls lt iq kh b ki kj kl km ko lu ks lv kw lw la lx ly lz ma bi translated">删除逗号(即标点符号)</li><li id="6ad6" class="ls lt iq kh b ki mb kl mc ko md ks me kw mf la lx ly lz ma bi translated">用下划线替换空格</li><li id="57c6" class="ls lt iq kh b ki mb kl mc ko md ks me kw mf la lx ly lz ma bi translated">小写字母</li></ul><p id="b17e" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">让我们看看上一篇文章中的实现。为简洁起见，显示的行数调整为一。在这个例子中，重命名不是就地完成的。</p><pre class="ld le lf lg gt np no nq nr aw ns bi"><span id="03cd" class="mn mo iq no b gy nt nu l nv nw">pd.set_option('display.max_rows', 1) # 1 row for easier reading<br/># lowercase, drop commas, replace newline &amp; spaces with underscores<br/>col_names = []<br/>for old in df.columns:<br/>    new = re.sub( r"[,]" ,'',old.strip()) <br/>    new = re.sub( r"[\n\s/]" ,'_',new) <br/>    col_names.append(new.lower()) <br/>df.rename(columns=dict(zip(df.columns, col_names)), ) </span></pre><figure class="ld le lf lg gt lh gh gi paragraph-image"><div role="button" tabindex="0" class="li lj di lk bf ll"><div class="gh gi oc"><img src="../Images/c1dd9f8ebfa37da06dabb2b9b852d1cb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*XFcwL1_Wk-ZHsHQQldTrBQ.png"/></div></div><p class="lo lp gj gh gi lq lr bd b be z dk translated">作者图片</p></figure><ul class=""><li id="3bb6" class="ls lt iq kh b ki kj kl km ko lu ks lv kw lw la lx ly lz ma bi translated">现在，让我们把它分成几个方面，我们可以提高它。首先，我们可以使用<code class="fe nl nm nn no b">compile</code>派生可重用的正则表达式对象。下面是一个编译正则表达式的例子，然后手动调用模式的替换。</li></ul><pre class="ld le lf lg gt np no nq nr aw ns bi"><span id="4469" class="mn mo iq no b gy nt nu l nv nw">comma_ = re.compile( r"[,]" ) # compile the regular expression</span><span id="a2c4" class="mn mo iq no b gy ny nu l nv nw">test_string_ = ini_cols[29]<br/>print(f'input:\n\t{test_string_}')</span><span id="f98b" class="mn mo iq no b gy ny nu l nv nw">res_string_ = comma_.sub('', test_string_.strip())<br/>print(f'comma removed:\n\t{res_string_}')</span></pre><figure class="ld le lf lg gt lh gh gi paragraph-image"><div class="gh gi od"><img src="../Images/6253b2253c20e6f5541e62be6f20940e.png" data-original-src="https://miro.medium.com/v2/resize:fit:772/format:webp/1*4hyIUriXdBEnGU6J7KuWLQ.png"/></div><p class="lo lp gj gh gi lq lr bd b be z dk translated">作者图片</p></figure><p id="d8e9" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后，我们可以通过将操作序列作为一个iterable来实现这一点。我们会…</p><ul class=""><li id="7ee3" class="ls lt iq kh b ki kj kl km ko lu ks lv kw lw la lx ly lz ma bi translated">编译所有的正则表达式；</li><li id="3608" class="ls lt iq kh b ki mb kl mc ko md ks me kw mf la lx ly lz ma bi translated">创建操作列表；</li><li id="85f3" class="ls lt iq kh b ki mb kl mc ko md ks me kw mf la lx ly lz ma bi translated">最后，作为一种功能来应用</li></ul><pre class="ld le lf lg gt np no nq nr aw ns bi"><span id="0c2c" class="mn mo iq no b gy nt nu l nv nw"># compile regular expressions<br/>comma_ = re.compile( r"[,]" )<br/>whitespaces_ = re.compile( r"[\n\s/]" )</span><span id="1b77" class="mn mo iq no b gy ny nu l nv nw"># functions <br/>def remove_comma(val):<br/>    return comma_.sub('', val)</span><span id="cd74" class="mn mo iq no b gy ny nu l nv nw">def replace_whitespaces(val):<br/>    return whitespaces_.sub('_', val)</span><span id="4b0b" class="mn mo iq no b gy ny nu l nv nw">def clean_headers(headers, op_seq):<br/>    cleaned_cols = []<br/>    for val in headers:<br/>        for op in op_seq:<br/>            val = op(val)<br/>        cleaned_cols.append(val)<br/>    return cleaned_cols</span><span id="d628" class="mn mo iq no b gy ny nu l nv nw"># sequence of operations as a list<br/>op_seq = [str.strip, remove_comma, replace_whitespaces, str.lower]<br/># implement on df column headers<br/>res = clean_headers(df.columns, op_seq)<br/>df.rename(columns=dict(zip(df.columns, res)), inplace=True) <br/>df</span></pre><figure class="ld le lf lg gt lh gh gi paragraph-image"><div role="button" tabindex="0" class="li lj di lk bf ll"><div class="gh gi oe"><img src="../Images/b1b4975d6800d096a62a3eb41f7254e5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*amCiADwPZg6mFiKED_66yg.png"/></div></div><p class="lo lp gj gh gi lq lr bd b be z dk translated">作者图片</p></figure><h2 id="879b" class="mn mo iq bd mp mq mr dn ms mt mu dp mv ko mw mx my ks mz na nb kw nc nd ne nf bi translated">词典理解</h2><p id="004c" class="pw-post-body-paragraph kf kg iq kh b ki ng jr kk kl nh ju kn ko ni kq kr ks nj ku kv kw nk ky kz la ij bi translated">与列表理解类似，语法如下:</p><figure class="ld le lf lg gt lh gh gi paragraph-image"><div class="gh gi of"><img src="../Images/84ac17513d0f5a108125c2a19e81db68.png" data-original-src="https://miro.medium.com/v2/resize:fit:864/format:webp/1*_brZOAHxtlROEOf5fSLTcA.png"/></div><p class="lo lp gj gh gi lq lr bd b be z dk translated">作者图片</p></figure><p id="1421" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">对于if-else条件，应该是:</p><figure class="ld le lf lg gt lh gh gi paragraph-image"><div class="gh gi og"><img src="../Images/b5c94895f7d137caa48f4d049b1bcc7b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1122/format:webp/1*vm9U_wSxmY7UreZF4sxNcw.png"/></div><p class="lo lp gj gh gi lq lr bd b be z dk translated">作者图片</p></figure><p id="a16e" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们会得到一部分数据。假设我们想要创建一个带有从所有者的性别推断出的称呼的列(即，如果性别是' M '，则添加' Mr . '；如果性别是' F '，则使用5行数据以保持简洁)。</p><pre class="ld le lf lg gt np no nq nr aw ns bi"><span id="edad" class="mn mo iq no b gy nt nu l nv nw">pd.set_option('display.max_rows', 10) # set display to 10 rows<br/>df_subset = df.iloc[:5][['owner', 'gender']].copy()</span></pre><p id="52dd" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">一种实现是:</p><pre class="ld le lf lg gt np no nq nr aw ns bi"><span id="84c0" class="mn mo iq no b gy nt nu l nv nw">name = {}<br/>for i in range(len(df_subset)):<br/>    if df_subset['gender'][i] == 'M':<br/>        name[i] = 'Mr. ' + df_subset['owner'][i]<br/>    else:<br/>        name[i] = 'Ms. ' + df_subset['owner'][i]<br/>        <br/>df_dict = pd.DataFrame.from_dict(name, orient='index',columns=['name'])<br/>df_dict</span></pre><figure class="ld le lf lg gt lh gh gi paragraph-image"><div class="gh gi oh"><img src="../Images/c9e81d64a76b1e703f7e3e83da6c89be.png" data-original-src="https://miro.medium.com/v2/resize:fit:234/format:webp/1*nqy9i6ikqLXggFP86iOYdA.png"/></div><p class="lo lp gj gh gi lq lr bd b be z dk translated">作者图片</p></figure><p id="3ee6" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">用字典理解:</p><pre class="ld le lf lg gt np no nq nr aw ns bi"><span id="4b0c" class="mn mo iq no b gy nt nu l nv nw">name2 = {i:'Mr. ' + df_subset['owner'][i]  <br/>         if df_subset['gender'][i] == 'M' <br/>         else 'Ms. ' + df_subset['owner'][i]<br/>         for i in range(len(df_subset)) <br/>        }<br/>         <br/>df_dict2 = pd.DataFrame.from_dict(name2, orient='index',columns=['name2'])<br/>df_dict2</span></pre><figure class="ld le lf lg gt lh gh gi paragraph-image"><div class="gh gi oi"><img src="../Images/55e4ce15c007725187c65b3be378789a.png" data-original-src="https://miro.medium.com/v2/resize:fit:222/format:webp/1*3CisGRaqZRA7o8VRERgeJQ.png"/></div><p class="lo lp gj gh gi lq lr bd b be z dk translated">作者图片</p></figure><h2 id="042d" class="mn mo iq bd mp mq mr dn ms mt mu dp mv ko mw mx my ks mz na nb kw nc nd ne nf bi translated">默认字典</h2><p id="9814" class="pw-post-body-paragraph kf kg iq kh b ki ng jr kk kl nh ju kn ko ni kq kr ks nj ku kv kw nk ky kz la ij bi translated">在字典中设置值通常涉及到从另一个集合中引用它们。典型的逻辑包括:如果值不在字典中，则设置一个键-值对；如果键已经存在，则添加到值序列中。如果默认值不在此实例的字典中，则认为它设置了一个键值对。使用来自<code class="fe nl nm nn no b">collections</code>的<code class="fe nl nm nn no b">defaultdict</code>可以方便地获得字典中的默认值。一个假设的用例可以回答:“生成每个模型的tsuba选择列表。”</p><pre class="ld le lf lg gt np no nq nr aw ns bi"><span id="6f96" class="mn mo iq no b gy nt nu l nv nw"># prep the data to work with<br/>tsuba_codes = df['tsuba'].apply(lambda x: x.split(' ')[0])<br/>model_series = df['model']</span><span id="9ab5" class="mn mo iq no b gy ny nu l nv nw">print(tsuba_codes.unique())<br/>print(model_series.unique())</span></pre><figure class="ld le lf lg gt lh gh gi paragraph-image"><div class="gh gi oj"><img src="../Images/a593eee051d33c9394b08ea6c3f19140.png" data-original-src="https://miro.medium.com/v2/resize:fit:1328/format:webp/1*8ausFfYUBK8uPAXaSKeogw.png"/></div><p class="lo lp gj gh gi lq lr bd b be z dk translated">可处理的潜在数据范围|按作者分类的图片</p></figure><p id="deb2" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">使用for循环:</p><pre class="ld le lf lg gt np no nq nr aw ns bi"><span id="2d8e" class="mn mo iq no b gy nt nu l nv nw">model_tsuba = {}<br/>for model, code in list(zip(model_list, tsuba_codes)):<br/>    if model not in model_tsuba:<br/>        model_tsuba[ model ] = [code]<br/>    if code not in model_tsuba[model]: # avoids duplicate tsuba code<br/>        model_tsuba[ model ].append(code)</span><span id="98ad" class="mn mo iq no b gy ny nu l nv nw">for k, v in model_tsuba.items():<br/>    v.sort()<br/>    print(f'{k}: {", ".join(ele for ele in v)}')</span></pre><figure class="ld le lf lg gt lh gh gi paragraph-image"><div role="button" tabindex="0" class="li lj di lk bf ll"><div class="gh gi oe"><img src="../Images/4680dcfe5d734c926804268801f7ab31.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qv5uFLAZPyxO_gWntPPypw.png"/></div></div><p class="lo lp gj gh gi lq lr bd b be z dk translated">作者图片</p></figure><pre class="ld le lf lg gt np no nq nr aw ns bi"><span id="c1b0" class="mn mo iq no b gy nt nu l nv nw">from collections import defaultdict</span><span id="1fd7" class="mn mo iq no b gy ny nu l nv nw">model_tsuba2 = defaultdict(list)<br/>for model, code in list(zip(model_list, tsuba_codes)):<br/>    model_tsuba2[model] = list(set(model_tsuba2[model] + [code]))</span><span id="0665" class="mn mo iq no b gy ny nu l nv nw">for k, v in model_tsuba2.items():<br/>    v.sort()<br/>    print(f"{k}: {', '.join(ele for ele in v)}")</span></pre><figure class="ld le lf lg gt lh gh gi paragraph-image"><div role="button" tabindex="0" class="li lj di lk bf ll"><div class="gh gi ok"><img src="../Images/12f1283abf9d7b6bc643ed6baa7bbaf7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dWsVhsJzVtT8NgVmNQ3SXA.png"/></div></div><p class="lo lp gj gh gi lq lr bd b be z dk translated">作者图片</p></figure></div><div class="ab cl mg mh hu mi" role="separator"><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml"/></div><div class="ij ik il im in"><p id="00f0" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">本文只介绍了一些函数和例子，但是它们应该是您会遇到的最常见的函数和例子。</p><p id="2f77" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我希望这篇文章是一篇信息丰富的读物。感谢您的阅读，直到那时保持安全！</p></div></div>    
</body>
</html>