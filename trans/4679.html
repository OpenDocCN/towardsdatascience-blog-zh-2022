<html>
<head>
<title>Optimize Power BI data model with Tabular Editor</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用表格编辑器优化Power BI数据模型</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/optimize-power-bi-data-model-with-tabular-editor-95449aae5af2#2022-10-18">https://towardsdatascience.com/optimize-power-bi-data-model-with-tabular-editor-95449aae5af2#2022-10-18</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="302f" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">表格编辑器是不是一种魔杖，只需点击几下，就能帮你把数据模型“怪物”变成“美女”？差不多！了解如何利用表格编辑器中的最佳实践分析器扩展来快速获得最佳形状的模型</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/5a8dfb5a3524ce8b81e162acc150eb1d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1wxhfRzZgPSHbD-COpnGYw.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><p id="15cc" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">在上一篇文章中，我们已经解释了<a class="ae lu" href="https://data-mozart.com/mastering-dp-500-exam-troubleshoot-dax-performance-with-dax-studio/" rel="noopener ugc nofollow" target="_blank">如何利用DAX Studio免费外部工具来对执行不佳的DAX查询</a>进行故障排除。现在是时候将我们的焦点转移到另一个非常流行的外部工具——表格编辑器！我已经写了关于表格编辑器和它的一些特性，这些特性可以<a class="ae lu" href="https://data-mozart.com/tabular-editor-3-features-to-boost-your-power-bi-development/" rel="noopener ugc nofollow" target="_blank">极大地促进您的Power BI开发</a>。</p><p id="eb65" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">表格编辑器是一个全面的工具，可能对各种开发场景都有帮助。然而，由于DP-500考试的重点是<strong class="la iu"> <em class="lv">使用表格编辑器</em> </strong>优化数据模型的主题，让我们解释一下该工具如何帮助您实现这一特定目标。</p><p id="55da" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated"><strong class="la iu">免责声明:</strong>由于DP-500考试明确地为这个主题指定了表格编辑器2(免费版本)，我们将在本文的剩余部分使用这个版本。当然，您可以在表格编辑器3中应用所有相同的步骤，这是该产品的商业版本</p><p id="26ee" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">但是，现在您可能会问自己:优化数据模型是一个如此广泛的主题，如何用一个工具来帮助我应用跨越多个书籍、视频、白皮书和博客帖子的所有建议呢？表格编辑器是不是一种魔杖，只需点击几下，就能帮你把数据模型“怪物”变成“美女”？！</p><p id="0e98" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">当然不是！了解数据模型优化的一般最佳实践，例如避免<a class="ae lu" href="https://medium.com/p/b6b0b9e150f4" rel="noopener">双向关系</a>，减少<a class="ae lu" href="https://medium.com/p/3add4137753e" rel="noopener">列基数</a>，尽可能避免<a class="ae lu" href="https://medium.com/p/8180825812d2" rel="noopener"> DirectQuery </a>，或者移除<a class="ae lu" href="https://data-mozart.com/tiq-part-1-how-to-destroy-your-power-bi-model-with-auto-date-time/" rel="noopener ugc nofollow" target="_blank">自动日期/时间隐藏表</a>，仍然是关键需求！但是，Tabular Editor可以帮助您快速、轻松地识别这些实践的潜在违规行为——基于所获得的洞察力，您可以决定是要应用推荐的实践还是保留原始的数据建模逻辑。</p><p id="da07" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">在我向您展示如何使用表格编辑器实现这一特定目标之前，我必须承认，我没有对您完全坦诚…单靠表格编辑器无法将您的数据模型从灾难中拯救出来。您必须使用表格编辑器扩展，称为最佳实践分析器。</p><h1 id="b10c" class="lw lx it bd ly lz ma mb mc md me mf mg jz mh ka mi kc mj kd mk kf ml kg mm mn bi translated">最佳实践分析器简介</h1><p id="52d2" class="pw-post-body-paragraph ky kz it la b lb mo ju ld le mp jx lg lh mq lj lk ll mr ln lo lp ms lr ls lt im bi translated">当处理有问题的数据模型时，Best Practice Analyzer将很快成为您最好的朋友。这个工具，或者更好的说法是extension，是由微软的Michael Kovalsky开发的。您可以在本文的<a class="ae lu" href="https://powerbi.microsoft.com/en-us/blog/best-practice-rules-to-improve-your-models-performance/" rel="noopener ugc nofollow" target="_blank">中找到关于工具本身的更多细节。</a></p><p id="aa26" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">简而言之，最佳实践分析器(BPA)扫描您的表格数据模型，并警告您模型中的所有“问题”。有些“问题”就是——带双引号的“问题”。这意味着您可以忍受这些“问题”,而不会牺牲模型性能。</p><p id="0bb5" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">BPA依赖于规则—每个规则都属于某个类别，比如DAX表达式、性能、格式等等。显然，并不是所有的规则对模型性能都有同样的重要性。也就是说，从模型性能的角度来看，如果您将数据模型对象的第一个字母大写，或者隐藏外键，都没有关系。但是，如果您尚未对大型表进行分区，如果您的模型包含许多双向或M:M关系，或者如果您的模型中有许多计算列和计算表，这种影响可能会很大。</p><h1 id="9abd" class="lw lx it bd ly lz ma mb mc md me mf mg jz mh ka mi kc mj kd mk kf ml kg mm mn bi translated">在表格编辑器中使用BPA</h1><p id="6d00" class="pw-post-body-paragraph ky kz it la b lb mo ju ld le mp jx lg lh mq lj lk ll mr ln lo lp ms lr ls lt im bi translated">安装表格编辑器时，最佳实践分析器不是现成的。您需要通过在表格编辑器的高级编辑器窗口中运行以下脚本来手动添加它:</p><pre class="kj kk kl km gt mt mu mv mw aw mx bi"><span id="8fc6" class="my lx it mu b gy mz na l nb nc">System.Net.WebClient w = new System.Net.WebClient(); <br/><br/>string path = System.Environment.GetFolderPath(System.Environment.SpecialFolder.LocalApplicationData);<br/>string url = "https://raw.githubusercontent.com/microsoft/Analysis-Services/master/BestPracticeRules/BPARules.json";<br/>string downloadLoc = path+@"\TabularEditor\BPARules.json";<br/>w.DownloadFile(url, downloadLoc);</span></pre><p id="5b78" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">你也可以从GitHub下载BPARules.json文件，如<a class="ae lu" href="https://powerbi.microsoft.com/en-us/blog/best-practice-rules-to-improve-your-models-performance/" rel="noopener ugc nofollow" target="_blank">这里</a>所述。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nd"><img src="../Images/d36b9755092df41432f7df47c5f21582.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Kqkykv5wIOIZTD8mKDxkFg.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><p id="2cc0" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">这是我的数据模型，您可能注意到了，我有意对在线销售事实表和客户维度表之间的关系启用了双向过滤。现在，我将切换到表格编辑器，并从表格编辑器工具选项卡中启动最佳实践分析工具:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nd"><img src="../Images/2877c1f216cc2660753997a9100e0410.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*p9QbeirjAOZ-50VZybXqfg.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><p id="574c" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">当我运行Best Practice Analyzer来扫描我的数据模型时，会弹出一个新窗口，显示所有的发现和警告:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nd"><img src="../Images/bfe62c2b0b495c7d4f2f9a6577bce5ea.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*yqQM0YZxvmO2KOgFYnCBPw.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><p id="f3bd" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我可以看到222个对象违反了19条BPA规则！看来有人没做作业。然而，这个模型是故意这样构建的，事先没有任何优化。此外，您可能会注意到，125个对象违反了没有描述的规则，这从性能优化的角度来看是完全不相关的。</p><p id="31b5" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">但是，这里有一个与数据模型性能非常相关的问题，它对我之前在Power BI Desktop中创建的双向关系提出了警告:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nd"><img src="../Images/6b43c1187280ffa4b1d74061fb53b73a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*v_SGZb83DRNRztVj252FlQ.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><p id="0504" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">如果我右键单击特定对象，会有一系列可能的选项可供选择:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ne"><img src="../Images/c707600dc816daf49b21cce61b40846a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7WfO6rbNPmEUUe5P0viPfg.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><p id="8e5c" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">其中一个选项是对该对象应用即时修复，一旦这样做，警告就会消失。您也可以决定忽略整个规则，就像我对那些“无描述”对象所做的那样:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nf"><img src="../Images/8cc77bc99b920b09dee8fe09319867be.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FHFcxjlmca3wuVdKSFZL7A.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><p id="f355" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">但是，还有更多。在我看来，最佳实践分析器最强大的功能是表格编辑器中Tools选项卡下的Manage BPA Rules选项。一旦您打开它，您将不仅能够更改规则逻辑和定义(假设您熟悉C#脚本)，而且在描述字段中，您还会找到一篇文章的链接，该文章解释了为什么某个规则是——RULE！</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nd"><img src="../Images/c25742d56e7a13d88b818078922bc836.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WqhjZAy_KYzK3EbjuuZ4Bw.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><p id="ec05" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">这是一个惊人的特性，因为它为您提供了学习和理解表格数据模型优化背后的推荐实践的可能性，而不是盲目地应用所有建议的修改。</p><p id="b66c" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">表格编辑器还使您能够扩展预建的规则集，并定义自己的规则！关于如何做到这一点的更多信息可以在<a class="ae lu" href="https://docs.tabulareditor.com/onboarding/bpa.html#adding-rules" rel="noopener ugc nofollow" target="_blank">这里</a>找到。</p><h1 id="c7a5" class="lw lx it bd ly lz ma mb mc md me mf mg jz mh ka mi kc mj kd mk kf ml kg mm mn bi translated">结论</h1><p id="8d38" class="pw-post-body-paragraph ky kz it la b lb mo ju ld le mp jx lg lh mq lj lk ll mr ln lo lp ms lr ls lt im bi translated">我猜你已经知道表格编辑器有多神奇了！尽管它的功能不仅限于优化表格数据模型，但在本文中，我们解释了表格编辑器如何与最佳实践分析器扩展协同工作，帮助您对数据模型执行快速健康检查。不仅如此，基于这个检查的结果，您可以快速地应用修复和推荐的实践来提高整个模型的效率。</p><p id="5981" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">感谢阅读！</p><p id="0767" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated"><a class="ae lu" href="https://datamozart.medium.com/membership" rel="noopener">成为会员，阅读媒体上的每一个故事！</a></p></div></div>    
</body>
</html>