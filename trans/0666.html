<html>
<head>
<title>ML Without the Ops: Running Experiments at Scale with Ploomber on AWS</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">没有Ops的ML:在AWS上用Ploomber进行大规模实验</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/ml-without-the-ops-running-experiments-at-scale-with-ploomber-on-aws-29c4b78ff0fa#2022-02-26">https://towardsdatascience.com/ml-without-the-ops-running-experiments-at-scale-with-ploomber-on-aws-29c4b78ff0fa#2022-02-26</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><h2 id="a09b" class="io ip iq bd b dl ir is it iu iv iw dk ix translated" aria-label="kicker paragraph">行动中的MLOps</h2><div class=""/><div class=""><h2 id="6f71" class="pw-subtitle-paragraph jw iz iq bd b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn dk translated">用Ploomber从Jupyter到云</h2></div><p id="0cfd" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">在过去的几个月里，<a class="ae lk" href="https://ploomber.io/" rel="noopener ugc nofollow" target="_blank">我们</a>与许多数据科学和机器学习团队聊天，以了解他们的痛点。当然还有<em class="ll">很多这些</em>。然而，最让我惊讶的是，让一些简单的端到端工作流工作起来是多么困难，部分原因是供应商经常将团队锁定在需要大量设置和维护的复杂解决方案中。</p><p id="2307" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">这篇博客文章将描述一个简单的架构，您可以使用它在云中开始构建数据管道，而不会牺牲您最喜欢的工具或经常性的高维护成本。解决方案包括使用我们的开源框架和AWS批处理。我们开始吧！</p><figure class="ln lo lp lq gt lr gh gi paragraph-image"><div role="button" tabindex="0" class="ls lt di lu bf lv"><div class="gh gi lm"><img src="../Images/66475df9c6c9f88b8f5e6d4f72ad80f5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Q26sAAd2PpsEFZovc4pX0g.png"/></div></div><p class="ly lz gj gh gi ma mb bd b be z dk translated">Ploomber允许您在AWS上轻松运行作业。图片作者。</p></figure><h1 id="bf8e" class="mc md iq bd me mf mg mh mi mj mk ml mm kf mn kg mo ki mp kj mq kl mr km ms mt bi translated"><strong class="ak">什么是AWS批次？</strong></h1><p id="3edb" class="pw-post-body-paragraph ko kp iq kq b kr mu ka kt ku mv kd kw kx mw kz la lb mx ld le lf my lh li lj ij bi translated">AWS Batch 是一个托管服务，允许用户提交批处理作业。AWS提供资源(例如启动EC2实例)而没有额外成本(您只需为使用的AWS资源付费)。</p><p id="697a" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">AWS Batch是一个很好的服务，但是它仍然需要一些设置来封装您的代码并提交作业。<strong class="kq ja">我们的开源框架允许您自动化这一过程，因此您可以快速地从您喜欢的交互环境(Jupyter、VScode、PyCharm等)迁移到云。</strong></p><h1 id="d5f6" class="mc md iq bd me mf mg mh mi mj mk ml mm kf mn kg mo ki mp kj mq kl mr km ms mt bi translated"><strong class="ak"> Ploomber &amp; AWS Batch = ML不带Ops </strong></h1><p id="2a6f" class="pw-post-body-paragraph ko kp iq kq b kr mu ka kt ku mv kd kw kx mw kz la lb mx ld le lf my lh li lj ij bi translated">如果你没有听说过我们，Ploomber是一个开源框架，允许数据科学家和机器学习工程师从他们最喜欢的编辑器中构建模块化管道。<strong class="kq ja">我们为用户提供了一种简单的方法来模块化他们的工作，而不会干扰现有的工作流程。</strong></p><p id="5fb6" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">当您准备运行更大规模的实验或部署时，您可以通过一个命令快速转移到AWS Batch(我们也支持Kubernetes、Airflow和SLURM作为后端)。我们的框架自动构建Docker映像，将其推送到容器注册中心，在任务之间传递数据，向AWS批处理提交作业，缓存结果，并将工件上传到S3。成功执行后，您可以下载结果并在本地进行分析。</p><h1 id="bd9c" class="mc md iq bd me mf mg mh mi mj mk ml mm kf mn kg mo ki mp kj mq kl mr km ms mt bi translated"><strong class="ak">看起来怎么样？</strong></h1><p id="64ff" class="pw-post-body-paragraph ko kp iq kq b kr mu ka kt ku mv kd kw kx mw kz la lb mx ld le lf my lh li lj ij bi translated">在Ploomber中，用户通常在一个<code class="fe mz na nb nc b">pipeline.yaml</code>文件中声明他们的任务(尽管Python API也是可用的)。这些任务可以是函数，笔记本，或者脚本(注意:我们与Jupyter集成，允许用户将<code class="fe mz na nb nc b">.py</code>作为笔记本打开)。这里有一个例子:</p><figure class="ln lo lp lq gt lr"><div class="bz fp l di"><div class="nd ne l"/></div></figure><p id="6f40" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">一旦声明了<code class="fe mz na nb nc b">pipeline.yaml</code>,您就可以使用以下命令在本地编排执行:</p><figure class="ln lo lp lq gt lr"><div class="bz fp l di"><div class="nd ne l"/></div></figure><p id="b4ba" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">只需几个额外的步骤，您就可以将本地管道转移到AWS批处理；以下是11个模型训练任务(并行执行)在AWS上完成执行后的截图:</p><figure class="ln lo lp lq gt lr gh gi paragraph-image"><div role="button" tabindex="0" class="ls lt di lu bf lv"><div class="gh gi nf"><img src="../Images/1dabd78cbf54838add7e23f3834a39e6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*y0_qa1u12Mv1lmhMeQEmcw.png"/></div></div><p class="ly lz gj gh gi ma mb bd b be z dk translated">AWS批处理控制台上的计划任务。图片作者。</p></figure><p id="77b3" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">这是输出。模型文件:</p><figure class="ln lo lp lq gt lr gh gi paragraph-image"><div role="button" tabindex="0" class="ls lt di lu bf lv"><div class="gh gi ng"><img src="../Images/8e75efb6e932069816e0580f59bbb8b0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*EL0AMvIdIHrLznF5ytTEEw.png"/></div></div><p class="ly lz gj gh gi ma mb bd b be z dk translated">在S3上输出模型文件。图片作者。</p></figure><p id="b143" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">以及每个模型的HTML报告:</p><figure class="ln lo lp lq gt lr gh gi paragraph-image"><div role="button" tabindex="0" class="ls lt di lu bf lv"><div class="gh gi nh"><img src="../Images/6db5fc9346f410d0ec1a23a7b674cf11.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*M5crxC2rBswd9EZszcfIIg.png"/></div></div><p class="ly lz gj gh gi ma mb bd b be z dk translated">输出关于S3的模型评估报告。图片作者。</p></figure><h1 id="f0ae" class="mc md iq bd me mf mg mh mi mj mk ml mm kf mn kg mo ki mp kj mq kl mr km ms mt bi translated"><strong class="ak">增量构建的快速迭代(此外，节省您的云账单💰！)</strong></h1><figure class="ln lo lp lq gt lr gh gi paragraph-image"><div class="gh gi ni"><img src="../Images/fcd1b4a922bb9795536bc7420b813391.png" data-original-src="https://miro.medium.com/v2/resize:fit:1362/format:webp/1*jsPCq_euMNeWt5yC7P8OSg.png"/></div><p class="ly lz gj gh gi ma mb bd b be z dk translated">Ploomber只执行自上次运行以来发生变化的任务。图片作者。</p></figure><p id="a0c2" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">数据科学和机器学习是高度迭代的。例如，您可能希望调整预处理参数，调整一些特征工程转换，或者添加一些诊断图表。在每个小的迭代中重新运行端到端的管道是浪费你的时间(和金钱)。为了帮助你，Ploomber跟踪源代码的变化。因此，下次执行工作流时，它将只提交自上次执行以来源代码已经更改的作业(以及所有下游任务)，从而显著加快迭代速度并减少云计算时间。</p><h1 id="68ae" class="mc md iq bd me mf mg mh mi mj mk ml mm kf mn kg mo ki mp kj mq kl mr km ms mt bi translated"><strong class="ak">现在就试试吧！</strong></h1><p id="99cd" class="pw-post-body-paragraph ko kp iq kq b kr mu ka kt ku mv kd kw kx mw kz la lb mx ld le lf my lh li lj ij bi translated">运行Ploomber示例:</p><figure class="ln lo lp lq gt lr"><div class="bz fp l di"><div class="nd ne l"/></div></figure><p id="fd01" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated"><strong class="kq ja">祝贺你，你运行了你的第一个Ploomber管道！🎉</strong></p><p id="0ad2" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">在AWS批处理中运行管道只需要几个额外的步骤:</p><figure class="ln lo lp lq gt lr"><div class="bz fp l di"><div class="nd ne l"/></div></figure><p id="faa1" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">在提交到AWS批处理之前，您需要从AWS控制台配置服务，然后配置您的项目。查看我们的完整教程，了解更多信息。</p><p id="bf98" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">完成后，您可以使用以下命令提交到云:</p><figure class="ln lo lp lq gt lr"><div class="bz fp l di"><div class="nd ne l"/></div></figure><p id="ad7d" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated"><strong class="kq ja"> Ploomber + AWS Batch是在没有基础设施管理的情况下开始运行数据科学和机器学习管道的最精简的方式。</strong>由于它允许您使用自己喜欢的文本编辑器构建数据管道，因此无需重构代码即可在云中运行工作流，从而缩短开发周期，让您能够更快地进行实验。</p><p id="0948" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">你有什么问题吗？在<a class="ae lk" href="https://ploomber.io/community" rel="noopener ugc nofollow" target="_blank">松驰上Ping我们！</a></p></div><div class="ab cl nj nk hu nl" role="separator"><span class="nm bw bk nn no np"/><span class="nm bw bk nn no np"/><span class="nm bw bk nn no"/></div><div class="ij ik il im in"><p id="9550" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated"><em class="ll">最初发布于</em><a class="ae lk" href="https://ploomber.io/blog/aws-batch/" rel="noopener ugc nofollow" target="_blank"><em class="ll">ploomber . io</em></a></p></div></div>    
</body>
</html>