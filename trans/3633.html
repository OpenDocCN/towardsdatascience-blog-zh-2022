<html>
<head>
<title>Customer Segmentation with Python (Implementing STP Framework - Part 3/5)</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Python进行客户细分(实现STP框架——第3/5部分)</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/customer-segmentation-with-python-implementing-stp-framework-part-3-e81a79181d07#2022-08-12">https://towardsdatascience.com/customer-segmentation-with-python-implementing-stp-framework-part-3-e81a79181d07#2022-08-12</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="882e" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">使用PCA实现k-means聚类的分步指南</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/51a6b997a6e89e5867cb301dd654fceb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*I9-6fp7yXp5xPVVw"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上由<a class="ae ky" href="https://unsplash.com/@kmuza?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Carlos Muza </a>拍摄的照片</p></figure><p id="0d2c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">到目前为止，在我们实施STP营销框架(细分、目标和定位)的过程中，我们已经完成了以下工作:</p><p id="7b92" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在<a class="ae ky" rel="noopener" target="_blank" href="/customer-segmentation-with-python-implementing-stp-framework-part-1-5c2d93066f82">的第一篇文章</a>中，我们已经<br/>定义了我们的目标并学习了基础知识<br/>设置了Deepnote开发环境<br/>探索了我们一直在使用的客户数据集的不同属性/特征<br/>处理并标准化了我们的数据集<br/>使用分层聚类对客户进行了细分</p><p id="e34a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然后，在第<a class="ae ky" rel="noopener" target="_blank" href="/customer-segmentation-with-python-implementing-stp-framework-part-2-689b81a7e86d">篇文章</a>中，我们<br/>学习了k-means聚类算法(平面聚类)和elbow方法，以确定数据集中的最佳聚类数<br/>使用k-means聚类对客户数据集进行细分，并命名我们的客户群<br/>分析了细分结果</p><p id="4027" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">正如我们在第二篇文章中看到的，我们的聚类方法无法清楚地区分不同的客户群，在这篇文章中，我们将尝试使用降维来改善这一点。</p><h2 id="4ba3" class="lv lw it bd lx ly lz dn ma mb mc dp md li me mf mg lm mh mi mj lq mk ml mm mn bi translated">主成分分析</h2><p id="ce74" class="pw-post-body-paragraph kz la it lb b lc mo ju le lf mp jx lh li mq lk ll lm mr lo lp lq ms ls lt lu im bi translated">当数据集中的多个要素高度相关时，会因为冗余信息而扭曲模型的结果。这就是我们的k均值模型所发生的情况。这就是所谓的多重共线性问题。我们可以通过降维来解决这个问题。</p><p id="03ec" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><a class="ae ky" href="https://statisticsbyjim.com/regression/multicollinearity-in-regression-analysis/" rel="noopener ugc nofollow" target="_blank">了解有关多重共线性的详细信息。</a></p><p id="ef4c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">第一篇文章中的相关矩阵表明<strong class="lb iu">年龄</strong>和<strong class="lb iu">学历</strong>相关，并且<strong class="lb iu">收入</strong>和<strong class="lb iu">职业</strong>也相关。我们将使用主成分分析(PCA)这种降维方法来解决这个问题。</p><p id="4e76" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">降维是减少数据集的属性数量，同时保留原始数据中有意义的属性的过程。正如莎士比亚所说，“有时少即是多”。降维不完全是这样，但很接近:P</p><p id="ccfe" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><a class="ae ky" href="https://en.wikipedia.org/wiki/Dimensionality_reduction" rel="noopener ugc nofollow" target="_blank">了解更多关于降维的知识</a>。</p><p id="4871" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">PCA将一组相关变量(p)转换成较少数量的不相关变量k (k &lt; p) called <strong class="lb iu">主分量</strong>，同时尽可能保持原始数据集中的变化。这是在标准化数据集的数据预处理步骤中执行的。</p><p id="6ebe" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><a class="ae ky" href="https://www.youtube.com/watch?v=FgakZw6K1QQ" rel="noopener ugc nofollow" target="_blank">了解更多关于五氯苯甲醚的信息。</a></p><h2 id="d8cd" class="lv lw it bd lx ly lz dn ma mb mc dp md li me mf mg lm mh mi mj lq mk ml mm mn bi translated">识别主要成分</h2><p id="19a1" class="pw-post-body-paragraph kz la it lb b lc mo ju le lf mp jx lh li mq lk ll lm mr lo lp lq ms ls lt lu im bi translated">首先，让我们从sklearn导入PCA库，并用标准化的客户数据集创建我们的<em class="mt"> pca </em>对象。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mu mv l"/></div></figure><p id="948d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><em class="mt"> pca </em>对象的属性“explained_variance_ratio_”包含七个组件，它们解释了我们数据集的100%可变性。第一个成分解释了约36%的可变性，第二和第三个成分分别解释了26%和19%的可变性。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mw mv l"/></div></figure><p id="408c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">经验法则是选择保留70–80%可变性的组件数量。如果我们选择三个顶级组件，它们将拥有超过80%的可变性，如果我们选择四个组件，它们将保留几乎90%的可变性。让我们挑选三个组件并适合我们的pca模型。<br/>然后，我们使用原始数据集中的列创建一个包含三个主要成分的数据框架。请注意，数据帧中的所有值都在负1和1之间，因为它们本质上是相关的。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mx mv l"/></div></figure><p id="1515" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在，让我们看看新的相关矩阵。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="my mv l"/></div></figure><p id="4856" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">成分一与<em class="mt">年龄、收入、职业、</em>和<em class="mt">定居规模正相关。</em>这些特征与一个人的职业有关。</p><p id="56c2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">另一方面，<em class="mt">性别、婚姻状况、</em>和<em class="mt">教育</em>是第二个组成部分最显著的决定因素。我们还可以看到，在这个组件中，所有与职业相关的功能都是不相关的。因此，这个组成部分不是指个人的职业，而是指教育和生活方式。</p><p id="6826" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">对于第三个组成部分，我们观察到<em class="mt">年龄、婚姻状况、</em>和<em class="mt">职业</em>是最显著的决定因素。<em class="mt">婚姻状况</em>和<em class="mt">职业</em>有负面影响，但仍然很重要。</p><h2 id="b595" class="lv lw it bd lx ly lz dn ma mb mc dp md li me mf mg lm mh mi mj lq mk ml mm mn bi translated">用PCA实现K-Means聚类</h2><p id="fd16" class="pw-post-body-paragraph kz la it lb b lc mo ju le lf mp jx lh li mq lk ll lm mr lo lp lq ms ls lt lu im bi translated">好了，现在我们对新的变量或组件代表什么有了一个概念。让我们实现k-means聚类，将我们的三个组件视为特征。我们将跳过肘方法，因为我们已经在第二篇文章中学习过了。因此，我们将直接开始用四个集群实现k-means算法。<a class="ae ky" href="https://deepnote.com/workspace/asish-biswas-a599-b6cca607-3c12-4ae6-b54d-32861e7e9438/project/Analytic-School-8e6c85bd-e8c9-4387-ba40-0b94fb791066/%2Fnotebooks%2Fcustomer_segmentation.ipynb" rel="noopener ugc nofollow" target="_blank">笔记本</a>包含详细的实现方法供您参考。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mz mv l"/></div></figure><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="na mv l"/></div></figure><h2 id="8c31" class="lv lw it bd lx ly lz dn ma mb mc dp md li me mf mg lm mh mi mj lq mk ml mm mn bi translated">分析分割结果</h2><p id="12d8" class="pw-post-body-paragraph kz la it lb b lc mo ju le lf mp jx lh li mq lk ll lm mr lo lp lq ms ls lt lu im bi translated">之前我们已经确定<em class="mt">成分一</em>代表事业，<em class="mt">成分二</em>代表教育&amp;生活方式，<em class="mt">成分三</em>代表生活或工作经历。</p><p id="3461" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在让我们分析分割结果，并尝试像以前一样标记它们。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nb mv l"/></div></figure><p id="3f9d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">细分0: </strong>低职业和经验价值，高教育和生活方式价值。<br/>标签:<em class="mt">标准</em><br/><strong class="lb iu">细分1: </strong>高职业但低学历、低生活方式、低经历<br/>标签:<em class="mt">以职业为中心</em><br/><strong class="lb iu">细分2: </strong>低职业、低学历、低生活方式、高经历<br/>标签:<em class="mt">机会少</em><br/><strong class="lb iu">细分3: </strong>高职业、高学历、高经历</p><p id="9f71" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们来看看每个细分市场的客户数量:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nc mv l"/></div></figure><p id="d51b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在，让我们来看一下与前两个组件相关的部分。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nd mv l"/></div></figure><p id="dbd1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">为了比较，这里是没有PCA的原始k-means实现的散点图(本系列的<a class="ae ky" rel="noopener" target="_blank" href="/customer-segmentation-with-python-implementing-stp-framework-part-2-689b81a7e86d">第2篇</a>)。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ne"><img src="../Images/fbfb27fffa977449857893e444178075.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*DT5zJiFnXylineYeIVgRwg.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><p id="b384" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">正如您所看到的，现在这四个部分可以清楚地识别。虽然标准和更少机会有一些重叠，但总体结果仍然远远好于先前的结果。</p><h2 id="2f87" class="lv lw it bd lx ly lz dn ma mb mc dp md li me mf mg lm mh mi mj lq mk ml mm mn bi translated">结论</h2><p id="6486" class="pw-post-body-paragraph kz la it lb b lc mo ju le lf mp jx lh li mq lk ll lm mr lo lp lq ms ls lt lu im bi translated">到目前为止，我们已经将我们的客户分成了四个不同的、可明确识别的群体。至此，我们已经完成了STP框架的“细分”部分。由于“定位”主要涉及关注哪个客户群的商业决策，我们将在下一篇文章中跳到“定位”。</p><p id="e925" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">与往常一样，完整的代码和所有支持数据集都可以在<a class="ae ky" href="https://deepnote.com/workspace/asish-biswas-a599-b6cca607-3c12-4ae6-b54d-32861e7e9438/project/Analytic-School-8e6c85bd-e8c9-4387-ba40-0b94fb791066/%2Fnotebooks%2Fcustomer_segmentation.ipynb" rel="noopener ugc nofollow" target="_blank"> Deepnote笔记本</a>中获得。</p></div><div class="ab cl nf ng hx nh" role="separator"><span class="ni bw bk nj nk nl"/><span class="ni bw bk nj nk nl"/><span class="ni bw bk nj nk"/></div><div class="im in io ip iq"><p id="2930" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><em class="mt">感谢阅读！如果你喜欢这篇文章，一定要给</em> <strong class="lb iu"> <em class="mt">鼓掌(最多50！)</em> </strong> <em class="mt">和</em> <strong class="lb iu"> <em class="mt">连线</em></strong><em class="mt"/><a class="ae ky" href="https://www.linkedin.com/in/asish-biswas/" rel="noopener ugc nofollow" target="_blank"><strong class="lb iu"><em class="mt">LinkedIn</em></strong></a><em class="mt">和</em> <strong class="lb iu"> <em class="mt">在Medium上关注我</em> </strong> <em class="mt">保持更新我的新文章。</em></p><p id="61a4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><em class="mt">通过此</em> <a class="ae ky" href="https://analyticsoul.medium.com/membership" rel="noopener"> <em class="mt">推荐链接</em> </a> <em class="mt">加入Medium，免费支持我。</em></p><div class="nm nn gp gr no np"><a href="https://analyticsoul.medium.com/membership" rel="noopener follow" target="_blank"><div class="nq ab fo"><div class="nr ab ns cl cj nt"><h2 class="bd iu gy z fp nu fr fs nv fu fw is bi translated">通过我的推荐链接加入Medium—Asish bis was</h2><div class="nw l"><h3 class="bd b gy z fp nu fr fs nv fu fw dk translated">阅读阿西什·比斯瓦斯(以及媒体上成千上万的其他作家)的每一个故事。您的会员费直接支持…</h3></div><div class="nx l"><p class="bd b dl z fp nu fr fs nv fu fw dk translated">analyticsoul.medium.com</p></div></div><div class="ny l"><div class="nz l oa ob oc ny od ks np"/></div></div></a></div></div></div>    
</body>
</html>