<html>
<head>
<title>loc vs iloc in Pandas. Here’s The Difference.</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">熊猫中的loc与iloc。区别就在这里。</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/loc-vs-iloc-in-pandas-heres-the-difference-16cd4bcbecab#2022-02-02">https://towardsdatascience.com/loc-vs-iloc-in-pandas-heres-the-difference-16cd4bcbecab#2022-02-02</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="5bb5" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">如何使用loc和iloc在Pandas中选择行和列</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/d7fa846a6004d2979180aec0949e0ae7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*_RfkkCKylK8teX8G"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">尼尔和祖玛·斯科特在的<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash上的</a><a class="ae ky" href="https://unsplash.com/@valenciascott?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">照片</a></p></figure><p id="ce58" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">当谈到在熊猫中选择数据时，有不同的选择。其中最流行的就是用<code class="fe lv lw lx ly b">loc</code>和<code class="fe lv lw lx ly b">iloc</code>，但是两者有什么区别呢？</p><p id="164c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">当我开始学习Pandas时，我也有同样的问题，在本文中，我将向您展示Pandas中使用<code class="fe lv lw lx ly b">loc</code>和<code class="fe lv lw lx ly b">iloc</code>选择数据的主要区别，并展示一些示例来说明这一点。</p><p id="4221" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">到本文结束时，您将知道如何使用<code class="fe lv lw lx ly b">loc</code>和<code class="fe lv lw lx ly b">iloc</code>选择单个值、多行和多列。</p><h1 id="75cb" class="lz ma it bd mb mc md me mf mg mh mi mj jz mk ka ml kc mm kd mn kf mo kg mp mq bi translated">loc和iloc之间的区别</h1><p id="cb98" class="pw-post-body-paragraph kz la it lb b lc mr ju le lf ms jx lh li mt lk ll lm mu lo lp lq mv ls lt lu im bi translated"><code class="fe lv lw lx ly b">loc</code>和<code class="fe lv lw lx ly b">iloc</code>的主要区别在于<code class="fe lv lw lx ly b">loc</code>是基于标签的(您需要指定行和列标签),而<code class="fe lv lw lx ly b">iloc</code>是基于整数位置的(您需要通过整数位置值指定行和列，从0开始)</p><blockquote class="mw mx my"><p id="b152" class="kz la mz lb b lc ld ju le lf lg jx lh na lj lk ll nb ln lo lp nc lr ls lt lu im bi translated">下面是更好理解这一点的实际例子。你可以观看我的YouTube视频，也可以继续阅读这篇文章。</p></blockquote><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nd ne l"/></div></figure><p id="9869" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">考虑具有以下行标签和行位置的数据帧:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nf"><img src="../Images/86dba375e137436eea24dc63a1d38748.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bEUFOBKEvgZnmBbEPyK3tg.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><p id="5a0f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在让我们看看如何使用loc和iloc选择随机元素:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ng"><img src="../Images/7309d93d365a798c8e75915efe4d8042.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dYtynwab99wnMqfgyPUd3w.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><p id="04b8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在上面的例子中，<code class="fe lv lw lx ly b">loc</code>和<code class="fe lv lw lx ly b">iloc</code>返回相同的输出，除了最后一个元素被包含在<code class="fe lv lw lx ly b">loc</code>中而被排除在<code class="fe lv lw lx ly b">iloc</code>之外。</p><h1 id="d941" class="lz ma it bd mb mc md me mf mg mh mi mj jz mk ka ml kc mm kd mn kf mo kg mp mq bi translated">使用loc和iloc从数据帧中选择元素</h1><p id="6e44" class="pw-post-body-paragraph kz la it lb b lc mr ju le lf ms jx lh li mt lk ll lm mu lo lp lq mv ls lt lu im bi translated">为了详细了解loc和iloc之间的差异，让我们创建一个包含顶级足球运动员基本信息的数据框架。</p><p id="d5b4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">下面是创建这个小数据框架的代码:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nh ne l"/></div></figure><p id="2a88" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">下面是运行代码后您应该获得的数据帧:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ni"><img src="../Images/9e91869b0580b042157d26628c380121.png" data-original-src="https://miro.medium.com/v2/resize:fit:1358/format:webp/1*UbnkSiVGTS-f9L9CvnFRtw.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><p id="5923" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在让我们看看如何用单个值、列表和切片从数据帧中选择元素。</p><h2 id="3fd6" class="nj ma it bd mb nk nl dn mf nm nn dp mj li no np ml lm nq nr mn lq ns nt mp nu bi translated">选择具有单个值的数据</h2><p id="42c0" class="pw-post-body-paragraph kz la it lb b lc mr ju le lf ms jx lh li mt lk ll lm mu lo lp lq mv ls lt lu im bi translated">我们可以通过添加一个值作为输入来定位带有<code class="fe lv lw lx ly b">loc</code>和<code class="fe lv lw lx ly b">iloc</code>的元素。下面是要遵循的语法:</p><ul class=""><li id="11b6" class="nv nw it lb b lc ld lf lg li nx lm ny lq nz lu oa ob oc od bi translated"><code class="fe lv lw lx ly b">loc[row_label, column_label]</code></li><li id="ffc5" class="nv nw it lb b lc oe lf of li og lm oh lq oi lu oa ob oc od bi translated"><code class="fe lv lw lx ly b">iloc[row_position, column_position]</code></li></ul><p id="b8ec" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">比方说我们想得到莱昂内尔·梅西的身高。</p><pre class="kj kk kl km gt oj ly ok ol aw om bi"><span id="6ee6" class="nj ma it ly b gy on oo l op oq"># <em class="mz">get the height of L.Messi</em></span><span id="0a95" class="nj ma it ly b gy or oo l op oq"># <strong class="ly iu">loc</strong><br/>&gt;&gt;&gt; df.loc['L. Messi', 'height_cm']<br/># <strong class="ly iu">iloc</strong><br/>&gt;&gt;&gt; df.iloc[0, 1]</span><span id="e796" class="nj ma it ly b gy or oo l op oq">170</span></pre><p id="405b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如您所见，<code class="fe lv lw lx ly b">loc</code>需要“L.Messi”和“height_cm ”,因为它们是行/列标签，而<code class="fe lv lw lx ly b">iloc</code>需要0和1，因为它们是行/列位置。两种方法得到的输出一样170，这是梅西的身高。</p><p id="5e9e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在我们来看看c罗的身高。</p><pre class="kj kk kl km gt oj ly ok ol aw om bi"><span id="956a" class="nj ma it ly b gy on oo l op oq"><em class="mz">#</em> <em class="mz">get the </em>height<em class="mz"> of Cristiano Ronaldo</em></span><span id="9bbc" class="nj ma it ly b gy or oo l op oq"># <strong class="ly iu">loc</strong><br/>&gt;&gt;&gt; df.loc['Cristiano Ronaldo', 'height_cm']<br/># <strong class="ly iu">iloc</strong><br/>&gt;&gt;&gt; df.iloc[1, 1]</span><span id="9328" class="nj ma it ly b gy or oo l op oq">187</span></pre><p id="f60d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果您想获得特定行/列的所有数据，使用<code class="fe lv lw lx ly b">loc</code>和<code class="fe lv lw lx ly b">iloc</code>中的<code class="fe lv lw lx ly b">:</code>。</p><pre class="kj kk kl km gt oj ly ok ol aw om bi"><span id="fa45" class="nj ma it ly b gy on oo l op oq"><em class="mz">#</em> <em class="mz">get all the data about L.Messi</em></span><span id="2b69" class="nj ma it ly b gy or oo l op oq"># <strong class="ly iu">loc</strong><br/>&gt;&gt;&gt; df.loc['L. Messi', :]<br/># <strong class="ly iu">iloc</strong><br/>&gt;&gt;&gt; df.iloc[0, :]</span><span id="51af" class="nj ma it ly b gy or oo l op oq">age                             32<br/>height_cm                      170<br/>nationality              Argentina<br/>club           Paris Saint-Germain</span></pre><h2 id="1bfc" class="nj ma it bd mb nk nl dn mf nm nn dp mj li no np ml lm nq nr mn lq ns nt mp nu bi translated">用列表选择多行/多列</h2><p id="c5d8" class="pw-post-body-paragraph kz la it lb b lc mr ju le lf ms jx lh li mt lk ll lm mu lo lp lq mv ls lt lu im bi translated">我们可以使用标签/位置列表来选择分别带有<code class="fe lv lw lx ly b">loc</code>和<code class="fe lv lw lx ly b">iloc</code>的多行和多列。</p><pre class="kj kk kl km gt oj ly ok ol aw om bi"><span id="f761" class="nj ma it ly b gy on oo l op oq"><em class="mz"># get all data about L.Messi and Cristiano Ronaldo</em></span><span id="08bf" class="nj ma it ly b gy or oo l op oq"># <strong class="ly iu">loc</strong><br/>&gt;&gt;&gt; df.loc[['L. Messi', 'Cristiano Ronaldo']]<br/># <strong class="ly iu">iloc</strong><br/>&gt;&gt;&gt; df.iloc[[0, 1]]</span></pre><p id="0d80" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">以下是我们选择的输出:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi os"><img src="../Images/9a0c234be5fbb49d82a48aac0382f69f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1154/format:webp/1*tEyrSADMOg9m0vYZtouNlg.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><p id="f227" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在我们通过将' height_cm '列标签/'1 '列位置分别加到<code class="fe lv lw lx ly b">loc</code>和<code class="fe lv lw lx ly b">iloc</code>上，只得到这两个球员的身高。</p><pre class="kj kk kl km gt oj ly ok ol aw om bi"><span id="bf10" class="nj ma it ly b gy on oo l op oq"><em class="mz"># get the height of L.Messi and Cristiano Ronaldo</em></span><span id="2135" class="nj ma it ly b gy or oo l op oq"># <strong class="ly iu">loc</strong><br/>&gt;&gt;&gt; df.loc[['L. Messi', 'Cristiano Ronaldo'], 'height_cm']<br/># <strong class="ly iu">iloc</strong><br/>&gt;&gt;&gt; df.iloc[[0, 1], 1]</span><span id="c658" class="nj ma it ly b gy or oo l op oq">L. Messi             170<br/>Cristiano Ronaldo    187</span></pre><h2 id="9fa1" class="nj ma it bd mb nk nl dn mf nm nn dp mj li no np ml lm nq nr mn lq ns nt mp nu bi translated">用切片选择多行/多列</h2><p id="6800" class="pw-post-body-paragraph kz la it lb b lc mr ju le lf ms jx lh li mt lk ll lm mu lo lp lq mv ls lt lu im bi translated">我们也可以用一个带有<code class="fe lv lw lx ly b">loc</code>和<code class="fe lv lw lx ly b">iloc</code>的切片选择多个行和列。</p><p id="92fe" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们做一个切片，得到列'年龄'，'身高_厘米'，和'国籍'。</p><pre class="kj kk kl km gt oj ly ok ol aw om bi"><span id="0b59" class="nj ma it ly b gy on oo l op oq"><em class="mz"># slice column labels: from age to nationality</em></span><span id="1502" class="nj ma it ly b gy or oo l op oq"><em class="mz"># </em><strong class="ly iu"><em class="mz">loc</em></strong><br/>&gt;&gt;&gt; players = ['L. Messi', 'Cristiano Ronaldo']<br/>&gt;&gt;&gt; df.loc[players, 'age':'nationality']<br/><strong class="ly iu"><em class="mz"># iloc</em></strong><br/>&gt;&gt;&gt; players = [0, 1]<br/>&gt;&gt;&gt; df.iloc[players, 0:3] # age:nationality+1</span></pre><p id="fd8f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">与列表不同，当我们选择带有切片的元素时，最后一个元素“nationality”包含在<code class="fe lv lw lx ly b">loc</code>方法中，而最后一个元素“3”在<code class="fe lv lw lx ly b">iloc</code>中被排除。</p><p id="0fda" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">下面是我们得到的<code class="fe lv lw lx ly b">loc</code>和<code class="fe lv lw lx ly b">iloc</code>的输出:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ot"><img src="../Images/dfd0faece59a9e873c76bfaa51c04e7a.png" data-original-src="https://miro.medium.com/v2/resize:fit:962/format:webp/1*mYQ9-CUp3jrQdGq5215RCA.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><h2 id="f8d2" class="nj ma it bd mb nk nl dn mf nm nn dp mj li no np ml lm nq nr mn lq ns nt mp nu bi translated">带条件选择</h2><p id="ffb7" class="pw-post-body-paragraph kz la it lb b lc mr ju le lf ms jx lh li mt lk ll lm mu lo lp lq mv ls lt lu im bi translated">每当您想要基于某些条件选择元素时，请记住<code class="fe lv lw lx ly b">iloc</code>需要一个布尔列表，因此我们必须使用<code class="fe lv lw lx ly b">list()</code>函数将我们的系列转换为布尔列表。</p><pre class="kj kk kl km gt oj ly ok ol aw om bi"><span id="1735" class="nj ma it ly b gy on oo l op oq"><em class="mz"># one condition: select player with height above 180cm</em></span><span id="ef04" class="nj ma it ly b gy or oo l op oq"><strong class="ly iu"><em class="mz"># loc</em></strong><br/>columns = ['age', 'height_cm', 'club']<br/>df.loc[df['height_cm']&gt;180, columns]<br/><strong class="ly iu"><em class="mz"># iloc</em></strong><br/>columns = [0,1,3]<br/>df.iloc[list(df['height_cm']&gt;180), columns]</span></pre><p id="4abd" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">下面是我们得到的<code class="fe lv lw lx ly b">loc</code>和<code class="fe lv lw lx ly b">iloc</code>的输出:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ou"><img src="../Images/b5921a746ee2805ff0fd397f4892efe4.png" data-original-src="https://miro.medium.com/v2/resize:fit:960/format:webp/1*af5DBOEQ7riW9ySZz3OJrQ.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><p id="d219" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">同样的规则也适用于你想要应用多个条件的情况。比如说我们想获得在PSG <em class="mz">打过球的身高180cm以上的球员。</em></p><pre class="kj kk kl km gt oj ly ok ol aw om bi"><span id="ea0b" class="nj ma it ly b gy on oo l op oq"><em class="mz"># multiple conditions: select player with height above 180cm that played in PSG</em></span><span id="13e4" class="nj ma it ly b gy or oo l op oq"><strong class="ly iu"><em class="mz"># loc</em></strong><br/>df.loc[(df['height_cm']&gt;170) &amp; (df['club']=='Paris Saint-Germain'), :]<br/><strong class="ly iu"><em class="mz"># iloc</em></strong><br/>df.iloc[list((df['height_cm']&gt;170) &amp; (df['club']=='Paris Saint-Germain')), :]</span></pre><p id="8b93" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">下面是我们得到的<code class="fe lv lw lx ly b">loc</code>和<code class="fe lv lw lx ly b">iloc</code>的输出:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ov"><img src="../Images/bd0abb0a58b4b5e0926413907c126ecc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1076/format:webp/1*YQv60HqtZB4kQTM345B8vA.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><p id="7ec1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">就是这样！现在你可以使用<code class="fe lv lw lx ly b">loc</code>和<code class="fe lv lw lx ly b">iloc</code>从数据帧中选择元素了。你可以在我的<a class="ae ky" href="https://github.com/ifrankandrade/python-course-for-excel-users.git" rel="noopener ugc nofollow" target="_blank"> Github </a>上找到这篇文章写的所有代码。</p></div><div class="ab cl ow ox hx oy" role="separator"><span class="oz bw bk pa pb pc"/><span class="oz bw bk pa pb pc"/><span class="oz bw bk pa pb"/></div><div class="im in io ip iq"><p id="e050" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><a class="ae ky" href="https://frankandrade.ck.page/bd063ff2d3" rel="noopener ugc nofollow" target="_blank"><strong class="lb iu"/></a></p><p id="a5f0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果你喜欢阅读这样的故事，并想支持我成为一名作家，可以考虑报名成为一名媒体成员。每月5美元，让您可以无限制地访问数以千计的Python指南和数据科学文章。如果你用<a class="ae ky" href="https://frank-andrade.medium.com/membership" rel="noopener">我的链接</a>注册，我会赚一小笔佣金，不需要你额外付费。</p><div class="pd pe gp gr pf pg"><a href="https://frank-andrade.medium.com/membership" rel="noopener follow" target="_blank"><div class="ph ab fo"><div class="pi ab pj cl cj pk"><h2 class="bd iu gy z fp pl fr fs pm fu fw is bi translated">通过我的推荐链接加入媒体——弗兰克·安德拉德</h2><div class="pn l"><h3 class="bd b gy z fp pl fr fs pm fu fw dk translated">作为一个媒体会员，你的会员费的一部分会给你阅读的作家，你可以完全接触到每一个故事…</h3></div><div class="po l"><p class="bd b dl z fp pl fr fs pm fu fw dk translated">frank-andrade.medium.com</p></div></div><div class="pp l"><div class="pq l pr ps pt pp pu ks pg"/></div></div></a></div></div></div>    
</body>
</html>