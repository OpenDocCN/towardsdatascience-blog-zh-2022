<html>
<head>
<title>10 Quick Pandas Tricks to Energize your Analytics Project</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">为你的分析项目注入活力的 10 个熊猫小窍门</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/10-quick-pandas-tricks-to-energize-your-analytics-project-2333a144946b#2022-12-07">https://towardsdatascience.com/10-quick-pandas-tricks-to-energize-your-analytics-project-2333a144946b#2022-12-07</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><h2 id="3fc1" class="ir is it bd b dl iu iv iw ix iy iz dk ja translated" aria-label="kicker paragraph">数据科学</h2><div class=""/><div class=""><h2 id="9034" class="pw-subtitle-paragraph jz jc it bd b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq dk translated">使用这些技巧让你的分析师生活变得轻松</h2></div><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi kr"><img src="../Images/ad838e65c2b3cb496316bcdc3fbd0eca.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*DE2jGUi01kII9XsS"/></div></div><p class="ld le gj gh gi lf lg bd b be z dk translated">SpaceX 在<a class="ae lh" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的<a class="ae lh" href="https://unsplash.com/@spacex?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"/></p></figure><p id="7d6c" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">Pandas 是 Python 中流行的数据分析库。它无疑为您提供了处理数据所需的灵活性和工具。</p><p id="f3e8" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">然而，你必须知道节省时间和易于使用的高效率工作的技巧。这就是为什么我要分享熊猫的 10 个快速但非常有用的技巧，你可以在 10 分钟内掌握。</p><p id="008a" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">即使您已经非常熟悉 pandas 的方法和功能，您仍然会发现其中一些技巧是可行的。如果你是一个绝对的初学者，那么这篇文章是你开始学习的好地方。</p><p id="f45b" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">这里有一个快速索引供你参考—</p><p id="abc3" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated"><a class="ae lh" href="#b151" rel="noopener ugc nofollow">调整要显示的列数或行数</a> <br/> <a class="ae lh" href="#b002" rel="noopener ugc nofollow">用 sample() </a> <br/> <a class="ae lh" href="#4a3d" rel="noopener ugc nofollow">用 query()方法随机采样行子集一个数据帧</a> <br/> <a class="ae lh" href="#6107" rel="noopener ugc nofollow">用 Round()方法舍入数据帧中的值</a> <br/> <a class="ae lh" href="#3208" rel="noopener ugc nofollow">用 explode()方法解包列表值</a> <br/> <a class="ae lh" href="#4fa1" rel="noopener ugc nofollow">用 plot()方法创建快速图</a> <br/> <a class="ae lh" href="#de5e" rel="noopener ugc nofollow">用 display()方法返回多个数据帧</a> <br/></p><blockquote class="me mf mg"><p id="6a0a" class="li lj mh lk b ll lm kd ln lo lp kg lq mi ls lt lu mj lw lx ly mk ma mb mc md im bi translated">为了举例，我将使用<a class="ae lh" href="https://www.kaggle.com/datasets/arianazmoudeh/airbnbopendata" rel="noopener ugc nofollow" target="_blank"> Airbnb 开放数据</a>，你可以免费使用，因为它在<a class="ae lh" href="https://opendatacommons.org/licenses/odbl/1-0/" rel="noopener ugc nofollow" target="_blank"> ODbL 许可</a>下公开可用！</p></blockquote><p id="4064" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">不要忘了在阅读结束时获取包含所有示例的<em class="mh">笔记本</em>！</p></div><div class="ab cl ml mm hx mn" role="separator"><span class="mo bw bk mp mq mr"/><span class="mo bw bk mp mq mr"/><span class="mo bw bk mp mq"/></div><div class="im in io ip iq"><p id="bb2a" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">数据分析任务从将数据集导入 pandas DataFrame 开始，所需的数据集通常在中提供。csv 格式。</p><p id="3591" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">然而，当您在 pandas 数据帧中读取一个包含大量列的 csv 文件时，您只能看到后面跟有<code class="fe ms mt mu mv b"><strong class="lk jd">. . . . .</strong></code>的几个列名和几个列名，如下所示。</p><pre class="ks kt ku kv gt mw mv mx bn my mz bi"><span id="65e7" class="na nb it mv b be nc nd l ne nf">import pandas as pd<br/>df = pd.read_csv("Airbnb_Open_Data.csv")<br/>df.head()</span></pre><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi ng"><img src="../Images/f792cdf50d462f377cf467187e272b82.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rE_0mYssf6XsKQO4lezlHw.png"/></div></div><p class="ld le gj gh gi lf lg bd b be z dk translated">在笔记本|作者图片中显示有限数量的列</p></figure><p id="7ff1" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated"><code class="fe ms mt mu mv b">.head()</code>背后的主要目的是先睹为快。有了这些隐藏在<code class="fe ms mt mu mv b">. . . . .</code>后面的列名，你就看不到那些列中的数据了。因此，这里的第一个技巧是确定您想要显示的列数和行数。</p><h1 id="b151" class="nh nb it bd ni nj nk nl nm nn no np nq ki nr kj ns kl nt km nu ko nv kp nw nx bi translated">调整要显示的列数或行数</h1><p id="d03e" class="pw-post-body-paragraph li lj it lk b ll ny kd ln lo nz kg lq lr oa lt lu lv ob lx ly lz oc mb mc md im bi translated">默认情况下，pandas 在屏幕上只显示 60 行 20 列。这可能是几根柱子藏在<code class="fe ms mt mu mv b">. . . . .</code>后面的原因。</p><p id="99a1" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">您可以使用下面的熊猫显示选项自己检查这个限制。</p><pre class="ks kt ku kv gt mw mv od oe aw of bi"><span id="41b5" class="og nb it mv b gy oh oi l oj nf"><strong class="mv jd">pd.options.display.max_rows</strong></span><span id="3f84" class="og nb it mv b gy ok oi l oj nf">#Output<br/>60</span><span id="2c3d" class="og nb it mv b gy ok oi l oj nf"><strong class="mv jd">pd.options.display.max_columns</strong></span><span id="ed1f" class="og nb it mv b gy ok oi l oj nf">#Output<br/>20</span></pre><p id="896c" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">您可以使用完全相同的选项来设置屏幕上显示的最大行数和列数。</p><p id="1747" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">例如，您可以将最大列数设置为 30，如下所示。</p><pre class="ks kt ku kv gt mw mv mx bn my mz bi"><span id="7393" class="na nb it mv b be nc nd l ne nf">pd.options.display.max_columns = 30<br/>df = pd.read_csv("Airbnb_Open_Data.csv")<br/>df.head()</span></pre><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi ng"><img src="../Images/22b9e68a84298506fb2a6f09378846c1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*OqOTxftW7w5GqYJpw6rMgQ.png"/></div></div><p class="ld le gj gh gi lf lg bd b be z dk translated">熊猫设置最大行数和列数|作者图片</p></figure><p id="1ff3" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">在上图中，您可以看到数据集中的所有列。红框内的柱子先前隐藏在<code class="fe ms mt mu mv b">. . . . .</code>后面。并且在输出中不可见。</p><p id="76df" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">此外，您可以使用如下所示的功能<code class="fe ms mt mu mv b">.reset_option()</code>将选项重置回默认值。</p><pre class="ks kt ku kv gt mw mv mx bn my mz bi"><span id="5ae5" class="na nb it mv b be nc nd l ne nf">pd.reset_option('display.max_rows')<br/>pd.options.display.max_rows<br/><br/>#Output<br/>60</span></pre><p id="f3e3" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">当您在 pandas 中更改多个默认选项时，您可以使用<code class="fe ms mt mu mv b">.reset_options()</code>函数中的<code class="fe ms mt mu mv b">‘all’</code>参数在单个语句中将所有选项重置回初始值。</p><p id="bd36" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">为了先睹为快，您可以在。这限制了您只能看到前/后几行。在 pandas 中，您总是可以从任何随机选择的记录中检查数据，甚至可以使用随机选择来检查数据的子集。</p><h1 id="b002" class="nh nb it bd ni nj nk nl nm nn no np nq ki nr kj ns kl nt km nu ko nv kp nw nx bi translated">用 sample()随机对行进行采样</h1><p id="37cb" class="pw-post-body-paragraph li lj it lk b ll ny kd ln lo nz kg lq lr oa lt lu lv ob lx ly lz oc mb mc md im bi translated">从第一行或最后几行看，数据可能组织得很好，很干净。因此，查看数据集中的任何随机记录以更好地理解它总是有好处的。</p><p id="31cb" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated"><code class="fe ms mt mu mv b">pandas.DataFrame.sample</code>提供从数据集中随机选择任何记录的灵活性，有 7 个可选和可调参数。</p><p id="b6f3" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">例如，假设您想从 Airbnb 数据集中选择 4 条随机记录。您可以简单地输入— <code class="fe ms mt mu mv b">df.sample(4)</code> —获得下面的输出。</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi ng"><img src="../Images/d573ff954318fba10d2a9ec5f26d6181.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2XoU0aFc1ZEL6hrwSE5WnQ.png"/></div></div><p class="ld le gj gh gi lf lg bd b be z dk translated">作者从数据帧|图像中随机选择记录</p></figure><p id="f40c" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">或者，您也可以使用 fraction 来指定要随机选择整个数据集的多少部分。只需将分数(小于 1)赋给<code class="fe ms mt mu mv b">sample()</code>函数中的参数<code class="fe ms mt mu mv b">frac</code>，如下所示。</p><pre class="ks kt ku kv gt mw mv mx bn my mz bi"><span id="1c91" class="na nb it mv b be nc nd l ne nf">df.sample(frac = 0.00005)</span></pre><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi ol"><img src="../Images/d0c3c00089dccc3e71a6d7284bc8e123.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*OzYLgKettAGlBNmFX3TVhQ.png"/></div></div><p class="ld le gj gh gi lf lg bd b be z dk translated">熊猫随机样本使用分数|图片由作者提供</p></figure><p id="01b0" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">这里，您简单地获取了 DataFrame 中总行数的 0.005% 。</p><p id="4574" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">但是，每次执行这个单元格时，记录都是随机选择的。所以，为了每次都得到相同的输出，你可以将参数 random state 设置为任意整数。</p><p id="f716" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">假设你想每次都检索相同的三行，那么你可以使用下面的<code class="fe ms mt mu mv b">sample()</code>函数。</p><pre class="ks kt ku kv gt mw mv mx bn my mz bi"><span id="7a53" class="na nb it mv b be nc nd l ne nf">df.sample(3, random_state = 4)</span></pre><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi om"><img src="../Images/ad935b250afba316ffd2685a3e2091bf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*CfcpyIzHYvk8jiLjr97Nrg.png"/></div></div><p class="ld le gj gh gi lf lg bd b be z dk translated">熊猫随机抽样，每次输出相同|图片由作者提供</p></figure><p id="732e" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">当您想要选择不同的记录时，您可以简单地将<code class="fe ms mt mu mv b">random_state</code>参数更改为另一个整数。</p><p id="1a6e" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">一旦检查了数据集中可用的数据，下一个任务就是选择所需的数据集子集。当然你可以用<code class="fe ms mt mu mv b">.loc</code>和。<code class="fe ms mt mu mv b">iloc</code>方法后跟一系列方括号，用于提取选定的行和列。</p><p id="5d2f" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">但是，还有一个方法<code class="fe ms mt mu mv b">.query()</code>可以帮助您去掉多个方括号来创建数据帧子集。</p><h1 id="4a3d" class="nh nb it bd ni nj nk nl nm nn no np nq ki nr kj ns kl nt km nu ko nv kp nw nx bi translated">使用 query()方法对数据帧进行子集化</h1><p id="fe43" class="pw-post-body-paragraph li lj it lk b ll ny kd ln lo nz kg lq lr oa lt lu lv ob lx ly lz oc mb mc md im bi translated">函数<code class="fe ms mt mu mv b">pandas.DataFrame.query(expression)<strong class="lk jd"> </strong></code>为您提供了有条件选择数据帧子集的灵活性。该函数中提供的表达式是一个或多个条件的组合。你可以用一种绝对随和的方式来写，不用任何方括号。</p><p id="948b" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">例如，假设您想要从数据集中提取所有记录，其中<em class="mh">邻域</em>是<em class="mh"> Kensigton </em>。使用<code class="fe ms mt mu mv b">query()</code>方法很简单，如下所示。</p><pre class="ks kt ku kv gt mw mv od oe aw of bi"><span id="996c" class="og nb it mv b gy oh oi l oj nf">df.query("neighbourhood == 'Kensington'")</span></pre><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi on"><img src="../Images/c8dc306c87df0dbd3cd1f67f8f732357.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*HHjpfXFiTs-YGSJBJQ1G4w.png"/></div></div><p class="ld le gj gh gi lf lg bd b be z dk translated">使用 query()的熊猫数据帧子集|作者图片</p></figure><p id="13e8" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">您还可以在同一列上使用多个条件以及它们之间的任何逻辑，例如<code class="fe ms mt mu mv b">AND</code>、<code class="fe ms mt mu mv b">OR</code>、<code class="fe ms mt mu mv b">NOT</code>。</p><p id="df62" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">要了解更多关于这种方法的信息，我强烈推荐阅读—</p><div class="oo op gp gr oq or"><a rel="noopener follow" target="_blank" href="/10-pandas-query-examples-that-will-make-you-use-pandas-query-easily-12a45b1e115"><div class="os ab fo"><div class="ot ab ou cl cj ov"><h2 class="bd jd gy z fp ow fr fs ox fu fw jc bi translated">10 个熊猫查询示例，让你轻松使用熊猫查询</h2><div class="oy l"><h3 class="bd b gy z fp ow fr fs ox fu fw dk translated">开始使用熊猫查询功能轻松过滤您的数据</h3></div><div class="oz l"><p class="bd b dl z fp ow fr fs ox fu fw dk translated">towardsdatascience.com</p></div></div><div class="pa l"><div class="pb l pc pd pe pa pf lb or"/></div></div></a></div><p id="97b2" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">选择子集后，您将进入分析中的数据清理阶段。数字列的一个常见问题是，小数点后的位数超过了要求。让我们看看如何处理这样的列。</p><h1 id="6107" class="nh nb it bd ni nj nk nl nm nn no np nq ki nr kj ns kl nt km nu ko nv kp nw nx bi translated">pandas 数据帧中的舍入值，使用 Round()</h1><p id="8e36" class="pw-post-body-paragraph li lj it lk b ll ny kd ln lo nz kg lq lr oa lt lu lv ob lx ly lz oc mb mc md im bi translated">有时，一列中的数字数据在小数点后包含多个数字，最好将其限制在 2-3 位。</p><p id="a27b" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">在这种情况下，方法<code class="fe ms mt mu mv b"><a class="ae lh" href="https://pandas.pydata.org/docs/reference/api/pandas.DataFrame.round.html" rel="noopener ugc nofollow" target="_blank">pandas.DataFrame.round</a></code>会非常方便。您所需要做的就是在方法中提到所需的位数，如下所示。</p><pre class="ks kt ku kv gt mw mv mx bn my mz bi"><span id="e0f5" class="na nb it mv b be nc nd l ne nf">df.round(2)</span></pre><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi ng"><img src="../Images/1c57b753064f6296bffef83e1d6c6c15.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*eNFJenpB0wWXUJjfKeyxxw.png"/></div></div><p class="ld le gj gh gi lf lg bd b be z dk translated">将数据帧四舍五入到可变的小数位数|作者图片</p></figure><p id="64c4" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">在 Airbnb 数据集中，只有列<em class="mh"> lat </em>和<em class="mh"> long </em>包含小数点后 5 位数的值。DataFrame 方法<code class="fe ms mt mu mv b">round()</code>只是将数据集中所有列的位数向上舍入。</p><p id="6560" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">但是，假设您只想对这个数据集中的单个列的位数进行舍入。方法<code class="fe ms mt mu mv b">pandas.Series.round</code>在这种情况下很有用，如下所示。</p><pre class="ks kt ku kv gt mw mv mx bn my mz bi"><span id="8436" class="na nb it mv b be nc nd l ne nf">df['lat'].round(2)<br/><br/>#Output<br/><br/>0         40.65<br/>1         40.75<br/>2         40.81<br/>          ...  <br/>102596    40.68<br/>102597    40.75<br/>102598    40.77<br/>Name: lat, Length: 102599, dtype: float64</span></pre><p id="8205" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated"><code class="fe ms mt mu mv b">pandas.Series.round</code>的输出又是一个序列。要使它成为同一个数据帧的一部分，需要将更改后的列重新分配给原始列，如下所示。</p><pre class="ks kt ku kv gt mw mv mx bn my mz bi"><span id="e37a" class="na nb it mv b be nc nd l ne nf">df['lat'] = df['lat'].round(2)<br/>df.head()</span></pre><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi ng"><img src="../Images/741b7b7429a7e1068befc430f997a9d6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*aSbcq7mOTeqK3rhitkd71A.png"/></div></div><p class="ld le gj gh gi lf lg bd b be z dk translated">将系列或列中的每个值四舍五入到给定的小数位数|按作者排序的图像</p></figure><p id="d13d" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">它仅将列<em class="mh"> lat </em>中的值更改为小数点后两位数，而列<em class="mh"> long </em>中的值保持不变。</p><p id="9f16" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">继续操作列数据，让我们看看另一个方法 explode()，它有一个更具体的用例——将类似列表的值的每一项转换为单独的行。</p><h1 id="3208" class="nh nb it bd ni nj nk nl nm nn no np nq ki nr kj ns kl nt km nu ko nv kp nw nx bi translated">使用 explode()方法解包列表值</h1><p id="8dbb" class="pw-post-body-paragraph li lj it lk b ll ny kd ln lo nz kg lq lr oa lt lu lv ob lx ly lz oc mb mc md im bi translated">有时您会遇到数据集，其中列中的值是列表。从长远来看，很难处理这样的值，最好是为列表中的每个值创建一行。</p><p id="5e16" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">为了更好地理解这个概念，让我们创建一个数据框架。</p><pre class="ks kt ku kv gt mw mv mx bn my mz bi"><span id="c7bf" class="na nb it mv b be nc nd l ne nf">df = pd.DataFrame({"Country":["India","Germany"],<br/>                   "State":[["Maharashtra", "Telangana", "Gujarat"],<br/>                            ["Bavaria", "Hessen"]]})<br/>df</span></pre><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div class="gh gi pg"><img src="../Images/100e1c1c4a2adcc69df1fa0395d5d69e.png" data-original-src="https://miro.medium.com/v2/resize:fit:580/format:webp/1*KBjq3uaDpeLchUTmw1Nsgg.png"/></div><p class="ld le gj gh gi lf lg bd b be z dk translated">样本数据集|作者提供的图像</p></figure><p id="0ca8" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">上述数据帧中的列<em class="mh">状态</em>包含列表作为值。要为每个列表中的每个值获取一行<em class="mh"> State </em>列，可以使用方法<code class="fe ms mt mu mv b">pandas.DataFrame.explode</code>，如下所示。</p><pre class="ks kt ku kv gt mw mv mx bn my mz bi"><span id="7748" class="na nb it mv b be nc nd l ne nf">df.explode("State")</span></pre><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div class="gh gi ph"><img src="../Images/d0d62be7f3d431a98281b7b1fd209cf1.png" data-original-src="https://miro.medium.com/v2/resize:fit:340/format:webp/1*op9tf94jAWOEkhJNIyJi7w.png"/></div><p class="ld le gj gh gi lf lg bd b be z dk translated">Python |作者图片中的 df.explode()</p></figure><p id="1f3d" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">您所需要做的就是在<code class="fe ms mt mu mv b">explode()</code>中提到包含列表的列名作为它的值。您可能会注意到，在上面的输出中，它只是复制了列表中每一项的索引值。</p><p id="7510" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">数据清洗后的常见任务是数据可视化。图表和图形可以很容易地识别潜在的趋势、模式和相关性。</p><p id="bb5e" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">当您使用 pandas 进行数据分析时，您不需要导入任何其他库来创建图表。熊猫有自己的方法和灵活的选项来快速创建各种图表。</p><h1 id="4fa1" class="nh nb it bd ni nj nk nl nm nn no np nq ki nr kj ns kl nt km nu ko nv kp nw nx bi translated">使用 plot()方法创建快速绘图</h1><p id="3161" class="pw-post-body-paragraph li lj it lk b ll ny kd ln lo nz kg lq lr oa lt lu lv ob lx ly lz oc mb mc md im bi translated">通常，您的分析任务的目的不是数据可视化，而是您希望从数据中看到简单的图表/图形。Pandas 是一个非常灵活的包，它允许你使用自己的方法来可视化数据帧的内容。</p><p id="9657" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">假设，您想查看每种类型房间的平均评论数。你可以通过制作系列图或数据帧图的方法<code class="fe ms mt mu mv b">pandas.DataFrame.plot</code>来实现。</p><p id="a7ac" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">您可以创建一个更小更简单的 DataFrame — <em class="mh"> df_room </em> —只需要两列，就像我在这里做的那样。</p><pre class="ks kt ku kv gt mw mv mx bn my mz bi"><span id="6c57" class="na nb it mv b be nc nd l ne nf">df_room = pd.DataFrame(df.groupby('room type')['number of reviews'].mean())<br/>df_room.reset_index(drop=False, inplace=True)<br/><br/>display(df_room)<br/><br/>df_room.plot(x='room type', y='number of reviews', kind='bar')</span></pre><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div class="gh gi pi"><img src="../Images/70696ec4812e59a297c5992695ecf4f2.png" data-original-src="https://miro.medium.com/v2/resize:fit:784/format:webp/1*CwwWok1pbenIjFBdwxBPhg.png"/></div><p class="ld le gj gh gi lf lg bd b be z dk translated">熊猫。DataFrame.plot |作者图片</p></figure><p id="fdf5" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">新创建的数据帧和图表都显示在输出中。</p><p id="18ee" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">您可以随时使用<code class="fe ms mt mu mv b"><strong class="lk jd">.plot()</strong></code>中的参数“<em class="mh">种类”</em>将图表类型从条形图更改为折线图。您可以在本<a class="ae lh" href="https://github.com/17rsuraj/data-curious/blob/master/TowardsDataScience/10%20Useful%20Python%20Tricks%20You%20Should%20Know.ipynb" rel="noopener ugc nofollow" target="_blank">笔记本</a>中找到可用图表类型的完整列表。</p><blockquote class="me mf mg"><p id="9801" class="li lj mh lk b ll lm kd ln lo lp kg lq mi ls lt lu mj lw lx ly mk ma mb mc md im bi translated">但是熊猫是如何在没有图表样式输入的情况下创建条形图的呢？</p></blockquote><p id="6be8" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated"><code class="fe ms mt mu mv b">pandas.DataFrame.plot</code>使用选项<code class="fe ms mt mu mv b">plotting.backend</code>指定的后端。绘图后端是 pandas 用来创建图表的绘图库，它使用 matplotlib 作为默认库。</p><p id="abd8" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">您可以通过设置<code class="fe ms mt mu mv b">pd.options.plotting.backend</code>或使用选项<code class="fe ms mt mu mv b">pd.set_option(‘plotting_backend’, ‘name_of_backend’)</code>随时更改。</p><p id="7f29" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">回到整体处理数据帧，让我们看看如何同时显示多个数据帧。</p><h1 id="de5e" class="nh nb it bd ni nj nk nl nm nn no np nq ki nr kj ns kl nt km nu ko nv kp nw nx bi translated">使用 display()返回多个数据帧</h1><p id="80ca" class="pw-post-body-paragraph li lj it lk b ll ny kd ln lo nz kg lq lr oa lt lu lv ob lx ly lz oc mb mc md im bi translated">通常，您会创建多个数据帧，但是当您提到它们的名称或者在同一个单元格中对它们使用<code class="fe ms mt mu mv b">.head()</code> / <code class="fe ms mt mu mv b">.tail()</code>方法时，只有最新的数据帧会显示在输出中。</p><p id="dfa5" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">例如，让我们创建两个数据帧，并尝试在输出中查看它们。</p><pre class="ks kt ku kv gt mw mv mx bn my mz bi"><span id="e2a1" class="na nb it mv b be nc nd l ne nf">df1 = pd.DataFrame({"Country":["India","Germany"],<br/>                   "State":[["Maharashtra", "Telangana", "Gujarat"],<br/>                            ["Bavaria", "Hessen"]]})<br/><br/>df2 = df1.explode("State")<br/><br/># Get both DataFrames as output<br/>df1<br/>df2</span></pre><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div class="gh gi ph"><img src="../Images/d0d62be7f3d431a98281b7b1fd209cf1.png" data-original-src="https://miro.medium.com/v2/resize:fit:340/format:webp/1*op9tf94jAWOEkhJNIyJi7w.png"/></div><p class="ld le gj gh gi lf lg bd b be z dk translated">单元格输出|作者图片</p></figure><p id="4acf" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">虽然，你在代码末尾提到了<code class="fe ms mt mu mv b">df1</code>和<code class="fe ms mt mu mv b">df2</code>；它在输出中只显示了<code class="fe ms mt mu mv b">df2</code>。</p><p id="1661" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">但是，您希望看到两个数据帧，一个在另一个下面。这就是函数<code class="fe ms mt mu mv b">display()</code>有用的地方。您只需要将 DataFrame 传递给 display()函数，如下所示。</p><pre class="ks kt ku kv gt mw mv mx bn my mz bi"><span id="9381" class="na nb it mv b be nc nd l ne nf">df1 = pd.DataFrame({"Country":["India","Germany"],<br/>                   "State":[["Maharashtra", "Telangana", "Gujarat"],<br/>                            ["Bavaria", "Hessen"]]})<br/><br/>df2 = df1.explode("State")<br/><br/># Get both DataFrames as output<br/>display(df1)<br/>display(df2)</span></pre><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div class="gh gi pj"><img src="../Images/c369b54485eba18ae338710d31d93a53.png" data-original-src="https://miro.medium.com/v2/resize:fit:592/format:webp/1*FeUUmxHFBgXRUw_UeUvwSw.png"/></div><p class="ld le gj gh gi lf lg bd b be z dk translated">按作者显示输出|图像中的所有数据帧</p></figure><p id="db55" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">简单！</p><p id="9a12" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">现在，您可以在输出中看到两个(或所有)数据帧——一个堆叠在另一个之上。</p><p id="296d" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">前面的技巧也是函数显示()的一个很好的例子，您可以在输出中看到数据帧和条形图相互堆叠。</p></div><div class="ab cl ml mm hx mn" role="separator"><span class="mo bw bk mp mq mr"/><span class="mo bw bk mp mq mr"/><span class="mo bw bk mp mq"/></div><div class="im in io ip iq"><p id="dd62" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">一旦探索了数据集并研究了其中的趋势和模式，下一步就是进行描述性分析。这可以通过数据转换来实现。</p><p id="f744" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">从一个基本的数据转换开始—使用不同的内置函数调查分类列中的不同值。</p><h1 id="bee2" class="nh nb it bd ni nj nk nl nm nn no np nq ki nr kj ns kl nt km nu ko nv kp nw nx bi translated">用 nunique()计算唯一值</h1><p id="cc85" class="pw-post-body-paragraph li lj it lk b ll ny kd ln lo nz kg lq lr oa lt lu lv ob lx ly lz oc mb mc md im bi translated">当数据集中有分类列时，有时需要检查一列中有多少不同的值。</p><p id="98ca" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">使用最简单的函数— <code class="fe ms mt mu mv b"><strong class="lk jd">nunique()</strong></code>就可以得到。例如，假设您想查看数据集中有多少种不同的房间类型，您可以使用 nunique()快速查看。</p><pre class="ks kt ku kv gt mw mv mx bn my mz bi"><span id="5c13" class="na nb it mv b be nc nd l ne nf">df['room type'].nunique()<br/><br/>#Output<br/>4</span></pre><p id="2408" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">它只告诉你有多少唯一值可用，但要得到不同的值，即房间类型，你可以使用另一个函数— <code class="fe ms mt mu mv b"><strong class="lk jd">unique()</strong></code></p><pre class="ks kt ku kv gt mw mv mx bn my mz bi"><span id="48e2" class="na nb it mv b be nc nd l ne nf">df['room type'].unique()<br/><br/>#Output<br/>array(['Private room', 'Entire home/apt', 'Shared room', 'Hotel room'],<br/>      dtype=object)</span></pre><p id="87a9" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">它返回一个包含所有唯一值的数组。</p><p id="8b60" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">检查完唯一值后，检查每个值在数据集中出现的次数也很有意义，即每种类型的房间在数据集中记录了多少次。</p><p id="fe50" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">你可以用另一种方法得到它——T2——如下所示。</p><pre class="ks kt ku kv gt mw mv mx bn my mz bi"><span id="f590" class="na nb it mv b be nc nd l ne nf">df.value_counts('room type')<br/><br/>#Output<br/>room type<br/>Entire home/apt    53701<br/>Private room       46556<br/>Shared room         2226<br/>Hotel room           116</span></pre><p id="45a4" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">通过这种方式，您可以使用一行代码获得唯一值的数量以及它们出现的次数。</p><p id="11c3" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">数据转换从不局限于分类列，事实上大多数可操作的见解都是从数字列中获得的。</p><p id="530c" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">因此，让我们研究两个与数字列相关的常用操作。第一件事是看看如何获得数据帧中一列的累积摘要。</p><h1 id="492c" class="nh nb it bd ni nj nk nl nm nn no np nq ki nr kj ns kl nt km nu ko nv kp nw nx bi translated">返回带有 cumsum()的累计汇总</h1><p id="3739" class="pw-post-body-paragraph li lj it lk b ll ny kd ln lo nz kg lq lr oa lt lu lv ob lx ly lz oc mb mc md im bi translated">累积总和也称为运行总和，用于显示数据随时间增长的总和。所以在任何时间点，它会告诉你到那时为止所有值的总和。</p><p id="f2db" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">pandas DataFrame 有自己的方法<code class="fe ms mt mu mv b">pandas.DataFrame.cumsum</code>，它返回 DataFrame 列的累积和。</p><p id="ca8b" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">让我们创建一个简单的日期和售出产品数量的数据框架。</p><pre class="ks kt ku kv gt mw mv mx bn my mz bi"><span id="0d88" class="na nb it mv b be nc nd l ne nf">daterange = pd.date_range('2022-11-24', periods=5, freq='2D')<br/>df1 = pd.DataFrame({ 'Date': daterange,<br/>                    'Products_sold' : [10, 15, 20, 25, 4]})<br/>df1</span></pre><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div class="gh gi pk"><img src="../Images/3e7b6b3a0bab32c40fbf3469ac55f425.png" data-original-src="https://miro.medium.com/v2/resize:fit:392/format:webp/1*56fMzHMJvQUzTplRxy3haQ.png"/></div><p class="ld le gj gh gi lf lg bd b be z dk translated">虚拟数据集|作者提供的图像</p></figure><p id="b12d" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">这是一个虚拟数据集，其日期范围从 2022 年 11 月 24 日到 2022 年 12 月 2 日，以及每个日期销售的产品数量。</p><p id="0826" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">现在，假设您想查看截至 2022 年 11 月 30 日售出的产品总数。你不需要手动计算它，而是方法<code class="fe ms mt mu mv b">pandas.DataFrame.cumsum</code>会在一行代码中为你得到它。</p><pre class="ks kt ku kv gt mw mv mx bn my mz bi"><span id="80aa" class="na nb it mv b be nc nd l ne nf">df1["Products_sold"].cumsum()<br/><br/>#Output<br/>0    10<br/>1    25<br/>2    45<br/>3    70<br/>4    74</span></pre><p id="0eaf" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">它只是返回特定列的运行总数。但是，这很难理解，因为您在输出中看不到任何日期或原始值。</p><p id="e7ca" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">因此，您应该将累积总和分配给同一数据帧中的新列，如下所示。</p><pre class="ks kt ku kv gt mw mv mx bn my mz bi"><span id="8f2b" class="na nb it mv b be nc nd l ne nf">df1["Total_products_sold"] = df1["Products_sold"].cumsum()<br/>df1</span></pre><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi pl"><img src="../Images/73bc7821ef388fc4688843c70681f7ab.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Tgd1287fFckePHZY9xxBUw.png"/></div></div><p class="ld le gj gh gi lf lg bd b be z dk translated">熊猫数据框|作者图片中的累计总和或累计总数</p></figure><p id="deac" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">答对了。</p><p id="c817" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">您只用一行代码就获得了您的专栏的运行总数！！</p><p id="2fd5" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">通常观察到的累积和用例是理解"<em class="mh">到目前为止有多少</em>"例如</p><ul class=""><li id="1f46" class="pm pn it lk b ll lm lo lp lr po lv pp lz pq md pr ps pt pu bi translated">到目前为止，这条河的水位上升了多少</li><li id="c683" class="pm pn it lk b ll pv lo pw lr px lv py lz pz md pr ps pt pu bi translated">特定时间之前销售了多少产品</li><li id="865e" class="pm pn it lk b ll pv lo pw lr px lv py lz pz md pr ps pt pu bi translated">每次交易后，账户里还有多少余额</li></ul><p id="8854" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">因此，知道如何在数据集中获得<a class="ae lh" href="https://pandas.pydata.org/docs/reference/api/pandas.DataFrame.cumsum.html" rel="noopener ugc nofollow" target="_blank">累计值</a>可能是您分析项目的真正救星。</p><p id="de39" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">此外，在处理数字数据时，您必须知道如何汇总数据并以汇总形式呈现出来。</p><h1 id="0360" class="nh nb it bd ni nj nk nl nm nn no np nq ki nr kj ns kl nt km nu ko nv kp nw nx bi translated">使用 agg()通过多个函数进行聚合</h1><p id="e054" class="pw-post-body-paragraph li lj it lk b ll ny kd ln lo nz kg lq lr oa lt lu lv ob lx ly lz oc mb mc md im bi translated">您可以随时汇总原始数据，以提供统计见解，如最小值、最大值、总和以及计数。但是，当您使用 pandas 进行数据分析时，您真的不需要手动操作。</p><p id="d27d" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">Pandas 提供了一个函数——<code class="fe ms mt mu mv b"> agg()<strong class="lk jd"> </strong></code>——可以在 pandas 数据帧上按对象分组使用。当 DataFrame 方法<code class="fe ms mt mu mv b">groupby()</code>用于将数据分组到类别中时，创建该对象。</p><p id="95a4" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">使用<code class="fe ms mt mu mv b">agg()</code>函数，您可以将聚合函数应用于数据集中的所有数值列。</p><p id="0ab7" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">例如，您可以按房间类型对 Airbnb 数据集进行分组，以创建一个<code class="fe ms mt mu mv b">pandas.DataFrame.groupby</code>对象。</p><pre class="ks kt ku kv gt mw mv mx bn my mz bi"><span id="5b43" class="na nb it mv b be nc nd l ne nf">df_room = df.groupby('room type')<br/>df_room<br/><br/>#Output<br/>&lt;pandas.core.groupby.generic.DataFrameGroupBy object at 0x0000029860741EB0&gt;</span></pre><p id="1274" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">现在，您可以对列<em class="mh">点评数</em>和<em class="mh">最低住宿天数</em>应用聚合函数<code class="fe ms mt mu mv b">sum </code>，如下所示。</p><pre class="ks kt ku kv gt mw mv mx bn my mz bi"><span id="6cbf" class="na nb it mv b be nc nd l ne nf">df_room.agg({'number of reviews': sum,<br/>             'minimum nights': sum})</span></pre><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div class="gh gi qa"><img src="../Images/506e79c2903e191dbd127cea946c180d.png" data-original-src="https://miro.medium.com/v2/resize:fit:666/format:webp/1*-ucIKc7RgRpvR7oA0i5PYg.png"/></div><p class="ld le gj gh gi lf lg bd b be z dk translated">熊猫|作者图片中的数据聚合</p></figure><p id="d1d0" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">您所需要做的就是向函数<code class="fe ms mt mu mv b">agg()</code>传递一个字典，其中键是列名，值是聚合函数名，比如<code class="fe ms mt mu mv b">sum</code>、<code class="fe ms mt mu mv b">max</code>、<code class="fe ms mt mu mv b">min</code>。</p><p id="ae65" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">您还可以在同一列上应用多个函数，甚至在不同的列上应用不同的函数。</p><p id="2e17" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">为了更好地理解数据聚合，我强烈推荐阅读—</p><div class="oo op gp gr oq or"><a rel="noopener follow" target="_blank" href="/5-pandas-group-by-tricks-you-should-know-in-python-f53246c92c94"><div class="os ab fo"><div class="ot ab ou cl cj ov"><h2 class="bd jd gy z fp ow fr fs ox fu fw jc bi translated">5 只熊猫按你在 Python 中应该知道的技巧分组</h2><div class="oy l"><h3 class="bd b gy z fp ow fr fs ox fu fw dk translated">所有你需要知道的关于熊猫数据框架组，以有效地使用它！</h3></div><div class="oz l"><p class="bd b dl z fp ow fr fs ox fu fw dk translated">towardsdatascience.com</p></div></div><div class="pa l"><div class="qb l pc pd pe pa pf lb or"/></div></div></a></div></div><div class="ab cl ml mm hx mn" role="separator"><span class="mo bw bk mp mq mr"/><span class="mo bw bk mp mq mr"/><span class="mo bw bk mp mq"/></div><div class="im in io ip iq"><p id="0f03" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">我希望你很快读完这篇文章，并发现它对使用 pandas 提高数据分析技巧很有用。</p><p id="fae8" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">我使用 Python 已经 4 年多了，我发现这些技巧非常省时。这些概念在实际项目中非常有用。</p><blockquote class="qc"><p id="8a5e" class="qd qe it bd qf qg qh qi qj qk ql md dk translated"><em class="qm">对阅读介质上的无限故事感兴趣？？</em></p></blockquote><p id="2adc" class="pw-post-body-paragraph li lj it lk b ll qn kd ln lo qo kg lq lr qp lt lu lv qq lx ly lz qr mb mc md im bi translated">💡考虑<a class="ae lh" href="https://medium.com/@17.rsuraj/membership" rel="noopener"> <strong class="lk jd">成为媒体会员</strong></a><strong class="lk jd">访问媒体上无限的</strong>故事和每日有趣的媒体文摘。我会得到你的费用的一小部分，没有额外的费用给你。</p><blockquote class="qc"><p id="86eb" class="qd qe it bd qf qg qh qi qj qk ql md dk translated">我也是一个中等会员&amp;这真是太神奇了。我可以从这里张贴的每一篇文章中阅读和学习。</p></blockquote><p id="d93f" class="pw-post-body-paragraph li lj it lk b ll qn kd ln lo qo kg lq lr qp lt lu lv qq lx ly lz qr mb mc md im bi translated">💡请务必<a class="ae lh" href="https://medium.com/subscribe/@17.rsuraj" rel="noopener"> <strong class="lk jd">注册我的电子邮件列表</strong> </a>以免错过另一篇关于数据科学指南、技巧和提示、SQL 和 Python 的文章。</p><p id="8899" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated"><strong class="lk jd">感谢您的阅读！</strong></p><p id="472c" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">💡<strong class="lk jd"/><a class="ae lh" href="https://github.com/17rsuraj/data-curious/blob/master/TowardsDataScience/10%20Useful%20Python%20Tricks%20You%20Should%20Know.ipynb" rel="noopener ugc nofollow" target="_blank"><strong class="lk jd">【Jupyter】-笔记本配实例！</strong>T11】</a></p></div></div>    
</body>
</html>