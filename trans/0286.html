<html>
<head>
<title>How to Perform Speech-to-Text and Topic Detection with Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何使用Python执行语音转文本和主题检测</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/topic-detection-python-assemblyai-315ea417f885#2022-02-11">https://towardsdatascience.com/topic-detection-python-assemblyai-315ea417f885#2022-02-11</a></blockquote><div><div class="fc ii ij ik il im"/><div class="in io ip iq ir"><div class=""/><div class=""><h2 id="fc31" class="pw-subtitle-paragraph jr it iu bd b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki dk translated">使用Python和AssemblyAI对音频文件执行文本转录和主题检测</h2></div><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj kj"><img src="../Images/29ed0cf6cc1cb32f0b4c1e94fa2a8dcc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9dB9TtMvexvR0JpzcUoXnA.jpeg"/></div></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">沃洛季米尔·赫里先科在<a class="ae kz" href="https://unsplash.com/s/photos/speech?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</p></figure><h2 id="4eed" class="la lb iu bd lc ld le dn lf lg lh dp li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">介绍</h2><p id="26a7" class="pw-post-body-paragraph lw lx iu ly b lz ma jv mb mc md jy me lj mf mg mh ln mi mj mk lr ml mm mn mo in bi translated">在我最近的一篇文章中，我讨论了关于<a class="ae kz" rel="noopener" target="_blank" href="/speech-recognition-python-assemblyai-bb5024d322d8">语音识别以及如何在Python </a>中实现它。在今天的文章中，我们将进一步探讨如何对音频和视频文件进行主题检测。</p><p id="caaf" class="pw-post-body-paragraph lw lx iu ly b lz mp jv mb mc mq jy me lj mr mg mh ln ms mj mk lr mt mm mn mo in bi translated">作为一个例子，让我们考虑一下随着时间的推移变得越来越流行的播客。想象一下每天有多少播客被创建；不同平台(如Spotify、YouTube或Apple Podcasts)上的推荐引擎根据讨论的内容对所有这些播客进行分类难道没有用吗？</p></div><div class="ab cl mu mv hy mw" role="separator"><span class="mx bw bk my mz na"/><span class="mx bw bk my mz na"/><span class="mx bw bk my mz"/></div><div class="in io ip iq ir"><h2 id="2148" class="la lb iu bd lc ld le dn lf lg lh dp li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">使用Python执行语音转文本和主题检测</h2><p id="5553" class="pw-post-body-paragraph lw lx iu ly b lz ma jv mb mc md jy me lj mf mg mh ln mi mj mk lr ml mm mn mo in bi translated">在本教程中，我们将使用AssemblyAI API来标记音频和视频文件中的主题。因此，如果您想继续，您首先需要获得一个<a class="ae kz" href="https://app.assemblyai.com/signup" rel="noopener ugc nofollow" target="_blank"> AssemblyAI访问令牌</a>(这是绝对免费的)，我们将在调用API时使用它。</p><p id="9a2c" class="pw-post-body-paragraph lw lx iu ly b lz mp jv mb mc mq jy me lj mr mg mh ln ms mj mk lr mt mm mn mo in bi translated">现在我们有了一个访问令牌，让我们开始准备在向AssemblyAI的各个端点发送请求时将使用的头。</p><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="nb nc l"/></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">为我们将发送到API端点的请求准备头部——来源:作者</p></figure><p id="7078" class="pw-post-body-paragraph lw lx iu ly b lz mp jv mb mc mq jy me lj mr mg mh ln ms mj mk lr mt mm mn mo in bi translated">接下来，我们需要将音频(或视频)文件上传到AssemblyAI的托管服务。然后，端点将返回上传文件的URL，我们将在后续请求中使用它。</p><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="nb nc l"/></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">上传音频/视频文件到AssemblyAI主机服务-来源:作者</p></figure><p id="5e6e" class="pw-post-body-paragraph lw lx iu ly b lz mp jv mb mc mq jy me lj mr mg mh ln ms mj mk lr mt mm mn mo in bi translated">现在，下一步是最有趣的部分，我们将对上传的音频文件执行语音到文本的转换。在<code class="fe nd ne nf ng b">POST</code>请求中，我们需要传递的只是从上一步接收到的<code class="fe nd ne nf ng b">audio_url</code>以及需要设置为<code class="fe nd ne nf ng b">True</code>的<code class="fe nd ne nf ng b">iab_categories</code>参数。后者将触发文本转录上的主题检测。来自<code class="fe nd ne nf ng b">TRANSCRIPT_ENDPOINT</code>的示例响应也显示在以下要点的末尾。</p><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="nb nc l"/></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">使用话题检测执行语音转文本—来源:作者</p></figure><p id="561d" class="pw-post-body-paragraph lw lx iu ly b lz mp jv mb mc mq jy me lj mr mg mh ln ms mj mk lr mt mm mn mo in bi translated">现在，为了获得转录结果(以及主题检测结果)，我们需要再发出一个请求。这是因为转录是<a class="ae kz" href="https://docs.assemblyai.com/#processing-times" rel="noopener ugc nofollow" target="_blank">异步的</a> —当提交文件进行转录时，我们需要一段时间才能访问结果(通常大约是整个音频文件持续时间的15–30%)。</p><p id="85d1" class="pw-post-body-paragraph lw lx iu ly b lz mp jv mb mc mq jy me lj mr mg mh ln ms mj mk lr mt mm mn mo in bi translated">因此，我们需要发出一些<code class="fe nd ne nf ng b">GET</code>请求，直到得到成功(或失败)的响应，如下图所示。</p><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="nb nc l"/></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">获取转录和主题检测结果—来源:作者</p></figure><p id="2f8e" class="pw-post-body-paragraph lw lx iu ly b lz mp jv mb mc mq jy me lj mr mg mh ln ms mj mk lr mt mm mn mo in bi translated">最后，让我们将接收到的结果写入一个文本文件，以便我们更容易检查输出并解释从转录端点接收到的响应:</p><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="nb nc l"/></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">将转录输出写入文件—来源:作者</p></figure></div><div class="ab cl mu mv hy mw" role="separator"><span class="mx bw bk my mz na"/><span class="mx bw bk my mz na"/><span class="mx bw bk my mz"/></div><div class="in io ip iq ir"><h2 id="ab3d" class="la lb iu bd lc ld le dn lf lg lh dp li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">解读回应</h2><p id="ed20" class="pw-post-body-paragraph lw lx iu ly b lz ma jv mb mc md jy me lj mf mg mh ln mi mj mk lr ml mm mn mo in bi translated">转录终点的响应示例如下所示:</p><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="nb nc l"/></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">启用话题检测的转录结果示例—来源:作者</p></figure><p id="6e62" class="pw-post-body-paragraph lw lx iu ly b lz mp jv mb mc mq jy me lj mr mg mh ln ms mj mk lr mt mm mn mo in bi translated">外部的<code class="fe nd ne nf ng b">text</code>键包含输入音频文件的文本转录结果。但是让我们更关注包含与主题检测结果相关的信息的<code class="fe nd ne nf ng b">categories_iab_result</code>的内容。</p><ul class=""><li id="9071" class="nh ni iu ly b lz mp mc mq lj nj ln nk lr nl mo nm nn no np bi translated"><code class="fe nd ne nf ng b">status</code>:包含话题检测的状态。正常情况下，这将是<code class="fe nd ne nf ng b">success</code>。如果由于任何原因，主题检测模型已经失败，则该值将是<code class="fe nd ne nf ng b">unavailable</code>。</li><li id="f574" class="nh ni iu ly b lz nq mc nr lj ns ln nt lr nu mo nm nn no np bi translated"><code class="fe nd ne nf ng b">results</code>:该键将包括在输入音频文件中检测到的主题列表，包括影响预测并触发预测模型做出该决定的精确文本。此外，它还包括一些关于相关性和时间戳的元数据。我们将在下面讨论这两个问题。</li><li id="3a9f" class="nh ni iu ly b lz nq mc nr lj ns ln nt lr nu mo nm nn no np bi translated"><code class="fe nd ne nf ng b">results.text</code>:该键包括已用特定主题标签分类的音频部分的精确转录文本。</li><li id="9bae" class="nh ni iu ly b lz nq mc nr lj ns ln nt lr nu mo nm nn no np bi translated"><code class="fe nd ne nf ng b">results.timestamp</code>:该键表示输入音频文件中说出<code class="fe nd ne nf ng b">results.text</code>的开始和结束时间(以毫秒为单位)。</li><li id="44a1" class="nh ni iu ly b lz nq mc nr lj ns ln nt lr nu mo nm nn no np bi translated"><code class="fe nd ne nf ng b">results.labels</code>:这是包含由主题检测模型为<code class="fe nd ne nf ng b">results.text</code>中的文本部分预测的所有标签的列表。相关性关键字对应于可以取<code class="fe nd ne nf ng b">0</code>和<code class="fe nd ne nf ng b">1.0</code>之间的任何值的分数，并且指示每个预测标签相对于<code class="fe nd ne nf ng b">results.text</code>的相关程度。</li><li id="56d6" class="nh ni iu ly b lz nq mc nr lj ns ln nt lr nu mo nm nn no np bi translated"><code class="fe nd ne nf ng b">summary</code>:对于由主题检测模型在<code class="fe nd ne nf ng b">results</code>阵列中检测到的每个唯一标签，<code class="fe nd ne nf ng b">summary</code>键将包括该标签在输入音频文件的整个长度上的相关性。例如，如果在60分钟长的音频文件中仅检测到一次<code class="fe nd ne nf ng b">Science&gt;Environment</code>标签，则摘要关键字将包括该标签的相对较低的相关性分数，因为没有发现整个转录与该主题标签一致相关。</li></ul><p id="84d5" class="pw-post-body-paragraph lw lx iu ly b lz mp jv mb mc mq jy me lj mr mg mh ln ms mj mk lr mt mm mn mo in bi translated">为了查看主题检测模型能够预测的主题标签的完整列表，请确保查看官方文档中的<a class="ae kz" href="https://docs.assemblyai.com/audio-intelligence#topic-detection-iab-classification" rel="noopener ugc nofollow" target="_blank">相关章节。</a></p></div><div class="ab cl mu mv hy mw" role="separator"><span class="mx bw bk my mz na"/><span class="mx bw bk my mz na"/><span class="mx bw bk my mz"/></div><div class="in io ip iq ir"><h2 id="38f4" class="la lb iu bd lc ld le dn lf lg lh dp li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">完整代码</h2><p id="efe4" class="pw-post-body-paragraph lw lx iu ly b lz ma jv mb mc md jy me lj mf mg mh ln mi mj mk lr ml mm mn mo in bi translated">下面的GitHub Gist分享了作为本教程一部分的完整代码:</p><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="nb nc l"/></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">作为本教程一部分的完整代码——来源:作者</p></figure></div><div class="ab cl mu mv hy mw" role="separator"><span class="mx bw bk my mz na"/><span class="mx bw bk my mz na"/><span class="mx bw bk my mz"/></div><div class="in io ip iq ir"><h2 id="78f3" class="la lb iu bd lc ld le dn lf lg lh dp li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">最后的想法</h2><p id="f311" class="pw-post-body-paragraph lw lx iu ly b lz ma jv mb mc md jy me lj mf mg mh ln mi mj mk lr ml mm mn mo in bi translated">在今天的文章中，我们探讨了如何使用Python和AssemblyAI API对生成的文本转录执行语音转文本和主题检测。我们通过一个分步指南详细解释了如何使用各种API端点来对音频和视频文件执行主题检测。</p></div><div class="ab cl mu mv hy mw" role="separator"><span class="mx bw bk my mz na"/><span class="mx bw bk my mz na"/><span class="mx bw bk my mz"/></div><div class="in io ip iq ir"><p id="1b77" class="pw-post-body-paragraph lw lx iu ly b lz mp jv mb mc mq jy me lj mr mg mh ln ms mj mk lr mt mm mn mo in bi translated"><a class="ae kz" href="https://gmyrianthous.medium.com/membership" rel="noopener"> <strong class="ly iv">成为会员</strong> </a> <strong class="ly iv">阅读介质上的每一个故事。你的会员费直接支持我和你看的其他作家。你也可以在媒体上看到所有的故事。</strong></p><div class="nv nw gq gs nx ny"><a href="https://gmyrianthous.medium.com/membership" rel="noopener follow" target="_blank"><div class="nz ab fp"><div class="oa ab ob cl cj oc"><h2 class="bd iv gz z fq od fs ft oe fv fx it bi translated">通过我的推荐链接加入Medium-Giorgos Myrianthous</h2><div class="of l"><h3 class="bd b gz z fq od fs ft oe fv fx dk translated">作为一个媒体会员，你的会员费的一部分会给你阅读的作家，你可以完全接触到每一个故事…</h3></div><div class="og l"><p class="bd b dl z fq od fs ft oe fv fx dk translated">gmyrianthous.medium.com</p></div></div><div class="oh l"><div class="oi l oj ok ol oh om kt ny"/></div></div></a></div></div><div class="ab cl mu mv hy mw" role="separator"><span class="mx bw bk my mz na"/><span class="mx bw bk my mz na"/><span class="mx bw bk my mz"/></div><div class="in io ip iq ir"><p id="676e" class="pw-post-body-paragraph lw lx iu ly b lz mp jv mb mc mq jy me lj mr mg mh ln ms mj mk lr mt mm mn mo in bi translated"><strong class="ly iv">你可能也会喜欢</strong></p><div class="nv nw gq gs nx ny"><a rel="noopener follow" target="_blank" href="/real-time-speech-recognition-python-assemblyai-13d35eeed226"><div class="nz ab fp"><div class="oa ab ob cl cj oc"><h2 class="bd iv gz z fq od fs ft oe fv fx it bi translated">如何用Python执行实时语音识别</h2><div class="of l"><h3 class="bd b gz z fq od fs ft oe fv fx dk translated">使用Python中的AssemblyAI API执行实时语音转文本</h3></div><div class="og l"><p class="bd b dl z fq od fs ft oe fv fx dk translated">towardsdatascience.com</p></div></div><div class="oh l"><div class="on l oj ok ol oh om kt ny"/></div></div></a></div></div><div class="ab cl mu mv hy mw" role="separator"><span class="mx bw bk my mz na"/><span class="mx bw bk my mz na"/><span class="mx bw bk my mz"/></div><div class="in io ip iq ir"><div class="kk kl km kn gu ny"><a rel="noopener follow" target="_blank" href="/summarize-audio-video-files-assemblyai-c9126918870c"><div class="nz ab fp"><div class="oa ab ob cl cj oc"><h2 class="bd iv gz z fq od fs ft oe fv fx it bi translated">如何用Python汇总音视频文件</h2><div class="of l"><h3 class="bd b gz z fq od fs ft oe fv fx dk translated">了解如何使用AssemblyAI API的自动章节功能摘要音频文件</h3></div><div class="og l"><p class="bd b dl z fq od fs ft oe fv fx dk translated">towardsdatascience.com</p></div></div><div class="oh l"><div class="oo l oj ok ol oh om kt ny"/></div></div></a></div></div></div>    
</body>
</html>