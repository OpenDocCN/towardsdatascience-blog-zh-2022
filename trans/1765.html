<html>
<head>
<title>Time Series Forecasting with ARIMA , SARIMA and SARIMAX</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用ARIMA、萨里玛和萨里马克斯进行时间序列预测</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/time-series-forecasting-with-arima-sarima-and-sarimax-ee61099e78f6#2022-04-26">https://towardsdatascience.com/time-series-forecasting-with-arima-sarima-and-sarimax-ee61099e78f6#2022-04-26</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="2839" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">深入探讨时间序列预测的黄金标准</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/77e8788dfe2dfb11ce937ca568c48c52.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Uw3IaV-wHnYkMUrLBVTfpg.jpeg"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">时间序列图——作者<a class="ae kv" href="https://unsplash.com/@isaacmsmith" rel="noopener ugc nofollow" target="_blank">艾萨克·史密斯</a></p></figure></div><div class="ab cl kw kx hu ky" role="separator"><span class="kz bw bk la lb lc"/><span class="kz bw bk la lb lc"/><span class="kz bw bk la lb"/></div><div class="ij ik il im in"><p id="a2c0" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">时间序列预测是一个没有简单答案的难题。有数不清的统计模型声称优于彼此，但从来不清楚哪个模型是最好的。</p><p id="8ffa" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">也就是说，基于ARMA的模型通常是一个很好的开始模型。他们可以在大多数时间序列问题上获得不错的分数，并且非常适合作为任何时间序列问题的基线模型。</p><p id="8eb7" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">这篇文章是一个全面的、初学者友好的指南，帮助您理解基于ARIMA的模型。</p><h1 id="33be" class="lz ma iq bd mb mc md me mf mg mh mi mj jw mk jx ml jz mm ka mn kc mo kd mp mq bi translated">介绍</h1><p id="7057" class="pw-post-body-paragraph ld le iq lf b lg mr jr li lj ms ju ll lm mt lo lp lq mu ls lt lu mv lw lx ly ij bi translated">ARIMA模型的首字母缩写代表“自回归综合移动平均线”，在本文中，我们将把它分解为AR、I和MA。</p><p id="15f3" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated"><strong class="lf ir">自回归分量— AR(p) </strong></p><p id="02b5" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">ARIMA模型的自回归部分用AR(p)表示，p参数决定了我们使用的滞后序列的数量。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi mw"><img src="../Images/20a50de87a8252e078e10a689381df8d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*StLhQYuizfDdsfuEcDoXDA.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">AR公式-按作者</p></figure><p id="da8e" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated"><em class="mx"> AR(0):白噪声</em></p><p id="a71e" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">如果我们将p参数设置为零(AR(0))，没有自回归项。这个时间序列只是白噪音。每个数据点都是从平均值为0且方差为σ-平方的分布中采样的。这会产生一系列无法预测的随机数。这真的很有用，因为它可以作为一个零假设，保护我们的分析不接受假阳性模式。</p><p id="a24f" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated"><em class="mx"> AR(1):随机游走和振荡</em></p><p id="cdd7" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">在p参数设置为1的情况下，我们考虑由乘数调整的前一个时间戳，然后添加白噪声。如果乘数为0，我们得到白噪声，如果乘数为1，我们得到随机游走。如果乘数在0 &lt; α₁ &lt; 1, then the time series will exhibit mean reversion. This means that the values tend to hover around 0 and revert to the mean after regressing from it.</p><p id="06ee" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated"><em class="mx"> AR(p)之间:高阶项</em></p><p id="2dee" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">进一步增加p参数只是意味着进一步返回并添加更多由它们自己的乘数调整的时间戳。我们可以追溯到我们想要的那么远，但是当我们追溯到更远的时候，我们更可能应该使用额外的参数，例如移动平均线(MA(q))。</p><h2 id="3eca" class="my ma iq bd mb mz na dn mf nb nc dp mj lm nd ne ml lq nf ng mn lu nh ni mp nj bi translated">移动平均线— MA(q)</h2><p id="1849" class="pw-post-body-paragraph ld le iq lf b lg mr jr li lj ms ju ll lm mt lo lp lq mu ls lt lu mv lw lx ly ij bi translated">"这个分量不是滚动平均值，而是白噪声中的滞后."—马特·索斯纳</p><p id="bde1" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated"><em class="mx">马(q) </em></p><p id="5b52" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">MA(q)是移动平均模型，q是预测中滞后预测误差项的数量。在MA(1)模型中，我们的预测是一个常数项加上前一个白噪声项乘以一个乘数，再加上当前的白噪声项。这只是简单的概率+统计，因为我们正在根据以前的白噪声条件调整我们的预测。</p><h2 id="e740" class="my ma iq bd mb mz na dn mf nb nc dp mj lm nd ne ml lq nf ng mn lu nh ni mp nj bi translated">ARMA和ARIMA模型</h2><p id="060e" class="pw-post-body-paragraph ld le iq lf b lg mr jr li lj ms ju ll lm mt lo lp lq mu ls lt lu mv lw lx ly ij bi translated">ARMA和ARIMA架构只是AR(自回归)和MA(移动平均)组件的组合。</p><p id="f5f4" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated"><em class="mx"> ARMA </em></p><p id="3a45" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">ARMA模型是一个常数加上AR滞后及其乘数之和，再加上MA滞后及其乘数之和加上白噪声。这个等式是接下来所有模型的基础，也是跨不同领域的许多预测模型的框架。</p><p id="2990" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated"><em class="mx"> ARIMA </em></p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nk"><img src="../Images/88f2e3334c6a0cdac50da788b86c9f8b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*obF1rUrX-uzE_00XvytPEg.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">ARIMA公式—作者</p></figure><p id="de06" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">ARIMA模型是一个ARMA模型，但在我们用I(d)表示的模型中包含了一个预处理步骤。I(d)是差序，它是使数据稳定所需的转换次数。因此，ARIMA模型就是差分时间序列的ARMA模型。</p><h2 id="f9ae" class="my ma iq bd mb mz na dn mf nb nc dp mj lm nd ne ml lq nf ng mn lu nh ni mp nj bi translated">SARIMA、ARIMAX、SARIMAX型号</h2><p id="26c2" class="pw-post-body-paragraph ld le iq lf b lg mr jr li lj ms ju ll lm mt lo lp lq mu ls lt lu mv lw lx ly ij bi translated">ARIMA模型是伟大的，但在模型中包括季节性和外生变量可能会非常强大。由于ARIMA模型假设时间序列是平稳的，我们需要使用不同的模型。</p><p id="7a20" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated"><em class="mx">萨里玛</em></p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nl"><img src="../Images/99ebdd29bee5c4cbc042f1794b84863e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0A5Y8uQlGcVe6QpOGonZpw.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">萨里玛公式—作者</p></figure><p id="1146" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">输入萨里玛(季节性ARIMA)。这个模型非常类似于ARIMA模型，除了有一个额外的自回归和移动平均组件。额外的滞后被季节性的频率抵消(例如每月12天，每小时24天)。</p><p id="b7ad" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">SARIMA模型允许按季节频率进行数据差异分析，也允许按非季节差异分析。通过自动参数搜索框架，例如<a class="ae kv" href="http://alkaline-ml.com/pmdarima/" rel="noopener ugc nofollow" target="_blank"> pmdarina </a>，可以更容易地知道哪些参数是最好的。</p><h2 id="22f9" class="my ma iq bd mb mz na dn mf nb nc dp mj lm nd ne ml lq nf ng mn lu nh ni mp nj bi translated">ARIMAX和SARIMAX</h2><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nm"><img src="../Images/6459623955eedd59304171c4cb374059.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rXIngrG6Ss-VuJcYrImiig.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">Sarimax公式——作者</p></figure><p id="f20b" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">以上是SARIMAX模型的。这个模型考虑了外生变量，换句话说，在我们的预测中使用外部数据。一些外生变量的真实例子包括黄金价格、石油价格、室外温度、汇率。</p><p id="9d03" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">有趣的是，在历史模型预测中，所有外生因素仍然在技术上被间接建模。也就是说，如果我们包括外部数据，模型对其影响的反应会比我们依赖滞后项的影响快得多。</p><h1 id="48b8" class="lz ma iq bd mb mc md me mf mg mh mi mj jw mk jx ml jz mm ka mn kc mo kd mp mq bi translated">代码示例</h1><p id="27df" class="pw-post-body-paragraph ld le iq lf b lg mr jr li lj ms ju ll lm mt lo lp lq mu ls lt lu mv lw lx ly ij bi translated">让我们通过一个简单的Python代码示例来看看这些模型的运行情况。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nn no l"/></div></figure><h2 id="06a0" class="my ma iq bd mb mz na dn mf nb nc dp mj lm nd ne ml lq nf ng mn lu nh ni mp nj bi translated">加载数据</h2><p id="e855" class="pw-post-body-paragraph ld le iq lf b lg mr jr li lj ms ju ll lm mt lo lp lq mu ls lt lu mv lw lx ly ij bi translated">对于这个例子，我们将使用<a class="ae kv" href="https://www.kaggle.com/rakannimer/air-passengers" rel="noopener ugc nofollow" target="_blank">航空乘客数据集</a>。该数据集包含从1949年初到1960年底的航空旅行乘客人数。</p><p id="8166" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">该数据集具有积极的趋势和年度季节性。</p><p id="323a" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">一旦数据集被读取，索引就被设置为日期。这是在Pandas中处理时间序列数据时的标准做法，并使实现ARIMA、萨里玛和萨里玛更容易。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nn no l"/></div></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi np"><img src="../Images/150df403e2d5215c6abfcc53c0dc56d8.png" data-original-src="https://miro.medium.com/v2/resize:fit:788/format:webp/1*TNlp4KLiE3cqGOIA5yhzLw.png"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">单元格输出-按作者</p></figure><p id="1d9e" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated"><strong class="lf ir">趋势</strong></p><p id="0528" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">数据随时间变化的大致方向。例如，如果我们正在观察一个新生婴儿的身高，他们的身高会随着上升趋势进入青少年时期。另一方面，减肥计划成功的人会发现他们的体重随着时间的推移呈下降趋势。</p><p id="4011" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated"><strong class="lf ir">季节性+周期</strong></p><p id="d53b" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">任何具有固定频率的季节性或重复模式。可以是每小时、每月、每天、每年等。这方面的一个例子是，冬季夹克的销量在冬季月份增加，在夏季月份减少。另一个例子是你的银行账户余额。在每个月初的10天里，随着你支付每月的租金、水电费和其他账单，你的余额呈下降趋势。</p><p id="bc84" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated"><strong class="lf ir">不规则+噪音</strong></p><p id="c44a" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">这是数据中任何大的峰值或谷值。一个例子是你跑400米时的心率。当您开始比赛时，您的心率与一整天的心率相似，但在比赛过程中，它会在一小段时间内达到一个更高的水平，然后恢复到正常水平。</p></div><div class="ab cl kw kx hu ky" role="separator"><span class="kz bw bk la lb lc"/><span class="kz bw bk la lb lc"/><span class="kz bw bk la lb"/></div><div class="ij ik il im in"><p id="dc3d" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">在下面的航空公司乘客数据的可视化中，我们可以找到这些组件。乍一看，数据集中似乎有积极的趋势和某种季节性或周期性。数据中似乎没有任何重大异常或噪声。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nn no l"/></div></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nq"><img src="../Images/3237805c0a734c61f7c39ea522851cc3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ijfDZBrhyh0Vy6GEmBnGSQ.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">航线乘客图—作者</p></figure><h1 id="4e71" class="lz ma iq bd mb mc md me mf mg mh mi mj jw mk jx ml jz mm ka mn kc mo kd mp mq bi translated">滚动统计</h1><p id="deca" class="pw-post-body-paragraph ld le iq lf b lg mr jr li lj ms ju ll lm mt lo lp lq mu ls lt lu mv lw lx ly ij bi translated">滚动平均是直观显示数据集趋势的好方法。由于数据集按月提供计数，窗口大小为12将为我们提供年度滚动平均值。</p><p id="4fc1" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">我们还将包括滚动标准差，以查看数据与滚动平均值的差异。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nn no l"/></div></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nr"><img src="../Images/1939b43a146027ccbea5e882dfad8078.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*o7bjRv_zhN5M3lmhADSmXw.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">滚动统计图-按作者</p></figure><h2 id="2ccc" class="my ma iq bd mb mz na dn mf nb nc dp mj lm nd ne ml lq nf ng mn lu nh ni mp nj bi translated">增强迪基-富勒试验</h2><p id="66d9" class="pw-post-body-paragraph ld le iq lf b lg mr jr li lj ms ju ll lm mt lo lp lq mu ls lt lu mv lw lx ly ij bi translated">扩展的Dickey-Fuller检验用于确定时间序列数据是否是平稳的。与t检验类似，我们在检验前设置显著性水平，并根据所得的p值对假设做出结论。</p><p id="96f6" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated"><strong class="lf ir">零假设:</strong>数据不是平稳的。</p><p id="a3f2" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated"><strong class="lf ir">备选假设:</strong>数据是平稳的。</p><p id="48e2" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">对于静止的数据(即拒绝零假设)，ADF测试应该具有:</p><ul class=""><li id="dbc1" class="ns nt iq lf b lg lh lj lk lm nu lq nv lu nw ly nx ny nz oa bi translated">p值&lt; =显著性水平(0.01，0.05，0.10等。)</li></ul><p id="c4b6" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">如果p值大于显著性水平，那么我们可以说数据很可能不是稳定的。</p><p id="faf9" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">我们可以在下面的ADF测试中看到，p值为0.991880，这意味着数据很可能不是平稳的。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nn no l"/></div></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ob"><img src="../Images/70e20c8a7cec984cd41775fbdc687d75.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*i96lO8I5T0_Sp7UF0nujRA.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">ADF测试输出—按作者</p></figure><h2 id="56ec" class="my ma iq bd mb mz na dn mf nb nc dp mj lm nd ne ml lq nf ng mn lu nh ni mp nj bi translated">ARIMA车型选择，带自动ARIMA</h2><p id="da82" class="pw-post-body-paragraph ld le iq lf b lg mr jr li lj ms ju ll lm mt lo lp lq mu ls lt lu mv lw lx ly ij bi translated">虽然我们的数据几乎肯定不是稳定的(p值= 0.991)，但让我们看看标准ARIMA模型在时间序列上的表现如何</p><p id="bc6e" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">使用<code class="fe oc od oe of b">pmdarima</code>包中的auto_arima()函数，我们可以对模型的最优值进行参数搜索。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nn no l"/></div></figure><h1 id="6111" class="lz ma iq bd mb mc md me mf mg mh mi mj jw mk jx ml jz mm ka mn kc mo kd mp mq bi translated">模型诊断</h1><p id="85d5" class="pw-post-body-paragraph ld le iq lf b lg mr jr li lj ms ju ll lm mt lo lp lq mu ls lt lu mv lw lx ly ij bi translated">plot_diagnostics函数产生四个图。标准化残差、直方图加KDE估计、正态q-q和相关图。</p><p id="bf2d" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">基于以下条件，我们可以将该模型解释为非常适合。</p><p id="5b47" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated"><strong class="lf ir">标准化残差</strong></p><p id="64dc" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">残差中没有明显的模式，值的均值为零，方差一致。</p><p id="7ef7" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated"><strong class="lf ir">直方图加上KDE估计</strong></p><p id="1b16" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">KDE曲线应该非常类似于正态分布(在图中标为N(0，1))</p><p id="32b4" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated"><strong class="lf ir">普通Q-Q </strong></p><p id="c1a8" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">大多数数据点应该位于直线上</p><p id="6c57" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated"><strong class="lf ir">相关图(ACF图)</strong></p><p id="e96b" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">大于零的滞后的95%的相关性应该是不显著的。灰色区域是置信带，如果数值超出此范围，则它们在统计上是显著的。在我们的例子中，有一些值在这个区域之外，因此我们可能需要添加更多的预测值以使模型更加准确</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nn no l"/></div></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi og"><img src="../Images/5c47d2e1383369597211cafd6dcdf046.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Mk8i_41U1Q47twEGBCNlyA.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">Arima Diagnostics —作者</p></figure><p id="8351" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">然后，我们可以使用该模型预测未来24个月的航空乘客数量。</p><p id="5d7a" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">从下面的图中我们可以看到，这似乎不是一个非常准确的预测。也许我们需要改变模型结构，以便它考虑到季节性？</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nn no l"/></div></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nr"><img src="../Images/55ae01355a6d63ef56c8649310fc7f0c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hMi5EULn_k56ml1eFX9cLg.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">ARIMA预测—作者</p></figure><h1 id="a183" class="lz ma iq bd mb mc md me mf mg mh mi mj jw mk jx ml jz mm ka mn kc mo kd mp mq bi translated">萨里玛模型</h1><p id="661a" class="pw-post-body-paragraph ld le iq lf b lg mr jr li lj ms ju ll lm mt lo lp lq mu ls lt lu mv lw lx ly ij bi translated">现在，让我们尝试与上面相同的策略，只是让我们使用一个SARIMA模型，以便我们可以考虑季节性。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nn no l"/></div></figure><p id="b8cb" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">看一下模型诊断，我们可以看到与标准ARIMA模型相比的一些显著差异。</p><p id="de90" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated"><strong class="lf ir">标准化残差</strong></p><p id="b130" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">标准化残差在整个图表中更加一致，这意味着数据更接近稳定。</p><p id="780b" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated"><strong class="lf ir">直方图加上KDE估计值</strong></p><p id="895f" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">KDE曲线类似于正态分布(这里没有太大变化)。</p><p id="56c0" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated"><strong class="lf ir">正常Q-Q </strong></p><p id="cc6b" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">与ARIMA诊断图相比，数据点更靠近直线聚集。</p><p id="d9f9" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated"><strong class="lf ir">相关图(ACF图)</strong></p><p id="8b6a" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">灰色区域是置信带，如果数值超出此范围，则它们在统计上是显著的。我们需要这个区域内的所有值。加上季节性因素就做到了这一点！所有点现在都在95%的置信区间内。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nn no l"/></div></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi og"><img src="../Images/7f1a55154e22d985ea2bf3cc61211191.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fBvXsYHeDIAckOmSf9HNAA.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">萨里玛诊断公司</p></figure><p id="50e0" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">然后，我们可以像以前一样，使用该模型预测未来24个月的航空乘客数量。</p><p id="0f1b" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">从下面的图中我们可以看到，这似乎比标准的ARIMA模型要精确得多！</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nn no l"/></div></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nr"><img src="../Images/70beec25bee4dc89adae07c1efac7876.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*iM3UMLNqzS9FEL-Vls8uEg.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">萨里玛预测-作者</p></figure><h1 id="50ac" class="lz ma iq bd mb mc md me mf mg mh mi mj jw mk jx ml jz mm ka mn kc mo kd mp mq bi translated">SARIMAX型号选择</h1><p id="8e55" class="pw-post-body-paragraph ld le iq lf b lg mr jr li lj ms ju ll lm mt lo lp lq mu ls lt lu mv lw lx ly ij bi translated">现在让我们练习加入一个外生变量。在这个例子中，我将简单地添加月份数作为外生变量，但这并不是非常有用，因为这已经通过季节性传递了。</p><p id="2b3e" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">请注意，我们在传递到SARIMAX模型的数据周围添加了额外的方括号。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nn no l"/></div></figure><p id="7cd0" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">我们可以从下面的预测中看到，我们得到了一些非常好看的预测，并且预测置信区间的宽度已经减小。这意味着该模型对其预测更有把握。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nn no l"/></div></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nr"><img src="../Images/29c27e4e448a7a7e408aa26dfd7fa331.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*NE1l_H_B71rEknzYR8KBtg.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">SARIMAX预测-按作者</p></figure><h2 id="6fd2" class="my ma iq bd mb mz na dn mf nb nc dp mj lm nd ne ml lq nf ng mn lu nh ni mp nj bi translated">结束语</h2><p id="9408" class="pw-post-body-paragraph ld le iq lf b lg mr jr li lj ms ju ll lm mt lo lp lq mu ls lt lu mv lw lx ly ij bi translated">请在这里找到这篇文章的代码。</p><p id="94cd" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">用我自己的话来表达想法并实践ARIMA模型是最好的学习方式。希望这篇文章能激励其他人也这样做。</p><p id="c8c0" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">ARIMA模型架构比RNN模型架构提供了更多的可解释性，然而RNN模型架构被认为能产生更准确的预测。现在我已经很好地掌握了ARIMA模型架构，我需要研究LSTM和RNN深度学习模型来预测时间序列数据！</p><h2 id="b0bd" class="my ma iq bd mb mz na dn mf nb nc dp mj lm nd ne ml lq nf ng mn lu nh ni mp nj bi translated"><strong class="ak">延伸阅读</strong></h2><p id="3fb6" class="pw-post-body-paragraph ld le iq lf b lg mr jr li lj ms ju ll lm mt lo lp lq mu ls lt lu mv lw lx ly ij bi translated">在整个笔记本中，我实现并改写了以下来源的想法。谢谢大家的分享！</p><p id="253d" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated"><a class="ae kv" rel="noopener" target="_blank" href="/a-deep-dive-on-arima-models-8900c199ccf">深入探究Arima模型</a>——马特·索斯纳←必读！</p><p id="2f20" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated"><a class="ae kv" href="https://www.kaggle.com/freespirit08/time-series-for-beginners-with-arima/notebook" rel="noopener ugc nofollow" target="_blank">初学ARIMA的时间序列</a> —作者<a class="ae kv" href="https://www.kaggle.com/freespirit08" rel="noopener ugc nofollow" target="_blank"> @Arindam Chatterjee </a></p><p id="1b65" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated"><a class="ae kv" href="https://www.kaggle.com/prashant111/arima-model-for-time-series-forecasting#14.-SARIMA-model-in-python-" rel="noopener ugc nofollow" target="_blank">时间序列预测的Arima模型</a> —作者<a class="ae kv" href="https://www.kaggle.com/prashant111" rel="noopener ugc nofollow" target="_blank"> @Prashant Banerjee </a></p><p id="6825" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated"><a class="ae kv" href="https://www.statsmodels.org/stable/examples/notebooks/generated/stationarity_detrending_adf_kpss.html?highlight=augmented%20dickey%20fuller%20test" rel="noopener ugc nofollow" target="_blank"> StatsModels ADF文档</a></p><p id="0e0f" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated"><a class="ae kv" href="https://machinelearningmastery.com/remove-trends-seasonality-difference-transform-python/" rel="noopener ugc nofollow" target="_blank">去除趋势和季节性文章</a> —作者杰森·布朗利</p><p id="ae3f" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">贾森·布朗利温和地介绍了萨里玛</p></div></div>    
</body>
</html>