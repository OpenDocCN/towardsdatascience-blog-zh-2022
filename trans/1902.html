<html>
<head>
<title>Leukopy — blood cell classification with neural networks</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">白细胞检验——用神经网络进行血细胞分类</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/leukopy-blood-cell-classification-with-neural-networks-2eb2e65441eb#2022-05-02">https://towardsdatascience.com/leukopy-blood-cell-classification-with-neural-networks-2eb2e65441eb#2022-05-02</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="a97c" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">深度学习如何彻底改变血液涂片上的白细胞识别</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/dc2a188504560099e79ef9c9ccf99ed9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*k3oWPNpDC5tvok-04QAKVw.jpeg"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">科林·伯伦斯来自<a class="ae kv" href="https://pixabay.com/?utm_source=link-attribution&amp;utm_medium=referral&amp;utm_campaign=image&amp;utm_content=3876669" rel="noopener ugc nofollow" target="_blank">的图片</a></p></figure><p id="7069" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这篇文章是与<strong class="ky ir">马修·萨拉特和拉勒·拉万博德</strong>合作撰写的。</p><h1 id="2270" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">一、背景</h1><p id="2d28" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">在本文中，我们将对生物学做一点了解，并探索<a class="ae kv" href="https://datascientest.com/deep-learning-definition" rel="noopener ugc nofollow" target="_blank"> <strong class="ky ir">深度学习</strong> </a> <strong class="ky ir">如何帮助对血细胞</strong>进行分类。许多疾病的<strong class="ky ir">诊断</strong>，如传染病、白血病或其他血液疾病，依赖于白细胞亚型的分类，也称为<strong class="ky ir">白细胞</strong>。存在几种识别白细胞的生物技术，但是血液涂片的显微镜检查对于确诊通常是至关重要的。细胞有不同的特征:它们的颗粒、细胞核中的叶数、细胞核的形状、细胞质的颜色。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi mp"><img src="../Images/36892663121728fbdd6bbeb44eb9c535.png" data-original-src="https://miro.medium.com/v2/resize:fit:500/0*H2tS7dIy1l8CHes_"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated"><em class="mq">显示涂片上白细胞特征的图像。作者图片。</em></p></figure><p id="4fff" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">然而，这种技术<strong class="ky ir">容易出错，耗时</strong>且<strong class="ky ir">需要专家</strong>，这就是计算机辅助血液涂片分析得以发展的原因。经典的白细胞分类流水线包括从细胞周围分割出细胞的<strong class="ky ir"/>、特征提取和选择，接着是浅层的<a class="ae kv" href="https://datascientest.com/en/machine-learning-what-is-it-and-why-does-it-change-the-world" rel="noopener ugc nofollow" target="_blank"> <strong class="ky ir">机器学习</strong> </a> <strong class="ky ir"> </strong>分类器。这种工作流程很难从一个实验室推广到另一个实验室，因为染色、协议和采集系统的种类繁多。</p><p id="9f47" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这就是深度学习可以派上用场的地方。</p><p id="c4e9" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">传统上，循环血细胞分为5个主要亚型:血小板、红细胞、粒细胞(嗜碱性粒细胞、嗜中性粒细胞、嗜酸性粒细胞)、单核细胞和淋巴细胞。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi mr"><img src="../Images/2a0d2ea097180b54f6afd72c041f5e6f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/0*2zb1JqGD6n6VLfcU"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">外周白细胞和前体细胞。图片改编自维基百科上的<a class="ae kv" href="https://fr.wikipedia.org/wiki/Fichier:Hematopoiesis_(human)_diagram.png" rel="noopener ugc nofollow" target="_blank"> A.Rad。</a></p></figure><p id="31b4" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们在这里测试了3种类型的深度学习架构，以对11类健康血细胞进行分类:5种主要亚型及其一些祖细胞(中性粒细胞祖细胞)。</p><ul class=""><li id="7ded" class="ms mt iq ky b kz la lc ld lf mu lj mv ln mw lr mx my mz na bi translated">中性粒细胞(分段)— SNE</li><li id="199f" class="ms mt iq ky b kz nb lc nc lf nd lj ne ln nf lr mx my mz na bi translated">嗜酸性粒细胞— EO</li><li id="bda9" class="ms mt iq ky b kz nb lc nc lf nd lj ne ln nf lr mx my mz na bi translated">嗜碱性细胞— BA</li><li id="8cec" class="ms mt iq ky b kz nb lc nc lf nd lj ne ln nf lr mx my mz na bi translated">淋巴细胞——LY</li><li id="2229" class="ms mt iq ky b kz nb lc nc lf nd lj ne ln nf lr mx my mz na bi translated">单核细胞—钼</li><li id="048e" class="ms mt iq ky b kz nb lc nc lf nd lj ne ln nf lr mx my mz na bi translated">血小板——血小板</li><li id="a710" class="ms mt iq ky b kz nb lc nc lf nd lj ne ln nf lr mx my mz na bi translated">成红细胞— ERB</li><li id="74df" class="ms mt iq ky b kz nb lc nc lf nd lj ne ln nf lr mx my mz na bi translated">未成熟(后髓细胞、髓细胞、早幼粒细胞)和带状中性粒细胞— MMY、— MY、— PMY和— BNE</li></ul><h1 id="ca3f" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">二— EDA</h1><h2 id="9c35" class="ng lt iq bd lu nh ni dn ly nj nk dp mc lf nl nm me lj nn no mg ln np nq mi nr bi translated">a.数据分布</h2><p id="4889" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">我们使用了可公开获得的<strong class="ky ir"> 3个数据集</strong>:来自<a class="ae kv" href="https://www.ncbi.nlm.nih.gov/pmc/articles/PMC7182702/" rel="noopener ugc nofollow" target="_blank">巴塞罗纳</a>医院诊所的核心实验室，来自<a class="ae kv" href="https://wiki.cancerimagingarchive.net/pages/viewpage.action?pageId=61080958" rel="noopener ugc nofollow" target="_blank">慕尼黑</a>大学医院，以及来自拉什特拉齐医院、古尔哈克实验室、Shahr-e-Qods实验室和位于德黑兰的Takht-e Tavous实验室(<a class="ae kv" href="https://raabindata.com/free-data/" rel="noopener ugc nofollow" target="_blank"> Raabin-WBC </a>数据集)。结合这些数据集，在3个不同的系统上获得了来自MGG和姬姆萨染色的血液涂片的大约50，0 00个单细胞图像。除了少数被诊断患有白血病的患者外，大多数患者被认为是健康的。</p><p id="5d43" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">让我们做一些EDA来检查我们的数据。正如你在下面的柱状图中看到的，<strong class="ky ir">分段的中性粒细胞</strong>(中性粒细胞成熟的最高级阶段，简称SNE)在Munich数据集中<strong class="ky ir">被过度代表</strong>。<strong class="ky ir">淋巴细胞</strong>群体在Raabin和Munich数据集中占<strong class="ky ir">多数</strong>。在巴塞罗纳数据集中，这些类更加平衡<strong class="ky ir"/>。血小板只存在于后面的数据集中。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ns nt l"/></div></figure><h2 id="9b76" class="ng lt iq bd lu nh ni dn ly nj nk dp mc lf nl nm me lj nn no mg ln np nq mi nr bi translated">b.UMAP与降维</h2><p id="f31c" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">我们选择使用UMAP进行降维，因为它保留了数据中的局部和大部分全局结构。观察投射到3个主要部分的数据，我们可以看到<strong class="ky ir">可变性</strong>主要由数据的<strong class="ky ir">来源</strong>来解释，这可能是由于染色和光度变化的差异(参见我们的<a class="ae kv" href="https://studio.datascientest.com/project/leukopy/" rel="noopener ugc nofollow" target="_blank">流线</a>)。驱动聚集的另一个主要变量似乎是细胞的尺寸。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ns nt l"/></div></figure><p id="fa0a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们的数据是多样化的，可以构成一个有趣的数据集来建立分类模型。</p><h1 id="c0e5" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">III —模型化</h1><p id="d0b5" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">为了对图像进行分类，我们测试了<strong class="ky ir"> 3种不同的架构</strong>，在我们的<a class="ae kv" href="https://studio.datascientest.com/project/leukopy/" rel="noopener ugc nofollow" target="_blank"> Streamlit应用</a> : <strong class="ky ir"> VGG16耦合到SVM、VGG19和ViT </strong>中有更详细的描述。我们的基线模型是一个逻辑回归模型，其显示的准确度约为<strong class="ky ir">65–70%</strong>。</p><h2 id="b3b6" class="ng lt iq bd lu nh ni dn ly nj nk dp mc lf nl nm me lj nn no mg ln np nq mi nr bi translated">a.迁移学习和微调</h2><p id="0634" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">我们对在ImageNet上训练的模型的所有神经网络使用了迁移学习，并且稍后对每个模型详细训练了或多或少的层。</p><h2 id="c3d2" class="ng lt iq bd lu nh ni dn ly nj nk dp mc lf nl nm me lj nn no mg ln np nq mi nr bi translated">b.预处理和规范化</h2><p id="97b5" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">我们的数据集分为训练集、验证集和测试集(80%、10%、10%)。<strong class="ky ir">使用数据扩充</strong>以减少过度拟合并提高概括能力。训练数据流通过以下管道:我们调整图片的大小和形状，然后应用一些增强(旋转、轴对称、剪切)。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nu"><img src="../Images/f8f3e42c8317d44e1bc6495465562c6e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*nCjTR9HL_tTQn-tMAiLlOQ.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated"><em class="mq">图片由作者提供。</em></p></figure><p id="3880" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">此外，我们在模型训练期间实施了以下内容:</p><ul class=""><li id="850d" class="ms mt iq ky b kz la lc ld lf mu lj mv ln mw lr mx my mz na bi translated"><strong class="ky ir">提前停止</strong>预定义耐心回调:防止过拟合。</li><li id="0258" class="ms mt iq ky b kz nb lc nc lf nd lj ne ln nf lr mx my mz na bi translated">降低<strong class="ky ir">高原学习率</strong>:加速训练和收敛。</li></ul><p id="9585" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">最后，我们在训练中使用了<strong class="ky ir">类权重</strong>:当错误发生在低群体类(如PMY或BA)上时，我们惩罚更多:<code class="fe nv nw nx ny b">(1/class_count) * (total_count/2)</code>。</p><h2 id="d8ae" class="ng lt iq bd lu nh ni dn ly nj nk dp mc lf nl nm me lj nn no mg ln np nq mi nr bi translated">c.模特们</h2><p id="a271" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated"><em class="nz"> 1)在分段细胞上具有SVM的VGG16】</em></p><p id="aec8" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">使用VGG16结合SVM，我们的目的是研究<strong class="ky ir">背景过滤</strong>对模型精度的影响。我们使用VGG16网络进行特征提取，连接到支持向量机进行分类。下图所示的背景过滤或细胞分割过程是基于这样的假设，即细胞位于图像的中心附近，并且比图像的其他部分更清晰。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oa"><img src="../Images/dec51149bebe8e456f0d86f8bb4cafb1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bMCjH-J_tkUwS2hGdxy2Jw.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">背景过滤过程中涉及的步骤。<em class="mq">图片作者。</em></p></figure><p id="ea47" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">网络VGG16顶部的3个完全连接的层没有作为基础模型包括在内，基础模型由以下层完成:GlobalAveragePooling2D、密集层(1024)、速率为0.2的丢弃层、密集层(512)、随后是另一个丢弃层以及最后是密集分类层。训练分3个步骤完成:训练所有层，然后训练除最后4层之外的所有层，最后定义中间层模型，包括基础模型、GlobalAveragePooling2D层和密集层(1024)。为训练数据计算中间模型的输出，并用于训练SVM。</p><p id="d72e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir"> F1得分在过滤前后没有差异</strong>。换句话说，该模型查找单元的信息，而不管其背景。</p><p id="949b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><em class="nz"> 2) VGG19 </em></p><p id="39f1" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">对于VGG19，最后一个卷积块进行了微调，分类块层被替换为我们自己的自定义块。应用了特定的VGG19预处理，即RGB通道的反转和数据的归一化。</p><p id="0eb0" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">性能看起来不错，我们在测试数据上获得了大约94%的<strong class="ky ir">全局准确率，但重要的是要记住测试数据和训练数据来自相同的来源(来自Barcelona、Munich和Raabin数据集的混合)。</strong></p><p id="44a3" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><em class="nz"> 3)视觉变压器</em></p><p id="6e6c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">视觉变形金刚(ViT)已经改变了计算机视觉的领域。我们选择从ViT-Keras库中测试一个基本的ViT-b16。在ViT中，图像被切割成小片(对于ViT-b16为16 x16像素),这些小片被展平并通过位置嵌入来连接。然后，这些投影被送入经过转换的编码器层，之后是一个多层感知器(MLP ),有点像解码器。最终MLP负责人负责最终分类。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nu"><img src="../Images/b5cce8c3af31fbeaaea67bc85274395d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*co8SS1VPpTXxoL6mfZGQeA.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated"><em class="mq">图片作者。</em></p></figure><p id="e961" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">对于这些模型，我们添加了一个<strong class="ky ir">标签平滑</strong>作为额外的正则化，试图考虑标签误差。我们还选择测试<strong class="ky ir">修正的Adam优化器</strong>，它对学习速率不太敏感，更具普遍性。</p><p id="af6d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">该模型的表现稍逊于VGG19，在验证和测试数据上的<strong class="ky ir">全局准确率为92%</strong>。</p><h1 id="7ce8" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">四——结果分析</h1><p id="58d4" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">以下是3个模型的F1表现——每个类别的分数和整体准确度:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ob nt l"/></div></figure><h2 id="e9b3" class="ng lt iq bd lu nh ni dn ly nj nk dp mc lf nl nm me lj nn no mg ln np nq mi nr bi translated">a.细胞成熟和标记</h2><p id="d2f4" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">大多数图片被正确分类(F1 &gt; 0.95)，除了不同种类的中性粒细胞。<strong class="ky ir">混淆矩阵</strong>揭示了3个模型<strong class="ky ir">混淆了不同种类的中性粒细胞</strong>(成熟的SNE和不成熟的PMY、MMY、MY、BNE)，如下图所示(用VGG19获得的结果)，其中<strong class="ky ir">错误分类图片的最大百分比用红色圈出</strong>。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oc"><img src="../Images/ded98b1c442ee60f3b3512e84c804e28.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vFd-gsAKXIX6LJwykGgjNA.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">作者图片。</p></figure><p id="1f5b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">但是为什么呢？？？为了理解，我们需要援引生物学:PMY、米、MMY、BNE和SNE是中性粒细胞成熟过程中的步骤。这个过程<strong class="ky ir">是一个连续的过程</strong>(例如，细胞核从马铃薯形状慢慢演变成多叶形)，因此我们发现<strong class="ky ir">一些细胞具有两个连续生长步骤的特征</strong>是可信的。模型必须选择一个类，然后我们可以得到分类错误。</p><p id="1508" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">出于同样的原因，一些贴标机难以达成一致，可能会出现<strong class="ky ir">可能的贴标错误</strong>(下图) :</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi od"><img src="../Images/4c3c416f66ba3abaad74a1e7f672063e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*VMz829FH8-Lisq0-"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">两张左图有着共同的显著特征(例如，相同的细胞核“豆”形、细胞质颗粒)，但分别被标记为PMY和MMY。第三张照片可能是“年轻的”BNE，或者是“老的”MMY，因为它的核呈C形。作者图片。</p></figure><p id="b4a4" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">给这样的图片贴标签是一项<strong class="ky ir">复杂的工作</strong>，需要训练有素的专家，他们不会出错。</p><h2 id="1323" class="ng lt iq bd lu nh ni dn ly nj nk dp mc lf nl nm me lj nn no mg ln np nq mi nr bi translated">b.可解释性</h2><p id="089d" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">现在，我们可以更进一步(✪ワ✪)ノʸᵉᵃʰᵎ和调查我们的模型在图片中看什么，然后再将其分配给一个类。对于VGG的模型，我们使用Grad-CAM。对于ViT，我们使用了注意力地图。这两种技术在图片上突出显示了给定预测的<strong class="ky ir">最重要的特征</strong>。</p><p id="cd1c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们在我们的<a class="ae kv" href="https://studio.datascientest.com/project/leukopy/" rel="noopener ugc nofollow" target="_blank"> Streamlit应用</a>中加载了一个来自VGG19中Raabin数据集的嗜酸性粒细胞(EO ),下面是它的截图:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oe"><img src="../Images/c1259b82e27b7cc953333f3e6de26099.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*E-PSW9tnBnoLg-YD"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">作者图片。</p></figure><p id="accc" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">EO的主要特征是一个分节的<strong class="ky ir">细胞核</strong>和细胞质中的<strong class="ky ir">粉红色颗粒</strong>。Grad-CAM透露，当他试图确定图片是否为EO时，模型会搜索粉红色颗粒。ViT注意力图似乎稍微更侧重于细胞核，但也考虑到了颗粒。对于其他类，Grad-CAM和注意力图更难解释，但Grad-CAM和注意力图显示<strong class="ky ir">模型聚焦于图片中心的细胞</strong>，而不是红细胞背景。</p><h1 id="c29a" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">限制:验证集之外发生的事情。</h1><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi of"><img src="../Images/9b8507068c90bf5b72a2b38e48ab20ca.png" data-original-src="https://miro.medium.com/v2/resize:fit:780/0*kvOUsCE-MTg3bB9O"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">VGG19的Grad-cam的四张图片来自Google Images。作者图片。</p></figure><p id="11cc" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们已经测试了不是来自Raabin、Barcelona和Munich数据集的图片。例如，VGG19能够准确分类一些形状和色彩非常相似的图片，如上图中的四张图片，这些图片是在<strong class="ky ir"> Google Images </strong>上获得的。</p><p id="ac3b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">然而，在一些与训练数据集非常不同的数据集上，如来自中国江西泰康科技有限公司的<a class="ae kv" href="https://github.com/zxaoyou/segmentation_WBC" rel="noopener ugc nofollow" target="_blank"> WBC_segmentation </a>，该模型不幸失败(全局精度约为8 %)。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi og"><img src="../Images/a5c1e721ad791685a611c34250d90dec.png" data-original-src="https://miro.medium.com/v2/resize:fit:240/0*s731hoCDfHKgFrhA"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">来自中国江西泰康科技有限公司<a class="ae kv" href="https://github.com/zxaoyou/segmentation_WBC" rel="noopener ugc nofollow" target="_blank"> WBC图像数据集</a>的图像示例。</p></figure><p id="f066" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这些图像是由不同的显微镜光学系统拍摄的，血液涂片经过实验室特定的染色处理，最重要的是，与训练数据集相比，图片分辨率较低。因此，可以取得进一步的进展。</p><h1 id="b635" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">六、结论</h1><p id="37de" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">我们的模型在分类来自3个不同数据集的11类血细胞图片方面做得很好，但<strong class="ky ir">许多改进是可能的</strong>。此外，我们已经看到<strong class="ky ir">良好的全球指标可以隐藏重要的问题</strong>，例如，模型的能力<strong class="ky ir">概括</strong>完全不同的数据集。以下是一些潜在的改进:</p><h2 id="b165" class="ng lt iq bd lu nh ni dn ly nj nk dp mc lf nl nm me lj nn no mg ln np nq mi nr bi translated">a.增加多样性:增加和变化。</h2><ul class=""><li id="8d77" class="ms mt iq ky b kz mk lc ml lf oh lj oi ln oj lr mx my mz na bi translated">更多<strong class="ky ir">不同来源或类型的图片</strong>:包括来自其他机构的图像(不同的采集系统，不同的染色，亮度等……)将<strong class="ky ir">允许更平衡的数据集</strong>(更少的SNE，和LY，<strong class="ky ir">更不成熟的</strong>)和<strong class="ky ir">更好的模型概括新数据的能力。</strong></li><li id="2d43" class="ms mt iq ky b kz nb lc nc lf nd lj ne ln nf lr mx my mz na bi translated"><strong class="ky ir">扩充我们的数据</strong>:我们可以尝试模仿现实生活中的组织学染色，改变实际染色或者使用<strong class="ky ir"> GANs </strong>(生成对抗网络)或者<strong class="ky ir"> VAE </strong>(可变自动编码器)来制作新的图片。</li><li id="290e" class="ms mt iq ky b kz nb lc nc lf nd lj ne ln nf lr mx my mz na bi translated">然后，我们可以考虑放弃迁移学习方法，并考虑<strong class="ky ir">在血细胞图片上对我们的模型</strong>进行完整的训练。</li></ul><h2 id="5e3b" class="ng lt iq bd lu nh ni dn ly nj nk dp mc lf nl nm me lj nn no mg ln np nq mi nr bi translated">b.改进标签:使用生物学定义。</h2><p id="8d79" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">我们<strong class="ky ir">需要</strong>用<strong class="ky ir">自信标注</strong>的图片来训练模特。一种选择是独立的病理学家专家之间的交叉验证过程，就像Raabin项目中所做的那样，但这是耗时和资源密集型的，因此自我监督或半监督学习可能是更合理的替代方案。</p><p id="d857" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">另一种选择是使用<strong class="ky ir">转录因子和颗粒蛋白作为标记</strong>。这可以通过与抗体共染色或在染色前使用流式细胞仪标记来完成。</p><h2 id="c03e" class="ng lt iq bd lu nh ni dn ly nj nk dp mc lf nl nm me lj nn no mg ln np nq mi nr bi translated">c.物体检测:完全使用。</h2><p id="9280" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">我们只处理了整个过程的一个步骤<strong class="ky ir">:我们使用分段的图片，只有一个单元格在中间。<strong class="ky ir">这项工作的一个可能扩展可能涉及在大规模血液涂片图片上的对象</strong> (=血细胞)<strong class="ky ir"/>(例如，使用YoloV5)检测，以便生成我们在该应用程序中使用的那种图片。</strong></p><p id="00fd" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们希望你喜欢阅读我们的项目，如果你想取得联系，不要犹豫！</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi ok"><img src="../Images/375f85c1e3a15bb15b6002289e1f0143.png" data-original-src="https://miro.medium.com/v2/resize:fit:600/format:webp/1*N0-AtBpqXD41cH6RLpFmzw.jpeg"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">图片由维基共享资源的马克格顿提供。</p></figure></div></div>    
</body>
</html>