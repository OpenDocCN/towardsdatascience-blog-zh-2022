<html>
<head>
<title>Jupyter Notebook as a Function: Create Reusable Notebooks with Papermill</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Jupyter 笔记本的功能:使用 Papermill 创建可重复使用的笔记本</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/jupyter-notebook-as-a-function-create-reusable-notebooks-with-papermill-8f9bea5b9727#2022-03-21">https://towardsdatascience.com/jupyter-notebook-as-a-function-create-reusable-notebooks-with-papermill-8f9bea5b9727#2022-03-21</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="5d91" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated"><em class="ki">如何使用 Papermill 创建参数化 Jupyter 笔记本</em></h2></div><figure class="kk kl km kn gt ko gh gi paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gh gi kj"><img src="../Images/01530e618d128b10e4dfb4469e7f380b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*_2d9lnvXe4WFQE0V"/></div></div><p class="kv kw gj gh gi kx ky bd b be z dk translated">由<a class="ae kz" href="https://unsplash.com/@krystagrusseck?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Christa Dodoo </a>在<a class="ae kz" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure><h1 id="f187" class="la lb it bd lc ld le lf lg lh li lj lk jz ll ka lm kc ln kd lo kf lp kg lq lr bi translated">介绍</h1><p id="548d" class="pw-post-body-paragraph ls lt it lu b lv lw ju lx ly lz jx ma mb mc md me mf mg mh mi mj mk ml mm mn im bi translated">在编程中，函数是将代码模块化为独立的、有组织的、可重用的块的方法，用于执行特定的任务。函数通常接受输入数据，处理数据，并输出结果。将代码编写为函数的一些优点是:</p><ul class=""><li id="1fca" class="mo mp it lu b lv mq ly mr mb ms mf mt mj mu mn mv mw mx my bi translated">提高代码可重用性</li><li id="06e4" class="mo mp it lu b lv mz ly na mb nb mf nc mj nd mn mv mw mx my bi translated">把问题分解成更小的可解决的部分</li><li id="e88c" class="mo mp it lu b lv mz ly na mb nb mf nc mj nd mn mv mw mx my bi translated">保持更清晰的变量名称空间</li><li id="4763" class="mo mp it lu b lv mz ly na mb nb mf nc mj nd mn mv mw mx my bi translated">能够孤立地测试代码的一小部分</li></ul><p id="f4d1" class="pw-post-body-paragraph ls lt it lu b lv mq ju lx ly mr jx ma mb ne md me mf nf mh mi mj ng ml mm mn im bi translated">在本文中，我们将研究如何参数化我们的 Jupyter 笔记本，使它像一个函数一样工作。</p><p id="4aff" class="pw-post-body-paragraph ls lt it lu b lv mq ju lx ly mr jx ma mb ne md me mf nf mh mi mj ng ml mm mn im bi translated">等等，但是为什么？</p><h1 id="0690" class="la lb it bd lc ld le lf lg lh li lj lk jz ll ka lm kc ln kd lo kf lp kg lq lr bi translated">动机</h1><p id="7dd6" class="pw-post-body-paragraph ls lt it lu b lv lw ju lx ly lz jx ma mb mc md me mf mg mh mi mj mk ml mm mn im bi translated">假设我们从事房地产业务，用户在过去几年中有一些与房地产销售相关的问题。我们将使用新加坡住房转售价格数据集[1]，该数据集包含 HDB 住房发展局的转售房屋交易记录。这是数据集的一个样本。</p><figure class="kk kl km kn gt ko gh gi paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gh gi nh"><img src="../Images/b7c24d5e97a569032b07a9249a17707c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*2BzscYszaeDu62jq"/></div></div><p class="kv kw gj gh gi kx ky bd b be z dk translated">作者图片</p></figure><p id="274d" class="pw-post-body-paragraph ls lt it lu b lv mq ju lx ly mr jx ma mb ne md me mf nf mh mi mj ng ml mm mn im bi translated">商业用户有兴趣回答 2017 年 1 月<code class="fe ni nj nk nl b">month</code>至 2021 年 12 月<code class="fe ni nj nk nl b">town</code>中心区的以下问题:</p><ol class=""><li id="0e92" class="mo mp it lu b lv mq ly mr mb ms mf mt mj mu mn nm mw mx my bi translated"><code class="fe ni nj nk nl b">month</code>全国销售数量</li><li id="53b9" class="mo mp it lu b lv mz ly na mb nb mf nc mj nd mn nm mw mx my bi translated"><code class="fe ni nj nk nl b">resale_price</code>横跨<code class="fe ni nj nk nl b">month</code></li><li id="beb2" class="mo mp it lu b lv mz ly na mb nb mf nc mj nd mn nm mw mx my bi translated">不同<code class="fe ni nj nk nl b">flat_type</code>的<code class="fe ni nj nk nl b">resale_price</code>分布</li></ol><p id="67b2" class="pw-post-body-paragraph ls lt it lu b lv mq ju lx ly mr jx ma mb ne md me mf nf mh mi mj ng ml mm mn im bi translated">我们导入必要的包，读取数据，并将数据过滤到由<code class="fe ni nj nk nl b">town</code>和<code class="fe ni nj nk nl b">date</code>指定的正确子集。有了正确的数据子集，我们现在可以绘制相关的图表来回答这些问题。</p><figure class="kk kl km kn gt ko"><div class="bz fp l di"><div class="nn no l"/></div><p class="kv kw gj gh gi kx ky bd b be z dk translated">作者笔记本</p></figure><p id="0a15" class="pw-post-body-paragraph ls lt it lu b lv mq ju lx ly mr jx ma mb ne md me mf nf mh mi mj ng ml mm mn im bi translated">全部完成！业务用户要求的<code class="fe ni nj nk nl b">town</code>“中心区”报告准备就绪。</p><p id="605f" class="pw-post-body-paragraph ls lt it lu b lv mq ju lx ly mr jx ma mb ne md me mf nf mh mi mj ng ml mm mn im bi translated"><em class="np">如果业务用户为不同的</em> <code class="fe ni nj nk nl b"><em class="np">town</em></code> <em class="np">请求相同的信息怎么办？</em></p><p id="1b76" class="pw-post-body-paragraph ls lt it lu b lv mq ju lx ly mr jx ma mb ne md me mf nf mh mi mj ng ml mm mn im bi translated">很简单，让我们找到并替换它！我们只需找到<code class="fe ni nj nk nl b">town</code>的所有旧值并用新值替换它们，运行笔记本，并保存笔记本的副本。</p><p id="a4c9" class="pw-post-body-paragraph ls lt it lu b lv mq ju lx ly mr jx ma mb ne md me mf nf mh mi mj ng ml mm mn im bi translated"><em class="np">如果业务用户对每个可用的</em> <code class="fe ni nj nk nl b"><em class="np">town </em></code> <em class="np">请求相同的信息，该怎么办？</em></p><p id="b02c" class="pw-post-body-paragraph ls lt it lu b lv mq ju lx ly mr jx ma mb ne md me mf nf mh mi mj ng ml mm mn im bi translated">共有 29 个镇；用 29 次手动“查找和替换”的方法可能不是个好主意！这就是造纸厂派上用场的地方。</p><h1 id="eb59" class="la lb it bd lc ld le lf lg lh li lj lk jz ll ka lm kc ln kd lo kf lp kg lq lr bi translated">造纸厂</h1><blockquote class="nq nr ns"><p id="c51e" class="ls lt np lu b lv mq ju lx ly mr jx ma nt ne md me nu nf mh mi nv ng ml mm mn im bi translated"><em class="it"> Papermill 是一个开源的 python 包，参数化并执行 Jupyter 笔记本。</em></p></blockquote><p id="1e60" class="pw-post-body-paragraph ls lt it lu b lv mq ju lx ly mr jx ma mb ne md me mf nf mh mi mj ng ml mm mn im bi translated">参数化是通过从代码中获取值并将其作为该函数的参数来概括代码块以使其可重用的过程。我们将参数化整个 Jupyter 笔记本，而不是参数化一小块代码。这使得我们可以使用不同的参数轻松运行同一台笔记本电脑。让我们来看一个例子。</p><h2 id="34ff" class="nw lb it bd lc nx ny dn lg nz oa dp lk mb ob oc lm mf od oe lo mj of og lq oh bi translated">1.设置环境</h2><pre class="kk kl km kn gt oi nl oj ok aw ol bi"><span id="0acf" class="nw lb it nl b gy om on l oo op">pip install papermill</span></pre><p id="82c7" class="pw-post-body-paragraph ls lt it lu b lv mq ju lx ly mr jx ma mb ne md me mf nf mh mi mj ng ml mm mn im bi translated">这是项目文件结构:</p><figure class="kk kl km kn gt ko gh gi paragraph-image"><div class="gh gi oq"><img src="../Images/a82327e4791b601ef352b38bf7035d49.png" data-original-src="https://miro.medium.com/v2/resize:fit:538/0*mYTJ3VmNHqLPLXIR"/></div><p class="kv kw gj gh gi kx ky bd b be z dk translated">作者图片</p></figure><ul class=""><li id="b0d4" class="mo mp it lu b lv mq ly mr mb ms mf mt mj mu mn mv mw mx my bi translated"><code class="fe ni nj nk nl b">data</code>:包含输入数据</li><li id="3d77" class="mo mp it lu b lv mz ly na mb nb mf nc mj nd mn mv mw mx my bi translated"><code class="fe ni nj nk nl b">product</code>:存储已执行的 Jupyter 笔记本的副本</li><li id="4ee5" class="mo mp it lu b lv mz ly na mb nb mf nc mj nd mn mv mw mx my bi translated"><code class="fe ni nj nk nl b">tasks</code>:包含 Jupyter 笔记本<code class="fe ni nj nk nl b">template.ipynb</code>和<code class="fe ni nj nk nl b">driver.ipynb</code></li><li id="bddc" class="mo mp it lu b lv mz ly na mb nb mf nc mj nd mn mv mw mx my bi translated"><code class="fe ni nj nk nl b">template.ipynb</code>:这是数据处理和可视化代码的位置。它类似于我们之前看到的代码</li><li id="77a9" class="mo mp it lu b lv mz ly na mb nb mf nc mj nd mn mv mw mx my bi translated"><code class="fe ni nj nk nl b">driver.ipynb</code>:这是包含实际参数集的笔记本，Papermill 将从该笔记本中将参数单元注入<code class="fe ni nj nk nl b">template.ipynb</code>，运行并保存一份副本。</li></ul><h2 id="68d5" class="nw lb it bd lc nx ny dn lg nz oa dp lk mb ob oc lm mf od oe lo mj of og lq oh bi translated">2.将笔记本参数化</h2><p id="d952" class="pw-post-body-paragraph ls lt it lu b lv lw ju lx ly lz jx ma mb mc md me mf mg mh mi mj mk ml mm mn im bi translated">让我们检查一下代码中哪些值可以参数化。我们将参数化笔记本命名为<code class="fe ni nj nk nl b">template.ipynb</code>。一般来说，如果我们预计到未来的变化，我们可以参数化任何值。一种简单的开始方式是检查哪些列是被过滤的数据帧，哪些值是硬编码的。</p><pre class="kk kl km kn gt oi nl oj ok aw ol bi"><span id="d206" class="nw lb it nl b gy om on l oo op">df = pd.read_csv(<strong class="nl iu">'data/resale-flat-prices.csv'</strong>)<br/>df['date'] = pd.to_datetime(df['month'], format = '%Y-%m')<br/>df = df.loc[(<strong class="nl iu">df['town'] == 'CENTRAL AREA'</strong>) &amp; (<strong class="nl iu">df['date'].between('2017-01-01', '2021-12-01')</strong>)]</span></pre><p id="e947" class="pw-post-body-paragraph ls lt it lu b lv mq ju lx ly mr jx ma mb ne md me mf nf mh mi mj ng ml mm mn im bi translated">数据帧正被<code class="fe ni nj nk nl b">town</code>和<code class="fe ni nj nk nl b">date</code>过滤，因此我们可以用变量代替<code class="fe ni nj nk nl b">town</code>和<code class="fe ni nj nk nl b">date</code>值，而不是硬编码。如果我们预计数据的文件路径会发生变化，我们也可以选择将其参数化。</p><p id="af1b" class="pw-post-body-paragraph ls lt it lu b lv mq ju lx ly mr jx ma mb ne md me mf nf mh mi mj ng ml mm mn im bi translated">这是另一部分可以参数化的代码。我们已经将<code class="fe ni nj nk nl b">town</code>值硬编码到图表的标题中，我们可以用一个变量来替换它。</p><pre class="kk kl km kn gt oi nl oj ok aw ol bi"><span id="c60d" class="nw lb it nl b gy om on l oo op">sales_over_time = df.groupby('date', as_index = False).agg({'resale_price':'count'}).rename(columns = {'resale_price':'resale_count'})</span><span id="5f38" class="nw lb it nl b gy or on l oo op">fig, ax = plt.subplots(figsize = (10, 5)) ax = sns.lineplot(data = sales_over_time, x = 'date', y = 'resale_count') ax.set_xlabel('Month')<br/>ax.set_ylabel('Sales Transaction')<br/>ax.set_title('Number of Sales Over Time - <strong class="nl iu">Central Area</strong>')<br/>plt.show()</span></pre><figure class="kk kl km kn gt ko gh gi paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gh gi os"><img src="../Images/59e59205229ca8e2e297379cbe3901c2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ImhWkvMn84leLT4uDtv83g.png"/></div></div><p class="kv kw gj gh gi kx ky bd b be z dk translated">作者图片</p></figure><p id="41bc" class="pw-post-body-paragraph ls lt it lu b lv mq ju lx ly mr jx ma mb ne md me mf nf mh mi mj ng ml mm mn im bi translated">这是参数化前后代码的样子。用变量替换<code class="fe ni nj nk nl b">town</code>和<code class="fe ni nj nk nl b">date</code>的硬编码值。</p><pre class="kk kl km kn gt oi nl oj ok aw ol bi"><span id="a313" class="nw lb it nl b gy om on l oo op"><strong class="nl iu"># before</strong><br/>df = pd.read_csv('<strong class="nl iu">data/resale-flat-prices.csv</strong>')<br/>df['date'] = pd.to_datetime(df['month'], format = '%Y-%m')<br/>df = df.loc[(df['town'] == '<strong class="nl iu">CENTRAL AREA</strong>') &amp; (df['date'].between('<strong class="nl iu">2017-01-01</strong>', '<strong class="nl iu">2021-12-01</strong>'))]</span><span id="d036" class="nw lb it nl b gy or on l oo op"><strong class="nl iu"># after</strong><br/>df = pd.read_csv(<strong class="nl iu">input_path</strong>)<br/>df['date'] = pd.to_datetime(df['month'], format = '%Y-%m')<br/>df = df.loc[(df['town'] == <strong class="nl iu">town</strong>) &amp; (df['date'].between(<strong class="nl iu">start_date</strong>, <strong class="nl iu">end_date</strong>))]</span></pre><p id="f610" class="pw-post-body-paragraph ls lt it lu b lv mq ju lx ly mr jx ma mb ne md me mf nf mh mi mj ng ml mm mn im bi translated">图标题也使用 f 字符串参数化。</p><pre class="kk kl km kn gt oi nl oj ok aw ol bi"><span id="590a" class="nw lb it nl b gy om on l oo op"><strong class="nl iu"># before</strong><br/>..<br/>ax.set_title('Number of Sales Over Time - <strong class="nl iu">Central Area</strong>')</span><span id="c319" class="nw lb it nl b gy or on l oo op"><strong class="nl iu"># after</strong><br/>..<br/>ax.set_title(f'Number of Sales Over Time - {<strong class="nl iu">town.title()</strong>}')</span></pre><p id="94b5" class="pw-post-body-paragraph ls lt it lu b lv mq ju lx ly mr jx ma mb ne md me mf nf mh mi mj ng ml mm mn im bi translated">为笔记本创建了以下参数:<code class="fe ni nj nk nl b">input_path</code>、<code class="fe ni nj nk nl b">town</code>、<code class="fe ni nj nk nl b">start_date</code>、<code class="fe ni nj nk nl b">end_date</code>，这就是现在<code class="fe ni nj nk nl b">template.ipynb</code>的样子。</p><figure class="kk kl km kn gt ko"><div class="bz fp l di"><div class="nn no l"/></div><p class="kv kw gj gh gi kx ky bd b be z dk translated">作者代码</p></figure><p id="43fd" class="pw-post-body-paragraph ls lt it lu b lv mq ju lx ly mr jx ma mb ne md me mf nf mh mi mj ng ml mm mn im bi translated">没有给任何变量<code class="fe ni nj nk nl b">input_path</code>、<code class="fe ni nj nk nl b">town</code>、<code class="fe ni nj nk nl b">start_date</code>、<code class="fe ni nj nk nl b">end_date</code>赋值。如果此笔记本电脑是一次性或一次性使用，则应包括以下单元格。</p><pre class="kk kl km kn gt oi nl oj ok aw ol bi"><span id="19ed" class="nw lb it nl b gy om on l oo op"># notebook cell<br/># Parameters<br/>input_path = "../data/resale-flat-prices.csv"<br/>start_date = "2017-01-01"<br/>end_date = "2021-01-01"<br/>town = "CENTRAL AREA"</span></pre><p id="150b" class="pw-post-body-paragraph ls lt it lu b lv mq ju lx ly mr jx ma mb ne md me mf nf mh mi mj ng ml mm mn im bi translated">在每次运行之前，我们会手动更改参数值，以适应业务用户的请求。</p><p id="313c" class="pw-post-body-paragraph ls lt it lu b lv mq ju lx ly mr jx ma mb ne md me mf nf mh mi mj ng ml mm mn im bi translated">然而，这种方法不适用于具有大量参数集的情况。在我们的例子中，有 29 个城镇，手动改变<code class="fe ni nj nk nl b">town</code>值 29 次是不可行的。我们需要一种方法来以自动化的方式将不同的参数集传递给<code class="fe ni nj nk nl b">template.ipynb</code>，这由<code class="fe ni nj nk nl b">driver.ipynb</code>负责。</p><h2 id="57e8" class="nw lb it bd lc nx ny dn lg nz oa dp lk mb ob oc lm mf od oe lo mj of og lq oh bi translated">3.创建<code class="fe ni nj nk nl b">driver.ipynb</code></h2><p id="499c" class="pw-post-body-paragraph ls lt it lu b lv lw ju lx ly lz jx ma mb mc md me mf mg mh mi mj mk ml mm mn im bi translated">这就是奇迹发生的地方。为了便于说明，我们只为 4 个不同的城镇生成报告，为每个城镇创建一个参数字典，并将其传递给 Papermill 的<code class="fe ni nj nk nl b">.execute_notebook()</code>方法。</p><pre class="kk kl km kn gt oi nl oj ok aw ol bi"><span id="b180" class="nw lb it nl b gy om on l oo op"># driver.ipynb<br/>import papermill as pm</span><span id="1351" class="nw lb it nl b gy or on l oo op"># generate report for each town</span><span id="b0f9" class="nw lb it nl b gy or on l oo op">towns = ['CENTRAL AREA', 'MARINE PARADE', 'WOODLANDS', 'QUEENSTOWN']</span><span id="a932" class="nw lb it nl b gy or on l oo op">for town in towns:</span><span id="1d7c" class="nw lb it nl b gy or on l oo op">    params = {'input_path': '../data/resale-flat-prices.csv',<br/>            'start_date': '2017-01-01',<br/>            'end_date': '2021-01-01',<br/>            'town': town}</span><span id="fd87" class="nw lb it nl b gy or on l oo op">    <br/>    nb_output = pm.execute_notebook('template.ipynb', f'../products/report_{town.title()}.ipynb', parameters = params)</span></pre><p id="628c" class="pw-post-body-paragraph ls lt it lu b lv mq ju lx ly mr jx ma mb ne md me mf nf mh mi mj ng ml mm mn im bi translated"><code class="fe ni nj nk nl b">.execute_notebook()</code>的参数为:</p><ul class=""><li id="eb27" class="mo mp it lu b lv mq ly mr mb ms mf mt mj mu mn mv mw mx my bi translated"><code class="fe ni nj nk nl b">input_path</code>:(字符串或路径)我们打算执行的输入 Jupyter 记事本的路径，在我们的例子中是<code class="fe ni nj nk nl b">template.ipynb</code>。</li><li id="123d" class="mo mp it lu b lv mz ly na mb nb mf nc mj nd mn mv mw mx my bi translated"><code class="fe ni nj nk nl b">output_path</code> : (str 或 path)保存已执行 Jupyter 笔记本的路径。我们保存已执行的笔记本，并连接城镇名称。</li><li id="53e3" class="mo mp it lu b lv mz ly na mb nb mf nc mj nd mn mv mw mx my bi translated"><code class="fe ni nj nk nl b">parameters</code>:<code class="fe ni nj nk nl b">input_path</code>中传递给 Jupyter 笔记本的(dict)参数</li></ul><p id="33a4" class="pw-post-body-paragraph ls lt it lu b lv mq ju lx ly mr jx ma mb ne md me mf nf mh mi mj ng ml mm mn im bi translated"><code class="fe ni nj nk nl b">.execute_notebook()</code>执行以下操作:</p><ol class=""><li id="50e3" class="mo mp it lu b lv mq ly mr mb ms mf mt mj mu mn nm mw mx my bi translated">查找输入笔记本，即<code class="fe ni nj nk nl b">template.ipynb</code></li></ol><p id="d248" class="pw-post-body-paragraph ls lt it lu b lv mq ju lx ly mr jx ma mb ne md me mf nf mh mi mj ng ml mm mn im bi translated">2.在运行时将参数注入<code class="fe ni nj nk nl b">template.ipynb</code></p><figure class="kk kl km kn gt ko gh gi paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gh gi ot"><img src="../Images/be2e27975f7c503f8932dba611f7c624.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*ihdxYcp381aUvcEG"/></div></div><p class="kv kw gj gh gi kx ky bd b be z dk translated">作者图片</p></figure><p id="43af" class="pw-post-body-paragraph ls lt it lu b lv mq ju lx ly mr jx ma mb ne md me mf nf mh mi mj ng ml mm mn im bi translated">3.使用注入的参数运行<code class="fe ni nj nk nl b">template.ipynb</code></p><p id="c4d2" class="pw-post-body-paragraph ls lt it lu b lv mq ju lx ly mr jx ma mb ne md me mf nf mh mi mj ng ml mm mn im bi translated">4.在<code class="fe ni nj nk nl b">output_path</code>中保存已执行笔记本的副本以及单元输出</p><h2 id="83ed" class="nw lb it bd lc nx ny dn lg nz oa dp lk mb ob oc lm mf od oe lo mj of og lq oh bi translated">4.运行<code class="fe ni nj nk nl b">driver.ipynb</code></h2><p id="e3fb" class="pw-post-body-paragraph ls lt it lu b lv lw ju lx ly lz jx ma mb mc md me mf mg mh mi mj mk ml mm mn im bi translated">执行时，<code class="fe ni nj nk nl b">driver.ipynb</code>笔记本将不同组的参数传递给<code class="fe ni nj nk nl b">template.ipynb</code>，执行<code class="fe ni nj nk nl b">template.ipynb</code>，并在<code class="fe ni nj nk nl b">.execute_notebook()</code>中定义的<code class="fe ni nj nk nl b">output_path</code>保存不同组参数的已执行笔记本的副本。</p><figure class="kk kl km kn gt ko gh gi paragraph-image"><div class="gh gi ou"><img src="../Images/92c13aca865987b3130a16718e308c02.png" data-original-src="https://miro.medium.com/v2/resize:fit:1152/0*2lX_OxtcCf7eO3J7"/></div><p class="kv kw gj gh gi kx ky bd b be z dk translated">作者图片</p></figure><p id="847d" class="pw-post-body-paragraph ls lt it lu b lv mq ju lx ly mr jx ma mb ne md me mf nf mh mi mj ng ml mm mn im bi translated">下图显示了保存的输出笔记本。</p><figure class="kk kl km kn gt ko gh gi paragraph-image"><div class="gh gi ov"><img src="../Images/c0339d7446b92ce6d6c03ddc34afd596.png" data-original-src="https://miro.medium.com/v2/resize:fit:532/0*TIunMTWo_rh8bYXv"/></div><p class="kv kw gj gh gi kx ky bd b be z dk translated">作者图片</p></figure><p id="848c" class="pw-post-body-paragraph ls lt it lu b lv mq ju lx ly mr jx ma mb ne md me mf nf mh mi mj ng ml mm mn im bi translated">让我们来看看其中一个保存的笔记本。在<code class="fe ni nj nk nl b">report_Central Area.ipynb</code>中，我们看到 Papermill 向第一个单元格注入了一组参数。</p><figure class="kk kl km kn gt ko"><div class="bz fp l di"><div class="nn no l"/></div><p class="kv kw gj gh gi kx ky bd b be z dk translated">作者笔记本</p></figure><h1 id="b326" class="la lb it bd lc ld le lf lg lh li lj lk jz ll ka lm kc ln kd lo kf lp kg lq lr bi translated">结论</h1><p id="06ea" class="pw-post-body-paragraph ls lt it lu b lv lw ju lx ly lz jx ma mb mc md me mf mg mh mi mj mk ml mm mn im bi translated">在本文中，我们给出了参数化 Jupyter 笔记本的动机，并展示了如何通过 Python API 执行 Papermill 的数据分析用例。Papermill 的使用案例不限于报告生成。其他开源包如<a class="ae kz" href="https://medium.com/@edwin.tan/machine-learning-pipeline-with-ploomber-pycaret-and-mlflow-db6e76ee8a10" rel="noopener"> Ploomber </a>使用 Papermill 将参数注入到单元格中，以创建可重用的机器学习管道。Papermill 还提供通过命令行界面执行，并允许使用<code class="fe ni nj nk nl b">.yaml</code>文件存储参数。查看<a class="ae kz" href="https://github.com/nteract/papermill" rel="noopener ugc nofollow" target="_blank"> Papermill github </a>了解更多信息。</p></div><div class="ab cl ow ox hx oy" role="separator"><span class="oz bw bk pa pb pc"/><span class="oz bw bk pa pb pc"/><span class="oz bw bk pa pb"/></div><div class="im in io ip iq"><ul class=""><li id="67ab" class="mo mp it lu b lv mq ly mr mb ms mf mt mj mu mn mv mw mx my bi translated"><a class="ae kz" href="https://medium.com/@edwin.tan/membership" rel="noopener">加入 Medium </a>阅读更多这样的故事</li><li id="dc5b" class="mo mp it lu b lv mz ly na mb nb mf nc mj nd mn mv mw mx my bi translated"><a class="ae kz" href="https://medium.com/@edwin.tan" rel="noopener">关注我</a>获取更多类似的帖子</li></ul></div><div class="ab cl ow ox hx oy" role="separator"><span class="oz bw bk pa pb pc"/><span class="oz bw bk pa pb pc"/><span class="oz bw bk pa pb"/></div><div class="im in io ip iq"><h1 id="8456" class="la lb it bd lc ld pd lf lg lh pe lj lk jz pf ka lm kc pg kd lo kf ph kg lq lr bi translated">参考</h1><p id="2d88" class="pw-post-body-paragraph ls lt it lu b lv lw ju lx ly lz jx ma mb mc md me mf mg mh mi mj mk ml mm mn im bi translated">[1] <em class="np">包含 2022 年 3 月 17 日从</em><a class="ae kz" href="https://data.gov.sg/dataset/resale-flat-prices" rel="noopener ugc nofollow" target="_blank">【https://data.gov.sg/dataset/resale-flat-prices</a><em class="np">获得的转售单位价格信息，该信息根据新加坡开放数据许可证版本 1.0</em>【https://data.gov.sg/open-data-licence】T21<em class="np">的条款提供。</em>允许公共使用(商业&amp;非商业)。</p><p id="8e92" class="pw-post-body-paragraph ls lt it lu b lv mq ju lx ly mr jx ma mb ne md me mf nf mh mi mj ng ml mm mn im bi translated">[2] <a class="ae kz" href="https://papermill.readthedocs.io/en/latest/" rel="noopener ugc nofollow" target="_blank">造纸厂</a></p></div></div>    
</body>
</html>