<html>
<head>
<title>How to create a reproducible data science project</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何创建可重现的数据科学项目</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/how-to-create-a-reproducible-data-science-project-682d3a1b98ed#2022-03-15">https://towardsdatascience.com/how-to-create-a-reproducible-data-science-project-682d3a1b98ed#2022-03-15</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="b9f8" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">Anaconda 项目初学者指南</h2></div><p id="c8d1" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">由<a class="ae le" href="https://sophiamyang.medium.com/" rel="noopener">索菲娅·杨</a>和<a class="ae le" href="https://www.linkedin.com/in/albertdefusco/" rel="noopener ugc nofollow" target="_blank">艾伯特·德弗斯科</a>拍摄</p><figure class="lg lh li lj gt lk gh gi paragraph-image"><div role="button" tabindex="0" class="ll lm di ln bf lo"><div class="gh gi lf"><img src="../Images/e8fb3c95584b16a9148ea9760c1824f8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ebPBM6srTFloeRB8ppulgQ.jpeg"/></div></div><p class="lr ls gj gh gi lt lu bd b be z dk translated">照片由<a class="ae le" href="https://unsplash.com/@cbarbalis?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">克里斯·巴尔巴利斯</a>在<a class="ae le" href="https://unsplash.com/?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</p></figure><p id="146a" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">创建可重复的数据科学项目非常重要。数据科学家需要能够与其他人共享项目，并确保其他人能够产生相同的结果。在我们看来，可再生数据科学集中在三个领域— <strong class="kk iu">可再生代码</strong>(例如使用<a class="ae le" rel="noopener" target="_blank" href="/git-workflow-for-data-scientists-c75445f23f44?sk=579671f9fcc2000bff07bdcba4777bcd"> Git </a>)、<strong class="kk iu">可再生代码行为</strong>(例如<a class="ae le" rel="noopener" target="_blank" href="/testing-for-data-scientists-1223fcad4ac2?sk=bde5487fe3ad11a06ae3a92ed80d451b">编写测试</a>)和<strong class="kk iu">可再生环境</strong>。</p><p id="5259" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在创建数据科学可复制环境方面，大多数数据科学家都熟悉<a class="ae le" href="https://docs.conda.io/projects/conda/en/latest/user-guide/tasks/manage-environments.html" rel="noopener ugc nofollow" target="_blank"> conda </a>(针对 conda 用户)或<a class="ae le" href="https://docs.python.org/3/library/venv.html" rel="noopener ugc nofollow" target="_blank"> venv </a>(针对 Pip 用户)。一个不太为人所知但强烈推荐的选择是<a class="ae le" href="https://anaconda-project.readthedocs.io/en/latest/getting-started.html" rel="noopener ugc nofollow" target="_blank"> Anaconda 项目</a>。它是一个 YAML 文本文件，有助于创建一个可再现的数据科学项目，并且不限于可再现的环境。Anaconda 项目具有以下特性:</p><ul class=""><li id="d42b" class="lv lw it kk b kl km ko kp kr lx kv ly kz lz ld ma mb mc md bi translated">它指定了 Conda 和 Pip 包来创建可复制的环境。</li><li id="4f0c" class="lv lw it kk b kl me ko mf kr mg kv mh kz mi ld ma mb mc md bi translated">它将数据下载到项目中。</li><li id="9706" class="lv lw it kk b kl me ko mf kr mg kv mh kz mi ld ma mb mc md bi translated">它会跟踪您想要执行的命令。</li><li id="c774" class="lv lw it kk b kl me ko mf kr mg kv mh kz mi ld ma mb mc md bi translated">它允许您设置环境变量。</li><li id="b019" class="lv lw it kk b kl me ko mf kr mg kv mh kz mi ld ma mb mc md bi translated">它易于共享，并提供了上传到 Anaconda Cloud 的选项。</li><li id="ca98" class="lv lw it kk b kl me ko mf kr mg kv mh kz mi ld ma mb mc md bi translated">它用一个简单的 CLI 命令构建 docker 映像。</li></ul><h1 id="18a4" class="mj mk it bd ml mm mn mo mp mq mr ms mt jz mu ka mv kc mw kd mx kf my kg mz na bi translated"><strong class="ak">一个例子</strong></h1><p id="4ddd" class="pw-post-body-paragraph ki kj it kk b kl nb ju kn ko nc jx kq kr nd kt ku kv ne kx ky kz nf lb lc ld im bi translated">下面是 anaconda-project.yml 的样子。在本例中，我们已经定义了包/依赖项、可执行命令和环境变量。</p><figure class="lg lh li lj gt lk"><div class="bz fp l di"><div class="ng nh l"/></div></figure><h1 id="f10e" class="mj mk it bd ml mm mn mo mp mq mr ms mt jz mu ka mv kc mw kd mx kf my kg mz na bi translated"><strong class="ak">如何安装 Anaconda 项目？</strong></h1><p id="e1a1" class="pw-post-body-paragraph ki kj it kk b kl nb ju kn ko nc jx kq kr nd kt ku kv ne kx ky kz nf lb lc ld im bi translated">如果您还没有安装 Anaconda 或 Miniconda，请先安装它们。那么您应该可以在您的终端中访问<code class="fe ni nj nk nl b">conda</code>。然后在命令行中，键入<code class="fe ni nj nk nl b">conda install anaconda-project</code>来安装 Anaconda 项目。</p><h1 id="b445" class="mj mk it bd ml mm mn mo mp mq mr ms mt jz mu ka mv kc mw kd mx kf my kg mz na bi translated"><strong class="ak">如何创建项目？</strong></h1><ul class=""><li id="d7a5" class="lv lw it kk b kl nb ko nc kr nm kv nn kz no ld ma mb mc md bi translated">要从头开始创建项目，请运行</li></ul><pre class="lg lh li lj gt np nl nq nr aw ns bi"><span id="cef8" class="nt mk it nl b gy nu nv l nw nx">anaconda-project init</span></pre><p id="8d7f" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">然后，您将看到在您的目录中创建了一个“anaconda-project.yml”文件。</p><ul class=""><li id="a418" class="lv lw it kk b kl km ko kp kr lx kv ly kz lz ld ma mb mc md bi translated">要从现有的 Conda 环境中创建一个项目，运行</li></ul><pre class="lg lh li lj gt np nl nq nr aw ns bi"><span id="5b65" class="nt mk it nl b gy nu nv l nw nx">conda env export –from-history environment-name &gt; anaconda-project.yml</span></pre><h1 id="8e51" class="mj mk it bd ml mm mn mo mp mq mr ms mt jz mu ka mv kc mw kd mx kf my kg mz na bi translated"><strong class="ak">如何添加包？</strong></h1><p id="f1c9" class="pw-post-body-paragraph ki kj it kk b kl nb ju kn ko nc jx kq kr nd kt ku kv ne kx ky kz nf lb lc ld im bi translated">要添加包(例如，本例中的 pandas 和 numpy)，您可以运行<code class="fe ni nj nk nl b">anaconda-project add-packages pandas numpy</code>来添加 Conda 包，或者运行<code class="fe ni nj nk nl b">anaconda-project add-packages --pip pandas numpy</code>来添加 Pip 包。然后，您应该会看到这些包出现在您的 anaconda-project.yml 文件中。</p><h1 id="e16d" class="mj mk it bd ml mm mn mo mp mq mr ms mt jz mu ka mv kc mw kd mx kf my kg mz na bi translated"><strong class="ak">如何添加环境变量？</strong></h1><p id="a1f6" class="pw-post-body-paragraph ki kj it kk b kl nb ju kn ko nc jx kq kr nd kt ku kv ne kx ky kz nf lb lc ld im bi translated">Anaconda 项目允许用户通过运行</p><pre class="lg lh li lj gt np nl nq nr aw ns bi"><span id="cd2d" class="nt mk it nl b gy nu nv l nw nx">anaconda-project add-variable --default=default_value VARIABLE</span></pre><h1 id="6bac" class="mj mk it bd ml mm mn mo mp mq mr ms mt jz mu ka mv kc mw kd mx kf my kg mz na bi translated"><strong class="ak">如何添加可执行命令？</strong></h1><p id="804e" class="pw-post-body-paragraph ki kj it kk b kl nb ju kn ko nc jx kq kr nd kt ku kv ne kx ky kz nf lb lc ld im bi translated">例如，如果您的目录中有一个 Python 文件“hello.py ”,那么您可能想要运行<code class="fe ni nj nk nl b">python hello.py</code>来运行这个代码。使用 Anaconda Project，您可以通过运行<code class="fe ni nj nk nl b">anaconda-project add-command hello “python hello.py"</code>在 anaconda-project.yml 文件中添加这个可执行命令。然后，我们可以简单地运行<code class="fe ni nj nk nl b">anaconda-project run hello</code>，而不是激活您的环境然后运行<code class="fe ni nj nk nl b">python hello.py</code>，这将在您在 anaconda-project.yml 文件中定义的环境中自动运行这段代码。多简单啊！</p><p id="d3f4" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">类似地，您可以添加一个命令来启动 Jupyter 笔记本或 Python 应用程序。例如，这里我们添加了一个名为“notebook”的命令来启动笔记本，另一个名为“app”的命令来启动应用程序</p><pre class="lg lh li lj gt np nl nq nr aw ns bi"><span id="f64a" class="nt mk it nl b gy nu nv l nw nx">anaconda-project add-command notebook notebook.ipynb</span><span id="79aa" class="nt mk it nl b gy ny nv l nw nx">anaconda-project add-command app “panel serve notebook.ipynb”</span></pre><p id="b7a6" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">然后我们可以运行<code class="fe ni nj nk nl b">anaconda-project run notebook</code>和<code class="fe ni nj nk nl b">anaconda-project run app</code>来启动笔记本和应用程序。</p><h1 id="e8e4" class="mj mk it bd ml mm mn mo mp mq mr ms mt jz mu ka mv kc mw kd mx kf my kg mz na bi translated"><strong class="ak">如何分享一个项目？</strong></h1><p id="02fa" class="pw-post-body-paragraph ki kj it kk b kl nb ju kn ko nc jx kq kr nd kt ku kv ne kx ky kz nf lb lc ld im bi translated">共享项目有三种方式:</p><ul class=""><li id="f6a4" class="lv lw it kk b kl km ko kp kr lx kv ly kz lz ld ma mb mc md bi translated">我们可以直接在您的中创建一个归档文件:</li></ul><pre class="lg lh li lj gt np nl nq nr aw ns bi"><span id="a151" class="nt mk it nl b gy nu nv l nw nx">anaconda-project archive filename.zip</span></pre><p id="bcbe" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">然后，您将看到您的项目文件保存为 filename.zip。</p><ul class=""><li id="7181" class="lv lw it kk b kl km ko kp kr lx kv ly kz lz ld ma mb mc md bi translated">我们还可以将我们的项目上传到 Anaconda Cloud:</li></ul><pre class="lg lh li lj gt np nl nq nr aw ns bi"><span id="c560" class="nt mk it nl b gy nu nv l nw nx">anaconda-project upload</span></pre><ul class=""><li id="4c5e" class="lv lw it kk b kl km ko kp kr lx kv ly kz lz ld ma mb mc md bi translated">我们还可以创建一个 Docker 图像:</li></ul><pre class="lg lh li lj gt np nl nq nr aw ns bi"><span id="8253" class="nt mk it nl b gy nu nv l nw nx">anaconda-project dockerize</span></pre><h1 id="eb62" class="mj mk it bd ml mm mn mo mp mq mr ms mt jz mu ka mv kc mw kd mx kf my kg mz na bi translated">其他的</h1><p id="9b60" class="pw-post-body-paragraph ki kj it kk b kl nb ju kn ko nc jx kq kr nd kt ku kv ne kx ky kz nf lb lc ld im bi translated">如果您对 yaml 文件进行了大量的修改，您可以使用<code class="fe ni nj nk nl b">anaconda-project prepare --refresh</code>从头构建环境。</p><p id="db5a" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">要锁定项目，请运行<code class="fe ni nj nk nl b">anaconda-project lock</code>。您可以使用<code class="fe ni nj nk nl b">anaconda-project add-packages</code>添加包。但是如果直接编辑<code class="fe ni nj nk nl b">anaconda-project.yml</code>，可以运行<code class="fe ni nj nk nl b">anaconda-project update</code>更新<code class="fe ni nj nk nl b">anaconda-project-lock.yml</code>来匹配。</p><p id="426f" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">通过使用 Anaconda Project，您不仅可以创建可再现的环境，还可以在您的数据科学项目上创建可再现的可运行命令和配置。试一试，让我们知道你的想法。</p><h1 id="6f00" class="mj mk it bd ml mm mn mo mp mq mr ms mt jz mu ka mv kc mw kd mx kf my kg mz na bi translated">参考资料:</h1><p id="a3c6" class="pw-post-body-paragraph ki kj it kk b kl nb ju kn ko nc jx kq kr nd kt ku kv ne kx ky kz nf lb lc ld im bi translated"><a class="ae le" href="https://anaconda.cloud/webinars/making-reproducible-conda-based-projects?utm_medium=web&amp;utm_source=Anaconda-com&amp;utm_campaign=Webinar" rel="noopener ugc nofollow" target="_blank">https://anaconda . cloud/webinars/making-reproducible-conda-based-projects？UTM _ medium = web&amp;UTM _ source = Anaconda-com&amp;UTM _ campaign = Webinar</a></p><p id="a178" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><a class="ae le" href="https://anaconda-project.readthedocs.io/en/latest/index.html" rel="noopener ugc nofollow" target="_blank">https://anaconda-project . readthedocs . io/en/latest/index . html</a></p><p id="dde9" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><a class="ae le" rel="noopener" target="_blank" href="/testing-for-data-scientists-1223fcad4ac2?sk=bde5487fe3ad11a06ae3a92ed80d451b">https://towards data science . com/testing-for-data-scientists-1223 fcad 4 AC 2？sk = bde 5487 Fe 3 ad 11 a 06 AE 3a 92 ed 80d 451 b</a></p><p id="c82f" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><a class="ae le" rel="noopener" target="_blank" href="/git-workflow-for-data-scientists-c75445f23f44?sk=579671f9fcc2000bff07bdcba4777bcd">https://towardsdatascience . com/git-workflow-for-data-scientists-c 75445 f 23 f 44？sk = 579671 f 9 FCC 2000 BFF 07 BDC ba 4777 BCD</a></p><p id="2435" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><a class="ae le" href="https://docs.conda.io/projects/conda/en/latest/user-guide/tasks/manage-environments.html" rel="noopener ugc nofollow" target="_blank">https://docs . conda . io/projects/conda/en/latest/user-guide/tasks/manage-environments . html</a></p><p id="61b2" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">由<a class="ae le" href="https://sophiamyang.medium.com/" rel="noopener">索菲亚·杨</a>和<a class="ae le" href="https://www.linkedin.com/in/albertdefusco/" rel="noopener ugc nofollow" target="_blank">阿尔伯特·德福斯科</a>于 2022 年 3 月 15 日</p></div></div>    
</body>
</html>