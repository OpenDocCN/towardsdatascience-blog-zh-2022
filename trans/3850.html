<html>
<head>
<title>Stop Using MAE and Use This Data Science Loss Function Instead</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">停止使用MAE，改用这个数据科学损失函数</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/stop-using-mae-and-use-this-data-science-loss-function-instead-7b6107862d13#2022-08-26">https://towardsdatascience.com/stop-using-mae-and-use-this-data-science-loss-function-instead-7b6107862d13#2022-08-26</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><h2 id="f369" class="ir is it bd b dl iu iv iw ix iy iz dk ja translated" aria-label="kicker paragraph">意见</h2><div class=""/><div class=""><h2 id="b10d" class="pw-subtitle-paragraph jz jc it bd b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq dk translated">研究分位数损失以及何时使用它——业务用例</h2></div><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi kr"><img src="../Images/78923c3a27cc170e32a01fdb03d25dbd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*3uhC5vlD26eXxbiR"/></div></div><p class="ld le gj gh gi lf lg bd b be z dk translated">在<a class="ae lh" href="https://unsplash.com/s/photos/%25?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Unsplash</a>【1】上由<a class="ae lh" href="https://unsplash.com/@josephyip?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">叶祖尧</a>拍摄的照片。</p></figure></div><div class="ab cl li lj hx lk" role="separator"><span class="ll bw bk lm ln lo"/><span class="ll bw bk lm ln lo"/><span class="ll bw bk lm ln"/></div><div class="im in io ip iq"><h1 id="c743" class="lp lq it bd lr ls lt lu lv lw lx ly lz ki ma kj mb kl mc km md ko me kp mf mg bi translated">目录</h1><ol class=""><li id="93ad" class="mh mi it mj b mk ml mm mn mo mp mq mr ms mt mu mv mw mx my bi translated">介绍</li><li id="7ff4" class="mh mi it mj b mk mz mm na mo nb mq nc ms nd mu mv mw mx my bi translated">回归和损失函数</li><li id="967e" class="mh mi it mj b mk mz mm na mo nb mq nc ms nd mu mv mw mx my bi translated">何时使用分位数，何时</li><li id="2e7c" class="mh mi it mj b mk mz mm na mo nb mq nc ms nd mu mv mw mx my bi translated">摘要</li><li id="b4d1" class="mh mi it mj b mk mz mm na mo nb mq nc ms nd mu mv mw mx my bi translated">参考</li></ol><h1 id="4bbf" class="lp lq it bd lr ls ne lu lv lw nf ly lz ki ng kj mb kl nh km md ko ni kp mf mg bi translated">介绍</h1><p id="06bc" class="pw-post-body-paragraph nj nk it mj b mk ml kd nl mm mn kg nm mo nn no np mq nq nr ns ms nt nu nv mu im bi translated">作为一名在网上学到了很多东西的数据科学家，我看到了关于损失函数的讨论很少，这些函数不是梅或RMSE的。出于这个原因，我将给出一个何时使用不同损失函数的快速总结，它是强大的分位数损失函数及其变体。除了那些想了解更多有关何时使用分位数损失函数的人之外，这个讨论对于没有听说过这个函数的数据科学家也很有用。话虽如此，让我们看看分位数的一些什么、为什么和何时，特别是业务用例。</p><h2 id="cda7" class="nw lq it bd lr nx ny dn lv nz oa dp lz mo ob oc mb mq od oe md ms of og mf iz bi translated">回归和损失函数</h2><p id="c36a" class="pw-post-body-paragraph nj nk it mj b mk ml kd nl mm mn kg nm mo nn no np mq nq nr ns ms nt nu nv mu im bi translated">首先，让我们在深入业务用例之前先了解一下我们的方向。我们可以使用分位数损失函数来解决回归问题，这一点我将在本文中讨论。回归是一种预测连续变量的算法。例如，如果我们想预测一个在0到100范围内的值。</p><blockquote class="oh oi oj"><p id="087b" class="nj nk ok mj b mk ol kd nl mm om kg nm on oo no np op oq nr ns or os nu nv mu im bi translated">以下是常用于回归算法的其他损失函数的示例:</p></blockquote><ul class=""><li id="9604" class="mh mi it mj b mk ol mm om mo ot mq ou ms ov mu ow mw mx my bi translated"><strong class="mj jd"> MAE </strong>针对中值(<em class="ok">平均绝对值</em>)进行优化，而不关注方向优化，因此出现了“<em class="ok">绝对值</em>”部分</li><li id="d4d6" class="mh mi it mj b mk mz mm na mo nb mq nc ms nd mu ow mw mx my bi translated"><strong class="mj jd"> RMSE </strong>优化异常值(<em class="ok">均方根误差</em>)—惩罚较大的误差</li></ul><p id="33a3" class="pw-post-body-paragraph nj nk it mj b mk ol kd nl mm om kg nm mo oo no np mq oq nr ns ms os nu nv mu im bi translated">因此，如果您的数据更符合正态分布并且没有异常值，您可以使用MAE，而如果您的数据中有异常值，并且较大的错误对您的用例来说特别痛苦，您可以使用RMSE。</p><p id="c1f6" class="pw-post-body-paragraph nj nk it mj b mk ol kd nl mm om kg nm mo oo no np mq oq nr ns ms os nu nv mu im bi translated">现在我们知道了典型的损失函数是什么样子，我们可以看看分位数。</p><h1 id="63c9" class="lp lq it bd lr ls ne lu lv lw nf ly lz ki ng kj mb kl nh km md ko ni kp mf mg bi translated">何时使用分位数，何时</h1><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi kr"><img src="../Images/0c9a8a7172cb8e43c4bd86491a78b1da.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*Min3YbdCADKzyJN-"/></div></div><p class="ld le gj gh gi lf lg bd b be z dk translated">马克西姆·霍普曼在<a class="ae lh" href="https://unsplash.com/s/photos/graph?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Unsplash</a>【2】上拍摄的照片。</p></figure><p id="0002" class="pw-post-body-paragraph nj nk it mj b mk ol kd nl mm om kg nm mo oo no np mq oq nr ns ms os nu nv mu im bi translated">术语分位数是百分位数的另一种说法，但以分数的形式出现。此外，例如，如果分位数值是0.80，那么我们可以说，预测不足将被罚因子0.80。反之，反过来也可以说是过度预测，它将被扣分0.20。因此，过度预测比预测不足受到的惩罚要少。在这种情况下，我们会在80%的时间里过度预测。</p><blockquote class="ox"><p id="d021" class="oy oz it bd pa pb pc pd pe pf pg mu dk translated">如果您的观察/实际计数更频繁地位于中值之上，这可能特别有用。</p></blockquote><p id="33fc" class="pw-post-body-paragraph nj nk it mj b mk ph kd nl mm pi kg nm mo pj no np mq pk nr ns ms pl nu nv mu im bi translated">现在让我们开始有趣的部分——当这个函数实际上对您的业务或任何学术用例有用时。</p><p id="c09b" class="pw-post-body-paragraph nj nk it mj b mk ol kd nl mm om kg nm mo oo no np mq oq nr ns ms os nu nv mu im bi translated">假设我们有上述相同的0-100个实际观察范围的例子。如果中位数是50，但更多的实际值落在50以上，比如说60-80比20-40多，那么我们应该使用更高的分位数alpha值。你可以测试不同的alphas值，但是你应该从高于0.50的值开始，否则你就违背了分位数损失的目的，并且在这种情况下实际上使用了MAE。</p><blockquote class="oh oi oj"><p id="9795" class="nj nk ok mj b mk ol kd nl mm om kg nm on oo no np op oq nr ns or os nu nv mu im bi translated">为了进一步推动这一点，让我们总结两个简单的用例，它们几乎可以代表您将使用quantile做出的任何决策:</p></blockquote><ul class=""><li id="521d" class="mh mi it mj b mk ol mm om mo ot mq ou ms ov mu ow mw mx my bi translated">用例1:</li></ul><p id="0859" class="pw-post-body-paragraph nj nk it mj b mk ol kd nl mm om kg nm mo oo no np mq oq nr ns ms os nu nv mu im bi translated">预测长途旅行的飞机价格。</p><p id="1c4d" class="pw-post-body-paragraph nj nk it mj b mk ol kd nl mm om kg nm mo oo no np mq oq nr ns ms os nu nv mu im bi translated">如您所见，我们已经想要惩罚预测不足，因此我们将选择0.50+的预测过度分位数，您可以从0.55、0.60等开始。仍然测试0.50作为基线比较可能是个好主意。很可能你的<strong class="mj jd">数据向左</strong>倾斜，你应该检查一下，最好是高估，因为过去的价格通常更接近最大范围而不是最小范围。例如，我们不会期望长途飞行通常是10美元(<em class="ok">，即使观察到的最低价格是10美元</em>)，而是期望它更接近于200美元。</p><ul class=""><li id="bc87" class="mh mi it mj b mk ol mm om mo ot mq ou ms ov mu ow mw mx my bi translated">用例2:</li></ul><p id="c9f5" class="pw-post-body-paragraph nj nk it mj b mk ol kd nl mm om kg nm mo oo no np mq oq nr ns ms os nu nv mu im bi translated">预测干旱地区夏季的降雨量。</p><p id="4473" class="pw-post-body-paragraph nj nk it mj b mk ol kd nl mm om kg nm mo oo no np mq oq nr ns ms os nu nv mu im bi translated">如果我们在一个更干燥的地区，例如，任何地方，现在是夏天，但我们想预测某一天的降雨量，我们可能会期望我们的实际值相对于我们的最大范围来说相当低，其中确实包含一些雷暴。在这种情况下，我们可能希望使用0.45或更低的alpha，等等。，因为我们看到降雨量低的行的计数更频繁，所以我们想低估降雨量。</p><h1 id="7bb4" class="lp lq it bd lr ls ne lu lv lw nf ly lz ki ng kj mb kl nh km md ko ni kp mf mg bi translated">摘要</h1><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi kr"><img src="../Images/0686cdd8efbb25c52213fbf4ad219ffc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*wbIGZSK3uw0V7Cz_"/></div></div><p class="ld le gj gh gi lf lg bd b be z dk translated">爱德华·豪厄尔在<a class="ae lh" href="https://unsplash.com/s/photos/graph?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Unsplash</a>【3】上拍摄的照片。</p></figure><p id="044c" class="pw-post-body-paragraph nj nk it mj b mk ol kd nl mm om kg nm mo oo no np mq oq nr ns ms os nu nv mu im bi translated">正如你所看到的，损失函数没有一个放之四海而皆准的方法。这实际上取决于以下几点:</p><pre class="ks kt ku kv gt pm pn po pp aw pq bi"><span id="8ced" class="nw lq it pn b gy pr ps l pt pu">* Data</span><span id="0928" class="nw lq it pn b gy pv ps l pt pu">* Distribution of that data</span><span id="d956" class="nw lq it pn b gy pv ps l pt pu">* Business case</span><span id="7e6a" class="nw lq it pn b gy pv ps l pt pu">* And how predictions will affect the business, is it better to overpredict or underpredict? Sometimes, it can even be more straightforward where you want one or the other regardless - without focusing on error itself, but focusing on tuning smaller or larger predictions for any reason</span></pre><p id="cf5c" class="pw-post-body-paragraph nj nk it mj b mk ol kd nl mm om kg nm mo oo no np mq oq nr ns ms os nu nv mu im bi translated">我希望你觉得我的文章既有趣又有用。如果您同意或不同意使用一个损失函数而不是另一个，请在下面随意评论。为什么或为什么不？你认为还有哪些损失函数需要进一步讨论？这些当然可以进一步澄清，但我希望我能够揭示一些数据科学损失函数及其应用。</p><p id="4fd5" class="pw-post-body-paragraph nj nk it mj b mk ol kd nl mm om kg nm mo oo no np mq oq nr ns ms os nu nv mu im bi translated"><strong class="mj jd"> <em class="ok">我不属于这些公司中的任何一家。</em>T3】</strong></p><p id="a0c1" class="pw-post-body-paragraph nj nk it mj b mk ol kd nl mm om kg nm mo oo no np mq oq nr ns ms os nu nv mu im bi translated"><em class="ok">请随时查看我的个人资料、</em> <a class="pw px ep" href="https://medium.com/u/abe5272eafd9?source=post_page-----7b6107862d13--------------------------------" rel="noopener" target="_blank"> <em class="ok"> Matt Przybyla </em> </a>、<em class="ok">和其他文章，并通过以下链接订阅接收我的博客的电子邮件通知，或通过点击屏幕上方的</em> <strong class="mj jd"> <em class="ok">图标关注图标</em> </strong> <em class="ok">的订阅图标，如果您有任何问题或意见，请在LinkedIn上联系我。</em></p><p id="015a" class="pw-post-body-paragraph nj nk it mj b mk ol kd nl mm om kg nm mo oo no np mq oq nr ns ms os nu nv mu im bi translated"><strong class="mj jd">订阅链接:</strong><a class="ae lh" href="https://datascience2.medium.com/subscribe" rel="noopener">https://datascience2.medium.com/subscribe</a></p><p id="4f20" class="pw-post-body-paragraph nj nk it mj b mk ol kd nl mm om kg nm mo oo no np mq oq nr ns ms os nu nv mu im bi translated"><strong class="mj jd">引荐链接:</strong><a class="ae lh" href="https://datascience2.medium.com/membership" rel="noopener">https://datascience2.medium.com/membership</a></p><p id="7194" class="pw-post-body-paragraph nj nk it mj b mk ol kd nl mm om kg nm mo oo no np mq oq nr ns ms os nu nv mu im bi translated">(<em class="ok">如果你在Medium </em>上注册会员，我会收到一笔佣金)</p><h1 id="bf5c" class="lp lq it bd lr ls ne lu lv lw nf ly lz ki ng kj mb kl nh km md ko ni kp mf mg bi translated">参考</h1><p id="44da" class="pw-post-body-paragraph nj nk it mj b mk ml kd nl mm mn kg nm mo nn no np mq nq nr ns ms nt nu nv mu im bi translated">[1]2021年<a class="ae lh" href="https://unsplash.com/s/photos/%25?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上<a class="ae lh" href="https://unsplash.com/@josephyip?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">叶</a>的照片</p><p id="597c" class="pw-post-body-paragraph nj nk it mj b mk ol kd nl mm om kg nm mo oo no np mq oq nr ns ms os nu nv mu im bi translated">[2]马克西姆·霍普曼在<a class="ae lh" href="https://unsplash.com/s/photos/graph?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片，(2021)</p><p id="cf8a" class="pw-post-body-paragraph nj nk it mj b mk ol kd nl mm om kg nm mo oo no np mq oq nr ns ms os nu nv mu im bi translated">[3]爱德华·豪厄尔在<a class="ae lh" href="https://unsplash.com/s/photos/graph?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片，(2020)</p></div></div>    
</body>
</html>