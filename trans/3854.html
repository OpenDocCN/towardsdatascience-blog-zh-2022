<html>
<head>
<title>Maintain a Companion Plant Knowledge Graph in Google Sheets and Neo4j</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在Google Sheets和Neo4j中维护一个配套的植物知识图表</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/maintain-a-companion-plant-knowledge-graph-in-google-sheets-and-neo4j-4142c0a5065b#2022-08-26">https://towardsdatascience.com/maintain-a-companion-plant-knowledge-graph-in-google-sheets-and-neo4j-4142c0a5065b#2022-08-26</a></blockquote><div><div class="fc ii ij ik il im"/><div class="in io ip iq ir"><div class=""/><div class=""><h2 id="5b0a" class="pw-subtitle-paragraph jr it iu bd b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki dk translated">将数据存储在表格中，并从图表中获得洞察力</h2></div><figure class="kk kl km kn gu ko gi gj paragraph-image"><div class="gi gj kj"><img src="../Images/d359eed22d9f030bf48fba83246dbf9f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1082/format:webp/1*tcnaurSxGRFxLMojpJf4Zg.jpeg"/></div><p class="kr ks gk gi gj kt ku bd b be z dk translated"><a class="ae kv" href="https://upload.wikimedia.org/wikipedia/commons/8/84/Three_Sisters_companion_planting_technique.jpg" rel="noopener ugc nofollow" target="_blank">Anna Juchnowicz的三姐妹同伴种植技术</a>在知识共享署名‐共享相似4.0许可下使用(<a class="ae kv" href="https://creativecommons.org/licenses/by-sa/4.0/deed.en" rel="noopener ugc nofollow" target="_blank"> CC BY‐ SA 4.0 </a></p></figure><p id="c0cc" class="pw-post-body-paragraph kw kx iu ky b kz la jv lb lc ld jy le lf lg lh li lj lk ll lm ln lo lp lq lr in bi translated">尽管<a class="ae kv" href="https://www.researchgate.net/publication/241746569_We_Already_Grow_Enough_Food_for_10_Billion_People_and_Still_Can%27t_End_Hunger" rel="noopener ugc nofollow" target="_blank">有足够100亿人吃的食物</a>，<a class="ae kv" href="https://www.actionagainsthunger.org/world-hunger-facts-statistics" rel="noopener ugc nofollow" target="_blank"> 10%的世界人口仍然经常饿着肚子睡觉</a>。气候变化、新冠肺炎和乌克兰战争加剧了粮食危机。虽然养活世界人口(2022年为80亿)已经够困难了，但为未来人口(2050年为98亿)生产和分配足够的食物将更具挑战性，特别是当表土、农业知识和土壤生物多样性的损失继续对我们不利的时候。</p><p id="0c05" class="pw-post-body-paragraph kw kx iu ky b kz la jv lb lc ld jy le lf lg lh li lj lk ll lm ln lo lp lq lr in bi translated">面对大规模的粮食危机和气候变化，我们需要改革我们目前不可持续的农业。在水培和<a class="ae kv" href="https://medium.com/the-diy-diaries/how-to-build-a-solar-aquaponics-with-plastic-bottles-16efa1a65e2c" rel="noopener">水培</a>这几种替代方案中，老友记种植确实值得我们关注。这是一种在附近种植不同植物的农业实践，这些植物通过提供养分、吸引有益昆虫或抑制害虫而相互支持。与单一种植相比，配套种植更高产，也更环保。一个众所周知的例子是<a class="ae kv" href="https://en.wikipedia.org/wiki/Three_Sisters_%28agriculture%29" rel="noopener ugc nofollow" target="_blank">三姐妹</a>:西葫芦、玉米和豆类(标题图)。豆类用它们的共生细菌固定氮。南瓜用它宽大的叶子保护土壤免受恶劣天气的影响，用它的毛发驱赶害虫。玉米是豆子攀爬的天然棚架。它们一起可以保护土壤免受侵蚀并提高生产力。</p><p id="206f" class="pw-post-body-paragraph kw kx iu ky b kz la jv lb lc ld jy le lf lg lh li lj lk ll lm ln lo lp lq lr in bi translated">人类已经实践了几千年的同伴种植，并积累了关于这个主题的广泛知识。这些知识被编成表格，比如维基百科上的<a class="ae kv" href="https://en.wikipedia.org/wiki/List_of_companion_plants" rel="noopener ugc nofollow" target="_blank">这个</a>。使用Google Sheets等工具可以很容易地修改和维护表格。但是对于像伴生植物数据这样的关系丰富的数据，表格并不是我进行可视化分析的首选。相比之下，网络图(图1)可以很容易地显示植物之间错综复杂的联系。我们还可以执行图形查询和基于图形的算法来获得对数据的新见解。</p><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="lt lu di lv bf lw"><div class="gi gj ls"><img src="../Images/078fa7b319391aa7c1abb3aeedb38441.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*UIXkVFk-7-67Yh0wxicTSw.png"/></div></div><p class="kr ks gk gi gj kt ku bd b be z dk translated">图一。伙伴植物和动物在Neo4j中可视化为图形。图片作者。</p></figure><p id="2188" class="pw-post-body-paragraph kw kx iu ky b kz la jv lb lc ld jy le lf lg lh li lj lk ll lm ln lo lp lq lr in bi translated">但是像Neo4j这样的图形数据库中的数据编辑并不像在表格中那么简单。虽然graph app<strong class="ky iv"/><a class="ae kv" href="https://medium.com/p/e94c7311dfab" rel="noopener"><strong class="ky iv">Neo4j Commander</strong>将数据编辑带入了Neo4j平台</a>，但其用户体验与我们从Google Sheets中所能得到的还是相差甚远。我们能否通过一个真实的来源，既能轻松编辑数据，又能轻松绘制图表？</p><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="lt lu di lv bf lw"><div class="gi gj lx"><img src="../Images/859c039bca19fdf5f8172ae2009725d7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*GMCEBviU5UcKDf8ttQXDgQ.png"/></div></div><p class="kr ks gk gi gj kt ku bd b be z dk translated">图一。此项目中的数据流。原始数据首先被接收到Google Sheets中。经过处理后，数据由Jupyter笔记本转换成Neo4j图形。图片作者。</p></figure><p id="2c15" class="pw-post-body-paragraph kw kx iu ky b kz la jv lb lc ld jy le lf lg lh li lj lk ll lm ln lo lp lq lr in bi translated">在这篇文章中，我想向你展示我的解决方案。我把维基百科上的伴生植物数据存储在谷歌工作表中。这是我唯一的真理来源。然后，我使用Neo4j Desktop创建一个本地知识图。Python Jupyter笔记本作为桥梁。笔记本从Google Sheets下载并格式化数据。然后在Neo4j中删除旧数据并导入新数据(图1)。然后我们将对Cypher和Python中的知识图进行一些数据挖掘。例如，我将使用Neo4j的图形数据科学(GDS)库中的度中心性算法来计算我们可以在马铃薯周围种植的最大的互助植物集。</p><p id="8ea7" class="pw-post-body-paragraph kw kx iu ky b kz la jv lb lc ld jy le lf lg lh li lj lk ll lm ln lo lp lq lr in bi translated">本文的代码存放在我的GitHub存储库中。</p><div class="ly lz gq gs ma mb"><a href="https://github.com/dgg32/companion_plants_2" rel="noopener  ugc nofollow" target="_blank"><div class="mc ab fp"><div class="md ab me cl cj mf"><h2 class="bd iv gz z fq mg fs ft mh fv fx it bi translated">GitHub-dgg 32/companion _ plants _ 2</h2><div class="mi l"><h3 class="bd b gz z fq mg fs ft mh fv fx dk translated">在GitHub上创建一个帐户，为dgg32/companion_plants_2的开发做出贡献。</h3></div><div class="mj l"><p class="bd b dl z fq mg fs ft mh fv fx dk translated">github.com</p></div></div><div class="mk l"><div class="ml l mm mn mo mk mp kp mb"/></div></div></a></div><p id="702a" class="pw-post-body-paragraph kw kx iu ky b kz la jv lb lc ld jy le lf lg lh li lj lk ll lm ln lo lp lq lr in bi translated">这个项目中的数据来自维基百科，受<a class="ae kv" href="https://www.google.com.hk/url?sa=t&amp;rct=j&amp;q=&amp;esrc=s&amp;source=web&amp;cd=&amp;cad=rja&amp;uact=8&amp;ved=2ahUKEwjhpfWUn-T5AhUcl1YBHU1FC_AQFnoECBkQAw&amp;url=https%3A%2F%2Fen.wikipedia.org%2Fwiki%2FWikipedia%3AReusing_Wikipedia_content&amp;usg=AOvVaw2Ef9JwbupF4y-KQhpl9CUS" rel="noopener ugc nofollow" target="_blank">知识共享署名共享许可</a>保护。谷歌表单在这里。</p><div class="ly lz gq gs ma mb"><a href="https://docs.google.com/spreadsheets/d/1U4K93EeOU6V4SZ9AgI3wOeV4kgdW9TmKSY_pIypDA-A/edit#gid=0" rel="noopener  ugc nofollow" target="_blank"><div class="mc ab fp"><div class="md ab me cl cj mf"><h2 class="bd iv gz z fq mg fs ft mh fv fx it bi translated">同伴_植物_维基百科</h2><div class="mi l"><h3 class="bd b gz z fq mg fs ft mh fv fx dk translated">葱属植物* *葱属*果树，[1]茄属植物(番茄，[2]辣椒，[3]马铃薯[4])，芸苔属植物，[5]…</h3></div><div class="mj l"><p class="bd b dl z fq mg fs ft mh fv fx dk translated">docs.google.com</p></div></div><div class="mk l"><div class="mq l mm mn mo mk mp kp mb"/></div></div></a></div><h1 id="b45f" class="mr ms iu bd mt mu mv mw mx my mz na nb ka nc kb nd kd ne ke nf kg ng kh nh ni bi translated">0.准备</h1><p id="d331" class="pw-post-body-paragraph kw kx iu ky b kz nj jv lb lc nk jy le lf nl lh li lj nm ll lm ln nn lp lq lr in bi translated">首先，在您的Neo4j桌面中创建一个名为“companion plants”的Neo4j项目。打开其<code class="fe no np nq nr b">import</code>文件夹("……"➡️"打开文件夹"➡️"导入)。复制看似随机的数据库字符串(dbms-xxxxxx)，在config.yaml中设置为<code class="fe no np nq nr b">neo4j_project_id</code>的值，另外在<code class="fe no np nq nr b">config.yaml</code>中填写其他细节。</p><p id="c668" class="pw-post-body-paragraph kw kx iu ky b kz la jv lb lc ld jy le lf lg lh li lj lk ll lm ln lo lp lq lr in bi translated">此外，您需要在<code class="fe no np nq nr b">Plugins</code>选项卡中启用GDS库。</p><h1 id="45f3" class="mr ms iu bd mt mu mv mw mx my mz na nb ka nc kb nd kd ne ke nf kg ng kh nh ni bi translated">1.将配套工厂数据集加载到Google Sheets中</h1><p id="1a2c" class="pw-post-body-paragraph kw kx iu ky b kz nj jv lb lc nk jy le lf nl lh li lj nm ll lm ln nn lp lq lr in bi translated">我的表格是基于维基百科 上的<a class="ae kv" href="https://en.wikipedia.org/wiki/List_of_companion_plants" rel="noopener ugc nofollow" target="_blank"> <em class="ns">伴生植物列表。数据被分成五个表:蔬菜、水果、草药、鲜花和其他。然后，我使用<code class="fe no np nq nr b">IMPORTHTML</code>函数将数据提取到五个谷歌表单中，并将它们合并到一个主表中。</em></a></p><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="lt lu di lv bf lw"><div class="gi gj nt"><img src="../Images/7b6639660ee46faabd1af5795d6f5f1a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Ym9JsKEcsD_1EbS43ya7Uw.png"/></div></div><p class="kr ks gk gi gj kt ku bd b be z dk translated">图二。IMPORTHTML函数从Wikipedia中检索数据，并填充Google Sheets中的表。该图显示了五个原始数据表中的一个。图片作者。</p></figure><p id="918f" class="pw-post-body-paragraph kw kx iu ky b kz la jv lb lc ld jy le lf lg lh li lj lk ll lm ln lo lp lq lr in bi translated">之后，我手动整理数据。我首先纠正了几个错别字，清除了一些类似“几乎所有东西”的模糊术语，添加了许多数据条目，并对同义词进行了规范化(左图3)。最后，我为分类法构建了一个表(图3右侧)。</p><div class="kk kl km kn gu ab cb"><figure class="nu ko nv nw nx ny nz paragraph-image"><div role="button" tabindex="0" class="lt lu di lv bf lw"><img src="../Images/e01869dfa8377fa2d77258f4a387444f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1544/format:webp/1*GWHPZ3cqAu-ac9ABb925Gg.png"/></div></figure><figure class="nu ko oa nw nx ny nz paragraph-image"><div role="button" tabindex="0" class="lt lu di lv bf lw"><img src="../Images/c577b7ffdcca3c34290d3c6470896291.png" data-original-src="https://miro.medium.com/v2/resize:fit:458/format:webp/1*z2K2PHD6A7d4k2tW3-Ne0w.png"/></div><p class="kr ks gk gi gj kt ku bd b be z dk ob di oc od translated">图3。Google Sheets中两个手动管理的表格。左图:伴生植物。右:分类学。图片作者。</p></figure></div><p id="64dd" class="pw-post-body-paragraph kw kx iu ky b kz la jv lb lc ld jy le lf lg lh li lj lk ll lm ln lo lp lq lr in bi translated">为了简单起见，我将Google Sheets设置为一般可访问，这样<code class="fe no np nq nr b">pandas</code>库就可以在我的脚本中轻松加载数据。而且因为数据在公共领域，所以对于这个项目来说是可以的。但是如果你的项目数据是保密的，你最好在Google Sheets中设置一个更严格的访问策略，在你的Python脚本中使用<code class="fe no np nq nr b">gsheets</code>库。</p><h1 id="a21b" class="mr ms iu bd mt mu mv mw mx my mz na nb ka nc kb nd kd ne ke nf kg ng kh nh ni bi translated">2.蟒蛇桥</h1><p id="7a2e" class="pw-post-body-paragraph kw kx iu ky b kz nj jv lb lc nk jy le lf nl lh li lj nm ll lm ln nn lp lq lr in bi translated">中间件由三个文件组成:一个Jupyter笔记本、一个<code class="fe no np nq nr b">config.yaml</code>和一个包含所有Neo4j命令的文本文件。<code class="fe no np nq nr b">Config.yaml</code>包含本地Neo4j凭证和其他用户数据。Python Jupyter笔记本连接了Google Sheets和我的Neo4j数据库。</p><p id="1082" class="pw-post-body-paragraph kw kx iu ky b kz la jv lb lc ld jy le lf lg lh li lj lk ll lm ln lo lp lq lr in bi translated">来自Google Sheets的数据可以用<code class="fe no np nq nr b">pandas </code>中的<code class="fe no np nq nr b">read_csv</code>函数直接读取(清单1)。</p><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="oe of l"/></div><p class="kr ks gk gi gj kt ku bd b be z dk translated">清单1。通过pandas read_csv从Google Sheets加载数据。</p></figure><p id="d039" class="pw-post-body-paragraph kw kx iu ky b kz la jv lb lc ld jy le lf lg lh li lj lk ll lm ln lo lp lq lr in bi translated">然后，脚本遍历表中的单元格，并拆分逗号分隔的内容。它们大多是植物和动物的名字。该脚本将复数形式单数化，解析同义词，并将伞形分类群具体化(“豆科”变成“灌木豆”、“苜蓿”等等)(清单2)。它还将节点和关系存储在变量中，如<code class="fe no np nq nr b">nodes_plant</code>和<code class="fe no np nq nr b">plant_plant_help</code>。</p><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="oe of l"/></div><p class="kr ks gk gi gj kt ku bd b be z dk translated">清单2。名称规范化。</p></figure><p id="e87b" class="pw-post-body-paragraph kw kx iu ky b kz la jv lb lc ld jy le lf lg lh li lj lk ll lm ln lo lp lq lr in bi translated">之后，脚本将这些变量写入TSV文件。例如，下面的代码为工厂节点创建文件。</p><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="oe of l"/></div><p class="kr ks gk gi gj kt ku bd b be z dk translated">清单3。将节点和关系写入TSV文件。</p></figure><p id="4741" class="pw-post-body-paragraph kw kx iu ky b kz la jv lb lc ld jy le lf lg lh li lj lk ll lm ln lo lp lq lr in bi translated">然后，该脚本连接到本地Neo4j实例，并清除所有约束和旧内容。</p><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="oe of l"/></div><p class="kr ks gk gi gj kt ku bd b be z dk translated">清单4。连接到Neo4j并删除数据库。</p></figure><p id="011a" class="pw-post-body-paragraph kw kx iu ky b kz la jv lb lc ld jy le lf lg lh li lj lk ll lm ln lo lp lq lr in bi translated">然后它将所有新生成的TSV文件复制到我的项目的<code class="fe no np nq nr b">import</code>文件夹中。</p><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="oe of l"/></div><p class="kr ks gk gi gj kt ku bd b be z dk translated">清单5。文件传输到导入文件夹。</p></figure><p id="53fe" class="pw-post-body-paragraph kw kx iu ky b kz la jv lb lc ld jy le lf lg lh li lj lk ll lm ln lo lp lq lr in bi translated">最后，脚本执行<code class="fe no np nq nr b">neo4j_command.txt</code>文件中的导入命令。这些命令将TSV文件导入知识图并创建相应的约束。</p><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="oe of l"/></div><p class="kr ks gk gi gj kt ku bd b be z dk translated">清单6。Neo4j命令的执行。</p></figure><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="oe of l"/></div><p class="kr ks gk gi gj kt ku bd b be z dk translated">清单7。Neo4j命令。</p></figure><p id="bd01" class="pw-post-body-paragraph kw kx iu ky b kz la jv lb lc ld jy le lf lg lh li lj lk ll lm ln lo lp lq lr in bi translated">知识图有如下简单的模式。它代表了各种植物和动物之间的支持和对抗关系。</p><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="lt lu di lv bf lw"><div class="gi gj og"><img src="../Images/90ccc539bc6368c247531c98d0b373d1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*pAuMQEkWegm-wIykPWdqCA.png"/></div></div><p class="kr ks gk gi gj kt ku bd b be z dk translated">图4。知识图的模式。图片作者。</p></figure><h1 id="ee9a" class="mr ms iu bd mt mu mv mw mx my mz na nb ka nc kb nd kd ne ke nf kg ng kh nh ni bi translated">3.伴生植物知识图</h1><p id="575d" class="pw-post-body-paragraph kw kx iu ky b kz nj jv lb lc nk jy le lf nl lh li lj nm ll lm ln nn lp lq lr in bi translated">一旦数据加载完毕，我们就可以开始探索知识图了。图中有162个植物节点、71个动物节点和2182个关系。在这些关系中，我们观察到1455个<code class="fe no np nq nr b">HELPS</code>和404个<code class="fe no np nq nr b">AVOIDS</code>关系。</p><h2 id="e659" class="oh ms iu bd mt oi oj dn mx ok ol dp nb lf om on nd lj oo op nf ln oq or nh os bi translated">3.1哪些植物是西红柿的好伴侣？</h2><p id="6093" class="pw-post-body-paragraph kw kx iu ky b kz nj jv lb lc nk jy le lf nl lh li lj nm ll lm ln nn lp lq lr in bi translated">如果我们想种西红柿，让我们来看看哪些植物是好伙伴。</p><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="oe of l"/></div><p class="kr ks gk gi gj kt ku bd b be z dk translated">清单8。获取番茄的伴生植物的Cypher查询。</p></figure><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="lt lu di lv bf lw"><div class="gi gj ot"><img src="../Images/e1aefd5eca2b9dcb20c1453b8b9b64c9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0BIW3pSAiWHIEwaBiDPBlg.png"/></div></div><p class="kr ks gk gi gj kt ku bd b be z dk translated">图5。番茄的伴生植物。图片作者。</p></figure><p id="e09a" class="pw-post-body-paragraph kw kx iu ky b kz la jv lb lc ld jy le lf lg lh li lj lk ll lm ln lo lp lq lr in bi translated">事实证明，许多植物可以帮助我们种植西红柿。例如，罗勒、琉璃苣、大蒜和金盏花都可以驱除害虫，而细香葱、薄荷和欧芹可以让番茄更健康。但是我们应该避免卷心菜、茴香和核桃树。</p><h2 id="310f" class="oh ms iu bd mt oi oj dn mx ok ol dp nb lf om on nd lj oo op nf ln oq or nh os bi translated">3.2最避免的植物</h2><p id="f614" class="pw-post-body-paragraph kw kx iu ky b kz nj jv lb lc nk jy le lf nl lh li lj nm ll lm ln nn lp lq lr in bi translated">正如上面的例子所示，有一些对抗性的组合，我们最好避免一起生长。例如，核桃合成了一种叫做<a class="ae kv" href="https://www.thespruce.com/companion-plants-for-tomatoes-1403289" rel="noopener ugc nofollow" target="_blank">胡桃醌的<a class="ae kv" href="https://en.wikipedia.org/wiki/Allelopathy" rel="noopener ugc nofollow" target="_blank">化感</a>化合物，可以抑制番茄</a>的生长。在这里，让我们看看哪些植物是数据集中最避免的。</p><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="oe of l"/></div><p class="kr ks gk gi gj kt ku bd b be z dk translated">清单9。创建最避免的植物列表的Cypher查询。</p></figure><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="oe of l"/></div></figure><p id="52c6" class="pw-post-body-paragraph kw kx iu ky b kz la jv lb lc ld jy le lf lg lh li lj lk ll lm ln lo lp lq lr in bi translated">根据维基百科，第一名应该是亚麻。然而，该数据条目已被标记为“需要引用”，我无法在其他任何地方验证该信息。相反，亚麻可以促进西红柿和土豆，因为它可以击退科罗拉多马铃薯甲虫。为了安全起见，我清除了它的回避关系。然后茴香成为第一名。茴香的根分泌抑制甚至杀死许多花园植物的物质。事实上，莳萝是唯一能长在茴香旁边的东西。除此之外，自己种[ <a class="ae kv" href="https://www.fpconservatory.org/wp-content/uploads/2018/11/3-Companion-Planting-PDF.pdf" rel="noopener ugc nofollow" target="_blank"> 1 </a> ]。</p><h2 id="64c2" class="oh ms iu bd mt oi oj dn mx ok ol dp nb lf om on nd lj oo op nf ln oq or nh os bi translated">3.3计算马铃薯的最大无规避支持植物网络</h2><p id="4788" class="pw-post-body-paragraph kw kx iu ky b kz nj jv lb lc nk jy le lf nl lh li lj nm ll lm ln nn lp lq lr in bi translated">让我们假设我们想在一大片地里种土豆。我们想在那里种植最具生物多样性的植物。但是有一个限制，在社区中不允许有“回避”关系。换句话说，该组中不应有任何对抗性植物对。请注意，可以有多个这样的最佳列表。</p><p id="6fbe" class="pw-post-body-paragraph kw kx iu ky b kz la jv lb lc ld jy le lf lg lh li lj lk ll lm ln lo lp lq lr in bi translated">我谷歌了一下，但找不到任何解决办法。所以我自己用Python开发了两个算法。这两种算法都是从能够促进马铃薯生长的植物列表开始的。</p><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="oe of l"/></div><p class="kr ks gk gi gj kt ku bd b be z dk translated">清单10。获取马铃薯伴生植物的代码。</p></figure><p id="0af5" class="pw-post-body-paragraph kw kx iu ky b kz la jv lb lc ld jy le lf lg lh li lj lk ll lm ln lo lp lq lr in bi translated">这个最初的列表包含苜蓿、芸苔、大蒜、洛伐他汀等等。</p><p id="0031" class="pw-post-body-paragraph kw kx iu ky b kz la jv lb lc ld jy le lf lg lh li lj lk ll lm ln lo lp lq lr in bi translated">对于每一株植物，我计算它与其他植物有多少避免关系(清单11中的第12–19行)。</p><p id="91da" class="pw-post-body-paragraph kw kx iu ky b kz la jv lb lc ld jy le lf lg lh li lj lk ll lm ln lo lp lq lr in bi translated">在第一轮中，大蒜和名单上的其他13种植物长得不好。它也是回避关系最多的植物。因此，我将大蒜从支持植物列表中删除(清单11中的第24–29行)。然后，算法重复这个过程(清单11中的第8–29行),直到再也找不到避免关系。如果有多于一个的植物具有相同的避免量，代码会随机删除其中的一个(清单11中的第25–27行)。</p><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="oe of l"/></div><p class="kr ks gk gi gj kt ku bd b be z dk translated">清单11。从支持植物列表中连续删除最避免的植物的代码。</p></figure><p id="3ca1" class="pw-post-body-paragraph kw kx iu ky b kz la jv lb lc ld jy le lf lg lh li lj lk ll lm ln lo lp lq lr in bi translated">在我的一次运行中，这个算法依次删除了大蒜、韭菜、细香葱、洋葱等等。最终的清单包含以下22种植物:紫花苜蓿、罗勒、卷心菜、胡萝卜、三叶草、玉米、皇冠草、死荨麻、亚麻、山葵、扁豆、川芎、羽扇豆、金盏花、薄荷、豌豆、花生、菜豆、大豆、龙蒿、野豌豆和蓍草。</p><p id="a0d9" class="pw-post-body-paragraph kw kx iu ky b kz la jv lb lc ld jy le lf lg lh li lj lk ll lm ln lo lp lq lr in bi translated">第二个算法使用来自GDS的度中心性来决定在每次迭代中移除哪个植物。度中心性算法用于查找图中的流行节点。在我们的例子中，我用它来寻找最避免的植物。该算法测量来自每个节点的传入或传出(或两者)关系的数量，并将该度量存储在pandas数据帧的“score”列中。它的实现不同于“while”循环中的第一个。</p><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="oe of l"/></div><p class="kr ks gk gi gj kt ku bd b be z dk translated">清单12。通过GDS的度中心性，从支持植物列表中连续删除最避免的植物的代码。</p></figure><p id="c648" class="pw-post-body-paragraph kw kx iu ky b kz la jv lb lc ld jy le lf lg lh li lj lk ll lm ln lo lp lq lr in bi translated">在每次迭代中，该算法首先将支持植物及其回避关系投影到一个<a class="ae kv" href="https://neo4j.com/docs/graph-data-science-client/current/graph-object/" rel="noopener ugc nofollow" target="_blank">图形对象</a>(清单12中的第14–17行)。然后，它计算每个植物的度中心性分数(清单12中的第19行)，获取最“流行”的一个(清单12中的第20–26行)，并将其从支持植物列表中删除。当有多个植物具有相同的度中心性得分时，代码会随机删除其中一个。该算法不断重复，直到所有的度中心性分数都为0(清单12中的第34–35行)。</p><p id="ca4c" class="pw-post-body-paragraph kw kx iu ky b kz la jv lb lc ld jy le lf lg lh li lj lk ll lm ln lo lp lq lr in bi translated">每次运行该算法时，都会发现一组新的22株植物。但是一些植物，如蓍草和死荨麻，将总是在集合中，因为它们在子图中没有任何避免关系。两种算法都有效。你可以通过证明任何两种植物之间没有必然的联系来验证这些结果。</p><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="oe of l"/></div><p class="kr ks gk gi gj kt ku bd b be z dk translated">清单13。验证两个伙伴工厂列表的Cypher查询。</p></figure><p id="572a" class="pw-post-body-paragraph kw kx iu ky b kz la jv lb lc ld jy le lf lg lh li lj lk ll lm ln lo lp lq lr in bi translated">但是度中心性方法用了0.4秒，而我的第一个算法用了2.6秒。</p></div><div class="ab cl ou ov hy ow" role="separator"><span class="ox bw bk oy oz pa"/><span class="ox bw bk oy oz pa"/><span class="ox bw bk oy oz"/></div><div class="in io ip iq ir"><h1 id="7516" class="mr ms iu bd mt mu pb mw mx my pc na nb ka pd kb nd kd pe ke nf kg pf kh nh ni bi translated">结论</h1><p id="b594" class="pw-post-body-paragraph kw kx iu ky b kz nj jv lb lc nk jy le lf nl lh li lj nm ll lm ln nn lp lq lr in bi translated">本文向您展示了我如何用Google Sheets和Neo4j将复杂的植物关系编码成知识图。植物之间的共栖、共生和化感关系是复杂而令人敬畏的。我们可以在同伴种植中很好地利用这些知识。通过配套种植，我们不仅能减少化肥和农药的使用，还能让植物更有活力、味道更好。最后，它还可以帮助我们减少灌溉量。面对当前史无前例的全球干旱，后一点尤其重要。</p><p id="3c82" class="pw-post-body-paragraph kw kx iu ky b kz la jv lb lc ld jy le lf lg lh li lj lk ll lm ln lo lp lq lr in bi translated">表格和图表的结合具有两者的优点。本质上，本文中的工作流将关系数据库与图形数据库结合在一起。我们可以在表格中轻松地编辑数据，并在图表中轻松地分析它们。我在这个项目中使用了Google Sheets。但是对于其他大型项目，我们可以使用PostgreSQL甚至雪花或者BigQuery。一旦数据加载到Neo4j这样的图形平台上，我们就可以使用图形查询和算法来检查数据，并通过Cypher或Python获得有趣的结果。你可以阅读由<a class="ae kv" href="https://neo4j.com/blog/contributor/tomaz-bratanic/" rel="noopener ugc nofollow" target="_blank">托马兹·布拉坦尼克</a>撰写的<a class="ae kv" href="https://neo4j.com/developer-blog/using-neo4j-graph-data-science-in-python-to-improve-machine-learning-models/" rel="noopener ugc nofollow" target="_blank">本</a>和<a class="ae kv" href="https://neo4j.com/developer-blog/get-started-with-neo4j-gds-python-client/" rel="noopener ugc nofollow" target="_blank">本</a>来学习更多关于在Python中使用GDS的知识。Python桥还允许我们控制哪个子集的数据流向图。当您的完整数据集太大而不适合小型Neo4j实例时，这尤其有价值，您可以只选择和导入相关的子集。或者当我们在一个团队中工作时，我们可以根据每个团队成员的请求或访问级别来切片然后交付数据。事实上，阿斯利康制药公司已经在他们的内部知识图应用程序中构建了一个类似的数据流。</p><p id="d262" class="pw-post-body-paragraph kw kx iu ky b kz la jv lb lc ld jy le lf lg lh li lj lk ll lm ln lo lp lq lr in bi translated">通过将配套的植物表编码成知识图，我已经使这一宝贵的农业知识可供所有人搜索和扩展。但是也有改进的余地。你能提出一个更好的算法来计算土豆的最大无规避支持植物集吗？我鼓励你验证这个知识图表中的信息，甚至制作你自己的版本。</p><div class="ly lz gq gs ma mb"><a href="https://dgg32.medium.com/membership" rel="noopener follow" target="_blank"><div class="mc ab fp"><div class="md ab me cl cj mf"><h2 class="bd iv gz z fq mg fs ft mh fv fx it bi translated">加入媒介与我的介绍链接-黄思兴</h2><div class="mi l"><h3 class="bd b gz z fq mg fs ft mh fv fx dk translated">作为一个媒体会员，你的会员费的一部分会给你阅读的作家，你可以完全接触到每一个故事…</h3></div><div class="mj l"><p class="bd b dl z fq mg fs ft mh fv fx dk translated">dgg32.medium.com</p></div></div><div class="mk l"><div class="pg l mm mn mo mk mp kp mb"/></div></div></a></div></div></div>    
</body>
</html>