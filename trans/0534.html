<html>
<head>
<title>Jupyter Notebooks: Avoid Making These 4 Mistakes</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Jupyter 笔记本:避免犯这 4 个错误</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/jupyter-notebooks-avoid-making-these-4-mistakes-e5cbad1d473d#2022-02-21">https://towardsdatascience.com/jupyter-notebooks-avoid-making-these-4-mistakes-e5cbad1d473d#2022-02-21</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="f24b" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">借助 Jupyter 笔记本电脑实现生产就绪代码</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/5d92f652758ebfa46b04ee1290acef67.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*aklnSZcNOFH-5CQ82wlc6Q.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">美国宇航局在<a class="ae ky" href="https://unsplash.com/s/photos/jupiter?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>拍摄的照片</p></figure><p id="bd41" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Jupyter 笔记本是我最喜欢的编写代码的方式——尤其是在第一次探索一个新的数据集时。</p><p id="f219" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">它们允许您查看每一步的代码和结果，将变量和数据集保存在内存中，并促进快速有效的实验。</p><p id="2a9c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Jupyter 笔记本允许我们将代码、叙述性文本、等式和可视化全部组合在一个文档中。</p><p id="600a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">但是，伴随着这种巨大的能力而来的是巨大的责任。在这里，我们讨论数据科学家犯的四个常见错误，这些错误否定了 Jupyter 笔记本的伟大之处。</p><h2 id="a37f" class="lv lw it bd lx ly lz dn ma mb mc dp md li me mf mg lm mh mi mj lq mk ml mm mn bi translated">运行单元出现故障</h2><p id="2811" class="pw-post-body-paragraph kz la it lb b lc mo ju le lf mp jx lh li mq lk ll lm mr lo lp lq ms ls lt lu im bi translated">在分析过程中，我们会多次无序地运行细胞。</p><p id="75e5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">当我遇到一个错误，或者代码没有按照我想要的那样运行时，我会一遍又一遍地运行那个单元格，直到我得到想要的结果。</p><p id="f826" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">做实验的时候，这绝对没有错！</p><p id="7b4b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">当我们试图让代码为生产做好准备时，无论是机器学习模型，还是导出到 Excel 的简单报告，都会出现问题。</p><p id="da95" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">编程的一个关键是结果的可再现性。</p><p id="bd66" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">任何人用相同的输入运行我们的笔记本应该得到相同的输出——而不必记住在第三个和第六个单元之前运行第五个单元两次。</p><blockquote class="mt mu mv"><p id="6dac" class="kz la mw lb b lc ld ju le lf lg jx lh mx lj lk ll my ln lo lp mz lr ls lt lu im bi translated">你……应该以这样一种方式写笔记本，任何人都可以用同样的输入重新运行它，并产生同样的输出。你的笔记本应该是从上到下可执行的…</p><p id="db73" class="kz la mw lb b lc ld ju le lf lg jx lh mx lj lk ll my ln lo lp mz lr ls lt lu im bi translated"><a class="ae ky" href="https://cloud.google.com/blog/products/ai-machine-learning/best-practices-that-can-improve-the-life-of-any-developer-using-jupyter-notebooks" rel="noopener ugc nofollow" target="_blank"> —谷歌的 Jupyter 笔记本宣言</a></p></blockquote><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi na"><img src="../Images/29ee6bba7fa39d00d56839756dbceb46.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*cKAXXMoata4yk9KawRXtpw.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">示例:单元格不按顺序运行时出错—图片由作者提供</p></figure><p id="9c50" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">确保我们的笔记本从上到下运行无误，让笔记本看起来更专业。</p><p id="8fca" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">也许，更重要的是，确保笔记本从上到下无错运行让我们离生产就绪代码更近了一步。</p><h2 id="6a33" class="lv lw it bd lx ly lz dn ma mb mc dp md li me mf mg lm mh mi mj lq mk ml mm mn bi translated">在一个牢房里放太多东西</h2><p id="f795" class="pw-post-body-paragraph kz la it lb b lc mo ju le lf mp jx lh li mq lk ll lm mr lo lp lq ms ls lt lu im bi translated">Jupyter 笔记本与典型的文本编辑器(如 VSCode 或 Sublime Text)的真正区别在于，它让您能够单步调试代码，并可视化每一步的输出。</p><p id="26ba" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">它将变量保存在内存中，允许我们不断编写和更正代码，而不必等待潜在的耗时操作，如在每次微小的更改后读取大型数据集或模型训练。</p><p id="982c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">当我们开始用太多的代码使一个单元过于拥挤时，我们就失去了一些使 Juypter 如此伟大的交互性。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nb"><img src="../Images/59a92dc91accda576e1dadffd3a6dbb5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1012/format:webp/1*ANQgivy-8Zgz2-T-itP5sQ.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">例子:在一个单元格中塞进太多东西——作者图片</p></figure><p id="5244" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">当你把所有的东西都塞进一个单元时，这个单元中的所有代码都会被立即执行，你就失去了看到每一步发生了什么的能力。这也使得真正看到每一步在做什么变得更加困难。</p><p id="917b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">因为只有单元格的最后一行被自动打印到屏幕上，所以如果我们不小心将 print 语句添加到我们想要查看输出的行中，我们可能会丢失一些输出，如上图所示。</p><p id="bb4b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">将所有的代码都塞进一个单元格中会减少交互结果，并且会隐藏关键细节。</p><p id="6960" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我并不是说要将每个单元限制为只有一行代码，而是以一种有意义的方式对代码进行分组。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nc"><img src="../Images/5284276a7840f83a9fdab6f4ebf7488d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1044/format:webp/1*Kl5CP3knyv8rZnqTxj-N3g.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">示例:以流畅且有意义的方式对代码进行分组——图片由作者提供</p></figure><p id="db75" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这样更好看！每个单元格中的代码完成一项任务，并打印出关键信息，让我们知道代码按预期工作，并让我们看到数据的样子。</p><h2 id="8def" class="lv lw it bd lx ly lz dn ma mb mc dp md li me mf mg lm mh mi mj lq mk ml mm mn bi translated">没有利用降价单元格</h2><p id="fb3c" class="pw-post-body-paragraph kz la it lb b lc mo ju le lf mp jx lh li mq lk ll lm mr lo lp lq ms ls lt lu im bi translated">降价太棒了！它允许我们在笔记本上添加带有格式的叙述性文本，并可以使我们的工作更加完美，为演示做好准备。</p><p id="1fa5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">降价指南提供了一个很棒的<a class="ae ky" href="https://www.markdownguide.org/cheat-sheet/" rel="noopener ugc nofollow" target="_blank">备忘单</a>来帮助你开始。要使用键盘快捷键创建 Markdown 单元格，请按 esc 键，然后按 m 键。</p><p id="65fe" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我喜欢使用降价单元格来创建我的分析计划。例如，当开始一个带回家的挑战时，就像我们在这里讨论的例子<a class="ae ky" rel="noopener" target="_blank" href="/tackling-the-take-home-challenge-7c2148fb999e"/>，我们可以使用 Markdown 作为一个清单来给出我们的分析方向，并让我们专注于手头的任务。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nd"><img src="../Images/a322260d31dbc3b8127a2192f6b02f34.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Dta3e95sj-Z0Oi6K-6NQOQ.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">使用 Markdown 的 EDA 计划—图片由作者提供</p></figure><p id="df9d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在我们有了一个计划，我们可以开始编写满足每个目标的代码。尤其是在处理一个新的和不熟悉的数据集时，创建一个减价待办事项列表可以帮助指导我们的分析，并让我们保持专注。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ne"><img src="../Images/aeabd8114c8d14fc58554f6a5189710c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*BcP5Zn-L1efkOJajsYaUiw.png"/></div></div></figure><p id="f2ef" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">准备演示时，减价也非常有用。我们可以添加我们的想法和见解，为向利益相关者展示我们的分析做准备。</p><p id="5cd9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在展示我们的笔记本电脑时，无论是在代码审查中还是对业务用户，具有关键洞察力的 Markdown 单元格都非常有帮助。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nf"><img src="../Images/c82f5e2af81cbbefa586bc39ce87921b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Rng5-8ojyZT--Iy9qZ__GQ.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">示例:使用 Markdown 对可视化效果进行评论—按作者排序的图像</p></figure><h2 id="8d6b" class="lv lw it bd lx ly lz dn ma mb mc dp md li me mf mg lm mh mi mj lq mk ml mm mn bi translated">在整个笔记本中导入包</h2><p id="1485" class="pw-post-body-paragraph kz la it lb b lc mo ju le lf mp jx lh li mq lk ll lm mr lo lp lq ms ls lt lu im bi translated">当使用笔记本工作时，很多时候我发现自己需要导入一个我没有马上想到的包。</p><p id="55f8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">虽然在目前，将导入语句添加到当前单元格会更容易和更快，但我们不应该这样做！</p><p id="2bf3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">一个好的做法是在笔记本的第一个代码单元中添加所有的导入语句。</p><p id="f953" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这不仅使我们的笔记本看起来更精致、更专业，而且还可以帮助我们在想要将笔记本转换为生产就绪脚本时省去麻烦。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ng"><img src="../Images/09c5837bb3f799ad3c1358f10f016445.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*YvEI4uy0b2eY-UvZzxPuPQ.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">示例:在整个笔记本中导入包—按作者排序的图像</p></figure><p id="8c98" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">虽然我们的代码没有错误运行——笔记本可能从上到下运行，上面的例子看起来很混乱，有点令人困惑。</p><p id="7501" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在笔记本上工作时，意识到我们在分析中途需要另一个包是完全正常的，我们应该尝试将所有的导入语句放在第一个单元格中。相信我——你未来的自己会感谢你的！</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nh"><img src="../Images/15d213ec605571f88e4bd69d31ef8d3f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_bikgy9OVU9pBdiWgtiqDg.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">示例:第一个单元格中的所有导入语句-按作者排序的图像</p></figure><h2 id="8c29" class="lv lw it bd lx ly lz dn ma mb mc dp md li me mf mg lm mh mi mj lq mk ml mm mn bi translated">结论</h2><p id="3d53" class="pw-post-body-paragraph kz la it lb b lc mo ju le lf mp jx lh li mq lk ll lm mr lo lp lq ms ls lt lu im bi translated">在这里，我们讨论了使用 Jupyter 笔记本进行开发时要避免的一些常见做法。纠正这些不良做法将有助于我们的笔记本看起来更完美，并向生产更近一步。</p><p id="d52a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我有没有漏掉什么不好的笔记本做法？我很想在评论中听到你对朱庇特的抱怨！</p></div></div>    
</body>
</html>