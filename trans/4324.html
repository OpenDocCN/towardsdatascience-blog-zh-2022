<html>
<head>
<title>Design Patterns with Python for Machine Learning Engineers: Observer</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用Python为机器学习工程师设计模式:观察者</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/design-patterns-with-python-for-machine-learning-engineers-observer-23cde7ecb2ed#2022-09-25">https://towardsdatascience.com/design-patterns-with-python-for-machine-learning-engineers-observer-23cde7ecb2ed#2022-09-25</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><figure class="ip iq gp gr ir is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi io"><img src="../Images/cc7e2efd3ba62847c142479271e65531.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*Z9j8zIgWglvcjnI7"/></div></div><p class="iz ja gj gh gi jb jc bd b be z dk translated"><a class="ae jd" href="https://unsplash.com/@ninjason?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">梁杰森</a>在<a class="ae jd" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</p></figure><div class=""/><div class=""><h2 id="11aa" class="pw-subtitle-paragraph kd jf jg bd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku dk translated">通过一个基于Instagram的例子了解如何使用观察者设计模式</h2></div><h1 id="77d8" class="kv kw jg bd kx ky kz la lb lc ld le lf km lg kn lh kp li kq lj ks lk kt ll lm bi translated">介绍</h1><p id="c7aa" class="pw-post-body-paragraph ln lo jg lp b lq lr kh ls lt lu kk lv lw lx ly lz ma mb mc md me mf mg mh mi ij bi translated">在我的上一篇文章“用Python为机器学习工程师设计模式:抽象工厂”中，我介绍了设计模式，以及为什么了解它们并能够使用它们很重要。我还深入研究了本系列的第一个设计模式AbstractFactory。如果你还没有读过，我建议你看一看。</p><p id="1bc5" class="pw-post-body-paragraph ln lo jg lp b lq mj kh ls lt mk kk lv lw ml ly lz ma mm mc md me mn mg mh mi ij bi translated">为了快速总结计算机科学中的设计模式，特别是在软件工程中，它是一个概念，可以被定义为对一个重复出现的问题的通用设计解决方案。它是一种描述或逻辑模型，用于解决在软件设计和开发阶段的不同情况下可能出现的问题，甚至在计算部分的求解算法定义之前。</p><p id="f49a" class="pw-post-body-paragraph ln lo jg lp b lq mj kh ls lt mk kk lv lw ml ly lz ma mm mc md me mn mg mh mi ij bi translated">设计模式总是由5个元素定义:<em class="mo">名称、问题、解决方案和结果。</em></p><p id="f69b" class="pw-post-body-paragraph ln lo jg lp b lq mj kh ls lt mk kk lv lw ml ly lz ma mm mc md me mn mg mh mi ij bi translated">根据设计模式所解决的问题以及模式是应用于类还是对象，设计模式有多种类型。在下图中，您可以看到最常见的设计模式。</p><figure class="mq mr ms mt gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi mp"><img src="../Images/c1602ee1fa40086a7bc72df803b82b0f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*ks8T-OIXxWtU7buk.png"/></div></div><p class="iz ja gj gh gi jb jc bd b be z dk translated">设计模式(作者图片)</p></figure><h1 id="1a03" class="kv kw jg bd kx ky kz la lb lc ld le lf km lg kn lh kp li kq lj ks lk kt ll lm bi translated">观察者</h1><p id="b36b" class="pw-post-body-paragraph ln lo jg lp b lq lr kh ls lt lu kk lv lw lx ly lz ma mb mc md me mf mg mh mi ij bi translated">在我看来，理解如何定义设计模式的最简单的方法是通过展示一个例子，让我们从观察者设计模式开始！</p><p id="e1bb" class="pw-post-body-paragraph ln lo jg lp b lq mj kh ls lt mk kk lv lw ml ly lz ma mm mc md me mn mg mh mi ij bi translated">假设你是一个足球迷，你最喜欢的球员是克里斯蒂亚诺罗纳尔多。你充满热情，想要知道关于这个球员的每一条新闻和更新，所以你决定在Instagram上关注他。<br/>现在你关注了克里斯蒂亚诺·罗纳尔多，每次他在Instagram上发布帖子或做出动作，你都会收到通知，所有内容都会出现在你的订阅源中。<br/>在这个模式中，我们有两个演员，你是<strong class="lp jh">观察者</strong>，而c罗是<strong class="lp jh">主体</strong>。</p><p id="f673" class="pw-post-body-paragraph ln lo jg lp b lq mj kh ls lt mk kk lv lw ml ly lz ma mm mc md me mn mg mh mi ij bi translated">但你会很容易明白，这不可能是一对一的关系。克里斯蒂亚诺罗纳尔多是Instagram上最受关注的账户之一，迄今为止拥有大约4 . 82亿关注者。这会让你明白<strong class="lp jh">一个主题可以有多个观察者</strong>，他们都对他的更新感兴趣。所以<strong class="lp jh">关系</strong>必须是<strong class="lp jh">一对多</strong>类型的。</p><figure class="mq mr ms mt gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi mu"><img src="../Images/f3e932e9977bc4ffd5730f61b0c05aa8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*EEkx8bpNgZqOA4q6jHXR0Q.png"/></div></div><p class="iz ja gj gh gi jb jc bd b be z dk translated">主体与观察者的关系(图片由作者提供)</p></figure><h1 id="ca87" class="kv kw jg bd kx ky kz la lb lc ld le lf km lg kn lh kp li kq lj ks lk kt ll lm bi translated">类图</h1><p id="c667" class="pw-post-body-paragraph ln lo jg lp b lq lr kh ls lt lu kk lv lw lx ly lz ma mb mc md me mf mg mh mi ij bi translated">在我向您展示如何用Python实现这种设计模式之前，我为您带来了一个带有类图的图像，以便您能够理解需要应用的类和方法之间的关系。</p><figure class="mq mr ms mt gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi mv"><img src="../Images/43107264b00d500e13483b25e028c981.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*nPq4NZZbZYIK0vphni3dIw.png"/></div></div><p class="iz ja gj gh gi jb jc bd b be z dk translated">类图(图片由作者提供)</p></figure><ul class=""><li id="07f1" class="mw mx jg lp b lq mj lt mk lw my ma mz me na mi nb nc nd ne bi translated">观察者和主体是界面</li><li id="0db2" class="mw mx jg lp b lq nf lt ng lw nh ma ni me nj mi nb nc nd ne bi translated">所有需要数据的观察者都需要实现观察者接口。</li><li id="5f5b" class="mw mx jg lp b lq nf lt ng lw nh ma ni me nj mi nb nc nd ne bi translated">notify()方法定义了当主体提供其数据时要采取的动作。</li><li id="66a6" class="mw mx jg lp b lq nf lt ng lw nh ma ni me nj mi nb nc nd ne bi translated">该主题维护一个名为“观察者”的观察集合，它是当前注册的观察者的列表。</li><li id="0f9a" class="mw mx jg lp b lq nf lt ng lw nh ma ni me nj mi nb nc nd ne bi translated">registerObserver()和unregisterObserver()分别是添加和移除观察器的方法。</li><li id="3d43" class="mw mx jg lp b lq nf lt ng lw nh ma ni me nj mi nb nc nd ne bi translated">当数据发生更改并且需要向观察器提供新数据时，会调用notifyObservers()。</li></ul><h2 id="6a78" class="nk kw jg bd kx nl nm dn lb nn no dp lf lw np nq lh ma nr ns lj me nt nu ll nv bi translated">我们来编码吧！</h2><p id="6a97" class="pw-post-body-paragraph ln lo jg lp b lq lr kh ls lt lu kk lv lw lx ly lz ma mb mc md me mf mg mh mi ij bi translated">首先，我们创建抽象类Observer和Subject。在Python中，要创建一个抽象类，你必须继承ABC。观察者将拥有一个update()抽象方法，当他关注的VIP账户发布新内容时，该方法会立即通知他。<br/>而主题，即拥有众多关注者的VIP有3个抽象功能，一个用于注册新用户，一个用于删除他，另一个(最重要的)用于通知他的所有关注者他创建了一个新帖子。</p><figure class="mq mr ms mt gt is"><div class="bz fp l di"><div class="nw nx l"/></div></figure><p id="f5cc" class="pw-post-body-paragraph ln lo jg lp b lq mj kh ls lt mk kk lv lw ml ly lz ma mm mc md me mn mg mh mi ij bi translated">现在我们创建InstaVIP类，即负责实例化我们的VIP(如Cristiano Ronaldo)的类。<br/>注意，notifyObserver滚动查看名为observers_collection的列表中保存的所有VIP关注者，以通知他们。</p><figure class="mq mr ms mt gt is"><div class="bz fp l di"><div class="nw nx l"/></div></figure><p id="5955" class="pw-post-body-paragraph ln lo jg lp b lq mj kh ls lt mk kk lv lw ml ly lz ma mm mc md me mn mg mh mi ij bi translated">现在我们发展跟随者类，也就是我们观察者的类。每个观察者由一个用户名定义。在这个类中，我们应该定义update()方法，每当VIP发布内容时都会调用这个方法。理想情况下，这种方法将更新我们的Instagram提要，但在这种情况下，它只会简单地打印出VIP发布了新内容的事实。</p><figure class="mq mr ms mt gt is"><div class="bz fp l di"><div class="nw nx l"/></div></figure><p id="ddfe" class="pw-post-body-paragraph ln lo jg lp b lq mj kh ls lt mk kk lv lw ml ly lz ma mm mc md me mn mg mh mi ij bi translated">现在我们主要创建两个Instagram账户:<a class="ae jd" href="http://twitter.com/theRealAccount1" rel="noopener ugc nofollow" target="_blank">@真实账户1 </a>和<a class="ae jd" href="http://twitter.com/account2Official" rel="noopener ugc nofollow" target="_blank">@官方账户2</a>。然后，我们实例化我们的VIP克里斯蒂亚诺罗纳尔多。<br/>受试者必须注册我们的关注，当这两个账户在罗纳尔多的Instagram账户中点击“关注”时，就会发生这种情况。<br/>现在c罗将使用new post()方法创建一个新帖子。</p><figure class="mq mr ms mt gt is"><div class="bz fp l di"><div class="nw nx l"/></div></figure><p id="fec2" class="pw-post-body-paragraph ln lo jg lp b lq mj kh ls lt mk kk lv lw ml ly lz ma mm mc md me mn mg mh mi ij bi translated">在生成克里斯蒂亚诺罗纳尔多的新帖子时，将调用两个帐户的更新方法，这实际上将打印:</p><pre class="mq mr ms mt gt ny nz oa ob aw oc bi"><span id="36a4" class="nk kw jg nz b gy od oe l of og">created new post<br/>notification for @theRealAccount1 : new post created by Ronaldo notification for @account2Official : new post created by Ronaldo</span></pre><h1 id="8184" class="kv kw jg bd kx ky kz la lb lc ld le lf km lg kn lh kp li kq lj ks lk kt ll lm bi translated">最后的想法</h1><blockquote class="oh oi oj"><p id="cefe" class="ln lo mo lp b lq mj kh ls lt mk kk lv ok ml ly lz ol mm mc md om mn mg mh mi ij bi translated">设计模式描述了一个经常重复出现的问题，并根据类/对象组织提出了一种可能的解决方案，这种解决方案通常被认为可以有效地解决问题本身。</p></blockquote><p id="5280" class="pw-post-body-paragraph ln lo jg lp b lq mj kh ls lt mk kk lv lw ml ly lz ma mm mc md me mn mg mh mi ij bi translated">这种模式被广泛使用:它被用于许多库、GUI工具包、MVC架构模式、消息传递和实时系统。</p><p id="818c" class="pw-post-body-paragraph ln lo jg lp b lq mj kh ls lt mk kk lv lw ml ly lz ma mm mc md me mn mg mh mi ij bi translated">这种设计模式带来了多种优势:</p><ul class=""><li id="7c94" class="mw mx jg lp b lq mj lt mk lw my ma mz me na mi nb nc nd ne bi translated">该模式是应用使对象之间的耦合尽可能弱的原则的一个很好的例子。所以，增加了所谓的宽松。</li><li id="078c" class="mw mx jg lp b lq nf lt ng lw nh ma ni me nj mi nb nc nd ne bi translated">它允许将数据有效地发送到其他对象，而不需要对Subject或Observer类进行任何更改。</li><li id="d37c" class="mw mx jg lp b lq nf lt ng lw nh ma ni me nj mi nb nc nd ne bi translated">受试者和观察者是独立的，其中一个组件的变化不需要另一个组件的变化。</li><li id="a30f" class="mw mx jg lp b lq nf lt ng lw nh ma ni me nj mi nb nc nd ne bi translated">观察员可以随时添加/删除</li></ul><p id="a7b0" class="pw-post-body-paragraph ln lo jg lp b lq mj kh ls lt mk kk lv lw ml ly lz ma mm mc md me mn mg mh mi ij bi translated">在各种各样的应用程序中，我们发现了同样的问题，即需要在主题更改数据时得到通知(例如，see已经发布了一些内容)，这种设计模式如果应用得当，可以让我们的生活变得更加轻松！在未来的文章中，我将讨论机器学习工程师需要知道的其他设计模式，以便能够编写干净的结构化代码。</p><h1 id="8c76" class="kv kw jg bd kx ky kz la lb lc ld le lf km lg kn lh kp li kq lj ks lk kt ll lm bi translated">结束了</h1><p id="0afd" class="pw-post-body-paragraph ln lo jg lp b lq lr kh ls lt lu kk lv lw lx ly lz ma mb mc md me mf mg mh mi ij bi translated"><em class="mo">马赛洛·波利蒂</em></p><p id="b5bc" class="pw-post-body-paragraph ln lo jg lp b lq mj kh ls lt mk kk lv lw ml ly lz ma mm mc md me mn mg mh mi ij bi translated"><a class="ae jd" href="https://www.linkedin.com/in/marcello-politi/" rel="noopener ugc nofollow" target="_blank"> Linkedin </a>，<a class="ae jd" href="https://twitter.com/_March08_" rel="noopener ugc nofollow" target="_blank"> Twitter </a>，<a class="ae jd" href="https://march-08.github.io/digital-cv/" rel="noopener ugc nofollow" target="_blank"> CV </a></p></div></div>    
</body>
</html>