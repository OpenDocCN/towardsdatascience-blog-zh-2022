<html>
<head>
<title>Better Churn Prediction — Using Survival Analysis</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">更好的客户流失预测—使用生存分析</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/better-churn-prediction-part-2-5a1086fd3f51#2022-10-31">https://towardsdatascience.com/better-churn-prediction-part-2-5a1086fd3f51#2022-10-31</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="9a4f" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">回答“何时”的问题</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/4271cad3cac03e4023438611a0fdb239.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*FLylSyIzFF9ttJe-"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">由<a class="ae kv" href="https://unsplash.com/@markusspiske?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">马库斯·斯皮斯克</a>在<a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure><p id="6f9c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在之前的<a class="ae kv" rel="noopener" target="_blank" href="/better-churn-prediction-f88b20c923f3">帖子</a>中，我提出了生存分析对于更好地预测客户流失是必不可少的。我的主要论点是，客户流失不是“谁”的问题，而是“何时”的问题。</p><p id="e87e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在“何时”问题中，我们问用户何时会流失？换句话说，用户平均订阅多长时间？然后，我们可以回答一个最重要的问题:订户的平均生命周期值是多少？</p><p id="8f3f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">让我们卷起袖子开始吧:生存曲线S(t)衡量订户从开始订阅到时间t“存活”(而不是流失)的概率。例如，S(3)=0.8意味着订户在订阅的第3个月有80%的机会不进行交易。</p><p id="00d3" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">估算S(t)最常用的方法是使用卡普兰-迈耶曲线，其公式如下:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi ls"><img src="../Images/21c998b0d3526f109f7c5323b460c254.png" data-original-src="https://miro.medium.com/v2/resize:fit:1028/format:webp/1*yYwlYds0IQTdCYH-PpFLWg.png"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">作者图片</p></figure><p id="3b85" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">其中，t_i是至少有一个用户流失的所有时间，d_i是在t_i时流失的用户数量，n_i是至少存活到t_i时的用户数量，我们可以将d_i/n_i项视为t_i时的流失率。</p><p id="ee61" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">为了说明，让我们计算以下订户数据的存活曲线:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi lt"><img src="../Images/c2d6b70613deacd3e164a3cd80e396f3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1124/format:webp/1*WpuZSts-YjkXnqOwVSzyTg.png"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">作者图片</p></figure><p id="d534" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">列t表示到今天为止用户已经订阅的时间。如果他搅拌，这将是他搅拌的时间。</p><p id="56a2" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们有2次流失事件发生的时间:t_i = {2，6}。</p><p id="ac3e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">对于t &lt; 2，我们有S(t)=1，因为没有人搅拌到这一点。</p><p id="7dae" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在t_1=2时，我们有d_1=2(订户3和6)和n_1=5(除了4之外的所有订户)。使用上面的公式，我们得到:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi lu"><img src="../Images/1f67700cfbacd426de4b1dc6bf2696f9.png" data-original-src="https://miro.medium.com/v2/resize:fit:920/format:webp/1*2UVR1tInophA7PZ_9JXowQ.png"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">作者图片</p></figure><p id="feff" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在t_2=6时，我们有d_2=1(订户2)和n_2=1(同样，只有订户2)。</p><p id="8286" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">因此，我们有:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi lv"><img src="../Images/c5f2442494d305979df787d57e4dd3ca.png" data-original-src="https://miro.medium.com/v2/resize:fit:1396/format:webp/1*LKdNt6-BgFwn0ElvNRJ3GA.png"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">作者图片</p></figure><p id="ad3e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">让我们画出这条曲线:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi lw"><img src="../Images/1a63bf7993903274a5fe568120aa287e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*t-uB0Md2SY2Zpe4A.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">作者图片</p></figure><p id="f5d4" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这里需要注意的一点是，在曲线上的每一点，我们只考虑存活到该点的订户。如果订户是最近加入的(例如订户4 ),则他在计算中不会起主要作用。</p><p id="64cc" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">实际上，您最好使用R <code class="fe lx ly lz ma b"><a class="ae kv" href="https://cran.r-project.org/web/packages/survival/" rel="noopener ugc nofollow" target="_blank">survival</a></code>包或python <code class="fe lx ly lz ma b"><a class="ae kv" href="https://lifelines.readthedocs.io/en/latest/" rel="noopener ugc nofollow" target="_blank">lifelines</a></code>库中的生存曲线实现。</p><h1 id="462b" class="mb mc iq bd md me mf mg mh mi mj mk ml jw mm jx mn jz mo ka mp kc mq kd mr ms bi translated">预期寿命</h1><p id="d222" class="pw-post-body-paragraph kw kx iq ky b kz mt jr lb lc mu ju le lf mv lh li lj mw ll lm ln mx lp lq lr ij bi translated">那么，为什么要首先计算S(t)呢？结果是预期寿命是生存曲线下的面积(这里我不打算证明)。</p><p id="d92c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">所以在我们上面的例子中:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi my"><img src="../Images/4618d00f67fc962a9b609302df06afbf.png" data-original-src="https://miro.medium.com/v2/resize:fit:800/format:webp/1*iRXmiBPyIBiMObLLlV0qeQ.png"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">作者图片</p></figure><p id="afcf" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">例如，如果用户的月计划账单是10美元，那么我们可以说他的预期LTV(生命周期价值)是44美元。</p><h1 id="2925" class="mb mc iq bd md me mf mg mh mi mj mk ml jw mm jx mn jz mo ka mp kc mq kd mr ms bi translated">更好地回答“谁”的问题</h1><p id="9c59" class="pw-post-body-paragraph kw kx iq ky b kz mt jr lb lc mu ju le lf mv lh li lj mw ll lm ln mx lp lq lr ij bi translated">在这篇文章中，我们看到了如何使用生存曲线来回答“何时”的问题——平均订阅多长时间。我们看到这可以用来表示订户的价值。</p><p id="7ffe" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">有时候，我们实际上也可能对“谁”这个问题感兴趣。例如“哪些订户在订阅的第一个月内最有可能流失”？在我的下一篇文章中，我将展示使用生存曲线我们也能更好地回答这个问题！</p></div><div class="ab cl mz na hu nb" role="separator"><span class="nc bw bk nd ne nf"/><span class="nc bw bk nd ne nf"/><span class="nc bw bk nd ne"/></div><div class="ij ik il im in"><p id="ce48" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><em class="ng">原载于2022年10月31日</em><a class="ae kv" href="https://iyarlin.github.io/2022/10/31/better_churn_modeling_part_2/" rel="noopener ugc nofollow" target="_blank"><em class="ng">https://iyarlin . github . io</em></a><em class="ng">。</em></p></div></div>    
</body>
</html>