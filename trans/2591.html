<html>
<head>
<title>Power BI Aggregations — the Ultimate Guide</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Power BI聚合——终极指南</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/power-bi-aggregations-the-ultimate-guide-abd38fee0e78#2022-06-06">https://towardsdatascience.com/power-bi-aggregations-the-ultimate-guide-abd38fee0e78#2022-06-06</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="1176" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">聚合是Power BI中最强大的特性之一！了解如何利用这一特性来提高您的Power BI解决方案的性能！</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/d40c5955392f4cfb73c38046122b880f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*AkO8P6gyZUTPWAajB_IiQQ.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><p id="69a5" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">在<a class="ae lu" href="https://medium.com/p/f4ab9fceb28c" rel="noopener">上一篇文章</a>中，在解释复合模型特性时，我们为另一个极其重要和强大的概念——聚合——打下了坚实的基础！这是因为在许多场景中，尤其是在企业级模型中，聚合是复合模型的自然“成分”。</p><p id="da53" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">然而，由于复合模型特性也可以在不涉及聚合的情况下得到利用，我认为将这两个概念分开放在不同的文章中是有意义的。</p><p id="c211" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">在我们解释聚合如何在Power BI中工作并查看一些具体的用例之前，让我们首先回答以下问题:</p><h1 id="d908" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">为什么我们首先需要聚合？模型中有两个具有相同数据的表有什么好处？</h1><p id="c450" class="pw-post-body-paragraph ky kz it la b lb mn ju ld le mo jx lg lh mp lj lk ll mq ln lo lp mr lr ls lt im bi translated">在我们阐明这两点之前，重要的是要记住在Power BI中有两种不同类型的聚合。</p><ul class=""><li id="aca3" class="ms mt it la b lb lc le lf lh mu ll mv lp mw lt mx my mz na bi translated"><strong class="la iu"> <em class="nb">用户定义的聚合</em> </strong>直到几个月前还是Power BI中唯一的聚合类型。在这里，您负责定义和管理聚合，尽管Power BI稍后会在执行查询时自动识别聚合。</li><li id="82a7" class="ms mt it la b lb nc le nd lh ne ll nf lp ng lt mx my mz na bi translated"><strong class="la iu"> <em class="nb">自动聚合</em> </strong>是Power BI中较新的特性之一，最近刚刚作为通用特性发布。启用自动聚合功能后，您可以喝杯咖啡，坐下来放松一下，因为机器学习算法将收集您报告中最常运行的查询的数据，并自动构建聚合来支持这些查询。</li></ul><p id="85cb" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">这两种类型之间的重要区别是许可限制，当然，除了自动聚合之外，您不需要做任何事情，只需在您的租户中打开该功能。虽然用户定义的聚合可用于高级版和专业版，但目前自动聚合需要高级版许可证。</p><p id="0a9c" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">从现在开始，我们将只讨论用户定义的聚合，请记住这一点。</p><p id="1043" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">好了，下面是对聚合以及它们在Power BI中的工作方式的简短解释。场景是这样的:您有一个非常大的事实表，它可能包含数亿甚至数十亿行。那么，如何处理如此大量数据的分析请求呢？</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nh"><img src="../Images/f27efd85ad250196dfb882f6b016b04c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dQiltXva-nBl9HDCkLA-Rw.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><p id="b0d2" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">您只需创建聚合表！在现实中，这是一种非常罕见的情况，或者说这是一种例外而不是规则，分析要求是将单个交易或单个记录视为最低级别的细节。在大多数情况下，您希望对汇总数据进行分析:比如，我们在某一天有多少收入？或者，产品X的总销售额是多少？进一步说，顾客X总共花了多少钱？</p><p id="746c" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">此外，您可以聚合多个属性的数据(这是通常的情况),并汇总特定日期、客户和产品的数据。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nh"><img src="../Images/3351d58bb9f37501d380199b4316ecbf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*aH17d0p508SL2n01-Dy4JQ.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><p id="eff5" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">如果您想知道聚集数据有什么意义，那么，最终目标是通过预先准备数据来减少行数，从而减少整个数据模型的大小。</p><p id="4199" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">因此，如果我需要查看客户X在今年第一季度在产品Y上花费的总销售额，我可以利用已经预先汇总的数据。</p><h1 id="51d8" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">关键“成分”——让Power BI“意识到”聚合！</h1><p id="3760" class="pw-post-body-paragraph ky kz it la b lb mn ju ld le mo jx lg lh mp lj lk ll mq ln lo lp mr lr ls lt im bi translated">好了，这是故事的一面。现在更有趣的部分来了。创建聚合本身并不足以加快Power BI报告的速度，您需要让Power BI知道聚合！</p><p id="efc4" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">在我们进一步讨论之前，有一点需要注意:只有当原始事实表使用DirectQuery存储模式时，聚合意识才会起作用。我们将很快解释如何设计和管理聚合，以及如何为表设置适当的存储模式。此时，只需记住原始事实表应该处于DirectQuery模式。</p><h1 id="b53d" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">让我们开始构建我们的聚合吧！</h1><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ni"><img src="../Images/eebcf64a8b99ca47f1c165c66dd7886b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_pcXsuAOJq1Zj88G3d2YQg.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><p id="4f96" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">如上图所示，我们的模型相当简单，由一个事实表(FactOnlineSales)和三个维度(DimDate、DimStore和DimProduct)组成。所有表当前都使用DirectQuery存储模式。</p><p id="34b5" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">让我们创建另外两个表，我们将使用它们作为聚合表:第一个表将根据日期和产品对数据进行分组，而另一个表将使用日期和商店进行分组:</p><pre class="kj kk kl km gt nj nk nl nm aw nn bi"><span id="86c8" class="no lw it nk b gy np nq l nr ns">/*Table 1: Agg Data per Date &amp; Product */<br/>SELECT DateKey<br/>       ,ProductKey<br/>       ,SUM(SalesAmount) AS SalesAmount<br/>       ,SUM(SalesQuantity) AS SalesQuantity <br/>FROM FactOnlineSales <br/>GROUP BY DateKey<br/>        ,ProductKey</span><span id="74b6" class="no lw it nk b gy nt nq l nr ns">/*Table 2: Agg Data per Date &amp; Store */<br/>SELECT DateKey<br/>       ,StoreKey<br/>       ,SUM(SalesAmount) AS SalesAmount<br/>       ,SUM(SalesQuantity) AS SalesQuantity <br/>FROM FactOnlineSales <br/>GROUP BY DateKey<br/>        ,StoreKey</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nh"><img src="../Images/a022c421722e96ece770a903ec500ccb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*nBsApkPmrjgqApanDavepg.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><p id="9e2f" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我已经将这些查询分别重命名为销售产品Agg和销售商店Agg，并关闭了超级查询编辑器。</p><p id="2897" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">由于我们希望大多数查询(这些查询检索按日期和/或产品/商店汇总的数据)获得最佳性能，我将把新创建的聚合表的存储模式从DirectQuery切换到Import:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nh"><img src="../Images/078fe0272bb86b69f09fbef477957786.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*e_tvVBr5VZMxn8KOYIDuuw.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><p id="d608" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">现在，这些表被加载到缓存中，但是它们仍然没有连接到我们现有的维度表。让我们创建维度和聚合表之间的关系:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nh"><img src="../Images/eef37492d9fc8fd2cb4f9f8bdb02277a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*pAznHhUjaarmMVd-v7WTCA.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><p id="a972" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">在我们继续之前，让我停下来解释一下当我们建立关系时发生了什么。如果您还记得我们以前的文章，我提到过在Power BI中有两种类型的关系:常规的和有限的。这一点很重要:每当来自不同源组的表之间存在关系时(导入模式是一个源组，DirectQuery是另一个源组)，您将拥有有限的关系！尽管有种种限制和约束。</p><p id="bbb6" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">但是，我有好消息告诉你！如果我将维度表的存储模式切换到Dual，这意味着它们也将被加载到高速缓存中，并且根据查询时哪个事实表提供数据，维度表将表现为导入模式(如果查询的目标是导入模式事实表)或DirectQuery(如果查询从DirectQuery中的原始事实表检索数据):</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nh"><img src="../Images/bd950a0909478c0a66f7a87b1695f91c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9ds6er9uvo0ZGh6aduCk9w.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><p id="c329" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">正如你可能注意到的，不再有有限的关系，这太棒了！</p><p id="9a7c" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">总而言之，我们的模型配置如下:</p><ul class=""><li id="9450" class="ms mt it la b lb lc le lf lh mu ll mv lp mw lt mx my mz na bi translated">原始FactOnlineSales表(包含所有详细数据)— DirectQuery</li><li id="a345" class="ms mt it la b lb nc le nd lh ne ll nf lp ng lt mx my mz na bi translated">维度表(DimDate、DimProduct、dim store)-Dual</li><li id="b109" class="ms mt it la b lb nc le nd lh ne ll nf lp ng lt mx my mz na bi translated">汇总表(销售产品汇总和销售商店汇总)—导入</li></ul><p id="326b" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">厉害！现在我们有了聚合表，查询应该运行得更快了，对吗？哔！不对！</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nh"><img src="../Images/c6e55e367f3729d663533662b58148a1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*x4tzdxzLgcQUx3Tk9Q3w1Q.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><p id="7763" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">Table visual正好包含我们在销售产品Agg表中预聚合的这些列——那么，Power BI究竟为什么运行DirectQuery而不是从导入的表中获取数据呢？这是一个公平的问题！</p><p id="6ea5" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">还记得我在开始时告诉你，我们需要让Power BI <strong class="la iu"> <em class="nb">知道聚合表的</em> </strong>，这样它就可以在查询中使用了。</p><p id="0e5f" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">让我们回到Power BI Desktop，这样做:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nh"><img src="../Images/ab58a921bbc8cde64f318ace96d509ed.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ov3vfqO7wGCGirFSFU0wPA.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><p id="4f47" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">右键单击销售产品聚合表，然后选择管理聚合选项:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nu"><img src="../Images/796a6c13e6413aa6dbd87f6c45a0466f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*YRStpv5EN2dEM9fs-K56SQ.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><p id="8b06" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">这里有一些重要的说明:为了让聚合工作，原始事实表和聚合表中的列之间的<em class="nb">数据类型必须匹配</em>！在我的例子中，我必须将聚合表中SalesAmount列的数据类型从“十进制数”更改为“固定十进制数”。</p><p id="c08b" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">此外，您会看到以红色书写的消息:这意味着，一旦您创建了一个聚合表，它将对最终用户隐藏！我对第二个聚合表(Store)应用了完全相同的步骤，现在这些表被隐藏了:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nh"><img src="../Images/a401b64c7e1569500dae0f1324e8d268.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zjTcLgdRxTGR7vC-2P_BPA.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><p id="cacc" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">现在让我们返回并刷新我们的报告页面，看看是否发生了变化:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nh"><img src="../Images/b491fb78d9b359dc10c6a2decc5c0b4e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*57LSYCGYeVQ_b0rEwyEK8Q.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><p id="bc6e" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">不错！这一次没有使用DirectQuery，呈现这个视觉效果几乎需要2秒钟，而这次只花了58毫秒！此外，如果我抓取查询并转到DAX Studio查看发生了什么…</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nh"><img src="../Images/48d0c0b48a5d55935871aff28a16033c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fm45S6RRCIjNJLdSWSTlCA.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><p id="ec35" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">如您所见，原始查询被映射到导入模式下的聚集表，消息“Match found”清楚地表明可视化数据来自销售产品聚集表！尽管我们的用户甚至不知道这个表在模型中存在！</p><p id="8aa4" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">即使在这个相对较小的数据集上，性能上的差异也是巨大的！</p><h1 id="0d74" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">多个聚合表</h1><p id="de8f" class="pw-post-body-paragraph ky kz it la b lb mn ju ld le mo jx lg lh mp lj lk ll mq ln lo lp mr lr ls lt im bi translated">现在，您可能想知道为什么我创建了两个不同的聚合表。好吧，假设我有一个显示各种商店数据的查询，也是按日期维度分组的。在DirectQuery模式下，不必扫描1260万行，引擎可以很容易地从缓存中，从只有几千行的表中提供数字！</p><p id="d7a6" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">本质上，您可以在数据模型中创建多个聚合表——不仅仅是组合两个分组属性(就像我们在这里使用的Date+Product或Date+Store ),而是包括附加属性(例如，在一个聚合表中包括Date以及Product和Store)。这样，您将增加表的粒度，但是如果您的视觉需要显示产品和商店的数字，您将只能从缓存中检索结果！</p><p id="8519" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">在我们的示例中，由于我没有包含产品和商店的预聚合数据，如果我在表中包含一个商店，我将失去拥有聚合表的好处:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nh"><img src="../Images/e71aa7cd0c0f1a3e65409488387ef9ac.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*pIyazihbiotqiqnN21wN0g.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><p id="0f72" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">因此，为了利用聚合，您需要按照视觉要求在完全相同的粒度级别上定义它们！</p><h1 id="fb00" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">聚合优先级</h1><p id="feeb" class="pw-post-body-paragraph ky kz it la b lb mn ju ld le mo jx lg lh mp lj lk ll mq ln lo lp mr lr ls lt im bi translated">使用聚合时，还有一个更重要的属性需要理解——优先级！当“管理聚合”对话框打开时，有一个设置聚合优先级的选项:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nu"><img src="../Images/bf5a5c221a9316611076c82fd845b78c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dyXMAumqA1JTtEkS5ZtM_A.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><p id="d3bb" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">这个值“指示”Power BI在多个不同的聚合可以满足查询的情况下使用哪个聚合表！默认情况下，它设置为0，但您可以更改该值。数字越大，该聚合的优先级越高。</p><p id="077a" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">为什么这很重要？好吧，想象一个场景，你有一个有十亿行的主事实表。而且，您可以在不同的粒度上创建多个聚合表:</p><ol class=""><li id="b5db" class="ms mt it la b lb lc le lf lh mu ll mv lp mw lt nv my mz na bi translated">汇总表1:按日期级别对数据进行分组—有大约2000行(5年的日期)</li><li id="bfb8" class="ms mt it la b lb nc le nd lh ne ll nf lp ng lt nv my mz na bi translated">汇总表2:按日期和产品级别对数据进行分组—大约有100，000行(5年的日期x 50个产品)</li><li id="5ced" class="ms mt it la b lb nc le nd lh ne ll nf lp ng lt nv my mz na bi translated">汇总表3:按日期、产品和商店级别对数据进行分组——约有5，000，000行(100，000行来自以前的grain x 50家商店)</li></ol><p id="394d" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">现在，让我们假设报表可视化只显示日期级别的聚合数据。你怎么看:扫描表1 (2.000行)好还是表3(500万行)好？相信你知道答案:)理论上从两个表都可以满足查询，那么为什么要依赖幂BI的任意选择呢？！</p><p id="aa85" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">相反，当您创建多个具有不同粒度级别的聚合表时，请确保设置优先级值，使粒度较低的表获得优先级！</p><h1 id="f8c9" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">结论</h1><p id="d07b" class="pw-post-body-paragraph ky kz it la b lb mn ju ld le mo jx lg lh mp lj lk ll mq ln lo lp mr lr ls lt im bi translated">聚合是Power BI中最强大的特性之一，尤其是在具有大型数据集的场景中！尽管复合模型特性和聚合可以彼此独立使用，但这两者通常会协同使用，以在性能和拥有所有可用数据细节之间提供最佳平衡！</p><p id="878b" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">感谢阅读！</p><p id="23d3" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated"><a class="ae lu" href="https://data-mozart.com/shop/" rel="noopener ugc nofollow" target="_blank">预订DP-500培训！</a></p><p id="783d" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated"><a class="ae lu" href="https://datamozart.medium.com/membership" rel="noopener">订阅，不要错过任何媒体上的故事！</a></p></div></div>    
</body>
</html>