<html>
<head>
<title>How to Place the Legend Outside the Plot in Matplotlib</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在Matplotlib中将图例放置在绘图之外</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/legend-outside-the-plot-matplotlib-5d9c1caa9d31#2022-04-10">https://towardsdatascience.com/legend-outside-the-plot-matplotlib-5d9c1caa9d31#2022-04-10</a></blockquote><div><div class="fc ii ij ik il im"/><div class="in io ip iq ir"><div class=""/><div class=""><h2 id="a462" class="pw-subtitle-paragraph jr it iu bd b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki dk translated">展示如何使用matplotlib和Python将图例放置在绘图之外</h2></div><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj kj"><img src="../Images/271c571e1cd2362847dd1a33fcfe5f5b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*909-s5HepPye7lPGI5mGTg.jpeg"/></div></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">由<a class="ae kz" href="https://unsplash.com/@kobuagency?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> KOBU机构</a>在<a class="ae kz" href="https://unsplash.com/s/photos/draw?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>拍摄的照片</p></figure><h2 id="8636" class="la lb iu bd lc ld le dn lf lg lh dp li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">介绍</h2><p id="26a7" class="pw-post-body-paragraph lw lx iu ly b lz ma jv mb mc md jy me lj mf mg mh ln mi mj mk lr ml mm mn mo in bi translated">当用<code class="fe mp mq mr ms b">matplotlib</code>绘制图形时，重要的是确保包含图例，以便读者能够区分y轴上显示的数据。图例通常以方框的形式包含在绘制的图表中，它可以用作将颜色或形状映射到特定数据条目的字典。</p><p id="8723" class="pw-post-body-paragraph lw lx iu ly b lz mt jv mb mc mu jy me lj mv mg mh ln mw mj mk lr mx mm mn mo in bi translated">在今天的简短教程中，我们将展示如何将图形的图例放置在<code class="fe mp mq mr ms b">matplotlib</code>的绘图区域之外。当要显示的图形可能包含太多信息(甚至在四个角上)时，通常需要这样做。在这种情况下，将图例放在外面最终会使您的图表可读性更好。</p><p id="9d21" class="pw-post-body-paragraph lw lx iu ly b lz mt jv mb mc mu jy me lj mv mg mh ln mw mj mk lr mx mm mn mo in bi translated">更具体地说，我们将展示如何</p><ul class=""><li id="89c3" class="my mz iu ly b lz mt mc mu lj na ln nb lr nc mo nd ne nf ng bi translated">将图例放置在图外(以及任何需要的位置)</li><li id="05ba" class="my mz iu ly b lz nh mc ni lj nj ln nk lr nl mo nd ne nf ng bi translated">稍微把传说推到情节之外</li><li id="96dd" class="my mz iu ly b lz nh mc ni lj nj ln nk lr nl mo nd ne nf ng bi translated">更改放置在图外的图例的形状(例如，水平)</li></ul></div><div class="ab cl nm nn hy no" role="separator"><span class="np bw bk nq nr ns"/><span class="np bw bk nq nr ns"/><span class="np bw bk nq nr"/></div><div class="in io ip iq ir"><p id="2148" class="pw-post-body-paragraph lw lx iu ly b lz mt jv mb mc mu jy me lj mv mg mh ln mw mj mk lr mx mm mn mo in bi translated">首先，让我们创建一个示例图，我们将在整个教程中使用它来演示一些概念，并了解如何将图例放置在绘图区域之外的几个不同位置。</p><pre class="kk kl km kn gu nt ms nu nv aw nw bi"><span id="aaef" class="la lb iu ms b gz nx ny l nz oa">import numpy as np<br/>import matplotlib.pyplot as plt</span><span id="c6c1" class="la lb iu ms b gz ob ny l nz oa"># Create some sample data<br/>data = np.arange(20)</span><span id="8718" class="la lb iu ms b gz ob ny l nz oa"># Create a matplotlib figure<br/>fig, ax = plt.subplots()</span><span id="48e4" class="la lb iu ms b gz ob ny l nz oa"># Create multiple plots <br/>for i in range(7):<br/>    ax.plot(data, i * data, label=f'y={i}x')</span><span id="6ea6" class="la lb iu ms b gz ob ny l nz oa"># Set title and labels<br/>ax.set_title('Example plot')<br/>ax.set_xlabel('x')<br/>ax.set_ylabel('y')</span><span id="dfa5" class="la lb iu ms b gz ob ny l nz oa"># Add a legend<br/>ax.legend()</span><span id="6dff" class="la lb iu ms b gz ob ny l nz oa"># Visualize the final plot<br/>plt.show()</span></pre><p id="72c0" class="pw-post-body-paragraph lw lx iu ly b lz mt jv mb mc mu jy me lj mv mg mh ln mw mj mk lr mx mm mn mo in bi translated">下面分享了上面代码的输出图</p><figure class="kk kl km kn gu ko gi gj paragraph-image"><div class="gi gj oc"><img src="../Images/47c320718a02372e18753bc0ccbcb533.png" data-original-src="https://miro.medium.com/v2/resize:fit:1280/format:webp/1*BAfD7bRpMG5V0QARJd4C7Q.png"/></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">matplotlib示例图—来源:作者</p></figure><p id="b90b" class="pw-post-body-paragraph lw lx iu ly b lz mt jv mb mc mu jy me lj mv mg mh ln mw mj mk lr mx mm mn mo in bi translated">注意，默认情况下，<code class="fe mp mq mr ms b">matplotlib</code>会根据可视化的数据将图例(如果有)放置在最佳位置。</p></div><div class="ab cl nm nn hy no" role="separator"><span class="np bw bk nq nr ns"/><span class="np bw bk nq nr ns"/><span class="np bw bk nq nr"/></div><div class="in io ip iq ir"><h2 id="f075" class="la lb iu bd lc ld le dn lf lg lh dp li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">将图例放置在图外</h2><p id="de20" class="pw-post-body-paragraph lw lx iu ly b lz ma jv mb mc md jy me lj mf mg mh ln mi mj mk lr ml mm mn mo in bi translated">现在，为了将图例放置在绘图之外(假设在右侧的中心)，我们实际上需要做两件事。</p><p id="9eda" class="pw-post-body-paragraph lw lx iu ly b lz mt jv mb mc mu jy me lj mv mg mh ln mw mj mk lr mx mm mn mo in bi translated">首先，我们需要缩小图的宽度(以便图例适合图形)。然后我们可以使用<code class="fe mp mq mr ms b">bbox_to_anchor</code>参数，它为手工放置图例提供了一定程度的控制。</p><blockquote class="od oe of"><p id="65f1" class="lw lx og ly b lz mt jv mb mc mu jy me oh mv mg mh oi mw mj mk oj mx mm mn mo in bi translated"><strong class="ly iv"> bbox_to_anchor </strong></p><p id="c17b" class="lw lx og ly b lz mt jv mb mc mu jy me oh mv mg mh oi mw mj mk oj mx mm mn mo in bi translated">用于与<em class="iu">锁定</em>一起定位图例的盒子。默认为<code class="fe mp mq mr ms b"><strong class="ly iv">axes.bbox</strong></code>(如果作为方法调用<code class="fe mp mq mr ms b"><a class="ae kz" href="https://matplotlib.org/stable/api/_as_gen/matplotlib.axes.Axes.legend.html#matplotlib.axes.Axes.legend" rel="noopener ugc nofollow" target="_blank"><strong class="ly iv">Axes.legend</strong></a></code>)或<code class="fe mp mq mr ms b"><strong class="ly iv">figure.bbox</strong></code>(如果<code class="fe mp mq mr ms b"><a class="ae kz" href="https://matplotlib.org/stable/api/figure_api.html#matplotlib.figure.Figure.legend" rel="noopener ugc nofollow" target="_blank"><strong class="ly iv">Figure.legend</strong></a></code>)。该参数允许任意放置图例。</p><p id="2c1b" class="lw lx og ly b lz mt jv mb mc mu jy me oh mv mg mh oi mw mj mk oj mx mm mn mo in bi translated">Bbox坐标在由<em class="iu"> bbox_transform </em>给出的坐标系中进行解释，根据调用的<code class="fe mp mq mr ms b">legend</code>不同，使用默认的变换轴或图形坐标。</p><p id="7234" class="lw lx og ly b lz mt jv mb mc mu jy me oh mv mg mh oi mw mj mk oj mx mm mn mo in bi translated">如果给定了一个4元组或<code class="fe mp mq mr ms b"><a class="ae kz" href="https://matplotlib.org/stable/api/transformations.html#matplotlib.transforms.BboxBase" rel="noopener ugc nofollow" target="_blank"><strong class="ly iv">BboxBase</strong></a></code>，那么它指定放置图例的bbox <code class="fe mp mq mr ms b">(x, y, width, height)</code>。将图例放在坐标轴(或图形)右下象限的最佳位置。</p><p id="91e2" class="lw lx og ly b lz mt jv mb mc mu jy me oh mv mg mh oi mw mj mk oj mx mm mn mo in bi translated">— <a class="ae kz" href="https://matplotlib.org/stable/api/legend_api.html" rel="noopener ugc nofollow" target="_blank"> matplotlib文档</a></p></blockquote><pre class="kk kl km kn gu nt ms nu nv aw nw bi"><span id="25cd" class="la lb iu ms b gz nx ny l nz oa">import numpy as np<br/>import matplotlib.pyplot as plt</span><span id="d8bf" class="la lb iu ms b gz ob ny l nz oa"># Create some sample data<br/>data = np.arange(20)</span><span id="e1c9" class="la lb iu ms b gz ob ny l nz oa"># Create a matplotlib figure<br/>fig, ax = plt.subplots()</span><span id="56c5" class="la lb iu ms b gz ob ny l nz oa"># Create multiple plots <br/>for i in range(7):<br/>    ax.plot(data, i * data, label=f'y={i}x')</span><span id="f43d" class="la lb iu ms b gz ob ny l nz oa"># Set title and labels<br/>ax.set_title('Example plot')<br/>ax.set_xlabel('x')<br/>ax.set_ylabel('y')</span><span id="ff14" class="la lb iu ms b gz ob ny l nz oa"># Add a legend<br/>pos = ax.get_position()<br/>ax.set_position([pos.x0, pos.y0, pos.width * 0.9, pos.height])<br/>ax.legend(loc='center right', bbox_to_anchor=(1.25, 0.5))</span><span id="3548" class="la lb iu ms b gz ob ny l nz oa"># Visualize the final plot<br/>plt.show()</span></pre><figure class="kk kl km kn gu ko gi gj paragraph-image"><div class="gi gj oc"><img src="../Images/371826378b4a21aed301c35ddbaf302c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1280/format:webp/1*p8BJXXuIUs5R1osiop2LGg.png"/></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">图例位于地块外部的示例地块-来源:作者</p></figure></div><div class="ab cl nm nn hy no" role="separator"><span class="np bw bk nq nr ns"/><span class="np bw bk nq nr ns"/><span class="np bw bk nq nr"/></div><div class="in io ip iq ir"><h2 id="90aa" class="la lb iu bd lc ld le dn lf lg lh dp li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">更改放置在图外的图例的形状</h2><p id="ef21" class="pw-post-body-paragraph lw lx iu ly b lz ma jv mb mc md jy me lj mf mg mh ln mi mj mk lr ml mm mn mo in bi translated">现在让我们假设我们想把图例放在图的外面，但是这次是在顶部位置。更有意义的做法是改变图例的形状，使其水平显示，而不是垂直显示，这样实际绘图可以占用更多的区域。</p><p id="49c2" class="pw-post-body-paragraph lw lx iu ly b lz mt jv mb mc mu jy me lj mv mg mh ln mw mj mk lr mx mm mn mo in bi translated">再一次，我们将不得不缩小图的高度，这一次是为了给放置在图的顶部区域的图例留出一些空间。然后，我们可以将图例放置在所需的位置，还可以更改列数，以便它可以水平显示。</p><pre class="kk kl km kn gu nt ms nu nv aw nw bi"><span id="e524" class="la lb iu ms b gz nx ny l nz oa">import numpy as np<br/>import matplotlib.pyplot as plt</span><span id="3f16" class="la lb iu ms b gz ob ny l nz oa"># Create some sample data<br/>data = np.arange(20)</span><span id="e4d7" class="la lb iu ms b gz ob ny l nz oa"># Create a matplotlib figure<br/>fig, ax = plt.subplots()</span><span id="4a11" class="la lb iu ms b gz ob ny l nz oa"># Create multiple plots <br/>for i in range(7):<br/>    ax.plot(data, i * data, label=f'y={i}x')</span><span id="6930" class="la lb iu ms b gz ob ny l nz oa"># Set title and labels<br/>ax.set_title('Example plot')<br/>ax.set_xlabel('x')<br/>ax.set_ylabel('y')</span><span id="c00d" class="la lb iu ms b gz ob ny l nz oa"># Add a legend<br/>pos = ax.get_position()<br/>ax.set_position([pos.x0, pos.y0, pos.width, pos.height * 0.85])<br/>ax.legend(<br/>    loc='upper center', <br/>    bbox_to_anchor=(0.5, 1.35),<br/>    ncol=3, <br/>)</span><span id="eeb6" class="la lb iu ms b gz ob ny l nz oa"># Visualize the final plot<br/>plt.show()</span></pre><figure class="kk kl km kn gu ko gi gj paragraph-image"><div class="gi gj oc"><img src="../Images/d0e095dc626ba00e523a3be79c63edc0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1280/format:webp/1*0-YLLsUZpo1S5DBp-ItmRw.png"/></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">图例水平放置在图外的示例图-来源:作者</p></figure></div><div class="ab cl nm nn hy no" role="separator"><span class="np bw bk nq nr ns"/><span class="np bw bk nq nr ns"/><span class="np bw bk nq nr"/></div><div class="in io ip iq ir"><h2 id="cee4" class="la lb iu bd lc ld le dn lf lg lh dp li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">将图例稍微移出剧情</h2><p id="00f3" class="pw-post-body-paragraph lw lx iu ly b lz ma jv mb mc md jy me lj mf mg mh ln mi mj mk lr ml mm mn mo in bi translated">这里的另一种可能性是，稍微将传说推到情节之外，使一半落在情节本身之内。这可能是最简单的方法，因为我们只需要使用<code class="fe mp mq mr ms b">bbox_to_anchor</code>参数将图例与<code class="fe mp mq mr ms b">loc</code>一起放置。</p><pre class="kk kl km kn gu nt ms nu nv aw nw bi"><span id="6010" class="la lb iu ms b gz nx ny l nz oa">import numpy as np<br/>import matplotlib.pyplot as plt</span><span id="8bb5" class="la lb iu ms b gz ob ny l nz oa"># Create some sample data<br/>data = np.arange(20)</span><span id="94d4" class="la lb iu ms b gz ob ny l nz oa"># Create a matplotlib figure<br/>fig, ax = plt.subplots()</span><span id="8473" class="la lb iu ms b gz ob ny l nz oa"># Create multiple plots <br/>for i in range(7):<br/>    ax.plot(data, i * data, label=f'y={i}x')</span><span id="7f9d" class="la lb iu ms b gz ob ny l nz oa"># Set title and labels<br/>ax.set_title('Example plot')<br/>ax.set_xlabel('x')<br/>ax.set_ylabel('y')</span><span id="c48a" class="la lb iu ms b gz ob ny l nz oa"># Add a legend<br/>ax.legend(loc='upper right', bbox_to_anchor=(1.1, 1.1))</span><span id="b5e7" class="la lb iu ms b gz ob ny l nz oa"># Visualize the final plot<br/>plt.show()</span></pre><figure class="kk kl km kn gu ko gi gj paragraph-image"><div class="gi gj oc"><img src="../Images/759e14f1cec7eaf722d131fb383f72fc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1280/format:webp/1*MInMHwW1Gr8h7qpejmw4UA.png"/></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">图例被稍稍推出图外的示例图—来源:作者</p></figure></div><div class="ab cl nm nn hy no" role="separator"><span class="np bw bk nq nr ns"/><span class="np bw bk nq nr ns"/><span class="np bw bk nq nr"/></div><div class="in io ip iq ir"><h2 id="78f3" class="la lb iu bd lc ld le dn lf lg lh dp li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">最后的想法</h2><p id="f311" class="pw-post-body-paragraph lw lx iu ly b lz ma jv mb mc md jy me lj mf mg mh ln mi mj mk lr ml mm mn mo in bi translated">在今天的简短教程中，我们讨论了在图表中包含图例的重要性。此外，我们展示了如何在<code class="fe mp mq mr ms b">matplotlib</code>和Python中将图例放置在情节之外。</p><p id="ee21" class="pw-post-body-paragraph lw lx iu ly b lz mt jv mb mc mu jy me lj mv mg mh ln mw mj mk lr mx mm mn mo in bi translated">重要的是要记住，通过将图例放置在图形之外，可以使您的绘图更具可读性，特别是当它们超载了太多信息，甚至在绘图区域的四个角包含线条或任何其他信息时。</p></div><div class="ab cl nm nn hy no" role="separator"><span class="np bw bk nq nr ns"/><span class="np bw bk nq nr ns"/><span class="np bw bk nq nr"/></div><div class="in io ip iq ir"><p id="1b77" class="pw-post-body-paragraph lw lx iu ly b lz mt jv mb mc mu jy me lj mv mg mh ln mw mj mk lr mx mm mn mo in bi translated"><a class="ae kz" href="https://gmyrianthous.medium.com/membership" rel="noopener"> <strong class="ly iv">成为会员</strong> </a> <strong class="ly iv">阅读媒体上的每一个故事。你的会员费直接支持我和你看的其他作家。你也可以在媒体上看到所有的故事。</strong></p><div class="ok ol gq gs om on"><a href="https://gmyrianthous.medium.com/membership" rel="noopener follow" target="_blank"><div class="oo ab fp"><div class="op ab oq cl cj or"><h2 class="bd iv gz z fq os fs ft ot fv fx it bi translated">通过我的推荐链接加入Medium-Giorgos Myrianthous</h2><div class="ou l"><h3 class="bd b gz z fq os fs ft ot fv fx dk translated">作为一个媒体会员，你的会员费的一部分会给你阅读的作家，你可以完全接触到每一个故事…</h3></div><div class="ov l"><p class="bd b dl z fq os fs ft ot fv fx dk translated">gmyrianthous.medium.com</p></div></div><div class="ow l"><div class="ox l oy oz pa ow pb kt on"/></div></div></a></div></div><div class="ab cl nm nn hy no" role="separator"><span class="np bw bk nq nr ns"/><span class="np bw bk nq nr ns"/><span class="np bw bk nq nr"/></div><div class="in io ip iq ir"><p id="676e" class="pw-post-body-paragraph lw lx iu ly b lz mt jv mb mc mu jy me lj mv mg mh ln mw mj mk lr mx mm mn mo in bi translated"><strong class="ly iv">相关文章你可能也喜欢</strong></p><div class="ok ol gq gs om on"><a rel="noopener follow" target="_blank" href="/save-plots-matplotlib-1a16b3432d8a"><div class="oo ab fp"><div class="op ab oq cl cj or"><h2 class="bd iv gz z fq os fs ft ot fv fx it bi translated">如何使用Matplotlib将绘图保存到图像文件</h2><div class="ou l"><h3 class="bd b gz z fq os fs ft ot fv fx dk translated">了解如何将matplotlib图形和绘图保存到图像文件</h3></div><div class="ov l"><p class="bd b dl z fq os fs ft ot fv fx dk translated">towardsdatascience.com</p></div></div><div class="ow l"><div class="pc l oy oz pa ow pb kt on"/></div></div></a></div></div><div class="ab cl nm nn hy no" role="separator"><span class="np bw bk nq nr ns"/><span class="np bw bk nq nr ns"/><span class="np bw bk nq nr"/></div><div class="in io ip iq ir"><div class="kk kl km kn gu on"><a rel="noopener follow" target="_blank" href="/change-font-size-matplolib-480630e300b4"><div class="oo ab fp"><div class="op ab oq cl cj or"><h2 class="bd iv gz z fq os fs ft ot fv fx it bi translated">如何更改Matplotlib图中的字体大小</h2><div class="ou l"><h3 class="bd b gz z fq os fs ft ot fv fx dk translated">了解如何更改使用matplotlib生成的Python图中的字体大小</h3></div><div class="ov l"><p class="bd b dl z fq os fs ft ot fv fx dk translated">towardsdatascience.com</p></div></div><div class="ow l"><div class="pd l oy oz pa ow pb kt on"/></div></div></a></div></div><div class="ab cl nm nn hy no" role="separator"><span class="np bw bk nq nr ns"/><span class="np bw bk nq nr ns"/><span class="np bw bk nq nr"/></div><div class="in io ip iq ir"><div class="kk kl km kn gu on"><a rel="noopener follow" target="_blank" href="/change-figure-size-matplotlib-11a409f39584"><div class="oo ab fp"><div class="op ab oq cl cj or"><h2 class="bd iv gz z fq os fs ft ot fv fx it bi translated">如何在Matplotlib中改变图形的大小</h2><div class="ou l"><h3 class="bd b gz z fq os fs ft ot fv fx dk translated">讨论如何在Python中调整用matplotlib创建的图形的大小</h3></div><div class="ov l"><p class="bd b dl z fq os fs ft ot fv fx dk translated">towardsdatascience.com</p></div></div><div class="ow l"><div class="pe l oy oz pa ow pb kt on"/></div></div></a></div></div></div>    
</body>
</html>