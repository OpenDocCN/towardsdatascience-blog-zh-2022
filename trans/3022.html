<html>
<head>
<title>Database Basics: ACID Transactions</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">数据库基础:ACID事务</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/database-basics-acid-transactions-bf4d38bd8e26#2022-07-02">https://towardsdatascience.com/database-basics-acid-transactions-bf4d38bd8e26#2022-07-02</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="1918" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">了解数据库的ACID属性</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/25281add86b209b726c0eefedcd21c23.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*eiVwltxlQtKM-G6F"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">Pawel Czerwinski 在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</p></figure><p id="2a3b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">缩写ACID(原子性、一致性、隔离性、持久性)是一个来自<a class="ae ky" href="https://databasecamp.de/en/data/database" rel="noopener ugc nofollow" target="_blank">数据库</a>理论的术语，描述了数据库事务的规则和过程。如果遵守ACID的规范，系统中的数据就是可靠和一致的。</p><h1 id="0c9b" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">什么是A-C-I-D基本原则？</h1><p id="eaa4" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">经典的关系数据库满足四个ACID属性。这些说明了对数据库最重要的要求是保持数据<a class="ae ky" href="http://www.databasecamp.de/data" rel="noopener ugc nofollow" target="_blank">的真实性和意义。在许多情况下，数据存储被视为“单点事实”，因此，如果错误的信息被存储和传递，那将是致命的。这四个属性包括以下几点:</a></p><ul class=""><li id="adc3" class="ms mt it lb b lc ld lf lg li mu lm mv lq mw lu mx my mz na bi translated"><strong class="lb iu">原子性(A) </strong>:数据事务，例如新数据记录的输入或旧数据记录的删除，要么完全执行，要么根本不执行。对于其他用户，事务只有在完全执行后才可见。</li><li id="cea7" class="ms mt it lb b lc nb lf nc li nd lm ne lq nf lu mx my mz na bi translated"><strong class="lb iu"> Consistency (C) </strong>:当每个数据事务将数据库从一致状态转移到一致状态时，满足该属性。</li><li id="1e30" class="ms mt it lb b lc nb lf nc li nd lm ne lq nf lu mx my mz na bi translated"><strong class="lb iu">隔离(I) </strong>:当多个事务同时发生时，最终状态必须与事务分别发生时相同。也就是说，数据库应该通过压力测试。换句话说，它不应该由于过载而导致不正确的数据库事务。</li><li id="7de3" class="ms mt it lb b lc nb lf nc li nd lm ne lq nf lu mx my mz na bi translated"><strong class="lb iu">持久性(D) </strong>:数据库内的数据只能因交易而改变，不得因外部影响而改变。例如，软件更新不得无意中导致数据更改或可能被删除。</li></ul><h1 id="432f" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">范例上的基本原则</h1><p id="620e" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">说明ACID组件的最常见的例子是银行转帐，即资金从一个帐户转移到另一个帐户。当然，目标是确保所有转账都是正确的，并且所有客户的账户上都有他们有权获得的金额。</p><p id="5bd3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">假设发生了从账户A到账户B的转账。<strong class="lb iu">原子性</strong>描述了事务要么完全执行，要么完全失败。对于我们的例子来说，这意味着如果账户A被记入借方的金额，然后出现系统故障，这笔钱将被简单地贷记回账户A。如果没有发生这种情况，我们将销毁钱，系统将处于错误状态。</p><p id="8e90" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">对于<strong class="lb iu">一致性</strong>，每次事务处理后，必须确定数据库仍然处于一致状态，例如，不包含任何冲突数据。假设我们的示例银行维护一个包含所有账户和当前余额的表。在此表中，帐号是主键，因此每个帐号在数据库中只能出现一次。如果在一次不正确的数据库交易后，一个帐号可能有两个记录，则存在不一致，交易必须被撤销。</p><p id="b81d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">隔离</strong>声明并行运行的几个事务不能导致不同于事务一个接一个单独发生的结果。因此，如果一家银行必须在高峰期间同时处理100笔转账，则必须确保受影响账户的余额与转账一笔接一笔发生时一样高。</p><p id="013d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">最后，对于<strong class="lb iu">持久性</strong>，银行必须能够保证一致的数据库存不受外部影响。例如，这包括电源故障、系统崩溃或软件更新。</p><h1 id="cf15" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">酸有什么好处？</h1><p id="3501" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">在应用中，遵循ACID原则的数据库有很多优点。其中包括:</p><ul class=""><li id="8e06" class="ms mt it lb b lc ld lf lg li mu lm mv lq mw lu mx my mz na bi translated">ACID使得几个人可以毫无顾虑地在一个数据库上工作。</li><li id="8bb8" class="ms mt it lb b lc nb lf nc li nd lm ne lq nf lu mx my mz na bi translated">数据库用户和开发人员可以假设数据库没有错误，并且不必处理故障排除。</li><li id="250f" class="ms mt it lb b lc nb lf nc li nd lm ne lq nf lu mx my mz na bi translated">不再需要手动调试，因为不会出现错误。</li></ul><h1 id="9972" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">NoSQL数据库满足ACID属性吗？</h1><p id="bebb" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated"><a class="ae ky" href="https://databasecamp.de/en/data/nosql-databases" rel="noopener ugc nofollow" target="_blank"> NoSQL </a>解决方案通常不符合ACID属性，尽管也有例外，如图形数据库，它们符合所有概念。NoSQL数据库在许多情况下分布在多个设备和服务器上。这允许同时处理和存储更大量的数据，这是这些系统的关键要求。然而，这意味着它们不满足一致性的特性。</p><p id="91bc" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">假设我们在两台物理服务器上实现了一个NoSQL数据库，一台位于德国，另一台位于美国。数据库包含德国和美国客户的账户余额和交易。德国帐户存储在德国，美国帐户存储在美国服务器上。</p><p id="ca7b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在可能发生的情况是，一个德国客户向一个美国账户转账。则两个数据存储都被改变，并且在该处理期间不一致。例如，可能会发生这样的情况，我们开始一个数据库查询，而德国的处理已经完成，但是美国的处理还没有完成。在这个时间窗口中，即“不一致窗口”，数据库中的数据不正确且不一致。这在关系数据库中不会发生。</p><h1 id="95e3" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">这是你应该带走的东西</h1><ul class=""><li id="8acf" class="ms mt it lb b lc mn lf mo li ng lm nh lq ni lu mx my mz na bi translated">ACID(原子性、一致性、隔离性、持久性)是数据库理论中的一个术语，描述了数据库事务的规则和过程。</li><li id="d682" class="ms mt it lb b lc nb lf nc li nd lm ne lq nf lu mx my mz na bi translated">关系数据库满足这些特性，因此在任何时候都是一致的。另一方面，NoSQL数据库在很大程度上不符合ACID。</li><li id="7a5a" class="ms mt it lb b lc nb lf nc li nd lm ne lq nf lu mx my mz na bi translated">遵循这些原则可以确保数据库在任何时候都没有错误，并且可以毫无顾虑地进行并发访问。</li></ul></div><div class="ab cl nj nk hx nl" role="separator"><span class="nm bw bk nn no np"/><span class="nm bw bk nn no np"/><span class="nm bw bk nn no"/></div><div class="im in io ip iq"><p id="bf6f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><em class="nq">如果你喜欢我的作品，请在这里订阅</em><a class="ae ky" href="https://medium.com/subscribe/@niklas_lang" rel="noopener"><em class="nq"/></a><em class="nq">或者查看我的网站</em> <a class="ae ky" href="http://www.databasecamp.de/en/homepage" rel="noopener ugc nofollow" target="_blank"> <em class="nq">数据大本营</em> </a> <em class="nq">！还有，medium允许你每月免费阅读</em> <strong class="lb iu"> <em class="nq"> 3篇</em> </strong> <em class="nq">。如果你希望有</em><strong class="lb iu"><em class="nq">无限制的</em> </strong> <em class="nq">访问我的文章和数以千计的精彩文章，请不要犹豫，点击我的推荐链接:</em><a class="ae ky" href="https://medium.com/@niklas_lang/membership" rel="noopener">【https://medium.com/@niklas_lang/membership】</a>每月花$<strong class="lb iu"><em class="nq">5</em></strong><em class="nq">获得会员资格</em></p></div><div class="ab cl nj nk hx nl" role="separator"><span class="nm bw bk nn no np"/><span class="nm bw bk nn no np"/><span class="nm bw bk nn no"/></div><div class="im in io ip iq"><div class="kj kk kl km gt nr"><a rel="noopener follow" target="_blank" href="/redis-in-memory-data-store-easily-explained-3b92457be424"><div class="ns ab fo"><div class="nt ab nu cl cj nv"><h2 class="bd iu gy z fp nw fr fs nx fu fw is bi translated">Redis:内存数据存储很容易解释</h2><div class="ny l"><h3 class="bd b gy z fp nw fr fs nx fu fw dk translated">了解基于键值的NoSQL数据存储</h3></div><div class="nz l"><p class="bd b dl z fp nw fr fs nx fu fw dk translated">towardsdatascience.com</p></div></div><div class="oa l"><div class="ob l oc od oe oa of ks nr"/></div></div></a></div><div class="og oh gp gr oi nr"><a rel="noopener follow" target="_blank" href="/comprehensive-guide-to-data-warehouses-6374617f45d5"><div class="ns ab fo"><div class="nt ab nu cl cj nv"><h2 class="bd iu gy z fp nw fr fs nx fu fw is bi translated">数据仓库综合指南</h2><div class="ny l"><h3 class="bd b gy z fp nw fr fs nx fu fw dk translated">您需要知道的一切，包括与数据湖的比较</h3></div><div class="nz l"><p class="bd b dl z fp nw fr fs nx fu fw dk translated">towardsdatascience.com</p></div></div><div class="oa l"><div class="oj l oc od oe oa of ks nr"/></div></div></a></div><div class="og oh gp gr oi nr"><a rel="noopener follow" target="_blank" href="/introducing-nosql-databases-with-mongodb-d46c976da5bf"><div class="ns ab fo"><div class="nt ab nu cl cj nv"><h2 class="bd iu gy z fp nw fr fs nx fu fw is bi translated">使用MongoDB介绍NoSQL数据库</h2><div class="ny l"><h3 class="bd b gy z fp nw fr fs nx fu fw dk translated">NoSQL数据库实用指南</h3></div><div class="nz l"><p class="bd b dl z fp nw fr fs nx fu fw dk translated">towardsdatascience.com</p></div></div><div class="oa l"><div class="ok l oc od oe oa of ks nr"/></div></div></a></div></div></div>    
</body>
</html>