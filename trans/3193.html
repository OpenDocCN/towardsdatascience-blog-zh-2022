<html>
<head>
<title>Putting the Shine in Shiny Apps</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">让闪亮的应用熠熠生辉</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/putting-the-shine-in-shiny-apps-e3de370b5661#2022-07-13">https://towardsdatascience.com/putting-the-shine-in-shiny-apps-e3de370b5661#2022-07-13</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="e72c" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">三个简单的技巧让你的R闪亮应用从枯燥变得漂亮</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi kf"><img src="../Images/72ac301aa82b3cd85db1502cb395b5a5.png" data-original-src="https://miro.medium.com/v2/resize:fit:784/format:webp/1*uiNJ71lDlRwZ-sXKuNfQaw.png"/></div><p class="kn ko gj gh gi kp kq bd b be z dk translated">作者图片</p></figure><p id="c84a" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">闪亮的应用程序不一定很无聊。你可以做一些简单的事情，只用几行代码就能给你的应用程序带来活力！在本教程中，我们将使用一个简单的、信息丰富的关于太阳系卫星的应用程序，并给它一点光亮。</p></div><div class="ab cl ln lo hu lp" role="separator"><span class="lq bw bk lr ls lt"/><span class="lq bw bk lr ls lt"/><span class="lq bw bk lr ls"/></div><div class="ij ik il im in"><h1 id="fda2" class="lu lv iq bd lw lx ly lz ma mb mc md me jw mf jx mg jz mh ka mi kc mj kd mk ml bi translated">逃离地心引力的计划</h1><p id="ffbf" class="pw-post-body-paragraph kr ks iq kt b ku mm jr kw kx mn ju kz la mo lc ld le mp lg lh li mq lk ll lm ij bi translated">简而言之，我们将把<a class="ae mr" href="https://kendondarlington.shinyapps.io/Moons-of-the-solar-system-plain/" rel="noopener ugc nofollow" target="_blank">这个普通的应用</a>变成<a class="ae mr" href="https://kendondarlington.shinyapps.io/Moons-of-the-solar-system/" rel="noopener ugc nofollow" target="_blank">这个有趣的应用</a>。这两个应用程序有完全相同的数据，但一个比另一个看起来更专业一些。如果你曾经做过一个闪亮的教程，你的应用可能最终看起来像普通的。遵循一些提示，很容易从简单变得有趣。</p><h1 id="faa6" class="lu lv iq bd lw lx ms lz ma mb mt md me jw mu jx mg jz mv ka mi kc mw kd mk ml bi translated">数据</h1><p id="7607" class="pw-post-body-paragraph kr ks iq kt b ku mm jr kw kx mn ju kz la mo lc ld le mp lg lh li mq lk ll lm ij bi translated">我们的应用将会是关于太阳系的卫星。这些数据只是来自维基百科页面的<a class="ae mr" href="https://en.wikipedia.org/wiki/List_of_natural_satellites" rel="noopener ugc nofollow" target="_blank">自然卫星列表中的一个表格。本页列出了太阳系中所有已知的卫星(219颗，还在继续，哇哦！).</a></p><h1 id="6f00" class="lu lv iq bd lw lx ms lz ma mb mt md me jw mu jx mg jz mv ka mi kc mw kd mk ml bi translated">简单的应用程序</h1><p id="ac3f" class="pw-post-body-paragraph kr ks iq kt b ku mm jr kw kx mn ju kz la mo lc ld le mp lg lh li mq lk ll lm ij bi translated">先来看看<a class="ae mr" href="https://kendondarlington.shinyapps.io/Moons-of-the-solar-system-plain/" rel="noopener ugc nofollow" target="_blank">素app </a>。目标很简单，每个行星都有一个下拉列表，这个下拉列表显示了所选行星的卫星和一些相关的统计数据。</p><p id="b6a6" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">你可以从<a class="ae mr" href="https://github.com/KendonDarlington/R-moons-of-the-solar-system-plain" rel="noopener ugc nofollow" target="_blank"> GitHub </a>下载plain应用的完整项目。只需将文件下载到您的计算机上，然后打开R项目。如果你想在本地运行这个程序，打开Rproj文件就可以了。</p><p id="808a" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">代码如下:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mx my l"/></div></figure><p id="b970" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">这里没什么可花哨的，显而易见。按照出现的顺序，我们有:</p><ul class=""><li id="f8c0" class="mz na iq kt b ku kv kx ky la nb le nc li nd lm ne nf ng nh bi translated">titlePanel:这是应用程序顶部的标题</li><li id="4ba4" class="mz na iq kt b ku ni kx nj la nk le nl li nm lm ne nf ng nh bi translated">选择输入:这让你选择一个星球来改变表格</li><li id="2b85" class="mz na iq kt b ku ni kx nj la nk le nl li nm lm ne nf ng nh bi translated">tableOutput('moons '):这是我们的表，由后端(也就是' server '里面的东西)交给我们。</li><li id="9c0a" class="mz na iq kt b ku ni kx nj la nk le nl li nm lm ne nf ng nh bi translated">df:这是我们月球数据的一个数据框。</li><li id="f25e" class="mz na iq kt b ku ni kx nj la nk le nl li nm lm ne nf ng nh bi translated">output$moons:这将获取我们的数据框，并对其应用一个简单的过滤器。在选择输入中选择的行星被传递到这个过滤器中，所以如果你选择“木星”，只有木星的卫星被返回到前端(也就是ui中的所有东西)。上面代码中的tableOutput('moons ')只是等待output$moons告诉它该做什么。多好的羊啊。</li></ul><p id="de0a" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">你可能在读的时候睡着了，因为我在写的时候睡着了。是无聊的代码产生了无聊的app。但是我们能做些什么来增加这个应用的趣味呢？</p><p id="ace4" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">有趣的应用程序</p><p id="5f32" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">现在我们开始有趣的东西，这里是<a class="ae mr" href="https://kendondarlington.shinyapps.io/Moons-of-the-solar-system/" rel="noopener ugc nofollow" target="_blank">不那么简单的应用</a>。同样的数据，只是显示方式略有不同。你可以下载整个R项目，包括我从<a class="ae mr" href="https://github.com/KendonDarlington/R-moons-of-the-solar-system" rel="noopener ugc nofollow" target="_blank"> GitHub </a>手绘的行星图片。</p><p id="7e88" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">这是新应用程序的代码。r:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mx my l"/></div></figure><p id="b1b2" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">现在，我们将讨论发生了哪些变化，以及这些变化有何帮助。</p><h1 id="f625" class="lu lv iq bd lw lx ms lz ma mb mt md me jw mu jx mg jz mv ka mi kc mw kd mk ml bi translated">技巧1:使用闪亮的主题</h1><p id="83b7" class="pw-post-body-paragraph kr ks iq kt b ku mm jr kw kx mn ju kz la mo lc ld le mp lg lh li mq lk ll lm ij bi translated">闪亮的主题是用一行代码让你的整个应用看起来更好的最简单的方法。如果你不知道，Shiny默认使用bootstrap，这是开发网站时广泛使用的html和css的集合。安装shinythemes包的说明可以在<a class="ae mr" href="https://rstudio.github.io/shinythemes/" rel="noopener ugc nofollow" target="_blank">这里</a>找到。</p><p id="5d74" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">有相当多的主题可供选择，你可以在这里浏览它们，看看实际的配色方案，以及它们如何设计你可能放入闪亮应用程序的不同类型的对象(例如，下拉菜单、导航栏、按钮、表格等等！).例如，这是我选择添加到我们的应用程序的闪亮主题的完整调色板；<a class="ae mr" href="https://bootswatch.com/" rel="noopener ugc nofollow" target="_blank">阴暗地</a>。</p><p id="4cea" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">将这个主题应用到我们的普通应用程序的代码是:</p><pre class="kg kh ki kj gt nn no np nq aw nr bi"><span id="e36c" class="ns lv iq no b gy nt nu l nv nw">fluidPage(theme = shinytheme("darkly"),</span></pre><p id="63b1" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">您可以在fluidPage中添加您想要的主题。就是这样。确保将库(shinythemes)添加到文件的顶部。</p><h1 id="ea10" class="lu lv iq bd lw lx ms lz ma mb mt md me jw mu jx mg jz mv ka mi kc mw kd mk ml bi translated">技巧2:利用引导程序</h1><p id="19aa" class="pw-post-body-paragraph kr ks iq kt b ku mm jr kw kx mn ju kz la mo lc ld le mp lg lh li mq lk ll lm ij bi translated">Bootstrap是目前最强大的HTML可视化库。Bootstrap有<a class="ae mr" href="https://getbootstrap.com/docs/5.2/components/carousel/" rel="noopener ugc nofollow" target="_blank">转盘</a>、<a class="ae mr" href="https://getbootstrap.com/docs/5.2/components/spinners/" rel="noopener ugc nofollow" target="_blank">旋转器</a>、<a class="ae mr" href="https://getbootstrap.com/docs/5.2/components/dropdowns/" rel="noopener ugc nofollow" target="_blank">下拉</a>等等！他们也有一些标准标题面板的漂亮替代品，比如<a class="ae mr" href="https://getbootstrap.com/docs/5.2/examples/jumbotron/" rel="noopener ugc nofollow" target="_blank">大屏幕</a>。</p><p id="347d" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">下面是实现超大屏幕的代码:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mx my l"/></div></figure><p id="da96" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">这是怎么回事？</p><ul class=""><li id="130a" class="mz na iq kt b ku kv kx ky la nb le nc li nd lm ne nf ng nh bi translated">标签$div:这创建了一个<div/></li><li id="79c1" class="mz na iq kt b ku ni kx nj la nk le nl li nm lm ne nf ng nh bi translated">class = "jumbotron text-center ":这将我们的div转换成一个超大屏幕。</li><li id="66f8" class="mz na iq kt b ku ni kx nj la nk le nl li nm lm ne nf ng nh bi translated">样式:我在两个不同的地方去掉了html元素上面和下面的空白。这是可选的样式，但我更喜欢我的大屏幕稍微小一点。</li><li id="aee5" class="mz na iq kt b ku ni kx nj la nk le nl li nm lm ne nf ng nh bi translated">标签$h2:这是大屏幕标题，也就是大文本。这相当于<h2>元素。</h2></li><li id="8939" class="mz na iq kt b ku ni kx nj la nk le nl li nm lm ne nf ng nh bi translated">p():这是Shiny版的<p>，是一个段落元素。这是小文。</p></li></ul><p id="9daf" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">“黑暗”闪亮的主题加上自举大屏幕是我们如何把这个标题:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="ny nz di oa bf ob"><div class="gh gi nx"><img src="../Images/8a30a9f9e94fd9742cc6682302208a26.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*miLb4qeWmN9cJZvodkZieg.png"/></div></div><p class="kn ko gj gh gi kp kq bd b be z dk translated">作者图片</p></figure><p id="2759" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">变成了这个标题:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="ny nz di oa bf ob"><div class="gh gi oc"><img src="../Images/ba92f7b0289d2e8f07f000a0520f6092.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*PwlSJn7XyRvGSnlxsm68rQ.png"/></div></div><p class="kn ko gj gh gi kp kq bd b be z dk translated">作者图片</p></figure><h1 id="f140" class="lu lv iq bd lw lx ms lz ma mb mt md me jw mu jx mg jz mv ka mi kc mw kd mk ml bi translated">技巧3:使用可反应表代替表格</h1><p id="1055" class="pw-post-body-paragraph kr ks iq kt b ku mm jr kw kx mn ju kz la mo lc ld le mp lg lh li mq lk ll lm ij bi translated">所以R区的普通桌子有点烂。它们是有用的，但不是特别令人兴奋。r为我们提供了几个漂亮有用的表选项，但是Reactable绝对是我最喜欢的。</p><p id="5208" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">Reactable库是一个优秀的JavaScript“React Table”库的实现，它充满了很酷的特性。这里的是这个库的一些特性的参考。我们追求的让普通应用看起来更好的主要特性是样式和分页。</p><p id="008b" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">我们希望我们的表匹配我们的“黑暗”引导主题，所以我们需要一些黑暗的表(我们的普通应用程序使用的默认表相当明亮)。</p><p id="0ad5" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">我们想要的第二个特性是分页，这意味着我们希望我们的表有一个固定的高度，并允许您“翻页”通过。我们最初的普通应用程序中的表格与我们的黑暗主题形成了过于明亮的对比。</p><p id="0b41" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">这是我们的旧桌子，滚动了好几天:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="ny nz di oa bf ob"><div class="gh gi od"><img src="../Images/631358eb6726120b457a7838ed67f987.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*D5dIUhKnzw0N7OyhZczrXQ.png"/></div></div><p class="kn ko gj gh gi kp kq bd b be z dk translated">作者图片</p></figure><p id="0718" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">这是我们新的分页表格:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="ny nz di oa bf ob"><div class="gh gi oe"><img src="../Images/a63d33ef96d24b56ceae1a6e3d7211be.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*MCWJOQBY7pFAI83t6T4ZcQ.png"/></div></div><p class="kn ko gj gh gi kp kq bd b be z dk translated">作者图片</p></figure><p id="ea56" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">下面是制作这个表格的代码:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mx my l"/></div></figure><p id="d000" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">那么我们在这里做了什么？</p><ul class=""><li id="dbc7" class="mz na iq kt b ku kv kx ky la nb le nc li nd lm ne nf ng nh bi translated">renderTable()已被renderReactable()换出</li><li id="5275" class="mz na iq kt b ku ni kx nj la nk le nl li nm lm ne nf ng nh bi translated">options():这段代码只是用来设计我们的reactable。如果这段代码不在这里，我们的reactable仍然可以很好地工作，只是不符合我们的主题。</li><li id="22d6" class="mz na iq kt b ku ni kx nj la nk le nl li nm lm ne nf ng nh bi translated">reactable():这将我们的数据帧转换成一个reactable对象。</li></ul><p id="7178" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">只是不要忘记在ui中将tableOutput()替换为reactableOutput！</p><h1 id="1dd2" class="lu lv iq bd lw lx ms lz ma mb mt md me jw mu jx mg jz mv ka mi kc mw kd mk ml bi translated">技巧4:使用图像</h1><p id="d41e" class="pw-post-body-paragraph kr ks iq kt b ku mm jr kw kx mn ju kz la mo lc ld le mp lg lh li mq lk ll lm ij bi translated">我不想这么说，但是数据表看起来可能有点无聊。在你的应用程序、网页或报告中添加相关图片可以更好地表达你的观点，同时让你的头脑看起来不那么无聊。</p><p id="dd4f" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">在我们的应用程序中，我用笔在平板电脑上画出了每个星球的图像。你不必走这么远，网上的普通旧图片就可以了。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi kf"><img src="../Images/2ec3977833b7eea5082d2bea3b5b2ebb.png" data-original-src="https://miro.medium.com/v2/resize:fit:784/format:webp/1*1v1hdDT0PjnXdGfKI7Efug.png"/></div><p class="kn ko gj gh gi kp kq bd b be z dk translated">作者图片</p></figure><p id="96cc" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">下面是基于下拉列表交换我们的行星图像的代码:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mx my l"/></div></figure><p id="3e16" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">这段代码是这样工作的:</p><ul class=""><li id="0e54" class="mz na iq kt b ku kv kx ky la nb le nc li nd lm ne nf ng nh bi translated">planet:这个变量保存我们选择输入的值。当我们在下拉菜单中选择一个新的行星时，这个动作会使这段代码失效，一个新的图像就会呈现出来</li><li id="8297" class="mz na iq kt b ku ni kx nj la nk le nl li nm lm ne nf ng nh bi translated">picFilePath:我们基于所选的行星构建图像的文件路径(例如，“地球”变成了“Earth.png”)。所有图像都位于shiny项目的主文件夹中，并通过相对文件路径进行访问。</li><li id="8642" class="mz na iq kt b ku ni kx nj la nk le nl li nm lm ne nf ng nh bi translated">return(list):这最终将我们的服务器代码变成了一个<img/>元素。</li><li id="3496" class="mz na iq kt b ku ni kx nj la nk le nl li nm lm ne nf ng nh bi translated">这些都是通过imageOutput()在我们的ui中获得的</li></ul><h1 id="3fb5" class="lu lv iq bd lw lx ms lz ma mb mt md me jw mu jx mg jz mv ka mi kc mw kd mk ml bi translated">技巧5:使用闪亮的布局</h1><p id="da82" class="pw-post-body-paragraph kr ks iq kt b ku mm jr kw kx mn ju kz la mo lc ld le mp lg lh li mq lk ll lm ij bi translated">我们不必受限于自上而下读取的应用程序。Shiny为我们提供了大量放置应用程序的选项。这些选项包括列、行、边栏、导航条等等！</p><p id="dc18" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">我们采取了一个非常简单的方法，将我们非常垂直的普通应用程序转换成不需要滚动的水平应用程序。</p><p id="088a" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">代码如下:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mx my l"/></div></figure><p id="8919" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">我们只有一行两列。左栏是图像，右栏是可反应的。每列旁边的数字是它的大小。fluidRow的总大小是12，所以图像占总宽度的1/3，表格占另外的2/3。</p><p id="3485" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">这是最终产品:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="ny nz di oa bf ob"><div class="gh gi of"><img src="../Images/18457b8cdc27c8f19224b21c7c565da9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rV7kYmxs689LFnxcj1WEUA.png"/></div></div><p class="kn ko gj gh gi kp kq bd b be z dk translated">作者图片</p></figure><p id="299b" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">还不错！</p></div></div>    
</body>
</html>