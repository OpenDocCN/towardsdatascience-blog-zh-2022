<html>
<head>
<title>Metrics of Recommender Systems: An Overview</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">推荐系统的度量:综述</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/metrics-of-recommender-systems-cde64042127a#2022-12-06">https://towardsdatascience.com/metrics-of-recommender-systems-cde64042127a#2022-12-06</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="2a0d" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">推荐系统的度量不同于传统的度量。在这里，我们来了解一下 RecSys 领域中广泛使用的 9 个此类指标。</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/d291ca9681a3980d5a14375413496556.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*qoXfwP7yynwqDHjl"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">照片由<a class="ae kv" href="https://unsplash.com/@parrish?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">帕里什·弗里曼</a>在<a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</p></figure><p id="7189" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">推荐系统的度量不同于传统的度量，如准确性，因为这些度量主要是在预测的排序列表上累积工作，而不是单个预测的分数。这是因为，对于推荐系统的场景，我们需要优化的业务需求几乎总是与作为一个整体的一组预测联系在一起，而不是单独的。也就是说，让我们来看 9 个对这个领域非常重要的指标。</p><h1 id="5300" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">1.精度@K</h1><p id="015e" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">这与普通精度非常相似，只是当按照您想要的方式排序时，它计算前 k 项的精度。通过这种方式，您可以灵活地改变 K，并查看精度分数是如何变化的。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi mp"><img src="../Images/e346c749bec4364525904e14af861a26.png" data-original-src="https://miro.medium.com/v2/resize:fit:996/format:webp/1*N37hsTEQgIojRh7u2Gg9Ag.png"/></div></figure><p id="7098" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">它在检索领域有很多用途。一个非常常见的用途是根据某个查询的前 10 个结果来衡量搜索引擎的性能。</p><h1 id="fd8a" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">2.回忆@K</h1><p id="91cd" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">类似于通常的召回度量，并且非常类似于上面的 Precision@K 度量。与上面的公式相比，它只有一个小的改动。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi mq"><img src="../Images/194c2df56e73ce020719abc654c62b25.png" data-original-src="https://miro.medium.com/v2/resize:fit:926/format:webp/1*V4_mBevljRJgK0iA11SYQw.png"/></div></figure><p id="7f95" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这在只有几个相关条目的情况下很有用，我们当然希望这些条目在最前面。一个很好的例子是通过用户点击一列项目来衡量性能。用户在商品上的大部分点击意味着推荐是有效的，并且会有很高的召回率。</p><h1 id="347a" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">3.地图@K</h1><p id="654e" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">MAP@K 或 Mean Average Precision @ K 是 Precision @ K 的高级版本。它擅长对精度进行整体测量，而不是仅基于 K 的一个值进行度量。我们先来看看 Average Precision @ K。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi mr"><img src="../Images/8d9f8cd36e71b95586845902226a2286.png" data-original-src="https://miro.medium.com/v2/resize:fit:734/format:webp/1*BDWf5D4oAhtY-HfBKezgXw.png"/></div></figure><p id="4a9f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这里，<em class="ms"> N </em>表示前 K 个项目中相关项目的总数。<em class="ms"> rel(i) </em>是在第<em class="ms">个</em>位置的项目的相关性。对于一个简单的例子，它要么是 1(相关)，要么是 0(不相关)。MAP@K 只是所有 AP@K 在所有查询中的平均值。它是上述两个指标的更好替代方案。</p><h1 id="c0b8" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">4.维护、修理和更换</h1><p id="33bc" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">MRR 或平均倒数排名是每个查询的第一个相关项目排名的倒数的平均值。写成一个公式，它是这样的</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi mt"><img src="../Images/6a43572d5ed3e9fefaeb30a6d85ad207.png" data-original-src="https://miro.medium.com/v2/resize:fit:434/format:webp/1*6Pfr8zZ9QwIuWXqyPJf8Jw.png"/></div></figure><p id="59c2" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这里，<em class="ms"> rank_i </em>表示第<em class="ms"> i 个</em>查询的第一个相关项目的等级。这是一个非常简单的指标。也许太简单了，以至于不能被广泛采用。然而，对于有 1 个完美/正确答案的推荐系统来说，这是完美的。对于像电子商务这样有多个相关项目的场景来说，这可能不是一个好主意。</p><h1 id="9032" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">5.r 分数</h1><p id="ae7f" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">现在我们转移到一个稍微不同的领域，在这里我们不直接评估排名列表。直接评估列表有时会让我们错过列表中第一项和第二项有多接近(就置信度而言)这样的信息。决定系数，也称为 R，对于回归型问题是一个非常方便和有用的度量。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi mu"><img src="../Images/7dc6207d9de75a1c2aceaeb14de3a436.png" data-original-src="https://miro.medium.com/v2/resize:fit:474/format:webp/1*jH3jEHqbydt0wo6gOJpVsg.png"/></div></figure><p id="2fe3" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这里，分子表示残差的和(真实预测)，分母表示平方和(N *方差)。r 可以提供一个模型的建议与地面实况或一些其他模型的建议有多接近的信息。</p><h1 id="5ad2" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">6.皮尔逊系数</h1><p id="7522" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">皮尔逊相关系数遵循与 R 相同的性质，尽管有不同的基本方法，但它有助于我们测量两组数据之间的相似性。其核心是两个变量之间的归一化协方差——它们的协方差和它们的标准差的乘积之间的比率。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi mv"><img src="../Images/cb3b73afee11fcb439bba1d40e21c8fa.png" data-original-src="https://miro.medium.com/v2/resize:fit:736/format:webp/1*o6hXZJzTD2is3w8vhTXWUA.png"/></div></figure><p id="9587" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这里，x 和 y 是我们的两组数据。n 是数据的大小。皮尔逊评分在过去被广泛用于老派的协同过滤来计算用户或项目之间的相似性。</p><h1 id="76fd" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">7.斯皮尔曼系数</h1><p id="4597" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">假设您正在使用皮尔逊系数计算两个模型的推荐集之间的相似性，并稍加改动。我们不是计算原始项目分数的相关性，而是计算项目在集合中的排序。这就是斯皮尔曼系数的本质。它是两个不同集合之间项目等级的相关性。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi mw"><img src="../Images/e8e44abb379f15719aba9f2d69a7f71e.png" data-original-src="https://miro.medium.com/v2/resize:fit:878/format:webp/1*YHqRNHjgJmBUUaYx8kr19A.png"/></div></figure><p id="caab" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这里，<strong class="ky ir"> <em class="ms"> R_x </em> </strong>和<strong class="ky ir"> <em class="ms"> R_y </em> </strong>是每个<em class="ms">I’</em>项在集合 x 和 y 中的等级。平均秩显然是 N/2。它可用于比较任何两个排序的项目列表。</p><h1 id="b4ac" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">8.NDCG</h1><p id="2c66" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">NDCG 或归一化折扣累积增益是信息检索中广泛使用的度量。它用于计算一组有序项目的累积分数。该度量的“折扣”部分惩罚出现在较低等级的较高相关性的项目。归一化的 DCG 取 DCG 直到某个等级“p ”,并将其除以通过对列表排序可获得的更高可能的 DCG(通过相关性分数对列表排序将最相关的项目放在顶部，这将给出最佳的 DCG)</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi mx"><img src="../Images/8dc82d19574e2bd41e494f06d2f3ba02.png" data-original-src="https://miro.medium.com/v2/resize:fit:378/format:webp/1*ae3Ash4XiWAS6UbuEQ3-Ew.png"/></div></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi my"><img src="../Images/617ec10cfed56ee653e77fd8a5d51086.png" data-original-src="https://miro.medium.com/v2/resize:fit:358/format:webp/1*x5JZlbpsh55uVczJL6MjSg.png"/></div></figure><p id="69ca" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这里<strong class="ky ir"> <em class="ms"> rel_i </em> </strong>是第<em class="ms">I’</em>位置的项目的相关性。<strong class="ky ir"> <em class="ms"> IDCG_p </em> </strong>是理想的或最高可能的 DCG，直到秩 p</p><h1 id="7006" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">9.肯德尔·陶</h1><p id="4de6" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">Kendall Tau 是另一种等级相关性度量，在它测量什么的意义上类似于 spearman 系数。但它的公式与我们迄今所见的任何公式都大不相同。肯德尔τ系数定义为</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi mz"><img src="../Images/0d9fe61b017306925ba2e2c8a1fdab29.png" data-original-src="https://miro.medium.com/v2/resize:fit:1196/format:webp/1*GjIviYARZ98rzqCY-mOWwQ.png"/></div></figure><p id="58d7" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">为了解释一致，让我们取两个列表 X 和 y 中的一对(item i，item j)设 X_i 是列表 X 中第<em class="ms"> i' </em>项的秩，那么(I，j)是一致的，如果以下任一项为真，否则不一致:</p><ol class=""><li id="b499" class="na nb iq ky b kz la lc ld lf nc lj nd ln ne lr nf ng nh ni bi translated"><strong class="ky ir"><em class="ms">X _ I</em></strong>&lt;<strong class="ky ir"><em class="ms">X _ j</em></strong>和<strong class="ky ir"><em class="ms">Y _ I</em></strong>&lt;<strong class="ky ir"><em class="ms">Y _ j</em></strong></li><li id="cd15" class="na nb iq ky b kz nj lc nk lf nl lj nm ln nn lr nf ng nh ni bi translated"><strong class="ky ir"><em class="ms">X _ I</em></strong>&gt;<strong class="ky ir"><em class="ms">X _ j</em></strong><strong class="ky ir"><em class="ms">Y _ I</em></strong>&gt;<strong class="ky ir"><em class="ms">Y _ j</em></strong></li></ol><p id="0654" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">基本上，它期望所有的配对在两个集合中遵循相同的顺序。</p></div><div class="ab cl no np hu nq" role="separator"><span class="nr bw bk ns nt nu"/><span class="nr bw bk ns nt nu"/><span class="nr bw bk ns nt"/></div><div class="ij ik il im in"><p id="1f28" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">显然，我们没有涵盖所有内容。还有许多其他指标，尤其是在其他领域，这些指标对于 recsys 应用中的不同使用情形都很有价值。在试图解决问题之前，为特定问题最终确定完美的评估标准是重要的一步。</p></div></div>    
</body>
</html>