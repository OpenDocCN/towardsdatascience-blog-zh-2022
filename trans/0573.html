<html>
<head>
<title>Recreating a 538 Election Plot: Making Custom Matplotlib Visualizations</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">重建538选举图:制作自定义Matplotlib可视化</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/recreating-a-538-elections-plot-making-custom-matplotlib-visualizations-b6ede7a406b4#2022-02-22">https://towardsdatascience.com/recreating-a-538-elections-plot-making-custom-matplotlib-visualizations-b6ede7a406b4#2022-02-22</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="6025" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">有些情况下，您希望您的数据可视化非常复杂</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/05895c4ddda0f3245592e945ea47ea70.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*lEDuL8gEcnShJm58"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated"><a class="ae kv" href="https://unsplash.com/@claybanks?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">粘土银行</a>在<a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>拍摄的照片</p></figure><p id="8278" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我最近对制作详细的和高度可定制的可视化感兴趣。虽然在许多情况下，使用基本命令生成标准绘图就足够了，但有些情况下，您希望数据可视化非常复杂。这导致转向低级函数来调整图中的每个元素。作为练习，在这个故事中，我想重现538年的<a class="ae kv" href="https://fivethirtyeight.com/features/how-urban-or-rural-is-your-state-and-what-does-that-mean-for-the-2020-election/" rel="noopener ugc nofollow" target="_blank">这个</a>形象。本质上，它是在描绘美国50个大陆州的城市化指数与政治偏好。</p><p id="58f4" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">首先，一些设置和导入数据。我将使用的两个主要库是用于数据清理的Pandas和用于重新创建可视化的matplotlib。数据集将从这里的<a class="ae kv" href="https://github.com/fivethirtyeight/data/tree/master/urbanization-index" rel="noopener ugc nofollow" target="_blank">获取</a>(这是538的GitHub repo，数据由CC BY 4.0许可)。从那里，我们可以连接“state”列上的数据。让我们来看看结果:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ls"><img src="../Images/b645f22af3ccd9203b1a0e0a42498973.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*eL5u98ip-HBvUns7dbUUwA.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">作者图片</p></figure><p id="da35" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">由于原始图已经计算了y轴上方的民主党州和下方的共和党州的“倾斜”，我将添加一个“从属”变量，计算为一个州的民主党百分比减去50%(这将是两党都受到同等支持的情况)。</p><p id="bdb2" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在原图中，我们可以看到一个灰色的背景，以及代表城市化指数的x轴和各自党派倾向的y轴。此外，我更改了y轴刻度，以反映“Party”+该方受支持程度的值。让我们先将它们添加到图中，包括我们看到的y=0处的粗线:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="lt lu l"/></div></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/3af21fed49a2ec20ae447c0e3302ff24.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zSEM2Z3FYRfqtLqYMAlVuw.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">作者图片</p></figure><p id="2fc0" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在，让我们自定义散点多一点:这里我们添加了一个浅蓝色和浅红色的点，这取决于他们的y值，以及一个边缘颜色与填充颜色的深色版本，以创建更多的对比:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="lt lu l"/></div></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi lv"><img src="../Images/cd8fb85bd784168f6e35a4e1179803ec.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*KZeONjYBXbZ1MC0TZ0wXqw.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">作者图片</p></figure><p id="ba05" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在，我们可以添加曲线箭头，正如我们在原始图表中看到的那样。这是使用matplotlib.patch的FancyArrowPatch完成的，第一组坐标设置箭头的位置，第二组坐标设置箭头的位置。“connectionstyle”属性设置箭头的形状，如下所示:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="lt lu l"/></div></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi lv"><img src="../Images/704d1a669cdf2c21d1ae407978cbe6d5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*p4HgMu6K17d_jaSFubGtZg.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">作者图片</p></figure><h2 id="eaa6" class="lw lx iq bd ly lz ma dn mb mc md dp me lf mf mg mh lj mi mj mk ln ml mm mn mo bi translated">结论</h2><p id="9b52" class="pw-post-body-paragraph kw kx iq ky b kz mp jr lb lc mq ju le lf mr lh li lj ms ll lm ln mt lp lq lr ij bi translated">原来如此！我试图重现538的情节，并附有一些评论。我们使用的主要函数是“annotate”、“FancyArrowPatch”和“scatter”，具有可定制的属性。我希望你喜欢这个小故事，并感谢阅读！</p></div></div>    
</body>
</html>