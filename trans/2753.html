<html>
<head>
<title>Data Visualization with Matplotlib, Seaborn, and Pandas</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Matplotlib、Seaborn和Pandas实现数据可视化</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/data-visualization-with-matplotlib-seaborn-and-pandas-288f63b99751#2022-06-14">https://towardsdatascience.com/data-visualization-with-matplotlib-seaborn-and-pandas-288f63b99751#2022-06-14</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="9ea3" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">有点相同，但也不同</h2></div><p id="817b" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">Seaborn基于Matplotlib，Pandas可视化是Matplotlib对象，但即使它们使用相同的后端，我们用它们绘制图表的方式也可能非常独特。</p><figure class="lf lg lh li gt lj gh gi paragraph-image"><div role="button" tabindex="0" class="lk ll di lm bf ln"><div class="gh gi le"><img src="../Images/54dea324934d1dd47326b84b9c6f15df.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0D8TpYyR6WElU9FOU46c4A.png"/></div></div><p class="lq lr gj gh gi ls lt bd b be z dk translated">分组条形图—作者图片</p></figure><p id="5627" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">本文将探索不同的条形图来比较Matplotlib、Pandas和Seaborn在数据可视化方面的可用性和优缺点。</p></div><div class="ab cl lu lv hx lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="im in io ip iq"><p id="9351" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们将从定义一些虚拟数据和导入所需的库开始。</p><pre class="lf lg lh li gt mb mc md me aw mf bi"><span id="f054" class="mg mh it mc b gy mi mj l mk ml">import pandas as pd<br/>import matplotlib.pyplot as plt<br/>import seaborn as sb<br/>import numpy as np</span><span id="4fcc" class="mg mh it mc b gy mm mj l mk ml">data = {'label':['I', 'II', 'III', 'IV', 'V', 'VI', 'VII', 'VIII', 'IX', 'X'],<br/>        'percent':[.1, .2, .3, .4, .5, .6, .7, .8, .9, 1],<br/>        'remaining':[.9, .8, .7, .6, .5, .4, .3, .2, .1, 0],<br/>       }</span><span id="fce5" class="mg mh it mc b gy mm mj l mk ml">df = pd.DataFrame(data)</span></pre><p id="3a56" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们将创建一个带有三个支线剧情的Matplotlib图形，然后绘制三个条形图，一个带有Matplotlib，一个带有Pandas，一个带有Seaborn。</p><pre class="lf lg lh li gt mb mc md me aw mf bi"><span id="d62a" class="mg mh it mc b gy mi mj l mk ml">f, (ax1, ax2, ax3) = plt.subplots(3, figsize=(12,8))</span><span id="5733" class="mg mh it mc b gy mm mj l mk ml"># matplotlib<br/>ax1.bar(df.label, df.percent)</span><span id="5a48" class="mg mh it mc b gy mm mj l mk ml"># pandas<br/>df.plot(x='label', y='percent', kind='bar', ax=ax2)</span><span id="358e" class="mg mh it mc b gy mm mj l mk ml"># seaborn<br/>sb.barplot(x=df.label, y=df.percent, ax=ax3)<br/><br/>plt.show()</span></pre><figure class="lf lg lh li gt lj gh gi paragraph-image"><div role="button" tabindex="0" class="lk ll di lm bf ln"><div class="gh gi le"><img src="../Images/43fbb1177d2109077a3f1f64a7415a90.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qFlAoUVMFQ-XydxHCeDCcw.png"/></div></div><p class="lq lr gj gh gi ls lt bd b be z dk translated">简单条形图—图片由作者提供</p></figure><p id="bb64" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">尽管我们的图表看起来彼此不同，并且我们使用不同的方法来制作它们，但是它们是由相同的Matplotlib对象制成的；我们编辑它们的方式是一样的。</p></div><div class="ab cl lu lv hx lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="im in io ip iq"><h2 id="8d13" class="mg mh it bd mn mo mp dn mq mr ms dp mt kr mu mv mw kv mx my mz kz na nb nc nd bi translated">定制的</h2><p id="b146" class="pw-post-body-paragraph ki kj it kk b kl ne ju kn ko nf jx kq kr ng kt ku kv nh kx ky kz ni lb lc ld im bi translated">一旦我们绘制出条形图，我们可以通过与轴、图形和其他对象交互来定制它们。</p><p id="e3a0" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">为了定制我们的图表，我们可以使用Seaborn的函数或者导航Matplotlib对象并进行调整。熊猫有它的窍门，可以方便出图，但是它没有编辑Matplotlib对象的方法，只有创建它们的方法。</p><p id="0232" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">让我们改变图表中的一些东西。我们将设置一个主题，用Seaborn删除脊线，添加标签，并用Matplotlib编辑记号、标题和图例。</p><pre class="lf lg lh li gt mb mc md me aw mf bi"><span id="9914" class="mg mh it mc b gy mi mj l mk ml"># seaborn theme<br/>sb.set_theme(style="whitegrid")</span><span id="2f06" class="mg mh it mc b gy mm mj l mk ml">f, (ax1, ax2, ax3) = plt.subplots(3, figsize=(10,16))</span><span id="74f3" class="mg mh it mc b gy mm mj l mk ml"># matplotlib + pandas<br/>ax1.bar(df.label, df.percent)<br/># pandas + matplotlib<br/>df.plot(x='label', y='percent', kind='bar', ax=ax2)<br/># seaborn + pandas<br/>sb.barplot(x=df.label, y=df.percent, ax=ax3)</span><span id="ff98" class="mg mh it mc b gy mm mj l mk ml"><strong class="mc iu"># remove espine<br/>sb.despine(f)</strong></span><span id="931f" class="mg mh it mc b gy mm mj l mk ml"><strong class="mc iu">for ax in [ax1, ax2, ax3]:<br/>    # add labels<br/>    container = ax.containers[0]<br/>    labels = ["{:g}%".format(val*100) for val in container.datavalues]<br/>    ax.bar_label(container, labels=labels)<br/>    # horizontal grid only<br/>    ax.grid(False)<br/>    ax.grid(axis='y')<br/>    # set y ticks<br/>    ticks = np.arange(0,1.1,0.1)<br/>    tick_labels = ["{:g}%".format(val) for val in ticks]<br/>    ax.set_yticks(ticks, tick_labels)<br/>    # remove legend<br/>    ax.legend([])<br/>    ax.get_legend().remove()<br/>    # define xy labels<br/>    ax.set_ylabel('Y Axis')<br/>    ax.set_xlabel('X Axis')<br/>    # title<br/>    ax.set_title('Hello World', fontsize=16)</strong></span><span id="2347" class="mg mh it mc b gy mm mj l mk ml">plt.show()</span></pre><figure class="lf lg lh li gt lj gh gi paragraph-image"><div role="button" tabindex="0" class="lk ll di lm bf ln"><div class="gh gi nj"><img src="../Images/ded698af1513319e124c5d15d02a4b60.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*V6UQO-CA4ZLIaoO4A9lC0A.png"/></div></div><p class="lq lr gj gh gi ls lt bd b be z dk translated">条形图—作者提供的图片</p></figure></div><div class="ab cl lu lv hx lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="im in io ip iq"><h2 id="8bf7" class="mg mh it bd mn mo mp dn mq mr ms dp mt kr mu mv mw kv mx my mz kz na nb nc nd bi translated">水平条</h2><p id="1b8d" class="pw-post-body-paragraph ki kj it kk b kl ne ju kn ko nf jx kq kr ng kt ku kv nh kx ky kz ni lb lc ld im bi translated">为了在Matplotlib中改变我们的横条，我们只需要改变<code class="fe nk nl nm mc b">.barh</code>的方法<code class="fe nk nl nm mc b">.bar</code>。</p><p id="b1e4" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">如果X是一个数字字段，Y是一个字符串，Seaborn将自动绘制水平条。如果X和Y都是数字，我们可以用参数:<code class="fe nk nl nm mc b">orient=’h’</code>强制水平显示。</p><p id="e7d4" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">熊猫有点令人困惑，但一点也不难。我们需要将参数<code class="fe nk nl nm mc b">kind</code>改为“barh”，就这样。XY参数是反转的，所以我们必须将标签传递给X，即使它们显示在y上。</p><pre class="lf lg lh li gt mb mc md me aw mf bi"><span id="7d35" class="mg mh it mc b gy mi mj l mk ml">f, (ax1, ax2, ax3) = plt.subplots(3, figsize=(10,12))</span><span id="cf37" class="mg mh it mc b gy mm mj l mk ml"><strong class="mc iu"># matplotlib<br/>ax1.barh(df.label, df.percent)<br/>    <br/># pandas<br/>df.plot(x='label', y='percent', kind='barh', ax=ax2)<br/>    <br/># seaborn<br/>sb.barplot(data=df, x='percent', y='label', orient='h', ax=ax3)</strong></span><span id="a8d8" class="mg mh it mc b gy mm mj l mk ml"># remove espine<br/>sb.despine(f)</span><span id="7e6d" class="mg mh it mc b gy mm mj l mk ml">for ax in [ax1, ax2, ax3]:<br/>    # add labels<br/>    container = ax.containers[0]<br/>    labels = ["{:g}%".format(val*100) for val in container.datavalues]<br/>    ax.bar_label(container, labels=labels)<br/>    # horizontal grid only<br/>    ax.grid(False)<br/>    ax.grid(axis='x')<br/>    # set x ticks<br/>    ticks = np.arange(0,1.1,0.1)<br/>    tick_labels = ["{:g}%".format(val) for val in ticks]<br/>    ax.set_xticks(ticks, tick_labels)<br/>    # remove legend<br/>    ax.legend([])<br/>    ax.get_legend().remove()<br/>    # define xy labels<br/>    ax.set_ylabel('Y Axis')<br/>    ax.set_xlabel('X Axis')<br/>    # title<br/>    ax.set_title('Hello World', fontsize=16)<br/>    <br/>plt.tight_layout()<br/>plt.show()</span></pre><figure class="lf lg lh li gt lj gh gi paragraph-image"><div role="button" tabindex="0" class="lk ll di lm bf ln"><div class="gh gi nj"><img src="../Images/0ccddf053992e3e490b3ae99264f1e29.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ZwmaNAjKP1vALfnHp-vB2A.png"/></div></div></figure></div><div class="ab cl lu lv hx lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="im in io ip iq"><h2 id="3143" class="mg mh it bd mn mo mp dn mq mr ms dp mt kr mu mv mw kv mx my mz kz na nb nc nd bi translated">分组/聚类条形图</h2><p id="9ce2" class="pw-post-body-paragraph ki kj it kk b kl ne ju kn ko nf jx kq kr ng kt ku kv nh kx ky kz ni lb lc ld im bi translated">Seaborn为Matplotlib添加了许多功能，Pandas也有其简化库的方法。</p><p id="04fb" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">为了用Matplotlib绘制一个簇状条形图，我们的X需要是数字来调整条形图的位置。我们还需要为每组条形使用<code class="fe nk nl nm mc b">.bar</code>函数。</p><p id="8fc0" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这一过程在海鸟和熊猫身上变得更加简单。</p><pre class="lf lg lh li gt mb mc md me aw mf bi"><span id="ba7a" class="mg mh it mc b gy mi mj l mk ml">f, (ax1, ax2, ax3) = plt.subplots(3, figsize=(12,8))</span><span id="ab1e" class="mg mh it mc b gy mm mj l mk ml"><strong class="mc iu"># matplotlib<br/>x = np.arange(0, len(df.label))<br/>ax1.bar(x-0.3, df.percent, width=0.3)<br/>ax1.bar(df.label, df.remaining, width=0.3)</strong></span><span id="b55c" class="mg mh it mc b gy mm mj l mk ml"><strong class="mc iu"># pandas<br/>df.plot(x='label', y=['percent', 'remaining'], kind='bar', ax=ax2)</strong></span><span id="9cda" class="mg mh it mc b gy mm mj l mk ml"><strong class="mc iu"># seaborn<br/>df2 = df.melt(id_vars=['label'], value_vars=['percent', 'remaining'])<br/>sb.barplot(data=df2, x='label', y='value', hue='variable', ax=ax3)</strong></span><span id="1eb1" class="mg mh it mc b gy mm mj l mk ml"># remove espine<br/>sb.despine(f)</span><span id="0005" class="mg mh it mc b gy mm mj l mk ml">for ax in [ax1, ax2, ax3]:<br/>    # add labels // loop containers to label all sets of bars<br/><strong class="mc iu">    for container in ax.containers:<br/>        values = container.datavalues*100<br/>        labels = ["{:g}%".format(val) for val in values]<br/>        ax.bar_label(container, labels=labels)</strong><br/>    # horizontal grid only<br/>    ax.grid(False)<br/>    ax.grid(axis='y')<br/>    # set y ticks<br/>    ticks = np.arange(0,1.1,0.1)<br/>    tick_labels = ["{:g}%".format(val*100) for val in ticks]<br/>    ax.set_yticks(ticks, tick_labels)<br/>    # remove legend<br/>    ax.legend([])<br/>    ax.get_legend().remove()<br/>    # define xy labels<br/>    ax.set_ylabel('Y Axis')<br/>    ax.set_xlabel('X Axis')<br/>    # title<br/>    ax.set_title('Hello World', fontsize=16)<br/>    <br/>plt.show()</span></pre><figure class="lf lg lh li gt lj gh gi paragraph-image"><div role="button" tabindex="0" class="lk ll di lm bf ln"><div class="gh gi le"><img src="../Images/69d607b169abf1a78286cf033a3e7ac1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*QX4H7ctY7vW8jzmZ7C061g.png"/></div></div></figure><p id="9949" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">Pandas允许我们为Y使用一个字段列表，并在传递多个值时自动绘制一个簇状条形图；我们需要每组条形的一列值。</p><p id="728d" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">Seaborn允许我们定义色调，它控制我们的数据如何分组和着色；我们需要一列显示所有的值，一列显示条形的类别/组。在上面的例子中，我们必须调整数据帧的形状以适应Seaborn。</p></div><div class="ab cl lu lv hx lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="im in io ip iq"><h2 id="0977" class="mg mh it bd mn mo mp dn mq mr ms dp mt kr mu mv mw kv mx my mz kz na nb nc nd bi translated">最后的想法</h2><p id="dd3d" class="pw-post-body-paragraph ki kj it kk b kl ne ju kn ko nf jx kq kr ng kt ku kv nh kx ky kz ni lb lc ld im bi translated">Seaborn对我们的图表风格化很有帮助；通过更多可访问的功能和不同的图表类型，它为可视化过程增加了很多价值。</p><p id="e21d" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">熊猫擅长快速想象。不用导入任何额外的库，只用一行代码就能生成一个不错的图表。</p><p id="4302" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">但最终，它们都是Matplotlib，所以不管我们使用哪个选项，如果我们理解Matplotlib的结构和对象，我们就能够根据我们的需要定制图表。</p><p id="abd7" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们还可以在单个可视化上利用所有三个库；我们可以直接从熊猫开始绘制，使用Seaborn添加友好的主题，使用Matplotlib调整细节。</p></div><div class="ab cl lu lv hx lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="im in io ip iq"><p id="0c5f" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">感谢阅读我的文章！<br/> <a class="ae nn" href="https://linktr.ee/thiagobc23" rel="noopener ugc nofollow" target="_blank">更多教程</a> | <a class="ae nn" href="https://twitter.com/thiagobc231" rel="noopener ugc nofollow" target="_blank">推特</a></p></div></div>    
</body>
</html>