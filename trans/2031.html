<html>
<head>
<title>The Landscape of Timeseries Databases</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">时间序列数据库的前景</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/the-landscape-of-timeseries-databases-95cd7f7ee64d#2022-05-09">https://towardsdatascience.com/the-landscape-of-timeseries-databases-95cd7f7ee64d#2022-05-09</a></blockquote><div><div class="fc ii ij ik il im"/><div class="in io ip iq ir"><figure class="it iu gq gs iv iw gi gj paragraph-image"><div role="button" tabindex="0" class="ix iy di iz bf ja"><div class="gi gj is"><img src="../Images/97e18fa81a6fdf5c52497d7e58abac18.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*TYIkMR-TAlPSLRmt3brdrA.jpeg"/></div></div><p class="jd je gk gi gj jf jg bd b be z dk translated">纳赛尔·塔米米在<a class="ae jh" href="https://unsplash.com/s/photos/fast?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</p></figure><h2 id="302a" class="ji jj jk bd b dl jl jm jn jo jp jq dk jr translated" aria-label="kicker paragraph">数据工程</h2><div class=""/><div class=""><h2 id="fd8c" class="pw-subtitle-paragraph kq jt jk bd b kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh dk translated">当今时间序列数据库概述</h2></div><p id="716e" class="pw-post-body-paragraph li lj jk lk b ll lm ku ln lo lp kx lq lr ls lt lu lv lw lx ly lz ma mb mc md in bi translated"><em class="me">本文最后更新于2023年1月25日。</em></p><h1 id="d790" class="mf mg jk bd mh mi mj mk ml mm mn mo mp kz mq la mr lc ms ld mt lf mu lg mv mw bi translated">背景</h1><p id="ec8e" class="pw-post-body-paragraph li lj jk lk b ll mx ku ln lo my kx lq lr mz lt lu lv na lx ly lz nb mb mc md in bi translated">在使用过一些重要的时间序列数据库产品，并从技术爱好者的角度探索过其他产品之后，我认为在一篇快速的文章中总结一下我所学到的东西可能会有所帮助。当我在2017年开始为一个同事想要建立的算法期权交易平台摆弄InfluxDB时，我变得喜欢上了时间序列数据库。我们进行了几天的头脑风暴。除了我摆弄InfluxDB激发了我对时间序列数据库的兴趣之外，没有任何结果。从那以后，我一直关注着TSDBs世界的最新动态。</p><p id="9dea" class="pw-post-body-paragraph li lj jk lk b ll lm ku ln lo lp kx lq lr ls lt lu lv lw lx ly lz ma mb mc md in bi translated">我以前写过关于时序数据库的文章。我报道了它们空前的受欢迎程度，以及其他一些专门的，或者AWS喜欢称之为“T9”的专用数据库。我还谈到了一些流行数据库的具体特性，如InfluxDB(流入线协议)、TimescaleDB(使用TSBS进行比较)和QuestDB(摄取模式)。在本文中，我将介绍最流行的时间序列数据库，以及几个不是专门为解决时间序列问题而构建的、能够很好地处理时间序列问题的数据库。所以，事不宜迟，让我们开始吧。</p><h1 id="5565" class="mf mg jk bd mh mi mj mk ml mm mn mo mp kz mq la mr lc ms ld mt lf mu lg mv mw bi translated">时间系列数据库</h1><h2 id="2d47" class="nc mg jk bd mh nd ne dn ml nf ng dp mp lr nh ni mr lv nj nk mt lz nl nm mv jq bi translated"><a class="ae jh" href="https://github.com/influxdata/influxdb" rel="noopener ugc nofollow" target="_blank"> InfluxDB </a></h2><p id="3ebb" class="pw-post-body-paragraph li lj jk lk b ll mx ku ln lo my kx lq lr mz lt lu lv na lx ly lz nb mb mc md in bi translated"><em class="me">用于指标、事件和实时分析的可扩展数据存储。</em></p><p id="0111" class="pw-post-body-paragraph li lj jk lk b ll lm ku ln lo lp kx lq lr ls lt lu lv lw lx ly lz ma mb mc md in bi translated">InfluxDB是一个开源数据库。到目前为止，这是世界上最流行和最常用的时序数据库。InfluxData通过提供企业版的本地数据库和云中的T2来赚钱。像大多数其他TSDBs一样，您可以在三个主要云平台上部署influx db—<a class="ae jh" href="https://aws.amazon.com/marketplace/pp/prodview-4e7raoxoxsl4y" rel="noopener ugc nofollow" target="_blank">AWS</a>、<a class="ae jh" href="https://cloud.google.com/community/tutorials/influxdb-google-data-studio" rel="noopener ugc nofollow" target="_blank"> Google Cloud </a>和<a class="ae jh" href="https://www.influxdata.com/blog/how-run-time-series-database-azure/" rel="noopener ugc nofollow" target="_blank"> Azure </a>。</p><p id="9eb0" class="pw-post-body-paragraph li lj jk lk b ll lm ku ln lo lp kx lq lr ls lt lu lv lw lx ly lz ma mb mc md in bi translated">InfluxDB还为您提供了流行用例的模板。一个有趣的用例是监控反恐精英的游戏指标，如下图所示:</p><figure class="no np nq nr gu iw gi gj paragraph-image"><div role="button" tabindex="0" class="ix iy di iz bf ja"><div class="gi gj nn"><img src="../Images/9bc3c90f58f1dfcb04a14e4d05620875.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*T7On0kTk846kwjEI3T7S-w.png"/></div></div><p class="jd je gk gi gj jf jg bd b be z dk translated">图片由Ignacio Van Droogenbroeck 提供。许可证— APLv2。</p></figure><p id="40b4" class="pw-post-body-paragraph li lj jk lk b ll lm ku ln lo lp kx lq lr ls lt lu lv lw lx ly lz ma mb mc md in bi translated">毫无疑问，在过去的几年里，InfluxDB在时间序列数据库的加速发展中发挥了重要作用。一个这样的例子是<a class="ae jh" href="https://www.youtube.com/watch?v=nfVCKIs_MY0" rel="noopener ugc nofollow" target="_blank"> InfluxDB line协议</a>，这是一个轻量级协议，用于将时间序列数据存储和传输到时间序列数据库中。另一个主要的timeseries数据库QuestDB支持PostgreSQL wire协议，由于其实现和性能，它决定支持并推动InfluxDB line协议。</p><p id="6118" class="pw-post-body-paragraph li lj jk lk b ll lm ku ln lo lp kx lq lr ls lt lu lv lw lx ly lz ma mb mc md in bi translated">你可以在这个博客上阅读更多关于他们的旅程<a class="ae jh" href="https://www.influxdata.com/blog/" rel="noopener ugc nofollow" target="_blank">。</a></p><h2 id="a834" class="nc mg jk bd mh nd ne dn ml nf ng dp mp lr nh ni mr lv nj nk mt lz nl nm mv jq bi translated"><a class="ae jh" href="https://github.com/questdb/questdb" rel="noopener ugc nofollow" target="_blank"> QuestDB </a></h2><p id="eb72" class="pw-post-body-paragraph li lj jk lk b ll mx ku ln lo my kx lq lr mz lt lu lv na lx ly lz nb mb mc md in bi translated"><em class="me">旨在更快处理时序数据的开源SQL数据库</em></p><p id="386e" class="pw-post-body-paragraph li lj jk lk b ll lm ku ln lo lp kx lq lr ls lt lu lv lw lx ly lz ma mb mc md in bi translated">Vlad Ilyushchenko于21世纪初在金融服务行业工作，他对低延迟在金融领域的重要性有很好的认识。他启动QuestDB是为了创建一个大规模运行的超高速时间序列数据库。最近，Vlad在卡内基梅隆大学数据库组谈到了QuestDB的架构和令人兴奋的用例:</p><figure class="no np nq nr gu iw"><div class="bz fq l di"><div class="ns nt l"/></div><p class="jd je gk gi gj jf jg bd b be z dk translated">QuestDB的CTO Vlad在卡内基梅隆大学谈论QuestDB的架构和用例。</p></figure><p id="adec" class="pw-post-body-paragraph li lj jk lk b ll lm ku ln lo lp kx lq lr ls lt lu lv lw lx ly lz ma mb mc md in bi translated">QuestDB使用列结构来存储数据。QuestDB在每一列的底部附加任何新数据，以保持所接收数据的自然时间顺序。该数据库还支持时间序列数据的关系建模，这意味着您可以编写连接并使用SQL查询来读取数据。</p><p id="a648" class="pw-post-body-paragraph li lj jk lk b ll lm ku ln lo lp kx lq lr ls lt lu lv lw lx ly lz ma mb mc md in bi translated">像今天的许多其他timeseries数据库一样，QuestDB受到开源关系数据库巨头PostgreSQL的启发。就像在Redshift中运行大多数PostgreSQL查询一样，您也可以在QuestDB中运行这些查询。这在QuestDB中是可能的，因为它支持Postgres有线协议。这种Postgres兼容性也意味着您用来连接PostgreSQL的大多数驱动程序也可以与QuestDB一起工作。你可以在这里找到QuestDB的PostgreSQL兼容性<a class="ae jh" href="https://questdb.io/docs/reference/api/postgres/" rel="noopener ugc nofollow" target="_blank">的优点和局限性。</a></p><p id="1fe5" class="pw-post-body-paragraph li lj jk lk b ll lm ku ln lo lp kx lq lr ls lt lu lv lw lx ly lz ma mb mc md in bi translated">已经有一段时间了，但是我写了关于使用TSBS(时间序列基准测试套件)进行<a class="ae jh" rel="noopener" target="_blank" href="/questdb-vs-timescaledb-38160a361c0e">基准测试QuestDB &amp; TimescaleDB性能</a>的文章。实际上，您可以使用TSBS来比较大多数时间序列数据库。这是GitHub的回购协议。</p><h2 id="fb5f" class="nc mg jk bd mh nd ne dn ml nf ng dp mp lr nh ni mr lv nj nk mt lz nl nm mv jq bi translated"><a class="ae jh" href="https://github.com/timescale/timescaledb" rel="noopener ugc nofollow" target="_blank">时间刻度B </a></h2><p id="ef2b" class="pw-post-body-paragraph li lj jk lk b ll mx ku ln lo my kx lq lr mz lt lu lv na lx ly lz nb mb mc md in bi translated"><em class="me">开源时序SQL数据库，针对快速接收和复杂查询进行了优化。它被打包成一个PostgreSQL扩展。</em></p><p id="8555" class="pw-post-body-paragraph li lj jk lk b ll lm ku ln lo lp kx lq lr ls lt lu lv lw lx ly lz ma mb mc md in bi translated">PostgreSQL的一大特点是它的可扩展性。许多令人惊叹的数据库都建立在PostgreSQL之上，这并不是巧合。比如红移就是一个。TimescaleDB是众多例子中的另一个。TimescaleDB本质上是PostgreSQL之上的一个包扩展，解决时间序列数据的特定读写模式。在下面的视频中，<a class="ae jh" href="https://se.linkedin.com/in/eriknordstrom" rel="noopener ugc nofollow" target="_blank">Erik nord strm</a>讲述了TimescaleDB的工作原理，以及它与其他竞争对手相比的优势:</p><figure class="no np nq nr gu iw"><div class="bz fq l di"><div class="ns nt l"/></div><p class="jd je gk gi gj jf jg bd b be z dk translated">从PostgreSQL构建TimescaleDB。</p></figure><p id="785a" class="pw-post-body-paragraph li lj jk lk b ll lm ku ln lo lp kx lq lr ls lt lu lv lw lx ly lz ma mb mc md in bi translated">TimescaleDB可以下载并自托管。它也可以通过多云管理平台Aiven托管在您选择的平台上的云中。我已经讨论了AWS上针对本文中讨论的许多数据库的不同部署选项:</p><div class="it iu gq gs iv nu"><a href="https://aws.plainenglish.io/timeseries-databases-on-aws-236677f739db" rel="noopener  ugc nofollow" target="_blank"><div class="nv ab fp"><div class="nw ab nx cl cj ny"><h2 class="bd ju gz z fq nz fs ft oa fv fx jt bi translated">AWS上的时间序列数据库</h2><div class="ob l"><h3 class="bd b gz z fq nz fs ft oa fv fx dk translated">以及AWS市场上最新的TSDBs</h3></div><div class="oc l"><p class="bd b dl z fq nz fs ft oa fv fx dk translated">aws .平原英语. io</p></div></div><div class="od l"><div class="oe l of og oh od oi jb nu"/></div></div></a></div><p id="4959" class="pw-post-body-paragraph li lj jk lk b ll lm ku ln lo lp kx lq lr ls lt lu lv lw lx ly lz ma mb mc md in bi translated">TimescaleDB还提供了<a class="ae jh" href="https://www.timescale.com/promscale" rel="noopener ugc nofollow" target="_blank"> Promscale </a>，一个为<a class="ae jh" href="https://prometheus.io" rel="noopener ugc nofollow" target="_blank"> Prometheus </a>高效处理OpenTelemetry数据的数据库后端。你可以在官方博客的<a class="ae jh" href="https://blog.timescale.com" rel="noopener ugc nofollow" target="_blank">上了解更多关于TimescaleDB与PostgreSQL和其他产品的不同之处。</a></p><h2 id="7eb1" class="nc mg jk bd mh nd ne dn ml nf ng dp mp lr nh ni mr lv nj nk mt lz nl nm mv jq bi translated"><a class="ae jh" href="https://github.com/KxSystems/kdb" rel="noopener ugc nofollow" target="_blank"> kdb+ </a></h2><p id="e365" class="pw-post-body-paragraph li lj jk lk b ll mx ku ln lo my kx lq lr mz lt lu lv na lx ly lz nb mb mc md in bi translated">这是独一无二的。kdb+是一个支持关系建模和内存计算的柱状时序数据库。在高科技金融交易行业已经有相当一段时间的知名度了。kdb+是用一种很少使用的编程语言k编写的，这种语言以其数组处理能力而闻名。查询语言也是基于k的一个变体，称为q。在本教程中，您可以亲自了解这两种语言的深奥本质。</p><p id="45ea" class="pw-post-body-paragraph li lj jk lk b ll lm ku ln lo lp kx lq lr ls lt lu lv lw lx ly lz ma mb mc md in bi translated">老实说，我不知道谁在或曾经在kdb+上工作，但这说明这是一个远离主流的小众产品。你会发现足够多的公司将它与不太常见的架构模式一起使用，比如这里描述的<a class="ae jh" href="https://code.kx.com/q/cloud/aws/" rel="noopener ugc nofollow" target="_blank"/>，它涉及将<a class="ae jh" href="https://aws.amazon.com/fsx/lustre/" rel="noopener ugc nofollow" target="_blank"> Amazon FSx for Lustre </a>与许多EC2实例、S3桶等一起使用。，用于kdb+的服务，如Tickerplant、实时数据库、历史数据库、复杂事件处理(CEP)和网关。类似的架构在Azure、<a class="ae jh" href="https://code.kx.com/q/cloud/gcpm/" rel="noopener ugc nofollow" target="_blank"> Google Cloud </a>和Digital Ocean上也是可能的。</p><div class="it iu gq gs iv nu"><a href="https://databricks.com/blog/2021/05/25/time-series-data-analytics-in-financial-services-with-databricks-and-kx.html" rel="noopener  ugc nofollow" target="_blank"><div class="nv ab fp"><div class="nw ab nx cl cj ny"><h2 class="bd ju gz z fq nz fs ft oa fv fx jt bi translated">用KX和数据布里克斯进行高速金融时间序列分析</h2><div class="ob l"><h3 class="bd b gz z fq nz fs ft oa fv fx dk translated">这是一篇嘉宾合著的帖子。我们感谢KX合作伙伴工程主管Connor Gervin所做的贡献。KX…</h3></div><div class="oc l"><p class="bd b dl z fq nz fs ft oa fv fx dk translated">databricks.com</p></div></div><div class="od l"><div class="oj l of og oh od oi jb nu"/></div></div></a></div><p id="4de6" class="pw-post-body-paragraph li lj jk lk b ll lm ku ln lo lp kx lq lr ls lt lu lv lw lx ly lz ma mb mc md in bi translated">Databricks与kdb+合作，使用Spark 实现了<a class="ae jh" href="https://github.com/hughhyndman/kdbspark" rel="noopener ugc nofollow" target="_blank">超快速的金融时间系列数据分析。您可以使用几个选项将Databricks与kdb+结合使用，包括PyQ、Databricks APIs、使用JDBC的联邦查询等。数据库排名网站db-engines.com在时间序列数据库类别中排名第二，仅次于InfluxDB。虽然我有理由怀疑你在下一份工作中是否需要kdb+-</a></p><figure class="no np nq nr gu iw gi gj paragraph-image"><div role="button" tabindex="0" class="ix iy di iz bf ja"><div class="gi gj ok"><img src="../Images/728efd5633bb9922b386bf65d82bde67.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Fgx1b0tHH8mdi0LZyoSO8A.png"/></div></div></figure><h2 id="6cb0" class="nc mg jk bd mh nd ne dn ml nf ng dp mp lr nh ni mr lv nj nk mt lz nl nm mv jq bi translated"><a class="ae jh" href="https://druid.apache.org/" rel="noopener ugc nofollow" target="_blank">德鲁伊</a></h2><p id="2fde" class="pw-post-body-paragraph li lj jk lk b ll mx ku ln lo my kx lq lr mz lt lu lv na lx ly lz nb mb mc md in bi translated">Druid不一定只是一个timeseries数据库，而是通常用于对时序数据进行超快速聚合。因此，Druid更适合作为基于时间的分析数据库。正因为如此，德鲁伊的架构壮举在于它所服务的各种用例。一些用例与InfluxDB和TimescaleDB等时间序列数据库重叠，例如网络遥测分析和应用性能分析。由于这种重叠，Druid组合了<a class="ae jh" href="https://druid.apache.org/technology" rel="noopener ugc nofollow" target="_blank">一个数据仓库、一个时间序列数据库和一个搜索系统</a>。</p><div class="it iu gq gs iv nu"><a href="https://www.rilldata.com/blog/guide-to-apache-druid-architectures" rel="noopener  ugc nofollow" target="_blank"><div class="nv ab fp"><div class="nw ab nx cl cj ny"><h2 class="bd ju gz z fq nz fs ft oa fv fx jt bi translated">Apache Druid架构指南</h2><div class="ob l"><h3 class="bd b gz z fq nz fs ft oa fv fx dk translated">在我们组建Rill数据团队的过程中，我们经常会遇到一些不熟悉Apache Druid的人，他们正在寻找各种方法来提高自己…</h3></div><div class="oc l"><p class="bd b dl z fq nz fs ft oa fv fx dk translated">www.rilldata.com</p></div></div><div class="od l"><div class="ol l of og oh od oi jb nu"/></div></div></a></div><p id="36cc" class="pw-post-body-paragraph li lj jk lk b ll lm ku ln lo lp kx lq lr ls lt lu lv lw lx ly lz ma mb mc md in bi translated">它的核心重点是成为一个具有列存储、实时和批量接收能力的分布式MPP系统，这对于您的数据工程堆栈来说是一个令人兴奋的工具。对于超快速查询，Druid使用<a class="ae jh" href="https://roaringbitmap.org/" rel="noopener ugc nofollow" target="_blank">压缩位图索引</a>和基于时间的分区来删除不需要的数据。Druid使用基于JSON的查询语言，类似于您可能在MongoDB或Cassandra中看到的。尽管如此，因为每个人都知道SQL并使用SQL与数据交互，所以Druid还提供了Druid SQL，这是一个在原生查询引擎之上的包装器。</p><p id="5e3b" class="pw-post-body-paragraph li lj jk lk b ll lm ku ln lo lp kx lq lr ls lt lu lv lw lx ly lz ma mb mc md in bi translated">像网飞、Airbnb、Salesforce、Booking、Appsflyer、Criteo和PayPal这样的公司在生产中使用Druid。这里有一个来自网飞科技博客的案例研究，讲述了他们如何将德鲁伊与卡夫卡结合使用，以实时传递洞察力:</p><div class="it iu gq gs iv nu"><a href="https://netflixtechblog.com/how-netflix-uses-druid-for-real-time-insights-to-ensure-a-high-quality-experience-19e1e8568d06" rel="noopener  ugc nofollow" target="_blank"><div class="nv ab fp"><div class="nw ab nx cl cj ny"><h2 class="bd ju gz z fq nz fs ft oa fv fx jt bi translated">网飞如何利用德鲁伊的实时洞察力来确保高质量的体验</h2><div class="ob l"><h3 class="bd b gz z fq nz fs ft oa fv fx dk translated">本·赛克斯</h3></div><div class="oc l"><p class="bd b dl z fq nz fs ft oa fv fx dk translated">netflixtechblog.com</p></div></div><div class="od l"><div class="om l of og oh od oi jb nu"/></div></div></a></div><p id="3313" class="pw-post-body-paragraph li lj jk lk b ll lm ku ln lo lp kx lq lr ls lt lu lv lw lx ly lz ma mb mc md in bi translated">我还建议由<a class="on oo ep" href="https://medium.com/u/6ce225eafe47?source=post_page-----95cd7f7ee64d--------------------------------" rel="noopener" target="_blank">罗曼·莱文托夫</a>撰写的另一篇博文，讨论德鲁伊、皮诺和点击屋之间的区别。</p><h1 id="8479" class="mf mg jk bd mh mi mj mk ml mm mn mo mp kz mq la mr lc ms ld mt lf mu lg mv mw bi translated">结论</h1><p id="9724" class="pw-post-body-paragraph li lj jk lk b ll mx ku ln lo my kx lq lr mz lt lu lv na lx ly lz nb mb mc md in bi translated">时间序列数据库非常适合许多用例，尤其是当默认情况下数据具有自然的时间顺序时。由于这种需求，时不时需要支持的时间序列数据库的数量有所上升。这也导致一些云平台推出了他们的timeseries数据库，部分或全部受到了开源数据库的启发。在接下来的几年中，我们将会看到更多的应用出现在timeseries数据库领域。作为一个SQL人，我可能会有偏见，但我确实认为大多数timeseries数据库会尝试支持ANSI SQL标准。让我们看看。</p><p id="486f" class="pw-post-body-paragraph li lj jk lk b ll lm ku ln lo lp kx lq lr ls lt lu lv lw lx ly lz ma mb mc md in bi translated">如果你觉得我的文章有用，请订阅并查看我的文章🌲<a class="ae jh" href="https://linktr.ee/kovid" rel="noopener ugc nofollow" target="_blank"> <strong class="lk ju"> Linktree </strong> </a>。你也可以考虑通过<a class="ae jh" href="https://kovidrathee.medium.com/membership" rel="noopener">使用我的推荐链接购买中级会员</a>来支持我。干杯！</p></div></div>    
</body>
</html>