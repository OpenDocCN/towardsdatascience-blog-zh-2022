<html>
<head>
<title>Bringing Order into Bar Chart Chaos</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">将秩序带入条形图的混乱中</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/bringing-order-into-bar-chart-chaos-f271ab91a6ee#2022-09-02">https://towardsdatascience.com/bringing-order-into-bar-chart-chaos-f271ab91a6ee#2022-09-02</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="c94e" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">对单个多面ggplot2条形图中的条形图进行排序</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/aa2d61b3b9b8e2d4bddaca8e0476e862.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fIrtjMVSjiFGLccRykJY6g.jpeg"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">作者图片</p></figure><p id="930c" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">我们都喜欢秩序(或者至少是我们大多数人)。它帮助我们组织我们的思想，给我们一种平静的感觉。同样的原理也适用于数据可视化。我们喜欢它们整洁有序，因为这样看起来更美观，便于比较。条形图是一种可视化，其中这一点最为明显。在处理单个图表时，大多数人可能都熟悉对条形图进行重新排序。然而，我敢打赌，你们中的大多数人在刻面图上做这个会有问题。在下文中，我将展示如何使用来自<a class="ae lr" href="https://data.worldbank.org/indicator/NY.GDP.MKTP.CD" rel="noopener ugc nofollow" target="_blank">世界数据库</a>的国内生产总值(GDP)信息来解决这两种情况下的问题。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ls lt l"/></div></figure><h2 id="2382" class="lu lv iq bd lw lx ly dn lz ma mb dp mc le md me mf li mg mh mi lm mj mk ml mm bi translated">订购单个条形图</h2><p id="7ec9" class="pw-post-body-paragraph kv kw iq kx b ky mn jr la lb mo ju ld le mp lg lh li mq lk ll lm mr lo lp lq ij bi translated">让我们只筛选四十年间世界前七大经济体:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ls lt l"/></div></figure><p id="bd64" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">现在，我们可以用一个条形图来比较他们的GDP:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ls lt l"/></div></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="ab gu cl ms"><img src="../Images/c69e5c50e2c96ee7e5e5be7cd7a725f9.png" data-original-src="https://miro.medium.com/v2/format:webp/1*EyFquAsGkygYgJDyzLTZSQ.png"/></div></figure><p id="0230" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">比较国家有点困难，因为国家标签不是由他们的GDP订购的。我们可以通过使用<code class="fe mt mu mv mw b">reorder</code>函数按照2020年的GDP对这些国家进行降序排列来解决这个问题。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ls lt l"/></div></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="ab gu cl ms"><img src="../Images/cfe3115442cbe44a12dff336a3d90da8.png" data-original-src="https://miro.medium.com/v2/format:webp/1*VFQ7zHg1D7EtzWgDOCcyxQ.png"/></div></figure><p id="4735" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">太好了！我们获得了一块有用的土地。然而，这只是2020年的图表。下一节将展示当同时显示不同年份的多个条形图时，如何对条形图进行排序。</p><h2 id="0893" class="lu lv iq bd lw lx ly dn lz ma mb dp mc le md me mf li mg mh mi lm mj mk ml mm bi translated">多个图表—显示条形图</h2><p id="fce3" class="pw-post-body-paragraph kv kw iq kx b ky mn jr la lb mo ju ld le mp lg lh li mq lk ll lm mr lo lp lq ij bi translated">为了同时说明各国在不同时间的GDP对比，我们可以使用<code class="fe mt mu mv mw b">facet_wrap</code>函数:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ls lt l"/></div></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="ab gu cl ms"><img src="../Images/f38d35c5e7def3e04990a5bd7b782c75.png" data-original-src="https://miro.medium.com/v2/format:webp/1*PCANN94NgcRZYM0eAvKtPw.png"/></div></figure><p id="8da5" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">我们可以观察到与之前相同的问题—小节没有排序。让我们试着用同样的方法来解决这个问题:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ls lt l"/></div></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="ab gu cl ms"><img src="../Images/61f19bd4c6eb5437c4ac17048265d9af.png" data-original-src="https://miro.medium.com/v2/format:webp/1*j4Us-7AV96tGWkgTKR_ysQ.png"/></div></figure><p id="bc55" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">问题依然存在！您可能会认为这可能只是这个facet布局的产物，因为在整个列中使用相同的水平轴标签会自动强制相同的条排序。如果是这种情况，可以通过允许每个面拥有自己的一组水平轴标签来解决这个问题。我们可以通过将<code class="fe mt mu mv mw b">facet_wrap</code>函数的<code class="fe mt mu mv mw b">scales</code>参数设置为“free_x”来做到这一点。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ls lt l"/></div></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="ab gu cl ms"><img src="../Images/d67a4b3c0b9d98814c52f69205e42ade.png" data-original-src="https://miro.medium.com/v2/format:webp/1*Fz_CJR0K8EK1X4WhZqet1g.png"/></div></figure><p id="d9c6" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">这也没有解决问题，因为排序又是全局进行的。下一节将展示如何使用<code class="fe mt mu mv mw b">tidytext</code>包绕过这个问题。</p><h2 id="2ba1" class="lu lv iq bd lw lx ly dn lz ma mb dp mc le md me mf li mg mh mi lm mj mk ml mm bi translated">对方面进行排序</h2><p id="ae80" class="pw-post-body-paragraph kv kw iq kx b ky mn jr la lb mo ju ld le mp lg lh li mq lk ll lm mr lo lp lq ij bi translated">顾名思义，<code class="fe mt mu mv mw b">tidytext</code>包是为了便于将文本转换成整齐的格式而创建的。在这里，我们将关注于<code class="fe mt mu mv mw b">reorder_within</code>函数，它允许我们在一个facet中重新排序条。除了将<code class="fe mt mu mv mw b">reorder</code>函数与<code class="fe mt mu mv mw b">reorder_within</code>函数交换之外，我们还必须从同一个包中添加一个对<code class="fe mt mu mv mw b">scale_x_reordered</code>函数的调用，以使其工作。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ls lt l"/></div></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="ab gu cl ms"><img src="../Images/60b57fdfbd3ea57097d85489d312d98d.png" data-original-src="https://miro.medium.com/v2/format:webp/1*Us0pNdO09kOpI464l6Q-Fw.png"/></div></figure><p id="00cf" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">就是这样！我们可以看到，在过去的四十年里，美国一直保持着第一的位置。然而，中国的增长率最快，而且似乎正在接近。日本和德国设法保住了领先两个国家的位置，但其他主要欧洲经济体，如法国和英国，似乎正在落后，为印度让路。</p><h2 id="a5cc" class="lu lv iq bd lw lx ly dn lz ma mb dp mc le md me mf li mg mh mi lm mj mk ml mm bi translated">结论</h2><p id="5302" class="pw-post-body-paragraph kv kw iq kx b ky mn jr la lb mo ju ld le mp lg lh li mq lk ll lm mr lo lp lq ij bi translated">这篇文章展示了如何订购单一和多面条形图。最终的有序分面图使我们能够更容易地对世界上最重要的经济体进行比较。所以，下次你想在多面条形图之间进行比较时，你应该知道该怎么做。对于任何问题或意见，请随时发表评论。</p><p id="46db" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">附注:对于那些无法停止思考那些无序砖柱的人，这里有一个挠痒痒的地方:)</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi mx"><img src="../Images/beb1c78c27ec873e1a3d2fa98c226acf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wrazp62c2yIGsi8EYfPdeg.jpeg"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">作者图片</p></figure></div></div>    
</body>
</html>