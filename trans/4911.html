<html>
<head>
<title>How to Reverse-Code an Interval Scale in R</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何反向编码R中的音程音阶</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/how-to-reverse-code-an-interval-scale-in-r-917c13e4888e#2022-11-01">https://towardsdatascience.com/how-to-reverse-code-an-interval-scale-in-r-917c13e4888e#2022-11-01</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="5602" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">清除问卷和测量数据的简单方法</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/347b88dd2265746d5c8833a2ebe33f2e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_382EzOsYeKfhNxGjM_OYA.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated"><a class="ae ky" href="https://www.pexels.com/photo/crop-ethnic-psychologist-writing-on-clipboard-during-session-5699456/" rel="noopener ugc nofollow" target="_blank">来自Pexels的Alex Green拍摄的照片</a></p></figure><p id="31a2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果您使用R进行数据分析，很可能会遇到处理区间数据的情况。通常，能够在一个区间尺度上反转数据是很有用的。下面是如何做的，有一步一步的例子。如果您希望本文中的所有代码都包含在一个脚本中，请查看最后的GitHub要点。</p><h1 id="72cc" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">使用调查数据</h1><p id="b711" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">假设你是一名心理学家，收集了关于人们焦虑体验的数据。你对人们进行了调查，询问他们现在有多焦虑，他们每天经历焦虑想法的频率，等等。你要分析这些数据，给每个参与者的焦虑评分。但是，您使用的调查问卷中有几个措辞相反的问题，而通常的回答量表是反过来的。当你把每个参与者的回答加起来时，你需要颠倒这些答案的编码来得到正确的分数。</p><p id="26e1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">幸运的是，在r中有一种简单的方法来进行这种分析。</p><p id="f278" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">假设我们调查中的每个项目都使用7分的李克特量表，如下所示:</p><p id="bb2f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">“1 =强烈不同意；2 =不同意；3 =有些不同意；4 =既不同意也不反对；5 =有些同意；6 =同意；7 =非常同意”</p><p id="fbbf" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们可以通过从这个响应量表中随机取样值来创建一个数据集，如下所示。</p><pre class="kj kk kl km gt ms mt mu bn mv mw bi"><span id="ec1a" class="mx lw it mt b be my mz l na nb">library(tidyverse)<br/><br/># Generate some simple data<br/>survey_data &lt;- tibble(<br/>  participant = 1:7,<br/>  worried_thoughts = sample(myscale, 7),<br/>  anxiety_effects = sample(myscale, 7)<br/>)</span></pre><p id="794f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">该数据集的第一列<code class="fe nc nd ne mt b">worried_thoughts</code>，包含参与者对陈述“我经常有侵入性的担忧想法”的响应。第二列<code class="fe nc nd ne mt b">anxiety_effects</code>，包含对陈述“焦虑很少影响我的日常生活”的响应。</p><p id="7661" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">由于第二种说法的措辞，高数字分数表明焦虑感低。这意味着对这一陈述的回答必须进行反向编码，以便与其他正常措辞的问题进行比较，其中高数字分数意味着高焦虑。</p><p id="39b3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">幸运的是，这有一个简单的公式。</p><h1 id="75f4" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">如何反转区间标度上的值</h1><p id="5e09" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">要在区间标度上反转值，您需要取变量所在标度的最小值，减去要反转的值，然后加上标度的最大值。</p><p id="98ec" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这个公式适用于从任何数字(正数或负数)开始的反应等级。它也适用于具有任何大小间隔的标尺，只要该间隔是一致的。</p><p id="dcbe" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">以下是应用此公式反转数据集中数值区间值的几种方法的示例。</p><pre class="kj kk kl km gt ms mt mu bn mv mw bi"><span id="e76a" class="mx lw it mt b be my mz l na nb">myscale &lt;- 1:7<br/><br/># The tidyverse way<br/>survey_data &lt;- survey_data %&gt;%<br/>  mutate(anxiety_effects_reversed = min(myscale) - anxiety_effects + max(myscale))<br/><br/># The base R way<br/>survey_data$anxiety_effects_reversed &lt;- min(myscale) - survey_data$anxiety_effects + max(myscale)</span></pre><p id="6278" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在这段代码中，我们首先定义问题中使用的数值范围。这只是一个数字1到7的向量，存储在变量<code class="fe nc nd ne mt b">myscale</code>中。</p><p id="4160" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然后，我们可以在反向编码公式中使用<code class="fe nc nd ne mt b">myscale</code>中的值。在tidyverse示例中，该公式被表示为<code class="fe nc nd ne mt b">min(myscale) — response + max(myscale)</code>，其中<code class="fe nc nd ne mt b">response</code>是要重新编码的列中的值。</p><p id="2e6a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这真的很简单，你可以用Base-R或Tidyverse来应用它，如图所示。在这两个例子中，反向编码操作的结果存储在新列<code class="fe nc nd ne mt b">response_reversed</code>中。</p><h1 id="3ae6" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">反转几个区间标度变量</h1><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nf"><img src="../Images/d65308dd834bfc9b5ef8f05dd33457a3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*B7CEfMtyaSSSVUCg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">照片由<a class="ae ky" href="https://unsplash.com/@wwarby?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">威廉·沃比</a>在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</p></figure><p id="0473" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">当您需要翻转数据集中几个问题的尺度时，该怎么办？你可以像以前一样用同样的公式做这件事，只需要一点点小技巧。</p><p id="5a58" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">对于本例，让我们创建更多的示例数据，这次有多个问题。</p><pre class="kj kk kl km gt ms mt mu bn mv mw bi"><span id="576c" class="mx lw it mt b be my mz l na nb"># Generate more data<br/>full_survey_data &lt;- tibble(<br/>  question = unlist(map(1:5, ~ rep(paste0("Question", .), 5))),<br/>  participant = rep(1:5, 5),<br/>  response = sample(myscale, 25, replace = T)<br/>)</span></pre><p id="dfe2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">该数据是长格式的，这意味着在第一列中有多个重复的行。如果你有兴趣，你可以在这里阅读更多关于<a class="ae ky" href="https://www.statology.org/long-vs-wide-data/" rel="noopener ugc nofollow" target="_blank">长数据和宽数据的区别。如果您的问卷数据不是长格式，您可以使用r中的</a><a class="ae ky" href="https://tidyr.tidyverse.org/reference/pivot_longer.html" rel="noopener ugc nofollow" target="_blank"> pivot_longer </a>函数进行转换。</p><p id="bc58" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">要对数据集中的一些问题进行反向编码，同时保持其他问题不变，我们首先需要选择我们想要重新编码的问题。我们可以通过创建一个包含我们正在记录的问题名称的向量来做到这一点。在这种情况下，我们希望颠倒问题2和3的得分。</p><pre class="kj kk kl km gt ms mt mu bn mv mw bi"><span id="facc" class="mx lw it mt b be my mz l na nb"># Define vector of question names that you want to reverse<br/>reverse_questions &lt;- c("Question2", "Question3")</span></pre><p id="ec5f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在，我们可以使用这个向量来选择性地应用我们的重新编码操作。我们可以通过在mutate中使用<code class="fe nc nd ne mt b">case_when</code>来做到这一点，这是我最喜欢的tidyverse函数之一。</p><pre class="kj kk kl km gt ms mt mu bn mv mw bi"><span id="3334" class="mx lw it mt b be my mz l na nb">full_survey_reversed &lt;- full_survey_data %&gt;%<br/>  mutate(response = case_when(question %in% reverse_questions ~ min(myscale) - response + max(myscale),<br/>                              TRUE ~ as.integer(response)))</span></pre><p id="a216" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">一开始可能会有很多东西需要处理，所以让我们把它分解一下。</p><p id="15c5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这段代码使用了<code class="fe nc nd ne mt b">mutate</code>，这是一个操作现有列的值或创建新列的函数。我在上一个例子中也使用了它，但是在这个例子中，我已经设置了它来将我们操作的结果分配给已经在数据中的<code class="fe nc nd ne mt b">response</code>列。这意味着它将改变该列中的一些现有值。</p><p id="d32c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然后,<code class="fe nc nd ne mt b">case_when</code>函数反转response列中的值，但是只针对我们想要重新编码的问题。它的工作原理是根据一个条件检查每一行数据。这里，它检查问题列的值是否在我们前面定义的问题名称向量中。</p><p id="2da9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果是，它会将比例反转公式应用于“响应”列中的值。您可以在<code class="fe nc nd ne mt b">case_when</code>行中的波浪号(~)后看到这一点。如果给定的行不包含我们选择重新编码的问题，<code class="fe nc nd ne mt b">case_when</code>将返回response列的原始值。它通过<code class="fe nc nd ne mt b">TRUE ~ as.integer(response)</code>命令来实现这一点。</p><p id="3afc" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这段代码的结果是，对于我们选择的问题，<code class="fe nc nd ne mt b">response</code>中的值被反转，对于我们没有选择的问题，值保持不变。</p><p id="6741" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">给问卷打分现在很简单。同样，我们使用tidyverse函数，这一次是对响应进行求和，以获得每个参与者的分数。</p><pre class="kj kk kl km gt ms mt mu bn mv mw bi"><span id="a1a5" class="mx lw it mt b be my mz l na nb"># Sum up each participant's survey score<br/>full_survey_reversed %&gt;%<br/>  group_by(participant) %&gt;%<br/>  summarise(total_score = sum(response))</span></pre><p id="827b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">恭喜你！您现在可以轻松地反转R音程音阶。对于本文中使用的所有代码，请参见下面的要点。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ng nh l"/></div></figure><p id="e472" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">数据清理快乐！</p></div><div class="ab cl ni nj hx nk" role="separator"><span class="nl bw bk nm nn no"/><span class="nl bw bk nm nn no"/><span class="nl bw bk nm nn"/></div><div class="im in io ip iq"><p id="8617" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">想阅读我所有关于R编程、数据科学等方面的文章吗？在<a class="ae ky" href="https://medium.com/@roryspanton/membership" rel="noopener">这个链接</a>注册一个媒体会员，就可以完全访问我所有的作品和媒体上的所有其他故事。这也直接帮助了我，因为我从你的会员费中得到一小部分，而不需要你额外付费。</p><p id="650c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">只要我在这里订阅<a class="ae ky" href="https://roryspanton.medium.com/subscribe" rel="noopener">，你就可以把我所有的新文章直接发到你的收件箱里。感谢阅读！</a></p></div></div>    
</body>
</html>