<html>
<head>
<title>US Market Bank Holidays in Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Python中的美国市场银行假日</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/us-market-bank-holidays-pandas-fbb15c693fcc#2022-06-07">https://towardsdatascience.com/us-market-bank-holidays-pandas-fbb15c693fcc#2022-06-07</a></blockquote><div><div class="fc ii ij ik il im"/><div class="in io ip iq ir"><div class=""/><div class=""><h2 id="6fd8" class="pw-subtitle-paragraph jr it iu bd b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki dk translated">使用熊猫用Python计算纽约证券交易所市场银行假日</h2></div><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj kj"><img src="../Images/28bf72b086ed2e5b692ae8420a4662c9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WK53b2FCRzuvEPZRIX5ufA.jpeg"/></div></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">照片由<a class="ae kz" href="https://unsplash.com/@britozour?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Briana Tozour </a>在<a class="ae kz" href="https://unsplash.com/s/photos/umbrella-sun?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</p></figure><h2 id="cb02" class="la lb iu bd lc ld le dn lf lg lh dp li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">介绍</h2><p id="1cc2" class="pw-post-body-paragraph lw lx iu ly b lz ma jv mb mc md jy me lj mf mg mh ln mi mj mk lr ml mm mn mo in bi translated">在过去的几天里，我一直在试图找到一个合适的方法来计算任何一年的纽约证券交易所市场银行假日。尽管我遇到了一些不同的开源包，但大多数都不可靠，包含一些bug，不允许我实现我想要的东西。</p><p id="e572" class="pw-post-body-paragraph lw lx iu ly b lz mp jv mb mc mq jy me lj mr mg mh ln ms mj mk lr mt mm mn mo in bi translated">在今天的文章中，我将介绍纽约证券交易所市场每年应该关闭的特定银行假日，并展示如何实现一个非常简单的类，您可以使用它来计算任何给定时间的银行假日，而结果将包含在pandas数据帧中。</p></div><div class="ab cl mu mv hy mw" role="separator"><span class="mx bw bk my mz na"/><span class="mx bw bk my mz na"/><span class="mx bw bk my mz"/></div><div class="in io ip iq ir"><h2 id="ad9c" class="la lb iu bd lc ld le dn lf lg lh dp li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">纽约证券交易所银行假日</h2><p id="6147" class="pw-post-body-paragraph lw lx iu ly b lz ma jv mb mc md jy me lj mf mg mh ln mi mj mk lr ml mm mn mo in bi translated">根据纽约证券交易所官方市场日历，在接下来的美国假期，市场将关闭:</p><ul class=""><li id="817f" class="nb nc iu ly b lz mp mc mq lj nd ln ne lr nf mo ng nh ni nj bi translated">元旦</li><li id="be09" class="nb nc iu ly b lz nk mc nl lj nm ln nn lr no mo ng nh ni nj bi translated">马丁·路德·金纪念日</li><li id="9ea2" class="nb nc iu ly b lz nk mc nl lj nm ln nn lr no mo ng nh ni nj bi translated">华盛顿的生日</li><li id="1979" class="nb nc iu ly b lz nk mc nl lj nm ln nn lr no mo ng nh ni nj bi translated">受难日</li><li id="83b8" class="nb nc iu ly b lz nk mc nl lj nm ln nn lr no mo ng nh ni nj bi translated">阵亡将士纪念日</li><li id="60d0" class="nb nc iu ly b lz nk mc nl lj nm ln nn lr no mo ng nh ni nj bi translated">6月10日国家独立日</li><li id="c90b" class="nb nc iu ly b lz nk mc nl lj nm ln nn lr no mo ng nh ni nj bi translated">美国独立日</li><li id="c93d" class="nb nc iu ly b lz nk mc nl lj nm ln nn lr no mo ng nh ni nj bi translated">劳动节</li><li id="b5cf" class="nb nc iu ly b lz nk mc nl lj nm ln nn lr no mo ng nh ni nj bi translated">感恩节</li><li id="6a35" class="nb nc iu ly b lz nk mc nl lj nm ln nn lr no mo ng nh ni nj bi translated">圣诞日</li></ul></div><div class="ab cl mu mv hy mw" role="separator"><span class="mx bw bk my mz na"/><span class="mx bw bk my mz na"/><span class="mx bw bk my mz"/></div><div class="in io ip iq ir"><h2 id="ead5" class="la lb iu bd lc ld le dn lf lg lh dp li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">计算熊猫的市场银行假日</h2><p id="2f60" class="pw-post-body-paragraph lw lx iu ly b lz ma jv mb mc md jy me lj mf mg mh ln mi mj mk lr ml mm mn mo in bi translated">Pandas的模块<code class="fe np nq nr ns b">pandas.tseries.holiday</code>包含几个与美国特定节日相对应的类。已经实现并且我们需要作为我们将在本部分构建的逻辑的一部分的是:</p><ul class=""><li id="5a4d" class="nb nc iu ly b lz mp mc mq lj nd ln ne lr nf mo ng nh ni nj bi translated"><code class="fe np nq nr ns b">USMartinLutherKingJr</code></li><li id="cb0d" class="nb nc iu ly b lz nk mc nl lj nm ln nn lr no mo ng nh ni nj bi translated"><code class="fe np nq nr ns b">USPresidentsDay</code></li><li id="bd5b" class="nb nc iu ly b lz nk mc nl lj nm ln nn lr no mo ng nh ni nj bi translated"><code class="fe np nq nr ns b">GoodFriday</code></li><li id="6fa1" class="nb nc iu ly b lz nk mc nl lj nm ln nn lr no mo ng nh ni nj bi translated"><code class="fe np nq nr ns b">USMemorialDay</code></li><li id="7f7f" class="nb nc iu ly b lz nk mc nl lj nm ln nn lr no mo ng nh ni nj bi translated"><code class="fe np nq nr ns b">USLaborDay</code></li><li id="1b11" class="nb nc iu ly b lz nk mc nl lj nm ln nn lr no mo ng nh ni nj bi translated">和<code class="fe np nq nr ns b">USThanksgivingDay</code></li></ul><p id="32de" class="pw-post-body-paragraph lw lx iu ly b lz mp jv mb mc mq jy me lj mr mg mh ln ms mj mk lr mt mm mn mo in bi translated">因此，我们错过了一些假日，我们将通过创建也包含在<code class="fe np nq nr ns b">pandas.tseries.holiday</code>模块中的<code class="fe np nq nr ns b">Holiday</code>类的实例来手动创建这些假日。</p><p id="d010" class="pw-post-body-paragraph lw lx iu ly b lz mp jv mb mc mq jy me lj mr mg mh ln ms mj mk lr mt mm mn mo in bi translated">第一个是发生在一月一日的新年。此外，我们还将指定<code class="fe np nq nr ns b">nearest_workday</code>作为遵守规则，以便每当该日期是星期六时，它将被移动到星期五，同样，每当它是星期天时，它将被移动到星期一。</p><pre class="kk kl km kn gu nt ns nu nv aw nw bi"><span id="eda5" class="la lb iu ns b gz nx ny l nz oa">from pandas.tseries.holiday import Holiday, nearest_workday</span><span id="e807" class="la lb iu ns b gz ob ny l nz oa">nye = Holiday('NYDay', month=1, day=1, observance=nearest_workday)</span></pre><p id="0e03" class="pw-post-body-paragraph lw lx iu ly b lz mp jv mb mc mq jy me lj mr mg mh ln ms mj mk lr mt mm mn mo in bi translated">同样，我们也将创建几个<code class="fe np nq nr ns b">Holiday</code>实例来代表6月10日美国独立日、美国独立日和圣诞节。</p><pre class="kk kl km kn gu nt ns nu nv aw nw bi"><span id="3edd" class="la lb iu ns b gz nx ny l nz oa">from pandas.tseries.holiday import Holiday, nearest_workday<br/></span><span id="d31e" class="la lb iu ns b gz ob ny l nz oa">juneteenth = Holiday(<br/>    'Juneteenth National Independence Day',<br/>    month=6,<br/>    day=19,<br/>    start_date='2021-06-18',<br/>    observance=nearest_workday,<br/>)</span><span id="ebfd" class="la lb iu ns b gz ob ny l nz oa">independence = Holiday(<br/>    'USIndependenceDay',<br/>     month=7,<br/>     day=4,<br/>     observance=nearest_workday<br/>)</span><span id="ed79" class="la lb iu ns b gz ob ny l nz oa">christmas = Holiday(<br/>    'Christmas',<br/>     month=12,<br/>     day=25,<br/>     observance=nearest_workday<br/>)</span></pre><p id="5421" class="pw-post-body-paragraph lw lx iu ly b lz mp jv mb mc mq jy me lj mr mg mh ln ms mj mk lr mt mm mn mo in bi translated">现在，为了创建一个包含纽约证券交易所市场银行假日的日历，我们将创建一个实现<code class="fe np nq nr ns b">AbtractHolidayCalendar</code>的类。<code class="fe np nq nr ns b">AbstractHolidayCalendar</code>类提供了返回假日列表的所有必要方法，只有<code class="fe np nq nr ns b">rules</code>需要在特定的假日日历类中定义。</p><p id="48b6" class="pw-post-body-paragraph lw lx iu ly b lz mp jv mb mc mq jy me lj mr mg mh ln ms mj mk lr mt mm mn mo in bi translated">因此，我们需要在我们的类中指定一个<code class="fe np nq nr ns b">rules</code>列表，其中包含我们之前创建的所有<code class="fe np nq nr ns b">Holiday</code>实例，以及已经在<code class="fe np nq nr ns b">pandas.tseries.holiday</code>模块中实现的剩余银行假日。</p><pre class="kk kl km kn gu nt ns nu nv aw nw bi"><span id="d40c" class="la lb iu ns b gz nx ny l nz oa">from pandas.tseries.holiday import nearest_workday, \<br/>    AbstractHolidayCalendar, Holiday, \<br/>    USMartinLutherKingJr, USPresidentsDay, GoodFriday, \                  <br/>    USMemorialDay, USLaborDay, USThanksgivingDay</span><span id="697d" class="la lb iu ns b gz ob ny l nz oa">class USTradingHolidaysCalendar(AbstractHolidayCalendar):<em class="oc"><br/>    </em>rules = [<br/>        Holiday(<br/>            'NewYearsDay',<br/>            month=1,<br/>            day=1,<br/>            observance=nearest_workday<br/>        ),<br/>        USMartinLutherKingJr,<br/>        USPresidentsDay,<br/>        GoodFriday,<br/>        USMemorialDay,<br/>        Holiday(<br/>            'Juneteenth National Independence Day',<br/>            month=6,<br/>            day=19,<br/>            start_date='2021-06-18',<br/>            observance=nearest_workday,<br/>        ),<br/>        Holiday(<br/>            'USIndependenceDay',<br/>            month=7,<br/>            day=4,<br/>            observance=nearest_workday<br/>        ),<br/>        USLaborDay,<br/>        USThanksgivingDay,<br/>        Holiday(<br/>            'Christmas',<br/>            month=12,<br/>            day=25,<br/>            observance=nearest_workday<br/>        ),<br/>    ]</span></pre><p id="c0d2" class="pw-post-body-paragraph lw lx iu ly b lz mp jv mb mc mq jy me lj mr mg mh ln ms mj mk lr mt mm mn mo in bi translated">现在，为了计算特定年份的纽约证券交易所银行假日，我们需要做的就是创建一个<code class="fe np nq nr ns b">USTradingHolidaysCalendar</code>的实例，然后通过指定我们希望推断银行假日的日期范围来调用<code class="fe np nq nr ns b">holidays()</code>方法。</p><pre class="kk kl km kn gu nt ns nu nv aw nw bi"><span id="351d" class="la lb iu ns b gz nx ny l nz oa">cal = USTradingHolidaysCalendar()<br/>holidays = cal.holidays(start='2022-01-01', end='2022-12-31')</span></pre><p id="d1d7" class="pw-post-body-paragraph lw lx iu ly b lz mp jv mb mc mq jy me lj mr mg mh ln ms mj mk lr mt mm mn mo in bi translated">让我们验证一下我们的实现给出的结果:</p><pre class="kk kl km kn gu nt ns nu nv aw nw bi"><span id="a5b8" class="la lb iu ns b gz nx ny l nz oa">print(holidays)</span><span id="2c63" class="la lb iu ns b gz ob ny l nz oa"><em class="oc">DatetimeIndex(['2022-01-17', '2022-02-21', '2022-04-15', '2022-05-30', '2022-06-20', '2022-07-04', '2022-09-05', '2022-11-24','2022-12-26'],<br/>dtype='datetime64[ns]', freq=None)</em></span></pre><p id="85d3" class="pw-post-body-paragraph lw lx iu ly b lz mp jv mb mc mq jy me lj mr mg mh ln ms mj mk lr mt mm mn mo in bi translated">输出结果与纽交所市场官方网站上<a class="ae kz" href="https://www.nyse.com/markets/hours-calendars" rel="noopener ugc nofollow" target="_blank">列出的银行节假日完美匹配。您应该已经注意到输出中不包括元旦，这仅仅是因为2022年1月1日是星期六，因此它是在前一年的12月31日庆祝的。</a></p></div><div class="ab cl mu mv hy mw" role="separator"><span class="mx bw bk my mz na"/><span class="mx bw bk my mz na"/><span class="mx bw bk my mz"/></div><div class="in io ip iq ir"><h2 id="86bc" class="la lb iu bd lc ld le dn lf lg lh dp li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">最后的想法</h2><p id="f311" class="pw-post-body-paragraph lw lx iu ly b lz ma jv mb mc md jy me lj mf mg mh ln mi mj mk lr ml mm mn mo in bi translated">在今天的文章中，我们浏览了美国的纽约证券交易所市场银行假日，并展示了如何实现一个继承自pandas <code class="fe np nq nr ns b">AbstractHolidayCalendar</code>类的非常简单的类，以便创建一个包含任何请求年份的所有银行假日的数据框架。</p></div><div class="ab cl mu mv hy mw" role="separator"><span class="mx bw bk my mz na"/><span class="mx bw bk my mz na"/><span class="mx bw bk my mz"/></div><div class="in io ip iq ir"><p id="1b77" class="pw-post-body-paragraph lw lx iu ly b lz mp jv mb mc mq jy me lj mr mg mh ln ms mj mk lr mt mm mn mo in bi translated"><a class="ae kz" href="https://gmyrianthous.medium.com/membership" rel="noopener"> <strong class="ly iv">成为会员</strong> </a> <strong class="ly iv">阅读介质上的每一个故事。你的会员费直接支持我和你看的其他作家。你也可以在媒体上看到所有的故事。</strong></p><div class="od oe gq gs of og"><a href="https://gmyrianthous.medium.com/membership" rel="noopener follow" target="_blank"><div class="oh ab fp"><div class="oi ab oj cl cj ok"><h2 class="bd iv gz z fq ol fs ft om fv fx it bi translated">通过我的推荐链接加入Medium-Giorgos Myrianthous</h2><div class="on l"><h3 class="bd b gz z fq ol fs ft om fv fx dk translated">作为一个媒体会员，你的会员费的一部分会给你阅读的作家，你可以完全接触到每一个故事…</h3></div><div class="oo l"><p class="bd b dl z fq ol fs ft om fv fx dk translated">gmyrianthous.medium.com</p></div></div><div class="op l"><div class="oq l or os ot op ou kt og"/></div></div></a></div></div><div class="ab cl mu mv hy mw" role="separator"><span class="mx bw bk my mz na"/><span class="mx bw bk my mz na"/><span class="mx bw bk my mz"/></div><div class="in io ip iq ir"><p id="676e" class="pw-post-body-paragraph lw lx iu ly b lz mp jv mb mc mq jy me lj mr mg mh ln ms mj mk lr mt mm mn mo in bi translated"><strong class="ly iv">相关文章你可能也喜欢</strong></p><div class="od oe gq gs of og"><a rel="noopener follow" target="_blank" href="/how-to-merge-pandas-dataframes-221e49c41bec"><div class="oh ab fp"><div class="oi ab oj cl cj ok"><h2 class="bd iv gz z fq ol fs ft om fv fx it bi translated">如何合并熊猫数据帧</h2><div class="on l"><h3 class="bd b gz z fq ol fs ft om fv fx dk translated">对熊猫数据帧执行左、右、内和反连接</h3></div><div class="oo l"><p class="bd b dl z fq ol fs ft om fv fx dk translated">towardsdatascience.com</p></div></div><div class="op l"><div class="ov l or os ot op ou kt og"/></div></div></a></div></div><div class="ab cl mu mv hy mw" role="separator"><span class="mx bw bk my mz na"/><span class="mx bw bk my mz na"/><span class="mx bw bk my mz"/></div><div class="in io ip iq ir"><div class="kk kl km kn gu og"><a rel="noopener follow" target="_blank" href="/how-to-efficiently-convert-a-pyspark-dataframe-to-pandas-8bda2c3875c3"><div class="oh ab fp"><div class="oi ab oj cl cj ok"><h2 class="bd iv gz z fq ol fs ft om fv fx it bi translated">加快PySpark和Pandas数据帧之间的转换</h2><div class="on l"><h3 class="bd b gz z fq ol fs ft om fv fx dk translated">将大火花数据帧转换为熊猫时节省时间</h3></div><div class="oo l"><p class="bd b dl z fq ol fs ft om fv fx dk translated">towardsdatascience.com</p></div></div><div class="op l"><div class="ow l or os ot op ou kt og"/></div></div></a></div></div><div class="ab cl mu mv hy mw" role="separator"><span class="mx bw bk my mz na"/><span class="mx bw bk my mz na"/><span class="mx bw bk my mz"/></div><div class="in io ip iq ir"><div class="kk kl km kn gu og"><a rel="noopener follow" target="_blank" href="/loc-vs-iloc-in-pandas-92fc125ed8eb"><div class="oh ab fp"><div class="oi ab oj cl cj ok"><h2 class="bd iv gz z fq ol fs ft om fv fx it bi translated">熊猫中的loc与iloc</h2><div class="oo l"><p class="bd b dl z fq ol fs ft om fv fx dk translated">towardsdatascience.com</p></div></div><div class="op l"><div class="ox l or os ot op ou kt og"/></div></div></a></div></div></div>    
</body>
</html>