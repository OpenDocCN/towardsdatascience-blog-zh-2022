<html>
<head>
<title>Text as Time Series: Arabica 1.0 Brings New Features for Exploratory Text Data Analysis</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">作为时间序列的文本:Arabica 1.0为探索性文本数据分析带来了新的特性</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/text-as-time-series-arabica-1-0-brings-new-features-for-exploratory-text-data-analysis-88eaabb84deb#2022-10-20">https://towardsdatascience.com/text-as-time-series-arabica-1-0-brings-new-features-for-exploratory-text-data-analysis-88eaabb84deb#2022-10-20</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="407e" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">Arabica 1.0通过一系列扩展功能改进了时间序列文本数据分析</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/d18581f048e7d235a7e67a3793c1d117.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*4vVgQwu5PGlSeI0l"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated"><a class="ae ky" href="https://unsplash.com/@sincerelymedia?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">真诚媒体</a>在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure><h1 id="200c" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">介绍</h1><p id="244d" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">在现实世界中，文本数据经常作为时间序列收集。一些例子包括公司收集产品质量可能改变的产品评论。在T4的政治周期中，政客们的公开声明会有所不同。如今，央行行长的声明是央行影响金融市场的方式之一。由于这些原因，文本数据通常具有时间维度，并且用日期/时间列记录。</p><p id="d46a" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">这些数据集的探索性数据分析(EDA)并不是一项简单的编码工作。阿拉比卡咖啡来了——让事情变得更简单。本文涵盖以下内容:</p><ul class=""><li id="797a" class="ms mt it lt b lu mn lx mo ma mu me mv mi mw mm mx my mz na bi translated">阿拉比卡1.0中的新聚合和清洗功能</li><li id="00b1" class="ms mt it lt b lu nb lx nc ma nd me ne mi nf mm mx my mz na bi translated">时间序列文本数据分析的实际应用</li></ul><p id="1dee" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">我们将使用来自<em class="ng"> data.world </em>的<a class="ae ky" href="https://data.world/alexfilatov/2016-usa-presidential-election-tweets" rel="noopener ugc nofollow" target="_blank">Twitter 2016年美国总统大选数据</a> tweets，展示阿拉比卡1.0的新功能。数据集在通用<a class="ae ky" href="https://creativecommons.org/share-your-work/public-domain/" rel="noopener ugc nofollow" target="_blank">公共领域许可</a>下获得许可。</p><p id="56e6" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated"><strong class="lt iu"> <em class="ng">编辑2023年1月</em> </strong> <em class="ng">:阿拉比卡已更新。查看</em> <a class="ae ky" href="https://pypi.org/project/arabica/" rel="noopener ugc nofollow" target="_blank"> <strong class="lt iu"> <em class="ng">当前版本</em> </strong> </a> <em class="ng">获取完整的参数列表。</em></p><h1 id="9471" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">什么是阿拉比卡？</h1><p id="44da" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated"><a class="ae ky" href="https://pypi.org/project/arabica/" rel="noopener ugc nofollow" target="_blank"> <em class="ng"> Arabica </em> </a>是专门为时序文本数据设计的探索性数据分析的Python库。我之前的<a class="ae ky" rel="noopener" target="_blank" href="/arabica-a-python-package-for-exploratory-analysis-of-text-data-3bb8d7379bd7">关于数据科学的文章</a>提供了初步的介绍。我建议在继续阅读本文之前先阅读它，作为复习。</p><p id="734b" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">它可以与pip一起安装:</p><pre class="kj kk kl km gt nh ni nj bn nk nl bi"><span id="2f69" class="nm la it ni b be nn no l np nq">pip install arabica</span></pre><p id="cc75" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">Arabica将文本和时间作为输入，支持标准清理操作(数字、标点符号和停用词删除)，并提供在<strong class="lt iu"> </strong>选定时间段内的单字双字和三字频率。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nr"><img src="../Images/90f8e329c76b54d7a8b08e67a13528aa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*oXMx5KrzmU1gaxSHQV5bag.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">图arabica _ freq方法示意图</p></figure><p id="dd82" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">作为输入<strong class="lt iu">文本</strong>，它处理基于拉丁字母的语言文本，并启用<em class="ng"> ntlk </em> <strong class="lt iu"> <em class="ng"> </em> </strong>停用词语料库中语言的停用词移除。</p><p id="3a8c" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">对于<strong class="lt iu">时间</strong>规范，Arabica目前以标准日期和日期时间格式读取日期，并以<strong class="lt iu">年、月或日频率</strong>提供聚合n元文法。例如，标准格式为2013年12月31日、2013年12月31日、2013年12月31日、2013年12月31日11:46:17。</p><blockquote class="ns nt nu"><p id="54ad" class="lr ls ng lt b lu mn ju lw lx mo jx lz nv mp mc md nw mq mg mh nx mr mk ml mm im bi translated">小心欧洲和美国的日期格式差异。建议使用美式日期(MM/DD/YYYY ),而不是欧式日期(DD/MM/YYYY ),因为在小型数据集中，月份和日期可能不匹配。</p></blockquote><p id="6a44" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated"><strong class="lt iu"> Arabica现在有一个可视化模块，提供单词云、热图和单字母词、双字母词和三字母词频率的线图。更多例子见</strong> <a class="ae ky" rel="noopener" target="_blank" href="/visualization-module-in-arabica-speeds-up-text-data-exploration-47114ad646ce"> <strong class="lt iu">本教程</strong> </a> <strong class="lt iu">。</strong></p><h1 id="c8e3" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">Twitter数据用例</h1><p id="ca40" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">让我们看看它在代码中是如何工作的。我们将首先导入<em class="ng">阿拉比卡</em>和<em class="ng">熊猫</em>并读取数据。</p><pre class="kj kk kl km gt nh ni nj bn nk nl bi"><span id="c60b" class="nm la it ni b be nn no l np nq">import pandas as pd<br/>from arabica import arabica_freq</span></pre><p id="a57a" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">我们将使用的数据子集包含姜懿翔·川普总统在总统竞选的最后几周和他上任后的头几周的推文。数据如下所示:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ny"><img src="../Images/2f21b800cb018ba93d458f47b3dd4402.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*QjWPauGNI8kihxmwmTio0w.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">图2:用作示例数据集的Twitter数据</p></figure></div><div class="ab cl nz oa hx ob" role="separator"><span class="oc bw bk od oe of"/><span class="oc bw bk od oe of"/><span class="oc bw bk od oe"/></div><div class="im in io ip iq"><h1 id="8fda" class="kz la it bd lb lc og le lf lg oh li lj jz oi ka ll kc oj kd ln kf ok kg lp lq bi translated">扩展聚合选项</h1><h2 id="ea3c" class="ol la it bd lb om on dn lf oo op dp lj ma oq or ll me os ot ln mi ou ov lp ow bi translated">时间序列n元图分析</h2><p id="e0f3" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">我们可以看到数据相当原始。它包含了大量我们不需要的数字、特殊字符、标点符号和字符串。我们还将跳过特定于该数据集的政客姓名和其他字符串的变体。文本也是小写的，这样大写字母就不会影响n-gram的计算(例如，“tree”和“Tree”不会被区别对待)。</p><p id="4367" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">在阿拉比卡，一切都很简单:</p><pre class="kj kk kl km gt nh ni nj bn nk nl bi"><span id="1732" class="nm la it ni b be nn no l np nq">arabica_freq(text = data['tweet_text'],         # Text<br/>             time = data['created_at'],         # Time<br/>             time_freq = 'D',                   # Aggregation period<br/>             max_words = 2,           # Max number for n-grams to be displayed<br/>             stopwords = ['english'],           # Language for stop words<br/>             skip = ['realdonaldtrump','trump', # Remove additional strings<br/>                     'makehillarybrokeagain',<br/>                     'hillaryclinton',<br/>                     'barackobama',<br/>                     'hillary', 'clintons',<br/>                     'wwmorgan','jordanla',<br/>                     'whoisNeil','cattmaxx',<br/>                     'vnkbgygv', 'httpstco',<br/>                     'httpstcob', 'httpstcod',<br/>                     'nrclwvhx','httpstcoj',<br/>                     'httpstcossh'],<br/>             lower_case = True,     # Lowercase text before cleaning and frequency analysis<br/>             numbers = True,                    # Remove all digits<br/>             punct = True)                      # Remove punctuation</span></pre><p id="fd58" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">n-gram频率，尤其是二元模型和三元模型，告诉我们更多关于特朗普总统接任总统后的公共交流。最好增加参数<code class="fe ox oy oz ni b">max_words</code>的值(比如4或5)来更深入地研究它。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pa"><img src="../Images/ca3fefb7a39bf943261be38e1493e72e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*b7rJSCkL2IQ_vD_1kcUv5w.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">图3: Arabica_freq输出—每日汇总</p></figure><h2 id="1807" class="ol la it bd lb om on dn lf oo op dp lj ma oq or ll me os ot ln mi ou ov lp ow bi translated">描述性n元语法分析</h2><p id="5fcc" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">在某些情况下，我们需要在开发更复杂的分析之前，首先对文本数据集进行简单的EDA。在代码中，设置参数<code class="fe ox oy oz ni b">time_freq = 'ungroup'</code>意味着Arabica计算整个数据的unigram、bigram和trigram频率，并且<strong class="lt iu">不进行时间聚合</strong>。</p><p id="8e1f" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">运行这段代码，我们创建了一个<code class="fe ox oy oz ni b">result</code>数据帧，以后可以保存为CSV文件:</p><pre class="kj kk kl km gt nh ni nj bn nk nl bi"><span id="b92e" class="nm la it ni b be nn no l np nq">result = arabica_freq(text = data['tweet_text'],         # Text<br/>                      time = data['created_at'],         # Time<br/>                      time_freq = 'ungroup',             # No time aggregation made<br/>                      max_words = 6,                # Shows 6 most frequent n-grams<br/>                      stopwords = ['english'],           # Language for stop words<br/>                      skip = ['realdonaldtrump','trump', # Strings to remove<br/>                             'makehillarybrokeagain',<br/>                             'hillaryclinton',<br/>                             'barackobama',<br/>                             'hillary', 'clintons',<br/>                             'wwmorgan','jordanla',<br/>                             'whoisNeil','cattmaxx',<br/>                             'vnkbgygv', 'httpstco',<br/>                             'httpstcob', 'httpstcod',<br/>                             'nrclwvhx','httpstcoj',<br/>                             'httpstcossh'],<br/>                     lower_case = True,                 # Lowercase text <br/>                     numbers = True,                    # Remove all digits<br/>                     punct = True)                      # Remove all punctuation</span></pre><p id="00b5" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">以下是输出表:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pb"><img src="../Images/7b81cac7d7c966c5786d890880c57824.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*13tnRCwPhD1PKld7i6jqOg.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">图4: Arabica_freq输出—无时间聚合</p></figure></div><div class="ab cl nz oa hx ob" role="separator"><span class="oc bw bk od oe of"/><span class="oc bw bk od oe of"/><span class="oc bw bk od oe"/></div><div class="im in io ip iq"><h1 id="4480" class="kz la it bd lb lc og le lf lg oh li lj jz oi ka ll kc oj kd ln kf ok kg lp lq bi translated">扩展清洗选项</h1><p id="1cb8" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">在阿拉比卡1.0中。我们可以一次删除多组停用词。这对于从使用多种官方语言的国家(加拿大、瑞士、比利时、卢森堡等)中挖掘文本数据非常有用。)或有大量外国人社区的国家。</p><p id="f332" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">要从文本中删除英语、法语和德语停用词，请按以下方式修改代码:</p><pre class="kj kk kl km gt nh ni nj bn nk nl bi"><span id="c063" class="nm la it ni b be nn no l np nq">arabica_freq(text = data['tweet_text'],<br/>             time = data['created_at'],<br/>             time_freq = 'D', <br/>             max_words = 2, <br/>             stopwords = ['english','french','german'],<br/>             skip = None,<br/>             lower_case = True,<br/>             numbers = True,<br/>             punct = True) </span></pre></div><div class="ab cl nz oa hx ob" role="separator"><span class="oc bw bk od oe of"/><span class="oc bw bk od oe of"/><span class="oc bw bk od oe"/></div><div class="im in io ip iq"><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pc"><img src="../Images/0935d84175105980eb91dd6e08d5f8d6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*KCGFvr7wBVDgZ0wHiRx8XQ.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">杰洛特在<a class="ae ky" href="https://pixabay.com/illustrations/questions-wooden-fence-ask-writing-2245264/" rel="noopener ugc nofollow" target="_blank"> Pixabay </a>拍摄的照片</p></figure><h1 id="e376" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">现实生活的应用</h1><p id="2da0" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">让我们举几个阿拉比卡咖啡可能有用的例子。在<strong class="lt iu">营销</strong>中，企业使用<a class="ae ky" href="https://corporatefinanceinstitute.com/resources/knowledge/strategy/market-positioning/" rel="noopener ugc nofollow" target="_blank">市场定位</a>方法来影响消费者相对于竞争对手对品牌或产品的认知。这里的目标是建立一个公司或产品的形象或身份，使消费者以某种方式感知它。</p><p id="7833" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">产品和网站评论为评估定位策略提供了极好的数据。我们是否高频率地收到了“<strong class="lt iu">快速交付”、“卓越服务”、“优质服务”、“快速交付”、“T8”或“好价格”</strong>这样的二元词？它是否符合我们希望客户如何看待我们的产品？它会随着时间而改变吗？</p><p id="f9da" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">在<strong class="lt iu">政治学</strong>和<strong class="lt iu">政治经济学中，</strong>用<strong class="lt iu"> </strong>内容分析方法分析公共话语被广泛传播(如<a class="ae ky" href="https://www.tc.columbia.edu/cice/pdf/03_Green-Saraisky-CICE-18.pdf" rel="noopener ugc nofollow" target="_blank"> Saraisky，2015 </a>)。我们在这里可能关注的基本主题是，例如，假新闻和民粹主义的后果，公众对具体问题的态度(移民、武器拥有等)。)，以及个别政客或政党的个案研究。推特推文为这些调查提供了很好的数据来源。</p><p id="bd5e" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">这些问题不仅可以在时间序列文本数据集上进行研究。您可能会发现许多其他使用案例，其中的文本具有时序特征。其中一些是我在<a class="ae ky" href="https://petrkorab.medium.com/arabica-is-now-fully-documented-a2c650513cc9" rel="noopener">阿拉比卡</a>readthedocs上开发的。</p></div><div class="ab cl nz oa hx ob" role="separator"><span class="oc bw bk od oe of"/><span class="oc bw bk od oe of"/><span class="oc bw bk od oe"/></div><div class="im in io ip iq"><p id="b459" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated"><strong class="lt iu"> <em class="ng">编辑:</em> </strong> <em class="ng">阿拉比卡现在有一个</em> <strong class="lt iu"> <em class="ng">可视化</em> </strong> <em class="ng">模块将文本显示为一个</em> <strong class="lt iu"> <em class="ng">热图</em> </strong> <em class="ng">，</em> <strong class="lt iu"> <em class="ng">字云</em> </strong> <em class="ng">，</em><strong class="lt iu"><em class="ng"/></strong><em class="ng">和一个</em> <strong class="lt iu"> <em class="ng">情绪和更多阅读这些教程:</em></strong></p><ul class=""><li id="e83b" class="ms mt it lt b lu mn lx mo ma mu me mv mi mw mm mx my mz na bi translated"><a class="ae ky" href="https://medium.com/towards-data-science/visualization-module-in-arabica-speeds-up-text-data-exploration-47114ad646ce" rel="noopener"><strong class="lt iu"><em class="ng">Arabica中的可视化模块加速了文本数据的探索</em> </strong> </a></li><li id="bcd2" class="ms mt it lt b lu nb lx nc ma nd me ne mi nf mm mx my mz na bi translated"><a class="ae ky" rel="noopener" target="_blank" href="/sentiment-analysis-and-structural-breaks-in-time-series-text-data-8109c712ca2"> <strong class="lt iu"> <em class="ng">时序文本数据中的情感分析和结构突变</em> </strong> </a></li></ul><p id="0bad" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated"><em class="ng"> PS:你可以订阅我的</em> <a class="ae ky" href="https://medium.com/subscribe/@petrkorab" rel="noopener"> <em class="ng">邮件列表</em> </a> <em class="ng">在我每次写新文章的时候得到通知。而如果你还不是中等成员，可以在这里加入</em><a class="ae ky" href="https://medium.com/@petrkorab/membership" rel="noopener"><em class="ng"/></a><em class="ng">。</em></p><h1 id="c531" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">参考资料:</h1><p id="4da2" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">[1]萨莱斯基，新墨西哥，2015年。分析公共话语:利用媒体内容分析理解政策过程。<a class="ae ky" href="https://www.tc.columbia.edu/cice/pdf/03_Green-Saraisky-CICE-18.pdf" rel="noopener ugc nofollow" target="_blank"> <em class="ng">当前比较教育中的问题</em> </a> 18(1)，26–41。</p></div></div>    
</body>
</html>