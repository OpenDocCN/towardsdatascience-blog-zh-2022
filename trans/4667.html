<html>
<head>
<title>Introducing IceCream: Never Use Print() To Debug Your Python Code Again</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">冰淇淋介绍:不要再使用Print()调试Python代码了</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/introducing-icecream-never-use-print-to-debug-your-python-code-again-d8f2e5719f8a#2022-10-18">https://towardsdatascience.com/introducing-icecream-never-use-print-to-debug-your-python-code-again-d8f2e5719f8a#2022-10-18</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="dc8d" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">为什么我停止使用print()语句进行调试，为什么您也应该这样做</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/71289782c0d2611c72081bc619562b3e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*2n51QKEzXu0iKtBK"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">照片由<a class="ae kv" href="https://unsplash.com/@brynbeatson?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> bryn beatson </a>在<a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</p></figure><h1 id="59fd" class="kw kx iq bd ky kz la lb lc ld le lf lg jw lh jx li jz lj ka lk kc ll kd lm ln bi translated">动机</h1><p id="9be9" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">编程时出错几乎是不可避免的。事实上，可以这么说，程序员花了大量的时间进行调试，以使他们的代码没有错误。</p><p id="8935" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">在调试时，使用<code class="fe mp mq mr ms b">print()</code>语句来理解管道的流程并发现意外行为无疑是最广泛采用的方法。</p><p id="9562" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">然而，使用<code class="fe mp mq mr ms b">print()</code>有许多注意事项，例如:</p><ul class=""><li id="b1b9" class="mt mu iq lq b lr mk lu ml lx mv mb mw mf mx mj my mz na nb bi translated">Print语句通常用于向用户显示输出。如果程序员使用<code class="fe mp mq mr ms b">print()</code>进行调试，在调试结束后，程序员应该注意只删除那些用于调试的特定<code class="fe mp mq mr ms b">print()</code>语句。</li><li id="c1b9" class="mt mu iq lq b lr nc lu nd lx ne mb nf mf ng mj my mz na nb bi translated">通常，在调试过程中，您可能会一个接一个地打印多个变量。在这种情况下，程序员必须手动格式化输出以增强其可读性。</li></ul><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nh ni l"/></div></figure><p id="a7e8" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">上面，我们打印了两个变量。虽然这里我们知道第一个变量是<code class="fe mp mq mr ms b">var_1</code>，第二个是<code class="fe mp mq mr ms b">var_2</code>，但是随着变量数量的增加，可能需要您在代码和输出之间来回查看，以找出哪个输出对应于哪个变量。</p><p id="2ff1" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">当然，我们可以打印更多的细节，如下所示，但这只是增加你的工作。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nh ni l"/></div></figure><ul class=""><li id="4c7b" class="mt mu iq lq b lr mk lu ml lx mv mb mw mf mx mj my mz na nb bi translated">有时，程序员也可能对打印行号、函数名及其输入等感兴趣。，这增加了编写长/多<code class="fe mp mq mr ms b">print()</code>语句的复杂性。</li><li id="19cd" class="mt mu iq lq b lr nc lu nd lx ne mb nf mf ng mj my mz na nb bi translated">在大多数情况下，代码库不仅限于一个文件。相反，有多个文件组成了管道。在这种情况下，人们可能会对在调试期间显示文件名感兴趣，这对于<code class="fe mp mq mr ms b">print()</code>来说可能是一个麻烦。</li></ul><p id="74f4" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">以上原因使得<code class="fe mp mq mr ms b">print()</code>，至少对我来说，是调试的最差选择。</p><p id="a539" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">谢天谢地，Python中有一个很好的选择。</p><p id="7984" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">介绍<a class="ae kv" href="https://github.com/gruns/icecream" rel="noopener ugc nofollow" target="_blank">冰淇淋</a>🍦！</p></div><div class="ab cl nj nk hu nl" role="separator"><span class="nm bw bk nn no np"/><span class="nm bw bk nn no np"/><span class="nm bw bk nn no"/></div><div class="ij ik il im in"><h1 id="e25e" class="kw kx iq bd ky kz nq lb lc ld nr lf lg jw ns jx li jz nt ka lk kc nu kd lm ln bi translated">冰淇淋</h1><p id="13e5" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">IceCream是一个Python库，它用最少的代码使调试变得轻松易读。</p><p id="0ae4" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">它的流行特性包括打印表达式、变量名、函数名、行号、文件名等等——我们将在这篇博客中讨论。</p><h2 id="ab9f" class="nv kx iq bd ky nw nx dn lc ny nz dp lg lx oa ob li mb oc od lk mf oe of lm og bi translated">安装冰淇淋</h2><p id="5a02" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">您可以使用<code class="fe mp mq mr ms b">pip</code>安装<code class="fe mp mq mr ms b">icecream</code>库。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="oh ni l"/></div></figure><h2 id="37e4" class="nv kx iq bd ky nw nx dn lc ny nz dp lg lx oa ob li mb oc od lk mf oe of lm og bi translated">进口冰淇淋</h2><p id="f510" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">使用这个库的标准惯例是导入<code class="fe mp mq mr ms b">ic</code>模块，如下所示:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="oh ni l"/></div></figure><h1 id="0b57" class="kw kx iq bd ky kz la lb lc ld le lf lg jw lh jx li jz lj ka lk kc ll kd lm ln bi translated">冰淇淋入门</h1><p id="3143" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">使用冰淇淋库就像打印语句一样简单。你需要把<code class="fe mp mq mr ms b">print()</code>换成<code class="fe mp mq mr ms b">ic()</code>。就是这样。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="oi ni l"/></div></figure><p id="f696" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">注意区别！<code class="fe mp mq mr ms b">ic()</code>不仅打印值，还打印传递的变量名。</p><p id="0d80" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">冰淇淋不仅仅是一个变量。相反，您可以在函数、类等上使用它。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="oj ni l"/></div></figure><p id="e7e8" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">多酷啊！它打印方法的名称(<code class="fe mp mq mr ms b">func</code>)、传递的参数(<code class="fe mp mq mr ms b">3</code>)和输出(<code class="fe mp mq mr ms b">6</code>)。</p><p id="0ec5" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">在<code class="fe mp mq mr ms b">ic()</code>方法中的每一个<code class="fe mp mq mr ms b">expression</code>都会和<code class="fe mp mq mr ms b">expression</code>的<code class="fe mp mq mr ms b">value</code>一起打印出来，如下图所示。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi ok"><img src="../Images/cd2617687830ebb75b0fc2c26c41ac02.png" data-original-src="https://miro.medium.com/v2/resize:fit:1104/format:webp/1*MIJ2zb-xYvjq6KrDccSphg.png"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">冰淇淋打印表达式及其值(图片由作者提供)</p></figure><p id="b235" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">使用IceCream进行调试也可以应用于常见的Python数据结构。下面显示了一个Python字典的示例。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ol ni l"/></div></figure><h1 id="6097" class="kw kx iq bd ky kz la lb lc ld le lf lg jw lh jx li jz lj ka lk kc ll kd lm ln bi translated">检查执行情况</h1><p id="95b3" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">很多时候，程序员使用<code class="fe mp mq mr ms b">print()</code>来显示有意义的(有时是随机的)语句，以确定程序的流程。如下所示:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="om ni l"/></div></figure><p id="30a0" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">冰淇淋也能让你摆脱那些奇怪的陈述。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="on ni l"/></div></figure><p id="e21a" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">只要叫<code class="fe mp mq mr ms b">ic()</code>就完事了。它将打印文件名、行号和其他细节(如函数名，如果有的话)以及时间。简单。</p><h1 id="9e18" class="kw kx iq bd ky kz la lb lc ld le lf lg jw lh jx li jz lj ka lk kc ll kd lm ln bi translated">在整个项目中使用冰淇淋</h1><p id="2dc9" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">接下来，您可能想知道是否需要在每个python文件中导入库？当然不是！</p><p id="8ff3" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">为了使这些方法在所有项目文件中可用，从根文件中的<code class="fe mp mq mr ms b">icecream</code>导入<code class="fe mp mq mr ms b">install</code>模块，如下所示:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="oo ni l"/></div></figure><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="op ni l"/></div></figure><p id="2760" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">通过<code class="fe mp mq mr ms b">install</code>，<code class="fe mp mq mr ms b">ic()</code>在项目范围内可用。</p><h1 id="0cf5" class="kw kx iq bd ky kz la lb lc ld le lf lg jw lh jx li jz lj ka lk kc ll kd lm ln bi translated">添加自定义前缀</h1><p id="0f5d" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">如果你注意到上面的话，<code class="fe mp mq mr ms b">ic()</code>语句的输出以“<code class="fe mp mq mr ms b">ic|</code>开始。这是冰淇淋提供的默认前缀。</p><p id="d564" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">但是，如果出于某种原因，您希望用自定义前缀替换它，您也可以这样做。这是通过在<code class="fe mp mq mr ms b">ic.configureOutput()</code>方法中指定<code class="fe mp mq mr ms b">prefix</code>参数来实现的，如下所示:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="oj ni l"/></div></figure><h1 id="15f2" class="kw kx iq bd ky kz la lb lc ld le lf lg jw lh jx li jz lj ka lk kc ll kd lm ln bi translated">调试后删除冰淇淋语句</h1><p id="e3f3" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">调试完代码后，您可能希望删除所有不必要的调试语句。</p><p id="7fc2" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">由于<code class="fe mp mq mr ms b">ic()</code>语句在语法上不同于<code class="fe mp mq mr ms b">print()</code>，您可以在您的编辑器中搜索模式“<code class="fe mp mq mr ms b">ic(</code>，并删除这些语句，如下所示:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oq"><img src="../Images/7555c0334a6b7efdbde7b153aeb6ce83.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*oI_X721bUL9LZ22_VawRlg.gif"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">从代码中删除ic()语句(Gif by author)</p></figure><p id="d7ab" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">或者，您可以使用<code class="fe mp mq mr ms b">ic.disable()</code>停止<code class="fe mp mq mr ms b">ic()</code>打印。如果您希望再次使用它们，请使用<code class="fe mp mq mr ms b">ic.enable()</code>。</p><h1 id="404c" class="kw kx iq bd ky kz la lb lc ld le lf lg jw lh jx li jz lj ka lk kc ll kd lm ln bi translated">结论</h1><p id="c05d" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">用<code class="fe mp mq mr ms b">print()</code>语句进行调试是一种混乱且不优雅的方法。将输出映射到其对应的调试语句是令人困惑的。此外，它需要额外的手动格式化来理解输出。</p><p id="b02b" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">如上所述，Python中的冰淇淋库是一个很好的替代品。它用最少的代码使调试变得轻松易读。</p><p id="6f14" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">点击阅读更多关于冰淇淋的信息。</p><p id="5e29" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">感谢阅读！</p></div><div class="ab cl nj nk hu nl" role="separator"><span class="nm bw bk nn no np"/><span class="nm bw bk nn no np"/><span class="nm bw bk nn no"/></div><div class="ij ik il im in"><p id="fce8" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated"><a class="ae kv" href="https://avichawla.substack.com/" rel="noopener ugc nofollow" target="_blank">🚀<strong class="lq ir">订阅数据科学每日剂量。在这里，我分享关于数据科学的优雅技巧和诀窍，一天一个技巧。每天在你的收件箱里收到这些提示。</strong>T12】</a></p><p id="61b0" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated"><a class="ae kv" href="https://subscribepage.io/450q" rel="noopener ugc nofollow" target="_blank"> 🧑‍💻<strong class="lq ir">成为数据科学专家！获取包含450多个熊猫、NumPy和SQL问题的免费数据科学掌握工具包。</strong> </a></p><p id="e69e" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">✉️ <a class="ae kv" href="https://medium.com/subscribe/@avi_chawla" rel="noopener"> <strong class="lq ir">注册我的电子邮件列表</strong> </a>不要错过另一篇关于数据科学指南、技巧和提示、机器学习、SQL、Python等的文章。Medium会将我的下一篇文章直接发送到你的收件箱。</p><p id="905d" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">我喜欢探索、实验和撰写关于数据科学概念和工具的文章。你可以在<a class="ae kv" href="https://www.linkedin.com/in/avi-chawla/" rel="noopener ugc nofollow" target="_blank"> LinkedIn </a>上和我联系。</p></div></div>    
</body>
</html>