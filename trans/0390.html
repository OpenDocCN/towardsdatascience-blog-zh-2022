<html>
<head>
<title>Five Tips to Elevate the Readability of Your Python Code</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">提升Python代码可读性的五个技巧</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/five-tips-to-elevate-the-readability-of-your-python-code-7b049bbf72e6#2022-02-15">https://towardsdatascience.com/five-tips-to-elevate-the-readability-of-your-python-code-7b049bbf72e6#2022-02-15</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="3a37" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">现在就将这些应用到您的Python代码中，以提高可读性——您的同事和未来的自己都会感谢您的！</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/be00e8886d6cd75df81338fb9fe1c9bd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*cu1yyN_pTZy9M8Bv6eg-cQ.jpeg"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">图片:<a class="ae kv" href="https://unsplash.com/photos/82TpEld0_e4" rel="noopener ugc nofollow" target="_blank">不飞溅</a></p></figure><blockquote class="kw kx ky"><p id="0c3e" class="kz la lb lc b ld le jr lf lg lh ju li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated"><strong class="lc ir">TL；博士</strong></p><p id="cfce" class="kz la lb lc b ld le jr lf lg lh ju li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">1.使用自动格式化程序，如<code class="fe lw lx ly lz b">black</code>和<code class="fe lw lx ly lz b">isort</code></p><p id="bb34" class="kz la lb lc b ld le jr lf lg lh ju li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">2.使用代码检查器，如<code class="fe lw lx ly lz b">flake8</code>和<code class="fe lw lx ly lz b">pylint</code></p><p id="24f0" class="kz la lb lc b ld le jr lf lg lh ju li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">3.添加类型提示以消除函数参数中的模糊性</p><p id="7325" class="kz la lb lc b ld le jr lf lg lh ju li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">4.用<code class="fe lw lx ly lz b">pre-commit</code>自动化代码质量检查</p><p id="70e7" class="kz la lb lc b ld le jr lf lg lh ju li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">5.使用Python文档字符串编写好的文档</p></blockquote></div><div class="ab cl ma mb hu mc" role="separator"><span class="md bw bk me mf mg"/><span class="md bw bk me mf mg"/><span class="md bw bk me mf"/></div><div class="ij ik il im in"><p id="8520" class="pw-post-body-paragraph kz la iq lc b ld le jr lf lg lh ju li mh lk ll lm mi lo lp lq mj ls lt lu lv ij bi translated">我以前从不太担心代码的可读性。</p><p id="428d" class="pw-post-body-paragraph kz la iq lc b ld le jr lf lg lh ju li mh lk ll lm mi lo lp lq mj ls lt lu lv ij bi translated">很明显，我在乎我能在开发过程中阅读它。但是我从来没有过多考虑过6个月后我是否还能读它。</p><blockquote class="kw kx ky"><p id="3c34" class="kz la lb lc b ld le jr lf lg lh ju li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">“当然，我知道那个变量包含什么类型的数据，以及那个函数负责什么——这是显而易见的，对吧！?"</p></blockquote><p id="c57a" class="pw-post-body-paragraph kz la iq lc b ld le jr lf lg lh ju li mh lk ll lm mi lo lp lq mj ls lt lu lv ij bi translated"><strong class="lc ir">给过去的自己的提示:你会忘记🤦‍♂️.</strong></p><p id="beb0" class="pw-post-body-paragraph kz la iq lc b ld le jr lf lg lh ju li mh lk ll lm mi lo lp lq mj ls lt lu lv ij bi translated">与软件工程师不同，作为数据科学家，我们倾向于独立地编写代码。</p><p id="e93d" class="pw-post-body-paragraph kz la iq lc b ld le jr lf lg lh ju li mh lk ll lm mi lo lp lq mj ls lt lu lv ij bi translated">是的，我们在团队中工作，但是你和其他人在同一个代码文件中工作是不寻常的。通常情况下，您将对项目的特定部分(例如，您的个人笔记本)承担个人责任和所有权，而不是由多个团队成员共同承担责任。</p><p id="00f6" class="pw-post-body-paragraph kz la iq lc b ld le jr lf lg lh ju li mh lk ll lm mi lo lp lq mj ls lt lu lv ij bi translated">这往往会导致项目代码库的代码格式不一致，其他人不太关注可读性和可维护性。</p><p id="0e75" class="pw-post-body-paragraph kz la iq lc b ld le jr lf lg lh ju li mh lk ll lm mi lo lp lq mj ls lt lu lv ij bi translated">自职业生涯开始以来，我主要是在“绿地”项目中担任咨询角色。这些项目通常包括编写只有我负责的新代码。仅仅过了几年，我才着手我的第一个项目，这个项目涉及到继承的遗留代码库。</p><p id="c335" class="pw-post-body-paragraph kz la iq lc b ld le jr lf lg lh ju li mh lk ll lm mi lo lp lq mj ls lt lu lv ij bi translated">这时，我终于意识到编写可读代码的重要性。不仅仅是为了你自己，也是为了将来加入这个项目的开发人员。这也让我反思我自己在以前的项目中糟糕的编码习惯，以及我希望以前的开发人员在他们的代码中添加了什么，以节省我几个小时的时间。</p><p id="4b68" class="pw-post-body-paragraph kz la iq lc b ld le jr lf lg lh ju li mh lk ll lm mi lo lp lq mj ls lt lu lv ij bi translated"><strong class="lc ir">幸运的是，在Python中，你可以应用一些简单的修饰性的改变，使你的代码变得更加可读和易于管理</strong>。</p><p id="6ae0" class="pw-post-body-paragraph kz la iq lc b ld le jr lf lg lh ju li mh lk ll lm mi lo lp lq mj ls lt lu lv ij bi translated">在这篇文章中，我给出了五个可行的技巧，你可以在编码时应用它们来提高你的Python代码的可读性，而不需要重构。</p><p id="421a" class="pw-post-body-paragraph kz la iq lc b ld le jr lf lg lh ju li mh lk ll lm mi lo lp lq mj ls lt lu lv ij bi translated">让我们开始吧！</p></div><div class="ab cl ma mb hu mc" role="separator"><span class="md bw bk me mf mg"/><span class="md bw bk me mf mg"/><span class="md bw bk me mf"/></div><div class="ij ik il im in"><h1 id="d490" class="mk ml iq bd mm mn mo mp mq mr ms mt mu jw mv jx mw jz mx ka my kc mz kd na nb bi translated">1.使用自动格式化程序来标准化代码🧹</h1><p id="742b" class="pw-post-body-paragraph kz la iq lc b ld nc jr lf lg nd ju li mh ne ll lm mi nf lp lq mj ng lt lu lv ij bi translated">提高代码可读性最简单的方法是使用自动代码格式化工具来标准化你的代码。</p><p id="e8c1" class="pw-post-body-paragraph kz la iq lc b ld le jr lf lg lh ju li mh lk ll lm mi lo lp lq mj ls lt lu lv ij bi translated">Python中有很多工具可以帮助你格式化代码。一些最受欢迎的包括:<a class="ae kv" href="https://github.com/psf/black" rel="noopener ugc nofollow" target="_blank">黑色</a>、<a class="ae kv" href="https://github.com/PyCQA/isort" rel="noopener ugc nofollow" target="_blank">伊索特</a>、<a class="ae kv" href="https://github.com/hhatto/autopep8" rel="noopener ugc nofollow" target="_blank">自动驾驶8 </a>和<a class="ae kv" href="https://github.com/google/yapf" rel="noopener ugc nofollow" target="_blank"> YAPF </a>。</p><p id="cc29" class="pw-post-body-paragraph kz la iq lc b ld le jr lf lg lh ju li mh lk ll lm mi lo lp lq mj ls lt lu lv ij bi translated">我个人使用<code class="fe lw lx ly lz b">black</code>进行代码格式化，使用<code class="fe lw lx ly lz b">isort</code>对我的库导入语句进行排序。</p><p id="77d8" class="pw-post-body-paragraph kz la iq lc b ld le jr lf lg lh ju li mh lk ll lm mi lo lp lq mj ls lt lu lv ij bi translated">在整个项目中定义并坚持一致的编码风格/格式会大大增加你的代码对其他开发人员的可读性。</p><p id="f9f7" class="pw-post-body-paragraph kz la iq lc b ld le jr lf lg lh ju li mh lk ll lm mi lo lp lq mj ls lt lu lv ij bi translated">阅读格式不好的代码就像阅读一篇语法不好的文章。你仍然可以理解这篇文章，但意思可能是模糊的或令人困惑的。</p><p id="873b" class="pw-post-body-paragraph kz la iq lc b ld le jr lf lg lh ju li mh lk ll lm mi lo lp lq mj ls lt lu lv ij bi translated"><strong class="lc ir">遵循PEP8标准的一致格式有助于开发人员在阅读代码时确定方向</strong>。他们知道从代码布局中可以期待什么，并且可以专注于重要的部分——理解代码逻辑。</p><p id="7a03" class="pw-post-body-paragraph kz la iq lc b ld le jr lf lg lh ju li mh lk ll lm mi lo lp lq mj ls lt lu lv ij bi translated">标准化和自动化的代码格式也有助于版本控制。</p><p id="9b76" class="pw-post-body-paragraph kz la iq lc b ld le jr lf lg lh ju li mh lk ll lm mi lo lp lq mj ls lt lu lv ij bi translated">想象一下您创建一个不遵循PEP8约定的新文件的场景。然后，您的同事在版本控制上签出该文件，并对<em class="lb">的一行代码</em>进行更改。在保存文件时，他们的IDE会自动格式化原始文件以符合PEP8(例如，最大行长度79个字符，删除函数之间不必要的空白行，函数参数之间无关的空白等)。然后，他们将文件签回到存储库中。现在有一个问题。旧代码和更新后的代码之间会有很大的差异(“diff”)，即使对底层代码逻辑只做了很小的更改。</p><p id="91dc" class="pw-post-body-paragraph kz la iq lc b ld le jr lf lg lh ju li mh lk ll lm mi lo lp lq mj ls lt lu lv ij bi translated">标准化、自动化的代码格式化降低了版本控制中与被更改代码的功能无关的较大差异的风险。</p><h2 id="b905" class="nh ml iq bd mm ni nj dn mq nk nl dp mu mh nm nn mw mi no np my mj nq nr na ns bi translated">如何使用代码格式化程序</h2><p id="181f" class="pw-post-body-paragraph kz la iq lc b ld nc jr lf lg nd ju li mh ne ll lm mi nf lp lq mj ng lt lu lv ij bi translated">您可以从命令行对您的代码运行自动代码格式化程序。或者，大多数ide(比如VSCode)都有设置和插件，可以在保存代码时自动格式化代码。</p><p id="01f0" class="pw-post-body-paragraph kz la iq lc b ld le jr lf lg lh ju li mh lk ll lm mi lo lp lq mj ls lt lu lv ij bi translated">例如，在命令行上，您可以将<a class="ae kv" href="https://github.com/psf/black" rel="noopener ugc nofollow" target="_blank">黑色</a>代码样式应用到您的代码中，并使用<a class="ae kv" href="https://github.com/PyCQA/isort" rel="noopener ugc nofollow" target="_blank">或</a>组织您的导入，如下所示:</p><pre class="kg kh ki kj gt nt lz nu nv aw nw bi"><span id="a48b" class="nh ml iq lz b gy nx ny l nz oa"><em class="lb"># install the black and isort libraries</em><br/>pip  install black isort</span><span id="c717" class="nh ml iq lz b gy ob ny l nz oa"><em class="lb"># use black command line tool to format code</em><br/>black SOURCE_FILE_OR_DIRECTORY</span><span id="0b48" class="nh ml iq lz b gy ob ny l nz oa"><em class="lb"># organise import statements with isort</em><br/>isort SOURCE_FILE_OR_DIRECTORY</span></pre><p id="ffbb" class="pw-post-body-paragraph kz la iq lc b ld le jr lf lg lh ju li mh lk ll lm mi lo lp lq mj ls lt lu lv ij bi translated">下面是我的VSCode <code class="fe lw lx ly lz b">settings.json</code>文件的摘录，它在VSCode中保存文件时自动将<code class="fe lw lx ly lz b">black</code>格式应用于我的Python文件。它还按照字母顺序组织我的导入(类似于<a class="ae kv" href="https://github.com/PyCQA/isort" rel="noopener ugc nofollow" target="_blank"> isort </a>的功能)，当有许多导入的库或函数时，使导入语句更易读。</p><pre class="kg kh ki kj gt nt lz nu nv aw nw bi"><span id="1020" class="nh ml iq lz b gy nx ny l nz oa"># vscode settings.json<br/>{<br/>    <strong class="lz ir">"editor.formatOnSaveMode"</strong>:"file",<br/>    <strong class="lz ir">"editor.formatOnSave"</strong>:<strong class="lz ir">true</strong>,<br/>    <strong class="lz ir">"python.formatting.provider"</strong>: "black",<br/>    <strong class="lz ir">"editor.codeActionsOnSave"</strong>: { <strong class="lz ir">"source.organizeImports"</strong>: <strong class="lz ir">true</strong>},<br/>}</span></pre><blockquote class="kw kx ky"><p id="02a3" class="kz la lb lc b ld le jr lf lg lh ju li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated"><strong class="lc ir"> <em class="iq">注</em> </strong></p><p id="555e" class="kz la lb lc b ld le jr lf lg lh ju li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated"><em class="iq">虽然建议遵循</em><a class="ae kv" href="https://www.python.org/dev/peps/pep-0008/" rel="noopener ugc nofollow" target="_blank"><em class="iq">pep 8</em></a><em class="iq">编码约定，但是并没有普遍接受的Python代码样式规则。您会注意到不同项目之间的差异，这是开发团队自身偏好的结果。</em></p><p id="e9f8" class="kz la lb lc b ld le jr lf lg lh ju li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">参与项目的所有团队成员都遵守相同的代码样式规则是至关重要的。因此，最好明确你所遵循的风格指南。</p><p id="7695" class="kz la lb lc b ld le jr lf lg lh ju li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated"><em class="iq">您可以在</em> <code class="fe lw lx ly lz b"><em class="iq">README.md</em></code> <em class="iq">中描述您的项目使用的编码风格，但是更好的是，您可以使用您的项目目录中的</em> <a class="ae kv" href="https://pycqa.github.io/isort/docs/configuration/config_files.html" rel="noopener ugc nofollow" target="_blank"> <em class="iq">配置文件</em> </a> <em class="iq">来显式定义该风格。上面提到的每个工具都可以自动读取配置文件，以确保项目中的所有开发人员都遵循相同的规则。</em></p></blockquote></div><div class="ab cl ma mb hu mc" role="separator"><span class="md bw bk me mf mg"/><span class="md bw bk me mf mg"/><span class="md bw bk me mf"/></div><div class="ij ik il im in"><h1 id="0906" class="mk ml iq bd mm mn mo mp mq mr ms mt mu jw mv jx mw jz mx ka my kc mz kd na nb bi translated">2.使用代码检查工具(linters)来捕捉错误并遵循最佳实践🔎</h1><p id="5b23" class="pw-post-body-paragraph kz la iq lc b ld nc jr lf lg nd ju li mh ne ll lm mi nf lp lq mj ng lt lu lv ij bi translated">代码检查工具，通常被称为<a class="ae kv" href="https://code.visualstudio.com/docs/python/linting" rel="noopener ugc nofollow" target="_blank"> linters </a>，有助于突出Python代码的语法和风格问题。</p><p id="9601" class="pw-post-body-paragraph kz la iq lc b ld le jr lf lg lh ju li mh lk ll lm mi lo lp lq mj ls lt lu lv ij bi translated">Linters帮助您保持代码PEP8的兼容性，在运行代码之前捕捉一些错误，并警告不良行为。例如:</p><ul class=""><li id="0a73" class="oc od iq lc b ld le lg lh mh oe mi of mj og lv oh oi oj ok bi translated">发现未使用的变量或赋值前使用的变量</li><li id="d2f2" class="oc od iq lc b ld ol lg om mh on mi oo mj op lv oh oi oj ok bi translated">识别未使用的导入库</li><li id="d616" class="oc od iq lc b ld ol lg om mh on mi oo mj op lv oh oi oj ok bi translated">确保所有函数/类都有文档字符串</li><li id="1d21" class="oc od iq lc b ld ol lg om mh on mi oo mj op lv oh oi oj ok bi translated">警告不要使用<a class="ae kv" href="https://www.flake8rules.com/rules/E722.html" rel="noopener ugc nofollow" target="_blank">裸异常</a></li></ul><p id="d03a" class="pw-post-body-paragraph kz la iq lc b ld le jr lf lg lh ju li mh lk ll lm mi lo lp lq mj ls lt lu lv ij bi translated">在某些情况下，linter突出显示的错误并不是真正的问题。例如，<code class="fe lw lx ly lz b">pylint</code>建议每个Python模块应该有一个docstring来描述它的用途。对于您的项目，您可能认为这是不必要的。您可以使用<a class="ae kv" href="https://pylint.pycqa.org/en/latest/" rel="noopener ugc nofollow" target="_blank">配置文件或行内注释</a>来控制linters的行为，它们可以被设置为忽略某些错误。</p><p id="c3db" class="pw-post-body-paragraph kz la iq lc b ld le jr lf lg lh ju li mh lk ll lm mi lo lp lq mj ls lt lu lv ij bi translated">同样，Python有许多林挺工具。最常见的两种是:<a class="ae kv" href="https://github.com/PyCQA/flake8" rel="noopener ugc nofollow" target="_blank"> flake8 </a>和<a class="ae kv" href="https://pylint.pycqa.org/en/latest/" rel="noopener ugc nofollow" target="_blank"> pylint </a>。</p><p id="83dd" class="pw-post-body-paragraph kz la iq lc b ld le jr lf lg lh ju li mh lk ll lm mi lo lp lq mj ls lt lu lv ij bi translated">我倾向于使用<code class="fe lw lx ly lz b">flake8</code>作为我的预提交钩子(见下面的提示)。我还在开发过程中使用Pylint来帮助捕捉问题并确定可能的改进，然而，与<code class="fe lw lx ly lz b">flake8</code>相比，它对看似良性的问题要严格得多，这使得它无法用作向您的repo提交新代码的看门人。</p><p id="6235" class="pw-post-body-paragraph kz la iq lc b ld le jr lf lg lh ju li mh lk ll lm mi lo lp lq mj ls lt lu lv ij bi translated">Pylint还给你的代码打了10分，这很酷。尽管当你的完整工作代码最初被评为满分10分中的3分时，这会伤害你的自尊😞。</p><h2 id="70b4" class="nh ml iq bd mm ni nj dn mq nk nl dp mu mh nm nn mw mi no np my mj nq nr na ns bi translated">如何使用linters检查你的代码</h2><p id="a8ee" class="pw-post-body-paragraph kz la iq lc b ld nc jr lf lg nd ju li mh ne ll lm mi nf lp lq mj ng lt lu lv ij bi translated">如上所述，linters可以从命令行运行，也可以内置到您的IDE中。</p><pre class="kg kh ki kj gt nt lz nu nv aw nw bi"><span id="9d3a" class="nh ml iq lz b gy nx ny l nz oa"><em class="lb"># install flake8</em><br/>pip install flake8</span><span id="1aea" class="nh ml iq lz b gy ob ny l nz oa"><em class="lb"># run flake8 checks</em><br/>flake8 SOURCE_FILE_OR_DIRECTORY</span></pre><p id="bf5d" class="pw-post-body-paragraph kz la iq lc b ld le jr lf lg lh ju li mh lk ll lm mi lo lp lq mj ls lt lu lv ij bi translated">您可以使用<code class="fe lw lx ly lz b">settings.json</code>文件在VSCode中启用林挺。例如，使用pylint:</p><pre class="kg kh ki kj gt nt lz nu nv aw nw bi"><span id="dca3" class="nh ml iq lz b gy nx ny l nz oa"># vscode settings.json<br/>{<br/>    <strong class="lz ir">"python.linting.pylintEnabled"</strong>:<strong class="lz ir">true</strong>,<br/>    <strong class="lz ir">"python.linting.enabled"</strong>: <strong class="lz ir">true</strong>,<br/>}</span></pre><blockquote class="kw kx ky"><p id="eced" class="kz la lb lc b ld le jr lf lg lh ju li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated"><strong class="lc ir"> <em class="iq">顶端提示💡</em> </strong></p><p id="d7d7" class="kz la lb lc b ld le jr lf lg lh ju li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated"><strong class="lc ir"> <em class="iq">使用</em></strong><a class="ae kv" href="https://github.com/nbQA-dev/nbQA" rel="noopener ugc nofollow" target="_blank"><strong class="lc ir"><em class="iq">nbQA</em></strong></a><strong class="lc ir"><em class="iq">库将代码检查工具扩展到您的Jupyter笔记本上。</em> </strong></p><p id="b283" class="kz la lb lc b ld le jr lf lg lh ju li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">如果你使用Jupyter笔记本，使用代码检查工具变得比简单的 <code class="fe lw lx ly lz b"><em class="iq">.py</em></code> <em class="iq">文件更重要。</em></p><p id="ed70" class="kz la lb lc b ld le jr lf lg lh ju li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">本质上，在Jupyter笔记本上的工作是实验性的，当你测试或调试代码时，可能涉及到以不同的顺序运行单元格。因此，很容易意外地留下未赋值的变量，或者在变量被定义之前就使用它们。在将笔记本提交到git repo之前，也很难手动捕捉这些错误。</p><p id="68a6" class="kz la lb lc b ld le jr lf lg lh ju li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated"><em class="iq"> nbQA针对您的笔记本运行Python林挺工具，以帮助防止损坏的笔记本提交到您的存储库中。</em></p></blockquote></div><div class="ab cl ma mb hu mc" role="separator"><span class="md bw bk me mf mg"/><span class="md bw bk me mf mg"/><span class="md bw bk me mf"/></div><div class="ij ik il im in"><h1 id="f172" class="mk ml iq bd mm mn mo mp mq mr ms mt mu jw mv jx mw jz mx ka my kc mz kd na nb bi translated">3.静态类型提示💡</h1><p id="e0ae" class="pw-post-body-paragraph kz la iq lc b ld nc jr lf lg nd ju li mh ne ll lm mi nf lp lq mj ng lt lu lv ij bi translated">在我的代码中使用类型提示对我来说是一个游戏改变者。</p><p id="74e6" class="pw-post-body-paragraph kz la iq lc b ld le jr lf lg lh ju li mh lk ll lm mi lo lp lq mj ls lt lu lv ij bi translated">当你开始使用<a class="ae kv" href="https://realpython.com/lessons/type-hinting/" rel="noopener ugc nofollow" target="_blank">类型提示</a>时，你的代码的可读性提高了多少，我怎么强调都不为过。如果你从这篇文章中学到了什么，那就是开始使用类型提示。</p><h2 id="f806" class="nh ml iq bd mm ni nj dn mq nk nl dp mu mh nm nn mw mi no np my mj nq nr na ns bi translated">什么是类型提示？</h2><p id="032e" class="pw-post-body-paragraph kz la iq lc b ld nc jr lf lg nd ju li mh ne ll lm mi nf lp lq mj ng lt lu lv ij bi translated">Python是一种<a class="ae kv" href="https://realpython.com/lessons/dynamic-vs-static/" rel="noopener ugc nofollow" target="_blank">动态类型语言</a>。这意味着您不需要在代码中显式声明变量数据类型。运行代码时，数据类型会根据传递给变量的特定数据结构自动分配给变量。</p><p id="3c48" class="pw-post-body-paragraph kz la iq lc b ld le jr lf lg lh ju li mh lk ll lm mi lo lp lq mj ls lt lu lv ij bi translated">动态类型语言较低的语法开销对初学者来说可能更宽容和更有吸引力，但是，它可能会导致坏习惯和可读性较差的代码，尤其是在较大的项目中。</p><p id="6465" class="pw-post-body-paragraph kz la iq lc b ld le jr lf lg lh ju li mh lk ll lm mi lo lp lq mj ls lt lu lv ij bi translated">Python(3.6以上版本)中的类型提示是可选的注释，它向代码的读者表明特定变量或函数所期望的数据结构/类型。例如<code class="fe lw lx ly lz b">str</code>、<code class="fe lw lx ly lz b">list</code>、<code class="fe lw lx ly lz b">dict</code>、<code class="fe lw lx ly lz b">int</code>等。</p><p id="5cbb" class="pw-post-body-paragraph kz la iq lc b ld le jr lf lg lh ju li mh lk ll lm mi lo lp lq mj ls lt lu lv ij bi translated">Python解释器忽略类型提示。如果没有类型提示，或者即使错误地指定了类型提示，您的代码仍然会运行。<strong class="lc ir">类型提示的目的纯粹是为了开发者的利益</strong></p><p id="b704" class="pw-post-body-paragraph kz la iq lc b ld le jr lf lg lh ju li mh lk ll lm mi lo lp lq mj ls lt lu lv ij bi translated"><strong class="lc ir">示例</strong></p><p id="749e" class="pw-post-body-paragraph kz la iq lc b ld le jr lf lg lh ju li mh lk ll lm mi lo lp lq mj ls lt lu lv ij bi translated">以下面的函数为例，类型提示可以用来改善开发人员的体验。</p><pre class="kg kh ki kj gt nt lz nu nv aw nw bi"><span id="7dd3" class="nh ml iq lz b gy nx ny l nz oa"><strong class="lz ir">def</strong> get_largest(items):<br/>    <strong class="lz ir">return</strong> max(items)</span></pre><p id="e77d" class="pw-post-body-paragraph kz la iq lc b ld le jr lf lg lh ju li mh lk ll lm mi lo lp lq mj ls lt lu lv ij bi translated">上面的函数旨在返回数字列表中的最大值。简单吧？</p><p id="9e23" class="pw-post-body-paragraph kz la iq lc b ld le jr lf lg lh ju li mh lk ll lm mi lo lp lq mj ls lt lu lv ij bi translated">现在，假设您是该项目的新开发人员，看到了这段代码。你应该如何使用这个功能？</p><p id="7149" class="pw-post-body-paragraph kz la iq lc b ld le jr lf lg lh ju li mh lk ll lm mi lo lp lq mj ls lt lu lv ij bi translated">当最初编写这个函数时，我确信作者确切地知道这个函数做什么以及它应该用于什么——它是非常简单的Python代码。然而，作为一个新的开发人员，这可能会导致不正确地使用函数或得到意想不到的结果。</p><p id="2942" class="pw-post-body-paragraph kz la iq lc b ld le jr lf lg lh ju li mh lk ll lm mi lo lp lq mj ls lt lu lv ij bi translated">这个例子中最大的问题是:我应该把什么数据结构传入名为<code class="fe lw lx ly lz b">items</code>的函数参数中？</p><p id="e56a" class="pw-post-body-paragraph kz la iq lc b ld le jr lf lg lh ju li mh lk ll lm mi lo lp lq mj ls lt lu lv ij bi translated">Python关键字可以处理许多不同的数据结构，包括:字典、列表、字符串、字符串列表、集合、元组。如果将这些数据结构传递给上面的函数，它不会抛出错误。然而，只有整数列表(或者可能是浮点数)才能给出最初开发者想要的结果。</p><p id="381e" class="pw-post-body-paragraph kz la iq lc b ld le jr lf lg lh ju li mh lk ll lm mi lo lp lq mj ls lt lu lv ij bi translated">类型提示(和改进的变量命名)可以极大地提高可读性，并减少以后出错的机会:</p><pre class="kg kh ki kj gt nt lz nu nv aw nw bi"><span id="2568" class="nh ml iq lz b gy nx ny l nz oa"><em class="lb"># improved with type hints (python 3.9+ syntax)</em><br/><strong class="lz ir">def</strong> get_largest(input_list: list[int]) -&gt; int:<br/>    """Return largest number in a list"""<br/>    <strong class="lz ir">return</strong> max(input_list)</span></pre><p id="df08" class="pw-post-body-paragraph kz la iq lc b ld le jr lf lg lh ju li mh lk ll lm mi lo lp lq mj ls lt lu lv ij bi translated">上面的代码片段使用了<code class="fe lw lx ly lz b">:</code>语法来指定函数所期望的数据结构是一个整数列表，而<code class="fe lw lx ly lz b">-&gt;</code>语法表示函数将返回一个整数。</p><blockquote class="kw kx ky"><p id="dc0e" class="kz la lb lc b ld le jr lf lg lh ju li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated"><em class="iq">你可以在</em> <a class="ae kv" href="https://docs.python.org/3/library/typing.html" rel="noopener ugc nofollow" target="_blank"> <em class="iq">文档</em> </a>中阅读更多关于Python类型提示语法的内容</p></blockquote><p id="4850" class="pw-post-body-paragraph kz la iq lc b ld le jr lf lg lh ju li mh lk ll lm mi lo lp lq mj ls lt lu lv ij bi translated">虽然仍然没有什么可以防止未来的开发人员意外地将一个字符串或字符串列表传递给这个函数，但是类型提示极大地帮助了开发人员，并指明了该函数的预期用途。</p><h2 id="9d37" class="nh ml iq bd mm ni nj dn mq nk nl dp mu mh nm nn mw mi no np my mj nq nr na ns bi translated">类型提示工具</h2><p id="08a7" class="pw-post-body-paragraph kz la iq lc b ld nc jr lf lg nd ju li mh ne ll lm mi nf lp lq mj ng lt lu lv ij bi translated">您可以使用类似于<a class="ae kv" href="https://github.com/python/mypy" rel="noopener ugc nofollow" target="_blank"> mypy </a>和<a class="ae kv" href="https://marketplace.visualstudio.com/items?itemName=ms-python.vscode-pylance" rel="noopener ugc nofollow" target="_blank"> pylance </a>(在VSCode中)的工具来检查可疑的键入错误。</p><p id="fc8a" class="pw-post-body-paragraph kz la iq lc b ld le jr lf lg lh ju li mh lk ll lm mi lo lp lq mj ls lt lu lv ij bi translated">如果指定了类型提示，这些工具将检查代码中该变量/函数的实例，并确保使用了正确的数据结构。</p><p id="a099" class="pw-post-body-paragraph kz la iq lc b ld le jr lf lg lh ju li mh lk ll lm mi lo lp lq mj ls lt lu lv ij bi translated">例如，在下面的VSCode编辑器中，我已经指定了函数需要一个整数列表并返回一个整数。VSCode发现了两个问题。首先，我从函数中返回一个字符串，而不是一个整数。其次，当我试图在其他地方使用这个函数时，我得到一条红线警告我，我正在向这个函数传递一个字符串列表，而不是一个整数列表。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oq"><img src="../Images/5d7a073aba0a5a82386b8134bda14316.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*sYe4Hzsk2uUJjg5V.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">作者图片</p></figure><p id="18f0" class="pw-post-body-paragraph kz la iq lc b ld le jr lf lg lh ju li mh lk ll lm mi lo lp lq mj ls lt lu lv ij bi translated">这些警告在开发过程中非常有用，有助于快速捕获潜在的bug。</p><p id="1ed4" class="pw-post-body-paragraph kz la iq lc b ld le jr lf lg lh ju li mh lk ll lm mi lo lp lq mj ls lt lu lv ij bi translated">我的vscode <code class="fe lw lx ly lz b">settings.json</code>文件中的相关设置是:</p><pre class="kg kh ki kj gt nt lz nu nv aw nw bi"><span id="0612" class="nh ml iq lz b gy nx ny l nz oa">{<br/>    <strong class="lz ir">"python.linting.pylintEnabled"</strong>:<strong class="lz ir">true</strong>,<br/>    <strong class="lz ir">"python.linting.enabled"</strong>: <strong class="lz ir">true</strong>,<br/>    <strong class="lz ir">"python.analysis.typeCheckingMode"</strong>: "strict",<br/>}</span></pre><p id="1bd5" class="pw-post-body-paragraph kz la iq lc b ld le jr lf lg lh ju li mh lk ll lm mi lo lp lq mj ls lt lu lv ij bi translated">或者，您可以使用<code class="fe lw lx ly lz b">mypy</code>作为命令行工具，对您的代码运行静态类型分析:</p><pre class="kg kh ki kj gt nt lz nu nv aw nw bi"><span id="0408" class="nh ml iq lz b gy nx ny l nz oa"><em class="lb">#install mypy</em><br/>pip install mypy</span><span id="70cc" class="nh ml iq lz b gy ob ny l nz oa"><em class="lb"># run mypy</em><br/>mypy SOURCE_FILE_OR_DIRECTORY</span></pre></div><div class="ab cl ma mb hu mc" role="separator"><span class="md bw bk me mf mg"/><span class="md bw bk me mf mg"/><span class="md bw bk me mf"/></div><div class="ij ik il im in"><h1 id="8b33" class="mk ml iq bd mm mn mo mp mq mr ms mt mu jw mv jx mw jz mx ka my kc mz kd na nb bi translated">4.用预提交钩子自动处理一切🪝</h1><p id="831e" class="pw-post-body-paragraph kz la iq lc b ld nc jr lf lg nd ju li mh ne ll lm mi nf lp lq mj ng lt lu lv ij bi translated">作为程序员，我们喜欢自动化。代码格式化和检查也不例外。</p><p id="1fb2" class="pw-post-body-paragraph kz la iq lc b ld le jr lf lg lh ju li mh lk ll lm mi lo lp lq mj ls lt lu lv ij bi translated">您可以使用<a class="ae kv" href="https://pre-commit.com/" rel="noopener ugc nofollow" target="_blank">预提交</a>钩子来自动化代码样式和检查。<code class="fe lw lx ly lz b">pre-commit</code>框架允许您在提交对git库的更改之前，指定要对代码运行哪些检查。这些检查在提交代码时自动运行。如果任何检查失败，代码将被拒绝，直到它们被修复。</p><p id="6543" class="pw-post-body-paragraph kz la iq lc b ld le jr lf lg lh ju li mh lk ll lm mi lo lp lq mj ls lt lu lv ij bi translated">这有助于防止不良代码被添加到您的项目历史中，并确保repo中的所有代码都符合您的代码样式指南。</p><h2 id="d047" class="nh ml iq bd mm ni nj dn mq nk nl dp mu mh nm nn mw mi no np my mj nq nr na ns bi translated">预提交挂钩入门</h2><ol class=""><li id="ad9c" class="oc od iq lc b ld nc lg nd mh or mi os mj ot lv ou oi oj ok bi translated">安装预提交</li></ol><pre class="kg kh ki kj gt nt lz nu nv aw nw bi"><span id="dc67" class="nh ml iq lz b gy nx ny l nz oa">pip install pre-commit</span></pre><p id="5254" class="pw-post-body-paragraph kz la iq lc b ld le jr lf lg lh ju li mh lk ll lm mi lo lp lq mj ls lt lu lv ij bi translated">2.将<code class="fe lw lx ly lz b">.pre-commit-config.yaml</code>配置文件添加到您的项目目录中</p><pre class="kg kh ki kj gt nt lz nu nv aw nw bi"><span id="942a" class="nh ml iq lz b gy nx ny l nz oa"><em class="lb"># .pre-commit-config.yaml</em><br/><strong class="lz ir">repos</strong>:<br/>-   <strong class="lz ir">repo</strong>: https://github.com/pre-commit/pre-commit-hooks<br/>    <strong class="lz ir">rev</strong>: v2.3.0<br/>    <strong class="lz ir">hooks</strong>:<br/>    -   <strong class="lz ir">id</strong>: trailing-whitespace<br/>-   <strong class="lz ir">repo</strong>: https://github.com/psf/black<br/>    <strong class="lz ir">rev</strong>: 19.3b0<br/>    <strong class="lz ir">hooks</strong>:<br/>    -   <strong class="lz ir">id</strong>: black</span></pre><p id="f8e5" class="pw-post-body-paragraph kz la iq lc b ld le jr lf lg lh ju li mh lk ll lm mi lo lp lq mj ls lt lu lv ij bi translated">3.安装git挂钩</p><pre class="kg kh ki kj gt nt lz nu nv aw nw bi"><span id="f73b" class="nh ml iq lz b gy nx ny l nz oa">pre-commit install</span></pre><p id="db3a" class="pw-post-body-paragraph kz la iq lc b ld le jr lf lg lh ju li mh lk ll lm mi lo lp lq mj ls lt lu lv ij bi translated">遵循这些指令后，下一次您尝试向repo提交文件时，预提交钩子将运行，并确保您的代码与<code class="fe lw lx ly lz b">black</code>格式化程序兼容。在上面的例子中，预提交还将检查并删除文件中的任何尾随空格</p><p id="021f" class="pw-post-body-paragraph kz la iq lc b ld le jr lf lg lh ju li mh lk ll lm mi lo lp lq mj ls lt lu lv ij bi translated">查看我的<a class="ae kv" href="https://engineeringfordatascience.com/posts/pre_commit_yaml/" rel="noopener ugc nofollow" target="_blank">关于预提交钩子</a>的文章，获得更详细的教程和我用于数据科学项目的完整模板<code class="fe lw lx ly lz b">.pre-commit-config.yaml</code>文件。</p></div><div class="ab cl ma mb hu mc" role="separator"><span class="md bw bk me mf mg"/><span class="md bw bk me mf mg"/><span class="md bw bk me mf"/></div><div class="ij ik il im in"><h1 id="13b5" class="mk ml iq bd mm mn mo mp mq mr ms mt mu jw mv jx mw jz mx ka my kc mz kd na nb bi translated">5.写有用的文档✍️</h1><p id="5d66" class="pw-post-body-paragraph kz la iq lc b ld nc jr lf lg nd ju li mh ne ll lm mi nf lp lq mj ng lt lu lv ij bi translated">我们都希望我们的代码能够超越我们对项目的投入而继续存在。但是不管你的软件有多好，如果文档不好，人们就不会使用它。</p><p id="b23f" class="pw-post-body-paragraph kz la iq lc b ld le jr lf lg lh ju li mh lk ll lm mi lo lp lq mj ls lt lu lv ij bi translated">在开发过程中很容易跳过文档，这通常是在项目结束时最后引起我们注意的事情。</p><p id="0570" class="pw-post-body-paragraph kz la iq lc b ld le jr lf lg lh ju li mh lk ll lm mi lo lp lq mj ls lt lu lv ij bi translated">虽然为仍在开发中的功能编写详细的文档是没有意义的——糟糕的或不正确的文档比没有文档更糟糕——但是有一些简单的策略可以帮助您在没有太多开销的情况下掌握全局。<strong class="lc ir">有了更好的文档，你就增加了其他人使用你的代码的机会，也将使你未来的生活更加轻松。</strong></p><p id="baf5" class="pw-post-body-paragraph kz la iq lc b ld le jr lf lg lh ju li mh lk ll lm mi lo lp lq mj ls lt lu lv ij bi translated">在Python中，文档通常有三种形式:行内注释、文档字符串和外部文档(例如README.md)。</p><h2 id="37c1" class="nh ml iq bd mm ni nj dn mq nk nl dp mu mh nm nn mw mi no np my mj nq nr na ns bi translated">内嵌注释</h2><p id="7eeb" class="pw-post-body-paragraph kz la iq lc b ld nc jr lf lg nd ju li mh ne ll lm mi nf lp lq mj ng lt lu lv ij bi translated">一般来说，你应该试着遵循<a class="ae kv" href="https://www.python.org/dev/peps/pep-0008/#comments" rel="noopener ugc nofollow" target="_blank"> PEP8 </a>设定的行内评论准则。</p><p id="a3ef" class="pw-post-body-paragraph kz la iq lc b ld le jr lf lg lh ju li mh lk ll lm mi lo lp lq mj ls lt lu lv ij bi translated">在代码中编写内联注释是一个令人惊讶的有争议的话题。但是我喜欢采纳马丁·福勒在他的书《重构》中的建议:</p><blockquote class="kw kx ky"><p id="bbe6" class="kz la lb lc b ld le jr lf lg lh ju li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated"><em class="iq">“注释应该解释‘为什么’代码在做某事，而不是‘它在做什么’——</em><strong class="lc ir"><em class="iq">马丁福勒</em> </strong> <em class="iq">，</em> <a class="ae kv" href="https://engineeringfordatascience.com/book-notes/refactoring/" rel="noopener ugc nofollow" target="_blank"> <em class="iq">重构</em> </a></p></blockquote><p id="ffb8" class="pw-post-body-paragraph kz la iq lc b ld le jr lf lg lh ju li mh lk ll lm mi lo lp lq mj ls lt lu lv ij bi translated">代码正在做什么应该是不言自明的。然而，<em class="lb">为什么</em>开发者选择在代码中使用那个‘神奇’的数字、不寻常的方法或变通方法可能并不明显。这就是行内注释很有意义的地方。</p><p id="91a2" class="pw-post-body-paragraph kz la iq lc b ld le jr lf lg lh ju li mh lk ll lm mi lo lp lq mj ls lt lu lv ij bi translated">我喜欢在代码意图不明显的地方添加行内注释。一个很好的例子就是当你使用<a class="ae kv" href="https://en.wikipedia.org/wiki/Web_colors" rel="noopener ugc nofollow" target="_blank">十六进制代码</a>来表示颜色时——你永远不会仅仅通过看十六进制代码来记住颜色。</p><p id="20e6" class="pw-post-body-paragraph kz la iq lc b ld le jr lf lg lh ju li mh lk ll lm mi lo lp lq mj ls lt lu lv ij bi translated">下面是我在<a class="ae kv" href="https://engineeringfordatascience.com/posts/visualising_asset_price_correlations/" rel="noopener ugc nofollow" target="_blank">上发表的可视化资产价格相关性</a>的文章的一个片段，我为此使用了行内评论。</p><pre class="kg kh ki kj gt nt lz nu nv aw nw bi"><span id="9b0e" class="nh ml iq lz b gy nx ny l nz oa"><strong class="lz ir">def</strong> assign_colour(correlation: float) -&gt; str:<br/>    """Assign hex code colour string based on correlation value"""<br/>    <strong class="lz ir">if</strong> correlation &lt;= 0.0:<br/>        <strong class="lz ir">return</strong> "#ffa09b"  <em class="lb"># red</em><br/>    <strong class="lz ir">else</strong>:<br/>        <strong class="lz ir">return</strong> "#9eccb7"  <em class="lb"># green</em></span></pre><h2 id="ccd5" class="nh ml iq bd mm ni nj dn mq nk nl dp mu mh nm nn mw mi no np my mj nq nr na ns bi translated">文档字符串</h2><p id="e88e" class="pw-post-body-paragraph kz la iq lc b ld nc jr lf lg nd ju li mh ne ll lm mi nf lp lq mj ng lt lu lv ij bi translated">文档字符串用于描述函数或类的操作。它们是使用函数声明下面的三个引号语法<code class="fe lw lx ly lz b">"""</code>定义的。</p><pre class="kg kh ki kj gt nt lz nu nv aw nw bi"><span id="75b9" class="nh ml iq lz b gy nx ny l nz oa"><strong class="lz ir">def</strong> add(a,b):<br/>    """Add two numbers together"""<br/>    <strong class="lz ir">return</strong> a + b</span></pre><p id="8a81" class="pw-post-body-paragraph kz la iq lc b ld le jr lf lg lh ju li mh lk ll lm mi lo lp lq mj ls lt lu lv ij bi translated">将简单的单行文档字符串添加到代码函数中，即使您认为函数很简单，也会对提高可读性和减少未来开发人员的歧义有很大帮助。</p><p id="f0b1" class="pw-post-body-paragraph kz la iq lc b ld le jr lf lg lh ju li mh lk ll lm mi lo lp lq mj ls lt lu lv ij bi translated">需要注意的是<strong class="lc ir">文档字符串和行内/块注释是不可互换的</strong>。</p><p id="00e3" class="pw-post-body-paragraph kz la iq lc b ld le jr lf lg lh ju li mh lk ll lm mi lo lp lq mj ls lt lu lv ij bi translated">与行内/块注释不同，文档字符串可以在代码运行时使用<code class="fe lw lx ly lz b">__doc__</code> dunder属性或内置的<code class="fe lw lx ly lz b">help()</code>函数来访问。这意味着文档字符串可以被ide解释，并在输入新代码时显示为提示。</p><p id="3a7f" class="pw-post-body-paragraph kz la iq lc b ld le jr lf lg lh ju li mh lk ll lm mi lo lp lq mj ls lt lu lv ij bi translated">我注意到来自其他语言的程序员没有正确使用Python的文档字符串特性。例如，使用Python函数上面的块注释<em class="lb">而不是使用doc字符串语法:</em></p><pre class="kg kh ki kj gt nt lz nu nv aw nw bi"><span id="1f59" class="nh ml iq lz b gy nx ny l nz oa"><em class="lb"># function to add two numbers together</em><br/><strong class="lz ir">def</strong> add(a,b):<br/>    <strong class="lz ir">return</strong> a + b</span></pre><p id="ff36" class="pw-post-body-paragraph kz la iq lc b ld le jr lf lg lh ju li mh lk ll lm mi lo lp lq mj ls lt lu lv ij bi translated">这不仅不是“Pythonic化的”(参见技巧1 —代码格式化)，而且通过编写这样的注释，您在运行时放弃了对文档字符串的访问。因此，在IDE中编写时，您将无法查看函数描述，也无法使用自动文档工具，如<a class="ae kv" href="https://www.sphinx-doc.org/en/master/" rel="noopener ugc nofollow" target="_blank"> sphinx </a>(见下文)。</p><p id="a2ef" class="pw-post-body-paragraph kz la iq lc b ld le jr lf lg lh ju li mh lk ll lm mi lo lp lq mj ls lt lu lv ij bi translated">根据函数的复杂程度，一个简单的单行文档字符串可能是合适的。如果函数名和参数本身提供了足够的描述性细节，就不要添加不必要的细节。</p><blockquote class="kw kx ky"><p id="765f" class="kz la lb lc b ld le jr lf lg lh ju li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated"><strong class="lc ir"> <em class="iq">顶端提示</em> </strong> <em class="iq">💡</em></p><p id="2630" class="kz la lb lc b ld le jr lf lg lh ju li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated"><em class="iq">您可以使用VSCode中的</em> <a class="ae kv" href="https://marketplace.visualstudio.com/items?itemName=njpwerner.autodocstring" rel="noopener ugc nofollow" target="_blank"> <em class="iq"> Python文档字符串生成器</em> </a> <em class="iq">等工具自动生成文档字符串模板</em></p></blockquote><h2 id="6889" class="nh ml iq bd mm ni nj dn mq nk nl dp mu mh nm nn mw mi no np my mj nq nr na ns bi translated">外部文件</h2><p id="0853" class="pw-post-body-paragraph kz la iq lc b ld nc jr lf lg nd ju li mh ne ll lm mi nf lp lq mj ng lt lu lv ij bi translated">最详细的文档应该留给项目<code class="fe lw lx ly lz b">README.md</code>。</p><p id="87a1" class="pw-post-body-paragraph kz la iq lc b ld le jr lf lg lh ju li mh lk ll lm mi lo lp lq mj ls lt lu lv ij bi translated">自述文件应该向项目的维护者和用户提供关于如何设置环境、项目的目的、项目目录结构等的一般信息。</p><p id="92c4" class="pw-post-body-paragraph kz la iq lc b ld le jr lf lg lh ju li mh lk ll lm mi lo lp lq mj ls lt lu lv ij bi translated">你可以利用<a class="ae kv" href="https://github.com/othneildrew/Best-README-Template" rel="noopener ugc nofollow" target="_blank"> GitHub </a>上的<a class="ae kv" href="https://www.makeareadme.com/" rel="noopener ugc nofollow" target="_blank">自述文件模板</a>。</p><p id="0f51" class="pw-post-body-paragraph kz la iq lc b ld le jr lf lg lh ju li mh lk ll lm mi lo lp lq mj ls lt lu lv ij bi translated">此外，如果您已经用文档字符串记录了您的代码，那么您可以使用像<a class="ae kv" href="https://www.sphinx-doc.org/en/master/" rel="noopener ugc nofollow" target="_blank"> Sphinx </a>这样的工具在一个漂亮的用户界面中自动生成文档。</p></div><div class="ab cl ma mb hu mc" role="separator"><span class="md bw bk me mf mg"/><span class="md bw bk me mf mg"/><span class="md bw bk me mf"/></div><div class="ij ik il im in"><h1 id="a484" class="mk ml iq bd mm mn mo mp mq mr ms mt mu jw mv jx mw jz mx ka my kc mz kd na nb bi translated">额外收获:阅读他人的代码👨‍🎓</h1><p id="097d" class="pw-post-body-paragraph kz la iq lc b ld nc jr lf lg nd ju li mh ne ll lm mi nf lp lq mj ng lt lu lv ij bi translated">所以这条建议与改进你自己的Python代码没有直接关系。然而，学习如何编写可读和可维护的代码的最好方法之一是阅读其他人的代码。</p><p id="30f4" class="pw-post-body-paragraph kz la iq lc b ld le jr lf lg lh ju li mh lk ll lm mi lo lp lq mj ls lt lu lv ij bi translated">你可以通过查看GitHub上流行的开源库来获得其他人的代码，或者如果你在一个团队中工作，通过审查其他人的代码。</p><p id="3c5a" class="pw-post-body-paragraph kz la iq lc b ld le jr lf lg lh ju li mh lk ll lm mi lo lp lq mj ls lt lu lv ij bi translated"><strong class="lc ir">通过阅读他人的代码，你将能够发现在试图理解他们的代码库时让你感到沮丧的事情</strong>。这可能是命名不当的变量、函数所需的数据结构不清楚、文档不充分(例如，没有函数的文档字符串、自述文件)、不一致或不符合PEP8的代码使其难以阅读。</p><p id="ddbd" class="pw-post-body-paragraph kz la iq lc b ld le jr lf lg lh ju li mh lk ll lm mi lo lp lq mj ls lt lu lv ij bi translated">从外部的角度来看别人的代码，你可以从另一个程序员的角度将这些知识应用到你自己的代码中，而这个程序员以前并不了解代码库。</p><p id="c615" class="pw-post-body-paragraph kz la iq lc b ld le jr lf lg lh ju li mh lk ll lm mi lo lp lq mj ls lt lu lv ij bi translated">例如，只有当我参与一个继承了遗留代码库的项目时，我才意识到类型提示对于帮助其他开发人员(以及您自己)是多么有用！)来理解在代码中传递的数据结构。</p><h1 id="8fa0" class="mk ml iq bd mm mn ov mp mq mr ow mt mu jw ox jx mw jz oy ka my kc oz kd na nb bi translated">结论</h1><p id="3cc0" class="pw-post-body-paragraph kz la iq lc b ld nc jr lf lg nd ju li mh ne ll lm mi nf lp lq mj ng lt lu lv ij bi translated">您可以显著提高项目的可读性和可维护性，而无需重构任何代码逻辑，只需利用Python开源社区开发的工具。</p><p id="f31b" class="pw-post-body-paragraph kz la iq lc b ld le jr lf lg lh ju li mh lk ll lm mi lo lp lq mj ls lt lu lv ij bi translated">根据我的经验，你应该假设你会在未来的某个时刻忘记每个函数或变量的用途。因此，在第一次编写代码时，最好尽可能地明确(例如，编写描述性的文档字符串，添加明确的类型提示等)。).将这些策略应用到您自己的Python项目中，将会极大地改善合作者的开发体验，如果不能，它至少会让您未来的生活更加轻松。</p><p id="24c7" class="pw-post-body-paragraph kz la iq lc b ld le jr lf lg lh ju li mh lk ll lm mi lo lp lq mj ls lt lu lv ij bi translated">我在这篇文章中提到的五大技巧包括:</p><ul class=""><li id="7dd1" class="oc od iq lc b ld le lg lh mh oe mi of mj og lv oh oi oj ok bi translated">使用自动格式化程序，如<code class="fe lw lx ly lz b">black</code>和<code class="fe lw lx ly lz b">isort</code></li><li id="092a" class="oc od iq lc b ld ol lg om mh on mi oo mj op lv oh oi oj ok bi translated">使用代码检查器，如<code class="fe lw lx ly lz b">flake8</code>和<code class="fe lw lx ly lz b">pylint</code></li><li id="c9e9" class="oc od iq lc b ld ol lg om mh on mi oo mj op lv oh oi oj ok bi translated">使用类型提示来消除函数参数中的歧义</li><li id="a9ee" class="oc od iq lc b ld ol lg om mh on mi oo mj op lv oh oi oj ok bi translated">使用<code class="fe lw lx ly lz b">pre-commit</code>自动检查</li><li id="65ff" class="oc od iq lc b ld ol lg om mh on mi oo mj op lv oh oi oj ok bi translated">使用Python文档字符串编写好的文档</li></ul><p id="1663" class="pw-post-body-paragraph kz la iq lc b ld le jr lf lg lh ju li mh lk ll lm mi lo lp lq mj ls lt lu lv ij bi translated">将这些原则应用到您的开发中，将极大地提高代码的可维护性，并使您的未来生活变得更加轻松！</p><h1 id="e164" class="mk ml iq bd mm mn ov mp mq mr ow mt mu jw ox jx mw jz oy ka my kc oz kd na nb bi translated">资源</h1><ul class=""><li id="c8ce" class="oc od iq lc b ld nc lg nd mh or mi os mj ot lv oh oi oj ok bi translated"><a class="ae kv" href="https://gist.github.com/julian-west/e50b25a9aa10551e3452f5a6cfaa6aa3" rel="noopener ugc nofollow" target="_blank">我的模板。我用pre-commit-config.yaml文件作为大多数项目的基础</a></li><li id="00df" class="oc od iq lc b ld ol lg om mh on mi oo mj op lv oh oi oj ok bi translated"><a class="ae kv" href="https://realpython.com/lessons/type-hinting/" rel="noopener ugc nofollow" target="_blank"> RealPython —类型提示教程</a></li><li id="de6f" class="oc od iq lc b ld ol lg om mh on mi oo mj op lv oh oi oj ok bi translated"><a class="ae kv" href="https://www.youtube.com/c/ArjanCodes/videos" rel="noopener ugc nofollow" target="_blank"> Arjan Codes YouTube Channel —软件设计思路和干净代码</a></li><li id="2858" class="oc od iq lc b ld ol lg om mh on mi oo mj op lv oh oi oj ok bi translated"><a class="ae kv" href="https://docs.python-guide.org/writing/documentation/" rel="noopener ugc nofollow" target="_blank">写好Python文档</a></li></ul><blockquote class="kw kx ky"><p id="6a1d" class="kz la lb lc b ld le jr lf lg lh ju li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">本文最初发表在我的博客上，<a class="ae kv" href="https://engineeringfordatascience.com" rel="noopener ugc nofollow" target="_blank">engineeringfordatascience.com</a></p></blockquote></div></div>    
</body>
</html>