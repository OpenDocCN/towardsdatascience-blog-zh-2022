<html>
<head>
<title>Boomerang Plots</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">回旋镖图</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/boomerang-plot-9ae4aed419d4#2022-04-28">https://towardsdatascience.com/boomerang-plot-9ae4aed419d4#2022-04-28</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="f33a" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated"><em class="kf">快速发现概化模型的可视化</em></h2></div><figure class="kh ki kj kk gt kl gh gi paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><div class="gh gi kg"><img src="../Images/43f95ef90b26c107485387f4ea1d36d3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*zhXf92eQ0ZoSWPGWPoicJQ.gif"/></div></div><p class="ks kt gj gh gi ku kv bd b be z dk translated">作者图片</p></figure><blockquote class="kw kx ky"><p id="0910" class="kz la lb lc b ld le jr lf lg lh ju li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated"><code class="fe lw lx ly lz b">aiqc</code>回飞棒图可视化了实验中每个模型的每次分割(训练、验证、测试)的各种性能指标。当模型轨迹的点紧密聚集/精确时，这意味着模型已经发现了概括每个群体的模式。</p></blockquote></div><div class="ab cl ma mb hu mc" role="separator"><span class="md bw bk me mf mg"/><span class="md bw bk me mf mg"/><span class="md bw bk me mf"/></div><div class="ij ik il im in"><h2 id="d0ab" class="mh mi iq bd mj mk ml dn mm mn mo dp mp mq mr ms mt mu mv mw mx my mz na nb nc bi translated">🧮如何评价众多调校过的车型</h2><p id="605c" class="pw-post-body-paragraph kz la iq lc b ld nd jr lf lg ne ju li mq nf ll lm mu ng lp lq my nh lt lu lv ij bi translated">假设您刚刚训练了一大批模型，这些模型看起来都表现得相对较好。根据你关心的指标，你怎么知道哪一个是最好的？为了回答这个问题，你应该这样开始:</p><ul class=""><li id="11b0" class="ni nj iq lc b ld le lg lh mq nk mu nl my nm lv nn no np nq bi translated">通过类似<code class="fe lw lx ly lz b"><a class="ae nr" href="https://scikit-learn.org/stable/modules/generated/sklearn.metrics.f1_score.html" rel="noopener ugc nofollow" target="_blank">sklearn.metrics.f1_score</a></code>的函数运行原始预测</li><li id="63f8" class="ni nj iq lc b ld ns lg nt mq nu mu nv my nw lv nn no np nq bi translated">对每个分割/折叠(训练、验证、测试)都这样做。</li><li id="bad2" class="ni nj iq lc b ld ns lg nt mq nu mu nv my nw lv nn no np nq bi translated">对每个模型都这样做。</li><li id="a28b" class="ni nj iq lc b ld ns lg nt mq nu mu nv my nw lv nn no np nq bi translated">对每个指标都这样做。</li></ul><p id="1a00" class="pw-post-body-paragraph kz la iq lc b ld le jr lf lg lh ju li mq lk ll lm mu lo lp lq my ls lt lu lv ij bi nx translated"><span class="l ny nz oa bm ob oc od oe of di">在</span>这一点上，您可以为每个模型计算<em class="lb">聚合指标</em>。然而，由于只有2或3个分割可以学习，聚集指标不是很有用。</p><p id="fb82" class="pw-post-body-paragraph kz la iq lc b ld le jr lf lg lh ju li mq lk ll lm mu lo lp lq my ls lt lu lv ij bi translated">例如，如果您有一个模型，它分别以100%和95%的准确率过度拟合训练和评估数据，但以82%的准确率拒绝维持数据，那么大多数聚合指标将会产生误导。你必须引入一个范围或标准偏差度量来理解它，但在这一点上，你不能自己看看3个分裂吗？🤷因此，您又回到了从原始数据表开始的地方。</p><p id="8600" class="pw-post-body-paragraph kz la iq lc b ld le jr lf lg lh ju li mq lk ll lm mu lo lp lq my ls lt lu lv ij bi translated">为什么不想象一下呢？如果你已经用AIQC训练了一个<code class="fe lw lx ly lz b"><a class="ae nr" href="https://aiqc.readthedocs.io/en/latest/notebooks/api_low_level.html#8.-Queue-of-training-Jobs." rel="noopener ugc nofollow" target="_blank">Queue</a></code>模型，这很简单:</p><pre class="kh ki kj kk gt og lz oh oi aw oj bi"><span id="44c8" class="mh mi iq lz b gy ok ol l om on">queue.plot_performance(<br/>    score_type:str=None,<br/>    min_score:float=None,<br/>    max_loss:float=None<br/>)</span></pre><ul class=""><li id="f5c4" class="ni nj iq lc b ld le lg lh mq nk mu nl my nm lv nn no np nq bi translated"><code class="fe lw lx ly lz b">score_type</code>:从以下<em class="lb">分类</em>(准确性&lt;默认&gt;、f1、roc_auc、精度、召回)或<em class="lb">量化</em> (R &lt;默认&gt;、MSE、解释方差)的度量中选择。</li><li id="c94b" class="ni nj iq lc b ld ns lg nt mq nu mu nv my nw lv nn no np nq bi translated"><code class="fe lw lx ly lz b">min</code>和<code class="fe lw lx ly lz b">max</code>参数充当阈值，移除任何不符合分割的模型，并调整图形大小以适应符合分割的模型。</li></ul><figure class="kh ki kj kk gt kl gh gi paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><div class="gh gi oo"><img src="../Images/df2f802e35eda3ba3d30e16fae29deb6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FwYHDOlDE_cvp6XBZ5S3Yw.png"/></div></div><p class="ks kt gj gh gi ku kv bd b be z dk translated">作者图片</p></figure><blockquote class="op"><p id="61d9" class="oq or iq bd os ot ou ov ow ox oy lv dk translated">🪃你可能已经猜到了，它被命名为<em class="kf">回旋镖图</em>，因为它为每个模型制作了曲线。</p></blockquote><p id="5fa6" class="pw-post-body-paragraph kz la iq lc b ld oz jr lf lg pa ju li mq pb ll lm mu pc lp lq my pd lt lu lv ij bi translated">AIQC之所以能够做到这一点，是因为当<code class="fe lw lx ly lz b">Queue</code>在训练时，它会根据<code class="fe lw lx ly lz b">Queue.analysis_type</code>自动为每个模型的每次拆分/折叠生成<strong class="lc ir">度量</strong>和<strong class="lc ir">绘图</strong>。因此，当需要评估时，从业者可以简单地调用这些信息。</p></div><div class="ab cl ma mb hu mc" role="separator"><span class="md bw bk me mf mg"/><span class="md bw bk me mf mg"/><span class="md bw bk me mf"/></div><div class="ij ik il im in"><h2 id="0798" class="mh mi iq bd mj mk ml dn mm mn mo dp mp mq mr ms mt mu mv mw mx my mz na nb nc bi translated">🔬<strong class="ak">模型性能解读</strong></h2><p id="e259" class="pw-post-body-paragraph kz la iq lc b ld nd jr lf lg ne ju li mq nf ll lm mu ng lp lq my nh lt lu lv ij bi translated">可视化的美妙之处在于它使从业者能够进行他们自己的<em class="lb">无人监督的</em>解释。我们通过查看图表来执行我们自己的<em class="lb">聚类</em>分析。</p><p id="32bd" class="pw-post-body-paragraph kz la iq lc b ld le jr lf lg lh ju li mq lk ll lm mu lo lp lq my ls lt lu lv ij bi translated">快速浏览一下上面的图表，我们会发现:</p><ul class=""><li id="6a8f" class="ni nj iq lc b ld le lg lh mq nk mu nl my nm lv nn no np nq bi translated">右边的建筑比较差。</li><li id="9605" class="ni nj iq lc b ld ns lg nt mq nu mu nv my nw lv nn no np nq bi translated">左侧的高性能模型在训练数据上过度拟合。</li><li id="6ab0" class="ni nj iq lc b ld ns lg nt mq nu mu nv my nw lv nn no np nq bi translated">最概括的是橙色的<code class="fe lw lx ly lz b">Predictor.id==15</code>。</li><li id="9ee2" class="ni nj iq lc b ld ns lg nt mq nu mu nv my nw lv nn no np nq bi translated">然而，我们还没有完成训练。我们需要调整orange模型，看看能否提高它的性能。所以接下来我会看看它的参数和学习曲线，看看有什么可以改进的地方。</li></ul><pre class="kh ki kj kk gt og lz oh oi aw oj bi"><span id="5cbe" class="mh mi iq lz b gy ok ol l om on">predictor = aiqc.orm.<strong class="lz ir">Predictor</strong>.get_by_id(15)</span><span id="ec22" class="mh mi iq lz b gy pe ol l om on">predictor.get_hyperparameters()<br/>predictor.plot_learning_curve()</span></pre></div><div class="ab cl ma mb hu mc" role="separator"><span class="md bw bk me mf mg"/><span class="md bw bk me mf mg"/><span class="md bw bk me mf"/></div><div class="ij ik il im in"><h2 id="9339" class="mh mi iq bd mj mk ml dn mm mn mo dp mp mq mr ms mt mu mv mw mx my mz na nb nc bi translated">⏩我们能更快获得洞察力吗？</h2><p id="551e" class="pw-post-body-paragraph kz la iq lc b ld nd jr lf lg ne ju li mq nf ll lm mu ng lp lq my nh lt lu lv ij bi translated">经历过多次这样的循环之后，我决定将整个体验打包到一个实时仪表板中，以解决以下问题:</p><ul class=""><li id="55ee" class="ni nj iq lc b ld le lg lh mq nk mu nl my nm lv nn no np nq bi translated">在训练模型时，将模型添加到绘图中。</li><li id="e57a" class="ni nj iq lc b ld ns lg nt mq nu mu nv my nw lv nn no np nq bi translated">训练队列和绘图的独立过程。</li><li id="6c83" class="ni nj iq lc b ld ns lg nt mq nu mu nv my nw lv nn no np nq bi translated">更改分数和指标，无需回忆情节</li><li id="0e86" class="ni nj iq lc b ld ns lg nt mq nu mu nv my nw lv nn no np nq bi translated">获取超参数和其他补充信息，无需手动查询ORM。</li></ul><pre class="kh ki kj kk gt og lz oh oi aw oj bi"><span id="d8a9" class="mh mi iq lz b gy ok ol l om on">from aiqc.lab import <strong class="lz ir">Tracker</strong><br/>app = Tracker<br/>app.start()</span><span id="8f37" class="mh mi iq lz b gy pe ol l om on">“📊 AIQC Tracker<a class="ae nr" href="http://127.0.0.1:9991" rel="noopener ugc nofollow" target="_blank"> http://127.0.0.1:9991</a> 📊”</span></pre><p id="9160" class="pw-post-body-paragraph kz la iq lc b ld le jr lf lg lh ju li mq lk ll lm mu lo lp lq my ls lt lu lv ij bi translated">瞧——我们现在在博客文章的开头有了gif格式的实时Dash应用程序。</p></div><div class="ab cl ma mb hu mc" role="separator"><span class="md bw bk me mf mg"/><span class="md bw bk me mf mg"/><span class="md bw bk me mf"/></div><div class="ij ik il im in"><blockquote class="kw kx ky"><p id="e1e9" class="kz la lb lc b ld le jr lf lg lh ju li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated"><em class="iq"> AIQC是本帖作者写的开源库<br/> </em>请考虑在https://github.com/AIQC/aiqc<a class="ae nr" href="https://github.com/aiqc/aiqc" rel="noopener ugc nofollow" target="_blank"><strong class="lc ir">github⭐上给aiqc一颗星</strong> </a></p></blockquote></div></div>    
</body>
</html>