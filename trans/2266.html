<html>
<head>
<title>A Step-by-Step Guide to Creating a Content Safety Detection Bot for Discord</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">创建内容安全检测机器人的分步指南</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/a-step-by-step-guide-to-creating-a-content-safety-detection-bot-for-discord-bea2444e834a#2022-05-18">https://towardsdatascience.com/a-step-by-step-guide-to-creating-a-content-safety-detection-bot-for-discord-bea2444e834a#2022-05-18</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><h2 id="cb7e" class="ir is it bd b dl iu iv iw ix iy iz dk ja translated" aria-label="kicker paragraph">实践教程</h2><div class=""/><div class=""><h2 id="76e7" class="pw-subtitle-paragraph jz jc it bd b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq dk translated">使用人工智能的内容调节</h2></div><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi kr"><img src="../Images/98a0bf730729f6b22f2760b90a6b6688.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*3svRpCQ6mDx-UzIp"/></div></div><p class="ld le gj gh gi lf lg bd b be z dk translated">照片由<a class="ae lh" href="https://unsplash.com/@elladon?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">艾拉·唐</a>在<a class="ae lh" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>拍摄</p></figure><p id="e711" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">在这篇文章中，我们将学习如何编写一个不和谐机器人，可以为我们调节频道的内容。对于不同类型的人相互联系的公共空间来说，内容适度是必不可少的。当我们在网络平台上时，我们感到安全。<em class="me">在线交流</em>是一个需要更多关注和重视的重要课题。</p><p id="4fc2" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">内容适度是许多社交媒体平台的常见做法，尤其是当平台的用户主要生成内容时。内容审核正在一些领域积极使用，如社交媒体、市场、约会应用和在线论坛。</p><p id="2b81" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">在这个项目中，我们的重点将是基于语音平台的内容调节。不和谐频道将是实施我们的内容版主的最佳场所之一。有许多类型的内容版主，从真人到自动版主。你可以从这篇文章的标题中了解到，我们的内容版主将是一个人工智能机器人。</p><h2 id="6ff2" class="mf mg it bd mh mi mj dn mk ml mm dp mn lr mo mp mq lv mr ms mt lz mu mv mw iz bi translated">目录:</h2><ul class=""><li id="e7c2" class="mx my it lk b ll mz lo na lr nb lv nc lz nd md ne nf ng nh bi translated"><em class="me">入门</em></li><li id="2cff" class="mx my it lk b ll ni lo nj lr nk lv nl lz nm md ne nf ng nh bi translated"><em class="me">步骤1 —库</em></li><li id="9385" class="mx my it lk b ll ni lo nj lr nk lv nl lz nm md ne nf ng nh bi translated"><em class="me">步骤2—将机器人连接到不和谐频道</em></li><li id="a383" class="mx my it lk b ll ni lo nj lr nk lv nl lz nm md ne nf ng nh bi translated"><em class="me">步骤3—功能</em></li><li id="b1d6" class="mx my it lk b ll ni lo nj lr nk lv nl lz nm md ne nf ng nh bi translated"><em class="me">步骤4—不一致命令</em></li><li id="518d" class="mx my it lk b ll ni lo nj lr nk lv nl lz nm md ne nf ng nh bi translated"><em class="me">最后一步——测试程序</em></li></ul></div><div class="ab cl nn no hx np" role="separator"><span class="nq bw bk nr ns nt"/><span class="nq bw bk nr ns nt"/><span class="nq bw bk nr ns"/></div><div class="im in io ip iq"><h1 id="5c6a" class="nu mg it bd mh nv nw nx mk ny nz oa mn ki ob kj mq kl oc km mt ko od kp mw oe bi translated">入门指南</h1><p id="d74c" class="pw-post-body-paragraph li lj it lk b ll mz kd ln lo na kg lq lr of lt lu lv og lx ly lz oh mb mc md im bi translated">在这个项目中，我们将学习如何通过像Discord这样的软件使用在线API。我们将使用AssemblyAI的<a class="ae lh" href="https://www.assemblyai.com" rel="noopener ugc nofollow" target="_blank">语音转文本API </a>对Discord频道上共享的音频消息执行内容审核。换句话说，通过内容安全检测，AssemblyAI可以检测出我们的音频/视频文件中可能存在的不安全内容，并准确返回这些内容是在什么时候说的。</p><p id="669f" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">经过训练的模型可以识别十几个不同的主题；有些可以列为赌博、仇恨言论、毒品、负面新闻等等。看看它的表现会很有趣。如果你想了解更多，这里的是内容审核模块的文档。</p><p id="07d9" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">让我们从图书馆开始。</p></div><div class="ab cl nn no hx np" role="separator"><span class="nq bw bk nr ns nt"/><span class="nq bw bk nr ns nt"/><span class="nq bw bk nr ns"/></div><div class="im in io ip iq"><h1 id="f0f4" class="nu mg it bd mh nv nw nx mk ny nz oa mn ki ob kj mq kl oc km mt ko od kp mw oe bi translated">步骤1 —库</h1><p id="a5d3" class="pw-post-body-paragraph li lj it lk b ll mz kd ln lo na kg lq lr of lt lu lv og lx ly lz oh mb mc md im bi translated">对于这个项目，我们将致力于代码编辑器。这些库将被安装，然后导入python程序。我们需要五个库:<em class="me"> os、Discord、dotenv、requests和JSON </em>。</p><p id="67e6" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">在使用它们之前，我们必须安装它们。Python已经安装了OS和JSON。因此，我们已经用PIP安装了其他三个库。PIP是一个python库管理器。我们可以在一行代码中安装多个库。在您的终端窗口中运行以下行:</p><pre class="ks kt ku kv gt oi oj ok ol aw om bi"><span id="fd71" class="mf mg it oj b gy on oo l op oq">pip install python-dotenv requests discord.py</span></pre><p id="a7d1" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">此外，以下是这些主要库的官方文档链接:</p><ul class=""><li id="b6af" class="mx my it lk b ll lm lo lp lr or lv os lz ot md ne nf ng nh bi translated"><a class="ae lh" href="https://github.com/theskumar/python-dotenv" rel="noopener ugc nofollow" target="_blank"> Python-dotenv </a></li><li id="a07a" class="mx my it lk b ll ni lo nj lr nk lv nl lz nm md ne nf ng nh bi translated"><a class="ae lh" href="https://requests.readthedocs.io/en/latest/" rel="noopener ugc nofollow" target="_blank">请求</a></li><li id="f344" class="mx my it lk b ll ni lo nj lr nk lv nl lz nm md ne nf ng nh bi translated"><a class="ae lh" href="https://github.com/Rapptz/discord.py" rel="noopener ugc nofollow" target="_blank"> Discord.py </a></li></ul><p id="cbea" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">现在，让我们导入它们。</p><pre class="ks kt ku kv gt oi oj ok ol aw om bi"><span id="c277" class="mf mg it oj b gy on oo l op oq">import os<br/>import discord<br/>from dotenv import load_dotenv<br/>import requests<br/>import json</span></pre></div><div class="ab cl nn no hx np" role="separator"><span class="nq bw bk nr ns nt"/><span class="nq bw bk nr ns nt"/><span class="nq bw bk nr ns"/></div><div class="im in io ip iq"><h1 id="d423" class="nu mg it bd mh nv nw nx mk ny nz oa mn ki ob kj mq kl oc km mt ko od kp mw oe bi translated"><em class="ou">步骤2——将机器人连接到不和谐频道</em></h1><p id="d953" class="pw-post-body-paragraph li lj it lk b ll mz kd ln lo na kg lq lr of lt lu lv og lx ly lz oh mb mc md im bi translated">这一步将涵盖如何创建和连接一个机器人不和谐。对于bot创建部分我在这里就不赘述了，但是如果你想了解更多，有一篇Eric Chi写的很优秀的文章:<a class="ae lh" href="https://betterprogramming.pub/coding-a-discord-bot-with-python-64da9d6cade7" rel="noopener ugc nofollow" target="_blank">用Python构建一个不和谐的Bot</a>。</p><p id="9506" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">bot过程完成后，我们将进入我们的项目文件夹，创建一个新文件，并将其重命名为<em class="me">. env . .</em>该文件将存储我们的API密钥。看起来是这样的:</p><pre class="ks kt ku kv gt oi oj ok ol aw om bi"><span id="8a9d" class="mf mg it oj b gy on oo l op oq">DISCORD_TOKEN = {Your Discord API Key}</span><span id="7ee2" class="mf mg it oj b gy ov oo l op oq">DISCORD_GUILD = {your-guild-name}</span></pre><p id="428b" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">现在，让我们回到我们的主程序。到目前为止，我们只是导入了库。是时候加载我们刚刚创建的环境文件了。</p><pre class="ks kt ku kv gt oi oj ok ol aw om bi"><span id="e0dd" class="mf mg it oj b gy on oo l op oq">load_dotenv()</span><span id="3165" class="mf mg it oj b gy ov oo l op oq">TOKEN = os.getenv('DISCORD_TOKEN')</span><span id="2722" class="mf mg it oj b gy ov oo l op oq">client = discord.Client()</span></pre><p id="9554" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">然后，我们将编写一个异步函数来与Discord API同步。当我们的bot连接到我们的Discord通道时，我们将在终端窗口中打印一条消息。</p><pre class="ks kt ku kv gt oi oj ok ol aw om bi"><span id="a070" class="mf mg it oj b gy on oo l op oq">@client.event<br/>async def on_ready():<br/>    print(f'{client.user} has connected to Discord!')</span><span id="5939" class="mf mg it oj b gy ov oo l op oq">client.run(TOKEN)</span></pre><p id="0d7f" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">这是我们的项目文件在这一步结束时的截图。</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi ow"><img src="../Images/45e5197ea29156e679a99fb147f74141.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*boA_2sXQESiVXlJH8Mzhvw.png"/></div></div><p class="ld le gj gh gi lf lg bd b be z dk translated">图片由作者提供。</p></figure><p id="ca8a" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">您可以继续运行这个python程序。在进入下一步之前，让我们确保我们的机器人连接没有任何问题。</p><p id="599d" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">当您看到以下两个标志时，这意味着您的机器人已经准备好了:</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi ox"><img src="../Images/04bd95f99d8a4ecff2b6701d6b458a0f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*h7JiTJ7PDvqLiId9nbtaqg.png"/></div></div><p class="ld le gj gh gi lf lg bd b be z dk translated">图片由作者提供。</p></figure><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi oy"><img src="../Images/af594ece84440fa62795cb892f5d34a6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*VJwm8CtGh-vaEpGbBMRUAQ.png"/></div></div><p class="ld le gj gh gi lf lg bd b be z dk translated">图片由作者提供。</p></figure></div><div class="ab cl nn no hx np" role="separator"><span class="nq bw bk nr ns nt"/><span class="nq bw bk nr ns nt"/><span class="nq bw bk nr ns"/></div><div class="im in io ip iq"><h1 id="0c20" class="nu mg it bd mh nv nw nx mk ny nz oa mn ki ob kj mq kl oc km mt ko od kp mw oe bi translated">第3步—功能</h1><p id="47b6" class="pw-post-body-paragraph li lj it lk b ll mz kd ln lo na kg lq lr of lt lu lv og lx ly lz oh mb mc md im bi translated">创建一个机器人并将其连接到我们的Discord服务器有点复杂，但这一步会容易得多。我们将有一个如何使用API云服务的想法。</p><p id="699a" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">在这一步，我们将编写三个函数。以下是函数列表及其作用:</p><ul class=""><li id="6d1a" class="mx my it lk b ll lm lo lp lr or lv os lz ot md ne nf ng nh bi translated"><strong class="lk jd"> upload_audio </strong>:该功能将音频文件从项目文件夹上传到AssemblyAI的云存储中。API的响应为我们提供了上传音频的URL地址。我们将在云上运行语音转文本时使用它。</li><li id="5b73" class="mx my it lk b ll ni lo nj lr nk lv nl lz nm md ne nf ng nh bi translated"><strong class="lk jd"> get_transcript </strong>:这个函数是我们打开内容审核功能的地方。我们在函数内部的JSON字典下传递带有真值<em class="me">的<em class="me"> content_safety </em>键。来自API的响应将具有请求URL，这是我们跟踪请求状态并获得结果的方式。</em></li><li id="81ff" class="mx my it lk b ll ni lo nj lr nk lv nl lz nm md ne nf ng nh bi translated"><strong class="lk jd"> check_result </strong>:这个函数帮助我们检查在前一个函数中发送的请求的状态。如果请求被完成，它将为我们在内容安全方面有结果。</li></ul><p id="3614" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">下面是函数。在本文的最后一步，我们将看到它们的实际应用。</p><h2 id="7f7f" class="mf mg it bd mh mi mj dn mk ml mm dp mn lr mo mp mq lv mr ms mt lz mu mv mw iz bi translated">上传音频</h2><pre class="ks kt ku kv gt oi oj ok ol aw om bi"><span id="ff43" class="mf mg it oj b gy on oo l op oq">def upload_audio():<br/>    audio_data = "audio_message.mp4"<br/>    endpoint = "<a class="ae lh" href="https://api.assemblyai.com/v2/upload" rel="noopener ugc nofollow" target="_blank">https://api.assemblyai.com/v2/upload</a>"</span><span id="9545" class="mf mg it oj b gy ov oo l op oq">    def up_audio(audio_data, chunk_size=5242880):<br/>        with open(audio_data, 'rb') as audio_file:<br/>            while True:<br/>                data = audio_file.read(chunk_size)<br/>                if not data:<br/>                    break<br/>                yield data</span><span id="14b2" class="mf mg it oj b gy ov oo l op oq">     headers = {<br/>        "authorization": "API Key"<br/>     }<br/>    response = requests.post(endpoint, headers=headers, data=up_audio(audio_data))<br/>    return response</span></pre><h2 id="d69c" class="mf mg it bd mh mi mj dn mk ml mm dp mn lr mo mp mq lv mr ms mt lz mu mv mw iz bi translated">获取转录</h2><pre class="ks kt ku kv gt oi oj ok ol aw om bi"><span id="76b1" class="mf mg it oj b gy on oo l op oq">def get_transcript():<br/>    endpoint = "<a class="ae lh" href="https://api.assemblyai.com/v2/transcript" rel="noopener ugc nofollow" target="_blank">https://api.assemblyai.com/v2/transcript</a>"</span><span id="0598" class="mf mg it oj b gy ov oo l op oq">    json = {<br/>        "audio_url": upload_url,<br/>        "content_safety": True<br/>    }<br/>    headers = {<br/>        "authorization": "API Key",<br/>        "content-type": "application/json"<br/>    }<br/>    response = requests.post(endpoint, json=json, headers=headers)</span><span id="3ed5" class="mf mg it oj b gy ov oo l op oq">return response</span></pre><h2 id="8d28" class="mf mg it bd mh mi mj dn mk ml mm dp mn lr mo mp mq lv mr ms mt lz mu mv mw iz bi translated">检查结果</h2><pre class="ks kt ku kv gt oi oj ok ol aw om bi"><span id="1342" class="mf mg it oj b gy on oo l op oq">def check_result(request_id):<br/>    request_url = "<a class="ae lh" href="https://api.assemblyai.com/v2/transcript/" rel="noopener ugc nofollow" target="_blank">https://api.assemblyai.com/v2/transcript/</a>" + str(request_id)</span><span id="48c2" class="mf mg it oj b gy ov oo l op oq">headers = {<br/>        "authorization": "API Key"<br/>    }</span><span id="ac0b" class="mf mg it oj b gy ov oo l op oq">response = requests.get(request_url, headers=headers)</span><span id="3a4b" class="mf mg it oj b gy ov oo l op oq">return response</span></pre></div><div class="ab cl nn no hx np" role="separator"><span class="nq bw bk nr ns nt"/><span class="nq bw bk nr ns nt"/><span class="nq bw bk nr ns"/></div><div class="im in io ip iq"><h1 id="b667" class="nu mg it bd mh nv nw nx mk ny nz oa mn ki ob kj mq kl oc km mt ko od kp mw oe bi translated">步骤4 —不一致命令</h1><p id="204c" class="pw-post-body-paragraph li lj it lk b ll mz kd ln lo na kg lq lr of lt lu lv og lx ly lz oh mb mc md im bi translated">在这一步，我们要做一些有趣的事情。我们将定义触发这些功能的命令。而且，这些命令会来自不和谐聊天。这意味着我们的代码将同时监听聊天框中写的对话。当一个特定的单词通过时，它将调用定义的函数。因为我们想让它在程序运行时一直监听，所以我们将使用一个异步函数。让我们开始吧。</p><p id="f6a6" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">首先，我们必须在函数之外定义两个变量。它们将是全局变量；我们希望在函数被多次调用时存储它们的值。</p><p id="6076" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">其次，我们正在编写<em class="me"> on_message </em>函数。这是我定义的特定关键字的列表。我还添加了一个美元符号，以便与普通消息区分开来；请随意用不同的词替换它们。</p><ul class=""><li id="3a86" class="mx my it lk b ll lm lo lp lr or lv os lz ot md ne nf ng nh bi translated"><strong class="lk jd">$你好</strong>:机器人会回应“你好！”在聊天框里。只是为了测试一下。</li><li id="4268" class="mx my it lk b ll ni lo nj lr nk lv nl lz nm md ne nf ng nh bi translated"><strong class="lk jd"> $upload_fun </strong>:机器人会运行<em class="me">upload _ audio</em>函数，然后打印出聊天框中音频的URL。</li><li id="b0ca" class="mx my it lk b ll ni lo nj lr nk lv nl lz nm md ne nf ng nh bi translated"><strong class="lk jd">$ transcription _ fun</strong>:bot将运行<em class="me"> get_transcription </em>函数，并在聊天框中打印出request-id。</li><li id="ad80" class="mx my it lk b ll ni lo nj lr nk lv nl lz nm md ne nf ng nh bi translated"><strong class="lk jd"> $check_fun </strong>:机器人会运行check_result函数来检查状态，并为我们打印出来。我们将运行这个单词，直到我们看到状态显示为completed。</li><li id="010d" class="mx my it lk b ll ni lo nj lr nk lv nl lz nm md ne nf ng nh bi translated"><strong class="lk jd"> $result_fun </strong>:看到API完成了我们的请求后，就该得到结果了。</li></ul><pre class="ks kt ku kv gt oi oj ok ol aw om bi"><span id="0eba" class="mf mg it oj b gy on oo l op oq">response_id = ""<br/>upload_url = ""</span><span id="6f52" class="mf mg it oj b gy ov oo l op oq"><br/>@client.event<br/>async def on_message(message):</span><span id="9de1" class="mf mg it oj b gy ov oo l op oq">   if message.author == client.user:<br/>        return</span><span id="9e14" class="mf mg it oj b gy ov oo l op oq">   if message.content.startswith('$hello'):<br/>        await message.channel.send('Hello!')</span><span id="5794" class="mf mg it oj b gy ov oo l op oq">   if message.content.startswith('$upload_fun'):<br/>        response = upload_audio()<br/>        global upload_url<br/>        upload_url = response.json()['upload_url']<br/>        await message.channel.send(upload_url)</span><span id="c4d6" class="mf mg it oj b gy ov oo l op oq">   if message.content.startswith('$transcript_fun'):<br/>        response = get_transcript()<br/>        global response_id<br/>        response_id = response.json()['id']<br/>        await message.channel.send(response_id)</span><span id="e3de" class="mf mg it oj b gy ov oo l op oq">   if message.content.startswith('$check_fun'):<br/>        response = check_result(response_id)<br/>        response_status = response.json()['status']<br/>        await message.channel.send(response_status)</span><span id="b8b4" class="mf mg it oj b gy ov oo l op oq">   if message.content.startswith('$result_fun'):<br/>        response = check_result(response_id)<br/>        response_transcript = response.json()['content_safety_labels']<br/>        await message.channel.send(response_transcript)</span></pre></div><div class="ab cl nn no hx np" role="separator"><span class="nq bw bk nr ns nt"/><span class="nq bw bk nr ns nt"/><span class="nq bw bk nr ns"/></div><div class="im in io ip iq"><h1 id="5a52" class="nu mg it bd mh nv nw nx mk ny nz oa mn ki ob kj mq kl oc km mt ko od kp mw oe bi translated">最后一步— <em class="ou">测试程序</em></h1><p id="f1d1" class="pw-post-body-paragraph li lj it lk b ll mz kd ln lo na kg lq lr of lt lu lv og lx ly lz oh mb mc md im bi translated">完美！到目前为止，理论上一切都很好。让我们看看他们的行动吧！</p><p id="2642" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">这是一个场景:你通过Discord接收音频，在听之前，你想运行一个内容安全检查来了解音频记录。</p><p id="e5b2" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">我从埃隆·马斯克关于社交媒体的播客中选了一个短片，作为我们的测试。这里的是YouTube上的视频版本。我已经将录音重命名并格式化为“<em class="me"> elon_speech.mp3 </em>”。它和我们的主程序在同一个项目文件夹中。现在，让我们从终端运行我们的主程序。</p><p id="d126" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">当我们看到下面的消息时，这个机器人已经加入了我们的不和谐游戏。</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi oz"><img src="../Images/a97008a98e444fcae03cdc5c836152d5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*q9-RuOPwOb6MXlFse9xx3A.png"/></div></div><p class="ld le gj gh gi lf lg bd b be z dk translated">图片由作者提供。</p></figure><p id="e24e" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">现在，让我们转到我们的Discord应用程序，开始给机器人发消息。然后，按顺序运行命令，查看机器人的响应:</p><h2 id="3c16" class="mf mg it bd mh mi mj dn mk ml mm dp mn lr mo mp mq lv mr ms mt lz mu mv mw iz bi translated">$你好</h2><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi pa"><img src="../Images/9dfb96cf25651ea994fb3fdfa02cd02e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*oe4Y-eEPRm8hWABjqQTT7Q.png"/></div></div><p class="ld le gj gh gi lf lg bd b be z dk translated">图片由作者提供。</p></figure><h2 id="4ea8" class="mf mg it bd mh mi mj dn mk ml mm dp mn lr mo mp mq lv mr ms mt lz mu mv mw iz bi translated">$上传_乐趣</h2><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi pb"><img src="../Images/a360d20e96c754f5e3ad3d2efc8326c8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*m0hS4cDm56GEiEZ16850Pg.png"/></div></div><p class="ld le gj gh gi lf lg bd b be z dk translated">图片由作者提供。</p></figure><h2 id="d72b" class="mf mg it bd mh mi mj dn mk ml mm dp mn lr mo mp mq lv mr ms mt lz mu mv mw iz bi translated">$抄本_乐趣</h2><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi pc"><img src="../Images/49e980a265af898f2fa3e60e3be3b888.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*LngqNyyKBJIj8IBPMHCVbA.png"/></div></div><p class="ld le gj gh gi lf lg bd b be z dk translated">图片由作者提供。</p></figure><h2 id="5277" class="mf mg it bd mh mi mj dn mk ml mm dp mn lr mo mp mq lv mr ms mt lz mu mv mw iz bi translated">$检查_乐趣</h2><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi pd"><img src="../Images/e15c1a2fddf68b33c05a2a1f506f6ece.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*C5SAekE74JM0UNTfQSL7kw.png"/></div></div><p class="ld le gj gh gi lf lg bd b be z dk translated">图片由作者提供。</p></figure><h2 id="2842" class="mf mg it bd mh mi mj dn mk ml mm dp mn lr mo mp mq lv mr ms mt lz mu mv mw iz bi translated">$result_fun</h2><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi pe"><img src="../Images/92799778f2a89a938ebdcd0aeaeb93c5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ymWHcq1-1xKsCBMY9hyxwg.png"/></div></div><p class="ld le gj gh gi lf lg bd b be z dk translated">图片由作者提供。</p></figure><p id="bd0c" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">那么，我们在看什么？</p><p id="92f4" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">嗯，这里发生了很多事情。首先，讲话的文本版本包含潜在的安全危险信号。此外，就在文本之后，我们看到标签；在这种情况下，它说“亵渎。”然后我们有了置信度得分和这个演讲经过的时间标记。</p><p id="0e6a" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">我们的机器人已经从这个视频中识别出三个不安全的部分。确定的内容有亵渎、武器、敏感的社会问题。</p><h2 id="9ac1" class="mf mg it bd mh mi mj dn mk ml mm dp mn lr mo mp mq lv mr ms mt lz mu mv mw iz bi translated">结论</h2><p id="252a" class="pw-post-body-paragraph li lj it lk b ll mz kd ln lo na kg lq lr of lt lu lv og lx ly lz oh mb mc md im bi translated">恭喜你。在本文中，我们学习了如何构建一个Discord bot，并将其与基于云的语音转文本API相连接。我们的程序已经返回了讨论潜在不安全话题的标签和时间戳。这个项目可以通过添加从原始视频中裁剪出检测到的时间帧的功能来改进。</p><p id="d2f2" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">从事这些项目是将我们的机器学习和人工智能技能应用到我们日常生活中的一个很好的方式。希望你喜欢阅读本指南，并在今天学到一些新东西。如果您有任何问题，请随时联系。</p><blockquote class="pf pg ph"><p id="0196" class="li lj me lk b ll lm kd ln lo lp kg lq pi ls lt lu pj lw lx ly pk ma mb mc md im bi translated">我是<a class="pl pm ep" href="https://medium.com/u/a073b4360020?source=post_page-----bea2444e834a--------------------------------" rel="noopener" target="_blank">贝希克·居文</a>，我喜欢分享关于编程、教育和生活的故事。<a class="ae lh" href="https://lifexplorer.medium.com/membership" rel="noopener">订阅</a>我的内容，保持灵感。泰，</p></blockquote><p id="3a4e" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">如果你想知道我发表了什么样的文章，这里有一些:</p><ul class=""><li id="eeae" class="mx my it lk b ll lm lo lp lr or lv os lz ot md ne nf ng nh bi translated"><a class="ae lh" rel="noopener" target="_blank" href="/building-a-face-recognizer-in-python-7fd6630c6340">使用Python构建人脸识别器</a></li><li id="21c1" class="mx my it lk b ll ni lo nj lr nk lv nl lz nm md ne nf ng nh bi translated"><a class="ae lh" rel="noopener" target="_blank" href="/speech-recognition-in-real-time-using-python-fbbd62e6ff9d">使用Python进行实时语音识别</a></li><li id="4985" class="mx my it lk b ll ni lo nj lr nk lv nl lz nm md ne nf ng nh bi translated"><a class="ae lh" rel="noopener" target="_blank" href="/step-by-step-guide-building-a-prediction-model-in-python-ac441e8b9e8b">分步指南—用Python构建预测模型</a></li></ul></div></div>    
</body>
</html>