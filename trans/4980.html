<html>
<head>
<title>A Synthetic Image Dataset Generated with Stable Diffusion</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用稳定扩散生成的合成图像数据集</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/a-synthetic-image-dataset-generated-with-stable-diffusion-93e8b557051b#2022-11-06">https://towardsdatascience.com/a-synthetic-image-dataset-generated-with-stable-diffusion-93e8b557051b#2022-11-06</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="bc8e" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">用Wordnet测试稳定扩散能力</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/1bb41f3aa3b81c9d22c912557c9bc164.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*E3Xco6npXsjELNybLW4Nqw.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">由作者创建的稳定扩散的图像</p></figure><p id="c26c" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">用于从文本输入生成合成图像的当前模型不仅能够生成非常逼真的照片，而且能够处理大量不同的对象。在论文“<a class="ae lr" href="https://arxiv.org/abs/2211.01777" rel="noopener ugc nofollow" target="_blank">评估使用稳定扩散生成的合成图像数据集</a>”中，我们使用“稳定扩散”模型来研究哪些对象和类型被如此真实地表示，以至于后续的图像分类正确地分配它们。这给了我们在现实表现方面对模型的评估。</p><p id="4313" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">上面的照片用一个足球的例子来说明，不仅生成了非常逼真的照片，而且从精确的文本提示开始，创建了对象的非常不同的表示。</p><h2 id="ccbd" class="ls lt iq bd lu lv lw dn lx ly lz dp ma le mb mc md li me mf mg lm mh mi mj mk bi translated">数据的生成</h2><p id="0926" class="pw-post-body-paragraph kv kw iq kx b ky ml jr la lb mm ju ld le mn lg lh li mo lk ll lm mp lo lp lq ij bi translated">作为图像生成的基础，我们使用<a class="ae lr" href="https://github.com/CompVis/stable-diffusion" rel="noopener ugc nofollow" target="_blank">“稳定扩散”1.4模型</a>和<a class="ae lr" href="https://huggingface.co/docs/diffusers/index" rel="noopener ugc nofollow" target="_blank"> Huggingface扩散器库</a>的实现。该模型允许基于文本提示创建和修改图像。它是在<a class="ae lr" href="https://laion.ai/blog/laion-5b/" rel="noopener ugc nofollow" target="_blank"> LION5B文本到图像数据集</a>的子集(LAION-美学)上训练的潜在扩散模型。</p><p id="275f" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">下图显示了从文本提示生成的图像示例</p><blockquote class="mq mr ms"><p id="b210" class="kv kw mt kx b ky kz jr la lb lc ju ld mu lf lg lh mv lj lk ll mw ln lo lp lq ij bi translated">《站在水中的短腿哈夫林杰马》。</p></blockquote><p id="e778" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">该示例表明，生成器模型可以表示具有不同属性的不同概念，还可以将它们组合在一个设置中。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi mx"><img src="../Images/5ef35d96040a4e764614fba1c583ae89.png" data-original-src="https://miro.medium.com/v2/resize:fit:1300/format:webp/1*wlVSlwu0IxJeEXr1v1tUWw.png"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">由作者创建的稳定扩散的图像</p></figure><p id="37c3" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">我们创建了一个包含各种不同概念的图像的数据集。对于文本输入，我们使用“<a class="ae lr" href="https://wordnet.princeton.edu/" rel="noopener ugc nofollow" target="_blank"> Wordnet </a>”中包含的信息。Wordnet将概念组织到所谓的“synsetss”中，synset对应一个或多个具有相同含义的单词的含义。因此，一个意义不同的词可以属于几个同义词集。例如,“apple”这个词有水果和电脑品牌的意思，这两个词各有一个同义词集。</p><p id="9868" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">从Wordnet synset‘object . n . 01’开始，通过递归调用“下位词”(比适用于它的一般或上位术语具有更具体含义的词)，创建了26，204个名词synset的列表。对于这些名词中的每一个，我们使用Wordnet中的同义词集描述来生成图像。</p><p id="87b6" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">这种提示的一个例子是:(狗的synset)</p><blockquote class="mq mr ms"><p id="ff10" class="kv kw mt kx b ky kz jr la lb lc ju ld mu lf lg lh mv lj lk ll mw ln lo lp lq ij bi translated">“犬科动物属的一员(可能是普通狼的后代)，从史前时代起就被人类驯养；出现在许多品种中”</p></blockquote><p id="7e3e" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">对于每个synset，生成了10个图像，并存储在synset的名称下，并附加了编号。这导致我们的数据集总共有262，040幅图像。</p><p id="2ea8" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">与每个synset的10个图像一起，保存一个文本文件，该文件包含所使用的提示、synset的名称(例如“dog.n.01”)和wordnet编号(例如“n12345678”)。唱片可以从Kaggle下载。</p><div class="my mz gp gr na nb"><a href="https://www.kaggle.com/datasets/astoeckl/stable-diffusion-wordnet-dataset" rel="noopener  ugc nofollow" target="_blank"><div class="nc ab fo"><div class="nd ab ne cl cj nf"><h2 class="bd ir gy z fp ng fr fs nh fu fw ip bi translated">稳定扩散Wordnet数据集</h2><div class="ni l"><h3 class="bd b gy z fp ng fr fs nh fu fw dk translated">评估用稳定扩散生成的合成图像数据集</h3></div></div><div class="nj l"><div class="nk l nl nm nn nj no kp nb"/></div></div></a></div><p id="baff" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">许可:知识共享——<a class="ae lr" href="https://creativecommons.org/licenses/by/4.0/" rel="noopener ugc nofollow" target="_blank">https://creativecommons.org/licenses/by/4.0/</a>引用:【https://arxiv.org/abs/2211.01777】T2</p><h2 id="e559" class="ls lt iq bd lu lv lw dn lx ly lz dp ma le mb mc md li me mf mg lm mh mi mj mk bi translated">数据评估</h2><p id="77b9" class="pw-post-body-paragraph kv kw iq kx b ky ml jr la lb mm ju ld le mn lg lh li mo lk ll lm mp lo lp lq ij bi translated">为了对我们的数据集子集进行系统评估，我们使用了<a class="ae lr" href="https://image-net.org/challenges/LSVRC/" rel="noopener ugc nofollow" target="_blank"> ImageNet大规模视觉识别挑战</a> (ILSVRC)数据集。<br/>我们使用<a class="ae lr" href="https://arxiv.org/abs/2010.11929" rel="noopener ugc nofollow" target="_blank"> vision transformer模型</a>的Pytorch实现，它在ImageNet数据上的前1名准确率为88.55%，前5名准确率为98.69%，以验证生成的图像可以正确分类。</p><p id="a71f" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">对来自所考虑的子集的所有8610幅图像的审查产生每类4.16幅图像的平均正确分类(最多10幅)，所有类的平均标准偏差为3.74。下面的直方图显示了正确分类数量的巨大差异。NSFW滤波器产生的黑色图像是统计数据的一部分。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi np"><img src="../Images/44d7ba1f2ee3d9df4730fd0ca99cda95.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*k_PVp9127WZ5vhUByraJUg.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">作者图片</p></figure><p id="16ca" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">可以看出，虽然为大多数类别(73%)生成了至少一个正确识别的图像，但是所有10个图像仅在14%的类别中被识别。这也反映了文章开始时的观察，即一个类生成的图像差别很大。这使得分类过程的任务变得复杂。</p><p id="de93" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">现在让我们考虑一些物体组的识别率。在Wordnet的层次结构下，总结了一些术语组的相关类别，并确定了每个类别的平均识别率。下表显示了结果。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nq"><img src="../Images/a2870db406d0d5283a42b697b6222b7d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*pPC2l2IcY38KrogjU_QYBw.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">不同物体类别的识别率</p></figure><p id="98ed" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">引人注目的是对建筑物的良好识别率。下图显示了“温室”的图像，所有10个图像都被正确识别。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/6e03d8257846223c2f03b67c59feee4f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*lVvV1WGNNyGShY89rh6sLA.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">“温室”——作者创造的稳定扩散的意象</p></figure><p id="b93c" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">“动物”类显示出低于平均水平的分类率。如果我们更仔细地观察这个组，我们会发现在162个动物类别中，没有一个图像是完全不被识别的。看看个体特定的例子，如下面的例子中的术语“黑脚雪貂”和“叶蝉”，“稳定扩散”显然揭示了动物科学中的重大缺陷。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nr"><img src="../Images/314a6e48dbcf8c85fb3a3407c2917bc6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jfBY6fPoZTdh1oFwUdcHWw.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">“黑脚雪貂”——作者创造的稳定扩散的形象</p></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ns"><img src="../Images/19582c864ba23fa3169bb660356943bf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*a4IWqqSHK88nrL_jhzE0tw.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">“叶蝉”——作者塑造的稳定扩散的形象</p></figure><p id="053c" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">创建术语“地图”,显示由<br/>稳定扩散生成的哪些图像被视觉转换器模型正确识别，以及每种情况下的识别率有多高，我们根据语义在2D中放置术语，并根据子组对其进行着色。圆圈的大小表示正确分类的图像的数量。为了确定在这个地图上的位置，我们使用<a class="ae lr" rel="noopener" target="_blank" href="/introduction-to-word-embedding-and-word2vec-652d0c2060fa">单词嵌入</a>作为类名。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nt"><img src="../Images/61c810b247b4bf9288064bf5c687cbc6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*RvbkhRVRy-DRusTfCMibww.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">分类率“地图”——作者图片</p></figure><p id="45c7" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">这里，许多没有被正确识别的动物种类的小红点也很明显。</p><h2 id="345f" class="ls lt iq bd lu lv lw dn lx ly lz dp ma le mb mc md li me mf mg lm mh mi mj mk bi translated">类似项目</h2><p id="f9bc" class="pw-post-body-paragraph kv kw iq kx b ky ml jr la lb mm ju ld le mn lg lh li mo lk ll lm mp lo lp lq ij bi translated">一个提供对用稳定扩散生成的合成图像数据的访问的项目是“Lexica”。它是一个搜索引擎，从超过1000万张图片中返回一个术语的结果。但是，这里的整个数据库无法下载，也没有分类。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nu"><img src="../Images/a83c25806308582e57039e0cac7e21ca.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4e9VRDfn0_ew9KjhI_HZNQ.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">lexica——作者截图</p></figure><p id="f36f" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">中提供并描述了一个包含200万幅图像的大型数据库，该数据库也可以下载并作为开放源代码使用</p><div class="my mz gp gr na nb"><a href="https://poloclub.github.io/diffusiondb/" rel="noopener  ugc nofollow" target="_blank"><div class="nc ab fo"><div class="nd ab ne cl cj nf"><h2 class="bd ir gy z fp ng fr fs nh fu fw ip bi translated">主页</h2><div class="ni l"><h3 class="bd b gy z fp ng fr fs nh fu fw dk translated">扩散数据库是第一个大规模的文本到图像的提示数据集。它包含由Stable生成的200万张图像…</h3></div><div class="nv l"><p class="bd b dl z fp ng fr fs nh fu fw dk translated">poloclub.github.io</p></div></div><div class="nj l"><div class="nw l nl nm nn nj no kp nb"/></div></div></a></div><p id="c292" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">除了图像，“扩散数据库”数据集还包含用于生成每个图像的文本提示。作者通过抓取Stable Diffusion的Discord服务器并提取包括提示在内的图像来创建数据集合。</p></div></div>    
</body>
</html>