<html>
<head>
<title>Modelling New York City Bicycle Volumes Using Generalised Linear Models</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用广义线性模型模拟纽约市自行车数量</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/modelling-new-york-city-bicycle-volumes-using-generalised-linear-models-7b5cc71d8432#2022-07-28">https://towardsdatascience.com/modelling-new-york-city-bicycle-volumes-using-generalised-linear-models-7b5cc71d8432#2022-07-28</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="8330" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">在Python中拟合广义线性模型的简单项目演练</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/82943c9ea73508d223b10b8dc60ff315.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*KVGh31R1-AyWbMNW"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">照片由<a class="ae ky" href="https://unsplash.com/@invisi?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">福原广茂</a>在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</p></figure><h1 id="5c57" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">介绍</h1><p id="48d0" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">尽管我写过几篇关于这个主题的文章，也在保险行业工作过，但实际上我从未从头开始拟合过一个<a class="ae ky" href="https://en.wikipedia.org/wiki/Generalized_linear_model" rel="noopener ugc nofollow" target="_blank"><strong class="lt iu">【GLM】</strong></a>广义线性模型。</p><p id="40b0" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">我知道很震惊。</p><p id="fdb3" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">所以，我决定展开我的翅膀，开展一个小项目，在那里我可以把我所有的理论知识付诸实践！</p><p id="1a86" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">在本文中，我想带您完成一个简单的项目，使用GLMs对纽约市的自行车穿越量进行建模。我们还将简要介绍GLMs背后的主要技术细节以及使用它们的动机。</p><blockquote class="ms mt mu"><p id="1a63" class="lr ls mv lt b lu mn ju lw lx mo jx lz mw mp mc md mx mq mg mh my mr mk ml mm im bi translated">本项目使用的数据来自纽约市交通部门，可通过CC0许可在Kaggle上的<a class="ae ky" href="https://www.kaggle.com/datasets/new-york-city/nyc-east-river-bicycle-crossings" rel="noopener ugc nofollow" target="_blank"> <strong class="lt iu">此处</strong> </a>获得。Kaggle实际上从纽约开放数据中获得了这个数据集，你可以在这里找到<a class="ae ky" href="https://data.cityofnewyork.us/Transportation/Bicycle-Counts-for-East-River-Bridges-Historical-/gua4-p9wg" rel="noopener ugc nofollow" target="_blank"/>。</p></blockquote><h1 id="eb63" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">广义线性模型概述</h1><p id="e5f9" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">为了完整起见，我将在本文中讨论GLMs背后的主要概念。然而，为了更深入地理解，我强烈建议您查看我以前的文章，这些文章真正深入了它们的技术细节:</p><div class="mz na gp gr nb nc"><a rel="noopener follow" target="_blank" href="/poisson-regression-and-generalised-linear-models-606fe5f7c1fd"><div class="nd ab fo"><div class="ne ab nf cl cj ng"><h2 class="bd iu gy z fp nh fr fs ni fu fw is bi translated">泊松回归和广义线性模型</h2><div class="nj l"><h3 class="bd b gy z fp nh fr fs ni fu fw dk translated">泊松回归和广义线性模型的理论介绍</h3></div><div class="nk l"><p class="bd b dl z fp nh fr fs ni fu fw dk translated">towardsdatascience.com</p></div></div><div class="nl l"><div class="nm l nn no np nl nq ks nc"/></div></div></a></div><div class="mz na gp gr nb nc"><a rel="noopener follow" target="_blank" href="/the-essence-of-logistic-regression-e9188625cb7d"><div class="nd ab fo"><div class="ne ab nf cl cj ng"><h2 class="bd iu gy z fp nh fr fs ni fu fw is bi translated">逻辑回归的本质</h2><div class="nj l"><h3 class="bd b gy z fp nh fr fs ni fu fw dk translated">用广义线性模型解释逻辑回归的起源</h3></div><div class="nk l"><p class="bd b dl z fp nh fr fs ni fu fw dk translated">towardsdatascience.com</p></div></div><div class="nl l"><div class="nr l nn no np nl nq ks nc"/></div></div></a></div><h2 id="d0dc" class="ns la it bd lb nt nu dn lf nv nw dp lj ma nx ny ll me nz oa ln mi ob oc lp od bi translated">动机</h2><p id="1942" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated"><a class="ae ky" href="https://en.wikipedia.org/wiki/Generalized_linear_model" rel="noopener ugc nofollow" target="_blank"> <strong class="lt iu">广义线性模型</strong> </a>字面上的‘广义’<a class="ae ky" href="https://en.wikipedia.org/wiki/Linear_regression" rel="noopener ugc nofollow" target="_blank"><strong class="lt iu">线性回归</strong> </a>到一个目标变量即<strong class="lt iu">非正态</strong>。</p><p id="9ccb" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">例如，这里我们将模拟纽约市的自行车交通流量。如果我们要将此建模为一个线性回归问题，我们将假设针对我们的特征的自行车数量将遵循一个<a class="ae ky" href="https://en.wikipedia.org/wiki/Normal_distribution" rel="noopener ugc nofollow" target="_blank"> <strong class="lt iu">正态分布</strong> </a>。</p><p id="8518" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">这有两个问题:</p><ul class=""><li id="b011" class="oe of it lt b lu mn lx mo ma og me oh mi oi mm oj ok ol om bi translated">正态分布是<strong class="lt iu">连续</strong>，而单车计数是<strong class="lt iu">离散</strong>。</li><li id="ad49" class="oe of it lt b lu on lx oo ma op me oq mi or mm oj ok ol om bi translated">正态分布可以是<strong class="lt iu">负</strong>，但是单车计数是<strong class="lt iu">正</strong>。</li></ul><p id="d925" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">因此，我们使用GLMs来克服这些问题和常规线性回归的局限性。</p><h2 id="790f" class="ns la it bd lb nt nu dn lf nv nw dp lj ma nx ny ll me nz oa ln mi ob oc lp od bi translated">数学</h2><p id="d768" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">线性回归的一般公式是:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi os"><img src="../Images/354780029d665a205fc141fad48c9147.png" data-original-src="https://miro.medium.com/v2/resize:fit:954/format:webp/1*BldKkUU2rQkEH7KWJFcNNw.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者在LaTeX中生成的方程。</p></figure><p id="be59" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">其中<strong class="lt iu"> <em class="mv"> X </em> </strong>为<strong class="lt iu">特征</strong>，<strong class="lt iu"> <em class="mv"> β </em> </strong>为<strong class="lt iu">系数</strong>其中<strong class="lt iu"> <em class="mv"> β_0 </em> </strong>为<strong class="lt iu">截距</strong>，<em class="mv">【Y | X】</em>为<a class="ae ky" href="https://en.wikipedia.org/wiki/Expected_value" rel="noopener ugc nofollow" target="_blank"> <strong class="lt iu">期望值</strong> </a>(平均值)</p><p id="eadc" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">为了将这个线性回归公式转换为包含非正态分布，我们附加了一个叫做<a class="ae ky" href="https://www.statisticshowto.com/link-function/" rel="noopener ugc nofollow" target="_blank"> <strong class="lt iu">的链接函数</strong> </a>，<strong class="lt iu"> <em class="mv"> g() </em> </strong>:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ot"><img src="../Images/9a91b573294e55fbc89f5e7db1c1e44f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1096/format:webp/1*9yq5D2FbL3ZTO8MlBLZVpw.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者在LaTeX中生成的方程。</p></figure><p id="0925" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">链接功能字面上的'<strong class="lt iu">链接</strong>'您的线性组合输入到您想要的目标分布。</p><p id="cd89" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">对于每个分布，可以通过经验或数学方法找到关联函数。在我上面链接的文章中，我为一些发行版推导了链接函数。</p><p id="0ce9" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">并不是所有的分销都在GLM的保护伞下。这些分布必须是<a class="ae ky" href="https://en.wikipedia.org/wiki/Exponential_family" rel="noopener ugc nofollow" target="_blank"> <strong class="lt iu">指数族</strong> </a>的一部分。但是，你常见的分布大多:<a class="ae ky" href="https://en.wikipedia.org/wiki/Gamma_distribution" rel="noopener ugc nofollow" target="_blank"> <strong class="lt iu">【伽马】</strong></a><a class="ae ky" href="https://en.wikipedia.org/wiki/Poisson_distribution" rel="noopener ugc nofollow" target="_blank"><strong class="lt iu">泊松</strong></a><a class="ae ky" href="https://en.wikipedia.org/wiki/Binomial_distribution" rel="noopener ugc nofollow" target="_blank"><strong class="lt iu">二项式</strong></a><a class="ae ky" href="https://en.wikipedia.org/wiki/Bernoulli_distribution" rel="noopener ugc nofollow" target="_blank"><strong class="lt iu">伯努利</strong> </a>都是这个家族的一部分。</p><blockquote class="ms mt mu"><p id="2b3f" class="lr ls mv lt b lu mn ju lw lx mo jx lz mw mp mc md mx mq mg mh my mr mk ml mm im bi translated">对于正态分布(线性回归)的链接函数称为<a class="ae ky" href="https://www.statisticshowto.com/link-function/" rel="noopener ugc nofollow" target="_blank"> <strong class="lt iu">恒等式</strong> </a> <strong class="lt iu">。</strong></p></blockquote><h2 id="ad09" class="ns la it bd lb nt nu dn lf nv nw dp lj ma nx ny ll me nz oa ln mi ob oc lp od bi translated">泊松回归</h2><p id="81e3" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">为了模拟我们的自行车数量，我们将使用<strong class="lt iu"> </strong> <a class="ae ky" href="https://en.wikipedia.org/wiki/Poisson_distribution" rel="noopener ugc nofollow" target="_blank"> <strong class="lt iu">泊松分布</strong> </a>。这种分布描述了在给定时间范围内一定数量的事件以平均发生率发生的概率。</p><blockquote class="ms mt mu"><p id="985d" class="lr ls mv lt b lu mn ju lw lx mo jx lz mw mp mc md mx mq mg mh my mr mk ml mm im bi translated">要了解更多关于泊松分布的知识，请点击这里查看我的文章<a class="ae ky" rel="noopener" target="_blank" href="/poisson-regression-and-generalised-linear-models-606fe5f7c1fd">。</a></p></blockquote><p id="9817" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">对于泊松回归，链接函数是<a class="ae ky" href="https://en.wikipedia.org/wiki/Natural_logarithm" rel="noopener ugc nofollow" target="_blank"> <strong class="lt iu">自然对数</strong> </a>:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ou"><img src="../Images/f932015658de1aba795c69cb118ade47.png" data-original-src="https://miro.medium.com/v2/resize:fit:750/format:webp/1*zmLvfbtnSXmtV8JdFIa82Q.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者在LaTeX中生成的方程。</p></figure><p id="04c7" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">正如你所看到的，我们的输出现在总是正的，因为我们使用的是指数。这意味着我们将避免任何可能的无意义的结果，不像如果我们使用线性回归，输出可能是负的。</p><p id="7e87" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">同样，我还没有对GLMs进行全面彻底的分析，因为这将是详尽的，而且我以前已经讨论过这些主题。如果你有兴趣了解更多关于GLMs的知识，请务必查看我在上面链接的文章或我提供的任何超链接！</p><h1 id="627a" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">建模演练</h1><h2 id="1e5c" class="ns la it bd lb nt nu dn lf nv nw dp lj ma nx ny ll me nz oa ln mi ob oc lp od bi translated">包装</h2><p id="1188" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">我们将首先下载基础数据科学包，以及用于GLM建模的<a class="ae ky" href="https://www.statsmodels.org/stable/index.html" rel="noopener ugc nofollow" target="_blank"> statsmodels </a>包。</p><pre class="kj kk kl km gt ov ow ox oy aw oz bi"><span id="b7b2" class="ns la it ow b gy pa pb l pc pd">import pandas as pd<br/>import matplotlib.pyplot as plt<br/>import numpy as np<br/>import seaborn as sns<br/>import statsmodels.api as sm<br/>from statsmodels.formula.api import glm</span></pre><h2 id="1419" class="ns la it bd lb nt nu dn lf nv nw dp lj ma nx ny ll me nz oa ln mi ob oc lp od bi translated">数据</h2><p id="ea65" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">读入并打印数据:</p><pre class="kj kk kl km gt ov ow ox oy aw oz bi"><span id="581a" class="ns la it ow b gy pa pb l pc pd">data = pd.read_csv('nyc-east-river-bicycle-counts.csv')<br/>data.head()</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pe"><img src="../Images/e3d3f51ae724fa37c0079a9d0eccaea6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ypUg3zL9HPMoU53cQkOpcA.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">图片来自作者。</p></figure><p id="439c" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">这里我们有四座桥上的自行车数量:布鲁克林、曼哈顿、威廉斯堡和昆斯伯勒，它们的总和在“总”特征下。</p><p id="fa32" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">“日期”和索引有重复的列，所以我们来清理一下:</p><pre class="kj kk kl km gt ov ow ox oy aw oz bi"><span id="b4ac" class="ns la it ow b gy pa pb l pc pd">data.drop(['Unnamed: 0', 'Day'], axis=1, inplace=True)<br/>data.head()</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pf"><img src="../Images/bb68e4df7103fd21106e6fdf202b54d9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*X8DDf_NOIkZKYwUaHD5pvw.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">图片来自作者。</p></figure><p id="8f6a" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">注意温度有两列:高和低。取它们的平均值，使其成为一列:</p><pre class="kj kk kl km gt ov ow ox oy aw oz bi"><span id="020b" class="ns la it ow b gy pa pb l pc pd">data['Mean_Temp'] = (data['High Temp (°F)'] + data['Low Temp (°F)'])/2<br/>data.head()</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pg"><img src="../Images/d8eb4761615be4af1cd3fe01ed392561.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*lHk9JTlAGBkzFFeSlF0dBQ.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">图片来自作者。</p></figure><p id="7ee0" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">降水列包含一些字符串，所以让我们删除它们:</p><pre class="kj kk kl km gt ov ow ox oy aw oz bi"><span id="eb11" class="ns la it ow b gy pa pb l pc pd">data['Precipitation'].replace(to_replace='0.47 (S)', value=0.47, inplace=True)<br/>data['Precipitation'].replace(to_replace='T', value=0, inplace=True)<br/>data['Precipitation'] = data['Precipitation'].astype(np.float16)<br/>data.head()</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ph"><img src="../Images/3e26edd8b6f43bdef28007a05ca9f9f9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0qjQfNRlpiiFKyFoa4kKbg.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">图片来自作者。</p></figure><h2 id="76b5" class="ns la it bd lb nt nu dn lf nv nw dp lj ma nx ny ll me nz oa ln mi ob oc lp od bi translated">可视化</h2><p id="1861" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">影响自行车数量的两个主要独立变量是温度和降水量。我们可以将这两个变量与目标变量“Total”相对照:</p><pre class="kj kk kl km gt ov ow ox oy aw oz bi"><span id="864d" class="ns la it ow b gy pa pb l pc pd">fig = plt.figure(figsize=(22,7))<br/>ax = fig.add_subplot(121)<br/>ax.scatter(data['Mean_Temp'], data['Total'], linewidth=4, color='blue')<br/>ax.tick_params(axis="x", labelsize=22) <br/>ax.tick_params(axis="y", labelsize=22)<br/>ax.set_xlabel('Mean Temperature', fontsize=22)<br/>ax.set_ylabel('Total Bikes', fontsize=22)<br/>ax2 = fig.add_subplot(122)<br/>ax2.scatter(data['Precipitation'], data['Total'], linewidth=4, color='red')<br/>ax2.tick_params(axis="x", labelsize=22) <br/>ax2.tick_params(axis="y", labelsize=22)<br/>ax2.set_xlabel('Precipitation', fontsize=22)<br/>ax2.set_ylabel('Total Bikes', fontsize=22)</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pi"><img src="../Images/4da966646a5802f5a7965cb574fee226.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jKbGpzjGl_H8E-w1yHaxQw.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者用Python生成的图。</p></figure><h2 id="f223" class="ns la it bd lb nt nu dn lf nv nw dp lj ma nx ny ll me nz oa ln mi ob oc lp od bi translated">系统模型化</h2><p id="3c86" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">现在，我们可以通过statsmodel软件包使用平均温度功能构建一个模型来预测“总量”。由于这种关系是泊松关系，我们将使用自然对数链接函数:</p><pre class="kj kk kl km gt ov ow ox oy aw oz bi"><span id="ff85" class="ns la it ow b gy pa pb l pc pd">model = glm('Total ~ Mean_Temp', data = data[['Total','Mean_Temp']], family = sm.families.Poisson())<br/>results = model.fit()<br/>results.summary()</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pj"><img src="../Images/edc1cc0d5e107b59d1cd7ee392dd8fec.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*uyStWFjBjqAQVvCAqdekbQ.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">图片来自作者。</p></figure><blockquote class="ms mt mu"><p id="f021" class="lr ls mv lt b lu mn ju lw lx mo jx lz mw mp mc md mx mq mg mh my mr mk ml mm im bi translated">我们对GLM使用了<strong class="lt iu"> </strong> <a class="ae ky" href="https://www.statsmodels.org/devel/example_formulas.html" rel="noopener ugc nofollow" target="_blank"> <strong class="lt iu"> R-style公式</strong> </a>，因为这在后端提供了更好的性能。</p></blockquote><h2 id="e80f" class="ns la it bd lb nt nu dn lf nv nw dp lj ma nx ny ll me nz oa ln mi ob oc lp od bi translated">分析</h2><p id="ad24" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">从上面的输出中，我们看到平均温度的系数是<strong class="lt iu"> 0.0263 </strong>，截距是<strong class="lt iu"> 8.1461 </strong>。</p><p id="8f01" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">使用上面给出的泊松回归公式，我们的直线方程是:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi pk"><img src="../Images/a77cd44343a900f8fa64499ed566a217.png" data-original-src="https://miro.medium.com/v2/resize:fit:904/format:webp/1*0g5Kn98ftAJzsEdev08Hqg.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者在LaTeX中生成的方程。</p></figure><pre class="kj kk kl km gt ov ow ox oy aw oz bi"><span id="a9f8" class="ns la it ow b gy pa pb l pc pd">x = np.linspace(data['Mean_Temp'].min(),data['Mean_Temp'].max(),100)<br/>y = np.exp(x*results.params[1] + results.params[0])</span><span id="69c1" class="ns la it ow b gy pl pb l pc pd">plt.figure(figsize=(10,6))<br/>plt.scatter(data['Mean_Temp'], data['Total'], linewidth=3, color='blue')<br/>plt.plot(x, y, label = 'Poisson Regression', color='red', linewidth=3)<br/>plt.xticks(fontsize=18)<br/>plt.yticks(fontsize=18)<br/>plt.xlabel('Mean Temperature', fontsize=18)<br/>plt.ylabel('Total Count', fontsize=18 )<br/>plt.legend(fontsize=18)<br/>plt.show()</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pm"><img src="../Images/1858e333fbf8aed26517164c2cde0c0e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zWXTDEsk6mW17km9NvPLGA.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者用Python生成的图。</p></figure><p id="a737" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">找到了。我们已经安装了GLM！</p><blockquote class="ms mt mu"><p id="a8ec" class="lr ls mv lt b lu mn ju lw lx mo jx lz mw mp mc md mx mq mg mh my mr mk ml mm im bi translated">对于感兴趣的读者来说，statsmodels用来拟合GLM的算法称为<a class="ae ky" href="https://en.wikipedia.org/wiki/Iteratively_reweighted_least_squares" rel="noopener ugc nofollow" target="_blank"> <strong class="lt iu">迭代重加权最小二乘</strong> </a> <strong class="lt iu">。</strong></p></blockquote><p id="0d78" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">完整的代码/笔记本可以在我的GitHub上找到:</p><div class="mz na gp gr nb nc"><a href="https://github.com/egorhowell/Medium-Articles/blob/main/Modelling/GLM_Bike_Volume_NYC.ipynb" rel="noopener  ugc nofollow" target="_blank"><div class="nd ab fo"><div class="ne ab nf cl cj ng"><h2 class="bd iu gy z fp nh fr fs ni fu fw is bi translated">Medium-Articles/GLM _自行车_体积_纽约市. ipynb在主要埃戈罗韦尔/Medium-Articles</h2><div class="nj l"><h3 class="bd b gy z fp nh fr fs ni fu fw dk translated">我在我的媒体博客/文章中使用的代码。通过创建一个关于…的帐户，为egorhowell/Medium-Articles的开发做出贡献</h3></div><div class="nk l"><p class="bd b dl z fp nh fr fs ni fu fw dk translated">github.com</p></div></div><div class="nl l"><div class="pn l nn no np nl nq ks nc"/></div></div></a></div><h1 id="a8be" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">结论</h1><p id="2d92" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">在本文中，我们简短地讨论了线性回归的缺点，以及GLMs如何通过为回归模型提供更广泛的通用框架来解决这个问题。然后我们拟合一条基本的泊松回归线来模拟纽约市的自行车数量作为日平均温度的函数。</p><h1 id="42bb" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">和我联系！</h1><ul class=""><li id="ca40" class="oe of it lt b lu lv lx ly ma po me pp mi pq mm oj ok ol om bi translated">要在媒体上阅读无限的故事，请务必在此注册！  <em class="mv"> </em>💜</li><li id="9786" class="oe of it lt b lu on lx oo ma op me oq mi or mm oj ok ol om bi translated"><a class="ae ky" href="/subscribe/@egorhowell" rel="noopener ugc nofollow" target="_blank"> </a> <em class="mv"> </em>😀</li><li id="b8dc" class="oe of it lt b lu on lx oo ma op me oq mi or mm oj ok ol om bi translated"><a class="ae ky" href="https://www.linkedin.com/in/egor-howell-092a721b3/" rel="noopener ugc nofollow" target="_blank"> <em class="mv">【领英】</em> </a> <em class="mv"> </em>👔</li><li id="a7a0" class="oe of it lt b lu on lx oo ma op me oq mi or mm oj ok ol om bi translated"><a class="ae ky" href="https://twitter.com/EgorHowell" rel="noopener ugc nofollow" target="_blank"> <em class="mv">碎碎念</em> </a> <em class="mv"> </em> 🖊</li><li id="fb18" class="oe of it lt b lu on lx oo ma op me oq mi or mm oj ok ol om bi translated"><a class="ae ky" href="https://github.com/egorhowell" rel="noopener ugc nofollow" target="_blank"><em class="mv">github</em></a><em class="mv"/>🖥</li><li id="87b0" class="oe of it lt b lu on lx oo ma op me oq mi or mm oj ok ol om bi translated"><a class="ae ky" href="https://www.kaggle.com/egorphysics" rel="noopener ugc nofollow" target="_blank"><em class="mv"/></a><em class="mv"/>🏅</li></ul><blockquote class="ms mt mu"><p id="72f1" class="lr ls mv lt b lu mn ju lw lx mo jx lz mw mp mc md mx mq mg mh my mr mk ml mm im bi translated">(所有表情符号都是由<a class="ae ky" href="https://openmoji.org/" rel="noopener ugc nofollow" target="_blank"> OpenMoji </a>设计的——开源的表情符号和图标项目。许可证:<a class="ae ky" href="https://creativecommons.org/licenses/by-sa/4.0/#" rel="noopener ugc nofollow" target="_blank"> CC BY-SA 4.0 </a></p></blockquote></div></div>    
</body>
</html>