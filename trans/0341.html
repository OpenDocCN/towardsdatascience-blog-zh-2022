<html>
<head>
<title>How to Do Calculus using Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何用Python做微积分</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/how-to-differentiate-and-integrate-using-python-1dc9444c9278#2022-02-14">https://towardsdatascience.com/how-to-differentiate-and-integrate-using-python-1dc9444c9278#2022-02-14</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="9ed3" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">学习如何使用SymPy计算符号方程的导数和积分</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/0e4c753de88b738081ba6a418e8a3402.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*2xVE0cvswz3UtlOT"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">约书亚·阿拉贡在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure><p id="f416" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果你像我一样，准确地记住如何微分和积分方程可能是一个挑战。或者你有一个很长很复杂的方程，你必须积分。根据方程式的不同，手工操作可能需要10-15分钟。你不会想这么做的。让我们学习使用Python来为我们完成繁重的工作，而不是手工完成所有这些工作。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h2 id="208c" class="mc md it bd me mf mg dn mh mi mj dp mk li ml mm mn lm mo mp mq lq mr ms mt mu bi translated">导入SymPy库</h2><p id="3059" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">与大多数Python项目一样，为了成功运行代码，您需要导入适当的库和包。在本文中，我们将使用<em class="na"> SymPy </em>库。它拥有我们区分和整合所需的一切。该库还包含了其他有用的函数，我们将在后面看到。</p><pre class="kj kk kl km gt nb nc nd ne aw nf bi"><span id="8a7d" class="mc md it nc b gy ng nh l ni nj"># Importing Library<br/>import sympy</span></pre></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h2 id="7a6e" class="mc md it bd me mf mg dn mh mi mj dp mk li ml mm mn lm mo mp mq lq mr ms mt mu bi translated">定义符号</h2><p id="da22" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">现在我们已经导入了<em class="na"> SymPy </em>，我们可以用它来创建我们的符号，这些符号将用于创建方程。我们可以通过调用<em class="na">符号</em>类并使用一个字符串来定义符号来实现。我通常使用与我将要用来操作符号的Python变量相同的字符串。</p><pre class="kj kk kl km gt nb nc nd ne aw nf bi"><span id="41bf" class="mc md it nc b gy ng nh l ni nj"># Defining Symbols<br/>x = sympy.Symbol("x")<br/>y = sympy.Symbol("y")</span></pre></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h2 id="d5d2" class="mc md it bd me mf mg dn mh mi mj dp mk li ml mm mn lm mo mp mq lq mr ms mt mu bi translated">创建方程式</h2><p id="8797" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">让我们用刚刚定义的符号创建一个等式。我们可以创建以下等式:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nk"><img src="../Images/460d824d9c4223f7075c2e210e61cbd8.png" data-original-src="https://miro.medium.com/v2/resize:fit:428/1*sHlIFOrIkXHdvvXyWkIp6A.gif"/></div></figure><p id="7707" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">下面是等效的代码:</p><pre class="kj kk kl km gt nb nc nd ne aw nf bi"><span id="7a7d" class="mc md it nc b gy ng nh l ni nj"># Creating Equation<br/>f = x * y + x ** 2 + sympy.sin(2 * y)</span></pre></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h2 id="14c6" class="mc md it bd me mf mg dn mh mi mj dp mk li ml mm mn lm mo mp mq lq mr ms mt mu bi translated">区别</h2><p id="3f5f" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">为了对等式进行微分，我们可以使用来自<em class="na"> SymPy </em>库的函数<em class="na"> diff </em>。你可能已经注意到，我们的方程有两个变量，<em class="na"> x </em>和<em class="na"> y </em>。这意味着我们可以区分这两个变量。<em class="na"> diff </em>函数允许我们选择想要用什么符号来微分，所以让我们对<em class="na"> x </em>求导。</p><pre class="kj kk kl km gt nb nc nd ne aw nf bi"><span id="d3a9" class="mc md it nc b gy ng nh l ni nj"># Differentiate wtr x<br/>df_dx = sympy.diff(f, x)<br/>print("The derivative of f(x,y) wrt x is: " + str(df_dx))</span></pre><p id="6261" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">输出:</p><pre class="kj kk kl km gt nb nc nd ne aw nf bi"><span id="a82c" class="mc md it nc b gy ng nh l ni nj">The derivative of f(x,y) wrt x is: 2*x + y</span></pre><p id="ea7b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这个结果符合我们对这个导数的预期。<em class="na"> diff </em>函数的另一个特点是采用高阶导数。为了做到这一点，我们包括我们的方程，我们的符号和我们的函数中的导数阶。作为一个例子，让我们对<em class="na"> y </em>取二阶导数并打印结果。</p><pre class="kj kk kl km gt nb nc nd ne aw nf bi"><span id="938e" class="mc md it nc b gy ng nh l ni nj"># Second Derivative wrt y<br/>d2f_dy2 = sympy.diff(f, y, 2)<br/>print("The 2nd derivative of f(x,y) wrt y is: " + str(d2f_dy2))</span></pre><p id="7d5c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">输出:</p><pre class="kj kk kl km gt nb nc nd ne aw nf bi"><span id="fe8c" class="mc md it nc b gy ng nh l ni nj">The 2nd derivative of f(x,y) wrt y is: -4*sin(2*y)</span></pre></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h2 id="b71c" class="mc md it bd me mf mg dn mh mi mj dp mk li ml mm mn lm mo mp mq lq mr ms mt mu bi translated">综合</h2><p id="14e0" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated"><em class="na"> SymPy </em>也有一个易于使用的符号整合功能。我们可以使用之前创建的相同等式，并针对<em class="na"> x </em>对其进行积分。代码和输出如下所示。</p><pre class="kj kk kl km gt nb nc nd ne aw nf bi"><span id="73b5" class="mc md it nc b gy ng nh l ni nj"># Integrate wrt x<br/>F = sympy.integrate(f, x)<br/>print("The integral of f(x,y) wrt x is: " + str(F))</span></pre><p id="46d5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">输出:</p><pre class="kj kk kl km gt nb nc nd ne aw nf bi"><span id="5a1f" class="mc md it nc b gy ng nh l ni nj">The integral of f(x,y) wrt x is: x**3/3 + x**2*y/2 + x*sin(2*y)</span></pre><p id="0182" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">同样，<em class="na"> integrate </em>函数返回我们期望的结果。我们也可以用<em class="na">积分</em>函数进行定积分。在下面的代码中，我们使用相对于<em class="na"> x </em>的边界<em class="na"> 0 </em>到<em class="na"> 2 </em>对原始方程进行积分。</p><pre class="kj kk kl km gt nb nc nd ne aw nf bi"><span id="8bdc" class="mc md it nc b gy ng nh l ni nj"># Definite Integral wrt x [0, 2]<br/>F = sympy.integrate(f, (x, 0, 2))<br/>print("The definite integral of f(x,y) wrt x with bounds [0, 2] is: " + str(F))</span></pre><p id="ffee" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">输出:</p><pre class="kj kk kl km gt nb nc nd ne aw nf bi"><span id="4faa" class="mc md it nc b gy ng nh l ni nj">The definite integral of f(x,y) wrt x with bounds [0, 2] is: 2*y + 2*sin(2*y) + 8/3</span></pre></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h2 id="89f9" class="mc md it bd me mf mg dn mh mi mj dp mk li ml mm mn lm mo mp mq lq mr ms mt mu bi translated">SymPy的其他有用函数</h2><p id="2f48" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">虽然本文的主要观点是区分和整合，但是SymPy<em class="na">还有其他很棒的内置函数可能会派上用场。这些可以与积分和微分一起使用，使你的输出更容易理解。我经常使用的两个功能是:</em></p><ul class=""><li id="a1bd" class="nl nm it lb b lc ld lf lg li nn lm no lq np lu nq nr ns nt bi translated"><em class="na">简化</em>是一个很棒的函数，可以用来把一个方程简化成更简单的形式。例如，我们可以简化以下等式:</li></ul><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nu"><img src="../Images/570783b8ebfc6521109e6a7ce55bbc1f.png" data-original-src="https://miro.medium.com/v2/resize:fit:386/1*9pAEPR2Q7vyokmQgn21LFQ.gif"/></div></figure><pre class="kj kk kl km gt nb nc nd ne aw nf bi"><span id="00b4" class="mc md it nc b gy ng nh l ni nj"># Simplifying Equations<br/>g = (x * sympy.tan(x) + x ** 2 * sympy.sin(x))/sympy.sin(x)<br/>g = sympy.simplify(g)<br/>print("The simplified form of g(x) is: " + str(g))</span></pre><p id="704b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">输出:</p><pre class="kj kk kl km gt nb nc nd ne aw nf bi"><span id="f5d6" class="mc md it nc b gy ng nh l ni nj">The simplified form of g(x) is: x*(x + 1/cos(x))</span></pre><ul class=""><li id="2a8f" class="nl nm it lb b lc ld lf lg li nn lm no lq np lu nq nr ns nt bi translated"><em class="na"> Solve </em>是另一个很棒的函数，可以用来解代数方程组。要使用<em class="na">求解</em>功能，我们需要调整方程组，使其中一边等于零。然后，我们可以使用如下图所示的<em class="na">求解</em>函数，得到<em class="na"> x </em>和<em class="na"> y </em>的答案。假设我们有以下一组等式:</li></ul><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nv"><img src="../Images/41a9a81fc7f7be7dba7855ad760f5c27.png" data-original-src="https://miro.medium.com/v2/resize:fit:186/1*PxByimzOjbx7uAIirkCKvA.gif"/></div></figure><pre class="kj kk kl km gt nb nc nd ne aw nf bi"><span id="ca9d" class="mc md it nc b gy ng nh l ni nj"># Solving System of Equations<br/>sol = sympy.solve((x + y - 3, 2 * x + 3 * y - 7), (x, y))<br/>print("The solution of the system is (x, y): (" + str(sol[x]) + ", " + str(sol[y]) + ")")</span></pre><p id="6323" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">输出:</p><pre class="kj kk kl km gt nb nc nd ne aw nf bi"><span id="2a5f" class="mc md it nc b gy ng nh l ni nj">The solution of the system is (x, y): (2, 1)</span></pre></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><p id="d11d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在，您可以使用Python进行整合和区分。这些函数可以用来双重检查你的工作或者作为一个快速的解决方案(当然是双重检查数学！).</p><p id="10ac" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">感谢您阅读文章！如果你有任何问题，请留言告诉我。如果你喜欢阅读，给我一个关注，看看我的其他Python和工程文章！</p></div></div>    
</body>
</html>