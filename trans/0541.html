<html>
<head>
<title>Mito: A JupyterLab Extension for easy data manipulation with no code</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">米托:JupyterLab 扩展，无需代码即可轻松操作数据</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/mito-a-jupiterlab-extension-for-easy-data-manipulation-with-no-code-57a54a34e65e#2022-02-21">https://towardsdatascience.com/mito-a-jupiterlab-extension-for-easy-data-manipulation-with-no-code-57a54a34e65e#2022-02-21</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="b3ff" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">操纵新冠肺炎疫苗数据的交互式软件包概述</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/8c748ec1077b7fdc105e67e37eea2b35.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*19pYCbSZJUkgHITH"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">Marc-Olivier Jodoin 在<a class="ae ky" href="https://unsplash.com/photos/NqOInJ-ttqM" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure><p id="f95f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果您在 Python 中处理过真实数据，您肯定会注意到数据操作和数据清理会占用您大部分时间，甚至高达 70%的时间。当我开始我的数据科学之旅时，我依赖 Pandas 上的这些类型的任务，Pandas 是一个强大而完整的库，可以处理您的数据集。</p><p id="c4fe" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">突然，我发现了米托，这是一个 JupiterLab 扩展，可以通过交互式电子表格自动化和加速数据工程，其中许多枯燥的操作都得到了简化，如导入数据集，应用过滤器，创建透视，删除重复项。</p><p id="4926" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这个工具的美妙之处在于你不需要写任何一行代码。您可以像在 excel 中一样手动执行操作，但不同的是，这些操作一旦被应用，就会被翻译成下面的 Python 代码。在这篇文章中，我将通过一个真实的例子——来自约翰·霍普金斯大学的新冠肺炎疫苗数据——来概述米托。</p><h1 id="f5e6" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">先决条件</h1><p id="5e54" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated"><a class="ae ky" href="https://docs.trymito.io/" rel="noopener ugc nofollow" target="_blank">米托</a>本质上是一个电子表格界面，只要你编辑和可视化数据集，它就会生成 Python。在安装米托之前，你需要检查你是否已经安装了<strong class="lb iu"> Python 3.6 </strong>或者更新的版本以及<strong class="lb iu"> JupiterLab 环境</strong>，因为米托是一个 JupiterLab 扩展。</p><p id="2823" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">一旦满足了这些先决条件，您就可以在浏览器上打开 JupiterLab 并创建一个新的终端，您可以在其中复制以下命令:</p><pre class="kj kk kl km gt ms mt mu mv aw mw bi"><span id="9278" class="mx lw it mt b gy my mz l na nb">python -m pip install mitoinstaller <br/>python -m mitoinstaller install</span></pre><p id="84fd" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在你必须重启内核之后，你就可以开始使用这个神奇的 Python 包了！为了确保米托运行良好，创建一个新的笔记本并复制这两行代码:</p><pre class="kj kk kl km gt ms mt mu mv aw mw bi"><span id="9316" class="mx lw it mt b gy my mz l na nb">import mitosheet<br/>mitosheet.sheet()</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nc"><img src="../Images/1a441089efb7edb5853ddbf7271dede5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0WXF69x2nMcLunPHaOa76w.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者插图</p></figure><p id="f9b5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">当您运行这些代码行时，您应该在注册后获得这样的输出。</p><h1 id="dbbc" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">米托概况</h1><p id="1095" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">让我们从导入两个数据集开始，<a class="ae ky" href="https://raw.githubusercontent.com/govex/COVID-19/master/data_tables/vaccine_data/global_data/time_series_covid19_vaccine_global.csv" rel="noopener ugc nofollow" target="_blank">time _ series _ covid 19 _ vaccine _ global . CSV</a>和<a class="ae ky" href="https://github.com/govex/COVID-19/blob/master/data_tables/world_pop_by_country.csv" rel="noopener ugc nofollow" target="_blank">world _ pop _ by _ country . CSV</a>，这两个数据集可在 GitHub 存储库中获得，GitHub 存储库由约翰·霍普金斯公民影响中心为冠状病毒资源中心(CRC)创建[1]。一旦加载了两个数据集，相应的 Python 代码就会神奇地出现:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nd"><img src="../Images/4247e0aa2354714f50eb3f51f40868b4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*UnxytEw0EEL02Ipw-PZ07A.gif"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者 GIF</p></figure><p id="91c4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">正如您可以在上面的输出中看到的，有一个菜单栏允许许多功能。最重要的行动是:</p><ul class=""><li id="74d9" class="ne nf it lb b lc ld lf lg li ng lm nh lq ni lu nj nk nl nm bi translated"><code class="fe nn no np mt b">import</code>从文件系统加载数据集</li><li id="234e" class="ne nf it lb b lc nq lf nr li ns lm nt lq nu lu nj nk nl nm bi translated"><code class="fe nn no np mt b">add/delete</code>列</li><li id="65ba" class="ne nf it lb b lc nq lf nr li ns lm nt lq nu lu nj nk nl nm bi translated"><code class="fe nn no np mt b">undo</code>到<strong class="lb iu">到</strong>删除最后编辑的数据集</li><li id="c2f3" class="ne nf it lb b lc nq lf nr li ns lm nt lq nu lu nj nk nl nm bi translated"><code class="fe nn no np mt b">pivot</code>哪一项对分组和汇总数据有用</li><li id="ed4f" class="ne nf it lb b lc nq lf nr li ns lm nt lq nu lu nj nk nl nm bi translated"><code class="fe nn no np mt b">merge</code>两张桌子</li><li id="47e3" class="ne nf it lb b lc nq lf nr li ns lm nt lq nu lu nj nk nl nm bi translated"><code class="fe nn no np mt b">dedup</code>删除表格内的重复项</li><li id="49d7" class="ne nf it lb b lc nq lf nr li ns lm nt lq nu lu nj nk nl nm bi translated"><code class="fe nn no np mt b">graph</code>生成绘图</li><li id="0c52" class="ne nf it lb b lc nq lf nr li ns lm nt lq nu lu nj nk nl nm bi translated"><code class="fe nn no np mt b">steps</code>可视化对数据集执行的操作的时序</li></ul><p id="82eb" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">稍后将显示的其他选项是位于右上角的<strong class="lb iu">搜索栏</strong>，在这里您可以查找其他功能，如米托的文档。此外，每一列都有一个<strong class="lb iu">过滤器图标</strong>，它允许改变类型、编辑格式、排序，当然还有过滤。</p><p id="693a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在这篇文章中，我将重点介绍以下操作:</p><ol class=""><li id="0d51" class="ne nf it lb b lc ld lf lg li ng lm nh lq ni lu nv nk nl nm bi translated"><strong class="lb iu">更改数据类型、排序和过滤</strong></li><li id="7428" class="ne nf it lb b lc nq lf nr li ns lm nt lq nu lu nv nk nl nm bi translated"><a class="ae ky" href="#d2a6" rel="noopener ugc nofollow"> <strong class="lb iu">添加和删除列</strong> </a></li><li id="2f82" class="ne nf it lb b lc nq lf nr li ns lm nt lq nu lu nv nk nl nm bi translated"><a class="ae ky" href="#d5d2" rel="noopener ugc nofollow"> <strong class="lb iu">合并表格</strong> </a></li><li id="e202" class="ne nf it lb b lc nq lf nr li ns lm nt lq nu lu nv nk nl nm bi translated"><a class="ae ky" href="#103b" rel="noopener ugc nofollow"> <strong class="lb iu">透视表</strong> </a></li><li id="b67e" class="ne nf it lb b lc nq lf nr li ns lm nt lq nu lu nv nk nl nm bi translated"><a class="ae ky" href="#a4df" rel="noopener ugc nofollow"> <strong class="lb iu">可视化剧情</strong> </a></li></ol></div><div class="ab cl nw nx hx ny" role="separator"><span class="nz bw bk oa ob oc"/><span class="nz bw bk oa ob oc"/><span class="nz bw bk oa ob"/></div><div class="im in io ip iq"><h1 id="e5fa" class="lv lw it bd lx ly od ma mb mc oe me mf jz of ka mh kc og kd mj kf oh kg ml mm bi translated">1.<strong class="ak">更改数据类型、排序和过滤</strong></h1><p id="e363" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">第一部分关注过滤器图标允许的三种操作。首先，我展示了一个最让我恶心的操作，那就是当我需要更改日期列的数据类型时。米托允许快速完成:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nd"><img src="../Images/052ae0f6961405130a715c91178f2222.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*T1I8ExbSNG-obExMfiErqw.gif"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者插图</p></figure><p id="3069" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">还可以通过按<strong class="lb iu">降序</strong>排列日期来查看最新结果。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oi"><img src="../Images/6b9b645a2ab492608597767e3fc85375.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*A21_Bg9pGADCRjyoyfkMOg.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者插图</p></figure><p id="453a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们还可以在 Country_Region 列上添加一些<strong class="lb iu">过滤器</strong>。很难同时分析很多国家，我更愿意关注一个较小的子集:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oi"><img src="../Images/44a884c7a21ef9776ab51f62d895f7b5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*g1mDNMJnLFmyApnG5msf4g.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者插图</p></figure><p id="bc8b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在所有这些操作之后，出现以下代码行:</p><pre class="kj kk kl km gt ms mt mu mv aw mw bi"><span id="4b9a" class="mx lw it mt b gy my mz l na nb"># Sorted Date in time_series_covid19_vaccine_global in descending order<br/>time_series_covid19_vaccine_global = time_series_covid19_vaccine_global.sort_values(by='Date', ascending=False, na_position='last')</span><span id="2b78" class="mx lw it mt b gy oj mz l na nb"># Changed Date from object to datetime<br/>import pandas as pd<br/>time_series_covid19_vaccine_global['Date'] = pd.to_datetime(time_series_covid19_vaccine_global['Date'], infer_datetime_format=True, errors='coerce')</span><span id="4c4f" class="mx lw it mt b gy oj mz l na nb"># Changed Date from datetime64[ns] to datetime<br/>time_series_covid19_vaccine_global['Date'] = time_series_covid19_vaccine_global['Date']</span><span id="b0d7" class="mx lw it mt b gy oj mz l na nb"># Sorted Date in time_series_covid19_vaccine_global in descending order<br/>time_series_covid19_vaccine_global = time_series_covid19_vaccine_global.sort_values(by='Date', ascending=False, na_position='last')</span><span id="1afd" class="mx lw it mt b gy oj mz l na nb"># Sorted Date in time_series_covid19_vaccine_global in descending order<br/>time_series_covid19_vaccine_global = time_series_covid19_vaccine_global.sort_values(by='Date', ascending=False, na_position='last')</span><span id="ef15" class="mx lw it mt b gy oj mz l na nb"># Filtered Country_Region in time_series_covid19_vaccine_global<br/>time_series_covid19_vaccine_global = time_series_covid19_vaccine_global[time_series_covid19_vaccine_global['Country_Region'].apply(lambda val: any(s in val for s in ['Italy', 'France', 'United Kingdom', 'Bulgaria', 'Romania', 'France', 'Germany']))]</span></pre><p id="6b0e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">用米托完成这些操作可以节省很多时间，你不觉得吗？注释沿着 Python 行出现也很好。</p><h1 id="d2a6" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">2.添加和删除列</h1><p id="adfc" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">另一个重要的操作是创建/删除列。删除字段非常简单:你只需要选择列，然后点击菜单栏上的“删除列”。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oi"><img src="../Images/b4e0b44f078bbc613a23c1dc8b8f4d6f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_sT_JsgA7bWlJu-cUZeWXg.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者插图</p></figure><p id="a71f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们还可以基于日期字段 Year 创建一个新列，这对于以后的深入了解很有用:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nd"><img src="../Images/78728124b8b3f6f1ab65f1f1776ec5c7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*0uyWRfYvpgLAyi_nRAY2Tg.gif"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者插图</p></figure><p id="82ca" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">另一个有用的列可以是月，它总是基于日期字段:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nd"><img src="../Images/9e28deb8eb91c670b692168bf3f0e830.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*MQiIpE5pbCmZDyoqxgplZg.gif"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者插图</p></figure><p id="28eb" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这两个操作是如此的直观，立竿见影。下面我展示了相应的 Python 代码:</p><pre class="kj kk kl km gt ms mt mu mv aw mw bi"><span id="ac64" class="mx lw it mt b gy my mz l na nb"># Added column new-column-1cwn to time_series_covid19_vaccine_global<br/>time_series_covid19_vaccine_global.insert(2, 'new-column-1cwn', 0)</span><span id="5b34" class="mx lw it mt b gy oj mz l na nb"># Renamed new-column-1cwn to Year in time_series_covid19_vaccine_global<br/>time_series_covid19_vaccine_global.rename(columns={'new-column-1cwn': 'Year'}, inplace=True)</span><span id="61ff" class="mx lw it mt b gy oj mz l na nb"># Set new-column-1cwn in time_series_covid19_vaccine_global to Year(Date)<br/>time_series_covid19_vaccine_global['Year'] = YEAR(time_series_covid19_vaccine_global['Date'])</span><span id="585f" class="mx lw it mt b gy oj mz l na nb"># Added column new-column-a24i to time_series_covid19_vaccine_global<br/>time_series_covid19_vaccine_global.insert(3, 'new-column-a24i', 0)</span><span id="05ea" class="mx lw it mt b gy oj mz l na nb"># Renamed new-column-a24i to Month in time_series_covid19_vaccine_global<br/>time_series_covid19_vaccine_global.rename(columns={'new-column-a24i': 'Month'}, inplace=True)</span><span id="fbfb" class="mx lw it mt b gy oj mz l na nb"># Set new-column-a24i in time_series_covid19_vaccine_global to MONTH(Date)<br/>time_series_covid19_vaccine_global['Month'] = MONTH(time_series_covid19_vaccine_global['Date'])</span></pre><p id="fa20" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们进入下一部分来合并表！</p><h1 id="d5d2" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">3.合并表格</h1><p id="5306" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">开始时，我还导入了 world_pop_by_country.csv。我们希望合并这两个表，以便更完整地了解新冠肺炎的全球情况。这个合并操作可以非常容易地完成:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oi"><img src="../Images/88ab4bf65fe1b9a7b0b953a5c7e8a2bc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vPi87FqIAd1g_S4UzxLuoQ.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者插图</p></figure><p id="9b84" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">该选项还提供了不同的方式来合并两个数据集，例如左连接和右连接。我们选择选项 lookup，它包括疫苗数据的所有行，并且只包括人口文件中匹配的行。关于国家的列被认为是一个键，允许合并两个表。现在，我们有了一个名为 df3 的新数据帧。下面是米托生成的代码:</p><pre class="kj kk kl km gt ms mt mu mv aw mw bi"><span id="1d69" class="mx lw it mt b gy my mz l na nb"># Merged time_series_covid19_vaccine_global and world_pop_by_country</span><span id="fb8a" class="mx lw it mt b gy oj mz l na nb">temp_df = world_pop_by_country.drop_duplicates(subset='Country Name') # Remove duplicates so lookup merge only returns first match</span><span id="ab47" class="mx lw it mt b gy oj mz l na nb">df3 = time_series_covid19_vaccine_global.merge(temp_df, left_on=['Country_Region'], right_on=['Country Name'], how='left', suffixes=['_time_series_covid19_vaccine_global', '_world_pop_by_country'])</span></pre><h1 id="103b" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">4.数据透视表</h1><p id="8e23" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">pivot 选项相当于 pandas 函数 groupby，这真的很烦人，因为它要花很多时间，而且不是很直观。另一方面，米托通过其电子表格避免了这种耗时的操作。例如，我们想知道每年、每月和每个国家完全接种疫苗的人数。让我们单击“PIVOT”选项，将会打开一个包含以下选项的窗口:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ok"><img src="../Images/c307aa5f7b20574c0b9d28c7af817c0a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8DydaJk8q-LwfVmRAtph1w.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者插图</p></figure><p id="383d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在，我们可以看到创建这个数据透视表后的相应代码:</p><pre class="kj kk kl km gt ms mt mu mv aw mw bi"><span id="e62f" class="mx lw it mt b gy my mz l na nb"># Pivoted df3 into df4<br/>unused_columns = df3.columns.difference(set(['Year', 'Month', 'Country_Region']).union(set([])).union(set({'People_fully_vaccinated'})))<br/>tmp_df = df3.drop(unused_columns, axis=1)<br/>pivot_table = tmp_df.pivot_table(<br/>    index=['Year', 'Month', 'Country_Region'],<br/>    values=['People_fully_vaccinated'],<br/>    aggfunc={'People_fully_vaccinated': ['max']}<br/>)<br/>pivot_table.columns = [flatten_column_header(col) for col in pivot_table.columns.values]<br/>df3_pivot = pivot_table.reset_index()</span></pre><p id="1318" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">要配置数据透视表，需要做一些选择。选项、<strong class="lb iu">行</strong>和<strong class="lb iu">列</strong>都指定了用于分组和聚合数据的变量，<strong class="lb iu">值</strong>部分允许决定如何聚合特定的列。为了让您更好地理解，让我们尝试使用列部分，而不是行:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ol"><img src="../Images/71fe450e033f9df394a2c05321859253.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FCayCIWkBSAYGYbh31_Elg.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者插图</p></figure><p id="db55" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这一次，每个国家完全接种疫苗的人数显示在每一栏中。但是通常最好是将接种疫苗的人数放在不同的栏目中。因此，我将把 Country_region 列放在 Rows 部分。我们还添加了人口一栏，以便更全面地了解情况:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi om"><img src="../Images/ecb3ad1d2f0f6e27f4580c2b474d8314.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*YQEb0JMSbLsWSBqnAwBJ-w.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者插图</p></figure><p id="0f58" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">生成的相应 Python 代码如下所示:</p><pre class="kj kk kl km gt ms mt mu mv aw mw bi"><span id="ca80" class="mx lw it mt b gy my mz l na nb"># Pivoted df3 into df4<br/>unused_columns = df3.columns.difference(set(['Country_Region']).union(set([])).union(set({'People_fully_vaccinated', 'Population'})))<br/>tmp_df = df3.drop(unused_columns, axis=1)<br/>pivot_table = tmp_df.pivot_table(<br/>    index=['Country_Region'],<br/>    values=['Population', 'People_fully_vaccinated'],<br/>    aggfunc={'Population': ['max'], 'People_fully_vaccinated': ['max']}<br/>)<br/>pivot_table.columns = [flatten_column_header(col) for col in pivot_table.columns.values]<br/>df3_pivot = pivot_table.reset_index()</span></pre><p id="64e7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">瞧啊！现在，我们不费吹灰之力就获得了这些统计数据！</p><h1 id="a4df" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">5.可视化绘图</h1><p id="20ad" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">最后，我们显示一些基本的图表来深入了解我们的数据，这些数据是上一次透视操作的结果。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oi"><img src="../Images/31614d1a35cb0422db45cd4798308bc5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*OPs03be-qnpRugTvJvopSQ.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者插图</p></figure><p id="9906" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在这种情况下，米托不会为下面的图形生成任何代码。无论如何，它允许通过右下角的“复制图形代码”按钮来复制 Python 代码。</p><p id="ffc9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">从该图中，我们可以注意到，该国人口需要对该国总人口中有多少人接种了疫苗有一个完整的了解。否则，我们可能会得出棘手的结论。值得注意的是，生活在法国、德国、意大利和英国的大多数人完成了前两剂疫苗接种，而在保加利亚和罗马尼亚，不到 50%的人口完全接种了疫苗。</p></div><div class="ab cl nw nx hx ny" role="separator"><span class="nz bw bk oa ob oc"/><span class="nz bw bk oa ob oc"/><span class="nz bw bk oa ob"/></div><div class="im in io ip iq"><h2 id="27c7" class="mx lw it bd lx on oo dn mb op oq dp mf li or os mh lm ot ou mj lq ov ow ml ox bi translated">最终想法:</h2><p id="2b2f" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">我希望这个教程对你有用。选择新冠肺炎数据集是为了更好地了解米托如何有助于处理现实生活中的数据集，这些数据集在大多数情况下是不完整的，您需要添加新列来进行更详细的分析，如果可能的话，应用机器学习模型。感谢阅读。祝您愉快！</p><h2 id="7f77" class="mx lw it bd lx on oo dn mb op oq dp mf li or os mh lm ot ou mj lq ov ow ml ox bi translated">更多相关文章:</h2><div class="oy oz gp gr pa pb"><a href="https://betterprogramming.pub/how-to-deal-with-time-series-using-pandas-and-plotly-express-45b6848432df" rel="noopener  ugc nofollow" target="_blank"><div class="pc ab fo"><div class="pd ab pe cl cj pf"><h2 class="bd iu gy z fp pg fr fs ph fu fw is bi translated">如何使用 Pandas 和 Plotly Express 处理时间序列</h2><div class="pi l"><h3 class="bd b gy z fp pg fr fs ph fu fw dk translated">处理时间序列数据</h3></div><div class="pj l"><p class="bd b dl z fp pg fr fs ph fu fw dk translated">better 编程. pub</p></div></div><div class="pk l"><div class="pl l pm pn po pk pp ks pb"/></div></div></a></div><div class="oy oz gp gr pa pb"><a href="https://betterprogramming.pub/3-pandas-functions-to-group-and-aggregate-data-9763a32583bb" rel="noopener  ugc nofollow" target="_blank"><div class="pc ab fo"><div class="pd ab pe cl cj pf"><h2 class="bd iu gy z fp pg fr fs ph fu fw is bi translated">3 Pandas 功能用于分组和汇总数据</h2><div class="pi l"><h3 class="bd b gy z fp pg fr fs ph fu fw dk translated">导入数据并进行简单和多重聚合</h3></div><div class="pj l"><p class="bd b dl z fp pg fr fs ph fu fw dk translated">better 编程. pub</p></div></div><div class="pk l"><div class="pq l pm pn po pk pp ks pb"/></div></div></a></div><p id="1119" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">参考文献:</strong></p><p id="049b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">[1]https://github.com/CSSEGISandData/COVID-19<a class="ae ky" href="https://github.com/CSSEGISandData/COVID-19" rel="noopener ugc nofollow" target="_blank"/></p></div><div class="ab cl nw nx hx ny" role="separator"><span class="nz bw bk oa ob oc"/><span class="nz bw bk oa ob oc"/><span class="nz bw bk oa ob"/></div><div class="im in io ip iq"><p id="3563" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><em class="pr">免责声明:该数据集由约翰·霍普金斯大学代表其工程系统科学中心在知识共享署名 4.0 国际协议(CC BY 4.0)下授权。版权所有约翰·霍普金斯大学 2020 年</em></p></div><div class="ab cl nw nx hx ny" role="separator"><span class="nz bw bk oa ob oc"/><span class="nz bw bk oa ob oc"/><span class="nz bw bk oa ob"/></div><div class="im in io ip iq"><p id="e48e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">你喜欢我的文章吗？<a class="ae ky" href="https://eugenia-anello.medium.com/membership" rel="noopener"> <em class="pr">成为会员</em> </a> <em class="pr">每天无限获取数据科学新帖！这是一种间接的支持我的方式，不会给你带来任何额外的费用。如果您已经是会员，</em> <a class="ae ky" href="https://eugenia-anello.medium.com/subscribe" rel="noopener"> <em class="pr">订阅</em> </a> <em class="pr">每当我发布新的数据科学和 python 指南时，您都会收到电子邮件！</em></p></div></div>    
</body>
</html>