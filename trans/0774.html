<html>
<head>
<title>Visualizing Multidimensional Categorical Data using Plotly</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用 Plotly 可视化多维分类数据</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/visualizing-multidimensional-categorical-data-using-plotly-bfb521bc806f#2022-03-04">https://towardsdatascience.com/visualizing-multidimensional-categorical-data-using-plotly-bfb521bc806f#2022-03-04</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="f437" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">以著名的蘑菇数据集为例</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/9e640c6557a6593e9f22ee1ee6effc40.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*DtRtWRV3N5ikq3kolSu6-g.jpeg"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">有毒蘑菇与可食用蘑菇</p></figure></div><div class="ab cl kw kx hu ky" role="separator"><span class="kz bw bk la lb lc"/><span class="kz bw bk la lb lc"/><span class="kz bw bk la lb"/></div><div class="ij ik il im in"><p id="f346" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated"><strong class="lf ir">简介<br/> </strong>数据可视化是任何数据专家的关键技能，应用于从科学研究到工业应用的广泛领域。因此，毫不奇怪，这些年来，为了简化数据可视化的开发，出现了多种工具。在这篇文章中，我将展示几个例子，告诉你如何使用流行的<a class="ae kv" href="https://plotly.com/python/" rel="noopener ugc nofollow" target="_blank"> Plotly </a>库可视化分类数据。覆盖的是从一个到五个维度的图。此外，我将提供如何嵌入解释的例子。</p><p id="cc2a" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated"><strong class="lf ir">数据<br/> </strong>首先，我们从准备好数据开始。这篇文章的数据作为<a class="ae kv" href="https://archive.ics.uci.edu/ml/datasets/mushroom" rel="noopener ugc nofollow" target="_blank"> UCI 机器学习知识库</a>发布。数据集也可以从<a class="ae kv" href="https://www.kaggle.com/datasets/uciml/mushroom-classification" rel="noopener ugc nofollow" target="_blank"> Kaggle </a>竞赛网站下载。下载后，您可以使用以下代码来读取数据:</p><pre class="kg kh ki kj gt lz ma mb mc aw md bi"><span id="b2b5" class="me mf iq ma b gy mg mh l mi mj"># Replace this path with your file path<br/>file_path = r”.\Data\mushrooms.csv”</span><span id="1c4b" class="me mf iq ma b gy mk mh l mi mj"># read csv data from file into pandas dataframe<br/>df = pd.read_csv(file_path, na_values=”?”)</span><span id="ce9b" class="me mf iq ma b gy mk mh l mi mj">#rename columns<br/>df.rename(columns = {"class":"is-edible"}, inplace = True)<br/>df.columns = df.columns</span></pre><p id="325e" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">请注意，<code class="fe ml mm mn ma b">na_values</code>关键字参数是用一个<code class="fe ml mm mn ma b">? </code>字符串指定的。这样做是为了用<code class="fe ml mm mn ma b">NaN</code>值替换<code class="fe ml mm mn ma b">? </code>。此外，目标变量从<code class="fe ml mm mn ma b">class</code>更名为<code class="fe ml mm mn ma b">is_edible</code>。目的是使这个小数据集可读。类似地，代码被用来用人类可读的等价物替换默认值。在文章的最后，你可以找到一个 GitHub 链接来查看完整的代码。</p><p id="d113" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">让我们直观地检查数据:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi mo"><img src="../Images/5515293c5a76c029bb6d038b68cb9c66.png" data-original-src="https://miro.medium.com/v2/resize:fit:1386/format:webp/1*6nycsb-K2cC6SWxxx9BWAg.jpeg"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">蘑菇分类数据集— head</p></figure><p id="eea0" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated"><strong class="lf ir">一维图:饼图</strong> <br/>现在，让我们从一个简单的一维图开始。饼图是一个经典，因为它易于阅读和解释。因此，在任何分类数据分析中都不应遗漏它。虽然您可以使用 Plotly Express 绘制基本的饼图，但是更通用的 Plotly graph 对象(.go)库允许您轻松定制图表。这篇文章主要描述情节。去图表。<br/> <br/>将使用<code class="fe ml mm mn ma b">population</code>功能绘制饼图。首先，对<code class="fe ml mm mn ma b">population</code>执行一个<code class="fe ml mm mn ma b">group-by</code>，然后对每组中的项目(蘑菇)数量执行一个<code class="fe ml mm mn ma b">size </code>。然后，结果数据按人口名称的字母顺序排序。</p><pre class="kg kh ki kj gt lz ma mb mc aw md bi"><span id="36e3" class="me mf iq ma b gy mg mh l mi mj">## dataframe creation - for plotting</span><span id="6fc7" class="me mf iq ma b gy mk mh l mi mj"># create new pandas dataframe which contains all counts sorted by population<br/>population_df = (<br/>    df.groupby(["population"])<br/>    .size()<br/>    .reset_index(name="Counts")<br/>    .sort_values(by=["population"])<br/>)</span></pre><p id="d223" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">每个<code class="fe ml mm mn ma b">population </code>字符串的唯一出现次数被视为<code class="fe ml mm mn ma b">label</code>。分别将之前导出的<code class="fe ml mm mn ma b">Counts</code>作为<code class="fe ml mm mn ma b">values.<br/></code>注意，可以根据 rgb 标准指定几个自定义颜色。我建议使用<a class="ae kv" href="https://www.rapidtables.com/web/color/RGB_Color.html" rel="noopener ugc nofollow" target="_blank">快速表格</a>选择离散颜色。在该图表中，颜色存储在<code class="fe ml mm mn ma b">earth_colors.</code>中</p><p id="0c75" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">接下来，指定<code class="fe ml mm mn ma b">pull</code>关键字参数。图中的<code class="fe ml mm mn ma b">pull</code>表示每个扇区在图表中心的展开程度。拉动可以大大增强图表的可读性，尤其是如果你有很多扇区的话。但是请记住，如果一个特性的基数太高，图表将变得无法阅读。</p><pre class="kg kh ki kj gt lz ma mb mc aw md bi"><span id="6d1d" class="me mf iq ma b gy mg mh l mi mj">## Creating a pie chart</span><span id="8660" class="me mf iq ma b gy mk mh l mi mj"># create labels using all unique values in the column named "population"<br/>labels = population_df["population"].unique()</span><span id="2083" class="me mf iq ma b gy mk mh l mi mj"># group by count of the "population" column.<br/>values = population_df["Counts"]</span><span id="cb72" class="me mf iq ma b gy mk mh l mi mj"># Custom define a list of colors to be used for the pie chart.<br/># Note that the same number of colors are specified as there are unique populations. It is not mandatory, but<br/># will avoid a single color to be used multiple times.<br/>earth_colors = [<br/>    "rgb(210,180,140)",<br/>    "rgb(218,165,32)",<br/>    "rgb(139,69,19)",<br/>    "rgb(175, 51, 21)",<br/>    "rgb(35, 36, 21)",<br/>    "rgb(188,143,143)",<br/>]</span><span id="97bf" class="me mf iq ma b gy mk mh l mi mj"># defining the actual figure using the dimension: population<br/># Note that a pull keyword was specified to explode pie pieces out of the center<br/>fig = go.Figure(<br/>    data=[<br/>        go.Pie(<br/>            labels=labels,<br/>            values=values,<br/>            # pull is given as a fraction of the pie radius<br/>            pull=[0, 0, 0.07, 0.08, 0.02, 0.2],<br/>            # iterate through earth_colors list to color individual pie pieces<br/>            marker_colors=earth_colors,<br/>        )<br/>    ]<br/>)</span><span id="d8a9" class="me mf iq ma b gy mk mh l mi mj"># Update layout to show a title<br/>fig.update_layout(title_text="Mushroom Polulation")</span><span id="24fb" class="me mf iq ma b gy mk mh l mi mj"># display the figure<br/>fig.show()</span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi mp"><img src="../Images/eddb58d3ac91b8119970e5150831f4f8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0zGawMDcNMZZgpjGRaxH0w.jpeg"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">蘑菇数量饼图</p></figure><blockquote class="mq mr ms"><p id="e43a" class="ld le mt lf b lg lh jr li lj lk ju ll mu ln lo lp mv lr ls lt mw lv lw lx ly ij bi translated">蘑菇是根据它们栖息的种群来分类的。这个饼图的例子代表了蘑菇在每个群体中的比例。大多数蘑菇以几个为一组生活，而不到 15%的蘑菇以众多、丰富或成簇的形式生活。该数据集中包含的大约三分之一的蘑菇单独或分散出现。</p></blockquote><p id="e046" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated"><strong class="lf ir">二维图:饼图<br/> </strong>正如你可能猜到的，这个数据集经常被用来将蘑菇分为有毒或可食用。因此，好奇的头脑想知道属于任一种群的蘑菇的比例在食用蘑菇和有毒蘑菇之间是否不同？这可以通过使用两个饼状图支线剧情来实现，每个支线剧情对应于有毒或者可食用的职业。首先，需要准备好数据。如在前面的例子中，执行一个<code class="fe ml mm mn ma b">group by</code>加一个<code class="fe ml mm mn ma b">size</code>。之后，根据<code class="fe ml mm mn ma b">population </code>变量对结果进行排序。然而这一次，我们首先使用<code class="fe ml mm mn ma b">.loc </code>函数来过滤有毒或可食用的条目。结果是总结蘑菇数量的两个熊猫数据框。</p><pre class="kg kh ki kj gt lz ma mb mc aw md bi"><span id="f334" class="me mf iq ma b gy mg mh l mi mj">## dataframe creation - for plotting</span><span id="c012" class="me mf iq ma b gy mk mh l mi mj"># create new pandas dataframe which contains all counts filtered by 'is-edible' == "edible" and sorted by population<br/>edible_population_df = (<br/>    df.loc[df["is-edible"] == "edible"]<br/>    .groupby(["population"])<br/>    .size()<br/>    .reset_index(name="Counts")<br/>    .sort_values(by=["population"])<br/>)</span><span id="20ec" class="me mf iq ma b gy mk mh l mi mj"># create new pandas dataframe which contains all counts filtered by 'is-edible' == "poisonous" and sorted by population<br/>poisonous_population_df = (<br/>    df.loc[df["is-edible"] == "poisonous"]<br/>    .groupby(["population"])<br/>    .size()<br/>    .reset_index(name="Counts")<br/>    .sort_values(by=["population"])<br/>)</span><span id="732d" class="me mf iq ma b gy mk mh l mi mj"># get unique values from the just created pandas dataframes and store them in an array<br/>labels_edible_population = edible_population_df["population"].unique()<br/>labels_poisonous_population = poisonous_population_df["population"].unique()</span><span id="f96a" class="me mf iq ma b gy mk mh l mi mj"># get all the counts from the created pandas dataframes and store them in an array<br/>values_edible_population = edible_population_df["Counts"]<br/>values_poisonous_population = poisonous_population_df["Counts"]</span></pre><p id="6a16" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">然后将数据框传递给 Plotly 图形对象进行绘制。事实上，前两个支线剧情是使用提供的关键字<code class="fe ml mm mn ma b">rows, cols</code>和<code class="fe ml mm mn ma b">specs</code>创建和安排的。然后在变量<code class="fe ml mm mn ma b">earth_colors</code>下定义标记颜色。然后，使用<code class="fe ml mm mn ma b">add_trace</code>将数据传递给两个人物对象。同样，标签和值被指定，图表被给定名称，我们指示哪个图表将到达哪个位置。使用<code class="fe ml mm mn ma b">update_trace</code>,我们通过向用户显示悬停信息，让饼图变得更具交互性。最后，图布局被更新以显示图表标题和饼图描述。</p><pre class="kg kh ki kj gt lz ma mb mc aw md bi"><span id="995e" class="me mf iq ma b gy mg mh l mi mj">## Creating two pie charts</span><span id="ff7a" class="me mf iq ma b gy mk mh l mi mj"># Create subplots: use 'domain' type for Pie subplot<br/>fig = make_subplots(rows=1, cols=2, specs=[[{"type": "domain"}, {"type": "domain"}]])</span><span id="d255" class="me mf iq ma b gy mk mh l mi mj"># create an array of colors which will be custom colors to the plot<br/>earth_colors = [<br/>    "rgb(210,180,140)",<br/>    "rgb(218,165,32)",<br/>    "rgb(139,69,19)",<br/>    "rgb(175, 51, 21)",<br/>    "rgb(35, 36, 21)",<br/>    "rgb(188,143,143)",<br/>]</span><span id="927b" class="me mf iq ma b gy mk mh l mi mj"># crate traces to specify the various properties of the first pie chart subplot<br/>fig.add_trace(<br/>    go.Pie(<br/>        labels=labels_edible_population,<br/>        values=values_edible_population,<br/>        name="Edible Mushroom",<br/>        marker_colors=<!-- -->earth_colors<!-- -->,<br/>    ),<br/>    1,<br/>    1,<br/>)</span><span id="6ce0" class="me mf iq ma b gy mk mh l mi mj"># crate traces to specify the various properties of the second pie chart subplot<br/>fig.add_trace(<br/>    go.Pie(<br/>        labels=labels_poisonous_population,<br/>        values=values_poisonous_population,<br/>        name="Poisonous Mushroom",<br/>        marker_colors=<!-- -->earth_colors<!-- -->,<br/>    ),<br/>    1,<br/>    2,<br/>)</span><span id="e681" class="me mf iq ma b gy mk mh l mi mj"># Use `hole` to create a donut-like pie chart<br/>fig.update_traces(hole=0.4, hoverinfo="label+percent+name")</span><span id="7b76" class="me mf iq ma b gy mk mh l mi mj"># adapt layout of the chart for readability<br/>fig.update_layout(<br/>    title_text="Mushroom Population by Edibility",<br/>    # Add annotations in the center of the donut pies.<br/>    annotations=[<br/>        dict(text="Edible", x=0.18, y=0.5, font_size=17, showarrow=False),<br/>        dict(text="Poisonous", x=0.82, y=0.5, font_size=17, showarrow=False),<br/>    ],<br/>)<br/>fig.show()</span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi mx"><img src="../Images/fe54fa75ff7d4f0ddbb334b6f316bcd4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*aBnpvdhROZBW-sJM-XBkKw.jpeg"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">蘑菇群体由可食用馅饼</p></figure><blockquote class="mq mr ms"><p id="9023" class="ld le mt lf b lg lh jr li lj lk ju ll mu ln lo lp mv lr ls lt mw lv lw lx ly ij bi translated">的确，毒蘑菇和食用蘑菇的比例差别很大！首先映入眼帘的是，几乎四分之三的毒蘑菇生活在被描述为“众多”的种群中。另一方面，只有约 10%的食用菌被算作“众多”部门。此外，所有单独的蘑菇都是可食用的。总之，如果我们要设计一个分类算法，我们会知道“群体”确实是关于目标变量的一个重要特征。</p></blockquote><p id="9d26" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated"><strong class="lf ir">三维图:条形图<br/> </strong>在不降低清晰度的情况下，可以显示多少维度的分类数据？事实上，在使用条形图时，绘制三个类别仍然很简单。在一维条形图中，类别位于 x 轴，数字位于 y 轴。然而，为了增加更多的维度，可以使用着色和阴影。</p><p id="c4b8" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">在下面的柱状图中，蘑菇状特征<code class="fe ml mm mn ma b">cap-shape</code>绘制在 x 轴上。颜色由<code class="fe ml mm mn ma b">is-edible</code>给出，图案由<code class="fe ml mm mn ma b">gill-size</code>给出。如前所述，创建了一个. go。然后。go 图使用 Plotly express 直方图函数进行更新，我们将数据框传递给该函数，并指定各种关键字参数。请注意，除了<code class="fe ml mm mn ma b">colors </code>参数之外，还需要给出一个离散的颜色序列。此外，Plotly 允许直方图值的自动标准化。通过使用<code class="fe ml mm mn ma b">histnorm</code>或<code class="fe ml mm mn ma b">barnorm</code>实现标准化。你可以根据自己的需要选择。欲了解更多信息，您可以查看<a class="ae kv" href="https://plotly.github.io/plotly.py-docs/generated/plotly.express.histogram.html" rel="noopener ugc nofollow" target="_blank">此处</a>。</p><p id="7b90" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">在下一步中，更新布局以显示标题文本。<code class="fe ml mm mn ma b">tile</code>字典中的<code class="fe ml mm mn ma b">x</code>关键字参数不代表数据。相反，它允许用户指定一个值来使标题居中。同样，您可以查找所有可用的<a class="ae kv" href="https://plotly.com/python-api-reference/generated/plotly.graph_objects.Layout.html" rel="noopener ugc nofollow" target="_blank">选项</a>。</p><p id="3b86" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">最后但同样重要的是，用户可以通过指定<code class="fe ml mm mn ma b">yaxis_title</code>和<code class="fe ml mm mn ma b">xaxis_title</code>参数来手动指定所需的轴标题。最后，<code class="fe ml mm mn ma b">update_xaxes</code>参数被指定为类别按字母升序排序。</p><pre class="kg kh ki kj gt lz ma mb mc aw md bi"><span id="8939" class="me mf iq ma b gy mg mh l mi mj">## Creating bar chart</span><span id="4c5c" class="me mf iq ma b gy mk mh l mi mj"># define figure element<br/>fig = go.Figure()</span><span id="5cc5" class="me mf iq ma b gy mk mh l mi mj"># define histogram properties<br/>fig = (<br/>    px.histogram(<br/>        df,<br/>        x="cap-shape",<br/>        color="is-edible",<br/>        pattern_shape="gill-size",<br/>        color_discrete_sequence=[medimumvioletred, seagreen],<br/>        barmode="relative",<br/>        # barnorm = "percent",<br/>        # histnorm = "probability",<br/>        text_auto=True,<br/>        labels={"cap-shape": "Mushroom Cap-Shape &amp; Gill Size",},<br/>    )<br/>    .update_traces(hoverinfo="all")<br/>    .update_layout(<br/>        # update layout with titles<br/>        title={<br/>            "text": "Percent - Dataset: Cap Shape &amp; Gill Size - Edibility",<br/>            "x": 0.5,<br/>        },<br/>        yaxis_title="Absolute Counts",<br/>    )<br/>    .update_xaxes(categoryorder="category ascending")<br/>)</span><span id="2f91" class="me mf iq ma b gy mk mh l mi mj"># display the figure<br/>fig.show()</span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi my"><img src="../Images/afd8a93fbe913e387f80fe7c1ab72c62.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*pbCdOBpg--Zm7R8tjV2mIA.jpeg"/></div></div></figure><blockquote class="mq mr ms"><p id="5707" class="ld le mt lf b lg lh jr li lj lk ju ll mu ln lo lp mv lr ls lt mw lv lw lx ly ij bi translated">图中显示的是有毒和可食用蘑菇的绝对数量，按照菌盖形状和菌盖大小分类。大多数蘑菇的帽子(顶部)要么是凸的，要么是平的。凸形、扁形和钟形蘑菇既可以有毒，也可以食用。事实上，只有下沉的帽状蘑菇是有毒的，而下沉的帽状蘑菇是可以食用的。注意凹陷的和圆锥形的蘑菇出现的频率最低。凸而平的帽状蘑菇在有毒和可食用两类中都有窄而宽的鳃。</p></blockquote><p id="59d5" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated"><strong class="lf ir">四维图:旭日图</strong></p><p id="7db8" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">随着维数的增加，绘图变得更难解释和编程。旭日图可视化了从根到叶径向向外延伸的分层数据，根据数据集的不同，这是一个很好的选择。</p><p id="71ab" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">使用 Plotly express 创建的<a class="ae kv" href="https://plotly.com/python-api-reference/generated/plotly.express.sunburst.html" rel="noopener ugc nofollow" target="_blank">旭日图</a>如下所述。数据被传递给 sunburst 对象。然后指定一个路径。该路径对应于一个希望在旭日图中绘制的列的列表。这些列是按照人们希望它们被绘制的顺序传递的。例如，如果一个人希望 is-eatable 位于情节的中心，那么它应该首先被命名。</p><p id="b62c" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated"><code class="fe ml mm mn ma b">values</code>关键字用于使每个楔形区的大小与给定值成比例。在这个例子中，<code class="fe ml mm mn ma b">count</code>列被传递给<code class="fe ml mm mn ma b">values</code>。</p><pre class="kg kh ki kj gt lz ma mb mc aw md bi"><span id="495d" class="me mf iq ma b gy mg mh l mi mj">## dataframe creation - for plotting<br/>df_combinations = (<br/>    df.groupby(["is-edible", "population", "habitat", "bruises"])<br/>    .size()<br/>    .reset_index()<br/>    .rename(columns={0: "count"})<br/>)</span><span id="e2cb" class="me mf iq ma b gy mk mh l mi mj">## Creating sunburst chart</span><span id="c09b" class="me mf iq ma b gy mk mh l mi mj"># define figure element<br/>fig = px.sunburst(<br/>    df,<br/>    path=["is-edible", "bruises", "population", "habitat"],<br/>    title="Edibility Mushrooms - bruises, population &amp; habitat",<br/>    color="is-edible",<br/>    color_discrete_sequence=[medimumvioletred, seagreen],<br/>    height=800,<br/>)<br/># display the figure<br/>fig.show()</span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi mz"><img src="../Images/58dac05547f8feebeacf9e5498392fdf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*nRuZQi548DywJbZMn2HRHA.jpeg"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">旭日图</p></figure><blockquote class="mq mr ms"><p id="245d" class="ld le mt lf b lg lh jr li lj lk ju ll mu ln lo lp mv lr ls lt mw lv lw lx ly ij bi translated">该图显示了蘑菇的数量，按其特征从根节点到叶节点按比例分类。虽然有毒和可食用蘑菇的数量几乎相等，但人们可以看出有毒蘑菇被碰伤的频率要低得多。未受损伤的毒蘑菇成群生长在树林、树叶、草地或小路上。伤痕累累的毒蘑菇生活在分散的种群中，最好是在城市或长满草的栖息地。<br/>有伤痕的食用菌大多生活在独居或分散的种群中，最常见于林区。可食用的和未受损伤的蘑菇大多生活在分散和丰富的种群中，喜欢草和叶子的栖息地。总之，旭日图显示了蘑菇是如何根据不同的特征分组的。请注意，解释需要涵盖广泛的细节。</p></blockquote><p id="6d26" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated"><strong class="lf ir">五维图:平行坐标图</strong></p><p id="d84a" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">平行坐标图(parcats)是一个优雅的工具，可用于可视化多个分类变量。</p><p id="faf8" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">要生成绘图，首先将目标变量的值映射到整数。这样做是因为 parcats 函数不接受字符串对象。然后，根据想要使用的变量创建五维对象。除了先前创建的变量<code class="fe ml mm mn ma b">is-edible-int</code>被传递给<code class="fe ml mm mn ma b">color</code>之外，颜色被照常定义。最后，定义 figure 对象，传递维度变量并指定各种其他关键字参数，以增加图表的可读性。</p><pre class="kg kh ki kj gt lz ma mb mc aw md bi"><span id="1f52" class="me mf iq ma b gy mg mh l mi mj">## Creating parallel categores chart</span><span id="b3fb" class="me mf iq ma b gy mk mh l mi mj"># creation is edible integer<br/>df["is-edible-bool"] = df["is-edible"].map({"edible": 1, "poisonous": 0})</span><span id="ace5" class="me mf iq ma b gy mk mh l mi mj"># Create dimensions<br/># stalk-shape<br/>stalk_shape_dim = go.parcats.Dimension(<br/>    values=df["stalk-shape"], categoryorder="category ascending", label="Stalk-Shape"<br/>)<br/># stalk-root<br/>stalk_root_dim = go.parcats.Dimension(values=df["stalk-root"], label="Stalk-Root")<br/># stalk-surface-above-ring<br/>stalk_surface_above_ring_dim = go.parcats.Dimension(<br/>    values=df["stalk-surface-above-ring"], label="Stalk-Surface-above-Ring"<br/>)<br/># stalk-surface-below-ring<br/>stalk_surface_bellow_ring_dim = go.parcats.Dimension(<br/>    values=df["stalk-surface-below-ring"], label="Stalk-Surface-bellow-Ring"<br/>)</span><span id="f395" class="me mf iq ma b gy mk mh l mi mj"># is-edible<br/>edible_dim = go.parcats.Dimension(<br/>    values=df["is-edible"],<br/>    label="Is Edibile",<br/>    categoryarray=["edible", "poisonous"],<br/>    ticktext=["edible", "poisonous"],<br/>)</span><span id="1d89" class="me mf iq ma b gy mk mh l mi mj"># Create parcats trace<br/>color = df["is-edible-bool"]<br/>colorscale = [[0, medimumvioletred], [1, seagreen]]</span><span id="245e" class="me mf iq ma b gy mk mh l mi mj"># create figure object<br/>fig = go.Figure(<br/>    data=[<br/>        go.Parcats(<br/>            dimensions=[<br/>                stalk_shape_dim,<br/>                stalk_surface_above_ring_dim,<br/>                stalk_root_dim,<br/>                stalk_surface_bellow_ring_dim,<br/>                edible_dim,<br/>            ],<br/>            line={"color": color, "colorscale": colorscale},<br/>            hoveron="color",<br/>            hoverinfo="count + probability",<br/>            labelfont={"size": 18, "family": "Times"},<br/>            tickfont={"size": 16, "family": "Times"},<br/>            arrangement="freeform",<br/>        )<br/>    ]<br/>)</span><span id="32ca" class="me mf iq ma b gy mk mh l mi mj"># display the figure<br/>fig.show()</span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi na"><img src="../Images/25c3741e203ee323b87c5a1c0d8e4a77.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vVzuvt1M3lUaQl-ul-NtLw.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">平行坐标图</p></figure><blockquote class="mq mr ms"><p id="c90d" class="ld le mt lf b lg lh jr li lj lk ju ll mu ln lo lp mv lr ls lt mw lv lw lx ly ij bi translated">蘑菇通过它的柄状、环上柄面、柄根和环下柄面来区别于其他蘑菇。这些特征能解释蘑菇的可食用性吗？事实上，蘑菇柄的形状是变大还是变小似乎没有太大的区别。然而，“蘑菇圈”上方的表面提供了更多的信息。如果我们选择一种具有光滑或纤维状茎表面的蘑菇，人们会更加确信这种蘑菇是可食用的。蘑菇圈上方的光滑表面应该避免。“茎-根”应该是棒状或同等的。如果环下面的茎表面是光滑的，那么很有可能找到了可食用的蘑菇。<br/>这些特征的组合增加了区分有毒和可食用蘑菇的机会。</p></blockquote><p id="d66e" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">在高维空间中可视化分类数据是一个挑战。如果你对其他人如何解决绘制多维数据感兴趣，我可以推荐来自<a class="ae kv" rel="noopener" target="_blank" href="/the-art-of-effective-visualization-of-multi-dimensional-data-6c7202990c57">di panjan</a>(Matplotlib&amp;Seaborn)的“<a class="ae kv" rel="noopener" target="_blank" href="/the-art-of-effective-visualization-of-multi-dimensional-data-6c7202990c57">多维数据有效可视化的艺术</a>”文章。关于如何使用<a class="ae kv" href="https://plotly.com/graphing-libraries/" rel="noopener ugc nofollow" target="_blank"> plotly </a>图形的更多详细信息，我可以推荐这本<a class="ae kv" href="https://www.analyticsvidhya.com/blog/2021/10/interactive-plots-in-python-with-plotly-a-complete-guide/" rel="noopener ugc nofollow" target="_blank">指南</a>。</p><p id="25a9" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">希望你觉得这篇文章很有趣，并能学到一些新东西。重现剧情的代码可以在我的<a class="ae kv" href="https://github.com/DataBach-maker/Mushroom_Visuals" rel="noopener ugc nofollow" target="_blank"> GitHub Repo </a>上找到。<br/>注意，Plotly 是开源的，可以用于商业和私人目的。</p><p id="1fa5" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">我非常感谢 Evgeniy 为这篇文章提供了插图。如果你喜欢他的画，请在 Instagram 上关注他。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/cb8ba4874d9b52edca1f4020a43759aa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Ae8--bf50pmN5AwEZOQuGg.jpeg"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">Evgeniy 食用菌</p></figure><p id="14a1" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi nb translated">[1]Dua d .和 Graff c .(2019 年)。UCI 机器学习知识库[http://archive . ics . UCI . edu/ml]。加州欧文:加州大学信息与计算机科学学院。</p></div></div>    
</body>
</html>