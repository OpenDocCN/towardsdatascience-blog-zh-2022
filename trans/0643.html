<html>
<head>
<title>5 Simple Techniques to Write Your Code More Efficiently in Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用 Python 更高效地编写代码的 5 个简单技巧</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/5-simple-techniques-to-write-your-code-more-efficiently-in-python-f095bb2b1e15#2022-02-26">https://towardsdatascience.com/5-simple-techniques-to-write-your-code-more-efficiently-in-python-f095bb2b1e15#2022-02-26</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="0a1a" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">让你的代码更快，更容易阅读，更容易理解</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/4e8660f63d66f0b6235763dd0298f6c3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*eFlarMgCSRWHa7_Tztotxg.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">照片来自 Pexels，作者为<a class="ae ky" href="https://www.pexels.com/photo/hands-typing-on-a-laptop-keyboard-5474294/" rel="noopener ugc nofollow" target="_blank"> Cottonbro </a></p></figure><p id="6780" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Python 是一种强大的编程语言，它能让你用很少的代码做很多事情。</p><p id="a63c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然而，权力越大，责任越大。</p><p id="8dcd" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">为了编写高效和优化的代码，您需要避免不必要的代码使用，并使用适当的实践和技术使您的代码运行得更快。</p><p id="1772" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在本帖中，我们将讨论 5 种技术，它们将帮助你用 Python 编写更快、更高效的代码！</p><h1 id="f894" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">1.创建函数</h1><p id="07ec" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">函数是可以从程序中的任何地方调用的代码块。</p><p id="38c8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">函数通常用于执行重复性任务，如计算圆的面积或在屏幕上打印文本。创建它最简单的方法是使用 def 关键字，后跟它的名称和括号():</p><pre class="kj kk kl km gt ms mt mu mv aw mw bi"><span id="68ca" class="mx lw it mt b gy my mz l na nb">def square(x):<br/>   return x*x</span><span id="0ee8" class="mx lw it mt b gy nc mz l na nb">print(“The square of”, 25, “is”, square(25))</span></pre><p id="cc63" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这段代码将打印出来:25 的平方是 625。</p><p id="4178" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">函数是组织代码并使其更具可读性的好方法。您还可以使用它们向代码的用户隐藏实现细节。</p><p id="df6b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">不要一次又一次地编写相同的代码块，而是使用函数编写一次，然后从多个地方调用它。这将使你的代码更有效，更容易阅读和维护。</p></div><div class="ab cl nd ne hx nf" role="separator"><span class="ng bw bk nh ni nj"/><span class="ng bw bk nh ni nj"/><span class="ng bw bk nh ni"/></div><div class="im in io ip iq"><h1 id="ab9c" class="lv lw it bd lx ly nk ma mb mc nl me mf jz nm ka mh kc nn kd mj kf no kg ml mm bi translated">2.消除不必要的操作</h1><p id="ed1d" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">编写代码时，尽量消除任何不必要的操作。例如，如果你正在遍历一个项目列表，并且只需要第一个项目，就不要再遍历列表的其余部分了。</p><pre class="kj kk kl km gt ms mt mu mv aw mw bi"><span id="f9c7" class="mx lw it mt b gy my mz l na nb">list = [0, 0, 0]</span><span id="7e40" class="mx lw it mt b gy nc mz l na nb">for i in range(len(list)):<br/>    print(“The Squared value of”, i, “is”, list[i]*list[i])</span></pre><p id="22b5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这会打印出来:0 的平方值是 0。</p><p id="4ca8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在这个例子中，为了提高代码的效率，您可以使用 index()方法来获取序列中某个元素的位置，然后在找到该位置时通过中断循环来停止。</p><p id="65b0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这段代码效率更高，因为它做的工作更少。</p><pre class="kj kk kl km gt ms mt mu mv aw mw bi"><span id="d0fa" class="mx lw it mt b gy my mz l na nb">list = [0, 0, 0]</span><span id="afdb" class="mx lw it mt b gy nc mz l na nb">for i in range(len(list)):<br/> if list[i] == 0:<br/>     break<br/> print(“The Squared value of”, i, “is”, list[i]*list[i])</span></pre><p id="2428" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这段代码将打印出和以前一样的东西(0 的平方值是 0)，但不同的是它在更短的时间内得到相同的结果，因为它没有经过完整的循环，当我们得到我们需要的东西时它就停止了。</p><p id="7992" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">消除不必要操作的其他方法包括:</p><ul class=""><li id="bce5" class="np nq it lb b lc ld lf lg li nr lm ns lq nt lu nu nv nw nx bi translated">使用 continue 而不是 break 跳过循环中剩余的迭代</li><li id="4e9e" class="np nq it lb b lc ny lf nz li oa lm ob lq oc lu nu nv nw nx bi translated">尽可能重用变量(例如，不要每次都创建新的变量)</li><li id="a700" class="np nq it lb b lc ny lf nz li oa lm ob lq oc lu nu nv nw nx bi translated">对将多次使用的大型序列或迭代器使用生成器；这样可以节省内存，因为它一次只加载一个元素</li></ul></div><div class="ab cl nd ne hx nf" role="separator"><span class="ng bw bk nh ni nj"/><span class="ng bw bk nh ni nj"/><span class="ng bw bk nh ni"/></div><div class="im in io ip iq"><h1 id="aae0" class="lv lw it bd lx ly nk ma mb mc nl me mf jz nm ka mh kc nn kd mj kf no kg ml mm bi translated">3.使用对你有利的包装</h1><p id="a815" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">Python 附带了大量的包，您可以使用这些包来使您的代码更加动态和高效。</p><p id="d595" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">包是由其他 Python 开发者编写的函数、类和其他工具的集合。它们存储在名为 PyPI (Python 包索引)的存储库中，可以使用 pip 工具进行安装。</p><p id="dc3b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">包可以用来做任何事情，从解析 XML 文档到创建图形用户界面。通过运行以下命令，可以找到系统上安装的所有软件包的列表:</p><pre class="kj kk kl km gt ms mt mu mv aw mw bi"><span id="56ea" class="mx lw it mt b gy my mz l na nb">python -m pip freeze</span></pre><p id="0016" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这将打印出当前安装在您的系统上的所有软件包的列表，以及它们的版本号。您也可以使用这个命令来安装新的软件包。</p><p id="6475" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">例如，如果您想要安装 pandas 软件包，您可以运行以下命令:</p><pre class="kj kk kl km gt ms mt mu mv aw mw bi"><span id="7642" class="mx lw it mt b gy my mz l na nb">python -m pip install pandas</span></pre><p id="4f1a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这将从 PyPI 安装最新版本的 pandas 包。如果您想要使用不同的版本，也可以指定特定的版本号。</p><p id="2f7c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">当寻找解决特定问题的包时，搜索 PyPI 存储库通常是个好主意。您可以通过运行以下命令来实现这一点:</p><pre class="kj kk kl km gt ms mt mu mv aw mw bi"><span id="efa7" class="mx lw it mt b gy my mz l na nb">pypi -l</span></pre><p id="f6a9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这将打印出 PyPI 上所有可用包的列表，以及它们的描述。你也可以在 pypi.org 在线浏览 PyPI。</p></div><div class="ab cl nd ne hx nf" role="separator"><span class="ng bw bk nh ni nj"/><span class="ng bw bk nh ni nj"/><span class="ng bw bk nh ni"/></div><div class="im in io ip iq"><h1 id="552b" class="lv lw it bd lx ly nk ma mb mc nl me mf jz nm ka mh kc nn kd mj kf no kg ml mm bi translated">4.避免声明不必要的变量</h1><p id="82d3" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">编写代码时，避免声明不必要的变量。例如，如果您只需要使用一次某个值，就不要声明一个新变量来保存该值。</p><p id="9378" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这是不要做的事情:</p><pre class="kj kk kl km gt ms mt mu mv aw mw bi"><span id="7305" class="mx lw it mt b gy my mz l na nb">x = 25</span><span id="dd8c" class="mx lw it mt b gy nc mz l na nb">y = x*x</span><span id="abcf" class="mx lw it mt b gy nc mz l na nb">print(y)</span></pre><p id="21d9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这将打印出 25 的平方，即 625。在这里，您可以通过使用内置函数 pow()或 square()来消除对变量的需求。在这个例子中，我们将使用 power():</p><pre class="kj kk kl km gt ms mt mu mv aw mw bi"><span id="c1b1" class="mx lw it mt b gy my mz l na nb">x = 25</span><span id="dbe4" class="mx lw it mt b gy nc mz l na nb">print(pow(x,x))</span></pre><p id="f9e5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这段代码将像以前一样打印出来，但是现在我们只声明了 1 个变量，而不是 2 个。</p><p id="be87" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们不想要额外变量的简单原因是因为它们会使我们的代码难以阅读和维护。</p><p id="61b0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">当你在查看一段代码时，能够快速理解每个变量的用途是很重要的。如果变量太多，这就变得很难做到。</p></div><div class="ab cl nd ne hx nf" role="separator"><span class="ng bw bk nh ni nj"/><span class="ng bw bk nh ni nj"/><span class="ng bw bk nh ni"/></div><div class="im in io ip iq"><h1 id="926f" class="lv lw it bd lx ly nk ma mb mc nl me mf jz nm ka mh kc nn kd mj kf no kg ml mm bi translated">5.必要时中断循环</h1><p id="b85a" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">必要时打破循环是很重要的。例如，考虑以下代码:</p><pre class="kj kk kl km gt ms mt mu mv aw mw bi"><span id="bd00" class="mx lw it mt b gy my mz l na nb">while True: <br/>  print(“Hello World!”)</span></pre><p id="448e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这将打印出“Hello World！”永远，或者直到您使用 Ctrl-C 手动终止程序。您可以通过在 if 子句中使用 break 语句来停止程序:</p><pre class="kj kk kl km gt ms mt mu mv aw mw bi"><span id="89d4" class="mx lw it mt b gy my mz l na nb">while True:<br/>  if some condition is met:<br/>     break<br/>  print(“Hello World!”)</span></pre><p id="b296" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这将打印出“Hello World！”直到满足某些条件，如 hello world 打印了 5 次，然后停止代码。</p><p id="17b9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">同样的概念也适用于 for 循环。例如，考虑以下代码:</p><pre class="kj kk kl km gt ms mt mu mv aw mw bi"><span id="aeff" class="mx lw it mt b gy my mz l na nb">for i in range(0, 100):<br/>   if i % 15 == 0:<br/>      break<br/>   print(i)</span></pre><p id="67f1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这段代码将打印出从 0 到 99 的所有数字，除了那些能被 15 整除的数字。当它达到一个能被 15 整除的数时，代码将停止。</p><p id="011f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">break 语句在许多情况下非常有用，例如，当您因为满足某些条件或者在运行代码时出现错误而希望提前退出循环时。</p></div><div class="ab cl nd ne hx nf" role="separator"><span class="ng bw bk nh ni nj"/><span class="ng bw bk nh ni nj"/><span class="ng bw bk nh ni"/></div><div class="im in io ip iq"><h1 id="7e73" class="lv lw it bd lx ly nk ma mb mc nl me mf jz nm ka mh kc nn kd mj kf no kg ml mm bi translated">结论</h1><p id="b936" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">这些只是可以用来在 Python 中编写更高效代码的一些技术。您还可以做许多其他事情，例如使用类、将代码组织成模块以及利用内置函数。通过遵循这些提示，您可以编写易于阅读和理解并且运行速度更快的代码。</p><p id="e3fa" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">编码快乐！</p><p id="6e33" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><a class="ae ky" href="https://pages.christopherzita.com/python-cheat-sheet" rel="noopener ugc nofollow" target="_blank"> <strong class="lb iu">与 5k 以上的人一起加入我的电子邮件列表，免费获得“完整的 Python 数据科学备忘手册”</strong> </a></p></div></div>    
</body>
</html>