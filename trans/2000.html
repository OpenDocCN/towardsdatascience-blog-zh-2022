<html>
<head>
<title>How to Use GPT-J for (Almost) Any NLP Task</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何使用GPT J为(几乎)任何自然语言处理任务</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/how-to-use-gpt-j-for-almost-any-nlp-task-cb3ca8ff5826#2022-05-06">https://towardsdatascience.com/how-to-use-gpt-j-for-almost-any-nlp-task-cb3ca8ff5826#2022-05-06</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="a438" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">提示工程以及它如何与文本生成模型一起使用</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/40dfa626881d262b660b58ac1bd1da77.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*7w1R1OpO1ZYoPQBR"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">马库斯·温克勒在<a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</p></figure><h1 id="f86e" class="kw kx iq bd ky kz la lb lc ld le lf lg jw lh jx li jz lj ka lk kc ll kd lm ln bi translated">这是怎么回事？</h1><p id="ef20" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">在<a class="ae kv" rel="noopener" target="_blank" href="/how-to-build-your-own-gpt-j-playground-733f4f1246e5">之前的一篇博文</a>中，我们看了看如何使用<a class="ae kv" href="https://streamlit.io/" rel="noopener ugc nofollow" target="_blank"> Streamlit </a>、<a class="ae kv" href="https://huggingface.co/" rel="noopener ugc nofollow" target="_blank">拥抱脸</a>和<a class="ae kv" href="https://aws.amazon.com/sagemaker/" rel="noopener ugc nofollow" target="_blank">亚马逊SageMaker </a>来建立我们自己的GPT-J游乐场。有了这个平台，我们现在可以开始试验模型并生成一些文本，这很有趣。但是最终我们希望模型能够真正执行NLP任务，比如翻译、分类等等。在这篇博文中，我们将看看如何使用GPT-J模型的不同参数和特定提示来实现这一点。</p><p id="7602" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">这篇博文将建立在<a class="ae kv" rel="noopener" target="_blank" href="/how-to-build-your-own-gpt-j-playground-733f4f1246e5">上一篇博文</a>和这篇<a class="ae kv" href="https://github.com/marshmellow77/gptj-playground" rel="noopener ugc nofollow" target="_blank"> Github repo </a>的基础上，假设你已经建立了自己的GPT J游乐场。这篇博文的代码可以在同一个Github repo中的一个单独的分支<a class="ae kv" href="https://github.com/marshmellow77/gptj-playground/tree/prompt-engineering" rel="noopener ugc nofollow" target="_blank">中找到。</a></p><h1 id="6049" class="kw kx iq bd ky kz la lb lc ld le lf lg jw lh jx li jz lj ka lk kc ll kd lm ln bi translated">添加参数控制</h1><p id="5000" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">在我们开始快速工程之前，我们应该添加一些参数，用这些参数我们可以在一定程度上控制模型的行为。一篇详细描述这些参数的博文可以在<a class="ae kv" href="https://huggingface.co/blog/how-to-generate" rel="noopener ugc nofollow" target="_blank">这里</a>找到。在本教程中，我们将只介绍其中的三个:响应长度，温度和重复惩罚。响应长度是显而易见的——它控制模型的响应时间。温度是衡量模型创造性的一个标准——温度越高，模型的反应就越“有创造性”。重复惩罚也是不言自明的——该值越高，模型对重复单词的惩罚就越多。</p><p id="da94" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">让我们在我们的Streamlit应用程序中创建一个侧栏，它将允许我们在UI中控制这些参数的值:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mp mq l"/></div></figure><p id="0e60" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">现在，这些控件将出现在用户界面的侧边栏中:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi mr"><img src="../Images/4118efb0fccaff1ea88c185a16000f93.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7fvwmU3ZeO8Is8O4slvkOg.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">作者图片</p></figure><p id="da33" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">我们还需要确保在调用模型端点时，通过将这些参数的值合并到有效负载中，将它们传递给模型:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mp mq l"/></div></figure><p id="6874" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">现在我们已经将这些参数添加到了我们的应用程序中，我们可以开始尝试不同的提示。</p><h1 id="188b" class="kw kx iq bd ky kz la lb lc ld le lf lg jw lh jx li jz lj ka lk kc ll kd lm ln bi translated">快速工程</h1><p id="6810" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">让我们先来看看<a class="ae kv" href="https://en.wikipedia.org/wiki/Prompt_engineering" rel="noopener ugc nofollow" target="_blank">维基百科对提示工程</a>的定义:</p><blockquote class="ms mt mu"><p id="9b76" class="lo lp mv lq b lr mk jr lt lu ml ju lw mw mm lz ma mx mn md me my mo mh mi mj ij bi translated">提示工程是人工智能，尤其是自然语言处理(NLP)中的一个概念。在prompt工程中，任务的描述被嵌入在输入中，例如，作为一个问题，而不是被隐含地给出。</p></blockquote><p id="61d9" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">这意味着我们可以创建一些文本作为模型的输入，告诉模型要执行哪个任务。让我们看一些例子。</p><h2 id="af11" class="mz kx iq bd ky na nb dn lc nc nd dp lg lx ne nf li mb ng nh lk mf ni nj lm nk bi translated">分类</h2><p id="4ed3" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">让我们从一个相对“简单”的任务开始，文本分类:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nl"><img src="../Images/90dd39a88b7b319676e202e24da35315.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*PwpptbYke3Kc6RwbtVYoAA.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">作者图片</p></figure><p id="0caf" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">在本例中，我们明确说明了任务(将食物与国家相匹配),并提供了几个示例。这被称为少量学习，因为模型能够从这些例子中学习任务是什么(除了任务语句之外)。</p><p id="d2af" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">我们选择了低温和低重复惩罚，因为我们不希望这个模型对这个任务太有创造性。我们还将响应长度保持在中等，因此模型继续使用列表。大多数情况下，这将是有趣的，但不可取的，因为我们希望模型分类一个特定的文本(“鱼和薯条”)。这可以通过一点后处理来弥补，即在换行后删除所有内容。</p><h2 id="e9a9" class="mz kx iq bd ky na nb dn lc nc nd dp lg lx ne nf li mb ng nh lk mf ni nj lm nk bi translated">翻译</h2><p id="384b" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">文本生成模型对于翻译任务也表现良好，只要该模型已经被训练成多种语言。让我们省略明确的任务陈述，只提供几个例子:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nm"><img src="../Images/967142a49f457909958f3916271e5e75.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Y_8KqbwqdzosQOsioiFzHQ.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">作者图片</p></figure><p id="294d" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">首先，对于那些不熟悉德语的人来说，这是一个正确的翻译(准确地说，是几种可能的正确翻译之一)。因此，该模型甚至能够在没有明确说明的情况下识别任务。我们再次将温度和重复惩罚的值保持得相当低。例如，为温度选择一个较高的值会使模型有点太有创意。值为0.6时，会产生以下翻译:“嗯，什么是更好的？”(“它什么时候做啤酒？”).话说回来，这可能是德语中的一个常见问题；)</p><h2 id="36e8" class="mz kx iq bd ky na nb dn lc nc nd dp lg lx ne nf li mb ng nh lk mf ni nj lm nk bi translated">SQL生成</h2><p id="d990" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">让我们把事情变得更难一点，不提供任何例子。相反，我们只是直接告诉模型该做什么:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nn"><img src="../Images/f883a48fe248e207f812778c8b3059aa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*LrzPHmN3icGeFVQijeFBmg.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">作者图片</p></figure><p id="9b1b" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">这种技术被称为零镜头学习，因为我们不提供例子，仍然期望模型理解任务。在这种情况下，它实际上工作得很好，而且，总的来说，文本生成模型在没有任何例子可以学习的情况下表现得惊人地好。</p><p id="67be" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">我们再次为温度和重复代价选择了较低的值，因为SQL查询具有固定的结构，因此我们不希望模型太有创造性。</p><h2 id="e5f1" class="mz kx iq bd ky na nb dn lc nc nd dp lg lx ne nf li mb ng nh lk mf ni nj lm nk bi translated">自由文本生成</h2><p id="5c23" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">你可能已经注意到，到目前为止，我们并没有太多地使用参数控制:温度和重复惩罚都保持在较低的水平。这是因为我们希望建模来完成特定的任务，所以我们实际上不希望它太有创造性。让我们尝试一个不同的用例，我们希望模型更有创造性。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi no"><img src="../Images/e401a0d86c0bf0c1882e37733a077904.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mjgwHgdrbI6FPgl5dqrZtA.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">作者图片</p></figure><p id="af1d" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">在这种情况下，我们希望将温度至少提高到中等，因为我们希望模型更有创意。在这样做的时候，我们也经常发现模型经常使用相同的单词，所以我们也增加了重复惩罚。根据我们希望模型产生的文本类型，这些值可以进一步增加。</p><h1 id="efdf" class="kw kx iq bd ky kz la lb lc ld le lf lg jw lh jx li jz lj ka lk kc ll kd lm ln bi translated">结论</h1><p id="0ed6" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">在本教程中，我们开始尝试各种提示来完成NLP任务，如分类、翻译等。然而，到目前为止，我们只是触及了表面:我们还可以尝试更多的任务，比如总结、生成电子邮件回复等。我们还可以在应用程序中包含更多的参数来控制模型的行为，如Top-P，beam search等。</p><p id="a5ad" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">我发现试验这些文本生成模型非常有趣，我希望你现在也能在关注这篇博文并建立这个GPT-J游乐场之后做同样的事情。</p></div></div>    
</body>
</html>