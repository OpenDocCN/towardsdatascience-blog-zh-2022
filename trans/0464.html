<html>
<head>
<title>Building a Machine Learning Web Application Using Streamlit</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用 Streamlit 构建机器学习 Web 应用程序</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/building-a-machine-learning-web-application-using-streamlit-8c3d942f7b35#2022-02-18">https://towardsdatascience.com/building-a-machine-learning-web-application-using-streamlit-8c3d942f7b35#2022-02-18</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="76d4" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">关于构建 Streamlit 机器学习应用程序的简单教程</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/0c66def95db778985fb6cdc85e332115.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*08FLOVoSjKr4wgi6zZAuIA.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><p id="c7ab" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">如果你是数据科学家或者数据科学专业的学生，你应该知道机器学习是如何工作的。您知道算法的细节，使用哪个库，并执行诊断。假设在一个商业环境中，你手里有一个完美的模型，结果很优秀，一切都很理想。然后呢？建议我们将代码交给相关的涉众，如果他们想看到结果，请他们运行代码，这确实很诱人。但这不是商业环境的运作方式。这个问题的一个解决方案是创建一个机器学习 web 应用程序。有了这个解决方案，利益相关者就可以通过一个网站访问和运行你的机器学习模型，而不是一些他们看不懂的代码。</p><p id="efd3" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">在我之前的教程中，我演示了使用 Flask 创建 ML 应用程序，Flask 是 Python 中常用的 web 框架。</p><div class="lu lv gp gr lw lx"><a rel="noopener follow" target="_blank" href="/building-a-machine-learning-web-application-using-flask-29fa9ea11dac"><div class="ly ab fo"><div class="lz ab ma cl cj mb"><h2 class="bd iu gy z fp mc fr fs md fu fw is bi translated">使用 Flask 构建机器学习 Web 应用程序</h2><div class="me l"><h3 class="bd b gy z fp mc fr fs md fu fw dk translated">使用 Python 和 Flask 实现机器学习 API 的简单教程</h3></div><div class="mf l"><p class="bd b dl z fp mc fr fs md fu fw dk translated">towardsdatascience.com</p></div></div><div class="mg l"><div class="mh l mi mj mk mg ml ks lx"/></div></div></a></div><p id="0dfb" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">不幸的是，我意识到许多数据科学家缺乏必要的网页设计和工程知识来完成这样的项目。本文将介绍一种更友好的替代方法，使用 Streamlit 创建 ML 应用程序。</p><p id="3627" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">Streamlit 是一个 app 框架，不需要 HTML、CSS 等网页设计工具的知识(不像 Flask)。如果你完成了 Flask 教程，你会惊讶于创建一个 Streamlit 应用程序是多么简单。当然，Streamlit 也有一些限制，比如你不能控制域路由，你的设计选择也是有限的。但是我相信，作为一名数据科学家，你会发现这些限制对于你的目的来说是微不足道的。</p><h2 id="7f55" class="mm mn it bd mo mp mq dn mr ms mt dp mu lh mv mw mx ll my mz na lp nb nc nd ne bi translated">机器学习模型</h2><p id="1e8e" class="pw-post-body-paragraph ky kz it la b lb nf ju ld le ng jx lg lh nh lj lk ll ni ln lo lp nj lr ls lt im bi translated">本节中的 Python 文件将被命名为<code class="fe nk nl nm nn b">model.py</code>。</p><p id="c6e4" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">在构建 ML 应用程序之前，我们需要一个机器学习模型。我们将使用这个简单的数据来创建一个分类模型，</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="no np l"/></div></figure><p id="e766" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">简单的数据带来简单的模型。我确信我不必向像你这样的机器学习专家解释下面的代码。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="no np l"/></div></figure><p id="d6bd" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">这是一个简单的逻辑回归模型来预测二元结果。是的，我没有做训练测试分割，也没有预测任何事情。因为对于本教程，我只需要最终的分类器。如果你跟着我，确保<code class="fe nk nl nm nn b">clf</code>是你想要使用的型号。</p><p id="3cb2" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">下一步是腌制模型。酸洗仅仅意味着将模型存储到一个<code class="fe nk nl nm nn b">.pkl</code>文件中。这样做的目的是将训练过程和用户体验分开(即用户不必忍受模型训练时间)。为此，将以下代码添加到<code class="fe nk nl nm nn b">model.py</code></p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="no np l"/></div></figure><p id="f6ca" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">检查文件<code class="fe nk nl nm nn b">clf.pkl</code>现在是否在你的目录中。</p><h2 id="8505" class="mm mn it bd mo mp mq dn mr ms mt dp mu lh mv mw mx ll my mz na lp nb nc nd ne bi translated">应用程序</h2><p id="e8aa" class="pw-post-body-paragraph ky kz it la b lb nf ju ld le ng jx lg lh nh lj lk ll ni ln lo lp nj lr ls lt im bi translated">本节中的 Python 文件将被命名为<code class="fe nk nl nm nn b">app.py</code>。</p><p id="8a3e" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">Streamlit 让生活变得简单，因为它结合了应用程序的后端和前端。我将给出一个 Streamlit 如何取代 HTML 的例子。</p><p id="5595" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">在 HTML 中，要制作一个数字输入栏，您必须编写，</p><pre class="kj kk kl km gt nq nn nr ns aw nt bi"><span id="88bc" class="mm mn it nn b gy nu nv l nw nx">&lt;input type="number", name="", placeholder=""/&gt;</span></pre><p id="fef1" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">获取该输入的值可以通过发送到后端脚本的 POST 请求来完成。在 Streamlit 中，这可以在一个文件中通过简单地编写<code class="fe nk nl nm nn b">x = st.number_input("placeholder")</code>来完成，输入值直接存储在变量<code class="fe nk nl nm nn b">x</code>中。</p><p id="4081" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我会给出我是如何创建这个应用程序的。这应该是不言自明的。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="no np l"/></div></figure><p id="3894" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">让我简单解释一下每一行。</p><ul class=""><li id="ac3f" class="ny nz it la b lb lc le lf lh oa ll ob lp oc lt od oe of og bi translated">第 6 行打印出标题。这相当于 HTML 中的<code class="fe nk nl nm nn b">&lt;h1&gt;</code>或<code class="fe nk nl nm nn b">&lt;h2&gt;</code>标签。</li><li id="418b" class="ny nz it la b lb oh le oi lh oj ll ok lp ol lt od oe of og bi translated">第 9 和 12 行是输入栏。输入值存储在变量<code class="fe nk nl nm nn b">height</code>和<code class="fe nk nl nm nn b">weight</code>中。这相当于 HTML 中的<code class="fe nk nl nm nn b">&lt;input type = "number"&gt;</code>。</li><li id="cb57" class="ny nz it la b lb oh le oi lh oj ll ok lp ol lt od oe of og bi translated">第 15 行是下拉输入。该选择将被记录在变量<code class="fe nk nl nm nn b">eyes</code>中。该下拉菜单的选项为<code class="fe nk nl nm nn b">Blue</code>和<code class="fe nk nl nm nn b">Brown</code>。这相当于 HTML 中下拉菜单的<code class="fe nk nl nm nn b">&lt;select&gt;</code>标签和选项的<code class="fe nk nl nm nn b">&lt;option&gt;</code>标签。</li><li id="0006" class="ny nz it la b lb oh le oi lh oj ll ok lp ol lt od oe of og bi translated">第 18 行是一个按钮。我把它放在一个 if 语句中，因为如果按下它会简单地返回<code class="fe nk nl nm nn b">True</code>。这相当于 HTML 中的<code class="fe nk nl nm nn b">&lt;button&gt;</code>标签。</li><li id="578d" class="ny nz it la b lb oh le oi lh oj ll ok lp ol lt od oe of og bi translated">21 号线正在调用我们之前训练和腌制的模型。</li><li id="7a01" class="ny nz it la b lb oh le oi lh oj ll ok lp ol lt od oe of og bi translated">第 24 行将输入存储到数据帧中，随后是第 26 行中的简单处理。这个过程正是我们在<code class="fe nk nl nm nn b">model.py</code>中所做的。</li><li id="455e" class="ny nz it la b lb oh le oi lh oj ll ok lp ol lt od oe of og bi translated">第 29 行使用模型预测给定输入的输出。</li><li id="f374" class="ny nz it la b lb oh le oi lh oj ll ok lp ol lt od oe of og bi translated">第 32 行打印输出。这相当于 HTML 中的<code class="fe nk nl nm nn b">&lt;p&gt;</code>标签。注意<code class="fe nk nl nm nn b">print()</code>不会出现在 Streamlit 应用上。</li></ul><p id="c3c4" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">运行<code class="fe nk nl nm nn b">app.py</code>会给我们这个页面。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi om"><img src="../Images/75026e62c07b4e996e8a98dcd0be5438.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*UWCiO3WJI0qt4Uo19aJFUw.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">网页结果</p></figure><p id="6035" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">此应用程序现已准备就绪。您可以通过使用其他 streamlit 对象来试验设计。查看文档<code class="fe nk nl nm nn b"><a class="ae on" href="https://docs.streamlit.io/" rel="noopener ugc nofollow" target="_blank">https://docs.streamlit.io/</a></code>并在左侧栏中查找章节<code class="fe nk nl nm nn b">API reference</code>了解更多可能性。</p><h1 id="724c" class="oo mn it bd mo op oq or mr os ot ou mu jz ov ka mx kc ow kd na kf ox kg nd oy bi translated">运行应用程序</h1><p id="2fa6" class="pw-post-body-paragraph ky kz it la b lb nf ju ld le ng jx lg lh nh lj lk ll ni ln lo lp nj lr ls lt im bi translated">要运行我们刚刚创建的应用程序，请转到您的终端或命令提示符。您必须将目录设置为您的项目目录。在我的例子中，文件夹名是<code class="fe nk nl nm nn b">Streamlit-ML-App</code>。所以我应该在终端中写的命令是，</p><pre class="kj kk kl km gt nq nn nr ns aw nt bi"><span id="1e7c" class="mm mn it nn b gy nu nv l nw nx">cd path/to/my/directory/Streamlit-ML-App</span></pre><p id="cb74" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">如果您不知道目录的路径，请在<code class="fe nk nl nm nn b">model.py</code>中运行这段代码</p><pre class="kj kk kl km gt nq nn nr ns aw nt bi"><span id="505e" class="mm mn it nn b gy nu nv l nw nx">import os<br/>print(os.path.dirname(os.path.abspath(__file__)))</span></pre><p id="866f" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">这段代码的输出应该是<code class="fe nk nl nm nn b">path/to/your/directory/Streamlit-ML-App</code>或者你正在使用的任何文件夹名。因此，将输出复制到您的终端。别忘了加上<code class="fe nk nl nm nn b">cd</code> prior。</p><p id="1a5a" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">然后你应该使用下面的命令运行你的 Python 文件<code class="fe nk nl nm nn b">app.py</code>。</p><pre class="kj kk kl km gt nq nn nr ns aw nt bi"><span id="5235" class="mm mn it nn b gy nu nv l nw nx">streamlit run app.py</span></pre><p id="d551" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">如果您做的一切都正确，您应该在终端中看到这个输出，</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oz"><img src="../Images/2365b2232bccda6f76637f899ff33c40.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2y9wMB-q-357HTCjk19csg.png"/></div></div></figure><p id="8f44" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">如果本地主机页面没有自动打开，请复制其中一个 URL 并将其粘贴到您的浏览器中。</p><p id="c389" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">放入一些输入，测试你的机器学习模型是否已经成功实现。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi pa"><img src="../Images/6aa51beb86aa7a4e3c4ffa11a4bf0596.png" data-original-src="https://miro.medium.com/v2/resize:fit:960/1*Uode1TVd9s5BKgvJwifgiQ.gif"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">最终应用</p></figure><p id="1187" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我们可以看到，对于条目<code class="fe nk nl nm nn b">height = 90, weight = 40, eyes = 'Brown'</code>，我的机器学习模型预测这个实例是一只狗。对于条目，<code class="fe nk nl nm nn b">height = 70, weight = 30, eyes = 'Blue'</code>模型预测这个实例是一只猫。</p><h1 id="3206" class="oo mn it bd mo op oq or mr os ot ou mu jz ov ka mx kc ow kd na kf ox kg nd oy bi translated">恭喜</h1><p id="bdd2" class="pw-post-body-paragraph ky kz it la b lb nf ju ld le ng jx lg lh nh lj lk ll ni ln lo lp nj lr ls lt im bi translated">我们已经成功创建了一个可供部署的 Streamlit 机器学习应用程序。我希望您能清楚地看到，与典型的 web 框架相比，这是多么简单。我的应用程序一点也不好看，因为它非常简单。请进一步研究 Streamlit 文档，使您的应用程序更加美观。你可以在<a class="ae on" href="https://github.com/gerchristko/Streamlit-ML-App" rel="noopener ugc nofollow" target="_blank"> GitHub </a>上找到我的完整代码和数据集。感谢您的阅读！</p></div></div>    
</body>
</html>