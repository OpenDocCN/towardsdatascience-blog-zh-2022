<html>
<head>
<title>A simple route optimization using Google BigQuery (and Google Maps)</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">一个简单的路线优化使用谷歌大查询(和谷歌地图)</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/a-simple-route-optimization-using-google-bigquery-and-google-maps-3d2264951816#2022-05-05">https://towardsdatascience.com/a-simple-route-optimization-using-google-bigquery-and-google-maps-3d2264951816#2022-05-05</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="4291" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated"><strong class="ak">最少的努力</strong>快速帮助您的线下销售团队寻找潜在的销售线索</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/5363b923a8b598e93dae08962ec1248b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*kw7JDX2Jup6a3iKE"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">何塞·马丁·拉米雷斯·卡拉斯科在<a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>拍摄的照片</p></figure><h1 id="ad4d" class="kw kx iq bd ky kz la lb lc ld le lf lg jw lh jx li jz lj ka lk kc ll kd lm ln bi translated">介绍</h1><p id="ce87" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi mk translated">简单有时更好。保持事情简单有助于你更加关注最重要的事情，即价值。你总是可以使用新奇的东西(更好的算法，机器学习等等)，但是当你使用它们的时候，<em class="mt">很容易尝试一些不相关的东西</em>，这些东西不会让你的工作价值增加那么多。当然，您还需要保持解决方案的质量。</p><p id="5f04" class="pw-post-body-paragraph lo lp iq lq b lr mu jr lt lu mv ju lw lx mw lz ma mb mx md me mf my mh mi mj ij bi translated">在本文中，我想向您展示一些很酷的东西，通过利用BigQuery，您可以使用一个简单的解决方案来实现这些东西。您只需要熟悉一些可用的BigQuery分析函数。如果你还没有检查我的其他职位。</p><div class="mz na gp gr nb nc"><a rel="noopener follow" target="_blank" href="/useful-big-query-analytic-functions-that-you-should-learn-19270e866a37"><div class="nd ab fo"><div class="ne ab nf cl cj ng"><h2 class="bd ir gy z fp nh fr fs ni fu fw ip bi translated">你应该学习的有用的大查询分析函数</h2><div class="nj l"><h3 class="bd b gy z fp nh fr fs ni fu fw dk translated">熟悉它们，对你的数据探索和准备任务会有很大帮助。</h3></div><div class="nk l"><p class="bd b dl z fp nh fr fs ni fu fw dk translated">towardsdatascience.com</p></div></div><div class="nl l"><div class="nm l nn no np nl nq kp nc"/></div></div></a></div><p id="d0a4" class="pw-post-body-paragraph lo lp iq lq b lr mu jr lt lu mv ju lw lx mw lz ma mb mx md me mf my mh mi mj ij bi translated">我们将使用公共数据集，但问题陈述在类似的企业中应该相对相同。记住这一点，我希望你能有另一个灵感来解决你的组织正面临的类似问题。让我们直接开始吧！</p><h1 id="dae7" class="kw kx iq bd ky kz la lb lc ld le lf lg jw lh jx li jz lj ka lk kc ll kd lm ln bi translated">问题陈述</h1><p id="e827" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">我只是为了举例而编的，尽可能简单。</p><p id="da8c" class="pw-post-body-paragraph lo lp iq lq b lr mu jr lt lu mv ju lw lx mw lz ma mb mx md me mf my mh mi mj ij bi translated">你在一家向商店销售商品的公司工作(b2b)。你的公司有一些人作为<strong class="lq ir">线下销售团队，他们将接触这些商店作为潜在的销售线索</strong>。</p><p id="432e" class="pw-post-body-paragraph lo lp iq lq b lr mu jr lt lu mv ju lw lx mw lz ma mb mx md me mf my mh mi mj ij bi translated">您的数据库中已经有一些可用的销售线索数据，但是您必须以某种方式对它们进行优先排序，以便<strong class="lq ir">优化销售团队获得这些数据所需的成本和时间</strong>。</p><p id="39b2" class="pw-post-body-paragraph lo lp iq lq b lr mu jr lt lu mv ju lw lx mw lz ma mb mx md me mf my mh mi mj ij bi translated">我将使用BigQuery中提供的<strong class="lq ir">new _ York _ Citi bike . Citi bike _ stations</strong>公共数据集。对于这个例子，我将把电台id改为商店id。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nr ns l"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">查询以获取销售线索数据</p></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nt"><img src="../Images/94bf8190a98eefebf40f6cb761ee567e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*glPOvEA8vmIzXrzK_W4org.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">线索数据示例(作者图片)</p></figure><h1 id="f66d" class="kw kx iq bd ky kz la lb lc ld le lf lg jw lh jx li jz lj ka lk kc ll kd lm ln bi translated">简单溶体</h1><p id="da84" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">我们可以通过使用一种简单的方法来优化销售操作，让我们来分解一下。</p><h2 id="37fe" class="nu kx iq bd ky nv nw dn lc nx ny dp lg lx nz oa li mb ob oc lk mf od oe lm of bi translated">按地区排列优先级</h2><p id="0a48" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">正如您在数据集中已经注意到的，商店位于几个区域，因此我们按区域优化路线是合理的。您还可以在我们的数据库中看到字段<code class="fe og oh oi oj b">capacity</code>，让我们假设它是一个数字，显示我们可以向他们销售多少潜在产品。</p><p id="c4be" class="pw-post-body-paragraph lo lp iq lq b lr mu jr lt lu mv ju lw lx mw lz ma mb mx md me mf my mh mi mj ij bi translated">我们这一步的逻辑相当简单:<code class="fe og oh oi oj b">select stores with most capacity in each region</code>。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nr ns l"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">查询以按区域获取主要销售线索</p></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi ok"><img src="../Images/26c4fd4734577292de8f6ca5115e0a74.png" data-original-src="https://miro.medium.com/v2/resize:fit:892/format:webp/1*O56rC7xICGdd8831JRikbQ.png"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">按区域排列的顶级销售线索，将空区域id假装为另一个region_id(按作者排列的图片)</p></figure><p id="208d" class="pw-post-body-paragraph lo lp iq lq b lr mu jr lt lu mv ju lw lx mw lz ma mb mx md me mf my mh mi mj ij bi translated">现在，我们的线下销售团队应该首先拜访每个地区的主要销售线索。继续下一步。</p><h2 id="eaa6" class="nu kx iq bd ky nv nw dn lc nx ny dp lg lx nz oa li mb ob oc lk mf od oe lm of bi translated">选择要拜访的下一个潜在客户</h2><p id="a363" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">接下来，我们必须决定我们的线下销售团队接下来应该拜访哪些销售线索。非常简单，只需选择距离上一条引线最近的下一条引线。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nr ns l"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">最终查询</p></figure><p id="bf9f" class="pw-post-body-paragraph lo lp iq lq b lr mu jr lt lu mv ju lw lx mw lz ma mb mx md me mf my mh mi mj ij bi translated">解释:</p><ul class=""><li id="5c46" class="ol om iq lq b lr mu lu mv lx on mb oo mf op mj oq or os ot bi translated">我们创建一个只包含我们需要的数据的基础CTE。我们还根据容量给它一个等级，就像我们在上一步中做的那样。还要注意，我们将坐标转换成了地理点对象(如果你想了解更多，请阅读<a class="ae kv" href="https://cloud.google.com/bigquery/docs/reference/standard-sql/geography_functions#st_geogpoint" rel="noopener ugc nofollow" target="_blank">这个</a>)。</li><li id="e2d2" class="ol om iq lq b lr ou lu ov lx ow mb ox mf oy mj oq or os ot bi translated">我们创建了一个top_leads CTE，仅收集基于能力的顶级销售线索。</li><li id="2e4b" class="ol om iq lq b lr ou lu ov lx ow mb ox mf oy mj oq or os ot bi translated">最后，我们通过使用inner join by region来计算顶部引线和每个引线之间的距离。最后一步是根据计算的距离(以米为单位)对它们进行分类。</li></ul><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oz"><img src="../Images/713fc0f3d2f8105d314804d3bb5cfcfc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*lshefilcYWaFVjWs_g7VGA.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">基于距离的优先线索(图片由作者提供)</p></figure><h2 id="0dee" class="nu kx iq bd ky nv nw dn lc nx ny dp lg lx nz oa li mb ob oc lk mf od oe lm of bi translated">销售线索分配</h2><p id="2359" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">最后一步是给每个销售人员分配一些销售线索。任务的数量可能取决于线下销售团队的数量，但假设他们每个人每天可以处理约5个销售线索(1次线下拜访)。</p><p id="b6ff" class="pw-post-body-paragraph lo lp iq lq b lr mu jr lt lu mv ju lw lx mw lz ma mb mx md me mf my mh mi mj ij bi translated">所以我们的步骤就是分解我们的线索来匹配数字。选择前5个销售线索，将其分配给销售人员，并继续操作，直到分配完所有销售线索。</p><p id="d0aa" class="pw-post-body-paragraph lo lp iq lq b lr mu jr lt lu mv ju lw lx mw lz ma mb mx md me mf my mh mi mj ij bi translated">但是有一个重要的步骤可以确保我们交付的工作质量足够好。假设这5个销售线索分配给了销售人员A:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi pa"><img src="../Images/23c15f09179ecd515c82318ed199da76.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*IXt6LxsVBM8FbdHaNmp5ZA.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">分配给销售人员A的销售线索(按作者排序的图片)</p></figure><p id="f821" class="pw-post-body-paragraph lo lp iq lq b lr mu jr lt lu mv ju lw lx mw lz ma mb mx md me mf my mh mi mj ij bi translated">到目前为止，我们的解决方案只计算距离，没有考虑实际的道路。因此，每次销售人员想要访问潜在客户时，他们都需要在谷歌地图中相应地调整他们的路线(实际上，他们可能会使用谷歌地图或其他类型的导航，因此这不会增加他们的工作量)。</p><p id="b2e0" class="pw-post-body-paragraph lo lp iq lq b lr mu jr lt lu mv ju lw lx mw lz ma mb mx md me mf my mh mi mj ij bi translated">首先，只需输入所有目的地:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi pb"><img src="../Images/97b2c6bc262deda8204f6ddff4a30c6f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*O_9Q0WAc7C0S9NNjmyHNKA.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">未优化的路线(图片由作者提供)</p></figure><p id="75bf" class="pw-post-body-paragraph lo lp iq lq b lr mu jr lt lu mv ju lw lx mw lz ma mb mx md me mf my mh mi mj ij bi translated">第二，根据道路调整路线:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi pc"><img src="../Images/de46ee1dbf04e3767796b3017ed72510.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fIHe354tWb-p-fDFXLdstA.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">手动优化路线(图片由作者提供)</p></figure><p id="5153" class="pw-post-body-paragraph lo lp iq lq b lr mu jr lt lu mv ju lw lx mw lz ma mb mx md me mf my mh mi mj ij bi translated">注意:<em class="mt">此手动调整取决于国家、位置、道路类型等。这也取决于销售人员如何决定参观，但至少我们可以帮助他们确定一天内需要参观的最近的5个地点。</em></p><p id="3d0f" class="pw-post-body-paragraph lo lp iq lq b lr mu jr lt lu mv ju lw lx mw lz ma mb mx md me mf my mh mi mj ij bi translated"><em class="mt">链接上例:</em> <a class="ae kv" href="https://www.google.com/maps/dir/40.7183551982321+-74.0389144420624+/40.7195861,-74.0431175/40.7177325+-74.043845+/40.72152515+-74.046304543+/40.72165072488+-74.0428841114044+/@40.7196498,-74.0449258,17z/data=!3m1!4b1!4m19!4m18!1m3!2m2!1d-74.0389144!2d40.7183552!1m0!1m3!2m2!1d-74.043845!2d40.7177325!1m3!2m2!1d-74.0463045!2d40.7215252!1m3!2m2!1d-74.0428841!2d40.7216507!3e0" rel="noopener ugc nofollow" target="_blank"> <em class="mt">这里</em> </a></p><h1 id="b97e" class="kw kx iq bd ky kz la lb lc ld le lf lg jw lh jx li jz lj ka lk kc ll kd lm ln bi translated">结论</h1><p id="5f59" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">我们利用了一些有用的BigQuery函数(分析和地理)来帮助我们为业务问题提供一个简单的解决方案。现在，就看你能否将解决方案传达给利益相关者或业务人员了。您的解决方案的简单性可能会对您解释如何完成这一点有很大帮助！</p><p id="c0ac" class="pw-post-body-paragraph lo lp iq lq b lr mu jr lt lu mv ju lw lx mw lz ma mb mx md me mf my mh mi mj ij bi translated">在我作为一名数据从业者的日常活动中，我研究过许多这种简单而有价值的解决方案。我希望通过与你分享这篇文章，读者也能启发你更多地关注最重要的事情。</p><p id="b818" class="pw-post-body-paragraph lo lp iq lq b lr mu jr lt lu mv ju lw lx mw lz ma mb mx md me mf my mh mi mj ij bi translated">一如既往，快乐学习！！🚀🚀</p></div></div>    
</body>
</html>