<html>
<head>
<title>What are Intrinsic and Extrinsic Camera Parameters in Computer Vision?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">计算机视觉中的内在和外在相机参数是什么？</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/what-are-intrinsic-and-extrinsic-camera-parameters-in-computer-vision-7071b72fb8ec#2022-03-01">https://towardsdatascience.com/what-are-intrinsic-and-extrinsic-camera-parameters-in-computer-vision-7071b72fb8ec#2022-03-01</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><figure class="ip iq gp gr ir is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi io"><img src="../Images/515686dee0a7c89c5e7801431edab8d8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*y70j73aOVwemAbWk"/></div></div><p class="iz ja gj gh gi jb jc bd b be z dk translated">由<a class="ae jd" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上<a class="ae jd" href="https://unsplash.com/@sharegrid?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> ShareGrid </a>拍摄的照片</p></figure><div class=""/><div class=""><h2 id="8681" class="pw-subtitle-paragraph kd jf jg bd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku dk translated">在可视化的帮助下，详细解释内部和外部摄像机参数</h2></div><p id="8b36" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi lr translated"><span class="l ls lt lu bm lv lw lx ly lz di"> I </span> mages是最近深度学习模型中最常用的数据之一。相机是用来捕捉图像的传感器。他们把世界上的点投影到一个2D平面上，这个平面就是我们看到的图像。在本文中，我们将介绍在此过程中发生的完整转换。</p><p id="0961" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">这种转化通常分为两部分:<strong class="kx jh"> <em class="ma">外在和内在。</em> </strong>摄像机的外部参数取决于摄像机的位置和方位，与摄像机的内部参数如焦距、视野等无关。另一方面，相机的内在参数取决于它如何捕捉图像。诸如焦距、光圈、视野、分辨率等参数控制相机模型的固有矩阵。</p><p id="71ab" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">这些外部和非外部参数是将点从一个坐标系转换到另一个坐标系的变换矩阵。为了理解这些变换，我们首先需要了解成像中使用的不同坐标系是什么。</p><h1 id="61df" class="mb mc jg bd md me mf mg mh mi mj mk ml km mm kn mn kp mo kq mp ks mq kt mr ms bi translated">CV中常用的坐标系</h1><figure class="mu mv mw mx gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi mt"><img src="../Images/ad2b64b7c1ab5891f9d80e524d815699.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9RqYQTkYlPRZIG-GZWaddQ.png"/></div></div><p class="iz ja gj gh gi jb jc bd b be z dk translated">作者图片</p></figure><p id="5e44" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">计算机视觉中常用的坐标系有</p><ol class=""><li id="11ce" class="my mz jg kx b ky kz lb lc le na li nb lm nc lq nd ne nf ng bi translated"><strong class="kx jh">世界坐标系(3D) </strong></li><li id="8256" class="my mz jg kx b ky nh lb ni le nj li nk lm nl lq nd ne nf ng bi translated"><strong class="kx jh">摄像机坐标系(3D) </strong></li><li id="329b" class="my mz jg kx b ky nh lb ni le nj li nk lm nl lq nd ne nf ng bi translated"><strong class="kx jh">图像坐标系(2D) </strong></li><li id="2376" class="my mz jg kx b ky nh lb ni le nj li nk lm nl lq nd ne nf ng bi translated"><strong class="kx jh">像素坐标系(2D) </strong></li></ol><p id="f295" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><strong class="kx jh">外矩阵</strong>是从世界坐标系到摄像机坐标系的变换矩阵，而<strong class="kx jh">内矩阵</strong>是将点从摄像机坐标系转换到像素坐标系的变换矩阵。</p><h2 id="21df" class="nm mc jg bd md nn no dn mh np nq dp ml le nr ns mn li nt nu mp lm nv nw mr nx bi translated">世界坐标系(3D):</h2><p id="1d9d" class="pw-post-body-paragraph kv kw jg kx b ky ny kh la lb nz kk ld le oa lg lh li ob lk ll lm oc lo lp lq ij bi translated"><strong class="kx jh">【Xw，Yw，Zw】:</strong>是任意原点的3D基础笛卡尔坐标系。例如房间的特定角落。这个坐标系中的一个点可以表示为Pw = (Xw，Yw，Zw)。</p><figure class="mu mv mw mx gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi od"><img src="../Images/cb692e7c20c91109d362365309153166.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9fTnl6cZTtsSuEeF3oXqSA.jpeg"/></div></div><p class="iz ja gj gh gi jb jc bd b be z dk translated">作者图片</p></figure><h2 id="3a46" class="nm mc jg bd md nn no dn mh np nq dp ml le nr ns mn li nt nu mp lm nv nw mr nx bi translated">物体/摄像机坐标系(3D):</h2><p id="77fe" class="pw-post-body-paragraph kv kw jg kx b ky ny kh la lb nz kk ld le oa lg lh li ob lk ll lm oc lo lp lq ij bi translated"><strong class="kx jh">【Xc，Yc，Zc】:</strong>相对于物体/摄像机的原点/方向进行测量的坐标系。相机坐标系的z轴通常面向相机镜头(相机主轴)的外部或内部，如上图所示(z轴面向相机镜头的内部)。通过旋转和平移操作，可以从世界坐标系转换到工件坐标系(反之亦然)。</p><figure class="mu mv mw mx gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi oe"><img src="../Images/25844925e2336eba78b60c11d6bb0b2a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qaMTLhQL-XNv_S1RJ7W21g.jpeg"/></div></div><p class="iz ja gj gh gi jb jc bd b be z dk translated">作者图片</p></figure><p id="632b" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">将点从世界坐标系转换到摄像机坐标系的4x4变换矩阵被称为<strong class="kx jh">摄像机外部矩阵。</strong>如果摄像机的物理位置/方向改变(例如移动汽车上的摄像机)，摄像机外部矩阵也会改变。</p><figure class="mu mv mw mx gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi od"><img src="../Images/0614cd3890d902f2147bc6b53b98cc7a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*e-Z4RU56CDGNEpKTkEMbiA.jpeg"/></div></div><p class="iz ja gj gh gi jb jc bd b be z dk translated">作者图片</p></figure><h2 id="b698" class="nm mc jg bd md nn no dn mh np nq dp ml le nr ns mn li nt nu mp lm nv nw mr nx bi translated">图像坐标系(2D)[针孔模型]:</h2><p id="8758" class="pw-post-body-paragraph kv kw jg kx b ky ny kh la lb nz kk ld le oa lg lh li ob lk ll lm oc lo lp lq ij bi translated"><strong class="kx jh">【Xi，易】:</strong>2D坐标系，将相机坐标系中的3D点投影到具有针孔模型的相机的2D平面(通常垂直于相机坐标系的z轴-在下图中显示为黄色平面)上。</p><figure class="mu mv mw mx gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi od"><img src="../Images/90cab43012fcc0dfb60126c46a5b5f5d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-5UAHG6hOodnDrF5ZriNIQ.jpeg"/></div></div><p class="iz ja gj gh gi jb jc bd b be z dk translated">作者图片</p></figure><p id="3c33" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">光线通过相机开口的中心，投射到另一端的2D平面上。2D平面是照相机捕捉到的图像。这是一种有损变换，这意味着将点从相机坐标系投影到2D平面是不可逆的(深度信息会丢失，因此通过查看相机捕捉的图像，我们无法判断点的实际深度)。这些点的X和Y坐标被投影到2D平面上。2D平面距离相机的距离为<strong class="kx jh"> f(焦距)</strong>。投影，Yi可由相似三角形定律求出(进入和离开相机中心的光线与x轴和y轴的夹角相同，分别为α和β)。</p><figure class="mu mv mw mx gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi od"><img src="../Images/de107fef8b747ddd5cdf3bef4785127a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*owK4O-NkFj-xFlCAFMzX7w.jpeg"/></div></div><p class="iz ja gj gh gi jb jc bd b be z dk translated">作者图片</p></figure><figure class="mu mv mw mx gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi od"><img src="../Images/7b78fca96eb75428c36eb2b2ac80fe5c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*yhSCcfzRIoh1F0ub_dYclA.jpeg"/></div></div><p class="iz ja gj gh gi jb jc bd b be z dk translated">作者图片</p></figure><figure class="mu mv mw mx gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi od"><img src="../Images/bbf037ac9488b6098d67995273a4c55f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vM7vDssS6GVJ-laElp8UVg.jpeg"/></div></div><p class="iz ja gj gh gi jb jc bd b be z dk translated">作者图片</p></figure><p id="1110" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">因此，在矩阵形式中，我们有以下从相机坐标系到图像坐标系的变换矩阵。</p><figure class="mu mv mw mx gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi od"><img src="../Images/899c362f0d411faa889dc0b91dbb9c7a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xYKO5K3UIxJ0HYYWjZnK1w.jpeg"/></div></div><p class="iz ja gj gh gi jb jc bd b be z dk translated">作者图片</p></figure><p id="45cb" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">这个变换(从摄像机到图像坐标系)是<strong class="kx jh">摄像机固有矩阵</strong>的第一部分。</p><h2 id="54ae" class="nm mc jg bd md nn no dn mh np nq dp ml le nr ns mn li nt nu mp lm nv nw mr nx bi translated">像素坐标系(2D):</h2><p id="c314" class="pw-post-body-paragraph kv kw jg kx b ky ny kh la lb nz kk ld le oa lg lh li ob lk ll lm oc lo lp lq ij bi translated"><strong class="kx jh">【u，v】:</strong>表示将图像坐标系中的点离散化后的整数值。图像的像素坐标是一定范围内的离散值，可以通过将图像坐标除以像素宽度和高度(相机的参数—单位:米/像素)来实现。</p><figure class="mu mv mw mx gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi od"><img src="../Images/a1f6857f9e638e6592534aabcdc089fb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*h_IgShWxnMC_rAmFz0yxPw.jpeg"/></div></div><p class="iz ja gj gh gi jb jc bd b be z dk translated">作者图片</p></figure><p id="0144" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">像素坐标系的原点在左上角，因此在离散化的同时还需要一个平移运算符(c_x，c_y)。</p><figure class="mu mv mw mx gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi od"><img src="../Images/7803ceb7b2f33970ec31ec33ba982353.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dGOwEfNoy_gVsscx-dY0wQ.jpeg"/></div></div><p class="iz ja gj gh gi jb jc bd b be z dk translated">作者图片</p></figure><p id="a1ad" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">从图像坐标系到像素坐标系的完整变换可以以如下矩阵形式示出</p><figure class="mu mv mw mx gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi od"><img src="../Images/89efa4e27d80936daefab03eeaaa417f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*lbzm8lHTjZyrGXRlq8J7vA.jpeg"/></div></div><p class="iz ja gj gh gi jb jc bd b be z dk translated">作者图片</p></figure><p id="373f" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">有时，2D图像平面不是矩形，而是倾斜的，即X轴和Y轴之间的角度不是90度。在这种情况下，需要执行另一个变换以从矩形平面到斜面(在执行从图像到像素坐标系的变换之前)。如果x轴和y轴之间的角度是θ，那么将点从理想的矩形平面转换到斜面的变换可以如下找到</p><figure class="mu mv mw mx gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi od"><img src="../Images/3c265e95de52f67504022808df45eeb1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wus1WJ1Toa59wYuzpQRqKg.jpeg"/></div></div><p class="iz ja gj gh gi jb jc bd b be z dk translated">作者图片</p></figure><p id="5b51" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">这两个变换矩阵，即从直角图像坐标系到倾斜图像坐标系的变换和倾斜图像坐标系到像素坐标系的变换，构成了<strong class="kx jh">摄像机固有矩阵的第二部分。</strong></p><p id="b870" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">组合三个变换矩阵产生如下所示的相机外部矩阵</p><figure class="mu mv mw mx gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi od"><img src="../Images/ec81fd788b7726b14fe2750f0e480ebd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*SEO56Us1y7XX8YotSooyVw.jpeg"/></div></div><p class="iz ja gj gh gi jb jc bd b be z dk translated">作者图片</p></figure><figure class="mu mv mw mx gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi od"><img src="../Images/f2febc8edb1177a8b694d75626f360fc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*XeGhAZbz0D91VoRTyOdg1w.jpeg"/></div></div><p class="iz ja gj gh gi jb jc bd b be z dk translated">作者图片</p></figure><figure class="mu mv mw mx gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi od"><img src="../Images/cd27249aa8af74684c4a45a119494af3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*LNHMXeNYfkMQeycLC7uVzQ.jpeg"/></div></div><p class="iz ja gj gh gi jb jc bd b be z dk translated">作者图片</p></figure><h1 id="82c3" class="mb mc jg bd md me mf mg mh mi mj mk ml km mm kn mn kp mo kq mp ks mq kt mr ms bi translated">总结:</h1><h2 id="cbe3" class="nm mc jg bd md nn no dn mh np nq dp ml le nr ns mn li nt nu mp lm nv nw mr nx bi translated">转换:</h2><ol class=""><li id="51ff" class="my mz jg kx b ky ny lb nz le of li og lm oh lq nd ne nf ng bi translated"><strong class="kx jh">世界到摄像机:</strong> 3D-3D投影。旋转、缩放、平移</li><li id="23ba" class="my mz jg kx b ky nh lb ni le nj li nk lm nl lq nd ne nf ng bi translated"><strong class="kx jh">相机转图像:</strong>3D 2D投影。信息丢失。取决于相机型号及其参数(针孔、f-theta等)</li><li id="f0d3" class="my mz jg kx b ky nh lb ni le nj li nk lm nl lq nd ne nf ng bi translated"><strong class="kx jh">图像到像素:</strong> 2D-2D投影。连续到离散。量子化和原点移位。</li></ol><figure class="mu mv mw mx gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi oi"><img src="../Images/92cd1b183bed5d89ec51aa73a95281da.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*iLL5qBfsMbSp0mKP99RLgw.png"/></div></div><p class="iz ja gj gh gi jb jc bd b be z dk translated">相机矩阵—作者提供的图片</p></figure><h2 id="4e5e" class="nm mc jg bd md nn no dn mh np nq dp ml le nr ns mn li nt nu mp lm nv nw mr nx bi translated"><strong class="ak">摄像机外部矩阵(世界到摄像机):</strong></h2><p id="1762" class="pw-post-body-paragraph kv kw jg kx b ky ny kh la lb nz kk ld le oa lg lh li ob lk ll lm oc lo lp lq ij bi translated">将点从世界坐标系转换到相机坐标系。取决于摄像机的位置和方向。</p><h2 id="39bd" class="nm mc jg bd md nn no dn mh np nq dp ml le nr ns mn li nt nu mp lm nv nw mr nx bi translated"><strong class="ak">相机固有矩阵(相机到图像，图像到像素):</strong></h2><p id="d619" class="pw-post-body-paragraph kv kw jg kx b ky ny kh la lb nz kk ld le oa lg lh li ob lk ll lm oc lo lp lq ij bi translated">将点从相机坐标系转换到像素坐标系。取决于相机属性(如焦距、像素尺寸、分辨率等。)</p></div></div>    
</body>
</html>