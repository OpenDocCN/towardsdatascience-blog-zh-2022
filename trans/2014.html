<html>
<head>
<title>Creating Dynamic Length Forms in Django</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在Django中创建动态长度表单</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/creating-dynamic-length-forms-in-django-53709c23464e#2022-05-07">https://towardsdatascience.com/creating-dynamic-length-forms-in-django-53709c23464e#2022-05-07</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><figure class="ip iq gp gr ir is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi io"><img src="../Images/14eea6bd6ad3bce91b5f9cfda035a719.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*IIFjuPIOeBAiv-U8"/></div></div><p class="iz ja gj gh gi jb jc bd b be z dk translated">费萨尔在<a class="ae jd" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure><div class=""/><div class=""><h2 id="424c" class="pw-subtitle-paragraph kd jf jg bd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku dk translated">讨论如何创建一个Django表单，它可以有动态数量的输入字段</h2></div></div><div class="ab cl kv kw hu kx" role="separator"><span class="ky bw bk kz la lb"/><span class="ky bw bk kz la lb"/><span class="ky bw bk kz la"/></div><div class="ij ik il im in"><p id="3bd4" class="pw-post-body-paragraph lc ld jg le b lf lg kh lh li lj kk lk ll lm ln lo lp lq lr ls lt lu lv lw lx ij bi translated">最近，我正在解决一个问题，创建一个应用程序，可以使用搜索词收集维基百科数据，并收集文章简介。该应用程序进一步拆分所有句子，并允许用户将文章中每个句子的翻译保存在数据库中。这个应用程序将帮助任何人通过使用搜索词来注释或翻译维基百科的内容。</p><p id="96d2" class="pw-post-body-paragraph lc ld jg le b lf lg kh lh li lj kk lk ll lm ln lo lp lq lr ls lt lu lv lw lx ij bi translated">该应用程序主要是使用Django和HTML模板构建的。我使用了<a class="ae jd" href="https://pypi.org/project/Wikipedia-API/" rel="noopener ugc nofollow" target="_blank">维基百科API </a>来收集数据。最终输出可以在这里找到和<a class="ae jd" href="https://github.com/prakharrathi25/wikipedia-translator" rel="noopener ugc nofollow" target="_blank">源代码</a>在我的GitHub上。</p><div class="ip iq gp gr ir ly"><a href="https://github.com/prakharrathi25/wikipedia-translator" rel="noopener  ugc nofollow" target="_blank"><div class="lz ab fo"><div class="ma ab mb cl cj mc"><h2 class="bd jh gy z fp md fr fs me fu fw jf bi translated">GitHub-prakharrathi 25/Wikipedia-translator:允许从维基百科页面进行翻译的应用程序…</h2><div class="mf l"><h3 class="bd b gy z fp md fr fs me fu fw dk translated">这个应用程序允许用户在维基百科上输入文章标题。该应用程序从…收集文章数据</h3></div><div class="mg l"><p class="bd b dl z fp md fr fs me fu fw dk translated">github.com</p></div></div><div class="mh l"><div class="mi l mj mk ml mh mm ix ly"/></div></div></a></div><p id="ba53" class="pw-post-body-paragraph lc ld jg le b lf lg kh lh li lj kk lk ll lm ln lo lp lq lr ls lt lu lv lw lx ij bi translated">下面，我还展示了应用程序的工作原理。输入搜索词后，API抓取结果并显示在页面上。</p><figure class="mo mp mq mr gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi mn"><img src="../Images/9a4e498f682904bff44e3631a7620275.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*n5hS9ihgb23-ezIj2wQGew.png"/></div></div><p class="iz ja gj gh gi jb jc bd b be z dk translated">输入搜索词后的应用程序输出(图片由作者提供)</p></figure><p id="2da1" class="pw-post-body-paragraph lc ld jg le b lf lg kh lh li lj kk lk ll lm ln lo lp lq lr ls lt lu lv lw lx ij bi translated">搜索之后，应用程序的第二部分<a class="ae jd" href="https://github.com/nipunsadvilkar/pySBD" rel="noopener ugc nofollow" target="_blank">对文本</a>进行标记(将文本分解成句子)并为翻译做准备。第二列中的每一行都是一个<strong class="le jh">表单输入</strong>，用户可以在其中输入他们的翻译并保存。</p><figure class="mo mp mq mr gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi ms"><img src="../Images/a16188aa333231ba1a8f5b3d3d72daaa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_hzJfHyVId2XUeVK1v7dcg.png"/></div></div><p class="iz ja gj gh gi jb jc bd b be z dk translated">准备翻译的标记化句子(图片由作者提供)</p></figure><h2 id="dfa8" class="mt mu jg bd mv mw mx dn my mz na dp nb ll nc nd ne lp nf ng nh lt ni nj nk nl bi translated">我面临的问题——动态表单长度</h2><p id="fb6e" class="pw-post-body-paragraph lc ld jg le b lf nm kh lh li nn kk lk ll no ln lo lp np lr ls lt nq lv lw lx ij bi translated">在构建项目时，我遇到了一个有趣的新问题— <strong class="le jh">创建动态表单。</strong>这是因为在对介绍段落进行标记后，我们需要创建一个表单，它可以根据句子的数量拥有不同数量的输入字段。然后，我们需要在后端处理所有的输入字段，并保存翻译。一个人也可以只输入一些句子的翻译，而把其余的留空。</p><p id="0c6a" class="pw-post-body-paragraph lc ld jg le b lf lg kh lh li lj kk lk ll lm ln lo lp lq lr ls lt lu lv lw lx ij bi translated">我能够使用我最喜欢的web开发框架之一来解决这个问题——<a class="ae jd" href="https://www.djangoproject.com/" rel="noopener ugc nofollow" target="_blank">Django</a>！</p><h2 id="2a26" class="mt mu jg bd mv mw mx dn my mz na dp nb ll nc nd ne lp nf ng nh lt ni nj nk nl bi translated">解决方案</h2><blockquote class="nr ns nt"><p id="bb40" class="lc ld nu le b lf lg kh lh li lj kk lk nv lm ln lo nw lq lr ls nx lu lv lw lx ij bi translated">现在，我不会深入研究Django的基础知识，因为这篇文章的目标读者是那些有编写Django代码经验的人。如果你想入门，这里有个<a class="ae jd" href="https://realpython.com/get-started-with-django-1/" rel="noopener ugc nofollow" target="_blank">好教程</a>。</p></blockquote><p id="69ca" class="pw-post-body-paragraph lc ld jg le b lf lg kh lh li lj kk lk ll lm ln lo lp lq lr ls lt lu lv lw lx ij bi translated">我将从定义我在这个应用程序中使用的模型开始。我使用的主要模式有两种——<strong class="le jh">项目</strong>和<strong class="le jh">句子。</strong>每个新的文章标题都保存在项目中，标题的介绍被标记成句子。然后，每个句子都保存在句子模型中，并带有返回到项目的外键。</p><figure class="mo mp mq mr gt is"><div class="bz fp l di"><div class="ny nz l"/></div><p class="iz ja gj gh gi jb jc bd b be z dk translated">显示句子和项目模型及其字段的模型文件</p></figure><p id="20cf" class="pw-post-body-paragraph lc ld jg le b lf lg kh lh li lj kk lk ll lm ln lo lp lq lr ls lt lu lv lw lx ij bi translated">接下来，我将展示我用来在同一个表单中动态显示多个输入字段的HTML文件。这意味着输入字段的数量将根据文章引言段落中的句子数量而变化。</p><figure class="mo mp mq mr gt is"><div class="bz fp l di"><div class="ny nz l"/></div><p class="iz ja gj gh gi jb jc bd b be z dk translated">显示动态条目的表格和表单(<a class="ae jd" href="https://gist.github.com/prakharrathi25/1fd4c1e4b916c2d4b06c00136767e150" rel="noopener ugc nofollow" target="_blank">代码片段链接</a></p></figure><p id="8479" class="pw-post-body-paragraph lc ld jg le b lf lg kh lh li lj kk lk ll lm ln lo lp lq lr ls lt lu lv lw lx ij bi translated">这是Django的模板格式，你可以在这里阅读更多关于它的内容。这个表格循环了我通过视图上下文传递的句子的数量，稍后我会再看一遍。因此，根据句子的数量，我可以在表单中添加更多的字段，并从中获取输入。我做的另一件事是使输入字段<strong class="le jh"> name属性</strong>动态化，这样我就能够从单个输入中收集数据。</p><p id="e854" class="pw-post-body-paragraph lc ld jg le b lf lg kh lh li lj kk lk ll lm ln lo lp lq lr ls lt lu lv lw lx ij bi translated">用户在<strong class="le jh">文本区</strong>输入的数据处理如下。</p><figure class="mo mp mq mr gt is"><div class="bz fp l di"><div class="ny nz l"/></div></figure><p id="9d88" class="pw-post-body-paragraph lc ld jg le b lf lg kh lh li lj kk lk ll lm ln lo lp lq lr ls lt lu lv lw lx ij bi translated">还有一个GET请求处理程序，我已经省略了。完整的功能可以在<a class="ae jd" href="https://github.com/prakharrathi25/wikipedia-translator/blob/30e7bd4de6d16d602200f9a0b5d9722c925ad381/wikipedia/views.py#L46" rel="noopener ugc nofollow" target="_blank">这里</a>找到。POST请求处理器处理每个输入字段，并使用文本区域的<strong class="le jh"> name </strong>属性收集翻译。这是一个非常简单而优雅的解决方案，我花了一些时间才想出来。除了这个<a class="ae jd" href="https://stackoverflow.com/questions/72018663/dynamic-length-form-handling-and-data-collection-in-django" rel="noopener ugc nofollow" target="_blank">线程</a>之外，这个没有很多堆栈溢出的答案。</p></div><div class="ab cl kv kw hu kx" role="separator"><span class="ky bw bk kz la lb"/><span class="ky bw bk kz la lb"/><span class="ky bw bk kz la"/></div><div class="ij ik il im in"><h1 id="0153" class="oa mu jg bd mv ob oc od my oe of og nb km oh kn ne kp oi kq nh ks oj kt nk ok bi translated">结论</h1><p id="c38d" class="pw-post-body-paragraph lc ld jg le b lf nm kh lh li nn kk lk ll no ln lo lp np lr ls lt nq lv lw lx ij bi translated">这不应该是一篇精心设计的文章。目的是分享一种解决Django论坛上经常提出的问题的新方法。希望这在将来能派上用场。</p><div class="ip iq gp gr ir ly"><a rel="noopener follow" target="_blank" href="/creating-multipage-applications-using-streamlit-efficiently-b58a58134030"><div class="lz ab fo"><div class="ma ab mb cl cj mc"><h2 class="bd jh gy z fp md fr fs me fu fw jf bi translated">使用Streamlit创建多页面应用程序(高效！)</h2><div class="mg l"><p class="bd b dl z fp md fr fs me fu fw dk translated">towardsdatascience.com</p></div></div><div class="mh l"><div class="ol l mj mk ml mh mm ix ly"/></div></div></a></div><div class="ip iq gp gr ir ly"><a href="https://levelup.gitconnected.com/5-new-features-in-python-3-11-that-makes-it-the-coolest-new-release-in-2022-c9df658ef813" rel="noopener  ugc nofollow" target="_blank"><div class="lz ab fo"><div class="ma ab mb cl cj mc"><h2 class="bd jh gy z fp md fr fs me fu fw jf bi translated">Python 3.11中的5个新特性使其成为2022年最酷的新版本</h2><div class="mf l"><h3 class="bd b gy z fp md fr fs me fu fw dk translated">讨论Python 3.11中的新特性和更新，以及如何安装3.11 Alpha版本</h3></div><div class="mg l"><p class="bd b dl z fp md fr fs me fu fw dk translated">levelup.gitconnected.com</p></div></div><div class="mh l"><div class="om l mj mk ml mh mm ix ly"/></div></div></a></div></div></div>    
</body>
</html>