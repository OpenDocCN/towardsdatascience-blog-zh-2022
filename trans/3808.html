<html>
<head>
<title>Lambda Functions in Python: All You Need To Know</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Python中的Lambda函数:您需要知道的一切</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/lambda-functions-with-3-practical-examples-in-python-f4ed7f266e53#2022-08-24">https://towardsdatascience.com/lambda-functions-with-3-practical-examples-in-python-f4ed7f266e53#2022-08-24</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><h2 id="e662" class="ir is it bd b dl iu iv iw ix iy iz dk ja translated" aria-label="kicker paragraph">数据科学</h2><div class=""/><div class=""><h2 id="37f9" class="pw-subtitle-paragraph jz jc it bd b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq dk translated">从真实和最实际的例子中学习</h2></div><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi kr"><img src="../Images/e03be0bdd984f0e75c66611003855b06.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*HWTyofCTFwtUv6y6Romjbw.jpeg"/></div></div><p class="ld le gj gh gi lf lg bd b be z dk translated">加里·巴特菲尔德在<a class="ae lh" href="https://unsplash.com/?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure><p id="cfa7" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated"><strong class="lk jd"> Lambda —明智地使用它！！</strong>💡</p><p id="d84b" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">Python是强大的数据分析语言，不仅因为它易于使用，而且它提供了大量的内置函数和方法来处理数据。</p><p id="5b1c" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">Lambda函数是Python中非常有用的函数之一，这使得在一行代码中定义和使用该函数变得非常容易。因此，了解它的来龙去脉，以便在您的数据分析任务中无缝地使用它是很好的。</p><p id="fd99" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">所以，这里我列举了lambda函数的3个实际用例，并附有例子。你也会发现为什么以及什么时候不使用lambda函数。🏆</p><p id="f747" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">尽管这是一个快速阅读，您可以使用下面的索引直接导航到您最喜欢的部分。</p><pre class="ks kt ku kv gt me mf mg mh aw mi bi"><span id="4e09" class="mj mk it mf b gy ml mm l mn mo"><strong class="mf jd">· </strong><a class="ae lh" href="#7bd9" rel="noopener ugc nofollow"><strong class="mf jd">What is Lambda Function in Python?</strong></a><strong class="mf jd"><br/>· </strong><a class="ae lh" href="#f0ac" rel="noopener ugc nofollow"><strong class="mf jd">Filter a List using Lambda Function</strong></a><strong class="mf jd"><br/>· </strong><a class="ae lh" href="#e054" rel="noopener ugc nofollow"><strong class="mf jd">Use Lambda function in map()</strong></a><strong class="mf jd"><br/>· </strong><a class="ae lh" href="#63a1" rel="noopener ugc nofollow"><strong class="mf jd">Use Lambda function in apply()</strong></a><strong class="mf jd"><br/>· </strong><a class="ae lh" href="#311e" rel="noopener ugc nofollow"><strong class="mf jd">When not to use a Lambda function</strong></a><br/>  ∘ <a class="ae lh" href="#ae35" rel="noopener ugc nofollow">Assigning a lambda expression to a variable</a><br/>  ∘ <a class="ae lh" href="#52a7" rel="noopener ugc nofollow">Passing function inside lambda function</a><br/>  ∘ <a class="ae lh" href="#41ca" rel="noopener ugc nofollow">Use lambda function when one-liner is poor choice</a></span></pre><p id="226b" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">在开始使用用例之前，让我们快速了解一下什么是lambda函数以及如何使用它。</p><h1 id="7bd9" class="mp mk it bd mq mr ms mt mu mv mw mx my ki mz kj na kl nb km nc ko nd kp ne nf bi translated">Python中Lambda函数是什么？</h1><p id="43d7" class="pw-post-body-paragraph li lj it lk b ll ng kd ln lo nh kg lq lr ni lt lu lv nj lx ly lz nk mb mc md im bi translated">它是匿名函数或者没有名字的函数。与Python中的其他用户定义函数不同，lambda函数可以在同一行代码中定义和调用。</p><p id="dfd0" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">这个特性本质上使得它非常便于在需要用最少的代码对多个项目执行重复任务的情况下使用。</p><p id="50b0" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">每个lambda函数都以关键字<code class="fe nl nm nn mf b"><strong class="lk jd">lambda</strong></code>开头，后面是函数参数和函数体。函数参数和正文用冒号隔开即<code class="fe nl nm nn mf b"><strong class="lk jd">:</strong></code>。</p><p id="190c" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">例如，在函数<code class="fe nl nm nn mf b">lambda x: x**2</code>中，<code class="fe nl nm nn mf b"><strong class="lk jd">x</strong></code>是函数参数，<code class="fe nl nm nn mf b"><strong class="lk jd">x**2</strong></code>是表达式，即函数体。您可以对单个变量应用此函数，如下所示:</p><pre class="ks kt ku kv gt me mf mg mh aw mi bi"><span id="dcb7" class="mj mk it mf b gy ml mm l mn mo"><strong class="mf jd">(lambda x:x**2)(5)</strong></span><span id="7dc7" class="mj mk it mf b gy no mm l mn mo"># Output<br/><strong class="mf jd">25</strong></span></pre><p id="d26f" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">所以表达式中提到的运算(<em class="np">在这里是</em> <code class="fe nl nm nn mf b"><em class="np">x**2</em></code> <em class="np">是</em> <code class="fe nl nm nn mf b"><em class="np">x</em></code>的平方)是对数字<em class="np"> 5 </em>执行的。</p><p id="b433" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">📌注意:你可以在lambda函数中包含任意多个参数，但是函数体只能有一个表达式。这使得它不同于其他用户定义的函数。</p><p id="74ec" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">现在，让我们看看这个神奇功能的最实际的用例。</p></div><div class="ab cl nq nr hx ns" role="separator"><span class="nt bw bk nu nv nw"/><span class="nt bw bk nu nv nw"/><span class="nt bw bk nu nv"/></div><div class="im in io ip iq"><h1 id="f0ac" class="mp mk it bd mq mr nx mt mu mv ny mx my ki nz kj na kl oa km nc ko ob kp ne nf bi translated">使用Lambda函数过滤列表</h1><p id="489e" class="pw-post-body-paragraph li lj it lk b ll ng kd ln lo nh kg lq lr ni lt lu lv nj lx ly lz nk mb mc md im bi translated">lambda函数的一个最简单的用例是根据特定的标准过滤给定的列表。为此，您可以将lambda函数与另一个内置函数<code class="fe nl nm nn mf b"><strong class="lk jd">filter()</strong></code>一起使用。</p><p id="3597" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">在Python中，<code class="fe nl nm nn mf b">filter()</code>被应用于一个可迭代对象，比如一个列表或一个字典，以创建一个新的可迭代对象，它本质上只包含原始可迭代对象中满足特定条件的那些项。这个条件是用一个函数定义的。</p><p id="66b5" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">由于filter()的语法是<code class="fe nl nm nn mf b"><strong class="lk jd">filter(function, iterable)</strong></code>，从逻辑上讲，lambda函数可用于定义在filter()中使用的条件。</p><p id="4e55" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">例如，您有一个从2到50、间隔为3的数字列表。而你只想得到那些平方小于100的数字。所以这个条件可以定义为λ函数如下—</p><pre class="ks kt ku kv gt me mf mg mh aw mi bi"><span id="b591" class="mj mk it mf b gy ml mm l mn mo"><strong class="mf jd">lambda x:x**2&lt;100</strong></span></pre><p id="574b" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">它可以用在这样的过滤器中，</p><pre class="ks kt ku kv gt me mf mg mh aw mi bi"><span id="410b" class="mj mk it mf b gy ml mm l mn mo">import numpy as np<br/>yourlist = list(np.arange(2,50,3))<br/><strong class="mf jd">list(filter(lambda x:x**2&lt;100, yourlist))</strong></span><span id="1974" class="mj mk it mf b gy no mm l mn mo"># Output <br/><strong class="mf jd">[2, 5, 8]</strong></span></pre><p id="a33a" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">如果看一下中间步骤<code class="fe nl nm nn mf b"><strong class="lk jd">filter(lambda x:x**2&lt;100, yourlist)</strong></code>，它返回一个<em class="np"> filter对象</em>，确实需要转换成list或set之类的数据结构，这是在上面最后一行代码中完成的。</p><p id="f122" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">当然，对于函数中的复杂计算，您应该使用普通的用户定义函数，但是当您的函数只有一个表达式时，lambda函数是最佳选择。💯</p><p id="d03b" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">接下来，除了过滤列表，了解如何对iterable的每一项应用函数也是很有趣的。</p><h1 id="e054" class="mp mk it bd mq mr ms mt mu mv mw mx my ki mz kj na kl nb km nc ko nd kp ne nf bi translated">在map()中使用Lambda函数</h1><p id="2451" class="pw-post-body-paragraph li lj it lk b ll ng kd ln lo nh kg lq lr ni lt lu lv nj lx ly lz nk mb mc md im bi translated">在Python中，<code class="fe nl nm nn mf b"><strong class="lk jd">map()</strong></code>是在iterable的每一项上映射或操作传递函数的函数。</p><p id="2ffc" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">它的语法与前面的函数<code class="fe nl nm nn mf b"><strong class="lk jd">map(function, iterable)</strong></code>相同。因此，就像您在filter()中所做的那样，您可以在map()中传递lambda函数。</p><p id="b363" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">例如，假设你想得到列表中每一项的平方和立方之和。所以λ函数会是，</p><pre class="ks kt ku kv gt me mf mg mh aw mi bi"><span id="b576" class="mj mk it mf b gy ml mm l mn mo"><strong class="mf jd">lambda x: x**2+x**3</strong></span></pre><p id="36c1" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">与filter()类似，map()函数返回需要转换成其他数据结构的地图对象。因此可以获得所需的结果，</p><pre class="ks kt ku kv gt me mf mg mh aw mi bi"><span id="e00f" class="mj mk it mf b gy ml mm l mn mo"><strong class="mf jd">list(map(lambda x: x**2+x**3, yourlist))</strong></span><span id="1ec0" class="mj mk it mf b gy no mm l mn mo"># Output<br/>[12,<br/> 150,<br/> 576,<br/> 1452,<br/> 2940,<br/> 5202,<br/> 8400,<br/> 12696,<br/> 18252,<br/> 25230,<br/> 33792,<br/> 44100,<br/> 56316,<br/> 70602,<br/> 87120,<br/> 106032]</span></pre><p id="18ed" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">但是，这是一个非常简单的例子，对吗？？</p><p id="230a" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">在另一个例子中，假设你有两个相同长度的列表<code class="fe nl nm nn mf b">mylist</code>和<code class="fe nl nm nn mf b">yourlist</code>——</p><pre class="ks kt ku kv gt me mf mg mh aw mi bi"><span id="882b" class="mj mk it mf b gy ml mm l mn mo">mylist = list(np.arange(4,52,3))<br/>yourlist = list(np.arange(2,50,3))</span></pre><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div class="gh gi oc"><img src="../Images/bb7d5f17a79196f54242c30863bce8fd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1022/format:webp/1*SaEtlfby2s9rPMancoQBwQ.png"/></div><p class="ld le gj gh gi lf lg bd b be z dk translated">使用numpy arange | Image by Author创建列表</p></figure><p id="8fd3" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">你想得到两个列表中相同位置的元素的平方的相加。使用下面的<code class="fe nl nm nn mf b">map()</code>功能，这非常简单</p><pre class="ks kt ku kv gt me mf mg mh aw mi bi"><span id="c04a" class="mj mk it mf b gy ml mm l mn mo">list(map(<strong class="mf jd">lambda x,y: x**2+y**2</strong>, <strong class="mf jd">yourlist,mylist</strong>))</span></pre><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div class="gh gi od"><img src="../Images/4ca18f778f31776a64bf5671489649a1.png" data-original-src="https://miro.medium.com/v2/resize:fit:880/format:webp/1*kRknh2wvCABfw-vTiwo8sQ.png"/></div><p class="ld le gj gh gi lf lg bd b be z dk translated">带有两个参数的lambda函数|作者图片</p></figure><blockquote class="oe of og"><p id="b1a7" class="li lj np lk b ll lm kd ln lo lp kg lq oh ls lt lu oi lw lx ly oj ma mb mc md im bi translated">请注意，由于您在lambda函数中定义了两个变量x和y，因此您需要在map函数中提供两个可迭代变量，即yourlist和mylist。</p></blockquote><p id="9e21" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">这些iterable在map()甚至filter()中的顺序很重要，因为第一个iterable总是作为x传递，而第二个iterable作为y传递。💯</p><p id="89de" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">接下来，您还可以使用lambda函数来转换熊猫系列对象。</p><h1 id="63a1" class="mp mk it bd mq mr ms mt mu mv mw mx my ki mz kj na kl nb km nc ko nd kp ne nf bi translated">在apply()中使用Lambda函数</h1><p id="f596" class="pw-post-body-paragraph li lj it lk b ll ng kd ln lo nh kg lq lr ni lt lu lv nj lx ly lz nk mb mc md im bi translated">熊猫系列实际上是索引数据的一维数组。与列表不同，序列总是包含相同数据类型的数据。这是熊猫数据框架的基础，数据框架的每一列都是熊猫系列。</p><p id="d0e1" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">要转换pandas系列，可以使用apply()函数。顾名思义，它用于在熊猫系列上应用一个功能。</p><p id="9840" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">让我们创建一个熊猫系列，通过一个例子来理解这个概念。</p><pre class="ks kt ku kv gt me mf mg mh aw mi bi"><span id="a9d4" class="mj mk it mf b gy ml mm l mn mo">myseries = pd.Series(mylist)<br/>myseries</span></pre><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div class="gh gi ok"><img src="../Images/01e489b0546cbfb6a508cef6db8cad06.png" data-original-src="https://miro.medium.com/v2/resize:fit:538/format:webp/1*WncGFDGcPC8euPRAGwN_fQ.png"/></div><p class="ld le gj gh gi lf lg bd b be z dk translated">根据作者列表|图片创建熊猫系列</p></figure><p id="b86c" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">apply()的语法与前两个函数略有不同，但逻辑是相同的——apply()中传递的函数应用于系列的每个元素。💯</p><p id="37de" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">举个例子，假设你想在<em class="np"> myseries </em>的每个元素中加5，然后除以相同元素的平方。因此lambda函数将为<code class="fe nl nm nn mf b">lambda x: (x+5)/x**2</code>并且它可以在apply中使用，如下所示，</p><pre class="ks kt ku kv gt me mf mg mh aw mi bi"><span id="fc0d" class="mj mk it mf b gy ml mm l mn mo"><strong class="mf jd">myseries.apply(lambda x: (x+5)/x**2)</strong></span></pre><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div class="gh gi ol"><img src="../Images/b21c324b3b170b3a6562835533a0e2f4.png" data-original-src="https://miro.medium.com/v2/resize:fit:676/format:webp/1*h__ewe0giU5MAbjCEgixPQ.png"/></div><p class="ld le gj gh gi lf lg bd b be z dk translated">lambda函数与熊猫系列应用()|图片作者</p></figure><p id="5ce2" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">与前两个函数不同，您不需要将iterable或series传递给apply()，而是可以使用<code class="fe nl nm nn mf b">.apply(function)</code>直接在series上使用它。</p><p id="1374" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">与其应用于单个系列，不如在DataFrame中使用它更有意义。例如，你在DataFrame <code class="fe nl nm nn mf b">df</code>中有一个<a class="ae lh" href="https://github.com/17rsuraj/data-curious/blob/master/TowardsDataScience/Dummy_Sales_Data_v1.csv" rel="noopener ugc nofollow" target="_blank"> <em class="np">虚拟销售数据</em> </a>(可以从<a class="ae lh" href="https://github.com/17rsuraj" rel="noopener ugc nofollow" target="_blank"> <strong class="lk jd"> Github </strong> </a>的<a class="ae lh" href="https://github.com/17rsuraj/data-curious/blob/master/LICENSE.md" rel="noopener ugc nofollow" target="_blank"> MIT license </a>下免费下载)。</p><pre class="ks kt ku kv gt me mf mg mh aw mi bi"><span id="0649" class="mj mk it mf b gy ml mm l mn mo">df = pd.read_csv("Dummy_Sales_Data_v1.csv")<br/>df.head()</span></pre><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi om"><img src="../Images/7403b9a2363f3e7fd5a7c83b6f248c1d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7z8LkudY9xwtUzbrJ-BtOQ.png"/></div></div><p class="ld le gj gh gi lf lg bd b be z dk translated">虚拟销售数据|作者图片</p></figure><p id="db71" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">你想让每个销售经理的名字都大写。这可以通过使用<strong class="lk jd">中的lambda函数轻松完成。应用()</strong>方法。</p><pre class="ks kt ku kv gt me mf mg mh aw mi bi"><span id="6a53" class="mj mk it mf b gy ml mm l mn mo">df["Sales_Manager"] = df["Sales_Manager"]<strong class="mf jd">.apply(lambda x: x.upper())</strong><br/>df.head()</span></pre><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi on"><img src="../Images/8846febd52ac1ad0ce8a23dbcc4f8ead.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*B6gReagh4cipmDdUNbdpng.png"/></div></div><p class="ld le gj gh gi lf lg bd b be z dk translated">熊猫数据帧中的Lambda函数apply() |图片由作者提供</p></figure><p id="eef9" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">您可以简单地在任何列上使用<code class="fe nl nm nn mf b">.apply()</code>，使用lambda函数定义一个快速转换，并将结果赋回原始列。💯</p><blockquote class="oo"><p id="635d" class="op oq it bd or os ot ou ov ow ox md dk translated">。带有lambda函数的apply()比str.upper()快1.4倍</p></blockquote><p id="c0c5" class="pw-post-body-paragraph li lj it lk b ll oy kd ln lo oz kg lq lr pa lt lu lv pb lx ly lz pc mb mc md im bi translated">当你比较<code class="fe nl nm nn mf b">.apply()</code>和lambda函数用string方法做同样的转换，可以看到前者比后者快。而如果用for loop来比较，那么<code class="fe nl nm nn mf b">.apply()</code>比<strong class="lk jd"> <em class="np">快300X </em> </strong>。</p><p id="d53c" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">我个人发现带有lambda函数的<code class="fe nl nm nn mf b"><strong class="lk jd">.apply()</strong></code>在我的大部分数据分析任务中非常有用。</p><p id="92a1" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">当您学习了如何以及何时可以在Python中使用lambda函数时，知道何时不使用它也很重要。🎯</p><h1 id="311e" class="mp mk it bd mq mr ms mt mu mv mw mx my ki mz kj na kl nb km nc ko nd kp ne nf bi translated">何时不使用Lambda函数</h1><p id="1b6e" class="pw-post-body-paragraph li lj it lk b ll ng kd ln lo nh kg lq lr ni lt lu lv nj lx ly lz nk mb mc md im bi translated">当然，很少有Lambda函数的用例不是由<a class="ae lh" href="https://peps.python.org/pep-0008/#programming-recommendations" rel="noopener ugc nofollow" target="_blank"> Python标准编码指南</a>推荐的。</p><p id="fbce" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">在以下3种情况下使用lambda函数没有错，但这不是最佳实践，因此应该避免。</p><h2 id="ae35" class="mj mk it bd mq pd pe dn mu pf pg dp my lr ph pi na lv pj pk nc lz pl pm ne iz bi translated">将lambda表达式赋给变量</h2><p id="0d66" class="pw-post-body-paragraph li lj it lk b ll ng kd ln lo nh kg lq lr ni lt lu lv nj lx ly lz nk mb mc md im bi translated">当你需要一个简单的函数时，你可能会想到使用lambda函数来定义它，并在需要时使用它。但是，这不是最佳做法。</p><p id="0c22" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated"><a class="ae lh" href="https://python-reference.readthedocs.io/en/latest/docs/operators/lambda.html" rel="noopener ugc nofollow" target="_blank">根据定义</a>，lambda是一个匿名函数，因此将其存储在一个变量中以备将来使用并不是一个好主意。</p><p id="80fe" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">例如，假设你想得到两个数的平方和，你想在你的项目中多次进行这种转换，</p><p id="02dc" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">不好的做法❌</p><pre class="ks kt ku kv gt me mf mg mh aw mi bi"><span id="2f4a" class="mj mk it mf b gy ml mm l mn mo">squared_sum = lambda x,y: x**2 + y**2<br/>squared_sum(3,4)</span><span id="1ab5" class="mj mk it mf b gy no mm l mn mo">#Output<br/>25</span></pre><p id="7893" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">✅最佳实践</p><pre class="ks kt ku kv gt me mf mg mh aw mi bi"><span id="6b24" class="mj mk it mf b gy ml mm l mn mo">def squared_sum(x,y):<br/>    return x**2 + y**2</span><span id="d98b" class="mj mk it mf b gy no mm l mn mo">#Output<br/>25</span></pre><p id="5f5b" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">当你想多次使用同一个代码块时，通常使用用户定义的函数。因此，在这种情况下，它应该优于lambda函数。</p><p id="c179" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">而且，我还观察到很多数据专业人士在lambda函数中传递一个标准函数比如<code class="fe nl nm nn mf b">sqrt</code>，这并不是一个好的做法。</p><h2 id="52a7" class="mj mk it bd mq pd pe dn mu pf pg dp my lr ph pi na lv pj pk nc lz pl pm ne iz bi translated">在lambda函数中传递函数</h2><p id="ad4b" class="pw-post-body-paragraph li lj it lk b ll ng kd ln lo nh kg lq lr ni lt lu lv nj lx ly lz nk mb mc md im bi translated">当您想要在map()或filter()或apply()方法中使用函数时，就会出现这种情况。这包括所有内置函数和用户定义的函数，这些函数只接受一个参数。</p><p id="d522" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">例如，假设您有一个数字列表，并想得到这些数字的平方根。这可以通过使用<strong class="lk jd"> math </strong>库中的内置函数<strong class="lk jd"> sqrt </strong>获得。</p><p id="e26b" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">不好的做法❌</p><pre class="ks kt ku kv gt me mf mg mh aw mi bi"><span id="1a59" class="mj mk it mf b gy ml mm l mn mo">import math<br/>mylist = [10, 25, 40, 49, 65, 81]<br/>sqrt_list = list(map(lambda x: math.sqrt(x), mylist))<br/>sqrt_list</span><span id="fd97" class="mj mk it mf b gy no mm l mn mo">#output<br/>[3.1622776601683795, 5.0, 6.324555320336759, 7.0, 8.06225774829855, 9.0]</span></pre><p id="6af9" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">✅最佳实践</p><pre class="ks kt ku kv gt me mf mg mh aw mi bi"><span id="0090" class="mj mk it mf b gy ml mm l mn mo">import math<br/>mylist = [10, 25, 40, 49, 65, 81]<br/>sqrt_list = list(map(math.sqrt, mylist))<br/>sqrt_list</span><span id="e229" class="mj mk it mf b gy no mm l mn mo">#output<br/>[3.1622776601683795, 5.0, 6.324555320336759, 7.0, 8.06225774829855, 9.0]</span></pre><p id="35d7" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">来自<strong class="lk jd"> math </strong>库的内置函数<strong class="lk jd"> sqrt </strong>可以直接在map()函数中使用。在lambda函数中使用它是不必要的，而且会影响性能。</p><p id="e2ea" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">如果您比较上面两种在lambda函数中传递另一个函数的方法，并对每种方法运行100000次迭代，您会发现最佳方法总能提高性能。💯</p><blockquote class="oo"><p id="e4c9" class="op oq it bd or os ot ou ov ow ox md dk translated">将函数直接传递给map()要快1.8倍！！</p></blockquote><p id="85de" class="pw-post-body-paragraph li lj it lk b ll oy kd ln lo oz kg lq lr pa lt lu lv pb lx ly lz pc mb mc md im bi translated">用户定义的函数也是如此。</p><p id="7374" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">接下来，Python中的一行程序非常受欢迎，编码人员通常会上当。然而，一行程序并不总是最好的选择，在这种情况下使用lambda函数甚至会降低代码的可读性并使其难以维护。</p><h2 id="41ca" class="mj mk it bd mq pd pe dn mu pf pg dp my lr ph pi na lv pj pk nc lz pl pm ne iz bi translated">当一行程序不是好的选择时，使用lambda函数</h2><p id="d2e9" class="pw-post-body-paragraph li lj it lk b ll ng kd ln lo nh kg lq lr ni lt lu lv nj lx ly lz nk mb mc md im bi translated">当您在lambda函数中使用复杂的运算(如if-else条件或简单的多重运算)时，实际的lambda函数定义会变得更长。</p><p id="7b19" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">当您在一行程序中使用这样的lambda函数时，您的一行代码不再适合一行。</p><blockquote class="oe of og"><p id="ac27" class="li lj np lk b ll lm kd ln lo lp kg lq oh ls lt lu oi lw lx ly oj ma mb mc md im bi translated">根据<a class="ae lh" href="https://peps.python.org/pep-0008/#maximum-line-length" rel="noopener ugc nofollow" target="_blank"> PEP8指南</a>，将所有行限制为最多79个字符。</p></blockquote><p id="a5fe" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">由于代码写在多行上，因此很难有效地阅读代码并在需要时进行调试。</p><p id="a14c" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">例如，你在DataFrame df中有一个<a class="ae lh" href="https://github.com/17rsuraj/data-curious/blob/master/TowardsDataScience/Dummy_Sales_Data_v1.csv" rel="noopener ugc nofollow" target="_blank"> <em class="np">虚拟销售数据</em> </a>(可以在<a class="ae lh" href="https://github.com/17rsuraj/data-curious/blob/master/LICENSE.md" rel="noopener ugc nofollow" target="_blank"> MIT license </a>下从<a class="ae lh" href="https://github.com/17rsuraj" rel="noopener ugc nofollow" target="_blank"> Github </a>免费下载)。</p><pre class="ks kt ku kv gt me mf mg mh aw mi bi"><span id="1907" class="mj mk it mf b gy ml mm l mn mo">df = pd.read_csv("Dummy_Sales_Data_v1.csv")<br/>df.head()</span></pre><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi pn"><img src="../Images/7938ba607cca3adb2e174fd004514d93.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9rYZP7a-pb7wJA8dk4wS_g.png"/></div></div><p class="ld le gj gh gi lf lg bd b be z dk translated">虚拟销售数据|作者图片</p></figure><p id="1808" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">并且您想要创建一个具有<em class="np">最终状态</em>的新列，这样，如果<em class="np">状态</em>列包含<em class="np">‘已交付’</em>或<em class="np">‘已装运’</em>，则最终状态将为<em class="np">‘已完成’</em>，否则将为<em class="np">‘未完成’</em></p><p id="8f6f" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">一句俏皮话和糟糕的做法❌</p><pre class="ks kt ku kv gt me mf mg mh aw mi bi"><span id="59fd" class="mj mk it mf b gy ml mm l mn mo">df["FinalStatus"] = df["Status"].map(lambda x: 'Completed' if x == 'Delivered' or x == 'Shipped' else 'Not Completed')</span></pre><p id="ed12" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">这一行包含118个字符，并且扩展到一行之外。所以很难读懂。</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi po"><img src="../Images/35493218245aa994e796d4cc160811fb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*cTQZpLS09elvv_2pDBRgWw.png"/></div></div><p class="ld le gj gh gi lf lg bd b be z dk translated">使用和不使用Lambda函数的相同输出|作者的图像</p></figure><p id="e8cd" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">虽然它给你正确的输出，我推荐下面的最佳做法。✅</p><pre class="ks kt ku kv gt me mf mg mh aw mi bi"><span id="f618" class="mj mk it mf b gy ml mm l mn mo">df["FinalStatus"] = ''</span><span id="7516" class="mj mk it mf b gy no mm l mn mo">df.loc[(df["Status"] == 'Delivered') |<br/>       (df["Status"] == 'Shipped'),<br/>       'FinalStatus'] = 'Completed'</span><span id="8888" class="mj mk it mf b gy no mm l mn mo">df.loc[(df["Status"] == 'Not Delivered') |<br/>       (df["Status"] == 'Not Shipped'),<br/>       'FinalStatus'] = 'Not Completed'</span></pre><p id="2ed4" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">一般来说，当您想要基于多个条件过滤数据集时，一个线性并不是很好的选择。相当容易地将代码分成多行，以提高其可读性。</p><p id="f7cb" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">我个人经常使用这种最佳实践，因为它让您对代码有更多的控制，并且如果需要，您可以随时添加更多的条件。🏆</p><p id="ea9d" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">关于Python中的lambda函数你就知道这么多了！</p></div><div class="ab cl nq nr hx ns" role="separator"><span class="nt bw bk nu nv nw"/><span class="nt bw bk nu nv nw"/><span class="nt bw bk nu nv"/></div><div class="im in io ip iq"><p id="2f99" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">我希望你发现这篇文章非常有用，令人耳目一新，并且你学会了在Python中什么时候使用(<em class="np">和什么时候不使用</em> ) lambda函数。我确信，读完这篇文章后，你可以毫不费力地明智地使用lambda函数。</p><p id="9f78" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">过去4年多以来，我一直在使用Python进行数据分析，并发现lambda函数在我这里提到的某些场景中非常有用。</p><blockquote class="oo"><p id="9f50" class="op oq it bd or os ot ou ov ow ox md dk translated">有兴趣阅读媒体上的所有故事吗？？</p></blockquote><p id="4dbf" class="pw-post-body-paragraph li lj it lk b ll oy kd ln lo oz kg lq lr pa lt lu lv pb lx ly lz pc mb mc md im bi translated">💡考虑<a class="ae lh" href="https://medium.com/@17.rsuraj/membership" rel="noopener"> <strong class="lk jd">成为媒介会员</strong></a><strong class="lk jd">可以在媒介上无限制的访问</strong>我和<em class="np">百万其他作家写的故事</em>！。我会得到一小部分你的费用，没有额外的费用给你。</p><p id="75be" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">💡请务必<a class="ae lh" href="https://medium.com/subscribe/@17.rsuraj" rel="noopener"> <strong class="lk jd">注册我的电子邮件列表</strong> </a>以免错过另一篇关于数据科学指南、技巧和提示、SQL和Python的文章。</p><p id="0a1e" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated"><strong class="lk jd">感谢您的阅读！</strong></p></div></div>    
</body>
</html>