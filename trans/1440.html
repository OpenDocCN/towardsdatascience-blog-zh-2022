<html>
<head>
<title>From Scatter Plot to Story: The Seaborn Edition</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">从散点图到故事:Seaborn版</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/from-scatter-plot-to-story-the-seaborn-edition-fb15f3c4cd72#2022-04-08">https://towardsdatascience.com/from-scatter-plot-to-story-the-seaborn-edition-fb15f3c4cd72#2022-04-08</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="4cff" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">通过增强散点图讲述完整的故事</h2></div><h1 id="74dd" class="ki kj it bd kk kl km kn ko kp kq kr ks jz kt ka ku kc kv kd kw kf kx kg ky kz bi translated">概观</h1><p id="94bf" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">就绘图而言，散点图是最受欢迎的。它们迅速揭示了两个(或更多)变量之间的关系。如果做得好，散点图可以很快传达给观众一个完整的故事。你的目标是让你的听众对自己说…</p><blockquote class="lw"><p id="47a3" class="lx ly it bd lz ma mb mc md me mf lv dk translated">我们知道现在该做什么…</p></blockquote><p id="a6ab" class="pw-post-body-paragraph la lb it lc b ld mg ju lf lg mh jx li lj mi ll lm ln mj lp lq lr mk lt lu lv im bi translated">理想情况下，你的散点图将在瞬间激发上述意识。这篇文章将展示如何将你的可视化从一个简单的散点图变成一个完整的故事。这是Seaborn版。后续文章将在基础Matplotlib和Stata中展示相同的内容。</p><h1 id="a4ce" class="ki kj it bd kk kl km kn ko kp kq kr ks jz kt ka ku kc kv kd kw kf kx kg ky kz bi translated">背景</h1><p id="4692" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">你的工作是帮助决定你的公司应该购买什么样的车辆，因为它希望扩大其企业车队。还有，现在是1978年。我们假设现在是1978年，因为我们有这一年的数据。</p><p id="b322" class="pw-post-body-paragraph la lb it lc b ld ml ju lf lg mm jx li lj mn ll lm ln mo lp lq lr mp lt lu lv im bi translated">我以前写过这些数据。</p><div class="mq mr gp gr ms mt"><a rel="noopener follow" target="_blank" href="/three-datasets-i-often-use-as-examples-c70ec5b2f793"><div class="mu ab fo"><div class="mv ab mw cl cj mx"><h2 class="bd iu gy z fp my fr fs mz fu fw is bi translated">我经常使用的三个数据集作为例子</h2><div class="na l"><h3 class="bd b gy z fp my fr fs mz fu fw dk translated">这篇文章强调了三个数据集，我把它们作为自己或他人的例子。</h3></div><div class="nb l"><p class="bd b dl z fp my fr fs mz fu fw dk translated">towardsdatascience.com</p></div></div><div class="nc l"><div class="nd l ne nf ng nc nh ni mt"/></div></div></a></div><p id="7d29" class="pw-post-body-paragraph la lb it lc b ld ml ju lf lg mm jx li lj mn ll lm ln mo lp lq lr mp lt lu lv im bi translated">这些数据告诉我们大约74辆车。我们知道每辆车的品牌、价格、效率(mpg)和其他因素。</p><p id="2b6d" class="pw-post-body-paragraph la lb it lc b ld ml ju lf lg mm jx li lj mn ll lm ln mo lp lq lr mp lt lu lv im bi translated">我们公司规定最低效率要求是每加仑16英里，但我们的最佳效率标准是每加仑29英里。分析任务是在最佳效率标准之上找到最具成本效益的车辆，同时也是最重的(将是最重型的)。</p><h1 id="7571" class="ki kj it bd kk kl km kn ko kp kq kr ks jz kt ka ku kc kv kd kw kf kx kg ky kz bi translated">入门指南</h1><p id="92fd" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">最容易查看的图是简单的散点图。在Seaborn的帮助下，看起来像这样:</p><pre class="nj nk nl nm gt nn no np nq aw nr bi"><span id="7b34" class="ns kj it no b gy nt nu l nv nw">import pandas as pd<br/>import matplotlib.pyplot as plt<br/>import seaborn as sns</span><span id="ed1b" class="ns kj it no b gy nx nu l nv nw">df = pd.read_stata('<a class="ae ny" href="http://www.stata-press.com/data/r15/auto2.dta'" rel="noopener ugc nofollow" target="_blank">http://www.stata-press.com/data/r15/auto2.dta'</a>)</span><span id="bb6e" class="ns kj it no b gy nx nu l nv nw">plt.figure()<br/>ax = sns.scatterplot(data=df, <br/>                     x="weight", y="mpg", <br/>                     color = '#060b3f')<br/>plt.show()</span></pre><p id="dabf" class="pw-post-body-paragraph la lb it lc b ld ml ju lf lg mm jx li lj mn ll lm ln mo lp lq lr mp lt lu lv im bi translated">对于下面的结果(这不是很有帮助，也不是有益的，也不是艺术):</p><figure class="nj nk nl nm gt oa gh gi paragraph-image"><div role="button" tabindex="0" class="ob oc di od bf oe"><div class="gh gi nz"><img src="../Images/15063ecafae8d8ddc53343dcada2bb05.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*eCSB5GxAgssw6XOCn6L_AQ.png"/></div></div><p class="og oh gj gh gi oi oj bd b be z dk translated">作者的再现。使用此处指定的数据和代码。</p></figure><h1 id="128a" class="ki kj it bd kk kl km kn ko kp kq kr ks jz kt ka ku kc kv kd kw kf kx kg ky kz bi translated">尺寸、比例、大小和标签</h1><p id="87ff" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">美化这种视觉效果的一些首要任务是:</p><ul class=""><li id="7710" class="ok ol it lc b ld ml lg mm lj om ln on lr oo lv op oq or os bi translated">更改尺寸(更加水平，以适合我们的目标8.5 x 11英寸页面报告。</li><li id="4ac1" class="ok ol it lc b ld ot lg ou lj ov ln ow lr ox lv op oq or os bi translated">指定将减少混乱的刻度和刻度线。</li><li id="94ba" class="ok ol it lc b ld ot lg ou lj ov ln ow lr ox lv op oq or os bi translated">添加精细的网格线，帮助读者将各个数据点与它们在y轴上的位置联系起来。</li><li id="d6d0" class="ok ol it lc b ld ot lg ou lj ov ln ow lr ox lv op oq or os bi translated">并更新轴标签以提供更好的信息。</li></ul><pre class="nj nk nl nm gt nn no np nq aw nr bi"><span id="50eb" class="ns kj it no b gy nt nu l nv nw">plt.figure(figsize = (15,6))<br/>ax = sns.scatterplot(data=df, <br/>                     x="weight", <br/>                     y="mpg", <br/>                     color = '#060b3f')<br/>ax.set(xlabel='Weight (lbs).', ylabel='Mileage (mpg).')<br/>ax.yaxis.grid(True, color = '#CCCCFF')<br/>plt.xticks(np.arange(2000, 6000, 1000))<br/>plt.yticks(np.arange(10, 45, 10))<br/>plt.show()</span></pre><p id="e7e7" class="pw-post-body-paragraph la lb it lc b ld ml ju lf lg mm jx li lj mn ll lm ln mo lp lq lr mp lt lu lv im bi translated">对于以下结果:</p><figure class="nj nk nl nm gt oa gh gi paragraph-image"><div role="button" tabindex="0" class="ob oc di od bf oe"><div class="gh gi oy"><img src="../Images/a5386f81bf82622093388f949c0373ac.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Q4HQuKsJzVPiGHZnOJUqZQ.png"/></div></div><p class="og oh gj gh gi oi oj bd b be z dk translated">作者的再现。使用此处指定的数据和代码。</p></figure><h1 id="3bcb" class="ki kj it bd kk kl km kn ko kp kq kr ks jz kt ka ku kc kv kd kw kf kx kg ky kz bi translated">设置上下文(可选)</h1><p id="3859" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">Seaborn的一个特性是能够设置你的上下文。粗略地说，上下文指定了你想要显示视觉效果的地方。例如，你可以将你的视觉效果放在一张纸上、一个笔记本上、一次会议上或者一张海报上。</p><p id="ac82" class="pw-post-body-paragraph la lb it lc b ld ml ju lf lg mm jx li lj mn ll lm ln mo lp lq lr mp lt lu lv im bi translated">虽然许多人认为这一步是可选的，但我经常支持为海报设置背景。我发现它在任何背景下都是最具可读性的。<code class="fe oz pa pb no b">seaborn.set_context(context='poster')</code>为我们做工作。</p><pre class="nj nk nl nm gt nn no np nq aw nr bi"><span id="247d" class="ns kj it no b gy nt nu l nv nw">plt.figure(figsize = (15,6))<br/>sns.set_context(context='poster')<br/>ax = sns.scatterplot(data=df, <br/>                     x="weight", <br/>                     y="mpg", <br/>                     color = '#060b3f')<br/>ax.yaxis.grid(True, color = '#CCCCFF')<br/>ax.set(xlabel='Weight (lbs).', ylabel='Mileage (mpg).')<br/>plt.xticks(np.arange(2000, 6000, 1000))<br/>plt.yticks(np.arange(10, 45, 10))<br/>plt.show()</span></pre><p id="c792" class="pw-post-body-paragraph la lb it lc b ld ml ju lf lg mm jx li lj mn ll lm ln mo lp lq lr mp lt lu lv im bi translated">对于结果(更大的字体、更大的数据点、更粗的线条等。):</p><figure class="nj nk nl nm gt oa gh gi paragraph-image"><div role="button" tabindex="0" class="ob oc di od bf oe"><div class="gh gi oy"><img src="../Images/205b15c63da6cb71a7f83c3683fe24ea.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zKNC5z5E034BhUbV0G5uJw.png"/></div></div><p class="og oh gj gh gi oi oj bd b be z dk translated">作者的再现。使用此处指定的数据和代码。</p></figure><h1 id="7552" class="ki kj it bd kk kl km kn ko kp kq kr ks jz kt ka ku kc kv kd kw kf kx kg ky kz bi translated">添加参考线</h1><p id="6491" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">这里是商店展示自己的地方。为了勾勒出我们故事的轮廓，我们可以在图形上添加一些额外的信息。我们可以添加与我们公司的效率标准相关的信息。</p><p id="a80f" class="pw-post-body-paragraph la lb it lc b ld ml ju lf lg mm jx li lj mn ll lm ln mo lp lq lr mp lt lu lv im bi translated">这里<code class="fe oz pa pb no b">sns.lineplot()</code>让我们添加水平参考线。而<code class="fe oz pa pb no b">ax.text()</code>让我们注释那些参考线。</p><pre class="nj nk nl nm gt nn no np nq aw nr bi"><span id="f0c8" class="ns kj it no b gy nt nu l nv nw">plt.figure(figsize = (15,6))<br/>sns.lineplot(data=df, x="weight", <br/>             y=[29]*len(df), color = 'green')<br/>ax = sns.scatterplot(data=df, <br/>                     x="weight", <br/>                     y="mpg", <br/>                     color = '#060b3f')<br/>sns.lineplot(data=df, x="weight", <br/>             y=[16]*len(df), color = 'red')<br/>ax.text(3200, 30, <br/>        'Green line indicates optimal efficiency Standards.', <br/>        color = 'green')<br/>ax.text(1800, 15, <br/>        'Red line indicates minimum efficiency requirements.', <br/>        color = 'red')<br/>ax.set(xlabel='Weight (lbs).', <br/>       ylabel='Mileage (mpg).')<br/>ax.yaxis.grid(True, <br/>              color = '#CCCCFF')<br/>plt.xticks(np.arange(2000, 6000, 1000))<br/>plt.yticks(np.arange(10, 45, 10))<br/>plt.show()</span></pre><p id="99e9" class="pw-post-body-paragraph la lb it lc b ld ml ju lf lg mm jx li lj mn ll lm ln mo lp lq lr mp lt lu lv im bi translated">对于几乎最终的结果:</p><figure class="nj nk nl nm gt oa gh gi paragraph-image"><div role="button" tabindex="0" class="ob oc di od bf oe"><div class="gh gi oy"><img src="../Images/75f40f132e6ed1cf31c5f67356cabafe.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*NPd8MZUvAH4-Y0J89lcUdw.png"/></div></div><p class="og oh gj gh gi oi oj bd b be z dk translated">作者的再现。使用此处指定的数据和代码。</p></figure><h1 id="a041" class="ki kj it bd kk kl km kn ko kp kq kr ks jz kt ka ku kc kv kd kw kf kx kg ky kz bi translated">最后，注释特定的数据点</h1><p id="865c" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">最后的亮点是注释一个特定的数据点。这里的版本表明，丰田卡罗拉(每加仑31英里，2200磅)是我们下一轮车队采购的最佳车辆。</p><p id="ba0f" class="pw-post-body-paragraph la lb it lc b ld ml ju lf lg mm jx li lj mn ll lm ln mo lp lq lr mp lt lu lv im bi translated">为了注释一个特定的数据点，这段代码使用了<code class="fe oz pa pb no b">ax.plot()</code>,它指定了一个特殊标记的具体位置(坐标)以及其他标记属性。</p><p id="61e7" class="pw-post-body-paragraph la lb it lc b ld ml ju lf lg mm jx li lj mn ll lm ln mo lp lq lr mp lt lu lv im bi translated">这个最终版本还使用<code class="fe oz pa pb no b">plt.suptitle()</code>和<code class="fe oz pa pb no b">plt.title()</code>添加了标题和副标题。</p><p id="01a0" class="pw-post-body-paragraph la lb it lc b ld ml ju lf lg mm jx li lj mn ll lm ln mo lp lq lr mp lt lu lv im bi translated">最终版本是否完美？不。话说回来，没有一幅画是完美的。然而，这个最终版本展示了如何，通过一些深思熟虑的更新，你可以从散点图到故事。</p><p id="76d9" class="pw-post-body-paragraph la lb it lc b ld ml ju lf lg mm jx li lj mn ll lm ln mo lp lq lr mp lt lu lv im bi translated">在锡伯恩:</p><pre class="nj nk nl nm gt nn no np nq aw nr bi"><span id="1aea" class="ns kj it no b gy nt nu l nv nw">plt.figure(figsize = (15,6))<br/>sns.lineplot(data=df, x="weight", <br/>             y=[29]*len(df), color='green')<br/>ax = sns.scatterplot(data=df, <br/>                     x="weight", <br/>                     y="mpg", <br/>                     color='#060b3f')<br/>sns.lineplot(data=df, x="weight", <br/>             y=[16]*len(df), color='red')<br/>ax.text(3600, 30, <br/>        'Green line indicates optimal efficiency Standards.', <br/>        color='green')<br/>ax.text(1800, 15, <br/>        'Red line indicates minimum efficiency requirements.', <br/>        color='red')<br/>ax.text(2250, 32.2, <br/>        'Toyota Corolla (31mpg 2,200lbs)',<br/>        color = 'green', size = '14')<br/>ax.text(2250, 30.8,<br/>        'Least expensive above optimal', <br/>        color = 'green', size = '14')<br/>ax.set(xlabel='Weight (lbs).', <br/>       ylabel='Mileage (mpg).')<br/>ax.plot(2200, 31, <br/>        'g', marker='$\\bigoplus$', markersize=15)<br/>ax.yaxis.grid(True, color = '#CCCCFF')<br/>plt.suptitle("The 'Best Value' For Fleet Purchases", <br/>             fontsize=20)<br/>plt.title("A Preliminary Analysis",<br/>          fontsize=15)<br/>plt.xticks(np.arange(2000, 6000, 1000))<br/>plt.yticks(np.arange(10, 45, 10))<br/>plt.show()</span></pre><p id="94ff" class="pw-post-body-paragraph la lb it lc b ld ml ju lf lg mm jx li lj mn ll lm ln mo lp lq lr mp lt lu lv im bi translated">为了最终的结果(如果你愿意，故事):</p><figure class="nj nk nl nm gt oa gh gi paragraph-image"><div role="button" tabindex="0" class="ob oc di od bf oe"><div class="gh gi oy"><img src="../Images/fad0dce7ea3d815056c29823be0c4fae.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qoo-6-dVYz5Lva1L5V6cSg.png"/></div></div><p class="og oh gj gh gi oi oj bd b be z dk translated">作者的再现。使用此处指定的数据和代码。</p></figure><div class="mq mr gp gr ms mt"><a href="https://adamrossnelson.medium.com/membership" rel="noopener follow" target="_blank"><div class="mu ab fo"><div class="mv ab mw cl cj mx"><h2 class="bd iu gy z fp my fr fs mz fu fw is bi translated">加入我的介绍链接媒体-亚当罗斯纳尔逊</h2><div class="na l"><h3 class="bd b gy z fp my fr fs mz fu fw dk translated">作为一个媒体会员，你的会员费的一部分会给你阅读的作家，你可以完全接触到每一个故事…</h3></div><div class="nb l"><p class="bd b dl z fp my fr fs mz fu fw dk translated">adamrossnelson.medium.com</p></div></div><div class="nc l"><div class="pc l ne nf ng nc nh ni mt"/></div></div></a></div><h1 id="f65c" class="ki kj it bd kk kl km kn ko kp kq kr ks jz kt ka ku kc kv kd kw kf kx kg ky kz bi translated">感谢阅读</h1><p id="849b" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">你准备好了解更多关于数据科学职业的信息了吗？我进行一对一的职业辅导，并有一份每周电子邮件列表，帮助专业求职者获取数据。联系我了解更多信息。</p><p id="93ec" class="pw-post-body-paragraph la lb it lc b ld ml ju lf lg mm jx li lj mn ll lm ln mo lp lq lr mp lt lu lv im bi translated">感谢阅读。把你的想法和主意发给我。你可以写信只是为了说声嗨。如果你真的需要告诉我是怎么错的，我期待着尽快和你聊天。推特:<a class="ae ny" href="https://twitter.com/adamrossnelson" rel="noopener ugc nofollow" target="_blank">@ adamrossnelson</a>LinkedIn:<a class="ae ny" href="https://www.linkedin.com/in/arnelson/" rel="noopener ugc nofollow" target="_blank">亚当罗斯尼尔森</a>。</p></div></div>    
</body>
</html>