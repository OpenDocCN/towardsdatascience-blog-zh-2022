<html>
<head>
<title>How to build a Web App to Transcribe and Summarize audio with Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何使用Python构建一个Web应用程序来转录和总结音频</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/how-to-build-a-web-app-to-transcribe-and-summarize-audio-with-python-dc719cb9e1f5#2022-08-10">https://towardsdatascience.com/how-to-build-a-web-app-to-transcribe-and-summarize-audio-with-python-dc719cb9e1f5#2022-08-10</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="ed5d" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">一本实用指南，总结您最喜爱的数据科学Spotify播客，并简化它以创建web应用程序</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/3466c55a81f4376de56890c7d53f7055.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bta7c0rOX0-Hi_wE037a8Q.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">来源:<a class="ae ky" href="https://www.flaticon.com/premium-icon/programmer_3270999?related_id=3270999&amp;origin=search" rel="noopener ugc nofollow" target="_blank"> flaticon </a></p></figure><p id="04ff" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Spotify的播客剧集的特点是非常长，这很容易让你沮丧或分散你的注意力。你有没有想过把播客里看起来很吸引人，但你在那一刻的心情总结一下？获取播客的要点并最终说服你听完它可能是个好主意。</p><p id="6c66" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在本教程中，我们将构建一个web应用程序来转录和总结《裸数据科学》中的一集，该集探讨了不同的数据科学主题，并提供了成为数据科学家的实用技巧。</p><p id="bb3e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">该应用程序将使用Streamlit构建，而AssemblyAI API将允许我们转录和总结Spotify播客的剧集。首先，这个API使用自动语音识别将音频转换成文本，然后生成文本摘要。让我们开始新的冒险吧！</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h2 id="03eb" class="mc md it bd me mf mg dn mh mi mj dp mk li ml mm mn lm mo mp mq lq mr ms mt mu bi translated">目录</h2><ul class=""><li id="5293" class="mv mw it lb b lc mx lf my li mz lm na lq nb lu nc nd ne nf bi translated"><a class="ae ky" href="#dc83" rel="noopener ugc nofollow"> <strong class="lb iu">第一部分:转录并总结音频</strong> </a></li><li id="7369" class="mv mw it lb b lc ng lf nh li ni lm nj lq nk lu nc nd ne nf bi translated"><a class="ae ky" href="#59c1" rel="noopener ugc nofollow"> <strong class="lb iu">第二部分:创建Web应用</strong> </a></li></ul></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="dc83" class="nl md it bd me nm nn no mh np nq nr mk jz ns ka mn kc nt kd mq kf nu kg mt nv bi translated">第1部分:转录和总结音频</h1><p id="2f63" class="pw-post-body-paragraph kz la it lb b lc mx ju le lf my jx lh li nw lk ll lm nx lo lp lq ny ls lt lu im bi translated">本教程将分为两个部分。第一部分主要展示如何应用AssemblyAI API来总结我们播客的内容。在第二部分中，我们将使用Streamlit来开发web应用程序。这些是以下步骤:</p><ul class=""><li id="a327" class="mv mw it lb b lc ld lf lg li nz lm oa lq ob lu nc nd ne nf bi translated">从收听笔记中提取剧集的URL</li><li id="69af" class="mv mw it lb b lc ng lf nh li ni lm nj lq nk lu nc nd ne nf bi translated">发送转录请求</li><li id="9698" class="mv mw it lb b lc ng lf nh li ni lm nj lq nk lu nc nd ne nf bi translated">检索转录和摘要</li></ul><h2 id="dd4d" class="mc md it bd me mf mg dn mh mi mj dp mk li ml mm mn lm mo mp mq lq mr ms mt mu bi translated">1.从收听笔记中提取剧集的URL</h2><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oc"><img src="../Images/fe40066ac4f6896ecdc448feaa9b86fd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*A4kvzMFdAQwLAh-j32bYSg.gif"/></div></div></figure><p id="29b8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><a class="ae ky" href="https://www.listennotes.com/" rel="noopener ugc nofollow" target="_blank"> Listen Notes </a>是一个强大的播客搜索引擎和在线数据库，提供访问播客数据的API，并允许基于它构建新的服务和应用。在本教程中，我们将使用Listen Notes API从我们的目标播客中检索该集的url。</p><ul class=""><li id="c1b1" class="mv mw it lb b lc ld lf lg li nz lm oa lq ob lu nc nd ne nf bi translated">首先，您需要创建一个帐户来检索数据，并订阅<a class="ae ky" href="https://www.listennotes.com/podcast-api/pricing/" rel="noopener ugc nofollow" target="_blank">免费计划</a>来利用Listen Notes API。有了这个计划，你每个月最多可以有300个请求，这足够你处理个人项目了。</li><li id="057a" class="mv mw it lb b lc ng lf nh li ni lm nj lq nk lu nc nd ne nf bi translated">然后，在Listen Notes中进入播客的<a class="ae ky" href="https://www.listennotes.com/podcasts/naked-data-science-naked-data-science-_uJhei-AXdy/" rel="noopener ugc nofollow" target="_blank">页面</a>，点击你感兴趣的剧集，选择“使用API获取该剧集”。</li><li id="16e4" class="mv mw it lb b lc ng lf nh li ni lm nj lq nk lu nc nd ne nf bi translated">之后，您可以将语言代码更改为Python，并从选项列表中单击requests，以便以后使用库请求。</li><li id="f29e" class="mv mw it lb b lc ng lf nh li ni lm nj lq nk lu nc nd ne nf bi translated">复制代码并将其粘贴到您的笔记本/脚本中。</li></ul><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="od oe l"/></div></figure><p id="c6ad" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们正在向Listen Notes Podcast API的端点发送一个<strong class="lb iu"> GET请求</strong>，这是一个从Listen Notes API检索数据的策略操作。最后，我们将最终输出保存为一个JSON对象，其中还包括以后需要的剧集的URL。</p><p id="c880" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们还导入了一个JSON文件，名为<strong class="lb iu"> secrets.json </strong>，它非常类似于一个字典，因为它由一组键值对组成。它需要包含分别用于AssemblyAI和Listen Notes的API键。您需要在您的帐户中访问它们。</p><pre class="kj kk kl km gt of og oh oi aw oj bi"><span id="a124" class="mc md it og b gy ok ol l om on">{<br/>"api_key":"&lt;your-api-key-assemblyai&gt;",<br/>"api_key_listennotes":"&lt;your-api-key-listennotes&gt;"<br/>}</span></pre><h2 id="dfd3" class="mc md it bd me mf mg dn mh mi mj dp mk li ml mm mn lm mo mp mq lq mr ms mt mu bi translated">2.发送转录请求</h2><p id="b944" class="pw-post-body-paragraph kz la it lb b lc mx ju le lf my jx lh li nw lk ll lm nx lo lp lq ny ls lt lu im bi translated">我们现在向AssemblyAI的转录端点发送一个<strong class="lb iu"> POST请求</strong>，而不是发出一个GET请求。post方法用于将音频URL上传到程序集AI。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="od oe l"/></div></figure><p id="6a21" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这一步对于获取转录和摘要是很重要的，如果我们设置auto_chapter等于True，那么就包含了转录和摘要。如果我们将auto_chapter设置为False，我们将只获得转录。之后，我们保存转录反应的id。</p><h2 id="c74c" class="mc md it bd me mf mg dn mh mi mj dp mk li ml mm mn lm mo mp mq lq mr ms mt mu bi translated">3.检索转录和摘要</h2><p id="5886" class="pw-post-body-paragraph kz la it lb b lc mx ju le lf my jx lh li nw lk ll lm nx lo lp lq ny ls lt lu im bi translated">最后，我们可以通过向Assembly AI发送GET请求来获得转录和摘要。在响应状态完成之前，我们需要发出一些请求。稍后，我们将结果保存到两个不同的文件中，一个txt文件用于转录，一个JSON文件用于摘要。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="od oe l"/></div></figure><p id="524b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">最重要的步骤已经完成。我们可以查看摘要:</p><pre class="kj kk kl km gt of og oh oi aw oj bi"><span id="78d1" class="mc md it og b gy ok ol l om on">[<br/>    {<br/>        "summary": "Having a big bang is one of the most common causes of data science project failures. This episode explains why it's better to aim for suboptimal solutions at the start of a project and how you can avoid the big bang problem by following an ancient Japanese philosophy.",<br/>        "headline": "Having a big bang is one of the most common causes of Data science project failures.",<br/>        "gist": "Avoid the big bang problem.",<br/>        "start": 2110,<br/>        "end": 37530<br/>    },<br/>    {<br/>        "summary": "This week we are going to talk about another mental model that we found very useful in our experience leading data science projects and teams. It's common to see in business when you start approaching a data intensive problem data initial planning, and then you have some initial directions to go with the root cause. Could be that when you ask a good problem solver or people who are interested in problem solving to find a solution for something, we often want to go for the best solution that there is.",<br/>        "headline": "This week we are going to talk about another mental model that we found useful in our experience leading data science projects and teams.",<br/>        "gist": "The problem model model.",<br/>        "start": 41790,<br/>        "end": 200986<br/>    },...}]</span></pre><h1 id="59c1" class="nl md it bd me nm oo no mh np op nr mk jz oq ka mn kc or kd mq kf os kg mt nv bi translated">第2部分:创建Web应用程序</h1><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ot"><img src="../Images/55e421b3c8e70e9b26e8775cab8553ee.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*pN92fjPgo_B6PnPxBvqieQ.gif"/></div></div></figure><p id="3f85" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在你已经能够理解转录和总结播客的主要部分，我们可以切换到第二部分。目标是用<strong class="lb iu"> Streamlit </strong>创建一个应用，这是一个免费的开源框架，允许使用Python用几行代码构建应用。</p><p id="81f2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在第一行代码中，我们只是导入python库并定义函数，这些函数重现了前面显示的步骤。此外，我们还创建了一个zip文件，其中包含带有转录的文件和带有摘要的文件。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="od oe l"/></div></figure><p id="301f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在，我们可以定义应用程序的主要部分。首先，我们使用<code class="fe ou ov ow og b">st.markdown</code>显示应用程序的主标题。在我们创建了一个左侧面板工具条之后，使用<code class="fe ou ov ow og b">st.sidebar</code>来输入我们发布的剧集id。插入id后，我们点击“提交”按钮。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="od oe l"/></div></figure><p id="6e65" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在我们按下按钮后，应用程序将执行所有步骤来转录和总结该集的音频。几分钟后，结果将显示在网页上。如果您想下载输出，可以使用download按钮，将转录和摘要保存到zip文件中。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="od oe l"/></div></figure><p id="5901" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">编写完所有代码后，可以将其保存到文件summ_app.py中，并在终端上使用以下命令行运行代码:</p><pre class="kj kk kl km gt of og oh oi aw oj bi"><span id="1c4b" class="mc md it og b gy ok ol l om on">streamlit run summ_app.py</span></pre><p id="b499" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">自动返回本地URL和网络URL。你可以点击其中一个链接，瞧！现在，你有一个了不起的应用程序，转录和总结你最喜欢的播客！</p><h1 id="93c7" class="nl md it bd me nm oo no mh np op nr mk jz oq ka mn kc or kd mq kf os kg mt nv bi translated">应用程序的完整代码</h1><p id="0356" class="pw-post-body-paragraph kz la it lb b lc mx ju le lf my jx lh li nw lk ll lm nx lo lp lq ny ls lt lu im bi translated">为了更好地理解，最好显示web应用程序使用的所有代码。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="od oe l"/></div></figure><h2 id="1331" class="mc md it bd me mf mg dn mh mi mj dp mk li ml mm mn lm mo mp mq lq mr ms mt mu bi translated">最终想法:</h2><p id="4a1e" class="pw-post-body-paragraph kz la it lb b lc mx ju le lf my jx lh li nw lk ll lm nx lo lp lq ny ls lt lu im bi translated">我希望这篇教程对开始使用AssemblyAI和Streamlit有用。在这个案例研究中，它被应用于转录播客的音频。这里的GitHub代码是<a class="ae ky" href="https://github.com/eugeniaring/Medium-Articles/tree/main/Web%20Apps/podcast-summary-app" rel="noopener ugc nofollow" target="_blank"/>。还有很多其他可能的应用，比如zoom通话，youtube视频。更多信息，请查看AssemblyAI官方网站的<a class="ae ky" href="https://www.assemblyai.com/docs" rel="noopener ugc nofollow" target="_blank">文档</a>及其<a class="ae ky" href="https://www.youtube.com/c/AssemblyAI" rel="noopener ugc nofollow" target="_blank"> youtube频道</a>。感谢阅读。祝您愉快！</p><h2 id="ce9e" class="mc md it bd me mf mg dn mh mi mj dp mk li ml mm mn lm mo mp mq lq mr ms mt mu bi translated">其他相关文章:</h2><div class="ox oy gp gr oz pa"><a rel="noopener follow" target="_blank" href="/creating-a-web-application-to-extract-topics-from-audio-with-python-21c3f541f3ca"><div class="pb ab fo"><div class="pc ab pd cl cj pe"><h2 class="bd iu gy z fp pf fr fs pg fu fw is bi translated">用Python创建一个从音频中提取主题的Web应用程序</h2><div class="ph l"><h3 class="bd b gy z fp pf fr fs pg fu fw dk translated">为Spotify播客的主题建模构建和部署web应用程序的分步教程</h3></div><div class="pi l"><p class="bd b dl z fp pf fr fs pg fu fw dk translated">towardsdatascience.com</p></div></div><div class="pj l"><div class="pk l pl pm pn pj po ks pa"/></div></div></a></div></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><p id="2f1b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">你喜欢我的文章吗？<a class="ae ky" href="https://eugenia-anello.medium.com/membership" rel="noopener"> <em class="pp">成为会员</em> </a> <em class="pp">每天无限获取数据科学新帖！这是一种间接的支持我的方式，不会给你带来任何额外的费用。如果您已经是会员，</em> <a class="ae ky" href="https://eugenia-anello.medium.com/subscribe" rel="noopener"> <em class="pp">订阅</em> </a> <em class="pp">每当我发布新的数据科学和python指南时，您都会收到电子邮件！</em></p></div></div>    
</body>
</html>