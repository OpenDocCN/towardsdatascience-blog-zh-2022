<html>
<head>
<title>Time-Series Stationarity Simply Explained</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">时间序列平稳性的简单解释</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/time-series-stationarity-simply-explained-125269968154#2022-10-19">https://towardsdatascience.com/time-series-stationarity-simply-explained-125269968154#2022-10-19</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="e4ed" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">时间序列建模中平稳性需求的简单而直观的解释。</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/492b3ab422856f9e644c01fd7d73f3e7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*fnNinb8421QXnGD_"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated"><a class="ae ky" href="https://unsplash.com/@m_____me?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> m. </a>在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍照</p></figure><h1 id="5c76" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">介绍</h1><p id="e9a7" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">当试图预测天气、股票市场或产品销售时，我们必须考虑一些时间因素。例如，当预测英国明天是否会下雪时，我们知道冬天的概率会比夏天高很多。</p><p id="66ca" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">使用<a class="ae ky" href="https://en.wikipedia.org/wiki/Time_series" rel="noopener ugc nofollow" target="_blank"> <strong class="lt iu">时间序列</strong> </a> <strong class="lt iu">可以最好地表示这种类型的时间相关数据。</strong>这是每个数据点在时间上向前排序或索引的地方。预测时间序列中的下一个数据点非常有价值，称为<a class="ae ky" href="https://www.influxdata.com/time-series-forecasting-methods/" rel="noopener ugc nofollow" target="_blank"> <strong class="lt iu">预测</strong> </a> <strong class="lt iu">。</strong></p><p id="f262" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">准确预测下一个数据点的一个要求是保证时间序列是<a class="ae ky" href="https://en.wikipedia.org/wiki/Stationary_process" rel="noopener ugc nofollow" target="_blank"> <strong class="lt iu">平稳</strong> </a>。在本文中，我们将讨论:</p><ul class=""><li id="2785" class="ms mt it lt b lu mn lx mo ma mu me mv mi mw mm mx my mz na bi translated">什么是平稳时间序列</li><li id="9075" class="ms mt it lt b lu nb lx nc ma nd me ne mi nf mm mx my mz na bi translated">如何使时间序列平稳</li><li id="d101" class="ms mt it lt b lu nb lx nc ma nd me ne mi nf mm mx my mz na bi translated">如何检验一个时间序列确实是平稳的</li><li id="b5e9" class="ms mt it lt b lu nb lx nc ma nd me ne mi nf mm mx my mz na bi translated">为什么我们需要平稳的时间序列</li></ul><blockquote class="ng nh ni"><p id="3bdb" class="lr ls nj lt b lu mn ju lw lx mo jx lz nk mp mc md nl mq mg mh nm mr mk ml mm im bi translated">如果你想了解更多关于时间序列和预测的知识，可以参考我在参考资料部分链接的书:预测原理和实践。</p></blockquote><h1 id="56c4" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">什么是平稳性？</h1><p id="55ca" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">一般来说，如果一个时间序列没有表现出任何长期趋势或明显的季节性，它就是平稳的。数学上我们有:</p><ul class=""><li id="5207" class="ms mt it lt b lu mn lx mo ma mu me mv mi mw mm mx my mz na bi translated">恒定的<strong class="lt iu">T21方差</strong>穿越时间</li><li id="7eaf" class="ms mt it lt b lu nb lx nc ma nd me ne mi nf mm mx my mz na bi translated"><strong class="lt iu">不变<em class="nj">表示</em>穿越时间</strong></li><li id="91f1" class="ms mt it lt b lu nb lx nc ma nd me ne mi nf mm mx my mz na bi translated">时间序列的统计特性不会改变</li></ul><p id="0232" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">例如，考虑作为时间函数的航班乘客数量，使用简单的Python脚本绘制如下:</p><blockquote class="ng nh ni"><p id="4dcd" class="lr ls nj lt b lu mn ju lw lx mo jx lz nk mp mc md nl mq mg mh nm mr mk ml mm im bi translated">数据<a class="ae ky" href="https://www.kaggle.com/datasets/ashfakyeafi/air-passenger-data-for-time-series-analysis" rel="noopener ugc nofollow" target="_blank">来自拥有CC0许可证的Kaggle </a>。</p></blockquote><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nn no l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者代码GitHub要点。</p></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi np"><img src="../Images/3af53709f3c5cce46b20cce879d99ab0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1300/format:webp/1*Vr3KcsZVqZcVUVGpZBUb8g.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者用Python生成的图。</p></figure><p id="64a1" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">这个时间序列是平稳的吗？号码</p><p id="648e" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">很明显，随着时间的推移，航空乘客的数量有增加的趋势。此外，差异和波动也随着时间的推移而增加。我们现在将研究产生平稳时间序列的方法。</p><h1 id="5622" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">使时间序列平稳</h1><p id="af19" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">为了使时间序列稳定，我们可以对数据进行变换。</p><h2 id="7bb0" class="nq la it bd lb nr ns dn lf nt nu dp lj ma nv nw ll me nx ny ln mi nz oa lp ob bi translated">差分变换</h2><p id="3337" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">最常见的变换是将<a class="ae ky" href="https://www.statistics.com/glossary/differencing-of-time-series/" rel="noopener ugc nofollow" target="_blank"> <strong class="lt iu">差分</strong> </a>的时间序列。这是计算每个连续数据点之间的数值变化。从数学上来说，这可以写成:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi oc"><img src="../Images/4d60c89a38db52a65cf3ec09a02960ee.png" data-original-src="https://miro.medium.com/v2/resize:fit:540/format:webp/1*S6N2Aqb0IOdySLxar1hicQ.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者在LaTeX中创建的方程。</p></figure><p id="6824" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">其中<strong class="lt iu"> <em class="nj"> d(t) </em> </strong>是数据点<strong class="lt iu"><em class="nj">【y(t)</em></strong>和<strong class="lt iu"><em class="nj">【y(t-1)</em></strong>在时间<strong class="lt iu"/>的差值。</p><p id="43b3" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">我们可以通过使用<a class="ae ky" href="https://pandas.pydata.org/docs/reference/api/pandas.DataFrame.diff.html" rel="noopener ugc nofollow" target="_blank"><strong class="lt iu"><em class="nj">diff()</em></strong></a>pandas方法来绘制差异数据，从而简单地将差异数据计算为我们的数据框的一列:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nn no l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者代码GitHub要点。</p></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi np"><img src="../Images/92c0fa17e0eeaba5420b2700a75b2665.png" data-original-src="https://miro.medium.com/v2/resize:fit:1300/format:webp/1*hc7VSXuwGit8Us1yabqXNQ.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者用Python生成的图。</p></figure><p id="2176" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">数据现在是静止的吗？号码</p><p id="0a06" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">平均值现在是常数，并在零附近振荡。然而，我们可以清楚地看到，随着时间的推移，方差仍在增加。</p><h2 id="505d" class="nq la it bd lb nr ns dn lf nt nu dp lj ma nv nw ll me nx ny ln mi nz oa lp ob bi translated">对数变换</h2><p id="8fb6" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">为了稳定方差，我们对原始数据应用自然对数变换:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nn no l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者代码GitHub要点。</p></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi np"><img src="../Images/d5d48033300711a57c2169690dfb4eab.png" data-original-src="https://miro.medium.com/v2/resize:fit:1300/format:webp/1*SLIiYyA8qcV01uwwJcbfAg.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者用Python生成的图。</p></figure><p id="78ec" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">现在波动的规模是一致的，但仍然有一个趋势。因此，我们现在必须再次应用差分变换。</p><h2 id="3293" class="nq la it bd lb nr ns dn lf nt nu dp lj ma nv nw ll me nx ny ln mi nz oa lp ob bi translated">对数和差分变换</h2><p id="1815" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">应用对数变换和差分变换:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nn no l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者代码GitHub要点。</p></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi np"><img src="../Images/70b503ce51f567e8704297c74fd01bf6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1300/format:webp/1*aJ9UYm5yy1ZjO5tnxO-H-w.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者用Python生成的图。</p></figure><p id="ca8a" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">数据现在是静止的吗？是啊！</p><p id="3ddc" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">正如我们所见，均值和方差现在是常数，没有长期趋势。</p><h1 id="123c" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">平稳性测试</h1><p id="b027" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">从视觉上看，数据现在是静止的。然而，有更多的定量技术来确定数据是否确实是平稳的。</p><p id="0c59" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">一种这样的方法是<strong class="lt iu">增强的Dickey-Fuller (ADF)测试。</strong>这是一种统计假设检验，其中零假设是序列是非平稳的(也称为<a class="ae ky" href="https://en.wikipedia.org/wiki/Unit_root_test" rel="noopener ugc nofollow" target="_blank"> <strong class="lt iu">单位根检验</strong> </a>)。</p><p id="c816" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated"><a class="ae ky" href="https://www.statsmodels.org/dev/generated/statsmodels.tsa.stattools.adfuller.html" rel="noopener ugc nofollow" target="_blank"> statsmodels </a>包为执行ADF测试提供了一个简单易用的功能:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nn no l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者代码GitHub要点。</p></figure><p id="468c" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">运行这个函数，我们得到以下输出:</p><pre class="kj kk kl km gt od oe of og aw oh bi"><span id="4f86" class="nq la it oe b gy oi oj l ok ol">ADF Statistic: -2.717131<br/>P-Value: 0.071121<br/>Critical Values:<br/>        1%: -3.48<br/>        5%: -2.88<br/>        10%: -2.58</span></pre><p id="5ded" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">我们的ADF P值(7.1%)介于5%和10%之间，因此根据您设置的显著性水平，我们拒绝或未能拒绝零假设。</p><p id="6e32" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">如果我们愿意的话，我们也许可以进行进一步的差分，使它更加稳定。</p><blockquote class="ng nh ni"><p id="c7ea" class="lr ls nj lt b lu mn ju lw lx mo jx lz nk mp mc md nl mq mg mh nm mr mk ml mm im bi translated">如果您有兴趣深入了解ADF测试的数学原理，请参考我在参考资料部分提供的链接。</p></blockquote><p id="ef99" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">ADF测试不是唯一可用于平稳性的测试，还有<a class="ae ky" href="https://en.wikipedia.org/wiki/KPSS_test" rel="noopener ugc nofollow" target="_blank"> <strong class="lt iu">科维亚特科夫斯基-菲利普斯-施密特-申(KPSS)测试</strong> </a>。然而，在这个测试中，零假设是趋势是稳定的。</p><blockquote class="ng nh ni"><p id="6d52" class="lr ls nj lt b lu mn ju lw lx mo jx lz nk mp mc md nl mq mg mh nm mr mk ml mm im bi translated">要了解有关假设检验过程的更多信息，请参阅参考资料部分。</p></blockquote><h1 id="e943" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">为什么我们需要平稳性？</h1><p id="8f1a" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">问题仍然在于为什么我们需要确保我们的时间序列是平稳的？</p><p id="bff8" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">嗯，有几个原因:</p><ul class=""><li id="63a6" class="ms mt it lt b lu mn lx mo ma mu me mv mi mw mm mx my mz na bi translated">大多数预测模型都假设数据是平稳的</li><li id="0ecd" class="ms mt it lt b lu nb lx nc ma nd me ne mi nf mm mx my mz na bi translated">平稳性有助于使每个数据点独立</li><li id="f39b" class="ms mt it lt b lu nb lx nc ma nd me ne mi nf mm mx my mz na bi translated">总的来说，使数据更容易分析</li></ul><h1 id="3d81" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">结论</h1><p id="14dc" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">在本文中，我们描述了什么是平稳时间序列，以及如何应用各种变换使数据平稳。对数变换有助于稳定方差，差分变换有助于稳定均值。然后，我们可以使用ADF测试来测试平稳性。平稳性的主要重要性在于，大多数预测模型都假设数据具有这种性质。在我的下一篇文章中，我们将讨论其中一个预测模型。</p><p id="53ca" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">本文中生成数据、图表和ADF测试的完整代码可在此处查看:</p><div class="om on gp gr oo op"><a href="https://github.com/egorhowell/Medium-Articles/blob/main/Time%20Series/Time%20Series%20Tools/stationary.py" rel="noopener  ugc nofollow" target="_blank"><div class="oq ab fo"><div class="or ab os cl cj ot"><h2 class="bd iu gy z fp ou fr fs ov fu fw is bi translated">中型物品/文具. py在主egorhowell/中型物品</h2><div class="ow l"><h3 class="bd b gy z fp ou fr fs ov fu fw dk translated">此时您不能执行该操作。您已使用另一个标签页或窗口登录。您已在另一个选项卡中注销，或者…</h3></div><div class="ox l"><p class="bd b dl z fp ou fr fs ov fu fw dk translated">github.com</p></div></div><div class="oy l"><div class="oz l pa pb pc oy pd ks op"/></div></div></a></div><h1 id="3661" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">参考资料和进一步阅读</h1><ul class=""><li id="1c0a" class="ms mt it lt b lu lv lx ly ma pe me pf mi pg mm mx my mz na bi translated"><em class="nj">预测:原理与实践:</em><a class="ae ky" href="https://otexts.com/fpp2/" rel="noopener ugc nofollow" target="_blank">https://otexts.com/fpp2/</a></li><li id="fd26" class="ms mt it lt b lu nb lx nc ma nd me ne mi nf mm mx my mz na bi translated"><em class="nj"> ADF测试:</em><a class="ae ky" href="https://www.machinelearningplus.com/time-series/augmented-dickey-fuller-test/" rel="noopener ugc nofollow" target="_blank">https://www . machine learning plus . com/time-series/augmented-dickey-fuller-Test/</a></li><li id="66f1" class="ms mt it lt b lu nb lx nc ma nd me ne mi nf mm mx my mz na bi translated"><em class="nj">假设检验</em>:<a class="ae ky" rel="noopener" target="_blank" href="/z-test-simply-explained-80b346e0e239">https://towards data science . com/z-test-simple-explained-80b 346 e0e 239</a></li></ul><h1 id="4239" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">和我联系！</h1><ul class=""><li id="ca40" class="ms mt it lt b lu lv lx ly ma pe me pf mi pg mm mx my mz na bi translated">要在媒体上阅读无限的故事，请务必在此注册！  <em class="nj"> </em>💜</li><li id="9786" class="ms mt it lt b lu nb lx nc ma nd me ne mi nf mm mx my mz na bi translated"><a class="ae ky" href="/subscribe/@egorhowell" rel="noopener ugc nofollow" target="_blank"> </a> <em class="nj"> </em>😀</li><li id="b8dc" class="ms mt it lt b lu nb lx nc ma nd me ne mi nf mm mx my mz na bi translated"><a class="ae ky" href="https://www.linkedin.com/in/egor-howell-092a721b3/" rel="noopener ugc nofollow" target="_blank"> <em class="nj">领英</em> </a> <em class="nj"> </em>👔</li><li id="a7a0" class="ms mt it lt b lu nb lx nc ma nd me ne mi nf mm mx my mz na bi translated"><a class="ae ky" href="https://twitter.com/EgorHowell" rel="noopener ugc nofollow" target="_blank"> <em class="nj">碎碎念</em> </a> <em class="nj"> </em> 🖊</li><li id="fb18" class="ms mt it lt b lu nb lx nc ma nd me ne mi nf mm mx my mz na bi translated"><a class="ae ky" href="https://github.com/egorhowell" rel="noopener ugc nofollow" target="_blank"><em class="nj">github</em></a><em class="nj"/>🖥</li><li id="87b0" class="ms mt it lt b lu nb lx nc ma nd me ne mi nf mm mx my mz na bi translated"><a class="ae ky" href="https://www.kaggle.com/egorphysics" rel="noopener ugc nofollow" target="_blank"><em class="nj"/></a><em class="nj"/>🏅</li></ul><blockquote class="ng nh ni"><p id="72f1" class="lr ls nj lt b lu mn ju lw lx mo jx lz nk mp mc md nl mq mg mh nm mr mk ml mm im bi translated">(所有表情符号都是由<a class="ae ky" href="https://openmoji.org/" rel="noopener ugc nofollow" target="_blank"> OpenMoji </a>设计的——开源的表情符号和图标项目。执照:<a class="ae ky" href="https://creativecommons.org/licenses/by-sa/4.0/#" rel="noopener ugc nofollow" target="_blank"> CC BY-SA 4.0 </a></p></blockquote></div></div>    
</body>
</html>