<html>
<head>
<title>How To Add a New Empty Column in Pandas</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在熊猫中添加新的空列</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/add-empty-col-pandas-23d323f0fcc7#2022-10-03">https://towardsdatascience.com/add-empty-col-pandas-23d323f0fcc7#2022-10-03</a></blockquote><div><div class="fc ii ij ik il im"/><div class="in io ip iq ir"><div class=""/><div class=""><h2 id="4eb6" class="pw-subtitle-paragraph jr it iu bd b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki dk translated">使用Python向现有pandas数据框架添加空列</h2></div><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj kj"><img src="../Images/58d3a811e1d2a5645722065eb738ea47.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*deADk5Gk5jW_8Ddx-FtZdQ.jpeg"/></div></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">由<a class="ae kz" href="https://unsplash.com/@kellysikkema?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">凯利·西克玛</a>在<a class="ae kz" href="https://unsplash.com/s/photos/add?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</p></figure><p id="7d6d" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">在我最近关于Medium的一些文章中，我们讨论了如何基于其他列的值在Pandas数据帧中添加<a class="ae kz" rel="noopener" target="_blank" href="/create-new-column-based-on-other-columns-pandas-5586d87de73d">新列。</a></p><p id="cb47" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">另一个通常用户需要在数据帧上应用的类似操作是在现有的帧中添加一个新的空列。当我们希望以后填充该列，而不是仅仅用一些特定的值初始化它时，这通常是有用的，无论是硬编码的还是基于一些其他的计算。</p><p id="1b89" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">在今天的简短教程中，我们将演示如何在现有的pandas数据框架中添加这样的空列。</p></div><div class="ab cl lw lx hy ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="in io ip iq ir"><p id="8f8c" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">首先，让我们创建一个示例数据框架，我们将在本文中引用它来演示一些概念。</p><pre class="kk kl km kn gu md me mf mg aw mh bi"><span id="6ba9" class="mi mj iu me b gz mk ml l mm mn">import pandas as pd</span><span id="02bb" class="mi mj iu me b gz mo ml l mm mn">df = pd.DataFrame(<br/>    [<br/>        (1, 121, True), <br/>        (2, 425, False),<br/>        (3, 176, False),<br/>        (4, 509, False),<br/>        (5, 120, True), <br/>        (6, 459, False),<br/>        (7, 981, True),<br/>        (8, 292, True),<br/>    ], <br/>    columns=['colA', 'colB', 'colC']<br/>)</span><span id="c979" class="mi mj iu me b gz mo ml l mm mn">print(df)<br/><strong class="me iv"><em class="mp">   colA  colB   colC<br/></em></strong><em class="mp">0     1   121   True<br/>1     2   425  False<br/>2     3   176  False<br/>3     4   509  False<br/>4     5   120   True<br/>5     6   459  False<br/>6     7   981   True<br/>7     8   292   True</em></span></pre></div><div class="ab cl lw lx hy ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="in io ip iq ir"><h2 id="dca9" class="mi mj iu bd mq mr ms dn mt mu mv dp mw lj mx my mz ln na nb nc lr nd ne nf ng bi translated">在Pandas中创建新的空列</h2><p id="afb1" class="pw-post-body-paragraph la lb iu lc b ld nh jv lf lg ni jy li lj nj ll lm ln nk lp lq lr nl lt lu lv in bi translated">因为我们希望新列为空，所以我们实际上可以为每条记录分配<code class="fe nm nn no me b">numpy.nan</code>值。插入一个没有值的新列非常简单</p><pre class="kk kl km kn gu md me mf mg aw mh bi"><span id="3c76" class="mi mj iu me b gz mk ml l mm mn">import numpy as np</span><span id="cf6f" class="mi mj iu me b gz mo ml l mm mn">df['colD'] = np.nan</span><span id="060d" class="mi mj iu me b gz mo ml l mm mn">print(df)<br/><strong class="me iv"><em class="mp">   colA  colB   colC  colD<br/></em></strong><em class="mp">0     1   121   True   NaN<br/>1     2   425  False   NaN<br/>2     3   176  False   NaN<br/>3     4   509  False   NaN<br/>4     5   120   True   NaN<br/>5     6   459  False   NaN<br/>6     7   981   True   NaN<br/>7     8   292   True   NaN</em></span></pre></div><div class="ab cl lw lx hy ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="in io ip iq ir"><h2 id="b773" class="mi mj iu bd mq mr ms dn mt mu mv dp mw lj mx my mz ln na nb nc lr nd ne nf ng bi translated">指定空列的数据类型</h2><p id="8eec" class="pw-post-body-paragraph la lb iu lc b ld nh jv lf lg ni jy li lj nj ll lm ln nk lp lq lr nl lt lu lv in bi translated">现在，尽管DataFrame中新创建的列是空的，但我们可能希望指定特定的dtype。期望是在某个时候这个空列将被填充一些值(否则一开始创建它有什么意义！).</p><p id="81a3" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">我们可以通过调用<code class="fe nm nn no me b">dtypes</code>属性来打印出DataFrame中每一列的数据类型:</p><pre class="kk kl km kn gu md me mf mg aw mh bi"><span id="b8b6" class="mi mj iu me b gz mk ml l mm mn">&gt;&gt;&gt; df.dtypes<br/>&gt;&gt;&gt; df.dtypes<br/><em class="mp">colA      int64<br/>colB      int64<br/>colC       bool<br/>colD    float64<br/>dtype: object</em></span></pre><p id="56fa" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">Pandas自动创建了一个类型为<code class="fe nm nn no me b">float64</code>的空列——这是因为默认情况下<code class="fe nm nn no me b">np.nan</code>的类型是float。</p><pre class="kk kl km kn gu md me mf mg aw mh bi"><span id="1c8f" class="mi mj iu me b gz mk ml l mm mn">&gt;&gt;&gt; type(np.nan)<br/><em class="mp">&lt;class 'float'&gt;</em></span></pre><p id="d476" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">相反，我们可能打算在新创建的空列中存储布尔值。在这种情况下，我们可以在创建列后直接转换它，如下所示:</p><pre class="kk kl km kn gu md me mf mg aw mh bi"><span id="77df" class="mi mj iu me b gz mk ml l mm mn">import numpy as np</span><span id="5998" class="mi mj iu me b gz mo ml l mm mn">df['colD'] = np.nan<br/>df['colD'] = df['colD']<!-- -->.astype('boolean')</span><span id="6656" class="mi mj iu me b gz mo ml l mm mn">print(df.dtypes)<br/><em class="mp">colA      int64<br/>colB      int64<br/>colC       bool<br/></em><strong class="me iv"><em class="mp">colD    boolean<br/></em></strong><em class="mp">dtype: object</em></span></pre></div><div class="ab cl lw lx hy ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="in io ip iq ir"><h2 id="acda" class="mi mj iu bd mq mr ms dn mt mu mv dp mw lj mx my mz ln na nb nc lr nd ne nf ng bi translated">最后的想法</h2><p id="f311" class="pw-post-body-paragraph la lb iu lc b ld nh jv lf lg ni jy li lj nj ll lm ln nk lp lq lr nl lt lu lv in bi translated">有时，我们可能需要在现有的pandas数据帧中添加一个空列，以便以后填充。在今天的简短教程中，我们演示了如何创建这样的列，以及如何将其数据类型更改为所需的类型。</p></div><div class="ab cl lw lx hy ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="in io ip iq ir"><p id="1b77" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated"><a class="ae kz" href="https://gmyrianthous.medium.com/membership" rel="noopener"> <strong class="lc iv">成为会员</strong> </a> <strong class="lc iv">阅读介质上的每一个故事。你的会员费直接支持我和你看的其他作家。你也可以在媒体上看到所有的故事。</strong></p><div class="np nq gq gs nr ns"><a href="https://gmyrianthous.medium.com/membership" rel="noopener follow" target="_blank"><div class="nt ab fp"><div class="nu ab nv cl cj nw"><h2 class="bd iv gz z fq nx fs ft ny fv fx it bi translated">通过我的推荐链接加入Medium-Giorgos Myrianthous</h2><div class="nz l"><h3 class="bd b gz z fq nx fs ft ny fv fx dk translated">作为一个媒体会员，你的会员费的一部分会给你阅读的作家，你可以完全接触到每一个故事…</h3></div><div class="oa l"><p class="bd b dl z fq nx fs ft ny fv fx dk translated">gmyrianthous.medium.com</p></div></div><div class="ob l"><div class="oc l od oe of ob og kt ns"/></div></div></a></div></div><div class="ab cl lw lx hy ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="in io ip iq ir"><p id="676e" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated"><strong class="lc iv">相关文章你可能也喜欢</strong></p><div class="np nq gq gs nr ns"><a rel="noopener follow" target="_blank" href="/args-kwargs-python-d9c71b220970"><div class="nt ab fp"><div class="nu ab nv cl cj nw"><h2 class="bd iv gz z fq nx fs ft ny fv fx it bi translated">* Python中的args和**kwargs</h2><div class="nz l"><h3 class="bd b gz z fq nx fs ft ny fv fx dk translated">讨论位置参数和关键字参数之间的区别，以及如何在Python中使用*args和**kwargs</h3></div><div class="oa l"><p class="bd b dl z fq nx fs ft ny fv fx dk translated">towardsdatascience.com</p></div></div><div class="ob l"><div class="oh l od oe of ob og kt ns"/></div></div></a></div></div><div class="ab cl lw lx hy ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="in io ip iq ir"><div class="kk kl km kn gu ns"><a rel="noopener follow" target="_blank" href="/oltp-vs-olap-9ac334baa370"><div class="nt ab fp"><div class="nu ab nv cl cj nw"><h2 class="bd iv gz z fq nx fs ft ny fv fx it bi translated">OLTP与OLAP:他们的区别是什么</h2><div class="nz l"><h3 class="bd b gz z fq nx fs ft ny fv fx dk translated">在数据处理系统的上下文中理解OLTP和OLAP之间的区别</h3></div><div class="oa l"><p class="bd b dl z fq nx fs ft ny fv fx dk translated">towardsdatascience.com</p></div></div><div class="ob l"><div class="oi l od oe of ob og kt ns"/></div></div></a></div></div><div class="ab cl lw lx hy ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="in io ip iq ir"><div class="kk kl km kn gu ns"><a rel="noopener follow" target="_blank" href="/run-airflow-docker-1b83a57616fb"><div class="nt ab fp"><div class="nu ab nv cl cj nw"><h2 class="bd iv gz z fq nx fs ft ny fv fx it bi translated">如何使用Docker在本地运行气流</h2><div class="nz l"><h3 class="bd b gz z fq nx fs ft ny fv fx dk translated">在本地机器上使用Docker运行Airflow的分步指南</h3></div><div class="oa l"><p class="bd b dl z fq nx fs ft ny fv fx dk translated">towardsdatascience.com</p></div></div><div class="ob l"><div class="oj l od oe of ob og kt ns"/></div></div></a></div></div></div>    
</body>
</html>