<html>
<head>
<title>Introduction to time series data</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">时间序列数据简介</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/understand-the-time-series-data-cd9746d3df62#2022-04-13">https://towardsdatascience.com/understand-the-time-series-data-cd9746d3df62#2022-04-13</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="d75c" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">使用时间序列数据预测问题的介绍</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/e857295bad500890ade0ff191ca1b0a5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*ad_PdLl709B3asK3"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated"><a class="ae kv" href="https://unsplash.com/@icons8?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Icons8团队</a>在<a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</p></figure><p id="c36a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">简而言之，时间序列是根据时间戳排序的数据点序列。因此，与传统的机器学习方法相比，时间序列建模需要一种特殊的方法。因为，在时间序列建模中，我们不能忽视数据点的顺序。</p></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><p id="6267" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir">简介</strong></p><p id="2ec5" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">和往常一样，理解数据集的底层模式很重要。让我们从一个简单的时间序列开始。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi lz"><img src="../Images/bf052dbdd8ca605e05b54b3e09f7fc58.png" data-original-src="https://miro.medium.com/v2/resize:fit:1250/format:webp/1*b_Oi36fHc5JBxvHaqo9ISg.png"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">维基百科每日访客——作者图片</p></figure><p id="8f06" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在不考虑任何标准的时间序列概念的情况下，我们来看看上面的图中能看到什么。</p><ul class=""><li id="6a7c" class="ma mb iq ky b kz la lc ld lf mc lj md ln me lr mf mg mh mi bi translated">从2018年1月到2018年8月出现负斜率，然后从2018年8月到2019年1月出现正斜率</li><li id="f444" class="ma mb iq ky b kz mj lc mk lf ml lj mm ln mn lr mf mg mh mi bi translated">如果我们只关注一个月(或几个月)，我们可以看到在整个时间段内数据集中有一个恒定的模式。也就是说，每个月都记录了2或3个波谷和波峰。</li></ul><p id="346d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">以上结论取决于我们看待以上情节的方式。对于和我有不同观点的人来说，通过看上面的图，肯定会看到一些有用的信息。因此，以某种标准的方式获取信息是很重要的。最好的方法之一是绘制数据集。</p><p id="bda8" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在R中，有大量的时间序列可视化方法可供使用。但是在Python中，有时我们需要做额外的工作。</p><p id="bc5c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">让我们放大两个月的数据。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi mo"><img src="../Images/2c989d32788ad36c58638e11e8c7a6fe.png" data-original-src="https://miro.medium.com/v2/resize:fit:1224/format:webp/1*ASlrbGKL8VwjLFM6ECTySg.png"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">作者图片</p></figure><p id="231b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">好吧，为了清楚地理解，让我们指出周末。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi mo"><img src="../Images/a73edfa748baad8c707b34be07116286.png" data-original-src="https://miro.medium.com/v2/resize:fit:1224/format:webp/1*QssguqSP5cyhdkW1vKAmkQ.png"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">作者图片</p></figure><p id="4231" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">数据集中有一个清晰的模式。也就是说，</p><ul class=""><li id="6ef3" class="ma mb iq ky b kz la lc ld lf mc lj md ln me lr mf mg mh mi bi translated">最高的页面浏览量总是(至少在使用的时间段内)记录在星期一。</li><li id="6533" class="ma mb iq ky b kz mj lc mk lf ml lj mm ln mn lr mf mg mh mi bi translated">最低的浏览量总是记录在周六。</li><li id="5c22" class="ma mb iq ky b kz mj lc mk lf ml lj mm ln mn lr mf mg mh mi bi translated">在大多数周中，周中会有火花。</li></ul><p id="2929" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">到目前为止，我们已经看到了数据集的属性。现在是时候转向实时序列概念了。</p></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><p id="7c83" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在上一节中，我们确定了数据集中存在斜率和重复模式。这意味着，我们的时间序列可以分成几个部分，或者我们可以"<strong class="ky ir">分解</strong>"时间序列。让我们深入研究可以用来分解时间序列的方法。</p><p id="3b1a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir">时间序列分解</strong></p><p id="136a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">与其他数据不同，时间序列数据可能会令人困惑。举个例子，下面是斯里兰卡总统当选总统后的维基百科个人资料视图。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi mp"><img src="../Images/3baf7f712663288d6a59f5a04a7398fe.png" data-original-src="https://miro.medium.com/v2/resize:fit:1248/format:webp/1*KMt5YWjyIDUPGHqCFxcyjQ.png"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">作者图片</p></figure><p id="1101" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">正如您在这里看到的，时间序列数据会受到各种因素的影响。这就是为什么我们需要分解它，并很好地理解它。这也有助于提高预测的准确性。</p><p id="0e76" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">大多数时间序列由<strong class="ky ir">季节性成分</strong>(在上一节中，我们将其定义为谷和峰)、<strong class="ky ir">趋势成分</strong>(之前我们将其定义为斜率)。当从原始数据中去除这两个分量时，我们有一个<strong class="ky ir">误差分量</strong>。但问题是，在不知道这些成分是如何形成的情况下，我们如何拆分这些成分？在回答这个问题之前，了解可用的分解方法是很重要的。</p><ol class=""><li id="90f0" class="ma mb iq ky b kz la lc ld lf mc lj md ln me lr mq mg mh mi bi translated">基于移动平均的分解</li><li id="dbb5" class="ma mb iq ky b kz mj lc mk lf ml lj mm ln mn lr mq mg mh mi bi translated">经典分解</li><li id="b8a7" class="ma mb iq ky b kz mj lc mk lf ml lj mm ln mn lr mq mg mh mi bi translated">X11分解(经典分解的增强方法)</li><li id="9375" class="ma mb iq ky b kz mj lc mk lf ml lj mm ln mn lr mq mg mh mi bi translated">座椅分解(<strong class="ky ir">S</strong>S<strong class="ky ir">E</strong>提取in<strong class="ky ir">A</strong>RIMA<strong class="ky ir">T</strong>ime<strong class="ky ir">S</strong>series)</li></ol><p id="eee7" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">为了简单起见，让我们继续使用经典的分解方法。在经典分解中，有两种方法。</p><h2 id="48fd" class="mr ms iq bd mt mu mv dn mw mx my dp mz lf na nb nc lj nd ne nf ln ng nh ni nj bi translated">1.加法分解</h2><p id="001b" class="pw-post-body-paragraph kw kx iq ky b kz nk jr lb lc nl ju le lf nm lh li lj nn ll lm ln no lp lq lr ij bi translated">在加法分解中，我们假设<strong class="ky ir">原始序列(y) </strong>可以通过将S <strong class="ky ir">季节分量</strong>、<strong class="ky ir">趋势分量(T) </strong> &amp; <strong class="ky ir">误差分量(R) </strong>相加在一起来构建。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi np"><img src="../Images/e77f566e886c763ea9d4f2c73f3b7c46.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*MkJLWJoQ3WDduEnTYuR5ew.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">加法分解公式—作者图片</p></figure><p id="b9f0" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir">步骤:</strong></p><ol class=""><li id="155a" class="ma mb iq ky b kz la lc ld lf mc lj md ln me lr mq mg mh mi bi translated">通过对数据应用卷积滤波器来估计趋势，<strong class="ky ir"> Tₜ </strong></li><li id="e568" class="ma mb iq ky b kz mj lc mk lf ml lj mm ln mn lr mq mg mh mi bi translated">计算去趋势数列。(<strong class="ky ir"> yₜ-Tₜ </strong>)。</li><li id="d47f" class="ma mb iq ky b kz mj lc mk lf ml lj mm ln mn lr mq mg mh mi bi translated">从原始序列中删除的去趋势序列，然后计算每个期间该去趋势序列的平均值。这就产生了一个季节性因素(<strong class="ky ir"> Sₜ) </strong></li><li id="a700" class="ma mb iq ky b kz mj lc mk lf ml lj mm ln mn lr mq mg mh mi bi translated">从<strong class="ky ir"> yₜ </strong>中减去<strong class="ky ir"> Sₜ </strong>、<strong class="ky ir"> Tₜ </strong>。这就给了<strong class="ky ir">rₜ；rₜ</strong>=<strong class="ky ir">yₜ</strong>-(<strong class="ky ir">tₜ</strong>+<strong class="ky ir">sₜ</strong>)</li></ol><h2 id="8db5" class="mr ms iq bd mt mu mv dn mw mx my dp mz lf na nb nc lj nd ne nf ln ng nh ni nj bi translated">2.乘法分解</h2><p id="8e31" class="pw-post-body-paragraph kw kx iq ky b kz nk jr lb lc nl ju le lf nm lh li lj nn ll lm ln no lp lq lr ij bi translated">顾名思义，这里我们假设原始序列可以通过将<strong class="ky ir">季节性成分</strong>、<strong class="ky ir">趋势成分</strong>、&amp;、<strong class="ky ir">误差成分</strong>相乘来构建。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nq"><img src="../Images/a582393be88dddcdf0f3ff5759a903a1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*GhTDIFPOB3k5TIvQRVpkAg.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">乘法分解公式—作者图片</p></figure><p id="3e6a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在我们对前一个问题有了两个可能的答案，要么是乘法，要么是加法。我们可以用下面的方法来选择一种方法。</p><p id="a137" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果季节成分的数量增加，时间序列是倍增的。如果季节性成分的大小大致相同，它更有可能是一个附加的时间序列</p><p id="ee1a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这是我们到目前为止讨论过的关键术语的定义。</p><ul class=""><li id="bbfc" class="ma mb iq ky b kz la lc ld lf mc lj md ln me lr mf mg mh mi bi translated"><strong class="ky ir">季节性</strong>——与日历的某些方面相关的重复模式。</li><li id="3dc8" class="ma mb iq ky b kz mj lc mk lf ml lj mm ln mn lr mf mg mh mi bi translated"><strong class="ky ir">趋势</strong> —增加或减少系列中的值(斜率)。</li><li id="1b82" class="ma mb iq ky b kz mj lc mk lf ml lj mm ln mn lr mf mg mh mi bi translated"><strong class="ky ir">周期</strong> —这个术语经常与季节性成分混淆。主要区别是没有固定期限。</li></ul><p id="4dd0" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在我们知道了基本理论。是时候做一些编码和绘图了。</p></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><p id="eb83" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">为此，我们将使用一个名为<a class="ae kv" href="https://www.statsmodels.org/dev/index.html" rel="noopener ugc nofollow" target="_blank"> statsmodels </a>的流行Python库。转到以前使用的维基百科数据集。</p><p id="712f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们可以使用statsmodels <a class="ae kv" href="https://www.statsmodels.org/dev/generated/statsmodels.tsa.seasonal.seasonal_decompose.html" rel="noopener ugc nofollow" target="_blank"> </a> <code class="fe nr ns nt nu b"><a class="ae kv" href="https://www.statsmodels.org/dev/generated/statsmodels.tsa.seasonal.seasonal_decompose.html" rel="noopener ugc nofollow" target="_blank">seasonal_decompose()</a></code>函数执行经典分解。如果你清楚地看到上面的时间序列，它更类似于我们上面讨论的加法序列。您可以使用<code class="fe nr ns nt nu b">model</code>参数在<code class="fe nr ns nt nu b">seasonal_decompose()</code>功能中设置型号。</p><pre class="kg kh ki kj gt nv nu nw nx aw ny bi"><span id="ab2b" class="mr ms iq nu b gy nz oa l ob oc">from statsmodels.api.tsa import seasonal_decompose</span><span id="55a4" class="mr ms iq nu b gy od oa l ob oc">decompose = seasonal_decompose(data,model='additive')</span></pre><p id="eff3" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">让我们画出结果。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oe"><img src="../Images/4aaf7f76d1a1727b04549ed69c65550b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*CTELmZ_A79rgxdBCCK4rmQ.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">作者图片</p></figure><p id="954a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">让我们做一些有结果的实验。</p><ol class=""><li id="33da" class="ma mb iq ky b kz la lc ld lf mc lj md ln me lr mq mg mh mi bi translated">剧情降噪系列。</li><li id="a102" class="ma mb iq ky b kz mj lc mk lf ml lj mm ln mn lr mq mg mh mi bi translated">图<strong class="ky ir">经季节调整的</strong>数据——当季节成分从原始数据中移除时，剩余部分成为<strong class="ky ir">经季节调整的</strong>数据。如果我们的分析需要忽略季节影响，这种方法可能会更有帮助。然而，这完全取决于我们正在解决的问题。</li><li id="c4f9" class="ma mb iq ky b kz mj lc mk lf ml lj mm ln mn lr mq mg mh mi bi translated">残差分布——通常有助于识别分解的偏差。在上面的残差图中，从2018年8月到2018年10月存在低噪声。分析残差有助于了解我们的分解方法将数据分成<strong class="ky ir">季节性、残差和趋势</strong>分量的能力。如果残差更有可能是<a class="ae kv" href="https://machinelearningmastery.com/white-noise-time-series-python/#:~:text=A%20time%20series%20is%20white%20noise%20if%20the%20variables%20are,other%20values%20in%20the%20series." rel="noopener ugc nofollow" target="_blank">白噪声</a>，那么就证明分解方法已经成功地区分了成分。</li></ol><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oe"><img src="../Images/3c4f7e46cc596148f342457461ae831f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*YuAUGNIZYVEkg8tPcWnH7w.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">作者图片</p></figure><p id="1cf1" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">出于实验目的，让我们用<code class="fe nr ns nt nu b">model='multiplicative'</code>进行完全相同的实验</p><pre class="kg kh ki kj gt nv nu nw nx aw ny bi"><span id="3462" class="mr ms iq nu b gy nz oa l ob oc">decompose_multi = seasonal_decompose(data,model='multiplicative')</span></pre><p id="bc98" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">分解结果。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oe"><img src="../Images/2076d8b4b53e952a9e47e8d84e9afcff.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*yjg-95PZkFuQIhalYm1qlQ.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">作者图片</p></figure><p id="69a4" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">实验结果。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oe"><img src="../Images/0de943525ead03accb1faa4e1f35fcbc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Gw62GdQhLnDB2JJvSO9zDg.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">作者图片</p></figure><p id="ec0f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">作为上述实验的总结，我们可以说加法分解是最适合这个数据集的。我们也可以通过观察剩余图来确定这一点。在加法方法中，误差大致呈正态分布。这意味着我们的假设在这个数据集中是正确的。</p><h1 id="16b2" class="of ms iq bd mt og oh oi mw oj ok ol mz jw om jx nc jz on ka nf kc oo kd ni op bi translated">结论</h1><p id="e8db" class="pw-post-body-paragraph kw kx iq ky b kz nk jr lb lc nl ju le lf nm lh li lj nn ll lm ln no lp lq lr ij bi translated">这里使用的分解是经典分解(简单分解)，不推荐用于更复杂的数据集。</p><p id="0137" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">感谢阅读！！</p><h2 id="2050" class="mr ms iq bd mt mu mv dn mw mx my dp mz lf na nb nc lj nd ne nf ln ng nh ni nj bi translated">参考</h2><ul class=""><li id="de3a" class="ma mb iq ky b kz nk lc nl lf oq lj or ln os lr mf mg mh mi bi translated"><a class="ae kv" href="https://otexts.com/fpp2/" rel="noopener ugc nofollow" target="_blank">预测:原理与实践</a>。</li><li id="feb2" class="ma mb iq ky b kz mj lc mk lf ml lj mm ln mn lr mf mg mh mi bi translated"><a class="ae kv" href="https://www.r-bloggers.com/2017/02/is-my-time-series-additive-or-multiplicative/" rel="noopener ugc nofollow" target="_blank">我的时间序列是加法还是乘法？</a></li></ul></div></div>    
</body>
</html>