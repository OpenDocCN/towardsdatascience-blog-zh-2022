<html>
<head>
<title>Typical 8-Step A/B Test Workflow for Data Scientists in 2022</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">2022年数据科学家的典型8步A/B测试工作流程</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/typical-9-step-a-b-test-workflow-for-data-scientists-in-2022-d672c9a0d658#2022-04-16">https://towardsdatascience.com/typical-9-step-a-b-test-workflow-for-data-scientists-in-2022-d672c9a0d658#2022-04-16</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="df33" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">数据科学家在科技公司的A/B测试项目中所做工作的总结</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/e3c39adfddd8d48b11f6d54dc2c7b341.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*2pfEF5ht8xhulb7b"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">来源:<a class="ae kv" href="https://unsplash.com/photos/qwtCeJ5cLYs" rel="noopener ugc nofollow" target="_blank">斯蒂芬·道森在Unsplash上的文章</a></p></figure><h1 id="ae88" class="kw kx iq bd ky kz la lb lc ld le lf lg jw lh jx li jz lj ka lk kc ll kd lm ln bi translated">太长；不要读</h1><ul class=""><li id="8f86" class="lo lp iq lq b lr ls lt lu lv lw lx ly lz ma mb mc md me mf bi translated"><strong class="lq ir">实验启动前:</strong> (1)思考产品&amp;与产品经理交谈；(2)设计实验；(3)检查A/A变化<a class="ae kv" href="https://medium.com/p/d672c9a0d658#7ec6" rel="noopener"> </a>。</li><li id="afd8" class="lo lp iq lq b lr mg lt mh lv mi lx mj lz mk mb mc md me mf bi translated"><strong class="lq ir">实验期间:</strong> (4)检查不变度量&amp;实验设置；(5)监控关键评估指标。</li><li id="0cc9" class="lo lp iq lq b lr mg lt mh lv mi lx mj lz mk mb mc md me mf bi translated"><strong class="lq ir">实验结束后:</strong> (6)读取p值、差值大小、最小可检测效应(MDE <a class="ae kv" href="https://medium.com/p/d672c9a0d658#55e1" rel="noopener"> </a>)，惊讶时潜得更深；(7)制定产品建议；(8)写报告。</li></ul><h1 id="6eba" class="kw kx iq bd ky kz la lb lc ld le lf lg jw lh jx li jz lj ka lk kc ll kd lm ln bi translated">介绍</h1><p id="b09e" class="pw-post-body-paragraph ml mm iq lq b lr ls jr mn lt lu ju mo lv mp mq mr lx ms mt mu lz mv mw mx mb ij bi translated">本文旨在详细讨论数据科学家在A/B测试任务中具体应该做什么，以及哪一个应该是主要关注点。最好是已有t检验、最小样本量计算等A/B检验知识，并有兴趣学习实际工作场景中的流程的从业者。</p><h2 id="25ef" class="my kx iq bd ky mz na dn lc nb nc dp lg lv nd ne li lx nf ng lk lz nh ni lm nj bi translated">我为什么要写这个？/我们为什么要关心？</h2><p id="c3fc" class="pw-post-body-paragraph ml mm iq lq b lr ls jr mn lt lu ju mo lv mp mq mr lx ms mt mu lz mv mw mx mb ij bi translated">我觉得写这篇文章很有动力，因为我意识到在科技公司的日常实验实践和来自学校的A/B测试知识之间仍然存在差距。尽管理论论证全面，但大多数在线课程或文章，甚至是谷歌在Udacity  上进行的著名的<a class="ae kv" href="https://www.udacity.com/course/ab-testing--ud257" rel="noopener ugc nofollow" target="_blank"> <em class="nk"> A/B测试，都无法将这些点联系起来，并提出一个关于数据科学家如何在A/B测试中应用统计知识的整体程序。</em></a></p><p id="3f15" class="pw-post-body-paragraph ml mm iq lq b lr nl jr mn lt nm ju mo lv nn mq mr lx no mt mu lz np mw mx mb ij bi translated">此外，数据科学家如何进行A/B测试<strong class="lq ir">在最近几年发生了很大变化</strong>，从或多或少<strong class="lq ir">的体力劳动</strong>转变为<strong class="lq ir">广泛使用不同的工具</strong>。然而，管理工具可能令人望而生畏，尤其是当一个数据科学家被期望负责多个A/B测试时。</p><p id="e171" class="pw-post-body-paragraph ml mm iq lq b lr nl jr mn lt nm ju mo lv nn mq mr lx no mt mu lz np mw mx mb ij bi translated">这<strong class="lq ir">强调了清楚理解新工作流程</strong>的必要性，以及A/B测试工具的进步，这有助于我们保持组织性并提前计划。虽然受欢迎的<strong class="lq ir"> A/B测试平台</strong>承担了大部分计算工作，包括但不限于样本大小和p值，将数据科学家从列出统计公式和手工计算数字中解放出来，但至关重要的是，我们作为数据科学家将大部分时间<strong class="lq ir">花在思考产品和实验本身</strong>上，而不是<strong class="lq ir">被困在复杂的工具</strong>中来回重复工作。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/fd9a02a122d432f7d835e8324f2cd7ca.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*aU8Vvyb8KtkwmbXI"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">来源:<a class="ae kv" href="https://unsplash.com/photos/hpjSkU2UYSU" rel="noopener ugc nofollow" target="_blank">卡洛斯·穆扎关于Unsplash </a></p></figure></div><div class="ab cl nq nr hu ns" role="separator"><span class="nt bw bk nu nv nw"/><span class="nt bw bk nu nv nw"/><span class="nt bw bk nu nv"/></div><div class="ij ik il im in"><h1 id="f4ea" class="kw kx iq bd ky kz nx lb lc ld ny lf lg jw nz jx li jz oa ka lk kc ob kd lm ln bi translated">详细展开:典型的工作流程</h1><h2 id="657b" class="my kx iq bd ky mz na dn lc nb nc dp lg lv nd ne li lx nf ng lk lz nh ni lm nj bi translated">在实验开始之前</h2><p id="a75a" class="pw-post-body-paragraph ml mm iq lq b lr ls jr mn lt lu ju mo lv mp mq mr lx ms mt mu lz mv mw mx mb ij bi translated"><strong class="lq ir"> 1)思考产品&amp;与产品经理(PM)交谈</strong></p><p id="55e0" class="pw-post-body-paragraph ml mm iq lq b lr nl jr mn lt nm ju mo lv nn mq mr lx no mt mu lz np mw mx mb ij bi translated">从我的角度来看，这是整个A/B测试工作流程中最重要的事情。有两个关键方面需要彻底评估:<strong class="lq ir">可行性</strong>和<strong class="lq ir">影响</strong>。在详细探索了产品逻辑和用户旅程之后，我们将非常批判性地思考使用随机在线A/B测试来测试这个特性是否合适，甚至是否可行。要问的几个问题包括“<strong class="lq ir"> <em class="nk">假设是什么</em> </strong>”、“<strong class="lq ir"> <em class="nk">我们能找到可计算的指标来测试吗？</em> </strong>、<strong class="lq ir"> <em class="nk">我们的产品和用户有哪些风险？</em> </strong>、<em class="nk">有网络效应吗？</em>、<em class="nk">是否有可能让用户表现出强烈的新奇效果或者变化厌恶</em>、<em class="nk">让部分用户远离我们的新功能待遇</em>是否公平等。</p><p id="19ee" class="pw-post-body-paragraph ml mm iq lq b lr nl jr mn lt nm ju mo lv nn mq mr lx no mt mu lz np mw mx mb ij bi translated">此外，作为数据科学家，我们必须是<strong class="lq ir">影响驱动的</strong>而不是<strong class="lq ir">输出驱动的</strong>，这意味着我们应该关注这项功能测试的潜在收益或投资回报(ROI)。<strong class="lq ir"> <em class="nk">我们为什么需要这个？</em> </strong>“，”<strong class="lq ir"> <em class="nk">我们的预期收益是什么，是短期的还是长期的？</em> </strong>“是我们应该问自己并与产品经理辩论的一些关键问题。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oc"><img src="../Images/94ec3ed0a64ecbafb5e8f30680c3c86d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*--NXoCqkBUNpHIat"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">为什么我们需要把按钮换成更亮的颜色？衡量标准是什么(例如，两个按钮的点击率，落选率)？会不会太打扰用户？长期有益吗？<a class="ae kv" href="https://www.leanplum.com/platform/optimization/#" rel="noopener ugc nofollow" target="_blank">资料来源:Leanplum </a></p></figure><p id="62df" class="pw-post-body-paragraph ml mm iq lq b lr nl jr mn lt nm ju mo lv nn mq mr lx no mt mu lz np mw mx mb ij bi translated"><strong class="lq ir"> 2)设计实验</strong></p><p id="011a" class="pw-post-body-paragraph ml mm iq lq b lr nl jr mn lt nm ju mo lv nn mq mr lx no mt mu lz np mw mx mb ij bi translated">基于1)中的假设，我们作为数据科学家为产品经理和工程师提供设计实验的建议，包括但不限于:</p><ul class=""><li id="5123" class="lo lp iq lq b lr nl lt nm lv od lx oe lz of mb mc md me mf bi translated"><strong class="lq ir">评估指标:</strong>我们的北极星指标、直接影响指标、护栏指标和治疗组的采用指标是什么。除了业务解释之外，评估指标最好具有<strong class="lq ir">较低的方差</strong>和<strong class="lq ir">对变化的敏感性</strong>。</li><li id="4356" class="lo lp iq lq b lr mg lt mh lv mi lx mj lz mk mb mc md me mf bi translated"><strong class="lq ir">分流单位:</strong>我们是基于user_id还是session_id随机化测试？</li><li id="7cc2" class="lo lp iq lq b lr mg lt mh lv mi lx mj lz mk mb mc md me mf bi translated"><strong class="lq ir">最小所需样本:</strong>对于不同的评估指标和各种最小可检测效应(MDE)，要使结果具有统计显著性，所需的样本量是多少？如今，大多数大型科技公司都提供了成熟的工具来计算样本大小，<strong class="lq ir">但是，当感兴趣的指标过于具体且不被A/B测试平台支持时，我们往往不得不检索历史数据并自行计算</strong>。</li><li id="754d" class="lo lp iq lq b lr mg lt mh lv mi lx mj lz mk mb mc md me mf bi translated"><strong class="lq ir">实验持续时间&amp;流量部分:</strong>这通常取决于所需的样本大小和可能看到新功能的合格流量大小。我们也将考虑到实验的风险。</li><li id="d0ee" class="lo lp iq lq b lr mg lt mh lv mi lx mj lz mk mb mc md me mf bi translated"><strong class="lq ir">实验层&amp;实验类型:</strong>此外，我们将确定在哪个实验层部署我们的A/B测试。常见的情况是，大多数实验层已经被其他测试填充，导致剩下的流量非常少。在这种情况下，如果我们的特征与其他特征不相关，我们可能希望选择另一层或考虑正交实验。</li></ul><p id="fd06" class="pw-post-body-paragraph ml mm iq lq b lr nl jr mn lt nm ju mo lv nn mq mr lx no mt mu lz np mw mx mb ij bi translated"><strong class="lq ir"> 3)检查A/A变化</strong></p><p id="3f37" class="pw-post-body-paragraph ml mm iq lq b lr nl jr mn lt nm ju mo lv nn mq mr lx no mt mu lz np mw mx mb ij bi translated">与以往不同的是，2022年大部分A/B测试平台已经将这一过程自动化，需要的劳动力非常少。我们需要做的是检查模拟/模拟变化输出，并确保一切如预期一样——模拟/模拟的p值是均匀分布的。</p></div><div class="ab cl nq nr hu ns" role="separator"><span class="nt bw bk nu nv nw"/><span class="nt bw bk nu nv nw"/><span class="nt bw bk nu nv"/></div><div class="ij ik il im in"><h2 id="09c0" class="my kx iq bd ky mz na dn lc nb nc dp lg lv nd ne li lx nf ng lk lz nh ni lm nj bi translated">在实验中</h2><p id="c6fc" class="pw-post-body-paragraph ml mm iq lq b lr ls jr mn lt lu ju mo lv mp mq mr lx ms mt mu lz mv mw mx mb ij bi translated"><strong class="lq ir"> 4)检查不变指标&amp;实验设置</strong></p><p id="59a4" class="pw-post-body-paragraph ml mm iq lq b lr nl jr mn lt nm ju mo lv nn mq mr lx no mt mu lz np mw mx mb ij bi translated">这正是我们开始将我们的分析从<strong class="lq ir">离线过渡到在线A/B测试平台</strong>的阶段。在实验过程中，数据科学家要做的第一件事就是反复检查实验是否设置良好。具体来说，我指的是确保处理组中的用户看到所有预期的处理过的特性。在科技公司中有很多这样的例子，实验参数是错误的，没有人及时发现，导致时间和流量的巨大损失。<em class="nk">这在广告场景中更糟糕，我们使用广告商购买的流量进行A/B测试，但最终由于错误的参数(个人经验…)而破坏了实验</em>。</p><p id="d94f" class="pw-post-body-paragraph ml mm iq lq b lr nl jr mn lt nm ju mo lv nn mq mr lx no mt mu lz np mw mx mb ij bi translated">第二件事是探索不变指标并确保两件事:(1) <strong class="lq ir">交通的转向是随机的</strong> ( <em class="nk">我们通常使用卡方检验来检查对照组和治疗组的总体</em>)；(2) <strong class="lq ir">用户资料(如性别、年龄)在不同群体中的分布是一致的</strong>(大多数平台会为我们计算这些资料，点击几下就可以轻松显示出来)。</p><p id="acec" class="pw-post-body-paragraph ml mm iq lq b lr nl jr mn lt nm ju mo lv nn mq mr lx no mt mu lz np mw mx mb ij bi translated"><strong class="lq ir"> 5)监控关键评估指标</strong></p><p id="dbc1" class="pw-post-body-paragraph ml mm iq lq b lr nl jr mn lt nm ju mo lv nn mq mr lx no mt mu lz np mw mx mb ij bi translated">尽管样本通常不足以解释最初几天的统计意义，但有必要密切跟踪治疗组和对照组之间的描述性差异。如果关键指标和护栏指标持续大幅下降，为了我们的产品和用户的利益，我们应该考虑后退一步，重新评估实验，因为负面的显著结果很可能只是时间问题。</p></div><div class="ab cl nq nr hu ns" role="separator"><span class="nt bw bk nu nv nw"/><span class="nt bw bk nu nv nw"/><span class="nt bw bk nu nv"/></div><div class="ij ik il im in"><h2 id="b827" class="my kx iq bd ky mz na dn lc nb nc dp lg lv nd ne li lx nf ng lk lz nh ni lm nj bi translated">实验结束后</h2><p id="7b13" class="pw-post-body-paragraph ml mm iq lq b lr ls jr mn lt lu ju mo lv mp mq mr lx ms mt mu lz mv mw mx mb ij bi translated"><strong class="lq ir"> 6)读取P值&amp;差值的大小&amp;最小可检测效应，惊讶时更深入</strong></p><p id="86b6" class="pw-post-body-paragraph ml mm iq lq b lr nl jr mn lt nm ju mo lv nn mq mr lx no mt mu lz np mw mx mb ij bi translated">数据科学家收集治疗组和对照组之间的描述性差异以及p值。此外，我建议<strong class="lq ir">重新审视我们的产品假设</strong>和<strong class="lq ir">评估我们是否对实验结果</strong>感到惊讶。如果没有，我们可以进行下一步。但是，如果我们确实发现了超出我们预期的东西(<em class="nk">例如，差异应该是显著正的，但不是显著或显著负的</em>)，我们应该通过将其分解为关键业务维度(<strong class="lq ir">例如，新/老用户、渠道、地理区域</strong>)来更深入地了解原因。</p><p id="388d" class="pw-post-body-paragraph ml mm iq lq b lr nl jr mn lt nm ju mo lv nn mq mr lx no mt mu lz np mw mx mb ij bi translated">值得注意的是，结果不显著的常见原因是<strong class="lq ir">统计能力不足。</strong>除了增加样本量，我们还可以用<strong class="lq ir">较小方差</strong>或<a class="ae kv" rel="noopener" target="_blank" href="/how-to-double-a-b-testing-speed-with-cuped-f80460825a90">T5】CUPED(<em class="nk">使用已有数据的受控实验</em> ) </a>方法尝试其他指标。此外，比较<strong class="lq ir">经验MDE </strong> ( <em class="nk">为了产生显著结果，差异应该有多大，通常由平台</em>提供)和关键指标的<strong class="lq ir">实际差异</strong>通常会揭示指标的不稳定性。这在未来研究用户行为或设计类似实验时是一个很好的参考。</p><p id="ccb0" class="pw-post-body-paragraph ml mm iq lq b lr nl jr mn lt nm ju mo lv nn mq mr lx no mt mu lz np mw mx mb ij bi translated"><strong class="lq ir"> 7)制定产品建议</strong></p><p id="1255" class="pw-post-body-paragraph ml mm iq lq b lr nl jr mn lt nm ju mo lv nn mq mr lx no mt mu lz np mw mx mb ij bi translated">收集完所有数据后，我们可以开始制定实验结论，并得出产品建议，即我们是应该逐渐将更多流量用于治疗，还是选择更保守的策略。</p><p id="c447" class="pw-post-body-paragraph ml mm iq lq b lr nl jr mn lt nm ju mo lv nn mq mr lx no mt mu lz np mw mx mb ij bi translated">8)写报告</p><p id="2397" class="pw-post-body-paragraph ml mm iq lq b lr nl jr mn lt nm ju mo lv nn mq mr lx no mt mu lz np mw mx mb ij bi translated">最后，数据科学家需要撰写并归档一份报告，内容包括(1)产品背景和特性假设；(2)实验辞职；(3)结果分析；以及(4)产品推荐。</p><h1 id="9fb2" class="kw kx iq bd ky kz la lb lc ld le lf lg jw lh jx li jz lj ka lk kc ll kd lm ln bi translated">摘要</h1><p id="0d18" class="pw-post-body-paragraph ml mm iq lq b lr ls jr mn lt lu ju mo lv mp mq mr lx ms mt mu lz mv mw mx mb ij bi translated">上述8步A/B测试工作流程有助于最大限度地减少实质性错误，并确保可信的受控实验。不同的科技公司可能在细节上有所不同，但这可以被视为一个总体框架，以便我们可以节省更多的时间<strong class="lq ir">探索重要的产品问题</strong>(这是数据科学家的核心价值观之一，对个人成长最有成效)，而不是<strong class="lq ir">解决程序问题</strong>。</p><h1 id="a00e" class="kw kx iq bd ky kz la lb lc ld le lf lg jw lh jx li jz lj ka lk kc ll kd lm ln bi translated">注意</h1><ol class=""><li id="7ec6" class="lo lp iq lq b lr ls lt lu lv lw lx ly lz ma mb og md me mf bi translated"><strong class="lq ir"> A/A变异:</strong> A/A变异是一个对照组(A组)和另一个对照组(~ A组)之间关键指标的差异。由于两者之间没有实际差异，A/A变化预计不会以统计上显著的方式偏离0。</li><li id="55e1" class="lo lp iq lq b lr mg lt mh lv mi lx mj lz mk mb og md me mf bi translated"><strong class="lq ir">最小可检测效应(MDE): </strong> MDE衡量的是我们希望在受控实验中检测到的相对于基线的最小改善。</li></ol></div></div>    
</body>
</html>