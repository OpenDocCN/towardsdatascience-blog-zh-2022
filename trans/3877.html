<html>
<head>
<title>PII anonymization made easy by Presidio</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">通过Presidio简化PII匿名化</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/building-a-customized-pii-anonymizer-with-microsoft-presidio-b5c2ddfe523b#2022-08-29">https://towardsdatascience.com/building-a-customized-pii-anonymizer-with-microsoft-presidio-b5c2ddfe523b#2022-08-29</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="d708" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">匿名化的背景以及如何构建匿名器</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/f513f4633ed15ab36164d32d1810e261.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*PpyoC1HLJAHHa3D6"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">马库斯·斯皮斯克在<a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</p></figure><p id="4a1d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">随着欧洲GDPR法案的实施，各种法规纷纷出台，正确处理敏感信息，特别是<strong class="ky ir">个人身份信息(PII) </strong>成为许多公司的一项要求。在本文中，我们将讨论什么是PII，以及如何在非结构化数据(尤其是文本)中匿名化PII。我们还将使用Microsoft Presidio演示一个文本匿名器的示例实现，这是一个提供快速PII识别和匿名化模块的开源库。本文分为以下几个部分:</p><ol class=""><li id="c649" class="ls lt iq ky b kz la lc ld lf lu lj lv ln lw lr lx ly lz ma bi translated"><a class="ae kv" href="#1c5b" rel="noopener ugc nofollow">背景:隐私和匿名</a></li><li id="562b" class="ls lt iq ky b kz mb lc mc lf md lj me ln mf lr lx ly lz ma bi translated"><a class="ae kv" href="#ebe1" rel="noopener ugc nofollow">现有的匿名技术</a></li><li id="119b" class="ls lt iq ky b kz mb lc mc lf md lj me ln mf lr lx ly lz ma bi translated"><a class="ae kv" href="#beb7" rel="noopener ugc nofollow">用微软Presidio定制PII匿名器</a></li><li id="7b51" class="ls lt iq ky b kz mb lc mc lf md lj me ln mf lr lx ly lz ma bi translated"><a class="ae kv" href="#f6d7" rel="noopener ugc nofollow">结论、链接和参考文献</a></li></ol><p id="959a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">跳到任何你觉得最有趣的部分！</p></div><div class="ab cl mg mh hu mi" role="separator"><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml"/></div><div class="ij ik il im in"><h1 id="1c5b" class="mn mo iq bd mp mq mr ms mt mu mv mw mx jw my jx mz jz na ka nb kc nc kd nd ne bi translated">背景</h1><p id="3b16" class="pw-post-body-paragraph kw kx iq ky b kz nf jr lb lc ng ju le lf nh lh li lj ni ll lm ln nj lp lq lr ij bi translated">早在19世纪50年代，当美国人口普查局开始从公开的美国公民人口普查数据中删除个人数据时，就已经研究并应用了数据保护和隐私保护技术。自从早期使用诸如添加随机噪声或聚集的简单技术以来，已经提出并改进了各种模型。隐私是一项基本人权。根据字典的定义，它是</p><blockquote class="nk nl nm"><p id="9ae9" class="kw kx nn ky b kz la jr lb lc ld ju le no lg lh li np lk ll lm nq lo lp lq lr ij bi translated">个人或团体封闭自己或关于自己的信息，从而有选择地表达自己的能力。</p></blockquote><p id="1bfc" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">哪些个人信息被视为敏感信息，可能会损害个人隐私？欧盟在2018年出台了最严厉的隐私与安全法<a class="ae kv" href="https://gdpr.eu/what-is-gdpr/" rel="noopener ugc nofollow" target="_blank"> <strong class="ky ir">【通用数据保护条例</strong> </a> <strong class="ky ir"> (GDPR) </strong>。GDPR将个人数据定义为</p><blockquote class="nk nl nm"><p id="2953" class="kw kx nn ky b kz la jr lb lc ld ju le no lg lh li np lk ll lm nq lo lp lq lr ij bi translated">“与可直接或间接识别的个人相关的任何信息。姓名和电子邮件地址显然是个人数据。位置信息、种族、性别、生物特征数据、宗教信仰、网络cookies和政治观点也可以是个人数据。”</p></blockquote><p id="8b4e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">根据一条信息是否可以直接或间接用于重新识别个人，人们可以将上述信息分为<strong class="ky ir">直接识别符</strong>和<strong class="ky ir">准识别符</strong>。<a class="ae kv" href="#61d8" rel="noopener ugc nofollow"> </a></p><blockquote class="nk nl nm"><p id="6714" class="kw kx nn ky b kz la jr lb lc ld ju le no lg lh li np lk ll lm nq lo lp lq lr ij bi translated">-直接标识符:个人独有的一组变量(姓名、地址、电话号码或银行账户)，可用于直接识别主体。</p><p id="5ff2" class="kw kx nn ky b kz la jr lb lc ld ju le no lg lh li np lk ll lm nq lo lp lq lr ij bi translated">-准识别信息:单独使用时无法重新识别的信息(如性别、国籍或居住城市)，但与其他准识别信息和背景知识结合使用时可能会重新识别。</p></blockquote></div><div class="ab cl mg mh hu mi" role="separator"><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml"/></div><div class="ij ik il im in"><h1 id="ebe1" class="mn mo iq bd mp mq mr ms mt mu mv mw mx jw my jx mz jz na ka nb kc nc kd nd ne bi translated">现有的匿名技术</h1><p id="96e6" class="pw-post-body-paragraph kw kx iq ky b kz nf jr lb lc ng ju le lf nh lh li lj ni ll lm ln nj lp lq lr ij bi translated">数据保护法规让公司和个人在利用数据获得洞察力和保护隐私之间不断斗争。但是，匿名化技术可以应用于数据集，因此不可能识别特定的个人。这样，这些数据集将不再受数据保护法规的保护。</p><p id="a0ed" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir">匿名结构化数据</strong></p><p id="cd26" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">当涉及到结构化数据的匿名化时，有一些已建立的隐私数学模型，如K-匿名或差分隐私。</p><p id="e3e5" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">K-anonymous于1998年由Pierangela Samarati和Latanya Sweeney提出。如果在数据集中，一个人包含的每个信息不能与至少k-1个其他个体区分开来，则屏蔽数据集具有<em class="nn">k-匿名性</em>属性。有两种方法可以用来实现k-匿名。一个是<em class="nn">抑制</em>，从数据集中完全删除一个属性的值；还有一种是<em class="nn">泛化</em>，用一个更一般的值替换一个属性的特定值。</p><p id="849e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir">L-多样性</strong>是<em class="nn">k-匿名</em>的进一步扩展。如果我们将数据集中具有相同准标识符的多组行放在一起，那么每个敏感属性至少有<em class="nn"> l </em>个不同的值，那么我们可以说这个数据集具有<em class="nn"> l多样性。</em></p><p id="5b32" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">微软研究院的Cynthia Dwork于2006年引入了差分隐私。<a class="ae kv" href="#752b" rel="noopener ugc nofollow">换句话说，仅仅通过观察差分私有分析的输出，人们不能肯定地说一个特定的个体是否在数据集中。有了差分隐私，我们可以了解关于一个群体的有用信息，而不知道关于一个个体的信息。</a></p><p id="6978" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">计算数据集统计数据(如平均值、方差)或执行某些聚合的算法可以被视为差分私有算法。也可以通过在数据中添加噪声来实现。差分隐私使用参数ε来调节隐私和数据集有用性之间的权衡。</p><p id="43a2" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">还有一些众所周知的技术可应用于结构化数据库的匿名化:</p><ul class=""><li id="5fc4" class="ls lt iq ky b kz la lc ld lf lu lj lv ln lw lr nr ly lz ma bi translated"><strong class="ky ir">屏蔽</strong>:删除、加密或隐藏私有标识符</li><li id="7f2a" class="ls lt iq ky b kz mb lc mc lf md lj me ln mf lr nr ly lz ma bi translated"><strong class="ky ir">假名化</strong>:用假名或假值替换私有标识符</li><li id="f790" class="ls lt iq ky b kz mb lc mc lf md lj me ln mf lr nr ly lz ma bi translated"><strong class="ky ir">泛化</strong>:用一个更通用的值替换一个特定的标识符值</li><li id="49e6" class="ls lt iq ky b kz mb lc mc lf md lj me ln mf lr nr ly lz ma bi translated"><strong class="ky ir">交换</strong>:交换数据集的属性值，使它们与原来的不同</li><li id="3baa" class="ls lt iq ky b kz mb lc mc lf md lj me ln mf lr nr ly lz ma bi translated"><strong class="ky ir">扰动</strong>:通过引入随机噪声或使用随机方法改变数据</li></ul><p id="d149" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir">匿名化非结构化数据</strong></p><p id="08b4" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">对文本或图像等非结构化数据进行匿名化的过程更具挑战性。它需要检测非结构化数据中敏感信息的位置，然后对其应用匿名技术。由于非结构化数据的性质，直接使用简单的基于规则的模型可能不会有很好的性能。例外情况是电子邮件或电话号码，它们可以通过基于模式的方法(如RegEx)非常有效地检测和匿名。其他挑战包括不同国家的识别资料类型不同。因此，很难设计一个适用于所有用例的通用系统。典型的标识符类型包括上面提到的内容—姓名、电子邮件、驾驶执照等。除此之外，你可以在这里找到一个关于敏感信息类型的详尽列表<a class="ae kv" href="https://docs.microsoft.com/en-us/microsoft-365/compliance/sensitive-information-type-entity-definitions?view=o365-worldwide" rel="noopener ugc nofollow" target="_blank">。</a></p><p id="253f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">除了基于规则的方法，自然语言处理(NLP)技术也被应用于文本匿名化。特别是用于命名实体识别(NER)任务的技术。这是一种序列标记任务。在这种情况下，标签指示令牌(如单词)是否对应于命名实体，如<em class="nn">人、</em> <em class="nn">地点、</em>或<em class="nn">日期</em>。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ns"><img src="../Images/224cc8b786cb6a28c5e5bc0874e097c2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*cnHf-gLXPbgn2NWdSx-Hvw.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">命名实体识别(图片由作者提供)</p></figure><p id="4611" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">几个神经模型已经在具有一般命名实体的数据集上的NER任务上实现了最先进的性能。当他们在包含各种类型的个人信息的医疗领域数据上接受培训时，他们在这些数据上也表现出了最先进的性能。这些模型架构包括带有字符嵌入的递归神经网络<a class="ae kv" href="#6635" rel="noopener ugc nofollow"> ⁴ </a>或双向变压器<a class="ae kv" href="#c3ea" rel="noopener ugc nofollow"> ⁵ </a>。<a class="ae kv" href="https://spacy.io/" rel="noopener ugc nofollow" target="_blank"> SpaCy </a>也有一款NER车型。它是一个在Ontonotes数据集上微调的<a class="ae kv" href="https://arxiv.org/abs/1907.11692" rel="noopener ugc nofollow" target="_blank"> RoBERTa </a>语言模型，有18个命名的实体类别，如<em class="nn"> PERSON </em>、<em class="nn"> GPE </em>、<em class="nn"> CARDINAL </em>、<em class="nn"> LOCATION、</em>等(实体类型<a class="ae kv" href="https://catalog.ldc.upenn.edu/docs/LDC2013T19/OntoNotes-Release-5.0.pdf" rel="noopener ugc nofollow" target="_blank">的完整列表见此处</a>)。另一个开箱即用的工具是<a class="ae kv" href="https://microsoft.github.io/presidio/" rel="noopener ugc nofollow" target="_blank"> Presidio </a>。这是一个由微软开发的匿名化SDK，依靠基于规则和基于NER的模型来检测和屏蔽PII。支持实体的列表可以在这里找到<a class="ae kv" href="https://microsoft.github.io/presidio/supported_entities/" rel="noopener ugc nofollow" target="_blank">。</a></p><p id="1d8e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">认出PII后会发生什么？</p><p id="926a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">一种方法是用虚拟值替换标识符。例如，如果在类似“<em class="nn">我的名字是Amy，我的号码是85562333 </em>”的句子中识别一个人的名字或电话号码，那么匿名化的文本可以是“<em class="nn">我的名字是&lt; PERSON_NAME &gt;，我的号码是&lt; PHONE_NUMBER &gt; </em>”。这种方法简单明了，但也有一些缺点。当对所有相同的实体类型使用一个值时，我们会丢失重要的信息。在这个例子中，我们不知道这个人的性别。根据匿名文本的用途，可能需要保留此类信息。或者当涉及到地址时，人们希望将地理分布保持在一定水平。</p><p id="5192" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">另一种方法是用代理值替换检测到的实体。可以从每个实体类型的预定列表中随机抽取，也可以根据某种规则抽取。还有一些Python包，如<a class="ae kv" href="https://github.com/joke2k/faker" rel="noopener ugc nofollow" target="_blank"> Faker </a>，可以生成合成地址或名称作为代理值。</p></div><div class="ab cl mg mh hu mi" role="separator"><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml"/></div><div class="ij ik il im in"><h1 id="beb7" class="mn mo iq bd mp mq mr ms mt mu mv mw mx jw my jx mz jz na ka nb kc nc kd nd ne bi translated">用微软Presidio定制PII匿名器</h1><p id="f4d5" class="pw-post-body-paragraph kw kx iq ky b kz nf jr lb lc ng ju le lf nh lh li lj ni ll lm ln nj lp lq lr ij bi translated">当我们将PII匿名化应用于现实世界的应用时，可能会有不同的业务需求，这使得直接使用预训练模型具有挑战性。例如，想象一下，挪威的一家公司找到你，希望你为他们开发一个文本匿名器。他们希望它支持在英语和挪威语文本中匿名化PII。除了常见的PII实体，您还需要检测遵循某些校验和规则的挪威国民ID号。预先训练的NER模型是很好的，但是如果不使用额外的标记数据来微调模型以获得良好的性能，您就不能轻松地添加新的实体类型。因此，拥有一个能够利用预训练模型并且易于定制和扩展功能的工具是很好的。</p><p id="b034" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><a class="ae kv" href="https://github.com/microsoft/presidio" rel="noopener ugc nofollow" target="_blank">微软Presidio </a>是一个开源的SDK，它就是这样做的。据他们说，</p><blockquote class="nk nl nm"><p id="d103" class="kw kx nn ky b kz la jr lb lc ld ju le no lg lh li np lk ll lm nq lo lp lq lr ij bi translated">Presidio支持针对特定业务需求的可扩展性和可定制性，允许组织通过民主化去身份识别技术和引入决策透明度，以更简单的方式保护隐私。</p></blockquote><p id="4a75" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">它有两个主要部分——分析器和匿名器<strong class="ky ir"/>。分析器是一个基于Python的服务，用于检测文本中的PII实体。它利用命名实体识别、正则表达式、基于规则的逻辑以及多语言相关上下文的校验和。例如，它为电子邮件和IP地址使用预定义的基于Regex模式的识别器，并使用SpaCy自然语言处理模型为命名实体构建识别器。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nt"><img src="../Images/f087d6dd0aeb850688622751fcdf2d68.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*LnbEczzesB9niRHZcu20kQ.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">Presidio分析仪(图片来自<a class="ae kv" href="https://microsoft.github.io/presidio/analyzer/" rel="noopener ugc nofollow" target="_blank"> Presidio文档</a></p></figure><p id="b3ea" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">匿名器也是一个基于python的服务。它通过应用某些操作符(如replace、mask和redact)将检测到的PII实体匿名化。默认情况下，它在文本中直接用实体类型替换检测PII，如<code class="fe nu nv nw nx b">&lt;EMAIL&gt;</code>或<code class="fe nu nv nw nx b">&lt;PHONE_NUMBER&gt;</code>。但是可以定制它，为不同类型的实体提供不同的匿名逻辑。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ny"><img src="../Images/aa9f3b150efc62c451d2a9fb64d3af59.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hdsCjIrnpjTs-1I_sZyiQA.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">Presidio匿名器(图片来自<a class="ae kv" href="https://microsoft.github.io/presidio/anonymizer/" rel="noopener ugc nofollow" target="_blank"> Presidio文档</a></p></figure><p id="38e7" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">首先，按照此处的说明<a class="ae kv" href="https://microsoft.github.io/presidio/installation/" rel="noopener ugc nofollow" target="_blank">安装Presidio后，使用它就像调用默认<code class="fe nu nv nw nx b">AnalyzerEngine</code>和<code class="fe nu nv nw nx b">AnonymizerEngine</code>一样简单:</a></p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nz oa l"/></div></figure><p id="3bda" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><code class="fe nu nv nw nx b">AnalyzerEngine</code>策划了对PII的侦查。它的一些最重要的属性包括:</p><ul class=""><li id="5d12" class="ls lt iq ky b kz la lc ld lf lu lj lv ln lw lr nr ly lz ma bi translated"><code class="fe nu nv nw nx b">registry</code> : <code class="fe nu nv nw nx b">RecognizerRegistry</code>它包含了所有要在文本上使用的预定义或定制的识别器</li><li id="8edc" class="ls lt iq ky b kz mb lc mc lf md lj me ln mf lr nr ly lz ma bi translated"><code class="fe nu nv nw nx b">nlp_engine</code>:NLP模块的抽象，包括对文本中的标记的处理功能</li><li id="d3e4" class="ls lt iq ky b kz mb lc mc lf md lj me ln mf lr nr ly lz ma bi translated"><code class="fe nu nv nw nx b">supported_languages</code>:支持的语言列表</li></ul><p id="8dd7" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">对于我们前面提到的场景，使用默认的分析器是不够的，我们需要通过添加以下定制来定制我们自己的分析器引擎。</p><p id="2f19" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir"> 1。附加语言支持</strong></p><p id="a41f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">默认情况下，Presidio使用英文文本。但是因为在我们的例子中我们也将处理挪威语文本，我们需要将挪威语添加到Presidio的<code class="fe nu nv nw nx b">NlpEngineProvider</code>的配置中。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nz oa l"/></div></figure><p id="3244" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这是SpaCy上的<a class="ae kv" href="https://spacy.io/models/nb#nb_core_news_md" rel="noopener ugc nofollow" target="_blank">挪威语模型</a>管道。在运行分析器之前，还需要下载语言模型。</p><p id="db91" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir"> 2。添加挪威电话号码识别器</strong></p><p id="91bf" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">Presidio中有一组预定义的识别器。此处见详细实体列表<a class="ae kv" href="https://microsoft.github.io/presidio/supported_entities/" rel="noopener ugc nofollow" target="_blank">。我们可以选择加载部分或全部。Presidio的一个优点是很容易添加适合自己用例的识别器。在下面的示例中，我们为以+47国家代码开头的挪威电话号码添加了一个识别器，因为默认的电话号码识别器不支持所有的国家代码。</a></p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nz oa l"/></div></figure><p id="7bcd" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir"> 3。添加挪威国家ID识别器</strong></p><p id="8414" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">挪威身份证号码包含一个人的生日和一些遵循一定规则的数字(参见详细规则<a class="ae kv" href="https://docs.microsoft.com/en-us/microsoft-365/compliance/sit-defn-norway-identification-number?view=o365-worldwide" rel="noopener ugc nofollow" target="_blank">此处</a>)。我们可以为挪威语ID识别器创建一个类，它以如下方式从Presidio扩展了<code class="fe nu nv nw nx b">EntityRecognizer</code>:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nz oa l"/></div></figure><p id="ac70" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">最后，将所有东西放在一起，我们就有了我们定制的分析仪:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nz oa l"/></div></figure><p id="e2db" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">当我们运行分析器来分析一段文本时(通过调用<code class="fe nu nv nw nx b">analyzer.analyze(text)</code>，可选地给出要识别的实体类型列表)，文本将通过我们定义的识别器管道。我们可以添加三种主要类型的识别器——基于模式的识别器、基于规则的识别器和外部识别器。在这个例子中，我们需要添加基于规则的识别器。基于规则的识别器利用NLP工件，这些工件是由NLP引擎产生的用于识别PII的令牌相关信息，例如词条、POS标签或实体。</p><p id="f9f2" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">对于已识别的PII，它将返回包含详细信息的字典:</p><pre class="kg kh ki kj gt ob nx oc od aw oe bi"><span id="7299" class="of mo iq nx b gy og oh l oi oj">{<br/>  'entity_type': 'NORWEGIAN_ID',<br/>  'start': 74,<br/>  'end': 85,<br/>  'score': 0.95<br/>}</span></pre><p id="9a0b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在匿名化方面，我们可以通过文本中的类型<code class="fe nu nv nw nx b">&lt;NORWEGIAN_ID&gt;</code>直接屏蔽PII实体，得到类似“我的id是&lt; NORWEGIAN_ID &gt;”的内容，或者我们可以向<code class="fe nu nv nw nx b">Anonymizer</code>提供一个自定义操作符的字典。例如，我们可以创建一个随机的11位数字来替换ID。此外，我们还可以使用<code class="fe nu nv nw nx b">faker</code>之类的包来生成合成名称。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nz oa l"/></div></figure><p id="f529" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir">用一些例子测试匿名器</strong></p><p id="b4b0" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">为了测试匿名器的性能，我们从LinkedIn上找到了挪威语和英语的招聘信息。他们通常有许多PII实体。下面显示了一些示例文本(注意:这里发布的是经过编辑的版本，所以它们不包含任何真实的标识符)。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nz oa l"/></div></figure><p id="3554" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">将样本文本提交到我们的匿名管道，我们获得了以下结果:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nz oa l"/></div></figure><p id="db59" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">正如我们所见，对于英文文本，匿名器具有非常好的性能，可以检测所有的姓名、电子邮件和电话号码。对于文本语法合适的挪威语文本，检测性能也很好。然而，当谈到不是正确句子的挪威语文本时，例如第4个例子，我们可以看到它有点纠结，把电话号码和日期搞混了。对于那些对更详细的性能评估感兴趣的人，请查看<a class="ae kv" href="https://aclanthology.org/2021.acl-long.323.pdf" rel="noopener ugc nofollow" target="_blank">这篇论文</a>，其中他们进行了一项研究，将Presidio应用于一个来自维基百科文本的小型人工标注数据集。</p></div><div class="ab cl mg mh hu mi" role="separator"><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml"/></div><div class="ij ik il im in"><h1 id="f6d7" class="mn mo iq bd mp mq mr ms mt mu mv mw mx jw my jx mz jz na ka nb kc nc kd nd ne bi translated">结论</h1><p id="dba0" class="pw-post-body-paragraph kw kx iq ky b kz nf jr lb lc ng ju le lf nh lh li lj ni ll lm ln nj lp lq lr ij bi translated">在本文中，我们讨论了隐私和PII的背景，并展示了如何使用<code class="fe nu nv nw nx b">Presidio</code>来构建一个定制的PII匿名器。在真实文本上的结果是有希望的。我们还可以进一步改进。我们可以用一个更强大的语言模型来替换底层语言模型，以便在NER上获得更好的性能。为了识别更多由不同国家定义的PII实体，我们还可以添加更多基于规则的识别器。</p><p id="ed78" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir">最终备注:</strong></p><p id="d52d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我在<a class="ae kv" href="https://www.crayon.com/no/" rel="noopener ugc nofollow" target="_blank">蜡笔小组</a>的<a class="ae kv" href="https://inmeta.no/" rel="noopener ugc nofollow" target="_blank"> Inmeta </a>做数据科学顾问。我们看到越来越多的客户对正确处理PII感兴趣，所以我们非常感谢像Presidio这样的好的开源库，它使我们能够利用最先进的技术来解决这个问题。</p><p id="11da" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在我的<a class="ae kv" href="https://github.com/lz-chen/pii_anonymizer" rel="noopener ugc nofollow" target="_blank"> Github库</a>中查看定制匿名器的完整实现。它还包括将它作为Docker应用程序运行并将其部署到AWS的脚本。感谢您阅读文章！我很想听听你对这个话题的看法！请随时在LinkedIn 上与我联系。</p></div><div class="ab cl mg mh hu mi" role="separator"><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml"/></div><div class="ij ik il im in"><h1 id="f00e" class="mn mo iq bd mp mq mr ms mt mu mv mw mx jw my jx mz jz na ka nb kc nc kd nd ne bi translated">参考</h1><ol class=""><li id="61d8" class="ls lt iq ky b kz nf lc ng lf ok lj ol ln om lr lx ly lz ma bi translated"><a class="ae kv" href="#8b4e" rel="noopener ugc nofollow"> ^ </a>《文本数据的匿名化模型:现状、挑战和未来方向》(2021年)。计算语言学协会第59届年会暨第11届国际自然语言处理联合会议论文集</li><li id="c3db" class="ls lt iq ky b kz mb lc mc lf md lj me ln mf lr lx ly lz ma bi translated"><a class="ae kv" href="#e3e5" rel="noopener ugc nofollow"> ^ </a>皮耶安吉拉·萨马拉蒂和拉坦娅·斯威尼，《披露信息时保护隐私:k-匿名及其通过推广和抑制的实施》(1998年)。技术报告，SRI国际</li><li id="752b" class="ls lt iq ky b kz mb lc mc lf md lj me ln mf lr lx ly lz ma bi translated"><a class="ae kv" href="#5b32" rel="noopener ugc nofollow"> ^ </a>辛西娅·德沃克、弗兰克·麦克雪莉、科比·尼斯姆和亚当·斯密，《在私人数据分析中校准噪声与灵敏度》(2006年)。密码学理论</li><li id="6635" class="ls lt iq ky b kz mb lc mc lf md lj me ln mf lr lx ly lz ma bi translated"><a class="ae kv" href="#4611" rel="noopener ugc nofollow"> ^ </a> Franck Dernoncourt，Ji Young Lee，Ozlem Uzuner和Peter Szolovits，使用递归神经网络对患者病历进行去识别(2017)。美国医学信息学协会杂志</li><li id="c3ea" class="ls lt iq ky b kz mb lc mc lf md lj me ln mf lr lx ly lz ma bi translated"><a class="ae kv" href="#4611" rel="noopener ugc nofollow"> ^ </a> Alistair EW Johnson、Lucas Bulgarelli和tom j pollard，使用预先训练的双向转换器对自由文本医疗记录进行去识别(2020)。美国计算机学会健康、推理和学习会议录</li></ol></div></div>    
</body>
</html>